(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function YC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var oy={exports:{}},vu={};var pw;function QC(){if(pw)return vu;pw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return vu.Fragment=e,vu.jsx=t,vu.jsxs=t,vu}var yw;function WC(){return yw||(yw=1,oy.exports=QC()),oy.exports}var b=WC(),ly={exports:{}},ze={};var _w;function XC(){if(_w)return ze;_w=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function V(F,Y,J){this.props=F,this.context=Y,this.refs=O,this.updater=J||E}V.prototype.isReactComponent={},V.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=V.prototype;function U(F,Y,J){this.props=F,this.context=Y,this.refs=O,this.updater=J||E}var H=U.prototype=new q;H.constructor=U,N(H,V.prototype),H.isPureReactComponent=!0;var K=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function T(F,Y,J){var ie=J.ref;return{$$typeof:r,type:F,key:Y,ref:ie!==void 0?ie:null,props:J}}function R(F,Y){return T(F.type,Y,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function j(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(J){return Y[J]})}var C=/\/+/g;function G(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?j(""+F.key):Y.toString(36)}function te(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(z,z):(F.status="pending",F.then(function(Y){F.status==="pending"&&(F.status="fulfilled",F.value=Y)},function(Y){F.status==="pending"&&(F.status="rejected",F.reason=Y)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function P(F,Y,J,ie,re){var _e=typeof F;(_e==="undefined"||_e==="boolean")&&(F=null);var Se=!1;if(F===null)Se=!0;else switch(_e){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(F.$$typeof){case r:case e:Se=!0;break;case g:return Se=F._init,P(Se(F._payload),Y,J,ie,re)}}if(Se)return re=re(F),Se=ie===""?"."+G(F,0):ie,K(re)?(J="",Se!=null&&(J=Se.replace(C,"$&/")+"/"),P(re,Y,J,"",function(Ke){return Ke})):re!=null&&(k(re)&&(re=R(re,J+(re.key==null||F&&F.key===re.key?"":(""+re.key).replace(C,"$&/")+"/")+Se)),Y.push(re)),1;Se=0;var De=ie===""?".":ie+":";if(K(F))for(var Re=0;Re<F.length;Re++)ie=F[Re],_e=De+G(ie,Re),Se+=P(ie,Y,J,_e,re);else if(Re=w(F),typeof Re=="function")for(F=Re.call(F),Re=0;!(ie=F.next()).done;)ie=ie.value,_e=De+G(ie,Re++),Se+=P(ie,Y,J,_e,re);else if(_e==="object"){if(typeof F.then=="function")return P(te(F),Y,J,ie,re);throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Se}function D(F,Y,J){if(F==null)return F;var ie=[],re=0;return P(F,ie,"","",function(_e){return Y.call(J,_e,re++)}),ie}function Z(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(J){(F._status===0||F._status===-1)&&(F._status=1,F._result=J)},function(J){(F._status===0||F._status===-1)&&(F._status=2,F._result=J)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ee={map:D,forEach:function(F,Y,J){D(F,function(){Y.apply(this,arguments)},J)},count:function(F){var Y=0;return D(F,function(){Y++}),Y},toArray:function(F){return D(F,function(Y){return Y})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ze.Activity=y,ze.Children=ee,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=U,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},ze.cache=function(F){return function(){return F.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(F,Y,J){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ie=N({},F.props),re=F.key;if(Y!=null)for(_e in Y.key!==void 0&&(re=""+Y.key),Y)!S.call(Y,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Y.ref===void 0||(ie[_e]=Y[_e]);var _e=arguments.length-2;if(_e===1)ie.children=J;else if(1<_e){for(var Se=Array(_e),De=0;De<_e;De++)Se[De]=arguments[De+2];ie.children=Se}return T(F.type,re,ie)},ze.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},ze.createElement=function(F,Y,J){var ie,re={},_e=null;if(Y!=null)for(ie in Y.key!==void 0&&(_e=""+Y.key),Y)S.call(Y,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(re[ie]=Y[ie]);var Se=arguments.length-2;if(Se===1)re.children=J;else if(1<Se){for(var De=Array(Se),Re=0;Re<Se;Re++)De[Re]=arguments[Re+2];re.children=De}if(F&&F.defaultProps)for(ie in Se=F.defaultProps,Se)re[ie]===void 0&&(re[ie]=Se[ie]);return T(F,_e,re)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(F){return{$$typeof:u,render:F}},ze.isValidElement=k,ze.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:Z}},ze.memo=function(F,Y){return{$$typeof:f,type:F,compare:Y===void 0?null:Y}},ze.startTransition=function(F){var Y=M.T,J={};M.T=J;try{var ie=F(),re=M.S;re!==null&&re(J,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(z,W)}catch(_e){W(_e)}finally{Y!==null&&J.types!==null&&(Y.types=J.types),M.T=Y}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(F){return M.H.use(F)},ze.useActionState=function(F,Y,J){return M.H.useActionState(F,Y,J)},ze.useCallback=function(F,Y){return M.H.useCallback(F,Y)},ze.useContext=function(F){return M.H.useContext(F)},ze.useDebugValue=function(){},ze.useDeferredValue=function(F,Y){return M.H.useDeferredValue(F,Y)},ze.useEffect=function(F,Y){return M.H.useEffect(F,Y)},ze.useEffectEvent=function(F){return M.H.useEffectEvent(F)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(F,Y,J){return M.H.useImperativeHandle(F,Y,J)},ze.useInsertionEffect=function(F,Y){return M.H.useInsertionEffect(F,Y)},ze.useLayoutEffect=function(F,Y){return M.H.useLayoutEffect(F,Y)},ze.useMemo=function(F,Y){return M.H.useMemo(F,Y)},ze.useOptimistic=function(F,Y){return M.H.useOptimistic(F,Y)},ze.useReducer=function(F,Y,J){return M.H.useReducer(F,Y,J)},ze.useRef=function(F){return M.H.useRef(F)},ze.useState=function(F){return M.H.useState(F)},ze.useSyncExternalStore=function(F,Y,J){return M.H.useSyncExternalStore(F,Y,J)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.2.3",ze}var vw;function Am(){return vw||(vw=1,ly.exports=XC()),ly.exports}var $=Am();const MT=YC($);var cy={exports:{}},bu={},uy={exports:{}},hy={};var bw;function JC(){return bw||(bw=1,(function(r){function e(P,D){var Z=P.length;P.push(D);e:for(;0<Z;){var W=Z-1>>>1,ee=P[W];if(0<s(ee,D))P[W]=D,P[Z]=ee,Z=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var D=P[0],Z=P.pop();if(Z!==D){P[0]=Z;e:for(var W=0,ee=P.length,F=ee>>>1;W<F;){var Y=2*(W+1)-1,J=P[Y],ie=Y+1,re=P[ie];if(0>s(J,Z))ie<ee&&0>s(re,J)?(P[W]=re,P[ie]=Z,W=ie):(P[W]=J,P[Y]=Z,W=Y);else if(ie<ee&&0>s(re,Z))P[W]=re,P[ie]=Z,W=ie;else break e}}return D}function s(P,D){var Z=P.sortIndex-D.sortIndex;return Z!==0?Z:P.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,E=!1,N=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function H(P){for(var D=t(f);D!==null;){if(D.callback===null)n(f);else if(D.startTime<=P)n(f),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(f)}}function K(P){if(N=!1,H(P),!E)if(t(d)!==null)E=!0,z||(z=!0,j());else{var D=t(f);D!==null&&te(K,D.startTime-P)}}var z=!1,M=-1,S=5,T=-1;function R(){return O?!0:!(r.unstable_now()-T<S)}function k(){if(O=!1,z){var P=r.unstable_now();T=P;var D=!0;try{e:{E=!1,N&&(N=!1,q(M),M=-1),w=!0;var Z=v;try{t:{for(H(P),y=t(d);y!==null&&!(y.expirationTime>P&&R());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var ee=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof ee=="function"){y.callback=ee,H(P),D=!0;break t}y===t(d)&&n(d),H(P)}else n(d);y=t(d)}if(y!==null)D=!0;else{var F=t(f);F!==null&&te(K,F.startTime-P),D=!1}}break e}finally{y=null,v=Z,w=!1}D=void 0}}finally{D?j():z=!1}}}var j;if(typeof U=="function")j=function(){U(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,G=C.port2;C.port1.onmessage=k,j=function(){G.postMessage(null)}}else j=function(){V(k,0)};function te(P,D){M=V(function(){P(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var Z=v;v=D;try{return P()}finally{v=Z}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=v;v=P;try{return D()}finally{v=Z}},r.unstable_scheduleCallback=function(P,D,Z){var W=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?W+Z:W):Z=W,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Z+ee,P={id:g++,callback:D,priorityLevel:P,startTime:Z,expirationTime:ee,sortIndex:-1},Z>W?(P.sortIndex=Z,e(f,P),t(d)===null&&P===t(f)&&(N?(q(M),M=-1):N=!0,te(K,Z-W))):(P.sortIndex=ee,e(d,P),E||w||(E=!0,z||(z=!0,j()))),P},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(P){var D=v;return function(){var Z=v;v=D;try{return P.apply(this,arguments)}finally{v=Z}}}})(hy)),hy}var ww;function ZC(){return ww||(ww=1,uy.exports=JC()),uy.exports}var dy={exports:{}},On={};var xw;function eN(){if(xw)return On;xw=1;var r=Am();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Ew;function tN(){if(Ew)return dy.exports;Ew=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dy.exports=eN(),dy.exports}var Tw;function nN(){if(Tw)return bu;Tw=1;var r=ZC(),e=Am(),t=tN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,L=p.child;L;){if(L===l){A=!0,l=p,h=_;break}if(L===h){A=!0,h=p,l=_;break}L=L.sibling}if(!A){for(L=_.child;L;){if(L===l){A=!0,l=_,h=p;break}if(L===h){A=!0,h=_,l=p;break}L=L.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case V:return"Profiler";case O:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case T:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case U:return i.displayName||"Context";case q:return(i._context.displayName||"Context")+".Consumer";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var te=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function F(i){return{current:i}}function Y(i){0>ee||(i.current=W[ee],W[ee]=null,ee--)}function J(i,a){ee++,W[ee]=i.current,i.current=a}var ie=F(null),re=F(null),_e=F(null),Se=F(null);function De(i,a){switch(J(_e,a),J(re,i),J(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?U1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=U1(a),i=z1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(ie),J(ie,i)}function Re(){Y(ie),Y(re),Y(_e)}function Ke(i){i.memoizedState!==null&&J(Se,i);var a=ie.current,l=z1(a,i.type);a!==l&&(J(re,i),J(ie,l))}function et(i){re.current===i&&(Y(ie),Y(re)),Se.current===i&&(Y(Se),gu._currentValue=Z)}var tt,Mt;function pt(i){if(tt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);tt=a&&a[1]||"",Mt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+i+Mt}var mt=!1;function Ct(i,a){if(!i||mt)return"";mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],L=_[1];if(A&&L){var Q=A.split(`
`),le=L.split(`
`);for(p=h=0;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Q.length||p===le.length)for(h=Q.length-1,p=le.length-1;1<=h&&0<=p&&Q[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Q[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Q[h]!==le[p]){var de=`
`+Q[h].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=h&&0<=p);break}}}finally{mt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?pt(l):""}function st(i,a){switch(i.tag){case 26:case 27:case 5:return pt(i.type);case 16:return pt("Lazy");case 13:return i.child!==a&&a!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return pt("Activity");default:return""}}function at(i){try{var a="",l=null;do a+=st(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var qe=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Oe=r.unstable_requestPaint,xe=r.unstable_now,nt=r.unstable_getCurrentPriorityLevel,gt=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,ct=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,Bt=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Kt=null,Tt=null;function Zt(i){if(typeof kn=="function"&&wn(i),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Kt,i)}catch{}}var kt=Math.clz32?Math.clz32:Ca,Ko=Math.log,ai=Math.LN2;function Ca(i){return i>>>=0,i===0?32:31-(Ko(i)/ai|0)|0}var Dn=256,Hi=262144,yt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=h&134217727;return L!==0?(h=L&~_,h!==0?p=hn(h):(A&=L,A!==0?p=hn(A):l||(l=L&~i,l!==0&&(p=hn(l))))):(L=h&~_,L!==0?p=hn(L):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Yo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(){var i=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),i}function gn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Na(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function dg(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var L=i.entanglements,Q=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var de=31-kt(l),ge=1<<de;L[de]=0,Q[de]=-1;var ce=le[de];if(ce!==null)for(le[de]=null,de=0;de<ce.length;de++){var he=ce[de];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&ka(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function ka(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function bc(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-kt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function wc(i,a){var l=a&-a;return l=(l&42)!==0?1:Da(l),(l&(i.suspendedLanes|a))!==0?0:l}function Da(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function qi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Vh(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:cw(i.type))}function Ur(i,a){var l=D.p;try{return D.p=i,a()}finally{D.p=l}}var zr=Math.random().toString(36).slice(2),en="__reactFiber$"+zr,pn="__reactProps$"+zr,oi="__reactContainer$"+zr,Qo="__reactEvents$"+zr,fg="__reactListeners$"+zr,Lh="__reactHandles$"+zr,Uh="__reactResources$"+zr,li="__reactMarker$"+zr;function Wo(i){delete i[en],delete i[pn],delete i[Qo],delete i[fg],delete i[Lh]}function ci(i){var a=i[en];if(a)return a;for(var l=i.parentNode;l;){if(a=l[oi]||l[en]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=K1(i);i!==null;){if(l=i[en])return l;i=K1(i)}return a}i=l,l=i.parentNode}return null}function br(i){if(i=i[en]||i[oi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function sr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ui(i){var a=i[Uh];return a||(a=i[Uh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(i){i[li]=!0}var xc=new Set,Ec={};function hi(i,a){di(i,a),di(i+"Capture",a)}function di(i,a){for(Ec[i]=a,i=0;i<a.length;i++)xc.add(a[i])}var Tc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sc={},Ac={};function zh(i){return qe.call(Ac,i)?!0:qe.call(Sc,i)?!1:Tc.test(i)?Ac[i]=!0:(Sc[i]=!0,!1)}function Xo(i,a,l){if(zh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function ar(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function nn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ss(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ic(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function _t(i){if(!i._valueTracker){var a=Ss(i)?"checked":"value";i._valueTracker=Ic(i,a,""+i[a])}}function Oa(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Ss(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ma=/[\n"\\]/g;function Wn(i){return i.replace(Ma,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Jo(i,a,l,h,p,_,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+yn(a)):i.value!==""+yn(a)&&(i.value=""+yn(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Rc(i,A,yn(a)):l!=null?Rc(i,A,yn(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+yn(L):i.removeAttribute("name")}function Bh(i,a,l,h,p,_,A,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){_t(i);return}l=l!=null?""+yn(l):"",a=a!=null?""+yn(a):l,L||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=L?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),_t(i)}function Rc(i,a,l){a==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function As(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+yn(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Fh(i,a,l){if(a!=null&&(a=""+yn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+yn(l):""}function Is(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(te(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=yn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),_t(i)}function Xn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Hh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Hh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Nc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Cc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Cc(i,_,a[_])}function Zo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(i){return Rs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Br(){}var kc=null;function wr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cs=null,mi=null;function Pa(i){var a=br(i);if(a&&(i=a.stateNode)){var l=i[pn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Jo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[pn]||null;if(!p)throw Error(n(90));Jo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Oa(h)}break e;case"textarea":Fh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&As(i,!!l.multiple,a,!1)}}}var tl=!1;function Ns(i,a,l){if(tl)return i(a,l);tl=!0;try{var h=i(a);return h}finally{if(tl=!1,(Cs!==null||mi!==null)&&(Vd(),Cs&&(a=Cs,i=mi,mi=Cs=null,Pa(a),i)))for(a=0;a<i.length;a++)Pa(i[a])}}function Fr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[pn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(xr)try{var St={};Object.defineProperty(St,"passive",{get:function(){ja=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{ja=!1}var gi=null,Dc=null,Va=null;function Oc(){if(Va)return Va;var i,a=Dc,l=a.length,h,p="value"in gi?gi.value:gi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return Va=p.slice(i,1<h?1-h:void 0)}function La(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function Hr(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$i:Hr,this.isPropagationStopped=Hr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),a}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=Tn(Gi),ks=y({},Gi,{view:0,detail:0}),Mc=Tn(ks),Ds,nl,yi,rl=y({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ds=i.screenX-yi.screenX,nl=i.screenY-yi.screenY):nl=Ds=0,yi=i),Ds)},movementY:function(i){return"movementY"in i?i.movementY:nl}}),Pc=Tn(rl),Ua=y({},rl,{dataTransfer:0}),$h=Tn(Ua),Gh=y({},ks,{relatedTarget:0}),za=Tn(Gh),jc=y({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kh=Tn(jc),il=y({},Gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Yh=Tn(il),Qh=y({},Gi,{data:0}),_i=Tn(Qh),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Jh[i])?!!a[i]:!1}function Os(){return Zh}var Hn=y({},ks,{key:function(i){if(i.key){var a=Wh[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=La(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(i){return i.type==="keypress"?La(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?La(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ed=Tn(Hn),td=y({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Tn(td),m=y({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),x=Tn(m),I=y({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=Tn(I),ae=y({},rl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),ve=y({},Gi,{newState:0,oldState:0}),Fe=Tn(ve),Yt=[9,13,27,32],ut=xr&&"CompositionEvent"in window,Pt=null;xr&&"documentMode"in document&&(Pt=document.documentMode);var Er=xr&&"TextEvent"in window&&!Pt,vi=xr&&(!ut||Pt&&8<Pt&&11>=Pt),qr=" ",$r=!1;function Ba(i,a){switch(i){case"keyup":return Yt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var al=!1;function _R(i,a){switch(i){case"compositionend":return sl(a);case"keypress":return a.which!==32?null:($r=!0,qr);case"textInput":return i=a.data,i===qr&&$r?null:i;default:return null}}function vR(i,a){if(al)return i==="compositionend"||!ut&&Ba(i,a)?(i=Oc(),Va=Dc=gi=null,al=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vi&&a.locale!=="ko"?null:a.data;default:return null}}var bR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!bR[i.type]:a==="textarea"}function X_(i,a,l,h){Cs?mi?mi.push(h):mi=[h]:Cs=h,a=qd(a,"onChange"),0<a.length&&(l=new pi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Vc=null,Lc=null;function wR(i){O1(i,0)}function nd(i){var a=sr(i);if(Oa(a))return i}function J_(i,a){if(i==="change")return a}var Z_=!1;if(xr){var mg;if(xr){var gg="oninput"in document;if(!gg){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),gg=typeof ev.oninput=="function"}mg=gg}else mg=!1;Z_=mg&&(!document.documentMode||9<document.documentMode)}function tv(){Vc&&(Vc.detachEvent("onpropertychange",nv),Lc=Vc=null)}function nv(i){if(i.propertyName==="value"&&nd(Lc)){var a=[];X_(a,Lc,i,wr(i)),Ns(wR,a)}}function xR(i,a,l){i==="focusin"?(tv(),Vc=a,Lc=l,Vc.attachEvent("onpropertychange",nv)):i==="focusout"&&tv()}function ER(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nd(Lc)}function TR(i,a){if(i==="click")return nd(a)}function SR(i,a){if(i==="input"||i==="change")return nd(a)}function AR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var or=typeof Object.is=="function"?Object.is:AR;function Uc(i,a){if(or(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!qe.call(a,p)||!or(i[p],a[p]))return!1}return!0}function rv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function iv(i,a){var l=rv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rv(l)}}function sv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?sv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function av(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=fi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=fi(i.document)}return a}function pg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var IR=xr&&"documentMode"in document&&11>=document.documentMode,ol=null,yg=null,zc=null,_g=!1;function ov(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_g||ol==null||ol!==fi(h)||(h=ol,"selectionStart"in h&&pg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),zc&&Uc(zc,h)||(zc=h,h=qd(yg,"onSelect"),0<h.length&&(a=new pi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ol)))}function Fa(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ll={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},vg={},lv={};xr&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Ha(i){if(vg[i])return vg[i];if(!ll[i])return i;var a=ll[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in lv)return vg[i]=a[l];return i}var cv=Ha("animationend"),uv=Ha("animationiteration"),hv=Ha("animationstart"),RR=Ha("transitionrun"),CR=Ha("transitionstart"),NR=Ha("transitioncancel"),dv=Ha("transitionend"),fv=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Gr(i,a){fv.set(i,a),hi(a,[i])}var rd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Tr=[],cl=0,wg=0;function id(){for(var i=cl,a=wg=cl=0;a<i;){var l=Tr[a];Tr[a++]=null;var h=Tr[a];Tr[a++]=null;var p=Tr[a];Tr[a++]=null;var _=Tr[a];if(Tr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&mv(l,p,_)}}function sd(i,a,l,h){Tr[cl++]=i,Tr[cl++]=a,Tr[cl++]=l,Tr[cl++]=h,wg|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function xg(i,a,l,h){return sd(i,a,l,h),ad(i)}function qa(i,a){return sd(i,null,null,a),ad(i)}function mv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-kt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function ad(i){if(50<lu)throw lu=0,kp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ul={};function kR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(i,a,l,h){return new kR(i,a,l,h)}function Eg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yi(i,a){var l=i.alternate;return l===null?(l=lr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function gv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function od(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Eg(i)&&(A=1);else if(typeof i=="string")A=jC(i,l,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case T:return i=lr(31,l,a,p),i.elementType=T,i.lanes=_,i;case N:return $a(l.children,p,_,a);case O:A=8,p|=24;break;case V:return i=lr(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case K:return i=lr(13,l,a,p),i.elementType=K,i.lanes=_,i;case z:return i=lr(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:A=10;break e;case q:A=9;break e;case H:A=11;break e;case M:A=14;break e;case S:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=lr(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function $a(i,a,l,h){return i=lr(7,i,h,a),i.lanes=l,i}function Tg(i,a,l){return i=lr(6,i,null,a),i.lanes=l,i}function pv(i){var a=lr(18,null,null,0);return a.stateNode=i,a}function Sg(i,a,l){return a=lr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var yv=new WeakMap;function Sr(i,a){if(typeof i=="object"&&i!==null){var l=yv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:at(a)},yv.set(i,a),a)}return{value:i,source:a,stack:at(a)}}var hl=[],dl=0,ld=null,Bc=0,Ar=[],Ir=0,Ms=null,bi=1,wi="";function Qi(i,a){hl[dl++]=Bc,hl[dl++]=ld,ld=i,Bc=a}function _v(i,a,l){Ar[Ir++]=bi,Ar[Ir++]=wi,Ar[Ir++]=Ms,Ms=i;var h=bi;i=wi;var p=32-kt(h)-1;h&=~(1<<p),l+=1;var _=32-kt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,bi=1<<32-kt(a)+p|l<<p|h,wi=_+i}else bi=1<<_|l<<p|h,wi=i}function Ag(i){i.return!==null&&(Qi(i,1),_v(i,1,0))}function Ig(i){for(;i===ld;)ld=hl[--dl],hl[dl]=null,Bc=hl[--dl],hl[dl]=null;for(;i===Ms;)Ms=Ar[--Ir],Ar[Ir]=null,wi=Ar[--Ir],Ar[Ir]=null,bi=Ar[--Ir],Ar[Ir]=null}function vv(i,a){Ar[Ir++]=bi,Ar[Ir++]=wi,Ar[Ir++]=Ms,bi=a.id,wi=a.overflow,Ms=i}var Sn=null,Dt=null,rt=!1,Ps=null,Rr=!1,Rg=Error(n(519));function js(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fc(Sr(a,i)),Rg}function bv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[en]=i,a[pn]=h,l){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(l=0;l<uu.length;l++)Qe(uu[l],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Bh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Is(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||V1(a.textContent,l)?(h.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),h.onScroll!=null&&Qe("scroll",a),h.onScrollEnd!=null&&Qe("scrollend",a),h.onClick!=null&&(a.onclick=Br),a=!0):a=!1,a||js(i,!0)}function wv(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:Sn=Sn.return}}function fl(i){if(i!==Sn)return!1;if(!rt)return wv(i),rt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Gp(i.type,i.memoizedProps)),l=!l),l&&Dt&&js(i),wv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=G1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=G1(i)}else a===27?(a=Dt,Ws(i.type)?(i=Xp,Xp=null,Dt=i):Dt=a):Dt=Sn?Nr(i.stateNode.nextSibling):null;return!0}function Ga(){Dt=Sn=null,rt=!1}function Cg(){var i=Ps;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Ps=null),i}function Fc(i){Ps===null?Ps=[i]:Ps.push(i)}var Ng=F(null),Ka=null,Wi=null;function Vs(i,a,l){J(Ng,a._currentValue),a._currentValue=l}function Xi(i){i._currentValue=Ng.current,Y(Ng)}function kg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Dg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=p;for(var Q=0;Q<a.length;Q++)if(L.context===a[Q]){_.lanes|=l,L=_.alternate,L!==null&&(L.lanes|=l),kg(_.return,l,i),h||(A=null);break e}_=L.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),kg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function ml(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var L=p.type;or(p.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(p===Se.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(gu):i=[gu])}p=p.return}i!==null&&Dg(a,i,l,h),a.flags|=262144}function cd(i){for(i=i.firstContext;i!==null;){if(!or(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ya(i){Ka=i,Wi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return xv(Ka,i)}function ud(i,a){return Ka===null&&Ya(i),xv(i,a)}function xv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Wi===null){if(i===null)throw Error(n(308));Wi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Wi=Wi.next=a;return l}var DR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},OR=r.unstable_scheduleCallback,MR=r.unstable_NormalPriority,rn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Og(){return{controller:new DR,data:new Map,refCount:0}}function Hc(i){i.refCount--,i.refCount===0&&OR(MR,function(){i.controller.abort()})}var qc=null,Mg=0,gl=0,pl=null;function PR(i,a){if(qc===null){var l=qc=[];Mg=0,gl=Vp(),pl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Mg++,a.then(Ev,Ev),a}function Ev(){if(--Mg===0&&qc!==null){pl!==null&&(pl.status="fulfilled");var i=qc;qc=null,gl=0,pl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function jR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var Tv=P.S;P.S=function(i,a){o1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&PR(i,a),Tv!==null&&Tv(i,a)};var Qa=F(null);function Pg(){var i=Qa.current;return i!==null?i:Nt.pooledCache}function hd(i,a){a===null?J(Qa,Qa.current):J(Qa,a.pool)}function Sv(){var i=Pg();return i===null?null:{parent:rn._currentValue,pool:i}}var yl=Error(n(460)),jg=Error(n(474)),dd=Error(n(542)),fd={then:function(){}};function Av(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Iv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Br,Br),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Cv(i),i;default:if(typeof a.status=="string")a.then(Br,Br);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Cv(i),i}throw Xa=a,yl}}function Wa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Xa=l,yl):l}}var Xa=null;function Rv(){if(Xa===null)throw Error(n(459));var i=Xa;return Xa=null,i}function Cv(i){if(i===yl||i===dd)throw Error(n(483))}var _l=null,$c=0;function md(i){var a=$c;return $c+=1,_l===null&&(_l=[]),Iv(_l,i,a)}function Gc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function gd(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Nv(i){function a(ne,X){if(i){var oe=ne.deletions;oe===null?(ne.deletions=[X],ne.flags|=16):oe.push(X)}}function l(ne,X){if(!i)return null;for(;X!==null;)a(ne,X),X=X.sibling;return null}function h(ne){for(var X=new Map;ne!==null;)ne.key!==null?X.set(ne.key,ne):X.set(ne.index,ne),ne=ne.sibling;return X}function p(ne,X){return ne=Yi(ne,X),ne.index=0,ne.sibling=null,ne}function _(ne,X,oe){return ne.index=oe,i?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<X?(ne.flags|=67108866,X):oe):(ne.flags|=67108866,X)):(ne.flags|=1048576,X)}function A(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function L(ne,X,oe,me){return X===null||X.tag!==6?(X=Tg(oe,ne.mode,me),X.return=ne,X):(X=p(X,oe),X.return=ne,X)}function Q(ne,X,oe,me){var Ne=oe.type;return Ne===N?de(ne,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Wa(Ne)===X.type)?(X=p(X,oe.props),Gc(X,oe),X.return=ne,X):(X=od(oe.type,oe.key,oe.props,null,ne.mode,me),Gc(X,oe),X.return=ne,X)}function le(ne,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=Sg(oe,ne.mode,me),X.return=ne,X):(X=p(X,oe.children||[]),X.return=ne,X)}function de(ne,X,oe,me,Ne){return X===null||X.tag!==7?(X=$a(oe,ne.mode,me,Ne),X.return=ne,X):(X=p(X,oe),X.return=ne,X)}function ge(ne,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Tg(""+X,ne.mode,oe),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=od(X.type,X.key,X.props,null,ne.mode,oe),Gc(oe,X),oe.return=ne,oe;case E:return X=Sg(X,ne.mode,oe),X.return=ne,X;case S:return X=Wa(X),ge(ne,X,oe)}if(te(X)||j(X))return X=$a(X,ne.mode,oe,null),X.return=ne,X;if(typeof X.then=="function")return ge(ne,md(X),oe);if(X.$$typeof===U)return ge(ne,ud(ne,X),oe);gd(ne,X)}return null}function ce(ne,X,oe,me){var Ne=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ne!==null?null:L(ne,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ne?Q(ne,X,oe,me):null;case E:return oe.key===Ne?le(ne,X,oe,me):null;case S:return oe=Wa(oe),ce(ne,X,oe,me)}if(te(oe)||j(oe))return Ne!==null?null:de(ne,X,oe,me,null);if(typeof oe.then=="function")return ce(ne,X,md(oe),me);if(oe.$$typeof===U)return ce(ne,X,ud(ne,oe),me);gd(ne,oe)}return null}function he(ne,X,oe,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ne=ne.get(oe)||null,L(X,ne,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return ne=ne.get(me.key===null?oe:me.key)||null,Q(X,ne,me,Ne);case E:return ne=ne.get(me.key===null?oe:me.key)||null,le(X,ne,me,Ne);case S:return me=Wa(me),he(ne,X,oe,me,Ne)}if(te(me)||j(me))return ne=ne.get(oe)||null,de(X,ne,me,Ne,null);if(typeof me.then=="function")return he(ne,X,oe,md(me),Ne);if(me.$$typeof===U)return he(ne,X,oe,ud(X,me),Ne);gd(X,me)}return null}function Te(ne,X,oe,me){for(var Ne=null,ot=null,Ie=X,$e=X=0,Xe=null;Ie!==null&&$e<oe.length;$e++){Ie.index>$e?(Xe=Ie,Ie=null):Xe=Ie.sibling;var lt=ce(ne,Ie,oe[$e],me);if(lt===null){Ie===null&&(Ie=Xe);break}i&&Ie&&lt.alternate===null&&a(ne,Ie),X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt,Ie=Xe}if($e===oe.length)return l(ne,Ie),rt&&Qi(ne,$e),Ne;if(Ie===null){for(;$e<oe.length;$e++)Ie=ge(ne,oe[$e],me),Ie!==null&&(X=_(Ie,X,$e),ot===null?Ne=Ie:ot.sibling=Ie,ot=Ie);return rt&&Qi(ne,$e),Ne}for(Ie=h(Ie);$e<oe.length;$e++)Xe=he(Ie,ne,$e,oe[$e],me),Xe!==null&&(i&&Xe.alternate!==null&&Ie.delete(Xe.key===null?$e:Xe.key),X=_(Xe,X,$e),ot===null?Ne=Xe:ot.sibling=Xe,ot=Xe);return i&&Ie.forEach(function(ta){return a(ne,ta)}),rt&&Qi(ne,$e),Ne}function Me(ne,X,oe,me){if(oe==null)throw Error(n(151));for(var Ne=null,ot=null,Ie=X,$e=X=0,Xe=null,lt=oe.next();Ie!==null&&!lt.done;$e++,lt=oe.next()){Ie.index>$e?(Xe=Ie,Ie=null):Xe=Ie.sibling;var ta=ce(ne,Ie,lt.value,me);if(ta===null){Ie===null&&(Ie=Xe);break}i&&Ie&&ta.alternate===null&&a(ne,Ie),X=_(ta,X,$e),ot===null?Ne=ta:ot.sibling=ta,ot=ta,Ie=Xe}if(lt.done)return l(ne,Ie),rt&&Qi(ne,$e),Ne;if(Ie===null){for(;!lt.done;$e++,lt=oe.next())lt=ge(ne,lt.value,me),lt!==null&&(X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return rt&&Qi(ne,$e),Ne}for(Ie=h(Ie);!lt.done;$e++,lt=oe.next())lt=he(Ie,ne,$e,lt.value,me),lt!==null&&(i&&lt.alternate!==null&&Ie.delete(lt.key===null?$e:lt.key),X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return i&&Ie.forEach(function(KC){return a(ne,KC)}),rt&&Qi(ne,$e),Ne}function Rt(ne,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ne=oe.key;X!==null;){if(X.key===Ne){if(Ne=oe.type,Ne===N){if(X.tag===7){l(ne,X.sibling),me=p(X,oe.props.children),me.return=ne,ne=me;break e}}else if(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Wa(Ne)===X.type){l(ne,X.sibling),me=p(X,oe.props),Gc(me,oe),me.return=ne,ne=me;break e}l(ne,X);break}else a(ne,X);X=X.sibling}oe.type===N?(me=$a(oe.props.children,ne.mode,me,oe.key),me.return=ne,ne=me):(me=od(oe.type,oe.key,oe.props,null,ne.mode,me),Gc(me,oe),me.return=ne,ne=me)}return A(ne);case E:e:{for(Ne=oe.key;X!==null;){if(X.key===Ne)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(ne,X.sibling),me=p(X,oe.children||[]),me.return=ne,ne=me;break e}else{l(ne,X);break}else a(ne,X);X=X.sibling}me=Sg(oe,ne.mode,me),me.return=ne,ne=me}return A(ne);case S:return oe=Wa(oe),Rt(ne,X,oe,me)}if(te(oe))return Te(ne,X,oe,me);if(j(oe)){if(Ne=j(oe),typeof Ne!="function")throw Error(n(150));return oe=Ne.call(oe),Me(ne,X,oe,me)}if(typeof oe.then=="function")return Rt(ne,X,md(oe),me);if(oe.$$typeof===U)return Rt(ne,X,ud(ne,oe),me);gd(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(ne,X.sibling),me=p(X,oe),me.return=ne,ne=me):(l(ne,X),me=Tg(oe,ne.mode,me),me.return=ne,ne=me),A(ne)):l(ne,X)}return function(ne,X,oe,me){try{$c=0;var Ne=Rt(ne,X,oe,me);return _l=null,Ne}catch(Ie){if(Ie===yl||Ie===dd)throw Ie;var ot=lr(29,Ie,null,ne.mode);return ot.lanes=me,ot.return=ne,ot}finally{}}}var Ja=Nv(!0),kv=Nv(!1),Ls=!1;function Vg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Us(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function zs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ht&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=ad(i),mv(i,null,l),a}return sd(i,h,a,l),ad(i)}function Kc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,bc(i,l)}}function Ug(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var zg=!1;function Yc(){if(zg){var i=pl;if(i!==null)throw i}}function Qc(i,a,l,h){zg=!1;var p=i.updateQueue;Ls=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var Q=L,le=Q.next;Q.next=null,A===null?_=le:A.next=le,A=Q;var de=i.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==A&&(L===null?de.firstBaseUpdate=le:L.next=le,de.lastBaseUpdate=Q))}if(_!==null){var ge=p.baseState;A=0,de=le=Q=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(We&ce)===ce:(h&ce)===ce){ce!==0&&ce===gl&&(zg=!0),de!==null&&(de=de.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Te=i,Me=L;ce=a;var Rt=l;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){ge=Te.call(Rt,ge,ce);break e}ge=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,ce=typeof Te=="function"?Te.call(Rt,ge,ce):Te,ce==null)break e;ge=y({},ge,ce);break e;case 2:Ls=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(le=de=he,Q=ge):de=de.next=he,A|=ce;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;he=L,L=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);de===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=de,_===null&&(p.shared.lanes=0),$s|=A,i.lanes=A,i.memoizedState=ge}}function Dv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function Ov(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Dv(l[i],a)}var vl=F(null),pd=F(0);function Mv(i,a){i=as,J(pd,i),J(vl,a),as=i|a.baseLanes}function Bg(){J(pd,as),J(vl,vl.current)}function Fg(){as=pd.current,Y(vl),Y(pd)}var cr=F(null),Cr=null;function Bs(i){var a=i.alternate;J(Qt,Qt.current&1),J(cr,i),Cr===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(Cr=i)}function Hg(i){J(Qt,Qt.current),J(cr,i),Cr===null&&(Cr=i)}function Pv(i){i.tag===22?(J(Qt,Qt.current),J(cr,i),Cr===null&&(Cr=i)):Fs()}function Fs(){J(Qt,Qt.current),J(cr,cr.current)}function ur(i){Y(cr),Cr===i&&(Cr=null),Y(Qt)}var Qt=F(0);function yd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Qp(l)||Wp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ji=0,He=null,At=null,sn=null,_d=!1,bl=!1,Za=!1,vd=0,Wc=0,wl=null,VR=0;function Ft(){throw Error(n(321))}function qg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!or(i[l],a[l]))return!1;return!0}function $g(i,a,l,h,p,_){return Ji=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?_b:ap,Za=!1,_=l(h,p),Za=!1,bl&&(_=Vv(a,l,h,p)),jv(i),_}function jv(i){P.H=Zc;var a=At!==null&&At.next!==null;if(Ji=0,sn=At=He=null,_d=!1,Wc=0,wl=null,a)throw Error(n(300));i===null||an||(i=i.dependencies,i!==null&&cd(i)&&(an=!0))}function Vv(i,a,l,h){He=i;var p=0;do{if(bl&&(wl=null),Wc=0,bl=!1,25<=p)throw Error(n(301));if(p+=1,sn=At=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=vb,_=a(l,h)}while(bl);return _}function LR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?Xc(a):a,i=i.useState()[0],(At!==null?At.memoizedState:null)!==i&&(He.flags|=1024),a}function Gg(){var i=vd!==0;return vd=0,i}function Kg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Yg(i){if(_d){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}_d=!1}Ji=0,sn=At=He=null,bl=!1,Wc=vd=0,wl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?He.memoizedState=sn=i:sn=sn.next=i,sn}function Wt(){if(At===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var a=sn===null?He.memoizedState:sn.next;if(a!==null)sn=a,At=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},sn===null?He.memoizedState=sn=i:sn=sn.next=i}return sn}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(i){var a=Wc;return Wc+=1,wl===null&&(wl=[]),i=Iv(wl,i,a),a=He,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?_b:ap),i}function wd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xc(i);if(i.$$typeof===U)return An(i)}throw Error(n(438,String(i)))}function Qg(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bd(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=R;return a.index++,l}function Zi(i,a){return typeof a=="function"?a(i):a}function xd(i){var a=Wt();return Wg(a,At,i)}function Wg(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var L=A=null,Q=null,le=a,de=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(We&ge)===ge:(Ji&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===gl&&(de=!0);else if((Ji&ce)===ce){le=le.next,ce===gl&&(de=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ge,A=_):Q=Q.next=ge,He.lanes|=ce,$s|=ce;ge=le.action,Za&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ce,A=_):Q=Q.next=ce,He.lanes|=ge,$s|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=_:Q.next=L,!or(_,i.memoizedState)&&(an=!0,de&&(l=pl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Q,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Xg(i){var a=Wt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);or(_,a.memoizedState)||(an=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function Lv(i,a,l){var h=He,p=Wt(),_=rt;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!or((At||p).memoizedState,l);if(A&&(p.memoizedState=l,an=!0),p=p.queue,ep(Bv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,xl(9,{destroy:void 0},zv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Ji&127)!==0||Uv(h,a,l)}return l}function Uv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=bd(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function zv(i,a,l,h){a.value=l,a.getSnapshot=h,Fv(a)&&Hv(i)}function Bv(i,a,l){return l(function(){Fv(a)&&Hv(i)})}function Fv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!or(i,l)}catch{return!0}}function Hv(i){var a=qa(i,2);a!==null&&nr(a,i,2)}function Jg(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),Za){Zt(!0);try{l()}finally{Zt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:i},a}function qv(i,a,l,h){return i.baseState=l,Wg(i,At,typeof h=="function"?h:Zi)}function UR(i,a,l,h,p){if(Sd(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,$v(a,_)):(_.next=l.next,a.pending=l.next=_)}}function $v(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var L=l(p,h),Q=P.S;Q!==null&&Q(A,L),Gv(i,a,L)}catch(le){Zg(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),Gv(i,a,_)}catch(le){Zg(i,a,le)}}function Gv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Kv(i,a,h)},function(h){return Zg(i,a,h)}):Kv(i,a,l)}function Kv(i,a,l){a.status="fulfilled",a.value=l,Yv(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,$v(i,l)))}function Zg(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,Yv(a),a=a.next;while(a!==h)}i.action=null}function Yv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Qv(i,a){return a}function Wv(i,a){if(rt){var l=Nt.formState;if(l!==null){e:{var h=He;if(rt){if(Dt){t:{for(var p=Dt,_=Rr;p.nodeType!==8;){if(!_){p=null;break t}if(p=Nr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Dt=Nr(p.nextSibling),h=p.data==="F!";break e}}js(h)}h=!1}h&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qv,lastRenderedState:a},l.queue=h,l=gb.bind(null,He,h),h.dispatch=l,h=Jg(!1),_=sp.bind(null,He,!1,h.queue),h=qn(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=UR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function Xv(i){var a=Wt();return Jv(a,At,i)}function Jv(i,a,l){if(a=Wg(i,a,Qv)[0],i=xd(Zi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Xc(a)}catch(A){throw A===yl?dd:A}else h=a;a=Wt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,xl(9,{destroy:void 0},zR.bind(null,p,l),null)),[h,_,i]}function zR(i,a){i.action=a}function Zv(i){var a=Wt(),l=At;if(l!==null)return Jv(a,l,i);Wt(),a=a.memoizedState,l=Wt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function xl(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=bd(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function eb(){return Wt().memoizedState}function Ed(i,a,l,h){var p=qn();He.flags|=i,p.memoizedState=xl(1|a,{destroy:void 0},l,h===void 0?null:h)}function Td(i,a,l,h){var p=Wt();h=h===void 0?null:h;var _=p.memoizedState.inst;At!==null&&h!==null&&qg(h,At.memoizedState.deps)?p.memoizedState=xl(a,_,l,h):(He.flags|=i,p.memoizedState=xl(1|a,_,l,h))}function tb(i,a){Ed(8390656,8,i,a)}function ep(i,a){Td(2048,8,i,a)}function BR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=bd(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function nb(i){var a=Wt().memoizedState;return BR({ref:a,nextImpl:i}),function(){if((ht&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function rb(i,a){return Td(4,2,i,a)}function ib(i,a){return Td(4,4,i,a)}function sb(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ab(i,a,l){l=l!=null?l.concat([i]):null,Td(4,4,sb.bind(null,a,i),l)}function tp(){}function ob(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&qg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function lb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&qg(a,h[1]))return h[0];if(h=i(),Za){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h}function np(i,a,l){return l===void 0||(Ji&1073741824)!==0&&(We&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=c1(),He.lanes|=i,$s|=i,l)}function cb(i,a,l,h){return or(l,a)?l:vl.current!==null?(i=np(i,l,h),or(i,a)||(an=!0),i):(Ji&42)===0||(Ji&1073741824)!==0&&(We&261930)===0?(an=!0,i.memoizedState=l):(i=c1(),He.lanes|=i,$s|=i,a)}function ub(i,a,l,h,p){var _=D.p;D.p=_!==0&&8>_?_:8;var A=P.T,L={};P.T=L,sp(i,!1,a,l);try{var Q=p(),le=P.S;if(le!==null&&le(L,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var de=jR(Q,h);Jc(i,a,de,fr(i))}else Jc(i,a,h,fr(i))}catch(ge){Jc(i,a,{then:function(){},status:"rejected",reason:ge},fr())}finally{D.p=_,A!==null&&L.types!==null&&(A.types=L.types),P.T=A}}function FR(){}function rp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=hb(i).queue;ub(i,p,a,Z,l===null?FR:function(){return db(i),l(h)})}function hb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:Z},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function db(i){var a=hb(i);a.next===null&&(a=i.alternate.memoizedState),Jc(i,a.next.queue,{},fr())}function ip(){return An(gu)}function fb(){return Wt().memoizedState}function mb(){return Wt().memoizedState}function HR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=fr();i=Us(l);var h=zs(a,i,l);h!==null&&(nr(h,a,l),Kc(h,a,l)),a={cache:Og()},i.payload=a;return}a=a.return}}function qR(i,a,l){var h=fr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sd(i)?pb(a,l):(l=xg(i,a,l,h),l!==null&&(nr(l,i,h),yb(l,a,h)))}function gb(i,a,l){var h=fr();Jc(i,a,l,h)}function Jc(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sd(i))pb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,L=_(A,l);if(p.hasEagerState=!0,p.eagerState=L,or(L,A))return sd(i,a,p,0),Nt===null&&id(),!1}catch{}finally{}if(l=xg(i,a,p,h),l!==null)return nr(l,i,h),yb(l,a,h),!0}return!1}function sp(i,a,l,h){if(h={lane:2,revertLane:Vp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Sd(i)){if(a)throw Error(n(479))}else a=xg(i,l,h,2),a!==null&&nr(a,i,2)}function Sd(i){var a=i.alternate;return i===He||a!==null&&a===He}function pb(i,a){bl=_d=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function yb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,bc(i,l)}}var Zc={readContext:An,use:wd,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Zc.useEffectEvent=Ft;var _b={readContext:An,use:wd,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:tb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Ed(4194308,4,sb.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Ed(4194308,4,i,a)},useInsertionEffect:function(i,a){Ed(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var h=i();if(Za){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=qn();if(l!==void 0){var p=l(a);if(Za){Zt(!0);try{l(a)}finally{Zt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=qR.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=Jg(i);var a=i.queue,l=gb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:tp,useDeferredValue:function(i,a){var l=qn();return np(l,i,a)},useTransition:function(){var i=Jg(!1);return i=ub.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=qn();if(rt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(We&127)!==0||Uv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,tb(Bv.bind(null,h,_,i),[i]),h.flags|=2048,xl(9,{destroy:void 0},zv.bind(null,h,_,l,a),null),l},useId:function(){var i=qn(),a=Nt.identifierPrefix;if(rt){var l=wi,h=bi;l=(h&~(1<<32-kt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=vd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=VR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:ip,useFormState:Wv,useActionState:Wv,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=sp.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:Qg,useCacheRefresh:function(){return qn().memoizedState=HR.bind(null,He)},useEffectEvent:function(i){var a=qn(),l={impl:i};return a.memoizedState=l,function(){if((ht&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},ap={readContext:An,use:wd,useCallback:ob,useContext:An,useEffect:ep,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:ib,useMemo:lb,useReducer:xd,useRef:eb,useState:function(){return xd(Zi)},useDebugValue:tp,useDeferredValue:function(i,a){var l=Wt();return cb(l,At.memoizedState,i,a)},useTransition:function(){var i=xd(Zi)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:Xc(i),a]},useSyncExternalStore:Lv,useId:fb,useHostTransitionStatus:ip,useFormState:Xv,useActionState:Xv,useOptimistic:function(i,a){var l=Wt();return qv(l,At,i,a)},useMemoCache:Qg,useCacheRefresh:mb};ap.useEffectEvent=nb;var vb={readContext:An,use:wd,useCallback:ob,useContext:An,useEffect:ep,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:ib,useMemo:lb,useReducer:Xg,useRef:eb,useState:function(){return Xg(Zi)},useDebugValue:tp,useDeferredValue:function(i,a){var l=Wt();return At===null?np(l,i,a):cb(l,At.memoizedState,i,a)},useTransition:function(){var i=Xg(Zi)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:Xc(i),a]},useSyncExternalStore:Lv,useId:fb,useHostTransitionStatus:ip,useFormState:Zv,useActionState:Zv,useOptimistic:function(i,a){var l=Wt();return At!==null?qv(l,At,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Qg,useCacheRefresh:mb};vb.useEffectEvent=nb;function op(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var lp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=fr(),p=Us(h);p.payload=a,l!=null&&(p.callback=l),a=zs(i,p,h),a!==null&&(nr(a,i,h),Kc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=fr(),p=Us(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=zs(i,p,h),a!==null&&(nr(a,i,h),Kc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=fr(),h=Us(l);h.tag=2,a!=null&&(h.callback=a),a=zs(i,h,l),a!==null&&(nr(a,i,l),Kc(a,i,l))}};function bb(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!Uc(l,h)||!Uc(p,_):!0}function wb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&lp.enqueueReplaceState(a,a.state,null)}function eo(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function xb(i){rd(i)}function Eb(i){console.error(i)}function Tb(i){rd(i)}function Ad(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Sb(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function cp(i,a,l){return l=Us(l),l.tag=3,l.payload={element:null},l.callback=function(){Ad(i,a)},l}function Ab(i){return i=Us(i),i.tag=3,i}function Ib(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Sb(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Sb(a,l,h),typeof p!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function $R(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&ml(a,l,p,!0),l=cr.current,l!==null){switch(l.tag){case 31:case 13:return Cr===null?Ld():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===fd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Mp(i,h,p)),!1;case 22:return l.flags|=65536,h===fd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Mp(i,h,p)),!1}throw Error(n(435,l.tag))}return Mp(i,h,p),Ld(),!1}if(rt)return a=cr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Rg&&(i=Error(n(422),{cause:h}),Fc(Sr(i,l)))):(h!==Rg&&(a=Error(n(423),{cause:h}),Fc(Sr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Sr(h,l),p=cp(i.stateNode,h,p),Ug(i,p),Ht!==4&&(Ht=2)),!1;var _=Error(n(520),{cause:h});if(_=Sr(_,l),ou===null?ou=[_]:ou.push(_),Ht!==4&&(Ht=2),a===null)return!0;h=Sr(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=cp(l.stateNode,h,i),Ug(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gs===null||!Gs.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ab(p),Ib(p,i,l,h),Ug(l,p),!1}l=l.return}while(l!==null);return!1}var up=Error(n(461)),an=!1;function In(i,a,l,h){a.child=i===null?kv(a,null,l,h):Ja(a,i.child,l,h)}function Rb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var L in h)L!=="ref"&&(A[L]=h[L])}else A=h;return Ya(a),h=$g(i,a,l,A,_,p),L=Gg(),i!==null&&!an?(Kg(i,a,p),es(i,a,p)):(rt&&L&&Ag(a),a.flags|=1,In(i,a,h,p),a.child)}function Cb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Eg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Nb(i,a,_,h,p)):(i=od(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!_p(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:Uc,l(A,h)&&i.ref===a.ref)return es(i,a,p)}return a.flags|=1,i=Yi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Nb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if(Uc(_,h)&&i.ref===a.ref)if(an=!1,a.pendingProps=h=_,_p(i,p))(i.flags&131072)!==0&&(an=!0);else return a.lanes=i.lanes,es(i,a,p)}return hp(i,a,l,h,p)}function kb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Db(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&hd(a,_!==null?_.cachePool:null),_!==null?Mv(a,_):Bg(),Pv(a);else return h=a.lanes=536870912,Db(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(hd(a,_.cachePool),Mv(a,_),Fs(),a.memoizedState=null):(i!==null&&hd(a,null),Bg(),Fs());return In(i,a,p,l),a.child}function eu(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Db(i,a,l,h,p){var _=Pg();return _=_===null?null:{parent:rn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&hd(a,null),Bg(),Pv(a),i!==null&&ml(i,a,h,!0),a.childLanes=p,null}function Id(i,a){return a=Cd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Ob(i,a,l){return Ja(a,i.child,null,l),i=Id(a,a.pendingProps),i.flags|=2,ur(a),a.memoizedState=null,i}function GR(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(rt){if(h.mode==="hidden")return i=Id(a,h),a.lanes=536870912,eu(null,i);if(Hg(a),(i=Dt)?(i=$1(i,Rr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=pv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw js(a);return a.lanes=536870912,null}return Id(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Hg(a),p)if(a.flags&256)a.flags&=-257,a=Ob(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(an||ml(i,a,l,!1),p=(l&i.childLanes)!==0,an||p){if(h=Nt,h!==null&&(A=wc(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,qa(i,A),nr(h,i,A),up;Ld(),a=Ob(i,a,l)}else i=_.treeContext,Dt=Nr(A.nextSibling),Sn=a,rt=!0,Ps=null,Rr=!1,i!==null&&vv(a,i),a=Id(a,h),a.flags|=4096;return a}return i=Yi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Rd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function hp(i,a,l,h,p){return Ya(a),l=$g(i,a,l,h,void 0,p),h=Gg(),i!==null&&!an?(Kg(i,a,p),es(i,a,p)):(rt&&h&&Ag(a),a.flags|=1,In(i,a,l,p),a.child)}function Mb(i,a,l,h,p,_){return Ya(a),a.updateQueue=null,l=Vv(a,h,l,p),jv(i),h=Gg(),i!==null&&!an?(Kg(i,a,_),es(i,a,_)):(rt&&h&&Ag(a),a.flags|=1,In(i,a,l,_),a.child)}function Pb(i,a,l,h,p){if(Ya(a),a.stateNode===null){var _=ul,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=lp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Vg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):ul,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(op(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&lp.enqueueReplaceState(_,_.state,null),Qc(a,h,_,p),Yc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var L=a.memoizedProps,Q=eo(l,L);_.props=Q;var le=_.context,de=l.contextType;A=ul,typeof de=="object"&&de!==null&&(A=An(de));var ge=l.getDerivedStateFromProps;de=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,de||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==A)&&wb(a,_,h,A),Ls=!1;var ce=a.memoizedState;_.state=ce,Qc(a,h,_,p),Yc(),le=a.memoizedState,L||ce!==le||Ls?(typeof ge=="function"&&(op(a,l,ge,h),le=a.memoizedState),(Q=Ls||bb(a,l,Q,h,ce,le,A))?(de||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Q):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,Lg(i,a),A=a.memoizedProps,de=eo(l,A),_.props=de,ge=a.pendingProps,ce=_.context,le=l.contextType,Q=ul,typeof le=="object"&&le!==null&&(Q=An(le)),L=l.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&wb(a,_,h,Q),Ls=!1,ce=a.memoizedState,_.state=ce,Qc(a,h,_,p),Yc();var he=a.memoizedState;A!==ge||ce!==he||Ls||i!==null&&i.dependencies!==null&&cd(i.dependencies)?(typeof L=="function"&&(op(a,l,L,h),he=a.memoizedState),(de=Ls||bb(a,l,de,h,ce,he,Q)||i!==null&&i.dependencies!==null&&cd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Q)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Q,h=de):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Rd(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=Ja(a,i.child,null,p),a.child=Ja(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=es(i,a,p),i}function jb(i,a,l,h){return Ga(),a.flags|=256,In(i,a,l,h),a.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fp(i){return{baseLanes:i,cachePool:Sv()}}function mp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=dr),i}function Vb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Qt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(rt){if(p?Bs(a):Fs(),(i=Dt)?(i=$1(i,Rr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=pv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw js(a);return Wp(i)?a.lanes=32:a.lanes=536870912,null}var L=h.children;return h=h.fallback,p?(Fs(),p=a.mode,L=Cd({mode:"hidden",children:L},p),h=$a(h,p,l,null),L.return=a,h.return=a,L.sibling=h,a.child=L,h=a.child,h.memoizedState=fp(l),h.childLanes=mp(i,A,l),a.memoizedState=dp,eu(null,h)):(Bs(a),gp(a,L))}var Q=i.memoizedState;if(Q!==null&&(L=Q.dehydrated,L!==null)){if(_)a.flags&256?(Bs(a),a.flags&=-257,a=pp(i,a,l)):a.memoizedState!==null?(Fs(),a.child=i.child,a.flags|=128,a=null):(Fs(),L=h.fallback,p=a.mode,h=Cd({mode:"visible",children:h.children},p),L=$a(L,p,l,null),L.flags|=2,h.return=a,L.return=a,h.sibling=L,a.child=h,Ja(a,i.child,null,l),h=a.child,h.memoizedState=fp(l),h.childLanes=mp(i,A,l),a.memoizedState=dp,a=eu(null,h));else if(Bs(a),Wp(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Fc({value:h,source:null,stack:null}),a=pp(i,a,l)}else if(an||ml(i,a,l,!1),A=(l&i.childLanes)!==0,an||A){if(A=Nt,A!==null&&(h=wc(A,l),h!==0&&h!==Q.retryLane))throw Q.retryLane=h,qa(i,h),nr(A,i,h),up;Qp(L)||Ld(),a=pp(i,a,l)}else Qp(L)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Dt=Nr(L.nextSibling),Sn=a,rt=!0,Ps=null,Rr=!1,i!==null&&vv(a,i),a=gp(a,h.children),a.flags|=4096);return a}return p?(Fs(),L=h.fallback,p=a.mode,Q=i.child,le=Q.sibling,h=Yi(Q,{mode:"hidden",children:h.children}),h.subtreeFlags=Q.subtreeFlags&65011712,le!==null?L=Yi(le,L):(L=$a(L,p,l,null),L.flags|=2),L.return=a,h.return=a,h.sibling=L,a.child=h,eu(null,h),h=a.child,L=i.child.memoizedState,L===null?L=fp(l):(p=L.cachePool,p!==null?(Q=rn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Sv(),L={baseLanes:L.baseLanes|l,cachePool:p}),h.memoizedState=L,h.childLanes=mp(i,A,l),a.memoizedState=dp,eu(i.child,h)):(Bs(a),l=i.child,i=l.sibling,l=Yi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function gp(i,a){return a=Cd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Cd(i,a){return i=lr(22,i,null,a),i.lanes=0,i}function pp(i,a,l){return Ja(a,i.child,null,l),i=gp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Lb(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),kg(i.return,a,l)}function yp(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function Ub(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Qt.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,J(Qt,A),In(i,a,h,l),h=rt?Bc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Lb(i,l,a);else if(i.tag===19)Lb(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&yd(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),yp(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&yd(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}yp(a,!0,l,null,_,h);break;case"together":yp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function es(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(ml(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Yi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Yi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function _p(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&cd(i)))}function KR(i,a,l){switch(a.tag){case 3:De(a,a.stateNode.containerInfo),Vs(a,rn,i.memoizedState.cache),Ga();break;case 27:case 5:Ke(a);break;case 4:De(a,a.stateNode.containerInfo);break;case 10:Vs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Hg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Bs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Vb(i,a,l):(Bs(a),i=es(i,a,l),i!==null?i.sibling:null);Bs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(ml(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return Ub(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),J(Qt,Qt.current),h)break;return null;case 22:return a.lanes=0,kb(i,a,l,a.pendingProps);case 24:Vs(a,rn,i.memoizedState.cache)}return es(i,a,l)}function zb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)an=!0;else{if(!_p(i,l)&&(a.flags&128)===0)return an=!1,KR(i,a,l);an=(i.flags&131072)!==0}else an=!1,rt&&(a.flags&1048576)!==0&&_v(a,Bc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Wa(a.elementType),a.type=i,typeof i=="function")Eg(i)?(h=eo(i,h),a.tag=1,a=Pb(null,a,i,h,l)):(a.tag=0,a=hp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===H){a.tag=11,a=Rb(null,a,i,h,l);break e}else if(p===M){a.tag=14,a=Cb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return hp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=eo(h,a.pendingProps),Pb(i,a,h,p,l);case 3:e:{if(De(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,Lg(i,a),Qc(a,h,null,l);var A=a.memoizedState;if(h=A.cache,Vs(a,rn,h),h!==_.cache&&Dg(a,[rn],l,!0),Yc(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=jb(i,a,h,l);break e}else if(h!==p){p=Sr(Error(n(424)),a),Fc(p),a=jb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=Nr(i.firstChild),Sn=a,rt=!0,Ps=null,Rr=!0,l=kv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ga(),h===p){a=es(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Rd(i,a),i===null?(l=X1(a.type,null,a.pendingProps,null))?a.memoizedState=l:rt||(l=a.type,i=a.pendingProps,h=$d(_e.current).createElement(l),h[en]=a,h[pn]=i,Rn(h,l,i),tn(h),a.stateNode=h):a.memoizedState=X1(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ke(a),i===null&&rt&&(h=a.stateNode=Y1(a.type,a.pendingProps,_e.current),Sn=a,Rr=!0,p=Dt,Ws(a.type)?(Xp=p,Dt=Nr(h.firstChild)):Dt=p),In(i,a,a.pendingProps.children,l),Rd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&rt&&((p=h=Dt)&&(h=EC(h,a.type,a.pendingProps,Rr),h!==null?(a.stateNode=h,Sn=a,Dt=Nr(h.firstChild),Rr=!1,p=!0):p=!1),p||js(a)),Ke(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Gp(p,_)?h=null:A!==null&&Gp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=$g(i,a,LR,null,null,l),gu._currentValue=p),Rd(i,a),In(i,a,h,l),a.child;case 6:return i===null&&rt&&((i=l=Dt)&&(l=TC(l,a.pendingProps,Rr),l!==null?(a.stateNode=l,Sn=a,Dt=null,i=!0):i=!1),i||js(a)),null;case 13:return Vb(i,a,l);case 4:return De(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Ja(a,null,h,l):In(i,a,h,l),a.child;case 11:return Rb(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Vs(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Ya(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return Cb(i,a,a.type,a.pendingProps,l);case 15:return Nb(i,a,a.type,a.pendingProps,l);case 19:return Ub(i,a,l);case 31:return GR(i,a,l);case 22:return kb(i,a,l,a.pendingProps);case 24:return Ya(a),h=An(rn),i===null?(p=Pg(),p===null&&(p=Nt,_=Og(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Vg(a),Vs(a,rn,p)):((i.lanes&l)!==0&&(Lg(i,a),Qc(a,null,null,l),Yc()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Vs(a,rn,h)):(h=_.cache,Vs(a,rn,h),h!==p.cache&&Dg(a,[rn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ts(i){i.flags|=4}function vp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(f1())i.flags|=8192;else throw Xa=fd,jg}else i.flags&=-16777217}function Bb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nw(a))if(f1())i.flags|=8192;else throw Xa=fd,jg}function Nd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?vr():536870912,i.lanes|=a,Al|=a)}function tu(i,a){if(!rt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function YR(i,a,l){var h=a.pendingProps;switch(Ig(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Xi(rn),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(fl(a)?ts(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cg())),Ot(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ts(a),_!==null?(Ot(a),Bb(a,_)):(Ot(a),vp(a,p,null,h,l))):_?_!==i.memoizedState?(ts(a),Ot(a),Bb(a,_)):(Ot(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ts(a),Ot(a),vp(a,p,i,h,l)),null;case 27:if(et(a),l=_e.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ts(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}i=ie.current,fl(a)?bv(a):(i=Y1(p,h,l),a.stateNode=i,ts(a))}return Ot(a),null;case 5:if(et(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ts(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}if(_=ie.current,fl(a))bv(a);else{var A=$d(_e.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[en]=a,_[pn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ts(a)}}return Ot(a),vp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ts(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=_e.current,fl(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[en]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||V1(i.nodeValue,l)),i||js(a,!0)}else i=$d(i).createTextNode(h),i[en]=a,a.stateNode=i}return Ot(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=fl(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[en]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),i=!1}else l=Cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(ur(a),a):(ur(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ot(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=fl(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[en]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),p=!1}else p=Cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(ur(a),a):(ur(a),null)}return ur(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Nd(a,a.updateQueue),Ot(a),null);case 4:return Re(),i===null&&Bp(a.stateNode.containerInfo),Ot(a),null;case 10:return Xi(a.type),Ot(a),null;case 19:if(Y(Qt),h=a.memoizedState,h===null)return Ot(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)tu(h,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=yd(i),_!==null){for(a.flags|=128,tu(h,!1),i=_.updateQueue,a.updateQueue=i,Nd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)gv(l,i),l=l.sibling;return J(Qt,Qt.current&1|2),rt&&Qi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Pd&&(a.flags|=128,p=!0,tu(h,!1),a.lanes=4194304)}else{if(!p)if(i=yd(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Nd(a,i),tu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!rt)return Ot(a),null}else 2*xe()-h.renderingStartTime>Pd&&l!==536870912&&(a.flags|=128,p=!0,tu(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Qt.current,J(Qt,p?l&1|2:l&1),rt&&Qi(a,h.treeForkCount),i):(Ot(a),null);case 22:case 23:return ur(a),Fg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),l=a.updateQueue,l!==null&&Nd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Y(Qa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xi(rn),Ot(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function QR(i,a){switch(Ig(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Xi(rn),Re(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return et(a),null;case 31:if(a.memoizedState!==null){if(ur(a),a.alternate===null)throw Error(n(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(ur(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Y(Qt),null;case 4:return Re(),null;case 10:return Xi(a.type),null;case 22:case 23:return ur(a),Fg(),i!==null&&Y(Qa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Xi(rn),null;case 25:return null;default:return null}}function Fb(i,a){switch(Ig(a),a.tag){case 3:Xi(rn),Re();break;case 26:case 27:case 5:et(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&ur(a);break;case 13:ur(a);break;case 19:Y(Qt);break;case 10:Xi(a.type);break;case 22:case 23:ur(a),Fg(),i!==null&&Y(Qa);break;case 24:Xi(rn)}}function nu(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(L){bt(a,a.return,L)}}function Hs(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,p=a;var Q=l,le=L;try{le()}catch(de){bt(p,Q,de)}}}h=h.next}while(h!==_)}}catch(de){bt(a,a.return,de)}}function Hb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Ov(a,l)}catch(h){bt(i,i.return,h)}}}function qb(i,a,l){l.props=eo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){bt(i,a,h)}}function ru(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){bt(i,a,p)}}function xi(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){bt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){bt(i,a,p)}else l.current=null}function $b(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){bt(i,i.return,p)}}function bp(i,a,l){try{var h=i.stateNode;yC(h,i.type,l,a),h[pn]=a}catch(p){bt(i,i.return,p)}}function Gb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ws(i.type)||i.tag===4}function wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ws(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Br));else if(h!==4&&(h===27&&Ws(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(xp(i,a,l),i=i.sibling;i!==null;)xp(i,a,l),i=i.sibling}function kd(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Ws(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(kd(i,a,l),i=i.sibling;i!==null;)kd(i,a,l),i=i.sibling}function Kb(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[en]=i,a[pn]=l}catch(_){bt(i,i.return,_)}}var ns=!1,on=!1,Ep=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,_n=null;function WR(i,a){if(i=i.containerInfo,qp=Jd,i=av(i),pg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,L=-1,Q=-1,le=0,de=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(L=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Q=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(L=A),ce===_&&++de===h&&(Q=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=L===-1||Q===-1?null:{start:L,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for($p={focusedElem:i,selectionRange:l},Jd=!1,_n=a;_n!==null;)if(a=_n,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,_n=i;else for(;_n!==null;){switch(a=_n,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Te=eo(l.type,p);i=h.getSnapshotBeforeUpdate(Te,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Me){bt(l,l.return,Me)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Yp(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,_n=i;break}_n=a.return}}function Qb(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:is(i,l),h&4&&nu(5,l);break;case 1:if(is(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){bt(l,l.return,A)}else{var p=eo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){bt(l,l.return,A)}}h&64&&Hb(l),h&512&&ru(l,l.return);break;case 3:if(is(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ov(i,a)}catch(A){bt(l,l.return,A)}}break;case 27:a===null&&h&4&&Kb(l);case 26:case 5:is(i,l),a===null&&h&4&&$b(l),h&512&&ru(l,l.return);break;case 12:is(i,l);break;case 31:is(i,l),h&4&&Jb(i,l);break;case 13:is(i,l),h&4&&Zb(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=sC.bind(null,l),SC(i,l))));break;case 22:if(h=l.memoizedState!==null||ns,!h){a=a!==null&&a.memoizedState!==null||on,p=ns;var _=on;ns=h,(on=a)&&!_?ss(i,l,(l.subtreeFlags&8772)!==0):is(i,l),ns=p,on=_}break;case 30:break;default:is(i,l)}}function Wb(i){var a=i.alternate;a!==null&&(i.alternate=null,Wb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Wo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,Jn=!1;function rs(i,a,l){for(l=l.child;l!==null;)Xb(i,a,l),l=l.sibling}function Xb(i,a,l){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Kt,l)}catch{}switch(l.tag){case 26:on||xi(l,a),rs(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||xi(l,a);var h=jt,p=Jn;Ws(l.type)&&(jt=l.stateNode,Jn=!1),rs(i,a,l),du(l.stateNode),jt=h,Jn=p;break;case 5:on||xi(l,a);case 6:if(h=jt,p=Jn,jt=null,rs(i,a,l),jt=h,Jn=p,jt!==null)if(Jn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(l.stateNode)}catch(_){bt(l,a,_)}else try{jt.removeChild(l.stateNode)}catch(_){bt(l,a,_)}break;case 18:jt!==null&&(Jn?(i=jt,H1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Ml(i)):H1(jt,l.stateNode));break;case 4:h=jt,p=Jn,jt=l.stateNode.containerInfo,Jn=!0,rs(i,a,l),jt=h,Jn=p;break;case 0:case 11:case 14:case 15:Hs(2,l,a),on||Hs(4,l,a),rs(i,a,l);break;case 1:on||(xi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&qb(l,a,h)),rs(i,a,l);break;case 21:rs(i,a,l);break;case 22:on=(h=on)||l.memoizedState!==null,rs(i,a,l),on=h;break;default:rs(i,a,l)}}function Jb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ml(i)}catch(l){bt(a,a.return,l)}}}function Zb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ml(i)}catch(l){bt(a,a.return,l)}}function XR(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Yb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Yb),a;default:throw Error(n(435,i.tag))}}function Dd(i,a){var l=XR(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=aC.bind(null,i,h);h.then(p,p)}})}function Zn(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Ws(L.type)){jt=L.stateNode,Jn=!1;break e}break;case 5:jt=L.stateNode,Jn=!1;break e;case 3:case 4:jt=L.stateNode.containerInfo,Jn=!0;break e}L=L.return}if(jt===null)throw Error(n(160));Xb(_,A,p),jt=null,Jn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)e1(a,i),a=a.sibling}var Kr=null;function e1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),er(i),h&4&&(Hs(3,i,i.return),nu(3,i),Hs(5,i,i.return));break;case 1:Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),h&64&&ns&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Kr;if(Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[li]||_[en]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[en]=i,tn(_),h=_;break e;case"link":var A=ew("link","href",p).get(h+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(_=A[L],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=ew("meta","content",p).get(h+(l.content||""))){for(L=0;L<A.length;L++)if(_=A[L],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[en]=i,tn(_),h=_}i.stateNode=h}else tw(p,i.type,i.stateNode);else i.stateNode=Z1(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?tw(p,i.type,i.stateNode):Z1(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&bp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),l!==null&&h&4&&bp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),i.flags&32){p=i.stateNode;try{Xn(p,"")}catch(Te){bt(i,i.return,Te)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,bp(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Ep=!0);break;case 6:if(Zn(a,i),er(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Te){bt(i,i.return,Te)}}break;case 3:if(Yd=null,p=Kr,Kr=Gd(a.containerInfo),Zn(a,i),Kr=p,er(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ml(a.containerInfo)}catch(Te){bt(i,i.return,Te)}Ep&&(Ep=!1,t1(i));break;case 4:h=Kr,Kr=Gd(i.stateNode.containerInfo),Zn(a,i),er(i),Kr=h;break;case 12:Zn(a,i),er(i);break;case 31:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 13:Zn(a,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Md=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 22:p=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=ns,de=on;if(ns=le||p,on=de||Q,Zn(a,i),on=de,ns=le,er(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||ns||on||to(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(_=Q.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Te){bt(Q,Q.return,Te)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Te){bt(Q,Q.return,Te)}}}else if(a.tag===18){if(l===null){Q=a;try{var he=Q.stateNode;p?q1(he,!0):q1(Q.stateNode,!1)}catch(Te){bt(Q,Q.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Dd(i,l))));break;case 19:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 30:break;case 21:break;default:Zn(a,i),er(i)}}function er(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Gb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=wp(i);kd(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Xn(A,""),l.flags&=-33);var L=wp(i);kd(i,L,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=wp(i);xp(i,le,Q);break;default:throw Error(n(161))}}catch(de){bt(i,i.return,de)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function t1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;t1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function is(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qb(i,a.alternate,a),a=a.sibling}function to(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Hs(4,a,a.return),to(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&qb(a,a.return,l),to(a);break;case 27:du(a.stateNode);case 26:case 5:xi(a,a.return),to(a);break;case 22:a.memoizedState===null&&to(a);break;case 30:to(a);break;default:to(a)}i=i.sibling}}function ss(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:ss(p,_,l),nu(4,_);break;case 1:if(ss(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){bt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var L=h.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Dv(Q[p],L)}catch(le){bt(h,h.return,le)}}l&&A&64&&Hb(_),ru(_,_.return);break;case 27:Kb(_);case 26:case 5:ss(p,_,l),l&&h===null&&A&4&&$b(_),ru(_,_.return);break;case 12:ss(p,_,l);break;case 31:ss(p,_,l),l&&A&4&&Jb(p,_);break;case 13:ss(p,_,l),l&&A&4&&Zb(p,_);break;case 22:_.memoizedState===null&&ss(p,_,l),ru(_,_.return);break;case 30:break;default:ss(p,_,l)}a=a.sibling}}function Tp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Hc(l))}function Sp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Hc(i))}function Yr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)n1(i,a,l,h),a=a.sibling}function n1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(i,a,l,h),p&2048&&nu(9,a);break;case 1:Yr(i,a,l,h);break;case 3:Yr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Hc(i)));break;case 12:if(p&2048){Yr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,L=_.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){bt(a,a.return,Q)}}else Yr(i,a,l,h);break;case 31:Yr(i,a,l,h);break;case 13:Yr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Yr(i,a,l,h):iu(i,a):_._visibility&2?Yr(i,a,l,h):(_._visibility|=2,El(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Tp(A,a);break;case 24:Yr(i,a,l,h),p&2048&&Sp(a.alternate,a);break;default:Yr(i,a,l,h)}}function El(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,L=l,Q=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:El(_,A,L,Q,p),nu(8,A);break;case 23:break;case 22:var de=A.stateNode;A.memoizedState!==null?de._visibility&2?El(_,A,L,Q,p):iu(_,A):(de._visibility|=2,El(_,A,L,Q,p)),p&&le&2048&&Tp(A.alternate,A);break;case 24:El(_,A,L,Q,p),p&&le&2048&&Sp(A.alternate,A);break;default:El(_,A,L,Q,p)}a=a.sibling}}function iu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:iu(l,h),p&2048&&Tp(h.alternate,h);break;case 24:iu(l,h),p&2048&&Sp(h.alternate,h);break;default:iu(l,h)}a=a.sibling}}var su=8192;function Tl(i,a,l){if(i.subtreeFlags&su)for(i=i.child;i!==null;)r1(i,a,l),i=i.sibling}function r1(i,a,l){switch(i.tag){case 26:Tl(i,a,l),i.flags&su&&i.memoizedState!==null&&VC(l,Kr,i.memoizedState,i.memoizedProps);break;case 5:Tl(i,a,l);break;case 3:case 4:var h=Kr;Kr=Gd(i.stateNode.containerInfo),Tl(i,a,l),Kr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=su,su=16777216,Tl(i,a,l),su=h):Tl(i,a,l));break;default:Tl(i,a,l)}}function i1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function au(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_n=h,a1(h,i)}i1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)s1(i),i=i.sibling}function s1(i){switch(i.tag){case 0:case 11:case 15:au(i),i.flags&2048&&Hs(9,i,i.return);break;case 3:au(i);break;case 12:au(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Od(i)):au(i);break;default:au(i)}}function Od(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_n=h,a1(h,i)}i1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Hs(8,a,a.return),Od(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Od(a));break;default:Od(a)}i=i.sibling}}function a1(i,a){for(;_n!==null;){var l=_n;switch(l.tag){case 0:case 11:case 15:Hs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Hc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,_n=h;else e:for(l=i;_n!==null;){h=_n;var p=h.sibling,_=h.return;if(Wb(h),h===l){_n=null;break e}if(p!==null){p.return=_,_n=p;break e}_n=_}}}var JR={getCacheForType:function(i){var a=An(rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(rn).controller.signal}},ZR=typeof WeakMap=="function"?WeakMap:Map,ht=0,Nt=null,Ye=null,We=0,vt=0,hr=null,qs=!1,Sl=!1,Ap=!1,as=0,Ht=0,$s=0,no=0,Ip=0,dr=0,Al=0,ou=null,tr=null,Rp=!1,Md=0,o1=0,Pd=1/0,jd=null,Gs=null,dn=0,Ks=null,Il=null,os=0,Cp=0,Np=null,l1=null,lu=0,kp=null;function fr(){return(ht&2)!==0&&We!==0?We&-We:P.T!==null?Vp():Vh()}function c1(){if(dr===0)if((We&536870912)===0||rt){var i=Hi;Hi<<=1,(Hi&3932160)===0&&(Hi=262144),dr=i}else dr=536870912;return i=cr.current,i!==null&&(i.flags|=32),dr}function nr(i,a,l){(i===Nt&&(vt===2||vt===9)||i.cancelPendingCommit!==null)&&(Rl(i,0),Ys(i,We,dr,!1)),Na(i,l),((ht&2)===0||i!==Nt)&&(i===Nt&&((ht&2)===0&&(no|=l),Ht===4&&Ys(i,We,dr,!1)),Ei(i))}function u1(i,a,l){if((ht&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?nC(i,a):Op(i,a,!0),_=h;do{if(p===0){Sl&&!h&&Ys(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!eC(l)){p=Op(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=i;p=ou;var Q=L.current.memoizedState.isDehydrated;if(Q&&(Rl(L,A).flags|=256),A=Op(L,A,!1),A!==2){if(Ap&&!Q){L.errorRecoveryDisabledLanes|=_,no|=_,p=4;break e}_=tr,tr=p,_!==null&&(tr===null?tr=_:tr.push.apply(tr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Rl(i,0),Ys(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Ys(h,a,dr,!qs);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Md+300-xe(),10<p)){if(Ys(h,a,dr,!qs),xn(h,0,!0)!==0)break e;os=a,h.timeoutHandle=B1(h1.bind(null,h,l,tr,jd,Rp,a,dr,no,Al,qs,_,"Throttled",-0,0),p);break e}h1(h,l,tr,jd,Rp,a,dr,no,Al,qs,_,null,-0,0)}}break}while(!0);Ei(i)}function h1(i,a,l,h,p,_,A,L,Q,le,de,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Br},r1(a,_,ge);var Te=(_&62914560)===_?Md-xe():(_&4194048)===_?o1-xe():0;if(Te=LC(ge,Te),Te!==null){os=_,i.cancelPendingCommit=Te(v1.bind(null,i,a,_,l,h,p,A,L,Q,de,ge,null,ce,he)),Ys(i,_,A,!le);return}}v1(i,a,_,l,h,p,A,L,Q)}function eC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!or(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ys(i,a,l,h){a&=~Ip,a&=~no,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-kt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&ka(i,l,a)}function Vd(){return(ht&6)===0?(cu(0),!1):!0}function Dp(){if(Ye!==null){if(vt===0)var i=Ye.return;else i=Ye,Wi=Ka=null,Yg(i),_l=null,$c=0,i=Ye;for(;i!==null;)Fb(i.alternate,i),i=i.return;Ye=null}}function Rl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,bC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),os=0,Dp(),Nt=i,Ye=l=Yi(i.current,null),We=a,vt=0,hr=null,qs=!1,Sl=En(i,a),Ap=!1,Al=dr=Ip=no=$s=Ht=0,tr=ou=null,Rp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-kt(h),_=1<<p;a|=i[p],h&=~_}return as=a,id(),l}function d1(i,a){He=null,P.H=Zc,a===yl||a===dd?(a=Rv(),vt=3):a===jg?(a=Rv(),vt=4):vt=a===up?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hr=a,Ye===null&&(Ht=1,Ad(i,Sr(a,i.current)))}function f1(){var i=cr.current;return i===null?!0:(We&4194048)===We?Cr===null:(We&62914560)===We||(We&536870912)!==0?i===Cr:!1}function m1(){var i=P.H;return P.H=Zc,i===null?Zc:i}function g1(){var i=P.A;return P.A=JR,i}function Ld(){Ht=4,qs||(We&4194048)!==We&&cr.current!==null||(Sl=!0),($s&134217727)===0&&(no&134217727)===0||Nt===null||Ys(Nt,We,dr,!1)}function Op(i,a,l){var h=ht;ht|=2;var p=m1(),_=g1();(Nt!==i||We!==a)&&(jd=null,Rl(i,a)),a=!1;var A=Ht;e:do try{if(vt!==0&&Ye!==null){var L=Ye,Q=hr;switch(vt){case 8:Dp(),A=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(a=!0);var le=vt;if(vt=0,hr=null,Cl(i,L,Q,le),l&&Sl){A=0;break e}break;default:le=vt,vt=0,hr=null,Cl(i,L,Q,le)}}tC(),A=Ht;break}catch(de){d1(i,de)}while(!0);return a&&i.shellSuspendCounter++,Wi=Ka=null,ht=h,P.H=p,P.A=_,Ye===null&&(Nt=null,We=0,id()),A}function tC(){for(;Ye!==null;)p1(Ye)}function nC(i,a){var l=ht;ht|=2;var h=m1(),p=g1();Nt!==i||We!==a?(jd=null,Pd=xe()+500,Rl(i,a)):Sl=En(i,a);e:do try{if(vt!==0&&Ye!==null){a=Ye;var _=hr;t:switch(vt){case 1:vt=0,hr=null,Cl(i,a,_,1);break;case 2:case 9:if(Av(_)){vt=0,hr=null,y1(a);break}a=function(){vt!==2&&vt!==9||Nt!==i||(vt=7),Ei(i)},_.then(a,a);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Av(_)?(vt=0,hr=null,y1(a)):(vt=0,hr=null,Cl(i,a,_,7));break;case 5:var A=null;switch(Ye.tag){case 26:A=Ye.memoizedState;case 5:case 27:var L=Ye;if(A?nw(A):L.stateNode.complete){vt=0,hr=null;var Q=L.sibling;if(Q!==null)Ye=Q;else{var le=L.return;le!==null?(Ye=le,Ud(le)):Ye=null}break t}}vt=0,hr=null,Cl(i,a,_,5);break;case 6:vt=0,hr=null,Cl(i,a,_,6);break;case 8:Dp(),Ht=6;break e;default:throw Error(n(462))}}rC();break}catch(de){d1(i,de)}while(!0);return Wi=Ka=null,P.H=h,P.A=p,ht=l,Ye!==null?0:(Nt=null,We=0,id(),Ht)}function rC(){for(;Ye!==null&&!Be();)p1(Ye)}function p1(i){var a=zb(i.alternate,i,as);i.memoizedProps=i.pendingProps,a===null?Ud(i):Ye=a}function y1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Mb(l,a,a.pendingProps,a.type,void 0,We);break;case 11:a=Mb(l,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:Yg(a);default:Fb(l,a),a=Ye=gv(a,as),a=zb(l,a,as)}i.memoizedProps=i.pendingProps,a===null?Ud(i):Ye=a}function Cl(i,a,l,h){Wi=Ka=null,Yg(a),_l=null,$c=0;var p=a.return;try{if($R(i,p,a,l,We)){Ht=1,Ad(i,Sr(l,i.current)),Ye=null;return}}catch(_){if(p!==null)throw Ye=p,_;Ht=1,Ad(i,Sr(l,i.current)),Ye=null;return}a.flags&32768?(rt||h===1?i=!0:Sl||(We&536870912)!==0?i=!1:(qs=i=!0,(h===2||h===9||h===3||h===6)&&(h=cr.current,h!==null&&h.tag===13&&(h.flags|=16384))),_1(a,i)):Ud(a)}function Ud(i){var a=i;do{if((a.flags&32768)!==0){_1(a,qs);return}i=a.return;var l=YR(a.alternate,a,as);if(l!==null){Ye=l;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=i}while(a!==null);Ht===0&&(Ht=5)}function _1(i,a){do{var l=QR(i.alternate,i);if(l!==null){l.flags&=32767,Ye=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ye=i;return}Ye=i=l}while(i!==null);Ht=6,Ye=null}function v1(i,a,l,h,p,_,A,L,Q){i.cancelPendingCommit=null;do zd();while(dn!==0);if((ht&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=wg,dg(i,l,_,A,L,Q),i===Nt&&(Ye=Nt=null,We=0),Il=a,Ks=i,os=l,Cp=_,Np=p,l1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,oC(ct,function(){return T1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=D.p,D.p=2,A=ht,ht|=4;try{WR(i,a,l)}finally{ht=A,D.p=p,P.T=h}}dn=1,b1(),w1(),x1()}}function b1(){if(dn===1){dn=0;var i=Ks,a=Il,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=ht;ht|=4;try{e1(a,i);var _=$p,A=av(i.containerInfo),L=_.focusedElem,Q=_.selectionRange;if(A!==L&&L&&L.ownerDocument&&sv(L.ownerDocument.documentElement,L)){if(Q!==null&&pg(L)){var le=Q.start,de=Q.end;if(de===void 0&&(de=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(de,L.value.length);else{var ge=L.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Te=L.textContent.length,Me=Math.min(Q.start,Te),Rt=Q.end===void 0?Me:Math.min(Q.end,Te);!he.extend&&Me>Rt&&(A=Rt,Rt=Me,Me=A);var ne=iv(L,Me),X=iv(L,Rt);if(ne&&X&&(he.rangeCount!==1||he.anchorNode!==ne.node||he.anchorOffset!==ne.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(ne.node,ne.offset),he.removeAllRanges(),Me>Rt?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=L;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ge.length;L++){var me=ge[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Jd=!!qp,$p=qp=null}finally{ht=p,D.p=h,P.T=l}}i.current=a,dn=2}}function w1(){if(dn===2){dn=0;var i=Ks,a=Il,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=ht;ht|=4;try{Qb(i,a.alternate,a)}finally{ht=p,D.p=h,P.T=l}}dn=3}}function x1(){if(dn===4||dn===3){dn=0,Oe();var i=Ks,a=Il,l=os,h=l1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Il=Ks=null,E1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Gs=null),qi(l),a=a.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Kt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=D.p,D.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var L=h[A];_(L.value,{componentStack:L.stack})}}finally{P.T=a,D.p=p}}(os&3)!==0&&zd(),Ei(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===kp?lu++:(lu=0,kp=i):lu=0,cu(0)}}function E1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Hc(a)))}function zd(){return b1(),w1(),x1(),T1()}function T1(){if(dn!==5)return!1;var i=Ks,a=Cp;Cp=0;var l=qi(os),h=P.T,p=D.p;try{D.p=32>l?32:l,P.T=null,l=Np,Np=null;var _=Ks,A=os;if(dn=0,Il=Ks=null,os=0,(ht&6)!==0)throw Error(n(331));var L=ht;if(ht|=4,s1(_.current),n1(_,_.current,A,l),ht=L,cu(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Kt,_)}catch{}return!0}finally{D.p=p,P.T=h,E1(i,a)}}function S1(i,a,l){a=Sr(l,a),a=cp(i.stateNode,a,2),i=zs(i,a,2),i!==null&&(Na(i,2),Ei(i))}function bt(i,a,l){if(i.tag===3)S1(i,i,l);else for(;a!==null;){if(a.tag===3){S1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Gs===null||!Gs.has(h))){i=Sr(l,i),l=Ab(2),h=zs(a,l,2),h!==null&&(Ib(l,h,a,i),Na(h,2),Ei(h));break}}a=a.return}}function Mp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new ZR;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Ap=!0,p.add(l),i=iC.bind(null,i,a,l),a.then(i,i))}function iC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(We&l)===l&&(Ht===4||Ht===3&&(We&62914560)===We&&300>xe()-Md?(ht&2)===0&&Rl(i,0):Ip|=l,Al===We&&(Al=0)),Ei(i)}function A1(i,a){a===0&&(a=vr()),i=qa(i,a),i!==null&&(Na(i,a),Ei(i))}function sC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),A1(i,l)}function aC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),A1(i,l)}function oC(i,a){return pe(i,a)}var Bd=null,Nl=null,Pp=!1,Fd=!1,jp=!1,Qs=0;function Ei(i){i!==Nl&&i.next===null&&(Nl===null?Bd=Nl=i:Nl=Nl.next=i),Fd=!0,Pp||(Pp=!0,cC())}function cu(i,a){if(!jp&&Fd){jp=!0;do for(var l=!1,h=Bd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,L=h.pingedLanes;_=(1<<31-kt(42|i)+1)-1,_&=p&~(A&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,N1(h,_))}else _=We,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,N1(h,_));h=h.next}while(l);jp=!1}}function lC(){I1()}function I1(){Fd=Pp=!1;var i=0;Qs!==0&&vC()&&(i=Qs);for(var a=xe(),l=null,h=Bd;h!==null;){var p=h.next,_=R1(h,a);_===0?(h.next=null,l===null?Bd=p:l.next=p,p===null&&(Nl=l)):(l=h,(i!==0||(_&3)!==0)&&(Fd=!0)),h=p}dn!==0&&dn!==5||cu(i),Qs!==0&&(Qs=0)}function R1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-kt(_),L=1<<A,Q=p[A];Q===-1?((L&l)===0||(L&h)!==0)&&(p[A]=Yo(L,a)):Q<=a&&(i.expiredLanes|=L),_&=~L}if(a=Nt,l=We,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(vt===2||vt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),qi(l)){case 2:case 8:l=Bn;break;case 32:l=ct;break;case 268435456:l=Bt;break;default:l=ct}return h=C1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function C1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(zd()&&i.callbackNode!==l)return null;var h=We;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(u1(i,h,a),R1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?C1.bind(null,i):null)}function N1(i,a){if(zd())return null;u1(i,a,!0)}function cC(){wC(function(){(ht&6)!==0?pe(gt,lC):I1()})}function Vp(){if(Qs===0){var i=gl;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Qs=i}return Qs}function k1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:el(""+i)}function D1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function uC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=k1((p[pn]||null).action),A=h.submitter;A&&(a=(a=A[pn]||null)?k1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var L=new pi("action","action",null,h,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Qs!==0){var Q=A?D1(p,A):new FormData(p);rp(l,{pending:!0,data:Q,method:p.method,action:_},null,Q)}}else typeof _=="function"&&(L.preventDefault(),Q=A?D1(p,A):new FormData(p),rp(l,{pending:!0,data:Q,method:p.method,action:_},_,Q))},currentTarget:p}]})}}for(var Lp=0;Lp<bg.length;Lp++){var Up=bg[Lp],hC=Up.toLowerCase(),dC=Up[0].toUpperCase()+Up.slice(1);Gr(hC,"on"+dC)}Gr(cv,"onAnimationEnd"),Gr(uv,"onAnimationIteration"),Gr(hv,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(RR,"onTransitionRun"),Gr(CR,"onTransitionStart"),Gr(NR,"onTransitionCancel"),Gr(dv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function O1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var L=h[A],Q=L.instance,le=L.currentTarget;if(L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(de){rd(de)}p.currentTarget=null,_=Q}else for(A=0;A<h.length;A++){if(L=h[A],Q=L.instance,le=L.currentTarget,L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(de){rd(de)}p.currentTarget=null,_=Q}}}}function Qe(i,a){var l=a[Qo];l===void 0&&(l=a[Qo]=new Set);var h=i+"__bubble";l.has(h)||(M1(a,i,2,!1),l.add(h))}function zp(i,a,l){var h=0;a&&(h|=4),M1(l,i,h,a)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Bp(i){if(!i[Hd]){i[Hd]=!0,xc.forEach(function(l){l!=="selectionchange"&&(fC.has(l)||zp(l,!1,i),zp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Hd]||(a[Hd]=!0,zp("selectionchange",!1,a))}}function M1(i,a,l,h){switch(cw(a)){case 2:var p=BC;break;case 8:p=FC;break;default:p=ny}l=p.bind(null,a,l,i),p=void 0,!ja||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Fp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var L=h.stateNode.containerInfo;if(L===p)break;if(A===4)for(A=h.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;L!==null;){if(A=ci(L),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){h=_=A;continue e}L=L.parentNode}}h=h.return}Ns(function(){var le=_,de=wr(l),ge=[];e:{var ce=fv.get(i);if(ce!==void 0){var he=pi,Te=i;switch(i){case"keypress":if(La(l)===0)break e;case"keydown":case"keyup":he=ed;break;case"focusin":Te="focus",he=za;break;case"focusout":Te="blur",he=za;break;case"beforeblur":case"afterblur":he=za;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=x;break;case cv:case uv:case hv:he=Kh;break;case dv:he=B;break;case"scroll":case"scrollend":he=Mc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=Yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Ki;break;case"toggle":case"beforetoggle":he=Fe}var Me=(a&4)!==0,Rt=!Me&&(i==="scroll"||i==="scrollend"),ne=Me?ce!==null?ce+"Capture":null:ce;Me=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||ne===null||(me=Fr(X,ne),me!=null&&Me.push(hu(X,me,oe))),Rt)break;X=X.return}0<Me.length&&(ce=new he(ce,Te,null,l,de),ge.push({event:ce,listeners:Me}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==kc&&(Te=l.relatedTarget||l.fromElement)&&(ci(Te)||Te[oi]))break e;if((he||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Te=l.relatedTarget||l.toElement,he=le,Te=Te?ci(Te):null,Te!==null&&(Rt=o(Te),Me=Te.tag,Te!==Rt||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(he=null,Te=le),he!==Te)){if(Me=Pc,me="onMouseLeave",ne="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Ki,me="onPointerLeave",ne="onPointerEnter",X="pointer"),Rt=he==null?ce:sr(he),oe=Te==null?ce:sr(Te),ce=new Me(me,X+"leave",he,l,de),ce.target=Rt,ce.relatedTarget=oe,me=null,ci(de)===le&&(Me=new Me(ne,X+"enter",Te,l,de),Me.target=oe,Me.relatedTarget=Rt,me=Me),Rt=me,he&&Te)t:{for(Me=mC,ne=he,X=Te,oe=0,me=ne;me;me=Me(me))oe++;me=0;for(var Ne=X;Ne;Ne=Me(Ne))me++;for(;0<oe-me;)ne=Me(ne),oe--;for(;0<me-oe;)X=Me(X),me--;for(;oe--;){if(ne===X||X!==null&&ne===X.alternate){Me=ne;break t}ne=Me(ne),X=Me(X)}Me=null}else Me=null;he!==null&&P1(ge,ce,he,Me,!1),Te!==null&&Rt!==null&&P1(ge,Rt,Te,Me,!0)}}e:{if(ce=le?sr(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var ot=J_;else if(W_(ce))if(Z_)ot=SR;else{ot=ER;var Ie=xR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Zo(le.elementType)&&(ot=J_):ot=TR;if(ot&&(ot=ot(i,le))){X_(ge,ot,l,de);break e}Ie&&Ie(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Rc(ce,"number",ce.value)}switch(Ie=le?sr(le):window,i){case"focusin":(W_(Ie)||Ie.contentEditable==="true")&&(ol=Ie,yg=le,zc=null);break;case"focusout":zc=yg=ol=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,ov(ge,l,de);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":ov(ge,l,de)}var $e;if(ut)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else al?Ba(i,l)&&(Xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(vi&&l.locale!=="ko"&&(al||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&al&&($e=Oc()):(gi=de,Dc="value"in gi?gi.value:gi.textContent,al=!0)),Ie=qd(le,Xe),0<Ie.length&&(Xe=new _i(Xe,i,null,l,de),ge.push({event:Xe,listeners:Ie}),$e?Xe.data=$e:($e=sl(l),$e!==null&&(Xe.data=$e)))),($e=Er?_R(i,l):vR(i,l))&&(Xe=qd(le,"onBeforeInput"),0<Xe.length&&(Ie=new _i("onBeforeInput","beforeinput",null,l,de),ge.push({event:Ie,listeners:Xe}),Ie.data=$e)),uC(ge,i,le,l,de)}O1(ge,a)})}function hu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function qd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Fr(i,l),p!=null&&h.unshift(hu(i,p,_)),p=Fr(i,a),p!=null&&h.push(hu(i,p,_))),i.tag===3)return h;i=i.return}return[]}function mC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function P1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var L=l,Q=L.alternate,le=L.stateNode;if(L=L.tag,Q!==null&&Q===h)break;L!==5&&L!==26&&L!==27||le===null||(Q=le,p?(le=Fr(l,_),le!=null&&A.unshift(hu(l,le,Q))):p||(le=Fr(l,_),le!=null&&A.push(hu(l,le,Q)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var gC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function j1(i){return(typeof i=="string"?i:""+i).replace(gC,`
`).replace(pC,"")}function V1(i,a){return a=j1(a),j1(i)===a}function It(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Xn(i,""+h);break;case"className":ar(i,"class",h);break;case"tabIndex":ar(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(i,l,h);break;case"style":Nc(i,h,_);break;case"data":if(a!=="object"){ar(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=el(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&It(i,a,"name",p.name,p,null),It(i,a,"formEncType",p.formEncType,p,null),It(i,a,"formMethod",p.formMethod,p,null),It(i,a,"formTarget",p.formTarget,p,null)):(It(i,a,"encType",p.encType,p,null),It(i,a,"method",p.method,p,null),It(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=el(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Br);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=el(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Qe("beforetoggle",i),Qe("toggle",i),Xo(i,"popover",h);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Xo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qh.get(l)||l,Xo(i,l,h))}}function Hp(i,a,l,h,p,_){switch(l){case"style":Nc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&Xn(i,""+h);break;case"onScroll":h!=null&&Qe("scroll",i);break;case"onScrollEnd":h!=null&&Qe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ec.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[pn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Xo(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",i),Qe("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:It(i,a,_,A,l,null)}}p&&It(i,a,"srcSet",l.srcSet,l,null),h&&It(i,a,"src",l.src,l,null);return;case"input":Qe("invalid",i);var L=_=A=p=null,Q=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var de=l[h];if(de!=null)switch(h){case"name":p=de;break;case"type":A=de;break;case"checked":Q=de;break;case"defaultChecked":le=de;break;case"value":_=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,a));break;default:It(i,a,h,de,l,null)}}Bh(i,_,L,Q,le,A,p,!1);return;case"select":Qe("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(L=l[p],L!=null))switch(p){case"value":_=L;break;case"defaultValue":A=L;break;case"multiple":h=L;default:It(i,a,p,L,l,null)}a=_,l=A,i.multiple=!!h,a!=null?As(i,!!h,a,!1):l!=null&&As(i,!!h,l,!0);return;case"textarea":Qe("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":h=L;break;case"defaultValue":p=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:It(i,a,A,L,l,null)}Is(i,h,p,_);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(h=l[Q],h!=null))switch(Q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:It(i,a,Q,h,l,null)}return;case"dialog":Qe("beforetoggle",i),Qe("toggle",i),Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":Qe("load",i);break;case"video":case"audio":for(h=0;h<uu.length;h++)Qe(uu[h],i);break;case"image":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"embed":case"source":case"link":Qe("error",i),Qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:It(i,a,le,h,l,null)}return;default:if(Zo(a)){for(de in l)l.hasOwnProperty(de)&&(h=l[de],h!==void 0&&Hp(i,a,de,h,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(h=l[L],h!=null&&It(i,a,L,h,l,null))}function yC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,L=null,Q=null,le=null,de=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:h.hasOwnProperty(he)||It(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":de=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&It(i,a,ce,he,h,ge)}}Jo(i,A,L,Q,le,de,_,p);return;case"select":he=A=L=ce=null;for(_ in l)if(Q=l[_],l.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":he=Q;default:h.hasOwnProperty(_)||It(i,a,_,null,h,Q)}for(p in h)if(_=h[p],Q=l[p],h.hasOwnProperty(p)&&(_!=null||Q!=null))switch(p){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":A=_;default:_!==Q&&It(i,a,p,_,h,Q)}a=L,l=A,h=he,ce!=null?As(i,!!l,ce,!1):!!h!=!!l&&(a!=null?As(i,!!l,a,!0):As(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(L in l)if(p=l[L],l.hasOwnProperty(L)&&p!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:It(i,a,L,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&It(i,a,A,p,h,_)}Fh(i,ce,he);return;case"option":for(var Te in l)if(ce=l[Te],l.hasOwnProperty(Te)&&ce!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:It(i,a,Te,null,h,ce)}for(Q in h)if(ce=h[Q],he=l[Q],h.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:It(i,a,Q,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)ce=l[Me],l.hasOwnProperty(Me)&&ce!=null&&!h.hasOwnProperty(Me)&&It(i,a,Me,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:It(i,a,le,ce,h,he)}return;default:if(Zo(a)){for(var Rt in l)ce=l[Rt],l.hasOwnProperty(Rt)&&ce!==void 0&&!h.hasOwnProperty(Rt)&&Hp(i,a,Rt,void 0,h,ce);for(de in h)ce=h[de],he=l[de],!h.hasOwnProperty(de)||ce===he||ce===void 0&&he===void 0||Hp(i,a,de,ce,h,he);return}}for(var ne in l)ce=l[ne],l.hasOwnProperty(ne)&&ce!=null&&!h.hasOwnProperty(ne)&&It(i,a,ne,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||It(i,a,ge,ce,h,he)}function L1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _C(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,L=p.duration;if(_&&L&&L1(A)){for(A=0,L=p.responseEnd,h+=1;h<l.length;h++){var Q=l[h],le=Q.startTime;if(le>L)break;var de=Q.transferSize,ge=Q.initiatorType;de&&L1(ge)&&(Q=Q.responseEnd,A+=de*(Q<L?1:(L-le)/(Q-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qp=null,$p=null;function $d(i){return i.nodeType===9?i:i.ownerDocument}function U1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Gp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kp=null;function vC(){var i=window.event;return i&&i.type==="popstate"?i===Kp?!1:(Kp=i,!0):(Kp=null,!1)}var B1=typeof setTimeout=="function"?setTimeout:void 0,bC=typeof clearTimeout=="function"?clearTimeout:void 0,F1=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof F1<"u"?function(i){return F1.resolve(null).then(i).catch(xC)}:B1;function xC(i){setTimeout(function(){throw i})}function Ws(i){return i==="head"}function H1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Ml(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")du(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,du(l);for(var _=l.firstChild;_;){var A=_.nextSibling,L=_.nodeName;_[li]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&du(i.ownerDocument.body);l=p}while(l);Ml(a)}function q1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function Yp(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yp(l),Wo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function EC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[li])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Nr(i.nextSibling),i===null)break}return null}function TC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Nr(i.nextSibling),i===null))return null;return i}function $1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Nr(i.nextSibling),i===null))return null;return i}function Qp(i){return i.data==="$?"||i.data==="$~"}function Wp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function SC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Nr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Xp=null;function G1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Nr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function K1(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Y1(i,a,l){switch(a=$d(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function du(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Wo(i)}var kr=new Map,Q1=new Set;function Gd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ls=D.d;D.d={f:AC,r:IC,D:RC,C:CC,L:NC,m:kC,X:OC,S:DC,M:MC};function AC(){var i=ls.f(),a=Vd();return i||a}function IC(i){var a=br(i);a!==null&&a.tag===5&&a.type==="form"?db(a):ls.r(i)}var kl=typeof document>"u"?null:document;function W1(i,a,l){var h=kl;if(h&&typeof a=="string"&&a){var p=Wn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Q1.has(p)||(Q1.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function RC(i){ls.D(i),W1("dns-prefetch",i,null)}function CC(i,a){ls.C(i,a),W1("preconnect",i,a)}function NC(i,a,l){ls.L(i,a,l);var h=kl;if(h&&i&&a){var p='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Wn(l.imageSizes)+'"]')):p+='[href="'+Wn(i)+'"]';var _=p;switch(a){case"style":_=Dl(i);break;case"script":_=Ol(i)}kr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),kr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(fu(_))||a==="script"&&h.querySelector(mu(_))||(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function kC(i,a){ls.m(i,a);var l=kl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ol(i)}if(!kr.has(_)&&(i=y({rel:"modulepreload",href:i},a),kr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(mu(_)))return}h=l.createElement("link"),Rn(h,"link",i),tn(h),l.head.appendChild(h)}}}function DC(i,a,l){ls.S(i,a,l);var h=kl;if(h&&i){var p=ui(h).hoistableStyles,_=Dl(i);a=a||"default";var A=p.get(_);if(!A){var L={loading:0,preload:null};if(A=h.querySelector(fu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=kr.get(_))&&Jp(i,l);var Q=A=h.createElement("link");tn(Q),Rn(Q,"link",i),Q._p=new Promise(function(le,de){Q.onload=le,Q.onerror=de}),Q.addEventListener("load",function(){L.loading|=1}),Q.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Kd(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:L},p.set(_,A)}}}function OC(i,a){ls.X(i,a);var l=kl;if(l&&i){var h=ui(l).hoistableScripts,p=Ol(i),_=h.get(p);_||(_=l.querySelector(mu(p)),_||(i=y({src:i,async:!0},a),(a=kr.get(p))&&Zp(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function MC(i,a){ls.M(i,a);var l=kl;if(l&&i){var h=ui(l).hoistableScripts,p=Ol(i),_=h.get(p);_||(_=l.querySelector(mu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=kr.get(p))&&Zp(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function X1(i,a,l,h){var p=(p=_e.current)?Gd(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Dl(l.href),l=ui(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Dl(l.href);var _=ui(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(fu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),kr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},kr.set(i,l),_||PC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ol(l),l=ui(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Dl(i){return'href="'+Wn(i)+'"'}function fu(i){return'link[rel="stylesheet"]['+i+"]"}function J1(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function PC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),tn(a),i.head.appendChild(a))}function Ol(i){return'[src="'+Wn(i)+'"]'}function mu(i){return"script[async]"+i}function Z1(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Wn(l.href)+'"]');if(h)return a.instance=h,tn(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),tn(h),Rn(h,"style",p),Kd(h,l.precedence,i),a.instance=h;case"stylesheet":p=Dl(l.href);var _=i.querySelector(fu(p));if(_)return a.state.loading|=4,a.instance=_,tn(_),_;h=J1(l),(p=kr.get(p))&&Jp(h,p),_=(i.ownerDocument||i).createElement("link"),tn(_);var A=_;return A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),a.state.loading|=4,Kd(_,l.precedence,i),a.instance=_;case"script":return _=Ol(l.src),(p=i.querySelector(mu(_)))?(a.instance=p,tn(p),p):(h=l,(p=kr.get(_))&&(h=y({},l),Zp(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),tn(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Kd(h,l.precedence,i));return a.instance}function Kd(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var L=h[A];if(L.dataset.precedence===a)_=L;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Jp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Zp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Yd=null;function ew(i,a,l){if(Yd===null){var h=new Map,p=Yd=new Map;p.set(l,h)}else p=Yd,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[li]||_[en]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var L=h.get(A);L?L.push(_):h.set(A,[_])}}return h}function tw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function jC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function nw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function VC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Dl(h.href),_=a.querySelector(fu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Qd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,tn(_);return}_=a.ownerDocument||a,h=J1(h),(p=kr.get(p))&&Jp(h,p),_=_.createElement("link"),tn(_);var A=_;A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Qd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ey=0;function LC(i,a){return i.stylesheets&&i.count===0&&Xd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Xd(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&ey===0&&(ey=62500*_C());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xd(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ey?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wd=null;function Xd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wd=new Map,a.forEach(UC,i),Wd=null,Qd.call(i))}function UC(i,a){if(!(a.state.loading&4)){var l=Wd.get(i);if(l)var h=l.get(null);else{l=new Map,Wd.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=Qd.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var gu={$$typeof:U,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function zC(i,a,l,h,p,_,A,L,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function rw(i,a,l,h,p,_,A,L,Q,le,de,ge){return i=new zC(i,a,l,A,Q,le,de,ge,L),a=1,_===!0&&(a|=24),_=lr(3,null,null,a),i.current=_,_.stateNode=i,a=Og(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Vg(_),i}function iw(i){return i?(i=ul,i):ul}function sw(i,a,l,h,p,_){p=iw(p),h.context===null?h.context=p:h.pendingContext=p,h=Us(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=zs(i,h,a),l!==null&&(nr(l,i,a),Kc(l,i,a))}function aw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ty(i,a){aw(i,a),(i=i.alternate)&&aw(i,a)}function ow(i){if(i.tag===13||i.tag===31){var a=qa(i,67108864);a!==null&&nr(a,i,67108864),ty(i,67108864)}}function lw(i){if(i.tag===13||i.tag===31){var a=fr();a=Da(a);var l=qa(i,a);l!==null&&nr(l,i,a),ty(i,a)}}var Jd=!0;function BC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=2,ny(i,a,l,h)}finally{D.p=_,P.T=p}}function FC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=8,ny(i,a,l,h)}finally{D.p=_,P.T=p}}function ny(i,a,l,h){if(Jd){var p=ry(h);if(p===null)Fp(i,a,h,Zd,l),uw(i,h);else if(qC(p,i,a,l,h))h.stopPropagation();else if(uw(i,h),a&4&&-1<HC.indexOf(i)){for(;p!==null;){var _=br(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var Q=1<<31-kt(A);L.entanglements[1]|=Q,A&=~Q}Ei(_),(ht&6)===0&&(Pd=xe()+500,cu(0))}}break;case 31:case 13:L=qa(_,2),L!==null&&nr(L,_,2),Vd(),ty(_,2)}if(_=ry(h),_===null&&Fp(i,a,h,Zd,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Fp(i,a,h,null,l)}}function ry(i){return i=wr(i),iy(i)}var Zd=null;function iy(i){if(Zd=null,i=ci(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Zd=i,null}function cw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case gt:return 2;case Bn:return 8;case ct:case Fn:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var sy=!1,Xs=null,Js=null,Zs=null,pu=new Map,yu=new Map,ea=[],HC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uw(i,a){switch(i){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":pu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(a.pointerId)}}function _u(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=br(a),a!==null&&ow(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function qC(i,a,l,h,p){switch(a){case"focusin":return Xs=_u(Xs,i,a,l,h,p),!0;case"dragenter":return Js=_u(Js,i,a,l,h,p),!0;case"mouseover":return Zs=_u(Zs,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return pu.set(_,_u(pu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,yu.set(_,_u(yu.get(_)||null,i,a,l,h,p)),!0}return!1}function hw(i){var a=ci(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Ur(i.priority,function(){lw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,Ur(i.priority,function(){lw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ef(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ry(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);kc=h,l.target.dispatchEvent(h),kc=null}else return a=br(l),a!==null&&ow(a),i.blockedOn=l,!1;a.shift()}return!0}function dw(i,a,l){ef(i)&&l.delete(a)}function $C(){sy=!1,Xs!==null&&ef(Xs)&&(Xs=null),Js!==null&&ef(Js)&&(Js=null),Zs!==null&&ef(Zs)&&(Zs=null),pu.forEach(dw),yu.forEach(dw)}function tf(i,a){i.blockedOn===a&&(i.blockedOn=null,sy||(sy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$C)))}var nf=null;function fw(i){nf!==i&&(nf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nf===i&&(nf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(iy(h||l)===null)continue;break}var _=br(l);_!==null&&(i.splice(a,3),a-=3,rp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Ml(i){function a(Q){return tf(Q,i)}Xs!==null&&tf(Xs,i),Js!==null&&tf(Js,i),Zs!==null&&tf(Zs,i),pu.forEach(a),yu.forEach(a);for(var l=0;l<ea.length;l++){var h=ea[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ea.length&&(l=ea[0],l.blockedOn===null);)hw(l),l.blockedOn===null&&ea.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[pn]||null;if(typeof _=="function")A||fw(l);else if(A){var L=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[pn]||null)L=A.formAction;else if(iy(p)!==null)continue}else L=A.action;typeof L=="function"?l[h+1]=L:(l.splice(h,3),h-=3),fw(l)}}}function mw(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function ay(i){this._internalRoot=i}rf.prototype.render=ay.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=fr();sw(l,h,i,a,null,null)},rf.prototype.unmount=ay.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;sw(i.current,2,null,i,null,null),Vd(),a[oi]=null}};function rf(i){this._internalRoot=i}rf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Vh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ea.length&&a!==0&&a<ea[l].priority;l++);ea.splice(l,0,i),l===0&&hw(i)}};var gw=e.version;if(gw!=="19.2.3")throw Error(n(527,gw,"19.2.3"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var GC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Kt=sf.inject(GC),Tt=sf}catch{}}return bu.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=xb,_=Eb,A=Tb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=rw(i,1,!1,null,null,l,h,null,p,_,A,mw),i[oi]=a.current,Bp(i),new ay(a)},bu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=xb,A=Eb,L=Tb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=rw(i,1,!0,a,l??null,h,p,Q,_,A,L,mw),a.context=iw(null),l=a.current,h=fr(),h=Da(h),p=Us(h),p.callback=null,zs(l,p,h),l=h,a.current.lanes=l,Na(a,l),Ei(a),i[oi]=a.current,Bp(i),new rf(a)},bu.version="19.2.3",bu}var Sw;function rN(){if(Sw)return cy.exports;Sw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cy.exports=nN(),cy.exports}var iN=rN();var Aw="popstate";function sN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Uo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vy("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Qu(o))}function n(s,o){Vr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return oN(e,t,n,r)}function zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aN(){return Math.random().toString(36).substring(2,10)}function Iw(r,e){return{usr:r.state,key:r.key,idx:e}}function Vy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Uo(e):e,state:t,key:e&&e.key||n||aN()}}function Qu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Uo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function oN(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let O=g(),V=O==null?null:O-f;f=O,d&&d({action:u,location:N.location,delta:V})}function v(O,V){u="PUSH";let q=Vy(N.location,O,V);t&&t(q,O),f=g()+1;let U=Iw(q,f),H=N.createHref(q);try{c.pushState(U,"",H)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(H)}o&&d&&d({action:u,location:N.location,delta:1})}function w(O,V){u="REPLACE";let q=Vy(N.location,O,V);t&&t(q,O),f=g();let U=Iw(q,f),H=N.createHref(q);c.replaceState(U,"",H),o&&d&&d({action:u,location:N.location,delta:0})}function E(O){return lN(O)}let N={get action(){return u},get location(){return r(s,c)},listen(O){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Aw,y),d=O,()=>{s.removeEventListener(Aw,y),d=null}},createHref(O){return e(s,O)},createURL:E,encodeLocation(O){let V=E(O);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(O){return c.go(O)}};return N}function lN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Qu(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function PT(r,e,t="/"){return cN(r,e,t,!1)}function cN(r,e,t,n){let s=typeof e=="string"?Uo(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=jT(r);uN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=wN(o);u=vN(c[d],f,n)}return u}function jT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;zt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=fs([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(zt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),jT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:yN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of VT(c.path))o(c,u,!0,d)}),e}function VT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=VT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function uN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:_N(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var hN=/^:[\w-]+$/,dN=3,fN=2,mN=1,gN=10,pN=-2,Rw=r=>r==="*";function yN(r,e){let t=r.split("/"),n=t.length;return t.some(Rw)&&(n+=pN),e&&(n+=fN),t.filter(s=>!Rw(s)).reduce((s,o)=>s+(hN.test(o)?dN:o===""?mN:gN),n)}function _N(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function vN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:fs([o,y.pathname]),pathnameBase:AN(fs([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=fs([o,y.pathnameBase]))}return c}function zf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=bN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let E=u[v]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function bN(r,e=!1,t=!0){Vr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function wN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var xN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EN=r=>xN.test(r);function TN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Uo(r):r,o;if(t)if(EN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Cw(t.substring(1),"/"):o=Cw(t,e)}else o=e;return{pathname:o,search:IN(n),hash:RN(s)}}function Cw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function fy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LT(r){let e=SN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function UT(r,e,t,n=!1){let s;typeof r=="string"?s=Uo(r):(s={...r},zt(!s.pathname||!s.pathname.includes("?"),fy("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),fy("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),fy("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=TN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var fs=r=>r.join("/").replace(/\/\/+/g,"/"),AN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,RN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function CN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function NN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var kN=["GET",...zT];new Set(kN);var mc=$.createContext(null);mc.displayName="DataRouter";var Im=$.createContext(null);Im.displayName="DataRouterState";$.createContext(!1);var BT=$.createContext({isTransitioning:!1});BT.displayName="ViewTransition";var DN=$.createContext(new Map);DN.displayName="Fetchers";var ON=$.createContext(null);ON.displayName="Await";var ri=$.createContext(null);ri.displayName="Navigation";var ph=$.createContext(null);ph.displayName="Location";var ii=$.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var C0=$.createContext(null);C0.displayName="RouteError";function MN(r,{relative:e}={}){zt(yh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ri),{hash:s,pathname:o,search:c}=_h(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:fs([t,o])),n.createHref({pathname:u,search:c,hash:s})}function yh(){return $.useContext(ph)!=null}function _r(){return zt(yh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(ph).location}var FT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HT(r){$.useContext(ri).static||$.useLayoutEffect(r)}function Sa(){let{isDataRoute:r}=$.useContext(ii);return r?WN():PN()}function PN(){zt(yh(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(mc),{basename:e,navigator:t}=$.useContext(ri),{matches:n}=$.useContext(ii),{pathname:s}=_r(),o=JSON.stringify(LT(n)),c=$.useRef(!1);return HT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Vr(c.current,FT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=UT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:fs([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var jN=$.createContext(null);function VN(r){let e=$.useContext(ii).outlet;return $.useMemo(()=>e&&$.createElement(jN.Provider,{value:r},e),[e,r])}function LN(){let{matches:r}=$.useContext(ii),e=r[r.length-1];return e?e.params:{}}function _h(r,{relative:e}={}){let{matches:t}=$.useContext(ii),{pathname:n}=_r(),s=JSON.stringify(LT(t));return $.useMemo(()=>UT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function UN(r,e){return qT(r,e)}function qT(r,e,t,n,s){zt(yh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ri),{matches:c}=$.useContext(ii),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let q=y&&y.path||"";$T(f,!y||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let v=_r(),w;if(e){let q=typeof e=="string"?Uo(e):e;zt(g==="/"||q.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),w=q}else w=v;let E=w.pathname||"/",N=E;if(g!=="/"){let q=g.replace(/^\//,"").split("/");N="/"+E.replace(/^\//,"").split("/").slice(q.length).join("/")}let O=PT(r,{pathname:N});Vr(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Vr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=qN(O&&O.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:fs([g,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:fs([g,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function zN(){let r=QN(),e=CN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var BN=$.createElement(zN,null),FN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(ii.Provider,{value:this.props.routeContext},$.createElement(C0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HN({routeContext:r,match:e,children:t}){let n=$.useContext(mc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ii.Provider,{value:r},t)}function qN(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);zt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:NN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,E=!1,N=null,O=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||BN,u&&(d<0&&v===0?($T("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):d===v&&(E=!0,O=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),q=()=>{let U;return w?U=N:E?U=O:y.route.Component?U=$.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=g,$.createElement(HN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:U})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(FN,{location:t.location,revalidation:t.revalidation,component:N,error:w,children:q(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):q()},null)}function N0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $N(r){let e=$.useContext(mc);return zt(e,N0(r)),e}function GN(r){let e=$.useContext(Im);return zt(e,N0(r)),e}function KN(r){let e=$.useContext(ii);return zt(e,N0(r)),e}function k0(r){let e=KN(r),t=e.matches[e.matches.length-1];return zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function YN(){return k0("useRouteId")}function QN(){let r=$.useContext(C0),e=GN("useRouteError"),t=k0("useRouteError");return r!==void 0?r:e.errors?.[t]}function WN(){let{router:r}=$N("useNavigate"),e=k0("useNavigate"),t=$.useRef(!1);return HT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Vr(t.current,FT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Nw={};function $T(r,e,t){!e&&!Nw[r]&&(Nw[r]=!0,Vr(!1,t))}$.memo(XN);function XN({routes:r,future:e,state:t,unstable_onError:n}){return qT(r,void 0,t,n,e)}function JN(r){return VN(r.context)}function Qr(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZN({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){zt(!yh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Uo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,E=$.useMemo(()=>{let N=ps(f,u);return N==null?null:{location:{pathname:N,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Vr(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:$.createElement(ri.Provider,{value:d},$.createElement(ph.Provider,{children:e,value:E}))}function ek({children:r,location:e}){return UN(Ly(r),e)}function Ly(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,Ly(n.props.children,o));return}zt(n.type===Qr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Ly(n.props.children,o)),t.push(c)}),t}var vf="get",bf="application/x-www-form-urlencoded";function Rm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function tk(r){return Rm(r)&&r.tagName.toLowerCase()==="button"}function nk(r){return Rm(r)&&r.tagName.toLowerCase()==="form"}function rk(r){return Rm(r)&&r.tagName.toLowerCase()==="input"}function ik(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function sk(r,e){return r.button===0&&(!e||e==="_self")&&!ik(r)}var af=null;function ak(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var ok=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function my(r){return r!=null&&!ok.has(r)?(Vr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):r}function lk(r,e){let t,n,s,o,c;if(nk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||vf,s=my(r.getAttribute("enctype"))||bf,o=new FormData(r)}else if(tk(r)||rk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||vf,s=my(r.getAttribute("formenctype"))||my(u.getAttribute("enctype"))||bf,o=new FormData(u,r),!ak()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Rm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vf,n=null,s=bf,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function D0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ck(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function uk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function dk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await uk(o,t);return c.links?c.links():[]}return[]}));return pk(n.flat(1).filter(hk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function kw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function fk(r,e,{includeHydrateFallback:t}={}){return mk(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function mk(r){return[...new Set(r)]}function gk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function pk(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(gk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function GT(){let r=$.useContext(mc);return D0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function yk(){let r=$.useContext(Im);return D0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var O0=$.createContext(void 0);O0.displayName="FrameworkContext";function KT(){let r=$.useContext(O0);return D0(r,"You must render this element inside a <HydratedRouter> element"),r}function _k(r,e){let t=$.useContext(O0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let N=V=>{V.forEach(q=>{c(q.isIntersecting)})},O=new IntersectionObserver(N,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[r]),$.useEffect(()=>{if(n){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[n]);let w=()=>{s(!0)},E=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:wu(u,w),onBlur:wu(d,E),onMouseEnter:wu(f,w),onMouseLeave:wu(g,E),onTouchStart:wu(y,w)}]:[!1,v,{}]}function wu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function vk({page:r,...e}){let{router:t}=GT(),n=$.useMemo(()=>PT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(wk,{page:r,matches:n,...e}):null}function bk(r){let{manifest:e,routeModules:t}=KT(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return dk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function wk({page:r,matches:e,...t}){let n=_r(),{manifest:s,routeModules:o}=KT(),{basename:c}=GT(),{loaderData:u,matches:d}=yk(),f=$.useMemo(()=>kw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>kw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let E=new Set,N=!1;if(e.forEach(V=>{let q=s.routes[V.route.id];!q||!q.hasLoader||(!f.some(U=>U.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||q.hasClientLoader?N=!0:E.add(V.route.id))}),E.size===0)return[];let O=ck(r,c,"data");return N&&E.size>0&&O.searchParams.set("_routes",e.filter(V=>E.has(V.route.id)).map(V=>V.route.id).join(",")),[O.pathname+O.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>fk(g,s),[g,s]),w=bk(g);return $.createElement($.Fragment,null,y.map(E=>$.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>$.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:N})=>$.createElement("link",{key:E,nonce:t.nonce,...N})))}function xk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YT&&(window.__reactRouterVersion="7.10.1")}catch{}function Ek({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=sN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(ZN,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var QT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:E,unstable_useTransitions:N}=$.useContext(ri),O=typeof f=="string"&&QT.test(f),V,q=!1;if(typeof f=="string"&&O&&(V=f,YT))try{let R=new URL(window.location.href),k=f.startsWith("//")?new URL(R.protocol+f):new URL(f),j=ps(k.pathname,E);k.origin===R.origin&&j!=null?f=j+k.search+k.hash:q=!0}catch{Vr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=MN(f,{relative:s}),[H,K,z]=_k(n,v),M=Ik(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:N});function S(R){e&&e(R),R.defaultPrevented||M(R)}let T=$.createElement("a",{...v,...z,href:V||U,onClick:q||o?e:S,ref:xk(w,K),target:d,"data-discover":!O&&t==="render"?"true":void 0});return H&&!O?$.createElement($.Fragment,null,T,$.createElement(vk,{page:U})):T});Jr.displayName="Link";var Tk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=_h(c,{relative:f.relative}),v=_r(),w=$.useContext(Im),{navigator:E,basename:N}=$.useContext(ri),O=w!=null&&Dk(y)&&u===!0,V=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,q=v.pathname,U=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(q=q.toLowerCase(),U=U?U.toLowerCase():null,V=V.toLowerCase()),U&&N&&(U=ps(U,N)||U);const H=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let K=q===V||!s&&q.startsWith(V)&&q.charAt(H)==="/",z=U!=null&&(U===V||!s&&U.startsWith(V)&&U.charAt(V.length)==="/"),M={isActive:K,isPending:z,isTransitioning:O},S=K?e:void 0,T;typeof n=="function"?T=n(M):T=[n,K?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(M):o;return $.createElement(Jr,{...f,"aria-current":S,className:T,ref:g,style:R,to:c,viewTransition:u},typeof d=="function"?d(M):d)});Tk.displayName="NavLink";var Sk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=vf,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:E}=$.useContext(ri),N=Nk(),O=kk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",q=typeof u=="string"&&QT.test(u),U=H=>{if(d&&d(H),H.defaultPrevented)return;H.preventDefault();let K=H.nativeEvent.submitter,z=K?.getAttribute("formmethod")||c,M=()=>N(K||H.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});E&&t!==!1?$.startTransition(()=>M()):M()};return $.createElement("form",{ref:w,method:V,action:O,onSubmit:n?d:U,...v,"data-discover":!q&&r==="render"?"true":void 0})});Sk.displayName="Form";function Ak(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WT(r){let e=$.useContext(mc);return zt(e,Ak(r)),e}function Ik(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Sa(),f=_r(),g=_h(r,{relative:o});return $.useCallback(y=>{if(sk(y,e)){y.preventDefault();let v=t!==void 0?t:Qu(f)===Qu(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var Rk=0,Ck=()=>`__${String(++Rk)}__`;function Nk(){let{router:r}=WT("useSubmit"),{basename:e}=$.useContext(ri),t=YN(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=lk(o,e);if(c.navigate===!1){let v=c.fetcherKey||Ck();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function kk(r,{relative:e}={}){let{basename:t}=$.useContext(ri),n=$.useContext(ii);zt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={..._h(r||".",{relative:e})},c=_r();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:fs([t,o.pathname])),Qu(o)}function Dk(r,{relative:e}={}){let t=$.useContext(BT);zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=WT("useViewTransitionState"),s=_h(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return zf(s.pathname,c)!=null||zf(s.pathname,o)!=null}const Ve=r=>typeof r=="string",xu=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Dw=r=>r==null?"":""+r,Ok=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Mk=/###/g,Ow=r=>r&&r.indexOf("###")>-1?r.replace(Mk,"."):r,Mw=r=>!r||Ve(r),Pu=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Mw(r))return{};const o=Ow(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Mw(r)?{}:{obj:r,k:Ow(n[s])}},Pw=(r,e,t)=>{const{obj:n,k:s}=Pu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Pu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Pu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},Pk=(r,e,t,n)=>{const{obj:s,k:o}=Pu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Bf=(r,e)=>{const{obj:t,k:n}=Pu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},jk=(r,e,t)=>{const n=Bf(r,t);return n!==void 0?n:Bf(e,t)},XT=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):XT(r[n],e[n],t):r[n]=e[n]);return r},Pl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Vk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Lk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>Vk[e]):r;class Uk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const zk=[" ",",","?","!",";"],Bk=new Uk(20),Fk=(r,e,t)=>{e=e||"",t=t||"";const n=zk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Bk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},Uy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},Wu=r=>r?.replace("_","-"),Hk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let qk=class zy{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Hk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new zy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new zy(this.logger,e)}};var Ri=new qk;class Cm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class jw extends Cm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Bf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:Uy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),Pw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Bf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?XT(d,n,o):d={...d,...n},Pw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var JT={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const ZT=Symbol("i18next/PATH_KEY");function $k(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===ZT?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function By(r,e){const{[ZT]:t}=r($k());return t.join(e?.keySeparator??".")}const Vw={},gy=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Ff extends Cm{constructor(e,t={}){super(),Ok(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=gy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Fk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=By(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let E=w?.res;const N=w?.usedKey||u,O=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],q=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,U=!this.i18nFormat||this.i18nFormat.handleAsObject,H=s.count!==void 0&&!Ve(s.count),K=Ff.hasDefaultValue(s),z=H?this.pluralResolver.getSuffix(y,s.count,s):"",M=s.ordinal&&H?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",S=H&&!s.ordinal&&s.count===0,T=S&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${M}`]||s.defaultValue;let R=E;U&&!E&&K&&(R=T);const k=gy(R),j=Object.prototype.toString.apply(R);if(U&&R&&k&&V.indexOf(j)<0&&!(Ve(q)&&Array.isArray(R))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,R,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=C,w.usedParams=this.getUsedParamsDetails(s),w):C}if(c){const C=Array.isArray(R),G=C?[]:{},te=C?O:N;for(const P in R)if(Object.prototype.hasOwnProperty.call(R,P)){const D=`${te}${c}${P}`;K&&!E?G[P]=this.translate(D,{...s,defaultValue:gy(T)?T[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(D,{...s,joinArrays:!1,ns:d}),G[P]===D&&(G[P]=R[P])}E=G}}else if(U&&Ve(q)&&Array.isArray(E))E=E.join(q),E&&(E=this.extendTranslation(E,e,s,n));else{let C=!1,G=!1;!this.isValidLookup(E)&&K&&(C=!0,E=T),this.isValidLookup(E)||(G=!0,E=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:E,D=K&&T!==E&&this.options.updateMissing;if(G||C||D){if(this.logger.log(D?"updateKey":"missingKey",y,f,u,D?T:E),c){const F=this.resolve(u,{...s,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Z=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let F=0;F<W.length;F++)Z.push(W[F]);else this.options.saveMissingTo==="all"?Z=this.languageUtils.toResolveHierarchy(s.lng||this.language):Z.push(s.lng||this.language);const ee=(F,Y,J)=>{const ie=K&&J!==E?J:P;this.options.missingKeyHandler?this.options.missingKeyHandler(F,f,Y,ie,D,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,f,Y,ie,D,s),this.emit("missingKey",F,f,Y,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?Z.forEach(F=>{const Y=this.pluralResolver.getSuffixes(F,s);S&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(J=>{ee([F],u+J,s[`defaultValue${J}`]||T)})}):ee(Z,u,T))}E=this.extendTranslation(E,e,s,w,n),G&&E===u&&this.options.appendNamespaceToMissingKey&&(E=`${f}${g}${u}`),(G||C)&&this.options.parseMissingKeyHandler&&(E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,C?E:void 0,s))}return o?(w.res=E,w.usedParams=this.getUsedParamsDetails(s),w):E}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=JT.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,E=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(O=>{this.isValidLookup(n)||(u=O,!Vw[`${N[0]}-${O}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(Vw[`${N[0]}-${O}`]=!0,this.logger.warn(`key "${s}" for languages "${N.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(V=>{if(this.isValidLookup(n))return;c=V;const q=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,g,V,O,t);else{let H;v&&(H=this.pluralResolver.getSuffix(V,t.count,t));const K=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&H.indexOf(z)===0&&q.push(g+H.replace(z,this.options.pluralSeparator)),q.push(g+H),w&&q.push(g+K)),E){const M=`${g}${this.options.contextSeparator||"_"}${t.context}`;q.push(M),v&&(t.ordinal&&H.indexOf(z)===0&&q.push(M+H.replace(z,this.options.pluralSeparator)),q.push(M+H),w&&q.push(M+K))}}let U;for(;U=q.pop();)this.isValidLookup(n)||(o=U,n=this.getResource(V,O,U,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Lw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const Uw={zero:0,one:1,two:2,few:3,many:4,other:5},zw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Gk{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=Wu(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zw;if(!e.match(/-|_/))return zw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Uw[s]-Uw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Bw=(r,e,t,n=".",s=!0)=>{let o=jk(r,e,t);return!o&&s&&Ve(t)&&(o=Uy(r,t,n),o===void 0&&(o=Uy(e,t,n))),o},py=r=>r.replace(/\$/g,"$$$$");class Fw{constructor(e={}){this.logger=Ri.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:E,nestingSuffixEscaped:N,nestingOptionsSeparator:O,maxReplaces:V,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:Lk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Pl(o):c||"{{",this.suffix=u?Pl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Pl(v):w||Pl("$t("),this.nestingSuffix=E?Pl(E):N||Pl(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=V||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Bw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const E=w.split(this.formatSeparator),N=E.shift().trim(),O=E.join(this.formatSeparator).trim();return this.format(Bw(t,d,N,this.options.keySeparator,this.options.ignoreJSONStructure),O,n,{...s,...t,interpolationkey:N})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>py(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?py(this.escape(w)):py(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const E=o[1].trim();if(c=f(E),c===void 0)if(typeof g=="function"){const O=g(e,o,s);c=Ve(O)?O:""}else if(s&&Object.prototype.hasOwnProperty.call(s,E))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${E} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Dw(c));const N=w.safeValue(c);if(e=e.replace(o[0],N),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),E=v.match(/"/g);((w?.length??0)%2===0&&!E||E.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,N),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Dw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const Kk=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Hw=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(Wu(n),s),e[c]=u),u(t)}},Yk=r=>(e,t,n)=>r(Wu(t),n)(e);class Qk{constructor(e={}){this.logger=Ri.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Hw:Yk;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Hw(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=Kk(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const Wk=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class Xk extends Cm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{Pk(d.loaded,[o],c),Wk(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const qw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),$w=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),of=()=>{},Jk=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class ju extends Cm{constructor(e={},t){if(super(),this.options=$w(e),this.services={},this.logger=Ri,this.modules={external:[]},Jk(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=qw();this.options={...n,...this.options,...$w(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=Qk;const g=new Lw(this.options);this.store=new jw(this.options.resources,this.options);const y=this.services;y.logger=Ri,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new Gk(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Fw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new Xk(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Ff(this.services,this.options),this.translator.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=of),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=xu(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=of){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=xu();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=of),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&JT.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=xu();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=By(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=By(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=xu();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=xu();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Lw(qw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new ju(e,t);return n.createInstance=ju.createInstance,n}cloneInstance(e={},t=of){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new ju(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new jw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Fw(s)),o.translator=new Ff(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=ju.createInstance();Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const Zk=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);xo(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Gw={},eS=(r,e,t,n)=>{xo(t)&&Gw[t]||(xo(t)&&(Gw[t]=new Date),Zk(r,e,t,n))},tS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Fy=(r,e,t)=>{r.loadNamespaces(e,tS(r,t))},Kw=(r,e,t,n)=>{if(xo(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Fy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,tS(r,n))},eD=(r,e,t={})=>!e.languages||!e.languages.length?(eS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),xo=r=>typeof r=="string",tD=r=>typeof r=="object"&&r!==null,nD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,rD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},iD=r=>rD[r],sD=r=>r.replace(nD,iD);let Hy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:sD,transDefaultProps:void 0};const aD=(r={})=>{Hy={...Hy,...r}},oD=()=>Hy;let nS;const lD=r=>{nS=r},cD=()=>nS,uD={type:"3rdParty",init(r){aD(r.options.react),lD(r)}},hD=$.createContext();class dD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var yy={exports:{}},_y={};var Yw;function fD(){if(Yw)return _y;Yw=1;var r=Am();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),E=n({inst:{value:w,getSnapshot:v}}),N=E[0].inst,O=E[1];return o(function(){N.value=w,N.getSnapshot=v,d(N)&&O({inst:N})},[y,w,v]),s(function(){return d(N)&&O({inst:N}),y(function(){d(N)&&O({inst:N})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return _y.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,_y}var Qw;function mD(){return Qw||(Qw=1,yy.exports=fD()),yy.exports}var gD=mD();const pD=(r,e)=>xo(e)?e:tD(e)&&xo(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,yD={t:pD,ready:!1},_D=()=>()=>{},zn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(hD)||{},o=t||n||cD();o&&!o.reportNamespaces&&(o.reportNamespaces=new dD),o||eS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...oD(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=xo(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(T=>{if(!o)return _D;const{bindI18n:R,bindI18nStore:k}=c,j=()=>{v.current+=1,T()};return R&&o.on(R,j),k&&o.store.on(k,j),()=>{R&&R.split(" ").forEach(C=>o.off(C,j)),k&&k.split(" ").forEach(C=>o.store.off(C,j))}},[o,c]),E=$.useRef(),N=$.useCallback(()=>{if(!o)return yD;const T=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(te=>eD(te,o,c)),R=e.lng||o.language,k=v.current,j=E.current;if(j&&j.ready===T&&j.lng===R&&j.keyPrefix===d&&j.revision===k)return j;const G={t:o.getFixedT(R,c.nsMode==="fallback"?y:y[0],d),ready:T,lng:R,keyPrefix:d,revision:k};return E.current=G,G},[o,y,d,c,e.lng]),[O,V]=$.useState(0),{t:q,ready:U}=gD.useSyncExternalStore(w,N,N);$.useEffect(()=>{if(o&&!U&&!u){const T=()=>V(R=>R+1);e.lng?Kw(o,e.lng,y,T):Fy(o,y,T)}},[o,e.lng,y,U,u,O]);const H=o||{},K=$.useRef(null),z=$.useRef(),M=T=>{const R=Object.getOwnPropertyDescriptors(T);R.__original&&delete R.__original;const k=Object.create(Object.getPrototypeOf(T),R);if(!Object.prototype.hasOwnProperty.call(k,"__original"))try{Object.defineProperty(k,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return k},S=$.useMemo(()=>{const T=H,R=T?.language;let k=T;T&&(K.current&&K.current.__original===T?z.current!==R?(k=M(T),K.current=k,z.current=R):k=K.current:(k=M(T),K.current=k,z.current=R));const j=[q,k,U];return j.t=q,j.i18n=k,j.ready=U,j},[q,H,U,H.resolvedLanguage,H.language,H.languages]);if(o&&u&&!U)throw new Promise(T=>{const R=()=>T();e.lng?Kw(o,e.lng,y,R):Fy(o,y,R)});return S},vD=()=>{};var Ww={};const rS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},bD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},iS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(rS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):bD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new wD;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const E=f<<6&192|y;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class wD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xD=function(r){const e=rS(r);return iS.encodeByteArray(e,!0)},Hf=function(r){return xD(r).replace(/\./g,"")},sS=function(r){try{return iS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ED=()=>aS().__FIREBASE_DEFAULTS__,TD=()=>{if(typeof process>"u"||typeof Ww>"u")return;const r=Ww.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},SD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&sS(r[1]);return e&&JSON.parse(e)},Nm=()=>{try{return vD()||ED()||TD()||SD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},oS=r=>Nm()?.emulatorHosts?.[r],lS=r=>{const e=oS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},cS=()=>Nm()?.config,uS=r=>Nm()?.[`_${r}`];class AD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M0(r){return(await fetch(r,{credentials:"include"})).ok}function hS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hf(JSON.stringify(t)),Hf(JSON.stringify(c)),""].join(".")}const Vu={};function ID(){const r={prod:[],emulator:[]};for(const e of Object.keys(Vu))Vu[e]?r.emulator.push(e):r.prod.push(e);return r}function RD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Xw=!1;function P0(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||Vu[r]===e||Vu[r]||Xw)return;Vu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=ID().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Xw=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=RD(n),w=t("text"),E=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),O=document.getElementById(N)||document.createElement("a"),V=t("preprendIcon"),q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;u(U),g(O,N);const H=f();d(q,V),U.append(q,E,O,H),document.body.appendChild(U)}o?(E.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function dS(){const r=Nm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ND(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OD(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fS(){return!dS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mS(){return!dS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function MD(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const PD="FirebaseError";class zi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=PD,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vh.prototype.create)}}class vh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?jD(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new zi(s,u,n)}}function jD(r,e){return r.replace(VD,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const VD=/\{\$([^}]+)}/g;function LD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(Jw(o)&&Jw(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Jw(r){return r!==null&&typeof r=="object"}function bh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ru(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Cu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function UD(r,e){const t=new zD(r,e);return t.subscribe.bind(t)}class zD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");BD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=vy),s.error===void 0&&(s.error=vy),s.complete===void 0&&(s.complete=vy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function vy(){}function Jt(r){return r&&r._delegate?r._delegate:r}class va{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class FD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new AD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qD(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:HD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HD(r){return r===io?void 0:r}function qD(r){return r.instantiationMode==="EAGER"}class $D{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const GD={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},KD=Je.INFO,YD={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},QD=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=YD[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class j0{constructor(e){this.name=e,this._logLevel=KD,this._logHandler=QD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const WD=(r,e)=>e.some(t=>r instanceof t);let Zw,ex;function XD(){return Zw||(Zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JD(){return ex||(ex=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pS=new WeakMap,qy=new WeakMap,yS=new WeakMap,by=new WeakMap,V0=new WeakMap;function ZD(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(fa(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&pS.set(t,r)}).catch(()=>{}),V0.set(e,r),e}function e4(r){if(qy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});qy.set(r,e)}let $y={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return qy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||yS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function t4(r){$y=r($y)}function n4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(wy(this),e,...t);return yS.set(n,e.sort?e.sort():[e]),fa(n)}:JD().includes(r)?function(...e){return r.apply(wy(this),e),fa(pS.get(this))}:function(...e){return fa(r.apply(wy(this),e))}}function r4(r){return typeof r=="function"?n4(r):(r instanceof IDBTransaction&&e4(r),WD(r,XD())?new Proxy(r,$y):r)}function fa(r){if(r instanceof IDBRequest)return ZD(r);if(by.has(r))return by.get(r);const e=r4(r);return e!==r&&(by.set(r,e),V0.set(e,r)),e}const wy=r=>V0.get(r);function i4(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=fa(c);return n&&c.addEventListener("upgradeneeded",d=>{n(fa(c.result),d.oldVersion,d.newVersion,fa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const s4=["get","getKey","getAll","getAllKeys","count"],a4=["put","add","delete","clear"],xy=new Map;function tx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xy.get(e))return xy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=a4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||s4.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return xy.set(e,o),o}t4(r=>({...r,get:(e,t,n)=>tx(e,t)||r.get(e,t,n),has:(e,t)=>!!tx(e,t)||r.has(e,t)}));class o4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(l4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function l4(r){return r.getComponent()?.type==="VERSION"}const Gy="@firebase/app",nx="0.14.6";const _s=new j0("@firebase/app"),c4="@firebase/app-compat",u4="@firebase/analytics-compat",h4="@firebase/analytics",d4="@firebase/app-check-compat",f4="@firebase/app-check",m4="@firebase/auth",g4="@firebase/auth-compat",p4="@firebase/database",y4="@firebase/data-connect",_4="@firebase/database-compat",v4="@firebase/functions",b4="@firebase/functions-compat",w4="@firebase/installations",x4="@firebase/installations-compat",E4="@firebase/messaging",T4="@firebase/messaging-compat",S4="@firebase/performance",A4="@firebase/performance-compat",I4="@firebase/remote-config",R4="@firebase/remote-config-compat",C4="@firebase/storage",N4="@firebase/storage-compat",k4="@firebase/firestore",D4="@firebase/ai",O4="@firebase/firestore-compat",M4="firebase",P4="12.6.0";const Ky="[DEFAULT]",j4={[Gy]:"fire-core",[c4]:"fire-core-compat",[h4]:"fire-analytics",[u4]:"fire-analytics-compat",[f4]:"fire-app-check",[d4]:"fire-app-check-compat",[m4]:"fire-auth",[g4]:"fire-auth-compat",[p4]:"fire-rtdb",[y4]:"fire-data-connect",[_4]:"fire-rtdb-compat",[v4]:"fire-fn",[b4]:"fire-fn-compat",[w4]:"fire-iid",[x4]:"fire-iid-compat",[E4]:"fire-fcm",[T4]:"fire-fcm-compat",[S4]:"fire-perf",[A4]:"fire-perf-compat",[I4]:"fire-rc",[R4]:"fire-rc-compat",[C4]:"fire-gcs",[N4]:"fire-gcs-compat",[k4]:"fire-fst",[O4]:"fire-fst-compat",[D4]:"fire-vertex","fire-js":"fire-js",[M4]:"fire-js-all"};const qf=new Map,V4=new Map,Yy=new Map;function rx(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Eo(r){const e=r.name;if(Yy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,r);for(const t of qf.values())rx(t,r);for(const t of V4.values())rx(t,r);return!0}function km(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function gr(r){return r==null?!1:r.settings!==void 0}const L4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ma=new vh("app","Firebase",L4);class U4{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ma.create("app-deleted",{appName:this._name})}}const Bo=P4;function _S(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Ky,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ma.create("bad-app-name",{appName:String(s)});if(t||(t=cS()),!t)throw ma.create("no-options");const o=qf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw ma.create("duplicate-app",{appName:s})}const c=new $D(s);for(const d of Yy.values())c.addComponent(d);const u=new U4(t,n,c);return qf.set(s,u),u}function L0(r=Ky){const e=qf.get(r);if(!e&&r===Ky&&cS())return _S();if(!e)throw ma.create("no-app",{appName:r});return e}function ki(r,e,t){let n=j4[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}Eo(new va(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const z4="firebase-heartbeat-database",B4=1,Xu="firebase-heartbeat-store";let Ey=null;function vS(){return Ey||(Ey=i4(z4,B4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ma.create("idb-open",{originalErrorMessage:r.message})})),Ey}async function F4(r){try{const t=(await vS()).transaction(Xu),n=await t.objectStore(Xu).get(bS(r));return await t.done,n}catch(e){if(e instanceof zi)_s.warn(e.message);else{const t=ma.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function ix(r,e){try{const n=(await vS()).transaction(Xu,"readwrite");await n.objectStore(Xu).put(e,bS(r)),await n.done}catch(t){if(t instanceof zi)_s.warn(t.message);else{const n=ma.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function bS(r){return`${r.name}!${r.options.appId}`}const H4=1024,q4=30;class $4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new K4(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=sx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>q4){const s=Y4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sx(),{heartbeatsToSend:t,unsentEntries:n}=G4(this._heartbeatsCache.heartbeats),s=Hf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function sx(){return new Date().toISOString().substring(0,10)}function G4(r,e=H4){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),ax(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ax(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class K4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?MD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await F4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function ax(r){return Hf(JSON.stringify({version:2,heartbeats:r})).length}function Y4(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function Q4(r){Eo(new va("platform-logger",e=>new o4(e),"PRIVATE")),Eo(new va("heartbeat",e=>new $4(e),"PRIVATE")),ki(Gy,nx,r),ki(Gy,nx,"esm2020"),ki("fire-js","")}Q4("");var W4="firebase",X4="12.6.0";ki(W4,X4,"app");function wS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J4=wS,xS=new vh("auth","Firebase",wS());const $f=new j0("@firebase/auth");function Z4(r,...e){$f.logLevel<=Je.WARN&&$f.warn(`Auth (${Bo}): ${r}`,...e)}function wf(r,...e){$f.logLevel<=Je.ERROR&&$f.error(`Auth (${Bo}): ${r}`,...e)}function ti(r,...e){throw U0(r,...e)}function Di(r,...e){return U0(r,...e)}function ES(r,e,t){const n={...J4(),[e]:t};return new vh("auth","Firebase",n).create(e,{appName:r.name})}function ms(r){return ES(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return xS.create(r,...e)}function je(r,e,...t){if(!r)throw U0(e,...t)}function us(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wf(e),new Error(e)}function vs(r,e){r||us(e)}function Qy(){return typeof self<"u"&&self.location?.href||""}function eO(){return ox()==="http:"||ox()==="https:"}function ox(){return typeof self<"u"&&self.location?.protocol||null}function tO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eO()||kD()||"connection"in navigator)?navigator.onLine:!0}function nO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=CD()||DD()}get(){return tO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function z0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class TS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sO=new wh(3e4,6e4);function xs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Bi(r,e,t,n,s={}){return SS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=bh({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return ND()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(f.credentials="include"),TS.fetch()(await AS(r,r.config.apiHost,t,u),f)})}async function SS(r,e,t){r._canInitEmulator=!1;const n={...rO,...e};try{const s=new oO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw lf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw lf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw lf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ES(r,g,f);ti(r,g)}}catch(s){if(s instanceof zi)throw s;ti(r,"network-request-failed",{message:String(s)})}}async function xh(r,e,t,n,s={}){const o=await Bi(r,e,t,n,s);return"mfaPendingCredential"in o&&ti(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function AS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?z0(r.config,s):`${r.config.apiScheme}://${s}`;return iO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function aO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Di(this.auth,"network-request-failed")),sO.get())})}}function lf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Di(r,e,n);return s.customData._tokenResponse=t,s}function lx(r){return r!==void 0&&r.enterprise!==void 0}class lO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cO(r,e){return Bi(r,"GET","/v2/recaptchaConfig",xs(r,e))}async function uO(r,e){return Bi(r,"POST","/v1/accounts:delete",e)}async function Gf(r,e){return Bi(r,"POST","/v1/accounts:lookup",e)}function Lu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hO(r,e=!1){const t=Jt(r),n=await t.getIdToken(e),s=B0(n);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:Lu(Ty(s.auth_time)),issuedAtTime:Lu(Ty(s.iat)),expirationTime:Lu(Ty(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ty(r){return Number(r)*1e3}function B0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=sS(t);return s?JSON.parse(s):(wf("Failed to decode base64 JWT payload"),null)}catch(s){return wf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function cx(r){const e=B0(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof zi&&dO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function dO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class fO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(r){const e=r.auth,t=await r.getIdToken(),n=await tc(r,Gf(e,{idToken:t}));je(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?IS(s.providerUserInfo):[],c=gO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wy(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function mO(r){const e=Jt(r);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function IS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pO(r,e){const t=await SS(r,{},async()=>{const n=bh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await AS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(d.credentials="include"),TS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yO(r,e){return Bi(r,"POST","/v2/accounts:revokeToken",xs(r,e))}class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=cx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await pO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Wl;return n&&(je(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return us("not implemented")}}function na(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new fO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await tc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hO(this,e)}reload(){return mO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await tc(this,uO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:N}=t;je(y&&N,e,"internal-error");const O=Wl.fromJSON(this.name,N);je(typeof y=="string",e,"internal-error"),na(n,e.name),na(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),na(o,e.name),na(c,e.name),na(u,e.name),na(d,e.name),na(f,e.name),na(g,e.name);const V=new Zr({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:g});return E&&Array.isArray(E)&&(V.providerData=E.map(q=>({...q}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Wl;s.updateFromServerResponse(t);const o=new Zr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Kf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?IS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Wl;u.updateFromIdToken(n);const d=new Zr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const ux=new Map;function hs(r){vs(r instanceof Function,"Expected a class definition");let e=ux.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ux.set(r,e),e)}class RS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RS.type="NONE";const hx=RS;function xf(r,e,t){return`firebase:${r}:${e}:${t}`}class Xl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=xf(this.userKey,s.apiKey,o),this.fullPersistenceKey=xf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gf(this.auth,{idToken:e}).catch(()=>{});return t?Zr._fromGetAccountInfoResponse(this.auth,t,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xl(hs(hx),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||hs(hx);const c=xf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Gf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await Zr._fromGetAccountInfoResponse(e,v,g)}else y=Zr._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Xl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Xl(o,e,n))}}function dx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MS(e))return"Blackberry";if(PS(e))return"Webos";if(NS(e))return"Safari";if((e.includes("chrome/")||kS(e))&&!e.includes("edge/"))return"Chrome";if(OS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function CS(r=fn()){return/firefox\//i.test(r)}function NS(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kS(r=fn()){return/crios\//i.test(r)}function DS(r=fn()){return/iemobile/i.test(r)}function OS(r=fn()){return/android/i.test(r)}function MS(r=fn()){return/blackberry/i.test(r)}function PS(r=fn()){return/webos/i.test(r)}function F0(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _O(r=fn()){return F0(r)&&!!window.navigator?.standalone}function vO(){return OD()&&document.documentMode===10}function jS(r=fn()){return F0(r)||OS(r)||PS(r)||MS(r)||/windows phone/i.test(r)||DS(r)}function VS(r,e=[]){let t;switch(r){case"Browser":t=dx(fn());break;case"Worker":t=`${dx(fn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${n}`}class bO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function wO(r,e={}){return Bi(r,"GET","/v2/passwordPolicy",xs(r,e))}const xO=6;class EO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class TO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fx(this),this.idTokenSubscription=new fx(this),this.beforeStateQueue=new bO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gf(this,{idToken:e}),n=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(ms(this));const t=e?Jt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wO(this),t=new EO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await yO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Z4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fo(r){return Jt(r)}class fx{constructor(e){this.auth=e,this.observer=null,this.addObserver=UD(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SO(r){Dm=r}function LS(r){return Dm.loadJS(r)}function AO(){return Dm.recaptchaEnterpriseScript}function IO(){return Dm.gapiScript}function RO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class CO{constructor(){this.enterprise=new NO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kO="recaptcha-enterprise",US="NO_RECAPTCHA";class DO{constructor(e){this.type=kO,this.auth=Fo(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{cO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new lO(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;lx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(US)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&lx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=AO();d.length!==0&&(d+=u),LS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function mx(r,e,t,n=!1,s=!1){const o=new DO(r);let c;if(s)c=US;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Xy(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await mx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function OO(r,e){const t=km(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ti(s,"already-initialized")}return t.initialize({options:e})}function MO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(hs);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function PO(r,e,t){const n=Fo(r);je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=zS(e),{host:c,port:u}=jO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),je(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,zo(c)?(M0(`${o}//${c}${d}`),P0("Auth",!0)):VO()}function zS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function jO(r){const e=zS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:gx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:gx(c)}}}function gx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class H0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,t){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function LO(r,e){return Bi(r,"POST","/v1/accounts:signUp",e)}async function UO(r,e){return xh(r,"POST","/v1/accounts:signInWithPassword",xs(r,e))}async function zO(r,e){return Bi(r,"POST","/v1/accounts:sendOobCode",xs(r,e))}async function BO(r,e){return zO(r,e)}async function FO(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}async function HO(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}class Ju extends H0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ju(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ju(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,t,"signInWithPassword",UO);case"emailLink":return FO(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,n,"signUpPassword",LO);case"emailLink":return HO(e,{idToken:t,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jl(r,e){return xh(r,"POST","/v1/accounts:signInWithIdp",xs(r,e))}const qO="http://localhost";class To extends H0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new To(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jl(e,t)}buildRequest(){const e={requestUri:qO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bh(t)}return e}}function $O(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GO(r){const e=Ru(Cu(r)).link,t=e?Ru(Cu(e)).deep_link_id:null,n=Ru(Cu(r)).deep_link_id;return(n?Ru(Cu(n)).link:null)||n||t||e||r}class q0{constructor(e){const t=Ru(Cu(e)),n=t.apiKey??null,s=t.oobCode??null,o=$O(t.mode??null);je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GO(e);try{return new q0(t)}catch{return null}}}class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,t){return Ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=q0.parseLink(t);return je(n,"argument-error"),Ju._fromEmailAndCode(e,n.code,n.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class BS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eh extends BS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Eh{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";class cs extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return To._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return cs.credential(t,n)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";class ca extends Eh{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";class ua extends Eh{constructor(){super("twitter.com")}static credential(e,t){return To._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ua.credential(t,n)}catch{return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com";ua.PROVIDER_ID="twitter.com";async function KO(r,e){return xh(r,"POST","/v1/accounts:signUp",xs(r,e))}class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await Zr._fromIdTokenResponse(e,n,s),c=px(n);return new So({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=px(n);return new So({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function px(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Yf extends zi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Yf(e,t,n,s)}}function FS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(r,o,e,n):o})}async function YO(r,e,t=!1){const n=await tc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return So._forOperation(r,"link",n)}async function QO(r,e,t=!1){const{auth:n}=r;if(gr(n.app))return Promise.reject(ms(n));const s="reauthenticate";try{const o=await tc(r,FS(n,s,e,r),t);je(o.idToken,n,"internal-error");const c=B0(o.idToken);je(c,n,"internal-error");const{sub:u}=c;return je(r.uid===u,n,"user-mismatch"),So._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ti(n,"user-mismatch"),o}}async function HS(r,e,t=!1){if(gr(r.app))return Promise.reject(ms(r));const n="signIn",s=await FS(r,n,e),o=await So._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function WO(r,e){return HS(Fo(r),e)}async function qS(r){const e=Fo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XO(r,e,t){if(gr(r.app))return Promise.reject(ms(r));const n=Fo(r),c=await Xy(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&qS(r),d}),u=await So._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function yx(r,e,t){return gr(r.app)?Promise.reject(ms(r)):WO(Jt(r),gc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qS(r),n})}async function $S(r,e){const t=Jt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await BO(t.auth,s);o!==r.email&&await r.reload()}async function JO(r,e){return Bi(r,"POST","/v1/accounts:update",e)}async function ZO(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Jt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await tc(n,JO(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function eM(r,e,t,n){return Jt(r).onIdTokenChanged(e,t,n)}function tM(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function nM(r,e,t,n){return Jt(r).onAuthStateChanged(e,t,n)}const Qf="__sak";class GS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const rM=1e3,iM=10;class KS extends GS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);vO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iM):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},rM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KS.type="LOCAL";const sM=KS;class YS extends GS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}YS.type="SESSION";const QS=YS;function aM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Om(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await aM(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Om.receivers=[];function $0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class oM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=$0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function lM(r){Oi().location.href=r}function WS(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function cM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uM(){return navigator?.serviceWorker?.controller||null}function hM(){return WS()?self:null}const XS="firebaseLocalStorageDb",dM=1,Wf="firebaseLocalStorage",JS="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mm(r,e){return r.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function fM(){const r=indexedDB.deleteDatabase(XS);return new Th(r).toPromise()}function Jy(){const r=indexedDB.open(XS,dM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Wf,{keyPath:JS})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Wf)?e(n):(n.close(),await fM(),e(await Jy()))})})}async function _x(r,e,t){const n=Mm(r,!0).put({[JS]:e,value:t});return new Th(n).toPromise()}async function mM(r,e){const t=Mm(r,!1).get(e),n=await new Th(t).toPromise();return n===void 0?null:n.value}function vx(r,e){const t=Mm(r,!0).delete(e);return new Th(t).toPromise()}const gM=800,pM=3;class ZS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>pM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Om._getInstance(hM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cM(),!this.activeServiceWorker)return;this.sender=new oM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jy();return await _x(e,Qf,"1"),await vx(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_x(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>mM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Mm(s,!1).getAll();return new Th(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZS.type="LOCAL";const yM=ZS;new wh(3e4,6e4);function _M(r,e){return e?hs(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class G0 extends H0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vM(r){return HS(r.auth,new G0(r),r.bypassAuthState)}function bM(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),QO(t,new G0(r),r.bypassAuthState)}async function wM(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),YO(t,new G0(r),r.bypassAuthState)}class e2{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vM;case"linkViaPopup":case"linkViaRedirect":return wM;case"reauthViaPopup":case"reauthViaRedirect":return bM;default:ti(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xM=new wh(2e3,1e4);class Yl extends e2{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=$0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xM.get())};e()}}Yl.currentPopupAction=null;const EM="pendingRedirect",Ef=new Map;class TM extends e2{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const n=await SM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SM(r,e){const t=RM(e),n=IM(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function AM(r,e){Ef.set(r._key(),e)}function IM(r){return hs(r._redirectPersistence)}function RM(r){return xf(EM,r.config.apiKey,r.name)}async function CM(r,e,t=!1){if(gr(r.app))return Promise.reject(ms(r));const n=Fo(r),s=_M(n,e),c=await new TM(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const NM=600*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!t2(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Di(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NM&&this.cachedEventUids.clear(),this.cachedEventUids.has(bx(e))}saveEventToCache(e){this.cachedEventUids.add(bx(e)),this.lastProcessedEventTime=Date.now()}}function bx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function t2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function DM(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t2(r);default:return!1}}async function OM(r,e={}){return Bi(r,"GET","/v1/projects",e)}const MM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PM=/^https?/;async function jM(r){if(r.config.emulator)return;const{authorizedDomains:e}=await OM(r);for(const t of e)try{if(VM(t))return}catch{}ti(r,"unauthorized-domain")}function VM(r){const e=Qy(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!PM.test(t))return!1;if(MM.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const LM=new wh(3e4,6e4);function wx(){const r=Oi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function UM(r){return new Promise((e,t)=>{function n(){wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wx(),t(Di(r,"network-request-failed"))},timeout:LM.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)n();else{const s=RO("iframefcb");return Oi()[s]=()=>{gapi.load?n():t(Di(r,"network-request-failed"))},LS(`${IO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function zM(r){return Tf=Tf||UM(r),Tf}const BM=new wh(5e3,15e3),FM="__/auth/iframe",HM="emulator/auth/iframe",qM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GM(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?z0(e,HM):`https://${r.config.authDomain}/${FM}`,n={apiKey:e.apiKey,appName:r.name,v:Bo},s=$M.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${bh(n).slice(1)}`}async function KM(r){const e=await zM(r),t=Oi().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:GM(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qM,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Di(r,"network-request-failed"),u=Oi().setTimeout(()=>{o(c)},BM.get());function d(){Oi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const YM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QM=500,WM=600,XM="_blank",JM="http://localhost";class xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZM(r,e,t,n=QM,s=WM){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...YM,width:n.toString(),height:s.toString(),top:o,left:c},f=fn().toLowerCase();t&&(u=kS(f)?XM:t),CS(f)&&(e=e||JM,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(_O(f)&&u!=="_self")return e5(e||"",u),new xx(null);const y=window.open(e||"",u,g);je(y,r,"popup-blocked");try{y.focus()}catch{}return new xx(y)}function e5(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const t5="__/auth/handler",n5="emulator/auth/handler",r5=encodeURIComponent("fac");async function Ex(r,e,t,n,s,o){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Bo,eventId:s};if(e instanceof BS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",LD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Eh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${r5}=${encodeURIComponent(d)}`:"";return`${i5(r)}?${bh(u).slice(1)}${f}`}function i5({config:r}){return r.emulator?z0(r,n5):`https://${r.authDomain}/${t5}`}const Sy="webStorageSupport";class s5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QS,this._completeRedirectFn=CM,this._overrideRedirectResult=AM}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Ex(e,t,n,Qy(),s);return ZM(e,o,$0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Ex(e,t,n,Qy(),s);return lM(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await KM(e),n=new kM(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sy,{type:Sy},s=>{const o=s?.[0]?.[Sy];o!==void 0&&t(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jS()||NS()||F0()}}const a5=s5;var Tx="@firebase/auth",Sx="1.11.1";class o5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function l5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c5(r){Eo(new va("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VS(r)},f=new TO(n,s,o,d);return MO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Eo(new va("auth-internal",e=>{const t=Fo(e.getProvider("auth").getImmediate());return(n=>new o5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(Tx,Sx,l5(r)),ki(Tx,Sx,"esm2020")}const u5=300,h5=uS("authIdTokenMaxAge")||u5;let Ax=null;const d5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>h5)return;const s=t?.token;Ax!==s&&(Ax=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function f5(r=L0()){const e=km(r,"auth");if(e.isInitialized())return e.getImmediate();const t=OO(r,{popupRedirectResolver:a5,persistence:[yM,sM,QS]}),n=uS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=d5(o.toString());tM(t,c,()=>c(t.currentUser)),eM(t,u=>c(u))}}const s=oS("auth");return s&&PO(t,`http://${s}`),t}function m5(){return document.getElementsByTagName("head")?.[0]??document}SO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",m5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c5("Browser");var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ga,n2;(function(){var r;function e(M,S){function T(){}T.prototype=S.prototype,M.F=S.prototype,M.prototype=new T,M.prototype.constructor=M,M.D=function(R,k,j){for(var C=Array(arguments.length-2),G=2;G<arguments.length;G++)C[G-2]=arguments[G];return S.prototype[k].apply(R,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,S,T){T||(T=0);const R=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)R[k]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(k=0;k<16;++k)R[k]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=M.g[0],T=M.g[1],k=M.g[2];let j=M.g[3],C;C=S+(j^T&(k^j))+R[0]+3614090360&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(k^S&(T^k))+R[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=k+(T^j&(S^T))+R[2]+606105819&4294967295,k=j+(C<<17&4294967295|C>>>15),C=T+(S^k&(j^S))+R[3]+3250441966&4294967295,T=k+(C<<22&4294967295|C>>>10),C=S+(j^T&(k^j))+R[4]+4118548399&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(k^S&(T^k))+R[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=k+(T^j&(S^T))+R[6]+2821735955&4294967295,k=j+(C<<17&4294967295|C>>>15),C=T+(S^k&(j^S))+R[7]+4249261313&4294967295,T=k+(C<<22&4294967295|C>>>10),C=S+(j^T&(k^j))+R[8]+1770035416&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(k^S&(T^k))+R[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=k+(T^j&(S^T))+R[10]+4294925233&4294967295,k=j+(C<<17&4294967295|C>>>15),C=T+(S^k&(j^S))+R[11]+2304563134&4294967295,T=k+(C<<22&4294967295|C>>>10),C=S+(j^T&(k^j))+R[12]+1804603682&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(k^S&(T^k))+R[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=k+(T^j&(S^T))+R[14]+2792965006&4294967295,k=j+(C<<17&4294967295|C>>>15),C=T+(S^k&(j^S))+R[15]+1236535329&4294967295,T=k+(C<<22&4294967295|C>>>10),C=S+(k^j&(T^k))+R[1]+4129170786&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^k&(S^T))+R[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=k+(S^T&(j^S))+R[11]+643717713&4294967295,k=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(k^j))+R[0]+3921069994&4294967295,T=k+(C<<20&4294967295|C>>>12),C=S+(k^j&(T^k))+R[5]+3593408605&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^k&(S^T))+R[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=k+(S^T&(j^S))+R[15]+3634488961&4294967295,k=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(k^j))+R[4]+3889429448&4294967295,T=k+(C<<20&4294967295|C>>>12),C=S+(k^j&(T^k))+R[9]+568446438&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^k&(S^T))+R[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=k+(S^T&(j^S))+R[3]+4107603335&4294967295,k=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(k^j))+R[8]+1163531501&4294967295,T=k+(C<<20&4294967295|C>>>12),C=S+(k^j&(T^k))+R[13]+2850285829&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^k&(S^T))+R[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=k+(S^T&(j^S))+R[7]+1735328473&4294967295,k=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(k^j))+R[12]+2368359562&4294967295,T=k+(C<<20&4294967295|C>>>12),C=S+(T^k^j)+R[5]+4294588738&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^k)+R[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=k+(j^S^T)+R[11]+1839030562&4294967295,k=j+(C<<16&4294967295|C>>>16),C=T+(k^j^S)+R[14]+4259657740&4294967295,T=k+(C<<23&4294967295|C>>>9),C=S+(T^k^j)+R[1]+2763975236&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^k)+R[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=k+(j^S^T)+R[7]+4139469664&4294967295,k=j+(C<<16&4294967295|C>>>16),C=T+(k^j^S)+R[10]+3200236656&4294967295,T=k+(C<<23&4294967295|C>>>9),C=S+(T^k^j)+R[13]+681279174&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^k)+R[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=k+(j^S^T)+R[3]+3572445317&4294967295,k=j+(C<<16&4294967295|C>>>16),C=T+(k^j^S)+R[6]+76029189&4294967295,T=k+(C<<23&4294967295|C>>>9),C=S+(T^k^j)+R[9]+3654602809&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^k)+R[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=k+(j^S^T)+R[15]+530742520&4294967295,k=j+(C<<16&4294967295|C>>>16),C=T+(k^j^S)+R[2]+3299628645&4294967295,T=k+(C<<23&4294967295|C>>>9),C=S+(k^(T|~j))+R[0]+4096336452&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~k))+R[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=k+(S^(j|~T))+R[14]+2878612391&4294967295,k=j+(C<<15&4294967295|C>>>17),C=T+(j^(k|~S))+R[5]+4237533241&4294967295,T=k+(C<<21&4294967295|C>>>11),C=S+(k^(T|~j))+R[12]+1700485571&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~k))+R[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=k+(S^(j|~T))+R[10]+4293915773&4294967295,k=j+(C<<15&4294967295|C>>>17),C=T+(j^(k|~S))+R[1]+2240044497&4294967295,T=k+(C<<21&4294967295|C>>>11),C=S+(k^(T|~j))+R[8]+1873313359&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~k))+R[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=k+(S^(j|~T))+R[6]+2734768916&4294967295,k=j+(C<<15&4294967295|C>>>17),C=T+(j^(k|~S))+R[13]+1309151649&4294967295,T=k+(C<<21&4294967295|C>>>11),C=S+(k^(T|~j))+R[4]+4149444226&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~k))+R[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=k+(S^(j|~T))+R[2]+718787259&4294967295,k=j+(C<<15&4294967295|C>>>17),C=T+(j^(k|~S))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+j&4294967295}n.prototype.v=function(M,S){S===void 0&&(S=M.length);const T=S-this.blockSize,R=this.C;let k=this.h,j=0;for(;j<S;){if(k==0)for(;j<=T;)s(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<S;)if(R[k++]=M.charCodeAt(j++),k==this.blockSize){s(this,R),k=0;break}}else for(;j<S;)if(R[k++]=M[j++],k==this.blockSize){s(this,R),k=0;break}}this.h=k,this.o+=S},n.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var T=M.length-8;T<M.length;++T)M[T]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,T=0;T<4;++T)for(let R=0;R<32;R+=8)M[S++]=this.g[T]>>>R&255;return M};function o(M,S){var T=u;return Object.prototype.hasOwnProperty.call(T,M)?T[M]:T[M]=S(M)}function c(M,S){this.h=S;const T=[];let R=!0;for(let k=M.length-1;k>=0;k--){const j=M[k]|0;R&&j==S||(T[k]=j,R=!1)}this.g=T}var u={};function d(M){return-128<=M&&M<128?o(M,function(S){return new c([S|0],S<0?-1:0)}):new c([M|0],M<0?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(M<0)return O(f(-M));const S=[];let T=1;for(let R=0;M>=T;R++)S[R]=M/T|0,T*=4294967296;return new c(S,0)}function g(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return O(g(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(S,8));let R=y;for(let j=0;j<M.length;j+=8){var k=Math.min(8,M.length-j);const C=parseInt(M.substring(j,j+k),S);k<8?(k=f(Math.pow(S,k)),R=R.j(k).add(f(C))):(R=R.j(T),R=R.add(f(C)))}return R}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(N(this))return-O(this).m();let M=0,S=1;for(let T=0;T<this.g.length;T++){const R=this.i(T);M+=(R>=0?R:4294967296+R)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(E(this))return"0";if(N(this))return"-"+O(this).toString(M);const S=f(Math.pow(M,6));var T=this;let R="";for(;;){const k=H(T,S).g;T=V(T,k.j(S));let j=((T.g.length>0?T.g[0]:T.h)>>>0).toString(M);if(T=k,E(T))return j+R;for(;j.length<6;)j="0"+j;R=j+R}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function E(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function N(M){return M.h==-1}r.l=function(M){return M=V(this,M),N(M)?-1:E(M)?0:1};function O(M){const S=M.g.length,T=[];for(let R=0;R<S;R++)T[R]=~M.g[R];return new c(T,~M.h).add(v)}r.abs=function(){return N(this)?O(this):this},r.add=function(M){const S=Math.max(this.g.length,M.g.length),T=[];let R=0;for(let k=0;k<=S;k++){let j=R+(this.i(k)&65535)+(M.i(k)&65535),C=(j>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);R=C>>>16,j&=65535,C&=65535,T[k]=C<<16|j}return new c(T,T[T.length-1]&-2147483648?-1:0)};function V(M,S){return M.add(O(S))}r.j=function(M){if(E(this)||E(M))return y;if(N(this))return N(M)?O(this).j(O(M)):O(O(this).j(M));if(N(M))return O(this.j(O(M)));if(this.l(w)<0&&M.l(w)<0)return f(this.m()*M.m());const S=this.g.length+M.g.length,T=[];for(var R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<M.g.length;k++){const j=this.i(R)>>>16,C=this.i(R)&65535,G=M.i(k)>>>16,te=M.i(k)&65535;T[2*R+2*k]+=C*te,q(T,2*R+2*k),T[2*R+2*k+1]+=j*te,q(T,2*R+2*k+1),T[2*R+2*k+1]+=C*G,q(T,2*R+2*k+1),T[2*R+2*k+2]+=j*G,q(T,2*R+2*k+2)}for(M=0;M<S;M++)T[M]=T[2*M+1]<<16|T[2*M];for(M=S;M<2*S;M++)T[M]=0;return new c(T,0)};function q(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function U(M,S){this.g=M,this.h=S}function H(M,S){if(E(S))throw Error("division by zero");if(E(M))return new U(y,y);if(N(M))return S=H(O(M),S),new U(O(S.g),O(S.h));if(N(S))return S=H(M,O(S)),new U(O(S.g),S.h);if(M.g.length>30){if(N(M)||N(S))throw Error("slowDivide_ only works with positive integers.");for(var T=v,R=S;R.l(M)<=0;)T=K(T),R=K(R);var k=z(T,1),j=z(R,1);for(R=z(R,2),T=z(T,2);!E(R);){var C=j.add(R);C.l(M)<=0&&(k=k.add(T),j=C),R=z(R,1),T=z(T,1)}return S=V(M,k.j(S)),new U(k,S)}for(k=y;M.l(S)>=0;){for(T=Math.max(1,Math.floor(M.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),j=f(T),C=j.j(S);N(C)||C.l(M)>0;)T-=R,j=f(T),C=j.j(S);E(j)&&(j=v),k=k.add(j),M=V(M,C)}return new U(k,M)}r.B=function(M){return H(this,M).h},r.and=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)&M.i(R);return new c(T,this.h&M.h)},r.or=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)|M.i(R);return new c(T,this.h|M.h)},r.xor=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)^M.i(R);return new c(T,this.h^M.h)};function K(M){const S=M.g.length+1,T=[];for(let R=0;R<S;R++)T[R]=M.i(R)<<1|M.i(R-1)>>>31;return new c(T,M.h)}function z(M,S){const T=S>>5;S%=32;const R=M.g.length-T,k=[];for(let j=0;j<R;j++)k[j]=S>0?M.i(j+T)>>>S|M.i(j+T+1)<<32-S:M.i(j+T);return new c(k,M.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,n2=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ga=c}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var r2,Nu,i2,Sf,Zy,s2,a2,o2;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var x=0;x<m.length;++x){var I=m[x];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=t(this);function s(m,x){if(x)e:{var I=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var ae=m[B];if(!(ae in I))break e;I=I[ae]}m=m[m.length-1],B=I[m],x=x(B),x!=B&&x!=null&&e(I,m,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(x){var I=[],B;for(B in x)Object.prototype.hasOwnProperty.call(x,B)&&I.push([B,x[B]]);return I}});var o=o||{},c=this||self;function u(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function d(m,x,I){return m.call.apply(m.bind,arguments)}function f(m,x,I){return f=d,f.apply(null,arguments)}function g(m,x){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function y(m,x){function I(){}I.prototype=x.prototype,m.Z=x.prototype,m.prototype=new I,m.prototype.constructor=m,m.Ob=function(B,ae,ue){for(var ve=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ve[Fe-2]=arguments[Fe];return x.prototype[ae].apply(B,ve)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const x=m.length;if(x>0){const I=Array(x);for(let B=0;B<x;B++)I[B]=m[B];return I}return[]}function E(m,x){for(let B=1;B<arguments.length;B++){const ae=arguments[B];var I=typeof ae;if(I=I!="object"?I:ae?Array.isArray(ae)?"array":I:"null",I=="array"||I=="object"&&typeof ae.length=="number"){I=m.length||0;const ue=ae.length||0;m.length=I+ue;for(let ve=0;ve<ue;ve++)m[I+ve]=ae[ve]}else m.push(ae)}}class N{constructor(x,I){this.i=x,this.j=I,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function O(m){c.setTimeout(()=>{throw m},0)}function V(){var m=M;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class q{constructor(){this.h=this.g=null}add(x,I){const B=U.get();B.set(x,I),this.h?this.h.next=B:this.g=B,this.h=B}}var U=new N(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,I){this.h=x,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,M=new q,S=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(T)}};function T(){for(var m;m=V();){try{m.h.call(m.g)}catch(I){O(I)}var x=U;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}z=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};c.addEventListener("test",I,x),c.removeEventListener("test",I,x)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function G(m,x){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}y(G,k),G.prototype.init=function(m,x){const I=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(I=="mouseover"?x=m.fromElement:I=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),P=0;function D(m,x,I,B,ae){this.listener=m,this.proxy=null,this.src=x,this.type=I,this.capture=!!B,this.ha=ae,this.key=++P,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,x,I){for(const B in m)x.call(I,m[B],B,m)}function ee(m,x){for(const I in m)x.call(void 0,m[I],I,m)}function F(m){const x={};for(const I in m)x[I]=m[I];return x}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(m,x){let I,B;for(let ae=1;ae<arguments.length;ae++){B=arguments[ae];for(I in B)m[I]=B[I];for(let ue=0;ue<Y.length;ue++)I=Y[ue],Object.prototype.hasOwnProperty.call(B,I)&&(m[I]=B[I])}}function ie(m){this.src=m,this.g={},this.h=0}ie.prototype.add=function(m,x,I,B,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const ve=_e(m,x,B,ae);return ve>-1?(x=m[ve],I||(x.fa=!1)):(x=new D(x,this.src,ue,!!B,ae),x.fa=I,m.push(x)),x};function re(m,x){const I=x.type;if(I in m.g){var B=m.g[I],ae=Array.prototype.indexOf.call(B,x,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(B,ae,1),ue&&(Z(x),m.g[I].length==0&&(delete m.g[I],m.h--))}}function _e(m,x,I,B){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==x&&ue.capture==!!I&&ue.ha==B)return ae}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),De={};function Re(m,x,I,B,ae){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Re(m,x[ue],I,B,ae);return null}return I=at(I),m&&m[te]?m.J(x,I,u(B)?!!B.capture:!1,ae):Ke(m,x,I,!1,B,ae)}function Ke(m,x,I,B,ae,ue){if(!x)throw Error("Invalid event type");const ve=u(ae)?!!ae.capture:!!ae;let Fe=Ct(m);if(Fe||(m[Se]=Fe=new ie(m)),I=Fe.add(x,I,B,ve,ue),I.proxy)return I;if(B=et(),I.proxy=B,B.src=m,B.listener=I,m.addEventListener)j||(ae=ve),ae===void 0&&(ae=!1),m.addEventListener(x.toString(),B,ae);else if(m.attachEvent)m.attachEvent(pt(x.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function et(){function m(I){return x.call(m.src,m.listener,I)}const x=mt;return m}function tt(m,x,I,B,ae){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)tt(m,x[ue],I,B,ae);else B=u(B)?!!B.capture:!!B,I=at(I),m&&m[te]?(m=m.i,ue=String(x).toString(),ue in m.g&&(x=m.g[ue],I=_e(x,I,B,ae),I>-1&&(Z(x[I]),Array.prototype.splice.call(x,I,1),x.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(x=m.g[x.toString()],m=-1,x&&(m=_e(x,I,B,ae)),(I=m>-1?x[m]:null)&&Mt(I))}function Mt(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[te])re(x.i,m);else{var I=m.type,B=m.proxy;x.removeEventListener?x.removeEventListener(I,B,m.capture):x.detachEvent?x.detachEvent(pt(I),B):x.addListener&&x.removeListener&&x.removeListener(B),(I=Ct(x))?(re(I,m),I.h==0&&(I.src=null,x[Se]=null)):Z(m)}}}function pt(m){return m in De?De[m]:De[m]="on"+m}function mt(m,x){if(m.da)m=!0;else{x=new G(x,this);const I=m.listener,B=m.ha||m.src;m.fa&&Mt(m),m=I.call(B,x)}return m}function Ct(m){return m=m[Se],m instanceof ie?m:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function at(m){return typeof m=="function"?m:(m[st]||(m[st]=function(x){return m.handleEvent(x)}),m[st])}function qe(){R.call(this),this.i=new ie(this),this.M=this,this.G=null}y(qe,R),qe.prototype[te]=!0,qe.prototype.removeEventListener=function(m,x,I,B){tt(this,m,x,I,B)};function pe(m,x){var I,B=m.G;if(B)for(I=[];B;B=B.G)I.push(B);if(m=m.M,B=x.type||x,typeof x=="string")x=new k(x,m);else if(x instanceof k)x.target=x.target||m;else{var ae=x;x=new k(B,m),J(x,ae)}ae=!0;let ue,ve;if(I)for(ve=I.length-1;ve>=0;ve--)ue=x.g=I[ve],ae=Ee(ue,B,!0,x)&&ae;if(ue=x.g=m,ae=Ee(ue,B,!0,x)&&ae,ae=Ee(ue,B,!1,x)&&ae,I)for(ve=0;ve<I.length;ve++)ue=x.g=I[ve],ae=Ee(ue,B,!1,x)&&ae}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const I=m.g[x];for(let B=0;B<I.length;B++)Z(I[B]);delete m.g[x],m.h--}}this.G=null},qe.prototype.J=function(m,x,I,B){return this.i.add(String(m),x,!1,I,B)},qe.prototype.K=function(m,x,I,B){return this.i.add(String(m),x,!0,I,B)};function Ee(m,x,I,B){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ue=0;ue<x.length;++ue){const ve=x[ue];if(ve&&!ve.da&&ve.capture==I){const Fe=ve.listener,Yt=ve.ha||ve.src;ve.fa&&re(m.i,ve),ae=Fe.call(Yt,B)!==!1&&ae}}return ae&&!B.defaultPrevented}function Be(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(m,x||0)}function Oe(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Oe(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class xe extends R{constructor(x,I){super(),this.m=x,this.l=I,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(m){R.call(this),this.h=m,this.g={}}y(nt,R);var gt=[];function Bn(m){W(m.g,function(x,I){this.g.hasOwnProperty(I)&&Mt(x)},m),m.g={}}nt.prototype.N=function(){nt.Z.N.call(this),Bn(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ct=c.JSON.stringify,Fn=c.JSON.parse,Bt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tt(){k.call(this,"d")}y(Tt,k);function Zt(){k.call(this,"c")}y(Zt,k);var kt={},Ko=null;function ai(){return Ko=Ko||new qe}kt.Ia="serverreachability";function Ca(m){k.call(this,kt.Ia,m)}y(Ca,k);function Dn(m){const x=ai();pe(x,new Ca(x))}kt.STAT_EVENT="statevent";function Hi(m,x){k.call(this,kt.STAT_EVENT,m),this.stat=x}y(Hi,k);function yt(m){const x=ai();pe(x,new Hi(x,m))}kt.Ja="timingevent";function hn(m,x){k.call(this,kt.Ja,m),this.size=x}y(hn,k);function xn(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},x)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Yo(m,x,I,B,ae,ue){m.info(function(){if(m.g)if(ue){var ve="",Fe=ue.split("&");for(let ut=0;ut<Fe.length;ut++){var Yt=Fe[ut].split("=");if(Yt.length>1){const Pt=Yt[0];Yt=Yt[1];const Er=Pt.split("_");ve=Er.length>=2&&Er[1]=="type"?ve+(Pt+"="+Yt+"&"):ve+(Pt+"=redacted&")}}}else ve=null;else ve=ue;return"XMLHTTP REQ ("+B+") [attempt "+ae+"]: "+x+`
`+I+`
`+ve})}function vr(m,x,I,B,ae,ue,ve){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ae+"]: "+x+`
`+I+`
`+ue+" "+ve})}function gn(m,x,I,B){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+dg(m,I)+(B?" "+B:"")})}function Na(m,x){m.info(function(){return"TIMEOUT: "+x})}En.prototype.info=function(){};function dg(m,x){if(!m.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var I=ue[m];if(!(I.length<2)){var B=I[1];if(Array.isArray(B)&&!(B.length<1)){var ae=B[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let ve=1;ve<B.length;ve++)B[ve]=""}}}}return ct(ue)}catch{return x}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wc;function Da(){}y(Da,kn),Da.prototype.g=function(){return new XMLHttpRequest},wc=new Da;function qi(m){return encodeURIComponent(String(m))}function Vh(m){var x=1;m=m.split(":");const I=[];for(;x>0&&m.length;)I.push(m.shift()),x--;return m.length&&I.push(m.join(":")),I}function Ur(m,x,I,B){this.j=m,this.i=x,this.l=I,this.S=B||1,this.V=new nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var en={},pn={};function oi(m,x,I){m.M=1,m.A=Oa(nn(x)),m.u=I,m.R=!0,Qo(m,null)}function Qo(m,x){m.F=Date.now(),li(m),m.B=nn(m.A);var I=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),Zo(I.i,"t",B),m.C=0,I=m.j.L,m.h=new zr,m.g=Jh(m.j,I?x:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),x=m.V,I=m.g,B=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(gt[0]=ae.toString()),ae=gt);for(let ue=0;ue<ae.length;ue++){const ve=Re(I,ae[ue],B||x.handleEvent,!1,x.h||x);if(!ve)break;x.g[ve.key]=ve}x=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),Dn(),Yo(m.i,m.v,m.B,m.l,m.S,m.u)}Ur.prototype.ba=function(m){m=m.target;const x=this.O;x&&Hr(m)==3?x.j():this.Y(m)},Ur.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=Hr(this.g),Yt=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||ut<=0?Dn(3):Dn(2)),ci(this);var x=this.g.ca();this.X=x;var I=fg(this);if(this.o=x==200,vr(this.i,this.v,this.B,this.l,this.S,Fe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var B,ae=this.g;if((B=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(B)){var ue=B;break t}}ue=null}if(m=ue)gn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,m);else{this.o=!1,this.m=3,yt(12),sr(this),br(this);break e}}if(this.R){m=!0;let Pt;for(;!this.K&&this.C<I.length;)if(Pt=Uh(this,I),Pt==pn){Fe==4&&(this.m=4,yt(14),m=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,yt(15),gn(this.i,this.l,I,"[Invalid Chunk]"),m=!1;break}else gn(this.i,this.l,Pt,null),ui(this,Pt);if(Lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||I.length!=0||this.h.h||(this.m=1,yt(16),m=!1),this.o=this.o&&m,!m)gn(this.i,this.l,I,"[Invalid Chunked Response]"),sr(this),br(this);else if(I.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),jc(ve),ve.P=!0,yt(11))}}else gn(this.i,this.l,I,null),ui(this,I);Fe==4&&sr(this),this.o&&!this.K&&(Fe==4?Yh(this.j,this):(this.o=!1,li(this)))}else Gi(this.g),x==400&&I.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),sr(this),br(this)}}}catch{}finally{}};function fg(m){if(!Lh(m))return m.g.la();const x=Tn(m.g);if(x==="")return"";let I="";const B=x.length,ae=Hr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return sr(m),br(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<B;ue++)m.h.h=!0,I+=m.h.i.decode(x[ue],{stream:!(ae&&ue==B-1)});return x.length=0,m.h.g+=I,m.C=0,m.h.g}function Lh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Uh(m,x){var I=m.C,B=x.indexOf(`
`,I);return B==-1?pn:(I=Number(x.substring(I,B)),isNaN(I)?en:(B+=1,B+I>x.length?pn:(x=x.slice(B,B+I),m.C=B+I,x)))}Ur.prototype.cancel=function(){this.K=!0,sr(this)};function li(m){m.T=Date.now()+m.H,Wo(m,m.H)}function Wo(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),x)}function ci(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Ur.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Dn(),yt(17)),sr(this),this.m=2,br(this)):Wo(this,this.T-m)};function br(m){m.j.I==0||m.K||Yh(m.j,m)}function sr(m){ci(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,Bn(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function ui(m,x){try{var I=m.j;if(I.I!=0&&(I.g==m||di(I.h,m))){if(!m.L&&di(I.h,m)&&I.I==3){try{var B=I.Ba.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ae=B;if(ae[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<m.F)il(I),Ds(I);else break e;za(I),yt(18)}}else I.xa=ae[1],0<I.xa-I.K&&ae[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=xn(f(I.Va,I),6e3));hi(I.h)<=1&&I.ta&&(I.ta=void 0)}else _i(I,11)}else if((m.L||I.g==m)&&il(I),!C(x))for(ae=I.Ba.g.parse(x),x=0;x<ae.length;x++){let ut=ae[x];const Pt=ut[0];if(!(Pt<=I.K))if(I.K=Pt,ut=ut[1],I.I==2)if(ut[0]=="c"){I.M=ut[1],I.ba=ut[2];const Er=ut[3];Er!=null&&(I.ka=Er,I.j.info("VER="+I.ka));const vi=ut[4];vi!=null&&(I.za=vi,I.j.info("SVER="+I.za));const qr=ut[5];qr!=null&&typeof qr=="number"&&qr>0&&(B=1.5*qr,I.O=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const $r=m.g;if($r){const Ba=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var ue=B.h;ue.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Tc(ue,ue.h),ue.h=null))}if(B.G){const sl=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(B.wa=sl,_t(B.J,B.G,sl))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-m.F,I.j.info("Handshake RTT: "+I.T+"ms")),B=I;var ve=m;if(B.na=Xh(B,B.L?B.ba:null,B.W),ve.L){Sc(B.h,ve);var Fe=ve,Yt=B.O;Yt&&(Fe.H=Yt),Fe.D&&(ci(Fe),li(Fe)),B.g=ve}else Gh(B);I.i.length>0&&yi(I)}else ut[0]!="stop"&&ut[0]!="close"||_i(I,7);else I.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?_i(I,7):Mc(I):ut[0]!="noop"&&I.l&&I.l.qa(ut),I.A=0)}}Dn(4)}catch{}}var tn=class{constructor(m,x){this.g=m,this.map=x}};function xc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ec(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hi(m){return m.h?1:m.g?m.g.size:0}function di(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function Tc(m,x){m.g?m.g.add(x):m.h=x}function Sc(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}xc.prototype.cancel=function(){if(this.i=Ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ac(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const I of m.g.values())x=x.concat(I.G);return x}return w(m.i)}var zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xo(m,x){if(m){m=m.split("&");for(let I=0;I<m.length;I++){const B=m[I].indexOf("=");let ae,ue=null;B>=0?(ae=m[I].substring(0,B),ue=m[I].substring(B+1)):ae=m[I],x(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function ar(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof ar?(this.l=m.l,yn(this,m.j),this.o=m.o,this.g=m.g,Ss(this,m.u),this.h=m.h,Ic(this,qh(m.i)),this.m=m.m):m&&(x=String(m).match(zh))?(this.l=!1,yn(this,x[1]||"",!0),this.o=fi(x[2]||""),this.g=fi(x[3]||"",!0),Ss(this,x[4]),this.h=fi(x[5]||"",!0),Ic(this,x[6]||"",!0),this.m=fi(x[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}ar.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(Ma(x,Jo,!0),":");var I=this.g;return(I||x=="file")&&(m.push("//"),(x=this.o)&&m.push(Ma(x,Jo,!0),"@"),m.push(qi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&m.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(Ma(I,I.charAt(0)=="/"?Rc:Bh,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",Ma(I,Fh)),m.join("")},ar.prototype.resolve=function(m){const x=nn(this);let I=!!m.j;I?yn(x,m.j):I=!!m.o,I?x.o=m.o:I=!!m.g,I?x.g=m.g:I=m.u!=null;var B=m.h;if(I)Ss(x,m.u);else if(I=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(B=x.h.slice(0,ae+1)+B)}if(ae=B,ae==".."||ae==".")B="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){B=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let ve=0;ve<ae.length;){const Fe=ae[ve++];Fe=="."?B&&ve==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),B&&ve==ae.length&&ue.push("")):(ue.push(Fe),B=!0)}B=ue.join("/")}else B=ae}return I?x.h=B:I=m.i.toString()!=="",I?Ic(x,qh(m.i)):I=!!m.m,I&&(x.m=m.m),x};function nn(m){return new ar(m)}function yn(m,x,I){m.j=I?fi(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function Ss(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function Ic(m,x,I){x instanceof Is?(m.i=x,el(m.i,m.l)):(I||(x=Ma(x,As)),m.i=new Is(x,m.l))}function _t(m,x,I){m.i.set(x,I)}function Oa(m){return _t(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fi(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ma(m,x,I){return typeof m=="string"?(m=encodeURI(m).replace(x,Wn),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Jo=/[#\/\?@]/g,Bh=/[#\?:]/g,Rc=/[#\?]/g,As=/[#\?@]/g,Fh=/#/g;function Is(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Xo(m.i,function(x,I){m.add(decodeURIComponent(x.replace(/\+/g," ")),I)}))}r=Is.prototype,r.add=function(m,x){Xn(this),this.i=null,m=Rs(this,m);let I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(x),this.h+=1,this};function Hh(m,x){Xn(m),x=Rs(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function Cc(m,x){return Xn(m),x=Rs(m,x),m.g.has(x)}r.forEach=function(m,x){Xn(this),this.g.forEach(function(I,B){I.forEach(function(ae){m.call(x,ae,B,this)},this)},this)};function Nc(m,x){Xn(m);let I=[];if(typeof x=="string")Cc(m,x)&&(I=I.concat(m.g.get(Rs(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)I=I.concat(m[x]);return I}r.set=function(m,x){return Xn(this),this.i=null,m=Rs(this,m),Cc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},r.get=function(m,x){return m?(m=Nc(this,m),m.length>0?String(m[0]):x):x};function Zo(m,x,I){Hh(m,x),I.length>0&&(m.i=null,m.g.set(Rs(m,x),w(I)),m.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let B=0;B<x.length;B++){var I=x[B];const ae=qi(I);I=Nc(this,I);for(let ue=0;ue<I.length;ue++){let ve=ae;I[ue]!==""&&(ve+="="+qi(I[ue])),m.push(ve)}}return this.i=m.join("&")};function qh(m){const x=new Is;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function Rs(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function el(m,x){x&&!m.j&&(Xn(m),m.i=null,m.g.forEach(function(I,B){const ae=B.toLowerCase();B!=ae&&(Hh(this,B),Zo(this,ae,I))},m)),m.j=x}function Br(m,x){const I=new En;if(c.Image){const B=new Image;B.onload=g(wr,I,"TestLoadImage: loaded",!0,x,B),B.onerror=g(wr,I,"TestLoadImage: error",!1,x,B),B.onabort=g(wr,I,"TestLoadImage: abort",!1,x,B),B.ontimeout=g(wr,I,"TestLoadImage: timeout",!1,x,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else x(!1)}function kc(m,x){const I=new En,B=new AbortController,ae=setTimeout(()=>{B.abort(),wr(I,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:B.signal}).then(ue=>{clearTimeout(ae),ue.ok?wr(I,"TestPingServer: ok",!0,x):wr(I,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),wr(I,"TestPingServer: error",!1,x)})}function wr(m,x,I,B,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),B(I)}catch{}}function Cs(){this.g=new Bt}function mi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(mi,kn),mi.prototype.g=function(){return new Pa(this.i,this.h)};function Pa(m,x){qe.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Pa,qe),r=Pa.prototype,r.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,Fr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function tl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Ns(this):Fr(this),this.readyState==3&&tl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Ns(this))},r.Na=function(m){this.g&&(this.response=m,Ns(this))},r.ga=function(){this.g&&Ns(this)};function Ns(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Fr(m)}r.setRequestHeader=function(m,x){this.A.append(m,x)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var I=x.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=x.next();return m.join(`\r
`)};function Fr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function xr(m){let x="";return W(m,function(I,B){x+=B,x+=":",x+=I,x+=`\r
`}),x}function ja(m,x,I){e:{for(B in I){var B=!1;break e}B=!0}B||(I=xr(I),typeof m=="string"?I!=null&&qi(I):_t(m,x,I))}function St(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(St,qe);var gi=/^https?$/i,Dc=["POST","PUT"];r=St.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,x,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(ue){Va(this,ue);return}if(m=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ae in B)I.set(ae,B[ae]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())I.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Dc,x,void 0)>=0)||B||ae||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,ve]of I)this.g.setRequestHeader(ue,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Va(this,ue)}};function Va(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,Oc(m),$i(m)}function Oc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),$i(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),St.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},r.Xa=function(){La(this)};function La(m){if(m.h&&typeof o<"u"){if(m.v&&Hr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),Hr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var I;if(!(I=x)){var B;if(B=ue===0){let ve=String(m.D).match(zh)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),B=!gi.test(ve?ve.toLowerCase():"")}I=B}if(I)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=Hr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Oc(m)}}finally{$i(m)}}}}function $i(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const I=m.g;m.g=null,x||pe(m,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hr(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),Fn(x)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(m){const x={};m=(m.g&&Hr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(C(m[B]))continue;var I=Vh(m[B]);const ae=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ue=x[ae]||[];x[ae]=ue,ue.push(I)}ee(x,function(B){return B.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(m,x,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||x}function ks(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,m),this.Za=pi("retryDelaySeedMs",1e4,m),this.Ta=pi("forwardChannelMaxRetries",2,m),this.va=pi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new xc(m&&m.concurrentRequestLimit),this.Ba=new Cs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ks.prototype,r.ka=8,r.I=1,r.connect=function(m,x,I,B){yt(0),this.W=m,this.H=x||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.J=Xh(this,null,this.W),yi(this)};function Mc(m){if(nl(m),m.I==3){var x=m.V++,I=nn(m.J);if(_t(I,"SID",m.M),_t(I,"RID",x),_t(I,"TYPE","terminate"),Ua(m,I),x=new Ur(m,m.j,x),x.M=2,x.A=Oa(nn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=x.A,I=!0),I||(x.g=Jh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),li(x)}Wh(m)}function Ds(m){m.g&&(jc(m),m.g.cancel(),m.g=null)}function nl(m){Ds(m),m.v&&(c.clearTimeout(m.v),m.v=null),il(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function yi(m){if(!Ec(m.h)&&!m.m){m.m=!0;var x=m.Ea;K||S(),z||(K(),z=!0),M.add(x,m),m.D=0}}function rl(m,x){return hi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,x),Qh(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Ur(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=F(ue),J(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var x=0,I=0;I<this.i.length;I++){t:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,x>4096){x=I;break e}if(x===4096||I===this.i.length-1){x=I+1;break e}}x=1e3}else x=1e3;x=$h(this,ae,x),I=nn(this.J),_t(I,"RID",m),_t(I,"CVER",22),this.G&&_t(I,"X-HTTP-Session-Id",this.G),Ua(this,I),ue&&(this.R?x="headers="+qi(xr(ue))+"&"+x:this.u&&ja(I,this.u,ue)),Tc(this.h,ae),this.Ra&&_t(I,"TYPE","init"),this.S?(_t(I,"$req",x),_t(I,"SID","null"),ae.U=!0,oi(ae,I,null)):oi(ae,I,x),this.I=2}}else this.I==3&&(m?Pc(this,m):this.i.length==0||Ec(this.h)||Pc(this))};function Pc(m,x){var I;x?I=x.l:I=m.V++;const B=nn(m.J);_t(B,"SID",m.M),_t(B,"RID",I),_t(B,"AID",m.K),Ua(m,B),m.u&&m.o&&ja(B,m.u,m.o),I=new Ur(m,m.j,I,m.D+1),m.u===null&&(I.J=m.o),x&&(m.i=x.G.concat(m.i)),x=$h(m,I,1e3),I.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Tc(m.h,I),oi(I,B,x)}function Ua(m,x){m.H&&W(m.H,function(I,B){_t(x,B,I)}),m.l&&W({},function(I,B){_t(x,B,I)})}function $h(m,x,I){I=Math.min(m.i.length,I);const B=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Yt=["count="+I];Fe==-1?I>0?(Fe=ae[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let ut=!0;for(let Pt=0;Pt<I;Pt++){var ue=ae[Pt].g;const Er=ae[Pt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Pt].g-100),ut=!1;else try{ue="req"+ue+"_"||"";try{var ve=Er instanceof Map?Er:Object.entries(Er);for(const[vi,qr]of ve){let $r=qr;u(qr)&&($r=ct(qr)),Yt.push(ue+vi+"="+encodeURIComponent($r))}}catch(vi){throw Yt.push(ue+"type="+encodeURIComponent("_badmap")),vi}}catch{B&&B(Er)}}if(ut){ve=Yt.join("&");break e}}ve=void 0}return m=m.i.splice(0,I),x.G=m,ve}function Gh(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;K||S(),z||(K(),z=!0),M.add(x,m),m.A=0}}function za(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),Qh(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,Kh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Ds(this),Kh(this))};function jc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Kh(m){m.g=new Ur(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=nn(m.na);_t(x,"RID","rpc"),_t(x,"SID",m.M),_t(x,"AID",m.K),_t(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&_t(x,"TO",m.ia),_t(x,"TYPE","xmlhttp"),Ua(m,x),m.u&&m.o&&ja(x,m.u,m.o),m.O&&(m.g.H=m.O);var I=m.g;m=m.ba,I.M=1,I.A=Oa(nn(x)),I.u=null,I.R=!0,Qo(I,m)}r.Va=function(){this.C!=null&&(this.C=null,Ds(this),za(this),yt(19))};function il(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Yh(m,x){var I=null;if(m.g==x){il(m),jc(m),m.g=null;var B=2}else if(di(m.h,x))I=x.G,Sc(m.h,x),B=1;else return;if(m.I!=0){if(x.o)if(B==1){I=x.u?x.u.length:0,x=Date.now()-x.F;var ae=m.D;B=ai(),pe(B,new hn(B,I)),yi(m)}else Gh(m);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(B==1&&rl(m,x)||B==2&&za(m)))switch(I&&I.length>0&&(x=m.h,x.i=x.i.concat(I)),ae){case 1:_i(m,5);break;case 4:_i(m,10);break;case 3:_i(m,6);break;default:_i(m,2)}}}function Qh(m,x){let I=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(I*=2),I*x}function _i(m,x){if(m.j.info("Error code "+x),x==2){var I=f(m.bb,m),B=m.Ua;const ae=!B;B=new ar(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yn(B,"https"),Oa(B),ae?Br(B.toString(),I):kc(B.toString(),I)}else yt(2);m.I=0,m.l&&m.l.pa(x),Wh(m),nl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Wh(m){if(m.I=0,m.ja=[],m.l){const x=Ac(m.h);(x.length!=0||m.i.length!=0)&&(E(m.ja,x),E(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Xh(m,x,I){var B=I instanceof ar?nn(I):new ar(I);if(B.g!="")x&&(B.g=x+"."+B.g),Ss(B,B.u);else{var ae=c.location;B=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new ar(null);B&&yn(ue,B),x&&(ue.g=x),ae&&Ss(ue,ae),I&&(ue.h=I),B=ue}return I=m.G,x=m.wa,I&&x&&_t(B,I,x),_t(B,"VER",m.ka),Ua(m,B),B}function Jh(m,x,I){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new St(new mi({ab:I})):new St(m.ma),x.Fa(m.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}r=Zh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Os(){}Os.prototype.g=function(m,x){return new Hn(m,x)};function Hn(m,x){qe.call(this),this.g=new ks(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!C(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new Ki(this)}y(Hn,qe),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Mc(this.g)},Hn.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.v&&(I={},I.__data__=ct(m),m=I);x.i.push(new tn(x.Ya++,m)),x.I==3&&yi(x)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Mc(this.g),delete this.g,Hn.Z.N.call(this)};function ed(m){Tt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const I in x){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}y(ed,Tt);function td(){Zt.call(this),this.status=1}y(td,Zt);function Ki(m){this.g=m}y(Ki,Zh),Ki.prototype.ra=function(){pe(this.g,"a")},Ki.prototype.qa=function(m){pe(this.g,new ed(m))},Ki.prototype.pa=function(m){pe(this.g,new td)},Ki.prototype.oa=function(){pe(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,o2=function(){return new Os},a2=function(){return ai()},s2=kt,Zy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Sf=ka,bc.COMPLETE="complete",i2=bc,wn.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Nu=wn,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,r2=St}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Rx="@firebase/firestore",Cx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let pc="12.3.0";const Ao=new j0("@firebase/firestore");function Hl(){return Ao.logLevel}function ye(r,...e){if(Ao.logLevel<=Je.DEBUG){const t=e.map(K0);Ao.debug(`Firestore (${pc}): ${r}`,...t)}}function Gn(r,...e){if(Ao.logLevel<=Je.ERROR){const t=e.map(K0);Ao.error(`Firestore (${pc}): ${r}`,...t)}}function Io(r,...e){if(Ao.logLevel<=Je.WARN){const t=e.map(K0);Ao.warn(`Firestore (${pc}): ${r}`,...t)}}function K0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,l2(r,n,t)}function l2(r,e,t){let n=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Gn(n),new Error(n)}function Ce(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||l2(e,s,n)}function Ue(r,e){return r}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class c2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class p5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y5{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new c2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class _5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class v5{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const n=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Nx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function w5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Y0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=w5(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function e0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Ay(s)===Ay(o)?Le(s,o):Ay(s)?1:-1}return Le(r.length,e.length)}const x5=55296,E5=57343;function Ay(r){const e=r.charCodeAt(0);return e>=x5&&e<=E5}function nc(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function u2(r){return r+"\0"}const kx="__name__";class Ti{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const n=Ti.isNumericId(e),s=Ti.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):e0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ga.fromString(e.substring(4,e.length-2))}}class ft extends Ti{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new be(fe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const T5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Ti{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return T5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kx}static keyField(){return new Ut([kx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new be(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new be(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new be(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ft.fromString(e))}static fromName(e){return new we(ft.fromString(e).popFirst(5))}static empty(){return new we(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ft(e.slice()))}}function h2(r,e,t){if(!t)throw new be(fe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function S5(r,e,t,n){if(e===!0&&n===!0)throw new be(fe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Dx(r){if(!we.isDocumentKey(r))throw new be(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ox(r){if(we.isDocumentKey(r))throw new be(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function d2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Pm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pm(r);throw new be(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Sh(r,e){if(!d2(r))throw new be(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new be(fe.INVALID_ARGUMENT,t);return!0}const Mx=-62135596800,Px=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Px);return new wt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mx)throw new be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sh(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:cn("string",wt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new wt(0,0))}static max(){return new ke(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zu=-1;class Xf{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function t0(r){return r.fields.find((e=>e.kind===2))}function so(r){return r.fields.filter((e=>e.kind!==2))}Xf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class eh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eh(0,yr.min())}}function A5(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(n===1e9?new wt(t+1,0):new wt(t,n));return new yr(s,we.empty(),e)}function f2(r){return new yr(r.readTime,r.key,Zu)}class yr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new yr(ke.min(),we.empty(),Zu)}static max(){return new yr(ke.max(),we.empty(),Zu)}}function Q0(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const m2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ho(r){if(r.code!==fe.FAILED_PRECONDITION||r.message!==m2)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,n)=>{t(e)}))}static reject(e){return new se(((t,n)=>{n(e)}))}static waitFor(e){return new se(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next((s=>s?se.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new se(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new se(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const mr="SimpleDb";class jm{static open(e,t,n,s){try{return new jm(t,e.transaction(s,n))}catch(o){throw new Uu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Uu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=W0(n.target.error);this.S.reject(new Uu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(mr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new R5(t)}}class pa{static delete(e){return ye(mr,"Removing database:",e),oo(aS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gS())return!1;if(pa.F())return!0;const e=fn(),t=pa.M(e),n=0<t&&t<10,s=p2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,pa.M(fn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ye(mr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new Uu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new be(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new be(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new Uu(e,c))},s.onupgradeneeded=o=>{ye(mr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{ye(mr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=jm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),se.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(ye(mr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function p2(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class I5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return oo(this.U.delete())}}class Uu extends be{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(r){return r.name==="IndexedDbTransactionError"}class R5{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ye(mr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ye(mr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oo(n)}add(e){return ye(mr,"ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ye(mr,"GET",this.store.name,e,t),t)))}delete(e){return ye(mr,"DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return ye(mr,"COUNT",this.store.name),oo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new se(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new se(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){ye(mr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new se(((n,s)=>{t.onerror=o=>{const c=W0(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new se(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new I5(u),f=t(u.primaryKey,u.value,d);if(f instanceof se){const g=f.catch((y=>(d.done(),se.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>se.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oo(r){return new se(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=W0(n.target.error);t(s)}}))}let jx=!1;function W0(r){const e=pa.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jx||(jx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const zu="IndexBackfiller";class C5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ye(zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ye(zu,`Documents written: ${t}`)}catch(t){Aa(t)?ye(zu,"Ignoring IndexedDB error during index backfill: ",t):await Ho(t)}await this.re(6e4)}))}}class N5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return se.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return ye(zu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(ye(zu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=f2(o);Q0(c,n)>0&&(n=c)})),new yr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Mr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mr.ce=-1;const go=-1;function Vm(r){return r==null}function th(r){return r===0&&1/r==-1/0}function k5(r){return typeof r=="number"&&Number.isInteger(r)&&!th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Jf="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Vx(e)),e=D5(r.get(t),e);return Vx(e)}function D5(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case Jf:t+="";break;default:t+=o}}return t}function Vx(r){return r+Jf+""}function Ci(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===Jf&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(Jf,o);switch((c<0||c>t)&&Ae(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Ae(61167,{path:r})}o=c+2}return new ft(n)}const ao="remoteDocuments",Ah="owner",jl="owner",nh="mutationQueues",O5="userId",Xr="mutations",Lx="batchId",fo="userMutationsIndex",Ux=["userId","batchId"];function If(r,e){return[r,Un(e)]}function y2(r,e,t){return[r,Un(e),t]}const M5={},rc="documentMutations",Zf="remoteDocumentsV14",P5=["prefixPath","collectionGroup","readTime","documentId"],Rf="documentKeyIndex",j5=["prefixPath","collectionGroup","documentId"],_2="collectionGroupIndex",V5=["collectionGroup","readTime","prefixPath","documentId"],rh="remoteDocumentGlobal",n0="remoteDocumentGlobalKey",ic="targets",v2="queryTargetsIndex",L5=["canonicalId","targetId"],sc="targetDocuments",U5=["targetId","path"],X0="documentTargetsIndex",z5=["path","targetId"],em="targetGlobalKey",po="targetGlobal",ih="collectionParents",B5=["collectionId","parent"],ac="clientMetadata",F5="clientId",Lm="bundles",H5="bundleId",Um="namedQueries",q5="name",J0="indexConfiguration",$5="indexId",r0="collectionGroupIndex",G5="collectionGroup",Bu="indexState",K5=["indexId","uid"],b2="sequenceNumberIndex",Y5=["uid","sequenceNumber"],Fu="indexEntries",Q5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],w2="documentKeyIndex",W5=["indexId","uid","orderedDocumentKey"],zm="documentOverlays",X5=["userId","collectionPath","documentId"],i0="collectionPathOverlayIndex",J5=["userId","collectionPath","largestBatchId"],x2="collectionGroupOverlayIndex",Z5=["userId","collectionGroup","largestBatchId"],Z0="globals",e3="name",E2=[nh,Xr,rc,ao,ic,Ah,po,sc,ac,rh,ih,Lm,Um],t3=[...E2,zm],T2=[nh,Xr,rc,Zf,ic,Ah,po,sc,ac,rh,ih,Lm,Um,zm],S2=T2,e_=[...S2,J0,Bu,Fu],n3=e_,A2=[...e_,Z0],r3=A2;class s0 extends g2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mn(r,e){const t=Ue(r);return pa.O(t.le,e)}function zx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ia(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function I2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Et{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bx(this.data.getIterator())}getIteratorFrom(e){return new Bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class Bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(r){return r.hasNext()?r.getNext():void 0}class ir{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ir([])}unionWith(e){let t=new Et(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class R2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new R2("Invalid base64 string: "+o):o}})(e);return new un(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const i3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=i3.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vt(r.seconds),nanos:Vt(r.nanos)}}function Vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}const C2="server_timestamp",N2="__type__",k2="__previous_value__",D2="__local_write_time__";function t_(r){return(r?.mapValue?.fields||{})[N2]?.stringValue===C2}function Bm(r){const e=r.mapValue.fields[k2];return t_(e)?Bm(e):e}function sh(r){const e=bs(r.mapValue.fields[D2].timestampValue);return new wt(e.seconds,e.nanos)}class s3{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const tm="(default)";class Ro{constructor(e,t){this.projectId=e,this.database=t||tm}static empty(){return new Ro("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}const n_="__type__",O2="__max__",da={mapValue:{fields:{__type__:{stringValue:O2}}}},r_="__vector__",oc="value",Cf={nullValue:"NULL_VALUE"};function ba(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?t_(r)?4:M2(r)?9007199254740991:Fm(r)?10:11:Ae(28295,{value:r})}function Vi(r,e){if(r===e)return!0;const t=ba(r);if(t!==ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sh(r).isEqual(sh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return Vt(s.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Vt(s.integerValue)===Vt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Vt(s.doubleValue),u=Vt(o.doubleValue);return c===u?th(c)===th(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return nc(r.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(zx(c)!==zx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Vi(c[d],u[d])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function ah(r,e){return(r.values||[]).find((t=>Vi(t,e)))!==void 0}function wa(r,e){if(r===e)return 0;const t=ba(r),n=ba(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Vt(o.integerValue||o.doubleValue),d=Vt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Fx(r.timestampValue,e.timestampValue);case 4:return Fx(sh(r),sh(e));case 5:return e0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Le(Vt(o.latitude),Vt(c.latitude));return u!==0?u:Le(Vt(o.longitude),Vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Hx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[oc]?.arrayValue,g=d[oc]?.arrayValue,y=Le(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Hx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===da.mapValue&&c===da.mapValue)return 0;if(o===da.mapValue)return 1;if(c===da.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=e0(d[y],g[y]);if(v!==0)return v;const w=wa(u[d[y]],f[g[y]]);if(w!==0)return w}return Le(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Fx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=bs(r),n=bs(e),s=Le(t.seconds,n.seconds);return s!==0?s:Le(t.nanos,n.nanos)}function Hx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=wa(t[s],n[s]);if(o)return o}return Le(t.length,n.length)}function lc(r){return a0(r)}function a0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=a0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${a0(t.fields[c])}`;return s+"}"})(r.mapValue):Ae(61005,{value:r})}function Nf(r){switch(ba(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bm(r);return e?16+Nf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Nf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Ia(n.fields,((o,c)=>{s+=o.length+Nf(c)})),s})(r.mapValue);default:throw Ae(13486,{value:r})}}function oh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function o0(r){return!!r&&"integerValue"in r}function lh(r){return!!r&&"arrayValue"in r}function qx(r){return!!r&&"nullValue"in r}function $x(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function kf(r){return!!r&&"mapValue"in r}function Fm(r){return(r?.mapValue?.fields||{})[n_]?.stringValue===r_}function Hu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ia(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Hu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(r.arrayValue.values[t]);return e}return{...r}}function M2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===O2}const P2={mapValue:{fields:{[n_]:{stringValue:r_},[oc]:{arrayValue:{}}}}};function a3(r){return"nullValue"in r?Cf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?oh(Ro.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Fm(r)?P2:{mapValue:{}}:Ae(35942,{value:r})}function o3(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?oh(Ro.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?P2:"mapValue"in r?Fm(r)?{mapValue:{}}:da:Ae(61959,{value:r})}function Gx(r,e){const t=wa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Kx(r,e){const t=wa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=Ut.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Hu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Ia(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new jn(Hu(this.value))}}function j2(r){const e=[];return Ia(r.fields,((t,n)=>{const s=new Ut([t]);if(kf(n)){const o=j2(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ir(e)}class qt{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,ke.min(),ke.min(),ke.min(),jn.empty(),0)}static newFoundDocument(e,t,n,s){return new qt(e,1,t,ke.min(),n,s,0)}static newNoDocument(e,t){return new qt(e,2,t,ke.min(),ke.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,ke.min(),ke.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cc{constructor(e,t){this.position=e,this.inclusive=t}}function Yx(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=wa(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Qx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vi(r.position[t],e.position[t]))return!1;return!0}class nm{constructor(e,t="asc"){this.field=e,this.dir=t}}function l3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class V2{}class Ze extends V2{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new c3(e,t,n):t==="array-contains"?new d3(e,n):t==="in"?new H2(e,n):t==="not-in"?new f3(e,n):t==="array-contains-any"?new m3(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new u3(e,n):new h3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&ba(this.value)===ba(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends V2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xt(e,t)}matches(e){return uc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uc(r){return r.op==="and"}function l0(r){return r.op==="or"}function i_(r){return L2(r)&&uc(r)}function L2(r){for(const e of r.filters)if(e instanceof xt)return!1;return!0}function c0(r){if(r instanceof Ze)return r.field.canonicalString()+r.op.toString()+lc(r.value);if(i_(r))return r.filters.map((e=>c0(e))).join(",");{const e=r.filters.map((t=>c0(t))).join(",");return`${r.op}(${e})`}}function U2(r,e){return r instanceof Ze?(function(n,s){return s instanceof Ze&&n.op===s.op&&n.field.isEqual(s.field)&&Vi(n.value,s.value)})(r,e):r instanceof xt?(function(n,s){return s instanceof xt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&U2(c,s.filters[u])),!0):!1})(r,e):void Ae(19439)}function z2(r,e){const t=r.filters.concat(e);return xt.create(t,r.op)}function B2(r){return r instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`})(r):r instanceof xt?(function(t){return t.op.toString()+" {"+t.getFilters().map(B2).join(" ,")+"}"})(r):"Filter"}class c3 extends Ze{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class u3 extends Ze{constructor(e,t){super(e,"in",t),this.keys=F2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class h3 extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=F2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function F2(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class d3 extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lh(t)&&ah(t.arrayValue,this.value)}}class H2 extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ah(this.value.arrayValue,t)}}class f3 extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ah(this.value.arrayValue,t)}}class m3 extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>ah(this.value.arrayValue,n)))}}class g3{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function u0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new g3(r,e,t,n,s,o,c)}function Co(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>c0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>lc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>lc(n))).join(",")),e.Te=t}return e.Te}function Ih(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!l3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!U2(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qx(r.startAt,e.startAt)&&Qx(r.endAt,e.endAt)}function rm(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function im(r,e){return r.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function Wx(r,e,t){let n=Cf,s=!0;for(const o of im(r,e)){let c=Cf,u=!0;switch(o.op){case"<":case"<=":c=a3(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Cf}Gx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Gx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function Xx(r,e,t){let n=da,s=!0;for(const o of im(r,e)){let c=da,u=!0;switch(o.op){case">=":case">":c=o3(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=da}Kx({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Kx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class Rh{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function p3(r,e,t,n,s,o,c,u){return new Rh(r,e,t,n,s,o,c,u)}function Ch(r){return new Rh(r)}function Jx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function q2(r){return r.collectionGroup!==null}function qu(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Et(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new nm(o,n))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new nm(Ut.keyField(),n))}return e.Ie}function Pr(r){const e=Ue(r);return e.Ee||(e.Ee=y3(e,qu(r))),e.Ee}function y3(r,e){if(r.limitType==="F")return u0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new nm(s.field,o)}));const t=r.endAt?new cc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new cc(r.startAt.position,r.startAt.inclusive):null;return u0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function h0(r,e){const t=r.filters.concat([e]);return new Rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function d0(r,e,t){return new Rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Hm(r,e){return Ih(Pr(r),Pr(e))&&r.limitType===e.limitType}function $2(r){return`${Co(Pr(r))}|lt:${r.limitType}`}function ql(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>B2(s))).join(", ")}]`),Vm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>lc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>lc(s))).join(",")),`Target(${n})`})(Pr(r))}; limitType=${r.limitType})`}function Nh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of qu(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=Yx(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,qu(n),s)||n.endAt&&!(function(c,u,d){const f=Yx(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,qu(n),s))})(r,e)}function _3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function G2(r){return(e,t)=>{let n=!1;for(const s of qu(r)){const o=v3(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function v3(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?wa(d,f):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ae(19790,{direction:r.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return I2(this.inner)}size(){return this.innerSize}}const b3=new Lt(we.comparator);function pr(){return b3}const K2=new Lt(we.comparator);function ku(...r){let e=K2;for(const t of r)e=e.insert(t.key,t);return e}function Y2(r){let e=K2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ni(){return $u()}function Q2(){return $u()}function $u(){return new Es((r=>r.toString()),((r,e)=>r.isEqual(e)))}const w3=new Lt(we.comparator),x3=new Et(we.comparator);function Ge(...r){let e=x3;for(const t of r)e=e.add(t);return e}const E3=new Et(Le);function T3(){return E3}function s_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function W2(r){return{integerValue:""+r}}function S3(r,e){return k5(e)?W2(e):s_(r,e)}class qm{constructor(){this._=void 0}}function A3(r,e,t){return r instanceof hc?(function(s,o){const c={fields:{[N2]:{stringValue:C2},[D2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&t_(o)&&(o=Bm(o)),o&&(c.fields[k2]=o),{mapValue:c}})(t,e):r instanceof No?J2(r,e):r instanceof ko?Z2(r,e):(function(s,o){const c=X2(s,o),u=Zx(c)+Zx(s.Ae);return o0(c)&&o0(s.Ae)?W2(u):s_(s.serializer,u)})(r,e)}function I3(r,e,t){return r instanceof No?J2(r,e):r instanceof ko?Z2(r,e):t}function X2(r,e){return r instanceof ch?(function(n){return o0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class hc extends qm{}class No extends qm{constructor(e){super(),this.elements=e}}function J2(r,e){const t=eA(e);for(const n of r.elements)t.some((s=>Vi(s,n)))||t.push(n);return{arrayValue:{values:t}}}class ko extends qm{constructor(e){super(),this.elements=e}}function Z2(r,e){let t=eA(e);for(const n of r.elements)t=t.filter((s=>!Vi(s,n)));return{arrayValue:{values:t}}}class ch extends qm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zx(r){return Vt(r.integerValue||r.doubleValue)}function eA(r){return lh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class $m{constructor(e,t){this.field=e,this.transform=t}}function R3(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof No&&s instanceof No||n instanceof ko&&s instanceof ko?nc(n.elements,s.elements,Vi):n instanceof ch&&s instanceof ch?Vi(n.Ae,s.Ae):n instanceof hc&&s instanceof hc})(r.transform,e.transform)}class C3{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gm{}function tA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Km(r.key,Ln.none()):new yc(r.key,r.data,Ln.none());{const t=r.data,n=jn.empty();let s=new Et(Ut.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new Ts(r.key,n,new ir(s.toArray()),Ln.none())}}function N3(r,e,t){r instanceof yc?(function(s,o,c){const u=s.value.clone(),d=tE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Ts?(function(s,o,c){if(!Df(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=tE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(nA(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Gu(r,e,t,n){return r instanceof yc?(function(o,c,u,d){if(!Df(o.precondition,c))return u;const f=o.value.clone(),g=nE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof Ts?(function(o,c,u,d){if(!Df(o.precondition,c))return u;const f=nE(o.fieldTransforms,d,c),g=c.data;return g.setAll(nA(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return Df(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function k3(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=X2(n.transform,s||null);o!=null&&(t===null&&(t=jn.empty()),t.set(n.field,o))}return t||null}function eE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&nc(n,s,((o,c)=>R3(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yc extends Gm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Gm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function tE(r,e,t){const n=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,I3(c,u,t[s]))}return n}function nE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,A3(o,c,e))}return n}class Km extends Gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rA extends Gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class a_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&N3(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Q2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=tA(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(ke.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,((t,n)=>eE(t,n)))&&nc(this.baseMutations,e.baseMutations,((t,n)=>eE(t,n)))}}class o_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ce(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return w3})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new o_(e,t,n,s)}}class l_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class D3{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,it;function O3(r){switch(r){case fe.OK:return Ae(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function iA(r){if(r===void 0)return Gn("GRPC error has no .code"),fe.UNKNOWN;switch(r){case ln.OK:return fe.OK;case ln.CANCELLED:return fe.CANCELLED;case ln.UNKNOWN:return fe.UNKNOWN;case ln.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case ln.INTERNAL:return fe.INTERNAL;case ln.UNAVAILABLE:return fe.UNAVAILABLE;case ln.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case ln.NOT_FOUND:return fe.NOT_FOUND;case ln.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case ln.ABORTED:return fe.ABORTED;case ln.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case ln.DATA_LOSS:return fe.DATA_LOSS;default:return Ae(39323,{code:r})}}(it=ln||(ln={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";function M3(){return new TextEncoder}const P3=new ga([4294967295,4294967295],0);function rE(r){const e=M3().encode(r),t=new n2;return t.update(e),new Uint8Array(t.digest())}function iE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ga([t,n],0),new ga([s,o],0)]}class c_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Du(`Invalid padding: ${t}`);if(n<0)throw new Du(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Du(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ga.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(ga.fromNumber(n)));return s.compare(P3)===1&&(s=new ga([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=rE(e),[n,s]=iE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new c_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=rE(e),[n,s]=iE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ym{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ym(ke.min(),s,new Lt(Le),pr(),Ge())}}class kh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new kh(n,t,Ge(),Ge(),Ge())}}class Of{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class sA{constructor(e,t){this.targetId=e,this.Ce=t}}class aA{constructor(e,t,n=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class sE{constructor(){this.ve=0,this.Fe=aE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),n=Ge();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Ae(38017,{changeType:o})}})),new kh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=aE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class j3{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=hf(),this.He=hf(),this.Ye=new Lt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(rm(o))if(n===0){const c=new we(o.path);this.et(t,c,qt.newNoDocument(c,ke.min()))}else Ce(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof R2)return Io("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new c_(c,s,o)}catch(d){return Io(d instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&rm(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,qt.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ge();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Ym(e,t,this.Ye,this.je,n);return this.je=pr(),this.Je=hf(),this.He=hf(),this.Ye=new Lt(Le),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Et(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Et(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new Lt(we.comparator)}function aE(){return new Lt(we.comparator)}const V3={asc:"ASCENDING",desc:"DESCENDING"},L3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U3={and:"AND",or:"OR"};class z3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function f0(r,e){return r.useProto3Json||Vm(e)?e:{value:e}}function dc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function B3(r,e){return dc(r,e.toTimestamp())}function Yn(r){return Ce(!!r,49232),ke.fromTimestamp((function(t){const n=bs(t);return new wt(n.seconds,n.nanos)})(r))}function u_(r,e){return m0(r,e).canonicalString()}function m0(r,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function lA(r){const e=ft.fromString(r);return Ce(yA(e),10190,{key:e.toString()}),e}function sm(r,e){return u_(r.databaseId,e.path)}function yo(r,e){const t=lA(e);if(t.get(1)!==r.databaseId.projectId)throw new be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(hA(t))}function cA(r,e){return u_(r.databaseId,e)}function uA(r){const e=lA(r);return e.length===4?ft.emptyPath():hA(e)}function g0(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hA(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function oE(r,e,t){return{name:sm(r,e),fields:t.value.mapValue.fields}}function F3(r,e,t){const n=yo(r,e.name),s=Yn(e.updateTime),o=e.createTime?Yn(e.createTime):ke.min(),c=new jn({mapValue:{fields:e.fields}}),u=qt.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function H3(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ce(g===void 0||typeof g=="string",58123),un.fromBase64String(g||"")):(Ce(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),un.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?fe.UNKNOWN:iA(f.code);return new be(g,f.message||"")})(c);t=new aA(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=yo(r,n.document.name),o=Yn(n.document.updateTime),c=n.document.createTime?Yn(n.document.createTime):ke.min(),u=new jn({mapValue:{fields:n.document.fields}}),d=qt.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Of(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=yo(r,n.document),o=n.readTime?Yn(n.readTime):ke.min(),c=qt.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Of([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=yo(r,n.document),o=n.removedTargetIds||[];t=new Of([],o,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new D3(s,o),u=n.targetId;t=new sA(u,c)}}return t}function am(r,e){let t;if(e instanceof yc)t={update:oE(r,e.key,e.value)};else if(e instanceof Km)t={delete:sm(r,e.key)};else if(e instanceof Ts)t={update:oE(r,e.key,e.data),updateMask:Q3(e.fieldMask)};else{if(!(e instanceof rA))return Ae(16599,{Vt:e.type});t={verify:sm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof hc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof No)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ko)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ch)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ae(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:B3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(r,e.precondition)),t}function p0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ln.updateTime(Yn(o.updateTime)):o.exists!==void 0?Ln.exists(o.exists):Ln.none()})(e.currentDocument):Ln.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Ce(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new hc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new No(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new ko(g)}else"increment"in u?d=new ch(c,u.increment):Ae(16584,{proto:u});const f=Ut.fromServerFormat(u.fieldPath);return new $m(f,d)})(r,s))):[];if(e.update){e.update.name;const s=yo(r,e.update.name),o=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new ir(f.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new Ts(s,o,c,t,n)}return new yc(s,o,t,n)}if(e.delete){const s=yo(r,e.delete);return new Km(s,t)}if(e.verify){const s=yo(r,e.verify);return new rA(s,t)}return Ae(1463,{proto:e})}function q3(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Yn(s.updateTime):Yn(o);return c.isEqual(ke.min())&&(c=Yn(o)),new C3(c,s.transformResults||[])})(t,e)))):[]}function dA(r,e){return{documents:[cA(r,e.path)]}}function fA(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=cA(r,s);const o=(function(f){if(f.length!==0)return pA(xt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:$l(v.field),direction:G3(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=f0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function mA(r){let e=uA(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ce(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=gA(y);return v instanceof xt&&i_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(E){return new nm(Gl(E.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Vm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new cc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new cc(w,v)})(t.endAt)),p3(e,s,c,o,u,"F",d,f)}function $3(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Gl(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Gl(t.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gl(t.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gl(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ze.create(Gl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return xt.create(t.compositeFilter.filters.map((n=>gA(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function G3(r){return V3[r]}function K3(r){return L3[r]}function Y3(r){return U3[r]}function $l(r){return{fieldPath:r.canonicalString()}}function Gl(r){return Ut.fromServerFormat(r.fieldPath)}function pA(r){return r instanceof Ze?(function(t){if(t.op==="=="){if($x(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NAN"}};if(qx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($x(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NAN"}};if(qx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(t.field),op:K3(t.op),value:t.value}}})(r):r instanceof xt?(function(t){const n=t.getFilters().map((s=>pA(s)));return n.length===1?n[0]:{compositeFilter:{op:Y3(t.op),filters:n}}})(r):Ae(54877,{filter:r})}function Q3(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class ds{constructor(e,t,n,s,o=ke.min(),c=ke.min(),u=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _A{constructor(e){this.yt=e}}function W3(r,e){let t;if(e.document)t=F3(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=Oo(e.noDocument.readTime);t=qt.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const n=we.fromSegments(e.unknownDocument.path),s=Oo(e.unknownDocument.version);t=qt.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new wt(s[0],s[1]);return ke.fromTimestamp(o)})(e.readTime)),t}function lE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:sm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:dc(o,c.version.toTimestamp()),createTime:dc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return n}function om(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(r){const e=new wt(r.seconds,r.nanoseconds);return ke.fromTimestamp(e)}function lo(r,e){const t=(e.baseMutations||[]).map((o=>p0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>p0(r.yt,o))),s=wt.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,s,t,n)}function Ou(r){const e=Oo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Oo(r.lastLimboFreeSnapshotVersion):ke.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Ce(c===1,1966,{count:c}),Pr(Ch(uA(o.documents[0])))})(r.query):(function(o){return Pr(mA(o))})(r.query),new ds(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,un.fromBase64String(r.resumeToken))}function vA(r,e){const t=Do(e.snapshotVersion),n=Do(e.lastLimboFreeSnapshotVersion);let s;s=rm(e.target)?dA(r.yt,e.target):fA(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Co(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function bA(r){const e=mA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?d0(e,e.limit,"L"):e}function Iy(r,e){return new l_(e.largestBatchId,p0(r.yt,e.overlayMutation))}function cE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function uE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Do(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class X3{getBundleMetadata(e,t){return hE(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Oo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return hE(e).put((function(s){return{bundleId:s.id,createTime:Do(Yn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return dE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:bA(o.bundledQuery),readTime:Oo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return dE(e).put((function(s){return{name:s.name,readTime:Do(Yn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function hE(r){return mn(r,Lm)}function dE(r){return mn(r,Um)}class Qm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Qm(e,n)}getOverlay(e,t){return Eu(e).get(cE(this.userId,t)).next((n=>n?Iy(this.serializer,n):null))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new l_(t,c);s.push(this.St(e,u))})),se.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Eu(e).Z(i0,u))})),se.waitFor(o)}getOverlaysForCollection(e,t,n){const s=Ni(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Eu(e).J(i0,c).next((u=>{for(const d of u){const f=Iy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=Ni();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Eu(e).ee({index:x2,range:u},((d,f,g)=>{const y=Iy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Eu(e).put((function(s,o,c){const[u,d,f]=cE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:am(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Eu(r){return mn(r,zm)}class J3{bt(e){return mn(e,Z0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?un.fromUint8Array(n):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const n=Vt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),th(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?M2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Fm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=oc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Vt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}co.Kt=new co;const Ll=255;function Z3(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function fE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=Z3(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class eP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=fE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=fE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ll),this.sn(255)}_n(){this.an(Ll),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ll?(this.sn(Ll),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ll?(this.an(Ll),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class tP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class nP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Tu{constructor(){this.cn=new eP,this.ln=new tP(this.cn),this.hn=new nP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class uo{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new uo(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Mf(this.En),directionalValue:Mf(this.dn),orderedDocumentKey:Mf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ra(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=mE(r.En,e.En),t!==0?t:(t=mE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function mE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Mf(r){return mS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function gE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class pE{constructor(e){this.mn=new Et(((t,n)=>Ut.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=t0(e);if(t!==void 0&&!this.wn(t))return!1;const n=so(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Et(Ut.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Af(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Af(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Af(n.field,n.dir==="asc"?0:1)));return new Xf(Xf.UNKNOWN_ID,this.collectionId,t,eh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function wA(r){if(Ce(r instanceof Ze||r instanceof xt,20012),r instanceof Ze){if(r instanceof H2){const t=r.value.arrayValue?.values?.map((n=>Ze.create(r.field,"==",n)))||[];return xt.create(t,"or")}return r}const e=r.filters.map((t=>wA(t)));return xt.create(e,r.op)}function rP(r){if(r.getFilters().length===0)return[];const e=v0(wA(r));return Ce(xA(e),7391),y0(e)||_0(e)?[e]:e.getFilters()}function y0(r){return r instanceof Ze}function _0(r){return r instanceof xt&&i_(r)}function xA(r){return y0(r)||_0(r)||(function(t){if(t instanceof xt&&l0(t)){for(const n of t.getFilters())if(!y0(n)&&!_0(n))return!1;return!0}return!1})(r)}function v0(r){if(Ce(r instanceof Ze||r instanceof xt,34018),r instanceof Ze)return r;if(r.filters.length===1)return v0(r.filters[0]);const e=r.filters.map((n=>v0(n)));let t=xt.create(e,r.op);return t=lm(t),xA(t)?t:(Ce(t instanceof xt,64498),Ce(uc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((n,s)=>h_(n,s))))}function h_(r,e){let t;return Ce(r instanceof Ze||r instanceof xt,38388),Ce(e instanceof Ze||e instanceof xt,25473),t=r instanceof Ze?e instanceof Ze?(function(s,o){return xt.create([s,o],"and")})(r,e):yE(r,e):e instanceof Ze?yE(e,r):(function(s,o){if(Ce(s.filters.length>0&&o.filters.length>0,48005),uc(s)&&uc(o))return z2(s,o.getFilters());const c=l0(s)?s:o,u=l0(s)?o:s,d=c.filters.map((f=>h_(f,u)));return xt.create(d,"or")})(r,e),lm(t)}function yE(r,e){if(uc(e))return z2(e,r.getFilters());{const t=e.filters.map((n=>h_(r,n)));return xt.create(t,"or")}}function lm(r){if(Ce(r instanceof Ze||r instanceof xt,11850),r instanceof Ze)return r;const e=r.getFilters();if(e.length===1)return lm(e[0]);if(L2(r))return r;const t=e.map((s=>lm(s))),n=[];return t.forEach((s=>{s instanceof Ze?n.push(s):s instanceof xt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:xt.create(n,r.op)}class iP{constructor(){this.Cn=new d_}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(yr.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class d_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Et(ft.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Et(ft.comparator)).toArray()}}const _E="IndexedDbIndexManager",df=new Uint8Array(0);class sP{constructor(e,t){this.databaseId=t,this.vn=new d_,this.Fn=new Es((n=>Co(n)),((n,s)=>Ih(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return vE(e).put(o)}return se.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[u2(t),""],!1,!0);return vE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ci(c.parent))}return n}))}addFieldIndex(e,t){const n=Su(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=zl(e);return o.next((u=>{c.put(uE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Su(e),s=zl(e),o=Ul(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Su(e),n=Ul(e),s=zl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return se.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new pE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=Ul(e);let s=!0;const o=new Map;return se.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ge();const u=[];return se.forEach(o,((d,f)=>{ye(_E,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(d)} to execute ${Co(t)}`);const g=(function(U,H){const K=t0(H);if(K===void 0)return null;for(const z of im(U,K.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(U,H){const K=new Map;for(const z of so(H))for(const M of im(U,z.fieldPath))switch(M.op){case"==":case"in":K.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return K.set(z.fieldPath.canonicalString(),M.value),Array.from(K.values())}return null})(f,d),v=(function(U,H){const K=[];let z=!0;for(const M of so(H)){const S=M.kind===0?Wx(U,M.fieldPath,U.startAt):Xx(U,M.fieldPath,U.startAt);K.push(S.value),z&&(z=S.inclusive)}return new cc(K,z)})(f,d),w=(function(U,H){const K=[];let z=!0;for(const M of so(H)){const S=M.kind===0?Xx(U,M.fieldPath,U.endAt):Wx(U,M.fieldPath,U.endAt);K.push(S.value),z&&(z=S.inclusive)}return new cc(K,z)})(f,d),E=this.On(d,f,v),N=this.On(d,f,w),O=this.Nn(d,f,y),V=this.Bn(d.indexId,g,E,v.inclusive,N,w.inclusive,O);return se.forEach(V,(q=>n.Y(q,t.limit).next((U=>{U.forEach((H=>{const K=we.fromSegments(H.documentKey);c.has(K)||(c=c.add(K),u.push(K))}))}))))})).next((()=>u))}return se.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=rP(xt.create(e.filters,"and")).map((n=>u0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):df,w=this.kn(e,v,n[y%f],s),E=this.qn(e,v,o[y%f],c),N=u.map((O=>this.kn(e,v,O,!0)));g.push(...this.createRange(w,E,N))}return g}kn(e,t,n,s){const o=new uo(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new uo(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new pE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return se.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new Et(Ut.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Tu;for(const s of so(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);co.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Tu;return co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Tu;return co.Kt.Dt(oh(this.databaseId,t),n.Pn((function(o){const c=so(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Tu);let o=0;for(const c of so(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&lh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);co.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Tu;d.seed(u.un()),co.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof Ze&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Su(e),s=zl(e);return(t?n.J(r0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return se.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new eh(y.sequenceNumber,new yr(Oo(y.readTime),new we(Ci(y.documentKey)),y.largestBatchId)):eh.empty(),w=g.fields.map((([E,N])=>new Af(Ut.fromServerFormat(E),N)));return new Xf(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=Su(e),o=zl(e);return this.Gn(e).next((c=>s.J(r0,IDBKeyRange.bound(t,t)).next((u=>se.forEach(u,(d=>o.put(uE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return se.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),se.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?se.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return Ul(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return Ul(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=Ul(e);let o=new Et(ra);return s.ee({index:w2,range:IDBKeyRange.only([n.indexId,this.uid,Mf(this.$n(n,t))])},((c,u)=>{o=o.add(new uo(n.indexId,t,gE(u.arrayValue),gE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new Et(ra);const s=this.Qn(t,e);if(s==null)return n;const o=t0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(lh(c))for(const u of c.arrayValue.values||[])n=n.add(new uo(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new uo(t.indexId,e.key,df,s));return n}Jn(e,t,n,s,o){ye(_E,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),E=f.getIterator();let N=Vl(w),O=Vl(E);for(;N||O;){let V=!1,q=!1;if(N&&O){const U=g(N,O);U<0?q=!0:U>0&&(V=!0)}else N!=null?q=!0:V=!0;V?(y(O),O=Vl(E)):q?(v(N),N=Vl(w)):(N=Vl(w),O=Vl(E))}})(s,o,ra,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),se.waitFor(c)}Gn(e){let t=1;return zl(e).ee({index:b2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>ra(c,u))).filter(((c,u,d)=>!u||ra(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=ra(c,e),d=ra(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,df,we.empty()),d=s[c+1].Vn(this.uid,df,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return ra(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bE)}getMinOffset(e,t){return se.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Ae(44426))))).next(bE)}}function vE(r){return mn(r,ih)}function Ul(r){return mn(r,Fu)}function Su(r){return mn(r,J0)}function zl(r){return mn(r,Bu)}function bE(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;Q0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new yr(e.readTime,e.documentKey,t)}const wE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EA=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function TA(r,e,t){const n=r.store(Xr),s=r.store(rc),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Ce(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=y2(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return se.waitFor(o).next((()=>f))}function cm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ae(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(EA,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Wm{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Ce(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Wm(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).ee({index:fo,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Kl(e),c=ia(e);return c.add({}).next((u=>{Ce(typeof u=="number",49019);const d=new a_(u,t,n,s),f=(function(w,E,N){const O=N.baseMutations.map((q=>am(w.yt,q))),V=N.mutations.map((q=>am(w.yt,q)));return{userId:E,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new Et(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=y2(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,M5))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),se.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return ia(e).get(t).next((n=>n?(Ce(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),lo(this.serializer,n)):null))}er(e,t){return this.Xn[t]?se.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return ia(e).ee({index:fo,range:s},((c,u,d)=>{u.userId===this.userId&&(Ce(u.batchId>=n,47524,{tr:n}),o=lo(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=go;return ia(e).ee({index:fo,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,go],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).J(fo,t).next((n=>n.map((s=>lo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=If(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Kl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ci(g);if(f===this.userId&&t.path.isEqual(v))return ia(e).get(y).next((w=>{if(!w)throw Ae(61480,{nr:c,batchId:y});Ce(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(lo(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Et(Le);const s=[];return t.forEach((o=>{const c=If(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Kl(e).ee({range:u},((f,g,y)=>{const[v,w,E]=f,N=Ci(w);v===this.userId&&o.path.isEqual(N)?n=n.add(E):y.done()}));s.push(d)})),se.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=If(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new Et(Le);return Kl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,E=Ci(v);y===this.userId&&n.isPrefixOf(E)?E.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(ia(e).get(o).next((c=>{if(c===null)throw Ae(35274,{batchId:o});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(lo(this.serializer,c))})))})),se.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return TA(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),se.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return se.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Kl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ci(o[1]);s.push(d)}else u.done()})).next((()=>{Ce(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return SA(e,this.userId,t)}_r(e){return AA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:go,lastStreamToken:""}))}}function SA(r,e,t){const n=If(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Kl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function ia(r){return mn(r,Xr)}function Kl(r){return mn(r,rc)}function AA(r){return mn(r,nh)}class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}class aP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Mo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ke.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Ce(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Bl(e).ee(((c,u)=>{const d=Ou(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>se.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Bl(e).ee(((n,s)=>{const o=Ou(s);t(o)}))}lr(e){return xE(e).get(em).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return xE(e).put(em,t)}Pr(e,t){return Bl(e).put(vA(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Co(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Bl(e).ee({range:s,index:v2},((c,u,d)=>{const f=Ou(u);Ih(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=ha(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),se.waitFor(s)}removeMatchingKeys(e,t,n){const s=ha(e);return se.forEach(t,(o=>{const c=Un(o.path);return se.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=ha(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ha(e);let o=Ge();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ci(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[u2(n)],!1,!0);let o=0;return ha(e).ee({index:X0,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Bl(e).get(t).next((n=>n?Ou(n):null))}}function Bl(r){return mn(r,ic)}function xE(r){return mn(r,po)}function ha(r){return mn(r,sc)}const EE="LruGarbageCollector",oP=1048576;function TE([r,e],[t,n]){const s=Le(r,t);return s===0?Le(e,n):s}class lP{constructor(e){this.Ir=e,this.buffer=new Et(TE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();TE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IA{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(EE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?ye(EE,"Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Vr(3e5)}))}}class cP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Mr.ce);const n=new lP(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(wE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),Hl()<=Je.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function RA(r,e){return new cP(r,e)}class uP{constructor(e,t){this.db=e,this.garbageCollector=RA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return ff(e,n)}removeReference(e,t,n){return ff(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ff(e,t)}br(e,t){return(function(s,o){let c=!1;return AA(s).te((u=>SA(s,u,o).next((d=>(d&&(c=!0),se.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,ke.min()),ha(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>se.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ff(e,t)}Sr(e,t){const n=ha(e);let s,o=Mr.ce;return n.ee({index:X0},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Mr.ce&&t(new we(Ci(s)),o),o=f,s=d):o=Mr.ce})).next((()=>{o!==Mr.ce&&t(new we(Ci(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(r,e){return ha(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class CA{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ro(e).put(n)}removeEntry(e,t,n){return ro(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],om(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=qt.newInvalidDocument(t);return ro(e).ee({index:Rf,range:IDBKeyRange.only(Au(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:qt.newInvalidDocument(t)};return ro(e).ee({index:Rf,range:IDBKeyRange.only(Au(t))},((s,o)=>{n={document:this.Cr(t,o),size:cm(o)}})).next((()=>n))}getEntries(e,t){let n=pr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=pr(),s=new Lt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,cm(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return se.resolve();let s=new Et(IE);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Au(s.first()),Au(s.last())),c=s.getIterator();let u=c.getNext();return ro(e).ee({index:Rf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&IE(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Au(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),om(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=pr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Nh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=pr();const c=AE(t,n),u=AE(t,yr.max());return ro(e).ee({index:_2,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new dP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return SE(e).get(n0).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return SE(e).put(n0,t)}Cr(e,t){if(t){const n=W3(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ke.min())))return n}return qt.newInvalidDocument(e)}}function NA(r){return new hP(r)}class dP extends CA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Es((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new Et(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=lE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=cm(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=lE(this.Nr.serializer,c.convertToNoDocument(ke.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),se.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function SE(r){return mn(r,rh)}function ro(r){return mn(r,Zf)}function Au(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AE(r,e){const t=e.documentKey.path.toArray();return[r,om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IE(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=Le(t[o],n[o]),s)return s;return s=Le(t.length,n.length),s||(s=Le(t[t.length-2],n[n.length-2]),s||Le(t[t.length-1],n[n.length-1]))}class fP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kA{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Gu(n.mutation,s,ir.empty(),wt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ge()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ge()){const s=Ni();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=ku();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Ni();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ge())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=pr();const c=$u(),u=(function(){return $u()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Ts)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Gu(g.mutation,f,g.mutation.getFieldMask(),wt.now())):c.set(f.key,ir.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new fP(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=$u();let s=new Lt(((c,u)=>c-u)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||ir.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ge()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=Q2();g.forEach((v=>{if(!o.has(v)){const w=tA(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):q2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):se.resolve(Ni());let u=Zu,d=o;return c.next((f=>se.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ge()))).next((g=>({batchId:u,changes:Y2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=ku();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=ku();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(d=>{const f=(function(y,v){return new Rh(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,qt.newInvalidDocument(g)))}));let u=ku();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Gu(g.mutation,f,ir.empty(),wt.now()),Nh(t,f)&&(u=u.insert(d,f))})),u}))}}class mP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:bA(s.bundledQuery),readTime:Yn(s.readTime)}})(t)),se.resolve()}}class gP{constructor(){this.overlays=new Lt(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=Ni(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Lt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=Ni(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ni(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return se.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new l_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ge(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class pP{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}class f_{constructor(){this.Qr=new Et(bn.$r),this.Ur=new Et(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ge();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class yP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Et(bn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?go:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Et(Le);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new Et(Le);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return se.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _P{constructor(e){this.ri=e,this.docs=(function(){return new Lt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let n=pr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():qt.newInvalidDocument(s))})),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=pr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||Q0(f2(g),n)<=0||(s.has(g.key)||Nh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Ae(9500)}ii(e,t){return se.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new vP(this)}getSize(e){return se.resolve(this.size)}}class vP extends CA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class bP{constructor(e){this.persistence=e,this.si=new Es((t=>Co(t)),Ih),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new f_,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),se.waitFor(o).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}class m_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mr(0),this.li=!1,this.li=!0,this.hi=new pP,this.referenceDelegate=e(this),this.Pi=new bP(this),this.indexManager=new iP,this.remoteDocumentCache=(function(s){return new _P(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new _A(t),this.Ii=new mP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new yP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye("MemoryPersistence","Starting transaction:",e);const s=new wP(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class wP extends g2{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Ri=new f_,this.Vi=null}static mi(e){return new Xm(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class um{constructor(e,t){this.persistence=e,this.pi=new Es((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=RA(this,t)}static mi(e,t){return new um(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?se.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,ke.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,n){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xP{constructor(e){this.serializer=e}k(e,t,n,s){const o=new jm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Ah)})(e),(function(d){d.createObjectStore(nh,{keyPath:O5}),d.createObjectStore(Xr,{keyPath:Lx,autoIncrement:!0}).createIndex(fo,Ux,{unique:!0}),d.createObjectStore(rc)})(e),RE(e),(function(d){d.createObjectStore(ao)})(e));let c=se.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(sc),d.deleteObjectStore(ic),d.deleteObjectStore(po)})(e),RE(e)),c=c.next((()=>(function(d){const f=d.store(po),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return f.put(em,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Xr).J().next((y=>{d.deleteObjectStore(Xr),d.createObjectStore(Xr,{keyPath:Lx,autoIncrement:!0}).createIndex(fo,Ux,{unique:!0});const v=f.store(Xr),w=y.map((E=>v.put(E)));return se.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(ac,{keyPath:F5})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(rh)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Lm,{keyPath:H5})})(e),(function(d){d.createObjectStore(Um,{keyPath:q5})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(zm,{keyPath:X5});f.createIndex(i0,J5,{unique:!1}),f.createIndex(x2,Z5,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(Zf,{keyPath:P5});f.createIndex(Rf,j5),f.createIndex(_2,V5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ao)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(J0,{keyPath:$5,autoIncrement:!0}).createIndex(r0,G5,{unique:!1}),d.createObjectStore(Bu,{keyPath:K5}).createIndex(b2,Y5,{unique:!1}),d.createObjectStore(Fu,{keyPath:Q5}).createIndex(w2,W5,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(Z0,{keyPath:e3})})(e)}))),n<18&&s>=18&&mS()&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(Fu).clear()}))),c}wi(e){let t=0;return e.store(ao).ee(((n,s)=>{t+=cm(s)})).next((()=>{const n={byteSize:t};return e.store(rh).put(n0,n)}))}yi(e){const t=e.store(nh),n=e.store(Xr);return t.J().next((s=>se.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,go],[o.userId,o.lastAcknowledgedBatchId]);return n.J(fo,c).next((u=>se.forEach(u,(d=>{Ce(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=lo(this.serializer,d);return TA(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(sc),n=e.store(ao);return e.store(po).get(em).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new ft(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?se.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>se.waitFor(o)))}))}bi(e,t){e.createObjectStore(ih,{keyPath:B5});const n=t.store(ih),s=new d_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(ao).ee({X:!0},((c,u)=>{const d=new ft(c);return o(d.popLast())})).next((()=>t.store(rc).ee({X:!0},(([c,u,d],f)=>{const g=Ci(u);return o(g.popLast())}))))}Di(e){const t=e.store(ic);return t.ee(((n,s)=>{const o=Ou(s),c=vA(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(ao),s=[];return n.ee(((o,c)=>{const u=t.store(Zf),d=(function(y){return y.document?new we(ft.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ae(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>se.waitFor(s)))}Fi(e,t){const n=t.store(Xr),s=NA(this.serializer),o=new m_(Xm.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ge();lo(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),se.forEach(u,((d,f)=>{const g=new Cn(f),y=Qm.wt(this.serializer,g),v=o.getIndexManager(g),w=Wm.wt(g,this.serializer,v,o.referenceDelegate);return new kA(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new s0(t,Mr.ce),d).next()}))}))}}function RE(r){r.createObjectStore(sc,{keyPath:U5}).createIndex(X0,z5,{unique:!0}),r.createObjectStore(ic,{keyPath:"targetId"}).createIndex(v2,L5,{unique:!0}),r.createObjectStore(po)}const sa="IndexedDbPersistence",Ry=18e5,Cy=5e3,Ny="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EP="main";class g_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!g_.v())throw new be(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uP(this,s),this.$i=t+EP,this.serializer=new _A(d),this.Ui=new pa(this.$i,this.Ni,new xP(this.serializer)),this.hi=new J3,this.Pi=new aP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NA(this.serializer),this.Ii=new X3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Gn(sa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(fe.FAILED_PRECONDITION,Ny);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Mr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Aa(e))return ye(sa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(sa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Iu(e).get(jl).next((t=>se.resolve(this.es(t))))}ts(e){return mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ry)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=mn(t,ac);return n.J().next((s=>{const o=this.ss(s,Ry),c=s.filter((u=>o.indexOf(u)===-1));return se.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?se.resolve(!0):Iu(e).get(jl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new be(fe.FAILED_PRECONDITION,Ny);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).J().next((n=>this.ss(n,Cy).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ye(sa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ah,ac],(e=>{const t=new s0(e,Mr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>mf(e).J().next((t=>this.ss(t,Ry).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Wm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Qm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye(sa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?r3:d===17?A2:d===16?n3:d===15?e_:d===14?S2:d===13?T2:d===12?t3:d===11?E2:void Ae(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new s0(u,this.ci?this.ci.next():Mr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new be(fe.FAILED_PRECONDITION,m2);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Iu(e).get(jl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(fe.FAILED_PRECONDITION,Ny)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iu(e).put(jl,t)}static v(){return pa.v()}Zi(e){const t=Iu(e);return t.get(jl).next((n=>this.es(n)?(ye(sa,"Releasing primary lease."),t.delete(jl)):se.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;fS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ye(sa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gn(sa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Iu(r){return mn(r,Ah)}function mf(r){return mn(r,ac)}function TP(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class p_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ge(),s=Ge();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new p_(e,t.fromCache,n,s)}}class SP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class DA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fS()?8:p2(fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new SP;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(Hl()<=Je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Hl()<=Je.DEBUG&&ye("QueryEngine","Query:",ql(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(Hl()<=Je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):se.resolve())}ys(e,t){if(Jx(t))return se.resolve(null);let n=Pr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=d0(t,null,"F"),n=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ge(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,d0(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return Jx(t)||s.isEqual(ke.min())?se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?se.resolve(null):(Hl()<=Je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ql(t)),this.vs(e,c,t,A5(s,Zu)).next((u=>u)))}))}Ds(e,t){let n=new Et(G2(e));return t.forEach(((s,o)=>{Nh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return Hl()<=Je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ql(t)),this.ps.getDocumentsMatchingQuery(e,t,yr.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const y_="LocalStore",AP=3e8;class IP{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Lt(Le),this.xs=new Es((o=>Co(o)),Ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OA(r,e,t,n){return new IP(r,e,t,n)}async function MA(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ge();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function RP(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=se.resolve();return v.forEach((E=>{w=w.next((()=>g.getEntry(d,E))).next((N=>{const O=f.docVersions.get(E);Ce(O!==null,48541),N.version.compareTo(O)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ge();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function PA(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function CP(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(N,O,V){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=AP?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=pr(),f=Ge();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(NP(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return se.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function NP(r,e,t){let n=Ge(),s=Ge();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=pr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ke.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):ye(y_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function kP(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=go),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function DP(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,se.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new ds(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function b0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Aa(c))throw c;ye(y_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function CE(r,e,t){const n=Ue(r);let s=ke.min(),o=Ge();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?se.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,Pr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:ke.min(),t?o:Ge()))).next((u=>(OP(n,_3(e),u),{documents:u,Qs:o})))))}function OP(r,e,t){let n=r.Os.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class NE{constructor(){this.activeTargetIds=T3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jA{constructor(){this.Mo=new NE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MP{Oo(e){}shutdown(){}}const kE="ConnectivityMonitor";class DE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(kE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(kE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function w0(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const ky="RestConnection",PP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===tm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=w0(),u=this.zo(e,t.toUriEncodedString());ye(ky,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=zo(f);return this.Jo(e,u,d,n,g).then((y=>(ye(ky,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Io(ky,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=PP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class VP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class LP extends jP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=w0();return new Promise(((u,d)=>{const f=new r2;f.setWithCredentials(!0),f.listenOnce(i2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Sf.NO_ERROR:const y=f.getResponseJson();ye(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Sf.TIMEOUT:ye(Mn,`RPC '${e}' ${c} timed out`),d(new be(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const v=f.getStatus();if(ye(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w?.error;if(E&&E.status&&E.message){const N=(function(V){const q=V.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(q)>=0?q:fe.UNKNOWN})(E.status);d(new be(N,E.message))}else d(new be(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new be(fe.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ye(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ye(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=w0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=o2(),u=a2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");ye(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const E=new VP({Yo:O=>{w?ye(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(ye(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ye(Mn,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Zo:()=>y.close()}),N=(O,V,q)=>{O.listen(V,(U=>{try{q(U)}catch(H){setTimeout((()=>{throw H}),0)}}))};return N(y,Nu.EventType.OPEN,(()=>{w||(ye(Mn,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),N(y,Nu.EventType.CLOSE,(()=>{w||(w=!0,ye(Mn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(y))})),N(y,Nu.EventType.ERROR,(O=>{w||(w=!0,Io(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),E.a_(new be(fe.UNAVAILABLE,"The operation could not be completed")))})),N(y,Nu.EventType.MESSAGE,(O=>{if(!w){const V=O.data[0];Ce(!!V,16349);const q=V,U=q?.error||q[0]?.error;if(U){ye(Mn,`RPC '${e}' stream ${s} received error:`,U);const H=U.status;let K=(function(S){const T=ln[S];if(T!==void 0)return iA(T)})(H),z=U.message;K===void 0&&(K=fe.INTERNAL,z="Unknown error status: "+H+" with message "+U.message),w=!0,E.a_(new be(K,z)),y.close()}else ye(Mn,`RPC '${e}' stream ${s} received:`,V),E.u_(V)}})),N(u,s2.STAT_EVENT,(O=>{O.stat===Zy.PROXY?ye(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===Zy.NOPROXY&&ye(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function UP(){return typeof window<"u"?window:null}function Pf(){return typeof document<"u"?document:null}function Jm(r){return new z3(r,!0)}class VA{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const OE="PersistentStream";class LA{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new VA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new be(fe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(OE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(OE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zP extends LA{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=H3(this.serializer,e),n=(function(o){if(!("targetChange"in o))return ke.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Yn(c.readTime):ke.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=g0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=rm(d)?{documents:dA(o,d)}:{query:fA(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=oA(o,c.resumeToken);const f=f0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ke.min())>0){u.readTime=dc(o,c.snapshotVersion.toTimestamp());const f=f0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=$3(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=g0(this.serializer),t.removeTarget=e,this.q_(t)}}class BP extends LA{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=q3(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=g0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>am(this.serializer,n)))};this.q_(t)}}class FP{}class HP extends FP{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new be(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,m0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(fe.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,m0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Po="RemoteStore";class $P{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{qo(this)&&(ye(Po,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Dh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Zm(f)})(this))}))})),this.Ra=new qP(n,s)}}async function Zm(r){if(qo(r))for(const e of r.da)await e(!0)}async function Dh(r){for(const e of r.da)await e(!1)}function UA(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),w_(t)?b_(t):_c(t).O_()&&v_(t,e))}function __(r,e){const t=Ue(r),n=_c(t);t.Ia.delete(e),n.O_()&&zA(t,e),t.Ia.size===0&&(n.O_()?n.L_():qo(t)&&t.Ra.set("Unknown"))}function v_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_c(r).Y_(e)}function zA(r,e){r.Va.Ue(e),_c(r).Z_(e)}function b_(r){r.Va=new j3({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),_c(r).start(),r.Ra.ua()}function w_(r){return qo(r)&&!_c(r).x_()&&r.Ia.size>0}function qo(r){return Ue(r).Ea.size===0}function BA(r){r.Va=void 0}async function GP(r){r.Ra.set("Online")}async function KP(r){r.Ia.forEach(((e,t)=>{v_(r,e)}))}async function YP(r,e){BA(r),w_(r)?(r.Ra.ha(e),b_(r)):r.Ra.set("Unknown")}async function QP(r,e,t){if(r.Ra.set("Online"),e instanceof aA&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){ye(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await hm(r,n)}else if(e instanceof Of?r.Va.Ze(e):e instanceof sA?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const n=await PA(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(un.EMPTY_BYTE_STRING,g.snapshotVersion)),zA(o,d);const y=new ds(g.target,d,f,g.sequenceNumber);v_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ye(Po,"Failed to raise snapshot:",n),await hm(r,n)}}async function hm(r,e,t){if(!Aa(e))throw e;r.Ea.add(1),await Dh(r),r.Ra.set("Offline"),t||(t=()=>PA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Po,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Zm(r)}))}function FA(r,e){return e().catch((t=>hm(r,t,e)))}async function Oh(r){const e=Ue(r),t=xa(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:go;for(;WP(e);)try{const s=await kP(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,XP(e,s)}catch(s){await hm(e,s)}HA(e)&&qA(e)}function WP(r){return qo(r)&&r.Ta.length<10}function XP(r,e){r.Ta.push(e);const t=xa(r);t.O_()&&t.X_&&t.ea(e.mutations)}function HA(r){return qo(r)&&!xa(r).x_()&&r.Ta.length>0}function qA(r){xa(r).start()}async function JP(r){xa(r).ra()}async function ZP(r){const e=xa(r);for(const t of r.Ta)e.ea(t.mutations)}async function e6(r,e,t){const n=r.Ta.shift(),s=o_.from(n,e,t);await FA(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Oh(r)}async function t6(r,e){e&&xa(r).X_&&await(async function(n,s){if((function(c){return O3(c)&&c!==fe.ABORTED})(s.code)){const o=n.Ta.shift();xa(n).B_(),await FA(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Oh(n)}})(r,e),HA(r)&&qA(r)}async function ME(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ye(Po,"RemoteStore received new credentials");const n=qo(t);t.Ea.add(3),await Dh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zm(t)}async function n6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await Zm(t)):e||(t.Ea.add(2),await Dh(t),t.Ra.set("Unknown"))}function _c(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new zP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:GP.bind(null,r),t_:KP.bind(null,r),r_:YP.bind(null,r),H_:QP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),w_(r)?b_(r):r.Ra.set("Unknown")):(await r.ma.stop(),BA(r))}))),r.ma}function xa(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new BP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:JP.bind(null,r),r_:t6.bind(null,r),ta:ZP.bind(null,r),na:e6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Oh(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Po,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class x_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new x_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E_(r,e){if(Gn("AsyncQueue",`${e}: ${r}`),Aa(r))return new be(fe.UNAVAILABLE,`${e}: ${r}`);throw r}class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=ku(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Zl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class PE{constructor(){this.ga=new Lt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new fc(e,t,Zl.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class r6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class i6{constructor(){this.queries=jE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=jE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new be(fe.ABORTED,"Firestore shutting down"))}}function jE(){return new Es((r=>$2(r)),Hm)}async function T_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new r6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=E_(c,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&A_(t)}async function S_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function s6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&A_(t)}function a6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function A_(r){r.Ca.forEach((e=>{e.next()}))}var x0,VE;(VE=x0||(x0={})).Ma="default",VE.Cache="cache";class I_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new fc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==x0.Cache}}class $A{constructor(e){this.key=e}}class GA{constructor(e){this.key=e}}class o6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=G2(e),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new PE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Nh(this.query,y)?y:null,E=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?E!==N&&(n.track({type:3,doc:w}),O=!0):this.su(v,w)||(n.track({type:2,doc:w}),O=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),O=!0):v&&!w&&(n.track({type:1,doc:v}),O=!0,(d||f)&&(u=!0)),O&&(w?(c=c.add(w),o=N?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,E){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:O})}};return N(w)-N(E)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new fc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new GA(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new $A(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const R_="SyncEngine";class l6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class c6{constructor(e){this.key=e,this.hu=!1}}class u6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Es((u=>$2(u)),Hm),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(we.comparator),this.Au=new Map,this.Ru=new f_,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h6(r,e,t=!0){const n=JA(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await KA(n,e,t,!0),s}async function d6(r,e){const t=JA(r);await KA(t,e,!0,!1)}async function KA(r,e,t,n){const s=await DP(r.localStore,Pr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await f6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&UA(r.remoteStore,s),u}async function f6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(N,O,V,q){let U=O.view.ru(V);U.Cs&&(U=await CE(N.localStore,O.query,!1).then((({documents:M})=>O.view.ru(M,U))));const H=q&&q.targetChanges.get(O.targetId),K=q&&q.targetMismatches.get(O.targetId)!=null,z=O.view.applyChanges(U,N.isPrimaryClient,H,K);return UE(N,O.targetId,z.au),z.snapshot})(r,y,v,w);const o=await CE(r.localStore,e,!0),c=new o6(e,o.Qs),u=c.ru(o.documents),d=kh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);UE(r,t,f.au);const g=new l6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function m6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Hm(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await b0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&__(n.remoteStore,s.targetId),E0(n,s.targetId)})).catch(Ho)):(E0(n,s.targetId),await b0(n.localStore,s.targetId,!0))}async function g6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),__(t.remoteStore,n.targetId))}async function p6(r,e,t){const n=ZA(r);try{const s=await(function(c,u){const d=Ue(c),f=wt.now(),g=u.reduce(((w,E)=>w.add(E.key)),Ge());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=pr(),N=Ge();return d.Ns.getEntries(w,g).next((O=>{E=O,E.forEach(((V,q)=>{q.isValidDocument()||(N=N.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,E))).next((O=>{y=O;const V=[];for(const q of u){const U=k3(q,y.get(q.key).overlayedDocument);U!=null&&V.push(new Ts(q.key,U,j2(U.value.mapValue),Ln.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((O=>{v=O;const V=O.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(w,O.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:Y2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Lt(Le)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await Mh(n,s.changes),await Oh(n.remoteStore)}catch(s){const o=E_(s,"Failed to persist write");t.reject(o)}}async function YA(r,e){const t=Ue(r);try{const n=await CP(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ce(c.hu,14607):s.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await Mh(t,n,e)}catch(n){await Ho(n)}}function LE(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&A_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function y6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Lt(we.comparator);c=c.insert(o,qt.newNoDocument(o,ke.min()));const u=Ge().add(o),d=new Ym(ke.min(),new Map,new Lt(Le),c,u);await YA(n,d),n.du=n.du.remove(o),n.Au.delete(e),C_(n)}else await b0(n.localStore,e,!1).then((()=>E0(n,e,t))).catch(Ho)}async function _6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await RP(t.localStore,e);WA(t,n,null),QA(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Mh(t,s)}catch(s){await Ho(s)}}async function v6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ce(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);WA(n,e,t),QA(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Mh(n,s)}catch(s){await Ho(s)}}function QA(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function WA(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function E0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||XA(r,n)}))}function XA(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(__(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),C_(r))}function UE(r,e,t){for(const n of t)n instanceof $A?(r.Ru.addReference(n.key,e),b6(r,n)):n instanceof GA?(ye(R_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||XA(r,n.key)):Ae(19791,{wu:n})}function b6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ye(R_,"New document in limbo: "+t),r.Eu.add(n),C_(r))}function C_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ft.fromString(e)),n=r.fu.next();r.Au.set(n,new c6(t)),r.du=r.du.insert(t,n),UA(r.remoteStore,new ds(Pr(Ch(t.path)),n,"TargetPurposeLimboResolution",Mr.ce))}}async function Mh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=p_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>se.forEach(f,(v=>se.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>se.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Aa(y))throw y;ye(y_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),E=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(E);g.Ms=g.Ms.insert(v,N)}}})(n.localStore,o))}async function w6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ye(R_,"User change. New user:",e.toKey());const n=await MA(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new be(fe.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Mh(t,n.Ls)}}function x6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ge().add(n.key);{let s=Ge();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function JA(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y6.bind(null,e),e.Pu.H_=s6.bind(null,e.eventManager),e.Pu.yu=a6.bind(null,e.eventManager),e}function ZA(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v6.bind(null,e),e}class uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}Cu(e){return new m_(Xm.mi,this.serializer)}Du(e){return new jA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uh.provider={build:()=>new uh};class E6 extends uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof um,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new IA(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new m_((n=>um.mi(n,t)),this.serializer)}}class T6 extends uh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ZA(this.xu.syncEngine),await Oh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new IA(n,e.asyncQueue,t)}Mu(e,t){const n=new N5(t,this.persistence);return new C5(e.asyncQueue,n)}Cu(e){const t=TP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new g_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,UP(),Pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new jA}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>LE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=w6.bind(null,this.syncEngine),await n6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new i6})()}createDatastore(e){const t=Jm(e.databaseInfo.databaseId),n=(function(o){return new LP(o)})(e.databaseInfo);return(function(o,c,u,d){return new HP(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new $P(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>LE(this.syncEngine,t,0)),(function(){return DE.v()?new DE:new MP})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new u6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);ye(Po,"RemoteStore shutting down."),n.Ea.add(5),await Dh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dm.provider={build:()=>new dm};class N_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ea="FirestoreClient";class S6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=Y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ye(Ea,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ye(Ea,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=E_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Dy(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Ea,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await MA(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function zE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await A6(r);ye(Ea,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>ME(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>ME(e.remoteStore,s))),r._onlineComponents=e}async function A6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Ea,"Using user provided OfflineComponentProvider");try{await Dy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await Dy(r,new uh)}}else ye(Ea,"Using default OfflineComponentProvider"),await Dy(r,new E6(void 0));return r._offlineComponents}async function eI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Ea,"Using user provided OnlineComponentProvider"),await zE(r,r._uninitializedComponentsProvider._online)):(ye(Ea,"Using default OnlineComponentProvider"),await zE(r,new dm))),r._onlineComponents}function I6(r){return eI(r).then((e=>e.syncEngine))}async function fm(r){const e=await eI(r),t=e.eventManager;return t.onListen=h6.bind(null,e.syncEngine),t.onUnlisten=m6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g6.bind(null,e.syncEngine),t}function R6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new N_({next:v=>{g.Nu(),c.enqueueAndForget((()=>S_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new be(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new I_(Ch(u.path),g,{includeMetadataChanges:!0,qa:!0});return T_(o,y)})(await fm(r),r.asyncQueue,e,t,n))),n.promise}function C6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new N_({next:v=>{g.Nu(),c.enqueueAndForget((()=>S_(o,y))),v.fromCache&&d.source==="server"?f.reject(new be(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new I_(u,g,{includeMetadataChanges:!0,qa:!0});return T_(o,y)})(await fm(r),r.asyncQueue,e,t,n))),n.promise}function tI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const BE=new Map;const nI="firestore.googleapis.com",FE=!0;class HE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nI,this.ssl=FE}else this.host=e.host,this.ssl=e.ssl??FE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oP)throw new be(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eg{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new g5;switch(n.type){case"firstParty":return new v5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new be(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=BE.get(t);n&&(ye("ComponentProvider","Removing Datastore"),BE.delete(t),n.terminate())})(this),Promise.resolve()}}function N6(r,e,t,n={}){r=Kn(r,eg);const s=zo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(M0(`https://${u}`),P0("Firestore",!0)),o.host!==nI&&o.host!==u&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=hS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new be(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new p5(new c2(f,g))}}class $o{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class Gt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Sh(t,Gt._jsonSchema))return new Gt(e,n||null,new we(ft.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:cn("string",Gt._jsonSchemaVersion),referencePath:cn("string")};class ya extends $o{constructor(e,t,n){super(e,t,Ch(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new we(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function gs(r,e,...t){if(r=Jt(r),h2("collection","path",e),r instanceof eg){const n=ft.fromString(e,...t);return Ox(n),new ya(r,null,n)}{if(!(r instanceof Gt||r instanceof ya))throw new be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Ox(n),new ya(r.firestore,null,n)}}function $t(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=Y0.newId()),h2("doc","path",e),r instanceof eg){const n=ft.fromString(e,...t);return Dx(n),new Gt(r,null,new we(n))}{if(!(r instanceof Gt||r instanceof ya))throw new be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Dx(n),new Gt(r.firestore,r instanceof ya?r.converter:null,new we(n))}}const qE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new VA(this,"async_queue_retry"),this._c=()=>{const n=Pf();n&&ye(qE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;ye(qE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",GE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=x_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function GE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function KE(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Li extends eg{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new $E,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function k6(r,e){const t=typeof r=="object"?r:L0(),n=typeof r=="string"?r:tm,s=km(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=lS("firestore");o&&N6(s,...o)}return s}function tg(r){if(r._terminated)throw new be(fe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||rI(r),r._firestoreClient}function rI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new s3(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new S6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function D6(r,e){Io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return O6(r,dm.provider,{build:n=>new T6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function O6(r,e,t){if((r=Kn(r,Li))._firestoreClient||r._terminated)throw new be(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new be(fe.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},rI(r)}class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(un.fromBase64String(e))}catch(t){throw new be(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sh(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:cn("string",Dr._jsonSchemaVersion),bytes:cn("string")};class ng{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vc{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Sh(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:cn("string",Pi._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sh(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ji(e.vectorValues);throw new be(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:cn("string",ji._jsonSchemaVersion),vectorValues:cn("object")};const M6=/^__.*__$/;class P6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class iI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class rg{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sI(this.Ac)&&M6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Jm(e)}Cc(e,t,n,s=!1){return new rg({Ac:e,methodName:t,Dc:n,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ig(r){const e=r._freezeSettings(),t=Jm(r._databaseId);return new j6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function aI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);M_("Data must be an object, but it was:",c,n);const u=lI(n,c);let d,f;if(o.merge)d=new ir(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=T0(e,y,t);if(!c.contains(v))throw new be(fe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);uI(g,v)||g.push(v)}d=new ir(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new P6(new jn(u),d,f)}class sg extends vc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sg}}function oI(r,e,t){return new rg({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class k_ extends vc{_toFieldTransform(e){return new $m(e.path,new hc)}isEqual(e){return e instanceof k_}}class D_ extends vc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=oI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new No(n);return new $m(e.path,s)}isEqual(e){return e instanceof D_&&ys(this.vc,e.vc)}}class O_ extends vc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=oI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new ko(n);return new $m(e.path,s)}isEqual(e){return e instanceof O_&&ys(this.vc,e.vc)}}function V6(r,e,t,n){const s=r.Cc(1,e,t);M_("Data must be an object, but it was:",s,n);const o=[],c=jn.empty();Ia(n,((d,f)=>{const g=P_(e,d,t);f=Jt(f);const y=s.yc(g);if(f instanceof sg)o.push(g);else{const v=Go(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new ir(o);return new iI(c,u,s.fieldTransforms)}function L6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[T0(e,n,t)],d=[s];if(o.length%2!=0)throw new be(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(T0(e,o[v])),d.push(o[v+1]);const f=[],g=jn.empty();for(let v=u.length-1;v>=0;--v)if(!uI(f,u[v])){const w=u[v];let E=d[v];E=Jt(E);const N=c.yc(w);if(E instanceof sg)f.push(w);else{const O=Go(E,N);O!=null&&(f.push(w),g.set(w,O))}}const y=new ir(f);return new iI(g,y,c.fieldTransforms)}function U6(r,e,t,n=!1){return Go(t,r.Cc(n?4:3,e))}function Go(r,e){if(cI(r=Jt(r)))return M_("Unsupported field value:",e,r),lI(r,e);if(r instanceof vc)return(function(n,s){if(!sI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Go(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return S3(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=wt.fromDate(n);return{timestampValue:dc(s.serializer,o)}}if(n instanceof wt){const o=new wt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:dc(s.serializer,o)}}if(n instanceof Pi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Dr)return{bytesValue:oA(s.serializer,n._byteString)};if(n instanceof Gt){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:u_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ji)return(function(c,u){return{mapValue:{fields:{[n_]:{stringValue:r_},[oc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return s_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Pm(n)}`)})(r,e)}function lI(r,e){const t={};return I2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(r,((n,s)=>{const o=Go(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function cI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof wt||r instanceof Pi||r instanceof Dr||r instanceof Gt||r instanceof vc||r instanceof ji)}function M_(r,e,t){if(!cI(t)||!d2(t)){const n=Pm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function T0(r,e,t){if((e=Jt(e))instanceof ng)return e._internalPath;if(typeof e=="string")return P_(r,e);throw mm("Field path arguments must be of type string or ",r,!1,void 0,t)}const z6=new RegExp("[~\\*/\\[\\]]");function P_(r,e,t){if(e.search(z6)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ng(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function mm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new be(fe.INVALID_ARGUMENT,u+r+d)}function uI(r,e){return r.some((t=>t.isEqual(e)))}class hI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(j_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class B6 extends hI{data(){return super.data()}}function j_(r,e){return typeof e=="string"?P_(r,e):e instanceof ng?e._internalPath:e._delegate._internalPath}function dI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V_{}class F6 extends V_{}function gm(r,e,...t){let n=[];e instanceof V_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof L_)).length,u=o.filter((d=>d instanceof ag)).length;if(c>1||c>0&&u>0)throw new be(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class ag extends F6{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ag(e,t,n)}_apply(e){const t=this._parse(e);return fI(e._query,t),new $o(e.firestore,e.converter,h0(e._query,t))}_parse(e){const t=ig(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){QE(y,g);const E=[];for(const N of y)E.push(YE(d,o,N));v={arrayValue:{values:E}}}else v=YE(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||QE(y,g),v=U6(u,c,y,g==="in"||g==="not-in");return Ze.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pm(r,e,t){const n=e,s=j_("where",r);return ag._create(s,n,t)}class L_ extends V_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new L_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:xt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)fI(c,d),c=h0(c,d)})(e._query,t),new $o(e.firestore,e.converter,h0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function YE(r,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new be(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q2(e)&&t.indexOf("/")!==-1)throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!we.isDocumentKey(n))throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return oh(r,new we(n))}if(t instanceof Gt)return oh(r,t._key);throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pm(t)}.`)}function QE(r,e){if(!Array.isArray(r)||r.length===0)throw new be(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class H6{convertValue(e,t="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ia(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[oc].arrayValue?.values?.map((n=>Vt(n.doubleValue)));return new ji(t)}convertGeoPoint(e){return new Pi(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Ce(yA(n),9688,{name:e});const s=new Ro(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function mI(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends hI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(j_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:cn("string",_o._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class jf extends _o{data(e={}){return super.data(e)}}class vo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Mu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new jf(this._firestore,this._userDataWriter,n.key,n,new Mu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new jf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Mu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new jf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Mu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:q6(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Y0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function jo(r){r=Kn(r,Gt);const e=Kn(r.firestore,Li);return R6(tg(e),r._key).then((t=>pI(e,r,t)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:cn("string",vo._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class U_ extends H6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function S0(r){r=Kn(r,$o);const e=Kn(r.firestore,Li),t=tg(e),n=new U_(e);return dI(r._query),C6(t,r._query).then((s=>new vo(e,n,r,s)))}function z_(r,e,t){r=Kn(r,Gt);const n=Kn(r.firestore,Li),s=mI(r.converter,e);return lg(n,[aI(ig(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Ln.none())])}function Lr(r,e,t,...n){r=Kn(r,Gt);const s=Kn(r.firestore,Li),o=ig(s);let c;return c=typeof(e=Jt(e))=="string"||e instanceof ng?L6(o,"updateDoc",r._key,e,t,n):V6(o,"updateDoc",r._key,e),lg(s,[c.toMutation(r._key,Ln.exists(!0))])}function gI(r){return lg(Kn(r.firestore,Li),[new Km(r._key,Ln.none())])}function og(r,e){const t=Kn(r.firestore,Li),n=$t(r),s=mI(r.converter,e);return lg(t,[aI(ig(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Ln.exists(!1))]).then((()=>n))}function Ku(r,...e){r=Jt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||KE(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(KE(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof Gt)c=Kn(r.firestore,Li),u=Ch(r._key.path),o={next:d=>{e[n]&&e[n](pI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Kn(r,$o);c=Kn(d.firestore,Li),u=d._query;const f=new U_(c);o={next:g=>{e[n]&&e[n](new vo(c,f,d,g))},error:e[n+1],complete:e[n+2]},dI(r._query)}return(function(f,g,y,v){const w=new N_(v),E=new I_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>T_(await fm(f),E))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>S_(await fm(f),E)))}})(tg(c),u,s,o)}function lg(r,e){return(function(n,s){const o=new Mi;return n.asyncQueue.enqueueAndForget((async()=>p6(await I6(n),s,o))),o.promise})(tg(r),e)}function pI(r,e,t){const n=t.docs.get(e._key),s=new U_(r);return new _o(r,s,e._key,n,new Mu(t.hasPendingWrites,t.fromCache),e.converter)}function jr(){return new k_("serverTimestamp")}function B_(...r){return new D_("arrayUnion",r)}function yI(...r){return new O_("arrayRemove",r)}(function(e,t=!0){(function(s){pc=s})(Bo),Eo(new va("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new Li(new y5(n.getProvider("auth-internal")),new b5(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ki(Rx,Cx,e),ki(Rx,Cx,"esm2020")})();const _I="firebasestorage.googleapis.com",$6="storageBucket",G6=120*1e3,K6=600*1e3;class Fi extends zi{constructor(e,t,n=0){super(Oy(e),`Firebase Storage: ${t} (${Oy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function Oy(r){return"storage/"+r}function Y6(){const r="An unknown error occurred, please check the error payload for server response.";return new Fi(Ui.UNKNOWN,r)}function Q6(){return new Fi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W6(){return new Fi(Ui.CANCELED,"User canceled the upload/download.")}function X6(r){return new Fi(Ui.INVALID_URL,"Invalid URL '"+r+"'.")}function J6(r){return new Fi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function WE(r){return new Fi(Ui.INVALID_ARGUMENT,r)}function vI(){return new Fi(Ui.APP_DELETED,"The Firebase app was deleted.")}function Z6(r){return new Fi(Ui.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ei{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ei.makeFromUrl(e,t)}catch{return new ei(e,"")}if(n.path==="")return n;throw J6(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},N=t===_I?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",V=new RegExp(`^https?://${N}/${s}/${O}`,"i"),U=[{regex:u,indices:d,postModify:o},{regex:w,indices:E,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<U.length;H++){const K=U[H],z=K.regex.exec(e);if(z){const M=z[K.indices.bucket];let S=z[K.indices.path];S||(S=""),n=new ei(M,S),K.postModify(n);break}}if(n==null)throw X6(e);return n}}class ej{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tj(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...O){f||(f=!0,e.apply(null,O))}function y(O){s=setTimeout(()=>{s=null,r(w,d())},O)}function v(){o&&clearTimeout(o)}function w(O,...V){if(f){v();return}if(O){v(),g.call(null,O,...V);return}if(d()||c){v(),g.call(null,O,...V);return}n<64&&(n*=2);let U;u===1?(u=2,U=0):U=(n+Math.random())*1e3,y(U)}let E=!1;function N(O){E||(E=!0,v(),!f&&(s!==null?(O||(u=2),clearTimeout(s),y(0)):O||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,N(!0)},t),N}function nj(r){r(!1)}function rj(r){return r!==void 0}function XE(r,e,t,n){if(n<e)throw WE(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw WE(`Invalid value for '${r}'. Expected ${t} or less.`)}function ij(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var ym;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ym||(ym={}));function sj(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class aj{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,N)=>{this.resolve_=E,this.reject_=N,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new pf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===ym.NO_ERROR,d=o.getStatus();if(!u||sj(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ym.ABORT;n(!1,new pf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new pf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());rj(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=Y6();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?vI():W6();c(d)}else{const d=Q6();c(d)}};this.canceled_?t(!1,new pf(!1,null,!0)):this.backoffId_=tj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function oj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function lj(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function uj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function hj(r,e,t,n,s,o,c=!0,u=!1){const d=ij(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return cj(g,e),oj(g,t),lj(g,o),uj(g,n),new aj(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function dj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function fj(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class _m{constructor(e,t){this._service=e,t instanceof ei?this._location=t:this._location=ei.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _m(e,t)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fj(this._location.path)}get storage(){return this._service}get parent(){const e=dj(this._location.path);if(e===null)return null;const t=new ei(this._location.bucket,e);return new _m(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Z6(e)}}function JE(r,e){const t=e?.[$6];return t==null?null:ei.makeFromBucketSpec(t,r)}function mj(r,e,t,n={}){r.host=`${e}:${t}`;const s=zo(e);s&&(M0(`https://${r.host}/b`),P0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:hS(o,r.app.options.projectId))}class gj{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=_I,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G6,this._maxUploadRetryTime=K6,this._requests=new Set,s!=null?this._bucket=ei.makeFromBucketSpec(s,this._host):this._bucket=JE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=JE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _m(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new ej(vI());{const c=hj(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const ZE="@firebase/storage",eT="0.14.0";const bI="storage";function pj(r=L0(),e){r=Jt(r);const n=km(r,bI).getImmediate({identifier:e}),s=lS("storage");return s&&yj(n,...s),n}function yj(r,e,t,n={}){mj(r,e,t,n)}function _j(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new gj(t,n,s,e,Bo)}function vj(){Eo(new va(bI,_j,"PUBLIC").setMultipleInstances(!0)),ki(ZE,eT,""),ki(ZE,eT,"esm2020")}vj();const bj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},F_=_S(bj),Or=f5(F_),dt=k6(F_);pj(F_);new cs;try{D6(dt).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const wI=$.createContext();function si(){return $.useContext(wI)}function wj({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>nM(Or,async f=>{if(f){t(f);try{const g=$t(dt,"users",f.uid),y=await jo(g);if(y.exists())t(v=>({...v,...y.data()}));else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await z_(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await Or.signOut(),t(null)},refreshUser:async()=>{if(Or.currentUser){await Or.currentUser.reload();const d=Or.currentUser;let f={};try{const g=await jo($t(dt,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(wI.Provider,{value:u,children:!n&&r})}const xj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ej=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),tT=r=>{const e=Ej(r);return e.charAt(0).toUpperCase()+e.slice(1)},xI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),Tj=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Aj=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...Sj,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:xI("lucide",s),...!o&&!Tj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Pe=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(Aj,{ref:o,iconNode:e,className:xI(`lucide-${xj(tT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=tT(r),t};const Ij=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vm=Pe("activity",Ij);const Rj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cj=Pe("arrow-left",Rj);const Nj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],EI=Pe("arrow-right",Nj);const kj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Dj=Pe("brain",kj);const Oj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Mj=Pe("calendar-check",Oj);const Pj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],bo=Pe("camera",Pj);const jj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],TI=Pe("chevron-down",jj);const Vj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lj=Pe("chevron-right",Vj);const Uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],SI=Pe("circle-alert",Uj);const zj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cg=Pe("circle-check-big",zj);const Bj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fj=Pe("circle-check",Bj);const Hj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AI=Pe("clock",Hj);const qj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$j=Pe("file-text",qj);const Gj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Kj=Pe("globe",Gj);const Yj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Qj=Pe("grid-3x3",Yj);const Wj=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Xj=Pe("heart",Wj);const Jj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],II=Pe("house",Jj);const Zj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],RI=Pe("image",Zj);const eV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],CI=Pe("info",eV);const tV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],nV=Pe("leaf",tV);const rV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wo=Pe("loader-circle",rV);const iV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],nT=Pe("log-in",iV);const sV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],NI=Pe("log-out",sV);const aV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oV=Pe("mail",aV);const lV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],hh=Pe("message-circle",lV);const cV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],uV=Pe("mic",cV);const hV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kI=Pe("moon",hV);const dV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],rT=Pe("paperclip",dV);const fV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],mV=Pe("pause",fV);const gV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],DI=Pe("pen",gV);const pV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yV=Pe("play",pV);const _V=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vV=Pe("plus",_V);const bV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],OI=Pe("refresh-cw",bV);const wV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],MI=Pe("save",wV);const xV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],iT=Pe("scan-line",xV);const EV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],TV=Pe("search",EV);const SV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],dh=Pe("send",SV);const AV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],A0=Pe("share-2",AV);const IV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RV=Pe("shield-check",IV);const CV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],NV=Pe("sparkles",CV);const kV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],ni=Pe("sprout",kV);const DV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],sT=Pe("stethoscope",DV);const OV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],PI=Pe("sun",OV);const MV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],bm=Pe("trash-2",MV);const PV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],I0=Pe("triangle-alert",PV);const jV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],VV=Pe("user-plus",jV);const LV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wm=Pe("user",LV);const UV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zV=Pe("users",UV);const BV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],FV=Pe("wand-sparkles",BV);const HV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vo=Pe("x",HV);const qV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$V=Pe("zap",qV),jI=$.createContext(null),Ra=()=>$.useContext(jI),GV=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs(jI.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(cg,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(SI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(CI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(Vo,{className:"w-4 h-4"})})]},o.id))})]})};class VI extends MT.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(I0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(OI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(II,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function KV(){const{currentUser:r,logout:e}=si(),{t,i18n:n}=zn(),s=_r(),o=Sa(),{addToast:c}=Ra(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(E=>E==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const E=async()=>{try{await Lr($t(dt,"users",r.uid),{lastSeen:jr()})}catch(O){console.error("Presence update failed",O)}};E();const N=setInterval(E,60*1e3);return()=>clearInterval(N)},[r]),$.useEffect(()=>{if(!r)return;const E=gm(gs(dt,"chats"),pm("participants","array-contains",r.uid)),N=Ku(E,O=>{O.docChanges().forEach(V=>{if(V.type==="modified"){const q=V.doc.data(),U=q.updatedAt?.seconds*1e3;if(Date.now()-U>5e3)return;const H=q.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&H){const z=q.participantData?.[H]||{name:"Someone"};g.play().catch(M=>console.log("Audio play failed",M)),c(`New message from ${z.name}: ${q.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>N()},[r,s.pathname,c,g]);const w=[{path:"/",icon:II,label:t("app_name"),public:!0},{path:"/community",icon:zV,label:t("community"),public:!0},{path:"/analyses",icon:AI,label:t("analyses"),public:!1},{path:"/messages",icon:hh,label:t("messages"),public:!1},{path:"/profile",icon:wm,label:t("profile"),public:!1},{path:"/about",icon:CI,label:t("about"),public:!0}].filter(E=>E.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(Jr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(ni,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(E=>{const N=E.icon,O=s.pathname===E.path;return b.jsxs(Jr,{to:E.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${O?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(N,{className:"w-5 h-5"}),b.jsx("span",{children:E.label})]},E.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(PI,{className:"w-5 h-5"}):b.jsx(kI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(NI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(Jr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(nT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(Jr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(ni,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(VI,{children:b.jsx(JN,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(E=>{const N=E.icon,O=s.pathname===E.path;return b.jsxs(Jr,{to:E.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${O?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(N,{className:`w-6 h-6 ${O?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:E.label})]},E.path)}),!r&&b.jsxs(Jr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(nT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function YV(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=Sa(),w=_r(),{t:E}=zn(),{currentUser:N}=si(),{addToast:O}=Ra();if(N?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const U=await yx(Or,r,t);await $S(U.user),await Or.signOut(),O(E("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(U){console.error("Resend error:",U),U.code==="auth/too-many-requests"?O(E("too_many_requests")||"Too many attempts. Please wait.","error"):O(E("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},q=async U=>{U.preventDefault(),o(""),f(!1),u(!0);try{if(!(await yx(Or,r,t)).user.emailVerified){await Or.signOut(),f(!0);return}}catch(H){console.error(H);let K=E("login_failed")||"Failed to login.";H.code==="auth/user-not-found"||H.code==="auth/wrong-password"||H.code==="auth/invalid-credential"?K=E("invalid_credentials")||"Invalid email or password.":H.code==="auth/too-many-requests"?K=E("too_many_requests")||"Too many attempts. Try again later.":H.code==="auth/user-disabled"?K="Account disabled. Contact support.":H.code==="auth/network-request-failed"&&(K="Network error. Check your connection."),o(K)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(ni,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:E("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:E("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(ni,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:E("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:E("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":E("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:q,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":E("login"),!c&&b.jsx(EI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(Jr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:E("register")})]})]})})})}function QV({user:r,onClose:e,onVerified:t}){const{t:n}=zn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(oV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(OI,{className:"w-5 h-5 animate-spin"}):b.jsx(cg,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function WV(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),E=Sa(),N=_r(),{t:O}=zn(),V=async U=>{U.preventDefault(),u(""),f(!0);try{const H=await XO(Or,r,t);await ZO(H.user,{displayName:s}),await z_($t(dt,"users",H.user.uid),{uid:H.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:jr(),lastSeen:jr(),bio:""}),await $S(H.user),w(H.user),y(!0),f(!1)}catch(H){u(H.message),console.error(H),f(!1)}},q=async()=>{Or.currentUser&&await Or.currentUser.reload(),y(!1),N.state?.returnUrl&&N.state?.pendingResult?E(N.state.returnUrl,{replace:!0,state:{restoredResult:N.state.pendingResult,restoredImages:N.state.pendingImages,restoredPlantType:N.state.pendingPlantType}}):E("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(QV,{user:v,onClose:()=>y(!1),onVerified:q}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(ni,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:O("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:O("create_account_desc")||O("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:U=>o(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?O("creating_account")||"Creating Account...":O("register"),!d&&b.jsx(VV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[O("already_have_account")||"Already have an account?"," "," ",b.jsx(Jr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:O("login")})]})]})]})})}var aT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(aT||(aT={}));var oT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(oT||(oT={}));var lT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(lT||(lT={}));const cT=["user","model","function","system"];var uT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(uT||(uT={}));var hT;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var dT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(dT||(dT={}));var fT;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(fT||(fT={}));var Yu;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Yu||(Yu={}));var mT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(mT||(mT={}));var gT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(gT||(gT={}));var pT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(pT||(pT={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Fl extends Vn{constructor(e,t){super(e),this.response=t}}class LI extends Vn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class _a extends Vn{}class UI extends Vn{}const XV="https://generativelanguage.googleapis.com",JV="v1beta",ZV="0.24.1",eL="genai-js";var Lo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Lo||(Lo={}));class tL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||JV;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||XV}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function nL(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${eL}/${ZV}`),e.join(" ")}async function rL(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",nL(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new _a(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new _a(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new _a(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function iL(r,e,t,n,s,o){const c=new tL(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},lL(o)),{method:"POST",headers:await rL(c),body:s})}}async function Ph(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await iL(r,e,t,n,s,o);return sL(u,d,c)}async function sL(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){aL(s,r)}return n.ok||await oL(n,r),n}function aL(r,e){let t=r;throw t.name==="AbortError"?(t=new UI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof LI||r instanceof _a||(t=new Vn(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function oL(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new LI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function lL(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function H_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Fl(`${aa(r)}`,r);return cL(r)}else if(r.promptFeedback)throw new Fl(`Text not available. ${aa(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Fl(`${aa(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),yT(r)[0]}else if(r.promptFeedback)throw new Fl(`Function call not available. ${aa(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Fl(`${aa(r)}`,r);return yT(r)}else if(r.promptFeedback)throw new Fl(`Function call not available. ${aa(r)}`,r)},r}function cL(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function yT(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const uL=[Yu.RECITATION,Yu.SAFETY,Yu.LANGUAGE];function Vf(r){return!!r.finishReason&&uL.includes(r.finishReason)}function aa(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];Vf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function fh(r){return this instanceof fh?(this.v=r,this):new fh(r)}function hL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(E,N){o.push([v,w,E,N])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(E){y(o[0][3],E)}}function d(v){v.value instanceof fh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const _T=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function dL(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=gL(e),[n,s]=t.tee();return{stream:mL(n),response:fL(s)}}async function fL(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return H_(pL(e));e.push(s)}}function mL(r){return hL(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield fh(t.read());if(s)break;yield yield fh(H_(n))}})}function gL(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Vn("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(_T),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Vn(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(_T)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new UI("Request aborted when reading from the stream"):u=new Vn("Error reading from the stream"),u})}}})}function pL(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function zI(r,e,t,n){const s=await Ph(e,Lo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return dL(s)}async function BI(r,e,t,n){const o=await(await Ph(e,Lo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:H_(o)}}function FI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function mh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return yL(e)}function yL(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Vn("No content is provided for sending chat message.");return n?e:t}function _L(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new _a("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=mh(r);n.contents=[o]}return{generateContentRequest:n}}function vT(r){let e;return r.contents?e=r:e={contents:[mh(r)]},r.systemInstruction&&(e.systemInstruction=FI(r.systemInstruction)),e}function vL(r){return typeof r=="string"||Array.isArray(r)?{content:mh(r)}:r}const bT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],bL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function wL(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Vn(`First content should be with role 'user', got ${n}`);if(!cT.includes(n))throw new Vn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(cT)}`);if(!Array.isArray(s))throw new Vn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of bT)d in u&&(o[d]+=1);const c=bL[n];for(const u of bT)if(!c.includes(u)&&o[u]>0)throw new Vn(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function wT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const xT="SILENT_ERROR";class xL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(wL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=mh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>BI(this._apiKey,this.model,g,y)).then(w=>{var E;if(wT(w.response)){this._history.push(f);const N=Object.assign({parts:[],role:"model"},(E=w.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(N)}else{const N=aa(w.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=mh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=zI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(xT)}).then(w=>w.response).then(w=>{if(wT(w)){this._history.push(f);const E=Object.assign({},w.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=aa(w);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(w=>{w.message!==xT&&console.error(w)}),v}}async function EL(r,e,t,n){return(await Ph(e,Lo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function TL(r,e,t,n){return(await Ph(e,Lo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function SL(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Ph(e,Lo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class ET{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=FI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=vT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return BI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=vT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return zI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new xL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=_L(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return EL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=vL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return TL(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return SL(this.apiKey,this.model,e,n)}}class AL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ET(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new _a("Cached content must contain a `name` field.");if(!e.model)throw new _a("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new _a(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new ET(this.apiKey,o,n)}}async function HI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await IL(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function IL(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new AL(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const q=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:q,mimeType:"image/jpeg"}})});const O=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(O)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const qI="analyses";async function $I(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await og(gs(dt,qI),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:jr(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function GI(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=og(gs(dt,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:jr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function KI(r,e,t,n=null){try{return await og(gs(dt,qI,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:jr()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function YI(r){try{const e=$t(dt,"posts",r),t=await jo(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=$t(dt,"analyses",n.relatedAnalysisId);await Lr(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await gI(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function QI(r,e){try{const t=$t(dt,"posts",r),n=await jo(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await Lr(t,{likes:yI(e)}):await Lr(t,{likes:B_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function WI(r,e,t,n){try{const s=$t(dt,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await Lr(s,{comments:B_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function XI(r,e){try{const t=$t(dt,"posts",r);return await Lr(t,{...e,updatedAt:jr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function RL(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=$t(dt,"chats",o);return(await jo(c)).exists()?await Lr(c,{[`participantData.${r}`]:n}):await z_(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:jr(),updatedAt:jr(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function JI(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const CL=Object.freeze(Object.defineProperty({__proto__:null,addComment:WI,addFeedbackUpdate:KI,analyzePlantProgress:JI,createPost:GI,deletePost:YI,saveAnalysis:$I,startChat:RL,toggleLike:QI,updatePost:XI},Symbol.toStringTag,{value:"Module"}));function NL({result:r,onReset:e}){const{t}=zn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(I0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(vm,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(ni,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(I0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(cg,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function kL({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=zn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,E=s.current;E.width=w.videoWidth,E.height=w.videoHeight,E.getContext("2d").drawImage(w,0,0,E.width,E.height);const O=E.toDataURL("image/jpeg",.9);t(O),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Vo,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(SI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function DL(){const{t:r,i18n:e}=zn(),{currentUser:t}=si(),n=Sa(),s=_r(),{addToast:o}=Ra(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,E]=$.useState(!1),[N,O]=$.useState(null),[V,q]=$.useState(!1),[U,H]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(O(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const K=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},M=()=>{c.current&&(c.current.value="",c.current.click())},S=ee=>{ee&&R(ee),H(!1)},T=async ee=>{const F=ee.target.files?.[0];if(!F)return;const Y=new FileReader;Y.onloadend=()=>{const J=Y.result;R(J)},Y.readAsDataURL(F)},R=async ee=>{u==="capture_main"?(v(F=>({...F,main:ee})),await k(ee)):u==="capture_macro"&&(v(F=>({...F,macro:ee})),await k([y.main,ee]))},k=async(ee,F)=>{E(!0),d("analyzing"),q(!1);try{const Y=await HI(ee,e.language,f);if(Y.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Y.status==="error")throw new Error(Y.error);O(Y),d("result")}}catch(Y){console.error(Y);let J=Y.message||r("error_diagnosis_failed")||"Diagnosis failed.";J.includes("NOT_PLANT")?J=r("error_not_plant"):(J.includes("503")||J.includes("overloaded"))&&(J=r("error_server_busy")),o(J,"error"),d("capture_main")}finally{E(!1)}},j=async()=>{if(t&&!V)try{const ee=await $I(t.uid,f,y,N);q(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ee}})},500)}catch(ee){console.error("Manual save failed:",ee),o((r("save_fail")||"Failed to save analysis:")+" "+ee.message,"error")}},C=()=>{n("/login",{state:{pendingResult:N,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),O(null),q(!1),d("input_type"),c.current&&(c.current.value="")},te=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(NV,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(bo,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:$V,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:Dj,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:RV,color:"from-green-400 to-emerald-500"}].map((ee,F)=>{const Y=ee.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${ee.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Y,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:ee.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:ee.desc})]},F)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(vm,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(iT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:ee=>{ee.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(ni,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(ni,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:ee=>g(ee.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:K,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(EI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),D=ee=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ee?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>H(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(bo,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:M,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(RI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),Z=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(wo,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:j,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(cg,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(MI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:N?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(NL,{result:N,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(iT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:C,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:T,className:"hidden"}),b.jsx(kL,{isOpen:U,onClose:()=>H(!1),onCapture:S}),u==="landing"?te():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&D(!1),u==="capture_macro"&&D(!0),u==="analyzing"&&Z(),u==="result"&&W()]})]})}const yf=43200,TT=1440,ST=Symbol.for("constructDateFrom");function q_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&ST in r?r[ST](e):r instanceof Date?new r.constructor(e):new Date(e)}function Ta(r,e){return q_(r,r)}let OL={};function ML(){return OL}function AT(r){const e=Ta(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function $_(r,...e){const t=q_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function Lf(r,e){const t=+Ta(r)-+Ta(e);return t<0?-1:t>0?1:t}function PL(r){return q_(r,Date.now())}function jL(r,e,t){const[n,s]=$_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function VL(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function LL(r,e){return+Ta(r)-+Ta(e)}function UL(r,e){const t=Ta(r);return t.setHours(23,59,59,999),t}function zL(r,e){const t=Ta(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function BL(r,e){const t=Ta(r);return+UL(t)==+zL(t)}function FL(r,e,t){const[n,s,o]=$_(t?.in,r,r,e),c=Lf(s,o),u=Math.abs(jL(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=Lf(s,o)===-c;BL(n)&&u===1&&Lf(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function HL(r,e,t){const n=LL(r,e)/1e3;return VL(t?.roundingMethod)(n)}const qL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$L=(r,e,t)=>{let n;const s=qL[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function ec(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const GL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QL={date:ec({formats:GL,defaultWidth:"full"}),time:ec({formats:KL,defaultWidth:"full"}),dateTime:ec({formats:YL,defaultWidth:"full"})},WL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XL=(r,e,t,n)=>WL[r];function Ai(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const JL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},iU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},sU={ordinalNumber:iU,era:Ai({values:JL,defaultWidth:"wide"}),quarter:Ai({values:ZL,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ai({values:eU,defaultWidth:"wide"}),day:Ai({values:tU,defaultWidth:"wide"}),dayPeriod:Ai({values:nU,defaultWidth:"wide",formattingValues:rU,defaultFormattingWidth:"wide"})};function Ii(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?oU(u,y=>y.test(c)):aU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function aU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function oU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function ZI(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const lU=/^(\d+)(th|st|nd|rd)?/i,cU=/\d+/i,uU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hU={any:[/^b/i,/^(a|c)/i]},dU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fU={any:[/1/i,/2/i,/3/i,/4/i]},mU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_U={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bU={ordinalNumber:ZI({matchPattern:lU,parsePattern:cU,valueCallback:r=>parseInt(r,10)}),era:Ii({matchPatterns:uU,defaultMatchWidth:"wide",parsePatterns:hU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:dU,defaultMatchWidth:"wide",parsePatterns:fU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:mU,defaultMatchWidth:"wide",parsePatterns:gU,defaultParseWidth:"any"}),day:Ii({matchPatterns:pU,defaultMatchWidth:"wide",parsePatterns:yU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:_U,defaultMatchWidth:"any",parsePatterns:vU,defaultParseWidth:"any"})},ug={code:"en-US",formatDistance:$L,formatLong:QL,formatRelative:XL,localize:sU,match:bU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wU(r,e,t){const n=ML(),s=t?.locale??n.locale??ug,o=2520,c=Lf(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=$_(t?.in,...c>0?[e,r]:[r,e]),g=HL(f,d),y=(AT(f)-AT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<TT){const E=Math.round(v/60);return s.formatDistance("aboutXHours",E,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<yf){const E=Math.round(v/TT);return s.formatDistance("xDays",E,u)}else if(v<yf*2)return w=Math.round(v/yf),s.formatDistance("aboutXMonths",w,u)}if(w=FL(f,d),w<12){const E=Math.round(v/yf);return s.formatDistance("xMonths",E,u)}else{const E=w%12,N=Math.trunc(w/12);return E<3?s.formatDistance("aboutXYears",N,u):E<9?s.formatDistance("overXYears",N,u):s.formatDistance("almostXYears",N+1,u)}}function G_(r,e){return wU(r,PL(r),e)}const xU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},EU=(r,e,t)=>{let n;const s=xU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},TU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},SU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},AU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IU={date:ec({formats:TU,defaultWidth:"full"}),time:ec({formats:SU,defaultWidth:"full"}),dateTime:ec({formats:AU,defaultWidth:"full"})},RU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},CU=(r,e,t,n)=>RU[r],NU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},kU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},DU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},OU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},MU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},PU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},jU=(r,e)=>Number(r)+".",VU={ordinalNumber:jU,era:Ai({values:NU,defaultWidth:"wide"}),quarter:Ai({values:kU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ai({values:DU,defaultWidth:"wide"}),day:Ai({values:OU,defaultWidth:"wide"}),dayPeriod:Ai({values:MU,defaultWidth:"wide",formattingValues:PU,defaultFormattingWidth:"wide"})},LU=/^(\d+)(\.)?/i,UU=/\d+/i,zU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},BU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},FU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},HU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},qU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},$U={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},GU={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},KU={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},YU={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},QU={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},WU={ordinalNumber:ZI({matchPattern:LU,parsePattern:UU,valueCallback:function(r){return parseInt(r,10)}}),era:Ii({matchPatterns:zU,defaultMatchWidth:"wide",parsePatterns:BU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:FU,defaultMatchWidth:"wide",parsePatterns:HU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:qU,defaultMatchWidth:"wide",parsePatterns:$U,defaultParseWidth:"any"}),day:Ii({matchPatterns:GU,defaultMatchWidth:"wide",parsePatterns:KU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:YU,defaultMatchWidth:"any",parsePatterns:QU,defaultParseWidth:"any"})},K_={code:"tr",formatDistance:EU,formatLong:IU,formatRelative:CU,localize:VU,match:WU,options:{weekStartsOn:1,firstWeekContainsDate:1}};function eR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=zn(),{currentUser:o}=si(),c=s.language==="tr"?K_:ug,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,E]=$.useState(!1),[N,O]=$.useState(r?.content||""),V=async()=>{try{await XI(r.id,{content:N}),E(!1)}catch{alert("Failed to update post")}};if(!r)return null;const q=o?.uid===r.userId,U=r.likes&&o&&r.likes.includes(o.uid),H=r.likes?r.likes.length:0,K=r.comments?r.comments.length:0,[z,M]=$.useState("");$.useEffect(()=>{const C=()=>{if(!r.createdAt?.seconds){M(n("just_now")||"Just now");return}const te=new Date(r.createdAt.seconds*1e3);(new Date-te)/(1e3*60*60)>24?M(te.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):M(G_(te,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const G=setInterval(C,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const S=async()=>{if(!(!o||y)){v(!0);try{await QI(r.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},T=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await YI(r.id)}catch{alert("Failed to delete post")}},R=async C=>{if(C.preventDefault(),!(!u.trim()||!o))try{await WI(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},k=async()=>{const C={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(C)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},j=C=>!C||C==="Unknown"?null:C.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${C.toLowerCase()}`)||n(C)||C;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[q&&b.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(bm,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:q&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:z})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:j(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(hh,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 transition-colors ${U?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(Xj,{className:`w-5 h-5 ${U?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:H||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(hh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:K||n("comment")})]}),q&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>E(!0),children:[b.jsx(DI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:k,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(A0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:N,onChange:C=>O(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((C,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(dh,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const My=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function XU(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function tR(r,e){return new Promise((function(t,n){let s;return JU(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const JU=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var xm={},ZU={get exports(){return xm},set exports(r){xm=r}};(function(r){var e,t,n={};ZU.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),E=u(g,d+=4);d+=4,d=E;for(var N=0;N<v;N++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var O=u(g,d+=4),V=c(g,d+=4),q=c(g,d+2),U=c(g,d+4);d+=6;var H=u(g,d+=8);d+=4,d+=V+q+U,n._readLocal(g,H,f,w,O,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),E=g(s,o+=2);o+=2;var N=n.bin.readUTF8(s,o,w);if(o+=w,o+=E,f)c[N]={size:d,csize:u};else{var O=new Uint8Array(s.buffer,o);if(v==0)c[N]=new Uint8Array(O.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(O,V),c[N]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var E=new Uint8Array(c),N=0,O=[];for(var g in f){var V=f[g];O.push(N),N=n._writeHeader(E,N,g,V,0)}var q=0,U=N;for(var g in f)V=f[g],O.push(N),N=n._writeHeader(E,N,g,V,1,O[q++]);var H=N-U;return u(E,N,101010256),N+=4,d(E,N+=4,q),d(E,N+=2,q),u(E,N+=2,H),u(E,N+=4,U),N+=4,N+=2,E.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,E=0,N=s.length;if(u==0){for(;v<N;)y(o,w,v+(k=Math.min(65535,N-v))==N?1:0),w=n.F._copyExact(s,v,k,o,w+8),v+=k;return w>>>3}var O=f.lits,V=f.strt,q=f.prev,U=0,H=0,K=0,z=0,M=0,S=0;for(N>2&&(V[S=n.F._hash(s,0)]=0),v=0;v<N;v++){if(M=S,v+1<N-2){S=n.F._hash(s,v+1);var T=v+1&32767;q[T]=V[S],V[S]=T}if(E<=v){(U>14e3||H>26697)&&N-v>100&&(E<v&&(O[U]=v-E,U+=2,E=v),w=n.F._writeBlock(v==N-1||E==N?1:0,O,U,z,s,K,v-K,o,w),U=H=z=0,K=v);var R=0;v<N-2&&(R=n.F._bestMatch(s,v,q,M,Math.min(d[2],N-v),d[3]));var k=R>>>16,j=65535&R;if(R!=0){j=65535&R;var C=g(k=R>>>16,f.of0);f.lhst[257+C]++;var G=g(j,f.df0);f.dhst[G]++,z+=f.exb[C]+f.dxb[G],O[U]=k<<23|v-E,O[U+1]=j<<16|C<<8|G,U+=2,E=v+k}else f.lhst[s[v]]++;H++}}for(K==v&&s.length!=0||(E<v&&(O[U]=v-E,U+=2,E=v),w=n.F._writeBlock(1,O,U,z,s,K,v-K,o,w),U=0,H=0,U=H=z=0,K=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,E=0,N=Math.min(32767,o);v<=N&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var O=n.F._howLong(s,o,v);if(O>w){if(E=v,(w=O)>=d)break;v+2<O&&(O=v+2);for(var V=0,q=0;q<O-2;q++){var U=o-v+q+32768&32767,H=U-c[U]+32768&32767;H>V&&(V=H,y=U)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|E},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,E,N,O,V,q,U,H,K,z=n.F.U,M=n.F._putsF,S=n.F._putsE;z.lhst[256]++,E=(w=n.F.getTrees())[0],N=w[1],O=w[2],V=w[3],q=w[4],U=w[5],H=w[6],K=w[7];var T=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),R=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),k=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);k+=14+3*U+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var j=0;j<286;j++)z.lhst[j]=0;for(j=0;j<30;j++)z.dhst[j]=0;for(j=0;j<19;j++)z.ihst[j]=0;var C=T<R&&T<k?0:R<k?1:2;if(M(y,v,s),M(y,v+1,C),v+=3,C==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,te;if(C==1&&(G=z.fltree,te=z.fdtree),C==2){n.F.makeCodes(z.ltree,E),n.F.revCodes(z.ltree,E),n.F.makeCodes(z.dtree,N),n.F.revCodes(z.dtree,N),n.F.makeCodes(z.itree,O),n.F.revCodes(z.itree,O),G=z.ltree,te=z.dtree,S(y,v,V-257),S(y,v+=5,q-1),S(y,v+=5,U-4),v+=4;for(var P=0;P<U;P++)S(y,v+3*P,z.itree[1+(z.ordr[P]<<1)]);v+=3*U,v=n.F._codeTiny(H,z.itree,y,v),v=n.F._codeTiny(K,z.itree,y,v)}for(var D=f,Z=0;Z<c;Z+=2){for(var W=o[Z],ee=W>>>23,F=D+(8388607&W);D<F;)v=n.F._writeLit(d[D++],G,y,v);if(ee!=0){var Y=o[Z+1],J=Y>>16,ie=Y>>8&255,re=255&Y;S(y,v=n.F._writeLit(257+ie,G,y,v),ee-z.of0[ie]),v+=z.exb[ie],M(y,v=n.F._writeLit(re,te,y,v),J-z.df0[re]),v+=z.dxb[re],D+=ee}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(H,K){return H.f-K.f}));var E=u[0],N=u[1],O=0,V=1,q=2;for(u[0]={lit:-1,f:E.f+N.f,l:E,r:N,d:0};V!=y-1;)E=O!=V&&(q==y||u[O].f<u[q].f)?u[O++]:u[q++],N=O!=V&&(q==y||u[O].f<u[q].f)?u[O++]:u[q++],u[V++]={lit:-1,f:E.f+N.f,l:E,r:N};var U=n.F.setDepth(u[V-1],0);for(U>c&&(n.F.restrictDepth(v,c,U),U=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return U},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,E=u.U,N=o==null;N&&(o=new c(s.length>>>2<<3));for(var O,V,q=0,U=0,H=0,K=0,z=0,M=0,S=0,T=0,R=0;q==0;)if(q=d(s,R,1),U=d(s,R+1,2),R+=3,U!=0){if(N&&(o=n.F._check(o,T+(1<<17))),U==1&&(O=E.flmap,V=E.fdmap,M=511,S=31),U==2){H=f(s,R,5)+257,K=f(s,R+5,5)+1,z=f(s,R+10,4)+4,R+=14;for(var k=0;k<38;k+=2)E.itree[k]=0,E.itree[k+1]=0;var j=1;for(k=0;k<z;k++){var C=f(s,R+3*k,3);E.itree[1+(E.ordr[k]<<1)]=C,C>j&&(j=C)}R+=3*z,y(E.itree,j),v(E.itree,j,E.imap),O=E.lmap,V=E.dmap,R=g(E.imap,(1<<j)-1,H+K,s,R,E.ttree);var G=u._copyOut(E.ttree,0,H,E.ltree);M=(1<<G)-1;var te=u._copyOut(E.ttree,H,K,E.dtree);S=(1<<te)-1,y(E.ltree,G),v(E.ltree,G,O),y(E.dtree,te),v(E.dtree,te,V)}for(;;){var P=O[w(s,R)&M];R+=15&P;var D=P>>>4;if(!(D>>>8))o[T++]=D;else{if(D==256)break;var Z=T+D-254;if(D>264){var W=E.ldef[D-257];Z=T+(W>>>3)+f(s,R,7&W),R+=7&W}var ee=V[w(s,R)&S];R+=15&ee;var F=ee>>>4,Y=E.ddef[F],J=(Y>>>4)+d(s,R,15&Y);for(R+=15&Y,N&&(o=n.F._check(o,T+(1<<17)));T<Z;)o[T]=o[T++-J],o[T]=o[T++-J],o[T]=o[T++-J],o[T]=o[T++-J];T=Z}}}else{(7&R)!=0&&(R+=8-(7&R));var ie=4+(R>>>3),re=s[ie-4]|s[ie-3]<<8;N&&(o=n.F._check(o,T+re)),o.set(new c(s.buffer,s.byteOffset+ie,re),T),R=ie+re<<3,T+=re}return o.length==T?o:o.slice(0,T)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var E=w>>>4;if(E<=15)f[v]=E,v++;else{var N=0,O=0;E==16?(O=3+g(u,d,2),d+=2,N=f[v-1]):E==17?(O=3+g(u,d,3),d+=3):E==18&&(O=11+g(u,d,7),d+=7);for(var V=v+O;v<V;)f[v]=N,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var E=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,E[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=E[f],E[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,E=s[f]<<w,N=E+(1<<w);E!=N;)c[d[E]>>>15-o]=v,E++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var e9=XU({__proto__:null,default:xm},[xm]);const Wr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let E=0;E<v;E++)w+=String.fromCharCode(g[y+E]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let E=0;E<v;E++)w.push(g[y+E]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,E="";for(let N=0;N<v;N++)E+=`%${r.pad(g[y+N].toString(16))}`;try{w=decodeURIComponent(E)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const E=y*v,N=o(w),O=Math.ceil(y*N/8),V=new Uint8Array(4*E),q=new Uint32Array(V.buffer),{ctype:U}=w,{depth:H}=w,K=r.readUshort;if(U==6){const W=E<<2;if(H==8)for(var z=0;z<W;z+=4)V[z]=g[z],V[z+1]=g[z+1],V[z+2]=g[z+2],V[z+3]=g[z+3];if(H==16)for(z=0;z<W;z++)V[z]=g[z<<1]}else if(U==2){const W=w.tabs.tRNS;if(W==null){if(H==8)for(z=0;z<E;z++){var M=3*z;q[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M]}if(H==16)for(z=0;z<E;z++)M=6*z,q[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M]}else{var S=W[0];const ee=W[1],F=W[2];if(H==8)for(z=0;z<E;z++){var T=z<<2;M=3*z,q[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M],g[M]==S&&g[M+1]==ee&&g[M+2]==F&&(V[T+3]=0)}if(H==16)for(z=0;z<E;z++)T=z<<2,M=6*z,q[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M],K(g,M)==S&&K(g,M+2)==ee&&K(g,M+4)==F&&(V[T+3]=0)}}else if(U==3){const W=w.tabs.PLTE,ee=w.tabs.tRNS,F=ee?ee.length:0;if(H==1)for(var R=0;R<v;R++){var k=R*O,j=R*y;for(z=0;z<y;z++){T=j+z<<2;var C=3*(G=g[k+(z>>3)]>>7-((7&z)<<0)&1);V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255}}if(H==2)for(R=0;R<v;R++)for(k=R*O,j=R*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[k+(z>>2)]>>6-((3&z)<<1)&3),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255;if(H==4)for(R=0;R<v;R++)for(k=R*O,j=R*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[k+(z>>1)]>>4-((1&z)<<2)&15),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255;if(H==8)for(z=0;z<E;z++){var G;T=z<<2,C=3*(G=g[z]),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255}}else if(U==4){if(H==8)for(z=0;z<E;z++){T=z<<2;var te=g[P=z<<1];V[T]=te,V[T+1]=te,V[T+2]=te,V[T+3]=g[P+1]}if(H==16)for(z=0;z<E;z++){var P;T=z<<2,te=g[P=z<<2],V[T]=te,V[T+1]=te,V[T+2]=te,V[T+3]=g[P+2]}}else if(U==0)for(S=w.tabs.tRNS?w.tabs.tRNS:-1,R=0;R<v;R++){const W=R*O,ee=R*y;if(H==1)for(var D=0;D<y;D++){var Z=(te=255*(g[W+(D>>>3)]>>>7-(7&D)&1))==255*S?0:255;q[ee+D]=Z<<24|te<<16|te<<8|te}else if(H==2)for(D=0;D<y;D++)Z=(te=85*(g[W+(D>>>2)]>>>6-((3&D)<<1)&3))==85*S?0:255,q[ee+D]=Z<<24|te<<16|te<<8|te;else if(H==4)for(D=0;D<y;D++)Z=(te=17*(g[W+(D>>>1)]>>>4-((1&D)<<2)&15))==17*S?0:255,q[ee+D]=Z<<24|te<<16|te<<8|te;else if(H==8)for(D=0;D<y;D++)Z=(te=g[W+D])==S?0:255,q[ee+D]=Z<<24|te<<16|te<<8|te;else if(H==16)for(D=0;D<y;D++)te=g[W+(D<<1)],Z=K(g,W+(D<<1))==S?0:255,q[ee+D]=Z<<24|te<<16|te<<8|te}return V}function t(g,y,v,w){const E=o(g),N=Math.ceil(v*E/8),O=new Uint8Array((N+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,O):n(y,O),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(q,U){const H=U.width,K=U.height,z=o(U),M=z>>3,S=Math.ceil(H*z/8),T=new Uint8Array(K*S);let R=0;const k=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let te=0;for(;te<7;){const D=C[te],Z=G[te];let W=0,ee=0,F=k[te];for(;F<K;)F+=D,ee++;let Y=j[te];for(;Y<H;)Y+=Z,W++;const J=Math.ceil(W*z/8);c(q,U,R,W,ee);let ie=0,re=k[te];for(;re<K;){let _e=j[te],Se=R+ie*J<<3;for(;_e<H;){var P;if(z==1&&(P=(P=q[Se>>3])>>7-(7&Se)&1,T[re*S+(_e>>3)]|=P<<7-((7&_e)<<0)),z==2&&(P=(P=q[Se>>3])>>6-(7&Se)&3,T[re*S+(_e>>2)]|=P<<6-((3&_e)<<1)),z==4&&(P=(P=q[Se>>3])>>4-(7&Se)&15,T[re*S+(_e>>1)]|=P<<4-((1&_e)<<2)),z>=8){const De=re*S+_e*M;for(let Re=0;Re<M;Re++)T[De+Re]=q[(Se>>3)+Re]}Se+=z,_e+=Z}ie++,re+=D}W*ee!=0&&(R+=ee*(1+J)),te+=1}return T})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let E,N,O=0,V=0,q=0,U=0,H=0,K=0,z=0,M=0,S=0;if(y[0]==3&&y[1]==0)return v||new w(0);const T=g.H,R=T.b,k=T.e,j=T.R,C=T.n,G=T.A,te=T.Z,P=T.m,D=v==null;for(D&&(v=new w(y.length>>>2<<5));O==0;)if(O=R(y,S,1),V=R(y,S+1,2),S+=3,V!=0){if(D&&(v=g.H.W(v,M+(1<<17))),V==1&&(E=P.J,N=P.h,K=511,z=31),V==2){q=k(y,S,5)+257,U=k(y,S+5,5)+1,H=k(y,S+10,4)+4,S+=14;let W=1;for(var Z=0;Z<38;Z+=2)P.Q[Z]=0,P.Q[Z+1]=0;for(Z=0;Z<H;Z++){const Y=k(y,S+3*Z,3);P.Q[1+(P.X[Z]<<1)]=Y,Y>W&&(W=Y)}S+=3*H,C(P.Q,W),G(P.Q,W,P.u),E=P.w,N=P.d,S=j(P.u,(1<<W)-1,q+U,y,S,P.v);const ee=T.V(P.v,0,q,P.C);K=(1<<ee)-1;const F=T.V(P.v,q,U,P.D);z=(1<<F)-1,C(P.C,ee),G(P.C,ee,E),C(P.D,F),G(P.D,F,N)}for(;;){const W=E[te(y,S)&K];S+=15&W;const ee=W>>>4;if(!(ee>>>8))v[M++]=ee;else{if(ee==256)break;{let F=M+ee-254;if(ee>264){const _e=P.q[ee-257];F=M+(_e>>>3)+k(y,S,7&_e),S+=7&_e}const Y=N[te(y,S)&z];S+=15&Y;const J=Y>>>4,ie=P.c[J],re=(ie>>>4)+R(y,S,15&ie);for(S+=15&ie;M<F;)v[M]=v[M++-re],v[M]=v[M++-re],v[M]=v[M++-re],v[M]=v[M++-re];M=F}}}}else{(7&S)!=0&&(S+=8-(7&S));const W=4+(S>>>3),ee=y[W-4]|y[W-3]<<8;D&&(v=g.H.W(v,M+ee)),v.set(new w(y.buffer,y.byteOffset+W,ee),M),S=W+ee<<3,M+=ee}return v.length==M?v:v.slice(0,M)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const E=new Uint8Array(w<<1);return E.set(y,0),E},g.H.R=function(y,v,w,E,N,O){const V=g.H.e,q=g.H.Z;let U=0;for(;U<w;){const H=y[q(E,N)&v];N+=15&H;const K=H>>>4;if(K<=15)O[U]=K,U++;else{let z=0,M=0;K==16?(M=3+V(E,N,2),N+=2,z=O[U-1]):K==17?(M=3+V(E,N,3),N+=3):K==18&&(M=11+V(E,N,7),N+=7);const S=U+M;for(;U<S;)O[U]=z,U++}}return N},g.H.V=function(y,v,w,E){let N=0,O=0;const V=E.length>>>1;for(;O<w;){const q=y[O+v];E[O<<1]=0,E[1+(O<<1)]=q,q>N&&(N=q),O++}for(;O<V;)E[O<<1]=0,E[1+(O<<1)]=0,O++;return N},g.H.n=function(y,v){const w=g.H.m,E=y.length;let N,O,V,q;const U=w.j;for(var H=0;H<=v;H++)U[H]=0;for(H=1;H<E;H+=2)U[y[H]]++;const K=w.K;for(N=0,U[0]=0,O=1;O<=v;O++)N=N+U[O-1]<<1,K[O]=N;for(V=0;V<E;V+=2)q=y[V+1],q!=0&&(y[V]=K[q],K[q]++)},g.H.A=function(y,v,w){const E=y.length,N=g.H.m.r;for(let O=0;O<E;O+=2)if(y[O+1]!=0){const V=O>>1,q=y[O+1],U=V<<4|q,H=v-q;let K=y[O]<<H;const z=K+(1<<H);for(;K!=z;)w[N[K]>>>15-v]=U,K++}},g.H.l=function(y,v){const w=g.H.m.r,E=15-v;for(let N=0;N<y.length;N+=2){const O=y[N]<<v-y[N+1];y[N]=w[O]>>>E}},g.H.M=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8,y[E+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let E=v;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,y.r[v]=(E>>>16|E<<16)>>>17}function w(E,N,O){for(;N--!=0;)E.push(0,O)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,E){let N=o(y);const O=Math.ceil(w*N/8);let V,q;N=Math.ceil(N/8);let U=g[v],H=0;if(U>1&&(g[v]=[0,0,1][U-2]),U==3)for(H=N;H<O;H++)g[H+1]=g[H+1]+(g[H+1-N]>>>1)&255;for(let K=0;K<E;K++)if(V=v+K*O,q=V+K+1,U=g[q-1],H=0,U==0)for(;H<O;H++)g[V+H]=g[q+H];else if(U==1){for(;H<N;H++)g[V+H]=g[q+H];for(;H<O;H++)g[V+H]=g[q+H]+g[V+H-N]}else if(U==2)for(;H<O;H++)g[V+H]=g[q+H]+g[V+H-O];else if(U==3){for(;H<N;H++)g[V+H]=g[q+H]+(g[V+H-O]>>>1);for(;H<O;H++)g[V+H]=g[q+H]+(g[V+H-O]+g[V+H-N]>>>1)}else{for(;H<N;H++)g[V+H]=g[q+H]+u(0,g[V+H-O],0);for(;H<O;H++)g[V+H]=g[q+H]+u(g[V+H-N],g[V+H-O],g[V+H-N-O])}return g}function u(g,y,v){const w=g+y-v,E=w-g,N=w-y,O=w-v;return E*E<=N*N&&E*E<=O*O?g:N*N<=O*O?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,E,N,O,V,q){const U=Math.min(y,E),H=Math.min(v,N);let K=0,z=0;for(let te=0;te<H;te++)for(let P=0;P<U;P++)if(O>=0&&V>=0?(K=te*y+P<<2,z=(V+te)*E+O+P<<2):(K=(-V+te)*y-O+P<<2,z=te*E+P<<2),q==0)w[z]=g[K],w[z+1]=g[K+1],w[z+2]=g[K+2],w[z+3]=g[K+3];else if(q==1){var M=g[K+3]*.00392156862745098,S=g[K]*M,T=g[K+1]*M,R=g[K+2]*M,k=w[z+3]*(1/255),j=w[z]*k,C=w[z+1]*k,G=w[z+2]*k;const D=1-M,Z=M+k*D,W=Z==0?0:1/Z;w[z+3]=255*Z,w[z+0]=(S+j*D)*W,w[z+1]=(T+C*D)*W,w[z+2]=(R+G*D)*W}else if(q==2)M=g[K+3],S=g[K],T=g[K+1],R=g[K+2],k=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==k&&S==j&&T==C&&R==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=S,w[z+1]=T,w[z+2]=R,w[z+3]=M);else if(q==3){if(M=g[K+3],S=g[K],T=g[K+1],R=g[K+2],k=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==k&&S==j&&T==C&&R==G)continue;if(M<220&&k>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const E=r,N=E.readUshort,O=E.readUint,V={tabs:{},frames:[]},q=new Uint8Array(v.length);let U,H=0,K=0;const z=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(v[M]!=z[M])throw"The input is not a PNG file!";for(;w<v.length;){const te=E.readUint(v,w);w+=4;const P=E.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,V);else if(P=="iCCP"){for(var S=w;v[S]!=0;)S++;E.readASCII(v,w,S-w),v[S+1];const D=v.slice(S+2,w+te);let Z=null;try{Z=n(D)}catch{Z=s(D)}V.tabs[P]=Z}else if(P=="CgBI")V.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(M=0;M<te;M++)q[H+M]=v[w+M];H+=te}else if(P=="acTL")V.tabs[P]={num_frames:O(v,w),num_plays:O(v,w+4)},U=new Uint8Array(v.length);else if(P=="fcTL"){K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height),K=0);const D={x:O(v,w+12),y:O(v,w+16),width:O(v,w+4),height:O(v,w+8)};let Z=N(v,w+22);Z=N(v,w+20)/(Z==0?100:Z);const W={rect:D,delay:Math.round(1e3*Z),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(P=="fdAT"){for(M=0;M<te-4;M++)U[K+M]=v[w+M+4];K+=te-4}else if(P=="pHYs")V.tabs[P]=[E.readUint(v,w),E.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(V.tabs[P]=[],M=0;M<8;M++)V.tabs[P].push(E.readUint(v,w+4*M));else if(P=="tEXt"||P=="zTXt"){V.tabs[P]==null&&(V.tabs[P]={});var T=E.nextZero(v,w),R=E.readASCII(v,w,T-w),k=w+te-T-1;if(P=="tEXt")C=E.readASCII(v,T+1,k);else{var j=n(v.slice(T+2,T+2+k));C=E.readUTF8(j,0,j.length)}V.tabs[P][R]=C}else if(P=="iTXt"){V.tabs[P]==null&&(V.tabs[P]={}),T=0,S=w,T=E.nextZero(v,S),R=E.readASCII(v,S,T-S);const D=v[S=T+1];var C;v[S+1],S+=2,T=E.nextZero(v,S),E.readASCII(v,S,T-S),S=T+1,T=E.nextZero(v,S),E.readUTF8(v,S,T-S),k=te-((S=T+1)-w),D==0?C=E.readUTF8(v,S,k):(j=n(v.slice(S,S+k)),C=E.readUTF8(j,0,j.length)),V.tabs[P][R]=C}else if(P=="PLTE")V.tabs[P]=E.readBytes(v,w,te);else if(P=="hIST"){const D=V.tabs.PLTE.length/3;for(V.tabs[P]=[],M=0;M<D;M++)V.tabs[P].push(N(v,w+2*M))}else if(P=="tRNS")V.ctype==3?V.tabs[P]=E.readBytes(v,w,te):V.ctype==0?V.tabs[P]=N(v,w):V.ctype==2&&(V.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]);else if(P=="gAMA")V.tabs[P]=E.readUint(v,w)/1e5;else if(P=="sRGB")V.tabs[P]=v[w];else if(P=="bKGD")V.ctype==0||V.ctype==4?V.tabs[P]=[N(v,w)]:V.ctype==2||V.ctype==6?V.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]:V.ctype==3&&(V.tabs[P]=v[w]);else if(P=="IEND")break;w+=te,E.readUint(v,w),w+=4}var G;return K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height)),V.data=t(V,q,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const E=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const N=v*w*4,O=new Uint8Array(N),V=new Uint8Array(N),q=new Uint8Array(N);for(let H=0;H<y.frames.length;H++){const K=y.frames[H],z=K.rect.x,M=K.rect.y,S=K.rect.width,T=K.rect.height,R=e(K.data,S,T,y);if(H!=0)for(var U=0;U<N;U++)q[U]=O[U];if(K.blend==0?f(R,S,T,O,v,w,z,M,0):K.blend==1&&f(R,S,T,O,v,w,z,M,1),E.push(O.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)f(V,S,T,O,v,w,z,M,0);else if(K.dispose==2)for(U=0;U<N;U++)O[U]=q[U]}}return E},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Wr,{_bin:e}=Wr,t=Wr._paeth;var n={table:(function(){const S=new Uint32Array(256);for(let T=0;T<256;T++){let R=T;for(let k=0;k<8;k++)1&R?R=3988292384^R>>>1:R>>>=1;S[T]=R}return S})(),update(S,T,R,k){for(let j=0;j<k;j++)S=n.table[255&(S^T[R+j])]^S>>>8;return S},crc:(S,T,R)=>4294967295^n.update(4294967295,S,T,R)};function s(S,T,R,k){T[R]+=S[0]*k>>4,T[R+1]+=S[1]*k>>4,T[R+2]+=S[2]*k>>4,T[R+3]+=S[3]*k>>4}function o(S){return Math.max(0,Math.min(255,S))}function c(S,T){const R=S[0]-T[0],k=S[1]-T[1],j=S[2]-T[2],C=S[3]-T[3];return R*R+k*k+j*j+C*C}function u(S,T,R,k,j,C,G){G==null&&(G=1);const te=k.length,P=[];for(var D=0;D<te;D++){const re=k[D];P.push([re>>>0&255,re>>>8&255,re>>>16&255,re>>>24&255])}for(D=0;D<te;D++){let re=4294967295;for(var Z=0,W=0;W<te;W++){var ee=c(P[D],P[W]);W!=D&&ee<re&&(re=ee,Z=W)}}const F=new Uint32Array(j.buffer),Y=new Int16Array(T*R*4),J=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(D=0;D<J.length;D++)J[D]=255*((J[D]+.5)/16-.5);for(let re=0;re<R;re++)for(let _e=0;_e<T;_e++){var ie;D=4*(re*T+_e),G!=2?ie=[o(S[D]+Y[D]),o(S[D+1]+Y[D+1]),o(S[D+2]+Y[D+2]),o(S[D+3]+Y[D+3])]:(ee=J[4*(3&re)+(3&_e)],ie=[o(S[D]+ee),o(S[D+1]+ee),o(S[D+2]+ee),o(S[D+3]+ee)]),Z=0;let Se=16777215;for(W=0;W<te;W++){const Ke=c(ie,P[W]);Ke<Se&&(Se=Ke,Z=W)}const De=P[Z],Re=[ie[0]-De[0],ie[1]-De[1],ie[2]-De[2],ie[3]-De[3]];G==1&&(_e!=T-1&&s(Re,Y,D+4,7),re!=R-1&&(_e!=0&&s(Re,Y,D+4*T-4,3),s(Re,Y,D+4*T,5),_e!=T-1&&s(Re,Y,D+4*T+4,1))),C[D>>2]=Z,F[D>>2]=k[Z]}}function d(S,T,R,k,j){j==null&&(j={});const{crc:C}=n,G=e.writeUint,te=e.writeUshort,P=e.writeASCII;let D=8;const Z=S.frames.length>1;let W,ee=!1,F=33+(Z?20:0);if(j.sRGB!=null&&(F+=13),j.pHYs!=null&&(F+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),F+=21+W.length+4),S.ctype==3){for(var Y=S.plte.length,J=0;J<Y;J++)S.plte[J]>>>24!=255&&(ee=!0);F+=8+3*Y+4+(ee?8+1*Y+4:0)}for(var ie=0;ie<S.frames.length;ie++)Z&&(F+=38),F+=(De=S.frames[ie]).cimg.length+12,ie!=0&&(F+=4);F+=12;const re=new Uint8Array(F),_e=[137,80,78,71,13,10,26,10];for(J=0;J<8;J++)re[J]=_e[J];if(G(re,D,13),D+=4,P(re,D,"IHDR"),D+=4,G(re,D,T),D+=4,G(re,D,R),D+=4,re[D]=S.depth,D++,re[D]=S.ctype,D++,re[D]=0,D++,re[D]=0,D++,re[D]=0,D++,G(re,D,C(re,D-17,17)),D+=4,j.sRGB!=null&&(G(re,D,1),D+=4,P(re,D,"sRGB"),D+=4,re[D]=j.sRGB,D++,G(re,D,C(re,D-5,5)),D+=4),j.iCCP!=null){const Re=13+W.length;G(re,D,Re),D+=4,P(re,D,"iCCP"),D+=4,P(re,D,"ICC profile"),D+=11,D+=2,re.set(W,D),D+=W.length,G(re,D,C(re,D-(Re+4),Re+4)),D+=4}if(j.pHYs!=null&&(G(re,D,9),D+=4,P(re,D,"pHYs"),D+=4,G(re,D,j.pHYs[0]),D+=4,G(re,D,j.pHYs[1]),D+=4,re[D]=j.pHYs[2],D++,G(re,D,C(re,D-13,13)),D+=4),Z&&(G(re,D,8),D+=4,P(re,D,"acTL"),D+=4,G(re,D,S.frames.length),D+=4,G(re,D,j.loop!=null?j.loop:0),D+=4,G(re,D,C(re,D-12,12)),D+=4),S.ctype==3){for(G(re,D,3*(Y=S.plte.length)),D+=4,P(re,D,"PLTE"),D+=4,J=0;J<Y;J++){const Re=3*J,Ke=S.plte[J],et=255&Ke,tt=Ke>>>8&255,Mt=Ke>>>16&255;re[D+Re+0]=et,re[D+Re+1]=tt,re[D+Re+2]=Mt}if(D+=3*Y,G(re,D,C(re,D-3*Y-4,3*Y+4)),D+=4,ee){for(G(re,D,Y),D+=4,P(re,D,"tRNS"),D+=4,J=0;J<Y;J++)re[D+J]=S.plte[J]>>>24&255;D+=Y,G(re,D,C(re,D-Y-4,Y+4)),D+=4}}let Se=0;for(ie=0;ie<S.frames.length;ie++){var De=S.frames[ie];Z&&(G(re,D,26),D+=4,P(re,D,"fcTL"),D+=4,G(re,D,Se++),D+=4,G(re,D,De.rect.width),D+=4,G(re,D,De.rect.height),D+=4,G(re,D,De.rect.x),D+=4,G(re,D,De.rect.y),D+=4,te(re,D,k[ie]),D+=2,te(re,D,1e3),D+=2,re[D]=De.dispose,D++,re[D]=De.blend,D++,G(re,D,C(re,D-30,30)),D+=4);const Re=De.cimg;G(re,D,(Y=Re.length)+(ie==0?0:4)),D+=4;const Ke=D;P(re,D,ie==0?"IDAT":"fdAT"),D+=4,ie!=0&&(G(re,D,Se++),D+=4),re.set(Re,D),D+=Y,G(re,D,C(re,Ke,D-Ke)),D+=4}return G(re,D,0),D+=4,P(re,D,"IEND"),D+=4,G(re,D,C(re,D-4,4)),D+=4,re.buffer}function f(S,T,R){for(let k=0;k<S.frames.length;k++){const j=S.frames[k];j.rect.width;const C=j.rect.height,G=new Uint8Array(C*j.bpl+C);j.cimg=w(j.img,C,j.bpp,j.bpl,G,T,R)}}function g(S,T,R,k,j){const C=j[0],G=j[1],te=j[2],P=j[3],D=j[4],Z=j[5];let W=6,ee=8,F=255;for(var Y=0;Y<S.length;Y++){const Ct=new Uint8Array(S[Y]);for(var J=Ct.length,ie=0;ie<J;ie+=4)F&=Ct[ie+3]}const re=F!=255,_e=(function(st,at,qe,pe,Ee,Be){const Oe=[];for(var xe=0;xe<st.length;xe++){const Bt=new Uint8Array(st[xe]),kn=new Uint32Array(Bt.buffer);var nt;let wn=0,Kt=0,Tt=at,Zt=qe,kt=pe?1:0;if(xe!=0){const Ko=Be||pe||xe==1||Oe[xe-2].dispose!=0?1:2;let ai=0,Ca=1e9;for(let Dn=0;Dn<Ko;Dn++){var gt=new Uint8Array(st[xe-1-Dn]);const Hi=new Uint32Array(st[xe-1-Dn]);let yt=at,hn=qe,xn=-1,En=-1;for(let vr=0;vr<qe;vr++)for(let gn=0;gn<at;gn++)kn[ct=vr*at+gn]!=Hi[ct]&&(gn<yt&&(yt=gn),gn>xn&&(xn=gn),vr<hn&&(hn=vr),vr>En&&(En=vr));xn==-1&&(yt=hn=xn=En=0),Ee&&((1&yt)==1&&yt--,(1&hn)==1&&hn--);const Yo=(xn-yt+1)*(En-hn+1);Yo<Ca&&(Ca=Yo,ai=Dn,wn=yt,Kt=hn,Tt=xn-yt+1,Zt=En-hn+1)}gt=new Uint8Array(st[xe-1-ai]),ai==1&&(Oe[xe-1].dispose=2),nt=new Uint8Array(Tt*Zt*4),r(gt,at,qe,nt,Tt,Zt,-wn,-Kt,0),kt=r(Bt,at,qe,nt,Tt,Zt,-wn,-Kt,3)?1:0,kt==1?v(Bt,at,qe,nt,{x:wn,y:Kt,width:Tt,height:Zt}):r(Bt,at,qe,nt,Tt,Zt,-wn,-Kt,0)}else nt=Bt.slice(0);Oe.push({rect:{x:wn,y:Kt,width:Tt,height:Zt},img:nt,blend:kt,dispose:0})}if(pe)for(xe=0;xe<Oe.length;xe++){if((Fn=Oe[xe]).blend==1)continue;const Bt=Fn.rect,kn=Oe[xe-1].rect,wn=Math.min(Bt.x,kn.x),Kt=Math.min(Bt.y,kn.y),Tt={x:wn,y:Kt,width:Math.max(Bt.x+Bt.width,kn.x+kn.width)-wn,height:Math.max(Bt.y+Bt.height,kn.y+kn.height)-Kt};Oe[xe-1].dispose=1,xe-1!=0&&y(st,at,qe,Oe,xe-1,Tt,Ee),y(st,at,qe,Oe,xe,Tt,Ee)}let Bn=0;if(st.length!=1)for(var ct=0;ct<Oe.length;ct++){var Fn;Bn+=(Fn=Oe[ct]).rect.width*Fn.rect.height}return Oe})(S,T,R,C,G,te),Se={},De=[],Re=[];if(k!=0){const Ct=[];for(ie=0;ie<_e.length;ie++)Ct.push(_e[ie].img.buffer);const st=(function(Ee){let Be=0;for(var Oe=0;Oe<Ee.length;Oe++)Be+=Ee[Oe].byteLength;const xe=new Uint8Array(Be);let nt=0;for(Oe=0;Oe<Ee.length;Oe++){const gt=new Uint8Array(Ee[Oe]),Bn=gt.length;for(let ct=0;ct<Bn;ct+=4){let Fn=gt[ct],Bt=gt[ct+1],kn=gt[ct+2];const wn=gt[ct+3];wn==0&&(Fn=Bt=kn=0),xe[nt+ct]=Fn,xe[nt+ct+1]=Bt,xe[nt+ct+2]=kn,xe[nt+ct+3]=wn}nt+=Bn}return xe.buffer})(Ct),at=N(st,k);for(ie=0;ie<at.plte.length;ie++)De.push(at.plte[ie].est.rgba);let qe=0;for(ie=0;ie<_e.length;ie++){const pe=(et=_e[ie]).img.length;var Ke=new Uint8Array(at.inds.buffer,qe>>2,pe>>2);Re.push(Ke);const Ee=new Uint8Array(at.abuf,qe,pe);Z&&u(et.img,et.rect.width,et.rect.height,De,Ee,Ke),et.img.set(Ee),qe+=pe}}else for(Y=0;Y<_e.length;Y++){var et=_e[Y];const Ct=new Uint32Array(et.img.buffer);var tt=et.rect.width;for(J=Ct.length,Ke=new Uint8Array(J),Re.push(Ke),ie=0;ie<J;ie++){const st=Ct[ie];if(ie!=0&&st==Ct[ie-1])Ke[ie]=Ke[ie-1];else if(ie>tt&&st==Ct[ie-tt])Ke[ie]=Ke[ie-tt];else{let at=Se[st];if(at==null&&(Se[st]=at=De.length,De.push(st),De.length>=300))break;Ke[ie]=at}}}const Mt=De.length;for(Mt<=256&&D==0&&(ee=Mt<=2?1:Mt<=4?2:Mt<=16?4:8,ee=Math.max(ee,P)),Y=0;Y<_e.length;Y++){(et=_e[Y]).rect.x,et.rect.y,tt=et.rect.width;const Ct=et.rect.height;let st=et.img;new Uint32Array(st.buffer);let at=4*tt,qe=4;if(Mt<=256&&D==0){at=Math.ceil(ee*tt/8);var pt=new Uint8Array(at*Ct);const pe=Re[Y];for(let Ee=0;Ee<Ct;Ee++){ie=Ee*at;const Be=Ee*tt;if(ee==8)for(var mt=0;mt<tt;mt++)pt[ie+mt]=pe[Be+mt];else if(ee==4)for(mt=0;mt<tt;mt++)pt[ie+(mt>>1)]|=pe[Be+mt]<<4-4*(1&mt);else if(ee==2)for(mt=0;mt<tt;mt++)pt[ie+(mt>>2)]|=pe[Be+mt]<<6-2*(3&mt);else if(ee==1)for(mt=0;mt<tt;mt++)pt[ie+(mt>>3)]|=pe[Be+mt]<<7-1*(7&mt)}st=pt,W=3,qe=1}else if(re==0&&_e.length==1){pt=new Uint8Array(tt*Ct*3);const pe=tt*Ct;for(ie=0;ie<pe;ie++){const Ee=3*ie,Be=4*ie;pt[Ee]=st[Be],pt[Ee+1]=st[Be+1],pt[Ee+2]=st[Be+2]}st=pt,W=2,qe=3,at=3*tt}et.img=st,et.bpl=at,et.bpp=qe}return{ctype:W,depth:ee,plte:De,frames:_e}}function y(S,T,R,k,j,C,G){const te=Uint8Array,P=Uint32Array,D=new te(S[j-1]),Z=new P(S[j-1]),W=j+1<S.length?new te(S[j+1]):null,ee=new te(S[j]),F=new P(ee.buffer);let Y=T,J=R,ie=-1,re=-1;for(let Se=0;Se<C.height;Se++)for(let De=0;De<C.width;De++){const Re=C.x+De,Ke=C.y+Se,et=Ke*T+Re,tt=F[et];tt==0||k[j-1].dispose==0&&Z[et]==tt&&(W==null||W[4*et+3]!=0)||(Re<Y&&(Y=Re),Re>ie&&(ie=Re),Ke<J&&(J=Ke),Ke>re&&(re=Ke))}ie==-1&&(Y=J=ie=re=0),G&&((1&Y)==1&&Y--,(1&J)==1&&J--),C={x:Y,y:J,width:ie-Y+1,height:re-J+1};const _e=k[j];_e.rect=C,_e.blend=1,_e.img=new Uint8Array(C.width*C.height*4),k[j-1].dispose==0?(r(D,T,R,_e.img,C.width,C.height,-C.x,-C.y,0),v(ee,T,R,_e.img,C)):r(ee,T,R,_e.img,C.width,C.height,-C.x,-C.y,0)}function v(S,T,R,k,j){r(S,T,R,k,j.width,j.height,-j.x,-j.y,2)}function w(S,T,R,k,j,C,G){const te=[];let P,D=[0,1,2,3,4];C!=-1?D=[C]:(T*k>5e5||R==1)&&(D=[0]),G&&(P={level:0});const Z=e9;for(var W=0;W<D.length;W++){for(let Y=0;Y<T;Y++)E(j,S,Y,k,R,D[W]);te.push(Z.deflate(j,P))}let ee,F=1e9;for(W=0;W<te.length;W++)te[W].length<F&&(ee=W,F=te[W].length);return te[ee]}function E(S,T,R,k,j,C){const G=R*k;let te=G+R;if(S[te]=C,te++,C==0)if(k<500)for(var P=0;P<k;P++)S[te+P]=T[G+P];else S.set(new Uint8Array(T.buffer,G,k),te);else if(C==1){for(P=0;P<j;P++)S[te+P]=T[G+P];for(P=j;P<k;P++)S[te+P]=T[G+P]-T[G+P-j]+256&255}else if(R==0){for(P=0;P<j;P++)S[te+P]=T[G+P];if(C==2)for(P=j;P<k;P++)S[te+P]=T[G+P];if(C==3)for(P=j;P<k;P++)S[te+P]=T[G+P]-(T[G+P-j]>>1)+256&255;if(C==4)for(P=j;P<k;P++)S[te+P]=T[G+P]-t(T[G+P-j],0,0)+256&255}else{if(C==2)for(P=0;P<k;P++)S[te+P]=T[G+P]+256-T[G+P-k]&255;if(C==3){for(P=0;P<j;P++)S[te+P]=T[G+P]+256-(T[G+P-k]>>1)&255;for(P=j;P<k;P++)S[te+P]=T[G+P]+256-(T[G+P-k]+T[G+P-j]>>1)&255}if(C==4){for(P=0;P<j;P++)S[te+P]=T[G+P]+256-t(0,T[G+P-k],0)&255;for(P=j;P<k;P++)S[te+P]=T[G+P]+256-t(T[G+P-j],T[G+P-k],T[G+P-j-k])&255}}}function N(S,T){const R=new Uint8Array(S),k=R.slice(0),j=new Uint32Array(k.buffer),C=O(k,T),G=C[0],te=C[1],P=R.length,D=new Uint8Array(P>>2);let Z;if(R.length<2e7)for(var W=0;W<P;W+=4)Z=V(G,ee=R[W]*(1/255),F=R[W+1]*(1/255),Y=R[W+2]*(1/255),J=R[W+3]*(1/255)),D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba;else for(W=0;W<P;W+=4){var ee=R[W]*.00392156862745098,F=R[W+1]*(1/255),Y=R[W+2]*(1/255),J=R[W+3]*(1/255);for(Z=G;Z.left;)Z=q(Z.est,ee,F,Y,J)<=0?Z.left:Z.right;D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba}return{abuf:k.buffer,inds:D,plte:te}}function O(S,T,R){R==null&&(R=1e-4);const k=new Uint32Array(S.buffer),j={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=K(S,j.i0,j.i1),j.est=z(j.bst);const C=[j];for(;C.length<T;){let te=0,P=0;for(var G=0;G<C.length;G++)C[G].est.L>te&&(te=C[G].est.L,P=G);if(te<R)break;const D=C[P],Z=U(S,k,D.i0,D.i1,D.est.e,D.est.eMq255);if(D.i0>=Z||D.i1<=Z){D.est.L=0;continue}const W={i0:D.i0,i1:Z,bst:null,est:null,tdst:0,left:null,right:null};W.bst=K(S,W.i0,W.i1),W.est=z(W.bst);const ee={i0:Z,i1:D.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:D.bst.N-W.bst.N},G=0;G<16;G++)ee.bst.R[G]=D.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)ee.bst.m[G]=D.bst.m[G]-W.bst.m[G];ee.est=z(ee.bst),D.left=W,D.right=ee,C[P]=W,C.push(ee)}for(C.sort(((te,P)=>P.bst.N-te.bst.N)),G=0;G<C.length;G++)C[G].ind=G;return[j,C]}function V(S,T,R,k,j){if(S.left==null)return S.tdst=(function(W,ee,F,Y,J){const ie=ee-W[0],re=F-W[1],_e=Y-W[2],Se=J-W[3];return ie*ie+re*re+_e*_e+Se*Se})(S.est.q,T,R,k,j),S;const C=q(S.est,T,R,k,j);let G=S.left,te=S.right;C>0&&(G=S.right,te=S.left);const P=V(G,T,R,k,j);if(P.tdst<=C*C)return P;const D=V(te,T,R,k,j);return D.tdst<P.tdst?D:P}function q(S,T,R,k,j){const{e:C}=S;return C[0]*T+C[1]*R+C[2]*k+C[3]*j-S.eMq}function U(S,T,R,k,j,C){for(k-=4;R<k;){for(;H(S,R,j)<=C;)R+=4;for(;H(S,k,j)>C;)k-=4;if(R>=k)break;const G=T[R>>2];T[R>>2]=T[k>>2],T[k>>2]=G,R+=4,k-=4}for(;H(S,R,j)>C;)R-=4;return R+4}function H(S,T,R){return S[T]*R[0]+S[T+1]*R[1]+S[T+2]*R[2]+S[T+3]*R[3]}function K(S,T,R){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],C=R-T>>2;for(let G=T;G<R;G+=4){const te=S[G]*.00392156862745098,P=S[G+1]*(1/255),D=S[G+2]*(1/255),Z=S[G+3]*(1/255);j[0]+=te,j[1]+=P,j[2]+=D,j[3]+=Z,k[0]+=te*te,k[1]+=te*P,k[2]+=te*D,k[3]+=te*Z,k[5]+=P*P,k[6]+=P*D,k[7]+=P*Z,k[10]+=D*D,k[11]+=D*Z,k[15]+=Z*Z}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:j,N:C}}function z(S){const{R:T}=S,{m:R}=S,{N:k}=S,j=R[0],C=R[1],G=R[2],te=R[3],P=k==0?0:1/k,D=[T[0]-j*j*P,T[1]-j*C*P,T[2]-j*G*P,T[3]-j*te*P,T[4]-C*j*P,T[5]-C*C*P,T[6]-C*G*P,T[7]-C*te*P,T[8]-G*j*P,T[9]-G*C*P,T[10]-G*G*P,T[11]-G*te*P,T[12]-te*j*P,T[13]-te*C*P,T[14]-te*G*P,T[15]-te*te*P],Z=D,W=M;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],F=0,Y=0;if(k!=0)for(let ie=0;ie<16&&(ee=W.multVec(Z,ee),Y=Math.sqrt(W.dot(ee,ee)),ee=W.sml(1/Y,ee),!(ie!=0&&Math.abs(Y-F)<1e-9));ie++)F=Y;const J=[j*P,C*P,G*P,te*P];return{Cov:D,q:J,e:ee,L:F,eMq255:W.dot(W.sml(255,J),ee),eMq:W.dot(ee,J),rgba:(Math.round(255*J[3])<<24|Math.round(255*J[2])<<16|Math.round(255*J[1])<<8|Math.round(255*J[0])<<0)>>>0}}var M={multVec:(S,T)=>[S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],S[4]*T[0]+S[5]*T[1]+S[6]*T[2]+S[7]*T[3],S[8]*T[0]+S[9]*T[1]+S[10]*T[2]+S[11]*T[3],S[12]*T[0]+S[13]*T[1]+S[14]*T[2]+S[15]*T[3]],dot:(S,T)=>S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],sml:(S,T)=>[S*T[0],S*T[1],S*T[2],S*T[3]]};Wr.encode=function(T,R,k,j,C,G,te){j==null&&(j=0),te==null&&(te=!1);const P=g(T,R,k,j,[!1,!1,!1,0,te,!1]);return f(P,-1),d(P,R,k,C,G)},Wr.encodeLL=function(T,R,k,j,C,G,te,P){const D={ctype:0+(j==1?0:2)+(C==0?0:4),depth:G,frames:[]},Z=(j+C)*G,W=Z*R;for(let ee=0;ee<T.length;ee++)D.frames.push({rect:{x:0,y:0,width:R,height:k},img:new Uint8Array(T[ee]),blend:0,dispose:1,bpp:Math.ceil(Z/8),bpl:Math.ceil(W/8)});return f(D,0,!0),d(D,R,k,te,P)},Wr.encode.compress=g,Wr.encode.dither=u,Wr.quantize=N,Wr.quantize.getKDtree=O,Wr.quantize.getNearest=V})();const nR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,E,N,O,V=v,q=0,U=0,H=0;function K(S){y.setUint16(U,S,!0),U+=2}function z(S){y.setUint32(U,S,!0),U+=4}function M(S){U+=S}K(19778),z(f),M(4),z(122),z(108),z(t),z(-n>>>0),K(1),K(32),z(3),z(d),z(2835),z(2835),M(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function S(){for(;q<n&&V>0;){for(O=122+q*u,w=0;w<s;)V--,E=c[H++],N=E>>>24,y.setUint32(O+w,E<<8|N),w+=4;q++}H<c.length?(V=v,setTimeout(S,nR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var rr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},t9={[rr.CHROME]:16384,[rr.FIREFOX]:11180,[rr.DESKTOP_SAFARI]:16384,[rr.IE]:8192,[rr.IOS]:4096,[rr.ETC]:8192};const Y_=typeof window<"u",rR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Em=Y_&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),n9=(Y_||rR)&&(Em&&Em.getOriginalSymbol(window,"File")||typeof File<"u"&&File),iR=(Y_||rR)&&(Em&&Em.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Q_(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function sR(r){return new Promise(((e,t)=>{const n=new iR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function aR(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function mo(){if(mo.cachedResult!==void 0)return mo.cachedResult;let r=rr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=rr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=rr.IOS:/Safari/i.test(e)?r=rr.DESKTOP_SAFARI:/Firefox/i.test(e)?r=rr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=rr.IE),mo.cachedResult=r,mo.cachedResult}function oR(r,e){const t=mo(),n=t9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function hg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function lR(r,e){const{width:t,height:n}=oR(r.width,r.height),[s,o]=hg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function Uf(){return Uf.cachedResult!==void 0||(Uf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Uf.cachedResult}function Tm(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=lR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return sR(r).then((function(y){try{return g=y,aR(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(Uf()||[rr.DESKTOP_SAFARI,rr.MOBILE_SAFARI].includes(mo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Sm(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Wr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>nR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(E){return c(E)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),Q_(w,t,n).then((function(E){try{return u=E,v.call(this)}catch(N){return c(N)}}).bind(this),c)}}}function d(){return o(u)}}))}function Si(r){r.width=0,r.height=0}function Ql(){return new Promise((function(r,e){let t,n,s,o;return Ql.cachedResult!==void 0?r(Ql.cachedResult):Q_("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Tm(t).then((function(u){try{return n=u[1],Sm(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Si(n),Tm(s).then((function(f){try{return o=f[0],Ql.cachedResult=o.width===1&&o.height===2,r(Ql.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function cR(r){return new Promise(((e,t)=>{const n=new iR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function uR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=hg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Si(r)),c}function hR(r,e){const{width:t}=r,{height:n}=r,[s,o]=hg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Si(r),s}function IT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,E,N,O,V,q,U,H,K,z,M,S;function T(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=k,e.onProgress(Math.min(o,100))}function R(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(k,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,T(),Tm(r,e).then((function(k){try{return[,d]=k,T(),f=uR(d,e),T(),new Promise((function(j,C){var G;if(!(G=e.exifOrientation))return cR(r).then((function(P){try{return G=P,te.call(this)}catch(D){return C(D)}}).bind(this),C);function te(){return j(G)}return te.call(this)})).then((function(j){try{return g=j,T(),Ql().then((function(C){try{return y=C?f:hR(f,g),T(),v=e.initialQuality||1,w=e.fileType||r.type,Sm(y,w,r.name,r.lastModified,v).then((function(G){try{{let Z=function(){if(c--&&(U>u||U>V)){let ee,F;return ee=S?.95*M.width:M.width,F=S?.95*M.height:M.height,[K,z]=hg(ee,F),z.drawImage(M,0,0,ee,F),v*=w==="image/png"?.85:.95,Sm(K,w,r.name,r.lastModified,v).then((function(Y){try{return H=Y,Si(M),M=K,U=H.size,R(Math.min(99,Math.floor((q-U)/(q-u)*100))),Z}catch(J){return s(J)}}),s)}return[1]},W=function(){return Si(M),Si(K),Si(f),Si(y),Si(d),R(100),n(H)};var P=Z,D=W;if(E=G,T(),N=E.size>u,O=E.size>r.size,!N&&!O)return R(100),n(E);var te;return V=r.size,q=E.size,U=q,M=y,S=!e.alwaysKeepResolution&&N,(te=(function(ee){for(;ee;){if(ee.then)return void ee.then(te,s);try{if(ee.pop){if(ee.length)return ee.pop()?W.call(this):ee;ee=Z}else ee=ee.call(this)}catch(F){return s(F)}}}).bind(this))(Z)}}catch(Z){return s(Z)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const r9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Py;function i9(r,e){return new Promise(((t,n)=>{Py||(Py=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(r9));const s=new Worker(Py);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function vn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof n9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return IT(r,s).then((function(w){try{return o=w,v.call(this)}catch(E){return n(E)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return IT(r,s).then((function(E){try{return o=E,g()}catch(N){return n(N)}}),n)}catch(E){return n(E)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",i9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=tR(r,o))}catch{}return t(o)}}))}vn.getDataUrlFromFile=sR,vn.getFilefromDataUrl=Q_,vn.loadImage=aR,vn.drawImageInCanvas=lR,vn.drawFileInCanvas=Tm,vn.canvasToFile=Sm,vn.getExifOrientation=cR,vn.handleMaxWidthOrHeight=uR,vn.followExifOrientation=hR,vn.cleanupCanvasMemory=Si,vn.isAutoOrientationInBrowser=Ql,vn.approximateBelowMaximumCanvasSizeOfBrowser=oR,vn.copyExifWithoutOrientation=tR,vn.getBrowserName=mo,vn.version="2.0.2";const s9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function a9(r){if(!r)return!0;const e=r.toLowerCase();return!s9.some(t=>e.includes(t))}async function o9(r,e){try{const t=$t(dt,"users",r);return await Lr(t,{blockedUsers:B_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function l9(r,e){try{const t=$t(dt,"users",r);return await Lr(t,{blockedUsers:yI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function c9(r,e){try{const t=$t(dt,"users",r),n=await jo(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function u9({onClose:r,onPostCreated:e}){const{t}=zn(),{currentUser:n}=si(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,E]=$.useState("none"),[N,O]=$.useState(null),[V,q]=$.useState(null),[U,H]=$.useState(!1),[K,z]=$.useState(!1),[M,S]=$.useState(""),[T,R]=$.useState(""),[k,j]=$.useState(0);$.useEffect(()=>{if(u){const D=My.find(Z=>Z.value===u);D&&g(t(D.labelKey))}},[u,t]);const C=async D=>{const Z=D.target.files[0];if(Z){const W=new FileReader;W.onloadend=()=>q(W.result),W.readAsDataURL(Z),O(Z)}},G=async()=>{if(N){z(!0);try{let D=N;try{D=await vn(N,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const Z=new FileReader;Z.readAsDataURL(D),Z.onloadend=async()=>{const W=Z.result,ee=await HI(W,"en"),F=(ee.plant_name+" "+ee.disease_name).toLowerCase();let Y=null;for(const J of My)if(F.includes(J.value)){Y=J;break}Y?(d(Y.value),g(t(Y.labelKey)),R(`${t("auto_detect")}: ${t(Y.labelKey)}`)):R("Plant detected but not in our list yet."),setTimeout(()=>R(""),3e3),z(!1)}}catch(D){console.error("Auto detect failed",D),S(t("error_diagnosis_failed")),z(!1)}}},te=async D=>{if(D.preventDefault(),!!o.trim()){if(!a9(o)){S(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}H(!0),S(""),j(0);try{let Z=null;if(N)try{console.log("Compressing for Base64 storage...");const ee=await vn(N,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});Z=await new Promise((F,Y)=>{const J=new FileReader;J.readAsDataURL(ee),J.onload=()=>F(J.result),J.onerror=ie=>Y(ie)}),console.log("Base64 string ready, length:",Z.length)}catch(W){console.error("Compression failed:",W),S("Image is too large and could not be compressed."),H(!1);return}await GI(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:Z}),e(),r()}catch(Z){console.error("FULL POST ERROR:",Z),S(Z.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{H(!1)}}},P=My.filter(D=>t(D.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Vo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[M&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:M}),T&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:T}),b.jsxs("form",{onSubmit:te,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:D=>c(D.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(TV,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:D=>{g(D.target.value),v(!0),D.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(TI,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(D=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(D.value),g(t(D.labelKey)),v(!1)},children:t(D.labelKey)},D.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{O(null),q(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:U,children:b.jsx(Vo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?b.jsx(wo,{className:"w-3 h-3 animate-spin"}):b.jsx(FV,{className:"w-3 h-3"}),t(K?"detecting":"auto_detect")]})]}),U&&k>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${k}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(k),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:U,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(RI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:C,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:U||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[U?b.jsx(wo,{className:"w-4 h-4 animate-spin"}):b.jsx(dh,{className:"w-4 h-4"}),U?"...":t("ask_question")]})]})]})]})]})})}function h9({user:r,onClose:e}){const{currentUser:t}=si(),n=Sa(),[s,o]=$.useState(!1),{t:c}=zn(),{addToast:u}=Ra(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const O=r.uid||r.id;if(!O)return;const V=Ku($t(dt,"users",O),q=>{q.exists()&&f({uid:q.id,...q.data()})},q=>{console.error("User listener error",q)});return()=>V()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&c9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await l9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await o9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(O){console.error(O),u("Action failed","error")}},E=O=>!O?.lastSeen||!O.lastSeen.seconds?!1:Date.now()-O.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const N=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const O={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:O}})}catch(O){console.error(O),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:O=>O.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Vo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${E(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${E(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),E(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(wm,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(wm,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:N,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(hh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function dR(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(ni,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function d9(){const{t:r}=zn(),{currentUser:e}=si(),{addToast:t}=Ra();return b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:b.jsxs("button",{onClick:()=>{if(!e){t(r("login_to_post")||"Please login to post.","error");return}setIsModalOpen(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(vV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})})]}),loading?b.jsx(dR,{}):posts.length>0?b.jsx("div",{className:"space-y-6",children:posts.map(n=>b.jsx(eR,{post:n,onViewAnalysis:s=>setViewAnalysisId(s),onUserClick:s=>{setSelectedUser({id:s,name:n.authorName||"Gardener",avatar:n.userAvatar})}},n.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),isModalOpen&&b.jsx(u9,{onClose:()=>setIsModalOpen(!1),onPostCreated:()=>{}}),viewAnalysisId&&b.jsx(AnalysisDetailModal,{analysisId:viewAnalysisId,onClose:()=>setViewAnalysisId(null)}),selectedUser&&b.jsx(h9,{user:selectedUser,onClose:()=>setSelectedUser(null)})]})}const f9="modulepreload",m9=function(r){return"/"+r},RT={},g9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=m9(g),g in RT)return;RT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":f9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((E,N)=>{w.addEventListener("load",E),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function $n(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class jh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const _f={decode:function(r,e){return $n(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function fR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(fR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function CT(r,e,t){const n=fR(r,e||{});return t?.appendChild(n),n}var p9=Object.freeze({__proto__:null,createElement:CT,default:CT});const y9={fetchBlob:function(r,e,t){return $n(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){$n(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Xt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function ho(r,e){const t=Xt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function oa(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class _9 extends jh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Xt(!1),this._currentTime=Xt(0),this._duration=Xt(0),this._volume=Xt(this.media.volume),this._muted=Xt(this.media.muted),this._playbackRate=Xt(this.media.playbackRate||1),this._seeking=Xt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return $n(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function v9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function b9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function NT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function mR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function kT(r,e){if(!mR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function DT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function gR(r){const e=r._cleanup;typeof e=="function"&&e()}function w9(r){const e=Xt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=ho((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=ho((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),gR(e)}}}class x9 extends jh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=NT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=NT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=w9(this.scrollContainer);const e=oa((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Xt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,E=v.clientY,N=!1;const O=Date.now(),V=t.getBoundingClientRect(),{left:q,top:U}=V,H=T=>{if(T.defaultPrevented||d.size>1||f&&Date.now()-O<c)return;const R=T.clientX,k=T.clientY,j=R-w,C=k-E;(N||Math.abs(j)>s||Math.abs(C)>s)&&(T.preventDefault(),T.stopPropagation(),N||(u.set({type:"start",x:w-q,y:E-U}),N=!0),u.set({type:"move",x:R-q,y:k-U,deltaX:j,deltaY:C}),w=R,E=k)},K=T=>{if(d.delete(T.pointerId),N){const R=T.clientX,k=T.clientY;u.set({type:"end",x:R-q,y:k-U})}g()},z=T=>{d.delete(T.pointerId),T.relatedTarget&&T.relatedTarget!==document.documentElement||K(T)},M=T=>{N&&(T.stopPropagation(),T.preventDefault())},S=T=>{T.defaultPrevented||d.size>1||N&&T.preventDefault()};document.addEventListener("pointermove",H),document.addEventListener("pointerup",K),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("click",M,{capture:!0}),g=()=>{document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",S),setTimeout((()=>{document.removeEventListener("click",M,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),gR(u)}}})(this.wrapper);const e=oa((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:E,height:N,length:O,options:V,pixelRatio:q}){const U=N/2,H=V.barWidth?V.barWidth*q:1,K=V.barGap?V.barGap*q:V.barWidth?H/2:0,z=H+K||1;return{halfHeight:U,barWidth:H,barGap:K,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*q:0,barIndexScale:O>0?E/z/O:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:E,barIndexScale:N,barSpacing:O,barWidth:V,halfHeight:q,vScale:U,canvasHeight:H,barAlign:K,barMinHeight:z}){const M=E[0]||[],S=E[1]||M,T=M.length,R=[];let k=0,j=0,C=0;for(let G=0;G<=T;G++){const te=Math.round(G*N);if(te>k){const{topHeight:Z,totalHeight:W}=v9({maxTop:j,maxBottom:C,halfHeight:q,vScale:U,barMinHeight:z,barAlign:K}),ee=b9({barAlign:K,halfHeight:q,topHeight:Z,totalHeight:W,canvasHeight:H});R.push({x:k*O,y:ee,width:V,height:W}),k=te,j=0,C=0}const P=Math.abs(M[G]||0),D=Math.abs(S[G]||0);P>j&&(j=P),D>C&&(C=D)}return R})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const E of w)f&&"roundRect"in n?n.roundRect(E.x,E.y,E.width,E.height,f):n.rect(E.x,E.y,E.width,E.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((E,N)=>{const O=E.length,V=O?f/O:0,q=v,U=N===0?-1:1,H=[{x:0,y:q}];let K=0,z=0;for(let M=0;M<=O;M++){const S=Math.round(M*V);if(S>K){const R=q+(Math.round(z*v*y)||1)*U;H.push({x:K,y:R}),K=S,z=0}const T=Math.abs(E[M]||0);T>z&&(z=T)}return H.push({x:K,y:q}),H}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const E=(f=y[w])!==null&&f!==void 0?f:0,N=Math.abs(E);N>v&&(v=N)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});mR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:E,totalWidth:N,options:O}){return kT(Math.min(8e3,E,N),O)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=E=>{if(E<0||E>=w||y[E])return;y[E]=!0;const N=E*g;let O=Math.min(f-N,g);if(O=kT(O,t),O<=0)return;const V=(function({channelData:q,offset:U,clampedWidth:H,totalWidth:K}){return q.map((z=>{const M=Math.floor(U/K*z.length),S=Math.floor((U+H)/K*z.length);return z.slice(M,S)}))})({channelData:e,offset:N,clampedWidth:O,totalWidth:f});this.renderSingleCanvas(V,t,O,s,N,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let E=0;E<w;E++)v(E);return}if(DT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((E=>v(E))),w>1){const E=this.on("scroll",(()=>{const{scrollLeft:N}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),DT({scrollLeft:N,totalWidth:f,numCanvases:w}).forEach((O=>v(O)))}));this.unsubscribeOnScroll.push(E)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(w=Object.getOwnPropertySymbols(g);E<w.length;E++)y.indexOf(w[E])<0&&Object.prototype.propertyIsEnumerable.call(g,w[E])&&(v[w[E]]=g[w[E]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return $n(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const E=Math.ceil(f*g),N=E>y,O=!!(v&&!N);return{scrollWidth:E,isScrollable:N,useParentWidth:O,width:(O?y:E)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $n(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class E9 extends jh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class jy extends jh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $n(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $n(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $n(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const T9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class gh extends _9{static create(e){return new gh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new jy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},T9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const E=(d=u?.currentTime)!==null&&d!==void 0?d:Xt(0),N=(f=u?.duration)!==null&&f!==void 0?f:Xt(0),O=(g=u?.isPlaying)!==null&&g!==void 0?g:Xt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Xt(!1),q=(v=u?.volume)!==null&&v!==void 0?v:Xt(1),U=(w=u?.playbackRate)!==null&&w!==void 0?w:Xt(1),H=Xt(null),K=Xt(null),z=Xt(""),M=Xt(0),S=Xt(0),T=ho((()=>!O.value),[O]),R=ho((()=>H.value!==null),[H]),k=ho((()=>R.value&&N.value>0),[R,N]),j=ho((()=>E.value),[E]),C=ho((()=>N.value>0?E.value/N.value:0),[E,N]);return{state:{currentTime:E,duration:N,isPlaying:O,isPaused:T,isSeeking:V,volume:q,playbackRate:U,audioBuffer:H,peaks:K,url:z,zoom:M,scrollPosition:S,canPlay:R,isReady:k,progress:j,progressPercent:C},actions:{setCurrentTime:G=>{const te=Math.max(0,Math.min(N.value||1/0,G));E.set(te)},setDuration:G=>{N.set(Math.max(0,G))},setPlaying:G=>{O.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const te=Math.max(0,Math.min(1,G));q.set(te)},setPlaybackRate:G=>{const te=Math.max(.1,Math.min(16,G));U.set(te)},setAudioBuffer:G=>{H.set(G),G&&N.set(G.duration)},setPeaks:G=>{K.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{M.set(Math.max(0,G))},setScrollPosition:G=>{S.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new E9;const o=t?void 0:this.getMediaElement();this.renderer=new x9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(oa((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(oa((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(oa((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(oa((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(oa((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(oa((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=_f.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=_f.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return $n(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield y9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof jy&&(u.duration=c)}if(n)this.decodedData=_f.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield _f.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const E=y[w];Math.abs(E)>Math.abs(v)&&(v=E)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return $n(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof jy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return $n(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $n(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}gh.BasePlugin=class extends jh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},gh.dom=p9;const S9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),A9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=gh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const E=Math.floor(w/60),N=Math.floor(w%60);return`${E}:${N<10?"0":""}${N}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(mV,{className:"w-5 h-5 fill-current"}):b.jsx(yV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function I9(){const{chatId:r}=LN(),{currentUser:e}=si(),{t,i18n:n}=zn(),s=Sa(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Ra();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[E,N]=$.useState(null),[O,V]=$.useState(null),[q,U]=$.useState(null),[H,K]=$.useState(!1),[z,M]=$.useState(null),[S,T]=$.useState(0),[R,k]=$.useState(null),[j,C]=$.useState(!1),[G,te]=$.useState(null),P=_r(),[D,Z]=$.useState(P.state?.targetUser||null),[W,ee]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&ee(r)},[r]),$.useEffect(()=>{r==="new"&&D&&e&&(async()=>{try{N(D);const Ee=gm(gs(dt,"chats"),pm("participants","array-contains",e.uid)),Oe=(await S0(Ee)).docs.find(xe=>xe.data().participants.includes(D.uid));Oe?(ee(Oe.id),s(`/messages/${Oe.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,D,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=Ku($t(dt,"chats",W),Be=>{if(Be.exists()){const Oe=Be.data(),xe=Oe.participants.find(nt=>nt!==e.uid);if(xe){if(Oe.participantData?.[xe]){const nt=Oe.participantData[xe];N(gt=>gt?.id===xe?gt:{...nt,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Ee=Ku(gs(dt,"chats",W,"messages"),Be=>{const Oe=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,nt)=>(xe.createdAt?.seconds||0)-(nt.createdAt?.seconds||0));f(Oe),w(!1),q||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,q,r,s]),$.useEffect(()=>{if(!O)return;const pe=Ku($t(dt,"users",O),Ee=>{if(Ee.exists()){const Be=Ee.data();N(Oe=>({...Oe,...Be}))}});return()=>pe()},[O]);const F=async(pe,Ee=null,Be=null,Oe="text")=>{C(!0);try{let xe=W;if(!xe&&r==="new"){if(!D)throw new Error("Target user missing");const{startChat:ct}=await g9(async()=>{const{startChat:Fn}=await Promise.resolve().then(()=>CL);return{startChat:Fn}},[]);xe=await ct(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),ee(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let nt=null,gt=Oe,Bn=Be;if(Ee||R){let ct=Ee||R.file;if(gt==="image"||R?.type==="image"){gt="image",Bn=Bn||R?.file.name;const Fn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ct=await vn(ct,Fn)}catch(Bt){console.warn("Compression failed, using original",Bt)}}else R&&(gt=R.type,Bn=R.file.name);if(nt=await S9(ct),nt.length>95e4)throw new Error("File is too large for database storage even after compression.")}q?(await Lr($t(dt,"chats",xe,"messages",q),{text:pe,editedAt:jr()}),U(null)):(await og(gs(dt,"chats",xe,"messages"),{text:pe||"",type:gt,fileUrl:nt,fileName:Bn,senderId:e.uid,createdAt:jr()}),await Lr($t(dt,"chats",xe),{lastMessage:gt==="audio"?" Voice Message":gt==="image"?" Photo":pe||" File",updatedAt:jr()})),y(""),k(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{C(!1)}},Y=async pe=>{pe.preventDefault(),!(!g.trim()&&!R)&&await F(g)},J=async pe=>{if(window.confirm("Delete this message?"))try{await gI($t(dt,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},ie=n.language==="tr"?K_:ug,re=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${G_(new Date(Ee),{addSuffix:!0,locale:ie})}`},_e=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Se=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",De=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",Oe=Be==="image"?URL.createObjectURL(Ee):null;k({file:Ee,type:Be,previewUrl:Oe})},Re=pe=>{y(pe.text||""),U(pe.id),k(null),c.current&&(c.current.value="")},Ke=()=>{U(null),y(""),k(null)},et=$.useRef("cancel"),tt=$.useRef(null),Mt=$.useRef(null),pt=$.useRef(null),[mt,Ct]=$.useState(0);$.useEffect(()=>{let pe;return H?(T(0),pe=setInterval(()=>T(Ee=>Ee+1),1e3)):(T(0),Ct(0)),()=>{clearInterval(pe),pt.current&&cancelAnimationFrame(pt.current),tt.current&&tt.current.close()}},[H]);const st=()=>{if(!Mt.current)return;const pe=new Uint8Array(Mt.current.fftSize);Mt.current.getByteTimeDomainData(pe);let Ee=0;for(let Oe=0;Oe<pe.length;Oe++)Ee+=Math.abs(pe[Oe]-128);const Be=Ee/pe.length;Ct(Be*10),pt.current=requestAnimationFrame(st)},at=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext);await Ee.resume();const Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,tt.current=Ee,Mt.current=Be,st();const xe=new MediaRecorder(pe),nt=[];xe.ondataavailable=gt=>nt.push(gt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(gt=>gt.stop()),tt.current&&tt.current.close(),pt.current&&cancelAnimationFrame(pt.current),et.current==="send"){const gt=new Blob(nt,{type:"audio/webm"});await F(null,gt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),M(xe),K(!0),et.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},qe=pe=>{!z||z.state==="inactive"||(et.current=pe,z.stop(),K(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Cj,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),E?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:E.photoURL||E.avatar||`https://ui-avatars.com/api/?name=${E.name||"User"}`,alt:E.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:E.name||E.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${_e(E)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:re(E)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",Oe=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Oe&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(A9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(rT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Se(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Re(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(DI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>J(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(bm,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Se(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),q&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:Ke,children:b.jsx(Vo,{className:"w-4 h-4"})})]}),R&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="image"?b.jsx("img",{src:R.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx($j,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:R.file.name})]}),b.jsx("button",{onClick:()=>k(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Vo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:H?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>qe("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(bm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(S*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.max(0,mt-5),Oe=Math.min(1,Be/40),xe=Math.sin(Ee*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Oe*36*xe)}px`,opacity:.5+Oe*.5}},Ee)})})]}),b.jsx("button",{onClick:()=>qe("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(dh,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:De,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:q,children:b.jsx(rT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:q?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||R?b.jsx("button",{onClick:Y,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(dh,{className:"w-5 h-5"})}):b.jsx("button",{onClick:at,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(uV,{className:"w-5 h-5"})})]})})]})}function R9(){const{currentUser:r,logout:e,refreshUser:t}=si(),{t:n,i18n:s}=zn(),o=useNavigate(),{userId:c}=useParams(),{addToast:u}=Ra(),d=MT.useRef(null),[f,g]=$.useState(!1),[y,v]=$.useState(!0),[w,E]=$.useState(null),[N,O]=$.useState([]),[V,q]=$.useState(!0),[U,H]=$.useState({analysisCount:0,postCount:0}),[K,z]=$.useState(null),[M,S]=$.useState(""),[T,R]=$.useState(""),[k,j]=$.useState(""),[C,G]=$.useState(null),[te,P]=$.useState(!1),D=!c||r&&r.uid===c,Z=c||r?.uid;$.useEffect(()=>{Z&&W()},[Z,r]);const W=async()=>{v(!0),q(!0);try{const J=$t(dt,"users",Z),ie=await jo(J);if(ie.exists()){const re=ie.data();E(re),S(re.displayName||""),R(re.bio||""),j(re.location||""),G(re.photoURL||null);const _e=gm(gs(dt,"analyses"),pm("userId","==",Z)),Se=gm(gs(dt,"posts"),pm("userId","==",Z)),[De,Re]=await Promise.all([S0(_e),S0(Se)]),Ke=De.size,et=Re.size;H({analysisCount:Ke,postCount:et}),z(calculateLevel(Ke,et));const tt=Re.docs.map(Mt=>({id:Mt.id,...Mt.data()}));tt.sort((Mt,pt)=>(pt.createdAt?.seconds||0)-(Mt.createdAt?.seconds||0)),O(tt)}else console.log("No such profile!")}catch(J){console.error("Error fetching profile:",J)}finally{v(!1),q(!1)}},ee=async()=>{P(!0);try{const J={displayName:M,bio:T,location:k,photoURL:C},ie=$t(dt,"users",r.uid);await Lr(ie,J),await t(),setUserProfile(re=>({...re,...J})),g(!1)}catch(J){console.error("Error updating profile:",J),alert(n("error_updating_profile")||"Error updating profile")}finally{P(!1)}};if(!Z)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(V&&!w)return b.jsx(PageLoader,{});const F=J=>!J?.lastSeen||!J.lastSeen.seconds?!1:Date.now()-J.lastSeen.seconds*1e3<180*1e3,Y=J=>J?.lastSeen?G_(new Date(J.lastSeen.seconds*1e3),{addSuffix:!0,locale:s.language==="tr"?K_:ug}):"Offline";return b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:[K&&K.tier&&b.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-900 via-green-800 to-emerald-900 shadow-2xl text-white p-6 animate-fade-in-down border border-green-700/50",children:[b.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),b.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-6",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center bg-white/20 backdrop-blur-md shadow-inner border border-white/10 ${K.tier.color.replace("text-","text-white ")}`,children:(()=>{const J=K.tier.icon||ni;return b.jsx(J,{className:"w-8 h-8 text-white drop-shadow-md"})})()}),b.jsxs("div",{children:[b.jsx("p",{className:"text-green-200 text-xs font-bold uppercase tracking-widest mb-1",children:n("current_level")||"SEVYE"}),b.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white leading-none",children:s.language==="tr"?K.tier.trName:K.tier.name}),b.jsxs("p",{className:"text-sm font-medium text-green-300 mt-1 opacity-90",children:["Level ",K.level]})]})]}),b.jsx("div",{className:"text-right",children:b.jsx("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-green-200 drop-shadow-sm",children:K.level})})]}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-100 mb-2",children:[b.jsxs("span",{children:[K.currentLevelXp," XP"]}),b.jsx("span",{children:K.isMaxLevel?"MAX":`Next: ${K.nextLevelReq} XP`})]}),b.jsx("div",{className:"h-3 bg-black/20 rounded-full overflow-hidden backdrop-blur-sm border border-white/5",children:b.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-300 shadow-[0_0_10px_rgba(74,222,128,0.5)] transition-all duration-1000 ease-out",style:{width:`${K.progress}%`}})}),b.jsxs("p",{className:"mt-3 text-xs text-green-200/80 text-center",children:[n("total_xp")||"Toplam Puan",": ",b.jsx("span",{className:"text-white font-bold",children:K.totalXP})]})]})]}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${D?"group cursor-pointer":""} mt-2`,onClick:()=>D&&d.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(D?C:w?.avatar||w?.photoURL)?b.jsx("img",{src:D?C:w?.avatar||w?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${D?M||"Gardener":w?.name||w?.displayName||N.length>0&&N[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!D&&w&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${F(w)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${F(w)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),F(w)?"Online":Y(w)]}),D&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(bo,{className:"w-8 h-8 text-white"})}),y&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(wo,{className:"animate-spin text-green-600"})})]}),D&&b.jsx("input",{type:"file",ref:d,onChange:handleFileChange,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:D?M||n("gardener")||"Bahvan":w?.name||w?.displayName||N.length>0&&N[0].authorName||n("gardener")||"Bahvan"}),D&&b.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),D?b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:M,onChange:J=>S(J.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[y?b.jsx(wo,{className:"animate-spin w-4 h-4"}):b.jsx(MI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",w?.createdAt?.seconds?new Date(w.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!r){u(n("login_to_message")||"Please login to send messages","info"),o("/login");return}const J={uid:w.uid||Z,name:w.name||w.displayName||N.length>0&&N[0].authorName||"Gardener",photoURL:w.photoURL||w.avatar||null};o("/messages/new",{state:{targetUser:J}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(hh,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.reduce((J,ie)=>J+(ie.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(Qj,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:D?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:w?.name||"Kullanc"})||`${w?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(wo,{className:"w-8 h-8 animate-spin text-gray-300"})}):N.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:N.map(J=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(eR,{post:{...J,hideAuthor:D},onViewAnalysis:()=>{}})},J.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(nV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})]})}function C9(){const{t:r}=zn(),{currentUser:e}=si(),{addToast:t}=Ra();Sa(),_r();const[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(null),[f,g]=$.useState(!1),[y,v]=$.useState(null),[w,E]=$.useState(""),[N,O]=$.useState(!1),V=$.useRef(null),q=async U=>{if(!w.trim()&&!V.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}O(!0);try{let H=null,K=null;if(V.current?.files?.[0]){const z=V.current.files[0];H=await new Promise(M=>{const S=new FileReader;S.onload=T=>M(T.target.result),S.readAsDataURL(z)});try{K=await JI(U.mainImage,H,U.result.disease_name)}catch(M){console.error("AI Progress Check Failed:",M)}}await KI(U.id,H,w,K),v(null),E(""),V.current&&(V.current.value=""),t("Durum gncellemesi kaydedildi!","success"),loadAnalyses()}catch(H){console.error("Feedback failed",H),t("Gncelleme kaydedilemedi.","error")}finally{O(!1)}};return o?b.jsx(dR,{}):n.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(ni,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(Jr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(bo,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(vm,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:n.map(U=>{const H=U.nextCheckup?.seconds?new Date>new Date(U.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===U.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":H?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:K=>handleDelete(K,U.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(bm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>toggleExpand(U.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:U.mainImage,alt:U.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),H&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:U.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:U.plantType||U.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:U.result.latin_name})]}):U.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(AI,{className:"w-3 h-3"}),U.createdAt?.seconds?new Date(U.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),U.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:U.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(Mj,{className:"w-4 h-4"}),b.jsxs("span",{children:[U.treatmentDuration||"1 Hafta"," Plan"]})]}),U.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(A0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(TI,{className:`w-6 h-6 text-gray-300 transition-transform ${u===U.id?"rotate-180":""}`})})]}),u===U.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:U.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(sT,{className:"w-5 h-5 text-green-600"}),U.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),U.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(U.result.is_treatable===!1?U.result.preventive_measures:U.result.treatment_steps)?.map((K,z)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${U.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:z+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:K})]},z))})]}),U.updates&&U.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:U.updates.map((K,z)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${K.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":K.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[K.imageUrl&&b.jsx("img",{src:K.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(K.createdAt?.seconds*1e3).toLocaleDateString()}),K.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${K.aiAnalysis.status==="better"?"bg-green-200 text-green-800":K.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:K.aiAnalysis.status==="better"?"YLEYOR":K.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:K.note}),K.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:K.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:K.aiAnalysis.advice})]})]},z))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[U.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===U.id?null:U.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(bo,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:K=>handleShare(K,U),disabled:U.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${U.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(A0,{className:"w-5 h-5"}),U.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),y===U.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[N&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(wo,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(vm,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:w,onChange:K=>E(K.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:V,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>q(U),disabled:N,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(dh,{className:"w-3 h-3"})]})]})]})]})]},U.id)})}),f&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(Fj,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(sT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(bo,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function N9(){const{t:r}=zn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(bo,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function k9(){const{t:r,i18n:e}=zn(),{logout:t,currentUser:n}=si(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(kI,{className:"w-5 h-5"}):b.jsx(PI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(Kj,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx(Lj,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(wm,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(NI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const D9=$.createContext(),O9=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(D9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var OT={},M9="@vercel/analytics",P9="1.6.1",j9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function pR(){return typeof window<"u"}function yR(){try{const r="production"}catch{}return"production"}function V9(r="auto"){if(r==="auto"){window.vam=yR();return}window.vam=r}function L9(){return(pR()?window.vam:yR())||"production"}function R0(){return L9()==="development"}function U9(r){return r.scriptSrc?r.scriptSrc:R0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function z9(r={debug:!0}){var e;if(!pR())return;V9(r.mode),j9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=U9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=M9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=P9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=R0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},R0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function B9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function F9(){if(!(typeof process>"u"||typeof OT>"u"))return OT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function H9(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{z9({framework:r.framework||"react",basePath:r.basePath??F9(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&B9({route:r.route,path:r.path})},[r.route,r.path]),null}function q9(){return b.jsx(O9,{children:b.jsxs(GV,{children:[b.jsxs(ek,{children:[b.jsx(Qr,{path:"/login",element:b.jsx(YV,{})}),b.jsx(Qr,{path:"/register",element:b.jsx(WV,{})}),b.jsxs(Qr,{path:"/",element:b.jsx(KV,{}),children:[b.jsx(Qr,{index:!0,element:b.jsx(DL,{})}),b.jsx(Qr,{path:"scan",element:b.jsx(N9,{})}),b.jsx(Qr,{path:"analyses",element:b.jsx(C9,{})}),b.jsx(Qr,{path:"community",element:b.jsx(d9,{})}),b.jsx(Qr,{path:"chat",element:b.jsx(I9,{})}),b.jsx(Qr,{path:"profile",element:b.jsx(R9,{})}),b.jsx(Qr,{path:"settings",element:b.jsx(k9,{})})]})]}),b.jsx(H9,{})," "]})})}const $9="Plant AI",G9="Welcome to Plant AI",K9="Plant Diagnosis",Y9="Community",Q9="Profile",W9="Login",X9="Messages",J9="Language",Z9="Logout",e8="Dark Mode",t8="Light Mode",n8="My Analyses",r8="Register",i8="Upload Photo",s8="Take Photo",a8="Analyzing...",o8="Diagnosis Results",l8="Treatment",c8="Confidence",u8="Save Changes",h8="Saving...",d8="Display Name",f8="Email",m8="Tap to change avatar",g8="Profile updated successfully!",p8="About Project",y8="Do you know the name of this plant?",_8="e.g., Rose, Tomato, Unknown...",v8="1. Plant Name",b8="2. Capture Photo",w8="Next",x8="I don't know",E8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",T8="Take Close-up Photo",S8="Login to view detailed diagnosis and treatment plan.",A8="Login to View Results",I8="Detailed analysis is available for members only.",R8="AI Powered Plant Doctor",C8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',N8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",k8="Start Diagnosis",D8="Identify",O8="Tell us the plant name or type.",M8="Analyze",P8="Upload photos of the affected area.",j8="Heal",V8="Get instant treatment plan.",L8="Welcome, ",U8="Diagnosis failed. Please try again.",z8="Back",B8="Plant",F8="Tomato",H8="Pepper",q8="Cucumber",$8="Rose",G8="Succulent",K8="Orchid",Y8="Lemon",Q8="Strawberry",W8="Mint",X8="Other",J8="Healthy / No Issue",Z8="Yellowing Leaves",ez="Leaf Spots",tz="Wilting",nz="Pests / Bugs",rz="Root/Stem Rot",iz="Mold / Fungus",sz="Unknown / Help Needed",az="Auto-Detect from Image",oz="Detecting...",lz="Ask Question",cz="Please login to post.",uz="Login Required",hz="Are you sure you want to delete this post?",dz="Just now",fz="Failed to delete post",mz="Failed to post comment",gz="Failed to update post",pz="Add a comment...",yz="Please login to comment.",_z="No comments yet. Be the first!",vz="Edit Post",bz="Cancel",wz="Save",xz="Gardener",Ez="Community Member",Tz="Send Message",Sz="Starting...",Az="Please login to message users.",Iz="You cannot message yourself.",Rz="Failed to start chat.",Cz=" No posts yet",Nz="Be the first to share your garden!",kz="No results",Dz="Like",Oz="Comment",Mz="Edit",Pz="Joined",jz="Unknown Date",Vz="View Profile",Lz="Block User",Uz="Unblock User",zz="Posts",Bz="Likes",Fz="My Posts",Hz="{{name}}'s Posts",qz="New Chat",$z="View Analysis Report",Gz="Type a message...",Kz="POWERED BY GEMINI AI",Yz="Heal your plants with",Qz="AI Precision",Wz="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",Xz="Instant Analysis",Jz="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",Zz="Smart Interactions",e7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",t7="Verified Treatments",n7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",r7="Your Personal Pocket Botanist",i7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",s7="Open Camera",a7="Select from Gallery",o7="No plant detected. Please ensure the subject is a clear plant or leaf.",l7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",c7="Retry",u7="Camera access denied. Please check your browser permissions.",h7="Last seen",d7="Prevention Tips",f7="This plant may not fully recover, but follow these steps to prevent spread.",m7="Description",g7="Urgency",p7="Spread Risk",y7="New Scan",_7={app_name:$9,welcome:G9,plant_diagnosis:K9,community:Y9,profile:Q9,login:W9,messages:X9,language:J9,logout:Z9,dark_mode:e8,light_mode:t8,analyses:n8,register:r8,upload_photo:i8,take_photo:s8,analyzing:a8,results:o8,treatment:l8,confidence:c8,save_changes:u8,saving:h8,display_name:d8,email:f8,change_avatar:m8,profile_updated:g8,about:p8,what_plant_question:y8,what_plant_placeholder:_8,scan_step_1:v8,scan_step_2:b8,next_step:w8,skip:x8,need_macro_photo:E8,take_macro_photo:T8,login_blur_text:S8,login_to_view:A8,guest_limited:I8,hero_badge:R8,hero_title:C8,hero_desc:N8,start_diagnosis:k8,step_1_title:D8,step_1_desc:O8,step_2_title:M8,step_2_desc:P8,step_3_title:j8,step_3_desc:V8,welcome_user:L8,error_diagnosis_failed:U8,back:z8,plant:B8,plant_tomato:F8,plant_pepper:H8,plant_cucumber:q8,plant_rose:$8,plant_succulent:G8,plant_orchid:K8,plant_lemon:Y8,plant_strawberry:Q8,plant_mint:W8,plant_other:X8,disease_none:J8,disease_yellowing:Z8,disease_spots:ez,disease_wilting:tz,disease_bugs:nz,disease_rot:rz,disease_mold:iz,disease_unknown:sz,auto_detect:az,detecting:oz,ask_question:lz,login_to_post:cz,login_required:uz,confirm_delete_post:hz,just_now:dz,failed_delete_post:fz,failed_post_comment:mz,failed_update_post:gz,add_comment_placeholder:pz,login_to_comment:yz,no_comments_yet:_z,edit_post:vz,cancel:bz,save:wz,gardener:xz,community_member:Ez,send_message:Tz,starting_chat:Sz,login_to_message:Az,cannot_message_self:Iz,failed_start_chat:Rz,no_posts_yet:Cz,be_the_first:Nz,no_results:kz,like:Dz,comment:Oz,edit:Mz,delete:"Delete",joined:Pz,unknown_date:jz,view_profile:Vz,block_user:Lz,unblock_user:Uz,posts:zz,likes:Bz,my_posts:Fz,user_posts_title:Hz,new_conversation:qz,view_analysis_report:$z,type_message:Gz,ai_powered_v2:Kz,hero_title_1:Yz,hero_title_highlight:Qz,hero_desc_v2:Wz,feature_1_title:Xz,feature_1_desc:Jz,feature_2_title:Zz,feature_2_desc:e7,feature_3_title:t7,feature_3_desc:n7,summary_title:r7,summary_desc:i7,open_camera:s7,upload_gallery:a7,error_not_plant:o7,error_server_busy:l7,retry:c7,camera_permission_denied:u7,last_seen:h7,prevention_tips:d7,plant_not_recoverable:f7,description:m7,urgency:g7,spread_risk:p7,new_scan:y7},v7="Bitki AI",b7="Bitki AI'ye Hogeldiniz",w7="Bitki Tehisi",x7="Topluluk",E7="Profil",T7="Giri Yap",S7="Mesajlar",A7="Dil",I7="k Yap",R7="Koyu Tema",C7="Aydnlk Tema",N7="Analizlerim",k7="Kayt Ol",D7="Fotoraf Ykle",O7="Fotoraf ek",M7="Analiz ediliyor...",P7="Bitki",j7="Domates",V7="Biber",L7="Salatalk",U7="Patlcan",z7="Patates",B7="Soan",F7="Sarmsak",H7="Marul",q7="Ispanak",$7="Havu",G7="Fasulye",K7="Msr",Y7="Kabak",Q7="ilek",W7="Limon",X7="Portakal",J7="Elma",Z7="zm",eB="Karpuz",tB="Kavun",nB="Kiraz",rB="eftali",iB="Gl",sB="Orkide",aB="Sukulent",oB="Lale",lB="Ayiei",cB="Papatya",uB="Lavanta",hB="Kakts",dB="Zeytin",fB="am",mB="Palmiye",gB="Nane",pB="Fesleen",yB="Biberiye",_B="Maydanoz",vB="Dier",bB="Salkl / Sorun Yok",wB="Yaprak Sararmas",xB="Yaprak Lekeleri",EB="Solma",TB="Bcek / Haere",SB="Kk/Gvde rmesi",AB="Kf / Mantar",IB="Mildiy",RB="Besin Eksiklii",CB="Bilinmiyor / Yardm Lazm",NB="Fotoraftan Bul",kB="Taranyor...",DB="Bitki Se...",OB="Tehis Sonular",MB="Tedavi",PB="Gven Oran",jB="Deiiklikleri Kaydet",VB="Analizi Kaydet",LB="Kaydedildi",UB="Analiz baaryla kaydedildi!",zB="Bu analiz zaten toplulukla paylald.",BB="Bu analizi toplulukla paylamak istiyor musunuz?",FB="Baaryla paylald!",HB="Analizlerim",qB="Kaydediliyor...",$B="Grnen sim",GB="E-posta",KB="Fotoraf deitirmek iin dokunun",YB="Profil baaryla gncellendi!",QB="Proje Hakknda",WB="Bu bitkinin adn biliyor musunuz?",XB="rn. Gl, Domates, Bilmiyorum...",JB="1. Bitki Ad",ZB="2. Fotoraf ek",eF="Devam Et",tF="Bilmiyorum",nF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",rF="Yakndan ek",iF="Detayl tehis ve tedavi plann grmek iin giri yapn.",sF="Sonucu Grmek in Giri Yap",aF="Detayl analiz sadece yelere zeldir.",oF="Yapay Zeka Destekli Bitki Doktoru",lF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',cF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",uF="Tehise Bala",hF="Tanmla",dF="Bitkinin adn veya trn belirtin.",fF="Analiz Et",mF="Etkilenen blgenin fotorafn ykleyin.",gF="yiletir",pF="Annda tedavi planna kavuun.",yF="Hogeldin, ",_F="Tehis baarsz oldu. Ltfen tekrar deneyin.",vF="Geri",bF="Az nce",wF="Bu gnderiyi silmek istediinize emin misiniz?",xF="Gnderi silinemedi",EF="Yorum gnderilemedi",TF="Gnderi gncellenemedi",SF="Yorum yaz...",AF="Yorum yapmak iin giri yapn.",IF="Henz yorum yok. lk yorumu sen yap!",RF="Gnderiyi Dzenle",CF="ptal",NF="Kaydet",kF="Bahvan",DF="Topluluk yesi",OF="Mesaj Gnder",MF="Balatlyor...",PF="Mesaj gndermek iin giri yapn.",jF="Kendinize mesaj atamazsnz.",VF="Sohbet balatlamad.",LF=" Henz gnderi yok",UF="Baheni paylaan ilk kii ol!",zF="Sonu yok",BF="Been",FF="Yorum",HF="Dzenle",qF="Ad Soyad",$F="ifre",GF="Toplulua katlmak iin hesap oluturun.",KF="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",YF="E-postanz Dorulayn",QF="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",WF="E-posta Uygulamasn A",XF="Doruladm, Giri Yap",JF="Zaten hesabnz var m?",ZF="Katlma Tarihi",eH="Bilinmiyor",tH="Profili Gr",nH="Kullancy Engelle",rH="Engeli Kaldr",iH="Gnderi",sH="Beeni",aH="Gnderilerim",oH="{{name}} Gnderileri",lH="Yeni Sohbet",cH="Analiz Raporunu Gr",uH="Mesaj yazn...",hH="GEMINI AI DESTEKL",dH="Bitkilerinizi yiletirin",fH="Yapay Zeka Hassasiyeti",mH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",gH="Annda Analiz",pH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",yH="Akll Etkileimler",_H="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",vH="Dorulanm Tedaviler",bH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",wH="Kiisel Cep Botanikiniz",xH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",EH="Kameray A",TH="Galeriden Se",SH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",AH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",IH="Tekrar Dene",RH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",CH="Yakn ekim Fotoraf",NH="Bitki AI Dnyor...",kH="Analiz kaydedilemedi:",DH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",OH="Bu cihazda mikrofon bulunamad.",MH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",PH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",jH="Kaydediliyor...",VH="Mesaj dzenleniyor...",LH="Mesajnz dzenleyin...",UH="Tedavi sreci balatld!",zH="Bilgiyi Kaydet",BH="Tedaviye Bala",FH="Henz Bir Analiz Yok",HH="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",qH="Tedavi & Takip",$H="Kayt",GH="Bu analizi silmek istediinizden emin misiniz?",KH="Gelime Ekle",YH="Paylald",QH="Payla",WH="Toplulukla paylaarak bakalarna yardmc ol!",XH="Soru Sor",JH="Fotoraf",ZH="Sesli Mesaj",eq="Son grlme {{days}} gn nce",tq="Son grlme {{hours}} saat nce",nq="Son grlme {{minutes}} dakika nce",rq="Az nce grld",iq="Dzenlendi",sq="Payla",aq="Balanty Kopyala",oq="Balant kopyaland!",lq="Sosyal Medyada Payla",cq="Son grlme",uq="Koruyucu nlemler",hq="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",dq="Aklama",fq="Aciliyet",mq="Yaylma Riski",gq="Yeni Tarama",pq={app_name:v7,welcome:b7,plant_diagnosis:w7,community:x7,profile:E7,login:T7,messages:S7,language:A7,logout:I7,dark_mode:R7,light_mode:C7,analyses:N7,register:k7,upload_photo:D7,take_photo:O7,analyzing:M7,plant:P7,plant_tomato:j7,plant_pepper:V7,plant_cucumber:L7,plant_eggplant:U7,plant_potato:z7,plant_onion:B7,plant_garlic:F7,plant_lettuce:H7,plant_spinach:q7,plant_carrot:$7,plant_bean:G7,plant_corn:K7,plant_zucchini:Y7,plant_strawberry:Q7,plant_lemon:W7,plant_orange:X7,plant_apple:J7,plant_grape:Z7,plant_watermelon:eB,plant_melon:tB,plant_cherry:nB,plant_peach:rB,plant_rose:iB,plant_orchid:sB,plant_succulent:aB,plant_tulip:oB,plant_sunflower:lB,plant_daisy:cB,plant_lavender:uB,plant_cactus:hB,plant_olive:dB,plant_pine:fB,plant_palm:mB,plant_mint:gB,plant_basil:pB,plant_rosemary:yB,plant_parsley:_B,plant_other:vB,disease_none:bB,disease_yellowing:wB,disease_spots:xB,disease_wilting:EB,disease_bugs:TB,disease_rot:SB,disease_mold:AB,disease_mildew:IB,disease_nutrient:RB,disease_unknown:CB,auto_detect:NB,detecting:kB,select_plant:DB,results:OB,treatment:MB,confidence:PB,save_changes:jB,save_analysis:VB,saved:LB,save_success:UB,already_shared:zB,confirm_share:BB,share_success:FB,my_analyses:HB,saving:qB,display_name:$B,email:GB,change_avatar:KB,profile_updated:YB,about:QB,what_plant_question:WB,what_plant_placeholder:XB,scan_step_1:JB,scan_step_2:ZB,next_step:eF,skip:tF,need_macro_photo:nF,take_macro_photo:rF,login_blur_text:iF,login_to_view:sF,guest_limited:aF,hero_badge:oF,hero_title:lF,hero_desc:cF,start_diagnosis:uF,step_1_title:hF,step_1_desc:dF,step_2_title:fF,step_2_desc:mF,step_3_title:gF,step_3_desc:pF,welcome_user:yF,error_diagnosis_failed:_F,back:vF,just_now:bF,confirm_delete_post:wF,failed_delete_post:xF,failed_post_comment:EF,failed_update_post:TF,add_comment_placeholder:SF,login_to_comment:AF,no_comments_yet:IF,edit_post:RF,cancel:CF,save:NF,gardener:kF,community_member:DF,send_message:OF,starting_chat:MF,login_to_message:PF,cannot_message_self:jF,failed_start_chat:VF,no_posts_yet:LF,be_the_first:UF,no_results:zF,like:BF,comment:FF,edit:HF,delete:"Sil",full_name:qF,password:$F,create_account_desc:GF,verification_email_sent:KF,verify_email_title:YF,verify_email_desc:QF,open_email_app:WF,i_verified_it:XF,already_have_account:JF,joined:ZF,unknown_date:eH,view_profile:tH,block_user:nH,unblock_user:rH,posts:iH,likes:sH,my_posts:aH,user_posts_title:oH,new_conversation:lH,view_analysis_report:cH,type_message:uH,ai_powered_v2:hH,hero_title_1:dH,hero_title_highlight:fH,hero_desc_v2:mH,feature_1_title:gH,feature_1_desc:pH,feature_2_title:yH,feature_2_desc:_H,feature_3_title:vH,feature_3_desc:bH,summary_title:wH,summary_desc:xH,open_camera:EH,upload_gallery:TH,error_not_plant:SH,error_server_busy:AH,retry:IH,camera_permission_denied:RH,close_up_photo:CH,ai_thinking:NH,save_fail:kH,mic_access_denied:DH,mic_not_found:OH,mic_unavailable:MH,mic_generic_error:PH,recording:jH,editing_message:VH,edit_message_placeholder:LH,treatment_started:UH,save_info:zH,start_treatment:BH,no_analyses_title:FH,no_analyses_desc:HH,treatment_updates:qH,records:$H,confirm_delete:GH,add_update:KH,shared:YH,share:QH,share_help_others:WH,ask_question:XH,photo:JH,voice_message:ZH,last_seen_day:eq,last_seen_hour:tq,last_seen_min:nq,last_seen_just_now:rq,edited:iq,share_title:sq,copy_link:aq,link_copied:oq,social_share:lq,last_seen:cq,prevention_tips:uq,plant_not_recoverable:hq,description:dq,urgency:fq,spread_risk:mq,new_scan:gq};Qn.use(uD).init({resources:{en:{translation:_7},tr:{translation:pq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});iN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(VI,{children:b.jsx(Ek,{children:b.jsx(wj,{children:b.jsx(q9,{})})})})}));
