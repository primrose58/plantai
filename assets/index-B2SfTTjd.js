(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function iN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fy={exports:{}},Su={};var ww;function sN(){if(ww)return Su;ww=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return Su.Fragment=e,Su.jsx=t,Su.jsxs=t,Su}var xw;function aN(){return xw||(xw=1,fy.exports=sN()),fy.exports}var b=aN(),my={exports:{}},ze={};var Ew;function oN(){if(Ew)return ze;Ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=v&&H[v]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function L(H,K,ne){this.props=H,this.context=K,this.refs=O,this.updater=ne||T}L.prototype.isReactComponent={},L.prototype.setState=function(H,K){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,K,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function B(){}B.prototype=L.prototype;function F(H,K,ne){this.props=H,this.context=K,this.refs=O,this.updater=ne||T}var q=F.prototype=new B;q.constructor=F,k(q,L.prototype),q.isPureReactComponent=!0;var Y=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function S(H,K,ne){var re=ne.ref;return{$$typeof:r,type:H,key:K,ref:re!==void 0?re:null,props:ne}}function I(H,K){return S(H.type,K,H.props)}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function V(H){var K={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ne){return K[ne]})}var C=/\/+/g;function G(H,K){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):K.toString(36)}function ee(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(z,z):(H.status="pending",H.then(function(K){H.status==="pending"&&(H.status="fulfilled",H.value=K)},function(K){H.status==="pending"&&(H.status="rejected",H.reason=K)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function P(H,K,ne,re,ie){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Te=!1;if(H===null)Te=!0;else switch(ye){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(H.$$typeof){case r:case e:Te=!0;break;case g:return Te=H._init,P(Te(H._payload),K,ne,re,ie)}}if(Te)return ie=ie(H),Te=re===""?"."+G(H,0):re,Y(ie)?(ne="",Te!=null&&(ne=Te.replace(C,"$&/")+"/"),P(ie,K,ne,"",function(Ye){return Ye})):ie!=null&&(N(ie)&&(ie=I(ie,ne+(ie.key==null||H&&H.key===ie.key?"":(""+ie.key).replace(C,"$&/")+"/")+Te)),K.push(ie)),1;Te=0;var Ne=re===""?".":re+":";if(Y(H))for(var Ie=0;Ie<H.length;Ie++)re=H[Ie],ye=Ne+G(re,Ie),Te+=P(re,K,ne,ye,ie);else if(Ie=w(H),typeof Ie=="function")for(H=Ie.call(H),Ie=0;!(re=H.next()).done;)re=re.value,ye=Ne+G(re,Ie++),Te+=P(re,K,ne,ye,ie);else if(ye==="object"){if(typeof H.then=="function")return P(ee(H),K,ne,re,ie);throw K=String(H),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Te}function D(H,K,ne){if(H==null)return H;var re=[],ie=0;return P(H,re,"","",function(ye){return K.call(ne,ye,ie++)}),re}function J(H){if(H._status===-1){var K=H._result;K=K(),K.then(function(ne){(H._status===0||H._status===-1)&&(H._status=1,H._result=ne)},function(ne){(H._status===0||H._status===-1)&&(H._status=2,H._result=ne)}),H._status===-1&&(H._status=0,H._result=K)}if(H._status===1)return H._result.default;throw H._result}var W=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Z={map:D,forEach:function(H,K,ne){D(H,function(){K.apply(this,arguments)},ne)},count:function(H){var K=0;return D(H,function(){K++}),K},toArray:function(H){return D(H,function(K){return K})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ze.Activity=y,ze.Children=Z,ze.Component=L,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=F,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},ze.cache=function(H){return function(){return H.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(H,K,ne){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var re=k({},H.props),ie=H.key;if(K!=null)for(ye in K.key!==void 0&&(ie=""+K.key),K)!x.call(K,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&K.ref===void 0||(re[ye]=K[ye]);var ye=arguments.length-2;if(ye===1)re.children=ne;else if(1<ye){for(var Te=Array(ye),Ne=0;Ne<ye;Ne++)Te[Ne]=arguments[Ne+2];re.children=Te}return S(H.type,ie,re)},ze.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},ze.createElement=function(H,K,ne){var re,ie={},ye=null;if(K!=null)for(re in K.key!==void 0&&(ye=""+K.key),K)x.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ie[re]=K[re]);var Te=arguments.length-2;if(Te===1)ie.children=ne;else if(1<Te){for(var Ne=Array(Te),Ie=0;Ie<Te;Ie++)Ne[Ie]=arguments[Ie+2];ie.children=Ne}if(H&&H.defaultProps)for(re in Te=H.defaultProps,Te)ie[re]===void 0&&(ie[re]=Te[re]);return S(H,ye,ie)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(H){return{$$typeof:u,render:H}},ze.isValidElement=N,ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:J}},ze.memo=function(H,K){return{$$typeof:f,type:H,compare:K===void 0?null:K}},ze.startTransition=function(H){var K=M.T,ne={};M.T=ne;try{var re=H(),ie=M.S;ie!==null&&ie(ne,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(z,W)}catch(ye){W(ye)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),M.T=K}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(H){return M.H.use(H)},ze.useActionState=function(H,K,ne){return M.H.useActionState(H,K,ne)},ze.useCallback=function(H,K){return M.H.useCallback(H,K)},ze.useContext=function(H){return M.H.useContext(H)},ze.useDebugValue=function(){},ze.useDeferredValue=function(H,K){return M.H.useDeferredValue(H,K)},ze.useEffect=function(H,K){return M.H.useEffect(H,K)},ze.useEffectEvent=function(H){return M.H.useEffectEvent(H)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(H,K,ne){return M.H.useImperativeHandle(H,K,ne)},ze.useInsertionEffect=function(H,K){return M.H.useInsertionEffect(H,K)},ze.useLayoutEffect=function(H,K){return M.H.useLayoutEffect(H,K)},ze.useMemo=function(H,K){return M.H.useMemo(H,K)},ze.useOptimistic=function(H,K){return M.H.useOptimistic(H,K)},ze.useReducer=function(H,K,ne){return M.H.useReducer(H,K,ne)},ze.useRef=function(H){return M.H.useRef(H)},ze.useState=function(H){return M.H.useState(H)},ze.useSyncExternalStore=function(H,K,ne){return M.H.useSyncExternalStore(H,K,ne)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.2.3",ze}var Tw;function Dm(){return Tw||(Tw=1,my.exports=oN()),my.exports}var $=Dm();const UT=iN($);var gy={exports:{}},Au={},py={exports:{}},yy={};var Sw;function lN(){return Sw||(Sw=1,(function(r){function e(P,D){var J=P.length;P.push(D);e:for(;0<J;){var W=J-1>>>1,Z=P[W];if(0<s(Z,D))P[W]=D,P[J]=Z,J=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var D=P[0],J=P.pop();if(J!==D){P[0]=J;e:for(var W=0,Z=P.length,H=Z>>>1;W<H;){var K=2*(W+1)-1,ne=P[K],re=K+1,ie=P[re];if(0>s(ne,J))re<Z&&0>s(ie,ne)?(P[W]=ie,P[re]=J,W=re):(P[W]=ne,P[K]=J,W=K);else if(re<Z&&0>s(ie,J))P[W]=ie,P[re]=J,W=re;else break e}}return D}function s(P,D){var J=P.sortIndex-D.sortIndex;return J!==0?J:P.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,T=!1,k=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(P){for(var D=t(f);D!==null;){if(D.callback===null)n(f);else if(D.startTime<=P)n(f),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(f)}}function Y(P){if(k=!1,q(P),!T)if(t(d)!==null)T=!0,z||(z=!0,V());else{var D=t(f);D!==null&&ee(Y,D.startTime-P)}}var z=!1,M=-1,x=5,S=-1;function I(){return O?!0:!(r.unstable_now()-S<x)}function N(){if(O=!1,z){var P=r.unstable_now();S=P;var D=!0;try{e:{T=!1,k&&(k=!1,B(M),M=-1),w=!0;var J=v;try{t:{for(q(P),y=t(d);y!==null&&!(y.expirationTime>P&&I());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var Z=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof Z=="function"){y.callback=Z,q(P),D=!0;break t}y===t(d)&&n(d),q(P)}else n(d);y=t(d)}if(y!==null)D=!0;else{var H=t(f);H!==null&&ee(Y,H.startTime-P),D=!1}}break e}finally{y=null,v=J,w=!1}D=void 0}}finally{D?V():z=!1}}}var V;if(typeof F=="function")V=function(){F(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,G=C.port2;C.port1.onmessage=N,V=function(){G.postMessage(null)}}else V=function(){L(N,0)};function ee(P,D){M=L(function(){P(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var J=v;v=D;try{return P()}finally{v=J}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var J=v;v=P;try{return D()}finally{v=J}},r.unstable_scheduleCallback=function(P,D,J){var W=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,P={id:g++,callback:D,priorityLevel:P,startTime:J,expirationTime:Z,sortIndex:-1},J>W?(P.sortIndex=J,e(f,P),t(d)===null&&P===t(f)&&(k?(B(M),M=-1):k=!0,ee(Y,J-W))):(P.sortIndex=Z,e(d,P),T||w||(T=!0,z||(z=!0,V()))),P},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(P){var D=v;return function(){var J=v;v=D;try{return P.apply(this,arguments)}finally{v=J}}}})(yy)),yy}var Aw;function cN(){return Aw||(Aw=1,py.exports=lN()),py.exports}var _y={exports:{}},On={};var Iw;function uN(){if(Iw)return On;Iw=1;var r=Dm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Rw;function hN(){if(Rw)return _y.exports;Rw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_y.exports=uN(),_y.exports}var Cw;function dN(){if(Cw)return Au;Cw=1;var r=cN(),e=Dm(),t=hN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,j=p.child;j;){if(j===l){A=!0,l=p,h=_;break}if(j===h){A=!0,h=p,l=_;break}j=j.sibling}if(!A){for(j=_.child;j;){if(j===l){A=!0,l=_,h=p;break}if(j===h){A=!0,h=_,l=p;break}j=j.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case L:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case F:return i.displayName||"Context";case B:return(i._context.displayName||"Context")+".Consumer";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case x:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var ee=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},W=[],Z=-1;function H(i){return{current:i}}function K(i){0>Z||(i.current=W[Z],W[Z]=null,Z--)}function ne(i,a){Z++,W[Z]=i.current,i.current=a}var re=H(null),ie=H(null),ye=H(null),Te=H(null);function Ne(i,a){switch(ne(ye,a),ne(ie,i),ne(re,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?q1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=q1(a),i=$1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(re),ne(re,i)}function Ie(){K(re),K(ie),K(ye)}function Ye(i){i.memoizedState!==null&&ne(Te,i);var a=re.current,l=$1(a,i.type);a!==l&&(ne(ie,i),ne(re,l))}function nt(i){ie.current===i&&(K(re),K(ie)),Te.current===i&&(K(Te),wu._currentValue=J)}var Qe,Gt;function Rt(i){if(Qe===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Qe=a&&a[1]||"",Gt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+i+Gt}var mt=!1;function Ct(i,a){if(!i||mt)return"";mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],j=_[1];if(A&&j){var Q=A.split(`
`),le=j.split(`
`);for(p=h=0;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Q.length||p===le.length)for(h=Q.length-1,p=le.length-1;1<=h&&0<=p&&Q[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Q[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Q[h]!==le[p]){var fe=`
`+Q[h].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=h&&0<=p);break}}}finally{mt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Rt(l):""}function at(i,a){switch(i.tag){case 26:case 27:case 5:return Rt(i.type);case 16:return Rt("Lazy");case 13:return i.child!==a&&a!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return Rt("Activity");default:return""}}function ot(i){try{var a="",l=null;do a+=at(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var qe=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Oe=r.unstable_requestPaint,xe=r.unstable_now,rt=r.unstable_getCurrentPriorityLevel,gt=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,ut=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,Bt=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Kt=null,Et=null;function Zt(i){if(typeof kn=="function"&&wn(i),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Kt,i)}catch{}}var kt=Math.clz32?Math.clz32:Na,Yo=Math.log,ai=Math.LN2;function Na(i){return i>>>=0,i===0?32:31-(Yo(i)/ai|0)|0}var Dn=256,qi=262144,pt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var j=h&134217727;return j!==0?(h=j&~_,h!==0?p=hn(h):(A&=j,A!==0?p=hn(A):l||(l=j&~i,l!==0&&(p=hn(l))))):(j=h&~_,j!==0?p=hn(j):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Qo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var i=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),i}function pn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function ka(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _g(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var j=i.entanglements,Q=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-kt(l),ge=1<<fe;j[fe]=0,Q[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&Da(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function Da(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Ac(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-kt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function Ic(i,a){var l=a&-a;return l=(l&42)!==0?1:Oa(l),(l&(i.suspendedLanes|a))!==0?0:l}function Oa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function qh(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:mw(i.type))}function zr(i,a){var l=D.p;try{return D.p=i,a()}finally{D.p=l}}var Br=Math.random().toString(36).slice(2),en="__reactFiber$"+Br,yn="__reactProps$"+Br,oi="__reactContainer$"+Br,Wo="__reactEvents$"+Br,vg="__reactListeners$"+Br,$h="__reactHandles$"+Br,Gh="__reactResources$"+Br,li="__reactMarker$"+Br;function Xo(i){delete i[en],delete i[yn],delete i[Wo],delete i[vg],delete i[$h]}function ci(i){var a=i[en];if(a)return a;for(var l=i.parentNode;l;){if(a=l[oi]||l[en]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=J1(i);i!==null;){if(l=i[en])return l;i=J1(i)}return a}i=l,l=i.parentNode}return null}function Tr(i){if(i=i[en]||i[oi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function or(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ui(i){var a=i[Gh];return a||(a=i[Gh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(i){i[li]=!0}var Rc=new Set,Cc={};function hi(i,a){di(i,a),di(i+"Capture",a)}function di(i,a){for(Cc[i]=a,i=0;i<a.length;i++)Rc.add(a[i])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kc={},Dc={};function Kh(i){return qe.call(Dc,i)?!0:qe.call(kc,i)?!1:Nc.test(i)?Dc[i]=!0:(kc[i]=!0,!1)}function Jo(i,a,l){if(Kh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function lr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function nn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Is(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Oc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function yt(i){if(!i._valueTracker){var a=Is(i)?"checked":"value";i._valueTracker=Oc(i,a,""+i[a])}}function Ma(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Is(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Pa=/[\n"\\]/g;function Wn(i){return i.replace(Pa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zo(i,a,l,h,p,_,A,j){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+_n(a)):i.value!==""+_n(a)&&(i.value=""+_n(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Mc(i,A,_n(a)):l!=null?Mc(i,A,_n(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+_n(j):i.removeAttribute("name")}function Yh(i,a,l,h,p,_,A,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){yt(i);return}l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,j||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=j?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),yt(i)}function Mc(i,a,l){a==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Rs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Qh(i,a,l){if(a!=null&&(a=""+_n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+_n(l):""}function Cs(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(ee(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=_n(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),yt(i)}function Xn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Wh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Wh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Vc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Pc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Pc(i,_,a[_])}function el(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(i){return Ns.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fr(){}var Lc=null;function Sr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ks=null,mi=null;function Va(i){var a=Tr(i);if(a&&(i=a.stateNode)){var l=i[yn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Zo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[yn]||null;if(!p)throw Error(n(90));Zo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Ma(h)}break e;case"textarea":Qh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Rs(i,!!l.multiple,a,!1)}}}var nl=!1;function Ds(i,a,l){if(nl)return i(a,l);nl=!0;try{var h=i(a);return h}finally{if(nl=!1,(ks!==null||mi!==null)&&(qd(),ks&&(a=ks,i=mi,mi=ks=null,Va(a),i)))for(a=0;a<i.length;a++)Va(i[a])}}function Hr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[yn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=!1;if(Ar)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){La=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{La=!1}var gi=null,jc=null,ja=null;function Uc(){if(ja)return ja;var i,a=jc,l=a.length,h,p="value"in gi?gi.value:gi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return ja=p.slice(i,1<h?1-h:void 0)}function Ua(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function qr(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(l=i[j],this[j]=l?l(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:qr,this.isPropagationStopped=qr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=Tn(Ki),Os=y({},Ki,{view:0,detail:0}),zc=Tn(Os),Ms,rl,yi,il=y({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ms=i.screenX-yi.screenX,rl=i.screenY-yi.screenY):rl=Ms=0,yi=i),Ms)},movementY:function(i){return"movementY"in i?i.movementY:rl}}),Bc=Tn(il),za=y({},il,{dataTransfer:0}),Jh=Tn(za),Zh=y({},Os,{relatedTarget:0}),Ba=Tn(Zh),Fc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),ed=Tn(Fc),sl=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),td=Tn(sl),nd=y({},Ki,{data:0}),_i=Tn(nd),rd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ad(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=sd[i])?!!a[i]:!1}function Ps(){return ad}var Hn=y({},Os,{key:function(i){if(i.key){var a=rd[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ua(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?id[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(i){return i.type==="keypress"?Ua(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ua(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),od=Tn(Hn),ld=y({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Tn(ld),m=y({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),E=Tn(m),R=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Tn(R),ae=y({},il,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),be=y({},Ki,{newState:0,oldState:0}),Fe=Tn(be),Yt=[9,13,27,32],ht=Ar&&"CompositionEvent"in window,Pt=null;Ar&&"documentMode"in document&&(Pt=document.documentMode);var Ir=Ar&&"TextEvent"in window&&!Pt,vi=Ar&&(!ht||Pt&&8<Pt&&11>=Pt),$r=" ",Gr=!1;function Fa(i,a){switch(i){case"keyup":return Yt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function al(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ol=!1;function RR(i,a){switch(i){case"compositionend":return al(a);case"keypress":return a.which!==32?null:(Gr=!0,$r);case"textInput":return i=a.data,i===$r&&Gr?null:i;default:return null}}function CR(i,a){if(ol)return i==="compositionend"||!ht&&Fa(i,a)?(i=Uc(),ja=jc=gi=null,ol=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vi&&a.locale!=="ko"?null:a.data;default:return null}}var NR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!NR[i.type]:a==="textarea"}function nv(i,a,l,h){ks?mi?mi.push(h):mi=[h]:ks=h,a=Xd(a,"onChange"),0<a.length&&(l=new pi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Hc=null,qc=null;function kR(i){j1(i,0)}function cd(i){var a=or(i);if(Ma(a))return i}function rv(i,a){if(i==="change")return a}var iv=!1;if(Ar){var bg;if(Ar){var wg="oninput"in document;if(!wg){var sv=document.createElement("div");sv.setAttribute("oninput","return;"),wg=typeof sv.oninput=="function"}bg=wg}else bg=!1;iv=bg&&(!document.documentMode||9<document.documentMode)}function av(){Hc&&(Hc.detachEvent("onpropertychange",ov),qc=Hc=null)}function ov(i){if(i.propertyName==="value"&&cd(qc)){var a=[];nv(a,qc,i,Sr(i)),Ds(kR,a)}}function DR(i,a,l){i==="focusin"?(av(),Hc=a,qc=l,Hc.attachEvent("onpropertychange",ov)):i==="focusout"&&av()}function OR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return cd(qc)}function MR(i,a){if(i==="click")return cd(a)}function PR(i,a){if(i==="input"||i==="change")return cd(a)}function VR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var cr=typeof Object.is=="function"?Object.is:VR;function $c(i,a){if(cr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!qe.call(a,p)||!cr(i[p],a[p]))return!1}return!0}function lv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cv(i,a){var l=lv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=lv(l)}}function uv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?uv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function hv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=fi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=fi(i.document)}return a}function xg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var LR=Ar&&"documentMode"in document&&11>=document.documentMode,ll=null,Eg=null,Gc=null,Tg=!1;function dv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Tg||ll==null||ll!==fi(h)||(h=ll,"selectionStart"in h&&xg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Gc&&$c(Gc,h)||(Gc=h,h=Xd(Eg,"onSelect"),0<h.length&&(a=new pi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ll)))}function Ha(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var cl={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Sg={},fv={};Ar&&(fv=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function qa(i){if(Sg[i])return Sg[i];if(!cl[i])return i;var a=cl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in fv)return Sg[i]=a[l];return i}var mv=qa("animationend"),gv=qa("animationiteration"),pv=qa("animationstart"),jR=qa("transitionrun"),UR=qa("transitionstart"),zR=qa("transitioncancel"),yv=qa("transitionend"),_v=new Map,Ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ag.push("scrollEnd");function Kr(i,a){_v.set(i,a),hi(a,[i])}var ud=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Rr=[],ul=0,Ig=0;function hd(){for(var i=ul,a=Ig=ul=0;a<i;){var l=Rr[a];Rr[a++]=null;var h=Rr[a];Rr[a++]=null;var p=Rr[a];Rr[a++]=null;var _=Rr[a];if(Rr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&vv(l,p,_)}}function dd(i,a,l,h){Rr[ul++]=i,Rr[ul++]=a,Rr[ul++]=l,Rr[ul++]=h,Ig|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Rg(i,a,l,h){return dd(i,a,l,h),fd(i)}function $a(i,a){return dd(i,null,null,a),fd(i)}function vv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-kt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function fd(i){if(50<mu)throw mu=0,Lp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var hl={};function BR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,l,h){return new BR(i,a,l,h)}function Cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=ur(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function bv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function md(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Cg(i)&&(A=1);else if(typeof i=="string")A=GC(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case S:return i=ur(31,l,a,p),i.elementType=S,i.lanes=_,i;case k:return Ga(l.children,p,_,a);case O:A=8,p|=24;break;case L:return i=ur(12,l,a,p|2),i.elementType=L,i.lanes=_,i;case Y:return i=ur(13,l,a,p),i.elementType=Y,i.lanes=_,i;case z:return i=ur(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:A=10;break e;case B:A=9;break e;case q:A=11;break e;case M:A=14;break e;case x:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=ur(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function Ga(i,a,l,h){return i=ur(7,i,h,a),i.lanes=l,i}function Ng(i,a,l){return i=ur(6,i,null,a),i.lanes=l,i}function wv(i){var a=ur(18,null,null,0);return a.stateNode=i,a}function kg(i,a,l){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var xv=new WeakMap;function Cr(i,a){if(typeof i=="object"&&i!==null){var l=xv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:ot(a)},xv.set(i,a),a)}return{value:i,source:a,stack:ot(a)}}var dl=[],fl=0,gd=null,Kc=0,Nr=[],kr=0,Vs=null,bi=1,wi="";function Wi(i,a){dl[fl++]=Kc,dl[fl++]=gd,gd=i,Kc=a}function Ev(i,a,l){Nr[kr++]=bi,Nr[kr++]=wi,Nr[kr++]=Vs,Vs=i;var h=bi;i=wi;var p=32-kt(h)-1;h&=~(1<<p),l+=1;var _=32-kt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,bi=1<<32-kt(a)+p|l<<p|h,wi=_+i}else bi=1<<_|l<<p|h,wi=i}function Dg(i){i.return!==null&&(Wi(i,1),Ev(i,1,0))}function Og(i){for(;i===gd;)gd=dl[--fl],dl[fl]=null,Kc=dl[--fl],dl[fl]=null;for(;i===Vs;)Vs=Nr[--kr],Nr[kr]=null,wi=Nr[--kr],Nr[kr]=null,bi=Nr[--kr],Nr[kr]=null}function Tv(i,a){Nr[kr++]=bi,Nr[kr++]=wi,Nr[kr++]=Vs,bi=a.id,wi=a.overflow,Vs=i}var Sn=null,Dt=null,it=!1,Ls=null,Dr=!1,Mg=Error(n(519));function js(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yc(Cr(a,i)),Mg}function Sv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[en]=i,a[yn]=h,l){case"dialog":Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":case"embed":Xe("load",a);break;case"video":case"audio":for(l=0;l<pu.length;l++)Xe(pu[l],a);break;case"source":Xe("error",a);break;case"img":case"image":case"link":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"input":Xe("invalid",a),Yh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Xe("invalid",a);break;case"textarea":Xe("invalid",a),Cs(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||F1(a.textContent,l)?(h.popover!=null&&(Xe("beforetoggle",a),Xe("toggle",a)),h.onScroll!=null&&Xe("scroll",a),h.onScrollEnd!=null&&Xe("scrollend",a),h.onClick!=null&&(a.onclick=Fr),a=!0):a=!1,a||js(i,!0)}function Av(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Sn=Sn.return}}function ml(i){if(i!==Sn)return!1;if(!it)return Av(i),it=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Jp(i.type,i.memoizedProps)),l=!l),l&&Dt&&js(i),Av(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=X1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=X1(i)}else a===27?(a=Dt,Js(i.type)?(i=ry,ry=null,Dt=i):Dt=a):Dt=Sn?Mr(i.stateNode.nextSibling):null;return!0}function Ka(){Dt=Sn=null,it=!1}function Pg(){var i=Ls;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Ls=null),i}function Yc(i){Ls===null?Ls=[i]:Ls.push(i)}var Vg=H(null),Ya=null,Xi=null;function Us(i,a,l){ne(Vg,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=Vg.current,K(Vg)}function Lg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function jg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=p;for(var Q=0;Q<a.length;Q++)if(j.context===a[Q]){_.lanes|=l,j=_.alternate,j!==null&&(j.lanes|=l),Lg(_.return,l,i),h||(A=null);break e}_=j.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Lg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function gl(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var j=p.type;cr(p.pendingProps.value,A.value)||(i!==null?i.push(j):i=[j])}}else if(p===Te.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(wu):i=[wu])}p=p.return}i!==null&&jg(a,i,l,h),a.flags|=262144}function pd(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qa(i){Ya=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return Iv(Ya,i)}function yd(i,a){return Ya===null&&Qa(i),Iv(i,a)}function Iv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var FR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},HR=r.unstable_scheduleCallback,qR=r.unstable_NormalPriority,rn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ug(){return{controller:new FR,data:new Map,refCount:0}}function Qc(i){i.refCount--,i.refCount===0&&HR(qR,function(){i.controller.abort()})}var Wc=null,zg=0,pl=0,yl=null;function $R(i,a){if(Wc===null){var l=Wc=[];zg=0,pl=Hp(),yl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return zg++,a.then(Rv,Rv),a}function Rv(){if(--zg===0&&Wc!==null){yl!==null&&(yl.status="fulfilled");var i=Wc;Wc=null,pl=0,yl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function GR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var Cv=P.S;P.S=function(i,a){d1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&$R(i,a),Cv!==null&&Cv(i,a)};var Wa=H(null);function Bg(){var i=Wa.current;return i!==null?i:Nt.pooledCache}function _d(i,a){a===null?ne(Wa,Wa.current):ne(Wa,a.pool)}function Nv(){var i=Bg();return i===null?null:{parent:rn._currentValue,pool:i}}var _l=Error(n(460)),Fg=Error(n(474)),vd=Error(n(542)),bd={then:function(){}};function kv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Dv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fr,Fr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Mv(i),i;default:if(typeof a.status=="string")a.then(Fr,Fr);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Mv(i),i}throw Ja=a,_l}}function Xa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ja=l,_l):l}}var Ja=null;function Ov(){if(Ja===null)throw Error(n(459));var i=Ja;return Ja=null,i}function Mv(i){if(i===_l||i===vd)throw Error(n(483))}var vl=null,Xc=0;function wd(i){var a=Xc;return Xc+=1,vl===null&&(vl=[]),Dv(vl,i,a)}function Jc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function xd(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Pv(i){function a(te,X){if(i){var oe=te.deletions;oe===null?(te.deletions=[X],te.flags|=16):oe.push(X)}}function l(te,X){if(!i)return null;for(;X!==null;)a(te,X),X=X.sibling;return null}function h(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function p(te,X){return te=Qi(te,X),te.index=0,te.sibling=null,te}function _(te,X,oe){return te.index=oe,i?(oe=te.alternate,oe!==null?(oe=oe.index,oe<X?(te.flags|=67108866,X):oe):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function A(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function j(te,X,oe,me){return X===null||X.tag!==6?(X=Ng(oe,te.mode,me),X.return=te,X):(X=p(X,oe),X.return=te,X)}function Q(te,X,oe,me){var ke=oe.type;return ke===k?fe(te,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Xa(ke)===X.type)?(X=p(X,oe.props),Jc(X,oe),X.return=te,X):(X=md(oe.type,oe.key,oe.props,null,te.mode,me),Jc(X,oe),X.return=te,X)}function le(te,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=kg(oe,te.mode,me),X.return=te,X):(X=p(X,oe.children||[]),X.return=te,X)}function fe(te,X,oe,me,ke){return X===null||X.tag!==7?(X=Ga(oe,te.mode,me,ke),X.return=te,X):(X=p(X,oe),X.return=te,X)}function ge(te,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Ng(""+X,te.mode,oe),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=md(X.type,X.key,X.props,null,te.mode,oe),Jc(oe,X),oe.return=te,oe;case T:return X=kg(X,te.mode,oe),X.return=te,X;case x:return X=Xa(X),ge(te,X,oe)}if(ee(X)||V(X))return X=Ga(X,te.mode,oe,null),X.return=te,X;if(typeof X.then=="function")return ge(te,wd(X),oe);if(X.$$typeof===F)return ge(te,yd(te,X),oe);xd(te,X)}return null}function ce(te,X,oe,me){var ke=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return ke!==null?null:j(te,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===ke?Q(te,X,oe,me):null;case T:return oe.key===ke?le(te,X,oe,me):null;case x:return oe=Xa(oe),ce(te,X,oe,me)}if(ee(oe)||V(oe))return ke!==null?null:fe(te,X,oe,me,null);if(typeof oe.then=="function")return ce(te,X,wd(oe),me);if(oe.$$typeof===F)return ce(te,X,yd(te,oe),me);xd(te,oe)}return null}function he(te,X,oe,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(oe)||null,j(X,te,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?oe:me.key)||null,Q(X,te,me,ke);case T:return te=te.get(me.key===null?oe:me.key)||null,le(X,te,me,ke);case x:return me=Xa(me),he(te,X,oe,me,ke)}if(ee(me)||V(me))return te=te.get(oe)||null,fe(X,te,me,ke,null);if(typeof me.then=="function")return he(te,X,oe,wd(me),ke);if(me.$$typeof===F)return he(te,X,oe,yd(X,me),ke);xd(X,me)}return null}function Se(te,X,oe,me){for(var ke=null,lt=null,Re=X,$e=X=0,Ze=null;Re!==null&&$e<oe.length;$e++){Re.index>$e?(Ze=Re,Re=null):Ze=Re.sibling;var ct=ce(te,Re,oe[$e],me);if(ct===null){Re===null&&(Re=Ze);break}i&&Re&&ct.alternate===null&&a(te,Re),X=_(ct,X,$e),lt===null?ke=ct:lt.sibling=ct,lt=ct,Re=Ze}if($e===oe.length)return l(te,Re),it&&Wi(te,$e),ke;if(Re===null){for(;$e<oe.length;$e++)Re=ge(te,oe[$e],me),Re!==null&&(X=_(Re,X,$e),lt===null?ke=Re:lt.sibling=Re,lt=Re);return it&&Wi(te,$e),ke}for(Re=h(Re);$e<oe.length;$e++)Ze=he(Re,te,$e,oe[$e],me),Ze!==null&&(i&&Ze.alternate!==null&&Re.delete(Ze.key===null?$e:Ze.key),X=_(Ze,X,$e),lt===null?ke=Ze:lt.sibling=Ze,lt=Ze);return i&&Re.forEach(function(ra){return a(te,ra)}),it&&Wi(te,$e),ke}function Me(te,X,oe,me){if(oe==null)throw Error(n(151));for(var ke=null,lt=null,Re=X,$e=X=0,Ze=null,ct=oe.next();Re!==null&&!ct.done;$e++,ct=oe.next()){Re.index>$e?(Ze=Re,Re=null):Ze=Re.sibling;var ra=ce(te,Re,ct.value,me);if(ra===null){Re===null&&(Re=Ze);break}i&&Re&&ra.alternate===null&&a(te,Re),X=_(ra,X,$e),lt===null?ke=ra:lt.sibling=ra,lt=ra,Re=Ze}if(ct.done)return l(te,Re),it&&Wi(te,$e),ke;if(Re===null){for(;!ct.done;$e++,ct=oe.next())ct=ge(te,ct.value,me),ct!==null&&(X=_(ct,X,$e),lt===null?ke=ct:lt.sibling=ct,lt=ct);return it&&Wi(te,$e),ke}for(Re=h(Re);!ct.done;$e++,ct=oe.next())ct=he(Re,te,$e,ct.value,me),ct!==null&&(i&&ct.alternate!==null&&Re.delete(ct.key===null?$e:ct.key),X=_(ct,X,$e),lt===null?ke=ct:lt.sibling=ct,lt=ct);return i&&Re.forEach(function(rN){return a(te,rN)}),it&&Wi(te,$e),ke}function It(te,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===k&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var ke=oe.key;X!==null;){if(X.key===ke){if(ke=oe.type,ke===k){if(X.tag===7){l(te,X.sibling),me=p(X,oe.props.children),me.return=te,te=me;break e}}else if(X.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Xa(ke)===X.type){l(te,X.sibling),me=p(X,oe.props),Jc(me,oe),me.return=te,te=me;break e}l(te,X);break}else a(te,X);X=X.sibling}oe.type===k?(me=Ga(oe.props.children,te.mode,me,oe.key),me.return=te,te=me):(me=md(oe.type,oe.key,oe.props,null,te.mode,me),Jc(me,oe),me.return=te,te=me)}return A(te);case T:e:{for(ke=oe.key;X!==null;){if(X.key===ke)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(te,X.sibling),me=p(X,oe.children||[]),me.return=te,te=me;break e}else{l(te,X);break}else a(te,X);X=X.sibling}me=kg(oe,te.mode,me),me.return=te,te=me}return A(te);case x:return oe=Xa(oe),It(te,X,oe,me)}if(ee(oe))return Se(te,X,oe,me);if(V(oe)){if(ke=V(oe),typeof ke!="function")throw Error(n(150));return oe=ke.call(oe),Me(te,X,oe,me)}if(typeof oe.then=="function")return It(te,X,wd(oe),me);if(oe.$$typeof===F)return It(te,X,yd(te,oe),me);xd(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(te,X.sibling),me=p(X,oe),me.return=te,te=me):(l(te,X),me=Ng(oe,te.mode,me),me.return=te,te=me),A(te)):l(te,X)}return function(te,X,oe,me){try{Xc=0;var ke=It(te,X,oe,me);return vl=null,ke}catch(Re){if(Re===_l||Re===vd)throw Re;var lt=ur(29,Re,null,te.mode);return lt.lanes=me,lt.return=te,lt}finally{}}}var Za=Pv(!0),Vv=Pv(!1),zs=!1;function Hg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Bs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Fs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=fd(i),vv(i,null,l),a}return dd(i,h,a,l),fd(i)}function Zc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}function $g(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Gg=!1;function eu(){if(Gg){var i=yl;if(i!==null)throw i}}function tu(i,a,l,h){Gg=!1;var p=i.updateQueue;zs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var Q=j,le=Q.next;Q.next=null,A===null?_=le:A.next=le,A=Q;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,j=fe.lastBaseUpdate,j!==A&&(j===null?fe.firstBaseUpdate=le:j.next=le,fe.lastBaseUpdate=Q))}if(_!==null){var ge=p.baseState;A=0,fe=le=Q=null,j=_;do{var ce=j.lane&-536870913,he=ce!==j.lane;if(he?(Je&ce)===ce:(h&ce)===ce){ce!==0&&ce===pl&&(Gg=!0),fe!==null&&(fe=fe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Se=i,Me=j;ce=a;var It=l;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){ge=Se.call(It,ge,ce);break e}ge=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,ce=typeof Se=="function"?Se.call(It,ge,ce):Se,ce==null)break e;ge=y({},ge,ce);break e;case 2:zs=!0}}ce=j.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},fe===null?(le=fe=he,Q=ge):fe=fe.next=he,A|=ce;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;he=j,j=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);fe===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,_===null&&(p.shared.lanes=0),Ks|=A,i.lanes=A,i.memoizedState=ge}}function Lv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function jv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Lv(l[i],a)}var bl=H(null),Ed=H(0);function Uv(i,a){i=os,ne(Ed,i),ne(bl,a),os=i|a.baseLanes}function Kg(){ne(Ed,os),ne(bl,bl.current)}function Yg(){os=Ed.current,K(bl),K(Ed)}var hr=H(null),Or=null;function Hs(i){var a=i.alternate;ne(Qt,Qt.current&1),ne(hr,i),Or===null&&(a===null||bl.current!==null||a.memoizedState!==null)&&(Or=i)}function Qg(i){ne(Qt,Qt.current),ne(hr,i),Or===null&&(Or=i)}function zv(i){i.tag===22?(ne(Qt,Qt.current),ne(hr,i),Or===null&&(Or=i)):qs()}function qs(){ne(Qt,Qt.current),ne(hr,hr.current)}function dr(i){K(hr),Or===i&&(Or=null),K(Qt)}var Qt=H(0);function Td(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ty(l)||ny(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,He=null,St=null,sn=null,Sd=!1,wl=!1,eo=!1,Ad=0,nu=0,xl=null,KR=0;function Ft(){throw Error(n(321))}function Wg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!cr(i[l],a[l]))return!1;return!0}function Xg(i,a,l,h,p,_){return Zi=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?Eb:dp,eo=!1,_=l(h,p),eo=!1,wl&&(_=Fv(a,l,h,p)),Bv(i),_}function Bv(i){P.H=su;var a=St!==null&&St.next!==null;if(Zi=0,sn=St=He=null,Sd=!1,nu=0,xl=null,a)throw Error(n(300));i===null||an||(i=i.dependencies,i!==null&&pd(i)&&(an=!0))}function Fv(i,a,l,h){He=i;var p=0;do{if(wl&&(xl=null),nu=0,wl=!1,25<=p)throw Error(n(301));if(p+=1,sn=St=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=Tb,_=a(l,h)}while(wl);return _}function YR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(St!==null?St.memoizedState:null)!==i&&(He.flags|=1024),a}function Jg(){var i=Ad!==0;return Ad=0,i}function Zg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ep(i){if(Sd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Sd=!1}Zi=0,sn=St=He=null,wl=!1,nu=Ad=0,xl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?He.memoizedState=sn=i:sn=sn.next=i,sn}function Wt(){if(St===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=St.next;var a=sn===null?He.memoizedState:sn.next;if(a!==null)sn=a,St=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));St=i,i={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},sn===null?He.memoizedState=sn=i:sn=sn.next=i}return sn}function Id(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=nu;return nu+=1,xl===null&&(xl=[]),i=Dv(xl,i,a),a=He,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Eb:dp),i}function Rd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===F)return An(i)}throw Error(n(438,String(i)))}function tp(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Id(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=I;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function Cd(i){var a=Wt();return np(a,St,i)}function np(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var j=A=null,Q=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(Je&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===pl&&(fe=!0);else if((Zi&ce)===ce){le=le.next,ce===pl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(j=Q=ge,A=_):Q=Q.next=ge,He.lanes|=ce,Ks|=ce;ge=le.action,eo&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(j=Q=ce,A=_):Q=Q.next=ce,He.lanes|=ge,Ks|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=_:Q.next=j,!cr(_,i.memoizedState)&&(an=!0,fe&&(l=yl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Q,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function rp(i){var a=Wt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);cr(_,a.memoizedState)||(an=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function Hv(i,a,l){var h=He,p=Wt(),_=it;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!cr((St||p).memoizedState,l);if(A&&(p.memoizedState=l,an=!0),p=p.queue,ap(Gv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,El(9,{destroy:void 0},$v.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||qv(h,a,l)}return l}function qv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=Id(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function $v(i,a,l,h){a.value=l,a.getSnapshot=h,Kv(a)&&Yv(i)}function Gv(i,a,l){return l(function(){Kv(a)&&Yv(i)})}function Kv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!cr(i,l)}catch{return!0}}function Yv(i){var a=$a(i,2);a!==null&&nr(a,i,2)}function ip(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),eo){Zt(!0);try{l()}finally{Zt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function Qv(i,a,l,h){return i.baseState=l,np(i,St,typeof h=="function"?h:es)}function QR(i,a,l,h,p){if(Dd(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,Wv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Wv(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var j=l(p,h),Q=P.S;Q!==null&&Q(A,j),Xv(i,a,j)}catch(le){sp(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),Xv(i,a,_)}catch(le){sp(i,a,le)}}function Xv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Jv(i,a,h)},function(h){return sp(i,a,h)}):Jv(i,a,l)}function Jv(i,a,l){a.status="fulfilled",a.value=l,Zv(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Wv(i,l)))}function sp(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,Zv(a),a=a.next;while(a!==h)}i.action=null}function Zv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function eb(i,a){return a}function tb(i,a){if(it){var l=Nt.formState;if(l!==null){e:{var h=He;if(it){if(Dt){t:{for(var p=Dt,_=Dr;p.nodeType!==8;){if(!_){p=null;break t}if(p=Mr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Dt=Mr(p.nextSibling),h=p.data==="F!";break e}}js(h)}h=!1}h&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eb,lastRenderedState:a},l.queue=h,l=bb.bind(null,He,h),h.dispatch=l,h=ip(!1),_=hp.bind(null,He,!1,h.queue),h=qn(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=QR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function nb(i){var a=Wt();return rb(a,St,i)}function rb(i,a,l){if(a=np(i,a,eb)[0],i=Cd(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ru(a)}catch(A){throw A===_l?vd:A}else h=a;a=Wt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,El(9,{destroy:void 0},WR.bind(null,p,l),null)),[h,_,i]}function WR(i,a){i.action=a}function ib(i){var a=Wt(),l=St;if(l!==null)return rb(a,l,i);Wt(),a=a.memoizedState,l=Wt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function El(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=Id(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function sb(){return Wt().memoizedState}function Nd(i,a,l,h){var p=qn();He.flags|=i,p.memoizedState=El(1|a,{destroy:void 0},l,h===void 0?null:h)}function kd(i,a,l,h){var p=Wt();h=h===void 0?null:h;var _=p.memoizedState.inst;St!==null&&h!==null&&Wg(h,St.memoizedState.deps)?p.memoizedState=El(a,_,l,h):(He.flags|=i,p.memoizedState=El(1|a,_,l,h))}function ab(i,a){Nd(8390656,8,i,a)}function ap(i,a){kd(2048,8,i,a)}function XR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=Id(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function ob(i){var a=Wt().memoizedState;return XR({ref:a,nextImpl:i}),function(){if((dt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function lb(i,a){return kd(4,2,i,a)}function cb(i,a){return kd(4,4,i,a)}function ub(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function hb(i,a,l){l=l!=null?l.concat([i]):null,kd(4,4,ub.bind(null,a,i),l)}function op(){}function db(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Wg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function fb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Wg(a,h[1]))return h[0];if(h=i(),eo){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h}function lp(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(Je&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=m1(),He.lanes|=i,Ks|=i,l)}function mb(i,a,l,h){return cr(l,a)?l:bl.current!==null?(i=lp(i,l,h),cr(i,a)||(an=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Je&261930)===0?(an=!0,i.memoizedState=l):(i=m1(),He.lanes|=i,Ks|=i,a)}function gb(i,a,l,h,p){var _=D.p;D.p=_!==0&&8>_?_:8;var A=P.T,j={};P.T=j,hp(i,!1,a,l);try{var Q=p(),le=P.S;if(le!==null&&le(j,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var fe=GR(Q,h);iu(i,a,fe,gr(i))}else iu(i,a,h,gr(i))}catch(ge){iu(i,a,{then:function(){},status:"rejected",reason:ge},gr())}finally{D.p=_,A!==null&&j.types!==null&&(A.types=j.types),P.T=A}}function JR(){}function cp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=pb(i).queue;gb(i,p,a,J,l===null?JR:function(){return yb(i),l(h)})}function pb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:J},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function yb(i){var a=pb(i);a.next===null&&(a=i.alternate.memoizedState),iu(i,a.next.queue,{},gr())}function up(){return An(wu)}function _b(){return Wt().memoizedState}function vb(){return Wt().memoizedState}function ZR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=gr();i=Bs(l);var h=Fs(a,i,l);h!==null&&(nr(h,a,l),Zc(h,a,l)),a={cache:Ug()},i.payload=a;return}a=a.return}}function eC(i,a,l){var h=gr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Dd(i)?wb(a,l):(l=Rg(i,a,l,h),l!==null&&(nr(l,i,h),xb(l,a,h)))}function bb(i,a,l){var h=gr();iu(i,a,l,h)}function iu(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dd(i))wb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,j=_(A,l);if(p.hasEagerState=!0,p.eagerState=j,cr(j,A))return dd(i,a,p,0),Nt===null&&hd(),!1}catch{}finally{}if(l=Rg(i,a,p,h),l!==null)return nr(l,i,h),xb(l,a,h),!0}return!1}function hp(i,a,l,h){if(h={lane:2,revertLane:Hp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Dd(i)){if(a)throw Error(n(479))}else a=Rg(i,l,h,2),a!==null&&nr(a,i,2)}function Dd(i){var a=i.alternate;return i===He||a!==null&&a===He}function wb(i,a){wl=Sd=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function xb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}var su={readContext:An,use:Rd,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};su.useEffectEvent=Ft;var Eb={readContext:An,use:Rd,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:ab,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Nd(4194308,4,ub.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Nd(4194308,4,i,a)},useInsertionEffect:function(i,a){Nd(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var h=i();if(eo){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=qn();if(l!==void 0){var p=l(a);if(eo){Zt(!0);try{l(a)}finally{Zt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=eC.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=ip(i);var a=i.queue,l=bb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:op,useDeferredValue:function(i,a){var l=qn();return lp(l,i,a)},useTransition:function(){var i=ip(!1);return i=gb.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=qn();if(it){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(Je&127)!==0||qv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,ab(Gv.bind(null,h,_,i),[i]),h.flags|=2048,El(9,{destroy:void 0},$v.bind(null,h,_,l,a),null),l},useId:function(){var i=qn(),a=Nt.identifierPrefix;if(it){var l=wi,h=bi;l=(h&~(1<<32-kt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Ad++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=KR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:up,useFormState:tb,useActionState:tb,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=hp.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:tp,useCacheRefresh:function(){return qn().memoizedState=ZR.bind(null,He)},useEffectEvent:function(i){var a=qn(),l={impl:i};return a.memoizedState=l,function(){if((dt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},dp={readContext:An,use:Rd,useCallback:db,useContext:An,useEffect:ap,useImperativeHandle:hb,useInsertionEffect:lb,useLayoutEffect:cb,useMemo:fb,useReducer:Cd,useRef:sb,useState:function(){return Cd(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Wt();return mb(l,St.memoizedState,i,a)},useTransition:function(){var i=Cd(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:Hv,useId:_b,useHostTransitionStatus:up,useFormState:nb,useActionState:nb,useOptimistic:function(i,a){var l=Wt();return Qv(l,St,i,a)},useMemoCache:tp,useCacheRefresh:vb};dp.useEffectEvent=ob;var Tb={readContext:An,use:Rd,useCallback:db,useContext:An,useEffect:ap,useImperativeHandle:hb,useInsertionEffect:lb,useLayoutEffect:cb,useMemo:fb,useReducer:rp,useRef:sb,useState:function(){return rp(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Wt();return St===null?lp(l,i,a):mb(l,St.memoizedState,i,a)},useTransition:function(){var i=rp(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:Hv,useId:_b,useHostTransitionStatus:up,useFormState:ib,useActionState:ib,useOptimistic:function(i,a){var l=Wt();return St!==null?Qv(l,St,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:tp,useCacheRefresh:vb};Tb.useEffectEvent=ob;function fp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var mp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Bs(h);p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(nr(a,i,h),Zc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Bs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(nr(a,i,h),Zc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=gr(),h=Bs(l);h.tag=2,a!=null&&(h.callback=a),a=Fs(i,h,l),a!==null&&(nr(a,i,l),Zc(a,i,l))}};function Sb(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!$c(l,h)||!$c(p,_):!0}function Ab(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&mp.enqueueReplaceState(a,a.state,null)}function to(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Ib(i){ud(i)}function Rb(i){console.error(i)}function Cb(i){ud(i)}function Od(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Nb(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gp(i,a,l){return l=Bs(l),l.tag=3,l.payload={element:null},l.callback=function(){Od(i,a)},l}function kb(i){return i=Bs(i),i.tag=3,i}function Db(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Nb(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Nb(a,l,h),typeof p!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})})}function tC(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&gl(a,l,p,!0),l=hr.current,l!==null){switch(l.tag){case 31:case 13:return Or===null?$d():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===bd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),zp(i,h,p)),!1;case 22:return l.flags|=65536,h===bd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),zp(i,h,p)),!1}throw Error(n(435,l.tag))}return zp(i,h,p),$d(),!1}if(it)return a=hr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Mg&&(i=Error(n(422),{cause:h}),Yc(Cr(i,l)))):(h!==Mg&&(a=Error(n(423),{cause:h}),Yc(Cr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Cr(h,l),p=gp(i.stateNode,h,p),$g(i,p),Ht!==4&&(Ht=2)),!1;var _=Error(n(520),{cause:h});if(_=Cr(_,l),fu===null?fu=[_]:fu.push(_),Ht!==4&&(Ht=2),a===null)return!0;h=Cr(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=gp(l.stateNode,h,i),$g(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=kb(p),Db(p,i,l,h),$g(l,p),!1}l=l.return}while(l!==null);return!1}var pp=Error(n(461)),an=!1;function In(i,a,l,h){a.child=i===null?Vv(a,null,l,h):Za(a,i.child,l,h)}function Ob(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var j in h)j!=="ref"&&(A[j]=h[j])}else A=h;return Qa(a),h=Xg(i,a,l,A,_,p),j=Jg(),i!==null&&!an?(Zg(i,a,p),ts(i,a,p)):(it&&j&&Dg(a),a.flags|=1,In(i,a,h,p),a.child)}function Mb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Cg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Pb(i,a,_,h,p)):(i=md(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Tp(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:$c,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Pb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if($c(_,h)&&i.ref===a.ref)if(an=!1,a.pendingProps=h=_,Tp(i,p))(i.flags&131072)!==0&&(an=!0);else return a.lanes=i.lanes,ts(i,a,p)}return yp(i,a,l,h,p)}function Vb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Lb(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&_d(a,_!==null?_.cachePool:null),_!==null?Uv(a,_):Kg(),zv(a);else return h=a.lanes=536870912,Lb(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(_d(a,_.cachePool),Uv(a,_),qs(),a.memoizedState=null):(i!==null&&_d(a,null),Kg(),qs());return In(i,a,p,l),a.child}function au(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Lb(i,a,l,h,p){var _=Bg();return _=_===null?null:{parent:rn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&_d(a,null),Kg(),zv(a),i!==null&&gl(i,a,h,!0),a.childLanes=p,null}function Md(i,a){return a=Vd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function jb(i,a,l){return Za(a,i.child,null,l),i=Md(a,a.pendingProps),i.flags|=2,dr(a),a.memoizedState=null,i}function nC(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(it){if(h.mode==="hidden")return i=Md(a,h),a.lanes=536870912,au(null,i);if(Qg(a),(i=Dt)?(i=W1(i,Dr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=wv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw js(a);return a.lanes=536870912,null}return Md(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Qg(a),p)if(a.flags&256)a.flags&=-257,a=jb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(an||gl(i,a,l,!1),p=(l&i.childLanes)!==0,an||p){if(h=Nt,h!==null&&(A=Ic(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,$a(i,A),nr(h,i,A),pp;$d(),a=jb(i,a,l)}else i=_.treeContext,Dt=Mr(A.nextSibling),Sn=a,it=!0,Ls=null,Dr=!1,i!==null&&Tv(a,i),a=Md(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Pd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function yp(i,a,l,h,p){return Qa(a),l=Xg(i,a,l,h,void 0,p),h=Jg(),i!==null&&!an?(Zg(i,a,p),ts(i,a,p)):(it&&h&&Dg(a),a.flags|=1,In(i,a,l,p),a.child)}function Ub(i,a,l,h,p,_){return Qa(a),a.updateQueue=null,l=Fv(a,h,l,p),Bv(i),h=Jg(),i!==null&&!an?(Zg(i,a,_),ts(i,a,_)):(it&&h&&Dg(a),a.flags|=1,In(i,a,l,_),a.child)}function zb(i,a,l,h,p){if(Qa(a),a.stateNode===null){var _=hl,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=mp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Hg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):hl,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(fp(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&mp.enqueueReplaceState(_,_.state,null),tu(a,h,_,p),eu(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var j=a.memoizedProps,Q=to(l,j);_.props=Q;var le=_.context,fe=l.contextType;A=hl,typeof fe=="object"&&fe!==null&&(A=An(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||le!==A)&&Ab(a,_,h,A),zs=!1;var ce=a.memoizedState;_.state=ce,tu(a,h,_,p),eu(),le=a.memoizedState,j||ce!==le||zs?(typeof ge=="function"&&(fp(a,l,ge,h),le=a.memoizedState),(Q=zs||Sb(a,l,Q,h,ce,le,A))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Q):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,qg(i,a),A=a.memoizedProps,fe=to(l,A),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,Q=hl,typeof le=="object"&&le!==null&&(Q=An(le)),j=l.getDerivedStateFromProps,(le=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&Ab(a,_,h,Q),zs=!1,ce=a.memoizedState,_.state=ce,tu(a,h,_,p),eu();var he=a.memoizedState;A!==ge||ce!==he||zs||i!==null&&i.dependencies!==null&&pd(i.dependencies)?(typeof j=="function"&&(fp(a,l,j,h),he=a.memoizedState),(fe=zs||Sb(a,l,fe,h,ce,he,Q)||i!==null&&i.dependencies!==null&&pd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Q)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Q,h=fe):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Pd(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=Za(a,i.child,null,p),a.child=Za(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function Bb(i,a,l,h){return Ka(),a.flags|=256,In(i,a,l,h),a.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(i){return{baseLanes:i,cachePool:Nv()}}function bp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=mr),i}function Fb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Qt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(it){if(p?Hs(a):qs(),(i=Dt)?(i=W1(i,Dr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=wv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw js(a);return ny(i)?a.lanes=32:a.lanes=536870912,null}var j=h.children;return h=h.fallback,p?(qs(),p=a.mode,j=Vd({mode:"hidden",children:j},p),h=Ga(h,p,l,null),j.return=a,h.return=a,j.sibling=h,a.child=j,h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,au(null,h)):(Hs(a),wp(a,j))}var Q=i.memoizedState;if(Q!==null&&(j=Q.dehydrated,j!==null)){if(_)a.flags&256?(Hs(a),a.flags&=-257,a=xp(i,a,l)):a.memoizedState!==null?(qs(),a.child=i.child,a.flags|=128,a=null):(qs(),j=h.fallback,p=a.mode,h=Vd({mode:"visible",children:h.children},p),j=Ga(j,p,l,null),j.flags|=2,h.return=a,j.return=a,h.sibling=j,a.child=h,Za(a,i.child,null,l),h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,a=au(null,h));else if(Hs(a),ny(j)){if(A=j.nextSibling&&j.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Yc({value:h,source:null,stack:null}),a=xp(i,a,l)}else if(an||gl(i,a,l,!1),A=(l&i.childLanes)!==0,an||A){if(A=Nt,A!==null&&(h=Ic(A,l),h!==0&&h!==Q.retryLane))throw Q.retryLane=h,$a(i,h),nr(A,i,h),pp;ty(j)||$d(),a=xp(i,a,l)}else ty(j)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Dt=Mr(j.nextSibling),Sn=a,it=!0,Ls=null,Dr=!1,i!==null&&Tv(a,i),a=wp(a,h.children),a.flags|=4096);return a}return p?(qs(),j=h.fallback,p=a.mode,Q=i.child,le=Q.sibling,h=Qi(Q,{mode:"hidden",children:h.children}),h.subtreeFlags=Q.subtreeFlags&65011712,le!==null?j=Qi(le,j):(j=Ga(j,p,l,null),j.flags|=2),j.return=a,h.return=a,h.sibling=j,a.child=h,au(null,h),h=a.child,j=i.child.memoizedState,j===null?j=vp(l):(p=j.cachePool,p!==null?(Q=rn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Nv(),j={baseLanes:j.baseLanes|l,cachePool:p}),h.memoizedState=j,h.childLanes=bp(i,A,l),a.memoizedState=_p,au(i.child,h)):(Hs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function wp(i,a){return a=Vd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Vd(i,a){return i=ur(22,i,null,a),i.lanes=0,i}function xp(i,a,l){return Za(a,i.child,null,l),i=wp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Hb(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Lg(i.return,a,l)}function Ep(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function qb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Qt.current,j=(A&2)!==0;if(j?(A=A&1|2,a.flags|=128):A&=1,ne(Qt,A),In(i,a,h,l),h=it?Kc:0,!j&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Hb(i,l,a);else if(i.tag===19)Hb(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Td(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Ep(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Td(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Ep(a,!0,l,null,_,h);break;case"together":Ep(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ks|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(gl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Tp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&pd(i)))}function rC(i,a,l){switch(a.tag){case 3:Ne(a,a.stateNode.containerInfo),Us(a,rn,i.memoizedState.cache),Ka();break;case 27:case 5:Ye(a);break;case 4:Ne(a,a.stateNode.containerInfo);break;case 10:Us(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Qg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Hs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Fb(i,a,l):(Hs(a),i=ts(i,a,l),i!==null?i.sibling:null);Hs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(gl(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return qb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ne(Qt,Qt.current),h)break;return null;case 22:return a.lanes=0,Vb(i,a,l,a.pendingProps);case 24:Us(a,rn,i.memoizedState.cache)}return ts(i,a,l)}function $b(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)an=!0;else{if(!Tp(i,l)&&(a.flags&128)===0)return an=!1,rC(i,a,l);an=(i.flags&131072)!==0}else an=!1,it&&(a.flags&1048576)!==0&&Ev(a,Kc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Xa(a.elementType),a.type=i,typeof i=="function")Cg(i)?(h=to(i,h),a.tag=1,a=zb(null,a,i,h,l)):(a.tag=0,a=yp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===q){a.tag=11,a=Ob(null,a,i,h,l);break e}else if(p===M){a.tag=14,a=Mb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return yp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=to(h,a.pendingProps),zb(i,a,h,p,l);case 3:e:{if(Ne(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,qg(i,a),tu(a,h,null,l);var A=a.memoizedState;if(h=A.cache,Us(a,rn,h),h!==_.cache&&jg(a,[rn],l,!0),eu(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Bb(i,a,h,l);break e}else if(h!==p){p=Cr(Error(n(424)),a),Yc(p),a=Bb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=Mr(i.firstChild),Sn=a,it=!0,Ls=null,Dr=!0,l=Vv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ka(),h===p){a=ts(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Pd(i,a),i===null?(l=nw(a.type,null,a.pendingProps,null))?a.memoizedState=l:it||(l=a.type,i=a.pendingProps,h=Jd(ye.current).createElement(l),h[en]=a,h[yn]=i,Rn(h,l,i),tn(h),a.stateNode=h):a.memoizedState=nw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ye(a),i===null&&it&&(h=a.stateNode=Z1(a.type,a.pendingProps,ye.current),Sn=a,Dr=!0,p=Dt,Js(a.type)?(ry=p,Dt=Mr(h.firstChild)):Dt=p),In(i,a,a.pendingProps.children,l),Pd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&it&&((p=h=Dt)&&(h=OC(h,a.type,a.pendingProps,Dr),h!==null?(a.stateNode=h,Sn=a,Dt=Mr(h.firstChild),Dr=!1,p=!0):p=!1),p||js(a)),Ye(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Jp(p,_)?h=null:A!==null&&Jp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Xg(i,a,YR,null,null,l),wu._currentValue=p),Pd(i,a),In(i,a,h,l),a.child;case 6:return i===null&&it&&((i=l=Dt)&&(l=MC(l,a.pendingProps,Dr),l!==null?(a.stateNode=l,Sn=a,Dt=null,i=!0):i=!1),i||js(a)),null;case 13:return Fb(i,a,l);case 4:return Ne(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Za(a,null,h,l):In(i,a,h,l),a.child;case 11:return Ob(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Us(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Qa(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return Mb(i,a,a.type,a.pendingProps,l);case 15:return Pb(i,a,a.type,a.pendingProps,l);case 19:return qb(i,a,l);case 31:return nC(i,a,l);case 22:return Vb(i,a,l,a.pendingProps);case 24:return Qa(a),h=An(rn),i===null?(p=Bg(),p===null&&(p=Nt,_=Ug(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Hg(a),Us(a,rn,p)):((i.lanes&l)!==0&&(qg(i,a),tu(a,null,null,l),eu()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Us(a,rn,h)):(h=_.cache,Us(a,rn,h),h!==p.cache&&jg(a,[rn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function Sp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(_1())i.flags|=8192;else throw Ja=bd,Fg}else i.flags&=-16777217}function Gb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ow(a))if(_1())i.flags|=8192;else throw Ja=bd,Fg}function Ld(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Er():536870912,i.lanes|=a,Il|=a)}function ou(i,a){if(!it)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function iC(i,a,l){var h=a.pendingProps;switch(Og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(rn),Ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(ml(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pg())),Ot(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Ot(a),Gb(a,_)):(Ot(a),Sp(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Ot(a),Gb(a,_)):(Ot(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Ot(a),Sp(a,p,i,h,l)),null;case 27:if(nt(a),l=ye.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}i=re.current,ml(a)?Sv(a):(i=Z1(p,h,l),a.stateNode=i,ns(a))}return Ot(a),null;case 5:if(nt(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}if(_=re.current,ml(a))Sv(a);else{var A=Jd(ye.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[en]=a,_[yn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Ot(a),Sp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=ye.current,ml(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[en]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||F1(i.nodeValue,l)),i||js(a,!0)}else i=Jd(i).createTextNode(h),i[en]=a,a.stateNode=i}return Ot(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=ml(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[en]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),i=!1}else l=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(dr(a),a):(dr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ot(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ml(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[en]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),p=!1}else p=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(dr(a),a):(dr(a),null)}return dr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Ld(a,a.updateQueue),Ot(a),null);case 4:return Ie(),i===null&&Kp(a.stateNode.containerInfo),Ot(a),null;case 10:return Ji(a.type),Ot(a),null;case 19:if(K(Qt),h=a.memoizedState,h===null)return Ot(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)ou(h,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Td(i),_!==null){for(a.flags|=128,ou(h,!1),i=_.updateQueue,a.updateQueue=i,Ld(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)bv(l,i),l=l.sibling;return ne(Qt,Qt.current&1|2),it&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Fd&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304)}else{if(!p)if(i=Td(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Ld(a,i),ou(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!it)return Ot(a),null}else 2*xe()-h.renderingStartTime>Fd&&l!==536870912&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Qt.current,ne(Qt,p?l&1|2:l&1),it&&Wi(a,h.treeForkCount),i):(Ot(a),null);case 22:case 23:return dr(a),Yg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),l=a.updateQueue,l!==null&&Ld(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&K(Wa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(rn),Ot(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function sC(i,a){switch(Og(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(rn),Ie(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return nt(a),null;case 31:if(a.memoizedState!==null){if(dr(a),a.alternate===null)throw Error(n(340));Ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(dr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return K(Qt),null;case 4:return Ie(),null;case 10:return Ji(a.type),null;case 22:case 23:return dr(a),Yg(),i!==null&&K(Wa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(rn),null;case 25:return null;default:return null}}function Kb(i,a){switch(Og(a),a.tag){case 3:Ji(rn),Ie();break;case 26:case 27:case 5:nt(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&dr(a);break;case 13:dr(a);break;case 19:K(Qt);break;case 10:Ji(a.type);break;case 22:case 23:dr(a),Yg(),i!==null&&K(Wa);break;case 24:Ji(rn)}}function lu(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(j){vt(a,a.return,j)}}function $s(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,j=A.destroy;if(j!==void 0){A.destroy=void 0,p=a;var Q=l,le=j;try{le()}catch(fe){vt(p,Q,fe)}}}h=h.next}while(h!==_)}}catch(fe){vt(a,a.return,fe)}}function Yb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{jv(a,l)}catch(h){vt(i,i.return,h)}}}function Qb(i,a,l){l.props=to(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){vt(i,a,h)}}function cu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){vt(i,a,p)}}function xi(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){vt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){vt(i,a,p)}else l.current=null}function Wb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){vt(i,i.return,p)}}function Ap(i,a,l){try{var h=i.stateNode;IC(h,i.type,l,a),h[yn]=a}catch(p){vt(i,i.return,p)}}function Xb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Js(i.type)||i.tag===4}function Ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Rp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fr));else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Rp(i,a,l),i=i.sibling;i!==null;)Rp(i,a,l),i=i.sibling}function jd(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(jd(i,a,l),i=i.sibling;i!==null;)jd(i,a,l),i=i.sibling}function Jb(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[en]=i,a[yn]=l}catch(_){vt(i,i.return,_)}}var rs=!1,on=!1,Cp=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,vn=null;function aC(i,a){if(i=i.containerInfo,Wp=af,i=hv(i),xg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,j=-1,Q=-1,le=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(j=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Q=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(j=A),ce===_&&++fe===h&&(Q=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=j===-1||Q===-1?null:{start:j,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xp={focusedElem:i,selectionRange:l},af=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Se=to(l.type,p);i=h.getSnapshotBeforeUpdate(Se,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Me){vt(l,l.return,Me)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ey(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ey(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function e1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&lu(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){vt(l,l.return,A)}else{var p=to(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){vt(l,l.return,A)}}h&64&&Yb(l),h&512&&cu(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{jv(i,a)}catch(A){vt(l,l.return,A)}}break;case 27:a===null&&h&4&&Jb(l);case 26:case 5:ss(i,l),a===null&&h&4&&Wb(l),h&512&&cu(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&r1(i,l);break;case 13:ss(i,l),h&4&&i1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=gC.bind(null,l),PC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||on,p=rs;var _=on;rs=h,(on=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,on=_}break;case 30:break;default:ss(i,l)}}function t1(i){var a=i.alternate;a!==null&&(i.alternate=null,t1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Xo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Vt=null,Jn=!1;function is(i,a,l){for(l=l.child;l!==null;)n1(i,a,l),l=l.sibling}function n1(i,a,l){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Kt,l)}catch{}switch(l.tag){case 26:on||xi(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||xi(l,a);var h=Vt,p=Jn;Js(l.type)&&(Vt=l.stateNode,Jn=!1),is(i,a,l),_u(l.stateNode),Vt=h,Jn=p;break;case 5:on||xi(l,a);case 6:if(h=Vt,p=Jn,Vt=null,is(i,a,l),Vt=h,Jn=p,Vt!==null)if(Jn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(l.stateNode)}catch(_){vt(l,a,_)}else try{Vt.removeChild(l.stateNode)}catch(_){vt(l,a,_)}break;case 18:Vt!==null&&(Jn?(i=Vt,Y1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Pl(i)):Y1(Vt,l.stateNode));break;case 4:h=Vt,p=Jn,Vt=l.stateNode.containerInfo,Jn=!0,is(i,a,l),Vt=h,Jn=p;break;case 0:case 11:case 14:case 15:$s(2,l,a),on||$s(4,l,a),is(i,a,l);break;case 1:on||(xi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Qb(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:on=(h=on)||l.memoizedState!==null,is(i,a,l),on=h;break;default:is(i,a,l)}}function r1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pl(i)}catch(l){vt(a,a.return,l)}}}function i1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pl(i)}catch(l){vt(a,a.return,l)}}function oC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Zb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Zb),a;default:throw Error(n(435,i.tag))}}function Ud(i,a){var l=oC(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=pC.bind(null,i,h);h.then(p,p)}})}function Zn(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,j=A;e:for(;j!==null;){switch(j.tag){case 27:if(Js(j.type)){Vt=j.stateNode,Jn=!1;break e}break;case 5:Vt=j.stateNode,Jn=!1;break e;case 3:case 4:Vt=j.stateNode.containerInfo,Jn=!0;break e}j=j.return}if(Vt===null)throw Error(n(160));n1(_,A,p),Vt=null,Jn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)s1(a,i),a=a.sibling}var Yr=null;function s1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),er(i),h&4&&($s(3,i,i.return),lu(3,i),$s(5,i,i.return));break;case 1:Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Yr;if(Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[li]||_[en]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[en]=i,tn(_),h=_;break e;case"link":var A=sw("link","href",p).get(h+(l.href||""));if(A){for(var j=0;j<A.length;j++)if(_=A[j],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(j,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=sw("meta","content",p).get(h+(l.content||""))){for(j=0;j<A.length;j++)if(_=A[j],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(j,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[en]=i,tn(_),h=_}i.stateNode=h}else aw(p,i.type,i.stateNode);else i.stateNode=iw(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?aw(p,i.type,i.stateNode):iw(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Ap(i,i.memoizedProps,l.memoizedProps)}break;case 27:Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),l!==null&&h&4&&Ap(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Zn(a,i),er(i),h&512&&(on||l===null||xi(l,l.return)),i.flags&32){p=i.stateNode;try{Xn(p,"")}catch(Se){vt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,Ap(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Cp=!0);break;case 6:if(Zn(a,i),er(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Se){vt(i,i.return,Se)}}break;case 3:if(tf=null,p=Yr,Yr=Zd(a.containerInfo),Zn(a,i),Yr=p,er(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Pl(a.containerInfo)}catch(Se){vt(i,i.return,Se)}Cp&&(Cp=!1,a1(i));break;case 4:h=Yr,Yr=Zd(i.stateNode.containerInfo),Zn(a,i),er(i),Yr=h;break;case 12:Zn(a,i),er(i);break;case 31:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ud(i,h)));break;case 13:Zn(a,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bd=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ud(i,h)));break;case 22:p=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=rs,fe=on;if(rs=le||p,on=fe||Q,Zn(a,i),on=fe,rs=le,er(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||rs||on||no(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(_=Q.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{j=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Se){vt(Q,Q.return,Se)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Se){vt(Q,Q.return,Se)}}}else if(a.tag===18){if(l===null){Q=a;try{var he=Q.stateNode;p?Q1(he,!0):Q1(Q.stateNode,!1)}catch(Se){vt(Q,Q.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Ud(i,l))));break;case 19:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ud(i,h)));break;case 30:break;case 21:break;default:Zn(a,i),er(i)}}function er(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Xb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Ip(i);jd(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Xn(A,""),l.flags&=-33);var j=Ip(i);jd(i,j,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=Ip(i);Rp(i,le,Q);break;default:throw Error(n(161))}}catch(fe){vt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function a1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;a1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)e1(i,a.alternate,a),a=a.sibling}function no(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:$s(4,a,a.return),no(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Qb(a,a.return,l),no(a);break;case 27:_u(a.stateNode);case 26:case 5:xi(a,a.return),no(a);break;case 22:a.memoizedState===null&&no(a);break;case 30:no(a);break;default:no(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),lu(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){vt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var j=h.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Lv(Q[p],j)}catch(le){vt(h,h.return,le)}}l&&A&64&&Yb(_),cu(_,_.return);break;case 27:Jb(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&Wb(_),cu(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&r1(p,_);break;case 13:as(p,_,l),l&&A&4&&i1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),cu(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function Np(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Qc(l))}function kp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i))}function Qr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)o1(i,a,l,h),a=a.sibling}function o1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(i,a,l,h),p&2048&&lu(9,a);break;case 1:Qr(i,a,l,h);break;case 3:Qr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i)));break;case 12:if(p&2048){Qr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,j=_.onPostCommit;typeof j=="function"&&j(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){vt(a,a.return,Q)}}else Qr(i,a,l,h);break;case 31:Qr(i,a,l,h);break;case 13:Qr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Qr(i,a,l,h):uu(i,a):_._visibility&2?Qr(i,a,l,h):(_._visibility|=2,Tl(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Np(A,a);break;case 24:Qr(i,a,l,h),p&2048&&kp(a.alternate,a);break;default:Qr(i,a,l,h)}}function Tl(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,j=l,Q=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:Tl(_,A,j,Q,p),lu(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Tl(_,A,j,Q,p):uu(_,A):(fe._visibility|=2,Tl(_,A,j,Q,p)),p&&le&2048&&Np(A.alternate,A);break;case 24:Tl(_,A,j,Q,p),p&&le&2048&&kp(A.alternate,A);break;default:Tl(_,A,j,Q,p)}a=a.sibling}}function uu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:uu(l,h),p&2048&&Np(h.alternate,h);break;case 24:uu(l,h),p&2048&&kp(h.alternate,h);break;default:uu(l,h)}a=a.sibling}}var hu=8192;function Sl(i,a,l){if(i.subtreeFlags&hu)for(i=i.child;i!==null;)l1(i,a,l),i=i.sibling}function l1(i,a,l){switch(i.tag){case 26:Sl(i,a,l),i.flags&hu&&i.memoizedState!==null&&KC(l,Yr,i.memoizedState,i.memoizedProps);break;case 5:Sl(i,a,l);break;case 3:case 4:var h=Yr;Yr=Zd(i.stateNode.containerInfo),Sl(i,a,l),Yr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=hu,hu=16777216,Sl(i,a,l),hu=h):Sl(i,a,l));break;default:Sl(i,a,l)}}function c1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function du(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,h1(h,i)}c1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u1(i),i=i.sibling}function u1(i){switch(i.tag){case 0:case 11:case 15:du(i),i.flags&2048&&$s(9,i,i.return);break;case 3:du(i);break;case 12:du(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,zd(i)):du(i);break;default:du(i)}}function zd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,h1(h,i)}c1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:$s(8,a,a.return),zd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,zd(a));break;default:zd(a)}i=i.sibling}}function h1(i,a){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:$s(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,vn=h;else e:for(l=i;vn!==null;){h=vn;var p=h.sibling,_=h.return;if(t1(h),h===l){vn=null;break e}if(p!==null){p.return=_,vn=p;break e}vn=_}}}var lC={getCacheForType:function(i){var a=An(rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(rn).controller.signal}},cC=typeof WeakMap=="function"?WeakMap:Map,dt=0,Nt=null,We=null,Je=0,_t=0,fr=null,Gs=!1,Al=!1,Dp=!1,os=0,Ht=0,Ks=0,ro=0,Op=0,mr=0,Il=0,fu=null,tr=null,Mp=!1,Bd=0,d1=0,Fd=1/0,Hd=null,Ys=null,dn=0,Qs=null,Rl=null,ls=0,Pp=0,Vp=null,f1=null,mu=0,Lp=null;function gr(){return(dt&2)!==0&&Je!==0?Je&-Je:P.T!==null?Hp():qh()}function m1(){if(mr===0)if((Je&536870912)===0||it){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),mr=i}else mr=536870912;return i=hr.current,i!==null&&(i.flags|=32),mr}function nr(i,a,l){(i===Nt&&(_t===2||_t===9)||i.cancelPendingCommit!==null)&&(Cl(i,0),Ws(i,Je,mr,!1)),ka(i,l),((dt&2)===0||i!==Nt)&&(i===Nt&&((dt&2)===0&&(ro|=l),Ht===4&&Ws(i,Je,mr,!1)),Ei(i))}function g1(i,a,l){if((dt&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?dC(i,a):Up(i,a,!0),_=h;do{if(p===0){Al&&!h&&Ws(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!uC(l)){p=Up(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var j=i;p=fu;var Q=j.current.memoizedState.isDehydrated;if(Q&&(Cl(j,A).flags|=256),A=Up(j,A,!1),A!==2){if(Dp&&!Q){j.errorRecoveryDisabledLanes|=_,ro|=_,p=4;break e}_=tr,tr=p,_!==null&&(tr===null?tr=_:tr.push.apply(tr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Cl(i,0),Ws(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Ws(h,a,mr,!Gs);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Bd+300-xe(),10<p)){if(Ws(h,a,mr,!Gs),xn(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=G1(p1.bind(null,h,l,tr,Hd,Mp,a,mr,ro,Il,Gs,_,"Throttled",-0,0),p);break e}p1(h,l,tr,Hd,Mp,a,mr,ro,Il,Gs,_,null,-0,0)}}break}while(!0);Ei(i)}function p1(i,a,l,h,p,_,A,j,Q,le,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},l1(a,_,ge);var Se=(_&62914560)===_?Bd-xe():(_&4194048)===_?d1-xe():0;if(Se=YC(ge,Se),Se!==null){ls=_,i.cancelPendingCommit=Se(T1.bind(null,i,a,_,l,h,p,A,j,Q,fe,ge,null,ce,he)),Ws(i,_,A,!le);return}}T1(i,a,_,l,h,p,A,j,Q)}function uC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!cr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ws(i,a,l,h){a&=~Op,a&=~ro,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-kt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&Da(i,l,a)}function qd(){return(dt&6)===0?(gu(0),!1):!0}function jp(){if(We!==null){if(_t===0)var i=We.return;else i=We,Xi=Ya=null,ep(i),vl=null,Xc=0,i=We;for(;i!==null;)Kb(i.alternate,i),i=i.return;We=null}}function Cl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,NC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,jp(),Nt=i,We=l=Qi(i.current,null),Je=a,_t=0,fr=null,Gs=!1,Al=En(i,a),Dp=!1,Il=mr=Op=ro=Ks=Ht=0,tr=fu=null,Mp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-kt(h),_=1<<p;a|=i[p],h&=~_}return os=a,hd(),l}function y1(i,a){He=null,P.H=su,a===_l||a===vd?(a=Ov(),_t=3):a===Fg?(a=Ov(),_t=4):_t=a===pp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fr=a,We===null&&(Ht=1,Od(i,Cr(a,i.current)))}function _1(){var i=hr.current;return i===null?!0:(Je&4194048)===Je?Or===null:(Je&62914560)===Je||(Je&536870912)!==0?i===Or:!1}function v1(){var i=P.H;return P.H=su,i===null?su:i}function b1(){var i=P.A;return P.A=lC,i}function $d(){Ht=4,Gs||(Je&4194048)!==Je&&hr.current!==null||(Al=!0),(Ks&134217727)===0&&(ro&134217727)===0||Nt===null||Ws(Nt,Je,mr,!1)}function Up(i,a,l){var h=dt;dt|=2;var p=v1(),_=b1();(Nt!==i||Je!==a)&&(Hd=null,Cl(i,a)),a=!1;var A=Ht;e:do try{if(_t!==0&&We!==null){var j=We,Q=fr;switch(_t){case 8:jp(),A=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(a=!0);var le=_t;if(_t=0,fr=null,Nl(i,j,Q,le),l&&Al){A=0;break e}break;default:le=_t,_t=0,fr=null,Nl(i,j,Q,le)}}hC(),A=Ht;break}catch(fe){y1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Ya=null,dt=h,P.H=p,P.A=_,We===null&&(Nt=null,Je=0,hd()),A}function hC(){for(;We!==null;)w1(We)}function dC(i,a){var l=dt;dt|=2;var h=v1(),p=b1();Nt!==i||Je!==a?(Hd=null,Fd=xe()+500,Cl(i,a)):Al=En(i,a);e:do try{if(_t!==0&&We!==null){a=We;var _=fr;t:switch(_t){case 1:_t=0,fr=null,Nl(i,a,_,1);break;case 2:case 9:if(kv(_)){_t=0,fr=null,x1(a);break}a=function(){_t!==2&&_t!==9||Nt!==i||(_t=7),Ei(i)},_.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:kv(_)?(_t=0,fr=null,x1(a)):(_t=0,fr=null,Nl(i,a,_,7));break;case 5:var A=null;switch(We.tag){case 26:A=We.memoizedState;case 5:case 27:var j=We;if(A?ow(A):j.stateNode.complete){_t=0,fr=null;var Q=j.sibling;if(Q!==null)We=Q;else{var le=j.return;le!==null?(We=le,Gd(le)):We=null}break t}}_t=0,fr=null,Nl(i,a,_,5);break;case 6:_t=0,fr=null,Nl(i,a,_,6);break;case 8:jp(),Ht=6;break e;default:throw Error(n(462))}}fC();break}catch(fe){y1(i,fe)}while(!0);return Xi=Ya=null,P.H=h,P.A=p,dt=l,We!==null?0:(Nt=null,Je=0,hd(),Ht)}function fC(){for(;We!==null&&!Be();)w1(We)}function w1(i){var a=$b(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Gd(i):We=a}function x1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Ub(l,a,a.pendingProps,a.type,void 0,Je);break;case 11:a=Ub(l,a,a.pendingProps,a.type.render,a.ref,Je);break;case 5:ep(a);default:Kb(l,a),a=We=bv(a,os),a=$b(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Gd(i):We=a}function Nl(i,a,l,h){Xi=Ya=null,ep(a),vl=null,Xc=0;var p=a.return;try{if(tC(i,p,a,l,Je)){Ht=1,Od(i,Cr(l,i.current)),We=null;return}}catch(_){if(p!==null)throw We=p,_;Ht=1,Od(i,Cr(l,i.current)),We=null;return}a.flags&32768?(it||h===1?i=!0:Al||(Je&536870912)!==0?i=!1:(Gs=i=!0,(h===2||h===9||h===3||h===6)&&(h=hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),E1(a,i)):Gd(a)}function Gd(i){var a=i;do{if((a.flags&32768)!==0){E1(a,Gs);return}i=a.return;var l=iC(a.alternate,a,os);if(l!==null){We=l;return}if(a=a.sibling,a!==null){We=a;return}We=a=i}while(a!==null);Ht===0&&(Ht=5)}function E1(i,a){do{var l=sC(i.alternate,i);if(l!==null){l.flags&=32767,We=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){We=i;return}We=i=l}while(i!==null);Ht=6,We=null}function T1(i,a,l,h,p,_,A,j,Q){i.cancelPendingCommit=null;do Kd();while(dn!==0);if((dt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=Ig,_g(i,l,_,A,j,Q),i===Nt&&(We=Nt=null,Je=0),Rl=a,Qs=i,ls=l,Pp=_,Vp=p,f1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yC(ut,function(){return C1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=D.p,D.p=2,A=dt,dt|=4;try{aC(i,a,l)}finally{dt=A,D.p=p,P.T=h}}dn=1,S1(),A1(),I1()}}function S1(){if(dn===1){dn=0;var i=Qs,a=Rl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=dt;dt|=4;try{s1(a,i);var _=Xp,A=hv(i.containerInfo),j=_.focusedElem,Q=_.selectionRange;if(A!==j&&j&&j.ownerDocument&&uv(j.ownerDocument.documentElement,j)){if(Q!==null&&xg(j)){var le=Q.start,fe=Q.end;if(fe===void 0&&(fe=le),"selectionStart"in j)j.selectionStart=le,j.selectionEnd=Math.min(fe,j.value.length);else{var ge=j.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Se=j.textContent.length,Me=Math.min(Q.start,Se),It=Q.end===void 0?Me:Math.min(Q.end,Se);!he.extend&&Me>It&&(A=It,It=Me,Me=A);var te=cv(j,Me),X=cv(j,It);if(te&&X&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(te.node,te.offset),he.removeAllRanges(),Me>It?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=j;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ge.length;j++){var me=ge[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}af=!!Wp,Xp=Wp=null}finally{dt=p,D.p=h,P.T=l}}i.current=a,dn=2}}function A1(){if(dn===2){dn=0;var i=Qs,a=Rl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=dt;dt|=4;try{e1(i,a.alternate,a)}finally{dt=p,D.p=h,P.T=l}}dn=3}}function I1(){if(dn===4||dn===3){dn=0,Oe();var i=Qs,a=Rl,l=ls,h=f1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Rl=Qs=null,R1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ys=null),$i(l),a=a.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Kt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=D.p,D.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var j=h[A];_(j.value,{componentStack:j.stack})}}finally{P.T=a,D.p=p}}(ls&3)!==0&&Kd(),Ei(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===Lp?mu++:(mu=0,Lp=i):mu=0,gu(0)}}function R1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Qc(a)))}function Kd(){return S1(),A1(),I1(),C1()}function C1(){if(dn!==5)return!1;var i=Qs,a=Pp;Pp=0;var l=$i(ls),h=P.T,p=D.p;try{D.p=32>l?32:l,P.T=null,l=Vp,Vp=null;var _=Qs,A=ls;if(dn=0,Rl=Qs=null,ls=0,(dt&6)!==0)throw Error(n(331));var j=dt;if(dt|=4,u1(_.current),o1(_,_.current,A,l),dt=j,gu(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Kt,_)}catch{}return!0}finally{D.p=p,P.T=h,R1(i,a)}}function N1(i,a,l){a=Cr(l,a),a=gp(i.stateNode,a,2),i=Fs(i,a,2),i!==null&&(ka(i,2),Ei(i))}function vt(i,a,l){if(i.tag===3)N1(i,i,l);else for(;a!==null;){if(a.tag===3){N1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ys===null||!Ys.has(h))){i=Cr(l,i),l=kb(2),h=Fs(a,l,2),h!==null&&(Db(l,h,a,i),ka(h,2),Ei(h));break}}a=a.return}}function zp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new cC;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Dp=!0,p.add(l),i=mC.bind(null,i,a,l),a.then(i,i))}function mC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(Je&l)===l&&(Ht===4||Ht===3&&(Je&62914560)===Je&&300>xe()-Bd?(dt&2)===0&&Cl(i,0):Op|=l,Il===Je&&(Il=0)),Ei(i)}function k1(i,a){a===0&&(a=Er()),i=$a(i,a),i!==null&&(ka(i,a),Ei(i))}function gC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),k1(i,l)}function pC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),k1(i,l)}function yC(i,a){return pe(i,a)}var Yd=null,kl=null,Bp=!1,Qd=!1,Fp=!1,Xs=0;function Ei(i){i!==kl&&i.next===null&&(kl===null?Yd=kl=i:kl=kl.next=i),Qd=!0,Bp||(Bp=!0,vC())}function gu(i,a){if(!Fp&&Qd){Fp=!0;do for(var l=!1,h=Yd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,j=h.pingedLanes;_=(1<<31-kt(42|i)+1)-1,_&=p&~(A&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,P1(h,_))}else _=Je,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,P1(h,_));h=h.next}while(l);Fp=!1}}function _C(){D1()}function D1(){Qd=Bp=!1;var i=0;Xs!==0&&CC()&&(i=Xs);for(var a=xe(),l=null,h=Yd;h!==null;){var p=h.next,_=O1(h,a);_===0?(h.next=null,l===null?Yd=p:l.next=p,p===null&&(kl=l)):(l=h,(i!==0||(_&3)!==0)&&(Qd=!0)),h=p}dn!==0&&dn!==5||gu(i),Xs!==0&&(Xs=0)}function O1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-kt(_),j=1<<A,Q=p[A];Q===-1?((j&l)===0||(j&h)!==0)&&(p[A]=Qo(j,a)):Q<=a&&(i.expiredLanes|=j),_&=~j}if(a=Nt,l=Je,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(_t===2||_t===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),$i(l)){case 2:case 8:l=Bn;break;case 32:l=ut;break;case 268435456:l=Bt;break;default:l=ut}return h=M1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function M1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Kd()&&i.callbackNode!==l)return null;var h=Je;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(g1(i,h,a),O1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?M1.bind(null,i):null)}function P1(i,a){if(Kd())return null;g1(i,a,!0)}function vC(){kC(function(){(dt&6)!==0?pe(gt,_C):D1()})}function Hp(){if(Xs===0){var i=pl;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Xs=i}return Xs}function V1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tl(""+i)}function L1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function bC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=V1((p[yn]||null).action),A=h.submitter;A&&(a=(a=A[yn]||null)?V1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var j=new pi("action","action",null,h,p);i.push({event:j,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Xs!==0){var Q=A?L1(p,A):new FormData(p);cp(l,{pending:!0,data:Q,method:p.method,action:_},null,Q)}}else typeof _=="function"&&(j.preventDefault(),Q=A?L1(p,A):new FormData(p),cp(l,{pending:!0,data:Q,method:p.method,action:_},_,Q))},currentTarget:p}]})}}for(var qp=0;qp<Ag.length;qp++){var $p=Ag[qp],wC=$p.toLowerCase(),xC=$p[0].toUpperCase()+$p.slice(1);Kr(wC,"on"+xC)}Kr(mv,"onAnimationEnd"),Kr(gv,"onAnimationIteration"),Kr(pv,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(jR,"onTransitionRun"),Kr(UR,"onTransitionStart"),Kr(zR,"onTransitionCancel"),Kr(yv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function j1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var j=h[A],Q=j.instance,le=j.currentTarget;if(j=j.listener,Q!==_&&p.isPropagationStopped())break e;_=j,p.currentTarget=le;try{_(p)}catch(fe){ud(fe)}p.currentTarget=null,_=Q}else for(A=0;A<h.length;A++){if(j=h[A],Q=j.instance,le=j.currentTarget,j=j.listener,Q!==_&&p.isPropagationStopped())break e;_=j,p.currentTarget=le;try{_(p)}catch(fe){ud(fe)}p.currentTarget=null,_=Q}}}}function Xe(i,a){var l=a[Wo];l===void 0&&(l=a[Wo]=new Set);var h=i+"__bubble";l.has(h)||(U1(a,i,2,!1),l.add(h))}function Gp(i,a,l){var h=0;a&&(h|=4),U1(l,i,h,a)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function Kp(i){if(!i[Wd]){i[Wd]=!0,Rc.forEach(function(l){l!=="selectionchange"&&(EC.has(l)||Gp(l,!1,i),Gp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Wd]||(a[Wd]=!0,Gp("selectionchange",!1,a))}}function U1(i,a,l,h){switch(mw(a)){case 2:var p=XC;break;case 8:p=JC;break;default:p=ly}l=p.bind(null,a,l,i),p=void 0,!La||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Yp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var j=h.stateNode.containerInfo;if(j===p)break;if(A===4)for(A=h.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;j!==null;){if(A=ci(j),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){h=_=A;continue e}j=j.parentNode}}h=h.return}Ds(function(){var le=_,fe=Sr(l),ge=[];e:{var ce=_v.get(i);if(ce!==void 0){var he=pi,Se=i;switch(i){case"keypress":if(Ua(l)===0)break e;case"keydown":case"keyup":he=od;break;case"focusin":Se="focus",he=Ba;break;case"focusout":Se="blur",he=Ba;break;case"beforeblur":case"afterblur":he=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=E;break;case mv:case gv:case pv:he=ed;break;case yv:he=U;break;case"scroll":case"scrollend":he=zc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=Fe}var Me=(a&4)!==0,It=!Me&&(i==="scroll"||i==="scrollend"),te=Me?ce!==null?ce+"Capture":null:ce;Me=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||te===null||(me=Hr(X,te),me!=null&&Me.push(yu(X,me,oe))),It)break;X=X.return}0<Me.length&&(ce=new he(ce,Se,null,l,fe),ge.push({event:ce,listeners:Me}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Lc&&(Se=l.relatedTarget||l.fromElement)&&(ci(Se)||Se[oi]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Se=l.relatedTarget||l.toElement,he=le,Se=Se?ci(Se):null,Se!==null&&(It=o(Se),Me=Se.tag,Se!==It||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(he=null,Se=le),he!==Se)){if(Me=Bc,me="onMouseLeave",te="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Yi,me="onPointerLeave",te="onPointerEnter",X="pointer"),It=he==null?ce:or(he),oe=Se==null?ce:or(Se),ce=new Me(me,X+"leave",he,l,fe),ce.target=It,ce.relatedTarget=oe,me=null,ci(fe)===le&&(Me=new Me(te,X+"enter",Se,l,fe),Me.target=oe,Me.relatedTarget=It,me=Me),It=me,he&&Se)t:{for(Me=TC,te=he,X=Se,oe=0,me=te;me;me=Me(me))oe++;me=0;for(var ke=X;ke;ke=Me(ke))me++;for(;0<oe-me;)te=Me(te),oe--;for(;0<me-oe;)X=Me(X),me--;for(;oe--;){if(te===X||X!==null&&te===X.alternate){Me=te;break t}te=Me(te),X=Me(X)}Me=null}else Me=null;he!==null&&z1(ge,ce,he,Me,!1),Se!==null&&It!==null&&z1(ge,It,Se,Me,!0)}}e:{if(ce=le?or(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var lt=rv;else if(tv(ce))if(iv)lt=PR;else{lt=OR;var Re=DR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&el(le.elementType)&&(lt=rv):lt=MR;if(lt&&(lt=lt(i,le))){nv(ge,lt,l,fe);break e}Re&&Re(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Mc(ce,"number",ce.value)}switch(Re=le?or(le):window,i){case"focusin":(tv(Re)||Re.contentEditable==="true")&&(ll=Re,Eg=le,Gc=null);break;case"focusout":Gc=Eg=ll=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,dv(ge,l,fe);break;case"selectionchange":if(LR)break;case"keydown":case"keyup":dv(ge,l,fe)}var $e;if(ht)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ol?Fa(i,l)&&(Ze="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(vi&&l.locale!=="ko"&&(ol||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ol&&($e=Uc()):(gi=fe,jc="value"in gi?gi.value:gi.textContent,ol=!0)),Re=Xd(le,Ze),0<Re.length&&(Ze=new _i(Ze,i,null,l,fe),ge.push({event:Ze,listeners:Re}),$e?Ze.data=$e:($e=al(l),$e!==null&&(Ze.data=$e)))),($e=Ir?RR(i,l):CR(i,l))&&(Ze=Xd(le,"onBeforeInput"),0<Ze.length&&(Re=new _i("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Re,listeners:Ze}),Re.data=$e)),bC(ge,i,le,l,fe)}j1(ge,a)})}function yu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Xd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Hr(i,l),p!=null&&h.unshift(yu(i,p,_)),p=Hr(i,a),p!=null&&h.push(yu(i,p,_))),i.tag===3)return h;i=i.return}return[]}function TC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function z1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var j=l,Q=j.alternate,le=j.stateNode;if(j=j.tag,Q!==null&&Q===h)break;j!==5&&j!==26&&j!==27||le===null||(Q=le,p?(le=Hr(l,_),le!=null&&A.unshift(yu(l,le,Q))):p||(le=Hr(l,_),le!=null&&A.push(yu(l,le,Q)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var SC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function B1(i){return(typeof i=="string"?i:""+i).replace(SC,`
`).replace(AC,"")}function F1(i,a){return a=B1(a),B1(i)===a}function At(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Xn(i,""+h);break;case"className":lr(i,"class",h);break;case"tabIndex":lr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(i,l,h);break;case"style":Vc(i,h,_);break;case"data":if(a!=="object"){lr(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&At(i,a,"name",p.name,p,null),At(i,a,"formEncType",p.formEncType,p,null),At(i,a,"formMethod",p.formMethod,p,null),At(i,a,"formTarget",p.formTarget,p,null)):(At(i,a,"encType",p.encType,p,null),At(i,a,"method",p.method,p,null),At(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=tl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Xe("beforetoggle",i),Xe("toggle",i),Jo(i,"popover",h);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Jo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Xh.get(l)||l,Jo(i,l,h))}}function Qp(i,a,l,h,p,_){switch(l){case"style":Vc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&Xn(i,""+h);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[yn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Jo(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",i),Xe("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,_,A,l,null)}}p&&At(i,a,"srcSet",l.srcSet,l,null),h&&At(i,a,"src",l.src,l,null);return;case"input":Xe("invalid",i);var j=_=A=p=null,Q=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":p=fe;break;case"type":A=fe;break;case"checked":Q=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":j=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,a));break;default:At(i,a,h,fe,l,null)}}Yh(i,_,j,Q,le,A,p,!1);return;case"select":Xe("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(j=l[p],j!=null))switch(p){case"value":_=j;break;case"defaultValue":A=j;break;case"multiple":h=j;default:At(i,a,p,j,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Rs(i,!!h,a,!1):l!=null&&Rs(i,!!h,l,!0);return;case"textarea":Xe("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(j=l[A],j!=null))switch(A){case"value":h=j;break;case"defaultValue":p=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:At(i,a,A,j,l,null)}Cs(i,h,p,_);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(h=l[Q],h!=null))switch(Q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:At(i,a,Q,h,l,null)}return;case"dialog":Xe("beforetoggle",i),Xe("toggle",i),Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":Xe("load",i);break;case"video":case"audio":for(h=0;h<pu.length;h++)Xe(pu[h],i);break;case"image":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"embed":case"source":case"link":Xe("error",i),Xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,le,h,l,null)}return;default:if(el(a)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&Qp(i,a,fe,h,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(h=l[j],h!=null&&At(i,a,j,h,l,null))}function IC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,j=null,Q=null,le=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:h.hasOwnProperty(he)||At(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":fe=he;break;case"value":A=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&At(i,a,ce,he,h,ge)}}Zo(i,A,j,Q,le,fe,_,p);return;case"select":he=A=j=ce=null;for(_ in l)if(Q=l[_],l.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":he=Q;default:h.hasOwnProperty(_)||At(i,a,_,null,h,Q)}for(p in h)if(_=h[p],Q=l[p],h.hasOwnProperty(p)&&(_!=null||Q!=null))switch(p){case"value":ce=_;break;case"defaultValue":j=_;break;case"multiple":A=_;default:_!==Q&&At(i,a,p,_,h,Q)}a=j,l=A,h=he,ce!=null?Rs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Rs(i,!!l,a,!0):Rs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(j in l)if(p=l[j],l.hasOwnProperty(j)&&p!=null&&!h.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:At(i,a,j,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&At(i,a,A,p,h,_)}Qh(i,ce,he);return;case"option":for(var Se in l)if(ce=l[Se],l.hasOwnProperty(Se)&&ce!=null&&!h.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:At(i,a,Se,null,h,ce)}for(Q in h)if(ce=h[Q],he=l[Q],h.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:At(i,a,Q,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)ce=l[Me],l.hasOwnProperty(Me)&&ce!=null&&!h.hasOwnProperty(Me)&&At(i,a,Me,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:At(i,a,le,ce,h,he)}return;default:if(el(a)){for(var It in l)ce=l[It],l.hasOwnProperty(It)&&ce!==void 0&&!h.hasOwnProperty(It)&&Qp(i,a,It,void 0,h,ce);for(fe in h)ce=h[fe],he=l[fe],!h.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Qp(i,a,fe,ce,h,he);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!h.hasOwnProperty(te)&&At(i,a,te,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||At(i,a,ge,ce,h,he)}function H1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,j=p.duration;if(_&&j&&H1(A)){for(A=0,j=p.responseEnd,h+=1;h<l.length;h++){var Q=l[h],le=Q.startTime;if(le>j)break;var fe=Q.transferSize,ge=Q.initiatorType;fe&&H1(ge)&&(Q=Q.responseEnd,A+=fe*(Q<j?1:(j-le)/(Q-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Wp=null,Xp=null;function Jd(i){return i.nodeType===9?i:i.ownerDocument}function q1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Jp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zp=null;function CC(){var i=window.event;return i&&i.type==="popstate"?i===Zp?!1:(Zp=i,!0):(Zp=null,!1)}var G1=typeof setTimeout=="function"?setTimeout:void 0,NC=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,kC=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(i){return K1.resolve(null).then(i).catch(DC)}:G1;function DC(i){setTimeout(function(){throw i})}function Js(i){return i==="head"}function Y1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Pl(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")_u(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,_u(l);for(var _=l.firstChild;_;){var A=_.nextSibling,j=_.nodeName;_[li]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&_u(i.ownerDocument.body);l=p}while(l);Pl(a)}function Q1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function ey(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ey(l),Xo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function OC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[li])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Mr(i.nextSibling),i===null)break}return null}function MC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Mr(i.nextSibling),i===null))return null;return i}function W1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Mr(i.nextSibling),i===null))return null;return i}function ty(i){return i.data==="$?"||i.data==="$~"}function ny(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function PC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Mr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var ry=null;function X1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Mr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function J1(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Z1(i,a,l){switch(a=Jd(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function _u(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Xo(i)}var Pr=new Map,ew=new Set;function Zd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=D.d;D.d={f:VC,r:LC,D:jC,C:UC,L:zC,m:BC,X:HC,S:FC,M:qC};function VC(){var i=cs.f(),a=qd();return i||a}function LC(i){var a=Tr(i);a!==null&&a.tag===5&&a.type==="form"?yb(a):cs.r(i)}var Dl=typeof document>"u"?null:document;function tw(i,a,l){var h=Dl;if(h&&typeof a=="string"&&a){var p=Wn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),ew.has(p)||(ew.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function jC(i){cs.D(i),tw("dns-prefetch",i,null)}function UC(i,a){cs.C(i,a),tw("preconnect",i,a)}function zC(i,a,l){cs.L(i,a,l);var h=Dl;if(h&&i&&a){var p='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Wn(l.imageSizes)+'"]')):p+='[href="'+Wn(i)+'"]';var _=p;switch(a){case"style":_=Ol(i);break;case"script":_=Ml(i)}Pr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Pr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(vu(_))||a==="script"&&h.querySelector(bu(_))||(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function BC(i,a){cs.m(i,a);var l=Dl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ml(i)}if(!Pr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Pr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bu(_)))return}h=l.createElement("link"),Rn(h,"link",i),tn(h),l.head.appendChild(h)}}}function FC(i,a,l){cs.S(i,a,l);var h=Dl;if(h&&i){var p=ui(h).hoistableStyles,_=Ol(i);a=a||"default";var A=p.get(_);if(!A){var j={loading:0,preload:null};if(A=h.querySelector(vu(_)))j.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Pr.get(_))&&iy(i,l);var Q=A=h.createElement("link");tn(Q),Rn(Q,"link",i),Q._p=new Promise(function(le,fe){Q.onload=le,Q.onerror=fe}),Q.addEventListener("load",function(){j.loading|=1}),Q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,ef(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:j},p.set(_,A)}}}function HC(i,a){cs.X(i,a);var l=Dl;if(l&&i){var h=ui(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0},a),(a=Pr.get(p))&&sy(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function qC(i,a){cs.M(i,a);var l=Dl;if(l&&i){var h=ui(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Pr.get(p))&&sy(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function nw(i,a,l,h){var p=(p=ye.current)?Zd(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ol(l.href),l=ui(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ol(l.href);var _=ui(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(vu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Pr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pr.set(i,l),_||$C(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ml(l),l=ui(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ol(i){return'href="'+Wn(i)+'"'}function vu(i){return'link[rel="stylesheet"]['+i+"]"}function rw(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function $C(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),tn(a),i.head.appendChild(a))}function Ml(i){return'[src="'+Wn(i)+'"]'}function bu(i){return"script[async]"+i}function iw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Wn(l.href)+'"]');if(h)return a.instance=h,tn(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),tn(h),Rn(h,"style",p),ef(h,l.precedence,i),a.instance=h;case"stylesheet":p=Ol(l.href);var _=i.querySelector(vu(p));if(_)return a.state.loading|=4,a.instance=_,tn(_),_;h=rw(l),(p=Pr.get(p))&&iy(h,p),_=(i.ownerDocument||i).createElement("link"),tn(_);var A=_;return A._p=new Promise(function(j,Q){A.onload=j,A.onerror=Q}),Rn(_,"link",h),a.state.loading|=4,ef(_,l.precedence,i),a.instance=_;case"script":return _=Ml(l.src),(p=i.querySelector(bu(_)))?(a.instance=p,tn(p),p):(h=l,(p=Pr.get(_))&&(h=y({},l),sy(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),tn(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,ef(h,l.precedence,i));return a.instance}function ef(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var j=h[A];if(j.dataset.precedence===a)_=j;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function iy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function sy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var tf=null;function sw(i,a,l){if(tf===null){var h=new Map,p=tf=new Map;p.set(l,h)}else p=tf,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[li]||_[en]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var j=h.get(A);j?j.push(_):h.set(A,[_])}}return h}function aw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function GC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ow(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ol(h.href),_=a.querySelector(vu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=nf.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,tn(_);return}_=a.ownerDocument||a,h=rw(h),(p=Pr.get(p))&&iy(h,p),_=_.createElement("link"),tn(_);var A=_;A._p=new Promise(function(j,Q){A.onload=j,A.onerror=Q}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=nf.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ay=0;function YC(i,a){return i.stylesheets&&i.count===0&&sf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&ay===0&&(ay=62500*RC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ay?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function nf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rf=null;function sf(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rf=new Map,a.forEach(QC,i),rf=null,nf.call(i))}function QC(i,a){if(!(a.state.loading&4)){var l=rf.get(i);if(l)var h=l.get(null);else{l=new Map,rf.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=nf.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var wu={$$typeof:F,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function WC(i,a,l,h,p,_,A,j,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function lw(i,a,l,h,p,_,A,j,Q,le,fe,ge){return i=new WC(i,a,l,A,Q,le,fe,ge,j),a=1,_===!0&&(a|=24),_=ur(3,null,null,a),i.current=_,_.stateNode=i,a=Ug(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Hg(_),i}function cw(i){return i?(i=hl,i):hl}function uw(i,a,l,h,p,_){p=cw(p),h.context===null?h.context=p:h.pendingContext=p,h=Bs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Fs(i,h,a),l!==null&&(nr(l,i,a),Zc(l,i,a))}function hw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function oy(i,a){hw(i,a),(i=i.alternate)&&hw(i,a)}function dw(i){if(i.tag===13||i.tag===31){var a=$a(i,67108864);a!==null&&nr(a,i,67108864),oy(i,67108864)}}function fw(i){if(i.tag===13||i.tag===31){var a=gr();a=Oa(a);var l=$a(i,a);l!==null&&nr(l,i,a),oy(i,a)}}var af=!0;function XC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=2,ly(i,a,l,h)}finally{D.p=_,P.T=p}}function JC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=8,ly(i,a,l,h)}finally{D.p=_,P.T=p}}function ly(i,a,l,h){if(af){var p=cy(h);if(p===null)Yp(i,a,h,of,l),gw(i,h);else if(eN(p,i,a,l,h))h.stopPropagation();else if(gw(i,h),a&4&&-1<ZC.indexOf(i)){for(;p!==null;){var _=Tr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;A;){var Q=1<<31-kt(A);j.entanglements[1]|=Q,A&=~Q}Ei(_),(dt&6)===0&&(Fd=xe()+500,gu(0))}}break;case 31:case 13:j=$a(_,2),j!==null&&nr(j,_,2),qd(),oy(_,2)}if(_=cy(h),_===null&&Yp(i,a,h,of,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Yp(i,a,h,null,l)}}function cy(i){return i=Sr(i),uy(i)}var of=null;function uy(i){if(of=null,i=ci(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return of=i,null}function mw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case gt:return 2;case Bn:return 8;case ut:case Fn:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var hy=!1,Zs=null,ea=null,ta=null,xu=new Map,Eu=new Map,na=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(i,a){switch(i){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":xu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(a.pointerId)}}function Tu(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=Tr(a),a!==null&&dw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function eN(i,a,l,h,p){switch(a){case"focusin":return Zs=Tu(Zs,i,a,l,h,p),!0;case"dragenter":return ea=Tu(ea,i,a,l,h,p),!0;case"mouseover":return ta=Tu(ta,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return xu.set(_,Tu(xu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,Eu.set(_,Tu(Eu.get(_)||null,i,a,l,h,p)),!0}return!1}function pw(i){var a=ci(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,zr(i.priority,function(){fw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,zr(i.priority,function(){fw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function lf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=cy(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Lc=h,l.target.dispatchEvent(h),Lc=null}else return a=Tr(l),a!==null&&dw(a),i.blockedOn=l,!1;a.shift()}return!0}function yw(i,a,l){lf(i)&&l.delete(a)}function tN(){hy=!1,Zs!==null&&lf(Zs)&&(Zs=null),ea!==null&&lf(ea)&&(ea=null),ta!==null&&lf(ta)&&(ta=null),xu.forEach(yw),Eu.forEach(yw)}function cf(i,a){i.blockedOn===a&&(i.blockedOn=null,hy||(hy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,tN)))}var uf=null;function _w(i){uf!==i&&(uf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){uf===i&&(uf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(uy(h||l)===null)continue;break}var _=Tr(l);_!==null&&(i.splice(a,3),a-=3,cp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Pl(i){function a(Q){return cf(Q,i)}Zs!==null&&cf(Zs,i),ea!==null&&cf(ea,i),ta!==null&&cf(ta,i),xu.forEach(a),Eu.forEach(a);for(var l=0;l<na.length;l++){var h=na[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<na.length&&(l=na[0],l.blockedOn===null);)pw(l),l.blockedOn===null&&na.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[yn]||null;if(typeof _=="function")A||_w(l);else if(A){var j=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[yn]||null)j=A.formAction;else if(uy(p)!==null)continue}else j=A.action;typeof j=="function"?l[h+1]=j:(l.splice(h,3),h-=3),_w(l)}}}function vw(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function dy(i){this._internalRoot=i}hf.prototype.render=dy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=gr();uw(l,h,i,a,null,null)},hf.prototype.unmount=dy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;uw(i.current,2,null,i,null,null),qd(),a[oi]=null}};function hf(i){this._internalRoot=i}hf.prototype.unstable_scheduleHydration=function(i){if(i){var a=qh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<na.length&&a!==0&&a<na[l].priority;l++);na.splice(l,0,i),l===0&&pw(i)}};var bw=e.version;if(bw!=="19.2.3")throw Error(n(527,bw,"19.2.3"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var nN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Kt=df.inject(nN),Et=df}catch{}}return Au.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=Ib,_=Rb,A=Cb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=lw(i,1,!1,null,null,l,h,null,p,_,A,vw),i[oi]=a.current,Kp(i),new dy(a)},Au.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=Ib,A=Rb,j=Cb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=lw(i,1,!0,a,l??null,h,p,Q,_,A,j,vw),a.context=cw(null),l=a.current,h=gr(),h=Oa(h),p=Bs(h),p.callback=null,Fs(l,p,h),l=h,a.current.lanes=l,ka(a,l),Ei(a),i[oi]=a.current,Kp(i),new hf(a)},Au.version="19.2.3",Au}var Nw;function fN(){if(Nw)return gy.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gy.exports=dN(),gy.exports}var mN=fN();var kw="popstate";function gN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Bo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Hy("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:th(o))}function n(s,o){Ur(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return yN(e,t,n,r)}function zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ur(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pN(){return Math.random().toString(36).substring(2,10)}function Dw(r,e){return{usr:r.state,key:r.key,idx:e}}function Hy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:t,key:e&&e.key||n||pN()}}function th({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Bo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function yN(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let O=g(),L=O==null?null:O-f;f=O,d&&d({action:u,location:k.location,delta:L})}function v(O,L){u="PUSH";let B=Hy(k.location,O,L);t&&t(B,O),f=g()+1;let F=Dw(B,f),q=k.createHref(B);try{c.pushState(F,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(q)}o&&d&&d({action:u,location:k.location,delta:1})}function w(O,L){u="REPLACE";let B=Hy(k.location,O,L);t&&t(B,O),f=g();let F=Dw(B,f),q=k.createHref(B);c.replaceState(F,"",q),o&&d&&d({action:u,location:k.location,delta:0})}function T(O){return _N(O)}let k={get action(){return u},get location(){return r(s,c)},listen(O){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(kw,y),d=O,()=>{s.removeEventListener(kw,y),d=null}},createHref(O){return e(s,O)},createURL:T,encodeLocation(O){let L=T(O);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:w,go(O){return c.go(O)}};return k}function _N(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:th(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function zT(r,e,t="/"){return vN(r,e,t,!1)}function vN(r,e,t,n){let s=typeof e=="string"?Bo(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=BT(r);bN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=kN(o);u=CN(c[d],f,n)}return u}function BT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;zt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(zt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),BT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:IN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of FT(c.path))o(c,u,!0,d)}),e}function FT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=FT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function bN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:RN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var wN=/^:[\w-]+$/,xN=3,EN=2,TN=1,SN=10,AN=-2,Ow=r=>r==="*";function IN(r,e){let t=r.split("/"),n=t.length;return t.some(Ow)&&(n+=AN),e&&(n+=EN),t.filter(s=>!Ow(s)).reduce((s,o)=>s+(wN.test(o)?xN:o===""?TN:SN),n)}function RN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function CN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=Kf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=Kf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:VN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function Kf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=NN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let T=u[v]||"";c=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function NN(r,e=!1,t=!0){Ur(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function kN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var DN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ON=r=>DN.test(r);function MN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Bo(r):r,o;if(t)if(ON(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Mw(t.substring(1),"/"):o=Mw(t,e)}else o=e;return{pathname:o,search:LN(n),hash:jN(s)}}function Mw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HT(r){let e=PN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function qT(r,e,t,n=!1){let s;typeof r=="string"?s=Bo(r):(s={...r},zt(!s.pathname||!s.pathname.includes("?"),vy("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),vy("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),vy("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=MN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),VN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),LN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function UN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function zN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $T=["POST","PUT","PATCH","DELETE"];new Set($T);var BN=["GET",...$T];new Set(BN);var vc=$.createContext(null);vc.displayName="DataRouter";var Om=$.createContext(null);Om.displayName="DataRouterState";$.createContext(!1);var GT=$.createContext({isTransitioning:!1});GT.displayName="ViewTransition";var FN=$.createContext(new Map);FN.displayName="Fetchers";var HN=$.createContext(null);HN.displayName="Await";var ri=$.createContext(null);ri.displayName="Navigation";var Eh=$.createContext(null);Eh.displayName="Location";var ii=$.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var O0=$.createContext(null);O0.displayName="RouteError";function qN(r,{relative:e}={}){zt(Th(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ri),{hash:s,pathname:o,search:c}=Sh(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function Th(){return $.useContext(Eh)!=null}function xr(){return zt(Th(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Eh).location}var KT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YT(r){$.useContext(ri).static||$.useLayoutEffect(r)}function xs(){let{isDataRoute:r}=$.useContext(ii);return r?sk():$N()}function $N(){zt(Th(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(vc),{basename:e,navigator:t}=$.useContext(ri),{matches:n}=$.useContext(ii),{pathname:s}=xr(),o=JSON.stringify(HT(n)),c=$.useRef(!1);return YT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Ur(c.current,KT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=qT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var GN=$.createContext(null);function KN(r){let e=$.useContext(ii).outlet;return $.useMemo(()=>e&&$.createElement(GN.Provider,{value:r},e),[e,r])}function QT(){let{matches:r}=$.useContext(ii),e=r[r.length-1];return e?e.params:{}}function Sh(r,{relative:e}={}){let{matches:t}=$.useContext(ii),{pathname:n}=xr(),s=JSON.stringify(HT(t));return $.useMemo(()=>qT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function YN(r,e){return WT(r,e)}function WT(r,e,t,n,s){zt(Th(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ri),{matches:c}=$.useContext(ii),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let B=y&&y.path||"";XT(f,!y||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let v=xr(),w;if(e){let B=typeof e=="string"?Bo(e):e;zt(g==="/"||B.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=v;let T=w.pathname||"/",k=T;if(g!=="/"){let B=g.replace(/^\//,"").split("/");k="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let O=zT(r,{pathname:k});Ur(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ur(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=ZN(O&&O.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,n,s);return e&&L?$.createElement(Eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function QN(){let r=ik(),e=UN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var WN=$.createElement(QN,null),XN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(ii.Provider,{value:this.props.routeContext},$.createElement(O0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JN({routeContext:r,match:e,children:t}){let n=$.useContext(vc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ii.Provider,{value:r},t)}function ZN(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);zt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:zN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,T=!1,k=null,O=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||WN,u&&(d<0&&v===0?(XT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,O=null):d===v&&(T=!0,O=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),B=()=>{let F;return w?F=k:T?F=O:y.route.Component?F=$.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=g,$.createElement(JN,{match:y,routeContext:{outlet:g,matches:L,isDataRoute:t!=null},children:F})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(XN,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:B(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):B()},null)}function M0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ek(r){let e=$.useContext(vc);return zt(e,M0(r)),e}function tk(r){let e=$.useContext(Om);return zt(e,M0(r)),e}function nk(r){let e=$.useContext(ii);return zt(e,M0(r)),e}function P0(r){let e=nk(r),t=e.matches[e.matches.length-1];return zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function rk(){return P0("useRouteId")}function ik(){let r=$.useContext(O0),e=tk("useRouteError"),t=P0("useRouteError");return r!==void 0?r:e.errors?.[t]}function sk(){let{router:r}=ek("useNavigate"),e=P0("useNavigate"),t=$.useRef(!1);return YT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Ur(t.current,KT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Pw={};function XT(r,e,t){!e&&!Pw[r]&&(Pw[r]=!0,Ur(!1,t))}$.memo(ak);function ak({routes:r,future:e,state:t,unstable_onError:n}){return WT(r,void 0,t,n,e)}function ok(r){return KN(r.context)}function Wr(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lk({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){zt(!Th(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Bo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,T=$.useMemo(()=>{let k=ps(f,u);return k==null?null:{location:{pathname:k,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Ur(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:$.createElement(ri.Provider,{value:d},$.createElement(Eh.Provider,{children:e,value:T}))}function ck({children:r,location:e}){return YN(qy(r),e)}function qy(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,qy(n.props.children,o));return}zt(n.type===Wr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=qy(n.props.children,o)),t.push(c)}),t}var Af="get",If="application/x-www-form-urlencoded";function Mm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function uk(r){return Mm(r)&&r.tagName.toLowerCase()==="button"}function hk(r){return Mm(r)&&r.tagName.toLowerCase()==="form"}function dk(r){return Mm(r)&&r.tagName.toLowerCase()==="input"}function fk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function mk(r,e){return r.button===0&&(!e||e==="_self")&&!fk(r)}var ff=null;function gk(){if(ff===null)try{new FormData(document.createElement("form"),0),ff=!1}catch{ff=!0}return ff}var pk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function by(r){return r!=null&&!pk.has(r)?(Ur(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):r}function yk(r,e){let t,n,s,o,c;if(hk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||Af,s=by(r.getAttribute("enctype"))||If,o=new FormData(r)}else if(uk(r)||dk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Af,s=by(r.getAttribute("formenctype"))||by(u.getAttribute("enctype"))||If,o=new FormData(u,r),!gk()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Mm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Af,n=null,s=If,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function V0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _k(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function vk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await vk(o,t);return c.links?c.links():[]}return[]}));return Sk(n.flat(1).filter(bk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Vw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function xk(r,e,{includeHydrateFallback:t}={}){return Ek(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Ek(r){return[...new Set(r)]}function Tk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Sk(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(Tk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function JT(){let r=$.useContext(vc);return V0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ak(){let r=$.useContext(Om);return V0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var L0=$.createContext(void 0);L0.displayName="FrameworkContext";function ZT(){let r=$.useContext(L0);return V0(r,"You must render this element inside a <HydratedRouter> element"),r}function Ik(r,e){let t=$.useContext(L0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let k=L=>{L.forEach(B=>{c(B.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[r]),$.useEffect(()=>{if(n){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[n]);let w=()=>{s(!0)},T=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Iu(u,w),onBlur:Iu(d,T),onMouseEnter:Iu(f,w),onMouseLeave:Iu(g,T),onTouchStart:Iu(y,w)}]:[!1,v,{}]}function Iu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Rk({page:r,...e}){let{router:t}=JT(),n=$.useMemo(()=>zT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(Nk,{page:r,matches:n,...e}):null}function Ck(r){let{manifest:e,routeModules:t}=ZT(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return wk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function Nk({page:r,matches:e,...t}){let n=xr(),{manifest:s,routeModules:o}=ZT(),{basename:c}=JT(),{loaderData:u,matches:d}=Ak(),f=$.useMemo(()=>Vw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>Vw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let T=new Set,k=!1;if(e.forEach(L=>{let B=s.routes[L.route.id];!B||!B.hasLoader||(!f.some(F=>F.route.id===L.route.id)&&L.route.id in u&&o[L.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:T.add(L.route.id))}),T.size===0)return[];let O=_k(r,c,"data");return k&&T.size>0&&O.searchParams.set("_routes",e.filter(L=>T.has(L.route.id)).map(L=>L.route.id).join(",")),[O.pathname+O.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>xk(g,s),[g,s]),w=Ck(g);return $.createElement($.Fragment,null,y.map(T=>$.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),v.map(T=>$.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),w.map(({key:T,link:k})=>$.createElement("link",{key:T,nonce:t.nonce,...k})))}function kk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var eS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eS&&(window.__reactRouterVersion="7.10.1")}catch{}function Dk({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=gN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(lk,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var tS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:T,unstable_useTransitions:k}=$.useContext(ri),O=typeof f=="string"&&tS.test(f),L,B=!1;if(typeof f=="string"&&O&&(L=f,eS))try{let I=new URL(window.location.href),N=f.startsWith("//")?new URL(I.protocol+f):new URL(f),V=ps(N.pathname,T);N.origin===I.origin&&V!=null?f=V+N.search+N.hash:B=!0}catch{Ur(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=qN(f,{relative:s}),[q,Y,z]=Ik(n,v),M=Vk(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:k});function x(I){e&&e(I),I.defaultPrevented||M(I)}let S=$.createElement("a",{...v,...z,href:L||F,onClick:B||o?e:x,ref:kk(w,Y),target:d,"data-discover":!O&&t==="render"?"true":void 0});return q&&!O?$.createElement($.Fragment,null,S,$.createElement(Rk,{page:F})):S});Zr.displayName="Link";var Ok=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=Sh(c,{relative:f.relative}),v=xr(),w=$.useContext(Om),{navigator:T,basename:k}=$.useContext(ri),O=w!=null&&Bk(y)&&u===!0,L=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,B=v.pathname,F=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(B=B.toLowerCase(),F=F?F.toLowerCase():null,L=L.toLowerCase()),F&&k&&(F=ps(F,k)||F);const q=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Y=B===L||!s&&B.startsWith(L)&&B.charAt(q)==="/",z=F!=null&&(F===L||!s&&F.startsWith(L)&&F.charAt(L.length)==="/"),M={isActive:Y,isPending:z,isTransitioning:O},x=Y?e:void 0,S;typeof n=="function"?S=n(M):S=[n,Y?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(M):o;return $.createElement(Zr,{...f,"aria-current":x,className:S,ref:g,style:I,to:c,viewTransition:u},typeof d=="function"?d(M):d)});Ok.displayName="NavLink";var Mk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=Af,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:T}=$.useContext(ri),k=Uk(),O=zk(u,{relative:f}),L=c.toLowerCase()==="get"?"get":"post",B=typeof u=="string"&&tS.test(u),F=q=>{if(d&&d(q),q.defaultPrevented)return;q.preventDefault();let Y=q.nativeEvent.submitter,z=Y?.getAttribute("formmethod")||c,M=()=>k(Y||q.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});T&&t!==!1?$.startTransition(()=>M()):M()};return $.createElement("form",{ref:w,method:L,action:O,onSubmit:n?d:F,...v,"data-discover":!B&&r==="render"?"true":void 0})});Mk.displayName="Form";function Pk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nS(r){let e=$.useContext(vc);return zt(e,Pk(r)),e}function Vk(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=xs(),f=xr(),g=Sh(r,{relative:o});return $.useCallback(y=>{if(mk(y,e)){y.preventDefault();let v=t!==void 0?t:th(f)===th(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var Lk=0,jk=()=>`__${String(++Lk)}__`;function Uk(){let{router:r}=nS("useSubmit"),{basename:e}=$.useContext(ri),t=rk(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=yk(o,e);if(c.navigate===!1){let v=c.fetcherKey||jk();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function zk(r,{relative:e}={}){let{basename:t}=$.useContext(ri),n=$.useContext(ii);zt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Sh(r||".",{relative:e})},c=xr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),th(o)}function Bk(r,{relative:e}={}){let t=$.useContext(GT);zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=nS("useViewTransitionState"),s=Sh(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Kf(s.pathname,c)!=null||Kf(s.pathname,o)!=null}const Le=r=>typeof r=="string",Ru=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Lw=r=>r==null?"":""+r,Fk=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Hk=/###/g,jw=r=>r&&r.indexOf("###")>-1?r.replace(Hk,"."):r,Uw=r=>!r||Le(r),Fu=(r,e,t)=>{const n=Le(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Uw(r))return{};const o=jw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Uw(r)?{}:{obj:r,k:jw(n[s])}},zw=(r,e,t)=>{const{obj:n,k:s}=Fu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Fu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Fu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},qk=(r,e,t,n)=>{const{obj:s,k:o}=Fu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Yf=(r,e)=>{const{obj:t,k:n}=Fu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},$k=(r,e,t)=>{const n=Yf(r,t);return n!==void 0?n:Yf(e,t)},rS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Le(r[n])||r[n]instanceof String||Le(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):rS(r[n],e[n],t):r[n]=e[n]);return r},Vl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Gk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Kk=r=>Le(r)?r.replace(/[&<>"'\/]/g,e=>Gk[e]):r;class Yk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Qk=[" ",",","?","!",";"],Wk=new Yk(20),Xk=(r,e,t)=>{e=e||"",t=t||"";const n=Qk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Wk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},$y=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},nh=r=>r?.replace("_","-"),Jk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let Zk=class Gy{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Jk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Le(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Gy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Gy(this.logger,e)}};var Ri=new Zk;class Pm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Bw extends Pm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Le(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Yf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Le(n)?d:$y(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),zw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Le(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Yf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?rS(d,n,o):d={...d,...n},zw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var iS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const sS=Symbol("i18next/PATH_KEY");function eD(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===sS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Ky(r,e){const{[sS]:t}=r(eD());return t.join(e?.keySeparator??".")}const Fw={},wy=r=>!Le(r)&&typeof r!="boolean"&&typeof r!="number";class Qf extends Pm{constructor(e,t={}){super(),Fk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=wy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Xk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Le(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Le(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Ky(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let T=w?.res;const k=w?.usedKey||u,O=w?.exactUsedKey||u,L=["[object Number]","[object Function]","[object RegExp]"],B=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,F=!this.i18nFormat||this.i18nFormat.handleAsObject,q=s.count!==void 0&&!Le(s.count),Y=Qf.hasDefaultValue(s),z=q?this.pluralResolver.getSuffix(y,s.count,s):"",M=s.ordinal&&q?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",x=q&&!s.ordinal&&s.count===0,S=x&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${M}`]||s.defaultValue;let I=T;F&&!T&&Y&&(I=S);const N=wy(I),V=Object.prototype.toString.apply(I);if(F&&I&&N&&L.indexOf(V)<0&&!(Le(B)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=C,w.usedParams=this.getUsedParamsDetails(s),w):C}if(c){const C=Array.isArray(I),G=C?[]:{},ee=C?O:k;for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)){const D=`${ee}${c}${P}`;Y&&!T?G[P]=this.translate(D,{...s,defaultValue:wy(S)?S[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(D,{...s,joinArrays:!1,ns:d}),G[P]===D&&(G[P]=I[P])}T=G}}else if(F&&Le(B)&&Array.isArray(T))T=T.join(B),T&&(T=this.extendTranslation(T,e,s,n));else{let C=!1,G=!1;!this.isValidLookup(T)&&Y&&(C=!0,T=S),this.isValidLookup(T)||(G=!0,T=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:T,D=Y&&S!==T&&this.options.updateMissing;if(G||C||D){if(this.logger.log(D?"updateKey":"missingKey",y,f,u,D?S:T),c){const H=this.resolve(u,{...s,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let J=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let H=0;H<W.length;H++)J.push(W[H]);else this.options.saveMissingTo==="all"?J=this.languageUtils.toResolveHierarchy(s.lng||this.language):J.push(s.lng||this.language);const Z=(H,K,ne)=>{const re=Y&&ne!==T?ne:P;this.options.missingKeyHandler?this.options.missingKeyHandler(H,f,K,re,D,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,f,K,re,D,s),this.emit("missingKey",H,f,K,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&q?J.forEach(H=>{const K=this.pluralResolver.getSuffixes(H,s);x&&s[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(ne=>{Z([H],u+ne,s[`defaultValue${ne}`]||S)})}):Z(J,u,S))}T=this.extendTranslation(T,e,s,w,n),G&&T===u&&this.options.appendNamespaceToMissingKey&&(T=`${f}${g}${u}`),(G||C)&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,C?T:void 0,s))}return o?(w.res=T,w.usedParams=this.getUsedParamsDetails(s),w):T}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Le(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Le(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Le(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=iS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Le(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Le(t.count),w=v&&!t.ordinal&&t.count===0,T=t.context!==void 0&&(Le(t.context)||typeof t.context=="number")&&t.context!=="",k=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(O=>{this.isValidLookup(n)||(u=O,!Fw[`${k[0]}-${O}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(Fw[`${k[0]}-${O}`]=!0,this.logger.warn(`key "${s}" for languages "${k.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(L=>{if(this.isValidLookup(n))return;c=L;const B=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(B,g,L,O,t);else{let q;v&&(q=this.pluralResolver.getSuffix(L,t.count,t));const Y=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&q.indexOf(z)===0&&B.push(g+q.replace(z,this.options.pluralSeparator)),B.push(g+q),w&&B.push(g+Y)),T){const M=`${g}${this.options.contextSeparator||"_"}${t.context}`;B.push(M),v&&(t.ordinal&&q.indexOf(z)===0&&B.push(M+q.replace(z,this.options.pluralSeparator)),B.push(M+q),w&&B.push(M+Y))}}let F;for(;F=B.pop();)this.isValidLookup(n)||(o=F,n=this.getResource(L,O,F,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Le(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Hw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(e){if(e=nh(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=nh(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Le(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Le(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Le(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Le(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const qw={zero:0,one:1,two:2,few:3,many:4,other:5},$w={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class tD{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=nh(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),$w;if(!e.match(/-|_/))return $w;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>qw[s]-qw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Gw=(r,e,t,n=".",s=!0)=>{let o=$k(r,e,t);return!o&&s&&Le(t)&&(o=$y(r,t,n),o===void 0&&(o=$y(e,t,n))),o},xy=r=>r.replace(/\$/g,"$$$$");class Kw{constructor(e={}){this.logger=Ri.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:T,nestingSuffixEscaped:k,nestingOptionsSeparator:O,maxReplaces:L,alwaysFormat:B}=e.interpolation;this.escape=t!==void 0?t:Kk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Vl(o):c||"{{",this.suffix=u?Vl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Vl(v):w||Vl("$t("),this.nestingSuffix=T?Vl(T):k||Vl(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=L||1e3,this.alwaysFormat=B!==void 0?B:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const L=Gw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,n,{...s,...t,interpolationkey:w}):L}const T=w.split(this.formatSeparator),k=T.shift().trim(),O=T.join(this.formatSeparator).trim();return this.format(Gw(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure),O,n,{...s,...t,interpolationkey:k})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>xy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?xy(this.escape(w)):xy(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const T=o[1].trim();if(c=f(T),c===void 0)if(typeof g=="function"){const O=g(e,o,s);c=Le(O)?O:""}else if(s&&Object.prototype.hasOwnProperty.call(s,T))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),c="";else!Le(c)&&!this.useRawValueToEscape&&(c=Lw(c));const k=w.safeValue(c);if(e=e.replace(o[0],k),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),T=v.match(/"/g);((w?.length??0)%2===0&&!T||T.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,k),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Le(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Le(o))return o;Le(o)||(o=Lw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const nD=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Yw=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(nh(n),s),e[c]=u),u(t)}},rD=r=>(e,t,n)=>r(nh(t),n)(e);class iD{constructor(e={}){this.logger=Ri.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Yw:rD;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Yw(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=nD(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const sD=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class aD extends Pm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{qk(d.loaded,[o],c),sD(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Le(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Le(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Qw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Le(r[1])&&(e.defaultValue=r[1]),Le(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ww=r=>(Le(r.ns)&&(r.ns=[r.ns]),Le(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Le(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),mf=()=>{},oD=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Hu extends Pm{constructor(e={},t){if(super(),this.options=Ww(e),this.services={},this.logger=Ri,this.modules={external:[]},oD(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Le(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Qw();this.options={...n,...this.options,...Ww(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=iD;const g=new Hw(this.options);this.store=new Bw(this.options.resources,this.options);const y=this.services;y.logger=Ri,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new tD(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Kw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new aD(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Qf(this.services,this.options),this.translator.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=mf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Ru(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=mf){let n=t;const s=Le(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Ru();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=mf),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&iS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Ru();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Le(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Le(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=Ky(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=Ky(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Le(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Ru();return this.options.ns?(Le(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Ru();Le(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Hw(Qw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new Hu(e,t);return n.createInstance=Hu.createInstance,n}cloneInstance(e={},t=mf){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Hu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new Bw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Kw(s)),o.translator=new Qf(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=Hu.createInstance();Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const lD=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);Eo(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Xw={},aS=(r,e,t,n)=>{Eo(t)&&Xw[t]||(Eo(t)&&(Xw[t]=new Date),lD(r,e,t,n))},oS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Yy=(r,e,t)=>{r.loadNamespaces(e,oS(r,t))},Jw=(r,e,t,n)=>{if(Eo(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Yy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,oS(r,n))},cD=(r,e,t={})=>!e.languages||!e.languages.length?(aS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),Eo=r=>typeof r=="string",uD=r=>typeof r=="object"&&r!==null,hD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},fD=r=>dD[r],mD=r=>r.replace(hD,fD);let Qy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:mD,transDefaultProps:void 0};const gD=(r={})=>{Qy={...Qy,...r}},pD=()=>Qy;let lS;const yD=r=>{lS=r},_D=()=>lS,vD={type:"3rdParty",init(r){gD(r.options.react),yD(r)}},bD=$.createContext();class wD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Ey={exports:{}},Ty={};var Zw;function xD(){if(Zw)return Ty;Zw=1;var r=Dm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),T=n({inst:{value:w,getSnapshot:v}}),k=T[0].inst,O=T[1];return o(function(){k.value=w,k.getSnapshot=v,d(k)&&O({inst:k})},[y,w,v]),s(function(){return d(k)&&O({inst:k}),y(function(){d(k)&&O({inst:k})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ty.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ty}var ex;function ED(){return ex||(ex=1,Ey.exports=xD()),Ey.exports}var TD=ED();const SD=(r,e)=>Eo(e)?e:uD(e)&&Eo(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,AD={t:SD,ready:!1},ID=()=>()=>{},zn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(bD)||{},o=t||n||_D();o&&!o.reportNamespaces&&(o.reportNamespaces=new wD),o||aS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...pD(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=Eo(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(S=>{if(!o)return ID;const{bindI18n:I,bindI18nStore:N}=c,V=()=>{v.current+=1,S()};return I&&o.on(I,V),N&&o.store.on(N,V),()=>{I&&I.split(" ").forEach(C=>o.off(C,V)),N&&N.split(" ").forEach(C=>o.store.off(C,V))}},[o,c]),T=$.useRef(),k=$.useCallback(()=>{if(!o)return AD;const S=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(ee=>cD(ee,o,c)),I=e.lng||o.language,N=v.current,V=T.current;if(V&&V.ready===S&&V.lng===I&&V.keyPrefix===d&&V.revision===N)return V;const G={t:o.getFixedT(I,c.nsMode==="fallback"?y:y[0],d),ready:S,lng:I,keyPrefix:d,revision:N};return T.current=G,G},[o,y,d,c,e.lng]),[O,L]=$.useState(0),{t:B,ready:F}=TD.useSyncExternalStore(w,k,k);$.useEffect(()=>{if(o&&!F&&!u){const S=()=>L(I=>I+1);e.lng?Jw(o,e.lng,y,S):Yy(o,y,S)}},[o,e.lng,y,F,u,O]);const q=o||{},Y=$.useRef(null),z=$.useRef(),M=S=>{const I=Object.getOwnPropertyDescriptors(S);I.__original&&delete I.__original;const N=Object.create(Object.getPrototypeOf(S),I);if(!Object.prototype.hasOwnProperty.call(N,"__original"))try{Object.defineProperty(N,"__original",{value:S,writable:!1,enumerable:!1,configurable:!1})}catch{}return N},x=$.useMemo(()=>{const S=q,I=S?.language;let N=S;S&&(Y.current&&Y.current.__original===S?z.current!==I?(N=M(S),Y.current=N,z.current=I):N=Y.current:(N=M(S),Y.current=N,z.current=I));const V=[B,N,F];return V.t=B,V.i18n=N,V.ready=F,V},[B,q,F,q.resolvedLanguage,q.language,q.languages]);if(o&&u&&!F)throw new Promise(S=>{const I=()=>S();e.lng?Jw(o,e.lng,y,I):Yy(o,y,I)});return x},RD=()=>{};var tx={};const cS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},CD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},uS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(cS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new ND;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const T=f<<6&192|y;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ND extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kD=function(r){const e=cS(r);return uS.encodeByteArray(e,!0)},Wf=function(r){return kD(r).replace(/\./g,"")},hS=function(r){try{return uS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DD=()=>dS().__FIREBASE_DEFAULTS__,OD=()=>{if(typeof process>"u"||typeof tx>"u")return;const r=tx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&hS(r[1]);return e&&JSON.parse(e)},Vm=()=>{try{return RD()||DD()||OD()||MD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},fS=r=>Vm()?.emulatorHosts?.[r],mS=r=>{const e=fS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},gS=()=>Vm()?.config,pS=r=>Vm()?.[`_${r}`];class PD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function Fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j0(r){return(await fetch(r,{credentials:"include"})).ok}function yS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Wf(JSON.stringify(t)),Wf(JSON.stringify(c)),""].join(".")}const qu={};function VD(){const r={prod:[],emulator:[]};for(const e of Object.keys(qu))qu[e]?r.emulator.push(e):r.prod.push(e);return r}function LD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let nx=!1;function U0(r,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||qu[r]===e||qu[r]||nx)return;qu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=VD().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{nx=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=LD(n),w=t("text"),T=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),L=t("preprendIcon"),B=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const F=v.element;u(F),g(O,k);const q=f();d(B,L),F.append(B,T,O,q),document.body.appendChild(F)}o?(T.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function _S(){const r=Vm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FD(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function vS(){return!_S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bS(){return!_S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function HD(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const qD="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=qD,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ah.prototype.create)}}class Ah{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?$D(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function $D(r,e){return r.replace(GD,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const GD=/\{\$([^}]+)}/g;function KD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(rx(o)&&rx(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function rx(r){return r!==null&&typeof r=="object"}function Ih(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Pu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Vu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function YD(r,e){const t=new QD(r,e);return t.subscribe.bind(t)}class QD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");WD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Sy),s.error===void 0&&(s.error=Sy),s.complete===void 0&&(s.complete=Sy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sy(){}function Jt(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const so="[DEFAULT]";class XD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new PD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZD(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:JD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JD(r){return r===so?void 0:r}function ZD(r){return r.instantiationMode==="EAGER"}class e4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const t4={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},n4=et.INFO,r4={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},i4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=r4[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z0{constructor(e){this.name=e,this._logLevel=n4,this._logHandler=i4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const s4=(r,e)=>e.some(t=>r instanceof t);let ix,sx;function a4(){return ix||(ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o4(){return sx||(sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xS=new WeakMap,Wy=new WeakMap,ES=new WeakMap,Ay=new WeakMap,B0=new WeakMap;function l4(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(ga(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&xS.set(t,r)}).catch(()=>{}),B0.set(e,r),e}function c4(r){if(Wy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Wy.set(r,e)}let Xy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Wy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ES.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ga(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function u4(r){Xy=r(Xy)}function h4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Iy(this),e,...t);return ES.set(n,e.sort?e.sort():[e]),ga(n)}:o4().includes(r)?function(...e){return r.apply(Iy(this),e),ga(xS.get(this))}:function(...e){return ga(r.apply(Iy(this),e))}}function d4(r){return typeof r=="function"?h4(r):(r instanceof IDBTransaction&&c4(r),s4(r,a4())?new Proxy(r,Xy):r)}function ga(r){if(r instanceof IDBRequest)return l4(r);if(Ay.has(r))return Ay.get(r);const e=d4(r);return e!==r&&(Ay.set(r,e),B0.set(e,r)),e}const Iy=r=>B0.get(r);function f4(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=ga(c);return n&&c.addEventListener("upgradeneeded",d=>{n(ga(c.result),d.oldVersion,d.newVersion,ga(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const m4=["get","getKey","getAll","getAllKeys","count"],g4=["put","add","delete","clear"],Ry=new Map;function ax(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ry.get(e))return Ry.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=g4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||m4.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Ry.set(e,o),o}u4(r=>({...r,get:(e,t,n)=>ax(e,t)||r.get(e,t,n),has:(e,t)=>!!ax(e,t)||r.has(e,t)}));class p4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function y4(r){return r.getComponent()?.type==="VERSION"}const Jy="@firebase/app",ox="0.14.6";const _s=new z0("@firebase/app"),_4="@firebase/app-compat",v4="@firebase/analytics-compat",b4="@firebase/analytics",w4="@firebase/app-check-compat",x4="@firebase/app-check",E4="@firebase/auth",T4="@firebase/auth-compat",S4="@firebase/database",A4="@firebase/data-connect",I4="@firebase/database-compat",R4="@firebase/functions",C4="@firebase/functions-compat",N4="@firebase/installations",k4="@firebase/installations-compat",D4="@firebase/messaging",O4="@firebase/messaging-compat",M4="@firebase/performance",P4="@firebase/performance-compat",V4="@firebase/remote-config",L4="@firebase/remote-config-compat",j4="@firebase/storage",U4="@firebase/storage-compat",z4="@firebase/firestore",B4="@firebase/ai",F4="@firebase/firestore-compat",H4="firebase",q4="12.6.0";const Zy="[DEFAULT]",$4={[Jy]:"fire-core",[_4]:"fire-core-compat",[b4]:"fire-analytics",[v4]:"fire-analytics-compat",[x4]:"fire-app-check",[w4]:"fire-app-check-compat",[E4]:"fire-auth",[T4]:"fire-auth-compat",[S4]:"fire-rtdb",[A4]:"fire-data-connect",[I4]:"fire-rtdb-compat",[R4]:"fire-fn",[C4]:"fire-fn-compat",[N4]:"fire-iid",[k4]:"fire-iid-compat",[D4]:"fire-fcm",[O4]:"fire-fcm-compat",[M4]:"fire-perf",[P4]:"fire-perf-compat",[V4]:"fire-rc",[L4]:"fire-rc-compat",[j4]:"fire-gcs",[U4]:"fire-gcs-compat",[z4]:"fire-fst",[F4]:"fire-fst-compat",[B4]:"fire-vertex","fire-js":"fire-js",[H4]:"fire-js-all"};const Xf=new Map,G4=new Map,e0=new Map;function lx(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function To(r){const e=r.name;if(e0.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;e0.set(e,r);for(const t of Xf.values())lx(t,r);for(const t of G4.values())lx(t,r);return!0}function Lm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function yr(r){return r==null?!1:r.settings!==void 0}const K4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pa=new Ah("app","Firebase",K4);class Y4{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pa.create("app-deleted",{appName:this._name})}}const Ho=q4;function TS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Zy,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw pa.create("bad-app-name",{appName:String(s)});if(t||(t=gS()),!t)throw pa.create("no-options");const o=Xf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw pa.create("duplicate-app",{appName:s})}const c=new e4(s);for(const d of e0.values())c.addComponent(d);const u=new Y4(t,n,c);return Xf.set(s,u),u}function F0(r=Zy){const e=Xf.get(r);if(!e&&r===Zy&&gS())return TS();if(!e)throw pa.create("no-app",{appName:r});return e}function ki(r,e,t){let n=$4[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}To(new wa(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const Q4="firebase-heartbeat-database",W4=1,rh="firebase-heartbeat-store";let Cy=null;function SS(){return Cy||(Cy=f4(Q4,W4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rh)}catch(t){console.warn(t)}}}}).catch(r=>{throw pa.create("idb-open",{originalErrorMessage:r.message})})),Cy}async function X4(r){try{const t=(await SS()).transaction(rh),n=await t.objectStore(rh).get(AS(r));return await t.done,n}catch(e){if(e instanceof Bi)_s.warn(e.message);else{const t=pa.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function cx(r,e){try{const n=(await SS()).transaction(rh,"readwrite");await n.objectStore(rh).put(e,AS(r)),await n.done}catch(t){if(t instanceof Bi)_s.warn(t.message);else{const n=pa.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function AS(r){return`${r.name}!${r.options.appId}`}const J4=1024,Z4=30;class eO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=ux();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>Z4){const s=rO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ux(),{heartbeatsToSend:t,unsentEntries:n}=tO(this._heartbeatsCache.heartbeats),s=Wf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function ux(){return new Date().toISOString().substring(0,10)}function tO(r,e=J4){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),hx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),hx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class nO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?HD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function hx(r){return Wf(JSON.stringify({version:2,heartbeats:r})).length}function rO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function iO(r){To(new wa("platform-logger",e=>new p4(e),"PRIVATE")),To(new wa("heartbeat",e=>new eO(e),"PRIVATE")),ki(Jy,ox,r),ki(Jy,ox,"esm2020"),ki("fire-js","")}iO("");var sO="firebase",aO="12.6.0";ki(sO,aO,"app");function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oO=IS,RS=new Ah("auth","Firebase",IS());const Jf=new z0("@firebase/auth");function lO(r,...e){Jf.logLevel<=et.WARN&&Jf.warn(`Auth (${Ho}): ${r}`,...e)}function Rf(r,...e){Jf.logLevel<=et.ERROR&&Jf.error(`Auth (${Ho}): ${r}`,...e)}function ni(r,...e){throw H0(r,...e)}function Di(r,...e){return H0(r,...e)}function CS(r,e,t){const n={...oO(),[e]:t};return new Ah("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return CS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return RS.create(r,...e)}function Ve(r,e,...t){if(!r)throw H0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Rf(e),new Error(e)}function vs(r,e){r||hs(e)}function t0(){return typeof self<"u"&&self.location?.href||""}function cO(){return dx()==="http:"||dx()==="https:"}function dx(){return typeof self<"u"&&self.location?.protocol||null}function uO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cO()||zD()||"connection"in navigator)?navigator.onLine:!0}function hO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Rh{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=jD()||BD()}get(){return uO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class NS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mO=new Rh(3e4,6e4);function Es(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return kS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=Ih({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return UD()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(f.credentials="include"),NS.fetch()(await DS(r,r.config.apiHost,t,u),f)})}async function kS(r,e,t){r._canInitEmulator=!1;const n={...dO,...e};try{const s=new pO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw gf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw gf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw gf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw CS(r,g,f);ni(r,g)}}catch(s){if(s instanceof Bi)throw s;ni(r,"network-request-failed",{message:String(s)})}}async function Ch(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ni(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function DS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?q0(r.config,s):`${r.config.apiScheme}://${s}`;return fO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function gO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Di(this.auth,"network-request-failed")),mO.get())})}}function gf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Di(r,e,n);return s.customData._tokenResponse=t,s}function fx(r){return r!==void 0&&r.enterprise!==void 0}class yO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _O(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Es(r,e))}async function vO(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function Zf(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function $u(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bO(r,e=!1){const t=Jt(r),n=await t.getIdToken(e),s=$0(n);Ve(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:$u(Ny(s.auth_time)),issuedAtTime:$u(Ny(s.iat)),expirationTime:$u(Ny(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ny(r){return Number(r)*1e3}function $0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Rf("JWT malformed, contained fewer than 3 sections"),null;try{const s=hS(t);return s?JSON.parse(s):(Rf("Failed to decode base64 JWT payload"),null)}catch(s){return Rf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function mx(r){const e=$0(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&wO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function wO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class xO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class n0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function em(r){const e=r.auth,t=await r.getIdToken(),n=await rc(r,Zf(e,{idToken:t}));Ve(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?OS(s.providerUserInfo):[],c=TO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new n0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function EO(r){const e=Jt(r);await em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function OS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function SO(r,e){const t=await kS(r,{},async()=>{const n=Ih({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await DS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(d.credentials="include"),NS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Es(r,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=mx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await SO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Xl;return n&&(Ve(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(Ve(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Ve(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function ia(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new xO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new n0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bO(this,e)}reload(){return EO(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await em(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await rc(this,vO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:T,stsTokenManager:k}=t;Ve(y&&k,e,"internal-error");const O=Xl.fromJSON(this.name,k);Ve(typeof y=="string",e,"internal-error"),ia(n,e.name),ia(s,e.name),Ve(typeof v=="boolean",e,"internal-error"),Ve(typeof w=="boolean",e,"internal-error"),ia(o,e.name),ia(c,e.name),ia(u,e.name),ia(d,e.name),ia(f,e.name),ia(g,e.name);const L=new ei({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:g});return T&&Array.isArray(T)&&(L.providerData=T.map(B=>({...B}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,t,n=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ei({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await em(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Ve(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?OS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Xl;u.updateFromIdToken(n);const d=new ei({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new n0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const gx=new Map;function ds(r){vs(r instanceof Function,"Expected a class definition");let e=gx.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,gx.set(r,e),e)}class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MS.type="NONE";const px=MS;function Cf(r,e,t){return`firebase:${r}:${e}:${t}`}class Jl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Cf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Cf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Jl(ds(px),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(px);const c=Cf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Zf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ei._fromGetAccountInfoResponse(e,v,g)}else y=ei._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Jl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Jl(o,e,n))}}function yx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zS(e))return"Blackberry";if(BS(e))return"Webos";if(VS(e))return"Safari";if((e.includes("chrome/")||LS(e))&&!e.includes("edge/"))return"Chrome";if(US(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function PS(r=mn()){return/firefox\//i.test(r)}function VS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LS(r=mn()){return/crios\//i.test(r)}function jS(r=mn()){return/iemobile/i.test(r)}function US(r=mn()){return/android/i.test(r)}function zS(r=mn()){return/blackberry/i.test(r)}function BS(r=mn()){return/webos/i.test(r)}function G0(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function IO(r=mn()){return G0(r)&&!!window.navigator?.standalone}function RO(){return FD()&&document.documentMode===10}function FS(r=mn()){return G0(r)||US(r)||BS(r)||zS(r)||/windows phone/i.test(r)||jS(r)}function HS(r,e=[]){let t;switch(r){case"Browser":t=yx(mn());break;case"Worker":t=`${yx(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${n}`}class CO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function NO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Es(r,e))}const kO=6;class DO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class OO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _x(this),this.idTokenSubscription=new _x(this),this.beforeStateQueue=new CO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await em(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(gs(this));const t=e?Jt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NO(this),t=new DO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ah("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await AO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qo(r){return Jt(r)}class _x{constructor(e){this.auth=e,this.observer=null,this.addObserver=YD(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MO(r){jm=r}function qS(r){return jm.loadJS(r)}function PO(){return jm.recaptchaEnterpriseScript}function VO(){return jm.gapiScript}function LO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class jO{constructor(){this.enterprise=new UO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zO="recaptcha-enterprise",$S="NO_RECAPTCHA";class BO{constructor(e){this.type=zO,this.auth=qo(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{_O(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new yO(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;fx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c($S)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&fx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PO();d.length!==0&&(d+=u),qS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function vx(r,e,t,n=!1,s=!1){const o=new BO(r);let c;if(s)c=$S;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function r0(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await vx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await vx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function FO(r,e){const t=Lm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ni(s,"already-initialized")}return t.initialize({options:e})}function HO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function qO(r,e,t){const n=qo(r);Ve(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=GS(e),{host:c,port:u}=$O(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ve(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ve(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,Fo(c)?(j0(`${o}//${c}${d}`),U0("Auth",!0)):GO()}function GS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function $O(r){const e=GS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:bx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:bx(c)}}}function bx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function GO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class K0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function KO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function YO(r,e){return Ch(r,"POST","/v1/accounts:signInWithPassword",Es(r,e))}async function QO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Es(r,e))}async function WO(r,e){return QO(r,e)}async function XO(r,e){return Ch(r,"POST","/v1/accounts:signInWithEmailLink",Es(r,e))}async function JO(r,e){return Ch(r,"POST","/v1/accounts:signInWithEmailLink",Es(r,e))}class ih extends K0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ih(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ih(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,t,"signInWithPassword",YO);case"emailLink":return XO(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,n,"signUpPassword",KO);case"emailLink":return JO(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(r,e){return Ch(r,"POST","/v1/accounts:signInWithIdp",Es(r,e))}const ZO="http://localhost";class So extends K0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new So(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:ZO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ih(t)}return e}}function eM(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tM(r){const e=Pu(Vu(r)).link,t=e?Pu(Vu(e)).deep_link_id:null,n=Pu(Vu(r)).deep_link_id;return(n?Pu(Vu(n)).link:null)||n||t||e||r}class Y0{constructor(e){const t=Pu(Vu(e)),n=t.apiKey??null,s=t.oobCode??null,o=eM(t.mode??null);Ve(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tM(e);try{return new Y0(t)}catch{return null}}}class bc{constructor(){this.providerId=bc.PROVIDER_ID}static credential(e,t){return ih._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Y0.parseLink(t);return Ve(n,"argument-error"),ih._fromEmailAndCode(e,n.code,n.tenantId)}}bc.PROVIDER_ID="password";bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class KS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nh extends KS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ua extends Nh{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";class us extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return So._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class ha extends Nh{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";class da extends Nh{constructor(){super("twitter.com")}static credential(e,t){return So._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return da.credential(t,n)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";async function nM(r,e){return Ch(r,"POST","/v1/accounts:signUp",Es(r,e))}class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ei._fromIdTokenResponse(e,n,s),c=wx(n);return new Ao({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=wx(n);return new Ao({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function wx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class tm extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,tm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new tm(e,t,n,s)}}function YS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tm._fromErrorAndOperation(r,o,e,n):o})}async function rM(r,e,t=!1){const n=await rc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ao._forOperation(r,"link",n)}async function iM(r,e,t=!1){const{auth:n}=r;if(yr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await rc(r,YS(n,s,e,r),t);Ve(o.idToken,n,"internal-error");const c=$0(o.idToken);Ve(c,n,"internal-error");const{sub:u}=c;return Ve(r.uid===u,n,"user-mismatch"),Ao._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ni(n,"user-mismatch"),o}}async function QS(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n="signIn",s=await YS(r,n,e),o=await Ao._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function sM(r,e){return QS(qo(r),e)}async function WS(r){const e=qo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(r,e,t){if(yr(r.app))return Promise.reject(gs(r));const n=qo(r),c=await r0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&WS(r),d}),u=await Ao._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function xx(r,e,t){return yr(r.app)?Promise.reject(gs(r)):sM(Jt(r),bc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&WS(r),n})}async function XS(r,e){const t=Jt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await WO(t.auth,s);o!==r.email&&await r.reload()}async function oM(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function JS(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Jt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await rc(n,oM(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function lM(r,e,t,n){return Jt(r).onIdTokenChanged(e,t,n)}function cM(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function uM(r,e,t,n){return Jt(r).onAuthStateChanged(e,t,n)}const nm="__sak";class ZS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nm,"1"),this.storage.removeItem(nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hM=1e3,dM=10;class eA extends ZS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);RO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dM):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eA.type="LOCAL";const fM=eA;class tA extends ZS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tA.type="SESSION";const nA=tA;function mM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Um(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await mM(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Um.receivers=[];function Q0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class gM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=Q0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function pM(r){Oi().location.href=r}function rA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function yM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _M(){return navigator?.serviceWorker?.controller||null}function vM(){return rA()?self:null}const iA="firebaseLocalStorageDb",bM=1,rm="firebaseLocalStorage",sA="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zm(r,e){return r.transaction([rm],e?"readwrite":"readonly").objectStore(rm)}function wM(){const r=indexedDB.deleteDatabase(iA);return new kh(r).toPromise()}function i0(){const r=indexedDB.open(iA,bM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(rm,{keyPath:sA})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(rm)?e(n):(n.close(),await wM(),e(await i0()))})})}async function Ex(r,e,t){const n=zm(r,!0).put({[sA]:e,value:t});return new kh(n).toPromise()}async function xM(r,e){const t=zm(r,!1).get(e),n=await new kh(t).toPromise();return n===void 0?null:n.value}function Tx(r,e){const t=zm(r,!0).delete(e);return new kh(t).toPromise()}const EM=800,TM=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>TM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Um._getInstance(vM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yM(),!this.activeServiceWorker)return;this.sender=new gM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_M()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await i0();return await Ex(e,nm,"1"),await Tx(e,nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ex(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>xM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=zm(s,!1).getAll();return new kh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const SM=aA;new Rh(3e4,6e4);function AM(r,e){return e?ds(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class W0 extends K0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IM(r){return QS(r.auth,new W0(r),r.bypassAuthState)}function RM(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),iM(t,new W0(r),r.bypassAuthState)}async function CM(r){const{auth:e,user:t}=r;return Ve(t,e,"internal-error"),rM(t,new W0(r),r.bypassAuthState)}class oA{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IM;case"linkViaPopup":case"linkViaRedirect":return CM;case"reauthViaPopup":case"reauthViaRedirect":return RM;default:ni(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NM=new Rh(2e3,1e4);class Ql extends oA{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Q0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NM.get())};e()}}Ql.currentPopupAction=null;const kM="pendingRedirect",Nf=new Map;class DM extends oA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const n=await OM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OM(r,e){const t=VM(e),n=PM(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function MM(r,e){Nf.set(r._key(),e)}function PM(r){return ds(r._redirectPersistence)}function VM(r){return Cf(kM,r.config.apiKey,r.name)}async function LM(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n=qo(r),s=AM(n,e),c=await new DM(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const jM=600*1e3;class UM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!lA(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Di(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sx(e))}saveEventToCache(e){this.cachedEventUids.add(Sx(e)),this.lastProcessedEventTime=Date.now()}}function Sx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function lA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zM(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lA(r);default:return!1}}async function BM(r,e={}){return Fi(r,"GET","/v1/projects",e)}const FM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HM=/^https?/;async function qM(r){if(r.config.emulator)return;const{authorizedDomains:e}=await BM(r);for(const t of e)try{if($M(t))return}catch{}ni(r,"unauthorized-domain")}function $M(r){const e=t0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!HM.test(t))return!1;if(FM.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const GM=new Rh(3e4,6e4);function Ax(){const r=Oi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function KM(r){return new Promise((e,t)=>{function n(){Ax(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ax(),t(Di(r,"network-request-failed"))},timeout:GM.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)n();else{const s=LO("iframefcb");return Oi()[s]=()=>{gapi.load?n():t(Di(r,"network-request-failed"))},qS(`${VO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw kf=null,e})}let kf=null;function YM(r){return kf=kf||KM(r),kf}const QM=new Rh(5e3,15e3),WM="__/auth/iframe",XM="emulator/auth/iframe",JM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e5(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?q0(e,XM):`https://${r.config.authDomain}/${WM}`,n={apiKey:e.apiKey,appName:r.name,v:Ho},s=ZM.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Ih(n).slice(1)}`}async function t5(r){const e=await YM(r),t=Oi().gapi;return Ve(t,r,"internal-error"),e.open({where:document.body,url:e5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JM,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Di(r,"network-request-failed"),u=Oi().setTimeout(()=>{o(c)},QM.get());function d(){Oi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const n5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r5=500,i5=600,s5="_blank",a5="http://localhost";class Ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o5(r,e,t,n=r5,s=i5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...n5,width:n.toString(),height:s.toString(),top:o,left:c},f=mn().toLowerCase();t&&(u=LS(f)?s5:t),PS(f)&&(e=e||a5,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,T])=>`${v}${w}=${T},`,"");if(IO(f)&&u!=="_self")return l5(e||"",u),new Ix(null);const y=window.open(e||"",u,g);Ve(y,r,"popup-blocked");try{y.focus()}catch{}return new Ix(y)}function l5(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const c5="__/auth/handler",u5="emulator/auth/handler",h5=encodeURIComponent("fac");async function Rx(r,e,t,n,s,o){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Ho,eventId:s};if(e instanceof KS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",KD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Nh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${h5}=${encodeURIComponent(d)}`:"";return`${d5(r)}?${Ih(u).slice(1)}${f}`}function d5({config:r}){return r.emulator?q0(r,u5):`https://${r.authDomain}/${c5}`}const ky="webStorageSupport";class f5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nA,this._completeRedirectFn=LM,this._overrideRedirectResult=MM}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Rx(e,t,n,t0(),s);return o5(e,o,Q0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Rx(e,t,n,t0(),s);return pM(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await t5(e),n=new UM(e);return t.register("authEvent",s=>(Ve(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ky,{type:ky},s=>{const o=s?.[0]?.[ky];o!==void 0&&t(!!o),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FS()||VS()||G0()}}const m5=f5;var Cx="@firebase/auth",Nx="1.11.1";class g5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function p5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y5(r){To(new wa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HS(r)},f=new OO(n,s,o,d);return HO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),To(new wa("auth-internal",e=>{const t=qo(e.getProvider("auth").getImmediate());return(n=>new g5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(Cx,Nx,p5(r)),ki(Cx,Nx,"esm2020")}const _5=300,v5=pS("authIdTokenMaxAge")||_5;let kx=null;const b5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>v5)return;const s=t?.token;kx!==s&&(kx=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function w5(r=F0()){const e=Lm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=FO(r,{popupRedirectResolver:m5,persistence:[SM,fM,nA]}),n=pS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=b5(o.toString());cM(t,c,()=>c(t.currentUser)),lM(t,u=>c(u))}}const s=fS("auth");return s&&qO(t,`http://${s}`),t}function x5(){return document.getElementsByTagName("head")?.[0]??document}MO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",x5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y5("Browser");var Dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ya,cA;(function(){var r;function e(M,x){function S(){}S.prototype=x.prototype,M.F=x.prototype,M.prototype=new S,M.prototype.constructor=M,M.D=function(I,N,V){for(var C=Array(arguments.length-2),G=2;G<arguments.length;G++)C[G-2]=arguments[G];return x.prototype[N].apply(I,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,x,S){S||(S=0);const I=Array(16);if(typeof x=="string")for(var N=0;N<16;++N)I[N]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(N=0;N<16;++N)I[N]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=M.g[0],S=M.g[1],N=M.g[2];let V=M.g[3],C;C=x+(V^S&(N^V))+I[0]+3614090360&4294967295,x=S+(C<<7&4294967295|C>>>25),C=V+(N^x&(S^N))+I[1]+3905402710&4294967295,V=x+(C<<12&4294967295|C>>>20),C=N+(S^V&(x^S))+I[2]+606105819&4294967295,N=V+(C<<17&4294967295|C>>>15),C=S+(x^N&(V^x))+I[3]+3250441966&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(V^S&(N^V))+I[4]+4118548399&4294967295,x=S+(C<<7&4294967295|C>>>25),C=V+(N^x&(S^N))+I[5]+1200080426&4294967295,V=x+(C<<12&4294967295|C>>>20),C=N+(S^V&(x^S))+I[6]+2821735955&4294967295,N=V+(C<<17&4294967295|C>>>15),C=S+(x^N&(V^x))+I[7]+4249261313&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(V^S&(N^V))+I[8]+1770035416&4294967295,x=S+(C<<7&4294967295|C>>>25),C=V+(N^x&(S^N))+I[9]+2336552879&4294967295,V=x+(C<<12&4294967295|C>>>20),C=N+(S^V&(x^S))+I[10]+4294925233&4294967295,N=V+(C<<17&4294967295|C>>>15),C=S+(x^N&(V^x))+I[11]+2304563134&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(V^S&(N^V))+I[12]+1804603682&4294967295,x=S+(C<<7&4294967295|C>>>25),C=V+(N^x&(S^N))+I[13]+4254626195&4294967295,V=x+(C<<12&4294967295|C>>>20),C=N+(S^V&(x^S))+I[14]+2792965006&4294967295,N=V+(C<<17&4294967295|C>>>15),C=S+(x^N&(V^x))+I[15]+1236535329&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(N^V&(S^N))+I[1]+4129170786&4294967295,x=S+(C<<5&4294967295|C>>>27),C=V+(S^N&(x^S))+I[6]+3225465664&4294967295,V=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(V^x))+I[11]+643717713&4294967295,N=V+(C<<14&4294967295|C>>>18),C=S+(V^x&(N^V))+I[0]+3921069994&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^V&(S^N))+I[5]+3593408605&4294967295,x=S+(C<<5&4294967295|C>>>27),C=V+(S^N&(x^S))+I[10]+38016083&4294967295,V=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(V^x))+I[15]+3634488961&4294967295,N=V+(C<<14&4294967295|C>>>18),C=S+(V^x&(N^V))+I[4]+3889429448&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^V&(S^N))+I[9]+568446438&4294967295,x=S+(C<<5&4294967295|C>>>27),C=V+(S^N&(x^S))+I[14]+3275163606&4294967295,V=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(V^x))+I[3]+4107603335&4294967295,N=V+(C<<14&4294967295|C>>>18),C=S+(V^x&(N^V))+I[8]+1163531501&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^V&(S^N))+I[13]+2850285829&4294967295,x=S+(C<<5&4294967295|C>>>27),C=V+(S^N&(x^S))+I[2]+4243563512&4294967295,V=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(V^x))+I[7]+1735328473&4294967295,N=V+(C<<14&4294967295|C>>>18),C=S+(V^x&(N^V))+I[12]+2368359562&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(S^N^V)+I[5]+4294588738&4294967295,x=S+(C<<4&4294967295|C>>>28),C=V+(x^S^N)+I[8]+2272392833&4294967295,V=x+(C<<11&4294967295|C>>>21),C=N+(V^x^S)+I[11]+1839030562&4294967295,N=V+(C<<16&4294967295|C>>>16),C=S+(N^V^x)+I[14]+4259657740&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^V)+I[1]+2763975236&4294967295,x=S+(C<<4&4294967295|C>>>28),C=V+(x^S^N)+I[4]+1272893353&4294967295,V=x+(C<<11&4294967295|C>>>21),C=N+(V^x^S)+I[7]+4139469664&4294967295,N=V+(C<<16&4294967295|C>>>16),C=S+(N^V^x)+I[10]+3200236656&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^V)+I[13]+681279174&4294967295,x=S+(C<<4&4294967295|C>>>28),C=V+(x^S^N)+I[0]+3936430074&4294967295,V=x+(C<<11&4294967295|C>>>21),C=N+(V^x^S)+I[3]+3572445317&4294967295,N=V+(C<<16&4294967295|C>>>16),C=S+(N^V^x)+I[6]+76029189&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^V)+I[9]+3654602809&4294967295,x=S+(C<<4&4294967295|C>>>28),C=V+(x^S^N)+I[12]+3873151461&4294967295,V=x+(C<<11&4294967295|C>>>21),C=N+(V^x^S)+I[15]+530742520&4294967295,N=V+(C<<16&4294967295|C>>>16),C=S+(N^V^x)+I[2]+3299628645&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(N^(S|~V))+I[0]+4096336452&4294967295,x=S+(C<<6&4294967295|C>>>26),C=V+(S^(x|~N))+I[7]+1126891415&4294967295,V=x+(C<<10&4294967295|C>>>22),C=N+(x^(V|~S))+I[14]+2878612391&4294967295,N=V+(C<<15&4294967295|C>>>17),C=S+(V^(N|~x))+I[5]+4237533241&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~V))+I[12]+1700485571&4294967295,x=S+(C<<6&4294967295|C>>>26),C=V+(S^(x|~N))+I[3]+2399980690&4294967295,V=x+(C<<10&4294967295|C>>>22),C=N+(x^(V|~S))+I[10]+4293915773&4294967295,N=V+(C<<15&4294967295|C>>>17),C=S+(V^(N|~x))+I[1]+2240044497&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~V))+I[8]+1873313359&4294967295,x=S+(C<<6&4294967295|C>>>26),C=V+(S^(x|~N))+I[15]+4264355552&4294967295,V=x+(C<<10&4294967295|C>>>22),C=N+(x^(V|~S))+I[6]+2734768916&4294967295,N=V+(C<<15&4294967295|C>>>17),C=S+(V^(N|~x))+I[13]+1309151649&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~V))+I[4]+4149444226&4294967295,x=S+(C<<6&4294967295|C>>>26),C=V+(S^(x|~N))+I[11]+3174756917&4294967295,V=x+(C<<10&4294967295|C>>>22),C=N+(x^(V|~S))+I[2]+718787259&4294967295,N=V+(C<<15&4294967295|C>>>17),C=S+(V^(N|~x))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+V&4294967295}n.prototype.v=function(M,x){x===void 0&&(x=M.length);const S=x-this.blockSize,I=this.C;let N=this.h,V=0;for(;V<x;){if(N==0)for(;V<=S;)s(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<x;)if(I[N++]=M.charCodeAt(V++),N==this.blockSize){s(this,I),N=0;break}}else for(;V<x;)if(I[N++]=M[V++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=x},n.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;x=this.o*8;for(var S=M.length-8;S<M.length;++S)M[S]=x&255,x/=256;for(this.v(M),M=Array(16),x=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)M[x++]=this.g[S]>>>I&255;return M};function o(M,x){var S=u;return Object.prototype.hasOwnProperty.call(S,M)?S[M]:S[M]=x(M)}function c(M,x){this.h=x;const S=[];let I=!0;for(let N=M.length-1;N>=0;N--){const V=M[N]|0;I&&V==x||(S[N]=V,I=!1)}this.g=S}var u={};function d(M){return-128<=M&&M<128?o(M,function(x){return new c([x|0],x<0?-1:0)}):new c([M|0],M<0?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(M<0)return O(f(-M));const x=[];let S=1;for(let I=0;M>=S;I++)x[I]=M/S|0,S*=4294967296;return new c(x,0)}function g(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return O(g(M.substring(1),x));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=f(Math.pow(x,8));let I=y;for(let V=0;V<M.length;V+=8){var N=Math.min(8,M.length-V);const C=parseInt(M.substring(V,V+N),x);N<8?(N=f(Math.pow(x,N)),I=I.j(N).add(f(C))):(I=I.j(S),I=I.add(f(C)))}return I}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(k(this))return-O(this).m();let M=0,x=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);M+=(I>=0?I:4294967296+I)*x,x*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(T(this))return"0";if(k(this))return"-"+O(this).toString(M);const x=f(Math.pow(M,6));var S=this;let I="";for(;;){const N=q(S,x).g;S=L(S,N.j(x));let V=((S.g.length>0?S.g[0]:S.h)>>>0).toString(M);if(S=N,T(S))return V+I;for(;V.length<6;)V="0"+V;I=V+I}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function T(M){if(M.h!=0)return!1;for(let x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function k(M){return M.h==-1}r.l=function(M){return M=L(this,M),k(M)?-1:T(M)?0:1};function O(M){const x=M.g.length,S=[];for(let I=0;I<x;I++)S[I]=~M.g[I];return new c(S,~M.h).add(v)}r.abs=function(){return k(this)?O(this):this},r.add=function(M){const x=Math.max(this.g.length,M.g.length),S=[];let I=0;for(let N=0;N<=x;N++){let V=I+(this.i(N)&65535)+(M.i(N)&65535),C=(V>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);I=C>>>16,V&=65535,C&=65535,S[N]=C<<16|V}return new c(S,S[S.length-1]&-2147483648?-1:0)};function L(M,x){return M.add(O(x))}r.j=function(M){if(T(this)||T(M))return y;if(k(this))return k(M)?O(this).j(O(M)):O(O(this).j(M));if(k(M))return O(this.j(O(M)));if(this.l(w)<0&&M.l(w)<0)return f(this.m()*M.m());const x=this.g.length+M.g.length,S=[];for(var I=0;I<2*x;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<M.g.length;N++){const V=this.i(I)>>>16,C=this.i(I)&65535,G=M.i(N)>>>16,ee=M.i(N)&65535;S[2*I+2*N]+=C*ee,B(S,2*I+2*N),S[2*I+2*N+1]+=V*ee,B(S,2*I+2*N+1),S[2*I+2*N+1]+=C*G,B(S,2*I+2*N+1),S[2*I+2*N+2]+=V*G,B(S,2*I+2*N+2)}for(M=0;M<x;M++)S[M]=S[2*M+1]<<16|S[2*M];for(M=x;M<2*x;M++)S[M]=0;return new c(S,0)};function B(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function F(M,x){this.g=M,this.h=x}function q(M,x){if(T(x))throw Error("division by zero");if(T(M))return new F(y,y);if(k(M))return x=q(O(M),x),new F(O(x.g),O(x.h));if(k(x))return x=q(M,O(x)),new F(O(x.g),x.h);if(M.g.length>30){if(k(M)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var S=v,I=x;I.l(M)<=0;)S=Y(S),I=Y(I);var N=z(S,1),V=z(I,1);for(I=z(I,2),S=z(S,2);!T(I);){var C=V.add(I);C.l(M)<=0&&(N=N.add(S),V=C),I=z(I,1),S=z(S,1)}return x=L(M,N.j(x)),new F(N,x)}for(N=y;M.l(x)>=0;){for(S=Math.max(1,Math.floor(M.m()/x.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),V=f(S),C=V.j(x);k(C)||C.l(M)>0;)S-=I,V=f(S),C=V.j(x);T(V)&&(V=v),N=N.add(V),M=L(M,C)}return new F(N,M)}r.B=function(M){return q(this,M).h},r.and=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)&M.i(I);return new c(S,this.h&M.h)},r.or=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)|M.i(I);return new c(S,this.h|M.h)},r.xor=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)^M.i(I);return new c(S,this.h^M.h)};function Y(M){const x=M.g.length+1,S=[];for(let I=0;I<x;I++)S[I]=M.i(I)<<1|M.i(I-1)>>>31;return new c(S,M.h)}function z(M,x){const S=x>>5;x%=32;const I=M.g.length-S,N=[];for(let V=0;V<I;V++)N[V]=x>0?M.i(V+S)>>>x|M.i(V+S+1)<<32-x:M.i(V+S);return new c(N,M.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,cA=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ya=c}).apply(typeof Dx<"u"?Dx:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uA,Lu,hA,Df,s0,dA,fA,mA;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var E=0;E<m.length;++E){var R=m[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=t(this);function s(m,E){if(E)e:{var R=n;m=m.split(".");for(var U=0;U<m.length-1;U++){var ae=m[U];if(!(ae in R))break e;R=R[ae]}m=m[m.length-1],U=R[m],E=E(U),E!=U&&E!=null&&e(R,m,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(E){var R=[],U;for(U in E)Object.prototype.hasOwnProperty.call(E,U)&&R.push([U,E[U]]);return R}});var o=o||{},c=this||self;function u(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function d(m,E,R){return m.call.apply(m.bind,arguments)}function f(m,E,R){return f=d,f.apply(null,arguments)}function g(m,E){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function y(m,E){function R(){}R.prototype=E.prototype,m.Z=E.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(U,ae,ue){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return E.prototype[ae].apply(U,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const R=Array(E);for(let U=0;U<E;U++)R[U]=m[U];return R}return[]}function T(m,E){for(let U=1;U<arguments.length;U++){const ae=arguments[U];var R=typeof ae;if(R=R!="object"?R:ae?Array.isArray(ae)?"array":R:"null",R=="array"||R=="object"&&typeof ae.length=="number"){R=m.length||0;const ue=ae.length||0;m.length=R+ue;for(let be=0;be<ue;be++)m[R+be]=ae[be]}else m.push(ae)}}class k{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(m){c.setTimeout(()=>{throw m},0)}function L(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,R){const U=F.get();U.set(E,R),this.h?this.h.next=U:this.g=U,this.h=U}}var F=new k(()=>new q,m=>m.reset());class q{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,z=!1,M=new B,x=()=>{const m=Promise.resolve(void 0);Y=()=>{m.then(S)}};function S(){for(var m;m=L();){try{m.h.call(m.g)}catch(R){O(R)}var E=F;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}z=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};c.addEventListener("test",R,E),c.removeEventListener("test",R,E)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function G(m,E){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}y(G,N),G.prototype.init=function(m,E){const R=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(R=="mouseover"?E=m.fromElement:R=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),P=0;function D(m,E,R,U,ae){this.listener=m,this.proxy=null,this.src=E,this.type=R,this.capture=!!U,this.ha=ae,this.key=++P,this.da=this.fa=!1}function J(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,E,R){for(const U in m)E.call(R,m[U],U,m)}function Z(m,E){for(const R in m)E.call(void 0,m[R],R,m)}function H(m){const E={};for(const R in m)E[R]=m[R];return E}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(m,E){let R,U;for(let ae=1;ae<arguments.length;ae++){U=arguments[ae];for(R in U)m[R]=U[R];for(let ue=0;ue<K.length;ue++)R=K[ue],Object.prototype.hasOwnProperty.call(U,R)&&(m[R]=U[R])}}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,E,R,U,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const be=ye(m,E,U,ae);return be>-1?(E=m[be],R||(E.fa=!1)):(E=new D(E,this.src,ue,!!U,ae),E.fa=R,m.push(E)),E};function ie(m,E){const R=E.type;if(R in m.g){var U=m.g[R],ae=Array.prototype.indexOf.call(U,E,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(U,ae,1),ue&&(J(E),m.g[R].length==0&&(delete m.g[R],m.h--))}}function ye(m,E,R,U){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==E&&ue.capture==!!R&&ue.ha==U)return ae}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ne={};function Ie(m,E,R,U,ae){if(Array.isArray(E)){for(let ue=0;ue<E.length;ue++)Ie(m,E[ue],R,U,ae);return null}return R=ot(R),m&&m[ee]?m.J(E,R,u(U)?!!U.capture:!1,ae):Ye(m,E,R,!1,U,ae)}function Ye(m,E,R,U,ae,ue){if(!E)throw Error("Invalid event type");const be=u(ae)?!!ae.capture:!!ae;let Fe=Ct(m);if(Fe||(m[Te]=Fe=new re(m)),R=Fe.add(E,R,U,be,ue),R.proxy)return R;if(U=nt(),R.proxy=U,U.src=m,U.listener=R,m.addEventListener)V||(ae=be),ae===void 0&&(ae=!1),m.addEventListener(E.toString(),U,ae);else if(m.attachEvent)m.attachEvent(Rt(E.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function nt(){function m(R){return E.call(m.src,m.listener,R)}const E=mt;return m}function Qe(m,E,R,U,ae){if(Array.isArray(E))for(var ue=0;ue<E.length;ue++)Qe(m,E[ue],R,U,ae);else U=u(U)?!!U.capture:!!U,R=ot(R),m&&m[ee]?(m=m.i,ue=String(E).toString(),ue in m.g&&(E=m.g[ue],R=ye(E,R,U,ae),R>-1&&(J(E[R]),Array.prototype.splice.call(E,R,1),E.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(E=m.g[E.toString()],m=-1,E&&(m=ye(E,R,U,ae)),(R=m>-1?E[m]:null)&&Gt(R))}function Gt(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ee])ie(E.i,m);else{var R=m.type,U=m.proxy;E.removeEventListener?E.removeEventListener(R,U,m.capture):E.detachEvent?E.detachEvent(Rt(R),U):E.addListener&&E.removeListener&&E.removeListener(U),(R=Ct(E))?(ie(R,m),R.h==0&&(R.src=null,E[Te]=null)):J(m)}}}function Rt(m){return m in Ne?Ne[m]:Ne[m]="on"+m}function mt(m,E){if(m.da)m=!0;else{E=new G(E,this);const R=m.listener,U=m.ha||m.src;m.fa&&Gt(m),m=R.call(U,E)}return m}function Ct(m){return m=m[Te],m instanceof re?m:null}var at="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(m){return typeof m=="function"?m:(m[at]||(m[at]=function(E){return m.handleEvent(E)}),m[at])}function qe(){I.call(this),this.i=new re(this),this.M=this,this.G=null}y(qe,I),qe.prototype[ee]=!0,qe.prototype.removeEventListener=function(m,E,R,U){Qe(this,m,E,R,U)};function pe(m,E){var R,U=m.G;if(U)for(R=[];U;U=U.G)R.push(U);if(m=m.M,U=E.type||E,typeof E=="string")E=new N(E,m);else if(E instanceof N)E.target=E.target||m;else{var ae=E;E=new N(U,m),ne(E,ae)}ae=!0;let ue,be;if(R)for(be=R.length-1;be>=0;be--)ue=E.g=R[be],ae=Ee(ue,U,!0,E)&&ae;if(ue=E.g=m,ae=Ee(ue,U,!0,E)&&ae,ae=Ee(ue,U,!1,E)&&ae,R)for(be=0;be<R.length;be++)ue=E.g=R[be],ae=Ee(ue,U,!1,E)&&ae}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const R=m.g[E];for(let U=0;U<R.length;U++)J(R[U]);delete m.g[E],m.h--}}this.G=null},qe.prototype.J=function(m,E,R,U){return this.i.add(String(m),E,!1,R,U)},qe.prototype.K=function(m,E,R,U){return this.i.add(String(m),E,!0,R,U)};function Ee(m,E,R,U){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let ae=!0;for(let ue=0;ue<E.length;++ue){const be=E[ue];if(be&&!be.da&&be.capture==R){const Fe=be.listener,Yt=be.ha||be.src;be.fa&&ie(m.i,be),ae=Fe.call(Yt,U)!==!1&&ae}}return ae&&!U.defaultPrevented}function Be(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function Oe(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Oe(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class xe extends I{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(m){I.call(this),this.h=m,this.g={}}y(rt,I);var gt=[];function Bn(m){W(m.g,function(E,R){this.g.hasOwnProperty(R)&&Gt(E)},m),m.g={}}rt.prototype.N=function(){rt.Z.N.call(this),Bn(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=c.JSON.stringify,Fn=c.JSON.parse,Bt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Et(){N.call(this,"d")}y(Et,N);function Zt(){N.call(this,"c")}y(Zt,N);var kt={},Yo=null;function ai(){return Yo=Yo||new qe}kt.Ia="serverreachability";function Na(m){N.call(this,kt.Ia,m)}y(Na,N);function Dn(m){const E=ai();pe(E,new Na(E))}kt.STAT_EVENT="statevent";function qi(m,E){N.call(this,kt.STAT_EVENT,m),this.stat=E}y(qi,N);function pt(m){const E=ai();pe(E,new qi(E,m))}kt.Ja="timingevent";function hn(m,E){N.call(this,kt.Ja,m),this.size=E}y(hn,N);function xn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Qo(m,E,R,U,ae,ue){m.info(function(){if(m.g)if(ue){var be="",Fe=ue.split("&");for(let ht=0;ht<Fe.length;ht++){var Yt=Fe[ht].split("=");if(Yt.length>1){const Pt=Yt[0];Yt=Yt[1];const Ir=Pt.split("_");be=Ir.length>=2&&Ir[1]=="type"?be+(Pt+"="+Yt+"&"):be+(Pt+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+U+") [attempt "+ae+"]: "+E+`
`+R+`
`+be})}function Er(m,E,R,U,ae,ue,be){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ae+"]: "+E+`
`+R+`
`+ue+" "+be})}function pn(m,E,R,U){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+_g(m,R)+(U?" "+U:"")})}function ka(m,E){m.info(function(){return"TIMEOUT: "+E})}En.prototype.info=function(){};function _g(m,E){if(!m.g)return E;if(!E)return null;try{const ue=JSON.parse(E);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var R=ue[m];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var ae=U[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<U.length;be++)U[be]=""}}}}return ut(ue)}catch{return E}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ic;function Oa(){}y(Oa,kn),Oa.prototype.g=function(){return new XMLHttpRequest},Ic=new Oa;function $i(m){return encodeURIComponent(String(m))}function qh(m){var E=1;m=m.split(":");const R=[];for(;E>0&&m.length;)R.push(m.shift()),E--;return m.length&&R.push(m.join(":")),R}function zr(m,E,R,U){this.j=m,this.i=E,this.l=R,this.S=U||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var en={},yn={};function oi(m,E,R){m.M=1,m.A=Ma(nn(E)),m.u=R,m.R=!0,Wo(m,null)}function Wo(m,E){m.F=Date.now(),li(m),m.B=nn(m.A);var R=m.B,U=m.S;Array.isArray(U)||(U=[String(U)]),el(R.i,"t",U),m.C=0,R=m.j.L,m.h=new Br,m.g=sd(m.j,R?E:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),E=m.V,R=m.g,U=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(gt[0]=ae.toString()),ae=gt);for(let ue=0;ue<ae.length;ue++){const be=Ie(R,ae[ue],U||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Dn(),Qo(m.i,m.v,m.B,m.l,m.S,m.u)}zr.prototype.ba=function(m){m=m.target;const E=this.O;E&&qr(m)==3?E.j():this.Y(m)},zr.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=qr(this.g),Yt=this.g.ya(),ht=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||ht<=0?Dn(3):Dn(2)),ci(this);var E=this.g.ca();this.X=E;var R=vg(this);if(this.o=E==200,Er(this.i,this.v,this.B,this.l,this.S,Fe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ae=this.g;if((U=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(U)){var ue=U;break t}}ue=null}if(m=ue)pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,m);else{this.o=!1,this.m=3,pt(12),or(this),Tr(this);break e}}if(this.R){m=!0;let Pt;for(;!this.K&&this.C<R.length;)if(Pt=Gh(this,R),Pt==yn){Fe==4&&(this.m=4,pt(14),m=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,pt(15),pn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else pn(this.i,this.l,Pt,null),ui(this,Pt);if($h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||R.length!=0||this.h.h||(this.m=1,pt(16),m=!1),this.o=this.o&&m,!m)pn(this.i,this.l,R,"[Invalid Chunked Response]"),or(this),Tr(this);else if(R.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Fc(be),be.P=!0,pt(11))}}else pn(this.i,this.l,R,null),ui(this,R);Fe==4&&or(this),this.o&&!this.K&&(Fe==4?td(this.j,this):(this.o=!1,li(this)))}else Ki(this.g),E==400&&R.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),or(this),Tr(this)}}}catch{}finally{}};function vg(m){if(!$h(m))return m.g.la();const E=Tn(m.g);if(E==="")return"";let R="";const U=E.length,ae=qr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return or(m),Tr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<U;ue++)m.h.h=!0,R+=m.h.i.decode(E[ue],{stream:!(ae&&ue==U-1)});return E.length=0,m.h.g+=R,m.C=0,m.h.g}function $h(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Gh(m,E){var R=m.C,U=E.indexOf(`
`,R);return U==-1?yn:(R=Number(E.substring(R,U)),isNaN(R)?en:(U+=1,U+R>E.length?yn:(E=E.slice(U,U+R),m.C=U+R,E)))}zr.prototype.cancel=function(){this.K=!0,or(this)};function li(m){m.T=Date.now()+m.H,Xo(m,m.H)}function Xo(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),E)}function ci(m){m.D&&(c.clearTimeout(m.D),m.D=null)}zr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ka(this.i,this.B),this.M!=2&&(Dn(),pt(17)),or(this),this.m=2,Tr(this)):Xo(this,this.T-m)};function Tr(m){m.j.I==0||m.K||td(m.j,m)}function or(m){ci(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Bn(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function ui(m,E){try{var R=m.j;if(R.I!=0&&(R.g==m||di(R.h,m))){if(!m.L&&di(R.h,m)&&R.I==3){try{var U=R.Ba.g.parse(E)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ae=U;if(ae[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)sl(R),Ms(R);else break e;Ba(R),pt(18)}}else R.xa=ae[1],0<R.xa-R.K&&ae[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=xn(f(R.Va,R),6e3));hi(R.h)<=1&&R.ta&&(R.ta=void 0)}else _i(R,11)}else if((m.L||R.g==m)&&sl(R),!C(E))for(ae=R.Ba.g.parse(E),E=0;E<ae.length;E++){let ht=ae[E];const Pt=ht[0];if(!(Pt<=R.K))if(R.K=Pt,ht=ht[1],R.I==2)if(ht[0]=="c"){R.M=ht[1],R.ba=ht[2];const Ir=ht[3];Ir!=null&&(R.ka=Ir,R.j.info("VER="+R.ka));const vi=ht[4];vi!=null&&(R.za=vi,R.j.info("SVER="+R.za));const $r=ht[5];$r!=null&&typeof $r=="number"&&$r>0&&(U=1.5*$r,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Gr=m.g;if(Gr){const Fa=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var ue=U.h;ue.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Nc(ue,ue.h),ue.h=null))}if(U.G){const al=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(U.wa=al,yt(U.J,U.G,al))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var be=m;if(U.na=id(U,U.L?U.ba:null,U.W),be.L){kc(U.h,be);var Fe=be,Yt=U.O;Yt&&(Fe.H=Yt),Fe.D&&(ci(Fe),li(Fe)),U.g=be}else Zh(U);R.i.length>0&&yi(R)}else ht[0]!="stop"&&ht[0]!="close"||_i(R,7);else R.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?_i(R,7):zc(R):ht[0]!="noop"&&R.l&&R.l.qa(ht),R.A=0)}}Dn(4)}catch{}}var tn=class{constructor(m,E){this.g=m,this.map=E}};function Rc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hi(m){return m.h?1:m.g?m.g.size:0}function di(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Nc(m,E){m.g?m.g.add(E):m.h=E}function kc(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Rc.prototype.cancel=function(){if(this.i=Dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Dc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const R of m.g.values())E=E.concat(R.G);return E}return w(m.i)}var Kh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jo(m,E){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const U=m[R].indexOf("=");let ae,ue=null;U>=0?(ae=m[R].substring(0,U),ue=m[R].substring(U+1)):ae=m[R],E(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof lr?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,Is(this,m.u),this.h=m.h,Oc(this,Xh(m.i)),this.m=m.m):m&&(E=String(m).match(Kh))?(this.l=!1,_n(this,E[1]||"",!0),this.o=fi(E[2]||""),this.g=fi(E[3]||"",!0),Is(this,E[4]),this.h=fi(E[5]||"",!0),Oc(this,E[6]||"",!0),this.m=fi(E[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}lr.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Pa(E,Zo,!0),":");var R=this.g;return(R||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Pa(E,Zo,!0),"@"),m.push($i(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Pa(R,R.charAt(0)=="/"?Mc:Yh,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Pa(R,Qh)),m.join("")},lr.prototype.resolve=function(m){const E=nn(this);let R=!!m.j;R?_n(E,m.j):R=!!m.o,R?E.o=m.o:R=!!m.g,R?E.g=m.g:R=m.u!=null;var U=m.h;if(R)Is(E,m.u);else if(R=!!m.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ae=E.h.lastIndexOf("/");ae!=-1&&(U=E.h.slice(0,ae+1)+U)}if(ae=U,ae==".."||ae==".")U="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){U=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const Fe=ae[be++];Fe=="."?U&&be==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),U&&be==ae.length&&ue.push("")):(ue.push(Fe),U=!0)}U=ue.join("/")}else U=ae}return R?E.h=U:R=m.i.toString()!=="",R?Oc(E,Xh(m.i)):R=!!m.m,R&&(E.m=m.m),E};function nn(m){return new lr(m)}function _n(m,E,R){m.j=R?fi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Is(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Oc(m,E,R){E instanceof Cs?(m.i=E,tl(m.i,m.l)):(R||(E=Pa(E,Rs)),m.i=new Cs(E,m.l))}function yt(m,E,R){m.i.set(E,R)}function Ma(m){return yt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pa(m,E,R){return typeof m=="string"?(m=encodeURI(m).replace(E,Wn),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Zo=/[#\/\?@]/g,Yh=/[#\?:]/g,Mc=/[#\?]/g,Rs=/[#\?@]/g,Qh=/#/g;function Cs(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Jo(m.i,function(E,R){m.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}r=Cs.prototype,r.add=function(m,E){Xn(this),this.i=null,m=Ns(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(E),this.h+=1,this};function Wh(m,E){Xn(m),E=Ns(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Pc(m,E){return Xn(m),E=Ns(m,E),m.g.has(E)}r.forEach=function(m,E){Xn(this),this.g.forEach(function(R,U){R.forEach(function(ae){m.call(E,ae,U,this)},this)},this)};function Vc(m,E){Xn(m);let R=[];if(typeof E=="string")Pc(m,E)&&(R=R.concat(m.g.get(Ns(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)R=R.concat(m[E]);return R}r.set=function(m,E){return Xn(this),this.i=null,m=Ns(this,m),Pc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},r.get=function(m,E){return m?(m=Vc(this,m),m.length>0?String(m[0]):E):E};function el(m,E,R){Wh(m,E),R.length>0&&(m.i=null,m.g.set(Ns(m,E),w(R)),m.h+=R.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let U=0;U<E.length;U++){var R=E[U];const ae=$i(R);R=Vc(this,R);for(let ue=0;ue<R.length;ue++){let be=ae;R[ue]!==""&&(be+="="+$i(R[ue])),m.push(be)}}return this.i=m.join("&")};function Xh(m){const E=new Cs;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Ns(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function tl(m,E){E&&!m.j&&(Xn(m),m.i=null,m.g.forEach(function(R,U){const ae=U.toLowerCase();U!=ae&&(Wh(this,U),el(this,ae,R))},m)),m.j=E}function Fr(m,E){const R=new En;if(c.Image){const U=new Image;U.onload=g(Sr,R,"TestLoadImage: loaded",!0,E,U),U.onerror=g(Sr,R,"TestLoadImage: error",!1,E,U),U.onabort=g(Sr,R,"TestLoadImage: abort",!1,E,U),U.ontimeout=g(Sr,R,"TestLoadImage: timeout",!1,E,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else E(!1)}function Lc(m,E){const R=new En,U=new AbortController,ae=setTimeout(()=>{U.abort(),Sr(R,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:U.signal}).then(ue=>{clearTimeout(ae),ue.ok?Sr(R,"TestPingServer: ok",!0,E):Sr(R,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ae),Sr(R,"TestPingServer: error",!1,E)})}function Sr(m,E,R,U,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),U(R)}catch{}}function ks(){this.g=new Bt}function mi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(mi,kn),mi.prototype.g=function(){return new Va(this.i,this.h)};function Va(m,E){qe.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Va,qe),r=Va.prototype,r.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Hr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function nl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ds(this):Hr(this),this.readyState==3&&nl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Ds(this))},r.Na=function(m){this.g&&(this.response=m,Ds(this))},r.ga=function(){this.g&&Ds(this)};function Ds(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Hr(m)}r.setRequestHeader=function(m,E){this.A.append(m,E)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var R=E.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=E.next();return m.join(`\r
`)};function Hr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ar(m){let E="";return W(m,function(R,U){E+=U,E+=":",E+=R,E+=`\r
`}),E}function La(m,E,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=Ar(R),typeof m=="string"?R!=null&&$i(R):yt(m,E,R))}function Tt(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Tt,qe);var gi=/^https?$/i,jc=["POST","PUT"];r=Tt.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,E,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ic.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(ue){ja(this,ue);return}if(m=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ae in U)R.set(ae,U[ae]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ue of U.keys())R.set(ue,U.get(ue));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(jc,E,void 0)>=0)||U||ae||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of R)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){ja(this,ue)}};function ja(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Uc(m),Gi(m)}function Uc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},r.Xa=function(){Ua(this)};function Ua(m){if(m.h&&typeof o<"u"){if(m.v&&qr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),qr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var U;if(U=ue===0){let be=String(m.D).match(Kh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),U=!gi.test(be?be.toLowerCase():"")}R=U}if(R)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=qr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Uc(m)}}finally{Gi(m)}}}}function Gi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,E||pe(m,"ready");try{R.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qr(m){return m.g?m.g.readyState:0}r.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Fn(E)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const E={};m=(m.g&&qr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(C(m[U]))continue;var R=qh(m[U]);const ae=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=E[ae]||[];E[ae]=ue,ue.push(R)}Z(E,function(U){return U.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(m,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||E}function Os(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,m),this.Za=pi("retryDelaySeedMs",1e4,m),this.Ta=pi("forwardChannelMaxRetries",2,m),this.va=pi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Rc(m&&m.concurrentRequestLimit),this.Ba=new ks,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Os.prototype,r.ka=8,r.I=1,r.connect=function(m,E,R,U){pt(0),this.W=m,this.H=E||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=id(this,null,this.W),yi(this)};function zc(m){if(rl(m),m.I==3){var E=m.V++,R=nn(m.J);if(yt(R,"SID",m.M),yt(R,"RID",E),yt(R,"TYPE","terminate"),za(m,R),E=new zr(m,m.j,E),E.M=2,E.A=Ma(nn(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=E.A,R=!0),R||(E.g=sd(E.j,null),E.g.ea(E.A)),E.F=Date.now(),li(E)}rd(m)}function Ms(m){m.g&&(Fc(m),m.g.cancel(),m.g=null)}function rl(m){Ms(m),m.v&&(c.clearTimeout(m.v),m.v=null),sl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function yi(m){if(!Cc(m.h)&&!m.m){m.m=!0;var E=m.Ea;Y||x(),z||(Y(),z=!0),M.add(E,m),m.D=0}}function il(m,E){return hi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,E),nd(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new zr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=H(ue),ne(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var E=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,E>4096){E=R;break e}if(E===4096||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=Jh(this,ae,E),R=nn(this.J),yt(R,"RID",m),yt(R,"CVER",22),this.G&&yt(R,"X-HTTP-Session-Id",this.G),za(this,R),ue&&(this.R?E="headers="+$i(Ar(ue))+"&"+E:this.u&&La(R,this.u,ue)),Nc(this.h,ae),this.Ra&&yt(R,"TYPE","init"),this.S?(yt(R,"$req",E),yt(R,"SID","null"),ae.U=!0,oi(ae,R,null)):oi(ae,R,E),this.I=2}}else this.I==3&&(m?Bc(this,m):this.i.length==0||Cc(this.h)||Bc(this))};function Bc(m,E){var R;E?R=E.l:R=m.V++;const U=nn(m.J);yt(U,"SID",m.M),yt(U,"RID",R),yt(U,"AID",m.K),za(m,U),m.u&&m.o&&La(U,m.u,m.o),R=new zr(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Jh(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Nc(m.h,R),oi(R,U,E)}function za(m,E){m.H&&W(m.H,function(R,U){yt(E,U,R)}),m.l&&W({},function(R,U){yt(E,U,R)})}function Jh(m,E,R){R=Math.min(m.i.length,R);const U=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Yt=["count="+R];Fe==-1?R>0?(Fe=ae[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let ht=!0;for(let Pt=0;Pt<R;Pt++){var ue=ae[Pt].g;const Ir=ae[Pt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Pt].g-100),ht=!1;else try{ue="req"+ue+"_"||"";try{var be=Ir instanceof Map?Ir:Object.entries(Ir);for(const[vi,$r]of be){let Gr=$r;u($r)&&(Gr=ut($r)),Yt.push(ue+vi+"="+encodeURIComponent(Gr))}}catch(vi){throw Yt.push(ue+"type="+encodeURIComponent("_badmap")),vi}}catch{U&&U(Ir)}}if(ht){be=Yt.join("&");break e}}be=void 0}return m=m.i.splice(0,R),E.G=m,be}function Zh(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;Y||x(),z||(Y(),z=!0),M.add(E,m),m.A=0}}function Ba(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),nd(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,ed(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Ms(this),ed(this))};function Fc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function ed(m){m.g=new zr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=nn(m.na);yt(E,"RID","rpc"),yt(E,"SID",m.M),yt(E,"AID",m.K),yt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&yt(E,"TO",m.ia),yt(E,"TYPE","xmlhttp"),za(m,E),m.u&&m.o&&La(E,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=Ma(nn(E)),R.u=null,R.R=!0,Wo(R,m)}r.Va=function(){this.C!=null&&(this.C=null,Ms(this),Ba(this),pt(19))};function sl(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function td(m,E){var R=null;if(m.g==E){sl(m),Fc(m),m.g=null;var U=2}else if(di(m.h,E))R=E.G,kc(m.h,E),U=1;else return;if(m.I!=0){if(E.o)if(U==1){R=E.u?E.u.length:0,E=Date.now()-E.F;var ae=m.D;U=ai(),pe(U,new hn(U,R)),yi(m)}else Zh(m);else if(ae=E.m,ae==3||ae==0&&E.X>0||!(U==1&&il(m,E)||U==2&&Ba(m)))switch(R&&R.length>0&&(E=m.h,E.i=E.i.concat(R)),ae){case 1:_i(m,5);break;case 4:_i(m,10);break;case 3:_i(m,6);break;default:_i(m,2)}}}function nd(m,E){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*E}function _i(m,E){if(m.j.info("Error code "+E),E==2){var R=f(m.bb,m),U=m.Ua;const ae=!U;U=new lr(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_n(U,"https"),Ma(U),ae?Fr(U.toString(),R):Lc(U.toString(),R)}else pt(2);m.I=0,m.l&&m.l.pa(E),rd(m),rl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function rd(m){if(m.I=0,m.ja=[],m.l){const E=Dc(m.h);(E.length!=0||m.i.length!=0)&&(T(m.ja,E),T(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function id(m,E,R){var U=R instanceof lr?nn(R):new lr(R);if(U.g!="")E&&(U.g=E+"."+U.g),Is(U,U.u);else{var ae=c.location;U=ae.protocol,E=E?E+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new lr(null);U&&_n(ue,U),E&&(ue.g=E),ae&&Is(ue,ae),R&&(ue.h=R),U=ue}return R=m.G,E=m.wa,R&&E&&yt(U,R,E),yt(U,"VER",m.ka),za(m,U),U}function sd(m,E,R){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new Tt(new mi({ab:R})):new Tt(m.ma),E.Fa(m.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ad(){}r=ad.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ps(){}Ps.prototype.g=function(m,E){return new Hn(m,E)};function Hn(m,E){qe.call(this),this.g=new Os(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!C(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!C(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Yi(this)}y(Hn,qe),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){zc(this.g)},Hn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=ut(m),m=R);E.i.push(new tn(E.Ya++,m)),E.I==3&&yi(E)},Hn.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,Hn.Z.N.call(this)};function od(m){Et.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const R in E){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}y(od,Et);function ld(){Zt.call(this),this.status=1}y(ld,Zt);function Yi(m){this.g=m}y(Yi,ad),Yi.prototype.ra=function(){pe(this.g,"a")},Yi.prototype.qa=function(m){pe(this.g,new od(m))},Yi.prototype.pa=function(m){pe(this.g,new ld)},Yi.prototype.oa=function(){pe(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,mA=function(){return new Ps},fA=function(){return ai()},dA=kt,s0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,Df=Da,Ac.COMPLETE="complete",hA=Ac,wn.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Lu=wn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,uA=Tt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const Ox="@firebase/firestore",Mx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let wc="12.3.0";const Io=new z0("@firebase/firestore");function ql(){return Io.logLevel}function _e(r,...e){if(Io.logLevel<=et.DEBUG){const t=e.map(X0);Io.debug(`Firestore (${wc}): ${r}`,...t)}}function Gn(r,...e){if(Io.logLevel<=et.ERROR){const t=e.map(X0);Io.error(`Firestore (${wc}): ${r}`,...t)}}function Ro(r,...e){if(Io.logLevel<=et.WARN){const t=e.map(X0);Io.warn(`Firestore (${wc}): ${r}`,...t)}}function X0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,gA(r,n,t)}function gA(r,e,t){let n=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Gn(n),new Error(n)}function Ce(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||gA(e,s,n)}function Ue(r,e){return r}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class T5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S5{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new pA(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class A5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I5{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new A5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const n=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Px(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Px(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function C5(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class J0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=C5(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function je(r,e){return r<e?-1:r>e?1:0}function a0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Dy(s)===Dy(o)?je(s,o):Dy(s)?1:-1}return je(r.length,e.length)}const N5=55296,k5=57343;function Dy(r){const e=r.charCodeAt(0);return e>=N5&&e<=k5}function ic(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function yA(r){return r+"\0"}const Vx="__name__";class Ti{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){const n=Ti.isNumericId(e),s=Ti.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):a0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ya.fromString(e.substring(4,e.length-2))}}class ft extends Ti{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Ti{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return D5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vx}static keyField(){return new Ut([Vx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ft.fromString(e))}static fromName(e){return new we(ft.fromString(e).popFirst(5))}static empty(){return new we(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ft(e.slice()))}}function _A(r,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function O5(r,e,t,n){if(e===!0&&n===!0)throw new ve(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Lx(r){if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function jx(r){if(we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Bm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bm(r);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Dh(r,e){if(!vA(r))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Ux=-62135596800,zx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*zx);return new bt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ux)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zx}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dh(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ux;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:cn("string",bt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new bt(0,0))}static max(){return new De(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sh=-1;class im{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function o0(r){return r.fields.find((e=>e.kind===2))}function ao(r){return r.fields.filter((e=>e.kind!==2))}im.UNKNOWN_ID=-1;class Of{constructor(e,t){this.fieldPath=e,this.kind=t}}class ah{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ah(0,br.min())}}function M5(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new bt(t+1,0):new bt(t,n));return new br(s,we.empty(),e)}function bA(r){return new br(r.readTime,r.key,sh)}class br{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new br(De.min(),we.empty(),sh)}static max(){return new br(De.max(),we.empty(),sh)}}function Z0(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:je(r.largestBatchId,e.largestBatchId))}const wA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $o(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==wA)throw r;_e("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,n)=>{t(e)}))}static reject(e){return new se(((t,n)=>{n(e)}))}static waitFor(e){return new se(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next((s=>s?se.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new se(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new se(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const pr="SimpleDb";class Fm{static open(e,t,n,s){try{return new Fm(t,e.transaction(s,n))}catch(o){throw new Gu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=e_(n.target.error);this.S.reject(new Gu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(_e(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new V5(t)}}class _a{static delete(e){return _e(pr,"Removing database:",e),lo(dS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!wS())return!1;if(_a.F())return!0;const e=mn(),t=_a.M(e),n=0<t&&t<10,s=EA(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,_a.M(mn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(_e(pr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new Gu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new Gu(e,c))},s.onupgradeneeded=o=>{_e(pr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{_e(pr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Fm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),se.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(_e(pr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function EA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class P5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lo(this.U.delete())}}class Gu extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ia(r){return r.name==="IndexedDbTransactionError"}class V5{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(_e(pr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(_e(pr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lo(n)}add(e){return _e(pr,"ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next((t=>(t===void 0&&(t=null),_e(pr,"GET",this.store.name,e,t),t)))}delete(e){return _e(pr,"DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return _e(pr,"COUNT",this.store.name),lo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new se(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new se(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){_e(pr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new se(((n,s)=>{t.onerror=o=>{const c=e_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new se(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new P5(u),f=t(u.primaryKey,u.value,d);if(f instanceof se){const g=f.catch((y=>(d.done(),se.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>se.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(r){return new se(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=e_(n.target.error);t(s)}}))}let Bx=!1;function e_(r){const e=_a.M(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bx||(Bx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Ku="IndexBackfiller";class L5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){_e(Ku,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();_e(Ku,`Documents written: ${t}`)}catch(t){Ia(t)?_e(Ku,"Ignoring IndexedDB error during index backfill: ",t):await $o(t)}await this.re(6e4)}))}}class j5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return se.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return _e(Ku,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(_e(Ku,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=bA(o);Z0(c,n)>0&&(n=c)})),new br(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Lr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lr.ce=-1;const po=-1;function Hm(r){return r==null}function oh(r){return r===0&&1/r==-1/0}function U5(r){return typeof r=="number"&&Number.isInteger(r)&&!oh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const sm="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Fx(e)),e=z5(r.get(t),e);return Fx(e)}function z5(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case sm:t+="";break;default:t+=o}}return t}function Fx(r){return r+sm+""}function Ci(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===sm&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(sm,o);switch((c<0||c>t)&&Ae(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Ae(61167,{path:r})}o=c+2}return new ft(n)}const oo="remoteDocuments",Oh="owner",Ll="owner",lh="mutationQueues",B5="userId",Jr="mutations",Hx="batchId",mo="userMutationsIndex",qx=["userId","batchId"];function Mf(r,e){return[r,Un(e)]}function TA(r,e,t){return[r,Un(e),t]}const F5={},sc="documentMutations",am="remoteDocumentsV14",H5=["prefixPath","collectionGroup","readTime","documentId"],Pf="documentKeyIndex",q5=["prefixPath","collectionGroup","documentId"],SA="collectionGroupIndex",$5=["collectionGroup","readTime","prefixPath","documentId"],ch="remoteDocumentGlobal",l0="remoteDocumentGlobalKey",ac="targets",AA="queryTargetsIndex",G5=["canonicalId","targetId"],oc="targetDocuments",K5=["targetId","path"],t_="documentTargetsIndex",Y5=["path","targetId"],om="targetGlobalKey",yo="targetGlobal",uh="collectionParents",Q5=["collectionId","parent"],lc="clientMetadata",W5="clientId",qm="bundles",X5="bundleId",$m="namedQueries",J5="name",n_="indexConfiguration",Z5="indexId",c0="collectionGroupIndex",eP="collectionGroup",Yu="indexState",tP=["indexId","uid"],IA="sequenceNumberIndex",nP=["uid","sequenceNumber"],Qu="indexEntries",rP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RA="documentKeyIndex",iP=["indexId","uid","orderedDocumentKey"],Gm="documentOverlays",sP=["userId","collectionPath","documentId"],u0="collectionPathOverlayIndex",aP=["userId","collectionPath","largestBatchId"],CA="collectionGroupOverlayIndex",oP=["userId","collectionGroup","largestBatchId"],r_="globals",lP="name",NA=[lh,Jr,sc,oo,ac,Oh,yo,oc,lc,ch,uh,qm,$m],cP=[...NA,Gm],kA=[lh,Jr,sc,am,ac,Oh,yo,oc,lc,ch,uh,qm,$m,Gm],DA=kA,i_=[...DA,n_,Yu,Qu],uP=i_,OA=[...i_,r_],hP=OA;class h0 extends xA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ue(r);return _a.O(t.le,e)}function $x(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ra(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function MA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class jt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gx(this.data.getIterator())}getIteratorFrom(e){return new Gx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Gx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jl(r){return r.hasNext()?r.getNext():void 0}class ir{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ir([])}unionWith(e){let t=new xt(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class PA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new PA("Invalid base64 string: "+o):o}})(e);return new un(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const dP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=dP.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Lt(r.seconds),nanos:Lt(r.nanos)}}function Lt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}const VA="server_timestamp",LA="__type__",jA="__previous_value__",UA="__local_write_time__";function s_(r){return(r?.mapValue?.fields||{})[LA]?.stringValue===VA}function Km(r){const e=r.mapValue.fields[jA];return s_(e)?Km(e):e}function hh(r){const e=bs(r.mapValue.fields[UA].timestampValue);return new bt(e.seconds,e.nanos)}class fP{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const lm="(default)";class Co{constructor(e,t){this.projectId=e,this.database=t||lm}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===lm}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}const a_="__type__",zA="__max__",ma={mapValue:{fields:{__type__:{stringValue:zA}}}},o_="__vector__",cc="value",Vf={nullValue:"NULL_VALUE"};function xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?s_(r)?4:BA(r)?9007199254740991:Ym(r)?10:11:Ae(28295,{value:r})}function Li(r,e){if(r===e)return!0;const t=xa(r);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return hh(r).isEqual(hh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return Lt(s.geoPointValue.latitude)===Lt(o.geoPointValue.latitude)&&Lt(s.geoPointValue.longitude)===Lt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Lt(s.integerValue)===Lt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Lt(s.doubleValue),u=Lt(o.doubleValue);return c===u?oh(c)===oh(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return ic(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if($x(c)!==$x(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Li(c[d],u[d])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function dh(r,e){return(r.values||[]).find((t=>Li(t,e)))!==void 0}function Ea(r,e){if(r===e)return 0;const t=xa(r),n=xa(e);if(t!==n)return je(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Lt(o.integerValue||o.doubleValue),d=Lt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Kx(r.timestampValue,e.timestampValue);case 4:return Kx(hh(r),hh(e));case 5:return a0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=je(u[f],d[f]);if(g!==0)return g}return je(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=je(Lt(o.latitude),Lt(c.latitude));return u!==0?u:je(Lt(o.longitude),Lt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Yx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[cc]?.arrayValue,g=d[cc]?.arrayValue,y=je(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Yx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ma.mapValue&&c===ma.mapValue)return 0;if(o===ma.mapValue)return 1;if(c===ma.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=a0(d[y],g[y]);if(v!==0)return v;const w=Ea(u[d[y]],f[g[y]]);if(w!==0)return w}return je(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Kx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return je(r,e);const t=bs(r),n=bs(e),s=je(t.seconds,n.seconds);return s!==0?s:je(t.nanos,n.nanos)}function Yx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Ea(t[s],n[s]);if(o)return o}return je(t.length,n.length)}function uc(r){return d0(r)}function d0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=d0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${d0(t.fields[c])}`;return s+"}"})(r.mapValue):Ae(61005,{value:r})}function Lf(r){switch(xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Km(r);return e?16+Lf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Lf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Ra(n.fields,((o,c)=>{s+=o.length+Lf(c)})),s})(r.mapValue);default:throw Ae(13486,{value:r})}}function fh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function f0(r){return!!r&&"integerValue"in r}function mh(r){return!!r&&"arrayValue"in r}function Qx(r){return!!r&&"nullValue"in r}function Wx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jf(r){return!!r&&"mapValue"in r}function Ym(r){return(r?.mapValue?.fields||{})[a_]?.stringValue===o_}function Wu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ra(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Wu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wu(r.arrayValue.values[t]);return e}return{...r}}function BA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===zA}const FA={mapValue:{fields:{[a_]:{stringValue:o_},[cc]:{arrayValue:{}}}}};function mP(r){return"nullValue"in r?Vf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?fh(Co.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Ym(r)?FA:{mapValue:{}}:Ae(35942,{value:r})}function gP(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?fh(Co.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?FA:"mapValue"in r?Ym(r)?{mapValue:{}}:ma:Ae(61959,{value:r})}function Xx(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Jx(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(t)}setAll(e){let t=Ut.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Wu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Ra(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new Vn(Wu(this.value))}}function HA(r){const e=[];return Ra(r.fields,((t,n)=>{const s=new Ut([t]);if(jf(n)){const o=HA(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ir(e)}class qt{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,De.min(),De.min(),De.min(),Vn.empty(),0)}static newFoundDocument(e,t,n,s){return new qt(e,1,t,De.min(),n,s,0)}static newNoDocument(e,t){return new qt(e,2,t,De.min(),De.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,De.min(),De.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hc{constructor(e,t){this.position=e,this.inclusive=t}}function Zx(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Ea(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function eE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function pP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class qA{}class tt extends qA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new yP(e,t,n):t==="array-contains"?new bP(e,n):t==="in"?new WA(e,n):t==="not-in"?new wP(e,n):t==="array-contains-any"?new xP(e,n):new tt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new _P(e,n):new vP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends qA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return dc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dc(r){return r.op==="and"}function m0(r){return r.op==="or"}function l_(r){return $A(r)&&dc(r)}function $A(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function g0(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+uc(r.value);if(l_(r))return r.filters.map((e=>g0(e))).join(",");{const e=r.filters.map((t=>g0(t))).join(",");return`${r.op}(${e})`}}function GA(r,e){return r instanceof tt?(function(n,s){return s instanceof tt&&n.op===s.op&&n.field.isEqual(s.field)&&Li(n.value,s.value)})(r,e):r instanceof wt?(function(n,s){return s instanceof wt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&GA(c,s.filters[u])),!0):!1})(r,e):void Ae(19439)}function KA(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function YA(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(YA).join(" ,")+"}"})(r):"Filter"}class yP extends tt{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class _P extends tt{constructor(e,t){super(e,"in",t),this.keys=QA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vP extends tt{constructor(e,t){super(e,"not-in",t),this.keys=QA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function QA(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class bP extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mh(t)&&dh(t.arrayValue,this.value)}}class WA extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dh(this.value.arrayValue,t)}}class wP extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dh(this.value.arrayValue,t)}}class xP extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>dh(this.value.arrayValue,n)))}}class EP{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function p0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new EP(r,e,t,n,s,o,c)}function No(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>g0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>uc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>uc(n))).join(",")),e.Te=t}return e.Te}function Mh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!pP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!GA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!eE(r.startAt,e.startAt)&&eE(r.endAt,e.endAt)}function cm(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function um(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function tE(r,e,t){let n=Vf,s=!0;for(const o of um(r,e)){let c=Vf,u=!0;switch(o.op){case"<":case"<=":c=mP(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Vf}Xx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Xx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function nE(r,e,t){let n=ma,s=!0;for(const o of um(r,e)){let c=ma,u=!0;switch(o.op){case">=":case">":c=gP(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ma}Jx({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Jx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class xc{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TP(r,e,t,n,s,o,c,u){return new xc(r,e,t,n,s,o,c,u)}function Ph(r){return new xc(r)}function rE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function XA(r){return r.collectionGroup!==null}function Xu(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new xt(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new gh(o,n))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new gh(Ut.keyField(),n))}return e.Ie}function jr(r){const e=Ue(r);return e.Ee||(e.Ee=SP(e,Xu(r))),e.Ee}function SP(r,e){if(r.limitType==="F")return p0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new gh(s.field,o)}));const t=r.endAt?new hc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new hc(r.startAt.position,r.startAt.inclusive):null;return p0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function y0(r,e){const t=r.filters.concat([e]);return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function hm(r,e,t){return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Qm(r,e){return Mh(jr(r),jr(e))&&r.limitType===e.limitType}function JA(r){return`${No(jr(r))}|lt:${r.limitType}`}function $l(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>YA(s))).join(", ")}]`),Hm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>uc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>uc(s))).join(",")),`Target(${n})`})(jr(r))}; limitType=${r.limitType})`}function Vh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of Xu(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=Zx(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,Xu(n),s)||n.endAt&&!(function(c,u,d){const f=Zx(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,Xu(n),s))})(r,e)}function AP(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ZA(r){return(e,t)=>{let n=!1;for(const s of Xu(r)){const o=IP(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function IP(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ea(d,f):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ae(19790,{direction:r.dir})}}class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return MA(this.inner)}size(){return this.innerSize}}const RP=new jt(we.comparator);function vr(){return RP}const e2=new jt(we.comparator);function ju(...r){let e=e2;for(const t of r)e=e.insert(t.key,t);return e}function t2(r){let e=e2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ni(){return Ju()}function n2(){return Ju()}function Ju(){return new Ts((r=>r.toString()),((r,e)=>r.isEqual(e)))}const CP=new jt(we.comparator),NP=new xt(we.comparator);function Ke(...r){let e=NP;for(const t of r)e=e.add(t);return e}const kP=new xt(je);function DP(){return kP}function c_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function r2(r){return{integerValue:""+r}}function OP(r,e){return U5(e)?r2(e):c_(r,e)}class Wm{constructor(){this._=void 0}}function MP(r,e,t){return r instanceof fc?(function(s,o){const c={fields:{[LA]:{stringValue:VA},[UA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&s_(o)&&(o=Km(o)),o&&(c.fields[jA]=o),{mapValue:c}})(t,e):r instanceof ko?s2(r,e):r instanceof Do?a2(r,e):(function(s,o){const c=i2(s,o),u=iE(c)+iE(s.Ae);return f0(c)&&f0(s.Ae)?r2(u):c_(s.serializer,u)})(r,e)}function PP(r,e,t){return r instanceof ko?s2(r,e):r instanceof Do?a2(r,e):t}function i2(r,e){return r instanceof ph?(function(n){return f0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class fc extends Wm{}class ko extends Wm{constructor(e){super(),this.elements=e}}function s2(r,e){const t=o2(e);for(const n of r.elements)t.some((s=>Li(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Do extends Wm{constructor(e){super(),this.elements=e}}function a2(r,e){let t=o2(e);for(const n of r.elements)t=t.filter((s=>!Li(s,n)));return{arrayValue:{values:t}}}class ph extends Wm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iE(r){return Lt(r.integerValue||r.doubleValue)}function o2(r){return mh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Xm{constructor(e,t){this.field=e,this.transform=t}}function VP(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof ko&&s instanceof ko||n instanceof Do&&s instanceof Do?ic(n.elements,s.elements,Li):n instanceof ph&&s instanceof ph?Li(n.Ae,s.Ae):n instanceof fc&&s instanceof fc})(r.transform,e.transform)}class LP{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Jm{}function l2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Zm(r.key,jn.none()):new Ec(r.key,r.data,jn.none());{const t=r.data,n=Vn.empty();let s=new xt(Ut.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new Ss(r.key,n,new ir(s.toArray()),jn.none())}}function jP(r,e,t){r instanceof Ec?(function(s,o,c){const u=s.value.clone(),d=aE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Ss?(function(s,o,c){if(!Uf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=aE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(c2(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Zu(r,e,t,n){return r instanceof Ec?(function(o,c,u,d){if(!Uf(o.precondition,c))return u;const f=o.value.clone(),g=oE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof Ss?(function(o,c,u,d){if(!Uf(o.precondition,c))return u;const f=oE(o.fieldTransforms,d,c),g=c.data;return g.setAll(c2(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return Uf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function UP(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=i2(n.transform,s||null);o!=null&&(t===null&&(t=Vn.empty()),t.set(n.field,o))}return t||null}function sE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ic(n,s,((o,c)=>VP(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ec extends Jm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends Jm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function c2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function aE(r,e,t){const n=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,PP(c,u,t[s]))}return n}function oE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,MP(o,c,e))}return n}class Zm extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u2 extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&jP(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Zu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Zu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=n2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=l2(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(De.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((t,n)=>sE(t,n)))&&ic(this.baseMutations,e.baseMutations,((t,n)=>sE(t,n)))}}class h_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ce(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return CP})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new h_(e,t,n,s)}}class d_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class zP{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,st;function BP(r){switch(r){case de.OK:return Ae(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function h2(r){if(r===void 0)return Gn("GRPC error has no .code"),de.UNKNOWN;switch(r){case ln.OK:return de.OK;case ln.CANCELLED:return de.CANCELLED;case ln.UNKNOWN:return de.UNKNOWN;case ln.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ln.INTERNAL:return de.INTERNAL;case ln.UNAVAILABLE:return de.UNAVAILABLE;case ln.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ln.NOT_FOUND:return de.NOT_FOUND;case ln.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ln.ABORTED:return de.ABORTED;case ln.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ln.DATA_LOSS:return de.DATA_LOSS;default:return Ae(39323,{code:r})}}(st=ln||(ln={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function FP(){return new TextEncoder}const HP=new ya([4294967295,4294967295],0);function lE(r){const e=FP().encode(r),t=new cA;return t.update(e),new Uint8Array(t.digest())}function cE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ya([t,n],0),new ya([s,o],0)]}class f_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(n<0)throw new Uu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ya.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(ya.fromNumber(n)));return s.compare(HP)===1&&(s=new ya([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lE(e),[n,s]=cE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new f_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=lE(e),[n,s]=cE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eg{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new eg(De.min(),s,new jt(je),vr(),Ke())}}class Lh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lh(n,t,Ke(),Ke(),Ke())}}class zf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class d2{constructor(e,t){this.targetId=e,this.Ce=t}}class f2{constructor(e,t,n=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class uE{constructor(){this.ve=0,this.Fe=hE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),n=Ke();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Ae(38017,{changeType:o})}})),new Lh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=hE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qP{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=_f(),this.He=_f(),this.Ye=new jt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(cm(o))if(n===0){const c=new we(o.path);this.et(t,c,qt.newNoDocument(c,De.min()))}else Ce(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof PA)return Ro("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new f_(c,s,o)}catch(d){return Ro(d instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&cm(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,qt.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ke();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new eg(e,t,this.Ye,this.je,n);return this.je=vr(),this.Je=_f(),this.He=_f(),this.Ye=new jt(je),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _f(){return new jt(we.comparator)}function hE(){return new jt(we.comparator)}const $P={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KP={and:"AND",or:"OR"};class YP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _0(r,e){return r.useProto3Json||Hm(e)?e:{value:e}}function mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function QP(r,e){return mc(r,e.toTimestamp())}function Yn(r){return Ce(!!r,49232),De.fromTimestamp((function(t){const n=bs(t);return new bt(n.seconds,n.nanos)})(r))}function m_(r,e){return v0(r,e).canonicalString()}function v0(r,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function g2(r){const e=ft.fromString(r);return Ce(T2(e),10190,{key:e.toString()}),e}function dm(r,e){return m_(r.databaseId,e.path)}function _o(r,e){const t=g2(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(_2(t))}function p2(r,e){return m_(r.databaseId,e)}function y2(r){const e=g2(r);return e.length===4?ft.emptyPath():_2(e)}function b0(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _2(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function dE(r,e,t){return{name:dm(r,e),fields:t.value.mapValue.fields}}function WP(r,e,t){const n=_o(r,e.name),s=Yn(e.updateTime),o=e.createTime?Yn(e.createTime):De.min(),c=new Vn({mapValue:{fields:e.fields}}),u=qt.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function XP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ce(g===void 0||typeof g=="string",58123),un.fromBase64String(g||"")):(Ce(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),un.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?de.UNKNOWN:h2(f.code);return new ve(g,f.message||"")})(c);t=new f2(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=_o(r,n.document.name),o=Yn(n.document.updateTime),c=n.document.createTime?Yn(n.document.createTime):De.min(),u=new Vn({mapValue:{fields:n.document.fields}}),d=qt.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new zf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=_o(r,n.document),o=n.readTime?Yn(n.readTime):De.min(),c=qt.newNoDocument(s,o),u=n.removedTargetIds||[];t=new zf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=_o(r,n.document),o=n.removedTargetIds||[];t=new zf([],o,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new zP(s,o),u=n.targetId;t=new d2(u,c)}}return t}function fm(r,e){let t;if(e instanceof Ec)t={update:dE(r,e.key,e.value)};else if(e instanceof Zm)t={delete:dm(r,e.key)};else if(e instanceof Ss)t={update:dE(r,e.key,e.data),updateMask:r3(e.fieldMask)};else{if(!(e instanceof u2))return Ae(16599,{Vt:e.type});t={verify:dm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ko)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Do)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ph)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ae(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:QP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(r,e.precondition)),t}function w0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?jn.updateTime(Yn(o.updateTime)):o.exists!==void 0?jn.exists(o.exists):jn.none()})(e.currentDocument):jn.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Ce(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new fc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new ko(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new Do(g)}else"increment"in u?d=new ph(c,u.increment):Ae(16584,{proto:u});const f=Ut.fromServerFormat(u.fieldPath);return new Xm(f,d)})(r,s))):[];if(e.update){e.update.name;const s=_o(r,e.update.name),o=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new ir(f.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new Ss(s,o,c,t,n)}return new Ec(s,o,t,n)}if(e.delete){const s=_o(r,e.delete);return new Zm(s,t)}if(e.verify){const s=_o(r,e.verify);return new u2(s,t)}return Ae(1463,{proto:e})}function JP(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Yn(s.updateTime):Yn(o);return c.isEqual(De.min())&&(c=Yn(o)),new LP(c,s.transformResults||[])})(t,e)))):[]}function v2(r,e){return{documents:[p2(r,e.path)]}}function b2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=p2(r,s);const o=(function(f){if(f.length!==0)return E2(wt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Gl(v.field),direction:e3(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=_0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function w2(r){let e=y2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ce(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=x2(y);return v instanceof wt&&l_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(T){return new gh(Kl(T.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Hm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new hc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new hc(w,v)})(t.endAt)),TP(e,s,c,o,u,"F",d,f)}function ZP(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function x2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Kl(t.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Kl(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kl(t.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Kl(t.unaryFilter.field);return tt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Kl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((n=>x2(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function e3(r){return $P[r]}function t3(r){return GP[r]}function n3(r){return KP[r]}function Gl(r){return{fieldPath:r.canonicalString()}}function Kl(r){return Ut.fromServerFormat(r.fieldPath)}function E2(r){return r instanceof tt?(function(t){if(t.op==="=="){if(Wx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:t3(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const n=t.getFilters().map((s=>E2(s)));return n.length===1?n[0]:{compositeFilter:{op:n3(t.op),filters:n}}})(r):Ae(54877,{filter:r})}function r3(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function T2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=De.min(),c=De.min(),u=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class S2{constructor(e){this.yt=e}}function i3(r,e){let t;if(e.document)t=WP(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=Mo(e.noDocument.readTime);t=qt.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const n=we.fromSegments(e.unknownDocument.path),s=Mo(e.unknownDocument.version);t=qt.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new bt(s[0],s[1]);return De.fromTimestamp(o)})(e.readTime)),t}function fE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:dm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:mc(o,c.version.toTimestamp()),createTime:mc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Oo(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Oo(e.version)}}return n}function mm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Oo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(r){const e=new bt(r.seconds,r.nanoseconds);return De.fromTimestamp(e)}function co(r,e){const t=(e.baseMutations||[]).map((o=>w0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>w0(r.yt,o))),s=bt.fromMillis(e.localWriteTimeMs);return new u_(e.batchId,s,t,n)}function zu(r){const e=Mo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Mo(r.lastLimboFreeSnapshotVersion):De.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Ce(c===1,1966,{count:c}),jr(Ph(y2(o.documents[0])))})(r.query):(function(o){return jr(w2(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,un.fromBase64String(r.resumeToken))}function A2(r,e){const t=Oo(e.snapshotVersion),n=Oo(e.lastLimboFreeSnapshotVersion);let s;s=cm(e.target)?v2(r.yt,e.target):b2(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function I2(r){const e=w2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hm(e,e.limit,"L"):e}function Oy(r,e){return new d_(e.largestBatchId,w0(r.yt,e.overlayMutation))}function mE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function gE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Oo(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class s3{getBundleMetadata(e,t){return pE(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Mo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return pE(e).put((function(s){return{bundleId:s.id,createTime:Oo(Yn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return yE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:I2(o.bundledQuery),readTime:Mo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return yE(e).put((function(s){return{name:s.name,readTime:Oo(Yn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function pE(r){return gn(r,qm)}function yE(r){return gn(r,$m)}class tg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new tg(e,n)}getOverlay(e,t){return Cu(e).get(mE(this.userId,t)).next((n=>n?Oy(this.serializer,n):null))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new d_(t,c);s.push(this.St(e,u))})),se.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Cu(e).Z(u0,u))})),se.waitFor(o)}getOverlaysForCollection(e,t,n){const s=Ni(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cu(e).J(u0,c).next((u=>{for(const d of u){const f=Oy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=Ni();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cu(e).ee({index:CA,range:u},((d,f,g)=>{const y=Oy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Cu(e).put((function(s,o,c){const[u,d,f]=mE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:fm(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Cu(r){return gn(r,Gm)}class a3{bt(e){return gn(e,r_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?un.fromUint8Array(n):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Lt(e.integerValue));else if("doubleValue"in e){const n=Lt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),oh(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?BA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ym(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=cc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Lt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uo.Kt=new uo;const Ul=255;function o3(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function _E(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=o3(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class l3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=_E(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=_E(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ul),this.sn(255)}_n(){this.an(Ul),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ul?(this.sn(Ul),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ul?(this.an(Ul),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class c3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class u3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new l3,this.ln=new c3(this.cn),this.hn=new u3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ho{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new ho(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Bf(this.En),directionalValue:Bf(this.dn),orderedDocumentKey:Bf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function sa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=vE(r.En,e.En),t!==0?t:(t=vE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function vE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Bf(r){return bS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function bE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class wE{constructor(e){this.mn=new xt(((t,n)=>Ut.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=o0(e);if(t!==void 0&&!this.wn(t))return!1;const n=ao(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Ut.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Of(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Of(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Of(n.field,n.dir==="asc"?0:1)));return new im(im.UNKNOWN_ID,this.collectionId,t,ah.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function R2(r){if(Ce(r instanceof tt||r instanceof wt,20012),r instanceof tt){if(r instanceof WA){const t=r.value.arrayValue?.values?.map((n=>tt.create(r.field,"==",n)))||[];return wt.create(t,"or")}return r}const e=r.filters.map((t=>R2(t)));return wt.create(e,r.op)}function h3(r){if(r.getFilters().length===0)return[];const e=T0(R2(r));return Ce(C2(e),7391),x0(e)||E0(e)?[e]:e.getFilters()}function x0(r){return r instanceof tt}function E0(r){return r instanceof wt&&l_(r)}function C2(r){return x0(r)||E0(r)||(function(t){if(t instanceof wt&&m0(t)){for(const n of t.getFilters())if(!x0(n)&&!E0(n))return!1;return!0}return!1})(r)}function T0(r){if(Ce(r instanceof tt||r instanceof wt,34018),r instanceof tt)return r;if(r.filters.length===1)return T0(r.filters[0]);const e=r.filters.map((n=>T0(n)));let t=wt.create(e,r.op);return t=gm(t),C2(t)?t:(Ce(t instanceof wt,64498),Ce(dc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((n,s)=>g_(n,s))))}function g_(r,e){let t;return Ce(r instanceof tt||r instanceof wt,38388),Ce(e instanceof tt||e instanceof wt,25473),t=r instanceof tt?e instanceof tt?(function(s,o){return wt.create([s,o],"and")})(r,e):xE(r,e):e instanceof tt?xE(e,r):(function(s,o){if(Ce(s.filters.length>0&&o.filters.length>0,48005),dc(s)&&dc(o))return KA(s,o.getFilters());const c=m0(s)?s:o,u=m0(s)?o:s,d=c.filters.map((f=>g_(f,u)));return wt.create(d,"or")})(r,e),gm(t)}function xE(r,e){if(dc(e))return KA(e,r.getFilters());{const t=e.filters.map((n=>g_(r,n)));return wt.create(t,"or")}}function gm(r){if(Ce(r instanceof tt||r instanceof wt,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return gm(e[0]);if($A(r))return r;const t=e.map((s=>gm(s))),n=[];return t.forEach((s=>{s instanceof tt?n.push(s):s instanceof wt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:wt.create(n,r.op)}class d3{constructor(){this.Cn=new p_}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(br.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(br.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class p_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new xt(ft.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new xt(ft.comparator)).toArray()}}const EE="IndexedDbIndexManager",vf=new Uint8Array(0);class f3{constructor(e,t){this.databaseId=t,this.vn=new p_,this.Fn=new Ts((n=>No(n)),((n,s)=>Mh(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return TE(e).put(o)}return se.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[yA(t),""],!1,!0);return TE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ci(c.parent))}return n}))}addFieldIndex(e,t){const n=ku(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=Bl(e);return o.next((u=>{c.put(gE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=ku(e),s=Bl(e),o=zl(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ku(e),n=zl(e),s=Bl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return se.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new wE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=zl(e);let s=!0;const o=new Map;return se.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ke();const u=[];return se.forEach(o,((d,f)=>{_e(EE,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(d)} to execute ${No(t)}`);const g=(function(F,q){const Y=o0(q);if(Y===void 0)return null;for(const z of um(F,Y.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(F,q){const Y=new Map;for(const z of ao(q))for(const M of um(F,z.fieldPath))switch(M.op){case"==":case"in":Y.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return Y.set(z.fieldPath.canonicalString(),M.value),Array.from(Y.values())}return null})(f,d),v=(function(F,q){const Y=[];let z=!0;for(const M of ao(q)){const x=M.kind===0?tE(F,M.fieldPath,F.startAt):nE(F,M.fieldPath,F.startAt);Y.push(x.value),z&&(z=x.inclusive)}return new hc(Y,z)})(f,d),w=(function(F,q){const Y=[];let z=!0;for(const M of ao(q)){const x=M.kind===0?nE(F,M.fieldPath,F.endAt):tE(F,M.fieldPath,F.endAt);Y.push(x.value),z&&(z=x.inclusive)}return new hc(Y,z)})(f,d),T=this.On(d,f,v),k=this.On(d,f,w),O=this.Nn(d,f,y),L=this.Bn(d.indexId,g,T,v.inclusive,k,w.inclusive,O);return se.forEach(L,(B=>n.Y(B,t.limit).next((F=>{F.forEach((q=>{const Y=we.fromSegments(q.documentKey);c.has(Y)||(c=c.add(Y),u.push(Y))}))}))))})).next((()=>u))}return se.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=h3(wt.create(e.filters,"and")).map((n=>p0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):vf,w=this.kn(e,v,n[y%f],s),T=this.qn(e,v,o[y%f],c),k=u.map((O=>this.kn(e,v,O,!0)));g.push(...this.createRange(w,T,k))}return g}kn(e,t,n,s){const o=new ho(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new ho(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new wE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return se.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new xt(Ut.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Nu;for(const s of ao(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);uo.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Nu;return uo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Nu;return uo.Kt.Dt(fh(this.databaseId,t),n.Pn((function(o){const c=ao(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Nu);let o=0;for(const c of ao(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&mh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);uo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Nu;d.seed(u.un()),uo.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof tt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=ku(e),s=Bl(e);return(t?n.J(c0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return se.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new ah(y.sequenceNumber,new br(Mo(y.readTime),new we(Ci(y.documentKey)),y.largestBatchId)):ah.empty(),w=g.fields.map((([T,k])=>new Of(Ut.fromServerFormat(T),k)));return new im(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:je(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=ku(e),o=Bl(e);return this.Gn(e).next((c=>s.J(c0,IDBKeyRange.bound(t,t)).next((u=>se.forEach(u,(d=>o.put(gE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return se.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),se.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?se.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return zl(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return zl(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=zl(e);let o=new xt(sa);return s.ee({index:RA,range:IDBKeyRange.only([n.indexId,this.uid,Bf(this.$n(n,t))])},((c,u)=>{o=o.add(new ho(n.indexId,t,bE(u.arrayValue),bE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new xt(sa);const s=this.Qn(t,e);if(s==null)return n;const o=o0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(mh(c))for(const u of c.arrayValue.values||[])n=n.add(new ho(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new ho(t.indexId,e.key,vf,s));return n}Jn(e,t,n,s,o){_e(EE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),T=f.getIterator();let k=jl(w),O=jl(T);for(;k||O;){let L=!1,B=!1;if(k&&O){const F=g(k,O);F<0?B=!0:F>0&&(L=!0)}else k!=null?B=!0:L=!0;L?(y(O),O=jl(T)):B?(v(k),k=jl(w)):(k=jl(w),O=jl(T))}})(s,o,sa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),se.waitFor(c)}Gn(e){let t=1;return Bl(e).ee({index:IA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>sa(c,u))).filter(((c,u,d)=>!u||sa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=sa(c,e),d=sa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,vf,we.empty()),d=s[c+1].Vn(this.uid,vf,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return sa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(SE)}getMinOffset(e,t){return se.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Ae(44426))))).next(SE)}}function TE(r){return gn(r,uh)}function zl(r){return gn(r,Qu)}function ku(r){return gn(r,n_)}function Bl(r){return gn(r,Yu)}function SE(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;Z0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new br(e.readTime,e.documentKey,t)}const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N2=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function k2(r,e,t){const n=r.store(Jr),s=r.store(sc),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Ce(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=TA(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return se.waitFor(o).next((()=>f))}function pm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ae(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(N2,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class ng{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Ce(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new ng(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).ee({index:mo,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Yl(e),c=aa(e);return c.add({}).next((u=>{Ce(typeof u=="number",49019);const d=new u_(u,t,n,s),f=(function(w,T,k){const O=k.baseMutations.map((B=>fm(w.yt,B))),L=k.mutations.map((B=>fm(w.yt,B)));return{userId:T,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:O,mutations:L}})(this.serializer,this.userId,d),g=[];let y=new xt(((v,w)=>je(v.canonicalString(),w.canonicalString())));for(const v of s){const w=TA(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,F5))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),se.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return aa(e).get(t).next((n=>n?(Ce(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),co(this.serializer,n)):null))}er(e,t){return this.Xn[t]?se.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return aa(e).ee({index:mo,range:s},((c,u,d)=>{u.userId===this.userId&&(Ce(u.batchId>=n,47524,{tr:n}),o=co(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=po;return aa(e).ee({index:mo,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,po],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).J(mo,t).next((n=>n.map((s=>co(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Mf(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Yl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ci(g);if(f===this.userId&&t.path.isEqual(v))return aa(e).get(y).next((w=>{if(!w)throw Ae(61480,{nr:c,batchId:y});Ce(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(co(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(je);const s=[];return t.forEach((o=>{const c=Mf(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Yl(e).ee({range:u},((f,g,y)=>{const[v,w,T]=f,k=Ci(w);v===this.userId&&o.path.isEqual(k)?n=n.add(T):y.done()}));s.push(d)})),se.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=Mf(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new xt(je);return Yl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,T=Ci(v);y===this.userId&&n.isPrefixOf(T)?T.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(aa(e).get(o).next((c=>{if(c===null)throw Ae(35274,{batchId:o});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(co(this.serializer,c))})))})),se.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return k2(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),se.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return se.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Yl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ci(o[1]);s.push(d)}else u.done()})).next((()=>{Ce(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return D2(e,this.userId,t)}_r(e){return O2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:po,lastStreamToken:""}))}}function D2(r,e,t){const n=Mf(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Yl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function aa(r){return gn(r,Jr)}function Yl(r){return gn(r,sc)}function O2(r){return gn(r,lh)}class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}class m3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Po(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>De.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Ce(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Fl(e).ee(((c,u)=>{const d=zu(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>se.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Fl(e).ee(((n,s)=>{const o=zu(s);t(o)}))}lr(e){return IE(e).get(om).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return IE(e).put(om,t)}Pr(e,t){return Fl(e).put(A2(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=No(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Fl(e).ee({range:s,index:AA},((c,u,d)=>{const f=zu(u);Mh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=fa(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),se.waitFor(s)}removeMatchingKeys(e,t,n){const s=fa(e);return se.forEach(t,(o=>{const c=Un(o.path);return se.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=fa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=fa(e);let o=Ke();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ci(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[yA(n)],!1,!0);let o=0;return fa(e).ee({index:t_,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Fl(e).get(t).next((n=>n?zu(n):null))}}function Fl(r){return gn(r,ac)}function IE(r){return gn(r,yo)}function fa(r){return gn(r,oc)}const RE="LruGarbageCollector",g3=1048576;function CE([r,e],[t,n]){const s=je(r,t);return s===0?je(e,n):s}class p3{constructor(e){this.Ir=e,this.buffer=new xt(CE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();CE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class M2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(RE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?_e(RE,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Vr(3e5)}))}}class y3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Lr.ce);const n=new p3(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(AE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),ql()<=et.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function P2(r,e){return new y3(r,e)}class _3{constructor(e,t){this.db=e,this.garbageCollector=P2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return bf(e,n)}removeReference(e,t,n){return bf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return bf(e,t)}br(e,t){return(function(s,o){let c=!1;return O2(s).te((u=>D2(s,u,o).next((d=>(d&&(c=!0),se.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,De.min()),fa(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>se.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return bf(e,t)}Sr(e,t){const n=fa(e);let s,o=Lr.ce;return n.ee({index:t_},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Lr.ce&&t(new we(Ci(s)),o),o=f,s=d):o=Lr.ce})).next((()=>{o!==Lr.ce&&t(new we(Ci(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bf(r,e){return fa(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class V2{constructor(){this.changes=new Ts((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class v3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return io(e).put(n)}removeEntry(e,t,n){return io(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],mm(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=qt.newInvalidDocument(t);return io(e).ee({index:Pf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:qt.newInvalidDocument(t)};return io(e).ee({index:Pf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n={document:this.Cr(t,o),size:pm(o)}})).next((()=>n))}getEntries(e,t){let n=vr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=vr(),s=new jt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,pm(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return se.resolve();let s=new xt(DE);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Du(s.first()),Du(s.last())),c=s.getIterator();let u=c.getNext();return io(e).ee({index:Pf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&DE(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Du(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),mm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return io(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=vr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Vh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=vr();const c=kE(t,n),u=kE(t,br.max());return io(e).ee({index:SA,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new b3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return NE(e).get(l0).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return NE(e).put(l0,t)}Cr(e,t){if(t){const n=i3(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(De.min())))return n}return qt.newInvalidDocument(e)}}function L2(r){return new v3(r)}class b3 extends V2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ts((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new xt(((o,c)=>je(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=fE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=pm(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=fE(this.Nr.serializer,c.convertToNoDocument(De.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),se.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function NE(r){return gn(r,ch)}function io(r){return gn(r,am)}function Du(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kE(r,e){const t=e.documentKey.path.toArray();return[r,mm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DE(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=je(t[o],n[o]),s)return s;return s=je(t.length,n.length),s||(s=je(t[t.length-2],n[n.length-2]),s||je(t[t.length-1],n[n.length-1]))}class w3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class j2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Zu(n.mutation,s,ir.empty(),bt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ke()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ke()){const s=Ni();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=ju();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Ni();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ke())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=vr();const c=Ju(),u=(function(){return Ju()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Ss)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Zu(g.mutation,f,g.mutation.getFieldMask(),bt.now())):c.set(f.key,ir.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new w3(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Ju();let s=new jt(((c,u)=>c-u)),o=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||ir.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ke()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=n2();g.forEach((v=>{if(!o.has(v)){const w=l2(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):se.resolve(Ni());let u=sh,d=o;return c.next((f=>se.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ke()))).next((g=>({batchId:u,changes:t2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=ju();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=ju();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(d=>{const f=(function(y,v){return new xc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,qt.newInvalidDocument(g)))}));let u=ju();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Zu(g.mutation,f,ir.empty(),bt.now()),Vh(t,f)&&(u=u.insert(d,f))})),u}))}}class x3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:I2(s.bundledQuery),readTime:Yn(s.readTime)}})(t)),se.resolve()}}class E3{constructor(){this.overlays=new jt(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ni();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=Ni(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new jt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=Ni(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ni(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return se.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new d_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ke(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class T3{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}class y_{constructor(){this.Qr=new xt(bn.$r),this.Ur=new xt(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ke();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class S3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(bn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new u_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?po:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(je);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new xt(je);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return se.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class A3{constructor(e){this.ri=e,this.docs=(function(){return new jt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let n=vr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():qt.newInvalidDocument(s))})),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=vr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||Z0(bA(g),n)<=0||(s.has(g.key)||Vh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Ae(9500)}ii(e,t){return se.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new I3(this)}getSize(e){return se.resolve(this.size)}}class I3 extends V2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class R3{constructor(e){this.persistence=e,this.si=new Ts((t=>No(t)),Mh),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new y_,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),se.waitFor(o).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}class __{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lr(0),this.li=!1,this.li=!0,this.hi=new T3,this.referenceDelegate=e(this),this.Pi=new R3(this),this.indexManager=new d3,this.remoteDocumentCache=(function(s){return new A3(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new S2(t),this.Ii=new x3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new S3(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e("MemoryPersistence","Starting transaction:",e);const s=new C3(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class C3 extends xA{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new y_,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ym{constructor(e,t){this.persistence=e,this.pi=new Ts((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=P2(this,t)}static mi(e,t){return new ym(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?se.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,De.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}br(e,t,n){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class N3{constructor(e){this.serializer=e}k(e,t,n,s){const o=new Fm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Oh)})(e),(function(d){d.createObjectStore(lh,{keyPath:B5}),d.createObjectStore(Jr,{keyPath:Hx,autoIncrement:!0}).createIndex(mo,qx,{unique:!0}),d.createObjectStore(sc)})(e),OE(e),(function(d){d.createObjectStore(oo)})(e));let c=se.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(oc),d.deleteObjectStore(ac),d.deleteObjectStore(yo)})(e),OE(e)),c=c.next((()=>(function(d){const f=d.store(yo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return f.put(om,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Jr).J().next((y=>{d.deleteObjectStore(Jr),d.createObjectStore(Jr,{keyPath:Hx,autoIncrement:!0}).createIndex(mo,qx,{unique:!0});const v=f.store(Jr),w=y.map((T=>v.put(T)));return se.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(lc,{keyPath:W5})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(ch)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(qm,{keyPath:X5})})(e),(function(d){d.createObjectStore($m,{keyPath:J5})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(Gm,{keyPath:sP});f.createIndex(u0,aP,{unique:!1}),f.createIndex(CA,oP,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(am,{keyPath:H5});f.createIndex(Pf,q5),f.createIndex(SA,$5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(oo)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(n_,{keyPath:Z5,autoIncrement:!0}).createIndex(c0,eP,{unique:!1}),d.createObjectStore(Yu,{keyPath:tP}).createIndex(IA,nP,{unique:!1}),d.createObjectStore(Qu,{keyPath:rP}).createIndex(RA,iP,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Yu).clear()})).next((()=>{t.objectStore(Qu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(r_,{keyPath:lP})})(e)}))),n<18&&s>=18&&bS()&&(c=c.next((()=>{t.objectStore(Yu).clear()})).next((()=>{t.objectStore(Qu).clear()}))),c}wi(e){let t=0;return e.store(oo).ee(((n,s)=>{t+=pm(s)})).next((()=>{const n={byteSize:t};return e.store(ch).put(l0,n)}))}yi(e){const t=e.store(lh),n=e.store(Jr);return t.J().next((s=>se.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,po],[o.userId,o.lastAcknowledgedBatchId]);return n.J(mo,c).next((u=>se.forEach(u,(d=>{Ce(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=co(this.serializer,d);return k2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(oc),n=e.store(oo);return e.store(yo).get(om).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new ft(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?se.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>se.waitFor(o)))}))}bi(e,t){e.createObjectStore(uh,{keyPath:Q5});const n=t.store(uh),s=new p_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(oo).ee({X:!0},((c,u)=>{const d=new ft(c);return o(d.popLast())})).next((()=>t.store(sc).ee({X:!0},(([c,u,d],f)=>{const g=Ci(u);return o(g.popLast())}))))}Di(e){const t=e.store(ac);return t.ee(((n,s)=>{const o=zu(s),c=A2(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(oo),s=[];return n.ee(((o,c)=>{const u=t.store(am),d=(function(y){return y.document?new we(ft.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ae(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>se.waitFor(s)))}Fi(e,t){const n=t.store(Jr),s=L2(this.serializer),o=new __(rg.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ke();co(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),se.forEach(u,((d,f)=>{const g=new Cn(f),y=tg.wt(this.serializer,g),v=o.getIndexManager(g),w=ng.wt(g,this.serializer,v,o.referenceDelegate);return new j2(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new h0(t,Lr.ce),d).next()}))}))}}function OE(r){r.createObjectStore(oc,{keyPath:K5}).createIndex(t_,Y5,{unique:!0}),r.createObjectStore(ac,{keyPath:"targetId"}).createIndex(AA,G5,{unique:!0}),r.createObjectStore(yo)}const oa="IndexedDbPersistence",My=18e5,Py=5e3,Vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",k3="main";class v_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!v_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _3(this,s),this.$i=t+k3,this.serializer=new S2(d),this.Ui=new _a(this.$i,this.Ni,new N3(this.serializer)),this.hi=new a3,this.Pi=new m3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L2(this.serializer),this.Ii=new s3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Gn(oa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Vy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Lr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ia(e))return _e(oa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e(oa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ou(e).get(Ll).next((t=>se.resolve(this.es(t))))}ts(e){return wf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,lc);return n.J().next((s=>{const o=this.ss(s,My),c=s.filter((u=>o.indexOf(u)===-1));return se.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?se.resolve(!0):Ou(e).get(Ll).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||wf(e).J().next((n=>this.ss(n,Py).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&_e(oa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Oh,lc],(e=>{const t=new h0(e,Lr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>wf(e).J().next((t=>this.ss(t,My).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return ng.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new f3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return tg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e(oa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?hP:d===17?OA:d===16?uP:d===15?i_:d===14?DA:d===13?kA:d===12?cP:d===11?NA:void Ae(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new h0(u,this.ci?this.ci.next():Lr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,wA);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Ou(e).get(Ll).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,Vy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(e).put(Ll,t)}static v(){return _a.v()}Zi(e){const t=Ou(e);return t.get(Ll).next((n=>this.es(n)?(_e(oa,"Releasing primary lease."),t.delete(Ll)):se.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;vS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return _e(oa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gn(oa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ou(r){return gn(r,Oh)}function wf(r){return gn(r,lc)}function D3(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class b_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ke(),s=Ke();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new b_(e,t.fromCache,n,s)}}class O3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class U2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vS()?8:EA(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new O3;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(ql()<=et.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ql()<=et.DEBUG&&_e("QueryEngine","Query:",$l(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ql()<=et.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):se.resolve())}ys(e,t){if(rE(t))return se.resolve(null);let n=jr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=hm(t,null,"F"),n=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ke(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,hm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return rE(t)||s.isEqual(De.min())?se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?se.resolve(null):(ql()<=et.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(t)),this.vs(e,c,t,M5(s,sh)).next((u=>u)))}))}Ds(e,t){let n=new xt(ZA(e));return t.forEach(((s,o)=>{Vh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return ql()<=et.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",$l(t)),this.ps.getDocumentsMatchingQuery(e,t,br.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const w_="LocalStore",M3=3e8;class P3{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new jt(je),this.xs=new Ts((o=>No(o)),Mh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function z2(r,e,t,n){return new P3(r,e,t,n)}async function B2(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ke();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function V3(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=se.resolve();return v.forEach((T=>{w=w.next((()=>g.getEntry(d,T))).next((k=>{const O=f.docVersions.get(T);Ce(O!==null,48541),k.version.compareTo(O)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ke();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function F2(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function L3(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(k,O,L){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=M3?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=vr(),f=Ke();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(j3(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(De.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return se.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function j3(r,e,t){let n=Ke(),s=Ke();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=vr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):_e(w_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function U3(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=po),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function z3(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,se.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function S0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ia(c))throw c;_e(w_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function ME(r,e,t){const n=Ue(r);let s=De.min(),o=Ke();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?se.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,jr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:De.min(),t?o:Ke()))).next((u=>(B3(n,AP(e),u),{documents:u,Qs:o})))))}function B3(r,e,t){let n=r.Os.get(e)||De.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class PE{constructor(){this.activeTargetIds=DP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H2{constructor(){this.Mo=new PE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new PE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class F3{Oo(e){}shutdown(){}}const VE="ConnectivityMonitor";class LE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(VE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let xf=null;function A0(){return xf===null?xf=(function(){return 268435456+Math.round(2147483648*Math.random())})():xf++,"0x"+xf.toString(16)}const Ly="RestConnection",H3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===lm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=A0(),u=this.zo(e,t.toUriEncodedString());_e(Ly,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=Fo(f);return this.Jo(e,u,d,n,g).then((y=>(_e(Ly,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Ro(Ly,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=H3[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class $3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class G3 extends q3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=A0();return new Promise(((u,d)=>{const f=new uA;f.setWithCredentials(!0),f.listenOnce(hA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Df.NO_ERROR:const y=f.getResponseJson();_e(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Df.TIMEOUT:_e(Mn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const v=f.getStatus();if(_e(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w?.error;if(T&&T.status&&T.message){const k=(function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(B)>=0?B:de.UNKNOWN})(T.status);d(new ve(k,T.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);_e(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=A0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=mA(),u=fA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");_e(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const T=new $3({Yo:O=>{w?_e(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(_e(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),_e(Mn,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Zo:()=>y.close()}),k=(O,L,B)=>{O.listen(L,(F=>{try{B(F)}catch(q){setTimeout((()=>{throw q}),0)}}))};return k(y,Lu.EventType.OPEN,(()=>{w||(_e(Mn,`RPC '${e}' stream ${s} transport opened.`),T.o_())})),k(y,Lu.EventType.CLOSE,(()=>{w||(w=!0,_e(Mn,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(y))})),k(y,Lu.EventType.ERROR,(O=>{w||(w=!0,Ro(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),T.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),k(y,Lu.EventType.MESSAGE,(O=>{if(!w){const L=O.data[0];Ce(!!L,16349);const B=L,F=B?.error||B[0]?.error;if(F){_e(Mn,`RPC '${e}' stream ${s} received error:`,F);const q=F.status;let Y=(function(x){const S=ln[x];if(S!==void 0)return h2(S)})(q),z=F.message;Y===void 0&&(Y=de.INTERNAL,z="Unknown error status: "+q+" with message "+F.message),w=!0,T.a_(new ve(Y,z)),y.close()}else _e(Mn,`RPC '${e}' stream ${s} received:`,L),T.u_(L)}})),k(u,dA.STAT_EVENT,(O=>{O.stat===s0.PROXY?_e(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===s0.NOPROXY&&_e(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function K3(){return typeof window<"u"?window:null}function Ff(){return typeof document<"u"?document:null}function ig(r){return new YP(r,!0)}class q2{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const jE="PersistentStream";class $2{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(jE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(jE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y3 extends $2{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XP(this.serializer,e),n=(function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Yn(c.readTime):De.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=b0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=cm(d)?{documents:v2(o,d)}:{query:b2(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=m2(o,c.resumeToken);const f=_0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(De.min())>0){u.readTime=mc(o,c.snapshotVersion.toTimestamp());const f=_0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=ZP(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=b0(this.serializer),t.removeTarget=e,this.q_(t)}}class Q3 extends $2{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JP(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=b0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>fm(this.serializer,n)))};this.q_(t)}}class W3{}class X3 extends W3{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,v0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,v0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vo="RemoteStore";class Z3{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Go(this)&&(_e(Vo,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await jh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await sg(f)})(this))}))})),this.Ra=new J3(n,s)}}async function sg(r){if(Go(r))for(const e of r.da)await e(!0)}async function jh(r){for(const e of r.da)await e(!1)}function G2(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),S_(t)?T_(t):Tc(t).O_()&&E_(t,e))}function x_(r,e){const t=Ue(r),n=Tc(t);t.Ia.delete(e),n.O_()&&K2(t,e),t.Ia.size===0&&(n.O_()?n.L_():Go(t)&&t.Ra.set("Unknown"))}function E_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tc(r).Y_(e)}function K2(r,e){r.Va.Ue(e),Tc(r).Z_(e)}function T_(r){r.Va=new qP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Tc(r).start(),r.Ra.ua()}function S_(r){return Go(r)&&!Tc(r).x_()&&r.Ia.size>0}function Go(r){return Ue(r).Ea.size===0}function Y2(r){r.Va=void 0}async function e6(r){r.Ra.set("Online")}async function t6(r){r.Ia.forEach(((e,t)=>{E_(r,e)}))}async function n6(r,e){Y2(r),S_(r)?(r.Ra.ha(e),T_(r)):r.Ra.set("Unknown")}async function r6(r,e,t){if(r.Ra.set("Online"),e instanceof f2&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){_e(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _m(r,n)}else if(e instanceof zf?r.Va.Ze(e):e instanceof d2?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const n=await F2(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(un.EMPTY_BYTE_STRING,g.snapshotVersion)),K2(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);E_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){_e(Vo,"Failed to raise snapshot:",n),await _m(r,n)}}async function _m(r,e,t){if(!Ia(e))throw e;r.Ea.add(1),await jh(r),r.Ra.set("Offline"),t||(t=()=>F2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e(Vo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await sg(r)}))}function Q2(r,e){return e().catch((t=>_m(r,t,e)))}async function Uh(r){const e=Ue(r),t=Ta(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:po;for(;i6(e);)try{const s=await U3(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,s6(e,s)}catch(s){await _m(e,s)}W2(e)&&X2(e)}function i6(r){return Go(r)&&r.Ta.length<10}function s6(r,e){r.Ta.push(e);const t=Ta(r);t.O_()&&t.X_&&t.ea(e.mutations)}function W2(r){return Go(r)&&!Ta(r).x_()&&r.Ta.length>0}function X2(r){Ta(r).start()}async function a6(r){Ta(r).ra()}async function o6(r){const e=Ta(r);for(const t of r.Ta)e.ea(t.mutations)}async function l6(r,e,t){const n=r.Ta.shift(),s=h_.from(n,e,t);await Q2(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Uh(r)}async function c6(r,e){e&&Ta(r).X_&&await(async function(n,s){if((function(c){return BP(c)&&c!==de.ABORTED})(s.code)){const o=n.Ta.shift();Ta(n).B_(),await Q2(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Uh(n)}})(r,e),W2(r)&&X2(r)}async function UE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),_e(Vo,"RemoteStore received new credentials");const n=Go(t);t.Ea.add(3),await jh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sg(t)}async function u6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await sg(t)):e||(t.Ea.add(2),await jh(t),t.Ra.set("Unknown"))}function Tc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new Y3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:e6.bind(null,r),t_:t6.bind(null,r),r_:n6.bind(null,r),H_:r6.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),S_(r)?T_(r):r.Ra.set("Unknown")):(await r.ma.stop(),Y2(r))}))),r.ma}function Ta(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new Q3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:a6.bind(null,r),r_:c6.bind(null,r),ta:o6.bind(null,r),na:l6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uh(r)):(await r.fa.stop(),r.Ta.length>0&&(_e(Vo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class A_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new A_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(r,e){if(Gn("AsyncQueue",`${e}: ${r}`),Ia(r))return new ve(de.UNAVAILABLE,`${e}: ${r}`);throw r}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=ju(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zE{constructor(){this.ga=new jt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class gc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new gc(e,t,ec.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class h6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d6{constructor(){this.queries=BE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=BE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function BE(){return new Ts((r=>JA(r)),Qm)}async function R_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new h6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=I_(c,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&N_(t)}async function C_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function f6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&N_(t)}function m6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function N_(r){r.Ca.forEach((e=>{e.next()}))}var I0,FE;(FE=I0||(I0={})).Ma="default",FE.Cache="cache";class k_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new gc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==I0.Cache}}class J2{constructor(e){this.key=e}}class Z2{constructor(e){this.key=e}}class g6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=ZA(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new zE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Vh(this.query,y)?y:null,T=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?T!==k&&(n.track({type:3,doc:w}),O=!0):this.su(v,w)||(n.track({type:2,doc:w}),O=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),O=!0):v&&!w&&(n.track({type:1,doc:v}),O=!0,(d||f)&&(u=!0)),O&&(w?(c=c.add(w),o=k?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,T){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:O})}};return k(w)-k(T)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new gc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Z2(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new J2(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const D_="SyncEngine";class p6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class y6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ts((u=>JA(u)),Qm),this.Iu=new Map,this.Eu=new Set,this.du=new jt(we.comparator),this.Au=new Map,this.Ru=new y_,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v6(r,e,t=!0){const n=sI(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await eI(n,e,t,!0),s}async function b6(r,e){const t=sI(r);await eI(t,e,!0,!1)}async function eI(r,e,t,n){const s=await z3(r.localStore,jr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await w6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&G2(r.remoteStore,s),u}async function w6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(k,O,L,B){let F=O.view.ru(L);F.Cs&&(F=await ME(k.localStore,O.query,!1).then((({documents:M})=>O.view.ru(M,F))));const q=B&&B.targetChanges.get(O.targetId),Y=B&&B.targetMismatches.get(O.targetId)!=null,z=O.view.applyChanges(F,k.isPrimaryClient,q,Y);return qE(k,O.targetId,z.au),z.snapshot})(r,y,v,w);const o=await ME(r.localStore,e,!0),c=new g6(e,o.Qs),u=c.ru(o.documents),d=Lh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);qE(r,t,f.au);const g=new p6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function x6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Qm(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await S0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&x_(n.remoteStore,s.targetId),R0(n,s.targetId)})).catch($o)):(R0(n,s.targetId),await S0(n.localStore,s.targetId,!0))}async function E6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),x_(t.remoteStore,n.targetId))}async function T6(r,e,t){const n=aI(r);try{const s=await(function(c,u){const d=Ue(c),f=bt.now(),g=u.reduce(((w,T)=>w.add(T.key)),Ke());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let T=vr(),k=Ke();return d.Ns.getEntries(w,g).next((O=>{T=O,T.forEach(((L,B)=>{B.isValidDocument()||(k=k.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,T))).next((O=>{y=O;const L=[];for(const B of u){const F=UP(B,y.get(B.key).overlayedDocument);F!=null&&L.push(new Ss(B.key,F,HA(F.value.mapValue),jn.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,L,u)})).next((O=>{v=O;const L=O.applyToLocalDocumentSet(y,k);return d.documentOverlayCache.saveOverlays(w,O.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:t2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new jt(je)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await zh(n,s.changes),await Uh(n.remoteStore)}catch(s){const o=I_(s,"Failed to persist write");t.reject(o)}}async function tI(r,e){const t=Ue(r);try{const n=await L3(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ce(c.hu,14607):s.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await zh(t,n,e)}catch(n){await $o(n)}}function HE(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&N_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function S6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new jt(we.comparator);c=c.insert(o,qt.newNoDocument(o,De.min()));const u=Ke().add(o),d=new eg(De.min(),new Map,new jt(je),c,u);await tI(n,d),n.du=n.du.remove(o),n.Au.delete(e),O_(n)}else await S0(n.localStore,e,!1).then((()=>R0(n,e,t))).catch($o)}async function A6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await V3(t.localStore,e);rI(t,n,null),nI(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await zh(t,s)}catch(s){await $o(s)}}async function I6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ce(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);rI(n,e,t),nI(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await zh(n,s)}catch(s){await $o(s)}}function nI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function rI(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function R0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||iI(r,n)}))}function iI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(x_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),O_(r))}function qE(r,e,t){for(const n of t)n instanceof J2?(r.Ru.addReference(n.key,e),R6(r,n)):n instanceof Z2?(_e(D_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||iI(r,n.key)):Ae(19791,{wu:n})}function R6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(_e(D_,"New document in limbo: "+t),r.Eu.add(n),O_(r))}function O_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ft.fromString(e)),n=r.fu.next();r.Au.set(n,new y6(t)),r.du=r.du.insert(t,n),G2(r.remoteStore,new fs(jr(Ph(t.path)),n,"TargetPurposeLimboResolution",Lr.ce))}}async function zh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=b_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>se.forEach(f,(v=>se.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>se.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Ia(y))throw y;_e(w_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),T=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(T);g.Ms=g.Ms.insert(v,k)}}})(n.localStore,o))}async function C6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){_e(D_,"User change. New user:",e.toKey());const n=await B2(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zh(t,n.Ls)}}function N6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ke().add(n.key);{let s=Ke();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function sI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S6.bind(null,e),e.Pu.H_=f6.bind(null,e.eventManager),e.Pu.yu=m6.bind(null,e.eventManager),e}function aI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I6.bind(null,e),e}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ig(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return z2(this.persistence,new U2,e.initialUser,this.serializer)}Cu(e){return new __(rg.mi,this.serializer)}Du(e){return new H2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class k6 extends yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof ym,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new M2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new __((n=>ym.mi(n,t)),this.serializer)}}class D6 extends yh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await aI(this.xu.syncEngine),await Uh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return z2(this.persistence,new U2,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new M2(n,e.asyncQueue,t)}Mu(e,t){const n=new j5(t,this.persistence);return new L5(e.asyncQueue,n)}Cu(e){const t=D3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new v_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,K3(),Ff(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new H2}}class vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=C6.bind(null,this.syncEngine),await u6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d6})()}createDatastore(e){const t=ig(e.databaseInfo.databaseId),n=(function(o){return new G3(o)})(e.databaseInfo);return(function(o,c,u,d){return new X3(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new Z3(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>HE(this.syncEngine,t,0)),(function(){return LE.v()?new LE:new F3})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new _6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);_e(Vo,"RemoteStore shutting down."),n.Ea.add(5),await jh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vm.provider={build:()=>new vm};class M_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Sa="FirestoreClient";class O6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=J0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{_e(Sa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(_e(Sa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=I_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function jy(r,e){r.asyncQueue.verifyOperationInProgress(),_e(Sa,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await B2(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function $E(r,e){r.asyncQueue.verifyOperationInProgress();const t=await M6(r);_e(Sa,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>UE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>UE(e.remoteStore,s))),r._onlineComponents=e}async function M6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e(Sa,"Using user provided OfflineComponentProvider");try{await jy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await jy(r,new yh)}}else _e(Sa,"Using default OfflineComponentProvider"),await jy(r,new k6(void 0));return r._offlineComponents}async function oI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e(Sa,"Using user provided OnlineComponentProvider"),await $E(r,r._uninitializedComponentsProvider._online)):(_e(Sa,"Using default OnlineComponentProvider"),await $E(r,new vm))),r._onlineComponents}function P6(r){return oI(r).then((e=>e.syncEngine))}async function bm(r){const e=await oI(r),t=e.eventManager;return t.onListen=v6.bind(null,e.syncEngine),t.onUnlisten=x6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=b6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E6.bind(null,e.syncEngine),t}function V6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new M_({next:v=>{g.Nu(),c.enqueueAndForget((()=>C_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new k_(Ph(u.path),g,{includeMetadataChanges:!0,qa:!0});return R_(o,y)})(await bm(r),r.asyncQueue,e,t,n))),n.promise}function L6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new M_({next:v=>{g.Nu(),c.enqueueAndForget((()=>C_(o,y))),v.fromCache&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new k_(u,g,{includeMetadataChanges:!0,qa:!0});return R_(o,y)})(await bm(r),r.asyncQueue,e,t,n))),n.promise}function lI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const GE=new Map;const cI="firestore.googleapis.com",KE=!0;class YE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cI,this.ssl=KE}else this.host=e.host,this.ssl=e.ssl??KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=N2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g3)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new E5;switch(n.type){case"firstParty":return new I5(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=GE.get(t);n&&(_e("ComponentProvider","Removing Datastore"),GE.delete(t),n.terminate())})(this),Promise.resolve()}}function j6(r,e,t,n={}){r=Kn(r,ag);const s=Fo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(j0(`https://${u}`),U0("Firestore",!0)),o.host!==cI&&o.host!==u&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=yS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new T5(new pA(f,g))}}class As{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class $t{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Dh(t,$t._jsonSchema))return new $t(e,n||null,new we(ft.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:cn("string",$t._jsonSchemaVersion),referencePath:cn("string")};class va extends As{constructor(e,t,n){super(e,t,Ph(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new va(this.firestore,e,this._path)}}function sr(r,e,...t){if(r=Jt(r),_A("collection","path",e),r instanceof ag){const n=ft.fromString(e,...t);return jx(n),new va(r,null,n)}{if(!(r instanceof $t||r instanceof va))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return jx(n),new va(r.firestore,null,n)}}function Mt(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=J0.newId()),_A("doc","path",e),r instanceof ag){const n=ft.fromString(e,...t);return Lx(n),new $t(r,null,new we(n))}{if(!(r instanceof $t||r instanceof va))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Lx(n),new $t(r.firestore,r instanceof va?r.converter:null,new we(n))}}const QE="AsyncQueue";class WE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q2(this,"async_queue_retry"),this._c=()=>{const n=Ff();n&&_e(QE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;_e(QE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",XE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=A_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:XE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function XE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function JE(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class ji extends ag{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new WE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WE(e),this._firestoreClient=void 0,await e}}}function U6(r,e){const t=typeof r=="object"?r:F0(),n=typeof r=="string"?r:lm,s=Lm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=mS("firestore");o&&j6(s,...o)}return s}function og(r){if(r._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||uI(r),r._firestoreClient}function uI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new fP(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,lI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new O6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function z6(r,e){Ro("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return B6(r,vm.provider,{build:n=>new D6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function B6(r,e,t){if((r=Kn(r,ji))._firestoreClient||r._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},uI(r)}class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(un.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dh(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:cn("string",Vr._jsonSchemaVersion),bytes:cn("string")};class lg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Dh(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:cn("string",Pi._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dh(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:cn("string",Vi._jsonSchemaVersion),vectorValues:cn("object")};const F6=/^__.*__$/;class H6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class hI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class cg{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dI(this.Ac)&&F6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ig(e)}Cc(e,t,n,s=!1){return new cg({Ac:e,methodName:t,Dc:n,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ug(r){const e=r._freezeSettings(),t=ig(r._databaseId);return new q6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function fI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);j_("Data must be an object, but it was:",c,n);const u=gI(n,c);let d,f;if(o.merge)d=new ir(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=C0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);yI(g,v)||g.push(v)}d=new ir(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new H6(new Vn(u),d,f)}class hg extends Sc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hg}}function mI(r,e,t){return new cg({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P_ extends Sc{_toFieldTransform(e){return new Xm(e.path,new fc)}isEqual(e){return e instanceof P_}}class V_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=mI(this,e,!0),n=this.vc.map((o=>Ko(o,t))),s=new ko(n);return new Xm(e.path,s)}isEqual(e){return e instanceof V_&&ys(this.vc,e.vc)}}class L_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=mI(this,e,!0),n=this.vc.map((o=>Ko(o,t))),s=new Do(n);return new Xm(e.path,s)}isEqual(e){return e instanceof L_&&ys(this.vc,e.vc)}}function $6(r,e,t,n){const s=r.Cc(1,e,t);j_("Data must be an object, but it was:",s,n);const o=[],c=Vn.empty();Ra(n,((d,f)=>{const g=U_(e,d,t);f=Jt(f);const y=s.yc(g);if(f instanceof hg)o.push(g);else{const v=Ko(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new ir(o);return new hI(c,u,s.fieldTransforms)}function G6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[C0(e,n,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(C0(e,o[v])),d.push(o[v+1]);const f=[],g=Vn.empty();for(let v=u.length-1;v>=0;--v)if(!yI(f,u[v])){const w=u[v];let T=d[v];T=Jt(T);const k=c.yc(w);if(T instanceof hg)f.push(w);else{const O=Ko(T,k);O!=null&&(f.push(w),g.set(w,O))}}const y=new ir(f);return new hI(g,y,c.fieldTransforms)}function K6(r,e,t,n=!1){return Ko(t,r.Cc(n?4:3,e))}function Ko(r,e){if(pI(r=Jt(r)))return j_("Unsupported field value:",e,r),gI(r,e);if(r instanceof Sc)return(function(n,s){if(!dI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Ko(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return OP(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=bt.fromDate(n);return{timestampValue:mc(s.serializer,o)}}if(n instanceof bt){const o=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mc(s.serializer,o)}}if(n instanceof Pi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vr)return{bytesValue:m2(s.serializer,n._byteString)};if(n instanceof $t){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:m_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Vi)return(function(c,u){return{mapValue:{fields:{[a_]:{stringValue:o_},[cc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return c_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Bm(n)}`)})(r,e)}function gI(r,e){const t={};return MA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(r,((n,s)=>{const o=Ko(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function pI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof Pi||r instanceof Vr||r instanceof $t||r instanceof Sc||r instanceof Vi)}function j_(r,e,t){if(!pI(t)||!vA(t)){const n=Bm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function C0(r,e,t){if((e=Jt(e))instanceof lg)return e._internalPath;if(typeof e=="string")return U_(r,e);throw wm("Field path arguments must be of type string or ",r,!1,void 0,t)}const Y6=new RegExp("[~\\*/\\[\\]]");function U_(r,e,t){if(e.search(Y6)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new lg(...e.split("."))._internalPath}catch{throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function wm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,u+r+d)}function yI(r,e){return r.some((t=>t.isEqual(e)))}class _I{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Q6 extends _I{data(){return super.data()}}function dg(r,e){return typeof e=="string"?U_(r,e):e instanceof lg?e._internalPath:e._delegate._internalPath}function vI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z_{}class B_ extends z_{}function Lo(r,e,...t){let n=[];e instanceof z_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof F_)).length,u=o.filter((d=>d instanceof fg)).length;if(c>1||c>0&&u>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class fg extends B_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new fg(e,t,n)}_apply(e){const t=this._parse(e);return bI(e._query,t),new As(e.firestore,e.converter,y0(e._query,t))}_parse(e){const t=ug(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){eT(y,g);const T=[];for(const k of y)T.push(ZE(d,o,k));v={arrayValue:{values:T}}}else v=ZE(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||eT(y,g),v=K6(u,c,y,g==="in"||g==="not-in");return tt.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pc(r,e,t){const n=e,s=dg("where",r);return fg._create(s,n,t)}class F_ extends z_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new F_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)bI(c,d),c=y0(c,d)})(e._query,t),new As(e.firestore,e.converter,y0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class H_ extends B_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new H_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gh(o,c)})(e._query,this._field,this._direction);return new As(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new xc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function W6(r,e="asc"){const t=e,n=dg("orderBy",r);return H_._create(n,t)}class q_ extends B_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new q_(e,t,n)}_apply(e){return new As(e.firestore,e.converter,hm(e._query,this._limit,this._limitType))}}function X6(r){return q_._create("limit",r,"F")}function ZE(r,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XA(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return fh(r,new we(n))}if(t instanceof $t)return fh(r,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bm(t)}.`)}function eT(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class J6{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ra(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[cc].arrayValue?.values?.map((n=>Lt(n.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new Pi(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Km(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Ce(T2(n),9688,{name:e});const s=new Co(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function wI(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends _I{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:cn("string",vo._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Hf extends vo{data(e={}){return super.data(e)}}class bo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Hf(this._firestore,this._userDataWriter,n.key,n,new Bu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new Hf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Hf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:Z6(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=J0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function jo(r){r=Kn(r,$t);const e=Kn(r.firestore,ji);return V6(og(e),r._key).then((t=>xI(e,r,t)))}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:cn("string",bo._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class $_ extends J6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function yc(r){r=Kn(r,As);const e=Kn(r.firestore,ji),t=og(e),n=new $_(e);return vI(r._query),L6(t,r._query).then((s=>new bo(e,n,r,s)))}function mg(r,e,t){r=Kn(r,$t);const n=Kn(r.firestore,ji),s=wI(r.converter,e,t);return gg(n,[fI(ug(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,jn.none())])}function wr(r,e,t,...n){r=Kn(r,$t);const s=Kn(r.firestore,ji),o=ug(s);let c;return c=typeof(e=Jt(e))=="string"||e instanceof lg?G6(o,"updateDoc",r._key,e,t,n):$6(o,"updateDoc",r._key,e),gg(s,[c.toMutation(r._key,jn.exists(!0))])}function xm(r){return gg(Kn(r.firestore,ji),[new Zm(r._key,jn.none())])}function Bh(r,e){const t=Kn(r.firestore,ji),n=Mt(r),s=wI(r.converter,e);return gg(t,[fI(ug(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,jn.exists(!1))]).then((()=>n))}function tc(r,...e){r=Jt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||JE(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(JE(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof $t)c=Kn(r.firestore,ji),u=Ph(r._key.path),o={next:d=>{e[n]&&e[n](xI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Kn(r,As);c=Kn(d.firestore,ji),u=d._query;const f=new $_(c);o={next:g=>{e[n]&&e[n](new bo(c,f,d,g))},error:e[n+1],complete:e[n+2]},vI(r._query)}return(function(f,g,y,v){const w=new M_(v),T=new k_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>R_(await bm(f),T))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>C_(await bm(f),T)))}})(og(c),u,s,o)}function gg(r,e){return(function(n,s){const o=new Mi;return n.asyncQueue.enqueueAndForget((async()=>T6(await P6(n),s,o))),o.promise})(og(r),e)}function xI(r,e,t){const n=t.docs.get(e._key),s=new $_(r);return new vo(r,s,e._key,n,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}function ar(){return new P_("serverTimestamp")}function G_(...r){return new V_("arrayUnion",r)}function EI(...r){return new L_("arrayRemove",r)}(function(e,t=!0){(function(s){wc=s})(Ho),To(new wa("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new ji(new S5(n.getProvider("auth-internal")),new R5(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ki(Ox,Mx,e),ki(Ox,Mx,"esm2020")})();const TI="firebasestorage.googleapis.com",eV="storageBucket",tV=120*1e3,nV=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(Uy(e),`Firebase Storage: ${t} (${Uy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function Uy(r){return"storage/"+r}function rV(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(Ui.UNKNOWN,r)}function iV(){return new Hi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sV(){return new Hi(Ui.CANCELED,"User canceled the upload/download.")}function aV(r){return new Hi(Ui.INVALID_URL,"Invalid URL '"+r+"'.")}function oV(r){return new Hi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function tT(r){return new Hi(Ui.INVALID_ARGUMENT,r)}function SI(){return new Hi(Ui.APP_DELETED,"The Firebase app was deleted.")}function lV(r){return new Hi(Ui.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ti.makeFromUrl(e,t)}catch{return new ti(e,"")}if(n.path==="")return n;throw oV(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),T={bucket:1,path:3},k=t===TI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",L=new RegExp(`^https?://${k}/${s}/${O}`,"i"),F=[{regex:u,indices:d,postModify:o},{regex:w,indices:T,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<F.length;q++){const Y=F[q],z=Y.regex.exec(e);if(z){const M=z[Y.indices.bucket];let x=z[Y.indices.path];x||(x=""),n=new ti(M,x),Y.postModify(n);break}}if(n==null)throw aV(e);return n}}class cV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uV(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...O){f||(f=!0,e.apply(null,O))}function y(O){s=setTimeout(()=>{s=null,r(w,d())},O)}function v(){o&&clearTimeout(o)}function w(O,...L){if(f){v();return}if(O){v(),g.call(null,O,...L);return}if(d()||c){v(),g.call(null,O,...L);return}n<64&&(n*=2);let F;u===1?(u=2,F=0):F=(n+Math.random())*1e3,y(F)}let T=!1;function k(O){T||(T=!0,v(),!f&&(s!==null?(O||(u=2),clearTimeout(s),y(0)):O||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function hV(r){r(!1)}function dV(r){return r!==void 0}function nT(r,e,t,n){if(n<e)throw tT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw tT(`Invalid value for '${r}'. Expected ${t} or less.`)}function fV(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var Em;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Em||(Em={}));function mV(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class gV{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,k)=>{this.resolve_=T,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Ef(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Em.NO_ERROR,d=o.getStatus();if(!u||mV(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Em.ABORT;n(!1,new Ef(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new Ef(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());dV(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=rV();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?SI():sV();c(d)}else{const d=iV();c(d)}};this.canceled_?t(!1,new Ef(!1,null,!0)):this.backoffId_=uV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ef{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function pV(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function yV(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _V(r,e){e&&(r["X-Firebase-GMPID"]=e)}function vV(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function bV(r,e,t,n,s,o,c=!0,u=!1){const d=fV(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return _V(g,e),pV(g,t),yV(g,o),vV(g,n),new gV(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function wV(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function xV(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Tm{constructor(e,t){this._service=e,t instanceof ti?this._location=t:this._location=ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tm(e,t)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xV(this._location.path)}get storage(){return this._service}get parent(){const e=wV(this._location.path);if(e===null)return null;const t=new ti(this._location.bucket,e);return new Tm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lV(e)}}function rT(r,e){const t=e?.[eV];return t==null?null:ti.makeFromBucketSpec(t,r)}function EV(r,e,t,n={}){r.host=`${e}:${t}`;const s=Fo(e);s&&(j0(`https://${r.host}/b`),U0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:yS(o,r.app.options.projectId))}class TV{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=TI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tV,this._maxUploadRetryTime=nV,this._requests=new Set,s!=null?this._bucket=ti.makeFromBucketSpec(s,this._host):this._bucket=rT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=rT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tm(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new cV(SI());{const c=bV(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const iT="@firebase/storage",sT="0.14.0";const AI="storage";function SV(r=F0(),e){r=Jt(r);const n=Lm(r,AI).getImmediate({identifier:e}),s=mS("storage");return s&&AV(n,...s),n}function AV(r,e,t,n={}){EV(r,e,t,n)}function IV(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new TV(t,n,s,e,Ho)}function RV(){To(new wa(AI,IV,"PUBLIC").setMultipleInstances(!0)),ki(iT,sT,""),ki(iT,sT,"esm2020")}RV();const CV={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},K_=TS(CV),_r=w5(K_),Ge=U6(K_);SV(K_);new us;try{z6(Ge).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const II=$.createContext();function si(){return $.useContext(II)}function NV({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>uM(_r,async f=>{if(f){t(f);try{const g=Mt(Ge,"users",f.uid),y=await jo(g);if(y.exists())t(v=>({...v,...y.data()}));else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await mg(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await _r.signOut(),t(null)},refreshUser:async()=>{if(_r.currentUser){await _r.currentUser.reload();const d=_r.currentUser;let f={};try{const g=await jo(Mt(Ge,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(II.Provider,{value:u,children:!n&&r})}const kV=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DV=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),aT=r=>{const e=DV(r);return e.charAt(0).toUpperCase()+e.slice(1)},RI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),OV=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var MV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PV=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...MV,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:RI("lucide",s),...!o&&!OV(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Pe=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(PV,{ref:o,iconNode:e,className:RI(`lucide-${kV(aT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=aT(r),t};const VV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Sm=Pe("activity",VV);const LV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jV=Pe("arrow-left",LV);const UV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],CI=Pe("arrow-right",UV);const zV=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],BV=Pe("brain",zV);const FV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],HV=Pe("calendar-check",FV);const qV=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],wo=Pe("camera",qV);const $V=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],NI=Pe("chevron-down",$V);const GV=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KV=Pe("chevron-right",GV);const YV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],kI=Pe("circle-alert",YV);const QV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pg=Pe("circle-check-big",QV);const WV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],XV=Pe("circle-check",WV);const JV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],DI=Pe("clock",JV);const ZV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],eL=Pe("file-text",ZV);const tL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],nL=Pe("globe",tL);const rL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],iL=Pe("grid-3x3",rL);const sL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],aL=Pe("heart",sL);const oL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],OI=Pe("house",oL);const lL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],MI=Pe("image",lL);const cL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],PI=Pe("info",cL);const uL=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],hL=Pe("leaf",uL);const dL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xo=Pe("loader-circle",dL);const fL=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],oT=Pe("log-in",fL);const mL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],VI=Pe("log-out",mL);const gL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pL=Pe("mail",gL);const yL=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],_h=Pe("message-circle",yL);const _L=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],vL=Pe("mic",_L);const bL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],LI=Pe("moon",bL);const wL=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],lT=Pe("paperclip",wL);const xL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],EL=Pe("pause",xL);const TL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jI=Pe("pen",TL);const SL=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],AL=Pe("play",SL);const IL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],RL=Pe("plus",IL);const CL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],UI=Pe("refresh-cw",CL);const NL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zI=Pe("save",NL);const kL=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],cT=Pe("scan-line",kL);const DL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],OL=Pe("search",DL);const ML=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vh=Pe("send",ML);const PL=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],N0=Pe("share-2",PL);const VL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LL=Pe("shield-check",VL);const jL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],UL=Pe("sparkles",jL);const zL=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zi=Pe("sprout",zL);const BL=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],uT=Pe("stethoscope",BL);const FL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],BI=Pe("sun",FL);const HL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Am=Pe("trash-2",HL);const qL=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],k0=Pe("triangle-alert",qL);const $L=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],GL=Pe("user-plus",$L);const KL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Im=Pe("user",KL);const YL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],QL=Pe("users",YL);const WL=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],XL=Pe("wand-sparkles",WL);const JL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Uo=Pe("x",JL);const ZL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ej=Pe("zap",ZL),FI=$.createContext(null),Ca=()=>$.useContext(FI),tj=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs(FI.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(pg,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(kI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(PI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(Uo,{className:"w-4 h-4"})})]},o.id))})]})};class HI extends UT.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(k0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(UI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(OI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function nj(){const{currentUser:r,logout:e}=si(),{t,i18n:n}=zn(),s=xr(),o=xs(),{addToast:c}=Ca(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(T=>T==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const T=async()=>{try{await wr(Mt(Ge,"users",r.uid),{lastSeen:ar()})}catch(O){console.error("Presence update failed",O)}};T();const k=setInterval(T,60*1e3);return()=>clearInterval(k)},[r]),$.useEffect(()=>{if(!r)return;const T=Lo(sr(Ge,"chats"),pc("participants","array-contains",r.uid)),k=tc(T,O=>{O.docChanges().forEach(L=>{if(L.type==="modified"){const B=L.doc.data(),F=B.updatedAt?.seconds*1e3;if(Date.now()-F>5e3)return;const q=B.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${L.doc.id}`)&&q){const z=B.participantData?.[q]||{name:"Someone"};g.play().catch(M=>console.log("Audio play failed",M)),c(`New message from ${z.name}: ${B.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>k()},[r,s.pathname,c,g]);const w=[{path:"/",icon:OI,label:t("app_name"),public:!0},{path:"/community",icon:QL,label:t("community"),public:!0},{path:"/analyses",icon:DI,label:t("analyses"),public:!1},{path:"/messages",icon:_h,label:t("messages"),public:!1},{path:"/profile",icon:Im,label:t("profile"),public:!1},{path:"/about",icon:PI,label:t("about"),public:!0}].filter(T=>T.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(T=>{const k=T.icon,O=s.pathname===T.path;return b.jsxs(Zr,{to:T.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${O?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(k,{className:"w-5 h-5"}),b.jsx("span",{children:T.label})]},T.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(BI,{className:"w-5 h-5"}):b.jsx(LI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(VI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(Zr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(oT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(HI,{children:b.jsx(ok,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(T=>{const k=T.icon,O=s.pathname===T.path;return b.jsxs(Zr,{to:T.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${O?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(k,{className:`w-6 h-6 ${O?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:T.label})]},T.path)}),!r&&b.jsxs(Zr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(oT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function rj(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=xs(),w=xr(),{t:T}=zn(),{currentUser:k}=si(),{addToast:O}=Ca();if(k?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const L=async()=>{y(!0);try{const F=await xx(_r,r,t);await XS(F.user),await _r.signOut(),O(T("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(F){console.error("Resend error:",F),F.code==="auth/too-many-requests"?O(T("too_many_requests")||"Too many attempts. Please wait.","error"):O(T("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},B=async F=>{F.preventDefault(),o(""),f(!1),u(!0);try{if(!(await xx(_r,r,t)).user.emailVerified){await _r.signOut(),f(!0);return}}catch(q){console.error(q);let Y=T("login_failed")||"Failed to login.";q.code==="auth/user-not-found"||q.code==="auth/wrong-password"||q.code==="auth/invalid-credential"?Y=T("invalid_credentials")||"Invalid email or password.":q.code==="auth/too-many-requests"?Y=T("too_many_requests")||"Too many attempts. Try again later.":q.code==="auth/user-disabled"?Y="Account disabled. Contact support.":q.code==="auth/network-request-failed"&&(Y="Network error. Check your connection."),o(Y)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:T("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:T("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(zi,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:T("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:T("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:L,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":T("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:B,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":T("login"),!c&&b.jsx(CI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(Zr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:T("register")})]})]})})})}function ij({user:r,onClose:e,onVerified:t}){const{t:n}=zn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(pL,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(UI,{className:"w-5 h-5 animate-spin"}):b.jsx(pg,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function sj(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),T=xs(),k=xr(),{t:O}=zn(),L=async F=>{F.preventDefault(),u(""),f(!0);try{const q=await aM(_r,r,t);await JS(q.user,{displayName:s}),await mg(Mt(Ge,"users",q.user.uid),{uid:q.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:ar(),lastSeen:ar(),bio:""}),await XS(q.user),w(q.user),y(!0),f(!1)}catch(q){u(q.message),console.error(q),f(!1)}},B=async()=>{_r.currentUser&&await _r.currentUser.reload(),y(!1),k.state?.returnUrl&&k.state?.pendingResult?T(k.state.returnUrl,{replace:!0,state:{restoredResult:k.state.pendingResult,restoredImages:k.state.pendingImages,restoredPlantType:k.state.pendingPlantType}}):T("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(ij,{user:v,onClose:()=>y(!1),onVerified:B}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:O("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:O("create_account_desc")||O("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:L,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:F=>o(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?O("creating_account")||"Creating Account...":O("register"),!d&&b.jsx(GL,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[O("already_have_account")||"Already have an account?"," "," ",b.jsx(Zr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:O("login")})]})]})]})})}var hT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(hT||(hT={}));var dT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(dT||(dT={}));var fT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(fT||(fT={}));const mT=["user","model","function","system"];var gT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gT||(gT={}));var pT;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(pT||(pT={}));var yT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(yT||(yT={}));var _T;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(_T||(_T={}));var eh;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(eh||(eh={}));var vT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(vT||(vT={}));var bT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(bT||(bT={}));var wT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(wT||(wT={}));class Ln extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Hl extends Ln{constructor(e,t){super(e),this.response=t}}class qI extends Ln{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class ba extends Ln{}class $I extends Ln{}const aj="https://generativelanguage.googleapis.com",oj="v1beta",lj="0.24.1",cj="genai-js";var zo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(zo||(zo={}));class uj{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||oj;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||aj}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function hj(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${cj}/${lj}`),e.join(" ")}async function dj(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",hj(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new ba(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new ba(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new ba(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function fj(r,e,t,n,s,o){const c=new uj(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},yj(o)),{method:"POST",headers:await dj(c),body:s})}}async function Fh(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await fj(r,e,t,n,s,o);return mj(u,d,c)}async function mj(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){gj(s,r)}return n.ok||await pj(n,r),n}function gj(r,e){let t=r;throw t.name==="AbortError"?(t=new $I(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof qI||r instanceof ba||(t=new Ln(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function pj(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new qI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function yj(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Y_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),qf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return _j(r)}else if(r.promptFeedback)throw new Hl(`Text not available. ${la(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),xT(r)[0]}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return xT(r)}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r}function _j(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function xT(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const vj=[eh.RECITATION,eh.SAFETY,eh.LANGUAGE];function qf(r){return!!r.finishReason&&vj.includes(r.finishReason)}function la(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];qf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function bh(r){return this instanceof bh?(this.v=r,this):new bh(r)}function bj(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(T,k){o.push([v,w,T,k])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(T){y(o[0][3],T)}}function d(v){v.value instanceof bh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const ET=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function wj(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=Tj(e),[n,s]=t.tee();return{stream:Ej(n),response:xj(s)}}async function xj(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return Y_(Sj(e));e.push(s)}}function Ej(r){return bj(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield bh(t.read());if(s)break;yield yield bh(Y_(n))}})}function Tj(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Ln("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(ET),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Ln(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(ET)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new $I("Request aborted when reading from the stream"):u=new Ln("Error reading from the stream"),u})}}})}function Sj(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function GI(r,e,t,n){const s=await Fh(e,zo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return wj(s)}async function KI(r,e,t,n){const o=await(await Fh(e,zo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:Y_(o)}}function YI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function wh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return Aj(e)}function Aj(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Ln("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Ln("No content is provided for sending chat message.");return n?e:t}function Ij(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new ba("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=wh(r);n.contents=[o]}return{generateContentRequest:n}}function TT(r){let e;return r.contents?e=r:e={contents:[wh(r)]},r.systemInstruction&&(e.systemInstruction=YI(r.systemInstruction)),e}function Rj(r){return typeof r=="string"||Array.isArray(r)?{content:wh(r)}:r}const ST=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Cj={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Nj(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Ln(`First content should be with role 'user', got ${n}`);if(!mT.includes(n))throw new Ln(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(mT)}`);if(!Array.isArray(s))throw new Ln("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Ln("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of ST)d in u&&(o[d]+=1);const c=Cj[n];for(const u of ST)if(!c.includes(u)&&o[u]>0)throw new Ln(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function AT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const IT="SILENT_ERROR";class kj{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(Nj(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=wh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>KI(this._apiKey,this.model,g,y)).then(w=>{var T;if(AT(w.response)){this._history.push(f);const k=Object.assign({parts:[],role:"model"},(T=w.response.candidates)===null||T===void 0?void 0:T[0].content);this._history.push(k)}else{const k=la(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=wh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=GI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(IT)}).then(w=>w.response).then(w=>{if(AT(w)){this._history.push(f);const T=Object.assign({},w.candidates[0].content);T.role||(T.role="model"),this._history.push(T)}else{const T=la(w);T&&console.warn(`sendMessageStream() was unsuccessful. ${T}. Inspect response object for details.`)}}).catch(w=>{w.message!==IT&&console.error(w)}),v}}async function Dj(r,e,t,n){return(await Fh(e,zo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function Oj(r,e,t,n){return(await Fh(e,zo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function Mj(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Fh(e,zo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class RT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=YI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=TT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return KI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=TT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return GI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new kj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=Ij(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return Dj(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=Rj(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Oj(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return Mj(this.apiKey,this.model,e,n)}}class Pj{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Ln("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new RT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new ba("Cached content must contain a `name` field.");if(!e.model)throw new ba("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new ba(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new RT(this.apiKey,o,n)}}async function QI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await Vj(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function Vj(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new Pj(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(L=>{if(!L)return;const B=L.includes(",")?L.split(",")[1]:L;v.push({inlineData:{data:B,mimeType:"image/jpeg"}})});const O=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(O)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const _c="analyses";async function WI(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Bh(sr(Ge,_c),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:ar(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function XI(r){try{const e=Lo(sr(Ge,_c),pc("userId","==",r)),n=(await yc(e)).docs.map(async o=>{const c=o.data();let u=[];try{u=(await yc(sr(Ge,_c,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(d){console.log("No updates found or error",d)}return{id:o.id,...c,updates:u}});return(await Promise.all(n)).sort((o,c)=>{const u=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function JI(r){try{const e=Lo(sr(Ge,"posts"),pc("relatedAnalysisId","==",r)),t=await yc(e);if(!t.empty){const n=t.docs.map(s=>xm(s.ref));await Promise.all(n)}return await xm(Mt(Ge,_c,r)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function ZI(r,e){try{const t=Mt(Ge,_c,r);await wr(t,{...e,updatedAt:ar()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function eR(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=Bh(sr(Ge,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:ar()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function tR(r,e,t,n="Gardener",s=null){try{const o=`${t} - ${e.result.disease_name}`;let c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return e.result.is_treatable===!1?e.result.preventive_measures&&e.result.preventive_measures.length>0&&(c+=`

 Koruyucu nlemler:
`+e.result.preventive_measures.map(u=>` ${u}`).join(`
`)):e.result.treatment_steps&&e.result.treatment_steps.length>0&&(c+=`

 Tedavi Admlar:
`+e.result.treatment_steps.map(u=>` ${u}`).join(`
`)),await Bh(sr(Ge,"posts"),{userId:e.userId,authorName:n,userAvatar:s,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:ar(),relatedAnalysisId:r}),await ZI(r,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function nR(r,e,t,n=null){try{return await Bh(sr(Ge,_c,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:ar()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function rR(r){try{const e=Mt(Ge,"posts",r),t=await jo(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=Mt(Ge,"analyses",n.relatedAnalysisId);await wr(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await xm(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function iR(r,e){try{const t=Mt(Ge,"posts",r),n=await jo(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await wr(t,{likes:EI(e)}):await wr(t,{likes:G_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function sR(r,e,t,n){try{const s=Mt(Ge,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await wr(s,{comments:G_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function aR(r,e){try{const t=Mt(Ge,"posts",r);return await wr(t,{...e,updatedAt:ar()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function Lj(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=Mt(Ge,"chats",o);return(await jo(c)).exists()?await wr(c,{[`participantData.${r}`]:n}):await mg(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:ar(),updatedAt:ar(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function oR(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const jj=Object.freeze(Object.defineProperty({__proto__:null,addComment:sR,addFeedbackUpdate:nR,analyzePlantProgress:oR,createPost:eR,deleteAnalysis:JI,deletePost:rR,getUserAnalyses:XI,saveAnalysis:WI,shareAnalysisToCommunity:tR,startChat:Lj,toggleLike:iR,updateAnalysisStatus:ZI,updatePost:aR},Symbol.toStringTag,{value:"Module"}));function Uj({result:r,onReset:e}){const{t}=zn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(k0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(Sm,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(zi,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(k0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(pg,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function zj({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=zn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,T=s.current;T.width=w.videoWidth,T.height=w.videoHeight,T.getContext("2d").drawImage(w,0,0,T.width,T.height);const O=T.toDataURL("image/jpeg",.9);t(O),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Uo,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(kI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function Bj(){const{t:r,i18n:e}=zn(),{currentUser:t}=si(),n=xs(),s=xr(),{addToast:o}=Ca(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,T]=$.useState(!1),[k,O]=$.useState(null),[L,B]=$.useState(!1),[F,q]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(O(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const Y=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},M=()=>{c.current&&(c.current.value="",c.current.click())},x=Z=>{Z&&I(Z),q(!1)},S=async Z=>{const H=Z.target.files?.[0];if(!H)return;const K=new FileReader;K.onloadend=()=>{const ne=K.result;I(ne)},K.readAsDataURL(H)},I=async Z=>{u==="capture_main"?(v(H=>({...H,main:Z})),await N(Z)):u==="capture_macro"&&(v(H=>({...H,macro:Z})),await N([y.main,Z]))},N=async(Z,H)=>{T(!0),d("analyzing"),B(!1);try{const K=await QI(Z,e.language,f);if(K.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(K.status==="error")throw new Error(K.error);O(K),d("result")}}catch(K){console.error(K);let ne=K.message||r("error_diagnosis_failed")||"Diagnosis failed.";ne.includes("NOT_PLANT")?ne=r("error_not_plant"):(ne.includes("503")||ne.includes("overloaded"))&&(ne=r("error_server_busy")),o(ne,"error"),d("capture_main")}finally{T(!1)}},V=async()=>{if(t&&!L)try{const Z=await WI(t.uid,f,y,k);B(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:Z}})},500)}catch(Z){console.error("Manual save failed:",Z),o((r("save_fail")||"Failed to save analysis:")+" "+Z.message,"error")}},C=()=>{n("/login",{state:{pendingResult:k,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),O(null),B(!1),d("input_type"),c.current&&(c.current.value="")},ee=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(UL,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(wo,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:ej,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:BV,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:LL,color:"from-green-400 to-emerald-500"}].map((Z,H)=>{const K=Z.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${Z.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(K,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:Z.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:Z.desc})]},H)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(Sm,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(cT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:Z=>{Z.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(zi,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(zi,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:Z=>g(Z.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:Y,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(CI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),D=Z=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:Z?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>q(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(wo,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:M,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(MI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),J=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(xo,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:V,disabled:L,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${L?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:L?b.jsxs(b.Fragment,{children:[b.jsx(pg,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(zI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:k?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(Uj,{result:k,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(cT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:C,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:S,className:"hidden"}),b.jsx(zj,{isOpen:F,onClose:()=>q(!1),onCapture:x}),u==="landing"?ee():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&D(!1),u==="capture_macro"&&D(!0),u==="analyzing"&&J(),u==="result"&&W()]})]})}const Tf=43200,CT=1440,NT=Symbol.for("constructDateFrom");function Q_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&NT in r?r[NT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Aa(r,e){return Q_(r,r)}let Fj={};function Hj(){return Fj}function kT(r){const e=Aa(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function W_(r,...e){const t=Q_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function $f(r,e){const t=+Aa(r)-+Aa(e);return t<0?-1:t>0?1:t}function qj(r){return Q_(r,Date.now())}function $j(r,e,t){const[n,s]=W_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function Gj(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function Kj(r,e){return+Aa(r)-+Aa(e)}function Yj(r,e){const t=Aa(r);return t.setHours(23,59,59,999),t}function Qj(r,e){const t=Aa(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Wj(r,e){const t=Aa(r);return+Yj(t)==+Qj(t)}function Xj(r,e,t){const[n,s,o]=W_(t?.in,r,r,e),c=$f(s,o),u=Math.abs($j(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=$f(s,o)===-c;Wj(n)&&u===1&&$f(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function Jj(r,e,t){const n=Kj(r,e)/1e3;return Gj(t?.roundingMethod)(n)}const Zj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eU=(r,e,t)=>{let n;const s=Zj[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function nc(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const tU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iU={date:nc({formats:tU,defaultWidth:"full"}),time:nc({formats:nU,defaultWidth:"full"}),dateTime:nc({formats:rU,defaultWidth:"full"})},sU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aU=(r,e,t,n)=>sU[r];function Ai(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const oU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},mU={ordinalNumber:fU,era:Ai({values:oU,defaultWidth:"wide"}),quarter:Ai({values:lU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ai({values:cU,defaultWidth:"wide"}),day:Ai({values:uU,defaultWidth:"wide"}),dayPeriod:Ai({values:hU,defaultWidth:"wide",formattingValues:dU,defaultFormattingWidth:"wide"})};function Ii(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?pU(u,y=>y.test(c)):gU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function gU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function pU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function lR(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const yU=/^(\d+)(th|st|nd|rd)?/i,_U=/\d+/i,vU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bU={any:[/^b/i,/^(a|c)/i]},wU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xU={any:[/1/i,/2/i,/3/i,/4/i]},EU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},CU={ordinalNumber:lR({matchPattern:yU,parsePattern:_U,valueCallback:r=>parseInt(r,10)}),era:Ii({matchPatterns:vU,defaultMatchWidth:"wide",parsePatterns:bU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:wU,defaultMatchWidth:"wide",parsePatterns:xU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:EU,defaultMatchWidth:"wide",parsePatterns:TU,defaultParseWidth:"any"}),day:Ii({matchPatterns:SU,defaultMatchWidth:"wide",parsePatterns:AU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:IU,defaultMatchWidth:"any",parsePatterns:RU,defaultParseWidth:"any"})},X_={code:"en-US",formatDistance:eU,formatLong:iU,formatRelative:aU,localize:mU,match:CU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NU(r,e,t){const n=Hj(),s=t?.locale??n.locale??X_,o=2520,c=$f(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=W_(t?.in,...c>0?[e,r]:[r,e]),g=Jj(f,d),y=(kT(f)-kT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<CT){const T=Math.round(v/60);return s.formatDistance("aboutXHours",T,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<Tf){const T=Math.round(v/CT);return s.formatDistance("xDays",T,u)}else if(v<Tf*2)return w=Math.round(v/Tf),s.formatDistance("aboutXMonths",w,u)}if(w=Xj(f,d),w<12){const T=Math.round(v/Tf);return s.formatDistance("xMonths",T,u)}else{const T=w%12,k=Math.trunc(w/12);return T<3?s.formatDistance("aboutXYears",k,u):T<9?s.formatDistance("overXYears",k,u):s.formatDistance("almostXYears",k+1,u)}}function cR(r,e){return NU(r,qj(r),e)}const kU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},DU=(r,e,t)=>{let n;const s=kU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},OU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},MU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},PU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VU={date:nc({formats:OU,defaultWidth:"full"}),time:nc({formats:MU,defaultWidth:"full"}),dateTime:nc({formats:PU,defaultWidth:"full"})},LU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},jU=(r,e,t,n)=>LU[r],UU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},zU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},BU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},FU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},HU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},qU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},$U=(r,e)=>Number(r)+".",GU={ordinalNumber:$U,era:Ai({values:UU,defaultWidth:"wide"}),quarter:Ai({values:zU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ai({values:BU,defaultWidth:"wide"}),day:Ai({values:FU,defaultWidth:"wide"}),dayPeriod:Ai({values:HU,defaultWidth:"wide",formattingValues:qU,defaultFormattingWidth:"wide"})},KU=/^(\d+)(\.)?/i,YU=/\d+/i,QU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},WU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},XU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},JU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},ZU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},e9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},t9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},n9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},r9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},i9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},s9={ordinalNumber:lR({matchPattern:KU,parsePattern:YU,valueCallback:function(r){return parseInt(r,10)}}),era:Ii({matchPatterns:QU,defaultMatchWidth:"wide",parsePatterns:WU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:XU,defaultMatchWidth:"wide",parsePatterns:JU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:ZU,defaultMatchWidth:"wide",parsePatterns:e9,defaultParseWidth:"any"}),day:Ii({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:n9,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:r9,defaultMatchWidth:"any",parsePatterns:i9,defaultParseWidth:"any"})},uR={code:"tr",formatDistance:DU,formatLong:VU,formatRelative:jU,localize:GU,match:s9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function hR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=zn(),{currentUser:o}=si(),c=s.language==="tr"?uR:X_,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,T]=$.useState(!1),[k,O]=$.useState(r?.content||""),L=async()=>{try{await aR(r.id,{content:k}),T(!1)}catch{alert("Failed to update post")}};if(!r)return null;const B=o?.uid===r.userId,F=r.likes&&o&&r.likes.includes(o.uid),q=r.likes?r.likes.length:0,Y=r.comments?r.comments.length:0,[z,M]=$.useState("");$.useEffect(()=>{const C=()=>{if(!r.createdAt?.seconds){M(n("just_now")||"Just now");return}const ee=new Date(r.createdAt.seconds*1e3);(new Date-ee)/(1e3*60*60)>24?M(ee.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):M(cR(ee,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const G=setInterval(C,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const x=async()=>{if(!(!o||y)){v(!0);try{await iR(r.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},S=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await rR(r.id)}catch{alert("Failed to delete post")}},I=async C=>{if(C.preventDefault(),!(!u.trim()||!o))try{await sR(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},N=async()=>{const C={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(C)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},V=C=>!C||C==="Unknown"?null:C.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${C.toLowerCase()}`)||n(C)||C;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[B&&b.jsx("button",{onClick:S,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(Am,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:B&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:z})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:V(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(_h,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:x,className:`flex items-center gap-1.5 transition-colors ${F?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(aL,{className:`w-5 h-5 ${F?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:q||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(_h,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:Y||n("comment")})]}),B&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>T(!0),children:[b.jsx(jI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:N,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(N0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:k,onChange:C=>O(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((C,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(vh,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const zy=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function a9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function dR(r,e){return new Promise((function(t,n){let s;return o9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const o9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Rm={},l9={get exports(){return Rm},set exports(r){Rm=r}};(function(r){var e,t,n={};l9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),T=u(g,d+=4);d+=4,d=T;for(var k=0;k<v;k++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var O=u(g,d+=4),L=c(g,d+=4),B=c(g,d+2),F=c(g,d+4);d+=6;var q=u(g,d+=8);d+=4,d+=L+B+F,n._readLocal(g,q,f,w,O,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),T=g(s,o+=2);o+=2;var k=n.bin.readUTF8(s,o,w);if(o+=w,o+=T,f)c[k]={size:d,csize:u};else{var O=new Uint8Array(s.buffer,o);if(v==0)c[k]=new Uint8Array(O.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var L=new Uint8Array(d);n.inflateRaw(O,L),c[k]=L}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var T=new Uint8Array(c),k=0,O=[];for(var g in f){var L=f[g];O.push(k),k=n._writeHeader(T,k,g,L,0)}var B=0,F=k;for(var g in f)L=f[g],O.push(k),k=n._writeHeader(T,k,g,L,1,O[B++]);var q=k-F;return u(T,k,101010256),k+=4,d(T,k+=4,B),d(T,k+=2,B),u(T,k+=2,q),u(T,k+=4,F),k+=4,k+=2,T.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,T=0,k=s.length;if(u==0){for(;v<k;)y(o,w,v+(N=Math.min(65535,k-v))==k?1:0),w=n.F._copyExact(s,v,N,o,w+8),v+=N;return w>>>3}var O=f.lits,L=f.strt,B=f.prev,F=0,q=0,Y=0,z=0,M=0,x=0;for(k>2&&(L[x=n.F._hash(s,0)]=0),v=0;v<k;v++){if(M=x,v+1<k-2){x=n.F._hash(s,v+1);var S=v+1&32767;B[S]=L[x],L[x]=S}if(T<=v){(F>14e3||q>26697)&&k-v>100&&(T<v&&(O[F]=v-T,F+=2,T=v),w=n.F._writeBlock(v==k-1||T==k?1:0,O,F,z,s,Y,v-Y,o,w),F=q=z=0,Y=v);var I=0;v<k-2&&(I=n.F._bestMatch(s,v,B,M,Math.min(d[2],k-v),d[3]));var N=I>>>16,V=65535&I;if(I!=0){V=65535&I;var C=g(N=I>>>16,f.of0);f.lhst[257+C]++;var G=g(V,f.df0);f.dhst[G]++,z+=f.exb[C]+f.dxb[G],O[F]=N<<23|v-T,O[F+1]=V<<16|C<<8|G,F+=2,T=v+N}else f.lhst[s[v]]++;q++}}for(Y==v&&s.length!=0||(T<v&&(O[F]=v-T,F+=2,T=v),w=n.F._writeBlock(1,O,F,z,s,Y,v-Y,o,w),F=0,q=0,F=q=z=0,Y=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,T=0,k=Math.min(32767,o);v<=k&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var O=n.F._howLong(s,o,v);if(O>w){if(T=v,(w=O)>=d)break;v+2<O&&(O=v+2);for(var L=0,B=0;B<O-2;B++){var F=o-v+B+32768&32767,q=F-c[F]+32768&32767;q>L&&(L=q,y=F)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|T},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,T,k,O,L,B,F,q,Y,z=n.F.U,M=n.F._putsF,x=n.F._putsE;z.lhst[256]++,T=(w=n.F.getTrees())[0],k=w[1],O=w[2],L=w[3],B=w[4],F=w[5],q=w[6],Y=w[7];var S=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),I=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),N=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);N+=14+3*F+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var V=0;V<286;V++)z.lhst[V]=0;for(V=0;V<30;V++)z.dhst[V]=0;for(V=0;V<19;V++)z.ihst[V]=0;var C=S<I&&S<N?0:I<N?1:2;if(M(y,v,s),M(y,v+1,C),v+=3,C==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,ee;if(C==1&&(G=z.fltree,ee=z.fdtree),C==2){n.F.makeCodes(z.ltree,T),n.F.revCodes(z.ltree,T),n.F.makeCodes(z.dtree,k),n.F.revCodes(z.dtree,k),n.F.makeCodes(z.itree,O),n.F.revCodes(z.itree,O),G=z.ltree,ee=z.dtree,x(y,v,L-257),x(y,v+=5,B-1),x(y,v+=5,F-4),v+=4;for(var P=0;P<F;P++)x(y,v+3*P,z.itree[1+(z.ordr[P]<<1)]);v+=3*F,v=n.F._codeTiny(q,z.itree,y,v),v=n.F._codeTiny(Y,z.itree,y,v)}for(var D=f,J=0;J<c;J+=2){for(var W=o[J],Z=W>>>23,H=D+(8388607&W);D<H;)v=n.F._writeLit(d[D++],G,y,v);if(Z!=0){var K=o[J+1],ne=K>>16,re=K>>8&255,ie=255&K;x(y,v=n.F._writeLit(257+re,G,y,v),Z-z.of0[re]),v+=z.exb[re],M(y,v=n.F._writeLit(ie,ee,y,v),ne-z.df0[ie]),v+=z.dxb[ie],D+=Z}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(q,Y){return q.f-Y.f}));var T=u[0],k=u[1],O=0,L=1,B=2;for(u[0]={lit:-1,f:T.f+k.f,l:T,r:k,d:0};L!=y-1;)T=O!=L&&(B==y||u[O].f<u[B].f)?u[O++]:u[B++],k=O!=L&&(B==y||u[O].f<u[B].f)?u[O++]:u[B++],u[L++]={lit:-1,f:T.f+k.f,l:T,r:k};var F=n.F.setDepth(u[L-1],0);for(F>c&&(n.F.restrictDepth(v,c,F),F=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return F},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,T=u.U,k=o==null;k&&(o=new c(s.length>>>2<<3));for(var O,L,B=0,F=0,q=0,Y=0,z=0,M=0,x=0,S=0,I=0;B==0;)if(B=d(s,I,1),F=d(s,I+1,2),I+=3,F!=0){if(k&&(o=n.F._check(o,S+(1<<17))),F==1&&(O=T.flmap,L=T.fdmap,M=511,x=31),F==2){q=f(s,I,5)+257,Y=f(s,I+5,5)+1,z=f(s,I+10,4)+4,I+=14;for(var N=0;N<38;N+=2)T.itree[N]=0,T.itree[N+1]=0;var V=1;for(N=0;N<z;N++){var C=f(s,I+3*N,3);T.itree[1+(T.ordr[N]<<1)]=C,C>V&&(V=C)}I+=3*z,y(T.itree,V),v(T.itree,V,T.imap),O=T.lmap,L=T.dmap,I=g(T.imap,(1<<V)-1,q+Y,s,I,T.ttree);var G=u._copyOut(T.ttree,0,q,T.ltree);M=(1<<G)-1;var ee=u._copyOut(T.ttree,q,Y,T.dtree);x=(1<<ee)-1,y(T.ltree,G),v(T.ltree,G,O),y(T.dtree,ee),v(T.dtree,ee,L)}for(;;){var P=O[w(s,I)&M];I+=15&P;var D=P>>>4;if(!(D>>>8))o[S++]=D;else{if(D==256)break;var J=S+D-254;if(D>264){var W=T.ldef[D-257];J=S+(W>>>3)+f(s,I,7&W),I+=7&W}var Z=L[w(s,I)&x];I+=15&Z;var H=Z>>>4,K=T.ddef[H],ne=(K>>>4)+d(s,I,15&K);for(I+=15&K,k&&(o=n.F._check(o,S+(1<<17)));S<J;)o[S]=o[S++-ne],o[S]=o[S++-ne],o[S]=o[S++-ne],o[S]=o[S++-ne];S=J}}}else{(7&I)!=0&&(I+=8-(7&I));var re=4+(I>>>3),ie=s[re-4]|s[re-3]<<8;k&&(o=n.F._check(o,S+ie)),o.set(new c(s.buffer,s.byteOffset+re,ie),S),I=re+ie<<3,S+=ie}return o.length==S?o:o.slice(0,S)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var T=w>>>4;if(T<=15)f[v]=T,v++;else{var k=0,O=0;T==16?(O=3+g(u,d,2),d+=2,k=f[v-1]):T==17?(O=3+g(u,d,3),d+=3):T==18&&(O=11+g(u,d,7),d+=7);for(var L=v+O;v<L;)f[v]=k,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var T=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,T[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=T[f],T[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,T=s[f]<<w,k=T+(1<<w);T!=k;)c[d[T]>>>15-o]=v,T++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var c9=a9({__proto__:null,default:Rm},[Rm]);const Xr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let T=0;T<v;T++)w+=String.fromCharCode(g[y+T]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let T=0;T<v;T++)w.push(g[y+T]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,T="";for(let k=0;k<v;k++)T+=`%${r.pad(g[y+k].toString(16))}`;try{w=decodeURIComponent(T)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const T=y*v,k=o(w),O=Math.ceil(y*k/8),L=new Uint8Array(4*T),B=new Uint32Array(L.buffer),{ctype:F}=w,{depth:q}=w,Y=r.readUshort;if(F==6){const W=T<<2;if(q==8)for(var z=0;z<W;z+=4)L[z]=g[z],L[z+1]=g[z+1],L[z+2]=g[z+2],L[z+3]=g[z+3];if(q==16)for(z=0;z<W;z++)L[z]=g[z<<1]}else if(F==2){const W=w.tabs.tRNS;if(W==null){if(q==8)for(z=0;z<T;z++){var M=3*z;B[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M]}if(q==16)for(z=0;z<T;z++)M=6*z,B[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M]}else{var x=W[0];const Z=W[1],H=W[2];if(q==8)for(z=0;z<T;z++){var S=z<<2;M=3*z,B[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M],g[M]==x&&g[M+1]==Z&&g[M+2]==H&&(L[S+3]=0)}if(q==16)for(z=0;z<T;z++)S=z<<2,M=6*z,B[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M],Y(g,M)==x&&Y(g,M+2)==Z&&Y(g,M+4)==H&&(L[S+3]=0)}}else if(F==3){const W=w.tabs.PLTE,Z=w.tabs.tRNS,H=Z?Z.length:0;if(q==1)for(var I=0;I<v;I++){var N=I*O,V=I*y;for(z=0;z<y;z++){S=V+z<<2;var C=3*(G=g[N+(z>>3)]>>7-((7&z)<<0)&1);L[S]=W[C],L[S+1]=W[C+1],L[S+2]=W[C+2],L[S+3]=G<H?Z[G]:255}}if(q==2)for(I=0;I<v;I++)for(N=I*O,V=I*y,z=0;z<y;z++)S=V+z<<2,C=3*(G=g[N+(z>>2)]>>6-((3&z)<<1)&3),L[S]=W[C],L[S+1]=W[C+1],L[S+2]=W[C+2],L[S+3]=G<H?Z[G]:255;if(q==4)for(I=0;I<v;I++)for(N=I*O,V=I*y,z=0;z<y;z++)S=V+z<<2,C=3*(G=g[N+(z>>1)]>>4-((1&z)<<2)&15),L[S]=W[C],L[S+1]=W[C+1],L[S+2]=W[C+2],L[S+3]=G<H?Z[G]:255;if(q==8)for(z=0;z<T;z++){var G;S=z<<2,C=3*(G=g[z]),L[S]=W[C],L[S+1]=W[C+1],L[S+2]=W[C+2],L[S+3]=G<H?Z[G]:255}}else if(F==4){if(q==8)for(z=0;z<T;z++){S=z<<2;var ee=g[P=z<<1];L[S]=ee,L[S+1]=ee,L[S+2]=ee,L[S+3]=g[P+1]}if(q==16)for(z=0;z<T;z++){var P;S=z<<2,ee=g[P=z<<2],L[S]=ee,L[S+1]=ee,L[S+2]=ee,L[S+3]=g[P+2]}}else if(F==0)for(x=w.tabs.tRNS?w.tabs.tRNS:-1,I=0;I<v;I++){const W=I*O,Z=I*y;if(q==1)for(var D=0;D<y;D++){var J=(ee=255*(g[W+(D>>>3)]>>>7-(7&D)&1))==255*x?0:255;B[Z+D]=J<<24|ee<<16|ee<<8|ee}else if(q==2)for(D=0;D<y;D++)J=(ee=85*(g[W+(D>>>2)]>>>6-((3&D)<<1)&3))==85*x?0:255,B[Z+D]=J<<24|ee<<16|ee<<8|ee;else if(q==4)for(D=0;D<y;D++)J=(ee=17*(g[W+(D>>>1)]>>>4-((1&D)<<2)&15))==17*x?0:255,B[Z+D]=J<<24|ee<<16|ee<<8|ee;else if(q==8)for(D=0;D<y;D++)J=(ee=g[W+D])==x?0:255,B[Z+D]=J<<24|ee<<16|ee<<8|ee;else if(q==16)for(D=0;D<y;D++)ee=g[W+(D<<1)],J=Y(g,W+(D<<1))==x?0:255,B[Z+D]=J<<24|ee<<16|ee<<8|ee}return L}function t(g,y,v,w){const T=o(g),k=Math.ceil(v*T/8),O=new Uint8Array((k+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,O):n(y,O),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(B,F){const q=F.width,Y=F.height,z=o(F),M=z>>3,x=Math.ceil(q*z/8),S=new Uint8Array(Y*x);let I=0;const N=[0,0,4,0,2,0,1],V=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let ee=0;for(;ee<7;){const D=C[ee],J=G[ee];let W=0,Z=0,H=N[ee];for(;H<Y;)H+=D,Z++;let K=V[ee];for(;K<q;)K+=J,W++;const ne=Math.ceil(W*z/8);c(B,F,I,W,Z);let re=0,ie=N[ee];for(;ie<Y;){let ye=V[ee],Te=I+re*ne<<3;for(;ye<q;){var P;if(z==1&&(P=(P=B[Te>>3])>>7-(7&Te)&1,S[ie*x+(ye>>3)]|=P<<7-((7&ye)<<0)),z==2&&(P=(P=B[Te>>3])>>6-(7&Te)&3,S[ie*x+(ye>>2)]|=P<<6-((3&ye)<<1)),z==4&&(P=(P=B[Te>>3])>>4-(7&Te)&15,S[ie*x+(ye>>1)]|=P<<4-((1&ye)<<2)),z>=8){const Ne=ie*x+ye*M;for(let Ie=0;Ie<M;Ie++)S[Ne+Ie]=B[(Te>>3)+Ie]}Te+=z,ye+=J}re++,ie+=D}W*Z!=0&&(I+=Z*(1+ne)),ee+=1}return S})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let T,k,O=0,L=0,B=0,F=0,q=0,Y=0,z=0,M=0,x=0;if(y[0]==3&&y[1]==0)return v||new w(0);const S=g.H,I=S.b,N=S.e,V=S.R,C=S.n,G=S.A,ee=S.Z,P=S.m,D=v==null;for(D&&(v=new w(y.length>>>2<<5));O==0;)if(O=I(y,x,1),L=I(y,x+1,2),x+=3,L!=0){if(D&&(v=g.H.W(v,M+(1<<17))),L==1&&(T=P.J,k=P.h,Y=511,z=31),L==2){B=N(y,x,5)+257,F=N(y,x+5,5)+1,q=N(y,x+10,4)+4,x+=14;let W=1;for(var J=0;J<38;J+=2)P.Q[J]=0,P.Q[J+1]=0;for(J=0;J<q;J++){const K=N(y,x+3*J,3);P.Q[1+(P.X[J]<<1)]=K,K>W&&(W=K)}x+=3*q,C(P.Q,W),G(P.Q,W,P.u),T=P.w,k=P.d,x=V(P.u,(1<<W)-1,B+F,y,x,P.v);const Z=S.V(P.v,0,B,P.C);Y=(1<<Z)-1;const H=S.V(P.v,B,F,P.D);z=(1<<H)-1,C(P.C,Z),G(P.C,Z,T),C(P.D,H),G(P.D,H,k)}for(;;){const W=T[ee(y,x)&Y];x+=15&W;const Z=W>>>4;if(!(Z>>>8))v[M++]=Z;else{if(Z==256)break;{let H=M+Z-254;if(Z>264){const ye=P.q[Z-257];H=M+(ye>>>3)+N(y,x,7&ye),x+=7&ye}const K=k[ee(y,x)&z];x+=15&K;const ne=K>>>4,re=P.c[ne],ie=(re>>>4)+I(y,x,15&re);for(x+=15&re;M<H;)v[M]=v[M++-ie],v[M]=v[M++-ie],v[M]=v[M++-ie],v[M]=v[M++-ie];M=H}}}}else{(7&x)!=0&&(x+=8-(7&x));const W=4+(x>>>3),Z=y[W-4]|y[W-3]<<8;D&&(v=g.H.W(v,M+Z)),v.set(new w(y.buffer,y.byteOffset+W,Z),M),x=W+Z<<3,M+=Z}return v.length==M?v:v.slice(0,M)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const T=new Uint8Array(w<<1);return T.set(y,0),T},g.H.R=function(y,v,w,T,k,O){const L=g.H.e,B=g.H.Z;let F=0;for(;F<w;){const q=y[B(T,k)&v];k+=15&q;const Y=q>>>4;if(Y<=15)O[F]=Y,F++;else{let z=0,M=0;Y==16?(M=3+L(T,k,2),k+=2,z=O[F-1]):Y==17?(M=3+L(T,k,3),k+=3):Y==18&&(M=11+L(T,k,7),k+=7);const x=F+M;for(;F<x;)O[F]=z,F++}}return k},g.H.V=function(y,v,w,T){let k=0,O=0;const L=T.length>>>1;for(;O<w;){const B=y[O+v];T[O<<1]=0,T[1+(O<<1)]=B,B>k&&(k=B),O++}for(;O<L;)T[O<<1]=0,T[1+(O<<1)]=0,O++;return k},g.H.n=function(y,v){const w=g.H.m,T=y.length;let k,O,L,B;const F=w.j;for(var q=0;q<=v;q++)F[q]=0;for(q=1;q<T;q+=2)F[y[q]]++;const Y=w.K;for(k=0,F[0]=0,O=1;O<=v;O++)k=k+F[O-1]<<1,Y[O]=k;for(L=0;L<T;L+=2)B=y[L+1],B!=0&&(y[L]=Y[B],Y[B]++)},g.H.A=function(y,v,w){const T=y.length,k=g.H.m.r;for(let O=0;O<T;O+=2)if(y[O+1]!=0){const L=O>>1,B=y[O+1],F=L<<4|B,q=v-B;let Y=y[O]<<q;const z=Y+(1<<q);for(;Y!=z;)w[k[Y]>>>15-v]=F,Y++}},g.H.l=function(y,v){const w=g.H.m.r,T=15-v;for(let k=0;k<y.length;k+=2){const O=y[k]<<v-y[k+1];y[k]=w[O]>>>T}},g.H.M=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8,y[T+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let T=v;T=(2863311530&T)>>>1|(1431655765&T)<<1,T=(3435973836&T)>>>2|(858993459&T)<<2,T=(4042322160&T)>>>4|(252645135&T)<<4,T=(4278255360&T)>>>8|(16711935&T)<<8,y.r[v]=(T>>>16|T<<16)>>>17}function w(T,k,O){for(;k--!=0;)T.push(0,O)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,T){let k=o(y);const O=Math.ceil(w*k/8);let L,B;k=Math.ceil(k/8);let F=g[v],q=0;if(F>1&&(g[v]=[0,0,1][F-2]),F==3)for(q=k;q<O;q++)g[q+1]=g[q+1]+(g[q+1-k]>>>1)&255;for(let Y=0;Y<T;Y++)if(L=v+Y*O,B=L+Y+1,F=g[B-1],q=0,F==0)for(;q<O;q++)g[L+q]=g[B+q];else if(F==1){for(;q<k;q++)g[L+q]=g[B+q];for(;q<O;q++)g[L+q]=g[B+q]+g[L+q-k]}else if(F==2)for(;q<O;q++)g[L+q]=g[B+q]+g[L+q-O];else if(F==3){for(;q<k;q++)g[L+q]=g[B+q]+(g[L+q-O]>>>1);for(;q<O;q++)g[L+q]=g[B+q]+(g[L+q-O]+g[L+q-k]>>>1)}else{for(;q<k;q++)g[L+q]=g[B+q]+u(0,g[L+q-O],0);for(;q<O;q++)g[L+q]=g[B+q]+u(g[L+q-k],g[L+q-O],g[L+q-k-O])}return g}function u(g,y,v){const w=g+y-v,T=w-g,k=w-y,O=w-v;return T*T<=k*k&&T*T<=O*O?g:k*k<=O*O?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,T,k,O,L,B){const F=Math.min(y,T),q=Math.min(v,k);let Y=0,z=0;for(let ee=0;ee<q;ee++)for(let P=0;P<F;P++)if(O>=0&&L>=0?(Y=ee*y+P<<2,z=(L+ee)*T+O+P<<2):(Y=(-L+ee)*y-O+P<<2,z=ee*T+P<<2),B==0)w[z]=g[Y],w[z+1]=g[Y+1],w[z+2]=g[Y+2],w[z+3]=g[Y+3];else if(B==1){var M=g[Y+3]*.00392156862745098,x=g[Y]*M,S=g[Y+1]*M,I=g[Y+2]*M,N=w[z+3]*(1/255),V=w[z]*N,C=w[z+1]*N,G=w[z+2]*N;const D=1-M,J=M+N*D,W=J==0?0:1/J;w[z+3]=255*J,w[z+0]=(x+V*D)*W,w[z+1]=(S+C*D)*W,w[z+2]=(I+G*D)*W}else if(B==2)M=g[Y+3],x=g[Y],S=g[Y+1],I=g[Y+2],N=w[z+3],V=w[z],C=w[z+1],G=w[z+2],M==N&&x==V&&S==C&&I==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=x,w[z+1]=S,w[z+2]=I,w[z+3]=M);else if(B==3){if(M=g[Y+3],x=g[Y],S=g[Y+1],I=g[Y+2],N=w[z+3],V=w[z],C=w[z+1],G=w[z+2],M==N&&x==V&&S==C&&I==G)continue;if(M<220&&N>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const T=r,k=T.readUshort,O=T.readUint,L={tabs:{},frames:[]},B=new Uint8Array(v.length);let F,q=0,Y=0;const z=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(v[M]!=z[M])throw"The input is not a PNG file!";for(;w<v.length;){const ee=T.readUint(v,w);w+=4;const P=T.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,L);else if(P=="iCCP"){for(var x=w;v[x]!=0;)x++;T.readASCII(v,w,x-w),v[x+1];const D=v.slice(x+2,w+ee);let J=null;try{J=n(D)}catch{J=s(D)}L.tabs[P]=J}else if(P=="CgBI")L.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(M=0;M<ee;M++)B[q+M]=v[w+M];q+=ee}else if(P=="acTL")L.tabs[P]={num_frames:O(v,w),num_plays:O(v,w+4)},F=new Uint8Array(v.length);else if(P=="fcTL"){Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,F.slice(0,Y),G.rect.width,G.rect.height),Y=0);const D={x:O(v,w+12),y:O(v,w+16),width:O(v,w+4),height:O(v,w+8)};let J=k(v,w+22);J=k(v,w+20)/(J==0?100:J);const W={rect:D,delay:Math.round(1e3*J),dispose:v[w+24],blend:v[w+25]};L.frames.push(W)}else if(P=="fdAT"){for(M=0;M<ee-4;M++)F[Y+M]=v[w+M+4];Y+=ee-4}else if(P=="pHYs")L.tabs[P]=[T.readUint(v,w),T.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(L.tabs[P]=[],M=0;M<8;M++)L.tabs[P].push(T.readUint(v,w+4*M));else if(P=="tEXt"||P=="zTXt"){L.tabs[P]==null&&(L.tabs[P]={});var S=T.nextZero(v,w),I=T.readASCII(v,w,S-w),N=w+ee-S-1;if(P=="tEXt")C=T.readASCII(v,S+1,N);else{var V=n(v.slice(S+2,S+2+N));C=T.readUTF8(V,0,V.length)}L.tabs[P][I]=C}else if(P=="iTXt"){L.tabs[P]==null&&(L.tabs[P]={}),S=0,x=w,S=T.nextZero(v,x),I=T.readASCII(v,x,S-x);const D=v[x=S+1];var C;v[x+1],x+=2,S=T.nextZero(v,x),T.readASCII(v,x,S-x),x=S+1,S=T.nextZero(v,x),T.readUTF8(v,x,S-x),N=ee-((x=S+1)-w),D==0?C=T.readUTF8(v,x,N):(V=n(v.slice(x,x+N)),C=T.readUTF8(V,0,V.length)),L.tabs[P][I]=C}else if(P=="PLTE")L.tabs[P]=T.readBytes(v,w,ee);else if(P=="hIST"){const D=L.tabs.PLTE.length/3;for(L.tabs[P]=[],M=0;M<D;M++)L.tabs[P].push(k(v,w+2*M))}else if(P=="tRNS")L.ctype==3?L.tabs[P]=T.readBytes(v,w,ee):L.ctype==0?L.tabs[P]=k(v,w):L.ctype==2&&(L.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]);else if(P=="gAMA")L.tabs[P]=T.readUint(v,w)/1e5;else if(P=="sRGB")L.tabs[P]=v[w];else if(P=="bKGD")L.ctype==0||L.ctype==4?L.tabs[P]=[k(v,w)]:L.ctype==2||L.ctype==6?L.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]:L.ctype==3&&(L.tabs[P]=v[w]);else if(P=="IEND")break;w+=ee,T.readUint(v,w),w+=4}var G;return Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,F.slice(0,Y),G.rect.width,G.rect.height)),L.data=t(L,B,L.width,L.height),delete L.compress,delete L.interlace,delete L.filter,L},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const T=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const k=v*w*4,O=new Uint8Array(k),L=new Uint8Array(k),B=new Uint8Array(k);for(let q=0;q<y.frames.length;q++){const Y=y.frames[q],z=Y.rect.x,M=Y.rect.y,x=Y.rect.width,S=Y.rect.height,I=e(Y.data,x,S,y);if(q!=0)for(var F=0;F<k;F++)B[F]=O[F];if(Y.blend==0?f(I,x,S,O,v,w,z,M,0):Y.blend==1&&f(I,x,S,O,v,w,z,M,1),T.push(O.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(L,x,S,O,v,w,z,M,0);else if(Y.dispose==2)for(F=0;F<k;F++)O[F]=B[F]}}return T},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Xr,{_bin:e}=Xr,t=Xr._paeth;var n={table:(function(){const x=new Uint32Array(256);for(let S=0;S<256;S++){let I=S;for(let N=0;N<8;N++)1&I?I=3988292384^I>>>1:I>>>=1;x[S]=I}return x})(),update(x,S,I,N){for(let V=0;V<N;V++)x=n.table[255&(x^S[I+V])]^x>>>8;return x},crc:(x,S,I)=>4294967295^n.update(4294967295,x,S,I)};function s(x,S,I,N){S[I]+=x[0]*N>>4,S[I+1]+=x[1]*N>>4,S[I+2]+=x[2]*N>>4,S[I+3]+=x[3]*N>>4}function o(x){return Math.max(0,Math.min(255,x))}function c(x,S){const I=x[0]-S[0],N=x[1]-S[1],V=x[2]-S[2],C=x[3]-S[3];return I*I+N*N+V*V+C*C}function u(x,S,I,N,V,C,G){G==null&&(G=1);const ee=N.length,P=[];for(var D=0;D<ee;D++){const ie=N[D];P.push([ie>>>0&255,ie>>>8&255,ie>>>16&255,ie>>>24&255])}for(D=0;D<ee;D++){let ie=4294967295;for(var J=0,W=0;W<ee;W++){var Z=c(P[D],P[W]);W!=D&&Z<ie&&(ie=Z,J=W)}}const H=new Uint32Array(V.buffer),K=new Int16Array(S*I*4),ne=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(D=0;D<ne.length;D++)ne[D]=255*((ne[D]+.5)/16-.5);for(let ie=0;ie<I;ie++)for(let ye=0;ye<S;ye++){var re;D=4*(ie*S+ye),G!=2?re=[o(x[D]+K[D]),o(x[D+1]+K[D+1]),o(x[D+2]+K[D+2]),o(x[D+3]+K[D+3])]:(Z=ne[4*(3&ie)+(3&ye)],re=[o(x[D]+Z),o(x[D+1]+Z),o(x[D+2]+Z),o(x[D+3]+Z)]),J=0;let Te=16777215;for(W=0;W<ee;W++){const Ye=c(re,P[W]);Ye<Te&&(Te=Ye,J=W)}const Ne=P[J],Ie=[re[0]-Ne[0],re[1]-Ne[1],re[2]-Ne[2],re[3]-Ne[3]];G==1&&(ye!=S-1&&s(Ie,K,D+4,7),ie!=I-1&&(ye!=0&&s(Ie,K,D+4*S-4,3),s(Ie,K,D+4*S,5),ye!=S-1&&s(Ie,K,D+4*S+4,1))),C[D>>2]=J,H[D>>2]=N[J]}}function d(x,S,I,N,V){V==null&&(V={});const{crc:C}=n,G=e.writeUint,ee=e.writeUshort,P=e.writeASCII;let D=8;const J=x.frames.length>1;let W,Z=!1,H=33+(J?20:0);if(V.sRGB!=null&&(H+=13),V.pHYs!=null&&(H+=21),V.iCCP!=null&&(W=pako.deflate(V.iCCP),H+=21+W.length+4),x.ctype==3){for(var K=x.plte.length,ne=0;ne<K;ne++)x.plte[ne]>>>24!=255&&(Z=!0);H+=8+3*K+4+(Z?8+1*K+4:0)}for(var re=0;re<x.frames.length;re++)J&&(H+=38),H+=(Ne=x.frames[re]).cimg.length+12,re!=0&&(H+=4);H+=12;const ie=new Uint8Array(H),ye=[137,80,78,71,13,10,26,10];for(ne=0;ne<8;ne++)ie[ne]=ye[ne];if(G(ie,D,13),D+=4,P(ie,D,"IHDR"),D+=4,G(ie,D,S),D+=4,G(ie,D,I),D+=4,ie[D]=x.depth,D++,ie[D]=x.ctype,D++,ie[D]=0,D++,ie[D]=0,D++,ie[D]=0,D++,G(ie,D,C(ie,D-17,17)),D+=4,V.sRGB!=null&&(G(ie,D,1),D+=4,P(ie,D,"sRGB"),D+=4,ie[D]=V.sRGB,D++,G(ie,D,C(ie,D-5,5)),D+=4),V.iCCP!=null){const Ie=13+W.length;G(ie,D,Ie),D+=4,P(ie,D,"iCCP"),D+=4,P(ie,D,"ICC profile"),D+=11,D+=2,ie.set(W,D),D+=W.length,G(ie,D,C(ie,D-(Ie+4),Ie+4)),D+=4}if(V.pHYs!=null&&(G(ie,D,9),D+=4,P(ie,D,"pHYs"),D+=4,G(ie,D,V.pHYs[0]),D+=4,G(ie,D,V.pHYs[1]),D+=4,ie[D]=V.pHYs[2],D++,G(ie,D,C(ie,D-13,13)),D+=4),J&&(G(ie,D,8),D+=4,P(ie,D,"acTL"),D+=4,G(ie,D,x.frames.length),D+=4,G(ie,D,V.loop!=null?V.loop:0),D+=4,G(ie,D,C(ie,D-12,12)),D+=4),x.ctype==3){for(G(ie,D,3*(K=x.plte.length)),D+=4,P(ie,D,"PLTE"),D+=4,ne=0;ne<K;ne++){const Ie=3*ne,Ye=x.plte[ne],nt=255&Ye,Qe=Ye>>>8&255,Gt=Ye>>>16&255;ie[D+Ie+0]=nt,ie[D+Ie+1]=Qe,ie[D+Ie+2]=Gt}if(D+=3*K,G(ie,D,C(ie,D-3*K-4,3*K+4)),D+=4,Z){for(G(ie,D,K),D+=4,P(ie,D,"tRNS"),D+=4,ne=0;ne<K;ne++)ie[D+ne]=x.plte[ne]>>>24&255;D+=K,G(ie,D,C(ie,D-K-4,K+4)),D+=4}}let Te=0;for(re=0;re<x.frames.length;re++){var Ne=x.frames[re];J&&(G(ie,D,26),D+=4,P(ie,D,"fcTL"),D+=4,G(ie,D,Te++),D+=4,G(ie,D,Ne.rect.width),D+=4,G(ie,D,Ne.rect.height),D+=4,G(ie,D,Ne.rect.x),D+=4,G(ie,D,Ne.rect.y),D+=4,ee(ie,D,N[re]),D+=2,ee(ie,D,1e3),D+=2,ie[D]=Ne.dispose,D++,ie[D]=Ne.blend,D++,G(ie,D,C(ie,D-30,30)),D+=4);const Ie=Ne.cimg;G(ie,D,(K=Ie.length)+(re==0?0:4)),D+=4;const Ye=D;P(ie,D,re==0?"IDAT":"fdAT"),D+=4,re!=0&&(G(ie,D,Te++),D+=4),ie.set(Ie,D),D+=K,G(ie,D,C(ie,Ye,D-Ye)),D+=4}return G(ie,D,0),D+=4,P(ie,D,"IEND"),D+=4,G(ie,D,C(ie,D-4,4)),D+=4,ie.buffer}function f(x,S,I){for(let N=0;N<x.frames.length;N++){const V=x.frames[N];V.rect.width;const C=V.rect.height,G=new Uint8Array(C*V.bpl+C);V.cimg=w(V.img,C,V.bpp,V.bpl,G,S,I)}}function g(x,S,I,N,V){const C=V[0],G=V[1],ee=V[2],P=V[3],D=V[4],J=V[5];let W=6,Z=8,H=255;for(var K=0;K<x.length;K++){const Ct=new Uint8Array(x[K]);for(var ne=Ct.length,re=0;re<ne;re+=4)H&=Ct[re+3]}const ie=H!=255,ye=(function(at,ot,qe,pe,Ee,Be){const Oe=[];for(var xe=0;xe<at.length;xe++){const Bt=new Uint8Array(at[xe]),kn=new Uint32Array(Bt.buffer);var rt;let wn=0,Kt=0,Et=ot,Zt=qe,kt=pe?1:0;if(xe!=0){const Yo=Be||pe||xe==1||Oe[xe-2].dispose!=0?1:2;let ai=0,Na=1e9;for(let Dn=0;Dn<Yo;Dn++){var gt=new Uint8Array(at[xe-1-Dn]);const qi=new Uint32Array(at[xe-1-Dn]);let pt=ot,hn=qe,xn=-1,En=-1;for(let Er=0;Er<qe;Er++)for(let pn=0;pn<ot;pn++)kn[ut=Er*ot+pn]!=qi[ut]&&(pn<pt&&(pt=pn),pn>xn&&(xn=pn),Er<hn&&(hn=Er),Er>En&&(En=Er));xn==-1&&(pt=hn=xn=En=0),Ee&&((1&pt)==1&&pt--,(1&hn)==1&&hn--);const Qo=(xn-pt+1)*(En-hn+1);Qo<Na&&(Na=Qo,ai=Dn,wn=pt,Kt=hn,Et=xn-pt+1,Zt=En-hn+1)}gt=new Uint8Array(at[xe-1-ai]),ai==1&&(Oe[xe-1].dispose=2),rt=new Uint8Array(Et*Zt*4),r(gt,ot,qe,rt,Et,Zt,-wn,-Kt,0),kt=r(Bt,ot,qe,rt,Et,Zt,-wn,-Kt,3)?1:0,kt==1?v(Bt,ot,qe,rt,{x:wn,y:Kt,width:Et,height:Zt}):r(Bt,ot,qe,rt,Et,Zt,-wn,-Kt,0)}else rt=Bt.slice(0);Oe.push({rect:{x:wn,y:Kt,width:Et,height:Zt},img:rt,blend:kt,dispose:0})}if(pe)for(xe=0;xe<Oe.length;xe++){if((Fn=Oe[xe]).blend==1)continue;const Bt=Fn.rect,kn=Oe[xe-1].rect,wn=Math.min(Bt.x,kn.x),Kt=Math.min(Bt.y,kn.y),Et={x:wn,y:Kt,width:Math.max(Bt.x+Bt.width,kn.x+kn.width)-wn,height:Math.max(Bt.y+Bt.height,kn.y+kn.height)-Kt};Oe[xe-1].dispose=1,xe-1!=0&&y(at,ot,qe,Oe,xe-1,Et,Ee),y(at,ot,qe,Oe,xe,Et,Ee)}let Bn=0;if(at.length!=1)for(var ut=0;ut<Oe.length;ut++){var Fn;Bn+=(Fn=Oe[ut]).rect.width*Fn.rect.height}return Oe})(x,S,I,C,G,ee),Te={},Ne=[],Ie=[];if(N!=0){const Ct=[];for(re=0;re<ye.length;re++)Ct.push(ye[re].img.buffer);const at=(function(Ee){let Be=0;for(var Oe=0;Oe<Ee.length;Oe++)Be+=Ee[Oe].byteLength;const xe=new Uint8Array(Be);let rt=0;for(Oe=0;Oe<Ee.length;Oe++){const gt=new Uint8Array(Ee[Oe]),Bn=gt.length;for(let ut=0;ut<Bn;ut+=4){let Fn=gt[ut],Bt=gt[ut+1],kn=gt[ut+2];const wn=gt[ut+3];wn==0&&(Fn=Bt=kn=0),xe[rt+ut]=Fn,xe[rt+ut+1]=Bt,xe[rt+ut+2]=kn,xe[rt+ut+3]=wn}rt+=Bn}return xe.buffer})(Ct),ot=k(at,N);for(re=0;re<ot.plte.length;re++)Ne.push(ot.plte[re].est.rgba);let qe=0;for(re=0;re<ye.length;re++){const pe=(nt=ye[re]).img.length;var Ye=new Uint8Array(ot.inds.buffer,qe>>2,pe>>2);Ie.push(Ye);const Ee=new Uint8Array(ot.abuf,qe,pe);J&&u(nt.img,nt.rect.width,nt.rect.height,Ne,Ee,Ye),nt.img.set(Ee),qe+=pe}}else for(K=0;K<ye.length;K++){var nt=ye[K];const Ct=new Uint32Array(nt.img.buffer);var Qe=nt.rect.width;for(ne=Ct.length,Ye=new Uint8Array(ne),Ie.push(Ye),re=0;re<ne;re++){const at=Ct[re];if(re!=0&&at==Ct[re-1])Ye[re]=Ye[re-1];else if(re>Qe&&at==Ct[re-Qe])Ye[re]=Ye[re-Qe];else{let ot=Te[at];if(ot==null&&(Te[at]=ot=Ne.length,Ne.push(at),Ne.length>=300))break;Ye[re]=ot}}}const Gt=Ne.length;for(Gt<=256&&D==0&&(Z=Gt<=2?1:Gt<=4?2:Gt<=16?4:8,Z=Math.max(Z,P)),K=0;K<ye.length;K++){(nt=ye[K]).rect.x,nt.rect.y,Qe=nt.rect.width;const Ct=nt.rect.height;let at=nt.img;new Uint32Array(at.buffer);let ot=4*Qe,qe=4;if(Gt<=256&&D==0){ot=Math.ceil(Z*Qe/8);var Rt=new Uint8Array(ot*Ct);const pe=Ie[K];for(let Ee=0;Ee<Ct;Ee++){re=Ee*ot;const Be=Ee*Qe;if(Z==8)for(var mt=0;mt<Qe;mt++)Rt[re+mt]=pe[Be+mt];else if(Z==4)for(mt=0;mt<Qe;mt++)Rt[re+(mt>>1)]|=pe[Be+mt]<<4-4*(1&mt);else if(Z==2)for(mt=0;mt<Qe;mt++)Rt[re+(mt>>2)]|=pe[Be+mt]<<6-2*(3&mt);else if(Z==1)for(mt=0;mt<Qe;mt++)Rt[re+(mt>>3)]|=pe[Be+mt]<<7-1*(7&mt)}at=Rt,W=3,qe=1}else if(ie==0&&ye.length==1){Rt=new Uint8Array(Qe*Ct*3);const pe=Qe*Ct;for(re=0;re<pe;re++){const Ee=3*re,Be=4*re;Rt[Ee]=at[Be],Rt[Ee+1]=at[Be+1],Rt[Ee+2]=at[Be+2]}at=Rt,W=2,qe=3,ot=3*Qe}nt.img=at,nt.bpl=ot,nt.bpp=qe}return{ctype:W,depth:Z,plte:Ne,frames:ye}}function y(x,S,I,N,V,C,G){const ee=Uint8Array,P=Uint32Array,D=new ee(x[V-1]),J=new P(x[V-1]),W=V+1<x.length?new ee(x[V+1]):null,Z=new ee(x[V]),H=new P(Z.buffer);let K=S,ne=I,re=-1,ie=-1;for(let Te=0;Te<C.height;Te++)for(let Ne=0;Ne<C.width;Ne++){const Ie=C.x+Ne,Ye=C.y+Te,nt=Ye*S+Ie,Qe=H[nt];Qe==0||N[V-1].dispose==0&&J[nt]==Qe&&(W==null||W[4*nt+3]!=0)||(Ie<K&&(K=Ie),Ie>re&&(re=Ie),Ye<ne&&(ne=Ye),Ye>ie&&(ie=Ye))}re==-1&&(K=ne=re=ie=0),G&&((1&K)==1&&K--,(1&ne)==1&&ne--),C={x:K,y:ne,width:re-K+1,height:ie-ne+1};const ye=N[V];ye.rect=C,ye.blend=1,ye.img=new Uint8Array(C.width*C.height*4),N[V-1].dispose==0?(r(D,S,I,ye.img,C.width,C.height,-C.x,-C.y,0),v(Z,S,I,ye.img,C)):r(Z,S,I,ye.img,C.width,C.height,-C.x,-C.y,0)}function v(x,S,I,N,V){r(x,S,I,N,V.width,V.height,-V.x,-V.y,2)}function w(x,S,I,N,V,C,G){const ee=[];let P,D=[0,1,2,3,4];C!=-1?D=[C]:(S*N>5e5||I==1)&&(D=[0]),G&&(P={level:0});const J=c9;for(var W=0;W<D.length;W++){for(let K=0;K<S;K++)T(V,x,K,N,I,D[W]);ee.push(J.deflate(V,P))}let Z,H=1e9;for(W=0;W<ee.length;W++)ee[W].length<H&&(Z=W,H=ee[W].length);return ee[Z]}function T(x,S,I,N,V,C){const G=I*N;let ee=G+I;if(x[ee]=C,ee++,C==0)if(N<500)for(var P=0;P<N;P++)x[ee+P]=S[G+P];else x.set(new Uint8Array(S.buffer,G,N),ee);else if(C==1){for(P=0;P<V;P++)x[ee+P]=S[G+P];for(P=V;P<N;P++)x[ee+P]=S[G+P]-S[G+P-V]+256&255}else if(I==0){for(P=0;P<V;P++)x[ee+P]=S[G+P];if(C==2)for(P=V;P<N;P++)x[ee+P]=S[G+P];if(C==3)for(P=V;P<N;P++)x[ee+P]=S[G+P]-(S[G+P-V]>>1)+256&255;if(C==4)for(P=V;P<N;P++)x[ee+P]=S[G+P]-t(S[G+P-V],0,0)+256&255}else{if(C==2)for(P=0;P<N;P++)x[ee+P]=S[G+P]+256-S[G+P-N]&255;if(C==3){for(P=0;P<V;P++)x[ee+P]=S[G+P]+256-(S[G+P-N]>>1)&255;for(P=V;P<N;P++)x[ee+P]=S[G+P]+256-(S[G+P-N]+S[G+P-V]>>1)&255}if(C==4){for(P=0;P<V;P++)x[ee+P]=S[G+P]+256-t(0,S[G+P-N],0)&255;for(P=V;P<N;P++)x[ee+P]=S[G+P]+256-t(S[G+P-V],S[G+P-N],S[G+P-V-N])&255}}}function k(x,S){const I=new Uint8Array(x),N=I.slice(0),V=new Uint32Array(N.buffer),C=O(N,S),G=C[0],ee=C[1],P=I.length,D=new Uint8Array(P>>2);let J;if(I.length<2e7)for(var W=0;W<P;W+=4)J=L(G,Z=I[W]*(1/255),H=I[W+1]*(1/255),K=I[W+2]*(1/255),ne=I[W+3]*(1/255)),D[W>>2]=J.ind,V[W>>2]=J.est.rgba;else for(W=0;W<P;W+=4){var Z=I[W]*.00392156862745098,H=I[W+1]*(1/255),K=I[W+2]*(1/255),ne=I[W+3]*(1/255);for(J=G;J.left;)J=B(J.est,Z,H,K,ne)<=0?J.left:J.right;D[W>>2]=J.ind,V[W>>2]=J.est.rgba}return{abuf:N.buffer,inds:D,plte:ee}}function O(x,S,I){I==null&&(I=1e-4);const N=new Uint32Array(x.buffer),V={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};V.bst=Y(x,V.i0,V.i1),V.est=z(V.bst);const C=[V];for(;C.length<S;){let ee=0,P=0;for(var G=0;G<C.length;G++)C[G].est.L>ee&&(ee=C[G].est.L,P=G);if(ee<I)break;const D=C[P],J=F(x,N,D.i0,D.i1,D.est.e,D.est.eMq255);if(D.i0>=J||D.i1<=J){D.est.L=0;continue}const W={i0:D.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};W.bst=Y(x,W.i0,W.i1),W.est=z(W.bst);const Z={i0:J,i1:D.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:D.bst.N-W.bst.N},G=0;G<16;G++)Z.bst.R[G]=D.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)Z.bst.m[G]=D.bst.m[G]-W.bst.m[G];Z.est=z(Z.bst),D.left=W,D.right=Z,C[P]=W,C.push(Z)}for(C.sort(((ee,P)=>P.bst.N-ee.bst.N)),G=0;G<C.length;G++)C[G].ind=G;return[V,C]}function L(x,S,I,N,V){if(x.left==null)return x.tdst=(function(W,Z,H,K,ne){const re=Z-W[0],ie=H-W[1],ye=K-W[2],Te=ne-W[3];return re*re+ie*ie+ye*ye+Te*Te})(x.est.q,S,I,N,V),x;const C=B(x.est,S,I,N,V);let G=x.left,ee=x.right;C>0&&(G=x.right,ee=x.left);const P=L(G,S,I,N,V);if(P.tdst<=C*C)return P;const D=L(ee,S,I,N,V);return D.tdst<P.tdst?D:P}function B(x,S,I,N,V){const{e:C}=x;return C[0]*S+C[1]*I+C[2]*N+C[3]*V-x.eMq}function F(x,S,I,N,V,C){for(N-=4;I<N;){for(;q(x,I,V)<=C;)I+=4;for(;q(x,N,V)>C;)N-=4;if(I>=N)break;const G=S[I>>2];S[I>>2]=S[N>>2],S[N>>2]=G,I+=4,N-=4}for(;q(x,I,V)>C;)I-=4;return I+4}function q(x,S,I){return x[S]*I[0]+x[S+1]*I[1]+x[S+2]*I[2]+x[S+3]*I[3]}function Y(x,S,I){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=[0,0,0,0],C=I-S>>2;for(let G=S;G<I;G+=4){const ee=x[G]*.00392156862745098,P=x[G+1]*(1/255),D=x[G+2]*(1/255),J=x[G+3]*(1/255);V[0]+=ee,V[1]+=P,V[2]+=D,V[3]+=J,N[0]+=ee*ee,N[1]+=ee*P,N[2]+=ee*D,N[3]+=ee*J,N[5]+=P*P,N[6]+=P*D,N[7]+=P*J,N[10]+=D*D,N[11]+=D*J,N[15]+=J*J}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:V,N:C}}function z(x){const{R:S}=x,{m:I}=x,{N}=x,V=I[0],C=I[1],G=I[2],ee=I[3],P=N==0?0:1/N,D=[S[0]-V*V*P,S[1]-V*C*P,S[2]-V*G*P,S[3]-V*ee*P,S[4]-C*V*P,S[5]-C*C*P,S[6]-C*G*P,S[7]-C*ee*P,S[8]-G*V*P,S[9]-G*C*P,S[10]-G*G*P,S[11]-G*ee*P,S[12]-ee*V*P,S[13]-ee*C*P,S[14]-ee*G*P,S[15]-ee*ee*P],J=D,W=M;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,K=0;if(N!=0)for(let re=0;re<16&&(Z=W.multVec(J,Z),K=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/K,Z),!(re!=0&&Math.abs(K-H)<1e-9));re++)H=K;const ne=[V*P,C*P,G*P,ee*P];return{Cov:D,q:ne,e:Z,L:H,eMq255:W.dot(W.sml(255,ne),Z),eMq:W.dot(Z,ne),rgba:(Math.round(255*ne[3])<<24|Math.round(255*ne[2])<<16|Math.round(255*ne[1])<<8|Math.round(255*ne[0])<<0)>>>0}}var M={multVec:(x,S)=>[x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],x[4]*S[0]+x[5]*S[1]+x[6]*S[2]+x[7]*S[3],x[8]*S[0]+x[9]*S[1]+x[10]*S[2]+x[11]*S[3],x[12]*S[0]+x[13]*S[1]+x[14]*S[2]+x[15]*S[3]],dot:(x,S)=>x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],sml:(x,S)=>[x*S[0],x*S[1],x*S[2],x*S[3]]};Xr.encode=function(S,I,N,V,C,G,ee){V==null&&(V=0),ee==null&&(ee=!1);const P=g(S,I,N,V,[!1,!1,!1,0,ee,!1]);return f(P,-1),d(P,I,N,C,G)},Xr.encodeLL=function(S,I,N,V,C,G,ee,P){const D={ctype:0+(V==1?0:2)+(C==0?0:4),depth:G,frames:[]},J=(V+C)*G,W=J*I;for(let Z=0;Z<S.length;Z++)D.frames.push({rect:{x:0,y:0,width:I,height:N},img:new Uint8Array(S[Z]),blend:0,dispose:1,bpp:Math.ceil(J/8),bpl:Math.ceil(W/8)});return f(D,0,!0),d(D,I,N,ee,P)},Xr.encode.compress=g,Xr.encode.dither=u,Xr.quantize=k,Xr.quantize.getKDtree=O,Xr.quantize.getNearest=L})();const fR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,T,k,O,L=v,B=0,F=0,q=0;function Y(x){y.setUint16(F,x,!0),F+=2}function z(x){y.setUint32(F,x,!0),F+=4}function M(x){F+=x}Y(19778),z(f),M(4),z(122),z(108),z(t),z(-n>>>0),Y(1),Y(32),z(3),z(d),z(2835),z(2835),M(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function x(){for(;B<n&&L>0;){for(O=122+B*u,w=0;w<s;)L--,T=c[q++],k=T>>>24,y.setUint32(O+w,T<<8|k),w+=4;B++}q<c.length?(L=v,setTimeout(x,fR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var rr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},u9={[rr.CHROME]:16384,[rr.FIREFOX]:11180,[rr.DESKTOP_SAFARI]:16384,[rr.IE]:8192,[rr.IOS]:4096,[rr.ETC]:8192};const J_=typeof window<"u",mR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Cm=J_&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),h9=(J_||mR)&&(Cm&&Cm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gR=(J_||mR)&&(Cm&&Cm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Z_(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function pR(r){return new Promise(((e,t)=>{const n=new gR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function yR(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function go(){if(go.cachedResult!==void 0)return go.cachedResult;let r=rr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=rr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=rr.IOS:/Safari/i.test(e)?r=rr.DESKTOP_SAFARI:/Firefox/i.test(e)?r=rr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=rr.IE),go.cachedResult=r,go.cachedResult}function _R(r,e){const t=go(),n=u9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function yg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function vR(r,e){const{width:t,height:n}=_R(r.width,r.height),[s,o]=yg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function Gf(){return Gf.cachedResult!==void 0||(Gf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Gf.cachedResult}function Nm(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=vR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return pR(r).then((function(y){try{return g=y,yR(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(Gf()||[rr.DESKTOP_SAFARI,rr.MOBILE_SAFARI].includes(go()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function km(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Xr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>fR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(T){return c(T)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),Z_(w,t,n).then((function(T){try{return u=T,v.call(this)}catch(k){return c(k)}}).bind(this),c)}}}function d(){return o(u)}}))}function Si(r){r.width=0,r.height=0}function Wl(){return new Promise((function(r,e){let t,n,s,o;return Wl.cachedResult!==void 0?r(Wl.cachedResult):Z_("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Nm(t).then((function(u){try{return n=u[1],km(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Si(n),Nm(s).then((function(f){try{return o=f[0],Wl.cachedResult=o.width===1&&o.height===2,r(Wl.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function bR(r){return new Promise(((e,t)=>{const n=new gR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function wR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=yg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Si(r)),c}function xR(r,e){const{width:t}=r,{height:n}=r,[s,o]=yg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Si(r),s}function DT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,T,k,O,L,B,F,q,Y,z,M,x;function S(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=N,e.onProgress(Math.min(o,100))}function I(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(N,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,S(),Nm(r,e).then((function(N){try{return[,d]=N,S(),f=wR(d,e),S(),new Promise((function(V,C){var G;if(!(G=e.exifOrientation))return bR(r).then((function(P){try{return G=P,ee.call(this)}catch(D){return C(D)}}).bind(this),C);function ee(){return V(G)}return ee.call(this)})).then((function(V){try{return g=V,S(),Wl().then((function(C){try{return y=C?f:xR(f,g),S(),v=e.initialQuality||1,w=e.fileType||r.type,km(y,w,r.name,r.lastModified,v).then((function(G){try{{let J=function(){if(c--&&(F>u||F>L)){let Z,H;return Z=x?.95*M.width:M.width,H=x?.95*M.height:M.height,[Y,z]=yg(Z,H),z.drawImage(M,0,0,Z,H),v*=w==="image/png"?.85:.95,km(Y,w,r.name,r.lastModified,v).then((function(K){try{return q=K,Si(M),M=Y,F=q.size,I(Math.min(99,Math.floor((B-F)/(B-u)*100))),J}catch(ne){return s(ne)}}),s)}return[1]},W=function(){return Si(M),Si(Y),Si(f),Si(y),Si(d),I(100),n(q)};var P=J,D=W;if(T=G,S(),k=T.size>u,O=T.size>r.size,!k&&!O)return I(100),n(T);var ee;return L=r.size,B=T.size,F=B,M=y,x=!e.alwaysKeepResolution&&k,(ee=(function(Z){for(;Z;){if(Z.then)return void Z.then(ee,s);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=J}else Z=Z.call(this)}catch(H){return s(H)}}}).bind(this))(J)}}catch(J){return s(J)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)}catch(V){return s(V)}}).bind(this),s)}))}const d9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let By;function f9(r,e){return new Promise(((t,n)=>{By||(By=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(d9));const s=new Worker(By);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function fn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof h9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return DT(r,s).then((function(w){try{return o=w,v.call(this)}catch(T){return n(T)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return DT(r,s).then((function(T){try{return o=T,g()}catch(k){return n(k)}}),n)}catch(T){return n(T)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",f9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=dR(r,o))}catch{}return t(o)}}))}fn.getDataUrlFromFile=pR,fn.getFilefromDataUrl=Z_,fn.loadImage=yR,fn.drawImageInCanvas=vR,fn.drawFileInCanvas=Nm,fn.canvasToFile=km,fn.getExifOrientation=bR,fn.handleMaxWidthOrHeight=wR,fn.followExifOrientation=xR,fn.cleanupCanvasMemory=Si,fn.isAutoOrientationInBrowser=Wl,fn.approximateBelowMaximumCanvasSizeOfBrowser=_R,fn.copyExifWithoutOrientation=dR,fn.getBrowserName=go,fn.version="2.0.2";const m9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function g9(r){if(!r)return!0;const e=r.toLowerCase();return!m9.some(t=>e.includes(t))}async function p9(r,e){try{const t=Mt(Ge,"users",r);return await wr(t,{blockedUsers:G_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function y9(r,e){try{const t=Mt(Ge,"users",r);return await wr(t,{blockedUsers:EI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function _9(r,e){try{const t=Mt(Ge,"users",r),n=await jo(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function v9({onClose:r,onPostCreated:e}){const{t}=zn(),{currentUser:n}=si(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,T]=$.useState("none"),[k,O]=$.useState(null),[L,B]=$.useState(null),[F,q]=$.useState(!1),[Y,z]=$.useState(!1),[M,x]=$.useState(""),[S,I]=$.useState(""),[N,V]=$.useState(0);$.useEffect(()=>{if(u){const D=zy.find(J=>J.value===u);D&&g(t(D.labelKey))}},[u,t]);const C=async D=>{const J=D.target.files[0];if(J){const W=new FileReader;W.onloadend=()=>B(W.result),W.readAsDataURL(J),O(J)}},G=async()=>{if(k){z(!0);try{let D=k;try{D=await fn(k,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const J=new FileReader;J.readAsDataURL(D),J.onloadend=async()=>{const W=J.result,Z=await QI(W,"en"),H=(Z.plant_name+" "+Z.disease_name).toLowerCase();let K=null;for(const ne of zy)if(H.includes(ne.value)){K=ne;break}K?(d(K.value),g(t(K.labelKey)),I(`${t("auto_detect")}: ${t(K.labelKey)}`)):I("Plant detected but not in our list yet."),setTimeout(()=>I(""),3e3),z(!1)}}catch(D){console.error("Auto detect failed",D),x(t("error_diagnosis_failed")),z(!1)}}},ee=async D=>{if(D.preventDefault(),!!o.trim()){if(!g9(o)){x(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}q(!0),x(""),V(0);try{let J=null;if(k)try{console.log("Compressing for Base64 storage...");const Z=await fn(k,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});J=await new Promise((H,K)=>{const ne=new FileReader;ne.readAsDataURL(Z),ne.onload=()=>H(ne.result),ne.onerror=re=>K(re)}),console.log("Base64 string ready, length:",J.length)}catch(W){console.error("Compression failed:",W),x("Image is too large and could not be compressed."),q(!1);return}await eR(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:J}),e(),r()}catch(J){console.error("FULL POST ERROR:",J),x(J.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{q(!1)}}},P=zy.filter(D=>t(D.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Uo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[M&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:M}),S&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:S}),b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:D=>c(D.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(OL,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:D=>{g(D.target.value),v(!0),D.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(NI,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(D=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(D.value),g(t(D.labelKey)),v(!1)},children:t(D.labelKey)},D.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),L&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{O(null),B(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:F,children:b.jsx(Uo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:Y,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[Y?b.jsx(xo,{className:"w-3 h-3 animate-spin"}):b.jsx(XL,{className:"w-3 h-3"}),t(Y?"detecting":"auto_detect")]})]}),F&&N>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${N}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(N),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:F,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(MI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:C,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:F||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[F?b.jsx(xo,{className:"w-4 h-4 animate-spin"}):b.jsx(vh,{className:"w-4 h-4"}),F?"...":t("ask_question")]})]})]})]})]})})}function b9({user:r,onClose:e}){const{currentUser:t}=si(),n=xs(),[s,o]=$.useState(!1),{t:c}=zn(),{addToast:u}=Ca(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const O=r.uid||r.id;if(!O)return;const L=tc(Mt(Ge,"users",O),B=>{B.exists()&&f({uid:B.id,...B.data()})},B=>{console.error("User listener error",B)});return()=>L()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&_9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await y9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await p9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(O){console.error(O),u("Action failed","error")}},T=O=>!O?.lastSeen||!O.lastSeen.seconds?!1:Date.now()-O.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const k=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const O={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:O}})}catch(O){console.error(O),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:O=>O.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Uo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${T(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${T(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),T(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(Im,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(Im,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:k,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(_h,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function ev(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(zi,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function w9(){const{t:r}=zn(),{currentUser:e}=si(),{addToast:t}=Ca(),[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(!1),[f,g]=$.useState(null),[y,v]=$.useState(null);return $.useEffect(()=>{const w=Lo(sr(Ge,"posts"),W6("createdAt","desc"),X6(50)),T=tc(w,k=>{const O=k.docs.map(L=>({id:L.id,...L.data()}));s(O),c(!1)},k=>{console.error("Error fetching posts:",k),c(!1),t("Failed to load community posts","error")});return()=>T()},[]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:b.jsxs("button",{onClick:()=>{if(!e){t(r("login_to_post")||"Please login to post.","error");return}d(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(RL,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})})]}),o?b.jsx(ev,{}):n.length>0?b.jsx("div",{className:"space-y-6",children:n.map(w=>b.jsx(hR,{post:w,onViewAnalysis:T=>g(T),onUserClick:T=>{v({id:T,name:w.authorName||"Gardener",avatar:w.userAvatar})}},w.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),u&&b.jsx(v9,{onClose:()=>d(!1),onPostCreated:()=>{}}),f&&b.jsx(AnalysisDetailModal,{analysisId:f,onClose:()=>g(null)}),y&&b.jsx(b9,{user:y,onClose:()=>v(null)})]})}const x9="modulepreload",E9=function(r){return"/"+r},OT={},T9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=E9(g),g in OT)return;OT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":x9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((T,k)=>{w.addEventListener("load",T),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function $n(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class Hh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const Sf={decode:function(r,e){return $n(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function ER(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(ER(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function MT(r,e,t){const n=ER(r,e||{});return t?.appendChild(n),n}var S9=Object.freeze({__proto__:null,createElement:MT,default:MT});const A9={fetchBlob:function(r,e,t){return $n(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){$n(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Xt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function fo(r,e){const t=Xt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ca(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class I9 extends Hh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Xt(!1),this._currentTime=Xt(0),this._duration=Xt(0),this._volume=Xt(this.media.volume),this._muted=Xt(this.media.muted),this._playbackRate=Xt(this.media.playbackRate||1),this._seeking=Xt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return $n(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function R9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function C9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function PT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function TR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function VT(r,e){if(!TR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function LT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function SR(r){const e=r._cleanup;typeof e=="function"&&e()}function N9(r){const e=Xt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=fo((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=fo((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),SR(e)}}}class k9 extends Hh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=PT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=PT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=N9(this.scrollContainer);const e=ca((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Xt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,T=v.clientY,k=!1;const O=Date.now(),L=t.getBoundingClientRect(),{left:B,top:F}=L,q=S=>{if(S.defaultPrevented||d.size>1||f&&Date.now()-O<c)return;const I=S.clientX,N=S.clientY,V=I-w,C=N-T;(k||Math.abs(V)>s||Math.abs(C)>s)&&(S.preventDefault(),S.stopPropagation(),k||(u.set({type:"start",x:w-B,y:T-F}),k=!0),u.set({type:"move",x:I-B,y:N-F,deltaX:V,deltaY:C}),w=I,T=N)},Y=S=>{if(d.delete(S.pointerId),k){const I=S.clientX,N=S.clientY;u.set({type:"end",x:I-B,y:N-F})}g()},z=S=>{d.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||Y(S)},M=S=>{k&&(S.stopPropagation(),S.preventDefault())},x=S=>{S.defaultPrevented||d.size>1||k&&S.preventDefault()};document.addEventListener("pointermove",q),document.addEventListener("pointerup",Y),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",M,{capture:!0}),g=()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",Y),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",x),setTimeout((()=>{document.removeEventListener("click",M,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),SR(u)}}})(this.wrapper);const e=ca((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:T,height:k,length:O,options:L,pixelRatio:B}){const F=k/2,q=L.barWidth?L.barWidth*B:1,Y=L.barGap?L.barGap*B:L.barWidth?q/2:0,z=q+Y||1;return{halfHeight:F,barWidth:q,barGap:Y,barRadius:L.barRadius||0,barMinHeight:L.barMinHeight?L.barMinHeight*B:0,barIndexScale:O>0?T/z/O:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:T,barIndexScale:k,barSpacing:O,barWidth:L,halfHeight:B,vScale:F,canvasHeight:q,barAlign:Y,barMinHeight:z}){const M=T[0]||[],x=T[1]||M,S=M.length,I=[];let N=0,V=0,C=0;for(let G=0;G<=S;G++){const ee=Math.round(G*k);if(ee>N){const{topHeight:J,totalHeight:W}=R9({maxTop:V,maxBottom:C,halfHeight:B,vScale:F,barMinHeight:z,barAlign:Y}),Z=C9({barAlign:Y,halfHeight:B,topHeight:J,totalHeight:W,canvasHeight:q});I.push({x:N*O,y:Z,width:L,height:W}),N=ee,V=0,C=0}const P=Math.abs(M[G]||0),D=Math.abs(x[G]||0);P>V&&(V=P),D>C&&(C=D)}return I})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const T of w)f&&"roundRect"in n?n.roundRect(T.x,T.y,T.width,T.height,f):n.rect(T.x,T.y,T.width,T.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((T,k)=>{const O=T.length,L=O?f/O:0,B=v,F=k===0?-1:1,q=[{x:0,y:B}];let Y=0,z=0;for(let M=0;M<=O;M++){const x=Math.round(M*L);if(x>Y){const I=B+(Math.round(z*v*y)||1)*F;q.push({x:Y,y:I}),Y=x,z=0}const S=Math.abs(T[M]||0);S>z&&(z=S)}return q.push({x:Y,y:B}),q}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const T=(f=y[w])!==null&&f!==void 0?f:0,k=Math.abs(T);k>v&&(v=k)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});TR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:T,totalWidth:k,options:O}){return VT(Math.min(8e3,T,k),O)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=T=>{if(T<0||T>=w||y[T])return;y[T]=!0;const k=T*g;let O=Math.min(f-k,g);if(O=VT(O,t),O<=0)return;const L=(function({channelData:B,offset:F,clampedWidth:q,totalWidth:Y}){return B.map((z=>{const M=Math.floor(F/Y*z.length),x=Math.floor((F+q)/Y*z.length);return z.slice(M,x)}))})({channelData:e,offset:k,clampedWidth:O,totalWidth:f});this.renderSingleCanvas(L,t,O,s,k,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let T=0;T<w;T++)v(T);return}if(LT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((T=>v(T))),w>1){const T=this.on("scroll",(()=>{const{scrollLeft:k}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),LT({scrollLeft:k,totalWidth:f,numCanvases:w}).forEach((O=>v(O)))}));this.unsubscribeOnScroll.push(T)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(w=Object.getOwnPropertySymbols(g);T<w.length;T++)y.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(g,w[T])&&(v[w[T]]=g[w[T]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return $n(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const T=Math.ceil(f*g),k=T>y,O=!!(v&&!k);return{scrollWidth:T,isScrollable:k,useParentWidth:O,width:(O?y:T)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $n(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class D9 extends Hh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Fy extends Hh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $n(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $n(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $n(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const O9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class xh extends I9{static create(e){return new xh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Fy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},O9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const T=(d=u?.currentTime)!==null&&d!==void 0?d:Xt(0),k=(f=u?.duration)!==null&&f!==void 0?f:Xt(0),O=(g=u?.isPlaying)!==null&&g!==void 0?g:Xt(!1),L=(y=u?.isSeeking)!==null&&y!==void 0?y:Xt(!1),B=(v=u?.volume)!==null&&v!==void 0?v:Xt(1),F=(w=u?.playbackRate)!==null&&w!==void 0?w:Xt(1),q=Xt(null),Y=Xt(null),z=Xt(""),M=Xt(0),x=Xt(0),S=fo((()=>!O.value),[O]),I=fo((()=>q.value!==null),[q]),N=fo((()=>I.value&&k.value>0),[I,k]),V=fo((()=>T.value),[T]),C=fo((()=>k.value>0?T.value/k.value:0),[T,k]);return{state:{currentTime:T,duration:k,isPlaying:O,isPaused:S,isSeeking:L,volume:B,playbackRate:F,audioBuffer:q,peaks:Y,url:z,zoom:M,scrollPosition:x,canPlay:I,isReady:N,progress:V,progressPercent:C},actions:{setCurrentTime:G=>{const ee=Math.max(0,Math.min(k.value||1/0,G));T.set(ee)},setDuration:G=>{k.set(Math.max(0,G))},setPlaying:G=>{O.set(G)},setSeeking:G=>{L.set(G)},setVolume:G=>{const ee=Math.max(0,Math.min(1,G));B.set(ee)},setPlaybackRate:G=>{const ee=Math.max(.1,Math.min(16,G));F.set(ee)},setAudioBuffer:G=>{q.set(G),G&&k.set(G.duration)},setPeaks:G=>{Y.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{M.set(Math.max(0,G))},setScrollPosition:G=>{x.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new D9;const o=t?void 0:this.getMediaElement();this.renderer=new k9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ca((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ca((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ca((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ca((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ca((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ca((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Sf.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Sf.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return $n(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield A9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof Fy&&(u.duration=c)}if(n)this.decodedData=Sf.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Sf.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const T=y[w];Math.abs(T)>Math.abs(v)&&(v=T)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return $n(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof Fy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return $n(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $n(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}xh.BasePlugin=class extends Hh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},xh.dom=S9;const M9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),P9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=xh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const T=Math.floor(w/60),k=Math.floor(w%60);return`${T}:${k<10?"0":""}${k}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(EL,{className:"w-5 h-5 fill-current"}):b.jsx(AL,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function V9(){const{chatId:r}=QT(),{currentUser:e}=si(),{t,i18n:n}=zn(),s=xs(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Ca();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[T,k]=$.useState(null),[O,L]=$.useState(null),[B,F]=$.useState(null),[q,Y]=$.useState(!1),[z,M]=$.useState(null),[x,S]=$.useState(0),[I,N]=$.useState(null),[V,C]=$.useState(!1),[G,ee]=$.useState(null),P=xr(),[D,J]=$.useState(P.state?.targetUser||null),[W,Z]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&Z(r)},[r]),$.useEffect(()=>{r==="new"&&D&&e&&(async()=>{try{k(D);const Ee=Lo(sr(Ge,"chats"),pc("participants","array-contains",e.uid)),Oe=(await yc(Ee)).docs.find(xe=>xe.data().participants.includes(D.uid));Oe?(Z(Oe.id),s(`/messages/${Oe.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,D,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=tc(Mt(Ge,"chats",W),Be=>{if(Be.exists()){const Oe=Be.data(),xe=Oe.participants.find(rt=>rt!==e.uid);if(xe){if(Oe.participantData?.[xe]){const rt=Oe.participantData[xe];k(gt=>gt?.id===xe?gt:{...rt,id:xe})}L(xe)}}else r!=="new"&&s("/messages")}),Ee=tc(sr(Ge,"chats",W,"messages"),Be=>{const Oe=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,rt)=>(xe.createdAt?.seconds||0)-(rt.createdAt?.seconds||0));f(Oe),w(!1),B||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,B,r,s]),$.useEffect(()=>{if(!O)return;const pe=tc(Mt(Ge,"users",O),Ee=>{if(Ee.exists()){const Be=Ee.data();k(Oe=>({...Oe,...Be}))}});return()=>pe()},[O]);const H=async(pe,Ee=null,Be=null,Oe="text")=>{C(!0);try{let xe=W;if(!xe&&r==="new"){if(!D)throw new Error("Target user missing");const{startChat:ut}=await T9(async()=>{const{startChat:Fn}=await Promise.resolve().then(()=>jj);return{startChat:Fn}},[]);xe=await ut(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),Z(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let rt=null,gt=Oe,Bn=Be;if(Ee||I){let ut=Ee||I.file;if(gt==="image"||I?.type==="image"){gt="image",Bn=Bn||I?.file.name;const Fn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ut=await fn(ut,Fn)}catch(Bt){console.warn("Compression failed, using original",Bt)}}else I&&(gt=I.type,Bn=I.file.name);if(rt=await M9(ut),rt.length>95e4)throw new Error("File is too large for database storage even after compression.")}B?(await wr(Mt(Ge,"chats",xe,"messages",B),{text:pe,editedAt:ar()}),F(null)):(await Bh(sr(Ge,"chats",xe,"messages"),{text:pe||"",type:gt,fileUrl:rt,fileName:Bn,senderId:e.uid,createdAt:ar()}),await wr(Mt(Ge,"chats",xe),{lastMessage:gt==="audio"?" Voice Message":gt==="image"?" Photo":pe||" File",updatedAt:ar()})),y(""),N(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{C(!1)}},K=async pe=>{pe.preventDefault(),!(!g.trim()&&!I)&&await H(g)},ne=async pe=>{if(window.confirm("Delete this message?"))try{await xm(Mt(Ge,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},re=n.language==="tr"?uR:X_,ie=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${cR(new Date(Ee),{addSuffix:!0,locale:re})}`},ye=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Te=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Ne=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",Oe=Be==="image"?URL.createObjectURL(Ee):null;N({file:Ee,type:Be,previewUrl:Oe})},Ie=pe=>{y(pe.text||""),F(pe.id),N(null),c.current&&(c.current.value="")},Ye=()=>{F(null),y(""),N(null)},nt=$.useRef("cancel"),Qe=$.useRef(null),Gt=$.useRef(null),Rt=$.useRef(null),[mt,Ct]=$.useState(0);$.useEffect(()=>{let pe;return q?(S(0),pe=setInterval(()=>S(Ee=>Ee+1),1e3)):(S(0),Ct(0)),()=>{clearInterval(pe),Rt.current&&cancelAnimationFrame(Rt.current),Qe.current&&Qe.current.close()}},[q]);const at=()=>{if(!Gt.current)return;const pe=new Uint8Array(Gt.current.fftSize);Gt.current.getByteTimeDomainData(pe);let Ee=0;for(let Oe=0;Oe<pe.length;Oe++)Ee+=Math.abs(pe[Oe]-128);const Be=Ee/pe.length;Ct(Be*10),Rt.current=requestAnimationFrame(at)},ot=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext);await Ee.resume();const Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,Qe.current=Ee,Gt.current=Be,at();const xe=new MediaRecorder(pe),rt=[];xe.ondataavailable=gt=>rt.push(gt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(gt=>gt.stop()),Qe.current&&Qe.current.close(),Rt.current&&cancelAnimationFrame(Rt.current),nt.current==="send"){const gt=new Blob(rt,{type:"audio/webm"});await H(null,gt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),M(xe),Y(!0),nt.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},qe=pe=>{!z||z.state==="inactive"||(nt.current=pe,z.stop(),Y(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(jV,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),T?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:T.photoURL||T.avatar||`https://ui-avatars.com/api/?name=${T.name||"User"}`,alt:T.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:T.name||T.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${ye(T)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:ie(T)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",Oe=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Oe&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(P9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(lT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Te(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ie(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(jI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>ne(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(Am,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Te(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),B&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:Ye,children:b.jsx(Uo,{className:"w-4 h-4"})})]}),I&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[I.type==="image"?b.jsx("img",{src:I.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(eL,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:I.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Uo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:q?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>qe("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(Am,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(x*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.max(0,mt-5),Oe=Math.min(1,Be/40),xe=Math.sin(Ee*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Oe*36*xe)}px`,opacity:.5+Oe*.5}},Ee)})})]}),b.jsx("button",{onClick:()=>qe("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(vh,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Ne,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:B,children:b.jsx(lT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:B?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||I?b.jsx("button",{onClick:K,disabled:V,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:V?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(vh,{className:"w-5 h-5"})}):b.jsx("button",{onClick:ot,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(vL,{className:"w-5 h-5"})})]})})]})}const Mu=Array.from({length:50},(r,e)=>{const t=e+1;let n=0;for(let u=1;u<t;u++)n+=100+(u-1)*20;let s="text-green-500",o="Seedling",c="Filiz";return t>40?(s="text-rose-500",o="Legend",c="Efsane"):t>30?(s="text-purple-500",o="Master",c="Usta"):t>20?(s="text-orange-500",o="Expert",c="Uzman"):t>10&&(s="text-yellow-500",o="Gardener",c="Bahvan"),{id:t,min:n,title:`${o}`,trTitle:`${c}`,tierColor:s}}),L9=100,j9=50;function U9(r=0,e=0){const t=r*L9+e*j9;let n=Mu[0];for(let u=Mu.length-1;u>=0;u--)if(t>=Mu[u].min){n=Mu[u];break}const s=Mu.find(u=>u.id===n.id+1);let o=100,c=t;if(s){const u=s.min-n.min,d=t-n.min;o=Math.min(100,Math.floor(d/u*100)),c=s.min}return{levelInfo:n,level:n.id,currentXp:t,nextLevelXp:c,progress:o,isMaxLevel:!s,totalXP:t}}function z9(){const{currentUser:r,logout:e,refreshUser:t}=si(),{t:n,i18n:s}=zn(),o=xs(),{userId:c}=QT(),{addToast:u}=Ca(),d=UT.useRef(null),[f,g]=$.useState(!1),[y,v]=$.useState(!0),[w,T]=$.useState(null),[k,O]=$.useState([]),[L,B]=$.useState(!0),[F,q]=$.useState({analysisCount:0,postCount:0}),[Y,z]=$.useState(null),[M,x]=$.useState(""),[S,I]=$.useState(""),[N,V]=$.useState(""),[C,G]=$.useState(null),[ee,P]=$.useState(!1),D=!c||r&&r.uid===c,J=c||r?.uid;$.useEffect(()=>{J&&W()},[J,r]);const W=async()=>{v(!0),B(!0);try{const K=Mt(Ge,"users",J),ne=await jo(K);if(ne.exists()){const re=ne.data();T(re),x(re.displayName||""),I(re.bio||""),V(re.location||""),G(re.photoURL||null);const ie=Lo(sr(Ge,"analyses"),pc("userId","==",J)),ye=Lo(sr(Ge,"posts"),pc("userId","==",J)),[Te,Ne]=await Promise.all([yc(ie),yc(ye)]),Ie=Te.size,Ye=Ne.size;q({analysisCount:Ie,postCount:Ye}),z(U9(Ie,Ye));const nt=Ne.docs.map(Qe=>({id:Qe.id,...Qe.data()}));nt.sort((Qe,Gt)=>(Gt.createdAt?.seconds||0)-(Qe.createdAt?.seconds||0)),O(nt)}else console.log("No such profile!")}catch(K){console.error("Error fetching profile:",K)}finally{v(!1),B(!1)}},Z=async()=>{P(!0);try{const K={displayName:M,bio:S,location:N,photoURL:C},ne=Mt(Ge,"users",r.uid);await wr(ne,K),await t(),setUserProfile(re=>({...re,...K})),g(!1)}catch(K){console.error("Error updating profile:",K),alert(n("error_updating_profile")||"Error updating profile")}finally{P(!1)}},H=async K=>{if(!D)return;const ne=K.target.files[0];try{const ie=await fn(ne,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),ye=await new Promise(Te=>{const Ne=new FileReader;Ne.readAsDataURL(ie),Ne.onload=Ie=>Te(Ie.target.result)});G(ye),await mg(Mt(Ge,"users",r.uid),{avatar:ye,email:r.email,name:M||r.displayName,updatedAt:new Date},{merge:!0});try{await JS(_r.currentUser,{photoURL:ye})}catch{}updateUserPostsName(r.uid,M,ye),await t(),u(n("profile_updated")||"Profile updated!","success")}catch(re){console.error(re),u("Error updating avatar.","error")}finally{v(!1)}};return J?L&&!w?b.jsx(ev,{}):b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${D?"group cursor-pointer":""} mt-2`,onClick:()=>D&&d.current?.click(),children:[b.jsx("div",{className:`w-36 h-36 rounded-full overflow-hidden border-4 shadow-xl bg-gray-100 relative z-10 ${Y?.levelInfo?.tierColor?.replace("text-","border-")||"border-gray-200"}`,children:(D?C:w?.avatar||w?.photoURL)?b.jsx("img",{src:D?C:w?.avatar||w?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(D?M||r.displayName||"Gardener":w?.name||w?.displayName||k.length>0&&k[0].authorName||"Gardener")}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),Y&&b.jsxs("div",{className:`absolute -bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1 rounded-full text-xs font-black text-white shadow-md border-2 border-white dark:border-gray-800 z-20 ${Y.levelInfo.tierColor.replace("text-","bg-")}`,children:["LVL ",Y.level]}),D&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:b.jsx(wo,{className:"w-8 h-8 text-white"})}),y&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full z-20",children:b.jsx(xo,{className:"animate-spin text-green-600"})})]}),D&&b.jsx("input",{type:"file",ref:d,onChange:H,className:"hidden",accept:"image/*"}),b.jsxs("div",{className:"text-center mt-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:D?M||r.displayName||n("gardener")||"Bahvan":w?.name||w?.displayName||k.length>0&&k[0].authorName||n("gardener")||"Bahvan"}),Y&&b.jsx("p",{className:`text-sm font-bold uppercase tracking-wide mt-1 ${Y.levelInfo.tierColor}`,children:s.language==="tr"?Y.levelInfo.trTitle:Y.levelInfo.title})]}),Y&&b.jsxs("div",{className:"w-full mt-4 px-2",children:[b.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-400 mb-1 uppercase tracking-wider",children:[b.jsxs("span",{children:[Y.currentXp," XP"]}),b.jsx("span",{children:Y.isMaxLevel?"MAX":`Next: ${Y.nextLevelXp}`})]}),b.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:b.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${Y.levelInfo.tierColor.replace("text-","bg-")}`,style:{width:`${Y.progress}%`}})}),b.jsxs("p",{className:"text-[10px] text-gray-400 text-center mt-1 font-medium",children:[n("total_xp"),": ",Y.totalXP]})]})]}),D?b.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:M,onChange:K=>x(K.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[y?b.jsx(xo,{className:"animate-spin w-4 h-4"}):b.jsx(zI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",w?.createdAt?.seconds?new Date(w.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!r){u(n("login_to_message")||"Please login to send messages","info"),o("/login");return}const K={uid:w.uid||J,name:w.name||w.displayName||k.length>0&&k[0].authorName||"Gardener",photoURL:w.photoURL||w.avatar||null};o("/messages/new",{state:{targetUser:K}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(_h,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.reduce((K,ne)=>K+(ne.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(iL,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:D?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:w?.name||"Kullanc"})||`${w?.name||"Kullanc"} Gnderileri`})]}),L?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(xo,{className:"w-8 h-8 animate-spin text-gray-300"})}):k.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:k.map(K=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(hR,{post:{...K,hideAuthor:D},onViewAnalysis:()=>{}})},K.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(hL,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})}):b.jsx("div",{className:"p-10 text-center",children:n("login_required")})}function B9(){const{t:r}=zn(),{currentUser:e}=si(),{addToast:t}=Ca();xs();const n=xr(),[s,o]=$.useState([]),[c,u]=$.useState(!0),[d,f]=$.useState(null),[g,y]=$.useState(!1),[v,w]=$.useState(null),[T,k]=$.useState(""),[O,L]=$.useState(!1),B=$.useRef(null),F=async()=>{try{u(!0);const x=await XI(e.uid);o(x||[]),n.state?.newAnalysisId&&(f(n.state.newAnalysisId),y(!0),window.history.replaceState({},document.title))}catch(x){console.error("Failed to load analyses",x),t(r("error_loading_analyses")||"Analizler yklenemedi","error")}finally{u(!1)}};$.useEffect(()=>{e&&F()},[e,n.state]);const q=async(x,S)=>{if(x.stopPropagation(),!!window.confirm(r("confirm_delete")||"Bu analizi silmek istediinize emin misiniz?"))try{await JI(S),o(I=>I.filter(N=>N.id!==S)),t(r("analysis_deleted")||"Analiz silindi","success")}catch(I){console.error("Delete failed",I),t("Silinemedi","error")}},Y=x=>{f(d===x?null:x)},z=async(x,S)=>{if(x.stopPropagation(),!S.isPublic)try{await tR(S.id),o(I=>I.map(N=>N.id===S.id?{...N,isPublic:!0}:N)),t(r("shared_success")||"Analiz toplulukta paylald!","success")}catch(I){console.error("Share failed",I),t("Paylalamad","error")}},M=async x=>{if(!T.trim()&&!B.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}L(!0);try{let S=null,I=null;if(B.current?.files?.[0]){const N=B.current.files[0];S=await new Promise(V=>{const C=new FileReader;C.onload=G=>V(G.target.result),C.readAsDataURL(N)});try{I=await oR(x.mainImage,S,x.result.disease_name)}catch(V){console.error("AI Progress Check Failed:",V)}}await nR(x.id,S,T,I),w(null),k(""),B.current&&(B.current.value=""),t("Durum gncellemesi kaydedildi!","success"),F()}catch(S){console.error("Feedback failed",S),t("Gncelleme kaydedilemedi.","error")}finally{L(!1)}};return c?b.jsx(ev,{}):s.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(zi,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(Zr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(wo,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(Sm,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[s.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:s.map(x=>{const S=x.nextCheckup?.seconds?new Date>new Date(x.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===x.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":S?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:I=>q(I,x.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(Am,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>Y(x.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:x.mainImage,alt:x.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),S&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:x.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:x.plantType||x.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:x.result.latin_name})]}):x.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(DI,{className:"w-3 h-3"}),x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),x.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:x.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(HV,{className:"w-4 h-4"}),b.jsxs("span",{children:[x.treatmentDuration||"1 Hafta"," Plan"]})]}),x.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(N0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(NI,{className:`w-6 h-6 text-gray-300 transition-transform ${d===x.id?"rotate-180":""}`})})]}),d===x.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:x.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(uT,{className:"w-5 h-5 text-green-600"}),x.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),x.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(x.result.is_treatable===!1?x.result.preventive_measures:x.result.treatment_steps)?.map((I,N)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${x.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:N+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:I})]},N))})]}),x.updates&&x.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:x.updates.map((I,N)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${I.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":I.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[I.imageUrl&&b.jsx("img",{src:I.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(I.createdAt?.seconds*1e3).toLocaleDateString()}),I.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${I.aiAnalysis.status==="better"?"bg-green-200 text-green-800":I.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:I.aiAnalysis.status==="better"?"YLEYOR":I.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:I.note}),I.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:I.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:I.aiAnalysis.advice})]})]},N))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.result.is_treatable&&b.jsxs("button",{onClick:()=>w(v===x.id?null:x.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(wo,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:I=>z(I,x),disabled:x.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${x.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(N0,{className:"w-5 h-5"}),x.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),v===x.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[O&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(xo,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(Sm,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:T,onChange:I=>k(I.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:B,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>M(x),disabled:O,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(vh,{className:"w-3 h-3"})]})]})]})]})]},x.id)})}),g&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(XV,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(uT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(wo,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>y(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function F9(){const{t:r}=zn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(wo,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function H9(){const{t:r,i18n:e}=zn(),{logout:t,currentUser:n}=si(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(LI,{className:"w-5 h-5"}):b.jsx(BI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(nL,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx(KV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(Im,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(VI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const q9=$.createContext(),$9=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(q9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var jT={},G9="@vercel/analytics",K9="1.6.1",Y9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function AR(){return typeof window<"u"}function IR(){try{const r="production"}catch{}return"production"}function Q9(r="auto"){if(r==="auto"){window.vam=IR();return}window.vam=r}function W9(){return(AR()?window.vam:IR())||"production"}function D0(){return W9()==="development"}function X9(r){return r.scriptSrc?r.scriptSrc:D0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function J9(r={debug:!0}){var e;if(!AR())return;Q9(r.mode),Y9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=X9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=G9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=K9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=D0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},D0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function Z9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function e8(){if(!(typeof process>"u"||typeof jT>"u"))return jT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function t8(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{J9({framework:r.framework||"react",basePath:r.basePath??e8(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&Z9({route:r.route,path:r.path})},[r.route,r.path]),null}function n8(){return b.jsx($9,{children:b.jsxs(tj,{children:[b.jsxs(ck,{children:[b.jsx(Wr,{path:"/login",element:b.jsx(rj,{})}),b.jsx(Wr,{path:"/register",element:b.jsx(sj,{})}),b.jsxs(Wr,{path:"/",element:b.jsx(nj,{}),children:[b.jsx(Wr,{index:!0,element:b.jsx(Bj,{})}),b.jsx(Wr,{path:"scan",element:b.jsx(F9,{})}),b.jsx(Wr,{path:"analyses",element:b.jsx(B9,{})}),b.jsx(Wr,{path:"community",element:b.jsx(w9,{})}),b.jsx(Wr,{path:"chat",element:b.jsx(V9,{})}),b.jsx(Wr,{path:"profile",element:b.jsx(z9,{})}),b.jsx(Wr,{path:"settings",element:b.jsx(H9,{})})]})]}),b.jsx(t8,{})," "]})})}const r8="Plant AI",i8="Welcome to Plant AI",s8="Plant Diagnosis",a8="Community",o8="Profile",l8="Login",c8="Messages",u8="Language",h8="Logout",d8="Dark Mode",f8="Light Mode",m8="My Analyses",g8="Register",p8="Upload Photo",y8="Take Photo",_8="Analyzing...",v8="Diagnosis Results",b8="Treatment",w8="Confidence",x8="Save Changes",E8="Saving...",T8="Display Name",S8="Email",A8="Tap to change avatar",I8="Profile updated successfully!",R8="About Project",C8="Do you know the name of this plant?",N8="e.g., Rose, Tomato, Unknown...",k8="1. Plant Name",D8="2. Capture Photo",O8="Next",M8="I don't know",P8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",V8="Take Close-up Photo",L8="Login to view detailed diagnosis and treatment plan.",j8="Login to View Results",U8="Detailed analysis is available for members only.",z8="AI Powered Plant Doctor",B8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',F8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",H8="Start Diagnosis",q8="Identify",$8="Tell us the plant name or type.",G8="Analyze",K8="Upload photos of the affected area.",Y8="Heal",Q8="Get instant treatment plan.",W8="Welcome, ",X8="Diagnosis failed. Please try again.",J8="Back",Z8="Plant",ez="Tomato",tz="Pepper",nz="Cucumber",rz="Rose",iz="Succulent",sz="Orchid",az="Lemon",oz="Strawberry",lz="Mint",cz="Other",uz="Healthy / No Issue",hz="Yellowing Leaves",dz="Leaf Spots",fz="Wilting",mz="Pests / Bugs",gz="Root/Stem Rot",pz="Mold / Fungus",yz="Unknown / Help Needed",_z="Auto-Detect from Image",vz="Detecting...",bz="Ask Question",wz="Please login to post.",xz="Login Required",Ez="Are you sure you want to delete this post?",Tz="Just now",Sz="Failed to delete post",Az="Failed to post comment",Iz="Failed to update post",Rz="Add a comment...",Cz="Please login to comment.",Nz="No comments yet. Be the first!",kz="Edit Post",Dz="Cancel",Oz="Save",Mz="Gardener",Pz="Community Member",Vz="Send Message",Lz="Starting...",jz="Please login to message users.",Uz="You cannot message yourself.",zz="Failed to start chat.",Bz=" No posts yet",Fz="Be the first to share your garden!",Hz="No results",qz="Like",$z="Comment",Gz="Edit",Kz="Joined",Yz="Unknown Date",Qz="View Profile",Wz="Block User",Xz="Unblock User",Jz="Posts",Zz="Likes",e7="My Posts",t7="{{name}}'s Posts",n7="New Chat",r7="View Analysis Report",i7="Type a message...",s7="POWERED BY GEMINI AI",a7="Heal your plants with",o7="AI Precision",l7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",c7="Instant Analysis",u7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",h7="Smart Interactions",d7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",f7="Verified Treatments",m7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",g7="Your Personal Pocket Botanist",p7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",y7="Open Camera",_7="Select from Gallery",v7="No plant detected. Please ensure the subject is a clear plant or leaf.",b7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",w7="Retry",x7="Camera access denied. Please check your browser permissions.",E7="Last seen",T7="Prevention Tips",S7="This plant may not fully recover, but follow these steps to prevent spread.",A7="Description",I7="Urgency",R7="Spread Risk",C7="New Scan",N7={app_name:r8,welcome:i8,plant_diagnosis:s8,community:a8,profile:o8,login:l8,messages:c8,language:u8,logout:h8,dark_mode:d8,light_mode:f8,analyses:m8,register:g8,upload_photo:p8,take_photo:y8,analyzing:_8,results:v8,treatment:b8,confidence:w8,save_changes:x8,saving:E8,display_name:T8,email:S8,change_avatar:A8,profile_updated:I8,about:R8,what_plant_question:C8,what_plant_placeholder:N8,scan_step_1:k8,scan_step_2:D8,next_step:O8,skip:M8,need_macro_photo:P8,take_macro_photo:V8,login_blur_text:L8,login_to_view:j8,guest_limited:U8,hero_badge:z8,hero_title:B8,hero_desc:F8,start_diagnosis:H8,step_1_title:q8,step_1_desc:$8,step_2_title:G8,step_2_desc:K8,step_3_title:Y8,step_3_desc:Q8,welcome_user:W8,error_diagnosis_failed:X8,back:J8,plant:Z8,plant_tomato:ez,plant_pepper:tz,plant_cucumber:nz,plant_rose:rz,plant_succulent:iz,plant_orchid:sz,plant_lemon:az,plant_strawberry:oz,plant_mint:lz,plant_other:cz,disease_none:uz,disease_yellowing:hz,disease_spots:dz,disease_wilting:fz,disease_bugs:mz,disease_rot:gz,disease_mold:pz,disease_unknown:yz,auto_detect:_z,detecting:vz,ask_question:bz,login_to_post:wz,login_required:xz,confirm_delete_post:Ez,just_now:Tz,failed_delete_post:Sz,failed_post_comment:Az,failed_update_post:Iz,add_comment_placeholder:Rz,login_to_comment:Cz,no_comments_yet:Nz,edit_post:kz,cancel:Dz,save:Oz,gardener:Mz,community_member:Pz,send_message:Vz,starting_chat:Lz,login_to_message:jz,cannot_message_self:Uz,failed_start_chat:zz,no_posts_yet:Bz,be_the_first:Fz,no_results:Hz,like:qz,comment:$z,edit:Gz,delete:"Delete",joined:Kz,unknown_date:Yz,view_profile:Qz,block_user:Wz,unblock_user:Xz,posts:Jz,likes:Zz,my_posts:e7,user_posts_title:t7,new_conversation:n7,view_analysis_report:r7,type_message:i7,ai_powered_v2:s7,hero_title_1:a7,hero_title_highlight:o7,hero_desc_v2:l7,feature_1_title:c7,feature_1_desc:u7,feature_2_title:h7,feature_2_desc:d7,feature_3_title:f7,feature_3_desc:m7,summary_title:g7,summary_desc:p7,open_camera:y7,upload_gallery:_7,error_not_plant:v7,error_server_busy:b7,retry:w7,camera_permission_denied:x7,last_seen:E7,prevention_tips:T7,plant_not_recoverable:S7,description:A7,urgency:I7,spread_risk:R7,new_scan:C7},k7="Bitki AI",D7="Bitki AI'ye Hogeldiniz",O7="Bitki Tehisi",M7="Topluluk",P7="Profil",V7="Giri Yap",L7="Mesajlar",j7="Dil",U7="k Yap",z7="Koyu Tema",B7="Aydnlk Tema",F7="Analizlerim",H7="Kayt Ol",q7="Fotoraf Ykle",$7="Fotoraf ek",G7="Analiz ediliyor...",K7="Bitki",Y7="Domates",Q7="Biber",W7="Salatalk",X7="Patlcan",J7="Patates",Z7="Soan",eB="Sarmsak",tB="Marul",nB="Ispanak",rB="Havu",iB="Fasulye",sB="Msr",aB="Kabak",oB="ilek",lB="Limon",cB="Portakal",uB="Elma",hB="zm",dB="Karpuz",fB="Kavun",mB="Kiraz",gB="eftali",pB="Gl",yB="Orkide",_B="Sukulent",vB="Lale",bB="Ayiei",wB="Papatya",xB="Lavanta",EB="Kakts",TB="Zeytin",SB="am",AB="Palmiye",IB="Nane",RB="Fesleen",CB="Biberiye",NB="Maydanoz",kB="Dier",DB="Salkl / Sorun Yok",OB="Yaprak Sararmas",MB="Yaprak Lekeleri",PB="Solma",VB="Bcek / Haere",LB="Kk/Gvde rmesi",jB="Kf / Mantar",UB="Mildiy",zB="Besin Eksiklii",BB="Bilinmiyor / Yardm Lazm",FB="Fotoraftan Bul",HB="Taranyor...",qB="Bitki Se...",$B="Tehis Sonular",GB="Tedavi",KB="Gven Oran",YB="Deiiklikleri Kaydet",QB="Analizi Kaydet",WB="Kaydedildi",XB="Analiz baaryla kaydedildi!",JB="Bu analiz zaten toplulukla paylald.",ZB="Bu analizi toplulukla paylamak istiyor musunuz?",eF="Baaryla paylald!",tF="Analizlerim",nF="Kaydediliyor...",rF="Grnen sim",iF="E-posta",sF="Fotoraf deitirmek iin dokunun",aF="Profil baaryla gncellendi!",oF="Proje Hakknda",lF="Bu bitkinin adn biliyor musunuz?",cF="rn. Gl, Domates, Bilmiyorum...",uF="1. Bitki Ad",hF="2. Fotoraf ek",dF="Devam Et",fF="Bilmiyorum",mF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",gF="Yakndan ek",pF="Detayl tehis ve tedavi plann grmek iin giri yapn.",yF="Sonucu Grmek in Giri Yap",_F="Detayl analiz sadece yelere zeldir.",vF="Yapay Zeka Destekli Bitki Doktoru",bF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',wF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",xF="Tehise Bala",EF="Tanmla",TF="Bitkinin adn veya trn belirtin.",SF="Analiz Et",AF="Etkilenen blgenin fotorafn ykleyin.",IF="yiletir",RF="Annda tedavi planna kavuun.",CF="Hogeldin, ",NF="Tehis baarsz oldu. Ltfen tekrar deneyin.",kF="Geri",DF="Az nce",OF="Bu gnderiyi silmek istediinize emin misiniz?",MF="Gnderi silinemedi",PF="Yorum gnderilemedi",VF="Gnderi gncellenemedi",LF="Yorum yaz...",jF="Yorum yapmak iin giri yapn.",UF="Henz yorum yok. lk yorumu sen yap!",zF="Gnderiyi Dzenle",BF="ptal",FF="Kaydet",HF="Bahvan",qF="Topluluk yesi",$F="Mesaj Gnder",GF="Balatlyor...",KF="Mesaj gndermek iin giri yapn.",YF="Kendinize mesaj atamazsnz.",QF="Sohbet balatlamad.",WF=" Henz gnderi yok",XF="Baheni paylaan ilk kii ol!",JF="Sonu yok",ZF="Been",eH="Yorum",tH="Dzenle",nH="Ad Soyad",rH="ifre",iH="Toplulua katlmak iin hesap oluturun.",sH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",aH="E-postanz Dorulayn",oH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",lH="E-posta Uygulamasn A",cH="Doruladm, Giri Yap",uH="Zaten hesabnz var m?",hH="Katlma Tarihi",dH="Bilinmiyor",fH="Profili Gr",mH="Kullancy Engelle",gH="Engeli Kaldr",pH="Gnderi",yH="Beeni",_H="Gnderilerim",vH="{{name}} Gnderileri",bH="Yeni Sohbet",wH="Analiz Raporunu Gr",xH="Mesaj yazn...",EH="GEMINI AI DESTEKL",TH="Bitkilerinizi yiletirin",SH="Yapay Zeka Hassasiyeti",AH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",IH="Annda Analiz",RH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",CH="Akll Etkileimler",NH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",kH="Dorulanm Tedaviler",DH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",OH="Kiisel Cep Botanikiniz",MH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",PH="Kameray A",VH="Galeriden Se",LH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",jH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",UH="Tekrar Dene",zH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",BH="Yakn ekim Fotoraf",FH="Bitki AI Dnyor...",HH="Analiz kaydedilemedi:",qH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",$H="Bu cihazda mikrofon bulunamad.",GH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",KH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",YH="Kaydediliyor...",QH="Mesaj dzenleniyor...",WH="Mesajnz dzenleyin...",XH="Tedavi sreci balatld!",JH="Bilgiyi Kaydet",ZH="Tedaviye Bala",eq="Henz Bir Analiz Yok",tq="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",nq="Tedavi & Takip",rq="Kayt",iq="Bu analizi silmek istediinizden emin misiniz?",sq="Gelime Ekle",aq="Paylald",oq="Payla",lq="Toplulukla paylaarak bakalarna yardmc ol!",cq="Soru Sor",uq="Fotoraf",hq="Sesli Mesaj",dq="Son grlme {{days}} gn nce",fq="Son grlme {{hours}} saat nce",mq="Son grlme {{minutes}} dakika nce",gq="Az nce grld",pq="Dzenlendi",yq="Payla",_q="Balanty Kopyala",vq="Balant kopyaland!",bq="Sosyal Medyada Payla",wq="Son grlme",xq="Koruyucu nlemler",Eq="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",Tq="Aklama",Sq="Aciliyet",Aq="Yaylma Riski",Iq="Yeni Tarama",Rq={app_name:k7,welcome:D7,plant_diagnosis:O7,community:M7,profile:P7,login:V7,messages:L7,language:j7,logout:U7,dark_mode:z7,light_mode:B7,analyses:F7,register:H7,upload_photo:q7,take_photo:$7,analyzing:G7,plant:K7,plant_tomato:Y7,plant_pepper:Q7,plant_cucumber:W7,plant_eggplant:X7,plant_potato:J7,plant_onion:Z7,plant_garlic:eB,plant_lettuce:tB,plant_spinach:nB,plant_carrot:rB,plant_bean:iB,plant_corn:sB,plant_zucchini:aB,plant_strawberry:oB,plant_lemon:lB,plant_orange:cB,plant_apple:uB,plant_grape:hB,plant_watermelon:dB,plant_melon:fB,plant_cherry:mB,plant_peach:gB,plant_rose:pB,plant_orchid:yB,plant_succulent:_B,plant_tulip:vB,plant_sunflower:bB,plant_daisy:wB,plant_lavender:xB,plant_cactus:EB,plant_olive:TB,plant_pine:SB,plant_palm:AB,plant_mint:IB,plant_basil:RB,plant_rosemary:CB,plant_parsley:NB,plant_other:kB,disease_none:DB,disease_yellowing:OB,disease_spots:MB,disease_wilting:PB,disease_bugs:VB,disease_rot:LB,disease_mold:jB,disease_mildew:UB,disease_nutrient:zB,disease_unknown:BB,auto_detect:FB,detecting:HB,select_plant:qB,results:$B,treatment:GB,confidence:KB,save_changes:YB,save_analysis:QB,saved:WB,save_success:XB,already_shared:JB,confirm_share:ZB,share_success:eF,my_analyses:tF,saving:nF,display_name:rF,email:iF,change_avatar:sF,profile_updated:aF,about:oF,what_plant_question:lF,what_plant_placeholder:cF,scan_step_1:uF,scan_step_2:hF,next_step:dF,skip:fF,need_macro_photo:mF,take_macro_photo:gF,login_blur_text:pF,login_to_view:yF,guest_limited:_F,hero_badge:vF,hero_title:bF,hero_desc:wF,start_diagnosis:xF,step_1_title:EF,step_1_desc:TF,step_2_title:SF,step_2_desc:AF,step_3_title:IF,step_3_desc:RF,welcome_user:CF,error_diagnosis_failed:NF,back:kF,just_now:DF,confirm_delete_post:OF,failed_delete_post:MF,failed_post_comment:PF,failed_update_post:VF,add_comment_placeholder:LF,login_to_comment:jF,no_comments_yet:UF,edit_post:zF,cancel:BF,save:FF,gardener:HF,community_member:qF,send_message:$F,starting_chat:GF,login_to_message:KF,cannot_message_self:YF,failed_start_chat:QF,no_posts_yet:WF,be_the_first:XF,no_results:JF,like:ZF,comment:eH,edit:tH,delete:"Sil",full_name:nH,password:rH,create_account_desc:iH,verification_email_sent:sH,verify_email_title:aH,verify_email_desc:oH,open_email_app:lH,i_verified_it:cH,already_have_account:uH,joined:hH,unknown_date:dH,view_profile:fH,block_user:mH,unblock_user:gH,posts:pH,likes:yH,my_posts:_H,user_posts_title:vH,new_conversation:bH,view_analysis_report:wH,type_message:xH,ai_powered_v2:EH,hero_title_1:TH,hero_title_highlight:SH,hero_desc_v2:AH,feature_1_title:IH,feature_1_desc:RH,feature_2_title:CH,feature_2_desc:NH,feature_3_title:kH,feature_3_desc:DH,summary_title:OH,summary_desc:MH,open_camera:PH,upload_gallery:VH,error_not_plant:LH,error_server_busy:jH,retry:UH,camera_permission_denied:zH,close_up_photo:BH,ai_thinking:FH,save_fail:HH,mic_access_denied:qH,mic_not_found:$H,mic_unavailable:GH,mic_generic_error:KH,recording:YH,editing_message:QH,edit_message_placeholder:WH,treatment_started:XH,save_info:JH,start_treatment:ZH,no_analyses_title:eq,no_analyses_desc:tq,treatment_updates:nq,records:rq,confirm_delete:iq,add_update:sq,shared:aq,share:oq,share_help_others:lq,ask_question:cq,photo:uq,voice_message:hq,last_seen_day:dq,last_seen_hour:fq,last_seen_min:mq,last_seen_just_now:gq,edited:pq,share_title:yq,copy_link:_q,link_copied:vq,social_share:bq,last_seen:wq,prevention_tips:xq,plant_not_recoverable:Eq,description:Tq,urgency:Sq,spread_risk:Aq,new_scan:Iq};Qn.use(vD).init({resources:{en:{translation:N7},tr:{translation:Rq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});mN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(HI,{children:b.jsx(Dk,{children:b.jsx(NV,{children:b.jsx(n8,{})})})})}));
