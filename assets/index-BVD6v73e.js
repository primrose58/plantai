(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function YC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var oy={exports:{}},bu={};var yw;function QC(){if(yw)return bu;yw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return bu.Fragment=e,bu.jsx=t,bu.jsxs=t,bu}var _w;function WC(){return _w||(_w=1,oy.exports=QC()),oy.exports}var b=WC(),ly={exports:{}},ze={};var vw;function XC(){if(vw)return ze;vw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function V(F,Y,re){this.props=F,this.context=Y,this.refs=O,this.updater=re||E}V.prototype.isReactComponent={},V.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=V.prototype;function U(F,Y,re){this.props=F,this.context=Y,this.refs=O,this.updater=re||E}var H=U.prototype=new q;H.constructor=U,k(H,V.prototype),H.isPureReactComponent=!0;var K=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function T(F,Y,re){var ie=re.ref;return{$$typeof:r,type:F,key:Y,ref:ie!==void 0?ie:null,props:re}}function R(F,Y){return T(F.type,Y,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function j(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(re){return Y[re]})}var C=/\/+/g;function G(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?j(""+F.key):Y.toString(36)}function J(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(z,z):(F.status="pending",F.then(function(Y){F.status==="pending"&&(F.status="fulfilled",F.value=Y)},function(Y){F.status==="pending"&&(F.status="rejected",F.reason=Y)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function P(F,Y,re,ie,ne){var _e=typeof F;(_e==="undefined"||_e==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(_e){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case r:case e:Ae=!0;break;case g:return Ae=F._init,P(Ae(F._payload),Y,re,ie,ne)}}if(Ae)return ne=ne(F),Ae=ie===""?"."+G(F,0):ie,K(ne)?(re="",Ae!=null&&(re=Ae.replace(C,"$&/")+"/"),P(ne,Y,re,"",function(Ze){return Ze})):ne!=null&&(N(ne)&&(ne=R(ne,re+(ne.key==null||F&&F.key===ne.key?"":(""+ne.key).replace(C,"$&/")+"/")+Ae)),Y.push(ne)),1;Ae=0;var Pe=ie===""?".":ie+":";if(K(F))for(var Ce=0;Ce<F.length;Ce++)ie=F[Ce],_e=Pe+G(ie,Ce),Ae+=P(ie,Y,re,_e,ne);else if(Ce=w(F),typeof Ce=="function")for(F=Ce.call(F),Ce=0;!(ie=F.next()).done;)ie=ie.value,_e=Pe+G(ie,Ce++),Ae+=P(ie,Y,re,_e,ne);else if(_e==="object"){if(typeof F.then=="function")return P(J(F),Y,re,ie,ne);throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function D(F,Y,re){if(F==null)return F;var ie=[],ne=0;return P(F,ie,"","",function(_e){return Y.call(re,_e,ne++)}),ie}function Z(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(re){(F._status===0||F._status===-1)&&(F._status=1,F._result=re)},function(re){(F._status===0||F._status===-1)&&(F._status=2,F._result=re)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ee={map:D,forEach:function(F,Y,re){D(F,function(){Y.apply(this,arguments)},re)},count:function(F){var Y=0;return D(F,function(){Y++}),Y},toArray:function(F){return D(F,function(Y){return Y})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ze.Activity=y,ze.Children=ee,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=U,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},ze.cache=function(F){return function(){return F.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(F,Y,re){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ie=k({},F.props),ne=F.key;if(Y!=null)for(_e in Y.key!==void 0&&(ne=""+Y.key),Y)!S.call(Y,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Y.ref===void 0||(ie[_e]=Y[_e]);var _e=arguments.length-2;if(_e===1)ie.children=re;else if(1<_e){for(var Ae=Array(_e),Pe=0;Pe<_e;Pe++)Ae[Pe]=arguments[Pe+2];ie.children=Ae}return T(F.type,ne,ie)},ze.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},ze.createElement=function(F,Y,re){var ie,ne={},_e=null;if(Y!=null)for(ie in Y.key!==void 0&&(_e=""+Y.key),Y)S.call(Y,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ne[ie]=Y[ie]);var Ae=arguments.length-2;if(Ae===1)ne.children=re;else if(1<Ae){for(var Pe=Array(Ae),Ce=0;Ce<Ae;Ce++)Pe[Ce]=arguments[Ce+2];ne.children=Pe}if(F&&F.defaultProps)for(ie in Ae=F.defaultProps,Ae)ne[ie]===void 0&&(ne[ie]=Ae[ie]);return T(F,_e,ne)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(F){return{$$typeof:u,render:F}},ze.isValidElement=N,ze.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:Z}},ze.memo=function(F,Y){return{$$typeof:f,type:F,compare:Y===void 0?null:Y}},ze.startTransition=function(F){var Y=M.T,re={};M.T=re;try{var ie=F(),ne=M.S;ne!==null&&ne(re,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(z,W)}catch(_e){W(_e)}finally{Y!==null&&re.types!==null&&(Y.types=re.types),M.T=Y}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(F){return M.H.use(F)},ze.useActionState=function(F,Y,re){return M.H.useActionState(F,Y,re)},ze.useCallback=function(F,Y){return M.H.useCallback(F,Y)},ze.useContext=function(F){return M.H.useContext(F)},ze.useDebugValue=function(){},ze.useDeferredValue=function(F,Y){return M.H.useDeferredValue(F,Y)},ze.useEffect=function(F,Y){return M.H.useEffect(F,Y)},ze.useEffectEvent=function(F){return M.H.useEffectEvent(F)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(F,Y,re){return M.H.useImperativeHandle(F,Y,re)},ze.useInsertionEffect=function(F,Y){return M.H.useInsertionEffect(F,Y)},ze.useLayoutEffect=function(F,Y){return M.H.useLayoutEffect(F,Y)},ze.useMemo=function(F,Y){return M.H.useMemo(F,Y)},ze.useOptimistic=function(F,Y){return M.H.useOptimistic(F,Y)},ze.useReducer=function(F,Y,re){return M.H.useReducer(F,Y,re)},ze.useRef=function(F){return M.H.useRef(F)},ze.useState=function(F){return M.H.useState(F)},ze.useSyncExternalStore=function(F,Y,re){return M.H.useSyncExternalStore(F,Y,re)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.2.3",ze}var bw;function Im(){return bw||(bw=1,ly.exports=XC()),ly.exports}var $=Im();const JC=YC($);var cy={exports:{}},wu={},uy={exports:{}},hy={};var ww;function ZC(){return ww||(ww=1,(function(r){function e(P,D){var Z=P.length;P.push(D);e:for(;0<Z;){var W=Z-1>>>1,ee=P[W];if(0<s(ee,D))P[W]=D,P[Z]=ee,Z=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var D=P[0],Z=P.pop();if(Z!==D){P[0]=Z;e:for(var W=0,ee=P.length,F=ee>>>1;W<F;){var Y=2*(W+1)-1,re=P[Y],ie=Y+1,ne=P[ie];if(0>s(re,Z))ie<ee&&0>s(ne,re)?(P[W]=ne,P[ie]=Z,W=ie):(P[W]=re,P[Y]=Z,W=Y);else if(ie<ee&&0>s(ne,Z))P[W]=ne,P[ie]=Z,W=ie;else break e}}return D}function s(P,D){var Z=P.sortIndex-D.sortIndex;return Z!==0?Z:P.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,E=!1,k=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function H(P){for(var D=t(f);D!==null;){if(D.callback===null)n(f);else if(D.startTime<=P)n(f),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(f)}}function K(P){if(k=!1,H(P),!E)if(t(d)!==null)E=!0,z||(z=!0,j());else{var D=t(f);D!==null&&J(K,D.startTime-P)}}var z=!1,M=-1,S=5,T=-1;function R(){return O?!0:!(r.unstable_now()-T<S)}function N(){if(O=!1,z){var P=r.unstable_now();T=P;var D=!0;try{e:{E=!1,k&&(k=!1,q(M),M=-1),w=!0;var Z=v;try{t:{for(H(P),y=t(d);y!==null&&!(y.expirationTime>P&&R());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var ee=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof ee=="function"){y.callback=ee,H(P),D=!0;break t}y===t(d)&&n(d),H(P)}else n(d);y=t(d)}if(y!==null)D=!0;else{var F=t(f);F!==null&&J(K,F.startTime-P),D=!1}}break e}finally{y=null,v=Z,w=!1}D=void 0}}finally{D?j():z=!1}}}var j;if(typeof U=="function")j=function(){U(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,G=C.port2;C.port1.onmessage=N,j=function(){G.postMessage(null)}}else j=function(){V(N,0)};function J(P,D){M=V(function(){P(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var Z=v;v=D;try{return P()}finally{v=Z}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=v;v=P;try{return D()}finally{v=Z}},r.unstable_scheduleCallback=function(P,D,Z){var W=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?W+Z:W):Z=W,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Z+ee,P={id:g++,callback:D,priorityLevel:P,startTime:Z,expirationTime:ee,sortIndex:-1},Z>W?(P.sortIndex=Z,e(f,P),t(d)===null&&P===t(f)&&(k?(q(M),M=-1):k=!0,J(K,Z-W))):(P.sortIndex=ee,e(d,P),E||w||(E=!0,z||(z=!0,j()))),P},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(P){var D=v;return function(){var Z=v;v=D;try{return P.apply(this,arguments)}finally{v=Z}}}})(hy)),hy}var xw;function eN(){return xw||(xw=1,uy.exports=ZC()),uy.exports}var dy={exports:{}},On={};var Ew;function tN(){if(Ew)return On;Ew=1;var r=Im();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Tw;function nN(){if(Tw)return dy.exports;Tw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dy.exports=tN(),dy.exports}var Sw;function rN(){if(Sw)return wu;Sw=1;var r=eN(),e=Im(),t=nN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,L=p.child;L;){if(L===l){A=!0,l=p,h=_;break}if(L===h){A=!0,h=p,l=_;break}L=L.sibling}if(!A){for(L=_.child;L;){if(L===l){A=!0,l=_,h=p;break}if(L===h){A=!0,h=_,l=p;break}L=L.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case V:return"Profiler";case O:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case T:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case U:return i.displayName||"Context";case q:return(i._context.displayName||"Context")+".Consumer";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var J=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function F(i){return{current:i}}function Y(i){0>ee||(i.current=W[ee],W[ee]=null,ee--)}function re(i,a){ee++,W[ee]=i.current,i.current=a}var ie=F(null),ne=F(null),_e=F(null),Ae=F(null);function Pe(i,a){switch(re(_e,a),re(ne,i),re(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?z1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=z1(a),i=B1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(ie),re(ie,i)}function Ce(){Y(ie),Y(ne),Y(_e)}function Ze(i){i.memoizedState!==null&&re(Ae,i);var a=ie.current,l=B1(a,i.type);a!==l&&(re(ne,i),re(ie,l))}function st(i){ne.current===i&&(Y(ie),Y(ne)),Ae.current===i&&(Y(Ae),pu._currentValue=Z)}var at,un;function Rt(i){if(at===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);at=a&&a[1]||"",un=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+i+un}var mt=!1;function Ct(i,a){if(!i||mt)return"";mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],L=_[1];if(A&&L){var Q=A.split(`
`),le=L.split(`
`);for(p=h=0;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Q.length||p===le.length)for(h=Q.length-1,p=le.length-1;1<=h&&0<=p&&Q[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Q[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Q[h]!==le[p]){var de=`
`+Q[h].replace(" at new "," at ");return i.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",i.displayName)),de}while(1<=h&&0<=p);break}}}finally{mt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Rt(l):""}function rt(i,a){switch(i.tag){case 26:case 27:case 5:return Rt(i.type);case 16:return Rt("Lazy");case 13:return i.child!==a&&a!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return Rt("Activity");default:return""}}function it(i){try{var a="",l=null;do a+=rt(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var qe=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Oe=r.unstable_requestPaint,xe=r.unstable_now,et=r.unstable_getCurrentPriorityLevel,gt=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,ct=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,zt=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Gt=null,Et=null;function Jt(i){if(typeof kn=="function"&&wn(i),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Gt,i)}catch{}}var kt=Math.clz32?Math.clz32:Ca,Yo=Math.log,oi=Math.LN2;function Ca(i){return i>>>=0,i===0?32:31-(Yo(i)/oi|0)|0}var Dn=256,qi=262144,pt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=h&134217727;return L!==0?(h=L&~_,h!==0?p=hn(h):(A&=L,A!==0?p=hn(A):l||(l=L&~i,l!==0&&(p=hn(l))))):(L=h&~_,L!==0?p=hn(L):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Qo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(){var i=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),i}function gn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Na(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function dg(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var L=i.entanglements,Q=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var de=31-kt(l),ge=1<<de;L[de]=0,Q[de]=-1;var ce=le[de];if(ce!==null)for(le[de]=null,de=0;de<ce.length;de++){var he=ce[de];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&ka(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function ka(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function wc(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-kt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function xc(i,a){var l=a&-a;return l=(l&42)!==0?1:Da(l),(l&(i.suspendedLanes|a))!==0?0:l}function Da(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Vh(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:uw(i.type))}function Br(i,a){var l=D.p;try{return D.p=i,a()}finally{D.p=l}}var Fr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Fr,pn="__reactProps$"+Fr,li="__reactContainer$"+Fr,Wo="__reactEvents$"+Fr,fg="__reactListeners$"+Fr,Lh="__reactHandles$"+Fr,Uh="__reactResources$"+Fr,ci="__reactMarker$"+Fr;function Xo(i){delete i[Zt],delete i[pn],delete i[Wo],delete i[fg],delete i[Lh]}function ui(i){var a=i[Zt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[li]||l[Zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Y1(i);i!==null;){if(l=i[Zt])return l;i=Y1(i)}return a}i=l,l=i.parentNode}return null}function wr(i){if(i=i[Zt]||i[li]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ar(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function hi(i){var a=i[Uh];return a||(a=i[Uh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function en(i){i[ci]=!0}var Ec=new Set,Tc={};function di(i,a){fi(i,a),fi(i+"Capture",a)}function fi(i,a){for(Tc[i]=a,i=0;i<a.length;i++)Ec.add(a[i])}var Sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ac={},Ic={};function zh(i){return qe.call(Ic,i)?!0:qe.call(Ac,i)?!1:Sc.test(i)?Ic[i]=!0:(Ac[i]=!0,!1)}function Jo(i,a,l){if(zh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function or(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function tn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Is(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Rc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function yt(i){if(!i._valueTracker){var a=Is(i)?"checked":"value";i._valueTracker=Rc(i,a,""+i[a])}}function Oa(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Is(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ma=/[\n"\\]/g;function Wn(i){return i.replace(Ma,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zo(i,a,l,h,p,_,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+yn(a)):i.value!==""+yn(a)&&(i.value=""+yn(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Cc(i,A,yn(a)):l!=null?Cc(i,A,yn(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+yn(L):i.removeAttribute("name")}function Bh(i,a,l,h,p,_,A,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){yt(i);return}l=l!=null?""+yn(l):"",a=a!=null?""+yn(a):l,L||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=L?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),yt(i)}function Cc(i,a,l){a==="number"&&mi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Rs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+yn(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Fh(i,a,l){if(a!=null&&(a=""+yn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+yn(l):""}function Cs(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(J(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=yn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),yt(i)}function Xn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Hh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Hh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function kc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Nc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Nc(i,_,a[_])}function el(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(i){return Ns.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Hr(){}var Dc=null;function xr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ks=null,gi=null;function Pa(i){var a=wr(i);if(a&&(i=a.stateNode)){var l=i[pn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Zo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[pn]||null;if(!p)throw Error(n(90));Zo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Oa(h)}break e;case"textarea":Fh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Rs(i,!!l.multiple,a,!1)}}}var nl=!1;function Ds(i,a,l){if(nl)return i(a,l);nl=!0;try{var h=i(a);return h}finally{if(nl=!1,(ks!==null||gi!==null)&&(Vd(),ks&&(a=ks,i=gi,gi=ks=null,Pa(a),i)))for(a=0;a<i.length;a++)Pa(i[a])}}function qr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[pn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(Er)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){ja=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{ja=!1}var pi=null,Oc=null,Va=null;function Mc(){if(Va)return Va;var i,a=Oc,l=a.length,h,p="value"in pi?pi.value:pi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return Va=p.slice(i,1<h?1-h:void 0)}function La(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function $r(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:$r,this.isPropagationStopped=$r,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=Tn(Ki),Os=y({},Ki,{view:0,detail:0}),Pc=Tn(Os),Ms,rl,_i,il=y({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_i&&(_i&&i.type==="mousemove"?(Ms=i.screenX-_i.screenX,rl=i.screenY-_i.screenY):rl=Ms=0,_i=i),Ms)},movementY:function(i){return"movementY"in i?i.movementY:rl}}),jc=Tn(il),Ua=y({},il,{dataTransfer:0}),$h=Tn(Ua),Gh=y({},Os,{relatedTarget:0}),za=Tn(Gh),Vc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Kh=Tn(Vc),sl=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Yh=Tn(sl),Qh=y({},Ki,{data:0}),vi=Tn(Qh),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Jh[i])?!!a[i]:!1}function Ps(){return Zh}var Hn=y({},Os,{key:function(i){if(i.key){var a=Wh[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=La(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(i){return i.type==="keypress"?La(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?La(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ed=Tn(Hn),td=y({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Tn(td),m=y({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),x=Tn(m),I=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=Tn(I),ae=y({},il,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),ve=y({},Ki,{newState:0,oldState:0}),Fe=Tn(ve),Kt=[9,13,27,32],ut=Er&&"CompositionEvent"in window,Mt=null;Er&&"documentMode"in document&&(Mt=document.documentMode);var Tr=Er&&"TextEvent"in window&&!Mt,bi=Er&&(!ut||Mt&&8<Mt&&11>=Mt),Gr=" ",Kr=!1;function Ba(i,a){switch(i){case"keyup":return Kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function al(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ol=!1;function _R(i,a){switch(i){case"compositionend":return al(a);case"keypress":return a.which!==32?null:(Kr=!0,Gr);case"textInput":return i=a.data,i===Gr&&Kr?null:i;default:return null}}function vR(i,a){if(ol)return i==="compositionend"||!ut&&Ba(i,a)?(i=Mc(),Va=Oc=pi=null,ol=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bi&&a.locale!=="ko"?null:a.data;default:return null}}var bR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!bR[i.type]:a==="textarea"}function J_(i,a,l,h){ks?gi?gi.push(h):gi=[h]:ks=h,a=qd(a,"onChange"),0<a.length&&(l=new yi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Lc=null,Uc=null;function wR(i){M1(i,0)}function nd(i){var a=ar(i);if(Oa(a))return i}function Z_(i,a){if(i==="change")return a}var ev=!1;if(Er){var mg;if(Er){var gg="oninput"in document;if(!gg){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),gg=typeof tv.oninput=="function"}mg=gg}else mg=!1;ev=mg&&(!document.documentMode||9<document.documentMode)}function nv(){Lc&&(Lc.detachEvent("onpropertychange",rv),Uc=Lc=null)}function rv(i){if(i.propertyName==="value"&&nd(Uc)){var a=[];J_(a,Uc,i,xr(i)),Ds(wR,a)}}function xR(i,a,l){i==="focusin"?(nv(),Lc=a,Uc=l,Lc.attachEvent("onpropertychange",rv)):i==="focusout"&&nv()}function ER(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nd(Uc)}function TR(i,a){if(i==="click")return nd(a)}function SR(i,a){if(i==="input"||i==="change")return nd(a)}function AR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var lr=typeof Object.is=="function"?Object.is:AR;function zc(i,a){if(lr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!qe.call(a,p)||!lr(i[p],a[p]))return!1}return!0}function iv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sv(i,a){var l=iv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=iv(l)}}function av(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?av(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ov(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=mi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=mi(i.document)}return a}function pg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var IR=Er&&"documentMode"in document&&11>=document.documentMode,ll=null,yg=null,Bc=null,_g=!1;function lv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_g||ll==null||ll!==mi(h)||(h=ll,"selectionStart"in h&&pg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Bc&&zc(Bc,h)||(Bc=h,h=qd(yg,"onSelect"),0<h.length&&(a=new yi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ll)))}function Fa(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var cl={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},vg={},cv={};Er&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Ha(i){if(vg[i])return vg[i];if(!cl[i])return i;var a=cl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in cv)return vg[i]=a[l];return i}var uv=Ha("animationend"),hv=Ha("animationiteration"),dv=Ha("animationstart"),RR=Ha("transitionrun"),CR=Ha("transitionstart"),NR=Ha("transitioncancel"),fv=Ha("transitionend"),mv=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Yr(i,a){mv.set(i,a),di(a,[i])}var rd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Sr=[],ul=0,wg=0;function id(){for(var i=ul,a=wg=ul=0;a<i;){var l=Sr[a];Sr[a++]=null;var h=Sr[a];Sr[a++]=null;var p=Sr[a];Sr[a++]=null;var _=Sr[a];if(Sr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&gv(l,p,_)}}function sd(i,a,l,h){Sr[ul++]=i,Sr[ul++]=a,Sr[ul++]=l,Sr[ul++]=h,wg|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function xg(i,a,l,h){return sd(i,a,l,h),ad(i)}function qa(i,a){return sd(i,null,null,a),ad(i)}function gv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-kt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function ad(i){if(50<cu)throw cu=0,kp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var hl={};function kR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(i,a,l,h){return new kR(i,a,l,h)}function Eg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=cr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function pv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function od(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Eg(i)&&(A=1);else if(typeof i=="string")A=jC(i,l,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case T:return i=cr(31,l,a,p),i.elementType=T,i.lanes=_,i;case k:return $a(l.children,p,_,a);case O:A=8,p|=24;break;case V:return i=cr(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case K:return i=cr(13,l,a,p),i.elementType=K,i.lanes=_,i;case z:return i=cr(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:A=10;break e;case q:A=9;break e;case H:A=11;break e;case M:A=14;break e;case S:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=cr(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function $a(i,a,l,h){return i=cr(7,i,h,a),i.lanes=l,i}function Tg(i,a,l){return i=cr(6,i,null,a),i.lanes=l,i}function yv(i){var a=cr(18,null,null,0);return a.stateNode=i,a}function Sg(i,a,l){return a=cr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var _v=new WeakMap;function Ar(i,a){if(typeof i=="object"&&i!==null){var l=_v.get(i);return l!==void 0?l:(a={value:i,source:a,stack:it(a)},_v.set(i,a),a)}return{value:i,source:a,stack:it(a)}}var dl=[],fl=0,ld=null,Fc=0,Ir=[],Rr=0,js=null,wi=1,xi="";function Wi(i,a){dl[fl++]=Fc,dl[fl++]=ld,ld=i,Fc=a}function vv(i,a,l){Ir[Rr++]=wi,Ir[Rr++]=xi,Ir[Rr++]=js,js=i;var h=wi;i=xi;var p=32-kt(h)-1;h&=~(1<<p),l+=1;var _=32-kt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,wi=1<<32-kt(a)+p|l<<p|h,xi=_+i}else wi=1<<_|l<<p|h,xi=i}function Ag(i){i.return!==null&&(Wi(i,1),vv(i,1,0))}function Ig(i){for(;i===ld;)ld=dl[--fl],dl[fl]=null,Fc=dl[--fl],dl[fl]=null;for(;i===js;)js=Ir[--Rr],Ir[Rr]=null,xi=Ir[--Rr],Ir[Rr]=null,wi=Ir[--Rr],Ir[Rr]=null}function bv(i,a){Ir[Rr++]=wi,Ir[Rr++]=xi,Ir[Rr++]=js,wi=a.id,xi=a.overflow,js=i}var Sn=null,Dt=null,tt=!1,Vs=null,Cr=!1,Rg=Error(n(519));function Ls(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hc(Ar(a,i)),Rg}function wv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Zt]=i,a[pn]=h,l){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(l=0;l<hu.length;l++)Ye(hu[l],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),Bh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),Cs(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||L1(a.textContent,l)?(h.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),h.onScroll!=null&&Ye("scroll",a),h.onScrollEnd!=null&&Ye("scrollend",a),h.onClick!=null&&(a.onclick=Hr),a=!0):a=!1,a||Ls(i,!0)}function xv(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:Sn=Sn.return}}function ml(i){if(i!==Sn)return!1;if(!tt)return xv(i),tt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Gp(i.type,i.memoizedProps)),l=!l),l&&Dt&&Ls(i),xv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=K1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=K1(i)}else a===27?(a=Dt,Js(i.type)?(i=Xp,Xp=null,Dt=i):Dt=a):Dt=Sn?kr(i.stateNode.nextSibling):null;return!0}function Ga(){Dt=Sn=null,tt=!1}function Cg(){var i=Vs;return i!==null&&(nr===null?nr=i:nr.push.apply(nr,i),Vs=null),i}function Hc(i){Vs===null?Vs=[i]:Vs.push(i)}var Ng=F(null),Ka=null,Xi=null;function Us(i,a,l){re(Ng,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=Ng.current,Y(Ng)}function kg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Dg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=p;for(var Q=0;Q<a.length;Q++)if(L.context===a[Q]){_.lanes|=l,L=_.alternate,L!==null&&(L.lanes|=l),kg(_.return,l,i),h||(A=null);break e}_=L.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),kg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function gl(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var L=p.type;lr(p.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(p===Ae.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(pu):i=[pu])}p=p.return}i!==null&&Dg(a,i,l,h),a.flags|=262144}function cd(i){for(i=i.firstContext;i!==null;){if(!lr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ya(i){Ka=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return Ev(Ka,i)}function ud(i,a){return Ka===null&&Ya(i),Ev(i,a)}function Ev(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var DR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},OR=r.unstable_scheduleCallback,MR=r.unstable_NormalPriority,nn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Og(){return{controller:new DR,data:new Map,refCount:0}}function qc(i){i.refCount--,i.refCount===0&&OR(MR,function(){i.controller.abort()})}var $c=null,Mg=0,pl=0,yl=null;function PR(i,a){if($c===null){var l=$c=[];Mg=0,pl=Vp(),yl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Mg++,a.then(Tv,Tv),a}function Tv(){if(--Mg===0&&$c!==null){yl!==null&&(yl.status="fulfilled");var i=$c;$c=null,pl=0,yl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function jR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var Sv=P.S;P.S=function(i,a){l1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&PR(i,a),Sv!==null&&Sv(i,a)};var Qa=F(null);function Pg(){var i=Qa.current;return i!==null?i:Nt.pooledCache}function hd(i,a){a===null?re(Qa,Qa.current):re(Qa,a.pool)}function Av(){var i=Pg();return i===null?null:{parent:nn._currentValue,pool:i}}var _l=Error(n(460)),jg=Error(n(474)),dd=Error(n(542)),fd={then:function(){}};function Iv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Hr,Hr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Nv(i),i;default:if(typeof a.status=="string")a.then(Hr,Hr);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Nv(i),i}throw Xa=a,_l}}function Wa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Xa=l,_l):l}}var Xa=null;function Cv(){if(Xa===null)throw Error(n(459));var i=Xa;return Xa=null,i}function Nv(i){if(i===_l||i===dd)throw Error(n(483))}var vl=null,Gc=0;function md(i){var a=Gc;return Gc+=1,vl===null&&(vl=[]),Rv(vl,i,a)}function Kc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function gd(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function kv(i){function a(te,X){if(i){var oe=te.deletions;oe===null?(te.deletions=[X],te.flags|=16):oe.push(X)}}function l(te,X){if(!i)return null;for(;X!==null;)a(te,X),X=X.sibling;return null}function h(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function p(te,X){return te=Qi(te,X),te.index=0,te.sibling=null,te}function _(te,X,oe){return te.index=oe,i?(oe=te.alternate,oe!==null?(oe=oe.index,oe<X?(te.flags|=67108866,X):oe):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function A(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function L(te,X,oe,me){return X===null||X.tag!==6?(X=Tg(oe,te.mode,me),X.return=te,X):(X=p(X,oe),X.return=te,X)}function Q(te,X,oe,me){var Ne=oe.type;return Ne===k?de(te,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Wa(Ne)===X.type)?(X=p(X,oe.props),Kc(X,oe),X.return=te,X):(X=od(oe.type,oe.key,oe.props,null,te.mode,me),Kc(X,oe),X.return=te,X)}function le(te,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=Sg(oe,te.mode,me),X.return=te,X):(X=p(X,oe.children||[]),X.return=te,X)}function de(te,X,oe,me,Ne){return X===null||X.tag!==7?(X=$a(oe,te.mode,me,Ne),X.return=te,X):(X=p(X,oe),X.return=te,X)}function ge(te,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Tg(""+X,te.mode,oe),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=od(X.type,X.key,X.props,null,te.mode,oe),Kc(oe,X),oe.return=te,oe;case E:return X=Sg(X,te.mode,oe),X.return=te,X;case S:return X=Wa(X),ge(te,X,oe)}if(J(X)||j(X))return X=$a(X,te.mode,oe,null),X.return=te,X;if(typeof X.then=="function")return ge(te,md(X),oe);if(X.$$typeof===U)return ge(te,ud(te,X),oe);gd(te,X)}return null}function ce(te,X,oe,me){var Ne=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ne!==null?null:L(te,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ne?Q(te,X,oe,me):null;case E:return oe.key===Ne?le(te,X,oe,me):null;case S:return oe=Wa(oe),ce(te,X,oe,me)}if(J(oe)||j(oe))return Ne!==null?null:de(te,X,oe,me,null);if(typeof oe.then=="function")return ce(te,X,md(oe),me);if(oe.$$typeof===U)return ce(te,X,ud(te,oe),me);gd(te,oe)}return null}function he(te,X,oe,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(oe)||null,L(X,te,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?oe:me.key)||null,Q(X,te,me,Ne);case E:return te=te.get(me.key===null?oe:me.key)||null,le(X,te,me,Ne);case S:return me=Wa(me),he(te,X,oe,me,Ne)}if(J(me)||j(me))return te=te.get(oe)||null,de(X,te,me,Ne,null);if(typeof me.then=="function")return he(te,X,oe,md(me),Ne);if(me.$$typeof===U)return he(te,X,oe,ud(X,me),Ne);gd(X,me)}return null}function Te(te,X,oe,me){for(var Ne=null,ot=null,Ie=X,$e=X=0,We=null;Ie!==null&&$e<oe.length;$e++){Ie.index>$e?(We=Ie,Ie=null):We=Ie.sibling;var lt=ce(te,Ie,oe[$e],me);if(lt===null){Ie===null&&(Ie=We);break}i&&Ie&&lt.alternate===null&&a(te,Ie),X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt,Ie=We}if($e===oe.length)return l(te,Ie),tt&&Wi(te,$e),Ne;if(Ie===null){for(;$e<oe.length;$e++)Ie=ge(te,oe[$e],me),Ie!==null&&(X=_(Ie,X,$e),ot===null?Ne=Ie:ot.sibling=Ie,ot=Ie);return tt&&Wi(te,$e),Ne}for(Ie=h(Ie);$e<oe.length;$e++)We=he(Ie,te,$e,oe[$e],me),We!==null&&(i&&We.alternate!==null&&Ie.delete(We.key===null?$e:We.key),X=_(We,X,$e),ot===null?Ne=We:ot.sibling=We,ot=We);return i&&Ie.forEach(function(ra){return a(te,ra)}),tt&&Wi(te,$e),Ne}function Me(te,X,oe,me){if(oe==null)throw Error(n(151));for(var Ne=null,ot=null,Ie=X,$e=X=0,We=null,lt=oe.next();Ie!==null&&!lt.done;$e++,lt=oe.next()){Ie.index>$e?(We=Ie,Ie=null):We=Ie.sibling;var ra=ce(te,Ie,lt.value,me);if(ra===null){Ie===null&&(Ie=We);break}i&&Ie&&ra.alternate===null&&a(te,Ie),X=_(ra,X,$e),ot===null?Ne=ra:ot.sibling=ra,ot=ra,Ie=We}if(lt.done)return l(te,Ie),tt&&Wi(te,$e),Ne;if(Ie===null){for(;!lt.done;$e++,lt=oe.next())lt=ge(te,lt.value,me),lt!==null&&(X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return tt&&Wi(te,$e),Ne}for(Ie=h(Ie);!lt.done;$e++,lt=oe.next())lt=he(Ie,te,$e,lt.value,me),lt!==null&&(i&&lt.alternate!==null&&Ie.delete(lt.key===null?$e:lt.key),X=_(lt,X,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return i&&Ie.forEach(function(KC){return a(te,KC)}),tt&&Wi(te,$e),Ne}function It(te,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===k&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ne=oe.key;X!==null;){if(X.key===Ne){if(Ne=oe.type,Ne===k){if(X.tag===7){l(te,X.sibling),me=p(X,oe.props.children),me.return=te,te=me;break e}}else if(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Wa(Ne)===X.type){l(te,X.sibling),me=p(X,oe.props),Kc(me,oe),me.return=te,te=me;break e}l(te,X);break}else a(te,X);X=X.sibling}oe.type===k?(me=$a(oe.props.children,te.mode,me,oe.key),me.return=te,te=me):(me=od(oe.type,oe.key,oe.props,null,te.mode,me),Kc(me,oe),me.return=te,te=me)}return A(te);case E:e:{for(Ne=oe.key;X!==null;){if(X.key===Ne)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(te,X.sibling),me=p(X,oe.children||[]),me.return=te,te=me;break e}else{l(te,X);break}else a(te,X);X=X.sibling}me=Sg(oe,te.mode,me),me.return=te,te=me}return A(te);case S:return oe=Wa(oe),It(te,X,oe,me)}if(J(oe))return Te(te,X,oe,me);if(j(oe)){if(Ne=j(oe),typeof Ne!="function")throw Error(n(150));return oe=Ne.call(oe),Me(te,X,oe,me)}if(typeof oe.then=="function")return It(te,X,md(oe),me);if(oe.$$typeof===U)return It(te,X,ud(te,oe),me);gd(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(te,X.sibling),me=p(X,oe),me.return=te,te=me):(l(te,X),me=Tg(oe,te.mode,me),me.return=te,te=me),A(te)):l(te,X)}return function(te,X,oe,me){try{Gc=0;var Ne=It(te,X,oe,me);return vl=null,Ne}catch(Ie){if(Ie===_l||Ie===dd)throw Ie;var ot=cr(29,Ie,null,te.mode);return ot.lanes=me,ot.return=te,ot}finally{}}}var Ja=kv(!0),Dv=kv(!1),zs=!1;function Vg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Bs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Fs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ht&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=ad(i),gv(i,null,l),a}return sd(i,h,a,l),ad(i)}function Yc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,wc(i,l)}}function Ug(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var zg=!1;function Qc(){if(zg){var i=yl;if(i!==null)throw i}}function Wc(i,a,l,h){zg=!1;var p=i.updateQueue;zs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var Q=L,le=Q.next;Q.next=null,A===null?_=le:A.next=le,A=Q;var de=i.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==A&&(L===null?de.firstBaseUpdate=le:L.next=le,de.lastBaseUpdate=Q))}if(_!==null){var ge=p.baseState;A=0,de=le=Q=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(Qe&ce)===ce:(h&ce)===ce){ce!==0&&ce===pl&&(zg=!0),de!==null&&(de=de.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Te=i,Me=L;ce=a;var It=l;switch(Me.tag){case 1:if(Te=Me.payload,typeof Te=="function"){ge=Te.call(It,ge,ce);break e}ge=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Me.payload,ce=typeof Te=="function"?Te.call(It,ge,ce):Te,ce==null)break e;ge=y({},ge,ce);break e;case 2:zs=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(le=de=he,Q=ge):de=de.next=he,A|=ce;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;he=L,L=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);de===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=de,_===null&&(p.shared.lanes=0),Ks|=A,i.lanes=A,i.memoizedState=ge}}function Ov(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function Mv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Ov(l[i],a)}var bl=F(null),pd=F(0);function Pv(i,a){i=os,re(pd,i),re(bl,a),os=i|a.baseLanes}function Bg(){re(pd,os),re(bl,bl.current)}function Fg(){os=pd.current,Y(bl),Y(pd)}var ur=F(null),Nr=null;function Hs(i){var a=i.alternate;re(Yt,Yt.current&1),re(ur,i),Nr===null&&(a===null||bl.current!==null||a.memoizedState!==null)&&(Nr=i)}function Hg(i){re(Yt,Yt.current),re(ur,i),Nr===null&&(Nr=i)}function jv(i){i.tag===22?(re(Yt,Yt.current),re(ur,i),Nr===null&&(Nr=i)):qs()}function qs(){re(Yt,Yt.current),re(ur,ur.current)}function hr(i){Y(ur),Nr===i&&(Nr=null),Y(Yt)}var Yt=F(0);function yd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Qp(l)||Wp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,He=null,St=null,rn=null,_d=!1,wl=!1,Za=!1,vd=0,Xc=0,xl=null,VR=0;function Bt(){throw Error(n(321))}function qg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!lr(i[l],a[l]))return!1;return!0}function $g(i,a,l,h,p,_){return Zi=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?vb:ap,Za=!1,_=l(h,p),Za=!1,wl&&(_=Lv(a,l,h,p)),Vv(i),_}function Vv(i){P.H=eu;var a=St!==null&&St.next!==null;if(Zi=0,rn=St=He=null,_d=!1,Xc=0,xl=null,a)throw Error(n(300));i===null||sn||(i=i.dependencies,i!==null&&cd(i)&&(sn=!0))}function Lv(i,a,l,h){He=i;var p=0;do{if(wl&&(xl=null),Xc=0,wl=!1,25<=p)throw Error(n(301));if(p+=1,rn=St=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=bb,_=a(l,h)}while(wl);return _}function LR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?Jc(a):a,i=i.useState()[0],(St!==null?St.memoizedState:null)!==i&&(He.flags|=1024),a}function Gg(){var i=vd!==0;return vd=0,i}function Kg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Yg(i){if(_d){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}_d=!1}Zi=0,rn=St=He=null,wl=!1,Xc=vd=0,xl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=i:rn=rn.next=i,rn}function Qt(){if(St===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=St.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,St=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));St=i,i={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?He.memoizedState=rn=i:rn=rn.next=i}return rn}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(i){var a=Xc;return Xc+=1,xl===null&&(xl=[]),i=Rv(xl,i,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?vb:ap),i}function wd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Jc(i);if(i.$$typeof===U)return An(i)}throw Error(n(438,String(i)))}function Qg(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bd(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=R;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function xd(i){var a=Qt();return Wg(a,St,i)}function Wg(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var L=A=null,Q=null,le=a,de=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(Qe&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===pl&&(de=!0);else if((Zi&ce)===ce){le=le.next,ce===pl&&(de=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ge,A=_):Q=Q.next=ge,He.lanes|=ce,Ks|=ce;ge=le.action,Za&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ce,A=_):Q=Q.next=ce,He.lanes|=ge,Ks|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=_:Q.next=L,!lr(_,i.memoizedState)&&(sn=!0,de&&(l=yl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Q,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Xg(i){var a=Qt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);lr(_,a.memoizedState)||(sn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function Uv(i,a,l){var h=He,p=Qt(),_=tt;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!lr((St||p).memoizedState,l);if(A&&(p.memoizedState=l,sn=!0),p=p.queue,ep(Fv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,El(9,{destroy:void 0},Bv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||zv(h,a,l)}return l}function zv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=bd(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Bv(i,a,l,h){a.value=l,a.getSnapshot=h,Hv(a)&&qv(i)}function Fv(i,a,l){return l(function(){Hv(a)&&qv(i)})}function Hv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!lr(i,l)}catch{return!0}}function qv(i){var a=qa(i,2);a!==null&&rr(a,i,2)}function Jg(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),Za){Jt(!0);try{l()}finally{Jt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function $v(i,a,l,h){return i.baseState=l,Wg(i,St,typeof h=="function"?h:es)}function UR(i,a,l,h,p){if(Sd(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,Gv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Gv(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var L=l(p,h),Q=P.S;Q!==null&&Q(A,L),Kv(i,a,L)}catch(le){Zg(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),Kv(i,a,_)}catch(le){Zg(i,a,le)}}function Kv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Yv(i,a,h)},function(h){return Zg(i,a,h)}):Yv(i,a,l)}function Yv(i,a,l){a.status="fulfilled",a.value=l,Qv(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Gv(i,l)))}function Zg(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,Qv(a),a=a.next;while(a!==h)}i.action=null}function Qv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Wv(i,a){return a}function Xv(i,a){if(tt){var l=Nt.formState;if(l!==null){e:{var h=He;if(tt){if(Dt){t:{for(var p=Dt,_=Cr;p.nodeType!==8;){if(!_){p=null;break t}if(p=kr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Dt=kr(p.nextSibling),h=p.data==="F!";break e}}Ls(h)}h=!1}h&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wv,lastRenderedState:a},l.queue=h,l=pb.bind(null,He,h),h.dispatch=l,h=Jg(!1),_=sp.bind(null,He,!1,h.queue),h=qn(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=UR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function Jv(i){var a=Qt();return Zv(a,St,i)}function Zv(i,a,l){if(a=Wg(i,a,Wv)[0],i=xd(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Jc(a)}catch(A){throw A===_l?dd:A}else h=a;a=Qt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,El(9,{destroy:void 0},zR.bind(null,p,l),null)),[h,_,i]}function zR(i,a){i.action=a}function eb(i){var a=Qt(),l=St;if(l!==null)return Zv(a,l,i);Qt(),a=a.memoizedState,l=Qt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function El(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=bd(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function tb(){return Qt().memoizedState}function Ed(i,a,l,h){var p=qn();He.flags|=i,p.memoizedState=El(1|a,{destroy:void 0},l,h===void 0?null:h)}function Td(i,a,l,h){var p=Qt();h=h===void 0?null:h;var _=p.memoizedState.inst;St!==null&&h!==null&&qg(h,St.memoizedState.deps)?p.memoizedState=El(a,_,l,h):(He.flags|=i,p.memoizedState=El(1|a,_,l,h))}function nb(i,a){Ed(8390656,8,i,a)}function ep(i,a){Td(2048,8,i,a)}function BR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=bd(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function rb(i){var a=Qt().memoizedState;return BR({ref:a,nextImpl:i}),function(){if((ht&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function ib(i,a){return Td(4,2,i,a)}function sb(i,a){return Td(4,4,i,a)}function ab(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ob(i,a,l){l=l!=null?l.concat([i]):null,Td(4,4,ab.bind(null,a,i),l)}function tp(){}function lb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&qg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function cb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&qg(a,h[1]))return h[0];if(h=i(),Za){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h}function np(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(Qe&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=u1(),He.lanes|=i,Ks|=i,l)}function ub(i,a,l,h){return lr(l,a)?l:bl.current!==null?(i=np(i,l,h),lr(i,a)||(sn=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Qe&261930)===0?(sn=!0,i.memoizedState=l):(i=u1(),He.lanes|=i,Ks|=i,a)}function hb(i,a,l,h,p){var _=D.p;D.p=_!==0&&8>_?_:8;var A=P.T,L={};P.T=L,sp(i,!1,a,l);try{var Q=p(),le=P.S;if(le!==null&&le(L,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var de=jR(Q,h);Zc(i,a,de,mr(i))}else Zc(i,a,h,mr(i))}catch(ge){Zc(i,a,{then:function(){},status:"rejected",reason:ge},mr())}finally{D.p=_,A!==null&&L.types!==null&&(A.types=L.types),P.T=A}}function FR(){}function rp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=db(i).queue;hb(i,p,a,Z,l===null?FR:function(){return fb(i),l(h)})}function db(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:Z},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function fb(i){var a=db(i);a.next===null&&(a=i.alternate.memoizedState),Zc(i,a.next.queue,{},mr())}function ip(){return An(pu)}function mb(){return Qt().memoizedState}function gb(){return Qt().memoizedState}function HR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=mr();i=Bs(l);var h=Fs(a,i,l);h!==null&&(rr(h,a,l),Yc(h,a,l)),a={cache:Og()},i.payload=a;return}a=a.return}}function qR(i,a,l){var h=mr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sd(i)?yb(a,l):(l=xg(i,a,l,h),l!==null&&(rr(l,i,h),_b(l,a,h)))}function pb(i,a,l){var h=mr();Zc(i,a,l,h)}function Zc(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sd(i))yb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,L=_(A,l);if(p.hasEagerState=!0,p.eagerState=L,lr(L,A))return sd(i,a,p,0),Nt===null&&id(),!1}catch{}finally{}if(l=xg(i,a,p,h),l!==null)return rr(l,i,h),_b(l,a,h),!0}return!1}function sp(i,a,l,h){if(h={lane:2,revertLane:Vp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Sd(i)){if(a)throw Error(n(479))}else a=xg(i,l,h,2),a!==null&&rr(a,i,2)}function Sd(i){var a=i.alternate;return i===He||a!==null&&a===He}function yb(i,a){wl=_d=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function _b(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,wc(i,l)}}var eu={readContext:An,use:wd,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};eu.useEffectEvent=Bt;var vb={readContext:An,use:wd,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:nb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Ed(4194308,4,ab.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Ed(4194308,4,i,a)},useInsertionEffect:function(i,a){Ed(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var h=i();if(Za){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=qn();if(l!==void 0){var p=l(a);if(Za){Jt(!0);try{l(a)}finally{Jt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=qR.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=Jg(i);var a=i.queue,l=pb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:tp,useDeferredValue:function(i,a){var l=qn();return np(l,i,a)},useTransition:function(){var i=Jg(!1);return i=hb.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=qn();if(tt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(Qe&127)!==0||zv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,nb(Fv.bind(null,h,_,i),[i]),h.flags|=2048,El(9,{destroy:void 0},Bv.bind(null,h,_,l,a),null),l},useId:function(){var i=qn(),a=Nt.identifierPrefix;if(tt){var l=xi,h=wi;l=(h&~(1<<32-kt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=vd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=VR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:ip,useFormState:Xv,useActionState:Xv,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=sp.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:Qg,useCacheRefresh:function(){return qn().memoizedState=HR.bind(null,He)},useEffectEvent:function(i){var a=qn(),l={impl:i};return a.memoizedState=l,function(){if((ht&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},ap={readContext:An,use:wd,useCallback:lb,useContext:An,useEffect:ep,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:xd,useRef:tb,useState:function(){return xd(es)},useDebugValue:tp,useDeferredValue:function(i,a){var l=Qt();return ub(l,St.memoizedState,i,a)},useTransition:function(){var i=xd(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:Jc(i),a]},useSyncExternalStore:Uv,useId:mb,useHostTransitionStatus:ip,useFormState:Jv,useActionState:Jv,useOptimistic:function(i,a){var l=Qt();return $v(l,St,i,a)},useMemoCache:Qg,useCacheRefresh:gb};ap.useEffectEvent=rb;var bb={readContext:An,use:wd,useCallback:lb,useContext:An,useEffect:ep,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:Xg,useRef:tb,useState:function(){return Xg(es)},useDebugValue:tp,useDeferredValue:function(i,a){var l=Qt();return St===null?np(l,i,a):ub(l,St.memoizedState,i,a)},useTransition:function(){var i=Xg(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:Jc(i),a]},useSyncExternalStore:Uv,useId:mb,useHostTransitionStatus:ip,useFormState:eb,useActionState:eb,useOptimistic:function(i,a){var l=Qt();return St!==null?$v(l,St,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Qg,useCacheRefresh:gb};bb.useEffectEvent=rb;function op(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var lp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=mr(),p=Bs(h);p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(rr(a,i,h),Yc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=mr(),p=Bs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(rr(a,i,h),Yc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=mr(),h=Bs(l);h.tag=2,a!=null&&(h.callback=a),a=Fs(i,h,l),a!==null&&(rr(a,i,l),Yc(a,i,l))}};function wb(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!zc(l,h)||!zc(p,_):!0}function xb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&lp.enqueueReplaceState(a,a.state,null)}function eo(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Eb(i){rd(i)}function Tb(i){console.error(i)}function Sb(i){rd(i)}function Ad(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Ab(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function cp(i,a,l){return l=Bs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ad(i,a)},l}function Ib(i){return i=Bs(i),i.tag=3,i}function Rb(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Ab(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Ab(a,l,h),typeof p!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function $R(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&gl(a,l,p,!0),l=ur.current,l!==null){switch(l.tag){case 31:case 13:return Nr===null?Ld():l.alternate===null&&Ft===0&&(Ft=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===fd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Mp(i,h,p)),!1;case 22:return l.flags|=65536,h===fd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Mp(i,h,p)),!1}throw Error(n(435,l.tag))}return Mp(i,h,p),Ld(),!1}if(tt)return a=ur.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Rg&&(i=Error(n(422),{cause:h}),Hc(Ar(i,l)))):(h!==Rg&&(a=Error(n(423),{cause:h}),Hc(Ar(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Ar(h,l),p=cp(i.stateNode,h,p),Ug(i,p),Ft!==4&&(Ft=2)),!1;var _=Error(n(520),{cause:h});if(_=Ar(_,l),lu===null?lu=[_]:lu.push(_),Ft!==4&&(Ft=2),a===null)return!0;h=Ar(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=cp(l.stateNode,h,i),Ug(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ib(p),Rb(p,i,l,h),Ug(l,p),!1}l=l.return}while(l!==null);return!1}var up=Error(n(461)),sn=!1;function In(i,a,l,h){a.child=i===null?Dv(a,null,l,h):Ja(a,i.child,l,h)}function Cb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var L in h)L!=="ref"&&(A[L]=h[L])}else A=h;return Ya(a),h=$g(i,a,l,A,_,p),L=Gg(),i!==null&&!sn?(Kg(i,a,p),ts(i,a,p)):(tt&&L&&Ag(a),a.flags|=1,In(i,a,h,p),a.child)}function Nb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Eg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,kb(i,a,_,h,p)):(i=od(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!_p(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:zc,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function kb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if(zc(_,h)&&i.ref===a.ref)if(sn=!1,a.pendingProps=h=_,_p(i,p))(i.flags&131072)!==0&&(sn=!0);else return a.lanes=i.lanes,ts(i,a,p)}return hp(i,a,l,h,p)}function Db(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Ob(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&hd(a,_!==null?_.cachePool:null),_!==null?Pv(a,_):Bg(),jv(a);else return h=a.lanes=536870912,Ob(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(hd(a,_.cachePool),Pv(a,_),qs(),a.memoizedState=null):(i!==null&&hd(a,null),Bg(),qs());return In(i,a,p,l),a.child}function tu(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ob(i,a,l,h,p){var _=Pg();return _=_===null?null:{parent:nn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&hd(a,null),Bg(),jv(a),i!==null&&gl(i,a,h,!0),a.childLanes=p,null}function Id(i,a){return a=Cd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Mb(i,a,l){return Ja(a,i.child,null,l),i=Id(a,a.pendingProps),i.flags|=2,hr(a),a.memoizedState=null,i}function GR(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(tt){if(h.mode==="hidden")return i=Id(a,h),a.lanes=536870912,tu(null,i);if(Hg(a),(i=Dt)?(i=G1(i,Cr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:js!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=yv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Ls(a);return a.lanes=536870912,null}return Id(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Hg(a),p)if(a.flags&256)a.flags&=-257,a=Mb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(sn||gl(i,a,l,!1),p=(l&i.childLanes)!==0,sn||p){if(h=Nt,h!==null&&(A=xc(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,qa(i,A),rr(h,i,A),up;Ld(),a=Mb(i,a,l)}else i=_.treeContext,Dt=kr(A.nextSibling),Sn=a,tt=!0,Vs=null,Cr=!1,i!==null&&bv(a,i),a=Id(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Rd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function hp(i,a,l,h,p){return Ya(a),l=$g(i,a,l,h,void 0,p),h=Gg(),i!==null&&!sn?(Kg(i,a,p),ts(i,a,p)):(tt&&h&&Ag(a),a.flags|=1,In(i,a,l,p),a.child)}function Pb(i,a,l,h,p,_){return Ya(a),a.updateQueue=null,l=Lv(a,h,l,p),Vv(i),h=Gg(),i!==null&&!sn?(Kg(i,a,_),ts(i,a,_)):(tt&&h&&Ag(a),a.flags|=1,In(i,a,l,_),a.child)}function jb(i,a,l,h,p){if(Ya(a),a.stateNode===null){var _=hl,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=lp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Vg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):hl,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(op(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&lp.enqueueReplaceState(_,_.state,null),Wc(a,h,_,p),Qc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var L=a.memoizedProps,Q=eo(l,L);_.props=Q;var le=_.context,de=l.contextType;A=hl,typeof de=="object"&&de!==null&&(A=An(de));var ge=l.getDerivedStateFromProps;de=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,de||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==A)&&xb(a,_,h,A),zs=!1;var ce=a.memoizedState;_.state=ce,Wc(a,h,_,p),Qc(),le=a.memoizedState,L||ce!==le||zs?(typeof ge=="function"&&(op(a,l,ge,h),le=a.memoizedState),(Q=zs||wb(a,l,Q,h,ce,le,A))?(de||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Q):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,Lg(i,a),A=a.memoizedProps,de=eo(l,A),_.props=de,ge=a.pendingProps,ce=_.context,le=l.contextType,Q=hl,typeof le=="object"&&le!==null&&(Q=An(le)),L=l.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&xb(a,_,h,Q),zs=!1,ce=a.memoizedState,_.state=ce,Wc(a,h,_,p),Qc();var he=a.memoizedState;A!==ge||ce!==he||zs||i!==null&&i.dependencies!==null&&cd(i.dependencies)?(typeof L=="function"&&(op(a,l,L,h),he=a.memoizedState),(de=zs||wb(a,l,de,h,ce,he,Q)||i!==null&&i.dependencies!==null&&cd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Q)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Q,h=de):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Rd(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=Ja(a,i.child,null,p),a.child=Ja(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function Vb(i,a,l,h){return Ga(),a.flags|=256,In(i,a,l,h),a.child}var dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fp(i){return{baseLanes:i,cachePool:Av()}}function mp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=fr),i}function Lb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Yt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(tt){if(p?Hs(a):qs(),(i=Dt)?(i=G1(i,Cr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:js!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=yv(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Ls(a);return Wp(i)?a.lanes=32:a.lanes=536870912,null}var L=h.children;return h=h.fallback,p?(qs(),p=a.mode,L=Cd({mode:"hidden",children:L},p),h=$a(h,p,l,null),L.return=a,h.return=a,L.sibling=h,a.child=L,h=a.child,h.memoizedState=fp(l),h.childLanes=mp(i,A,l),a.memoizedState=dp,tu(null,h)):(Hs(a),gp(a,L))}var Q=i.memoizedState;if(Q!==null&&(L=Q.dehydrated,L!==null)){if(_)a.flags&256?(Hs(a),a.flags&=-257,a=pp(i,a,l)):a.memoizedState!==null?(qs(),a.child=i.child,a.flags|=128,a=null):(qs(),L=h.fallback,p=a.mode,h=Cd({mode:"visible",children:h.children},p),L=$a(L,p,l,null),L.flags|=2,h.return=a,L.return=a,h.sibling=L,a.child=h,Ja(a,i.child,null,l),h=a.child,h.memoizedState=fp(l),h.childLanes=mp(i,A,l),a.memoizedState=dp,a=tu(null,h));else if(Hs(a),Wp(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Hc({value:h,source:null,stack:null}),a=pp(i,a,l)}else if(sn||gl(i,a,l,!1),A=(l&i.childLanes)!==0,sn||A){if(A=Nt,A!==null&&(h=xc(A,l),h!==0&&h!==Q.retryLane))throw Q.retryLane=h,qa(i,h),rr(A,i,h),up;Qp(L)||Ld(),a=pp(i,a,l)}else Qp(L)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Dt=kr(L.nextSibling),Sn=a,tt=!0,Vs=null,Cr=!1,i!==null&&bv(a,i),a=gp(a,h.children),a.flags|=4096);return a}return p?(qs(),L=h.fallback,p=a.mode,Q=i.child,le=Q.sibling,h=Qi(Q,{mode:"hidden",children:h.children}),h.subtreeFlags=Q.subtreeFlags&65011712,le!==null?L=Qi(le,L):(L=$a(L,p,l,null),L.flags|=2),L.return=a,h.return=a,h.sibling=L,a.child=h,tu(null,h),h=a.child,L=i.child.memoizedState,L===null?L=fp(l):(p=L.cachePool,p!==null?(Q=nn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Av(),L={baseLanes:L.baseLanes|l,cachePool:p}),h.memoizedState=L,h.childLanes=mp(i,A,l),a.memoizedState=dp,tu(i.child,h)):(Hs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function gp(i,a){return a=Cd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Cd(i,a){return i=cr(22,i,null,a),i.lanes=0,i}function pp(i,a,l){return Ja(a,i.child,null,l),i=gp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ub(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),kg(i.return,a,l)}function yp(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function zb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Yt.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,re(Yt,A),In(i,a,h,l),h=tt?Fc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ub(i,l,a);else if(i.tag===19)Ub(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&yd(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),yp(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&yd(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}yp(a,!0,l,null,_,h);break;case"together":yp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ks|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(gl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function _p(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&cd(i)))}function KR(i,a,l){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),Us(a,nn,i.memoizedState.cache),Ga();break;case 27:case 5:Ze(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:Us(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Hg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Hs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Lb(i,a,l):(Hs(a),i=ts(i,a,l),i!==null?i.sibling:null);Hs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(gl(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return zb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),re(Yt,Yt.current),h)break;return null;case 22:return a.lanes=0,Db(i,a,l,a.pendingProps);case 24:Us(a,nn,i.memoizedState.cache)}return ts(i,a,l)}function Bb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)sn=!0;else{if(!_p(i,l)&&(a.flags&128)===0)return sn=!1,KR(i,a,l);sn=(i.flags&131072)!==0}else sn=!1,tt&&(a.flags&1048576)!==0&&vv(a,Fc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Wa(a.elementType),a.type=i,typeof i=="function")Eg(i)?(h=eo(i,h),a.tag=1,a=jb(null,a,i,h,l)):(a.tag=0,a=hp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===H){a.tag=11,a=Cb(null,a,i,h,l);break e}else if(p===M){a.tag=14,a=Nb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return hp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=eo(h,a.pendingProps),jb(i,a,h,p,l);case 3:e:{if(Pe(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,Lg(i,a),Wc(a,h,null,l);var A=a.memoizedState;if(h=A.cache,Us(a,nn,h),h!==_.cache&&Dg(a,[nn],l,!0),Qc(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Vb(i,a,h,l);break e}else if(h!==p){p=Ar(Error(n(424)),a),Hc(p),a=Vb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=kr(i.firstChild),Sn=a,tt=!0,Vs=null,Cr=!0,l=Dv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ga(),h===p){a=ts(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Rd(i,a),i===null?(l=J1(a.type,null,a.pendingProps,null))?a.memoizedState=l:tt||(l=a.type,i=a.pendingProps,h=$d(_e.current).createElement(l),h[Zt]=a,h[pn]=i,Rn(h,l,i),en(h),a.stateNode=h):a.memoizedState=J1(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ze(a),i===null&&tt&&(h=a.stateNode=Q1(a.type,a.pendingProps,_e.current),Sn=a,Cr=!0,p=Dt,Js(a.type)?(Xp=p,Dt=kr(h.firstChild)):Dt=p),In(i,a,a.pendingProps.children,l),Rd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&tt&&((p=h=Dt)&&(h=EC(h,a.type,a.pendingProps,Cr),h!==null?(a.stateNode=h,Sn=a,Dt=kr(h.firstChild),Cr=!1,p=!0):p=!1),p||Ls(a)),Ze(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Gp(p,_)?h=null:A!==null&&Gp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=$g(i,a,LR,null,null,l),pu._currentValue=p),Rd(i,a),In(i,a,h,l),a.child;case 6:return i===null&&tt&&((i=l=Dt)&&(l=TC(l,a.pendingProps,Cr),l!==null?(a.stateNode=l,Sn=a,Dt=null,i=!0):i=!1),i||Ls(a)),null;case 13:return Lb(i,a,l);case 4:return Pe(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Ja(a,null,h,l):In(i,a,h,l),a.child;case 11:return Cb(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Us(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Ya(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return Nb(i,a,a.type,a.pendingProps,l);case 15:return kb(i,a,a.type,a.pendingProps,l);case 19:return zb(i,a,l);case 31:return GR(i,a,l);case 22:return Db(i,a,l,a.pendingProps);case 24:return Ya(a),h=An(nn),i===null?(p=Pg(),p===null&&(p=Nt,_=Og(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Vg(a),Us(a,nn,p)):((i.lanes&l)!==0&&(Lg(i,a),Wc(a,null,null,l),Qc()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Us(a,nn,h)):(h=_.cache,Us(a,nn,h),h!==p.cache&&Dg(a,[nn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function vp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(m1())i.flags|=8192;else throw Xa=fd,jg}else i.flags&=-16777217}function Fb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!rw(a))if(m1())i.flags|=8192;else throw Xa=fd,jg}function Nd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?br():536870912,i.lanes|=a,Il|=a)}function nu(i,a){if(!tt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function YR(i,a,l){var h=a.pendingProps;switch(Ig(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(nn),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(ml(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cg())),Ot(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Ot(a),Fb(a,_)):(Ot(a),vp(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Ot(a),Fb(a,_)):(Ot(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Ot(a),vp(a,p,i,h,l)),null;case 27:if(st(a),l=_e.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}i=ie.current,ml(a)?wv(a):(i=Q1(p,h,l),a.stateNode=i,ns(a))}return Ot(a),null;case 5:if(st(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}if(_=ie.current,ml(a))wv(a);else{var A=$d(_e.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[Zt]=a,_[pn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Ot(a),vp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=_e.current,ml(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[Zt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||L1(i.nodeValue,l)),i||Ls(a,!0)}else i=$d(i).createTextNode(h),i[Zt]=a,a.stateNode=i}return Ot(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=ml(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Zt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),i=!1}else l=Cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(hr(a),a):(hr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ot(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ml(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),p=!1}else p=Cg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(hr(a),a):(hr(a),null)}return hr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Nd(a,a.updateQueue),Ot(a),null);case 4:return Ce(),i===null&&Bp(a.stateNode.containerInfo),Ot(a),null;case 10:return Ji(a.type),Ot(a),null;case 19:if(Y(Yt),h=a.memoizedState,h===null)return Ot(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)nu(h,!1);else{if(Ft!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=yd(i),_!==null){for(a.flags|=128,nu(h,!1),i=_.updateQueue,a.updateQueue=i,Nd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)pv(l,i),l=l.sibling;return re(Yt,Yt.current&1|2),tt&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Pd&&(a.flags|=128,p=!0,nu(h,!1),a.lanes=4194304)}else{if(!p)if(i=yd(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Nd(a,i),nu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!tt)return Ot(a),null}else 2*xe()-h.renderingStartTime>Pd&&l!==536870912&&(a.flags|=128,p=!0,nu(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Yt.current,re(Yt,p?l&1|2:l&1),tt&&Wi(a,h.treeForkCount),i):(Ot(a),null);case 22:case 23:return hr(a),Fg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),l=a.updateQueue,l!==null&&Nd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Y(Qa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(nn),Ot(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function QR(i,a){switch(Ig(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(nn),Ce(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 31:if(a.memoizedState!==null){if(hr(a),a.alternate===null)throw Error(n(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(hr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Y(Yt),null;case 4:return Ce(),null;case 10:return Ji(a.type),null;case 22:case 23:return hr(a),Fg(),i!==null&&Y(Qa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(nn),null;case 25:return null;default:return null}}function Hb(i,a){switch(Ig(a),a.tag){case 3:Ji(nn),Ce();break;case 26:case 27:case 5:st(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&hr(a);break;case 13:hr(a);break;case 19:Y(Yt);break;case 10:Ji(a.type);break;case 22:case 23:hr(a),Fg(),i!==null&&Y(Qa);break;case 24:Ji(nn)}}function ru(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(L){vt(a,a.return,L)}}function $s(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,p=a;var Q=l,le=L;try{le()}catch(de){vt(p,Q,de)}}}h=h.next}while(h!==_)}}catch(de){vt(a,a.return,de)}}function qb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Mv(a,l)}catch(h){vt(i,i.return,h)}}}function $b(i,a,l){l.props=eo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){vt(i,a,h)}}function iu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){vt(i,a,p)}}function Ei(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){vt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){vt(i,a,p)}else l.current=null}function Gb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){vt(i,i.return,p)}}function bp(i,a,l){try{var h=i.stateNode;yC(h,i.type,l,a),h[pn]=a}catch(p){vt(i,i.return,p)}}function Kb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Js(i.type)||i.tag===4}function wp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Hr));else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(xp(i,a,l),i=i.sibling;i!==null;)xp(i,a,l),i=i.sibling}function kd(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(kd(i,a,l),i=i.sibling;i!==null;)kd(i,a,l),i=i.sibling}function Yb(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[Zt]=i,a[pn]=l}catch(_){vt(i,i.return,_)}}var rs=!1,an=!1,Ep=!1,Qb=typeof WeakSet=="function"?WeakSet:Set,_n=null;function WR(i,a){if(i=i.containerInfo,qp=Jd,i=ov(i),pg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,L=-1,Q=-1,le=0,de=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(L=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Q=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(L=A),ce===_&&++de===h&&(Q=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=L===-1||Q===-1?null:{start:L,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for($p={focusedElem:i,selectionRange:l},Jd=!1,_n=a;_n!==null;)if(a=_n,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,_n=i;else for(;_n!==null;){switch(a=_n,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Te=eo(l.type,p);i=h.getSnapshotBeforeUpdate(Te,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Me){vt(l,l.return,Me)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Yp(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,_n=i;break}_n=a.return}}function Wb(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&ru(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){vt(l,l.return,A)}else{var p=eo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){vt(l,l.return,A)}}h&64&&qb(l),h&512&&iu(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Mv(i,a)}catch(A){vt(l,l.return,A)}}break;case 27:a===null&&h&4&&Yb(l);case 26:case 5:ss(i,l),a===null&&h&4&&Gb(l),h&512&&iu(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&Zb(i,l);break;case 13:ss(i,l),h&4&&e1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=sC.bind(null,l),SC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||an,p=rs;var _=an;rs=h,(an=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,an=_}break;case 30:break;default:ss(i,l)}}function Xb(i){var a=i.alternate;a!==null&&(i.alternate=null,Xb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Xo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,Jn=!1;function is(i,a,l){for(l=l.child;l!==null;)Jb(i,a,l),l=l.sibling}function Jb(i,a,l){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Gt,l)}catch{}switch(l.tag){case 26:an||Ei(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:an||Ei(l,a);var h=Pt,p=Jn;Js(l.type)&&(Pt=l.stateNode,Jn=!1),is(i,a,l),fu(l.stateNode),Pt=h,Jn=p;break;case 5:an||Ei(l,a);case 6:if(h=Pt,p=Jn,Pt=null,is(i,a,l),Pt=h,Jn=p,Pt!==null)if(Jn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(l.stateNode)}catch(_){vt(l,a,_)}else try{Pt.removeChild(l.stateNode)}catch(_){vt(l,a,_)}break;case 18:Pt!==null&&(Jn?(i=Pt,q1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Pl(i)):q1(Pt,l.stateNode));break;case 4:h=Pt,p=Jn,Pt=l.stateNode.containerInfo,Jn=!0,is(i,a,l),Pt=h,Jn=p;break;case 0:case 11:case 14:case 15:$s(2,l,a),an||$s(4,l,a),is(i,a,l);break;case 1:an||(Ei(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&$b(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:an=(h=an)||l.memoizedState!==null,is(i,a,l),an=h;break;default:is(i,a,l)}}function Zb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pl(i)}catch(l){vt(a,a.return,l)}}}function e1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pl(i)}catch(l){vt(a,a.return,l)}}function XR(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Qb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Qb),a;default:throw Error(n(435,i.tag))}}function Dd(i,a){var l=XR(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=aC.bind(null,i,h);h.then(p,p)}})}function Zn(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Js(L.type)){Pt=L.stateNode,Jn=!1;break e}break;case 5:Pt=L.stateNode,Jn=!1;break e;case 3:case 4:Pt=L.stateNode.containerInfo,Jn=!0;break e}L=L.return}if(Pt===null)throw Error(n(160));Jb(_,A,p),Pt=null,Jn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)t1(a,i),a=a.sibling}var Qr=null;function t1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),er(i),h&4&&($s(3,i,i.return),ru(3,i),$s(5,i,i.return));break;case 1:Zn(a,i),er(i),h&512&&(an||l===null||Ei(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Qr;if(Zn(a,i),er(i),h&512&&(an||l===null||Ei(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[ci]||_[Zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[Zt]=i,en(_),h=_;break e;case"link":var A=tw("link","href",p).get(h+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(_=A[L],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=tw("meta","content",p).get(h+(l.content||""))){for(L=0;L<A.length;L++)if(_=A[L],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[Zt]=i,en(_),h=_}i.stateNode=h}else nw(p,i.type,i.stateNode);else i.stateNode=ew(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?nw(p,i.type,i.stateNode):ew(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&bp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Zn(a,i),er(i),h&512&&(an||l===null||Ei(l,l.return)),l!==null&&h&4&&bp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Zn(a,i),er(i),h&512&&(an||l===null||Ei(l,l.return)),i.flags&32){p=i.stateNode;try{Xn(p,"")}catch(Te){vt(i,i.return,Te)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,bp(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Ep=!0);break;case 6:if(Zn(a,i),er(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Te){vt(i,i.return,Te)}}break;case 3:if(Yd=null,p=Qr,Qr=Gd(a.containerInfo),Zn(a,i),Qr=p,er(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Pl(a.containerInfo)}catch(Te){vt(i,i.return,Te)}Ep&&(Ep=!1,n1(i));break;case 4:h=Qr,Qr=Gd(i.stateNode.containerInfo),Zn(a,i),er(i),Qr=h;break;case 12:Zn(a,i),er(i);break;case 31:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 13:Zn(a,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Md=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 22:p=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=rs,de=an;if(rs=le||p,an=de||Q,Zn(a,i),an=de,rs=le,er(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||rs||an||to(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(_=Q.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Te){vt(Q,Q.return,Te)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Te){vt(Q,Q.return,Te)}}}else if(a.tag===18){if(l===null){Q=a;try{var he=Q.stateNode;p?$1(he,!0):$1(Q.stateNode,!1)}catch(Te){vt(Q,Q.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Dd(i,l))));break;case 19:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Dd(i,h)));break;case 30:break;case 21:break;default:Zn(a,i),er(i)}}function er(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Kb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=wp(i);kd(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Xn(A,""),l.flags&=-33);var L=wp(i);kd(i,L,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=wp(i);xp(i,le,Q);break;default:throw Error(n(161))}}catch(de){vt(i,i.return,de)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function n1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;n1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Wb(i,a.alternate,a),a=a.sibling}function to(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:$s(4,a,a.return),to(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&$b(a,a.return,l),to(a);break;case 27:fu(a.stateNode);case 26:case 5:Ei(a,a.return),to(a);break;case 22:a.memoizedState===null&&to(a);break;case 30:to(a);break;default:to(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),ru(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){vt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var L=h.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Ov(Q[p],L)}catch(le){vt(h,h.return,le)}}l&&A&64&&qb(_),iu(_,_.return);break;case 27:Yb(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&Gb(_),iu(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&Zb(p,_);break;case 13:as(p,_,l),l&&A&4&&e1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),iu(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function Tp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&qc(l))}function Sp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&qc(i))}function Wr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r1(i,a,l,h),a=a.sibling}function r1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(i,a,l,h),p&2048&&ru(9,a);break;case 1:Wr(i,a,l,h);break;case 3:Wr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&qc(i)));break;case 12:if(p&2048){Wr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,L=_.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){vt(a,a.return,Q)}}else Wr(i,a,l,h);break;case 31:Wr(i,a,l,h);break;case 13:Wr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Wr(i,a,l,h):su(i,a):_._visibility&2?Wr(i,a,l,h):(_._visibility|=2,Tl(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Tp(A,a);break;case 24:Wr(i,a,l,h),p&2048&&Sp(a.alternate,a);break;default:Wr(i,a,l,h)}}function Tl(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,L=l,Q=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:Tl(_,A,L,Q,p),ru(8,A);break;case 23:break;case 22:var de=A.stateNode;A.memoizedState!==null?de._visibility&2?Tl(_,A,L,Q,p):su(_,A):(de._visibility|=2,Tl(_,A,L,Q,p)),p&&le&2048&&Tp(A.alternate,A);break;case 24:Tl(_,A,L,Q,p),p&&le&2048&&Sp(A.alternate,A);break;default:Tl(_,A,L,Q,p)}a=a.sibling}}function su(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:su(l,h),p&2048&&Tp(h.alternate,h);break;case 24:su(l,h),p&2048&&Sp(h.alternate,h);break;default:su(l,h)}a=a.sibling}}var au=8192;function Sl(i,a,l){if(i.subtreeFlags&au)for(i=i.child;i!==null;)i1(i,a,l),i=i.sibling}function i1(i,a,l){switch(i.tag){case 26:Sl(i,a,l),i.flags&au&&i.memoizedState!==null&&VC(l,Qr,i.memoizedState,i.memoizedProps);break;case 5:Sl(i,a,l);break;case 3:case 4:var h=Qr;Qr=Gd(i.stateNode.containerInfo),Sl(i,a,l),Qr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=au,au=16777216,Sl(i,a,l),au=h):Sl(i,a,l));break;default:Sl(i,a,l)}}function s1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function ou(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_n=h,o1(h,i)}s1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a1(i),i=i.sibling}function a1(i){switch(i.tag){case 0:case 11:case 15:ou(i),i.flags&2048&&$s(9,i,i.return);break;case 3:ou(i);break;case 12:ou(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Od(i)):ou(i);break;default:ou(i)}}function Od(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];_n=h,o1(h,i)}s1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:$s(8,a,a.return),Od(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Od(a));break;default:Od(a)}i=i.sibling}}function o1(i,a){for(;_n!==null;){var l=_n;switch(l.tag){case 0:case 11:case 15:$s(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,_n=h;else e:for(l=i;_n!==null;){h=_n;var p=h.sibling,_=h.return;if(Xb(h),h===l){_n=null;break e}if(p!==null){p.return=_,_n=p;break e}_n=_}}}var JR={getCacheForType:function(i){var a=An(nn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(nn).controller.signal}},ZR=typeof WeakMap=="function"?WeakMap:Map,ht=0,Nt=null,Ke=null,Qe=0,_t=0,dr=null,Gs=!1,Al=!1,Ap=!1,os=0,Ft=0,Ks=0,no=0,Ip=0,fr=0,Il=0,lu=null,nr=null,Rp=!1,Md=0,l1=0,Pd=1/0,jd=null,Ys=null,dn=0,Qs=null,Rl=null,ls=0,Cp=0,Np=null,c1=null,cu=0,kp=null;function mr(){return(ht&2)!==0&&Qe!==0?Qe&-Qe:P.T!==null?Vp():Vh()}function u1(){if(fr===0)if((Qe&536870912)===0||tt){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),fr=i}else fr=536870912;return i=ur.current,i!==null&&(i.flags|=32),fr}function rr(i,a,l){(i===Nt&&(_t===2||_t===9)||i.cancelPendingCommit!==null)&&(Cl(i,0),Ws(i,Qe,fr,!1)),Na(i,l),((ht&2)===0||i!==Nt)&&(i===Nt&&((ht&2)===0&&(no|=l),Ft===4&&Ws(i,Qe,fr,!1)),Ti(i))}function h1(i,a,l){if((ht&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?nC(i,a):Op(i,a,!0),_=h;do{if(p===0){Al&&!h&&Ws(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!eC(l)){p=Op(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=i;p=lu;var Q=L.current.memoizedState.isDehydrated;if(Q&&(Cl(L,A).flags|=256),A=Op(L,A,!1),A!==2){if(Ap&&!Q){L.errorRecoveryDisabledLanes|=_,no|=_,p=4;break e}_=nr,nr=p,_!==null&&(nr===null?nr=_:nr.push.apply(nr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Cl(i,0),Ws(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Ws(h,a,fr,!Gs);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Md+300-xe(),10<p)){if(Ws(h,a,fr,!Gs),xn(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=F1(d1.bind(null,h,l,nr,jd,Rp,a,fr,no,Il,Gs,_,"Throttled",-0,0),p);break e}d1(h,l,nr,jd,Rp,a,fr,no,Il,Gs,_,null,-0,0)}}break}while(!0);Ti(i)}function d1(i,a,l,h,p,_,A,L,Q,le,de,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hr},i1(a,_,ge);var Te=(_&62914560)===_?Md-xe():(_&4194048)===_?l1-xe():0;if(Te=LC(ge,Te),Te!==null){ls=_,i.cancelPendingCommit=Te(b1.bind(null,i,a,_,l,h,p,A,L,Q,de,ge,null,ce,he)),Ws(i,_,A,!le);return}}b1(i,a,_,l,h,p,A,L,Q)}function eC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!lr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ws(i,a,l,h){a&=~Ip,a&=~no,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-kt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&ka(i,l,a)}function Vd(){return(ht&6)===0?(uu(0),!1):!0}function Dp(){if(Ke!==null){if(_t===0)var i=Ke.return;else i=Ke,Xi=Ka=null,Yg(i),vl=null,Gc=0,i=Ke;for(;i!==null;)Hb(i.alternate,i),i=i.return;Ke=null}}function Cl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,bC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,Dp(),Nt=i,Ke=l=Qi(i.current,null),Qe=a,_t=0,dr=null,Gs=!1,Al=En(i,a),Ap=!1,Il=fr=Ip=no=Ks=Ft=0,nr=lu=null,Rp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-kt(h),_=1<<p;a|=i[p],h&=~_}return os=a,id(),l}function f1(i,a){He=null,P.H=eu,a===_l||a===dd?(a=Cv(),_t=3):a===jg?(a=Cv(),_t=4):_t=a===up?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,dr=a,Ke===null&&(Ft=1,Ad(i,Ar(a,i.current)))}function m1(){var i=ur.current;return i===null?!0:(Qe&4194048)===Qe?Nr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?i===Nr:!1}function g1(){var i=P.H;return P.H=eu,i===null?eu:i}function p1(){var i=P.A;return P.A=JR,i}function Ld(){Ft=4,Gs||(Qe&4194048)!==Qe&&ur.current!==null||(Al=!0),(Ks&134217727)===0&&(no&134217727)===0||Nt===null||Ws(Nt,Qe,fr,!1)}function Op(i,a,l){var h=ht;ht|=2;var p=g1(),_=p1();(Nt!==i||Qe!==a)&&(jd=null,Cl(i,a)),a=!1;var A=Ft;e:do try{if(_t!==0&&Ke!==null){var L=Ke,Q=dr;switch(_t){case 8:Dp(),A=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(a=!0);var le=_t;if(_t=0,dr=null,Nl(i,L,Q,le),l&&Al){A=0;break e}break;default:le=_t,_t=0,dr=null,Nl(i,L,Q,le)}}tC(),A=Ft;break}catch(de){f1(i,de)}while(!0);return a&&i.shellSuspendCounter++,Xi=Ka=null,ht=h,P.H=p,P.A=_,Ke===null&&(Nt=null,Qe=0,id()),A}function tC(){for(;Ke!==null;)y1(Ke)}function nC(i,a){var l=ht;ht|=2;var h=g1(),p=p1();Nt!==i||Qe!==a?(jd=null,Pd=xe()+500,Cl(i,a)):Al=En(i,a);e:do try{if(_t!==0&&Ke!==null){a=Ke;var _=dr;t:switch(_t){case 1:_t=0,dr=null,Nl(i,a,_,1);break;case 2:case 9:if(Iv(_)){_t=0,dr=null,_1(a);break}a=function(){_t!==2&&_t!==9||Nt!==i||(_t=7),Ti(i)},_.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Iv(_)?(_t=0,dr=null,_1(a)):(_t=0,dr=null,Nl(i,a,_,7));break;case 5:var A=null;switch(Ke.tag){case 26:A=Ke.memoizedState;case 5:case 27:var L=Ke;if(A?rw(A):L.stateNode.complete){_t=0,dr=null;var Q=L.sibling;if(Q!==null)Ke=Q;else{var le=L.return;le!==null?(Ke=le,Ud(le)):Ke=null}break t}}_t=0,dr=null,Nl(i,a,_,5);break;case 6:_t=0,dr=null,Nl(i,a,_,6);break;case 8:Dp(),Ft=6;break e;default:throw Error(n(462))}}rC();break}catch(de){f1(i,de)}while(!0);return Xi=Ka=null,P.H=h,P.A=p,ht=l,Ke!==null?0:(Nt=null,Qe=0,id(),Ft)}function rC(){for(;Ke!==null&&!Be();)y1(Ke)}function y1(i){var a=Bb(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Ud(i):Ke=a}function _1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Pb(l,a,a.pendingProps,a.type,void 0,Qe);break;case 11:a=Pb(l,a,a.pendingProps,a.type.render,a.ref,Qe);break;case 5:Yg(a);default:Hb(l,a),a=Ke=pv(a,os),a=Bb(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Ud(i):Ke=a}function Nl(i,a,l,h){Xi=Ka=null,Yg(a),vl=null,Gc=0;var p=a.return;try{if($R(i,p,a,l,Qe)){Ft=1,Ad(i,Ar(l,i.current)),Ke=null;return}}catch(_){if(p!==null)throw Ke=p,_;Ft=1,Ad(i,Ar(l,i.current)),Ke=null;return}a.flags&32768?(tt||h===1?i=!0:Al||(Qe&536870912)!==0?i=!1:(Gs=i=!0,(h===2||h===9||h===3||h===6)&&(h=ur.current,h!==null&&h.tag===13&&(h.flags|=16384))),v1(a,i)):Ud(a)}function Ud(i){var a=i;do{if((a.flags&32768)!==0){v1(a,Gs);return}i=a.return;var l=YR(a.alternate,a,os);if(l!==null){Ke=l;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=i}while(a!==null);Ft===0&&(Ft=5)}function v1(i,a){do{var l=QR(i.alternate,i);if(l!==null){l.flags&=32767,Ke=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=l}while(i!==null);Ft=6,Ke=null}function b1(i,a,l,h,p,_,A,L,Q){i.cancelPendingCommit=null;do zd();while(dn!==0);if((ht&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=wg,dg(i,l,_,A,L,Q),i===Nt&&(Ke=Nt=null,Qe=0),Rl=a,Qs=i,ls=l,Cp=_,Np=p,c1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,oC(ct,function(){return S1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=D.p,D.p=2,A=ht,ht|=4;try{WR(i,a,l)}finally{ht=A,D.p=p,P.T=h}}dn=1,w1(),x1(),E1()}}function w1(){if(dn===1){dn=0;var i=Qs,a=Rl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=ht;ht|=4;try{t1(a,i);var _=$p,A=ov(i.containerInfo),L=_.focusedElem,Q=_.selectionRange;if(A!==L&&L&&L.ownerDocument&&av(L.ownerDocument.documentElement,L)){if(Q!==null&&pg(L)){var le=Q.start,de=Q.end;if(de===void 0&&(de=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(de,L.value.length);else{var ge=L.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Te=L.textContent.length,Me=Math.min(Q.start,Te),It=Q.end===void 0?Me:Math.min(Q.end,Te);!he.extend&&Me>It&&(A=It,It=Me,Me=A);var te=sv(L,Me),X=sv(L,It);if(te&&X&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(te.node,te.offset),he.removeAllRanges(),Me>It?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=L;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ge.length;L++){var me=ge[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Jd=!!qp,$p=qp=null}finally{ht=p,D.p=h,P.T=l}}i.current=a,dn=2}}function x1(){if(dn===2){dn=0;var i=Qs,a=Rl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=ht;ht|=4;try{Wb(i,a.alternate,a)}finally{ht=p,D.p=h,P.T=l}}dn=3}}function E1(){if(dn===4||dn===3){dn=0,Oe();var i=Qs,a=Rl,l=ls,h=c1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Rl=Qs=null,T1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ys=null),$i(l),a=a.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Gt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=D.p,D.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var L=h[A];_(L.value,{componentStack:L.stack})}}finally{P.T=a,D.p=p}}(ls&3)!==0&&zd(),Ti(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===kp?cu++:(cu=0,kp=i):cu=0,uu(0)}}function T1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,qc(a)))}function zd(){return w1(),x1(),E1(),S1()}function S1(){if(dn!==5)return!1;var i=Qs,a=Cp;Cp=0;var l=$i(ls),h=P.T,p=D.p;try{D.p=32>l?32:l,P.T=null,l=Np,Np=null;var _=Qs,A=ls;if(dn=0,Rl=Qs=null,ls=0,(ht&6)!==0)throw Error(n(331));var L=ht;if(ht|=4,a1(_.current),r1(_,_.current,A,l),ht=L,uu(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Gt,_)}catch{}return!0}finally{D.p=p,P.T=h,T1(i,a)}}function A1(i,a,l){a=Ar(l,a),a=cp(i.stateNode,a,2),i=Fs(i,a,2),i!==null&&(Na(i,2),Ti(i))}function vt(i,a,l){if(i.tag===3)A1(i,i,l);else for(;a!==null;){if(a.tag===3){A1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ys===null||!Ys.has(h))){i=Ar(l,i),l=Ib(2),h=Fs(a,l,2),h!==null&&(Rb(l,h,a,i),Na(h,2),Ti(h));break}}a=a.return}}function Mp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new ZR;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Ap=!0,p.add(l),i=iC.bind(null,i,a,l),a.then(i,i))}function iC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(Qe&l)===l&&(Ft===4||Ft===3&&(Qe&62914560)===Qe&&300>xe()-Md?(ht&2)===0&&Cl(i,0):Ip|=l,Il===Qe&&(Il=0)),Ti(i)}function I1(i,a){a===0&&(a=br()),i=qa(i,a),i!==null&&(Na(i,a),Ti(i))}function sC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),I1(i,l)}function aC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),I1(i,l)}function oC(i,a){return pe(i,a)}var Bd=null,kl=null,Pp=!1,Fd=!1,jp=!1,Xs=0;function Ti(i){i!==kl&&i.next===null&&(kl===null?Bd=kl=i:kl=kl.next=i),Fd=!0,Pp||(Pp=!0,cC())}function uu(i,a){if(!jp&&Fd){jp=!0;do for(var l=!1,h=Bd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,L=h.pingedLanes;_=(1<<31-kt(42|i)+1)-1,_&=p&~(A&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,k1(h,_))}else _=Qe,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,k1(h,_));h=h.next}while(l);jp=!1}}function lC(){R1()}function R1(){Fd=Pp=!1;var i=0;Xs!==0&&vC()&&(i=Xs);for(var a=xe(),l=null,h=Bd;h!==null;){var p=h.next,_=C1(h,a);_===0?(h.next=null,l===null?Bd=p:l.next=p,p===null&&(kl=l)):(l=h,(i!==0||(_&3)!==0)&&(Fd=!0)),h=p}dn!==0&&dn!==5||uu(i),Xs!==0&&(Xs=0)}function C1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-kt(_),L=1<<A,Q=p[A];Q===-1?((L&l)===0||(L&h)!==0)&&(p[A]=Qo(L,a)):Q<=a&&(i.expiredLanes|=L),_&=~L}if(a=Nt,l=Qe,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(_t===2||_t===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),$i(l)){case 2:case 8:l=Bn;break;case 32:l=ct;break;case 268435456:l=zt;break;default:l=ct}return h=N1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function N1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(zd()&&i.callbackNode!==l)return null;var h=Qe;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(h1(i,h,a),C1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?N1.bind(null,i):null)}function k1(i,a){if(zd())return null;h1(i,a,!0)}function cC(){wC(function(){(ht&6)!==0?pe(gt,lC):R1()})}function Vp(){if(Xs===0){var i=pl;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Xs=i}return Xs}function D1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tl(""+i)}function O1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function uC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=D1((p[pn]||null).action),A=h.submitter;A&&(a=(a=A[pn]||null)?D1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var L=new yi("action","action",null,h,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Xs!==0){var Q=A?O1(p,A):new FormData(p);rp(l,{pending:!0,data:Q,method:p.method,action:_},null,Q)}}else typeof _=="function"&&(L.preventDefault(),Q=A?O1(p,A):new FormData(p),rp(l,{pending:!0,data:Q,method:p.method,action:_},_,Q))},currentTarget:p}]})}}for(var Lp=0;Lp<bg.length;Lp++){var Up=bg[Lp],hC=Up.toLowerCase(),dC=Up[0].toUpperCase()+Up.slice(1);Yr(hC,"on"+dC)}Yr(uv,"onAnimationEnd"),Yr(hv,"onAnimationIteration"),Yr(dv,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(RR,"onTransitionRun"),Yr(CR,"onTransitionStart"),Yr(NR,"onTransitionCancel"),Yr(fv,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function M1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var L=h[A],Q=L.instance,le=L.currentTarget;if(L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(de){rd(de)}p.currentTarget=null,_=Q}else for(A=0;A<h.length;A++){if(L=h[A],Q=L.instance,le=L.currentTarget,L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(de){rd(de)}p.currentTarget=null,_=Q}}}}function Ye(i,a){var l=a[Wo];l===void 0&&(l=a[Wo]=new Set);var h=i+"__bubble";l.has(h)||(P1(a,i,2,!1),l.add(h))}function zp(i,a,l){var h=0;a&&(h|=4),P1(l,i,h,a)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Bp(i){if(!i[Hd]){i[Hd]=!0,Ec.forEach(function(l){l!=="selectionchange"&&(fC.has(l)||zp(l,!1,i),zp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Hd]||(a[Hd]=!0,zp("selectionchange",!1,a))}}function P1(i,a,l,h){switch(uw(a)){case 2:var p=BC;break;case 8:p=FC;break;default:p=ny}l=p.bind(null,a,l,i),p=void 0,!ja||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Fp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var L=h.stateNode.containerInfo;if(L===p)break;if(A===4)for(A=h.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;L!==null;){if(A=ui(L),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){h=_=A;continue e}L=L.parentNode}}h=h.return}Ds(function(){var le=_,de=xr(l),ge=[];e:{var ce=mv.get(i);if(ce!==void 0){var he=yi,Te=i;switch(i){case"keypress":if(La(l)===0)break e;case"keydown":case"keyup":he=ed;break;case"focusin":Te="focus",he=za;break;case"focusout":Te="blur",he=za;break;case"beforeblur":case"afterblur":he=za;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=x;break;case uv:case hv:case dv:he=Kh;break;case fv:he=B;break;case"scroll":case"scrollend":he=Pc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=Yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=Fe}var Me=(a&4)!==0,It=!Me&&(i==="scroll"||i==="scrollend"),te=Me?ce!==null?ce+"Capture":null:ce;Me=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||te===null||(me=qr(X,te),me!=null&&Me.push(du(X,me,oe))),It)break;X=X.return}0<Me.length&&(ce=new he(ce,Te,null,l,de),ge.push({event:ce,listeners:Me}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Dc&&(Te=l.relatedTarget||l.fromElement)&&(ui(Te)||Te[li]))break e;if((he||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Te=l.relatedTarget||l.toElement,he=le,Te=Te?ui(Te):null,Te!==null&&(It=o(Te),Me=Te.tag,Te!==It||Me!==5&&Me!==27&&Me!==6)&&(Te=null)):(he=null,Te=le),he!==Te)){if(Me=jc,me="onMouseLeave",te="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Me=Yi,me="onPointerLeave",te="onPointerEnter",X="pointer"),It=he==null?ce:ar(he),oe=Te==null?ce:ar(Te),ce=new Me(me,X+"leave",he,l,de),ce.target=It,ce.relatedTarget=oe,me=null,ui(de)===le&&(Me=new Me(te,X+"enter",Te,l,de),Me.target=oe,Me.relatedTarget=It,me=Me),It=me,he&&Te)t:{for(Me=mC,te=he,X=Te,oe=0,me=te;me;me=Me(me))oe++;me=0;for(var Ne=X;Ne;Ne=Me(Ne))me++;for(;0<oe-me;)te=Me(te),oe--;for(;0<me-oe;)X=Me(X),me--;for(;oe--;){if(te===X||X!==null&&te===X.alternate){Me=te;break t}te=Me(te),X=Me(X)}Me=null}else Me=null;he!==null&&j1(ge,ce,he,Me,!1),Te!==null&&It!==null&&j1(ge,It,Te,Me,!0)}}e:{if(ce=le?ar(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var ot=Z_;else if(X_(ce))if(ev)ot=SR;else{ot=ER;var Ie=xR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&el(le.elementType)&&(ot=Z_):ot=TR;if(ot&&(ot=ot(i,le))){J_(ge,ot,l,de);break e}Ie&&Ie(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Cc(ce,"number",ce.value)}switch(Ie=le?ar(le):window,i){case"focusin":(X_(Ie)||Ie.contentEditable==="true")&&(ll=Ie,yg=le,Bc=null);break;case"focusout":Bc=yg=ll=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,lv(ge,l,de);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":lv(ge,l,de)}var $e;if(ut)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ol?Ba(i,l)&&(We="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(bi&&l.locale!=="ko"&&(ol||We!=="onCompositionStart"?We==="onCompositionEnd"&&ol&&($e=Mc()):(pi=de,Oc="value"in pi?pi.value:pi.textContent,ol=!0)),Ie=qd(le,We),0<Ie.length&&(We=new vi(We,i,null,l,de),ge.push({event:We,listeners:Ie}),$e?We.data=$e:($e=al(l),$e!==null&&(We.data=$e)))),($e=Tr?_R(i,l):vR(i,l))&&(We=qd(le,"onBeforeInput"),0<We.length&&(Ie=new vi("onBeforeInput","beforeinput",null,l,de),ge.push({event:Ie,listeners:We}),Ie.data=$e)),uC(ge,i,le,l,de)}M1(ge,a)})}function du(i,a,l){return{instance:i,listener:a,currentTarget:l}}function qd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=qr(i,l),p!=null&&h.unshift(du(i,p,_)),p=qr(i,a),p!=null&&h.push(du(i,p,_))),i.tag===3)return h;i=i.return}return[]}function mC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function j1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var L=l,Q=L.alternate,le=L.stateNode;if(L=L.tag,Q!==null&&Q===h)break;L!==5&&L!==26&&L!==27||le===null||(Q=le,p?(le=qr(l,_),le!=null&&A.unshift(du(l,le,Q))):p||(le=qr(l,_),le!=null&&A.push(du(l,le,Q)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var gC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function V1(i){return(typeof i=="string"?i:""+i).replace(gC,`
`).replace(pC,"")}function L1(i,a){return a=V1(a),V1(i)===a}function At(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Xn(i,""+h);break;case"className":or(i,"class",h);break;case"tabIndex":or(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":or(i,l,h);break;case"style":kc(i,h,_);break;case"data":if(a!=="object"){or(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&At(i,a,"name",p.name,p,null),At(i,a,"formEncType",p.formEncType,p,null),At(i,a,"formMethod",p.formMethod,p,null),At(i,a,"formTarget",p.formTarget,p,null)):(At(i,a,"encType",p.encType,p,null),At(i,a,"method",p.method,p,null),At(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Hr);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=tl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Jo(i,"popover",h);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Jo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qh.get(l)||l,Jo(i,l,h))}}function Hp(i,a,l,h,p,_){switch(l){case"style":kc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&Xn(i,""+h);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[pn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Jo(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,_,A,l,null)}}p&&At(i,a,"srcSet",l.srcSet,l,null),h&&At(i,a,"src",l.src,l,null);return;case"input":Ye("invalid",i);var L=_=A=p=null,Q=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var de=l[h];if(de!=null)switch(h){case"name":p=de;break;case"type":A=de;break;case"checked":Q=de;break;case"defaultChecked":le=de;break;case"value":_=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,a));break;default:At(i,a,h,de,l,null)}}Bh(i,_,L,Q,le,A,p,!1);return;case"select":Ye("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(L=l[p],L!=null))switch(p){case"value":_=L;break;case"defaultValue":A=L;break;case"multiple":h=L;default:At(i,a,p,L,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Rs(i,!!h,a,!1):l!=null&&Rs(i,!!h,l,!0);return;case"textarea":Ye("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":h=L;break;case"defaultValue":p=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:At(i,a,A,L,l,null)}Cs(i,h,p,_);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(h=l[Q],h!=null))switch(Q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:At(i,a,Q,h,l,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(h=0;h<hu.length;h++)Ye(hu[h],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,le,h,l,null)}return;default:if(el(a)){for(de in l)l.hasOwnProperty(de)&&(h=l[de],h!==void 0&&Hp(i,a,de,h,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(h=l[L],h!=null&&At(i,a,L,h,l,null))}function yC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,L=null,Q=null,le=null,de=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:h.hasOwnProperty(he)||At(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":de=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&At(i,a,ce,he,h,ge)}}Zo(i,A,L,Q,le,de,_,p);return;case"select":he=A=L=ce=null;for(_ in l)if(Q=l[_],l.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":he=Q;default:h.hasOwnProperty(_)||At(i,a,_,null,h,Q)}for(p in h)if(_=h[p],Q=l[p],h.hasOwnProperty(p)&&(_!=null||Q!=null))switch(p){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":A=_;default:_!==Q&&At(i,a,p,_,h,Q)}a=L,l=A,h=he,ce!=null?Rs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Rs(i,!!l,a,!0):Rs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(L in l)if(p=l[L],l.hasOwnProperty(L)&&p!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:At(i,a,L,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&At(i,a,A,p,h,_)}Fh(i,ce,he);return;case"option":for(var Te in l)if(ce=l[Te],l.hasOwnProperty(Te)&&ce!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:At(i,a,Te,null,h,ce)}for(Q in h)if(ce=h[Q],he=l[Q],h.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:At(i,a,Q,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)ce=l[Me],l.hasOwnProperty(Me)&&ce!=null&&!h.hasOwnProperty(Me)&&At(i,a,Me,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:At(i,a,le,ce,h,he)}return;default:if(el(a)){for(var It in l)ce=l[It],l.hasOwnProperty(It)&&ce!==void 0&&!h.hasOwnProperty(It)&&Hp(i,a,It,void 0,h,ce);for(de in h)ce=h[de],he=l[de],!h.hasOwnProperty(de)||ce===he||ce===void 0&&he===void 0||Hp(i,a,de,ce,h,he);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!h.hasOwnProperty(te)&&At(i,a,te,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||At(i,a,ge,ce,h,he)}function U1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _C(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,L=p.duration;if(_&&L&&U1(A)){for(A=0,L=p.responseEnd,h+=1;h<l.length;h++){var Q=l[h],le=Q.startTime;if(le>L)break;var de=Q.transferSize,ge=Q.initiatorType;de&&U1(ge)&&(Q=Q.responseEnd,A+=de*(Q<L?1:(L-le)/(Q-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qp=null,$p=null;function $d(i){return i.nodeType===9?i:i.ownerDocument}function z1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Gp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kp=null;function vC(){var i=window.event;return i&&i.type==="popstate"?i===Kp?!1:(Kp=i,!0):(Kp=null,!1)}var F1=typeof setTimeout=="function"?setTimeout:void 0,bC=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(i){return H1.resolve(null).then(i).catch(xC)}:F1;function xC(i){setTimeout(function(){throw i})}function Js(i){return i==="head"}function q1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Pl(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")fu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,fu(l);for(var _=l.firstChild;_;){var A=_.nextSibling,L=_.nodeName;_[ci]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&fu(i.ownerDocument.body);l=p}while(l);Pl(a)}function $1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function Yp(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yp(l),Xo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function EC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[ci])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=kr(i.nextSibling),i===null)break}return null}function TC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=kr(i.nextSibling),i===null))return null;return i}function G1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=kr(i.nextSibling),i===null))return null;return i}function Qp(i){return i.data==="$?"||i.data==="$~"}function Wp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function SC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function kr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Xp=null;function K1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return kr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Y1(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Q1(i,a,l){switch(a=$d(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function fu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Xo(i)}var Dr=new Map,W1=new Set;function Gd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=D.d;D.d={f:AC,r:IC,D:RC,C:CC,L:NC,m:kC,X:OC,S:DC,M:MC};function AC(){var i=cs.f(),a=Vd();return i||a}function IC(i){var a=wr(i);a!==null&&a.tag===5&&a.type==="form"?fb(a):cs.r(i)}var Dl=typeof document>"u"?null:document;function X1(i,a,l){var h=Dl;if(h&&typeof a=="string"&&a){var p=Wn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),W1.has(p)||(W1.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),en(a),h.head.appendChild(a)))}}function RC(i){cs.D(i),X1("dns-prefetch",i,null)}function CC(i,a){cs.C(i,a),X1("preconnect",i,a)}function NC(i,a,l){cs.L(i,a,l);var h=Dl;if(h&&i&&a){var p='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Wn(l.imageSizes)+'"]')):p+='[href="'+Wn(i)+'"]';var _=p;switch(a){case"style":_=Ol(i);break;case"script":_=Ml(i)}Dr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Dr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(mu(_))||a==="script"&&h.querySelector(gu(_))||(a=h.createElement("link"),Rn(a,"link",i),en(a),h.head.appendChild(a)))}}function kC(i,a){cs.m(i,a);var l=Dl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ml(i)}if(!Dr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Dr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(gu(_)))return}h=l.createElement("link"),Rn(h,"link",i),en(h),l.head.appendChild(h)}}}function DC(i,a,l){cs.S(i,a,l);var h=Dl;if(h&&i){var p=hi(h).hoistableStyles,_=Ol(i);a=a||"default";var A=p.get(_);if(!A){var L={loading:0,preload:null};if(A=h.querySelector(mu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Dr.get(_))&&Jp(i,l);var Q=A=h.createElement("link");en(Q),Rn(Q,"link",i),Q._p=new Promise(function(le,de){Q.onload=le,Q.onerror=de}),Q.addEventListener("load",function(){L.loading|=1}),Q.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Kd(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:L},p.set(_,A)}}}function OC(i,a){cs.X(i,a);var l=Dl;if(l&&i){var h=hi(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(gu(p)),_||(i=y({src:i,async:!0},a),(a=Dr.get(p))&&Zp(i,a),_=l.createElement("script"),en(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function MC(i,a){cs.M(i,a);var l=Dl;if(l&&i){var h=hi(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(gu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Dr.get(p))&&Zp(i,a),_=l.createElement("script"),en(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function J1(i,a,l,h){var p=(p=_e.current)?Gd(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ol(l.href),l=hi(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ol(l.href);var _=hi(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(mu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Dr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Dr.set(i,l),_||PC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ml(l),l=hi(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ol(i){return'href="'+Wn(i)+'"'}function mu(i){return'link[rel="stylesheet"]['+i+"]"}function Z1(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function PC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),en(a),i.head.appendChild(a))}function Ml(i){return'[src="'+Wn(i)+'"]'}function gu(i){return"script[async]"+i}function ew(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Wn(l.href)+'"]');if(h)return a.instance=h,en(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),en(h),Rn(h,"style",p),Kd(h,l.precedence,i),a.instance=h;case"stylesheet":p=Ol(l.href);var _=i.querySelector(mu(p));if(_)return a.state.loading|=4,a.instance=_,en(_),_;h=Z1(l),(p=Dr.get(p))&&Jp(h,p),_=(i.ownerDocument||i).createElement("link"),en(_);var A=_;return A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),a.state.loading|=4,Kd(_,l.precedence,i),a.instance=_;case"script":return _=Ml(l.src),(p=i.querySelector(gu(_)))?(a.instance=p,en(p),p):(h=l,(p=Dr.get(_))&&(h=y({},l),Zp(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),en(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Kd(h,l.precedence,i));return a.instance}function Kd(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var L=h[A];if(L.dataset.precedence===a)_=L;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Jp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Zp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Yd=null;function tw(i,a,l){if(Yd===null){var h=new Map,p=Yd=new Map;p.set(l,h)}else p=Yd,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[ci]||_[Zt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var L=h.get(A);L?L.push(_):h.set(A,[_])}}return h}function nw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function jC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function rw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function VC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ol(h.href),_=a.querySelector(mu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Qd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,en(_);return}_=a.ownerDocument||a,h=Z1(h),(p=Dr.get(p))&&Jp(h,p),_=_.createElement("link"),en(_);var A=_;A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Qd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ey=0;function LC(i,a){return i.stylesheets&&i.count===0&&Xd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Xd(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&ey===0&&(ey=62500*_C());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xd(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ey?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wd=null;function Xd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wd=new Map,a.forEach(UC,i),Wd=null,Qd.call(i))}function UC(i,a){if(!(a.state.loading&4)){var l=Wd.get(i);if(l)var h=l.get(null);else{l=new Map,Wd.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=Qd.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var pu={$$typeof:U,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function zC(i,a,l,h,p,_,A,L,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function iw(i,a,l,h,p,_,A,L,Q,le,de,ge){return i=new zC(i,a,l,A,Q,le,de,ge,L),a=1,_===!0&&(a|=24),_=cr(3,null,null,a),i.current=_,_.stateNode=i,a=Og(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Vg(_),i}function sw(i){return i?(i=hl,i):hl}function aw(i,a,l,h,p,_){p=sw(p),h.context===null?h.context=p:h.pendingContext=p,h=Bs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Fs(i,h,a),l!==null&&(rr(l,i,a),Yc(l,i,a))}function ow(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ty(i,a){ow(i,a),(i=i.alternate)&&ow(i,a)}function lw(i){if(i.tag===13||i.tag===31){var a=qa(i,67108864);a!==null&&rr(a,i,67108864),ty(i,67108864)}}function cw(i){if(i.tag===13||i.tag===31){var a=mr();a=Da(a);var l=qa(i,a);l!==null&&rr(l,i,a),ty(i,a)}}var Jd=!0;function BC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=2,ny(i,a,l,h)}finally{D.p=_,P.T=p}}function FC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=8,ny(i,a,l,h)}finally{D.p=_,P.T=p}}function ny(i,a,l,h){if(Jd){var p=ry(h);if(p===null)Fp(i,a,h,Zd,l),hw(i,h);else if(qC(p,i,a,l,h))h.stopPropagation();else if(hw(i,h),a&4&&-1<HC.indexOf(i)){for(;p!==null;){var _=wr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var Q=1<<31-kt(A);L.entanglements[1]|=Q,A&=~Q}Ti(_),(ht&6)===0&&(Pd=xe()+500,uu(0))}}break;case 31:case 13:L=qa(_,2),L!==null&&rr(L,_,2),Vd(),ty(_,2)}if(_=ry(h),_===null&&Fp(i,a,h,Zd,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Fp(i,a,h,null,l)}}function ry(i){return i=xr(i),iy(i)}var Zd=null;function iy(i){if(Zd=null,i=ui(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Zd=i,null}function uw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(et()){case gt:return 2;case Bn:return 8;case ct:case Fn:return 32;case zt:return 268435456;default:return 32}default:return 32}}var sy=!1,Zs=null,ea=null,ta=null,yu=new Map,_u=new Map,na=[],HC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(i,a){switch(i){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":yu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(a.pointerId)}}function vu(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=wr(a),a!==null&&lw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function qC(i,a,l,h,p){switch(a){case"focusin":return Zs=vu(Zs,i,a,l,h,p),!0;case"dragenter":return ea=vu(ea,i,a,l,h,p),!0;case"mouseover":return ta=vu(ta,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return yu.set(_,vu(yu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,_u.set(_,vu(_u.get(_)||null,i,a,l,h,p)),!0}return!1}function dw(i){var a=ui(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Br(i.priority,function(){cw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,Br(i.priority,function(){cw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ef(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ry(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Dc=h,l.target.dispatchEvent(h),Dc=null}else return a=wr(l),a!==null&&lw(a),i.blockedOn=l,!1;a.shift()}return!0}function fw(i,a,l){ef(i)&&l.delete(a)}function $C(){sy=!1,Zs!==null&&ef(Zs)&&(Zs=null),ea!==null&&ef(ea)&&(ea=null),ta!==null&&ef(ta)&&(ta=null),yu.forEach(fw),_u.forEach(fw)}function tf(i,a){i.blockedOn===a&&(i.blockedOn=null,sy||(sy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,$C)))}var nf=null;function mw(i){nf!==i&&(nf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nf===i&&(nf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(iy(h||l)===null)continue;break}var _=wr(l);_!==null&&(i.splice(a,3),a-=3,rp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Pl(i){function a(Q){return tf(Q,i)}Zs!==null&&tf(Zs,i),ea!==null&&tf(ea,i),ta!==null&&tf(ta,i),yu.forEach(a),_u.forEach(a);for(var l=0;l<na.length;l++){var h=na[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<na.length&&(l=na[0],l.blockedOn===null);)dw(l),l.blockedOn===null&&na.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[pn]||null;if(typeof _=="function")A||mw(l);else if(A){var L=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[pn]||null)L=A.formAction;else if(iy(p)!==null)continue}else L=A.action;typeof L=="function"?l[h+1]=L:(l.splice(h,3),h-=3),mw(l)}}}function gw(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function ay(i){this._internalRoot=i}rf.prototype.render=ay.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=mr();aw(l,h,i,a,null,null)},rf.prototype.unmount=ay.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;aw(i.current,2,null,i,null,null),Vd(),a[li]=null}};function rf(i){this._internalRoot=i}rf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Vh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<na.length&&a!==0&&a<na[l].priority;l++);na.splice(l,0,i),l===0&&dw(i)}};var pw=e.version;if(pw!=="19.2.3")throw Error(n(527,pw,"19.2.3"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var GC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Gt=sf.inject(GC),Et=sf}catch{}}return wu.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=Eb,_=Tb,A=Sb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=iw(i,1,!1,null,null,l,h,null,p,_,A,gw),i[li]=a.current,Bp(i),new ay(a)},wu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=Eb,A=Tb,L=Sb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=iw(i,1,!0,a,l??null,h,p,Q,_,A,L,gw),a.context=sw(null),l=a.current,h=mr(),h=Da(h),p=Bs(h),p.callback=null,Fs(l,p,h),l=h,a.current.lanes=l,Na(a,l),Ti(a),i[li]=a.current,Bp(i),new rf(a)},wu.version="19.2.3",wu}var Aw;function iN(){if(Aw)return cy.exports;Aw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cy.exports=rN(),cy.exports}var sN=iN();var Iw="popstate";function aN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Uo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Ly("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Wu(o))}function n(s,o){Lr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return lN(e,t,n,r)}function Ut(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oN(){return Math.random().toString(36).substring(2,10)}function Rw(r,e){return{usr:r.state,key:r.key,idx:e}}function Ly(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Uo(e):e,state:t,key:e&&e.key||n||oN()}}function Wu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Uo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function lN(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let O=g(),V=O==null?null:O-f;f=O,d&&d({action:u,location:k.location,delta:V})}function v(O,V){u="PUSH";let q=Ly(k.location,O,V);t&&t(q,O),f=g()+1;let U=Rw(q,f),H=k.createHref(q);try{c.pushState(U,"",H)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(H)}o&&d&&d({action:u,location:k.location,delta:1})}function w(O,V){u="REPLACE";let q=Ly(k.location,O,V);t&&t(q,O),f=g();let U=Rw(q,f),H=k.createHref(q);c.replaceState(U,"",H),o&&d&&d({action:u,location:k.location,delta:0})}function E(O){return cN(O)}let k={get action(){return u},get location(){return r(s,c)},listen(O){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Iw,y),d=O,()=>{s.removeEventListener(Iw,y),d=null}},createHref(O){return e(s,O)},createURL:E,encodeLocation(O){let V=E(O);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(O){return c.go(O)}};return k}function cN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ut(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Wu(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function PT(r,e,t="/"){return uN(r,e,t,!1)}function uN(r,e,t,n){let s=typeof e=="string"?Uo(e):e,o=ys(s.pathname||"/",t);if(o==null)return null;let c=jT(r);hN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=xN(o);u=bN(c[d],f,n)}return u}function jT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;Ut(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(Ut(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),jT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:_N(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of VT(c.path))o(c,u,!0,d)}),e}function VT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=VT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function hN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:vN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var dN=/^:[\w-]+$/,fN=3,mN=2,gN=1,pN=10,yN=-2,Cw=r=>r==="*";function _N(r,e){let t=r.split("/"),n=t.length;return t.some(Cw)&&(n+=yN),e&&(n+=mN),t.filter(s=>!Cw(s)).reduce((s,o)=>s+(dN.test(o)?fN:o===""?gN:pN),n)}function vN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function bN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:IN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function zf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=wN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let E=u[v]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function wN(r,e=!1,t=!0){Lr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function xN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ys(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var EN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TN=r=>EN.test(r);function SN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Uo(r):r,o;if(t)if(TN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Lr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Nw(t.substring(1),"/"):o=Nw(t,e)}else o=e;return{pathname:o,search:RN(n),hash:CN(s)}}function Nw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function fy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LT(r){let e=AN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function UT(r,e,t,n=!1){let s;typeof r=="string"?s=Uo(r):(s={...r},Ut(!s.pathname||!s.pathname.includes("?"),fy("?","pathname","search",s)),Ut(!s.pathname||!s.pathname.includes("#"),fy("#","pathname","hash",s)),Ut(!s.search||!s.search.includes("#"),fy("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=SN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),IN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),RN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,CN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function NN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function kN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var DN=["GET",...zT];new Set(DN);var gc=$.createContext(null);gc.displayName="DataRouter";var Rm=$.createContext(null);Rm.displayName="DataRouterState";$.createContext(!1);var BT=$.createContext({isTransitioning:!1});BT.displayName="ViewTransition";var ON=$.createContext(new Map);ON.displayName="Fetchers";var MN=$.createContext(null);MN.displayName="Await";var ii=$.createContext(null);ii.displayName="Navigation";var ph=$.createContext(null);ph.displayName="Location";var si=$.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var N0=$.createContext(null);N0.displayName="RouteError";function PN(r,{relative:e}={}){Ut(yh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ii),{hash:s,pathname:o,search:c}=_h(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function yh(){return $.useContext(ph)!=null}function vr(){return Ut(yh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(ph).location}var FT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HT(r){$.useContext(ii).static||$.useLayoutEffect(r)}function Es(){let{isDataRoute:r}=$.useContext(si);return r?WN():jN()}function jN(){Ut(yh(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(gc),{basename:e,navigator:t}=$.useContext(ii),{matches:n}=$.useContext(si),{pathname:s}=vr(),o=JSON.stringify(LT(n)),c=$.useRef(!1);return HT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Lr(c.current,FT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=UT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var VN=$.createContext(null);function LN(r){let e=$.useContext(si).outlet;return $.useMemo(()=>e&&$.createElement(VN.Provider,{value:r},e),[e,r])}function qT(){let{matches:r}=$.useContext(si),e=r[r.length-1];return e?e.params:{}}function _h(r,{relative:e}={}){let{matches:t}=$.useContext(si),{pathname:n}=vr(),s=JSON.stringify(LT(t));return $.useMemo(()=>UT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function UN(r,e){return $T(r,e)}function $T(r,e,t,n,s){Ut(yh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ii),{matches:c}=$.useContext(si),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let q=y&&y.path||"";GT(f,!y||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let v=vr(),w;if(e){let q=typeof e=="string"?Uo(e):e;Ut(g==="/"||q.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${q.pathname}" was given in the \`location\` prop.`),w=q}else w=v;let E=w.pathname||"/",k=E;if(g!=="/"){let q=g.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(q.length).join("/")}let O=PT(r,{pathname:k});Lr(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Lr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=qN(O&&O.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function zN(){let r=QN(),e=NN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var BN=$.createElement(zN,null),FN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(si.Provider,{value:this.props.routeContext},$.createElement(N0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HN({routeContext:r,match:e,children:t}){let n=$.useContext(gc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(si.Provider,{value:r},t)}function qN(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Ut(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:kN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,E=!1,k=null,O=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||BN,u&&(d<0&&v===0?(GT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):d===v&&(E=!0,O=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),q=()=>{let U;return w?U=k:E?U=O:y.route.Component?U=$.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=g,$.createElement(HN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:U})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(FN,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:q(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):q()},null)}function k0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $N(r){let e=$.useContext(gc);return Ut(e,k0(r)),e}function GN(r){let e=$.useContext(Rm);return Ut(e,k0(r)),e}function KN(r){let e=$.useContext(si);return Ut(e,k0(r)),e}function D0(r){let e=KN(r),t=e.matches[e.matches.length-1];return Ut(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function YN(){return D0("useRouteId")}function QN(){let r=$.useContext(N0),e=GN("useRouteError"),t=D0("useRouteError");return r!==void 0?r:e.errors?.[t]}function WN(){let{router:r}=$N("useNavigate"),e=D0("useNavigate"),t=$.useRef(!1);return HT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Lr(t.current,FT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var kw={};function GT(r,e,t){!e&&!kw[r]&&(kw[r]=!0,Lr(!1,t))}$.memo(XN);function XN({routes:r,future:e,state:t,unstable_onError:n}){return $T(r,void 0,t,n,e)}function JN(r){return LN(r.context)}function Xr(r){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZN({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){Ut(!yh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Uo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,E=$.useMemo(()=>{let k=ys(f,u);return k==null?null:{location:{pathname:k,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Lr(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:$.createElement(ii.Provider,{value:d},$.createElement(ph.Provider,{children:e,value:E}))}function ek({children:r,location:e}){return UN(Uy(r),e)}function Uy(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,Uy(n.props.children,o));return}Ut(n.type===Xr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Uy(n.props.children,o)),t.push(c)}),t}var vf="get",bf="application/x-www-form-urlencoded";function Cm(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function tk(r){return Cm(r)&&r.tagName.toLowerCase()==="button"}function nk(r){return Cm(r)&&r.tagName.toLowerCase()==="form"}function rk(r){return Cm(r)&&r.tagName.toLowerCase()==="input"}function ik(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function sk(r,e){return r.button===0&&(!e||e==="_self")&&!ik(r)}var af=null;function ak(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var ok=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function my(r){return r!=null&&!ok.has(r)?(Lr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):r}function lk(r,e){let t,n,s,o,c;if(nk(r)){let u=r.getAttribute("action");n=u?ys(u,e):null,t=r.getAttribute("method")||vf,s=my(r.getAttribute("enctype"))||bf,o=new FormData(r)}else if(tk(r)||rk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ys(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||vf,s=my(r.getAttribute("formenctype"))||my(u.getAttribute("enctype"))||bf,o=new FormData(u,r),!ak()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Cm(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vf,n=null,s=bf,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function O0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ck(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ys(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function uk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function dk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await uk(o,t);return c.links?c.links():[]}return[]}));return pk(n.flat(1).filter(hk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Dw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function fk(r,e,{includeHydrateFallback:t}={}){return mk(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function mk(r){return[...new Set(r)]}function gk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function pk(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(gk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function KT(){let r=$.useContext(gc);return O0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function yk(){let r=$.useContext(Rm);return O0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var M0=$.createContext(void 0);M0.displayName="FrameworkContext";function YT(){let r=$.useContext(M0);return O0(r,"You must render this element inside a <HydratedRouter> element"),r}function _k(r,e){let t=$.useContext(M0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let k=V=>{V.forEach(q=>{c(q.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[r]),$.useEffect(()=>{if(n){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[n]);let w=()=>{s(!0)},E=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:xu(u,w),onBlur:xu(d,E),onMouseEnter:xu(f,w),onMouseLeave:xu(g,E),onTouchStart:xu(y,w)}]:[!1,v,{}]}function xu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function vk({page:r,...e}){let{router:t}=KT(),n=$.useMemo(()=>PT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(wk,{page:r,matches:n,...e}):null}function bk(r){let{manifest:e,routeModules:t}=YT(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return dk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function wk({page:r,matches:e,...t}){let n=vr(),{manifest:s,routeModules:o}=YT(),{basename:c}=KT(),{loaderData:u,matches:d}=yk(),f=$.useMemo(()=>Dw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>Dw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let E=new Set,k=!1;if(e.forEach(V=>{let q=s.routes[V.route.id];!q||!q.hasLoader||(!f.some(U=>U.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||q.hasClientLoader?k=!0:E.add(V.route.id))}),E.size===0)return[];let O=ck(r,c,"data");return k&&E.size>0&&O.searchParams.set("_routes",e.filter(V=>E.has(V.route.id)).map(V=>V.route.id).join(",")),[O.pathname+O.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>fk(g,s),[g,s]),w=bk(g);return $.createElement($.Fragment,null,y.map(E=>$.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>$.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:k})=>$.createElement("link",{key:E,nonce:t.nonce,...k})))}function xk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QT&&(window.__reactRouterVersion="7.10.1")}catch{}function Ek({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=aN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(ZN,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var WT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ei=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:E,unstable_useTransitions:k}=$.useContext(ii),O=typeof f=="string"&&WT.test(f),V,q=!1;if(typeof f=="string"&&O&&(V=f,QT))try{let R=new URL(window.location.href),N=f.startsWith("//")?new URL(R.protocol+f):new URL(f),j=ys(N.pathname,E);N.origin===R.origin&&j!=null?f=j+N.search+N.hash:q=!0}catch{Lr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=PN(f,{relative:s}),[H,K,z]=_k(n,v),M=Ik(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:k});function S(R){e&&e(R),R.defaultPrevented||M(R)}let T=$.createElement("a",{...v,...z,href:V||U,onClick:q||o?e:S,ref:xk(w,K),target:d,"data-discover":!O&&t==="render"?"true":void 0});return H&&!O?$.createElement($.Fragment,null,T,$.createElement(vk,{page:U})):T});ei.displayName="Link";var Tk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=_h(c,{relative:f.relative}),v=vr(),w=$.useContext(Rm),{navigator:E,basename:k}=$.useContext(ii),O=w!=null&&Dk(y)&&u===!0,V=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,q=v.pathname,U=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(q=q.toLowerCase(),U=U?U.toLowerCase():null,V=V.toLowerCase()),U&&k&&(U=ys(U,k)||U);const H=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let K=q===V||!s&&q.startsWith(V)&&q.charAt(H)==="/",z=U!=null&&(U===V||!s&&U.startsWith(V)&&U.charAt(V.length)==="/"),M={isActive:K,isPending:z,isTransitioning:O},S=K?e:void 0,T;typeof n=="function"?T=n(M):T=[n,K?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(M):o;return $.createElement(ei,{...f,"aria-current":S,className:T,ref:g,style:R,to:c,viewTransition:u},typeof d=="function"?d(M):d)});Tk.displayName="NavLink";var Sk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=vf,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:E}=$.useContext(ii),k=Nk(),O=kk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",q=typeof u=="string"&&WT.test(u),U=H=>{if(d&&d(H),H.defaultPrevented)return;H.preventDefault();let K=H.nativeEvent.submitter,z=K?.getAttribute("formmethod")||c,M=()=>k(K||H.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});E&&t!==!1?$.startTransition(()=>M()):M()};return $.createElement("form",{ref:w,method:V,action:O,onSubmit:n?d:U,...v,"data-discover":!q&&r==="render"?"true":void 0})});Sk.displayName="Form";function Ak(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XT(r){let e=$.useContext(gc);return Ut(e,Ak(r)),e}function Ik(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Es(),f=vr(),g=_h(r,{relative:o});return $.useCallback(y=>{if(sk(y,e)){y.preventDefault();let v=t!==void 0?t:Wu(f)===Wu(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var Rk=0,Ck=()=>`__${String(++Rk)}__`;function Nk(){let{router:r}=XT("useSubmit"),{basename:e}=$.useContext(ii),t=YN(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=lk(o,e);if(c.navigate===!1){let v=c.fetcherKey||Ck();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function kk(r,{relative:e}={}){let{basename:t}=$.useContext(ii),n=$.useContext(si);Ut(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={..._h(r||".",{relative:e})},c=vr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),Wu(o)}function Dk(r,{relative:e}={}){let t=$.useContext(BT);Ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=XT("useViewTransitionState"),s=_h(r,{relative:e});if(!t.isTransitioning)return!1;let o=ys(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ys(t.nextLocation.pathname,n)||t.nextLocation.pathname;return zf(s.pathname,c)!=null||zf(s.pathname,o)!=null}const Ve=r=>typeof r=="string",Eu=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Ow=r=>r==null?"":""+r,Ok=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Mk=/###/g,Mw=r=>r&&r.indexOf("###")>-1?r.replace(Mk,"."):r,Pw=r=>!r||Ve(r),ju=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Pw(r))return{};const o=Mw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Pw(r)?{}:{obj:r,k:Mw(n[s])}},jw=(r,e,t)=>{const{obj:n,k:s}=ju(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=ju(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=ju(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},Pk=(r,e,t,n)=>{const{obj:s,k:o}=ju(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Bf=(r,e)=>{const{obj:t,k:n}=ju(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},jk=(r,e,t)=>{const n=Bf(r,t);return n!==void 0?n:Bf(e,t)},JT=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):JT(r[n],e[n],t):r[n]=e[n]);return r},jl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Vk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Lk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>Vk[e]):r;class Uk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const zk=[" ",",","?","!",";"],Bk=new Uk(20),Fk=(r,e,t)=>{e=e||"",t=t||"";const n=zk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Bk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},zy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},Xu=r=>r?.replace("_","-"),Hk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let qk=class By{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Hk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new By(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new By(this.logger,e)}};var Ci=new qk;class Nm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Vw extends Nm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Bf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:zy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),jw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Bf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?JT(d,n,o):d={...d,...n},jw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var ZT={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const eS=Symbol("i18next/PATH_KEY");function $k(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===eS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Fy(r,e){const{[eS]:t}=r($k());return t.join(e?.keySeparator??".")}const Lw={},gy=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Ff extends Nm{constructor(e,t={}){super(),Ok(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ci.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=gy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Fk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Fy(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let E=w?.res;const k=w?.usedKey||u,O=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],q=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,U=!this.i18nFormat||this.i18nFormat.handleAsObject,H=s.count!==void 0&&!Ve(s.count),K=Ff.hasDefaultValue(s),z=H?this.pluralResolver.getSuffix(y,s.count,s):"",M=s.ordinal&&H?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",S=H&&!s.ordinal&&s.count===0,T=S&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${M}`]||s.defaultValue;let R=E;U&&!E&&K&&(R=T);const N=gy(R),j=Object.prototype.toString.apply(R);if(U&&R&&N&&V.indexOf(j)<0&&!(Ve(q)&&Array.isArray(R))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,R,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=C,w.usedParams=this.getUsedParamsDetails(s),w):C}if(c){const C=Array.isArray(R),G=C?[]:{},J=C?O:k;for(const P in R)if(Object.prototype.hasOwnProperty.call(R,P)){const D=`${J}${c}${P}`;K&&!E?G[P]=this.translate(D,{...s,defaultValue:gy(T)?T[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(D,{...s,joinArrays:!1,ns:d}),G[P]===D&&(G[P]=R[P])}E=G}}else if(U&&Ve(q)&&Array.isArray(E))E=E.join(q),E&&(E=this.extendTranslation(E,e,s,n));else{let C=!1,G=!1;!this.isValidLookup(E)&&K&&(C=!0,E=T),this.isValidLookup(E)||(G=!0,E=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:E,D=K&&T!==E&&this.options.updateMissing;if(G||C||D){if(this.logger.log(D?"updateKey":"missingKey",y,f,u,D?T:E),c){const F=this.resolve(u,{...s,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Z=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let F=0;F<W.length;F++)Z.push(W[F]);else this.options.saveMissingTo==="all"?Z=this.languageUtils.toResolveHierarchy(s.lng||this.language):Z.push(s.lng||this.language);const ee=(F,Y,re)=>{const ie=K&&re!==E?re:P;this.options.missingKeyHandler?this.options.missingKeyHandler(F,f,Y,ie,D,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,f,Y,ie,D,s),this.emit("missingKey",F,f,Y,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?Z.forEach(F=>{const Y=this.pluralResolver.getSuffixes(F,s);S&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(re=>{ee([F],u+re,s[`defaultValue${re}`]||T)})}):ee(Z,u,T))}E=this.extendTranslation(E,e,s,w,n),G&&E===u&&this.options.appendNamespaceToMissingKey&&(E=`${f}${g}${u}`),(G||C)&&this.options.parseMissingKeyHandler&&(E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,C?E:void 0,s))}return o?(w.res=E,w.usedParams=this.getUsedParamsDetails(s),w):E}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=ZT.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,E=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",k=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(O=>{this.isValidLookup(n)||(u=O,!Lw[`${k[0]}-${O}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(Lw[`${k[0]}-${O}`]=!0,this.logger.warn(`key "${s}" for languages "${k.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(V=>{if(this.isValidLookup(n))return;c=V;const q=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,g,V,O,t);else{let H;v&&(H=this.pluralResolver.getSuffix(V,t.count,t));const K=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&H.indexOf(z)===0&&q.push(g+H.replace(z,this.options.pluralSeparator)),q.push(g+H),w&&q.push(g+K)),E){const M=`${g}${this.options.contextSeparator||"_"}${t.context}`;q.push(M),v&&(t.ordinal&&H.indexOf(z)===0&&q.push(M+H.replace(z,this.options.pluralSeparator)),q.push(M+H),w&&q.push(M+K))}}let U;for(;U=q.pop();)this.isValidLookup(n)||(o=U,n=this.getResource(V,O,U,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class Uw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ci.create("languageUtils")}getScriptPartFromCode(e){if(e=Xu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Xu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const zw={zero:0,one:1,two:2,few:3,many:4,other:5},Bw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Gk{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ci.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=Xu(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Bw;if(!e.match(/-|_/))return Bw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>zw[s]-zw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Fw=(r,e,t,n=".",s=!0)=>{let o=jk(r,e,t);return!o&&s&&Ve(t)&&(o=zy(r,t,n),o===void 0&&(o=zy(e,t,n))),o},py=r=>r.replace(/\$/g,"$$$$");class Hw{constructor(e={}){this.logger=Ci.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:E,nestingSuffixEscaped:k,nestingOptionsSeparator:O,maxReplaces:V,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:Lk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?jl(o):c||"{{",this.suffix=u?jl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?jl(v):w||jl("$t("),this.nestingSuffix=E?jl(E):k||jl(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=V||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Fw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const E=w.split(this.formatSeparator),k=E.shift().trim(),O=E.join(this.formatSeparator).trim();return this.format(Fw(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure),O,n,{...s,...t,interpolationkey:k})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>py(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?py(this.escape(w)):py(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const E=o[1].trim();if(c=f(E),c===void 0)if(typeof g=="function"){const O=g(e,o,s);c=Ve(O)?O:""}else if(s&&Object.prototype.hasOwnProperty.call(s,E))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${E} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Ow(c));const k=w.safeValue(c);if(e=e.replace(o[0],k),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),E=v.match(/"/g);((w?.length??0)%2===0&&!E||E.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,k),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Ow(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const Kk=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},qw=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(Xu(n),s),e[c]=u),u(t)}},Yk=r=>(e,t,n)=>r(Xu(t),n)(e);class Qk{constructor(e={}){this.logger=Ci.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?qw:Yk;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=qw(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=Kk(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const Wk=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class Xk extends Nm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ci.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{Pk(d.loaded,[o],c),Wk(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const $w=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Gw=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),of=()=>{},Jk=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Vu extends Nm{constructor(e={},t){if(super(),this.options=Gw(e),this.services={},this.logger=Ci,this.modules={external:[]},Jk(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=$w();this.options={...n,...this.options,...Gw(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ci.init(s(this.modules.logger),this.options):Ci.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=Qk;const g=new Uw(this.options);this.store=new Vw(this.options.resources,this.options);const y=this.services;y.logger=Ci,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new Gk(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Hw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new Xk(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Ff(this.services,this.options),this.translator.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=of),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Eu(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=of){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Eu();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=of),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ZT.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Eu();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=Fy(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=Fy(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Eu();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Eu();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Uw($w());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new Vu(e,t);return n.createInstance=Vu.createInstance,n}cloneInstance(e={},t=of){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Vu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new Vw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Hw(s)),o.translator=new Ff(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=Vu.createInstance();Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const Zk=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);xo(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Kw={},tS=(r,e,t,n)=>{xo(t)&&Kw[t]||(xo(t)&&(Kw[t]=new Date),Zk(r,e,t,n))},nS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Hy=(r,e,t)=>{r.loadNamespaces(e,nS(r,t))},Yw=(r,e,t,n)=>{if(xo(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Hy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,nS(r,n))},e4=(r,e,t={})=>!e.languages||!e.languages.length?(tS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),xo=r=>typeof r=="string",t4=r=>typeof r=="object"&&r!==null,n4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,r4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},i4=r=>r4[r],s4=r=>r.replace(n4,i4);let qy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:s4,transDefaultProps:void 0};const a4=(r={})=>{qy={...qy,...r}},o4=()=>qy;let rS;const l4=r=>{rS=r},c4=()=>rS,u4={type:"3rdParty",init(r){a4(r.options.react),l4(r)}},h4=$.createContext();class d4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var yy={exports:{}},_y={};var Qw;function f4(){if(Qw)return _y;Qw=1;var r=Im();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),E=n({inst:{value:w,getSnapshot:v}}),k=E[0].inst,O=E[1];return o(function(){k.value=w,k.getSnapshot=v,d(k)&&O({inst:k})},[y,w,v]),s(function(){return d(k)&&O({inst:k}),y(function(){d(k)&&O({inst:k})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return _y.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,_y}var Ww;function m4(){return Ww||(Ww=1,yy.exports=f4()),yy.exports}var g4=m4();const p4=(r,e)=>xo(e)?e:t4(e)&&xo(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,y4={t:p4,ready:!1},_4=()=>()=>{},zn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(h4)||{},o=t||n||c4();o&&!o.reportNamespaces&&(o.reportNamespaces=new d4),o||tS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...o4(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=xo(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(T=>{if(!o)return _4;const{bindI18n:R,bindI18nStore:N}=c,j=()=>{v.current+=1,T()};return R&&o.on(R,j),N&&o.store.on(N,j),()=>{R&&R.split(" ").forEach(C=>o.off(C,j)),N&&N.split(" ").forEach(C=>o.store.off(C,j))}},[o,c]),E=$.useRef(),k=$.useCallback(()=>{if(!o)return y4;const T=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(J=>e4(J,o,c)),R=e.lng||o.language,N=v.current,j=E.current;if(j&&j.ready===T&&j.lng===R&&j.keyPrefix===d&&j.revision===N)return j;const G={t:o.getFixedT(R,c.nsMode==="fallback"?y:y[0],d),ready:T,lng:R,keyPrefix:d,revision:N};return E.current=G,G},[o,y,d,c,e.lng]),[O,V]=$.useState(0),{t:q,ready:U}=g4.useSyncExternalStore(w,k,k);$.useEffect(()=>{if(o&&!U&&!u){const T=()=>V(R=>R+1);e.lng?Yw(o,e.lng,y,T):Hy(o,y,T)}},[o,e.lng,y,U,u,O]);const H=o||{},K=$.useRef(null),z=$.useRef(),M=T=>{const R=Object.getOwnPropertyDescriptors(T);R.__original&&delete R.__original;const N=Object.create(Object.getPrototypeOf(T),R);if(!Object.prototype.hasOwnProperty.call(N,"__original"))try{Object.defineProperty(N,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return N},S=$.useMemo(()=>{const T=H,R=T?.language;let N=T;T&&(K.current&&K.current.__original===T?z.current!==R?(N=M(T),K.current=N,z.current=R):N=K.current:(N=M(T),K.current=N,z.current=R));const j=[q,N,U];return j.t=q,j.i18n=N,j.ready=U,j},[q,H,U,H.resolvedLanguage,H.language,H.languages]);if(o&&u&&!U)throw new Promise(T=>{const R=()=>T();e.lng?Yw(o,e.lng,y,R):Hy(o,y,R)});return S},v4=()=>{};var Xw={};const iS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},b4=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},sS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(iS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):b4(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new w4;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const E=f<<6&192|y;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class w4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x4=function(r){const e=iS(r);return sS.encodeByteArray(e,!0)},Hf=function(r){return x4(r).replace(/\./g,"")},aS=function(r){try{return sS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const E4=()=>oS().__FIREBASE_DEFAULTS__,T4=()=>{if(typeof process>"u"||typeof Xw>"u")return;const r=Xw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},S4=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&aS(r[1]);return e&&JSON.parse(e)},km=()=>{try{return v4()||E4()||T4()||S4()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lS=r=>km()?.emulatorHosts?.[r],cS=r=>{const e=lS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},uS=()=>km()?.config,hS=r=>km()?.[`_${r}`];class A4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P0(r){return(await fetch(r,{credentials:"include"})).ok}function dS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hf(JSON.stringify(t)),Hf(JSON.stringify(c)),""].join(".")}const Lu={};function I4(){const r={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?r.emulator.push(e):r.prod.push(e);return r}function R4(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Jw=!1;function j0(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||Lu[r]===e||Lu[r]||Jw)return;Lu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=I4().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Jw=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=R4(n),w=t("text"),E=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),V=t("preprendIcon"),q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;u(U),g(O,k);const H=f();d(q,V),U.append(q,E,O,H),document.body.appendChild(U)}o?(E.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function fS(){const r=km()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k4(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function D4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O4(){const r=fn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function mS(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){return!fS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function pS(){try{return typeof indexedDB=="object"}catch{return!1}}function M4(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const P4="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=P4,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vh.prototype.create)}}class vh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?j4(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function j4(r,e){return r.replace(V4,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const V4=/\{\$([^}]+)}/g;function L4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _s(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(Zw(o)&&Zw(c)){if(!_s(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Zw(r){return r!==null&&typeof r=="object"}function bh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Cu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Nu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function U4(r,e){const t=new z4(r,e);return t.subscribe.bind(t)}class z4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");B4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=vy),s.error===void 0&&(s.error=vy),s.complete===void 0&&(s.complete=vy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B4(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function vy(){}function Xt(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class F4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new A4;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q4(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:H4(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H4(r){return r===io?void 0:r}function q4(r){return r.instantiationMode==="EAGER"}class $4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const G4={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},K4=Xe.INFO,Y4={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},Q4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=Y4[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V0{constructor(e){this.name=e,this._logLevel=K4,this._logHandler=Q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const W4=(r,e)=>e.some(t=>r instanceof t);let ex,tx;function X4(){return ex||(ex=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J4(){return tx||(tx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yS=new WeakMap,$y=new WeakMap,_S=new WeakMap,by=new WeakMap,L0=new WeakMap;function Z4(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(ga(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&yS.set(t,r)}).catch(()=>{}),L0.set(e,r),e}function eD(r){if($y.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});$y.set(r,e)}let Gy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return $y.get(r);if(e==="objectStoreNames")return r.objectStoreNames||_S.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ga(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function tD(r){Gy=r(Gy)}function nD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(wy(this),e,...t);return _S.set(n,e.sort?e.sort():[e]),ga(n)}:J4().includes(r)?function(...e){return r.apply(wy(this),e),ga(yS.get(this))}:function(...e){return ga(r.apply(wy(this),e))}}function rD(r){return typeof r=="function"?nD(r):(r instanceof IDBTransaction&&eD(r),W4(r,X4())?new Proxy(r,Gy):r)}function ga(r){if(r instanceof IDBRequest)return Z4(r);if(by.has(r))return by.get(r);const e=rD(r);return e!==r&&(by.set(r,e),L0.set(e,r)),e}const wy=r=>L0.get(r);function iD(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=ga(c);return n&&c.addEventListener("upgradeneeded",d=>{n(ga(c.result),d.oldVersion,d.newVersion,ga(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const sD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],xy=new Map;function nx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xy.get(e))return xy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=aD.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||sD.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return xy.set(e,o),o}tD(r=>({...r,get:(e,t,n)=>nx(e,t)||r.get(e,t,n),has:(e,t)=>!!nx(e,t)||r.has(e,t)}));class oD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lD(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function lD(r){return r.getComponent()?.type==="VERSION"}const Ky="@firebase/app",rx="0.14.6";const vs=new V0("@firebase/app"),cD="@firebase/app-compat",uD="@firebase/analytics-compat",hD="@firebase/analytics",dD="@firebase/app-check-compat",fD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",pD="@firebase/database",yD="@firebase/data-connect",_D="@firebase/database-compat",vD="@firebase/functions",bD="@firebase/functions-compat",wD="@firebase/installations",xD="@firebase/installations-compat",ED="@firebase/messaging",TD="@firebase/messaging-compat",SD="@firebase/performance",AD="@firebase/performance-compat",ID="@firebase/remote-config",RD="@firebase/remote-config-compat",CD="@firebase/storage",ND="@firebase/storage-compat",kD="@firebase/firestore",DD="@firebase/ai",OD="@firebase/firestore-compat",MD="firebase",PD="12.6.0";const Yy="[DEFAULT]",jD={[Ky]:"fire-core",[cD]:"fire-core-compat",[hD]:"fire-analytics",[uD]:"fire-analytics-compat",[fD]:"fire-app-check",[dD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[pD]:"fire-rtdb",[yD]:"fire-data-connect",[_D]:"fire-rtdb-compat",[vD]:"fire-fn",[bD]:"fire-fn-compat",[wD]:"fire-iid",[xD]:"fire-iid-compat",[ED]:"fire-fcm",[TD]:"fire-fcm-compat",[SD]:"fire-perf",[AD]:"fire-perf-compat",[ID]:"fire-rc",[RD]:"fire-rc-compat",[CD]:"fire-gcs",[ND]:"fire-gcs-compat",[kD]:"fire-fst",[OD]:"fire-fst-compat",[DD]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};const qf=new Map,VD=new Map,Qy=new Map;function ix(r,e){try{r.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Eo(r){const e=r.name;if(Qy.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Qy.set(e,r);for(const t of qf.values())ix(t,r);for(const t of VD.values())ix(t,r);return!0}function Dm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function pr(r){return r==null?!1:r.settings!==void 0}const LD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pa=new vh("app","Firebase",LD);class UD{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pa.create("app-deleted",{appName:this._name})}}const Bo=PD;function vS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Yy,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw pa.create("bad-app-name",{appName:String(s)});if(t||(t=uS()),!t)throw pa.create("no-options");const o=qf.get(s);if(o){if(_s(t,o.options)&&_s(n,o.config))return o;throw pa.create("duplicate-app",{appName:s})}const c=new $4(s);for(const d of Qy.values())c.addComponent(d);const u=new UD(t,n,c);return qf.set(s,u),u}function U0(r=Yy){const e=qf.get(r);if(!e&&r===Yy&&uS())return vS();if(!e)throw pa.create("no-app",{appName:r});return e}function Di(r,e,t){let n=jD[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(c.join(" "));return}Eo(new wa(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const zD="firebase-heartbeat-database",BD=1,Ju="firebase-heartbeat-store";let Ey=null;function bS(){return Ey||(Ey=iD(zD,BD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(r=>{throw pa.create("idb-open",{originalErrorMessage:r.message})})),Ey}async function FD(r){try{const t=(await bS()).transaction(Ju),n=await t.objectStore(Ju).get(wS(r));return await t.done,n}catch(e){if(e instanceof Bi)vs.warn(e.message);else{const t=pa.create("idb-get",{originalErrorMessage:e?.message});vs.warn(t.message)}}}async function sx(r,e){try{const n=(await bS()).transaction(Ju,"readwrite");await n.objectStore(Ju).put(e,wS(r)),await n.done}catch(t){if(t instanceof Bi)vs.warn(t.message);else{const n=pa.create("idb-set",{originalErrorMessage:t?.message});vs.warn(n.message)}}}function wS(r){return`${r.name}!${r.options.appId}`}const HD=1024,qD=30;class $D{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KD(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=ax();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>qD){const s=YD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ax(),{heartbeatsToSend:t,unsentEntries:n}=GD(this._heartbeatsCache.heartbeats),s=Hf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return vs.warn(e),""}}}function ax(){return new Date().toISOString().substring(0,10)}function GD(r,e=HD){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),ox(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ox(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class KD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pS()?M4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function ox(r){return Hf(JSON.stringify({version:2,heartbeats:r})).length}function YD(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function QD(r){Eo(new wa("platform-logger",e=>new oD(e),"PRIVATE")),Eo(new wa("heartbeat",e=>new $D(e),"PRIVATE")),Di(Ky,rx,r),Di(Ky,rx,"esm2020"),Di("fire-js","")}QD("");var WD="firebase",XD="12.6.0";Di(WD,XD,"app");function xS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JD=xS,ES=new vh("auth","Firebase",xS());const $f=new V0("@firebase/auth");function ZD(r,...e){$f.logLevel<=Xe.WARN&&$f.warn(`Auth (${Bo}): ${r}`,...e)}function wf(r,...e){$f.logLevel<=Xe.ERROR&&$f.error(`Auth (${Bo}): ${r}`,...e)}function ri(r,...e){throw z0(r,...e)}function Oi(r,...e){return z0(r,...e)}function TS(r,e,t){const n={...JD(),[e]:t};return new vh("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return TS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return ES.create(r,...e)}function je(r,e,...t){if(!r)throw z0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wf(e),new Error(e)}function bs(r,e){r||hs(e)}function Wy(){return typeof self<"u"&&self.location?.href||""}function eO(){return lx()==="http:"||lx()==="https:"}function lx(){return typeof self<"u"&&self.location?.protocol||null}function tO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eO()||k4()||"connection"in navigator)?navigator.onLine:!0}function nO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,bs(t>e,"Short delay should be less than long delay!"),this.isMobile=C4()||D4()}get(){return tO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function B0(r,e){bs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class SS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sO=new wh(3e4,6e4);function Ts(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return AS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=bh({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return N4()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(f.credentials="include"),SS.fetch()(await IS(r,r.config.apiHost,t,u),f)})}async function AS(r,e,t){r._canInitEmulator=!1;const n={...rO,...e};try{const s=new oO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw lf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw lf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw lf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw TS(r,g,f);ri(r,g)}}catch(s){if(s instanceof Bi)throw s;ri(r,"network-request-failed",{message:String(s)})}}async function xh(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ri(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function IS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?B0(r.config,s):`${r.config.apiScheme}://${s}`;return iO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function aO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Oi(this.auth,"network-request-failed")),sO.get())})}}function lf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Oi(r,e,n);return s.customData._tokenResponse=t,s}function cx(r){return r!==void 0&&r.enterprise!==void 0}class lO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cO(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Ts(r,e))}async function uO(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function Gf(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function Uu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hO(r,e=!1){const t=Xt(r),n=await t.getIdToken(e),s=F0(n);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:Uu(Ty(s.auth_time)),issuedAtTime:Uu(Ty(s.iat)),expirationTime:Uu(Ty(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ty(r){return Number(r)*1e3}function F0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=aS(t);return s?JSON.parse(s):(wf("Failed to decode base64 JWT payload"),null)}catch(s){return wf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ux(r){const e=F0(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&dO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function dO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class fO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(r){const e=r.auth,t=await r.getIdToken(),n=await nc(r,Gf(e,{idToken:t}));je(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?RS(s.providerUserInfo):[],c=gO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Xy(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function mO(r){const e=Xt(r);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function RS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pO(r,e){const t=await AS(r,{},async()=>{const n=bh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await IS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(d.credentials="include"),SS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Ts(r,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ux(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=ux(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await pO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Xl;return n&&(je(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function ia(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new fO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await nc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hO(this,e)}reload(){return mO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await nc(this,uO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:k}=t;je(y&&k,e,"internal-error");const O=Xl.fromJSON(this.name,k);je(typeof y=="string",e,"internal-error"),ia(n,e.name),ia(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),ia(o,e.name),ia(c,e.name),ia(u,e.name),ia(d,e.name),ia(f,e.name),ia(g,e.name);const V=new ti({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:g});return E&&Array.isArray(E)&&(V.providerData=E.map(q=>({...q}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Kf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?RS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Xl;u.updateFromIdToken(n);const d=new ti({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const hx=new Map;function ds(r){bs(r instanceof Function,"Expected a class definition");let e=hx.get(r);return e?(bs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,hx.set(r,e),e)}class CS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CS.type="NONE";const dx=CS;function xf(r,e,t){return`firebase:${r}:${e}:${t}`}class Jl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=xf(this.userKey,s.apiKey,o),this.fullPersistenceKey=xf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gf(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Jl(ds(dx),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(dx);const c=xf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Gf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ti._fromGetAccountInfoResponse(e,v,g)}else y=ti._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Jl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Jl(o,e,n))}}function fx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PS(e))return"Blackberry";if(jS(e))return"Webos";if(kS(e))return"Safari";if((e.includes("chrome/")||DS(e))&&!e.includes("edge/"))return"Chrome";if(MS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function NS(r=fn()){return/firefox\//i.test(r)}function kS(r=fn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DS(r=fn()){return/crios\//i.test(r)}function OS(r=fn()){return/iemobile/i.test(r)}function MS(r=fn()){return/android/i.test(r)}function PS(r=fn()){return/blackberry/i.test(r)}function jS(r=fn()){return/webos/i.test(r)}function H0(r=fn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _O(r=fn()){return H0(r)&&!!window.navigator?.standalone}function vO(){return O4()&&document.documentMode===10}function VS(r=fn()){return H0(r)||MS(r)||jS(r)||PS(r)||/windows phone/i.test(r)||OS(r)}function LS(r,e=[]){let t;switch(r){case"Browser":t=fx(fn());break;case"Worker":t=`${fx(fn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${n}`}class bO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function wO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Ts(r,e))}const xO=6;class EO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class TO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mx(this),this.idTokenSubscription=new mx(this),this.beforeStateQueue=new bO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ES,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gf(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(gs(this));const t=e?Xt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wO(this),t=new EO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await yO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fo(r){return Xt(r)}class mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=U4(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SO(r){Om=r}function US(r){return Om.loadJS(r)}function AO(){return Om.recaptchaEnterpriseScript}function IO(){return Om.gapiScript}function RO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class CO{constructor(){this.enterprise=new NO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kO="recaptcha-enterprise",zS="NO_RECAPTCHA";class DO{constructor(e){this.type=kO,this.auth=Fo(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{cO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new lO(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;cx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(zS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&cx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=AO();d.length!==0&&(d+=u),US(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function gx(r,e,t,n=!1,s=!1){const o=new DO(r);let c;if(s)c=zS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Jy(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await gx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await gx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function OO(r,e){const t=Dm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(_s(o,e??{}))return s;ri(s,"already-initialized")}return t.initialize({options:e})}function MO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function PO(r,e,t){const n=Fo(r);je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=BS(e),{host:c,port:u}=jO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),je(_s(f,n.config.emulator)&&_s(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,zo(c)?(P0(`${o}//${c}${d}`),j0("Auth",!0)):VO()}function BS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function jO(r){const e=BS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:px(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:px(c)}}}function px(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class q0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function LO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function UO(r,e){return xh(r,"POST","/v1/accounts:signInWithPassword",Ts(r,e))}async function zO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Ts(r,e))}async function BO(r,e){return zO(r,e)}async function FO(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}async function HO(r,e){return xh(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}class Zu extends q0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Zu(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,t,"signInWithPassword",UO);case"emailLink":return FO(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jy(e,n,"signUpPassword",LO);case"emailLink":return HO(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(r,e){return xh(r,"POST","/v1/accounts:signInWithIdp",Ts(r,e))}const qO="http://localhost";class To extends q0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new To(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:qO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bh(t)}return e}}function $O(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GO(r){const e=Cu(Nu(r)).link,t=e?Cu(Nu(e)).deep_link_id:null,n=Cu(Nu(r)).deep_link_id;return(n?Cu(Nu(n)).link:null)||n||t||e||r}class $0{constructor(e){const t=Cu(Nu(e)),n=t.apiKey??null,s=t.oobCode??null,o=$O(t.mode??null);je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GO(e);try{return new $0(t)}catch{return null}}}class pc{constructor(){this.providerId=pc.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$0.parseLink(t);return je(n,"argument-error"),Zu._fromEmailAndCode(e,n.code,n.tenantId)}}pc.PROVIDER_ID="password";pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class FS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eh extends FS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ua extends Eh{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";class us extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return To._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class ha extends Eh{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";class da extends Eh{constructor(){super("twitter.com")}static credential(e,t){return To._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return da.credential(t,n)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";async function KO(r,e){return xh(r,"POST","/v1/accounts:signUp",Ts(r,e))}class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ti._fromIdTokenResponse(e,n,s),c=yx(n);return new So({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=yx(n);return new So({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function yx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Yf extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Yf(e,t,n,s)}}function HS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(r,o,e,n):o})}async function YO(r,e,t=!1){const n=await nc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return So._forOperation(r,"link",n)}async function QO(r,e,t=!1){const{auth:n}=r;if(pr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await nc(r,HS(n,s,e,r),t);je(o.idToken,n,"internal-error");const c=F0(o.idToken);je(c,n,"internal-error");const{sub:u}=c;return je(r.uid===u,n,"user-mismatch"),So._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(n,"user-mismatch"),o}}async function qS(r,e,t=!1){if(pr(r.app))return Promise.reject(gs(r));const n="signIn",s=await HS(r,n,e),o=await So._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function WO(r,e){return qS(Fo(r),e)}async function $S(r){const e=Fo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XO(r,e,t){if(pr(r.app))return Promise.reject(gs(r));const n=Fo(r),c=await Jy(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&$S(r),d}),u=await So._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function _x(r,e,t){return pr(r.app)?Promise.reject(gs(r)):WO(Xt(r),pc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&$S(r),n})}async function GS(r,e){const t=Xt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await BO(t.auth,s);o!==r.email&&await r.reload()}async function JO(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function ZO(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Xt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await nc(n,JO(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function e5(r,e,t,n){return Xt(r).onIdTokenChanged(e,t,n)}function t5(r,e,t){return Xt(r).beforeAuthStateChanged(e,t)}function n5(r,e,t,n){return Xt(r).onAuthStateChanged(e,t,n)}const Qf="__sak";class KS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const r5=1e3,i5=10;class YS extends KS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);vO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,i5):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},r5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}YS.type="LOCAL";const s5=YS;class QS extends KS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QS.type="SESSION";const WS=QS;function a5(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Mm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await a5(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];function G0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class o5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=G0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Mi(){return window}function l5(r){Mi().location.href=r}function XS(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function c5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u5(){return navigator?.serviceWorker?.controller||null}function h5(){return XS()?self:null}const JS="firebaseLocalStorageDb",d5=1,Wf="firebaseLocalStorage",ZS="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pm(r,e){return r.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function f5(){const r=indexedDB.deleteDatabase(JS);return new Th(r).toPromise()}function Zy(){const r=indexedDB.open(JS,d5);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Wf,{keyPath:ZS})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Wf)?e(n):(n.close(),await f5(),e(await Zy()))})})}async function vx(r,e,t){const n=Pm(r,!0).put({[ZS]:e,value:t});return new Th(n).toPromise()}async function m5(r,e){const t=Pm(r,!1).get(e),n=await new Th(t).toPromise();return n===void 0?null:n.value}function bx(r,e){const t=Pm(r,!0).delete(e);return new Th(t).toPromise()}const g5=800,p5=3;class e2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>p5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(h5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await c5(),!this.activeServiceWorker)return;this.sender=new o5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await vx(e,Qf,"1"),await bx(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>m5(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Pm(s,!1).getAll();return new Th(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e2.type="LOCAL";const y5=e2;new wh(3e4,6e4);function _5(r,e){return e?ds(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class K0 extends q0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function v5(r){return qS(r.auth,new K0(r),r.bypassAuthState)}function b5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),QO(t,new K0(r),r.bypassAuthState)}async function w5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),YO(t,new K0(r),r.bypassAuthState)}class t2{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v5;case"linkViaPopup":case"linkViaRedirect":return w5;case"reauthViaPopup":case"reauthViaRedirect":return b5;default:ri(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const x5=new wh(2e3,1e4);class Ql extends t2{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=G0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x5.get())};e()}}Ql.currentPopupAction=null;const E5="pendingRedirect",Ef=new Map;class T5 extends t2{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const n=await S5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S5(r,e){const t=R5(e),n=I5(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function A5(r,e){Ef.set(r._key(),e)}function I5(r){return ds(r._redirectPersistence)}function R5(r){return xf(E5,r.config.apiKey,r.name)}async function C5(r,e,t=!1){if(pr(r.app))return Promise.reject(gs(r));const n=Fo(r),s=_5(n,e),c=await new T5(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const N5=600*1e3;class k5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!n2(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Oi(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wx(e))}saveEventToCache(e){this.cachedEventUids.add(wx(e)),this.lastProcessedEventTime=Date.now()}}function wx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function n2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function D5(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n2(r);default:return!1}}async function O5(r,e={}){return Fi(r,"GET","/v1/projects",e)}const M5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P5=/^https?/;async function j5(r){if(r.config.emulator)return;const{authorizedDomains:e}=await O5(r);for(const t of e)try{if(V5(t))return}catch{}ri(r,"unauthorized-domain")}function V5(r){const e=Wy(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!P5.test(t))return!1;if(M5.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const L5=new wh(3e4,6e4);function xx(){const r=Mi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function U5(r){return new Promise((e,t)=>{function n(){xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xx(),t(Oi(r,"network-request-failed"))},timeout:L5.get()})}if(Mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mi().gapi?.load)n();else{const s=RO("iframefcb");return Mi()[s]=()=>{gapi.load?n():t(Oi(r,"network-request-failed"))},US(`${IO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function z5(r){return Tf=Tf||U5(r),Tf}const B5=new wh(5e3,15e3),F5="__/auth/iframe",H5="emulator/auth/iframe",q5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G5(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?B0(e,H5):`https://${r.config.authDomain}/${F5}`,n={apiKey:e.apiKey,appName:r.name,v:Bo},s=$5.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${bh(n).slice(1)}`}async function K5(r){const e=await z5(r),t=Mi().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:G5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q5,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Oi(r,"network-request-failed"),u=Mi().setTimeout(()=>{o(c)},B5.get());function d(){Mi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const Y5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q5=500,W5=600,X5="_blank",J5="http://localhost";class Ex{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z5(r,e,t,n=Q5,s=W5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...Y5,width:n.toString(),height:s.toString(),top:o,left:c},f=fn().toLowerCase();t&&(u=DS(f)?X5:t),NS(f)&&(e=e||J5,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(_O(f)&&u!=="_self")return eM(e||"",u),new Ex(null);const y=window.open(e||"",u,g);je(y,r,"popup-blocked");try{y.focus()}catch{}return new Ex(y)}function eM(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const tM="__/auth/handler",nM="emulator/auth/handler",rM=encodeURIComponent("fac");async function Tx(r,e,t,n,s,o){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Bo,eventId:s};if(e instanceof FS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",L4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Eh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${rM}=${encodeURIComponent(d)}`:"";return`${iM(r)}?${bh(u).slice(1)}${f}`}function iM({config:r}){return r.emulator?B0(r,nM):`https://${r.authDomain}/${tM}`}const Sy="webStorageSupport";class sM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WS,this._completeRedirectFn=C5,this._overrideRedirectResult=A5}async _openPopup(e,t,n,s){bs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Tx(e,t,n,Wy(),s);return Z5(e,o,G0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Tx(e,t,n,Wy(),s);return l5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(bs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await K5(e),n=new k5(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sy,{type:Sy},s=>{const o=s?.[0]?.[Sy];o!==void 0&&t(!!o),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VS()||kS()||H0()}}const aM=sM;var Sx="@firebase/auth",Ax="1.11.1";class oM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lM(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cM(r){Eo(new wa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LS(r)},f=new TO(n,s,o,d);return MO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Eo(new wa("auth-internal",e=>{const t=Fo(e.getProvider("auth").getImmediate());return(n=>new oM(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(Sx,Ax,lM(r)),Di(Sx,Ax,"esm2020")}const uM=300,hM=hS("authIdTokenMaxAge")||uM;let Ix=null;const dM=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>hM)return;const s=t?.token;Ix!==s&&(Ix=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function fM(r=U0()){const e=Dm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=OO(r,{popupRedirectResolver:aM,persistence:[y5,s5,WS]}),n=hS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=dM(o.toString());t5(t,c,()=>c(t.currentUser)),e5(t,u=>c(u))}}const s=lS("auth");return s&&PO(t,`http://${s}`),t}function mM(){return document.getElementsByTagName("head")?.[0]??document}SO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Oi("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",mM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cM("Browser");var Rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ya,r2;(function(){var r;function e(M,S){function T(){}T.prototype=S.prototype,M.F=S.prototype,M.prototype=new T,M.prototype.constructor=M,M.D=function(R,N,j){for(var C=Array(arguments.length-2),G=2;G<arguments.length;G++)C[G-2]=arguments[G];return S.prototype[N].apply(R,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,S,T){T||(T=0);const R=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)R[N]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(N=0;N<16;++N)R[N]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=M.g[0],T=M.g[1],N=M.g[2];let j=M.g[3],C;C=S+(j^T&(N^j))+R[0]+3614090360&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+R[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+R[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+R[3]+3250441966&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+R[4]+4118548399&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+R[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+R[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+R[7]+4249261313&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+R[8]+1770035416&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+R[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+R[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+R[11]+2304563134&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+R[12]+1804603682&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+R[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+R[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+R[15]+1236535329&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(N^j&(T^N))+R[1]+4129170786&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+R[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+R[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+R[0]+3921069994&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+R[5]+3593408605&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+R[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+R[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+R[4]+3889429448&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+R[9]+568446438&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+R[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+R[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+R[8]+1163531501&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+R[13]+2850285829&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+R[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+R[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+R[12]+2368359562&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(T^N^j)+R[5]+4294588738&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+R[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+R[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+R[14]+4259657740&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+R[1]+2763975236&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+R[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+R[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+R[10]+3200236656&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+R[13]+681279174&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+R[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+R[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+R[6]+76029189&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+R[9]+3654602809&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+R[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+R[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+R[2]+3299628645&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(N^(T|~j))+R[0]+4096336452&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+R[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+R[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+R[5]+4237533241&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+R[12]+1700485571&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+R[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+R[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+R[1]+2240044497&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+R[8]+1873313359&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+R[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+R[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+R[13]+1309151649&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+R[4]+4149444226&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+R[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+R[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+j&4294967295}n.prototype.v=function(M,S){S===void 0&&(S=M.length);const T=S-this.blockSize,R=this.C;let N=this.h,j=0;for(;j<S;){if(N==0)for(;j<=T;)s(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<S;)if(R[N++]=M.charCodeAt(j++),N==this.blockSize){s(this,R),N=0;break}}else for(;j<S;)if(R[N++]=M[j++],N==this.blockSize){s(this,R),N=0;break}}this.h=N,this.o+=S},n.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var T=M.length-8;T<M.length;++T)M[T]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,T=0;T<4;++T)for(let R=0;R<32;R+=8)M[S++]=this.g[T]>>>R&255;return M};function o(M,S){var T=u;return Object.prototype.hasOwnProperty.call(T,M)?T[M]:T[M]=S(M)}function c(M,S){this.h=S;const T=[];let R=!0;for(let N=M.length-1;N>=0;N--){const j=M[N]|0;R&&j==S||(T[N]=j,R=!1)}this.g=T}var u={};function d(M){return-128<=M&&M<128?o(M,function(S){return new c([S|0],S<0?-1:0)}):new c([M|0],M<0?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(M<0)return O(f(-M));const S=[];let T=1;for(let R=0;M>=T;R++)S[R]=M/T|0,T*=4294967296;return new c(S,0)}function g(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return O(g(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(S,8));let R=y;for(let j=0;j<M.length;j+=8){var N=Math.min(8,M.length-j);const C=parseInt(M.substring(j,j+N),S);N<8?(N=f(Math.pow(S,N)),R=R.j(N).add(f(C))):(R=R.j(T),R=R.add(f(C)))}return R}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(k(this))return-O(this).m();let M=0,S=1;for(let T=0;T<this.g.length;T++){const R=this.i(T);M+=(R>=0?R:4294967296+R)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(E(this))return"0";if(k(this))return"-"+O(this).toString(M);const S=f(Math.pow(M,6));var T=this;let R="";for(;;){const N=H(T,S).g;T=V(T,N.j(S));let j=((T.g.length>0?T.g[0]:T.h)>>>0).toString(M);if(T=N,E(T))return j+R;for(;j.length<6;)j="0"+j;R=j+R}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function E(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function k(M){return M.h==-1}r.l=function(M){return M=V(this,M),k(M)?-1:E(M)?0:1};function O(M){const S=M.g.length,T=[];for(let R=0;R<S;R++)T[R]=~M.g[R];return new c(T,~M.h).add(v)}r.abs=function(){return k(this)?O(this):this},r.add=function(M){const S=Math.max(this.g.length,M.g.length),T=[];let R=0;for(let N=0;N<=S;N++){let j=R+(this.i(N)&65535)+(M.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);R=C>>>16,j&=65535,C&=65535,T[N]=C<<16|j}return new c(T,T[T.length-1]&-2147483648?-1:0)};function V(M,S){return M.add(O(S))}r.j=function(M){if(E(this)||E(M))return y;if(k(this))return k(M)?O(this).j(O(M)):O(O(this).j(M));if(k(M))return O(this.j(O(M)));if(this.l(w)<0&&M.l(w)<0)return f(this.m()*M.m());const S=this.g.length+M.g.length,T=[];for(var R=0;R<2*S;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(let N=0;N<M.g.length;N++){const j=this.i(R)>>>16,C=this.i(R)&65535,G=M.i(N)>>>16,J=M.i(N)&65535;T[2*R+2*N]+=C*J,q(T,2*R+2*N),T[2*R+2*N+1]+=j*J,q(T,2*R+2*N+1),T[2*R+2*N+1]+=C*G,q(T,2*R+2*N+1),T[2*R+2*N+2]+=j*G,q(T,2*R+2*N+2)}for(M=0;M<S;M++)T[M]=T[2*M+1]<<16|T[2*M];for(M=S;M<2*S;M++)T[M]=0;return new c(T,0)};function q(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function U(M,S){this.g=M,this.h=S}function H(M,S){if(E(S))throw Error("division by zero");if(E(M))return new U(y,y);if(k(M))return S=H(O(M),S),new U(O(S.g),O(S.h));if(k(S))return S=H(M,O(S)),new U(O(S.g),S.h);if(M.g.length>30){if(k(M)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var T=v,R=S;R.l(M)<=0;)T=K(T),R=K(R);var N=z(T,1),j=z(R,1);for(R=z(R,2),T=z(T,2);!E(R);){var C=j.add(R);C.l(M)<=0&&(N=N.add(T),j=C),R=z(R,1),T=z(T,1)}return S=V(M,N.j(S)),new U(N,S)}for(N=y;M.l(S)>=0;){for(T=Math.max(1,Math.floor(M.m()/S.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),j=f(T),C=j.j(S);k(C)||C.l(M)>0;)T-=R,j=f(T),C=j.j(S);E(j)&&(j=v),N=N.add(j),M=V(M,C)}return new U(N,M)}r.B=function(M){return H(this,M).h},r.and=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)&M.i(R);return new c(T,this.h&M.h)},r.or=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)|M.i(R);return new c(T,this.h|M.h)},r.xor=function(M){const S=Math.max(this.g.length,M.g.length),T=[];for(let R=0;R<S;R++)T[R]=this.i(R)^M.i(R);return new c(T,this.h^M.h)};function K(M){const S=M.g.length+1,T=[];for(let R=0;R<S;R++)T[R]=M.i(R)<<1|M.i(R-1)>>>31;return new c(T,M.h)}function z(M,S){const T=S>>5;S%=32;const R=M.g.length-T,N=[];for(let j=0;j<R;j++)N[j]=S>0?M.i(j+T)>>>S|M.i(j+T+1)<<32-S:M.i(j+T);return new c(N,M.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,r2=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ya=c}).apply(typeof Rx<"u"?Rx:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var i2,ku,s2,Sf,e0,a2,o2,l2;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var x=0;x<m.length;++x){var I=m[x];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=t(this);function s(m,x){if(x)e:{var I=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var ae=m[B];if(!(ae in I))break e;I=I[ae]}m=m[m.length-1],B=I[m],x=x(B),x!=B&&x!=null&&e(I,m,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(x){var I=[],B;for(B in x)Object.prototype.hasOwnProperty.call(x,B)&&I.push([B,x[B]]);return I}});var o=o||{},c=this||self;function u(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function d(m,x,I){return m.call.apply(m.bind,arguments)}function f(m,x,I){return f=d,f.apply(null,arguments)}function g(m,x){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function y(m,x){function I(){}I.prototype=x.prototype,m.Z=x.prototype,m.prototype=new I,m.prototype.constructor=m,m.Ob=function(B,ae,ue){for(var ve=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ve[Fe-2]=arguments[Fe];return x.prototype[ae].apply(B,ve)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const x=m.length;if(x>0){const I=Array(x);for(let B=0;B<x;B++)I[B]=m[B];return I}return[]}function E(m,x){for(let B=1;B<arguments.length;B++){const ae=arguments[B];var I=typeof ae;if(I=I!="object"?I:ae?Array.isArray(ae)?"array":I:"null",I=="array"||I=="object"&&typeof ae.length=="number"){I=m.length||0;const ue=ae.length||0;m.length=I+ue;for(let ve=0;ve<ue;ve++)m[I+ve]=ae[ve]}else m.push(ae)}}class k{constructor(x,I){this.i=x,this.j=I,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function O(m){c.setTimeout(()=>{throw m},0)}function V(){var m=M;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class q{constructor(){this.h=this.g=null}add(x,I){const B=U.get();B.set(x,I),this.h?this.h.next=B:this.g=B,this.h=B}}var U=new k(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,I){this.h=x,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,M=new q,S=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(T)}};function T(){for(var m;m=V();){try{m.h.call(m.g)}catch(I){O(I)}var x=U;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}z=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};c.addEventListener("test",I,x),c.removeEventListener("test",I,x)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function G(m,x){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}y(G,N),G.prototype.init=function(m,x){const I=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(I=="mouseover"?x=m.fromElement:I=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),P=0;function D(m,x,I,B,ae){this.listener=m,this.proxy=null,this.src=x,this.type=I,this.capture=!!B,this.ha=ae,this.key=++P,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,x,I){for(const B in m)x.call(I,m[B],B,m)}function ee(m,x){for(const I in m)x.call(void 0,m[I],I,m)}function F(m){const x={};for(const I in m)x[I]=m[I];return x}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(m,x){let I,B;for(let ae=1;ae<arguments.length;ae++){B=arguments[ae];for(I in B)m[I]=B[I];for(let ue=0;ue<Y.length;ue++)I=Y[ue],Object.prototype.hasOwnProperty.call(B,I)&&(m[I]=B[I])}}function ie(m){this.src=m,this.g={},this.h=0}ie.prototype.add=function(m,x,I,B,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const ve=_e(m,x,B,ae);return ve>-1?(x=m[ve],I||(x.fa=!1)):(x=new D(x,this.src,ue,!!B,ae),x.fa=I,m.push(x)),x};function ne(m,x){const I=x.type;if(I in m.g){var B=m.g[I],ae=Array.prototype.indexOf.call(B,x,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(B,ae,1),ue&&(Z(x),m.g[I].length==0&&(delete m.g[I],m.h--))}}function _e(m,x,I,B){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==x&&ue.capture==!!I&&ue.ha==B)return ae}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ce(m,x,I,B,ae){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Ce(m,x[ue],I,B,ae);return null}return I=it(I),m&&m[J]?m.J(x,I,u(B)?!!B.capture:!1,ae):Ze(m,x,I,!1,B,ae)}function Ze(m,x,I,B,ae,ue){if(!x)throw Error("Invalid event type");const ve=u(ae)?!!ae.capture:!!ae;let Fe=Ct(m);if(Fe||(m[Ae]=Fe=new ie(m)),I=Fe.add(x,I,B,ve,ue),I.proxy)return I;if(B=st(),I.proxy=B,B.src=m,B.listener=I,m.addEventListener)j||(ae=ve),ae===void 0&&(ae=!1),m.addEventListener(x.toString(),B,ae);else if(m.attachEvent)m.attachEvent(Rt(x.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function st(){function m(I){return x.call(m.src,m.listener,I)}const x=mt;return m}function at(m,x,I,B,ae){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)at(m,x[ue],I,B,ae);else B=u(B)?!!B.capture:!!B,I=it(I),m&&m[J]?(m=m.i,ue=String(x).toString(),ue in m.g&&(x=m.g[ue],I=_e(x,I,B,ae),I>-1&&(Z(x[I]),Array.prototype.splice.call(x,I,1),x.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(x=m.g[x.toString()],m=-1,x&&(m=_e(x,I,B,ae)),(I=m>-1?x[m]:null)&&un(I))}function un(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[J])ne(x.i,m);else{var I=m.type,B=m.proxy;x.removeEventListener?x.removeEventListener(I,B,m.capture):x.detachEvent?x.detachEvent(Rt(I),B):x.addListener&&x.removeListener&&x.removeListener(B),(I=Ct(x))?(ne(I,m),I.h==0&&(I.src=null,x[Ae]=null)):Z(m)}}}function Rt(m){return m in Pe?Pe[m]:Pe[m]="on"+m}function mt(m,x){if(m.da)m=!0;else{x=new G(x,this);const I=m.listener,B=m.ha||m.src;m.fa&&un(m),m=I.call(B,x)}return m}function Ct(m){return m=m[Ae],m instanceof ie?m:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function it(m){return typeof m=="function"?m:(m[rt]||(m[rt]=function(x){return m.handleEvent(x)}),m[rt])}function qe(){R.call(this),this.i=new ie(this),this.M=this,this.G=null}y(qe,R),qe.prototype[J]=!0,qe.prototype.removeEventListener=function(m,x,I,B){at(this,m,x,I,B)};function pe(m,x){var I,B=m.G;if(B)for(I=[];B;B=B.G)I.push(B);if(m=m.M,B=x.type||x,typeof x=="string")x=new N(x,m);else if(x instanceof N)x.target=x.target||m;else{var ae=x;x=new N(B,m),re(x,ae)}ae=!0;let ue,ve;if(I)for(ve=I.length-1;ve>=0;ve--)ue=x.g=I[ve],ae=Ee(ue,B,!0,x)&&ae;if(ue=x.g=m,ae=Ee(ue,B,!0,x)&&ae,ae=Ee(ue,B,!1,x)&&ae,I)for(ve=0;ve<I.length;ve++)ue=x.g=I[ve],ae=Ee(ue,B,!1,x)&&ae}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const I=m.g[x];for(let B=0;B<I.length;B++)Z(I[B]);delete m.g[x],m.h--}}this.G=null},qe.prototype.J=function(m,x,I,B){return this.i.add(String(m),x,!1,I,B)},qe.prototype.K=function(m,x,I,B){return this.i.add(String(m),x,!0,I,B)};function Ee(m,x,I,B){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ue=0;ue<x.length;++ue){const ve=x[ue];if(ve&&!ve.da&&ve.capture==I){const Fe=ve.listener,Kt=ve.ha||ve.src;ve.fa&&ne(m.i,ve),ae=Fe.call(Kt,B)!==!1&&ae}}return ae&&!B.defaultPrevented}function Be(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(m,x||0)}function Oe(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Oe(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class xe extends R{constructor(x,I){super(),this.m=x,this.l=I,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(m){R.call(this),this.h=m,this.g={}}y(et,R);var gt=[];function Bn(m){W(m.g,function(x,I){this.g.hasOwnProperty(I)&&un(x)},m),m.g={}}et.prototype.N=function(){et.Z.N.call(this),Bn(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ct=c.JSON.stringify,Fn=c.JSON.parse,zt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Et(){N.call(this,"d")}y(Et,N);function Jt(){N.call(this,"c")}y(Jt,N);var kt={},Yo=null;function oi(){return Yo=Yo||new qe}kt.Ia="serverreachability";function Ca(m){N.call(this,kt.Ia,m)}y(Ca,N);function Dn(m){const x=oi();pe(x,new Ca(x))}kt.STAT_EVENT="statevent";function qi(m,x){N.call(this,kt.STAT_EVENT,m),this.stat=x}y(qi,N);function pt(m){const x=oi();pe(x,new qi(x,m))}kt.Ja="timingevent";function hn(m,x){N.call(this,kt.Ja,m),this.size=x}y(hn,N);function xn(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},x)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Qo(m,x,I,B,ae,ue){m.info(function(){if(m.g)if(ue){var ve="",Fe=ue.split("&");for(let ut=0;ut<Fe.length;ut++){var Kt=Fe[ut].split("=");if(Kt.length>1){const Mt=Kt[0];Kt=Kt[1];const Tr=Mt.split("_");ve=Tr.length>=2&&Tr[1]=="type"?ve+(Mt+"="+Kt+"&"):ve+(Mt+"=redacted&")}}}else ve=null;else ve=ue;return"XMLHTTP REQ ("+B+") [attempt "+ae+"]: "+x+`
`+I+`
`+ve})}function br(m,x,I,B,ae,ue,ve){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ae+"]: "+x+`
`+I+`
`+ue+" "+ve})}function gn(m,x,I,B){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+dg(m,I)+(B?" "+B:"")})}function Na(m,x){m.info(function(){return"TIMEOUT: "+x})}En.prototype.info=function(){};function dg(m,x){if(!m.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var I=ue[m];if(!(I.length<2)){var B=I[1];if(Array.isArray(B)&&!(B.length<1)){var ae=B[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let ve=1;ve<B.length;ve++)B[ve]=""}}}}return ct(ue)}catch{return x}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function Da(){}y(Da,kn),Da.prototype.g=function(){return new XMLHttpRequest},xc=new Da;function $i(m){return encodeURIComponent(String(m))}function Vh(m){var x=1;m=m.split(":");const I=[];for(;x>0&&m.length;)I.push(m.shift()),x--;return m.length&&I.push(m.join(":")),I}function Br(m,x,I,B){this.j=m,this.i=x,this.l=I,this.S=B||1,this.V=new et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fr}function Fr(){this.i=null,this.g="",this.h=!1}var Zt={},pn={};function li(m,x,I){m.M=1,m.A=Oa(tn(x)),m.u=I,m.R=!0,Wo(m,null)}function Wo(m,x){m.F=Date.now(),ci(m),m.B=tn(m.A);var I=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),el(I.i,"t",B),m.C=0,I=m.j.L,m.h=new Fr,m.g=Jh(m.j,I?x:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),x=m.V,I=m.g,B=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(gt[0]=ae.toString()),ae=gt);for(let ue=0;ue<ae.length;ue++){const ve=Ce(I,ae[ue],B||x.handleEvent,!1,x.h||x);if(!ve)break;x.g[ve.key]=ve}x=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),Dn(),Qo(m.i,m.v,m.B,m.l,m.S,m.u)}Br.prototype.ba=function(m){m=m.target;const x=this.O;x&&$r(m)==3?x.j():this.Y(m)},Br.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=$r(this.g),Kt=this.g.ya(),ut=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Kt==7||(Kt==8||ut<=0?Dn(3):Dn(2)),ui(this);var x=this.g.ca();this.X=x;var I=fg(this);if(this.o=x==200,br(this.i,this.v,this.B,this.l,this.S,Fe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var B,ae=this.g;if((B=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(B)){var ue=B;break t}}ue=null}if(m=ue)gn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,m);else{this.o=!1,this.m=3,pt(12),ar(this),wr(this);break e}}if(this.R){m=!0;let Mt;for(;!this.K&&this.C<I.length;)if(Mt=Uh(this,I),Mt==pn){Fe==4&&(this.m=4,pt(14),m=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Zt){this.m=4,pt(15),gn(this.i,this.l,I,"[Invalid Chunk]"),m=!1;break}else gn(this.i,this.l,Mt,null),hi(this,Mt);if(Lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||I.length!=0||this.h.h||(this.m=1,pt(16),m=!1),this.o=this.o&&m,!m)gn(this.i,this.l,I,"[Invalid Chunked Response]"),ar(this),wr(this);else if(I.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Vc(ve),ve.P=!0,pt(11))}}else gn(this.i,this.l,I,null),hi(this,I);Fe==4&&ar(this),this.o&&!this.K&&(Fe==4?Yh(this.j,this):(this.o=!1,ci(this)))}else Ki(this.g),x==400&&I.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),ar(this),wr(this)}}}catch{}finally{}};function fg(m){if(!Lh(m))return m.g.la();const x=Tn(m.g);if(x==="")return"";let I="";const B=x.length,ae=$r(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ar(m),wr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<B;ue++)m.h.h=!0,I+=m.h.i.decode(x[ue],{stream:!(ae&&ue==B-1)});return x.length=0,m.h.g+=I,m.C=0,m.h.g}function Lh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Uh(m,x){var I=m.C,B=x.indexOf(`
`,I);return B==-1?pn:(I=Number(x.substring(I,B)),isNaN(I)?Zt:(B+=1,B+I>x.length?pn:(x=x.slice(B,B+I),m.C=B+I,x)))}Br.prototype.cancel=function(){this.K=!0,ar(this)};function ci(m){m.T=Date.now()+m.H,Xo(m,m.H)}function Xo(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),x)}function ui(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Br.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Na(this.i,this.B),this.M!=2&&(Dn(),pt(17)),ar(this),this.m=2,wr(this)):Xo(this,this.T-m)};function wr(m){m.j.I==0||m.K||Yh(m.j,m)}function ar(m){ui(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,Bn(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function hi(m,x){try{var I=m.j;if(I.I!=0&&(I.g==m||fi(I.h,m))){if(!m.L&&fi(I.h,m)&&I.I==3){try{var B=I.Ba.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ae=B;if(ae[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<m.F)sl(I),Ms(I);else break e;za(I),pt(18)}}else I.xa=ae[1],0<I.xa-I.K&&ae[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=xn(f(I.Va,I),6e3));di(I.h)<=1&&I.ta&&(I.ta=void 0)}else vi(I,11)}else if((m.L||I.g==m)&&sl(I),!C(x))for(ae=I.Ba.g.parse(x),x=0;x<ae.length;x++){let ut=ae[x];const Mt=ut[0];if(!(Mt<=I.K))if(I.K=Mt,ut=ut[1],I.I==2)if(ut[0]=="c"){I.M=ut[1],I.ba=ut[2];const Tr=ut[3];Tr!=null&&(I.ka=Tr,I.j.info("VER="+I.ka));const bi=ut[4];bi!=null&&(I.za=bi,I.j.info("SVER="+I.za));const Gr=ut[5];Gr!=null&&typeof Gr=="number"&&Gr>0&&(B=1.5*Gr,I.O=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const Kr=m.g;if(Kr){const Ba=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var ue=B.h;ue.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Sc(ue,ue.h),ue.h=null))}if(B.G){const al=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(B.wa=al,yt(B.J,B.G,al))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-m.F,I.j.info("Handshake RTT: "+I.T+"ms")),B=I;var ve=m;if(B.na=Xh(B,B.L?B.ba:null,B.W),ve.L){Ac(B.h,ve);var Fe=ve,Kt=B.O;Kt&&(Fe.H=Kt),Fe.D&&(ui(Fe),ci(Fe)),B.g=ve}else Gh(B);I.i.length>0&&_i(I)}else ut[0]!="stop"&&ut[0]!="close"||vi(I,7);else I.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?vi(I,7):Pc(I):ut[0]!="noop"&&I.l&&I.l.qa(ut),I.A=0)}}Dn(4)}catch{}}var en=class{constructor(m,x){this.g=m,this.map=x}};function Ec(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Tc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function di(m){return m.h?1:m.g?m.g.size:0}function fi(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function Sc(m,x){m.g?m.g.add(x):m.h=x}function Ac(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}Ec.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ic(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const I of m.g.values())x=x.concat(I.G);return x}return w(m.i)}var zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jo(m,x){if(m){m=m.split("&");for(let I=0;I<m.length;I++){const B=m[I].indexOf("=");let ae,ue=null;B>=0?(ae=m[I].substring(0,B),ue=m[I].substring(B+1)):ae=m[I],x(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function or(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof or?(this.l=m.l,yn(this,m.j),this.o=m.o,this.g=m.g,Is(this,m.u),this.h=m.h,Rc(this,qh(m.i)),this.m=m.m):m&&(x=String(m).match(zh))?(this.l=!1,yn(this,x[1]||"",!0),this.o=mi(x[2]||""),this.g=mi(x[3]||"",!0),Is(this,x[4]),this.h=mi(x[5]||"",!0),Rc(this,x[6]||"",!0),this.m=mi(x[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}or.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(Ma(x,Zo,!0),":");var I=this.g;return(I||x=="file")&&(m.push("//"),(x=this.o)&&m.push(Ma(x,Zo,!0),"@"),m.push($i(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&m.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push(Ma(I,I.charAt(0)=="/"?Cc:Bh,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",Ma(I,Fh)),m.join("")},or.prototype.resolve=function(m){const x=tn(this);let I=!!m.j;I?yn(x,m.j):I=!!m.o,I?x.o=m.o:I=!!m.g,I?x.g=m.g:I=m.u!=null;var B=m.h;if(I)Is(x,m.u);else if(I=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(B=x.h.slice(0,ae+1)+B)}if(ae=B,ae==".."||ae==".")B="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){B=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let ve=0;ve<ae.length;){const Fe=ae[ve++];Fe=="."?B&&ve==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),B&&ve==ae.length&&ue.push("")):(ue.push(Fe),B=!0)}B=ue.join("/")}else B=ae}return I?x.h=B:I=m.i.toString()!=="",I?Rc(x,qh(m.i)):I=!!m.m,I&&(x.m=m.m),x};function tn(m){return new or(m)}function yn(m,x,I){m.j=I?mi(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function Is(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function Rc(m,x,I){x instanceof Cs?(m.i=x,tl(m.i,m.l)):(I||(x=Ma(x,Rs)),m.i=new Cs(x,m.l))}function yt(m,x,I){m.i.set(x,I)}function Oa(m){return yt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function mi(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ma(m,x,I){return typeof m=="string"?(m=encodeURI(m).replace(x,Wn),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Zo=/[#\/\?@]/g,Bh=/[#\?:]/g,Cc=/[#\?]/g,Rs=/[#\?@]/g,Fh=/#/g;function Cs(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Jo(m.i,function(x,I){m.add(decodeURIComponent(x.replace(/\+/g," ")),I)}))}r=Cs.prototype,r.add=function(m,x){Xn(this),this.i=null,m=Ns(this,m);let I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(x),this.h+=1,this};function Hh(m,x){Xn(m),x=Ns(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function Nc(m,x){return Xn(m),x=Ns(m,x),m.g.has(x)}r.forEach=function(m,x){Xn(this),this.g.forEach(function(I,B){I.forEach(function(ae){m.call(x,ae,B,this)},this)},this)};function kc(m,x){Xn(m);let I=[];if(typeof x=="string")Nc(m,x)&&(I=I.concat(m.g.get(Ns(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)I=I.concat(m[x]);return I}r.set=function(m,x){return Xn(this),this.i=null,m=Ns(this,m),Nc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},r.get=function(m,x){return m?(m=kc(this,m),m.length>0?String(m[0]):x):x};function el(m,x,I){Hh(m,x),I.length>0&&(m.i=null,m.g.set(Ns(m,x),w(I)),m.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let B=0;B<x.length;B++){var I=x[B];const ae=$i(I);I=kc(this,I);for(let ue=0;ue<I.length;ue++){let ve=ae;I[ue]!==""&&(ve+="="+$i(I[ue])),m.push(ve)}}return this.i=m.join("&")};function qh(m){const x=new Cs;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function Ns(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function tl(m,x){x&&!m.j&&(Xn(m),m.i=null,m.g.forEach(function(I,B){const ae=B.toLowerCase();B!=ae&&(Hh(this,B),el(this,ae,I))},m)),m.j=x}function Hr(m,x){const I=new En;if(c.Image){const B=new Image;B.onload=g(xr,I,"TestLoadImage: loaded",!0,x,B),B.onerror=g(xr,I,"TestLoadImage: error",!1,x,B),B.onabort=g(xr,I,"TestLoadImage: abort",!1,x,B),B.ontimeout=g(xr,I,"TestLoadImage: timeout",!1,x,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else x(!1)}function Dc(m,x){const I=new En,B=new AbortController,ae=setTimeout(()=>{B.abort(),xr(I,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:B.signal}).then(ue=>{clearTimeout(ae),ue.ok?xr(I,"TestPingServer: ok",!0,x):xr(I,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),xr(I,"TestPingServer: error",!1,x)})}function xr(m,x,I,B,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),B(I)}catch{}}function ks(){this.g=new zt}function gi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(gi,kn),gi.prototype.g=function(){return new Pa(this.i,this.h)};function Pa(m,x){qe.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Pa,qe),r=Pa.prototype,r.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,qr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function nl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Ds(this):qr(this),this.readyState==3&&nl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Ds(this))},r.Na=function(m){this.g&&(this.response=m,Ds(this))},r.ga=function(){this.g&&Ds(this)};function Ds(m){m.readyState=4,m.l=null,m.j=null,m.B=null,qr(m)}r.setRequestHeader=function(m,x){this.A.append(m,x)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var I=x.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=x.next();return m.join(`\r
`)};function qr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Er(m){let x="";return W(m,function(I,B){x+=B,x+=":",x+=I,x+=`\r
`}),x}function ja(m,x,I){e:{for(B in I){var B=!1;break e}B=!0}B||(I=Er(I),typeof m=="string"?I!=null&&$i(I):yt(m,x,I))}function Tt(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Tt,qe);var pi=/^https?$/i,Oc=["POST","PUT"];r=Tt.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,x,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(ue){Va(this,ue);return}if(m=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ae in B)I.set(ae,B[ae]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())I.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Oc,x,void 0)>=0)||B||ae||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,ve]of I)this.g.setRequestHeader(ue,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Va(this,ue)}};function Va(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,Mc(m),Gi(m)}function Mc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},r.Xa=function(){La(this)};function La(m){if(m.h&&typeof o<"u"){if(m.v&&$r(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),$r(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var I;if(!(I=x)){var B;if(B=ue===0){let ve=String(m.D).match(zh)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),B=!pi.test(ve?ve.toLowerCase():"")}I=B}if(I)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=$r(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Mc(m)}}finally{Gi(m)}}}}function Gi(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const I=m.g;m.g=null,x||pe(m,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $r(m){return m.g?m.g.readyState:0}r.ca=function(){try{return $r(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),Fn(x)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const x={};m=(m.g&&$r(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(C(m[B]))continue;var I=Vh(m[B]);const ae=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ue=x[ae]||[];x[ae]=ue,ue.push(I)}ee(x,function(B){return B.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(m,x,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||x}function Os(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,m),this.Za=yi("retryDelaySeedMs",1e4,m),this.Ta=yi("forwardChannelMaxRetries",2,m),this.va=yi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ec(m&&m.concurrentRequestLimit),this.Ba=new ks,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Os.prototype,r.ka=8,r.I=1,r.connect=function(m,x,I,B){pt(0),this.W=m,this.H=x||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.J=Xh(this,null,this.W),_i(this)};function Pc(m){if(rl(m),m.I==3){var x=m.V++,I=tn(m.J);if(yt(I,"SID",m.M),yt(I,"RID",x),yt(I,"TYPE","terminate"),Ua(m,I),x=new Br(m,m.j,x),x.M=2,x.A=Oa(tn(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=x.A,I=!0),I||(x.g=Jh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ci(x)}Wh(m)}function Ms(m){m.g&&(Vc(m),m.g.cancel(),m.g=null)}function rl(m){Ms(m),m.v&&(c.clearTimeout(m.v),m.v=null),sl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function _i(m){if(!Tc(m.h)&&!m.m){m.m=!0;var x=m.Ea;K||S(),z||(K(),z=!0),M.add(x,m),m.D=0}}function il(m,x){return di(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,x),Qh(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Br(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=F(ue),re(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var x=0,I=0;I<this.i.length;I++){t:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,x>4096){x=I;break e}if(x===4096||I===this.i.length-1){x=I+1;break e}}x=1e3}else x=1e3;x=$h(this,ae,x),I=tn(this.J),yt(I,"RID",m),yt(I,"CVER",22),this.G&&yt(I,"X-HTTP-Session-Id",this.G),Ua(this,I),ue&&(this.R?x="headers="+$i(Er(ue))+"&"+x:this.u&&ja(I,this.u,ue)),Sc(this.h,ae),this.Ra&&yt(I,"TYPE","init"),this.S?(yt(I,"$req",x),yt(I,"SID","null"),ae.U=!0,li(ae,I,null)):li(ae,I,x),this.I=2}}else this.I==3&&(m?jc(this,m):this.i.length==0||Tc(this.h)||jc(this))};function jc(m,x){var I;x?I=x.l:I=m.V++;const B=tn(m.J);yt(B,"SID",m.M),yt(B,"RID",I),yt(B,"AID",m.K),Ua(m,B),m.u&&m.o&&ja(B,m.u,m.o),I=new Br(m,m.j,I,m.D+1),m.u===null&&(I.J=m.o),x&&(m.i=x.G.concat(m.i)),x=$h(m,I,1e3),I.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Sc(m.h,I),li(I,B,x)}function Ua(m,x){m.H&&W(m.H,function(I,B){yt(x,B,I)}),m.l&&W({},function(I,B){yt(x,B,I)})}function $h(m,x,I){I=Math.min(m.i.length,I);const B=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Kt=["count="+I];Fe==-1?I>0?(Fe=ae[0].g,Kt.push("ofs="+Fe)):Fe=0:Kt.push("ofs="+Fe);let ut=!0;for(let Mt=0;Mt<I;Mt++){var ue=ae[Mt].g;const Tr=ae[Mt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Mt].g-100),ut=!1;else try{ue="req"+ue+"_"||"";try{var ve=Tr instanceof Map?Tr:Object.entries(Tr);for(const[bi,Gr]of ve){let Kr=Gr;u(Gr)&&(Kr=ct(Gr)),Kt.push(ue+bi+"="+encodeURIComponent(Kr))}}catch(bi){throw Kt.push(ue+"type="+encodeURIComponent("_badmap")),bi}}catch{B&&B(Tr)}}if(ut){ve=Kt.join("&");break e}}ve=void 0}return m=m.i.splice(0,I),x.G=m,ve}function Gh(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;K||S(),z||(K(),z=!0),M.add(x,m),m.A=0}}function za(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),Qh(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,Kh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Ms(this),Kh(this))};function Vc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Kh(m){m.g=new Br(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=tn(m.na);yt(x,"RID","rpc"),yt(x,"SID",m.M),yt(x,"AID",m.K),yt(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&yt(x,"TO",m.ia),yt(x,"TYPE","xmlhttp"),Ua(m,x),m.u&&m.o&&ja(x,m.u,m.o),m.O&&(m.g.H=m.O);var I=m.g;m=m.ba,I.M=1,I.A=Oa(tn(x)),I.u=null,I.R=!0,Wo(I,m)}r.Va=function(){this.C!=null&&(this.C=null,Ms(this),za(this),pt(19))};function sl(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Yh(m,x){var I=null;if(m.g==x){sl(m),Vc(m),m.g=null;var B=2}else if(fi(m.h,x))I=x.G,Ac(m.h,x),B=1;else return;if(m.I!=0){if(x.o)if(B==1){I=x.u?x.u.length:0,x=Date.now()-x.F;var ae=m.D;B=oi(),pe(B,new hn(B,I)),_i(m)}else Gh(m);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(B==1&&il(m,x)||B==2&&za(m)))switch(I&&I.length>0&&(x=m.h,x.i=x.i.concat(I)),ae){case 1:vi(m,5);break;case 4:vi(m,10);break;case 3:vi(m,6);break;default:vi(m,2)}}}function Qh(m,x){let I=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(I*=2),I*x}function vi(m,x){if(m.j.info("Error code "+x),x==2){var I=f(m.bb,m),B=m.Ua;const ae=!B;B=new or(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yn(B,"https"),Oa(B),ae?Hr(B.toString(),I):Dc(B.toString(),I)}else pt(2);m.I=0,m.l&&m.l.pa(x),Wh(m),rl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Wh(m){if(m.I=0,m.ja=[],m.l){const x=Ic(m.h);(x.length!=0||m.i.length!=0)&&(E(m.ja,x),E(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Xh(m,x,I){var B=I instanceof or?tn(I):new or(I);if(B.g!="")x&&(B.g=x+"."+B.g),Is(B,B.u);else{var ae=c.location;B=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new or(null);B&&yn(ue,B),x&&(ue.g=x),ae&&Is(ue,ae),I&&(ue.h=I),B=ue}return I=m.G,x=m.wa,I&&x&&yt(B,I,x),yt(B,"VER",m.ka),Ua(m,B),B}function Jh(m,x,I){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new Tt(new gi({ab:I})):new Tt(m.ma),x.Fa(m.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}r=Zh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ps(){}Ps.prototype.g=function(m,x){return new Hn(m,x)};function Hn(m,x){qe.call(this),this.g=new Os(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!C(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new Yi(this)}y(Hn,qe),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Pc(this.g)},Hn.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.v&&(I={},I.__data__=ct(m),m=I);x.i.push(new en(x.Ya++,m)),x.I==3&&_i(x)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Pc(this.g),delete this.g,Hn.Z.N.call(this)};function ed(m){Et.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const I in x){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}y(ed,Et);function td(){Jt.call(this),this.status=1}y(td,Jt);function Yi(m){this.g=m}y(Yi,Zh),Yi.prototype.ra=function(){pe(this.g,"a")},Yi.prototype.qa=function(m){pe(this.g,new ed(m))},Yi.prototype.pa=function(m){pe(this.g,new td)},Yi.prototype.oa=function(){pe(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,l2=function(){return new Ps},o2=function(){return oi()},a2=kt,e0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Sf=ka,wc.COMPLETE="complete",s2=wc,wn.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",qe.prototype.listen=qe.prototype.J,ku=wn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,i2=Tt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Cx="@firebase/firestore",Nx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let yc="12.3.0";const Ao=new V0("@firebase/firestore");function ql(){return Ao.logLevel}function ye(r,...e){if(Ao.logLevel<=Xe.DEBUG){const t=e.map(Y0);Ao.debug(`Firestore (${yc}): ${r}`,...t)}}function Gn(r,...e){if(Ao.logLevel<=Xe.ERROR){const t=e.map(Y0);Ao.error(`Firestore (${yc}): ${r}`,...t)}}function Io(r,...e){if(Ao.logLevel<=Xe.WARN){const t=e.map(Y0);Ao.warn(`Firestore (${yc}): ${r}`,...t)}}function Y0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,c2(r,n,t)}function c2(r,e,t){let n=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Gn(n),new Error(n)}function Re(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||c2(e,s,n)}function Ue(r,e){return r}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class u2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class pM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yM{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Re(typeof n.accessToken=="string",31837,{l:n}),new u2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class _M{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vM{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _M(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const n=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wM(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Q0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=wM(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function t0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Ay(s)===Ay(o)?Le(s,o):Ay(s)?1:-1}return Le(r.length,e.length)}const xM=55296,EM=57343;function Ay(r){const e=r.charCodeAt(0);return e>=xM&&e<=EM}function rc(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function h2(r){return r+"\0"}const Dx="__name__";class Si{constructor(e,t,n){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Se(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Si.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const n=Si.isNumericId(e),s=Si.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Si.extractNumericId(e).compare(Si.extractNumericId(t)):t0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ya.fromString(e.substring(4,e.length-2))}}class ft extends Si{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new be(fe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const TM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Si{construct(e,t,n){return new Lt(e,t,n)}static isValidIdentifier(e){return TM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dx}static keyField(){return new Lt([Dx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new be(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new be(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new be(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ft.fromString(e))}static fromName(e){return new we(ft.fromString(e).popFirst(5))}static empty(){return new we(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ft(e.slice()))}}function d2(r,e,t){if(!t)throw new be(fe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function SM(r,e,t,n){if(e===!0&&n===!0)throw new be(fe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ox(r){if(!we.isDocumentKey(r))throw new be(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Mx(r){if(we.isDocumentKey(r))throw new be(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function f2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function jm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jm(r);throw new be(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function ln(r,e){const t={typeString:r};return e&&(t.value=e),t}function Sh(r,e){if(!f2(r))throw new be(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new be(fe.INVALID_ARGUMENT,t);return!0}const Px=-62135596800,jx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*jx);return new bt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Px)throw new be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jx}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sh(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Px;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:ln("string",bt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new bt(0,0))}static max(){return new ke(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const eh=-1;class Xf{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function n0(r){return r.fields.find((e=>e.kind===2))}function so(r){return r.fields.filter((e=>e.kind!==2))}Xf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class th{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new th(0,_r.min())}}function AM(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(n===1e9?new bt(t+1,0):new bt(t,n));return new _r(s,we.empty(),e)}function m2(r){return new _r(r.readTime,r.key,eh)}class _r{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _r(ke.min(),we.empty(),eh)}static max(){return new _r(ke.max(),we.empty(),eh)}}function W0(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const g2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ho(r){if(r.code!==fe.FAILED_PRECONDITION||r.message!==g2)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,n)=>{t(e)}))}static reject(e){return new se(((t,n)=>{n(e)}))}static waitFor(e){return new se(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next((s=>s?se.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new se(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new se(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const gr="SimpleDb";class Vm{static open(e,t,n,s){try{return new Vm(t,e.transaction(s,n))}catch(o){throw new zu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=X0(n.target.error);this.S.reject(new zu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RM(t)}}class _a{static delete(e){return ye(gr,"Removing database:",e),oo(oS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!pS())return!1;if(_a.F())return!0;const e=fn(),t=_a.M(e),n=0<t&&t<10,s=y2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,_a.M(fn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ye(gr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new be(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new be(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new zu(e,c))},s.onupgradeneeded=o=>{ye(gr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{ye(gr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Vm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),se.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(ye(gr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function y2(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class IM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return oo(this.U.delete())}}class zu extends be{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ia(r){return r.name==="IndexedDbTransactionError"}class RM{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ye(gr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ye(gr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oo(n)}add(e){return ye(gr,"ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ye(gr,"GET",this.store.name,e,t),t)))}delete(e){return ye(gr,"DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return ye(gr,"COUNT",this.store.name),oo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new se(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new se(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){ye(gr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new se(((n,s)=>{t.onerror=o=>{const c=X0(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new se(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new IM(u),f=t(u.primaryKey,u.value,d);if(f instanceof se){const g=f.catch((y=>(d.done(),se.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>se.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oo(r){return new se(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=X0(n.target.error);t(s)}}))}let Vx=!1;function X0(r){const e=_a.M(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vx||(Vx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Bu="IndexBackfiller";class CM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ye(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ye(Bu,`Documents written: ${t}`)}catch(t){Ia(t)?ye(Bu,"Ignoring IndexedDB error during index backfill: ",t):await Ho(t)}await this.re(6e4)}))}}class NM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return se.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return ye(Bu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(ye(Bu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=m2(o);W0(c,n)>0&&(n=c)})),new _r(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pr.ce=-1;const go=-1;function Lm(r){return r==null}function nh(r){return r===0&&1/r==-1/0}function kM(r){return typeof r=="number"&&Number.isInteger(r)&&!nh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Jf="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Lx(e)),e=DM(r.get(t),e);return Lx(e)}function DM(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case Jf:t+="";break;default:t+=o}}return t}function Lx(r){return r+Jf+""}function Ni(r){const e=r.length;if(Re(e>=2,64408,{path:r}),e===2)return Re(r.charAt(0)===Jf&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(Jf,o);switch((c<0||c>t)&&Se(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Se(61167,{path:r})}o=c+2}return new ft(n)}const ao="remoteDocuments",Ah="owner",Vl="owner",rh="mutationQueues",OM="userId",Zr="mutations",Ux="batchId",fo="userMutationsIndex",zx=["userId","batchId"];function If(r,e){return[r,Un(e)]}function _2(r,e,t){return[r,Un(e),t]}const MM={},ic="documentMutations",Zf="remoteDocumentsV14",PM=["prefixPath","collectionGroup","readTime","documentId"],Rf="documentKeyIndex",jM=["prefixPath","collectionGroup","documentId"],v2="collectionGroupIndex",VM=["collectionGroup","readTime","prefixPath","documentId"],ih="remoteDocumentGlobal",r0="remoteDocumentGlobalKey",sc="targets",b2="queryTargetsIndex",LM=["canonicalId","targetId"],ac="targetDocuments",UM=["targetId","path"],J0="documentTargetsIndex",zM=["path","targetId"],em="targetGlobalKey",po="targetGlobal",sh="collectionParents",BM=["collectionId","parent"],oc="clientMetadata",FM="clientId",Um="bundles",HM="bundleId",zm="namedQueries",qM="name",Z0="indexConfiguration",$M="indexId",i0="collectionGroupIndex",GM="collectionGroup",Fu="indexState",KM=["indexId","uid"],w2="sequenceNumberIndex",YM=["uid","sequenceNumber"],Hu="indexEntries",QM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x2="documentKeyIndex",WM=["indexId","uid","orderedDocumentKey"],Bm="documentOverlays",XM=["userId","collectionPath","documentId"],s0="collectionPathOverlayIndex",JM=["userId","collectionPath","largestBatchId"],E2="collectionGroupOverlayIndex",ZM=["userId","collectionGroup","largestBatchId"],e_="globals",eP="name",T2=[rh,Zr,ic,ao,sc,Ah,po,ac,oc,ih,sh,Um,zm],tP=[...T2,Bm],S2=[rh,Zr,ic,Zf,sc,Ah,po,ac,oc,ih,sh,Um,zm,Bm],A2=S2,t_=[...A2,Z0,Fu,Hu],nP=t_,I2=[...t_,e_],rP=I2;class a0 extends p2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mn(r,e){const t=Ue(r);return _a.O(t.le,e)}function Bx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ra(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function R2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Vt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fx(this.data.getIterator())}getIteratorFrom(e){return new Fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ll(r){return r.hasNext()?r.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new xt(Lt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class C2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new C2("Invalid base64 string: "+o):o}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const iP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(r){if(Re(!!r,39018),typeof r=="string"){let e=0;const t=iP.exec(r);if(Re(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xs(r){return typeof r=="string"?cn.fromBase64String(r):cn.fromUint8Array(r)}const N2="server_timestamp",k2="__type__",D2="__previous_value__",O2="__local_write_time__";function n_(r){return(r?.mapValue?.fields||{})[k2]?.stringValue===N2}function Fm(r){const e=r.mapValue.fields[D2];return n_(e)?Fm(e):e}function ah(r){const e=ws(r.mapValue.fields[O2].timestampValue);return new bt(e.seconds,e.nanos)}class sP{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const tm="(default)";class Ro{constructor(e,t){this.projectId=e,this.database=t||tm}static empty(){return new Ro("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}const r_="__type__",M2="__max__",ma={mapValue:{fields:{__type__:{stringValue:M2}}}},i_="__vector__",lc="value",Cf={nullValue:"NULL_VALUE"};function xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?n_(r)?4:P2(r)?9007199254740991:Hm(r)?10:11:Se(28295,{value:r})}function Li(r,e){if(r===e)return!0;const t=xa(r);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ah(r).isEqual(ah(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=ws(s.timestampValue),u=ws(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return xs(s.bytesValue).isEqual(xs(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return jt(s.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return jt(s.integerValue)===jt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=jt(s.doubleValue),u=jt(o.doubleValue);return c===u?nh(c)===nh(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return rc(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Bx(c)!==Bx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Li(c[d],u[d])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function oh(r,e){return(r.values||[]).find((t=>Li(t,e)))!==void 0}function Ea(r,e){if(r===e)return 0;const t=xa(r),n=xa(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=jt(o.integerValue||o.doubleValue),d=jt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Hx(r.timestampValue,e.timestampValue);case 4:return Hx(ah(r),ah(e));case 5:return t0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=xs(o),d=xs(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Le(jt(o.latitude),jt(c.latitude));return u!==0?u:Le(jt(o.longitude),jt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return qx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[lc]?.arrayValue,g=d[lc]?.arrayValue,y=Le(f?.values?.length||0,g?.values?.length||0);return y!==0?y:qx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ma.mapValue&&c===ma.mapValue)return 0;if(o===ma.mapValue)return 1;if(c===ma.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=t0(d[y],g[y]);if(v!==0)return v;const w=Ea(u[d[y]],f[g[y]]);if(w!==0)return w}return Le(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Hx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=ws(r),n=ws(e),s=Le(t.seconds,n.seconds);return s!==0?s:Le(t.nanos,n.nanos)}function qx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Ea(t[s],n[s]);if(o)return o}return Le(t.length,n.length)}function cc(r){return o0(r)}function o0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=ws(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return xs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=o0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${o0(t.fields[c])}`;return s+"}"})(r.mapValue):Se(61005,{value:r})}function Nf(r){switch(xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fm(r);return e?16+Nf(e):16;case 5:return 2*r.stringValue.length;case 6:return xs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Nf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Ra(n.fields,((o,c)=>{s+=o.length+Nf(c)})),s})(r.mapValue);default:throw Se(13486,{value:r})}}function lh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function l0(r){return!!r&&"integerValue"in r}function ch(r){return!!r&&"arrayValue"in r}function $x(r){return!!r&&"nullValue"in r}function Gx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function kf(r){return!!r&&"mapValue"in r}function Hm(r){return(r?.mapValue?.fields||{})[r_]?.stringValue===i_}function qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ra(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=qu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(r.arrayValue.values[t]);return e}return{...r}}function P2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===M2}const j2={mapValue:{fields:{[r_]:{stringValue:i_},[lc]:{arrayValue:{}}}}};function aP(r){return"nullValue"in r?Cf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?lh(Ro.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Hm(r)?j2:{mapValue:{}}:Se(35942,{value:r})}function oP(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?lh(Ro.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?j2:"mapValue"in r?Hm(r)?{mapValue:{}}:ma:Se(61959,{value:r})}function Kx(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Yx(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=Lt.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=qu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Ra(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new jn(qu(this.value))}}function V2(r){const e=[];return Ra(r.fields,((t,n)=>{const s=new Lt([t]);if(kf(n)){const o=V2(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new sr(e)}class Ht{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Ht(e,0,ke.min(),ke.min(),ke.min(),jn.empty(),0)}static newFoundDocument(e,t,n,s){return new Ht(e,1,t,ke.min(),n,s,0)}static newNoDocument(e,t){return new Ht(e,2,t,ke.min(),ke.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,ke.min(),ke.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uc{constructor(e,t){this.position=e,this.inclusive=t}}function Qx(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Ea(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Wx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class nm{constructor(e,t="asc"){this.field=e,this.dir=t}}function lP(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class L2{}class Je extends L2{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new cP(e,t,n):t==="array-contains"?new dP(e,n):t==="in"?new q2(e,n):t==="not-in"?new fP(e,n):t==="array-contains-any"?new mP(e,n):new Je(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new uP(e,n):new hP(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends L2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return hc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hc(r){return r.op==="and"}function c0(r){return r.op==="or"}function s_(r){return U2(r)&&hc(r)}function U2(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function u0(r){if(r instanceof Je)return r.field.canonicalString()+r.op.toString()+cc(r.value);if(s_(r))return r.filters.map((e=>u0(e))).join(",");{const e=r.filters.map((t=>u0(t))).join(",");return`${r.op}(${e})`}}function z2(r,e){return r instanceof Je?(function(n,s){return s instanceof Je&&n.op===s.op&&n.field.isEqual(s.field)&&Li(n.value,s.value)})(r,e):r instanceof wt?(function(n,s){return s instanceof wt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&z2(c,s.filters[u])),!0):!1})(r,e):void Se(19439)}function B2(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function F2(r){return r instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(F2).join(" ,")+"}"})(r):"Filter"}class cP extends Je{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class uP extends Je{constructor(e,t){super(e,"in",t),this.keys=H2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class hP extends Je{constructor(e,t){super(e,"not-in",t),this.keys=H2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function H2(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class dP extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&oh(t.arrayValue,this.value)}}class q2 extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oh(this.value.arrayValue,t)}}class fP extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oh(this.value.arrayValue,t)}}class mP extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>oh(this.value.arrayValue,n)))}}class gP{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function h0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new gP(r,e,t,n,s,o,c)}function Co(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>u0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>cc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>cc(n))).join(",")),e.Te=t}return e.Te}function Ih(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!lP(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!z2(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Wx(r.startAt,e.startAt)&&Wx(r.endAt,e.endAt)}function rm(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function im(r,e){return r.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function Xx(r,e,t){let n=Cf,s=!0;for(const o of im(r,e)){let c=Cf,u=!0;switch(o.op){case"<":case"<=":c=aP(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Cf}Kx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Kx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function Jx(r,e,t){let n=ma,s=!0;for(const o of im(r,e)){let c=ma,u=!0;switch(o.op){case">=":case">":c=oP(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ma}Yx({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Yx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class Rh{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pP(r,e,t,n,s,o,c,u){return new Rh(r,e,t,n,s,o,c,u)}function Ch(r){return new Rh(r)}function Zx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function $2(r){return r.collectionGroup!==null}function $u(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new xt(Lt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new nm(o,n))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new nm(Lt.keyField(),n))}return e.Ie}function jr(r){const e=Ue(r);return e.Ee||(e.Ee=yP(e,$u(r))),e.Ee}function yP(r,e){if(r.limitType==="F")return h0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new nm(s.field,o)}));const t=r.endAt?new uc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new uc(r.startAt.position,r.startAt.inclusive):null;return h0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function d0(r,e){const t=r.filters.concat([e]);return new Rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function f0(r,e,t){return new Rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function qm(r,e){return Ih(jr(r),jr(e))&&r.limitType===e.limitType}function G2(r){return`${Co(jr(r))}|lt:${r.limitType}`}function $l(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>F2(s))).join(", ")}]`),Lm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>cc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>cc(s))).join(",")),`Target(${n})`})(jr(r))}; limitType=${r.limitType})`}function Nh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of $u(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=Qx(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,$u(n),s)||n.endAt&&!(function(c,u,d){const f=Qx(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,$u(n),s))})(r,e)}function _P(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function K2(r){return(e,t)=>{let n=!1;for(const s of $u(r)){const o=vP(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function vP(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ea(d,f):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Se(19790,{direction:r.dir})}}class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return R2(this.inner)}size(){return this.innerSize}}const bP=new Vt(we.comparator);function yr(){return bP}const Y2=new Vt(we.comparator);function Du(...r){let e=Y2;for(const t of r)e=e.insert(t.key,t);return e}function Q2(r){let e=Y2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ki(){return Gu()}function W2(){return Gu()}function Gu(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const wP=new Vt(we.comparator),xP=new xt(we.comparator);function Ge(...r){let e=xP;for(const t of r)e=e.add(t);return e}const EP=new xt(Le);function TP(){return EP}function a_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function X2(r){return{integerValue:""+r}}function SP(r,e){return kM(e)?X2(e):a_(r,e)}class $m{constructor(){this._=void 0}}function AP(r,e,t){return r instanceof dc?(function(s,o){const c={fields:{[k2]:{stringValue:N2},[O2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&n_(o)&&(o=Fm(o)),o&&(c.fields[D2]=o),{mapValue:c}})(t,e):r instanceof No?Z2(r,e):r instanceof ko?eA(r,e):(function(s,o){const c=J2(s,o),u=eE(c)+eE(s.Ae);return l0(c)&&l0(s.Ae)?X2(u):a_(s.serializer,u)})(r,e)}function IP(r,e,t){return r instanceof No?Z2(r,e):r instanceof ko?eA(r,e):t}function J2(r,e){return r instanceof uh?(function(n){return l0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class dc extends $m{}class No extends $m{constructor(e){super(),this.elements=e}}function Z2(r,e){const t=tA(e);for(const n of r.elements)t.some((s=>Li(s,n)))||t.push(n);return{arrayValue:{values:t}}}class ko extends $m{constructor(e){super(),this.elements=e}}function eA(r,e){let t=tA(e);for(const n of r.elements)t=t.filter((s=>!Li(s,n)));return{arrayValue:{values:t}}}class uh extends $m{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eE(r){return jt(r.integerValue||r.doubleValue)}function tA(r){return ch(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Gm{constructor(e,t){this.field=e,this.transform=t}}function RP(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof No&&s instanceof No||n instanceof ko&&s instanceof ko?rc(n.elements,s.elements,Li):n instanceof uh&&s instanceof uh?Li(n.Ae,s.Ae):n instanceof dc&&s instanceof dc})(r.transform,e.transform)}class CP{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Km{}function nA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ym(r.key,Ln.none()):new _c(r.key,r.data,Ln.none());{const t=r.data,n=jn.empty();let s=new xt(Lt.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new As(r.key,n,new sr(s.toArray()),Ln.none())}}function NP(r,e,t){r instanceof _c?(function(s,o,c){const u=s.value.clone(),d=nE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof As?(function(s,o,c){if(!Df(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=nE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(rA(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ku(r,e,t,n){return r instanceof _c?(function(o,c,u,d){if(!Df(o.precondition,c))return u;const f=o.value.clone(),g=rE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof As?(function(o,c,u,d){if(!Df(o.precondition,c))return u;const f=rE(o.fieldTransforms,d,c),g=c.data;return g.setAll(rA(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return Df(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function kP(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=J2(n.transform,s||null);o!=null&&(t===null&&(t=jn.empty()),t.set(n.field,o))}return t||null}function tE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&rc(n,s,((o,c)=>RP(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class _c extends Km{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Km{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function rA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function nE(r,e,t){const n=new Map;Re(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,IP(c,u,t[s]))}return n}function rE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,AP(o,c,e))}return n}class Ym extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iA extends Km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class o_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&NP(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ku(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ku(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=W2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=nA(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(ke.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,((t,n)=>tE(t,n)))&&rc(this.baseMutations,e.baseMutations,((t,n)=>tE(t,n)))}}class l_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Re(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return wP})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new l_(e,t,n,s)}}class c_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DP{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function OP(r){switch(r){case fe.OK:return Se(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function sA(r){if(r===void 0)return Gn("GRPC error has no .code"),fe.UNKNOWN;switch(r){case on.OK:return fe.OK;case on.CANCELLED:return fe.CANCELLED;case on.UNKNOWN:return fe.UNKNOWN;case on.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case on.INTERNAL:return fe.INTERNAL;case on.UNAVAILABLE:return fe.UNAVAILABLE;case on.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case on.NOT_FOUND:return fe.NOT_FOUND;case on.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case on.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case on.ABORTED:return fe.ABORTED;case on.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case on.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case on.DATA_LOSS:return fe.DATA_LOSS;default:return Se(39323,{code:r})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function MP(){return new TextEncoder}const PP=new ya([4294967295,4294967295],0);function iE(r){const e=MP().encode(r),t=new r2;return t.update(e),new Uint8Array(t.digest())}function sE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ya([t,n],0),new ya([s,o],0)]}class u_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ou(`Invalid padding: ${t}`);if(n<0)throw new Ou(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ou(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Ou(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ya.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(ya.fromNumber(n)));return s.compare(PP)===1&&(s=new ya([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=iE(e),[n,s]=sE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new u_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=iE(e),[n,s]=sE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qm{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qm(ke.min(),s,new Vt(Le),yr(),Ge())}}class kh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new kh(n,t,Ge(),Ge(),Ge())}}class Of{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class aA{constructor(e,t){this.targetId=e,this.Ce=t}}class oA{constructor(e,t,n=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class aE{constructor(){this.ve=0,this.Fe=oE(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),n=Ge();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Se(38017,{changeType:o})}})),new kh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=oE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jP{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=hf(),this.He=hf(),this.Ye=new Vt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(rm(o))if(n===0){const c=new we(o.path);this.et(t,c,Ht.newNoDocument(c,ke.min()))}else Re(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=xs(n).toUint8Array()}catch(d){if(d instanceof C2)return Io("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new u_(c,s,o)}catch(d){return Io(d instanceof Ou?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&rm(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,Ht.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ge();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Qm(e,t,this.Ye,this.je,n);return this.je=yr(),this.Je=hf(),this.He=hf(),this.Ye=new Vt(Le),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new aE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new Vt(we.comparator)}function oE(){return new Vt(we.comparator)}const VP={asc:"ASCENDING",desc:"DESCENDING"},LP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UP={and:"AND",or:"OR"};class zP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function m0(r,e){return r.useProto3Json||Lm(e)?e:{value:e}}function fc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function BP(r,e){return fc(r,e.toTimestamp())}function Yn(r){return Re(!!r,49232),ke.fromTimestamp((function(t){const n=ws(t);return new bt(n.seconds,n.nanos)})(r))}function h_(r,e){return g0(r,e).canonicalString()}function g0(r,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function cA(r){const e=ft.fromString(r);return Re(_A(e),10190,{key:e.toString()}),e}function sm(r,e){return h_(r.databaseId,e.path)}function yo(r,e){const t=cA(e);if(t.get(1)!==r.databaseId.projectId)throw new be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(dA(t))}function uA(r,e){return h_(r.databaseId,e)}function hA(r){const e=cA(r);return e.length===4?ft.emptyPath():dA(e)}function p0(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function dA(r){return Re(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function lE(r,e,t){return{name:sm(r,e),fields:t.value.mapValue.fields}}function FP(r,e,t){const n=yo(r,e.name),s=Yn(e.updateTime),o=e.createTime?Yn(e.createTime):ke.min(),c=new jn({mapValue:{fields:e.fields}}),u=Ht.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function HP(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Re(g===void 0||typeof g=="string",58123),cn.fromBase64String(g||"")):(Re(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cn.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?fe.UNKNOWN:sA(f.code);return new be(g,f.message||"")})(c);t=new oA(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=yo(r,n.document.name),o=Yn(n.document.updateTime),c=n.document.createTime?Yn(n.document.createTime):ke.min(),u=new jn({mapValue:{fields:n.document.fields}}),d=Ht.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Of(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=yo(r,n.document),o=n.readTime?Yn(n.readTime):ke.min(),c=Ht.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Of([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=yo(r,n.document),o=n.removedTargetIds||[];t=new Of([],o,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new DP(s,o),u=n.targetId;t=new aA(u,c)}}return t}function am(r,e){let t;if(e instanceof _c)t={update:lE(r,e.key,e.value)};else if(e instanceof Ym)t={delete:sm(r,e.key)};else if(e instanceof As)t={update:lE(r,e.key,e.data),updateMask:QP(e.fieldMask)};else{if(!(e instanceof iA))return Se(16599,{Vt:e.type});t={verify:sm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof dc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof No)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ko)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof uh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Se(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:BP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se(27497)})(r,e.precondition)),t}function y0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ln.updateTime(Yn(o.updateTime)):o.exists!==void 0?Ln.exists(o.exists):Ln.none()})(e.currentDocument):Ln.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Re(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new dc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new No(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new ko(g)}else"increment"in u?d=new uh(c,u.increment):Se(16584,{proto:u});const f=Lt.fromServerFormat(u.fieldPath);return new Gm(f,d)})(r,s))):[];if(e.update){e.update.name;const s=yo(r,e.update.name),o=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new sr(f.map((g=>Lt.fromServerFormat(g))))})(e.updateMask);return new As(s,o,c,t,n)}return new _c(s,o,t,n)}if(e.delete){const s=yo(r,e.delete);return new Ym(s,t)}if(e.verify){const s=yo(r,e.verify);return new iA(s,t)}return Se(1463,{proto:e})}function qP(r,e){return r&&r.length>0?(Re(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Yn(s.updateTime):Yn(o);return c.isEqual(ke.min())&&(c=Yn(o)),new CP(c,s.transformResults||[])})(t,e)))):[]}function fA(r,e){return{documents:[uA(r,e.path)]}}function mA(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=uA(r,s);const o=(function(f){if(f.length!==0)return yA(wt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Gl(v.field),direction:GP(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=m0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function gA(r){let e=hA(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Re(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=pA(y);return v instanceof wt&&s_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(E){return new nm(Kl(E.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Lm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new uc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new uc(w,v)})(t.endAt)),pP(e,s,c,o,u,"F",d,f)}function $P(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Kl(t.unaryFilter.field);return Je.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Kl(t.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kl(t.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Kl(t.unaryFilter.field);return Je.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Je.create(Kl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((n=>pA(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function GP(r){return VP[r]}function KP(r){return LP[r]}function YP(r){return UP[r]}function Gl(r){return{fieldPath:r.canonicalString()}}function Kl(r){return Lt.fromServerFormat(r.fieldPath)}function yA(r){return r instanceof Je?(function(t){if(t.op==="=="){if(Gx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if($x(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if($x(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:KP(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const n=t.getFilters().map((s=>yA(s)));return n.length===1?n[0]:{compositeFilter:{op:YP(t.op),filters:n}}})(r):Se(54877,{filter:r})}function QP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _A(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=ke.min(),c=ke.min(),u=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vA{constructor(e){this.yt=e}}function WP(r,e){let t;if(e.document)t=FP(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=Oo(e.noDocument.readTime);t=Ht.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const n=we.fromSegments(e.unknownDocument.path),s=Oo(e.unknownDocument.version);t=Ht.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new bt(s[0],s[1]);return ke.fromTimestamp(o)})(e.readTime)),t}function cE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:sm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:fc(o,c.version.toTimestamp()),createTime:fc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return n}function om(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(r){const e=new bt(r.seconds,r.nanoseconds);return ke.fromTimestamp(e)}function lo(r,e){const t=(e.baseMutations||[]).map((o=>y0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>y0(r.yt,o))),s=bt.fromMillis(e.localWriteTimeMs);return new o_(e.batchId,s,t,n)}function Mu(r){const e=Oo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Oo(r.lastLimboFreeSnapshotVersion):ke.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Re(c===1,1966,{count:c}),jr(Ch(hA(o.documents[0])))})(r.query):(function(o){return jr(gA(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,cn.fromBase64String(r.resumeToken))}function bA(r,e){const t=Do(e.snapshotVersion),n=Do(e.lastLimboFreeSnapshotVersion);let s;s=rm(e.target)?fA(r.yt,e.target):mA(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Co(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function wA(r){const e=gA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?f0(e,e.limit,"L"):e}function Iy(r,e){return new c_(e.largestBatchId,y0(r.yt,e.overlayMutation))}function uE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function hE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Do(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class XP{getBundleMetadata(e,t){return dE(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Oo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return dE(e).put((function(s){return{bundleId:s.id,createTime:Do(Yn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return fE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:wA(o.bundledQuery),readTime:Oo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return fE(e).put((function(s){return{name:s.name,readTime:Do(Yn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function dE(r){return mn(r,Um)}function fE(r){return mn(r,zm)}class Wm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Wm(e,n)}getOverlay(e,t){return Tu(e).get(uE(this.userId,t)).next((n=>n?Iy(this.serializer,n):null))}getOverlays(e,t){const n=ki();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new c_(t,c);s.push(this.St(e,u))})),se.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Tu(e).Z(s0,u))})),se.waitFor(o)}getOverlaysForCollection(e,t,n){const s=ki(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Tu(e).J(s0,c).next((u=>{for(const d of u){const f=Iy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=ki();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tu(e).ee({index:E2,range:u},((d,f,g)=>{const y=Iy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Tu(e).put((function(s,o,c){const[u,d,f]=uE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:am(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Tu(r){return mn(r,Bm)}class JP{bt(e){return mn(e,e_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?cn.fromUint8Array(n):cn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const n=jt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),nh(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=ws(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?P2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Hm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=lc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}co.Kt=new co;const Ul=255;function ZP(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function mE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=ZP(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class e3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=mE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=mE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ul),this.sn(255)}_n(){this.an(Ul),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ul?(this.sn(Ul),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ul?(this.an(Ul),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class t3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class n3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Su{constructor(){this.cn=new e3,this.ln=new t3(this.cn),this.hn=new n3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class uo{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new uo(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Mf(this.En),directionalValue:Mf(this.dn),orderedDocumentKey:Mf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function sa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=gE(r.En,e.En),t!==0?t:(t=gE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function gE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Mf(r){return gS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function pE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class yE{constructor(e){this.mn=new xt(((t,n)=>Lt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=n0(e);if(t!==void 0&&!this.wn(t))return!1;const n=so(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Lt.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Af(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Af(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Af(n.field,n.dir==="asc"?0:1)));return new Xf(Xf.UNKNOWN_ID,this.collectionId,t,th.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function xA(r){if(Re(r instanceof Je||r instanceof wt,20012),r instanceof Je){if(r instanceof q2){const t=r.value.arrayValue?.values?.map((n=>Je.create(r.field,"==",n)))||[];return wt.create(t,"or")}return r}const e=r.filters.map((t=>xA(t)));return wt.create(e,r.op)}function r3(r){if(r.getFilters().length===0)return[];const e=b0(xA(r));return Re(EA(e),7391),_0(e)||v0(e)?[e]:e.getFilters()}function _0(r){return r instanceof Je}function v0(r){return r instanceof wt&&s_(r)}function EA(r){return _0(r)||v0(r)||(function(t){if(t instanceof wt&&c0(t)){for(const n of t.getFilters())if(!_0(n)&&!v0(n))return!1;return!0}return!1})(r)}function b0(r){if(Re(r instanceof Je||r instanceof wt,34018),r instanceof Je)return r;if(r.filters.length===1)return b0(r.filters[0]);const e=r.filters.map((n=>b0(n)));let t=wt.create(e,r.op);return t=lm(t),EA(t)?t:(Re(t instanceof wt,64498),Re(hc(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((n,s)=>d_(n,s))))}function d_(r,e){let t;return Re(r instanceof Je||r instanceof wt,38388),Re(e instanceof Je||e instanceof wt,25473),t=r instanceof Je?e instanceof Je?(function(s,o){return wt.create([s,o],"and")})(r,e):_E(r,e):e instanceof Je?_E(e,r):(function(s,o){if(Re(s.filters.length>0&&o.filters.length>0,48005),hc(s)&&hc(o))return B2(s,o.getFilters());const c=c0(s)?s:o,u=c0(s)?o:s,d=c.filters.map((f=>d_(f,u)));return wt.create(d,"or")})(r,e),lm(t)}function _E(r,e){if(hc(e))return B2(e,r.getFilters());{const t=e.filters.map((n=>d_(r,n)));return wt.create(t,"or")}}function lm(r){if(Re(r instanceof Je||r instanceof wt,11850),r instanceof Je)return r;const e=r.getFilters();if(e.length===1)return lm(e[0]);if(U2(r))return r;const t=e.map((s=>lm(s))),n=[];return t.forEach((s=>{s instanceof Je?n.push(s):s instanceof wt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:wt.create(n,r.op)}class i3{constructor(){this.Cn=new f_}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(_r.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class f_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new xt(ft.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new xt(ft.comparator)).toArray()}}const vE="IndexedDbIndexManager",df=new Uint8Array(0);class s3{constructor(e,t){this.databaseId=t,this.vn=new f_,this.Fn=new Ss((n=>Co(n)),((n,s)=>Ih(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return bE(e).put(o)}return se.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[h2(t),""],!1,!0);return bE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ni(c.parent))}return n}))}addFieldIndex(e,t){const n=Au(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=Bl(e);return o.next((u=>{c.put(hE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Au(e),s=Bl(e),o=zl(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Au(e),n=zl(e),s=Bl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return se.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new yE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=zl(e);let s=!0;const o=new Map;return se.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ge();const u=[];return se.forEach(o,((d,f)=>{ye(vE,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(d)} to execute ${Co(t)}`);const g=(function(U,H){const K=n0(H);if(K===void 0)return null;for(const z of im(U,K.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(U,H){const K=new Map;for(const z of so(H))for(const M of im(U,z.fieldPath))switch(M.op){case"==":case"in":K.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return K.set(z.fieldPath.canonicalString(),M.value),Array.from(K.values())}return null})(f,d),v=(function(U,H){const K=[];let z=!0;for(const M of so(H)){const S=M.kind===0?Xx(U,M.fieldPath,U.startAt):Jx(U,M.fieldPath,U.startAt);K.push(S.value),z&&(z=S.inclusive)}return new uc(K,z)})(f,d),w=(function(U,H){const K=[];let z=!0;for(const M of so(H)){const S=M.kind===0?Jx(U,M.fieldPath,U.endAt):Xx(U,M.fieldPath,U.endAt);K.push(S.value),z&&(z=S.inclusive)}return new uc(K,z)})(f,d),E=this.On(d,f,v),k=this.On(d,f,w),O=this.Nn(d,f,y),V=this.Bn(d.indexId,g,E,v.inclusive,k,w.inclusive,O);return se.forEach(V,(q=>n.Y(q,t.limit).next((U=>{U.forEach((H=>{const K=we.fromSegments(H.documentKey);c.has(K)||(c=c.add(K),u.push(K))}))}))))})).next((()=>u))}return se.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=r3(wt.create(e.filters,"and")).map((n=>h0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):df,w=this.kn(e,v,n[y%f],s),E=this.qn(e,v,o[y%f],c),k=u.map((O=>this.kn(e,v,O,!0)));g.push(...this.createRange(w,E,k))}return g}kn(e,t,n,s){const o=new uo(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new uo(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new yE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return se.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new xt(Lt.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Su;for(const s of so(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);co.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Su;return co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Su;return co.Kt.Dt(lh(this.databaseId,t),n.Pn((function(o){const c=so(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Su);let o=0;for(const c of so(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&ch(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);co.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Su;d.seed(u.un()),co.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof Je&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Au(e),s=Bl(e);return(t?n.J(i0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return se.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new th(y.sequenceNumber,new _r(Oo(y.readTime),new we(Ni(y.documentKey)),y.largestBatchId)):th.empty(),w=g.fields.map((([E,k])=>new Af(Lt.fromServerFormat(E),k)));return new Xf(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=Au(e),o=Bl(e);return this.Gn(e).next((c=>s.J(i0,IDBKeyRange.bound(t,t)).next((u=>se.forEach(u,(d=>o.put(hE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return se.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),se.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?se.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return zl(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return zl(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=zl(e);let o=new xt(sa);return s.ee({index:x2,range:IDBKeyRange.only([n.indexId,this.uid,Mf(this.$n(n,t))])},((c,u)=>{o=o.add(new uo(n.indexId,t,pE(u.arrayValue),pE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new xt(sa);const s=this.Qn(t,e);if(s==null)return n;const o=n0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(ch(c))for(const u of c.arrayValue.values||[])n=n.add(new uo(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new uo(t.indexId,e.key,df,s));return n}Jn(e,t,n,s,o){ye(vE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),E=f.getIterator();let k=Ll(w),O=Ll(E);for(;k||O;){let V=!1,q=!1;if(k&&O){const U=g(k,O);U<0?q=!0:U>0&&(V=!0)}else k!=null?q=!0:V=!0;V?(y(O),O=Ll(E)):q?(v(k),k=Ll(w)):(k=Ll(w),O=Ll(E))}})(s,o,sa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),se.waitFor(c)}Gn(e){let t=1;return Bl(e).ee({index:w2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>sa(c,u))).filter(((c,u,d)=>!u||sa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=sa(c,e),d=sa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,df,we.empty()),d=s[c+1].Vn(this.uid,df,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return sa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wE)}getMinOffset(e,t){return se.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Se(44426))))).next(wE)}}function bE(r){return mn(r,sh)}function zl(r){return mn(r,Hu)}function Au(r){return mn(r,Z0)}function Bl(r){return mn(r,Fu)}function wE(r){Re(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;W0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new _r(e.readTime,e.documentKey,t)}const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TA=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function SA(r,e,t){const n=r.store(Zr),s=r.store(ic),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Re(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=_2(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return se.waitFor(o).next((()=>f))}function cm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Se(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(TA,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Xm{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Re(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Xm(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).ee({index:fo,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Yl(e),c=aa(e);return c.add({}).next((u=>{Re(typeof u=="number",49019);const d=new o_(u,t,n,s),f=(function(w,E,k){const O=k.baseMutations.map((q=>am(w.yt,q))),V=k.mutations.map((q=>am(w.yt,q)));return{userId:E,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:O,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new xt(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=_2(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,MM))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),se.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return aa(e).get(t).next((n=>n?(Re(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),lo(this.serializer,n)):null))}er(e,t){return this.Xn[t]?se.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return aa(e).ee({index:fo,range:s},((c,u,d)=>{u.userId===this.userId&&(Re(u.batchId>=n,47524,{tr:n}),o=lo(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=go;return aa(e).ee({index:fo,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,go],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).J(fo,t).next((n=>n.map((s=>lo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=If(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Yl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ni(g);if(f===this.userId&&t.path.isEqual(v))return aa(e).get(y).next((w=>{if(!w)throw Se(61480,{nr:c,batchId:y});Re(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(lo(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);const s=[];return t.forEach((o=>{const c=If(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Yl(e).ee({range:u},((f,g,y)=>{const[v,w,E]=f,k=Ni(w);v===this.userId&&o.path.isEqual(k)?n=n.add(E):y.done()}));s.push(d)})),se.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=If(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new xt(Le);return Yl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,E=Ni(v);y===this.userId&&n.isPrefixOf(E)?E.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(aa(e).get(o).next((c=>{if(c===null)throw Se(35274,{batchId:o});Re(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(lo(this.serializer,c))})))})),se.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return SA(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),se.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return se.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Yl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ni(o[1]);s.push(d)}else u.done()})).next((()=>{Re(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return AA(e,this.userId,t)}_r(e){return IA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:go,lastStreamToken:""}))}}function AA(r,e,t){const n=If(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Yl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function aa(r){return mn(r,Zr)}function Yl(r){return mn(r,ic)}function IA(r){return mn(r,rh)}class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}class a3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Mo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ke.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Re(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Fl(e).ee(((c,u)=>{const d=Mu(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>se.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Fl(e).ee(((n,s)=>{const o=Mu(s);t(o)}))}lr(e){return EE(e).get(em).next((t=>(Re(t!==null,2888),t)))}hr(e,t){return EE(e).put(em,t)}Pr(e,t){return Fl(e).put(bA(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Co(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Fl(e).ee({range:s,index:b2},((c,u,d)=>{const f=Mu(u);Ih(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=fa(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),se.waitFor(s)}removeMatchingKeys(e,t,n){const s=fa(e);return se.forEach(t,(o=>{const c=Un(o.path);return se.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=fa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=fa(e);let o=Ge();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ni(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[h2(n)],!1,!0);let o=0;return fa(e).ee({index:J0,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Fl(e).get(t).next((n=>n?Mu(n):null))}}function Fl(r){return mn(r,sc)}function EE(r){return mn(r,po)}function fa(r){return mn(r,ac)}const TE="LruGarbageCollector",o3=1048576;function SE([r,e],[t,n]){const s=Le(r,t);return s===0?Le(e,n):s}class l3{constructor(e){this.Ir=e,this.buffer=new xt(SE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();SE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RA{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(TE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?ye(TE,"Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Vr(3e5)}))}}class c3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Pr.ce);const n=new l3(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(xE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),ql()<=Xe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function CA(r,e){return new c3(r,e)}class u3{constructor(e,t){this.db=e,this.garbageCollector=CA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return ff(e,n)}removeReference(e,t,n){return ff(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ff(e,t)}br(e,t){return(function(s,o){let c=!1;return IA(s).te((u=>AA(s,u,o).next((d=>(d&&(c=!0),se.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,ke.min()),fa(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>se.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ff(e,t)}Sr(e,t){const n=fa(e);let s,o=Pr.ce;return n.ee({index:J0},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Pr.ce&&t(new we(Ni(s)),o),o=f,s=d):o=Pr.ce})).next((()=>{o!==Pr.ce&&t(new we(Ni(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(r,e){return fa(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class NA{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ro(e).put(n)}removeEntry(e,t,n){return ro(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],om(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Ht.newInvalidDocument(t);return ro(e).ee({index:Rf,range:IDBKeyRange.only(Iu(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:Ht.newInvalidDocument(t)};return ro(e).ee({index:Rf,range:IDBKeyRange.only(Iu(t))},((s,o)=>{n={document:this.Cr(t,o),size:cm(o)}})).next((()=>n))}getEntries(e,t){let n=yr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=yr(),s=new Vt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,cm(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return se.resolve();let s=new xt(RE);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Iu(s.first()),Iu(s.last())),c=s.getIterator();let u=c.getNext();return ro(e).ee({index:Rf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&RE(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Iu(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),om(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=yr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Nh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=yr();const c=IE(t,n),u=IE(t,_r.max());return ro(e).ee({index:v2,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new d3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return AE(e).get(r0).next((t=>(Re(!!t,20021),t)))}Dr(e,t){return AE(e).put(r0,t)}Cr(e,t){if(t){const n=WP(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ke.min())))return n}return Ht.newInvalidDocument(e)}}function kA(r){return new h3(r)}class d3 extends NA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ss((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new xt(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=cE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=cm(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=cE(this.Nr.serializer,c.convertToNoDocument(ke.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),se.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function AE(r){return mn(r,ih)}function ro(r){return mn(r,Zf)}function Iu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IE(r,e){const t=e.documentKey.path.toArray();return[r,om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RE(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=Le(t[o],n[o]),s)return s;return s=Le(t.length,n.length),s||(s=Le(t[t.length-2],n[n.length-2]),s||Le(t[t.length-1],n[n.length-1]))}class f3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DA{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Ku(n.mutation,s,sr.empty(),bt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ge()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ge()){const s=ki();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=Du();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=ki();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ge())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=yr();const c=Gu(),u=(function(){return Gu()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof As)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Ku(g.mutation,f,g.mutation.getFieldMask(),bt.now())):c.set(f.key,sr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new f3(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Gu();let s=new Vt(((c,u)=>c-u)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||sr.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ge()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=W2();g.forEach((v=>{if(!o.has(v)){const w=nA(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):se.resolve(ki());let u=eh,d=o;return c.next((f=>se.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ge()))).next((g=>({batchId:u,changes:Q2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=Du();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=Du();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(d=>{const f=(function(y,v){return new Rh(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Ht.newInvalidDocument(g)))}));let u=Du();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Ku(g.mutation,f,sr.empty(),bt.now()),Nh(t,f)&&(u=u.insert(d,f))})),u}))}}class m3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:wA(s.bundledQuery),readTime:Yn(s.readTime)}})(t)),se.resolve()}}class g3{constructor(){this.overlays=new Vt(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ki();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=ki(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Vt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=ki(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=ki(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return se.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new c_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ge(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class p3{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}class m_{constructor(){this.Qr=new xt(bn.$r),this.Ur=new xt(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ge();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class y3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(bn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new o_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?go:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new xt(Le);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return se.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _3{constructor(e){this.ri=e,this.docs=(function(){return new Vt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let n=yr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():Ht.newInvalidDocument(s))})),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=yr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||W0(m2(g),n)<=0||(s.has(g.key)||Nh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Se(9500)}ii(e,t){return se.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new v3(this)}getSize(e){return se.resolve(this.size)}}class v3 extends NA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class b3{constructor(e){this.persistence=e,this.si=new Ss((t=>Co(t)),Ih),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new m_,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),se.waitFor(o).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}class g_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pr(0),this.li=!1,this.li=!0,this.hi=new p3,this.referenceDelegate=e(this),this.Pi=new b3(this),this.indexManager=new i3,this.remoteDocumentCache=(function(s){return new _3(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new vA(t),this.Ii=new m3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new g3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new y3(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye("MemoryPersistence","Starting transaction:",e);const s=new w3(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class w3 extends p2{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Ri=new m_,this.Vi=null}static mi(e){return new Jm(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class um{constructor(e,t){this.persistence=e,this.pi=new Ss((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=CA(this,t)}static mi(e,t){return new um(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?se.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,ke.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,n){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class x3{constructor(e){this.serializer=e}k(e,t,n,s){const o=new Vm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Ah)})(e),(function(d){d.createObjectStore(rh,{keyPath:OM}),d.createObjectStore(Zr,{keyPath:Ux,autoIncrement:!0}).createIndex(fo,zx,{unique:!0}),d.createObjectStore(ic)})(e),CE(e),(function(d){d.createObjectStore(ao)})(e));let c=se.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(ac),d.deleteObjectStore(sc),d.deleteObjectStore(po)})(e),CE(e)),c=c.next((()=>(function(d){const f=d.store(po),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return f.put(em,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Zr).J().next((y=>{d.deleteObjectStore(Zr),d.createObjectStore(Zr,{keyPath:Ux,autoIncrement:!0}).createIndex(fo,zx,{unique:!0});const v=f.store(Zr),w=y.map((E=>v.put(E)));return se.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(oc,{keyPath:FM})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(ih)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Um,{keyPath:HM})})(e),(function(d){d.createObjectStore(zm,{keyPath:qM})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(Bm,{keyPath:XM});f.createIndex(s0,JM,{unique:!1}),f.createIndex(E2,ZM,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(Zf,{keyPath:PM});f.createIndex(Rf,jM),f.createIndex(v2,VM)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ao)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(Z0,{keyPath:$M,autoIncrement:!0}).createIndex(i0,GM,{unique:!1}),d.createObjectStore(Fu,{keyPath:KM}).createIndex(w2,YM,{unique:!1}),d.createObjectStore(Hu,{keyPath:QM}).createIndex(x2,WM,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Fu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(e_,{keyPath:eP})})(e)}))),n<18&&s>=18&&gS()&&(c=c.next((()=>{t.objectStore(Fu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),c}wi(e){let t=0;return e.store(ao).ee(((n,s)=>{t+=cm(s)})).next((()=>{const n={byteSize:t};return e.store(ih).put(r0,n)}))}yi(e){const t=e.store(rh),n=e.store(Zr);return t.J().next((s=>se.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,go],[o.userId,o.lastAcknowledgedBatchId]);return n.J(fo,c).next((u=>se.forEach(u,(d=>{Re(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=lo(this.serializer,d);return SA(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(ac),n=e.store(ao);return e.store(po).get(em).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new ft(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?se.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>se.waitFor(o)))}))}bi(e,t){e.createObjectStore(sh,{keyPath:BM});const n=t.store(sh),s=new f_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(ao).ee({X:!0},((c,u)=>{const d=new ft(c);return o(d.popLast())})).next((()=>t.store(ic).ee({X:!0},(([c,u,d],f)=>{const g=Ni(u);return o(g.popLast())}))))}Di(e){const t=e.store(sc);return t.ee(((n,s)=>{const o=Mu(s),c=bA(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(ao),s=[];return n.ee(((o,c)=>{const u=t.store(Zf),d=(function(y){return y.document?new we(ft.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Se(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>se.waitFor(s)))}Fi(e,t){const n=t.store(Zr),s=kA(this.serializer),o=new g_(Jm.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ge();lo(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),se.forEach(u,((d,f)=>{const g=new Cn(f),y=Wm.wt(this.serializer,g),v=o.getIndexManager(g),w=Xm.wt(g,this.serializer,v,o.referenceDelegate);return new DA(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new a0(t,Pr.ce),d).next()}))}))}}function CE(r){r.createObjectStore(ac,{keyPath:UM}).createIndex(J0,zM,{unique:!0}),r.createObjectStore(sc,{keyPath:"targetId"}).createIndex(b2,LM,{unique:!0}),r.createObjectStore(po)}const oa="IndexedDbPersistence",Ry=18e5,Cy=5e3,Ny="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",E3="main";class p_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!p_.v())throw new be(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u3(this,s),this.$i=t+E3,this.serializer=new vA(d),this.Ui=new _a(this.$i,this.Ni,new x3(this.serializer)),this.hi=new JP,this.Pi=new a3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kA(this.serializer),this.Ii=new XP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Gn(oa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(fe.FAILED_PRECONDITION,Ny);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Pr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ia(e))return ye(oa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(oa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ru(e).get(Vl).next((t=>se.resolve(this.es(t))))}ts(e){return mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ry)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=mn(t,oc);return n.J().next((s=>{const o=this.ss(s,Ry),c=s.filter((u=>o.indexOf(u)===-1));return se.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?se.resolve(!0):Ru(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new be(fe.FAILED_PRECONDITION,Ny);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).J().next((n=>this.ss(n,Cy).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ye(oa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ah,oc],(e=>{const t=new a0(e,Pr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>mf(e).J().next((t=>this.ss(t,Ry).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Xm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new s3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Wm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye(oa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?rP:d===17?I2:d===16?nP:d===15?t_:d===14?A2:d===13?S2:d===12?tP:d===11?T2:void Se(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new a0(u,this.ci?this.ci.next():Pr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new be(fe.FAILED_PRECONDITION,g2);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Ru(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(fe.FAILED_PRECONDITION,Ny)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put(Vl,t)}static v(){return _a.v()}Zi(e){const t=Ru(e);return t.get(Vl).next((n=>this.es(n)?(ye(oa,"Releasing primary lease."),t.delete(Vl)):se.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;mS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ye(oa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gn(oa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ru(r){return mn(r,Ah)}function mf(r){return mn(r,oc)}function T3(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class y_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ge(),s=Ge();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new y_(e,t.fromCache,n,s)}}class S3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mS()?8:y2(fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new S3;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(ql()<=Xe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ql()<=Xe.DEBUG&&ye("QueryEngine","Query:",$l(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ql()<=Xe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):se.resolve())}ys(e,t){if(Zx(t))return se.resolve(null);let n=jr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=f0(t,null,"F"),n=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ge(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,f0(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return Zx(t)||s.isEqual(ke.min())?se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?se.resolve(null):(ql()<=Xe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(t)),this.vs(e,c,t,AM(s,eh)).next((u=>u)))}))}Ds(e,t){let n=new xt(K2(e));return t.forEach(((s,o)=>{Nh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return ql()<=Xe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",$l(t)),this.ps.getDocumentsMatchingQuery(e,t,_r.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const __="LocalStore",A3=3e8;class I3{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Vt(Le),this.xs=new Ss((o=>Co(o)),Ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function MA(r,e,t,n){return new I3(r,e,t,n)}async function PA(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ge();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function R3(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=se.resolve();return v.forEach((E=>{w=w.next((()=>g.getEntry(d,E))).next((k=>{const O=f.docVersions.get(E);Re(O!==null,48541),k.version.compareTo(O)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ge();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function jA(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function C3(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(cn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(k,O,V){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=A3?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=yr(),f=Ge();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(N3(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return se.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function N3(r,e,t){let n=Ge(),s=Ge();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=yr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ke.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):ye(__,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function k3(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=go),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function D3(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,se.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function w0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ia(c))throw c;ye(__,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function NE(r,e,t){const n=Ue(r);let s=ke.min(),o=Ge();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?se.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,jr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:ke.min(),t?o:Ge()))).next((u=>(O3(n,_P(e),u),{documents:u,Qs:o})))))}function O3(r,e,t){let n=r.Os.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class kE{constructor(){this.activeTargetIds=TP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VA{constructor(){this.Mo=new kE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M3{Oo(e){}shutdown(){}}const DE="ConnectivityMonitor";class OE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(DE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(DE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function x0(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const ky="RestConnection",P3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===tm?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=x0(),u=this.zo(e,t.toUriEncodedString());ye(ky,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=zo(f);return this.Jo(e,u,d,n,g).then((y=>(ye(ky,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Io(ky,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=P3[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class V3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class L3 extends j3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=x0();return new Promise(((u,d)=>{const f=new i2;f.setWithCredentials(!0),f.listenOnce(s2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Sf.NO_ERROR:const y=f.getResponseJson();ye(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Sf.TIMEOUT:ye(Mn,`RPC '${e}' ${c} timed out`),d(new be(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const v=f.getStatus();if(ye(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w?.error;if(E&&E.status&&E.message){const k=(function(V){const q=V.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(q)>=0?q:fe.UNKNOWN})(E.status);d(new be(k,E.message))}else d(new be(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new be(fe.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ye(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ye(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=x0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=l2(),u=o2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");ye(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const E=new V3({Yo:O=>{w?ye(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(ye(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ye(Mn,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Zo:()=>y.close()}),k=(O,V,q)=>{O.listen(V,(U=>{try{q(U)}catch(H){setTimeout((()=>{throw H}),0)}}))};return k(y,ku.EventType.OPEN,(()=>{w||(ye(Mn,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),k(y,ku.EventType.CLOSE,(()=>{w||(w=!0,ye(Mn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(y))})),k(y,ku.EventType.ERROR,(O=>{w||(w=!0,Io(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),E.a_(new be(fe.UNAVAILABLE,"The operation could not be completed")))})),k(y,ku.EventType.MESSAGE,(O=>{if(!w){const V=O.data[0];Re(!!V,16349);const q=V,U=q?.error||q[0]?.error;if(U){ye(Mn,`RPC '${e}' stream ${s} received error:`,U);const H=U.status;let K=(function(S){const T=on[S];if(T!==void 0)return sA(T)})(H),z=U.message;K===void 0&&(K=fe.INTERNAL,z="Unknown error status: "+H+" with message "+U.message),w=!0,E.a_(new be(K,z)),y.close()}else ye(Mn,`RPC '${e}' stream ${s} received:`,V),E.u_(V)}})),k(u,a2.STAT_EVENT,(O=>{O.stat===e0.PROXY?ye(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===e0.NOPROXY&&ye(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function U3(){return typeof window<"u"?window:null}function Pf(){return typeof document<"u"?document:null}function Zm(r){return new zP(r,!0)}class LA{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ME="PersistentStream";class UA{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new be(fe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(ME,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(ME,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z3 extends UA{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=HP(this.serializer,e),n=(function(o){if(!("targetChange"in o))return ke.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Yn(c.readTime):ke.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=p0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=rm(d)?{documents:fA(o,d)}:{query:mA(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=lA(o,c.resumeToken);const f=m0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ke.min())>0){u.readTime=fc(o,c.snapshotVersion.toTimestamp());const f=m0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=$P(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=p0(this.serializer),t.removeTarget=e,this.q_(t)}}class B3 extends UA{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qP(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=p0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>am(this.serializer,n)))};this.q_(t)}}class F3{}class H3 extends F3{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new be(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,g0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(fe.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,g0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class q3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Po="RemoteStore";class $3{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{qo(this)&&(ye(Po,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Dh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await eg(f)})(this))}))})),this.Ra=new q3(n,s)}}async function eg(r){if(qo(r))for(const e of r.da)await e(!0)}async function Dh(r){for(const e of r.da)await e(!1)}function zA(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),x_(t)?w_(t):vc(t).O_()&&b_(t,e))}function v_(r,e){const t=Ue(r),n=vc(t);t.Ia.delete(e),n.O_()&&BA(t,e),t.Ia.size===0&&(n.O_()?n.L_():qo(t)&&t.Ra.set("Unknown"))}function b_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vc(r).Y_(e)}function BA(r,e){r.Va.Ue(e),vc(r).Z_(e)}function w_(r){r.Va=new jP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),vc(r).start(),r.Ra.ua()}function x_(r){return qo(r)&&!vc(r).x_()&&r.Ia.size>0}function qo(r){return Ue(r).Ea.size===0}function FA(r){r.Va=void 0}async function G3(r){r.Ra.set("Online")}async function K3(r){r.Ia.forEach(((e,t)=>{b_(r,e)}))}async function Y3(r,e){FA(r),x_(r)?(r.Ra.ha(e),w_(r)):r.Ra.set("Unknown")}async function Q3(r,e,t){if(r.Ra.set("Online"),e instanceof oA&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){ye(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await hm(r,n)}else if(e instanceof Of?r.Va.Ze(e):e instanceof aA?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const n=await jA(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(cn.EMPTY_BYTE_STRING,g.snapshotVersion)),BA(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);b_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ye(Po,"Failed to raise snapshot:",n),await hm(r,n)}}async function hm(r,e,t){if(!Ia(e))throw e;r.Ea.add(1),await Dh(r),r.Ra.set("Offline"),t||(t=()=>jA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Po,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await eg(r)}))}function HA(r,e){return e().catch((t=>hm(r,t,e)))}async function Oh(r){const e=Ue(r),t=Ta(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:go;for(;W3(e);)try{const s=await k3(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,X3(e,s)}catch(s){await hm(e,s)}qA(e)&&$A(e)}function W3(r){return qo(r)&&r.Ta.length<10}function X3(r,e){r.Ta.push(e);const t=Ta(r);t.O_()&&t.X_&&t.ea(e.mutations)}function qA(r){return qo(r)&&!Ta(r).x_()&&r.Ta.length>0}function $A(r){Ta(r).start()}async function J3(r){Ta(r).ra()}async function Z3(r){const e=Ta(r);for(const t of r.Ta)e.ea(t.mutations)}async function e6(r,e,t){const n=r.Ta.shift(),s=l_.from(n,e,t);await HA(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Oh(r)}async function t6(r,e){e&&Ta(r).X_&&await(async function(n,s){if((function(c){return OP(c)&&c!==fe.ABORTED})(s.code)){const o=n.Ta.shift();Ta(n).B_(),await HA(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Oh(n)}})(r,e),qA(r)&&$A(r)}async function PE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ye(Po,"RemoteStore received new credentials");const n=qo(t);t.Ea.add(3),await Dh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await eg(t)}async function n6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await eg(t)):e||(t.Ea.add(2),await Dh(t),t.Ra.set("Unknown"))}function vc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new z3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:G3.bind(null,r),t_:K3.bind(null,r),r_:Y3.bind(null,r),H_:Q3.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),x_(r)?w_(r):r.Ra.set("Unknown")):(await r.ma.stop(),FA(r))}))),r.ma}function Ta(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new B3(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:J3.bind(null,r),r_:t6.bind(null,r),ta:Z3.bind(null,r),na:e6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Oh(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Po,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class E_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new E_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(r,e){if(Gn("AsyncQueue",`${e}: ${r}`),Ia(r))return new be(fe.UNAVAILABLE,`${e}: ${r}`);throw r}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=Du(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jE{constructor(){this.ga=new Vt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class mc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new mc(e,t,ec.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class r6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class i6{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=VE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new be(fe.ABORTED,"Firestore shutting down"))}}function VE(){return new Ss((r=>G2(r)),qm)}async function S_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new r6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=T_(c,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&I_(t)}async function A_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function s6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&I_(t)}function a6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function I_(r){r.Ca.forEach((e=>{e.next()}))}var E0,LE;(LE=E0||(E0={})).Ma="default",LE.Cache="cache";class R_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new mc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==E0.Cache}}class GA{constructor(e){this.key=e}}class KA{constructor(e){this.key=e}}class o6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=K2(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new jE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Nh(this.query,y)?y:null,E=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?E!==k&&(n.track({type:3,doc:w}),O=!0):this.su(v,w)||(n.track({type:2,doc:w}),O=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),O=!0):v&&!w&&(n.track({type:1,doc:v}),O=!0,(d||f)&&(u=!0)),O&&(w?(c=c.add(w),o=k?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,E){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:O})}};return k(w)-k(E)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new mc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new KA(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new GA(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const C_="SyncEngine";class l6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class c6{constructor(e){this.key=e,this.hu=!1}}class u6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ss((u=>G2(u)),qm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(we.comparator),this.Au=new Map,this.Ru=new m_,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h6(r,e,t=!0){const n=ZA(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await YA(n,e,t,!0),s}async function d6(r,e){const t=ZA(r);await YA(t,e,!0,!1)}async function YA(r,e,t,n){const s=await D3(r.localStore,jr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await f6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&zA(r.remoteStore,s),u}async function f6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(k,O,V,q){let U=O.view.ru(V);U.Cs&&(U=await NE(k.localStore,O.query,!1).then((({documents:M})=>O.view.ru(M,U))));const H=q&&q.targetChanges.get(O.targetId),K=q&&q.targetMismatches.get(O.targetId)!=null,z=O.view.applyChanges(U,k.isPrimaryClient,H,K);return zE(k,O.targetId,z.au),z.snapshot})(r,y,v,w);const o=await NE(r.localStore,e,!0),c=new o6(e,o.Qs),u=c.ru(o.documents),d=kh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);zE(r,t,f.au);const g=new l6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function m6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!qm(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await w0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&v_(n.remoteStore,s.targetId),T0(n,s.targetId)})).catch(Ho)):(T0(n,s.targetId),await w0(n.localStore,s.targetId,!0))}async function g6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),v_(t.remoteStore,n.targetId))}async function p6(r,e,t){const n=eI(r);try{const s=await(function(c,u){const d=Ue(c),f=bt.now(),g=u.reduce(((w,E)=>w.add(E.key)),Ge());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=yr(),k=Ge();return d.Ns.getEntries(w,g).next((O=>{E=O,E.forEach(((V,q)=>{q.isValidDocument()||(k=k.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,E))).next((O=>{y=O;const V=[];for(const q of u){const U=kP(q,y.get(q.key).overlayedDocument);U!=null&&V.push(new As(q.key,U,V2(U.value.mapValue),Ln.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((O=>{v=O;const V=O.applyToLocalDocumentSet(y,k);return d.documentOverlayCache.saveOverlays(w,O.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:Q2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Vt(Le)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await Mh(n,s.changes),await Oh(n.remoteStore)}catch(s){const o=T_(s,"Failed to persist write");t.reject(o)}}async function QA(r,e){const t=Ue(r);try{const n=await C3(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Re(c.hu,14607):s.removedDocuments.size>0&&(Re(c.hu,42227),c.hu=!1))})),await Mh(t,n,e)}catch(n){await Ho(n)}}function UE(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&I_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function y6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Vt(we.comparator);c=c.insert(o,Ht.newNoDocument(o,ke.min()));const u=Ge().add(o),d=new Qm(ke.min(),new Map,new Vt(Le),c,u);await QA(n,d),n.du=n.du.remove(o),n.Au.delete(e),N_(n)}else await w0(n.localStore,e,!1).then((()=>T0(n,e,t))).catch(Ho)}async function _6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await R3(t.localStore,e);XA(t,n,null),WA(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Mh(t,s)}catch(s){await Ho(s)}}async function v6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Re(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);XA(n,e,t),WA(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Mh(n,s)}catch(s){await Ho(s)}}function WA(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function XA(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function T0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||JA(r,n)}))}function JA(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(v_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),N_(r))}function zE(r,e,t){for(const n of t)n instanceof GA?(r.Ru.addReference(n.key,e),b6(r,n)):n instanceof KA?(ye(C_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||JA(r,n.key)):Se(19791,{wu:n})}function b6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ye(C_,"New document in limbo: "+t),r.Eu.add(n),N_(r))}function N_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ft.fromString(e)),n=r.fu.next();r.Au.set(n,new c6(t)),r.du=r.du.insert(t,n),zA(r.remoteStore,new fs(jr(Ch(t.path)),n,"TargetPurposeLimboResolution",Pr.ce))}}async function Mh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=y_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>se.forEach(f,(v=>se.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>se.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Ia(y))throw y;ye(__,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),E=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(E);g.Ms=g.Ms.insert(v,k)}}})(n.localStore,o))}async function w6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ye(C_,"User change. New user:",e.toKey());const n=await PA(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new be(fe.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Mh(t,n.Ls)}}function x6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ge().add(n.key);{let s=Ge();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function ZA(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=QA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y6.bind(null,e),e.Pu.H_=s6.bind(null,e.eventManager),e.Pu.yu=a6.bind(null,e.eventManager),e}function eI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v6.bind(null,e),e}class hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return MA(this.persistence,new OA,e.initialUser,this.serializer)}Cu(e){return new g_(Jm.mi,this.serializer)}Du(e){return new VA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hh.provider={build:()=>new hh};class E6 extends hh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof um,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new RA(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new g_((n=>um.mi(n,t)),this.serializer)}}class T6 extends hh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await eI(this.xu.syncEngine),await Oh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return MA(this.persistence,new OA,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new RA(n,e.asyncQueue,t)}Mu(e,t){const n=new NM(t,this.persistence);return new CM(e.asyncQueue,n)}Cu(e){const t=T3(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new p_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,U3(),Pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VA}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>UE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=w6.bind(null,this.syncEngine),await n6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new i6})()}createDatastore(e){const t=Zm(e.databaseInfo.databaseId),n=(function(o){return new L3(o)})(e.databaseInfo);return(function(o,c,u,d){return new H3(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new $3(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>UE(this.syncEngine,t,0)),(function(){return OE.v()?new OE:new M3})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new u6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);ye(Po,"RemoteStore shutting down."),n.Ea.add(5),await Dh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dm.provider={build:()=>new dm};class k_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Sa="FirestoreClient";class S6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=Q0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ye(Sa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ye(Sa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=T_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Dy(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Sa,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await PA(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function BE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await A6(r);ye(Sa,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>PE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>PE(e.remoteStore,s))),r._onlineComponents=e}async function A6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Sa,"Using user provided OfflineComponentProvider");try{await Dy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await Dy(r,new hh)}}else ye(Sa,"Using default OfflineComponentProvider"),await Dy(r,new E6(void 0));return r._offlineComponents}async function tI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Sa,"Using user provided OnlineComponentProvider"),await BE(r,r._uninitializedComponentsProvider._online)):(ye(Sa,"Using default OnlineComponentProvider"),await BE(r,new dm))),r._onlineComponents}function I6(r){return tI(r).then((e=>e.syncEngine))}async function fm(r){const e=await tI(r),t=e.eventManager;return t.onListen=h6.bind(null,e.syncEngine),t.onUnlisten=m6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=d6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g6.bind(null,e.syncEngine),t}function R6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new k_({next:v=>{g.Nu(),c.enqueueAndForget((()=>A_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new be(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new R_(Ch(u.path),g,{includeMetadataChanges:!0,qa:!0});return S_(o,y)})(await fm(r),r.asyncQueue,e,t,n))),n.promise}function C6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new k_({next:v=>{g.Nu(),c.enqueueAndForget((()=>A_(o,y))),v.fromCache&&d.source==="server"?f.reject(new be(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new R_(u,g,{includeMetadataChanges:!0,qa:!0});return S_(o,y)})(await fm(r),r.asyncQueue,e,t,n))),n.promise}function nI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const FE=new Map;const rI="firestore.googleapis.com",HE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rI,this.ssl=HE}else this.host=e.host,this.ssl=e.ssl??HE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o3)throw new be(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tg{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new gM;switch(n.type){case"firstParty":return new vM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new be(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=FE.get(t);n&&(ye("ComponentProvider","Removing Datastore"),FE.delete(t),n.terminate())})(this),Promise.resolve()}}function N6(r,e,t,n={}){r=Kn(r,tg);const s=zo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(P0(`https://${u}`),j0("Firestore",!0)),o.host!==rI&&o.host!==u&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!_s(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=dS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new be(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new pM(new u2(f,g))}}class $o{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class $t{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Sh(t,$t._jsonSchema))return new $t(e,n||null,new we(ft.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class va extends $o{constructor(e,t,n){super(e,t,Ch(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new va(this.firestore,e,this._path)}}function ps(r,e,...t){if(r=Xt(r),d2("collection","path",e),r instanceof tg){const n=ft.fromString(e,...t);return Mx(n),new va(r,null,n)}{if(!(r instanceof $t||r instanceof va))throw new be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Mx(n),new va(r.firestore,null,n)}}function qt(r,e,...t){if(r=Xt(r),arguments.length===1&&(e=Q0.newId()),d2("doc","path",e),r instanceof tg){const n=ft.fromString(e,...t);return Ox(n),new $t(r,null,new we(n))}{if(!(r instanceof $t||r instanceof va))throw new be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Ox(n),new $t(r.firestore,r instanceof va?r.converter:null,new we(n))}}const $E="AsyncQueue";class GE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LA(this,"async_queue_retry"),this._c=()=>{const n=Pf();n&&ye($E,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;ye($E,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",KE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=E_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:KE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function KE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function YE(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Ui extends tg{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new GE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GE(e),this._firestoreClient=void 0,await e}}}function k6(r,e){const t=typeof r=="object"?r:U0(),n=typeof r=="string"?r:tm,s=Dm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=cS("firestore");o&&N6(s,...o)}return s}function ng(r){if(r._terminated)throw new be(fe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||iI(r),r._firestoreClient}function iI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new sP(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,nI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new S6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function D6(r,e){Io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return O6(r,dm.provider,{build:n=>new T6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function O6(r,e,t){if((r=Kn(r,Ui))._firestoreClient||r._terminated)throw new be(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new be(fe.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},iI(r)}class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(cn.fromBase64String(e))}catch(t){throw new be(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Or(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sh(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:ln("string",Or._jsonSchemaVersion),bytes:ln("string")};class rg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._methodName=e}}class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Sh(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:ln("string",ji._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sh(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new be(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:ln("string",Vi._jsonSchemaVersion),vectorValues:ln("object")};const M6=/^__.*__$/;class P6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new _c(e,this.data,t,this.fieldTransforms)}}class sI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class ig{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aI(this.Ac)&&M6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Zm(e)}Cc(e,t,n,s=!1){return new ig({Ac:e,methodName:t,Dc:n,path:Lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sg(r){const e=r._freezeSettings(),t=Zm(r._databaseId);return new j6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function oI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);P_("Data must be an object, but it was:",c,n);const u=cI(n,c);let d,f;if(o.merge)d=new sr(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=S0(e,y,t);if(!c.contains(v))throw new be(fe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);hI(g,v)||g.push(v)}d=new sr(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new P6(new jn(u),d,f)}class ag extends bc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ag}}function lI(r,e,t){return new ig({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class D_ extends bc{_toFieldTransform(e){return new Gm(e.path,new dc)}isEqual(e){return e instanceof D_}}class O_ extends bc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=lI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new No(n);return new Gm(e.path,s)}isEqual(e){return e instanceof O_&&_s(this.vc,e.vc)}}class M_ extends bc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=lI(this,e,!0),n=this.vc.map((o=>Go(o,t))),s=new ko(n);return new Gm(e.path,s)}isEqual(e){return e instanceof M_&&_s(this.vc,e.vc)}}function V6(r,e,t,n){const s=r.Cc(1,e,t);P_("Data must be an object, but it was:",s,n);const o=[],c=jn.empty();Ra(n,((d,f)=>{const g=j_(e,d,t);f=Xt(f);const y=s.yc(g);if(f instanceof ag)o.push(g);else{const v=Go(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new sr(o);return new sI(c,u,s.fieldTransforms)}function L6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[S0(e,n,t)],d=[s];if(o.length%2!=0)throw new be(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(S0(e,o[v])),d.push(o[v+1]);const f=[],g=jn.empty();for(let v=u.length-1;v>=0;--v)if(!hI(f,u[v])){const w=u[v];let E=d[v];E=Xt(E);const k=c.yc(w);if(E instanceof ag)f.push(w);else{const O=Go(E,k);O!=null&&(f.push(w),g.set(w,O))}}const y=new sr(f);return new sI(g,y,c.fieldTransforms)}function U6(r,e,t,n=!1){return Go(t,r.Cc(n?4:3,e))}function Go(r,e){if(uI(r=Xt(r)))return P_("Unsupported field value:",e,r),cI(r,e);if(r instanceof bc)return(function(n,s){if(!aI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Go(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return SP(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=bt.fromDate(n);return{timestampValue:fc(s.serializer,o)}}if(n instanceof bt){const o=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fc(s.serializer,o)}}if(n instanceof ji)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Or)return{bytesValue:lA(s.serializer,n._byteString)};if(n instanceof $t){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:h_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Vi)return(function(c,u){return{mapValue:{fields:{[r_]:{stringValue:i_},[lc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return a_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${jm(n)}`)})(r,e)}function cI(r,e){const t={};return R2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(r,((n,s)=>{const o=Go(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function uI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof ji||r instanceof Or||r instanceof $t||r instanceof bc||r instanceof Vi)}function P_(r,e,t){if(!uI(t)||!f2(t)){const n=jm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function S0(r,e,t){if((e=Xt(e))instanceof rg)return e._internalPath;if(typeof e=="string")return j_(r,e);throw mm("Field path arguments must be of type string or ",r,!1,void 0,t)}const z6=new RegExp("[~\\*/\\[\\]]");function j_(r,e,t){if(e.search(z6)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new rg(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function mm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new be(fe.INVALID_ARGUMENT,u+r+d)}function hI(r,e){return r.some((t=>t.isEqual(e)))}class dI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(V_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class B6 extends dI{data(){return super.data()}}function V_(r,e){return typeof e=="string"?j_(r,e):e instanceof rg?e._internalPath:e._delegate._internalPath}function fI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L_{}class F6 extends L_{}function gm(r,e,...t){let n=[];e instanceof L_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof U_)).length,u=o.filter((d=>d instanceof og)).length;if(c>1||c>0&&u>0)throw new be(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class og extends F6{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new og(e,t,n)}_apply(e){const t=this._parse(e);return mI(e._query,t),new $o(e.firestore,e.converter,d0(e._query,t))}_parse(e){const t=sg(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){WE(y,g);const E=[];for(const k of y)E.push(QE(d,o,k));v={arrayValue:{values:E}}}else v=QE(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||WE(y,g),v=U6(u,c,y,g==="in"||g==="not-in");return Je.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pm(r,e,t){const n=e,s=V_("where",r);return og._create(s,n,t)}class U_ extends L_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new U_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)mI(c,d),c=d0(c,d)})(e._query,t),new $o(e.firestore,e.converter,d0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function QE(r,e,t){if(typeof(t=Xt(t))=="string"){if(t==="")throw new be(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$2(e)&&t.indexOf("/")!==-1)throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!we.isDocumentKey(n))throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return lh(r,new we(n))}if(t instanceof $t)return lh(r,t._key);throw new be(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(t)}.`)}function WE(r,e){if(!Array.isArray(r)||r.length===0)throw new be(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class H6{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ra(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[lc].arrayValue?.values?.map((n=>jt(n.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ji(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ah(e));default:return null}}convertTimestamp(e){const t=ws(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Re(_A(n),9688,{name:e});const s=new Ro(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function gI(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends dI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(V_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:ln("string",_o._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class jf extends _o{data(e={}){return super.data(e)}}class vo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Pu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new jf(this._firestore,this._userDataWriter,n.key,n,new Pu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new jf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Pu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new jf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Pu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:q6(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}function jo(r){r=Kn(r,$t);const e=Kn(r.firestore,Ui);return R6(ng(e),r._key).then((t=>yI(e,r,t)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:ln("string",vo._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class z_ extends H6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function A0(r){r=Kn(r,$o);const e=Kn(r.firestore,Ui),t=ng(e),n=new z_(e);return fI(r._query),C6(t,r._query).then((s=>new vo(e,n,r,s)))}function B_(r,e,t){r=Kn(r,$t);const n=Kn(r.firestore,Ui),s=gI(r.converter,e);return cg(n,[oI(sg(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Ln.none())])}function Ur(r,e,t,...n){r=Kn(r,$t);const s=Kn(r.firestore,Ui),o=sg(s);let c;return c=typeof(e=Xt(e))=="string"||e instanceof rg?L6(o,"updateDoc",r._key,e,t,n):V6(o,"updateDoc",r._key,e),cg(s,[c.toMutation(r._key,Ln.exists(!0))])}function pI(r){return cg(Kn(r.firestore,Ui),[new Ym(r._key,Ln.none())])}function lg(r,e){const t=Kn(r.firestore,Ui),n=qt(r),s=gI(r.converter,e);return cg(t,[oI(sg(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Ln.exists(!1))]).then((()=>n))}function Yu(r,...e){r=Xt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||YE(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(YE(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof $t)c=Kn(r.firestore,Ui),u=Ch(r._key.path),o={next:d=>{e[n]&&e[n](yI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Kn(r,$o);c=Kn(d.firestore,Ui),u=d._query;const f=new z_(c);o={next:g=>{e[n]&&e[n](new vo(c,f,d,g))},error:e[n+1],complete:e[n+2]},fI(r._query)}return(function(f,g,y,v){const w=new k_(v),E=new R_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>S_(await fm(f),E))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>A_(await fm(f),E)))}})(ng(c),u,s,o)}function cg(r,e){return(function(n,s){const o=new Pi;return n.asyncQueue.enqueueAndForget((async()=>p6(await I6(n),s,o))),o.promise})(ng(r),e)}function yI(r,e,t){const n=t.docs.get(e._key),s=new z_(r);return new _o(r,s,e._key,n,new Pu(t.hasPendingWrites,t.fromCache),e.converter)}function Vr(){return new D_("serverTimestamp")}function F_(...r){return new O_("arrayUnion",r)}function _I(...r){return new M_("arrayRemove",r)}(function(e,t=!0){(function(s){yc=s})(Bo),Eo(new wa("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new Ui(new yM(n.getProvider("auth-internal")),new bM(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Di(Cx,Nx,e),Di(Cx,Nx,"esm2020")})();const vI="firebasestorage.googleapis.com",$6="storageBucket",G6=120*1e3,K6=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(Oy(e),`Firebase Storage: ${t} (${Oy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function Oy(r){return"storage/"+r}function Y6(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,r)}function Q6(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W6(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function X6(r){return new Hi(zi.INVALID_URL,"Invalid URL '"+r+"'.")}function J6(r){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function XE(r){return new Hi(zi.INVALID_ARGUMENT,r)}function bI(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function Z6(r){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(n.path==="")return n;throw J6(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},k=t===vI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",V=new RegExp(`^https?://${k}/${s}/${O}`,"i"),U=[{regex:u,indices:d,postModify:o},{regex:w,indices:E,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<U.length;H++){const K=U[H],z=K.regex.exec(e);if(z){const M=z[K.indices.bucket];let S=z[K.indices.path];S||(S=""),n=new ni(M,S),K.postModify(n);break}}if(n==null)throw X6(e);return n}}class ej{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tj(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...O){f||(f=!0,e.apply(null,O))}function y(O){s=setTimeout(()=>{s=null,r(w,d())},O)}function v(){o&&clearTimeout(o)}function w(O,...V){if(f){v();return}if(O){v(),g.call(null,O,...V);return}if(d()||c){v(),g.call(null,O,...V);return}n<64&&(n*=2);let U;u===1?(u=2,U=0):U=(n+Math.random())*1e3,y(U)}let E=!1;function k(O){E||(E=!0,v(),!f&&(s!==null?(O||(u=2),clearTimeout(s),y(0)):O||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function nj(r){r(!1)}function rj(r){return r!==void 0}function JE(r,e,t,n){if(n<e)throw XE(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw XE(`Invalid value for '${r}'. Expected ${t} or less.`)}function ij(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var ym;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ym||(ym={}));function sj(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class aj{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new pf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===ym.NO_ERROR,d=o.getStatus();if(!u||sj(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ym.ABORT;n(!1,new pf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new pf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());rj(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=Y6();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?bI():W6();c(d)}else{const d=Q6();c(d)}};this.canceled_?t(!1,new pf(!1,null,!0)):this.backoffId_=tj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function oj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function lj(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function uj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function hj(r,e,t,n,s,o,c=!0,u=!1){const d=ij(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return cj(g,e),oj(g,t),lj(g,o),uj(g,n),new aj(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function dj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function fj(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class _m{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _m(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fj(this._location.path)}get storage(){return this._service}get parent(){const e=dj(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new _m(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Z6(e)}}function ZE(r,e){const t=e?.[$6];return t==null?null:ni.makeFromBucketSpec(t,r)}function mj(r,e,t,n={}){r.host=`${e}:${t}`;const s=zo(e);s&&(P0(`https://${r.host}/b`),j0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:dS(o,r.app.options.projectId))}class gj{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=vI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G6,this._maxUploadRetryTime=K6,this._requests=new Set,s!=null?this._bucket=ni.makeFromBucketSpec(s,this._host):this._bucket=ZE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=ZE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _m(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new ej(bI());{const c=hj(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const eT="@firebase/storage",tT="0.14.0";const wI="storage";function pj(r=U0(),e){r=Xt(r);const n=Dm(r,wI).getImmediate({identifier:e}),s=cS("storage");return s&&yj(n,...s),n}function yj(r,e,t,n={}){mj(r,e,t,n)}function _j(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new gj(t,n,s,e,Bo)}function vj(){Eo(new wa(wI,_j,"PUBLIC").setMultipleInstances(!0)),Di(eT,tT,""),Di(eT,tT,"esm2020")}vj();const bj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},H_=vS(bj),Mr=fM(H_),dt=k6(H_);pj(H_);new us;try{D6(dt).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const xI=$.createContext();function ai(){return $.useContext(xI)}function wj({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>n5(Mr,async f=>{if(f){t(f);try{const g=qt(dt,"users",f.uid),y=await jo(g);if(y.exists())t(v=>({...v,...y.data()}));else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await B_(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await Mr.signOut(),t(null)},refreshUser:async()=>{if(Mr.currentUser){await Mr.currentUser.reload();const d=Mr.currentUser;let f={};try{const g=await jo(qt(dt,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(xI.Provider,{value:u,children:!n&&r})}const xj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ej=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),nT=r=>{const e=Ej(r);return e.charAt(0).toUpperCase()+e.slice(1)},EI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),Tj=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Aj=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...Sj,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:EI("lucide",s),...!o&&!Tj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const De=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(Aj,{ref:o,iconNode:e,className:EI(`lucide-${xj(nT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=nT(r),t};const Ij=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vm=De("activity",Ij);const Rj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cj=De("arrow-left",Rj);const Nj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],TI=De("arrow-right",Nj);const kj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Dj=De("award",kj);const Oj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Mj=De("brain",Oj);const Pj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],jj=De("calendar-check",Pj);const Vj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],bo=De("camera",Vj);const Lj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],SI=De("chevron-down",Lj);const Uj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zj=De("chevron-right",Uj);const Bj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],AI=De("circle-alert",Bj);const Fj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ug=De("circle-check-big",Fj);const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qj=De("circle-check",Hj);const $j=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],II=De("clock",$j);const Gj=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Kj=De("crown",Gj);const Yj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qj=De("file-text",Yj);const Wj=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],Xj=De("flower",Wj);const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Zj=De("globe",Jj);const eV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],tV=De("heart",eV);const nV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],RI=De("house",nV);const rV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],CI=De("image",rV);const iV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],NI=De("info",iV);const sV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],aV=De("leaf",sV);const oV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wo=De("loader-circle",oV);const lV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],rT=De("log-in",lV);const cV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],kI=De("log-out",cV);const uV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hV=De("mail",uV);const dV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],bm=De("message-circle",dV);const fV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],mV=De("mic",fV);const gV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],DI=De("moon",gV);const pV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],iT=De("paperclip",pV);const yV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_V=De("pause",yV);const vV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],OI=De("pen",vV);const bV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],wV=De("play",bV);const xV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],EV=De("plus",xV);const TV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],MI=De("refresh-cw",TV);const SV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AV=De("save",SV);const IV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],sT=De("scan-line",IV);const RV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],CV=De("search",RV);const NV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],dh=De("send",NV);const kV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],I0=De("share-2",kV);const DV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],OV=De("shield-check",DV);const MV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],PV=De("sparkles",MV);const jV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zr=De("sprout",jV);const VV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],aT=De("stethoscope",VV);const LV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],PI=De("sun",LV);const UV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wm=De("trash-2",UV);const zV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],R0=De("triangle-alert",zV);const BV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FV=De("user-plus",BV);const HV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xm=De("user",HV);const qV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$V=De("users",qV);const GV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],KV=De("wand-sparkles",GV);const YV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vo=De("x",YV);const QV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],WV=De("zap",QV),jI=$.createContext(null),Ko=()=>$.useContext(jI),XV=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs(jI.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(ug,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(AI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(NI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(Vo,{className:"w-4 h-4"})})]},o.id))})]})};class VI extends JC.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(R0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(MI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(RI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function JV(){const{currentUser:r,logout:e}=ai(),{t,i18n:n}=zn(),s=vr(),o=Es(),{addToast:c}=Ko(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(E=>E==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const E=async()=>{try{await Ur(qt(dt,"users",r.uid),{lastSeen:Vr()})}catch(O){console.error("Presence update failed",O)}};E();const k=setInterval(E,60*1e3);return()=>clearInterval(k)},[r]),$.useEffect(()=>{if(!r)return;const E=gm(ps(dt,"chats"),pm("participants","array-contains",r.uid)),k=Yu(E,O=>{O.docChanges().forEach(V=>{if(V.type==="modified"){const q=V.doc.data(),U=q.updatedAt?.seconds*1e3;if(Date.now()-U>5e3)return;const H=q.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&H){const z=q.participantData?.[H]||{name:"Someone"};g.play().catch(M=>console.log("Audio play failed",M)),c(`New message from ${z.name}: ${q.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>k()},[r,s.pathname,c,g]);const w=[{path:"/",icon:RI,label:t("app_name"),public:!0},{path:"/community",icon:$V,label:t("community"),public:!0},{path:"/analyses",icon:II,label:t("analyses"),public:!1},{path:"/messages",icon:bm,label:t("messages"),public:!1},{path:"/profile",icon:xm,label:t("profile"),public:!1},{path:"/about",icon:NI,label:t("about"),public:!0}].filter(E=>E.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(ei,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zr,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(E=>{const k=E.icon,O=s.pathname===E.path;return b.jsxs(ei,{to:E.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${O?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(k,{className:"w-5 h-5"}),b.jsx("span",{children:E.label})]},E.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(PI,{className:"w-5 h-5"}):b.jsx(DI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(kI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(ei,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(rT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(ei,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zr,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(VI,{children:b.jsx(JN,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(E=>{const k=E.icon,O=s.pathname===E.path;return b.jsxs(ei,{to:E.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${O?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(k,{className:`w-6 h-6 ${O?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:E.label})]},E.path)}),!r&&b.jsxs(ei,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(rT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function ZV(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=Es(),w=vr(),{t:E}=zn(),{currentUser:k}=ai(),{addToast:O}=Ko();if(k?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const U=await _x(Mr,r,t);await GS(U.user),await Mr.signOut(),O(E("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(U){console.error("Resend error:",U),U.code==="auth/too-many-requests"?O(E("too_many_requests")||"Too many attempts. Please wait.","error"):O(E("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},q=async U=>{U.preventDefault(),o(""),f(!1),u(!0);try{if(!(await _x(Mr,r,t)).user.emailVerified){await Mr.signOut(),f(!0);return}}catch(H){console.error(H);let K=E("login_failed")||"Failed to login.";H.code==="auth/user-not-found"||H.code==="auth/wrong-password"||H.code==="auth/invalid-credential"?K=E("invalid_credentials")||"Invalid email or password.":H.code==="auth/too-many-requests"?K=E("too_many_requests")||"Too many attempts. Try again later.":H.code==="auth/user-disabled"?K="Account disabled. Contact support.":H.code==="auth/network-request-failed"&&(K="Network error. Check your connection."),o(K)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:E("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:E("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(zr,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:E("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:E("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":E("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:q,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":E("login"),!c&&b.jsx(TI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(ei,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:E("register")})]})]})})})}function eL({user:r,onClose:e,onVerified:t}){const{t:n}=zn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(hV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(MI,{className:"w-5 h-5 animate-spin"}):b.jsx(ug,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function tL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),E=Es(),k=vr(),{t:O}=zn(),V=async U=>{U.preventDefault(),u(""),f(!0);try{const H=await XO(Mr,r,t);await ZO(H.user,{displayName:s}),await B_(qt(dt,"users",H.user.uid),{uid:H.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:Vr(),lastSeen:Vr(),bio:""}),await GS(H.user),w(H.user),y(!0),f(!1)}catch(H){u(H.message),console.error(H),f(!1)}},q=async()=>{Mr.currentUser&&await Mr.currentUser.reload(),y(!1),k.state?.returnUrl&&k.state?.pendingResult?E(k.state.returnUrl,{replace:!0,state:{restoredResult:k.state.pendingResult,restoredImages:k.state.pendingImages,restoredPlantType:k.state.pendingPlantType}}):E("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(eL,{user:v,onClose:()=>y(!1),onVerified:q}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:O("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:O("create_account_desc")||O("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:U=>o(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?O("creating_account")||"Creating Account...":O("register"),!d&&b.jsx(FV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[O("already_have_account")||"Already have an account?"," "," ",b.jsx(ei,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:O("login")})]})]})]})})}var oT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(oT||(oT={}));var lT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(lT||(lT={}));var cT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(cT||(cT={}));const uT=["user","model","function","system"];var hT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(hT||(hT={}));var dT;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(dT||(dT={}));var fT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(fT||(fT={}));var mT;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(mT||(mT={}));var Qu;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Qu||(Qu={}));var gT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(gT||(gT={}));var pT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(pT||(pT={}));var yT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(yT||(yT={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Hl extends Vn{constructor(e,t){super(e),this.response=t}}class LI extends Vn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class ba extends Vn{}class UI extends Vn{}const nL="https://generativelanguage.googleapis.com",rL="v1beta",iL="0.24.1",sL="genai-js";var Lo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Lo||(Lo={}));class aL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||rL;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||nL}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function oL(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${sL}/${iL}`),e.join(" ")}async function lL(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",oL(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new ba(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new ba(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new ba(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function cL(r,e,t,n,s,o){const c=new aL(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},fL(o)),{method:"POST",headers:await lL(c),body:s})}}async function Ph(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await cL(r,e,t,n,s,o);return uL(u,d,c)}async function uL(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){hL(s,r)}return n.ok||await dL(n,r),n}function hL(r,e){let t=r;throw t.name==="AbortError"?(t=new UI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof LI||r instanceof ba||(t=new Vn(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function dL(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new LI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function fL(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function q_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return mL(r)}else if(r.promptFeedback)throw new Hl(`Text not available. ${la(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),_T(r)[0]}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return _T(r)}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r}function mL(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function _T(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const gL=[Qu.RECITATION,Qu.SAFETY,Qu.LANGUAGE];function Vf(r){return!!r.finishReason&&gL.includes(r.finishReason)}function la(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];Vf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function fh(r){return this instanceof fh?(this.v=r,this):new fh(r)}function pL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(E,k){o.push([v,w,E,k])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(E){y(o[0][3],E)}}function d(v){v.value instanceof fh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const vT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function yL(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=bL(e),[n,s]=t.tee();return{stream:vL(n),response:_L(s)}}async function _L(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return q_(wL(e));e.push(s)}}function vL(r){return pL(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield fh(t.read());if(s)break;yield yield fh(q_(n))}})}function bL(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Vn("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(vT),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Vn(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(vT)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new UI("Request aborted when reading from the stream"):u=new Vn("Error reading from the stream"),u})}}})}function wL(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function zI(r,e,t,n){const s=await Ph(e,Lo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return yL(s)}async function BI(r,e,t,n){const o=await(await Ph(e,Lo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:q_(o)}}function FI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function mh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return xL(e)}function xL(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Vn("No content is provided for sending chat message.");return n?e:t}function EL(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new ba("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=mh(r);n.contents=[o]}return{generateContentRequest:n}}function bT(r){let e;return r.contents?e=r:e={contents:[mh(r)]},r.systemInstruction&&(e.systemInstruction=FI(r.systemInstruction)),e}function TL(r){return typeof r=="string"||Array.isArray(r)?{content:mh(r)}:r}const wT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],SL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function AL(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Vn(`First content should be with role 'user', got ${n}`);if(!uT.includes(n))throw new Vn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(uT)}`);if(!Array.isArray(s))throw new Vn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of wT)d in u&&(o[d]+=1);const c=SL[n];for(const u of wT)if(!c.includes(u)&&o[u]>0)throw new Vn(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function xT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const ET="SILENT_ERROR";class IL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(AL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=mh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>BI(this._apiKey,this.model,g,y)).then(w=>{var E;if(xT(w.response)){this._history.push(f);const k=Object.assign({parts:[],role:"model"},(E=w.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(k)}else{const k=la(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=mh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=zI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(ET)}).then(w=>w.response).then(w=>{if(xT(w)){this._history.push(f);const E=Object.assign({},w.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=la(w);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(w=>{w.message!==ET&&console.error(w)}),v}}async function RL(r,e,t,n){return(await Ph(e,Lo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function CL(r,e,t,n){return(await Ph(e,Lo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function NL(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Ph(e,Lo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class TT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=FI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=bT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return BI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=bT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return zI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new IL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=EL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return RL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=TL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return CL(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return NL(this.apiKey,this.model,e,n)}}class kL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new TT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new ba("Cached content must contain a `name` field.");if(!e.model)throw new ba("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new ba(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new TT(this.apiKey,o,n)}}async function HI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await DL(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function DL(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new kL(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const q=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:q,mimeType:"image/jpeg"}})});const O=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(O)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const qI="analyses";async function $I(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await lg(ps(dt,qI),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:Vr(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function GI(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=lg(ps(dt,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:Vr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function KI(r,e,t,n=null){try{return await lg(ps(dt,qI,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:Vr()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function YI(r){try{const e=qt(dt,"posts",r),t=await jo(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=qt(dt,"analyses",n.relatedAnalysisId);await Ur(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await pI(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function QI(r,e){try{const t=qt(dt,"posts",r),n=await jo(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await Ur(t,{likes:_I(e)}):await Ur(t,{likes:F_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function WI(r,e,t,n){try{const s=qt(dt,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await Ur(s,{comments:F_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function XI(r,e){try{const t=qt(dt,"posts",r);return await Ur(t,{...e,updatedAt:Vr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function OL(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=qt(dt,"chats",o);return(await jo(c)).exists()?await Ur(c,{[`participantData.${r}`]:n}):await B_(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:Vr(),updatedAt:Vr(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function JI(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const ML=Object.freeze(Object.defineProperty({__proto__:null,addComment:WI,addFeedbackUpdate:KI,analyzePlantProgress:JI,createPost:GI,deletePost:YI,saveAnalysis:$I,startChat:OL,toggleLike:QI,updatePost:XI},Symbol.toStringTag,{value:"Module"}));function PL({result:r,onReset:e}){const{t}=zn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(R0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(vm,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(zr,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(R0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(ug,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function jL({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=zn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,E=s.current;E.width=w.videoWidth,E.height=w.videoHeight,E.getContext("2d").drawImage(w,0,0,E.width,E.height);const O=E.toDataURL("image/jpeg",.9);t(O),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Vo,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(AI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function VL(){const{t:r,i18n:e}=zn(),{currentUser:t}=ai(),n=Es(),s=vr(),{addToast:o}=Ko(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,E]=$.useState(!1),[k,O]=$.useState(null),[V,q]=$.useState(!1),[U,H]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(O(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const K=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},M=()=>{c.current&&(c.current.value="",c.current.click())},S=ee=>{ee&&R(ee),H(!1)},T=async ee=>{const F=ee.target.files?.[0];if(!F)return;const Y=new FileReader;Y.onloadend=()=>{const re=Y.result;R(re)},Y.readAsDataURL(F)},R=async ee=>{u==="capture_main"?(v(F=>({...F,main:ee})),await N(ee)):u==="capture_macro"&&(v(F=>({...F,macro:ee})),await N([y.main,ee]))},N=async(ee,F)=>{E(!0),d("analyzing"),q(!1);try{const Y=await HI(ee,e.language,f);if(Y.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Y.status==="error")throw new Error(Y.error);O(Y),d("result")}}catch(Y){console.error(Y);let re=Y.message||r("error_diagnosis_failed")||"Diagnosis failed.";re.includes("NOT_PLANT")?re=r("error_not_plant"):(re.includes("503")||re.includes("overloaded"))&&(re=r("error_server_busy")),o(re,"error"),d("capture_main")}finally{E(!1)}},j=async()=>{if(t&&!V)try{const ee=await $I(t.uid,f,y,k);q(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ee}})},500)}catch(ee){console.error("Manual save failed:",ee),o((r("save_fail")||"Failed to save analysis:")+" "+ee.message,"error")}},C=()=>{n("/login",{state:{pendingResult:k,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),O(null),q(!1),d("input_type"),c.current&&(c.current.value="")},J=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(PV,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(bo,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:WV,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:Mj,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:OV,color:"from-green-400 to-emerald-500"}].map((ee,F)=>{const Y=ee.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${ee.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Y,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:ee.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:ee.desc})]},F)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(vm,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(sT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:ee=>{ee.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(zr,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(zr,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:ee=>g(ee.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:K,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(TI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),D=ee=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ee?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>H(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(bo,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:M,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(CI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),Z=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(wo,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:j,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(ug,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(AV,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:k?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(PL,{result:k,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(sT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:C,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:T,className:"hidden"}),b.jsx(jL,{isOpen:U,onClose:()=>H(!1),onCapture:S}),u==="landing"?J():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&D(!1),u==="capture_macro"&&D(!0),u==="analyzing"&&Z(),u==="result"&&W()]})]})}const yf=43200,ST=1440,AT=Symbol.for("constructDateFrom");function $_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&AT in r?r[AT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Aa(r,e){return $_(r,r)}let LL={};function UL(){return LL}function IT(r){const e=Aa(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function G_(r,...e){const t=$_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function Lf(r,e){const t=+Aa(r)-+Aa(e);return t<0?-1:t>0?1:t}function zL(r){return $_(r,Date.now())}function BL(r,e,t){const[n,s]=G_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function FL(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function HL(r,e){return+Aa(r)-+Aa(e)}function qL(r,e){const t=Aa(r);return t.setHours(23,59,59,999),t}function $L(r,e){const t=Aa(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function GL(r,e){const t=Aa(r);return+qL(t)==+$L(t)}function KL(r,e,t){const[n,s,o]=G_(t?.in,r,r,e),c=Lf(s,o),u=Math.abs(BL(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=Lf(s,o)===-c;GL(n)&&u===1&&Lf(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function YL(r,e,t){const n=HL(r,e)/1e3;return FL(t?.roundingMethod)(n)}const QL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WL=(r,e,t)=>{let n;const s=QL[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function tc(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const XL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eU={date:tc({formats:XL,defaultWidth:"full"}),time:tc({formats:JL,defaultWidth:"full"}),dateTime:tc({formats:ZL,defaultWidth:"full"})},tU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nU=(r,e,t,n)=>tU[r];function Ii(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const rU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},uU={ordinalNumber:cU,era:Ii({values:rU,defaultWidth:"wide"}),quarter:Ii({values:iU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ii({values:sU,defaultWidth:"wide"}),day:Ii({values:aU,defaultWidth:"wide"}),dayPeriod:Ii({values:oU,defaultWidth:"wide",formattingValues:lU,defaultFormattingWidth:"wide"})};function Ri(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?dU(u,y=>y.test(c)):hU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function hU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function dU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function ZI(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const fU=/^(\d+)(th|st|nd|rd)?/i,mU=/\d+/i,gU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pU={any:[/^b/i,/^(a|c)/i]},yU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_U={any:[/1/i,/2/i,/3/i,/4/i]},vU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},TU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},SU={ordinalNumber:ZI({matchPattern:fU,parsePattern:mU,valueCallback:r=>parseInt(r,10)}),era:Ri({matchPatterns:gU,defaultMatchWidth:"wide",parsePatterns:pU,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:yU,defaultMatchWidth:"wide",parsePatterns:_U,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:vU,defaultMatchWidth:"wide",parsePatterns:bU,defaultParseWidth:"any"}),day:Ri({matchPatterns:wU,defaultMatchWidth:"wide",parsePatterns:xU,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:EU,defaultMatchWidth:"any",parsePatterns:TU,defaultParseWidth:"any"})},K_={code:"en-US",formatDistance:WL,formatLong:eU,formatRelative:nU,localize:uU,match:SU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AU(r,e,t){const n=UL(),s=t?.locale??n.locale??K_,o=2520,c=Lf(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=G_(t?.in,...c>0?[e,r]:[r,e]),g=YL(f,d),y=(IT(f)-IT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<ST){const E=Math.round(v/60);return s.formatDistance("aboutXHours",E,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<yf){const E=Math.round(v/ST);return s.formatDistance("xDays",E,u)}else if(v<yf*2)return w=Math.round(v/yf),s.formatDistance("aboutXMonths",w,u)}if(w=KL(f,d),w<12){const E=Math.round(v/yf);return s.formatDistance("xMonths",E,u)}else{const E=w%12,k=Math.trunc(w/12);return E<3?s.formatDistance("aboutXYears",k,u):E<9?s.formatDistance("overXYears",k,u):s.formatDistance("almostXYears",k+1,u)}}function eR(r,e){return AU(r,zL(r),e)}const IU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},RU=(r,e,t)=>{let n;const s=IU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},CU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},NU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},kU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DU={date:tc({formats:CU,defaultWidth:"full"}),time:tc({formats:NU,defaultWidth:"full"}),dateTime:tc({formats:kU,defaultWidth:"full"})},OU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},MU=(r,e,t,n)=>OU[r],PU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},jU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},VU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},LU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},UU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},zU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},BU=(r,e)=>Number(r)+".",FU={ordinalNumber:BU,era:Ii({values:PU,defaultWidth:"wide"}),quarter:Ii({values:jU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ii({values:VU,defaultWidth:"wide"}),day:Ii({values:LU,defaultWidth:"wide"}),dayPeriod:Ii({values:UU,defaultWidth:"wide",formattingValues:zU,defaultFormattingWidth:"wide"})},HU=/^(\d+)(\.)?/i,qU=/\d+/i,$U={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},GU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},KU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},YU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},QU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},WU={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},XU={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},JU={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},ZU={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},e9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},t9={ordinalNumber:ZI({matchPattern:HU,parsePattern:qU,valueCallback:function(r){return parseInt(r,10)}}),era:Ri({matchPatterns:$U,defaultMatchWidth:"wide",parsePatterns:GU,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:KU,defaultMatchWidth:"wide",parsePatterns:YU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:QU,defaultMatchWidth:"wide",parsePatterns:WU,defaultParseWidth:"any"}),day:Ri({matchPatterns:XU,defaultMatchWidth:"wide",parsePatterns:JU,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:ZU,defaultMatchWidth:"any",parsePatterns:e9,defaultParseWidth:"any"})},tR={code:"tr",formatDistance:RU,formatLong:DU,formatRelative:MU,localize:FU,match:t9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function n9({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=zn(),{currentUser:o}=ai(),c=s.language==="tr"?tR:K_,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,E]=$.useState(!1),[k,O]=$.useState(r?.content||""),V=async()=>{try{await XI(r.id,{content:k}),E(!1)}catch{alert("Failed to update post")}};if(!r)return null;const q=o?.uid===r.userId,U=r.likes&&o&&r.likes.includes(o.uid),H=r.likes?r.likes.length:0,K=r.comments?r.comments.length:0,[z,M]=$.useState("");$.useEffect(()=>{const C=()=>{if(!r.createdAt?.seconds){M(n("just_now")||"Just now");return}const J=new Date(r.createdAt.seconds*1e3);(new Date-J)/(1e3*60*60)>24?M(J.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):M(eR(J,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const G=setInterval(C,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const S=async()=>{if(!(!o||y)){v(!0);try{await QI(r.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},T=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await YI(r.id)}catch{alert("Failed to delete post")}},R=async C=>{if(C.preventDefault(),!(!u.trim()||!o))try{await WI(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},N=async()=>{const C={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(C)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},j=C=>!C||C==="Unknown"?null:C.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${C.toLowerCase()}`)||n(C)||C;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[q&&b.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(wm,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:q&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:z})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:j(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(bm,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 transition-colors ${U?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(tV,{className:`w-5 h-5 ${U?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:H||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(bm,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:K||n("comment")})]}),q&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>E(!0),children:[b.jsx(OI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:N,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(I0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:k,onChange:C=>O(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((C,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(dh,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const My=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function r9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function nR(r,e){return new Promise((function(t,n){let s;return i9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const i9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Em={},s9={get exports(){return Em},set exports(r){Em=r}};(function(r){var e,t,n={};s9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),E=u(g,d+=4);d+=4,d=E;for(var k=0;k<v;k++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var O=u(g,d+=4),V=c(g,d+=4),q=c(g,d+2),U=c(g,d+4);d+=6;var H=u(g,d+=8);d+=4,d+=V+q+U,n._readLocal(g,H,f,w,O,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),E=g(s,o+=2);o+=2;var k=n.bin.readUTF8(s,o,w);if(o+=w,o+=E,f)c[k]={size:d,csize:u};else{var O=new Uint8Array(s.buffer,o);if(v==0)c[k]=new Uint8Array(O.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(O,V),c[k]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var E=new Uint8Array(c),k=0,O=[];for(var g in f){var V=f[g];O.push(k),k=n._writeHeader(E,k,g,V,0)}var q=0,U=k;for(var g in f)V=f[g],O.push(k),k=n._writeHeader(E,k,g,V,1,O[q++]);var H=k-U;return u(E,k,101010256),k+=4,d(E,k+=4,q),d(E,k+=2,q),u(E,k+=2,H),u(E,k+=4,U),k+=4,k+=2,E.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,E=0,k=s.length;if(u==0){for(;v<k;)y(o,w,v+(N=Math.min(65535,k-v))==k?1:0),w=n.F._copyExact(s,v,N,o,w+8),v+=N;return w>>>3}var O=f.lits,V=f.strt,q=f.prev,U=0,H=0,K=0,z=0,M=0,S=0;for(k>2&&(V[S=n.F._hash(s,0)]=0),v=0;v<k;v++){if(M=S,v+1<k-2){S=n.F._hash(s,v+1);var T=v+1&32767;q[T]=V[S],V[S]=T}if(E<=v){(U>14e3||H>26697)&&k-v>100&&(E<v&&(O[U]=v-E,U+=2,E=v),w=n.F._writeBlock(v==k-1||E==k?1:0,O,U,z,s,K,v-K,o,w),U=H=z=0,K=v);var R=0;v<k-2&&(R=n.F._bestMatch(s,v,q,M,Math.min(d[2],k-v),d[3]));var N=R>>>16,j=65535&R;if(R!=0){j=65535&R;var C=g(N=R>>>16,f.of0);f.lhst[257+C]++;var G=g(j,f.df0);f.dhst[G]++,z+=f.exb[C]+f.dxb[G],O[U]=N<<23|v-E,O[U+1]=j<<16|C<<8|G,U+=2,E=v+N}else f.lhst[s[v]]++;H++}}for(K==v&&s.length!=0||(E<v&&(O[U]=v-E,U+=2,E=v),w=n.F._writeBlock(1,O,U,z,s,K,v-K,o,w),U=0,H=0,U=H=z=0,K=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,E=0,k=Math.min(32767,o);v<=k&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var O=n.F._howLong(s,o,v);if(O>w){if(E=v,(w=O)>=d)break;v+2<O&&(O=v+2);for(var V=0,q=0;q<O-2;q++){var U=o-v+q+32768&32767,H=U-c[U]+32768&32767;H>V&&(V=H,y=U)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|E},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,E,k,O,V,q,U,H,K,z=n.F.U,M=n.F._putsF,S=n.F._putsE;z.lhst[256]++,E=(w=n.F.getTrees())[0],k=w[1],O=w[2],V=w[3],q=w[4],U=w[5],H=w[6],K=w[7];var T=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),R=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),N=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);N+=14+3*U+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var j=0;j<286;j++)z.lhst[j]=0;for(j=0;j<30;j++)z.dhst[j]=0;for(j=0;j<19;j++)z.ihst[j]=0;var C=T<R&&T<N?0:R<N?1:2;if(M(y,v,s),M(y,v+1,C),v+=3,C==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,J;if(C==1&&(G=z.fltree,J=z.fdtree),C==2){n.F.makeCodes(z.ltree,E),n.F.revCodes(z.ltree,E),n.F.makeCodes(z.dtree,k),n.F.revCodes(z.dtree,k),n.F.makeCodes(z.itree,O),n.F.revCodes(z.itree,O),G=z.ltree,J=z.dtree,S(y,v,V-257),S(y,v+=5,q-1),S(y,v+=5,U-4),v+=4;for(var P=0;P<U;P++)S(y,v+3*P,z.itree[1+(z.ordr[P]<<1)]);v+=3*U,v=n.F._codeTiny(H,z.itree,y,v),v=n.F._codeTiny(K,z.itree,y,v)}for(var D=f,Z=0;Z<c;Z+=2){for(var W=o[Z],ee=W>>>23,F=D+(8388607&W);D<F;)v=n.F._writeLit(d[D++],G,y,v);if(ee!=0){var Y=o[Z+1],re=Y>>16,ie=Y>>8&255,ne=255&Y;S(y,v=n.F._writeLit(257+ie,G,y,v),ee-z.of0[ie]),v+=z.exb[ie],M(y,v=n.F._writeLit(ne,J,y,v),re-z.df0[ne]),v+=z.dxb[ne],D+=ee}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(H,K){return H.f-K.f}));var E=u[0],k=u[1],O=0,V=1,q=2;for(u[0]={lit:-1,f:E.f+k.f,l:E,r:k,d:0};V!=y-1;)E=O!=V&&(q==y||u[O].f<u[q].f)?u[O++]:u[q++],k=O!=V&&(q==y||u[O].f<u[q].f)?u[O++]:u[q++],u[V++]={lit:-1,f:E.f+k.f,l:E,r:k};var U=n.F.setDepth(u[V-1],0);for(U>c&&(n.F.restrictDepth(v,c,U),U=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return U},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,E=u.U,k=o==null;k&&(o=new c(s.length>>>2<<3));for(var O,V,q=0,U=0,H=0,K=0,z=0,M=0,S=0,T=0,R=0;q==0;)if(q=d(s,R,1),U=d(s,R+1,2),R+=3,U!=0){if(k&&(o=n.F._check(o,T+(1<<17))),U==1&&(O=E.flmap,V=E.fdmap,M=511,S=31),U==2){H=f(s,R,5)+257,K=f(s,R+5,5)+1,z=f(s,R+10,4)+4,R+=14;for(var N=0;N<38;N+=2)E.itree[N]=0,E.itree[N+1]=0;var j=1;for(N=0;N<z;N++){var C=f(s,R+3*N,3);E.itree[1+(E.ordr[N]<<1)]=C,C>j&&(j=C)}R+=3*z,y(E.itree,j),v(E.itree,j,E.imap),O=E.lmap,V=E.dmap,R=g(E.imap,(1<<j)-1,H+K,s,R,E.ttree);var G=u._copyOut(E.ttree,0,H,E.ltree);M=(1<<G)-1;var J=u._copyOut(E.ttree,H,K,E.dtree);S=(1<<J)-1,y(E.ltree,G),v(E.ltree,G,O),y(E.dtree,J),v(E.dtree,J,V)}for(;;){var P=O[w(s,R)&M];R+=15&P;var D=P>>>4;if(!(D>>>8))o[T++]=D;else{if(D==256)break;var Z=T+D-254;if(D>264){var W=E.ldef[D-257];Z=T+(W>>>3)+f(s,R,7&W),R+=7&W}var ee=V[w(s,R)&S];R+=15&ee;var F=ee>>>4,Y=E.ddef[F],re=(Y>>>4)+d(s,R,15&Y);for(R+=15&Y,k&&(o=n.F._check(o,T+(1<<17)));T<Z;)o[T]=o[T++-re],o[T]=o[T++-re],o[T]=o[T++-re],o[T]=o[T++-re];T=Z}}}else{(7&R)!=0&&(R+=8-(7&R));var ie=4+(R>>>3),ne=s[ie-4]|s[ie-3]<<8;k&&(o=n.F._check(o,T+ne)),o.set(new c(s.buffer,s.byteOffset+ie,ne),T),R=ie+ne<<3,T+=ne}return o.length==T?o:o.slice(0,T)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var E=w>>>4;if(E<=15)f[v]=E,v++;else{var k=0,O=0;E==16?(O=3+g(u,d,2),d+=2,k=f[v-1]):E==17?(O=3+g(u,d,3),d+=3):E==18&&(O=11+g(u,d,7),d+=7);for(var V=v+O;v<V;)f[v]=k,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var E=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,E[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=E[f],E[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,E=s[f]<<w,k=E+(1<<w);E!=k;)c[d[E]>>>15-o]=v,E++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var a9=r9({__proto__:null,default:Em},[Em]);const Jr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let E=0;E<v;E++)w+=String.fromCharCode(g[y+E]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let E=0;E<v;E++)w.push(g[y+E]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,E="";for(let k=0;k<v;k++)E+=`%${r.pad(g[y+k].toString(16))}`;try{w=decodeURIComponent(E)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const E=y*v,k=o(w),O=Math.ceil(y*k/8),V=new Uint8Array(4*E),q=new Uint32Array(V.buffer),{ctype:U}=w,{depth:H}=w,K=r.readUshort;if(U==6){const W=E<<2;if(H==8)for(var z=0;z<W;z+=4)V[z]=g[z],V[z+1]=g[z+1],V[z+2]=g[z+2],V[z+3]=g[z+3];if(H==16)for(z=0;z<W;z++)V[z]=g[z<<1]}else if(U==2){const W=w.tabs.tRNS;if(W==null){if(H==8)for(z=0;z<E;z++){var M=3*z;q[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M]}if(H==16)for(z=0;z<E;z++)M=6*z,q[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M]}else{var S=W[0];const ee=W[1],F=W[2];if(H==8)for(z=0;z<E;z++){var T=z<<2;M=3*z,q[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M],g[M]==S&&g[M+1]==ee&&g[M+2]==F&&(V[T+3]=0)}if(H==16)for(z=0;z<E;z++)T=z<<2,M=6*z,q[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M],K(g,M)==S&&K(g,M+2)==ee&&K(g,M+4)==F&&(V[T+3]=0)}}else if(U==3){const W=w.tabs.PLTE,ee=w.tabs.tRNS,F=ee?ee.length:0;if(H==1)for(var R=0;R<v;R++){var N=R*O,j=R*y;for(z=0;z<y;z++){T=j+z<<2;var C=3*(G=g[N+(z>>3)]>>7-((7&z)<<0)&1);V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255}}if(H==2)for(R=0;R<v;R++)for(N=R*O,j=R*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[N+(z>>2)]>>6-((3&z)<<1)&3),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255;if(H==4)for(R=0;R<v;R++)for(N=R*O,j=R*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[N+(z>>1)]>>4-((1&z)<<2)&15),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255;if(H==8)for(z=0;z<E;z++){var G;T=z<<2,C=3*(G=g[z]),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<F?ee[G]:255}}else if(U==4){if(H==8)for(z=0;z<E;z++){T=z<<2;var J=g[P=z<<1];V[T]=J,V[T+1]=J,V[T+2]=J,V[T+3]=g[P+1]}if(H==16)for(z=0;z<E;z++){var P;T=z<<2,J=g[P=z<<2],V[T]=J,V[T+1]=J,V[T+2]=J,V[T+3]=g[P+2]}}else if(U==0)for(S=w.tabs.tRNS?w.tabs.tRNS:-1,R=0;R<v;R++){const W=R*O,ee=R*y;if(H==1)for(var D=0;D<y;D++){var Z=(J=255*(g[W+(D>>>3)]>>>7-(7&D)&1))==255*S?0:255;q[ee+D]=Z<<24|J<<16|J<<8|J}else if(H==2)for(D=0;D<y;D++)Z=(J=85*(g[W+(D>>>2)]>>>6-((3&D)<<1)&3))==85*S?0:255,q[ee+D]=Z<<24|J<<16|J<<8|J;else if(H==4)for(D=0;D<y;D++)Z=(J=17*(g[W+(D>>>1)]>>>4-((1&D)<<2)&15))==17*S?0:255,q[ee+D]=Z<<24|J<<16|J<<8|J;else if(H==8)for(D=0;D<y;D++)Z=(J=g[W+D])==S?0:255,q[ee+D]=Z<<24|J<<16|J<<8|J;else if(H==16)for(D=0;D<y;D++)J=g[W+(D<<1)],Z=K(g,W+(D<<1))==S?0:255,q[ee+D]=Z<<24|J<<16|J<<8|J}return V}function t(g,y,v,w){const E=o(g),k=Math.ceil(v*E/8),O=new Uint8Array((k+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,O):n(y,O),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(q,U){const H=U.width,K=U.height,z=o(U),M=z>>3,S=Math.ceil(H*z/8),T=new Uint8Array(K*S);let R=0;const N=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const D=C[J],Z=G[J];let W=0,ee=0,F=N[J];for(;F<K;)F+=D,ee++;let Y=j[J];for(;Y<H;)Y+=Z,W++;const re=Math.ceil(W*z/8);c(q,U,R,W,ee);let ie=0,ne=N[J];for(;ne<K;){let _e=j[J],Ae=R+ie*re<<3;for(;_e<H;){var P;if(z==1&&(P=(P=q[Ae>>3])>>7-(7&Ae)&1,T[ne*S+(_e>>3)]|=P<<7-((7&_e)<<0)),z==2&&(P=(P=q[Ae>>3])>>6-(7&Ae)&3,T[ne*S+(_e>>2)]|=P<<6-((3&_e)<<1)),z==4&&(P=(P=q[Ae>>3])>>4-(7&Ae)&15,T[ne*S+(_e>>1)]|=P<<4-((1&_e)<<2)),z>=8){const Pe=ne*S+_e*M;for(let Ce=0;Ce<M;Ce++)T[Pe+Ce]=q[(Ae>>3)+Ce]}Ae+=z,_e+=Z}ie++,ne+=D}W*ee!=0&&(R+=ee*(1+re)),J+=1}return T})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let E,k,O=0,V=0,q=0,U=0,H=0,K=0,z=0,M=0,S=0;if(y[0]==3&&y[1]==0)return v||new w(0);const T=g.H,R=T.b,N=T.e,j=T.R,C=T.n,G=T.A,J=T.Z,P=T.m,D=v==null;for(D&&(v=new w(y.length>>>2<<5));O==0;)if(O=R(y,S,1),V=R(y,S+1,2),S+=3,V!=0){if(D&&(v=g.H.W(v,M+(1<<17))),V==1&&(E=P.J,k=P.h,K=511,z=31),V==2){q=N(y,S,5)+257,U=N(y,S+5,5)+1,H=N(y,S+10,4)+4,S+=14;let W=1;for(var Z=0;Z<38;Z+=2)P.Q[Z]=0,P.Q[Z+1]=0;for(Z=0;Z<H;Z++){const Y=N(y,S+3*Z,3);P.Q[1+(P.X[Z]<<1)]=Y,Y>W&&(W=Y)}S+=3*H,C(P.Q,W),G(P.Q,W,P.u),E=P.w,k=P.d,S=j(P.u,(1<<W)-1,q+U,y,S,P.v);const ee=T.V(P.v,0,q,P.C);K=(1<<ee)-1;const F=T.V(P.v,q,U,P.D);z=(1<<F)-1,C(P.C,ee),G(P.C,ee,E),C(P.D,F),G(P.D,F,k)}for(;;){const W=E[J(y,S)&K];S+=15&W;const ee=W>>>4;if(!(ee>>>8))v[M++]=ee;else{if(ee==256)break;{let F=M+ee-254;if(ee>264){const _e=P.q[ee-257];F=M+(_e>>>3)+N(y,S,7&_e),S+=7&_e}const Y=k[J(y,S)&z];S+=15&Y;const re=Y>>>4,ie=P.c[re],ne=(ie>>>4)+R(y,S,15&ie);for(S+=15&ie;M<F;)v[M]=v[M++-ne],v[M]=v[M++-ne],v[M]=v[M++-ne],v[M]=v[M++-ne];M=F}}}}else{(7&S)!=0&&(S+=8-(7&S));const W=4+(S>>>3),ee=y[W-4]|y[W-3]<<8;D&&(v=g.H.W(v,M+ee)),v.set(new w(y.buffer,y.byteOffset+W,ee),M),S=W+ee<<3,M+=ee}return v.length==M?v:v.slice(0,M)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const E=new Uint8Array(w<<1);return E.set(y,0),E},g.H.R=function(y,v,w,E,k,O){const V=g.H.e,q=g.H.Z;let U=0;for(;U<w;){const H=y[q(E,k)&v];k+=15&H;const K=H>>>4;if(K<=15)O[U]=K,U++;else{let z=0,M=0;K==16?(M=3+V(E,k,2),k+=2,z=O[U-1]):K==17?(M=3+V(E,k,3),k+=3):K==18&&(M=11+V(E,k,7),k+=7);const S=U+M;for(;U<S;)O[U]=z,U++}}return k},g.H.V=function(y,v,w,E){let k=0,O=0;const V=E.length>>>1;for(;O<w;){const q=y[O+v];E[O<<1]=0,E[1+(O<<1)]=q,q>k&&(k=q),O++}for(;O<V;)E[O<<1]=0,E[1+(O<<1)]=0,O++;return k},g.H.n=function(y,v){const w=g.H.m,E=y.length;let k,O,V,q;const U=w.j;for(var H=0;H<=v;H++)U[H]=0;for(H=1;H<E;H+=2)U[y[H]]++;const K=w.K;for(k=0,U[0]=0,O=1;O<=v;O++)k=k+U[O-1]<<1,K[O]=k;for(V=0;V<E;V+=2)q=y[V+1],q!=0&&(y[V]=K[q],K[q]++)},g.H.A=function(y,v,w){const E=y.length,k=g.H.m.r;for(let O=0;O<E;O+=2)if(y[O+1]!=0){const V=O>>1,q=y[O+1],U=V<<4|q,H=v-q;let K=y[O]<<H;const z=K+(1<<H);for(;K!=z;)w[k[K]>>>15-v]=U,K++}},g.H.l=function(y,v){const w=g.H.m.r,E=15-v;for(let k=0;k<y.length;k+=2){const O=y[k]<<v-y[k+1];y[k]=w[O]>>>E}},g.H.M=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8,y[E+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let E=v;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,y.r[v]=(E>>>16|E<<16)>>>17}function w(E,k,O){for(;k--!=0;)E.push(0,O)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,E){let k=o(y);const O=Math.ceil(w*k/8);let V,q;k=Math.ceil(k/8);let U=g[v],H=0;if(U>1&&(g[v]=[0,0,1][U-2]),U==3)for(H=k;H<O;H++)g[H+1]=g[H+1]+(g[H+1-k]>>>1)&255;for(let K=0;K<E;K++)if(V=v+K*O,q=V+K+1,U=g[q-1],H=0,U==0)for(;H<O;H++)g[V+H]=g[q+H];else if(U==1){for(;H<k;H++)g[V+H]=g[q+H];for(;H<O;H++)g[V+H]=g[q+H]+g[V+H-k]}else if(U==2)for(;H<O;H++)g[V+H]=g[q+H]+g[V+H-O];else if(U==3){for(;H<k;H++)g[V+H]=g[q+H]+(g[V+H-O]>>>1);for(;H<O;H++)g[V+H]=g[q+H]+(g[V+H-O]+g[V+H-k]>>>1)}else{for(;H<k;H++)g[V+H]=g[q+H]+u(0,g[V+H-O],0);for(;H<O;H++)g[V+H]=g[q+H]+u(g[V+H-k],g[V+H-O],g[V+H-k-O])}return g}function u(g,y,v){const w=g+y-v,E=w-g,k=w-y,O=w-v;return E*E<=k*k&&E*E<=O*O?g:k*k<=O*O?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,E,k,O,V,q){const U=Math.min(y,E),H=Math.min(v,k);let K=0,z=0;for(let J=0;J<H;J++)for(let P=0;P<U;P++)if(O>=0&&V>=0?(K=J*y+P<<2,z=(V+J)*E+O+P<<2):(K=(-V+J)*y-O+P<<2,z=J*E+P<<2),q==0)w[z]=g[K],w[z+1]=g[K+1],w[z+2]=g[K+2],w[z+3]=g[K+3];else if(q==1){var M=g[K+3]*.00392156862745098,S=g[K]*M,T=g[K+1]*M,R=g[K+2]*M,N=w[z+3]*(1/255),j=w[z]*N,C=w[z+1]*N,G=w[z+2]*N;const D=1-M,Z=M+N*D,W=Z==0?0:1/Z;w[z+3]=255*Z,w[z+0]=(S+j*D)*W,w[z+1]=(T+C*D)*W,w[z+2]=(R+G*D)*W}else if(q==2)M=g[K+3],S=g[K],T=g[K+1],R=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==N&&S==j&&T==C&&R==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=S,w[z+1]=T,w[z+2]=R,w[z+3]=M);else if(q==3){if(M=g[K+3],S=g[K],T=g[K+1],R=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==N&&S==j&&T==C&&R==G)continue;if(M<220&&N>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const E=r,k=E.readUshort,O=E.readUint,V={tabs:{},frames:[]},q=new Uint8Array(v.length);let U,H=0,K=0;const z=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(v[M]!=z[M])throw"The input is not a PNG file!";for(;w<v.length;){const J=E.readUint(v,w);w+=4;const P=E.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,V);else if(P=="iCCP"){for(var S=w;v[S]!=0;)S++;E.readASCII(v,w,S-w),v[S+1];const D=v.slice(S+2,w+J);let Z=null;try{Z=n(D)}catch{Z=s(D)}V.tabs[P]=Z}else if(P=="CgBI")V.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(M=0;M<J;M++)q[H+M]=v[w+M];H+=J}else if(P=="acTL")V.tabs[P]={num_frames:O(v,w),num_plays:O(v,w+4)},U=new Uint8Array(v.length);else if(P=="fcTL"){K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height),K=0);const D={x:O(v,w+12),y:O(v,w+16),width:O(v,w+4),height:O(v,w+8)};let Z=k(v,w+22);Z=k(v,w+20)/(Z==0?100:Z);const W={rect:D,delay:Math.round(1e3*Z),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(P=="fdAT"){for(M=0;M<J-4;M++)U[K+M]=v[w+M+4];K+=J-4}else if(P=="pHYs")V.tabs[P]=[E.readUint(v,w),E.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(V.tabs[P]=[],M=0;M<8;M++)V.tabs[P].push(E.readUint(v,w+4*M));else if(P=="tEXt"||P=="zTXt"){V.tabs[P]==null&&(V.tabs[P]={});var T=E.nextZero(v,w),R=E.readASCII(v,w,T-w),N=w+J-T-1;if(P=="tEXt")C=E.readASCII(v,T+1,N);else{var j=n(v.slice(T+2,T+2+N));C=E.readUTF8(j,0,j.length)}V.tabs[P][R]=C}else if(P=="iTXt"){V.tabs[P]==null&&(V.tabs[P]={}),T=0,S=w,T=E.nextZero(v,S),R=E.readASCII(v,S,T-S);const D=v[S=T+1];var C;v[S+1],S+=2,T=E.nextZero(v,S),E.readASCII(v,S,T-S),S=T+1,T=E.nextZero(v,S),E.readUTF8(v,S,T-S),N=J-((S=T+1)-w),D==0?C=E.readUTF8(v,S,N):(j=n(v.slice(S,S+N)),C=E.readUTF8(j,0,j.length)),V.tabs[P][R]=C}else if(P=="PLTE")V.tabs[P]=E.readBytes(v,w,J);else if(P=="hIST"){const D=V.tabs.PLTE.length/3;for(V.tabs[P]=[],M=0;M<D;M++)V.tabs[P].push(k(v,w+2*M))}else if(P=="tRNS")V.ctype==3?V.tabs[P]=E.readBytes(v,w,J):V.ctype==0?V.tabs[P]=k(v,w):V.ctype==2&&(V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]);else if(P=="gAMA")V.tabs[P]=E.readUint(v,w)/1e5;else if(P=="sRGB")V.tabs[P]=v[w];else if(P=="bKGD")V.ctype==0||V.ctype==4?V.tabs[P]=[k(v,w)]:V.ctype==2||V.ctype==6?V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]:V.ctype==3&&(V.tabs[P]=v[w]);else if(P=="IEND")break;w+=J,E.readUint(v,w),w+=4}var G;return K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height)),V.data=t(V,q,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const E=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const k=v*w*4,O=new Uint8Array(k),V=new Uint8Array(k),q=new Uint8Array(k);for(let H=0;H<y.frames.length;H++){const K=y.frames[H],z=K.rect.x,M=K.rect.y,S=K.rect.width,T=K.rect.height,R=e(K.data,S,T,y);if(H!=0)for(var U=0;U<k;U++)q[U]=O[U];if(K.blend==0?f(R,S,T,O,v,w,z,M,0):K.blend==1&&f(R,S,T,O,v,w,z,M,1),E.push(O.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)f(V,S,T,O,v,w,z,M,0);else if(K.dispose==2)for(U=0;U<k;U++)O[U]=q[U]}}return E},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Jr,{_bin:e}=Jr,t=Jr._paeth;var n={table:(function(){const S=new Uint32Array(256);for(let T=0;T<256;T++){let R=T;for(let N=0;N<8;N++)1&R?R=3988292384^R>>>1:R>>>=1;S[T]=R}return S})(),update(S,T,R,N){for(let j=0;j<N;j++)S=n.table[255&(S^T[R+j])]^S>>>8;return S},crc:(S,T,R)=>4294967295^n.update(4294967295,S,T,R)};function s(S,T,R,N){T[R]+=S[0]*N>>4,T[R+1]+=S[1]*N>>4,T[R+2]+=S[2]*N>>4,T[R+3]+=S[3]*N>>4}function o(S){return Math.max(0,Math.min(255,S))}function c(S,T){const R=S[0]-T[0],N=S[1]-T[1],j=S[2]-T[2],C=S[3]-T[3];return R*R+N*N+j*j+C*C}function u(S,T,R,N,j,C,G){G==null&&(G=1);const J=N.length,P=[];for(var D=0;D<J;D++){const ne=N[D];P.push([ne>>>0&255,ne>>>8&255,ne>>>16&255,ne>>>24&255])}for(D=0;D<J;D++){let ne=4294967295;for(var Z=0,W=0;W<J;W++){var ee=c(P[D],P[W]);W!=D&&ee<ne&&(ne=ee,Z=W)}}const F=new Uint32Array(j.buffer),Y=new Int16Array(T*R*4),re=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(D=0;D<re.length;D++)re[D]=255*((re[D]+.5)/16-.5);for(let ne=0;ne<R;ne++)for(let _e=0;_e<T;_e++){var ie;D=4*(ne*T+_e),G!=2?ie=[o(S[D]+Y[D]),o(S[D+1]+Y[D+1]),o(S[D+2]+Y[D+2]),o(S[D+3]+Y[D+3])]:(ee=re[4*(3&ne)+(3&_e)],ie=[o(S[D]+ee),o(S[D+1]+ee),o(S[D+2]+ee),o(S[D+3]+ee)]),Z=0;let Ae=16777215;for(W=0;W<J;W++){const Ze=c(ie,P[W]);Ze<Ae&&(Ae=Ze,Z=W)}const Pe=P[Z],Ce=[ie[0]-Pe[0],ie[1]-Pe[1],ie[2]-Pe[2],ie[3]-Pe[3]];G==1&&(_e!=T-1&&s(Ce,Y,D+4,7),ne!=R-1&&(_e!=0&&s(Ce,Y,D+4*T-4,3),s(Ce,Y,D+4*T,5),_e!=T-1&&s(Ce,Y,D+4*T+4,1))),C[D>>2]=Z,F[D>>2]=N[Z]}}function d(S,T,R,N,j){j==null&&(j={});const{crc:C}=n,G=e.writeUint,J=e.writeUshort,P=e.writeASCII;let D=8;const Z=S.frames.length>1;let W,ee=!1,F=33+(Z?20:0);if(j.sRGB!=null&&(F+=13),j.pHYs!=null&&(F+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),F+=21+W.length+4),S.ctype==3){for(var Y=S.plte.length,re=0;re<Y;re++)S.plte[re]>>>24!=255&&(ee=!0);F+=8+3*Y+4+(ee?8+1*Y+4:0)}for(var ie=0;ie<S.frames.length;ie++)Z&&(F+=38),F+=(Pe=S.frames[ie]).cimg.length+12,ie!=0&&(F+=4);F+=12;const ne=new Uint8Array(F),_e=[137,80,78,71,13,10,26,10];for(re=0;re<8;re++)ne[re]=_e[re];if(G(ne,D,13),D+=4,P(ne,D,"IHDR"),D+=4,G(ne,D,T),D+=4,G(ne,D,R),D+=4,ne[D]=S.depth,D++,ne[D]=S.ctype,D++,ne[D]=0,D++,ne[D]=0,D++,ne[D]=0,D++,G(ne,D,C(ne,D-17,17)),D+=4,j.sRGB!=null&&(G(ne,D,1),D+=4,P(ne,D,"sRGB"),D+=4,ne[D]=j.sRGB,D++,G(ne,D,C(ne,D-5,5)),D+=4),j.iCCP!=null){const Ce=13+W.length;G(ne,D,Ce),D+=4,P(ne,D,"iCCP"),D+=4,P(ne,D,"ICC profile"),D+=11,D+=2,ne.set(W,D),D+=W.length,G(ne,D,C(ne,D-(Ce+4),Ce+4)),D+=4}if(j.pHYs!=null&&(G(ne,D,9),D+=4,P(ne,D,"pHYs"),D+=4,G(ne,D,j.pHYs[0]),D+=4,G(ne,D,j.pHYs[1]),D+=4,ne[D]=j.pHYs[2],D++,G(ne,D,C(ne,D-13,13)),D+=4),Z&&(G(ne,D,8),D+=4,P(ne,D,"acTL"),D+=4,G(ne,D,S.frames.length),D+=4,G(ne,D,j.loop!=null?j.loop:0),D+=4,G(ne,D,C(ne,D-12,12)),D+=4),S.ctype==3){for(G(ne,D,3*(Y=S.plte.length)),D+=4,P(ne,D,"PLTE"),D+=4,re=0;re<Y;re++){const Ce=3*re,Ze=S.plte[re],st=255&Ze,at=Ze>>>8&255,un=Ze>>>16&255;ne[D+Ce+0]=st,ne[D+Ce+1]=at,ne[D+Ce+2]=un}if(D+=3*Y,G(ne,D,C(ne,D-3*Y-4,3*Y+4)),D+=4,ee){for(G(ne,D,Y),D+=4,P(ne,D,"tRNS"),D+=4,re=0;re<Y;re++)ne[D+re]=S.plte[re]>>>24&255;D+=Y,G(ne,D,C(ne,D-Y-4,Y+4)),D+=4}}let Ae=0;for(ie=0;ie<S.frames.length;ie++){var Pe=S.frames[ie];Z&&(G(ne,D,26),D+=4,P(ne,D,"fcTL"),D+=4,G(ne,D,Ae++),D+=4,G(ne,D,Pe.rect.width),D+=4,G(ne,D,Pe.rect.height),D+=4,G(ne,D,Pe.rect.x),D+=4,G(ne,D,Pe.rect.y),D+=4,J(ne,D,N[ie]),D+=2,J(ne,D,1e3),D+=2,ne[D]=Pe.dispose,D++,ne[D]=Pe.blend,D++,G(ne,D,C(ne,D-30,30)),D+=4);const Ce=Pe.cimg;G(ne,D,(Y=Ce.length)+(ie==0?0:4)),D+=4;const Ze=D;P(ne,D,ie==0?"IDAT":"fdAT"),D+=4,ie!=0&&(G(ne,D,Ae++),D+=4),ne.set(Ce,D),D+=Y,G(ne,D,C(ne,Ze,D-Ze)),D+=4}return G(ne,D,0),D+=4,P(ne,D,"IEND"),D+=4,G(ne,D,C(ne,D-4,4)),D+=4,ne.buffer}function f(S,T,R){for(let N=0;N<S.frames.length;N++){const j=S.frames[N];j.rect.width;const C=j.rect.height,G=new Uint8Array(C*j.bpl+C);j.cimg=w(j.img,C,j.bpp,j.bpl,G,T,R)}}function g(S,T,R,N,j){const C=j[0],G=j[1],J=j[2],P=j[3],D=j[4],Z=j[5];let W=6,ee=8,F=255;for(var Y=0;Y<S.length;Y++){const Ct=new Uint8Array(S[Y]);for(var re=Ct.length,ie=0;ie<re;ie+=4)F&=Ct[ie+3]}const ne=F!=255,_e=(function(rt,it,qe,pe,Ee,Be){const Oe=[];for(var xe=0;xe<rt.length;xe++){const zt=new Uint8Array(rt[xe]),kn=new Uint32Array(zt.buffer);var et;let wn=0,Gt=0,Et=it,Jt=qe,kt=pe?1:0;if(xe!=0){const Yo=Be||pe||xe==1||Oe[xe-2].dispose!=0?1:2;let oi=0,Ca=1e9;for(let Dn=0;Dn<Yo;Dn++){var gt=new Uint8Array(rt[xe-1-Dn]);const qi=new Uint32Array(rt[xe-1-Dn]);let pt=it,hn=qe,xn=-1,En=-1;for(let br=0;br<qe;br++)for(let gn=0;gn<it;gn++)kn[ct=br*it+gn]!=qi[ct]&&(gn<pt&&(pt=gn),gn>xn&&(xn=gn),br<hn&&(hn=br),br>En&&(En=br));xn==-1&&(pt=hn=xn=En=0),Ee&&((1&pt)==1&&pt--,(1&hn)==1&&hn--);const Qo=(xn-pt+1)*(En-hn+1);Qo<Ca&&(Ca=Qo,oi=Dn,wn=pt,Gt=hn,Et=xn-pt+1,Jt=En-hn+1)}gt=new Uint8Array(rt[xe-1-oi]),oi==1&&(Oe[xe-1].dispose=2),et=new Uint8Array(Et*Jt*4),r(gt,it,qe,et,Et,Jt,-wn,-Gt,0),kt=r(zt,it,qe,et,Et,Jt,-wn,-Gt,3)?1:0,kt==1?v(zt,it,qe,et,{x:wn,y:Gt,width:Et,height:Jt}):r(zt,it,qe,et,Et,Jt,-wn,-Gt,0)}else et=zt.slice(0);Oe.push({rect:{x:wn,y:Gt,width:Et,height:Jt},img:et,blend:kt,dispose:0})}if(pe)for(xe=0;xe<Oe.length;xe++){if((Fn=Oe[xe]).blend==1)continue;const zt=Fn.rect,kn=Oe[xe-1].rect,wn=Math.min(zt.x,kn.x),Gt=Math.min(zt.y,kn.y),Et={x:wn,y:Gt,width:Math.max(zt.x+zt.width,kn.x+kn.width)-wn,height:Math.max(zt.y+zt.height,kn.y+kn.height)-Gt};Oe[xe-1].dispose=1,xe-1!=0&&y(rt,it,qe,Oe,xe-1,Et,Ee),y(rt,it,qe,Oe,xe,Et,Ee)}let Bn=0;if(rt.length!=1)for(var ct=0;ct<Oe.length;ct++){var Fn;Bn+=(Fn=Oe[ct]).rect.width*Fn.rect.height}return Oe})(S,T,R,C,G,J),Ae={},Pe=[],Ce=[];if(N!=0){const Ct=[];for(ie=0;ie<_e.length;ie++)Ct.push(_e[ie].img.buffer);const rt=(function(Ee){let Be=0;for(var Oe=0;Oe<Ee.length;Oe++)Be+=Ee[Oe].byteLength;const xe=new Uint8Array(Be);let et=0;for(Oe=0;Oe<Ee.length;Oe++){const gt=new Uint8Array(Ee[Oe]),Bn=gt.length;for(let ct=0;ct<Bn;ct+=4){let Fn=gt[ct],zt=gt[ct+1],kn=gt[ct+2];const wn=gt[ct+3];wn==0&&(Fn=zt=kn=0),xe[et+ct]=Fn,xe[et+ct+1]=zt,xe[et+ct+2]=kn,xe[et+ct+3]=wn}et+=Bn}return xe.buffer})(Ct),it=k(rt,N);for(ie=0;ie<it.plte.length;ie++)Pe.push(it.plte[ie].est.rgba);let qe=0;for(ie=0;ie<_e.length;ie++){const pe=(st=_e[ie]).img.length;var Ze=new Uint8Array(it.inds.buffer,qe>>2,pe>>2);Ce.push(Ze);const Ee=new Uint8Array(it.abuf,qe,pe);Z&&u(st.img,st.rect.width,st.rect.height,Pe,Ee,Ze),st.img.set(Ee),qe+=pe}}else for(Y=0;Y<_e.length;Y++){var st=_e[Y];const Ct=new Uint32Array(st.img.buffer);var at=st.rect.width;for(re=Ct.length,Ze=new Uint8Array(re),Ce.push(Ze),ie=0;ie<re;ie++){const rt=Ct[ie];if(ie!=0&&rt==Ct[ie-1])Ze[ie]=Ze[ie-1];else if(ie>at&&rt==Ct[ie-at])Ze[ie]=Ze[ie-at];else{let it=Ae[rt];if(it==null&&(Ae[rt]=it=Pe.length,Pe.push(rt),Pe.length>=300))break;Ze[ie]=it}}}const un=Pe.length;for(un<=256&&D==0&&(ee=un<=2?1:un<=4?2:un<=16?4:8,ee=Math.max(ee,P)),Y=0;Y<_e.length;Y++){(st=_e[Y]).rect.x,st.rect.y,at=st.rect.width;const Ct=st.rect.height;let rt=st.img;new Uint32Array(rt.buffer);let it=4*at,qe=4;if(un<=256&&D==0){it=Math.ceil(ee*at/8);var Rt=new Uint8Array(it*Ct);const pe=Ce[Y];for(let Ee=0;Ee<Ct;Ee++){ie=Ee*it;const Be=Ee*at;if(ee==8)for(var mt=0;mt<at;mt++)Rt[ie+mt]=pe[Be+mt];else if(ee==4)for(mt=0;mt<at;mt++)Rt[ie+(mt>>1)]|=pe[Be+mt]<<4-4*(1&mt);else if(ee==2)for(mt=0;mt<at;mt++)Rt[ie+(mt>>2)]|=pe[Be+mt]<<6-2*(3&mt);else if(ee==1)for(mt=0;mt<at;mt++)Rt[ie+(mt>>3)]|=pe[Be+mt]<<7-1*(7&mt)}rt=Rt,W=3,qe=1}else if(ne==0&&_e.length==1){Rt=new Uint8Array(at*Ct*3);const pe=at*Ct;for(ie=0;ie<pe;ie++){const Ee=3*ie,Be=4*ie;Rt[Ee]=rt[Be],Rt[Ee+1]=rt[Be+1],Rt[Ee+2]=rt[Be+2]}rt=Rt,W=2,qe=3,it=3*at}st.img=rt,st.bpl=it,st.bpp=qe}return{ctype:W,depth:ee,plte:Pe,frames:_e}}function y(S,T,R,N,j,C,G){const J=Uint8Array,P=Uint32Array,D=new J(S[j-1]),Z=new P(S[j-1]),W=j+1<S.length?new J(S[j+1]):null,ee=new J(S[j]),F=new P(ee.buffer);let Y=T,re=R,ie=-1,ne=-1;for(let Ae=0;Ae<C.height;Ae++)for(let Pe=0;Pe<C.width;Pe++){const Ce=C.x+Pe,Ze=C.y+Ae,st=Ze*T+Ce,at=F[st];at==0||N[j-1].dispose==0&&Z[st]==at&&(W==null||W[4*st+3]!=0)||(Ce<Y&&(Y=Ce),Ce>ie&&(ie=Ce),Ze<re&&(re=Ze),Ze>ne&&(ne=Ze))}ie==-1&&(Y=re=ie=ne=0),G&&((1&Y)==1&&Y--,(1&re)==1&&re--),C={x:Y,y:re,width:ie-Y+1,height:ne-re+1};const _e=N[j];_e.rect=C,_e.blend=1,_e.img=new Uint8Array(C.width*C.height*4),N[j-1].dispose==0?(r(D,T,R,_e.img,C.width,C.height,-C.x,-C.y,0),v(ee,T,R,_e.img,C)):r(ee,T,R,_e.img,C.width,C.height,-C.x,-C.y,0)}function v(S,T,R,N,j){r(S,T,R,N,j.width,j.height,-j.x,-j.y,2)}function w(S,T,R,N,j,C,G){const J=[];let P,D=[0,1,2,3,4];C!=-1?D=[C]:(T*N>5e5||R==1)&&(D=[0]),G&&(P={level:0});const Z=a9;for(var W=0;W<D.length;W++){for(let Y=0;Y<T;Y++)E(j,S,Y,N,R,D[W]);J.push(Z.deflate(j,P))}let ee,F=1e9;for(W=0;W<J.length;W++)J[W].length<F&&(ee=W,F=J[W].length);return J[ee]}function E(S,T,R,N,j,C){const G=R*N;let J=G+R;if(S[J]=C,J++,C==0)if(N<500)for(var P=0;P<N;P++)S[J+P]=T[G+P];else S.set(new Uint8Array(T.buffer,G,N),J);else if(C==1){for(P=0;P<j;P++)S[J+P]=T[G+P];for(P=j;P<N;P++)S[J+P]=T[G+P]-T[G+P-j]+256&255}else if(R==0){for(P=0;P<j;P++)S[J+P]=T[G+P];if(C==2)for(P=j;P<N;P++)S[J+P]=T[G+P];if(C==3)for(P=j;P<N;P++)S[J+P]=T[G+P]-(T[G+P-j]>>1)+256&255;if(C==4)for(P=j;P<N;P++)S[J+P]=T[G+P]-t(T[G+P-j],0,0)+256&255}else{if(C==2)for(P=0;P<N;P++)S[J+P]=T[G+P]+256-T[G+P-N]&255;if(C==3){for(P=0;P<j;P++)S[J+P]=T[G+P]+256-(T[G+P-N]>>1)&255;for(P=j;P<N;P++)S[J+P]=T[G+P]+256-(T[G+P-N]+T[G+P-j]>>1)&255}if(C==4){for(P=0;P<j;P++)S[J+P]=T[G+P]+256-t(0,T[G+P-N],0)&255;for(P=j;P<N;P++)S[J+P]=T[G+P]+256-t(T[G+P-j],T[G+P-N],T[G+P-j-N])&255}}}function k(S,T){const R=new Uint8Array(S),N=R.slice(0),j=new Uint32Array(N.buffer),C=O(N,T),G=C[0],J=C[1],P=R.length,D=new Uint8Array(P>>2);let Z;if(R.length<2e7)for(var W=0;W<P;W+=4)Z=V(G,ee=R[W]*(1/255),F=R[W+1]*(1/255),Y=R[W+2]*(1/255),re=R[W+3]*(1/255)),D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba;else for(W=0;W<P;W+=4){var ee=R[W]*.00392156862745098,F=R[W+1]*(1/255),Y=R[W+2]*(1/255),re=R[W+3]*(1/255);for(Z=G;Z.left;)Z=q(Z.est,ee,F,Y,re)<=0?Z.left:Z.right;D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba}return{abuf:N.buffer,inds:D,plte:J}}function O(S,T,R){R==null&&(R=1e-4);const N=new Uint32Array(S.buffer),j={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=K(S,j.i0,j.i1),j.est=z(j.bst);const C=[j];for(;C.length<T;){let J=0,P=0;for(var G=0;G<C.length;G++)C[G].est.L>J&&(J=C[G].est.L,P=G);if(J<R)break;const D=C[P],Z=U(S,N,D.i0,D.i1,D.est.e,D.est.eMq255);if(D.i0>=Z||D.i1<=Z){D.est.L=0;continue}const W={i0:D.i0,i1:Z,bst:null,est:null,tdst:0,left:null,right:null};W.bst=K(S,W.i0,W.i1),W.est=z(W.bst);const ee={i0:Z,i1:D.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:D.bst.N-W.bst.N},G=0;G<16;G++)ee.bst.R[G]=D.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)ee.bst.m[G]=D.bst.m[G]-W.bst.m[G];ee.est=z(ee.bst),D.left=W,D.right=ee,C[P]=W,C.push(ee)}for(C.sort(((J,P)=>P.bst.N-J.bst.N)),G=0;G<C.length;G++)C[G].ind=G;return[j,C]}function V(S,T,R,N,j){if(S.left==null)return S.tdst=(function(W,ee,F,Y,re){const ie=ee-W[0],ne=F-W[1],_e=Y-W[2],Ae=re-W[3];return ie*ie+ne*ne+_e*_e+Ae*Ae})(S.est.q,T,R,N,j),S;const C=q(S.est,T,R,N,j);let G=S.left,J=S.right;C>0&&(G=S.right,J=S.left);const P=V(G,T,R,N,j);if(P.tdst<=C*C)return P;const D=V(J,T,R,N,j);return D.tdst<P.tdst?D:P}function q(S,T,R,N,j){const{e:C}=S;return C[0]*T+C[1]*R+C[2]*N+C[3]*j-S.eMq}function U(S,T,R,N,j,C){for(N-=4;R<N;){for(;H(S,R,j)<=C;)R+=4;for(;H(S,N,j)>C;)N-=4;if(R>=N)break;const G=T[R>>2];T[R>>2]=T[N>>2],T[N>>2]=G,R+=4,N-=4}for(;H(S,R,j)>C;)R-=4;return R+4}function H(S,T,R){return S[T]*R[0]+S[T+1]*R[1]+S[T+2]*R[2]+S[T+3]*R[3]}function K(S,T,R){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],C=R-T>>2;for(let G=T;G<R;G+=4){const J=S[G]*.00392156862745098,P=S[G+1]*(1/255),D=S[G+2]*(1/255),Z=S[G+3]*(1/255);j[0]+=J,j[1]+=P,j[2]+=D,j[3]+=Z,N[0]+=J*J,N[1]+=J*P,N[2]+=J*D,N[3]+=J*Z,N[5]+=P*P,N[6]+=P*D,N[7]+=P*Z,N[10]+=D*D,N[11]+=D*Z,N[15]+=Z*Z}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:j,N:C}}function z(S){const{R:T}=S,{m:R}=S,{N}=S,j=R[0],C=R[1],G=R[2],J=R[3],P=N==0?0:1/N,D=[T[0]-j*j*P,T[1]-j*C*P,T[2]-j*G*P,T[3]-j*J*P,T[4]-C*j*P,T[5]-C*C*P,T[6]-C*G*P,T[7]-C*J*P,T[8]-G*j*P,T[9]-G*C*P,T[10]-G*G*P,T[11]-G*J*P,T[12]-J*j*P,T[13]-J*C*P,T[14]-J*G*P,T[15]-J*J*P],Z=D,W=M;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],F=0,Y=0;if(N!=0)for(let ie=0;ie<16&&(ee=W.multVec(Z,ee),Y=Math.sqrt(W.dot(ee,ee)),ee=W.sml(1/Y,ee),!(ie!=0&&Math.abs(Y-F)<1e-9));ie++)F=Y;const re=[j*P,C*P,G*P,J*P];return{Cov:D,q:re,e:ee,L:F,eMq255:W.dot(W.sml(255,re),ee),eMq:W.dot(ee,re),rgba:(Math.round(255*re[3])<<24|Math.round(255*re[2])<<16|Math.round(255*re[1])<<8|Math.round(255*re[0])<<0)>>>0}}var M={multVec:(S,T)=>[S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],S[4]*T[0]+S[5]*T[1]+S[6]*T[2]+S[7]*T[3],S[8]*T[0]+S[9]*T[1]+S[10]*T[2]+S[11]*T[3],S[12]*T[0]+S[13]*T[1]+S[14]*T[2]+S[15]*T[3]],dot:(S,T)=>S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],sml:(S,T)=>[S*T[0],S*T[1],S*T[2],S*T[3]]};Jr.encode=function(T,R,N,j,C,G,J){j==null&&(j=0),J==null&&(J=!1);const P=g(T,R,N,j,[!1,!1,!1,0,J,!1]);return f(P,-1),d(P,R,N,C,G)},Jr.encodeLL=function(T,R,N,j,C,G,J,P){const D={ctype:0+(j==1?0:2)+(C==0?0:4),depth:G,frames:[]},Z=(j+C)*G,W=Z*R;for(let ee=0;ee<T.length;ee++)D.frames.push({rect:{x:0,y:0,width:R,height:N},img:new Uint8Array(T[ee]),blend:0,dispose:1,bpp:Math.ceil(Z/8),bpl:Math.ceil(W/8)});return f(D,0,!0),d(D,R,N,J,P)},Jr.encode.compress=g,Jr.encode.dither=u,Jr.quantize=k,Jr.quantize.getKDtree=O,Jr.quantize.getNearest=V})();const rR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,E,k,O,V=v,q=0,U=0,H=0;function K(S){y.setUint16(U,S,!0),U+=2}function z(S){y.setUint32(U,S,!0),U+=4}function M(S){U+=S}K(19778),z(f),M(4),z(122),z(108),z(t),z(-n>>>0),K(1),K(32),z(3),z(d),z(2835),z(2835),M(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function S(){for(;q<n&&V>0;){for(O=122+q*u,w=0;w<s;)V--,E=c[H++],k=E>>>24,y.setUint32(O+w,E<<8|k),w+=4;q++}H<c.length?(V=v,setTimeout(S,rR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var ir={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},o9={[ir.CHROME]:16384,[ir.FIREFOX]:11180,[ir.DESKTOP_SAFARI]:16384,[ir.IE]:8192,[ir.IOS]:4096,[ir.ETC]:8192};const Y_=typeof window<"u",iR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Tm=Y_&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),l9=(Y_||iR)&&(Tm&&Tm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),sR=(Y_||iR)&&(Tm&&Tm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Q_(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function aR(r){return new Promise(((e,t)=>{const n=new sR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function oR(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function mo(){if(mo.cachedResult!==void 0)return mo.cachedResult;let r=ir.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=ir.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=ir.IOS:/Safari/i.test(e)?r=ir.DESKTOP_SAFARI:/Firefox/i.test(e)?r=ir.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=ir.IE),mo.cachedResult=r,mo.cachedResult}function lR(r,e){const t=mo(),n=o9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function hg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function cR(r,e){const{width:t,height:n}=lR(r.width,r.height),[s,o]=hg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function Uf(){return Uf.cachedResult!==void 0||(Uf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Uf.cachedResult}function Sm(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=cR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return aR(r).then((function(y){try{return g=y,oR(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(Uf()||[ir.DESKTOP_SAFARI,ir.MOBILE_SAFARI].includes(mo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Am(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Jr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>rR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(E){return c(E)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),Q_(w,t,n).then((function(E){try{return u=E,v.call(this)}catch(k){return c(k)}}).bind(this),c)}}}function d(){return o(u)}}))}function Ai(r){r.width=0,r.height=0}function Wl(){return new Promise((function(r,e){let t,n,s,o;return Wl.cachedResult!==void 0?r(Wl.cachedResult):Q_("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Sm(t).then((function(u){try{return n=u[1],Am(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Ai(n),Sm(s).then((function(f){try{return o=f[0],Wl.cachedResult=o.width===1&&o.height===2,r(Wl.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function uR(r){return new Promise(((e,t)=>{const n=new sR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function hR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=hg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Ai(r)),c}function dR(r,e){const{width:t}=r,{height:n}=r,[s,o]=hg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Ai(r),s}function RT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,E,k,O,V,q,U,H,K,z,M,S;function T(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=N,e.onProgress(Math.min(o,100))}function R(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(N,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,T(),Sm(r,e).then((function(N){try{return[,d]=N,T(),f=hR(d,e),T(),new Promise((function(j,C){var G;if(!(G=e.exifOrientation))return uR(r).then((function(P){try{return G=P,J.call(this)}catch(D){return C(D)}}).bind(this),C);function J(){return j(G)}return J.call(this)})).then((function(j){try{return g=j,T(),Wl().then((function(C){try{return y=C?f:dR(f,g),T(),v=e.initialQuality||1,w=e.fileType||r.type,Am(y,w,r.name,r.lastModified,v).then((function(G){try{{let Z=function(){if(c--&&(U>u||U>V)){let ee,F;return ee=S?.95*M.width:M.width,F=S?.95*M.height:M.height,[K,z]=hg(ee,F),z.drawImage(M,0,0,ee,F),v*=w==="image/png"?.85:.95,Am(K,w,r.name,r.lastModified,v).then((function(Y){try{return H=Y,Ai(M),M=K,U=H.size,R(Math.min(99,Math.floor((q-U)/(q-u)*100))),Z}catch(re){return s(re)}}),s)}return[1]},W=function(){return Ai(M),Ai(K),Ai(f),Ai(y),Ai(d),R(100),n(H)};var P=Z,D=W;if(E=G,T(),k=E.size>u,O=E.size>r.size,!k&&!O)return R(100),n(E);var J;return V=r.size,q=E.size,U=q,M=y,S=!e.alwaysKeepResolution&&k,(J=(function(ee){for(;ee;){if(ee.then)return void ee.then(J,s);try{if(ee.pop){if(ee.length)return ee.pop()?W.call(this):ee;ee=Z}else ee=ee.call(this)}catch(F){return s(F)}}}).bind(this))(Z)}}catch(Z){return s(Z)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const c9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Py;function u9(r,e){return new Promise(((t,n)=>{Py||(Py=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(c9));const s=new Worker(Py);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function vn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof l9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return RT(r,s).then((function(w){try{return o=w,v.call(this)}catch(E){return n(E)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return RT(r,s).then((function(E){try{return o=E,g()}catch(k){return n(k)}}),n)}catch(E){return n(E)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",u9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=nR(r,o))}catch{}return t(o)}}))}vn.getDataUrlFromFile=aR,vn.getFilefromDataUrl=Q_,vn.loadImage=oR,vn.drawImageInCanvas=cR,vn.drawFileInCanvas=Sm,vn.canvasToFile=Am,vn.getExifOrientation=uR,vn.handleMaxWidthOrHeight=hR,vn.followExifOrientation=dR,vn.cleanupCanvasMemory=Ai,vn.isAutoOrientationInBrowser=Wl,vn.approximateBelowMaximumCanvasSizeOfBrowser=lR,vn.copyExifWithoutOrientation=nR,vn.getBrowserName=mo,vn.version="2.0.2";const h9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function d9(r){if(!r)return!0;const e=r.toLowerCase();return!h9.some(t=>e.includes(t))}async function f9(r,e){try{const t=qt(dt,"users",r);return await Ur(t,{blockedUsers:F_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function m9(r,e){try{const t=qt(dt,"users",r);return await Ur(t,{blockedUsers:_I(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function g9(r,e){try{const t=qt(dt,"users",r),n=await jo(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function p9({onClose:r,onPostCreated:e}){const{t}=zn(),{currentUser:n}=ai(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,E]=$.useState("none"),[k,O]=$.useState(null),[V,q]=$.useState(null),[U,H]=$.useState(!1),[K,z]=$.useState(!1),[M,S]=$.useState(""),[T,R]=$.useState(""),[N,j]=$.useState(0);$.useEffect(()=>{if(u){const D=My.find(Z=>Z.value===u);D&&g(t(D.labelKey))}},[u,t]);const C=async D=>{const Z=D.target.files[0];if(Z){const W=new FileReader;W.onloadend=()=>q(W.result),W.readAsDataURL(Z),O(Z)}},G=async()=>{if(k){z(!0);try{let D=k;try{D=await vn(k,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const Z=new FileReader;Z.readAsDataURL(D),Z.onloadend=async()=>{const W=Z.result,ee=await HI(W,"en"),F=(ee.plant_name+" "+ee.disease_name).toLowerCase();let Y=null;for(const re of My)if(F.includes(re.value)){Y=re;break}Y?(d(Y.value),g(t(Y.labelKey)),R(`${t("auto_detect")}: ${t(Y.labelKey)}`)):R("Plant detected but not in our list yet."),setTimeout(()=>R(""),3e3),z(!1)}}catch(D){console.error("Auto detect failed",D),S(t("error_diagnosis_failed")),z(!1)}}},J=async D=>{if(D.preventDefault(),!!o.trim()){if(!d9(o)){S(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}H(!0),S(""),j(0);try{let Z=null;if(k)try{console.log("Compressing for Base64 storage...");const ee=await vn(k,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});Z=await new Promise((F,Y)=>{const re=new FileReader;re.readAsDataURL(ee),re.onload=()=>F(re.result),re.onerror=ie=>Y(ie)}),console.log("Base64 string ready, length:",Z.length)}catch(W){console.error("Compression failed:",W),S("Image is too large and could not be compressed."),H(!1);return}await GI(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:Z}),e(),r()}catch(Z){console.error("FULL POST ERROR:",Z),S(Z.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{H(!1)}}},P=My.filter(D=>t(D.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Vo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[M&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:M}),T&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:T}),b.jsxs("form",{onSubmit:J,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:D=>c(D.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(CV,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:D=>{g(D.target.value),v(!0),D.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(SI,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(D=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(D.value),g(t(D.labelKey)),v(!1)},children:t(D.labelKey)},D.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{O(null),q(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:U,children:b.jsx(Vo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?b.jsx(wo,{className:"w-3 h-3 animate-spin"}):b.jsx(KV,{className:"w-3 h-3"}),t(K?"detecting":"auto_detect")]})]}),U&&N>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${N}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(N),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:U,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(CI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:C,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:U||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[U?b.jsx(wo,{className:"w-4 h-4 animate-spin"}):b.jsx(dh,{className:"w-4 h-4"}),U?"...":t("ask_question")]})]})]})]})]})})}function y9({user:r,onClose:e}){const{currentUser:t}=ai(),n=Es(),[s,o]=$.useState(!1),{t:c}=zn(),{addToast:u}=Ko(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const O=r.uid||r.id;if(!O)return;const V=Yu(qt(dt,"users",O),q=>{q.exists()&&f({uid:q.id,...q.data()})},q=>{console.error("User listener error",q)});return()=>V()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&g9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await m9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await f9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(O){console.error(O),u("Action failed","error")}},E=O=>!O?.lastSeen||!O.lastSeen.seconds?!1:Date.now()-O.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const k=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const O={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:O}})}catch(O){console.error(O),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:O=>O.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Vo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${E(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${E(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),E(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(xm,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(xm,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:k,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(bm,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function W_(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(zr,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function _9(){const{t:r}=zn(),{currentUser:e}=ai(),{addToast:t}=Ko();return b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:b.jsxs("button",{onClick:()=>{if(!e){t(r("login_to_post")||"Please login to post.","error");return}setIsModalOpen(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(EV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})})]}),loading?b.jsx(W_,{}):posts.length>0?b.jsx("div",{className:"space-y-6",children:posts.map(n=>b.jsx(n9,{post:n,onViewAnalysis:s=>setViewAnalysisId(s),onUserClick:s=>{setSelectedUser({id:s,name:n.authorName||"Gardener",avatar:n.userAvatar})}},n.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),isModalOpen&&b.jsx(p9,{onClose:()=>setIsModalOpen(!1),onPostCreated:()=>{}}),viewAnalysisId&&b.jsx(AnalysisDetailModal,{analysisId:viewAnalysisId,onClose:()=>setViewAnalysisId(null)}),selectedUser&&b.jsx(y9,{user:selectedUser,onClose:()=>setSelectedUser(null)})]})}const v9="modulepreload",b9=function(r){return"/"+r},CT={},w9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=b9(g),g in CT)return;CT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":v9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((E,k)=>{w.addEventListener("load",E),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function $n(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class jh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const _f={decode:function(r,e){return $n(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function fR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(fR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function NT(r,e,t){const n=fR(r,e||{});return t?.appendChild(n),n}var x9=Object.freeze({__proto__:null,createElement:NT,default:NT});const E9={fetchBlob:function(r,e,t){return $n(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){$n(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Wt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function ho(r,e){const t=Wt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ca(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class T9 extends jh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Wt(!1),this._currentTime=Wt(0),this._duration=Wt(0),this._volume=Wt(this.media.volume),this._muted=Wt(this.media.muted),this._playbackRate=Wt(this.media.playbackRate||1),this._seeking=Wt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return $n(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function S9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function A9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function kT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function mR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function DT(r,e){if(!mR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function OT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function gR(r){const e=r._cleanup;typeof e=="function"&&e()}function I9(r){const e=Wt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=ho((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=ho((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),gR(e)}}}class R9 extends jh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=kT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=kT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=I9(this.scrollContainer);const e=ca((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Wt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,E=v.clientY,k=!1;const O=Date.now(),V=t.getBoundingClientRect(),{left:q,top:U}=V,H=T=>{if(T.defaultPrevented||d.size>1||f&&Date.now()-O<c)return;const R=T.clientX,N=T.clientY,j=R-w,C=N-E;(k||Math.abs(j)>s||Math.abs(C)>s)&&(T.preventDefault(),T.stopPropagation(),k||(u.set({type:"start",x:w-q,y:E-U}),k=!0),u.set({type:"move",x:R-q,y:N-U,deltaX:j,deltaY:C}),w=R,E=N)},K=T=>{if(d.delete(T.pointerId),k){const R=T.clientX,N=T.clientY;u.set({type:"end",x:R-q,y:N-U})}g()},z=T=>{d.delete(T.pointerId),T.relatedTarget&&T.relatedTarget!==document.documentElement||K(T)},M=T=>{k&&(T.stopPropagation(),T.preventDefault())},S=T=>{T.defaultPrevented||d.size>1||k&&T.preventDefault()};document.addEventListener("pointermove",H),document.addEventListener("pointerup",K),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("click",M,{capture:!0}),g=()=>{document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",S),setTimeout((()=>{document.removeEventListener("click",M,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),gR(u)}}})(this.wrapper);const e=ca((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:E,height:k,length:O,options:V,pixelRatio:q}){const U=k/2,H=V.barWidth?V.barWidth*q:1,K=V.barGap?V.barGap*q:V.barWidth?H/2:0,z=H+K||1;return{halfHeight:U,barWidth:H,barGap:K,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*q:0,barIndexScale:O>0?E/z/O:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:E,barIndexScale:k,barSpacing:O,barWidth:V,halfHeight:q,vScale:U,canvasHeight:H,barAlign:K,barMinHeight:z}){const M=E[0]||[],S=E[1]||M,T=M.length,R=[];let N=0,j=0,C=0;for(let G=0;G<=T;G++){const J=Math.round(G*k);if(J>N){const{topHeight:Z,totalHeight:W}=S9({maxTop:j,maxBottom:C,halfHeight:q,vScale:U,barMinHeight:z,barAlign:K}),ee=A9({barAlign:K,halfHeight:q,topHeight:Z,totalHeight:W,canvasHeight:H});R.push({x:N*O,y:ee,width:V,height:W}),N=J,j=0,C=0}const P=Math.abs(M[G]||0),D=Math.abs(S[G]||0);P>j&&(j=P),D>C&&(C=D)}return R})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const E of w)f&&"roundRect"in n?n.roundRect(E.x,E.y,E.width,E.height,f):n.rect(E.x,E.y,E.width,E.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((E,k)=>{const O=E.length,V=O?f/O:0,q=v,U=k===0?-1:1,H=[{x:0,y:q}];let K=0,z=0;for(let M=0;M<=O;M++){const S=Math.round(M*V);if(S>K){const R=q+(Math.round(z*v*y)||1)*U;H.push({x:K,y:R}),K=S,z=0}const T=Math.abs(E[M]||0);T>z&&(z=T)}return H.push({x:K,y:q}),H}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const E=(f=y[w])!==null&&f!==void 0?f:0,k=Math.abs(E);k>v&&(v=k)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});mR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:E,totalWidth:k,options:O}){return DT(Math.min(8e3,E,k),O)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=E=>{if(E<0||E>=w||y[E])return;y[E]=!0;const k=E*g;let O=Math.min(f-k,g);if(O=DT(O,t),O<=0)return;const V=(function({channelData:q,offset:U,clampedWidth:H,totalWidth:K}){return q.map((z=>{const M=Math.floor(U/K*z.length),S=Math.floor((U+H)/K*z.length);return z.slice(M,S)}))})({channelData:e,offset:k,clampedWidth:O,totalWidth:f});this.renderSingleCanvas(V,t,O,s,k,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let E=0;E<w;E++)v(E);return}if(OT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((E=>v(E))),w>1){const E=this.on("scroll",(()=>{const{scrollLeft:k}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),OT({scrollLeft:k,totalWidth:f,numCanvases:w}).forEach((O=>v(O)))}));this.unsubscribeOnScroll.push(E)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(w=Object.getOwnPropertySymbols(g);E<w.length;E++)y.indexOf(w[E])<0&&Object.prototype.propertyIsEnumerable.call(g,w[E])&&(v[w[E]]=g[w[E]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return $n(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const E=Math.ceil(f*g),k=E>y,O=!!(v&&!k);return{scrollWidth:E,isScrollable:k,useParentWidth:O,width:(O?y:E)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $n(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class C9 extends jh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class jy extends jh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $n(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $n(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $n(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const N9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class gh extends T9{static create(e){return new gh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new jy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},N9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const E=(d=u?.currentTime)!==null&&d!==void 0?d:Wt(0),k=(f=u?.duration)!==null&&f!==void 0?f:Wt(0),O=(g=u?.isPlaying)!==null&&g!==void 0?g:Wt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Wt(!1),q=(v=u?.volume)!==null&&v!==void 0?v:Wt(1),U=(w=u?.playbackRate)!==null&&w!==void 0?w:Wt(1),H=Wt(null),K=Wt(null),z=Wt(""),M=Wt(0),S=Wt(0),T=ho((()=>!O.value),[O]),R=ho((()=>H.value!==null),[H]),N=ho((()=>R.value&&k.value>0),[R,k]),j=ho((()=>E.value),[E]),C=ho((()=>k.value>0?E.value/k.value:0),[E,k]);return{state:{currentTime:E,duration:k,isPlaying:O,isPaused:T,isSeeking:V,volume:q,playbackRate:U,audioBuffer:H,peaks:K,url:z,zoom:M,scrollPosition:S,canPlay:R,isReady:N,progress:j,progressPercent:C},actions:{setCurrentTime:G=>{const J=Math.max(0,Math.min(k.value||1/0,G));E.set(J)},setDuration:G=>{k.set(Math.max(0,G))},setPlaying:G=>{O.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const J=Math.max(0,Math.min(1,G));q.set(J)},setPlaybackRate:G=>{const J=Math.max(.1,Math.min(16,G));U.set(J)},setAudioBuffer:G=>{H.set(G),G&&k.set(G.duration)},setPeaks:G=>{K.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{M.set(Math.max(0,G))},setScrollPosition:G=>{S.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new C9;const o=t?void 0:this.getMediaElement();this.renderer=new R9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ca((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ca((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ca((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ca((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ca((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ca((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=_f.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=_f.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return $n(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield E9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof jy&&(u.duration=c)}if(n)this.decodedData=_f.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield _f.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const E=y[w];Math.abs(E)>Math.abs(v)&&(v=E)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return $n(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof jy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return $n(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $n(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}gh.BasePlugin=class extends jh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},gh.dom=x9;const k9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),D9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=gh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const E=Math.floor(w/60),k=Math.floor(w%60);return`${E}:${k<10?"0":""}${k}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(_V,{className:"w-5 h-5 fill-current"}):b.jsx(wV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function O9(){const{chatId:r}=qT(),{currentUser:e}=ai(),{t,i18n:n}=zn(),s=Es(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Ko();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[E,k]=$.useState(null),[O,V]=$.useState(null),[q,U]=$.useState(null),[H,K]=$.useState(!1),[z,M]=$.useState(null),[S,T]=$.useState(0),[R,N]=$.useState(null),[j,C]=$.useState(!1),[G,J]=$.useState(null),P=vr(),[D,Z]=$.useState(P.state?.targetUser||null),[W,ee]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&ee(r)},[r]),$.useEffect(()=>{r==="new"&&D&&e&&(async()=>{try{k(D);const Ee=gm(ps(dt,"chats"),pm("participants","array-contains",e.uid)),Oe=(await A0(Ee)).docs.find(xe=>xe.data().participants.includes(D.uid));Oe?(ee(Oe.id),s(`/messages/${Oe.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,D,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=Yu(qt(dt,"chats",W),Be=>{if(Be.exists()){const Oe=Be.data(),xe=Oe.participants.find(et=>et!==e.uid);if(xe){if(Oe.participantData?.[xe]){const et=Oe.participantData[xe];k(gt=>gt?.id===xe?gt:{...et,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Ee=Yu(ps(dt,"chats",W,"messages"),Be=>{const Oe=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,et)=>(xe.createdAt?.seconds||0)-(et.createdAt?.seconds||0));f(Oe),w(!1),q||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,q,r,s]),$.useEffect(()=>{if(!O)return;const pe=Yu(qt(dt,"users",O),Ee=>{if(Ee.exists()){const Be=Ee.data();k(Oe=>({...Oe,...Be}))}});return()=>pe()},[O]);const F=async(pe,Ee=null,Be=null,Oe="text")=>{C(!0);try{let xe=W;if(!xe&&r==="new"){if(!D)throw new Error("Target user missing");const{startChat:ct}=await w9(async()=>{const{startChat:Fn}=await Promise.resolve().then(()=>ML);return{startChat:Fn}},[]);xe=await ct(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),ee(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let et=null,gt=Oe,Bn=Be;if(Ee||R){let ct=Ee||R.file;if(gt==="image"||R?.type==="image"){gt="image",Bn=Bn||R?.file.name;const Fn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ct=await vn(ct,Fn)}catch(zt){console.warn("Compression failed, using original",zt)}}else R&&(gt=R.type,Bn=R.file.name);if(et=await k9(ct),et.length>95e4)throw new Error("File is too large for database storage even after compression.")}q?(await Ur(qt(dt,"chats",xe,"messages",q),{text:pe,editedAt:Vr()}),U(null)):(await lg(ps(dt,"chats",xe,"messages"),{text:pe||"",type:gt,fileUrl:et,fileName:Bn,senderId:e.uid,createdAt:Vr()}),await Ur(qt(dt,"chats",xe),{lastMessage:gt==="audio"?" Voice Message":gt==="image"?" Photo":pe||" File",updatedAt:Vr()})),y(""),N(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{C(!1)}},Y=async pe=>{pe.preventDefault(),!(!g.trim()&&!R)&&await F(g)},re=async pe=>{if(window.confirm("Delete this message?"))try{await pI(qt(dt,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},ie=n.language==="tr"?tR:K_,ne=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${eR(new Date(Ee),{addSuffix:!0,locale:ie})}`},_e=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Ae=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Pe=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",Oe=Be==="image"?URL.createObjectURL(Ee):null;N({file:Ee,type:Be,previewUrl:Oe})},Ce=pe=>{y(pe.text||""),U(pe.id),N(null),c.current&&(c.current.value="")},Ze=()=>{U(null),y(""),N(null)},st=$.useRef("cancel"),at=$.useRef(null),un=$.useRef(null),Rt=$.useRef(null),[mt,Ct]=$.useState(0);$.useEffect(()=>{let pe;return H?(T(0),pe=setInterval(()=>T(Ee=>Ee+1),1e3)):(T(0),Ct(0)),()=>{clearInterval(pe),Rt.current&&cancelAnimationFrame(Rt.current),at.current&&at.current.close()}},[H]);const rt=()=>{if(!un.current)return;const pe=new Uint8Array(un.current.fftSize);un.current.getByteTimeDomainData(pe);let Ee=0;for(let Oe=0;Oe<pe.length;Oe++)Ee+=Math.abs(pe[Oe]-128);const Be=Ee/pe.length;Ct(Be*10),Rt.current=requestAnimationFrame(rt)},it=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext);await Ee.resume();const Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,at.current=Ee,un.current=Be,rt();const xe=new MediaRecorder(pe),et=[];xe.ondataavailable=gt=>et.push(gt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(gt=>gt.stop()),at.current&&at.current.close(),Rt.current&&cancelAnimationFrame(Rt.current),st.current==="send"){const gt=new Blob(et,{type:"audio/webm"});await F(null,gt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),M(xe),K(!0),st.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},qe=pe=>{!z||z.state==="inactive"||(st.current=pe,z.stop(),K(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Cj,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),E?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:E.photoURL||E.avatar||`https://ui-avatars.com/api/?name=${E.name||"User"}`,alt:E.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:E.name||E.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${_e(E)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:ne(E)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",Oe=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Oe&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(D9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(iT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Ae(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ce(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(OI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>re(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(wm,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Ae(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),q&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:Ze,children:b.jsx(Vo,{className:"w-4 h-4"})})]}),R&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="image"?b.jsx("img",{src:R.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(Qj,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:R.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Vo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:H?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>qe("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(wm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(S*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.max(0,mt-5),Oe=Math.min(1,Be/40),xe=Math.sin(Ee*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Oe*36*xe)}px`,opacity:.5+Oe*.5}},Ee)})})]}),b.jsx("button",{onClick:()=>qe("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(dh,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Pe,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:q,children:b.jsx(iT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:q?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||R?b.jsx("button",{onClick:Y,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(dh,{className:"w-5 h-5"})}):b.jsx("button",{onClick:it,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(mV,{className:"w-5 h-5"})})]})})]})}const M9=[{id:1,name:"Seedling Scout",trName:"rak Filiz",icon:zr,color:"text-green-400 bg-green-400/10 border-green-200"},{id:2,name:"Green Guardian",trName:"Yeil Koruyucu",icon:aV,color:"text-emerald-500 bg-emerald-500/10 border-emerald-200"},{id:3,name:"Bloom Master",trName:"iek Ustas",icon:Xj,color:"text-pink-500 bg-pink-500/10 border-pink-200"},{id:4,name:"Forest Sage",trName:"Orman Bilgesi",icon:Dj,color:"text-purple-600 bg-purple-600/10 border-purple-200"},{id:5,name:"Legend of Leaves",trName:"Efsanevi Bahvan",icon:Kj,color:"text-amber-500 bg-amber-500/10 border-amber-200"}],P9=100,j9=50,V9=100,L9=20;function Vy(r){if(r<=1)return 0;const e=r-1;return e/2*(2*V9+(e-1)*L9)}function U9(r=0,e=0){const t=r*P9+e*j9;let n=1,s=50;for(;n<s&&t>=Vy(n+1);)n++;const o=Vy(n),c=n<s?Vy(n+1):1/0,u=t-o,d=c-o,f=n<s?Math.round(u/d*100):100,g=Math.min(Math.floor((n-1)/10),4),y=M9[g];return{level:n,tier:y,currentLevelXp:u,nextLevelReq:d,totalXP:t,progress:f,isMaxLevel:n>=s}}function z9(){const{currentUser:r,logout:e,refreshUser:t}=ai(),{t:n,i18n:s}=zn(),o=Es(),{userId:c}=qT(),[u,d]=$.useState(!1),[f,g]=$.useState(!0),[y,v]=$.useState(null),[w,E]=$.useState({analysisCount:0,postCount:0}),[k,O]=$.useState(null),[V,q]=$.useState(""),[U,H]=$.useState(""),[K,z]=$.useState(""),[M,S]=$.useState(null),[T,R]=$.useState(!1),N=!c||r&&r.uid===c,j=c||r?.uid;$.useEffect(()=>{j&&C()},[j,r]);const C=async()=>{g(!0);try{const D=qt(dt,"users",j),Z=await jo(D);if(Z.exists()){const W=Z.data();v(W),q(W.displayName||""),H(W.bio||""),z(W.location||""),S(W.photoURL||null);const ee=gm(ps(dt,"analyses"),pm("userId","==",j)),F=gm(ps(dt,"posts"),pm("userId","==",j)),[Y,re]=await Promise.all([A0(ee),A0(F)]),ie=Y.size,ne=re.size;E({analysisCount:ie,postCount:ne}),O(U9(ie,ne))}else console.log("No such profile!")}catch(D){console.error("Error fetching profile:",D)}finally{g(!1)}},G=async()=>{R(!0);try{const D={displayName:V,bio:U,location:K,photoURL:M},Z=qt(dt,"users",r.uid);await Ur(Z,D),await t(),v(W=>({...W,...D})),d(!1)}catch(D){console.error("Error updating profile:",D),alert(n("error_updating_profile")||"Error updating profile")}finally{R(!1)}};if(!j)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(postsLoading&&!targetUser)return b.jsx(W_,{});const J=D=>!D?.lastSeen||!D.lastSeen.seconds?!1:Date.now()-D.lastSeen.seconds*1e3<180*1e3,P=D=>D?.lastSeen?formatDistanceToNow(new Date(D.lastSeen.seconds*1e3),{addSuffix:!0,locale:s.language==="tr"?tr:enUS}):"Offline";return b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:[k&&k.tier&&b.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-900 via-green-800 to-emerald-900 shadow-2xl text-white p-6 animate-fade-in-down border border-green-700/50",children:[b.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),b.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-6",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center bg-white/20 backdrop-blur-md shadow-inner border border-white/10 ${k.tier.color.replace("text-","text-white ")}`,children:(()=>{const D=k.tier.icon||zr;return b.jsx(D,{className:"w-8 h-8 text-white drop-shadow-md"})})()}),b.jsxs("div",{children:[b.jsx("p",{className:"text-green-200 text-xs font-bold uppercase tracking-widest mb-1",children:n("current_level")||"SEVYE"}),b.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white leading-none",children:s.language==="tr"?k.tier.trName:k.tier.name}),b.jsxs("p",{className:"text-sm font-medium text-green-300 mt-1 opacity-90",children:["Level ",k.level]})]})]}),b.jsx("div",{className:"text-right",children:b.jsx("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-green-200 drop-shadow-sm",children:k.level})})]}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-100 mb-2",children:[b.jsxs("span",{children:[k.currentLevelXp," XP"]}),b.jsx("span",{children:k.isMaxLevel?"MAX":`Next: ${k.nextLevelReq} XP`})]}),b.jsx("div",{className:"h-3 bg-black/20 rounded-full overflow-hidden backdrop-blur-sm border border-white/5",children:b.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-300 shadow-[0_0_10px_rgba(74,222,128,0.5)] transition-all duration-1000 ease-out",style:{width:`${k.progress}%`}})}),b.jsxs("p",{className:"mt-3 text-xs text-green-200/80 text-center",children:[n("total_xp")||"Toplam Puan",": ",b.jsx("span",{className:"text-white font-bold",children:k.totalXP})]})]})]}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${N?"group cursor-pointer":""} mt-2`,onClick:()=>N&&fileInputRef.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(N?M:targetUser?.avatar||targetUser?.photoURL)?b.jsx("img",{src:N?M:targetUser?.avatar||targetUser?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${N?V||"Gardener":targetUser?.name||targetUser?.displayName||userPosts.length>0&&userPosts[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!N&&targetUser&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${J(targetUser)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J(targetUser)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),J(targetUser)?"Online":P(targetUser)]}),N&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(bo,{className:"w-8 h-8 text-white"})}),f&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(wo,{className:"animate-spin text-green-600"})})]}),N&&b.jsx("input",{type:"file",ref:fileInputRef,onChange:handleFileChange,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:N?V||n("gardener")||"Bahvan":targetUser?.name||targetUser?.displayName||userPosts.length>0&&userPosts[0].authorName||n("gardener")||"Bahvan"}),N&&b.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),N?b.jsxs("form",{onSubmit:G,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:V,onChange:D=>q(D.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:f,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[f?b.jsx(wo,{className:"animate-spin w-4 h-4"}):b.jsx(Save,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",targetUser?.createdAt?.seconds?new Date(targetUser.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!r){addToast(n("login_to_message")||"Please login to send messages","info"),o("/login");return}const D={uid:targetUser.uid||j,name:targetUser.name||targetUser.displayName||userPosts.length>0&&userPosts[0].authorName||"Gardener",photoURL:targetUser.photoURL||targetUser.avatar||null};o("/messages/new",{state:{targetUser:D}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(MessageCircle,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:userPosts.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:userPosts.reduce((D,Z)=>D+(Z.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(Grid,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:N?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:targetUser?.name||"Kullanc"})||`${targetUser?.name||"Kullanc"} Gnderileri`})]}),postsLoading?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(wo,{className:"w-8 h-8 animate-spin text-gray-300"})}):userPosts.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:userPosts.map(D=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(PostCard,{post:{...D,hideAuthor:N},onViewAnalysis:()=>{}})},D.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(Leaf,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})]})}function B9(){const{t:r}=zn(),{currentUser:e}=ai(),{addToast:t}=Ko();Es(),vr();const[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(null),[f,g]=$.useState(!1),[y,v]=$.useState(null),[w,E]=$.useState(""),[k,O]=$.useState(!1),V=$.useRef(null),q=async U=>{if(!w.trim()&&!V.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}O(!0);try{let H=null,K=null;if(V.current?.files?.[0]){const z=V.current.files[0];H=await new Promise(M=>{const S=new FileReader;S.onload=T=>M(T.target.result),S.readAsDataURL(z)});try{K=await JI(U.mainImage,H,U.result.disease_name)}catch(M){console.error("AI Progress Check Failed:",M)}}await KI(U.id,H,w,K),v(null),E(""),V.current&&(V.current.value=""),t("Durum gncellemesi kaydedildi!","success"),loadAnalyses()}catch(H){console.error("Feedback failed",H),t("Gncelleme kaydedilemedi.","error")}finally{O(!1)}};return o?b.jsx(W_,{}):n.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(zr,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(ei,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(bo,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(vm,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:n.map(U=>{const H=U.nextCheckup?.seconds?new Date>new Date(U.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===U.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":H?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:K=>handleDelete(K,U.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(wm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>toggleExpand(U.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:U.mainImage,alt:U.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),H&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:U.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:U.plantType||U.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:U.result.latin_name})]}):U.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(II,{className:"w-3 h-3"}),U.createdAt?.seconds?new Date(U.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),U.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:U.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(jj,{className:"w-4 h-4"}),b.jsxs("span",{children:[U.treatmentDuration||"1 Hafta"," Plan"]})]}),U.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(I0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(SI,{className:`w-6 h-6 text-gray-300 transition-transform ${u===U.id?"rotate-180":""}`})})]}),u===U.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:U.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(aT,{className:"w-5 h-5 text-green-600"}),U.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),U.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(U.result.is_treatable===!1?U.result.preventive_measures:U.result.treatment_steps)?.map((K,z)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${U.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:z+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:K})]},z))})]}),U.updates&&U.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:U.updates.map((K,z)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${K.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":K.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[K.imageUrl&&b.jsx("img",{src:K.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(K.createdAt?.seconds*1e3).toLocaleDateString()}),K.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${K.aiAnalysis.status==="better"?"bg-green-200 text-green-800":K.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:K.aiAnalysis.status==="better"?"YLEYOR":K.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:K.note}),K.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:K.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:K.aiAnalysis.advice})]})]},z))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[U.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===U.id?null:U.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(bo,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:K=>handleShare(K,U),disabled:U.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${U.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(I0,{className:"w-5 h-5"}),U.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),y===U.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[k&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(wo,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(vm,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:w,onChange:K=>E(K.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:V,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>q(U),disabled:k,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(dh,{className:"w-3 h-3"})]})]})]})]})]},U.id)})}),f&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(qj,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(aT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(bo,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function F9(){const{t:r}=zn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(bo,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function H9(){const{t:r,i18n:e}=zn(),{logout:t,currentUser:n}=ai(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(DI,{className:"w-5 h-5"}):b.jsx(PI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(Zj,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx(zj,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(xm,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(kI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const q9=$.createContext(),$9=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(q9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var MT={},G9="@vercel/analytics",K9="1.6.1",Y9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function pR(){return typeof window<"u"}function yR(){try{const r="production"}catch{}return"production"}function Q9(r="auto"){if(r==="auto"){window.vam=yR();return}window.vam=r}function W9(){return(pR()?window.vam:yR())||"production"}function C0(){return W9()==="development"}function X9(r){return r.scriptSrc?r.scriptSrc:C0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function J9(r={debug:!0}){var e;if(!pR())return;Q9(r.mode),Y9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=X9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=G9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=K9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=C0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},C0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function Z9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function e8(){if(!(typeof process>"u"||typeof MT>"u"))return MT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function t8(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{J9({framework:r.framework||"react",basePath:r.basePath??e8(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&Z9({route:r.route,path:r.path})},[r.route,r.path]),null}function n8(){return b.jsx($9,{children:b.jsxs(XV,{children:[b.jsxs(ek,{children:[b.jsx(Xr,{path:"/login",element:b.jsx(ZV,{})}),b.jsx(Xr,{path:"/register",element:b.jsx(tL,{})}),b.jsxs(Xr,{path:"/",element:b.jsx(JV,{}),children:[b.jsx(Xr,{index:!0,element:b.jsx(VL,{})}),b.jsx(Xr,{path:"scan",element:b.jsx(F9,{})}),b.jsx(Xr,{path:"analyses",element:b.jsx(B9,{})}),b.jsx(Xr,{path:"community",element:b.jsx(_9,{})}),b.jsx(Xr,{path:"chat",element:b.jsx(O9,{})}),b.jsx(Xr,{path:"profile",element:b.jsx(z9,{})}),b.jsx(Xr,{path:"settings",element:b.jsx(H9,{})})]})]}),b.jsx(t8,{})," "]})})}const r8="Plant AI",i8="Welcome to Plant AI",s8="Plant Diagnosis",a8="Community",o8="Profile",l8="Login",c8="Messages",u8="Language",h8="Logout",d8="Dark Mode",f8="Light Mode",m8="My Analyses",g8="Register",p8="Upload Photo",y8="Take Photo",_8="Analyzing...",v8="Diagnosis Results",b8="Treatment",w8="Confidence",x8="Save Changes",E8="Saving...",T8="Display Name",S8="Email",A8="Tap to change avatar",I8="Profile updated successfully!",R8="About Project",C8="Do you know the name of this plant?",N8="e.g., Rose, Tomato, Unknown...",k8="1. Plant Name",D8="2. Capture Photo",O8="Next",M8="I don't know",P8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",j8="Take Close-up Photo",V8="Login to view detailed diagnosis and treatment plan.",L8="Login to View Results",U8="Detailed analysis is available for members only.",z8="AI Powered Plant Doctor",B8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',F8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",H8="Start Diagnosis",q8="Identify",$8="Tell us the plant name or type.",G8="Analyze",K8="Upload photos of the affected area.",Y8="Heal",Q8="Get instant treatment plan.",W8="Welcome, ",X8="Diagnosis failed. Please try again.",J8="Back",Z8="Plant",ez="Tomato",tz="Pepper",nz="Cucumber",rz="Rose",iz="Succulent",sz="Orchid",az="Lemon",oz="Strawberry",lz="Mint",cz="Other",uz="Healthy / No Issue",hz="Yellowing Leaves",dz="Leaf Spots",fz="Wilting",mz="Pests / Bugs",gz="Root/Stem Rot",pz="Mold / Fungus",yz="Unknown / Help Needed",_z="Auto-Detect from Image",vz="Detecting...",bz="Ask Question",wz="Please login to post.",xz="Login Required",Ez="Are you sure you want to delete this post?",Tz="Just now",Sz="Failed to delete post",Az="Failed to post comment",Iz="Failed to update post",Rz="Add a comment...",Cz="Please login to comment.",Nz="No comments yet. Be the first!",kz="Edit Post",Dz="Cancel",Oz="Save",Mz="Gardener",Pz="Community Member",jz="Send Message",Vz="Starting...",Lz="Please login to message users.",Uz="You cannot message yourself.",zz="Failed to start chat.",Bz=" No posts yet",Fz="Be the first to share your garden!",Hz="No results",qz="Like",$z="Comment",Gz="Edit",Kz="Joined",Yz="Unknown Date",Qz="View Profile",Wz="Block User",Xz="Unblock User",Jz="Posts",Zz="Likes",e7="My Posts",t7="{{name}}'s Posts",n7="New Chat",r7="View Analysis Report",i7="Type a message...",s7="POWERED BY GEMINI AI",a7="Heal your plants with",o7="AI Precision",l7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",c7="Instant Analysis",u7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",h7="Smart Interactions",d7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",f7="Verified Treatments",m7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",g7="Your Personal Pocket Botanist",p7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",y7="Open Camera",_7="Select from Gallery",v7="No plant detected. Please ensure the subject is a clear plant or leaf.",b7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",w7="Retry",x7="Camera access denied. Please check your browser permissions.",E7="Last seen",T7="Prevention Tips",S7="This plant may not fully recover, but follow these steps to prevent spread.",A7="Description",I7="Urgency",R7="Spread Risk",C7="New Scan",N7={app_name:r8,welcome:i8,plant_diagnosis:s8,community:a8,profile:o8,login:l8,messages:c8,language:u8,logout:h8,dark_mode:d8,light_mode:f8,analyses:m8,register:g8,upload_photo:p8,take_photo:y8,analyzing:_8,results:v8,treatment:b8,confidence:w8,save_changes:x8,saving:E8,display_name:T8,email:S8,change_avatar:A8,profile_updated:I8,about:R8,what_plant_question:C8,what_plant_placeholder:N8,scan_step_1:k8,scan_step_2:D8,next_step:O8,skip:M8,need_macro_photo:P8,take_macro_photo:j8,login_blur_text:V8,login_to_view:L8,guest_limited:U8,hero_badge:z8,hero_title:B8,hero_desc:F8,start_diagnosis:H8,step_1_title:q8,step_1_desc:$8,step_2_title:G8,step_2_desc:K8,step_3_title:Y8,step_3_desc:Q8,welcome_user:W8,error_diagnosis_failed:X8,back:J8,plant:Z8,plant_tomato:ez,plant_pepper:tz,plant_cucumber:nz,plant_rose:rz,plant_succulent:iz,plant_orchid:sz,plant_lemon:az,plant_strawberry:oz,plant_mint:lz,plant_other:cz,disease_none:uz,disease_yellowing:hz,disease_spots:dz,disease_wilting:fz,disease_bugs:mz,disease_rot:gz,disease_mold:pz,disease_unknown:yz,auto_detect:_z,detecting:vz,ask_question:bz,login_to_post:wz,login_required:xz,confirm_delete_post:Ez,just_now:Tz,failed_delete_post:Sz,failed_post_comment:Az,failed_update_post:Iz,add_comment_placeholder:Rz,login_to_comment:Cz,no_comments_yet:Nz,edit_post:kz,cancel:Dz,save:Oz,gardener:Mz,community_member:Pz,send_message:jz,starting_chat:Vz,login_to_message:Lz,cannot_message_self:Uz,failed_start_chat:zz,no_posts_yet:Bz,be_the_first:Fz,no_results:Hz,like:qz,comment:$z,edit:Gz,delete:"Delete",joined:Kz,unknown_date:Yz,view_profile:Qz,block_user:Wz,unblock_user:Xz,posts:Jz,likes:Zz,my_posts:e7,user_posts_title:t7,new_conversation:n7,view_analysis_report:r7,type_message:i7,ai_powered_v2:s7,hero_title_1:a7,hero_title_highlight:o7,hero_desc_v2:l7,feature_1_title:c7,feature_1_desc:u7,feature_2_title:h7,feature_2_desc:d7,feature_3_title:f7,feature_3_desc:m7,summary_title:g7,summary_desc:p7,open_camera:y7,upload_gallery:_7,error_not_plant:v7,error_server_busy:b7,retry:w7,camera_permission_denied:x7,last_seen:E7,prevention_tips:T7,plant_not_recoverable:S7,description:A7,urgency:I7,spread_risk:R7,new_scan:C7},k7="Bitki AI",D7="Bitki AI'ye Hogeldiniz",O7="Bitki Tehisi",M7="Topluluk",P7="Profil",j7="Giri Yap",V7="Mesajlar",L7="Dil",U7="k Yap",z7="Koyu Tema",B7="Aydnlk Tema",F7="Analizlerim",H7="Kayt Ol",q7="Fotoraf Ykle",$7="Fotoraf ek",G7="Analiz ediliyor...",K7="Bitki",Y7="Domates",Q7="Biber",W7="Salatalk",X7="Patlcan",J7="Patates",Z7="Soan",eB="Sarmsak",tB="Marul",nB="Ispanak",rB="Havu",iB="Fasulye",sB="Msr",aB="Kabak",oB="ilek",lB="Limon",cB="Portakal",uB="Elma",hB="zm",dB="Karpuz",fB="Kavun",mB="Kiraz",gB="eftali",pB="Gl",yB="Orkide",_B="Sukulent",vB="Lale",bB="Ayiei",wB="Papatya",xB="Lavanta",EB="Kakts",TB="Zeytin",SB="am",AB="Palmiye",IB="Nane",RB="Fesleen",CB="Biberiye",NB="Maydanoz",kB="Dier",DB="Salkl / Sorun Yok",OB="Yaprak Sararmas",MB="Yaprak Lekeleri",PB="Solma",jB="Bcek / Haere",VB="Kk/Gvde rmesi",LB="Kf / Mantar",UB="Mildiy",zB="Besin Eksiklii",BB="Bilinmiyor / Yardm Lazm",FB="Fotoraftan Bul",HB="Taranyor...",qB="Bitki Se...",$B="Tehis Sonular",GB="Tedavi",KB="Gven Oran",YB="Deiiklikleri Kaydet",QB="Analizi Kaydet",WB="Kaydedildi",XB="Analiz baaryla kaydedildi!",JB="Bu analiz zaten toplulukla paylald.",ZB="Bu analizi toplulukla paylamak istiyor musunuz?",eF="Baaryla paylald!",tF="Analizlerim",nF="Kaydediliyor...",rF="Grnen sim",iF="E-posta",sF="Fotoraf deitirmek iin dokunun",aF="Profil baaryla gncellendi!",oF="Proje Hakknda",lF="Bu bitkinin adn biliyor musunuz?",cF="rn. Gl, Domates, Bilmiyorum...",uF="1. Bitki Ad",hF="2. Fotoraf ek",dF="Devam Et",fF="Bilmiyorum",mF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",gF="Yakndan ek",pF="Detayl tehis ve tedavi plann grmek iin giri yapn.",yF="Sonucu Grmek in Giri Yap",_F="Detayl analiz sadece yelere zeldir.",vF="Yapay Zeka Destekli Bitki Doktoru",bF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',wF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",xF="Tehise Bala",EF="Tanmla",TF="Bitkinin adn veya trn belirtin.",SF="Analiz Et",AF="Etkilenen blgenin fotorafn ykleyin.",IF="yiletir",RF="Annda tedavi planna kavuun.",CF="Hogeldin, ",NF="Tehis baarsz oldu. Ltfen tekrar deneyin.",kF="Geri",DF="Az nce",OF="Bu gnderiyi silmek istediinize emin misiniz?",MF="Gnderi silinemedi",PF="Yorum gnderilemedi",jF="Gnderi gncellenemedi",VF="Yorum yaz...",LF="Yorum yapmak iin giri yapn.",UF="Henz yorum yok. lk yorumu sen yap!",zF="Gnderiyi Dzenle",BF="ptal",FF="Kaydet",HF="Bahvan",qF="Topluluk yesi",$F="Mesaj Gnder",GF="Balatlyor...",KF="Mesaj gndermek iin giri yapn.",YF="Kendinize mesaj atamazsnz.",QF="Sohbet balatlamad.",WF=" Henz gnderi yok",XF="Baheni paylaan ilk kii ol!",JF="Sonu yok",ZF="Been",eH="Yorum",tH="Dzenle",nH="Ad Soyad",rH="ifre",iH="Toplulua katlmak iin hesap oluturun.",sH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",aH="E-postanz Dorulayn",oH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",lH="E-posta Uygulamasn A",cH="Doruladm, Giri Yap",uH="Zaten hesabnz var m?",hH="Katlma Tarihi",dH="Bilinmiyor",fH="Profili Gr",mH="Kullancy Engelle",gH="Engeli Kaldr",pH="Gnderi",yH="Beeni",_H="Gnderilerim",vH="{{name}} Gnderileri",bH="Yeni Sohbet",wH="Analiz Raporunu Gr",xH="Mesaj yazn...",EH="GEMINI AI DESTEKL",TH="Bitkilerinizi yiletirin",SH="Yapay Zeka Hassasiyeti",AH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",IH="Annda Analiz",RH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",CH="Akll Etkileimler",NH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",kH="Dorulanm Tedaviler",DH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",OH="Kiisel Cep Botanikiniz",MH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",PH="Kameray A",jH="Galeriden Se",VH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",LH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",UH="Tekrar Dene",zH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",BH="Yakn ekim Fotoraf",FH="Bitki AI Dnyor...",HH="Analiz kaydedilemedi:",qH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",$H="Bu cihazda mikrofon bulunamad.",GH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",KH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",YH="Kaydediliyor...",QH="Mesaj dzenleniyor...",WH="Mesajnz dzenleyin...",XH="Tedavi sreci balatld!",JH="Bilgiyi Kaydet",ZH="Tedaviye Bala",eq="Henz Bir Analiz Yok",tq="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",nq="Tedavi & Takip",rq="Kayt",iq="Bu analizi silmek istediinizden emin misiniz?",sq="Gelime Ekle",aq="Paylald",oq="Payla",lq="Toplulukla paylaarak bakalarna yardmc ol!",cq="Soru Sor",uq="Fotoraf",hq="Sesli Mesaj",dq="Son grlme {{days}} gn nce",fq="Son grlme {{hours}} saat nce",mq="Son grlme {{minutes}} dakika nce",gq="Az nce grld",pq="Dzenlendi",yq="Payla",_q="Balanty Kopyala",vq="Balant kopyaland!",bq="Sosyal Medyada Payla",wq="Son grlme",xq="Koruyucu nlemler",Eq="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",Tq="Aklama",Sq="Aciliyet",Aq="Yaylma Riski",Iq="Yeni Tarama",Rq={app_name:k7,welcome:D7,plant_diagnosis:O7,community:M7,profile:P7,login:j7,messages:V7,language:L7,logout:U7,dark_mode:z7,light_mode:B7,analyses:F7,register:H7,upload_photo:q7,take_photo:$7,analyzing:G7,plant:K7,plant_tomato:Y7,plant_pepper:Q7,plant_cucumber:W7,plant_eggplant:X7,plant_potato:J7,plant_onion:Z7,plant_garlic:eB,plant_lettuce:tB,plant_spinach:nB,plant_carrot:rB,plant_bean:iB,plant_corn:sB,plant_zucchini:aB,plant_strawberry:oB,plant_lemon:lB,plant_orange:cB,plant_apple:uB,plant_grape:hB,plant_watermelon:dB,plant_melon:fB,plant_cherry:mB,plant_peach:gB,plant_rose:pB,plant_orchid:yB,plant_succulent:_B,plant_tulip:vB,plant_sunflower:bB,plant_daisy:wB,plant_lavender:xB,plant_cactus:EB,plant_olive:TB,plant_pine:SB,plant_palm:AB,plant_mint:IB,plant_basil:RB,plant_rosemary:CB,plant_parsley:NB,plant_other:kB,disease_none:DB,disease_yellowing:OB,disease_spots:MB,disease_wilting:PB,disease_bugs:jB,disease_rot:VB,disease_mold:LB,disease_mildew:UB,disease_nutrient:zB,disease_unknown:BB,auto_detect:FB,detecting:HB,select_plant:qB,results:$B,treatment:GB,confidence:KB,save_changes:YB,save_analysis:QB,saved:WB,save_success:XB,already_shared:JB,confirm_share:ZB,share_success:eF,my_analyses:tF,saving:nF,display_name:rF,email:iF,change_avatar:sF,profile_updated:aF,about:oF,what_plant_question:lF,what_plant_placeholder:cF,scan_step_1:uF,scan_step_2:hF,next_step:dF,skip:fF,need_macro_photo:mF,take_macro_photo:gF,login_blur_text:pF,login_to_view:yF,guest_limited:_F,hero_badge:vF,hero_title:bF,hero_desc:wF,start_diagnosis:xF,step_1_title:EF,step_1_desc:TF,step_2_title:SF,step_2_desc:AF,step_3_title:IF,step_3_desc:RF,welcome_user:CF,error_diagnosis_failed:NF,back:kF,just_now:DF,confirm_delete_post:OF,failed_delete_post:MF,failed_post_comment:PF,failed_update_post:jF,add_comment_placeholder:VF,login_to_comment:LF,no_comments_yet:UF,edit_post:zF,cancel:BF,save:FF,gardener:HF,community_member:qF,send_message:$F,starting_chat:GF,login_to_message:KF,cannot_message_self:YF,failed_start_chat:QF,no_posts_yet:WF,be_the_first:XF,no_results:JF,like:ZF,comment:eH,edit:tH,delete:"Sil",full_name:nH,password:rH,create_account_desc:iH,verification_email_sent:sH,verify_email_title:aH,verify_email_desc:oH,open_email_app:lH,i_verified_it:cH,already_have_account:uH,joined:hH,unknown_date:dH,view_profile:fH,block_user:mH,unblock_user:gH,posts:pH,likes:yH,my_posts:_H,user_posts_title:vH,new_conversation:bH,view_analysis_report:wH,type_message:xH,ai_powered_v2:EH,hero_title_1:TH,hero_title_highlight:SH,hero_desc_v2:AH,feature_1_title:IH,feature_1_desc:RH,feature_2_title:CH,feature_2_desc:NH,feature_3_title:kH,feature_3_desc:DH,summary_title:OH,summary_desc:MH,open_camera:PH,upload_gallery:jH,error_not_plant:VH,error_server_busy:LH,retry:UH,camera_permission_denied:zH,close_up_photo:BH,ai_thinking:FH,save_fail:HH,mic_access_denied:qH,mic_not_found:$H,mic_unavailable:GH,mic_generic_error:KH,recording:YH,editing_message:QH,edit_message_placeholder:WH,treatment_started:XH,save_info:JH,start_treatment:ZH,no_analyses_title:eq,no_analyses_desc:tq,treatment_updates:nq,records:rq,confirm_delete:iq,add_update:sq,shared:aq,share:oq,share_help_others:lq,ask_question:cq,photo:uq,voice_message:hq,last_seen_day:dq,last_seen_hour:fq,last_seen_min:mq,last_seen_just_now:gq,edited:pq,share_title:yq,copy_link:_q,link_copied:vq,social_share:bq,last_seen:wq,prevention_tips:xq,plant_not_recoverable:Eq,description:Tq,urgency:Sq,spread_risk:Aq,new_scan:Iq};Qn.use(u4).init({resources:{en:{translation:N7},tr:{translation:Rq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});sN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(VI,{children:b.jsx(Ek,{children:b.jsx(wj,{children:b.jsx(n8,{})})})})}));
