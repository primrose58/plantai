(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}})();function yx(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var md={exports:{}},Si={};var Ep;function vx(){if(Ep)return Si;Ep=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:a,type:s,key:u,ref:l!==void 0?l:null,props:o}}return Si.Fragment=t,Si.jsx=r,Si.jsxs=r,Si}var Np;function bx(){return Np||(Np=1,md.exports=vx()),md.exports}var g=bx(),pd={exports:{}},Ae={};var jp;function wx(){if(jp)return Ae;jp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function T(z,I,J){this.props=z,this.context=I,this.refs=A,this.updater=J||x}T.prototype.isReactComponent={},T.prototype.setState=function(z,I){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,I,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function D(){}D.prototype=T.prototype;function M(z,I,J){this.props=z,this.context=I,this.refs=A,this.updater=J||x}var $=M.prototype=new D;$.constructor=M,S($,T.prototype),$.isPureReactComponent=!0;var K=Array.isArray;function R(){}var L={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function E(z,I,J){var ee=J.ref;return{$$typeof:a,type:z,key:I,ref:ee!==void 0?ee:null,props:J}}function U(z,I){return E(z.type,I,z.props)}function P(z){return typeof z=="object"&&z!==null&&z.$$typeof===a}function H(z){var I={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(J){return I[J]})}var F=/\/+/g;function B(z,I){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):I.toString(36)}function X(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(R,R):(z.status="pending",z.then(function(I){z.status==="pending"&&(z.status="fulfilled",z.value=I)},function(I){z.status==="pending"&&(z.status="rejected",z.reason=I)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function j(z,I,J,ee,Z){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(oe){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case a:case t:pe=!0;break;case p:return pe=z._init,j(pe(z._payload),I,J,ee,Z)}}if(pe)return Z=Z(z),pe=ee===""?"."+B(z,0):ee,K(Z)?(J="",pe!=null&&(J=pe.replace(F,"$&/")+"/"),j(Z,I,J,"",function(he){return he})):Z!=null&&(P(Z)&&(Z=U(Z,J+(Z.key==null||z&&z.key===Z.key?"":(""+Z.key).replace(F,"$&/")+"/")+pe)),I.push(Z)),1;pe=0;var Ee=ee===""?".":ee+":";if(K(z))for(var ce=0;ce<z.length;ce++)ee=z[ce],oe=Ee+B(ee,ce),pe+=j(ee,I,J,oe,Z);else if(ce=w(z),typeof ce=="function")for(z=ce.call(z),ce=0;!(ee=z.next()).done;)ee=ee.value,oe=Ee+B(ee,ce++),pe+=j(ee,I,J,oe,Z);else if(oe==="object"){if(typeof z.then=="function")return j(X(z),I,J,ee,Z);throw I=String(z),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return pe}function k(z,I,J){if(z==null)return z;var ee=[],Z=0;return j(z,ee,"","",function(oe){return I.call(J,oe,Z++)}),ee}function W(z){if(z._status===-1){var I=z._result;I=I(),I.then(function(J){(z._status===0||z._status===-1)&&(z._status=1,z._result=J)},function(J){(z._status===0||z._status===-1)&&(z._status=2,z._result=J)}),z._status===-1&&(z._status=0,z._result=I)}if(z._status===1)return z._result.default;throw z._result}var G=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Y={map:k,forEach:function(z,I,J){k(z,function(){I.apply(this,arguments)},J)},count:function(z){var I=0;return k(z,function(){I++}),I},toArray:function(z){return k(z,function(I){return I})||[]},only:function(z){if(!P(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ae.Activity=v,Ae.Children=Y,Ae.Component=T,Ae.Fragment=r,Ae.Profiler=l,Ae.PureComponent=M,Ae.StrictMode=s,Ae.Suspense=h,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(z){return L.H.useMemoCache(z)}},Ae.cache=function(z){return function(){return z.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(z,I,J){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ee=S({},z.props),Z=z.key;if(I!=null)for(oe in I.key!==void 0&&(Z=""+I.key),I)!N.call(I,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&I.ref===void 0||(ee[oe]=I[oe]);var oe=arguments.length-2;if(oe===1)ee.children=J;else if(1<oe){for(var pe=Array(oe),Ee=0;Ee<oe;Ee++)pe[Ee]=arguments[Ee+2];ee.children=pe}return E(z.type,Z,ee)},Ae.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Ae.createElement=function(z,I,J){var ee,Z={},oe=null;if(I!=null)for(ee in I.key!==void 0&&(oe=""+I.key),I)N.call(I,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(Z[ee]=I[ee]);var pe=arguments.length-2;if(pe===1)Z.children=J;else if(1<pe){for(var Ee=Array(pe),ce=0;ce<pe;ce++)Ee[ce]=arguments[ce+2];Z.children=Ee}if(z&&z.defaultProps)for(ee in pe=z.defaultProps,pe)Z[ee]===void 0&&(Z[ee]=pe[ee]);return E(z,oe,Z)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(z){return{$$typeof:d,render:z}},Ae.isValidElement=P,Ae.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:W}},Ae.memo=function(z,I){return{$$typeof:m,type:z,compare:I===void 0?null:I}},Ae.startTransition=function(z){var I=L.T,J={};L.T=J;try{var ee=z(),Z=L.S;Z!==null&&Z(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(R,G)}catch(oe){G(oe)}finally{I!==null&&J.types!==null&&(I.types=J.types),L.T=I}},Ae.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ae.use=function(z){return L.H.use(z)},Ae.useActionState=function(z,I,J){return L.H.useActionState(z,I,J)},Ae.useCallback=function(z,I){return L.H.useCallback(z,I)},Ae.useContext=function(z){return L.H.useContext(z)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(z,I){return L.H.useDeferredValue(z,I)},Ae.useEffect=function(z,I){return L.H.useEffect(z,I)},Ae.useEffectEvent=function(z){return L.H.useEffectEvent(z)},Ae.useId=function(){return L.H.useId()},Ae.useImperativeHandle=function(z,I,J){return L.H.useImperativeHandle(z,I,J)},Ae.useInsertionEffect=function(z,I){return L.H.useInsertionEffect(z,I)},Ae.useLayoutEffect=function(z,I){return L.H.useLayoutEffect(z,I)},Ae.useMemo=function(z,I){return L.H.useMemo(z,I)},Ae.useOptimistic=function(z,I){return L.H.useOptimistic(z,I)},Ae.useReducer=function(z,I,J){return L.H.useReducer(z,I,J)},Ae.useRef=function(z){return L.H.useRef(z)},Ae.useState=function(z){return L.H.useState(z)},Ae.useSyncExternalStore=function(z,I,J){return L.H.useSyncExternalStore(z,I,J)},Ae.useTransition=function(){return L.H.useTransition()},Ae.version="19.2.3",Ae}var Ap;function Go(){return Ap||(Ap=1,pd.exports=wx()),pd.exports}var O=Go();const xx=yx(O);var yd={exports:{}},ki={},vd={exports:{}},bd={};var Tp;function _x(){return Tp||(Tp=1,(function(a){function t(j,k){var W=j.length;j.push(k);e:for(;0<W;){var G=W-1>>>1,Y=j[G];if(0<l(Y,k))j[G]=k,j[W]=Y,W=G;else break e}}function r(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var k=j[0],W=j.pop();if(W!==k){j[0]=W;e:for(var G=0,Y=j.length,z=Y>>>1;G<z;){var I=2*(G+1)-1,J=j[I],ee=I+1,Z=j[ee];if(0>l(J,W))ee<Y&&0>l(Z,J)?(j[G]=Z,j[ee]=W,G=ee):(j[G]=J,j[I]=W,G=I);else if(ee<Y&&0>l(Z,W))j[G]=Z,j[ee]=W,G=ee;else break e}}return k}function l(j,k){var W=j.sortIndex-k.sortIndex;return W!==0?W:j.id-k.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();a.unstable_now=function(){return u.now()-d}}var h=[],m=[],p=1,v=null,b=3,w=!1,x=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function $(j){for(var k=r(m);k!==null;){if(k.callback===null)s(m);else if(k.startTime<=j)s(m),k.sortIndex=k.expirationTime,t(h,k);else break;k=r(m)}}function K(j){if(S=!1,$(j),!x)if(r(h)!==null)x=!0,R||(R=!0,H());else{var k=r(m);k!==null&&X(K,k.startTime-j)}}var R=!1,L=-1,N=5,E=-1;function U(){return A?!0:!(a.unstable_now()-E<N)}function P(){if(A=!1,R){var j=a.unstable_now();E=j;var k=!0;try{e:{x=!1,S&&(S=!1,D(L),L=-1),w=!0;var W=b;try{t:{for($(j),v=r(h);v!==null&&!(v.expirationTime>j&&U());){var G=v.callback;if(typeof G=="function"){v.callback=null,b=v.priorityLevel;var Y=G(v.expirationTime<=j);if(j=a.unstable_now(),typeof Y=="function"){v.callback=Y,$(j),k=!0;break t}v===r(h)&&s(h),$(j)}else s(h);v=r(h)}if(v!==null)k=!0;else{var z=r(m);z!==null&&X(K,z.startTime-j),k=!1}}break e}finally{v=null,b=W,w=!1}k=void 0}}finally{k?H():R=!1}}}var H;if(typeof M=="function")H=function(){M(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=P,H=function(){B.postMessage(null)}}else H=function(){T(P,0)};function X(j,k){L=T(function(){j(a.unstable_now())},k)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(j){j.callback=null},a.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(j){switch(b){case 1:case 2:case 3:var k=3;break;default:k=b}var W=b;b=k;try{return j()}finally{b=W}},a.unstable_requestPaint=function(){A=!0},a.unstable_runWithPriority=function(j,k){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var W=b;b=j;try{return k()}finally{b=W}},a.unstable_scheduleCallback=function(j,k,W){var G=a.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?G+W:G):W=G,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=W+Y,j={id:p++,callback:k,priorityLevel:j,startTime:W,expirationTime:Y,sortIndex:-1},W>G?(j.sortIndex=W,t(m,j),r(h)===null&&j===r(m)&&(S?(D(L),L=-1):S=!0,X(K,W-G))):(j.sortIndex=Y,t(h,j),x||w||(x=!0,R||(R=!0,H()))),j},a.unstable_shouldYield=U,a.unstable_wrapCallback=function(j){var k=b;return function(){var W=b;b=k;try{return j.apply(this,arguments)}finally{b=W}}}})(bd)),bd}var Cp;function Sx(){return Cp||(Cp=1,vd.exports=_x()),vd.exports}var wd={exports:{}},$t={};var Rp;function kx(){if(Rp)return $t;Rp=1;var a=Go();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(h,m,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:m,implementation:p}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(h,m,null,p)},$t.flushSync=function(h){var m=u.T,p=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=m,s.p=p,s.d.f()}},$t.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},$t.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},$t.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,v=d(p,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):p==="script"&&s.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$t.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=d(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},$t.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,v=d(p,m.crossOrigin);s.d.L(h,p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$t.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=d(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},$t.requestFormReset=function(h){s.d.r(h)},$t.unstable_batchedUpdates=function(h,m){return h(m)},$t.useFormState=function(h,m,p){return u.H.useFormState(h,m,p)},$t.useFormStatus=function(){return u.H.useHostTransitionStatus()},$t.version="19.2.3",$t}var Op;function Ex(){if(Op)return wd.exports;Op=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),wd.exports=kx(),wd.exports}var Mp;function Nx(){if(Mp)return ki;Mp=1;var a=Sx(),t=Go(),r=Ex();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function u(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(s(188))}function m(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,c=n;;){var f=i.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===i)return h(f),e;if(y===c)return h(f),n;y=y.sibling}throw Error(s(188))}if(i.return!==c.return)i=f,c=y;else{for(var _=!1,C=f.child;C;){if(C===i){_=!0,i=f,c=y;break}if(C===c){_=!0,c=f,i=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===i){_=!0,i=y,c=f;break}if(C===c){_=!0,c=y,i=f;break}C=C.sibling}if(!_)throw Error(s(189))}}if(i.alternate!==c)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var F=Symbol.for("react.client.reference");function B(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===F?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case T:return"Profiler";case A:return"StrictMode";case K:return"Suspense";case R:return"SuspenseList";case E:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case M:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:B(e.type)||"Memo";case N:n=e._payload,e=e._init;try{return B(e(n))}catch{}}return null}var X=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},G=[],Y=-1;function z(e){return{current:e}}function I(e){0>Y||(e.current=G[Y],G[Y]=null,Y--)}function J(e,n){Y++,G[Y]=e.current,e.current=n}var ee=z(null),Z=z(null),oe=z(null),pe=z(null);function Ee(e,n){switch(J(oe,n),J(Z,e),J(ee,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ym(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ym(n),e=Wm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ee),J(ee,e)}function ce(){I(ee),I(Z),I(oe)}function he(e){e.memoizedState!==null&&J(pe,e);var n=ee.current,i=Wm(n,e.type);n!==i&&(J(Z,e),J(ee,i))}function Re(e){Z.current===e&&(I(ee),I(Z)),pe.current===e&&(I(pe),bi._currentValue=W)}var ze,Te;function Ke(e){if(ze===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);ze=n&&n[1]||"",Te=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+e+Te}var He=!1;function tt(e,n){if(!e||He)return"";He=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var ae=re}Reflect.construct(e,[],le)}else{try{le.call()}catch(re){ae=re}e.call(le.prototype)}}else{try{throw Error()}catch(re){ae=re}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&ae&&typeof re.stack=="string")return[re.stack,ae.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var q=_.split(`
`),ne=C.split(`
`);for(f=c=0;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===q.length||f===ne.length)for(c=q.length-1,f=ne.length-1;1<=c&&0<=f&&q[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(q[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||q[c]!==ne[f]){var se=`
`+q[c].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=c&&0<=f);break}}}finally{He=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ke(i):""}function Fe(e,n){switch(e.tag){case 26:case 27:case 5:return Ke(e.type);case 16:return Ke("Lazy");case 13:return e.child!==n&&n!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return tt(e.type,!1);case 11:return tt(e.type.render,!1);case 1:return tt(e.type,!0);case 31:return Ke("Activity");default:return""}}function Ge(e){try{var n="",i=null;do n+=Fe(e,i),i=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var rt=Object.prototype.hasOwnProperty,de=a.unstable_scheduleCallback,ge=a.unstable_cancelCallback,je=a.unstable_shouldYield,ve=a.unstable_requestPaint,fe=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,st=a.unstable_ImmediatePriority,vn=a.unstable_UserBlockingPriority,Pe=a.unstable_NormalPriority,tn=a.unstable_LowPriority,yt=a.unstable_IdlePriority,nn=a.log,Kt=a.unstable_setDisableYieldValue,Bt=null,it=null;function Lt(e){if(typeof nn=="function"&&Kt(e),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Bt,e)}catch{}}var At=Math.clz32?Math.clz32:tl,ac=Math.log,Os=Math.LN2;function tl(e){return e>>>=0,e===0?32:31-(ac(e)/Os|0)|0}var Gn=256,Ar=262144,an=4194304;function zt(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function On(e,n,i){var c=e.pendingLanes;if(c===0)return 0;var f=0,y=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var C=c&134217727;return C!==0?(c=C&~y,c!==0?f=zt(c):(_&=C,_!==0?f=zt(_):i||(i=C&~e,i!==0&&(f=zt(i))))):(C=c&~y,C!==0?f=zt(C):_!==0?f=zt(_):i||(i=c&~e,i!==0&&(f=zt(i)))),f===0?0:n!==0&&n!==f&&(n&y)===0&&(y=f&-f,i=n&-n,y>=i||y===32&&(i&4194048)!==0)?n:f}function Mn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function nl(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kn(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function Dn(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Ms(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rb(e,n,i,c,f,y){var _=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,q=e.expirationTimes,ne=e.hiddenUpdates;for(i=_&~i;0<i;){var se=31-At(i),le=1<<se;C[se]=0,q[se]=-1;var ae=ne[se];if(ae!==null)for(ne[se]=null,se=0;se<ae.length;se++){var re=ae[se];re!==null&&(re.lane&=-536870913)}i&=~le}c!==0&&Th(e,c,0),y!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=y&~(_&~n))}function Th(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-At(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|i&261930}function Ch(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var c=31-At(i),f=1<<c;f&n|e[c]&n&&(e[c]|=n),i&=~f}}function Rh(e,n){var i=n&-n;return i=(i&42)!==0?1:rc(i),(i&(e.suspendedLanes|n))!==0?0:i}function rc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Oh(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:vp(e.type))}function Mh(e,n){var i=k.p;try{return k.p=e,n()}finally{k.p=i}}var ka=Math.random().toString(36).slice(2),Tt="__reactFiber$"+ka,Ft="__reactProps$"+ka,Tr="__reactContainer$"+ka,ic="__reactEvents$"+ka,sb="__reactListeners$"+ka,ib="__reactHandles$"+ka,Dh="__reactResources$"+ka,Ds="__reactMarker$"+ka;function lc(e){delete e[Tt],delete e[Ft],delete e[ic],delete e[sb],delete e[ib]}function Cr(e){var n=e[Tt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Tr]||i[Tt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=np(e);e!==null;){if(i=e[Tt])return i;e=np(e)}return n}e=i,i=e.parentNode}return null}function Rr(e){if(e=e[Tt]||e[Tr]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Us(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Or(e){var n=e[Dh];return n||(n=e[Dh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Nt(e){e[Ds]=!0}var Uh=new Set,Lh={};function er(e,n){Mr(e,n),Mr(e+"Capture",n)}function Mr(e,n){for(Lh[e]=n,e=0;e<n.length;e++)Uh.add(n[e])}var lb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zh={},$h={};function ob(e){return rt.call($h,e)?!0:rt.call(zh,e)?!1:lb.test(e)?$h[e]=!0:(zh[e]=!0,!1)}function al(e,n,i){if(ob(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function rl(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function ta(e,n,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+c)}}function bn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ph(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function cb(e,n,i){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,y=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){i=""+_,y.call(this,_)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(_){i=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function oc(e){if(!e._valueTracker){var n=Ph(e)?"checked":"value";e._valueTracker=cb(e,n,""+e[n])}}function Bh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return e&&(c=Ph(e)?e.checked?"true":"false":e.value),e=c,e!==i?(n.setValue(e),!0):!1}function sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ub=/[\n"\\]/g;function wn(e){return e.replace(ub,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function cc(e,n,i,c,f,y,_,C){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+bn(n)):e.value!==""+bn(n)&&(e.value=""+bn(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?uc(e,_,bn(n)):i!=null?uc(e,_,bn(i)):c!=null&&e.removeAttribute("value"),f==null&&y!=null&&(e.defaultChecked=!!y),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+bn(C):e.removeAttribute("name")}function Ih(e,n,i,c,f,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),n!=null||i!=null){if(!(y!=="submit"&&y!=="reset"||n!=null)){oc(e);return}i=i!=null?""+bn(i):"",n=n!=null?""+bn(n):i,C||n===e.value||(e.value=n),e.defaultValue=n}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=C?e.checked:!!c,e.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),oc(e)}function uc(e,n,i){n==="number"&&sl(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Dr(e,n,i,c){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&c&&(e[i].defaultSelected=!0)}else{for(i=""+bn(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Hh(e,n,i){if(n!=null&&(n=""+bn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+bn(i):""}function qh(e,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(s(92));if(X(c)){if(1<c.length)throw Error(s(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=bn(n),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c),oc(e)}function Ur(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var hb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gh(e,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,i):typeof i!="number"||i===0||hb.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Kh(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in n)c=n[f],n.hasOwnProperty(f)&&i[f]!==c&&Gh(e,f,c)}else for(var y in n)n.hasOwnProperty(y)&&Gh(e,y,n[y])}function dc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(e){return gb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function na(){}var hc=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lr=null,zr=null;function Fh(e){var n=Rr(e);if(n&&(e=n.stateNode)){var i=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if(cc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+wn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==e&&c.form===e.form){var f=c[Ft]||null;if(!f)throw Error(s(90));cc(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===e.form&&Bh(c)}break e;case"textarea":Hh(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Dr(e,!!i.multiple,n,!1)}}}var gc=!1;function Vh(e,n,i){if(gc)return e(n,i);gc=!0;try{var c=e(n);return c}finally{if(gc=!1,(Lr!==null||zr!==null)&&(Vl(),Lr&&(n=Lr,e=zr,zr=Lr=null,Fh(n),e)))for(n=0;n<e.length;n++)Fh(e[n])}}function Ls(e,n){var i=e.stateNode;if(i===null)return null;var c=i[Ft]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mc=!1;if(aa)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){mc=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{mc=!1}var Ea=null,pc=null,ll=null;function Yh(){if(ll)return ll;var e,n=pc,i=n.length,c,f="value"in Ea?Ea.value:Ea.textContent,y=f.length;for(e=0;e<i&&n[e]===f[e];e++);var _=i-e;for(c=1;c<=_&&n[i-c]===f[y-c];c++);return ll=f.slice(e,1<c?1-c:void 0)}function ol(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function cl(){return!0}function Wh(){return!1}function Vt(e){function n(i,c,f,y,_){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?cl:Wh,this.isPropagationStopped=Wh,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),n}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=Vt(tr),$s=v({},tr,{view:0,detail:0}),mb=Vt($s),yc,vc,Ps,dl=v({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(yc=e.screenX-Ps.screenX,vc=e.screenY-Ps.screenY):vc=yc=0,Ps=e),yc)},movementY:function(e){return"movementY"in e?e.movementY:vc}}),Xh=Vt(dl),pb=v({},dl,{dataTransfer:0}),yb=Vt(pb),vb=v({},$s,{relatedTarget:0}),bc=Vt(vb),bb=v({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=Vt(bb),xb=v({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_b=Vt(xb),Sb=v({},tr,{data:0}),Qh=Vt(Sb),kb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Nb[e])?!!n[e]:!1}function wc(){return jb}var Ab=v({},$s,{key:function(e){if(e.key){var n=kb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tb=Vt(Ab),Cb=v({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jh=Vt(Cb),Rb=v({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),Ob=Vt(Rb),Mb=v({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Db=Vt(Mb),Ub=v({},dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lb=Vt(Ub),zb=v({},tr,{newState:0,oldState:0}),$b=Vt(zb),Pb=[9,13,27,32],xc=aa&&"CompositionEvent"in window,Bs=null;aa&&"documentMode"in document&&(Bs=document.documentMode);var Bb=aa&&"TextEvent"in window&&!Bs,Zh=aa&&(!xc||Bs&&8<Bs&&11>=Bs),ef=" ",tf=!1;function nf(e,n){switch(e){case"keyup":return Pb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function af(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function Ib(e,n){switch(e){case"compositionend":return af(n);case"keypress":return n.which!==32?null:(tf=!0,ef);case"textInput":return e=n.data,e===ef&&tf?null:e;default:return null}}function Hb(e,n){if($r)return e==="compositionend"||!xc&&nf(e,n)?(e=Yh(),ll=pc=Ea=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Zh&&n.locale!=="ko"?null:n.data;default:return null}}var qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!qb[e.type]:n==="textarea"}function sf(e,n,i,c){Lr?zr?zr.push(c):zr=[c]:Lr=c,n=eo(n,"onChange"),0<n.length&&(i=new ul("onChange","change",null,i,c),e.push({event:i,listeners:n}))}var Is=null,Hs=null;function Gb(e){Hm(e,0)}function hl(e){var n=Us(e);if(Bh(n))return e}function lf(e,n){if(e==="change")return n}var of=!1;if(aa){var _c;if(aa){var Sc="oninput"in document;if(!Sc){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),Sc=typeof cf.oninput=="function"}_c=Sc}else _c=!1;of=_c&&(!document.documentMode||9<document.documentMode)}function uf(){Is&&(Is.detachEvent("onpropertychange",df),Hs=Is=null)}function df(e){if(e.propertyName==="value"&&hl(Hs)){var n=[];sf(n,Hs,e,fc(e)),Vh(Gb,n)}}function Kb(e,n,i){e==="focusin"?(uf(),Is=n,Hs=i,Is.attachEvent("onpropertychange",df)):e==="focusout"&&uf()}function Fb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(Hs)}function Vb(e,n){if(e==="click")return hl(n)}function Yb(e,n){if(e==="input"||e==="change")return hl(n)}function Wb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var rn=typeof Object.is=="function"?Object.is:Wb;function qs(e,n){if(rn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!rt.call(n,f)||!rn(e[f],n[f]))return!1}return!0}function hf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ff(e,n){var i=hf(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=n&&c>=n)return{node:i,offset:n-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hf(i)}}function gf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?gf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function mf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=sl(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=sl(e.document)}return n}function kc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Xb=aa&&"documentMode"in document&&11>=document.documentMode,Pr=null,Ec=null,Gs=null,Nc=!1;function pf(e,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Nc||Pr==null||Pr!==sl(c)||(c=Pr,"selectionStart"in c&&kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Gs&&qs(Gs,c)||(Gs=c,c=eo(Ec,"onSelect"),0<c.length&&(n=new ul("onSelect","select",null,n,i),e.push({event:n,listeners:c}),n.target=Pr)))}function nr(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Br={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},jc={},yf={};aa&&(yf=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function ar(e){if(jc[e])return jc[e];if(!Br[e])return e;var n=Br[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in yf)return jc[e]=n[i];return e}var vf=ar("animationend"),bf=ar("animationiteration"),wf=ar("animationstart"),Qb=ar("transitionrun"),Jb=ar("transitionstart"),Zb=ar("transitioncancel"),xf=ar("transitionend"),_f=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function Un(e,n){_f.set(e,n),er(n,[e])}var fl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xn=[],Ir=0,Tc=0;function gl(){for(var e=Ir,n=Tc=Ir=0;n<e;){var i=xn[n];xn[n++]=null;var c=xn[n];xn[n++]=null;var f=xn[n];xn[n++]=null;var y=xn[n];if(xn[n++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}y!==0&&Sf(i,f,y)}}function ml(e,n,i,c){xn[Ir++]=e,xn[Ir++]=n,xn[Ir++]=i,xn[Ir++]=c,Tc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Cc(e,n,i,c){return ml(e,n,i,c),pl(e)}function rr(e,n){return ml(e,null,null,n),pl(e)}function Sf(e,n,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var f=!1,y=e.return;y!==null;)y.childLanes|=i,c=y.alternate,c!==null&&(c.childLanes|=i),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(f=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,f&&n!==null&&(f=31-At(i),e=y.hiddenUpdates,c=e[f],c===null?e[f]=[n]:c.push(n),n.lane=i|536870912),y):null}function pl(e){if(50<hi)throw hi=0,Pu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Hr={};function ew(e,n,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,n,i,c){return new ew(e,n,i,c)}function Rc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ra(e,n){var i=e.alternate;return i===null?(i=sn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function kf(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function yl(e,n,i,c,f,y){var _=0;if(c=e,typeof e=="function")Rc(e)&&(_=1);else if(typeof e=="string")_=sx(e,i,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case E:return e=sn(31,i,n,f),e.elementType=E,e.lanes=y,e;case S:return sr(i.children,f,y,n);case A:_=8,f|=24;break;case T:return e=sn(12,i,n,f|2),e.elementType=T,e.lanes=y,e;case K:return e=sn(13,i,n,f),e.elementType=K,e.lanes=y,e;case R:return e=sn(19,i,n,f),e.elementType=R,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:_=10;break e;case D:_=9;break e;case $:_=11;break e;case L:_=14;break e;case N:_=16,c=null;break e}_=29,i=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=sn(_,i,n,f),n.elementType=e,n.type=c,n.lanes=y,n}function sr(e,n,i,c){return e=sn(7,e,c,n),e.lanes=i,e}function Oc(e,n,i){return e=sn(6,e,null,n),e.lanes=i,e}function Ef(e){var n=sn(18,null,null,0);return n.stateNode=e,n}function Mc(e,n,i){return n=sn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Nf=new WeakMap;function _n(e,n){if(typeof e=="object"&&e!==null){var i=Nf.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Ge(n)},Nf.set(e,n),n)}return{value:e,source:n,stack:Ge(n)}}var qr=[],Gr=0,vl=null,Ks=0,Sn=[],kn=0,Na=null,Fn=1,Vn="";function sa(e,n){qr[Gr++]=Ks,qr[Gr++]=vl,vl=e,Ks=n}function jf(e,n,i){Sn[kn++]=Fn,Sn[kn++]=Vn,Sn[kn++]=Na,Na=e;var c=Fn;e=Vn;var f=32-At(c)-1;c&=~(1<<f),i+=1;var y=32-At(n)+f;if(30<y){var _=f-f%5;y=(c&(1<<_)-1).toString(32),c>>=_,f-=_,Fn=1<<32-At(n)+f|i<<f|c,Vn=y+e}else Fn=1<<y|i<<f|c,Vn=e}function Dc(e){e.return!==null&&(sa(e,1),jf(e,1,0))}function Uc(e){for(;e===vl;)vl=qr[--Gr],qr[Gr]=null,Ks=qr[--Gr],qr[Gr]=null;for(;e===Na;)Na=Sn[--kn],Sn[kn]=null,Vn=Sn[--kn],Sn[kn]=null,Fn=Sn[--kn],Sn[kn]=null}function Af(e,n){Sn[kn++]=Fn,Sn[kn++]=Vn,Sn[kn++]=Na,Fn=n.id,Vn=n.overflow,Na=e}var Ct=null,nt=null,$e=!1,ja=null,En=!1,Lc=Error(s(519));function Aa(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fs(_n(n,e)),Lc}function Tf(e){var n=e.stateNode,i=e.type,c=e.memoizedProps;switch(n[Tt]=e,n[Ft]=c,i){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(i=0;i<gi.length;i++)De(gi[i],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":De("invalid",n),Ih(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":De("invalid",n);break;case"textarea":De("invalid",n),qh(n,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||Fm(n.textContent,i)?(c.popover!=null&&(De("beforetoggle",n),De("toggle",n)),c.onScroll!=null&&De("scroll",n),c.onScrollEnd!=null&&De("scrollend",n),c.onClick!=null&&(n.onclick=na),n=!0):n=!1,n||Aa(e,!0)}function Cf(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Ct=Ct.return}}function Kr(e){if(e!==Ct)return!1;if(!$e)return Cf(e),$e=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||ed(e.type,e.memoizedProps)),i=!i),i&&nt&&Aa(e),Cf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nt=tp(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nt=tp(e)}else n===27?(n=nt,Ha(e.type)?(e=sd,sd=null,nt=e):nt=n):nt=Ct?jn(e.stateNode.nextSibling):null;return!0}function ir(){nt=Ct=null,$e=!1}function zc(){var e=ja;return e!==null&&(Qt===null?Qt=e:Qt.push.apply(Qt,e),ja=null),e}function Fs(e){ja===null?ja=[e]:ja.push(e)}var $c=z(null),lr=null,ia=null;function Ta(e,n,i){J($c,n._currentValue),n._currentValue=i}function la(e){e._currentValue=$c.current,I($c)}function Pc(e,n,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===i)break;e=e.return}}function Bc(e,n,i,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var y=f.dependencies;if(y!==null){var _=f.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=f;for(var q=0;q<n.length;q++)if(C.context===n[q]){y.lanes|=i,C=y.alternate,C!==null&&(C.lanes|=i),Pc(y.return,i,e),c||(_=null);break e}y=C.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=i,y=_.alternate,y!==null&&(y.lanes|=i),Pc(_,i,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Fr(e,n,i,c){e=null;for(var f=n,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var C=f.type;rn(f.pendingProps.value,_.value)||(e!==null?e.push(C):e=[C])}}else if(f===pe.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(bi):e=[bi])}f=f.return}e!==null&&Bc(n,e,i,c),n.flags|=262144}function bl(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function or(e){lr=e,ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rt(e){return Rf(lr,e)}function wl(e,n){return lr===null&&or(e),Rf(e,n)}function Rf(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ia===null){if(e===null)throw Error(s(308));ia=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ia=ia.next=n;return i}var tw=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},nw=a.unstable_scheduleCallback,aw=a.unstable_NormalPriority,vt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ic(){return{controller:new tw,data:new Map,refCount:0}}function Vs(e){e.refCount--,e.refCount===0&&nw(aw,function(){e.controller.abort()})}var Ys=null,Hc=0,Vr=0,Yr=null;function rw(e,n){if(Ys===null){var i=Ys=[];Hc=0,Vr=Ku(),Yr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Hc++,n.then(Of,Of),n}function Of(){if(--Hc===0&&Ys!==null){Yr!==null&&(Yr.status="fulfilled");var e=Ys;Ys=null,Vr=0,Yr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function sw(e,n){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var Mf=j.S;j.S=function(e,n){pm=fe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&rw(e,n),Mf!==null&&Mf(e,n)};var cr=z(null);function qc(){var e=cr.current;return e!==null?e:Je.pooledCache}function xl(e,n){n===null?J(cr,cr.current):J(cr,n.pool)}function Df(){var e=qc();return e===null?null:{parent:vt._currentValue,pool:e}}var Wr=Error(s(460)),Gc=Error(s(474)),_l=Error(s(542)),Sl={then:function(){}};function Uf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lf(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(na,na),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$f(e),e;default:if(typeof n.status=="string")n.then(na,na);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=c}},function(c){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,$f(e),e}throw dr=n,Wr}}function ur(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(dr=i,Wr):i}}var dr=null;function zf(){if(dr===null)throw Error(s(459));var e=dr;return dr=null,e}function $f(e){if(e===Wr||e===_l)throw Error(s(483))}var Xr=null,Ws=0;function kl(e){var n=Ws;return Ws+=1,Xr===null&&(Xr=[]),Lf(Xr,e,n)}function Xs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function El(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Pf(e){function n(Q,V){if(e){var te=Q.deletions;te===null?(Q.deletions=[V],Q.flags|=16):te.push(V)}}function i(Q,V){if(!e)return null;for(;V!==null;)n(Q,V),V=V.sibling;return null}function c(Q){for(var V=new Map;Q!==null;)Q.key!==null?V.set(Q.key,Q):V.set(Q.index,Q),Q=Q.sibling;return V}function f(Q,V){return Q=ra(Q,V),Q.index=0,Q.sibling=null,Q}function y(Q,V,te){return Q.index=te,e?(te=Q.alternate,te!==null?(te=te.index,te<V?(Q.flags|=67108866,V):te):(Q.flags|=67108866,V)):(Q.flags|=1048576,V)}function _(Q){return e&&Q.alternate===null&&(Q.flags|=67108866),Q}function C(Q,V,te,ie){return V===null||V.tag!==6?(V=Oc(te,Q.mode,ie),V.return=Q,V):(V=f(V,te),V.return=Q,V)}function q(Q,V,te,ie){var xe=te.type;return xe===S?se(Q,V,te.props.children,ie,te.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===N&&ur(xe)===V.type)?(V=f(V,te.props),Xs(V,te),V.return=Q,V):(V=yl(te.type,te.key,te.props,null,Q.mode,ie),Xs(V,te),V.return=Q,V)}function ne(Q,V,te,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Mc(te,Q.mode,ie),V.return=Q,V):(V=f(V,te.children||[]),V.return=Q,V)}function se(Q,V,te,ie,xe){return V===null||V.tag!==7?(V=sr(te,Q.mode,ie,xe),V.return=Q,V):(V=f(V,te),V.return=Q,V)}function le(Q,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Oc(""+V,Q.mode,te),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return te=yl(V.type,V.key,V.props,null,Q.mode,te),Xs(te,V),te.return=Q,te;case x:return V=Mc(V,Q.mode,te),V.return=Q,V;case N:return V=ur(V),le(Q,V,te)}if(X(V)||H(V))return V=sr(V,Q.mode,te,null),V.return=Q,V;if(typeof V.then=="function")return le(Q,kl(V),te);if(V.$$typeof===M)return le(Q,wl(Q,V),te);El(Q,V)}return null}function ae(Q,V,te,ie){var xe=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return xe!==null?null:C(Q,V,""+te,ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case w:return te.key===xe?q(Q,V,te,ie):null;case x:return te.key===xe?ne(Q,V,te,ie):null;case N:return te=ur(te),ae(Q,V,te,ie)}if(X(te)||H(te))return xe!==null?null:se(Q,V,te,ie,null);if(typeof te.then=="function")return ae(Q,V,kl(te),ie);if(te.$$typeof===M)return ae(Q,V,wl(Q,te),ie);El(Q,te)}return null}function re(Q,V,te,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Q=Q.get(te)||null,C(V,Q,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return Q=Q.get(ie.key===null?te:ie.key)||null,q(V,Q,ie,xe);case x:return Q=Q.get(ie.key===null?te:ie.key)||null,ne(V,Q,ie,xe);case N:return ie=ur(ie),re(Q,V,te,ie,xe)}if(X(ie)||H(ie))return Q=Q.get(te)||null,se(V,Q,ie,xe,null);if(typeof ie.then=="function")return re(Q,V,te,kl(ie),xe);if(ie.$$typeof===M)return re(Q,V,te,wl(V,ie),xe);El(V,ie)}return null}function me(Q,V,te,ie){for(var xe=null,Be=null,ye=V,Oe=V=0,Le=null;ye!==null&&Oe<te.length;Oe++){ye.index>Oe?(Le=ye,ye=null):Le=ye.sibling;var Ie=ae(Q,ye,te[Oe],ie);if(Ie===null){ye===null&&(ye=Le);break}e&&ye&&Ie.alternate===null&&n(Q,ye),V=y(Ie,V,Oe),Be===null?xe=Ie:Be.sibling=Ie,Be=Ie,ye=Le}if(Oe===te.length)return i(Q,ye),$e&&sa(Q,Oe),xe;if(ye===null){for(;Oe<te.length;Oe++)ye=le(Q,te[Oe],ie),ye!==null&&(V=y(ye,V,Oe),Be===null?xe=ye:Be.sibling=ye,Be=ye);return $e&&sa(Q,Oe),xe}for(ye=c(ye);Oe<te.length;Oe++)Le=re(ye,Q,Oe,te[Oe],ie),Le!==null&&(e&&Le.alternate!==null&&ye.delete(Le.key===null?Oe:Le.key),V=y(Le,V,Oe),Be===null?xe=Le:Be.sibling=Le,Be=Le);return e&&ye.forEach(function(Va){return n(Q,Va)}),$e&&sa(Q,Oe),xe}function _e(Q,V,te,ie){if(te==null)throw Error(s(151));for(var xe=null,Be=null,ye=V,Oe=V=0,Le=null,Ie=te.next();ye!==null&&!Ie.done;Oe++,Ie=te.next()){ye.index>Oe?(Le=ye,ye=null):Le=ye.sibling;var Va=ae(Q,ye,Ie.value,ie);if(Va===null){ye===null&&(ye=Le);break}e&&ye&&Va.alternate===null&&n(Q,ye),V=y(Va,V,Oe),Be===null?xe=Va:Be.sibling=Va,Be=Va,ye=Le}if(Ie.done)return i(Q,ye),$e&&sa(Q,Oe),xe;if(ye===null){for(;!Ie.done;Oe++,Ie=te.next())Ie=le(Q,Ie.value,ie),Ie!==null&&(V=y(Ie,V,Oe),Be===null?xe=Ie:Be.sibling=Ie,Be=Ie);return $e&&sa(Q,Oe),xe}for(ye=c(ye);!Ie.done;Oe++,Ie=te.next())Ie=re(ye,Q,Oe,Ie.value,ie),Ie!==null&&(e&&Ie.alternate!==null&&ye.delete(Ie.key===null?Oe:Ie.key),V=y(Ie,V,Oe),Be===null?xe=Ie:Be.sibling=Ie,Be=Ie);return e&&ye.forEach(function(px){return n(Q,px)}),$e&&sa(Q,Oe),xe}function Qe(Q,V,te,ie){if(typeof te=="object"&&te!==null&&te.type===S&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case w:e:{for(var xe=te.key;V!==null;){if(V.key===xe){if(xe=te.type,xe===S){if(V.tag===7){i(Q,V.sibling),ie=f(V,te.props.children),ie.return=Q,Q=ie;break e}}else if(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===N&&ur(xe)===V.type){i(Q,V.sibling),ie=f(V,te.props),Xs(ie,te),ie.return=Q,Q=ie;break e}i(Q,V);break}else n(Q,V);V=V.sibling}te.type===S?(ie=sr(te.props.children,Q.mode,ie,te.key),ie.return=Q,Q=ie):(ie=yl(te.type,te.key,te.props,null,Q.mode,ie),Xs(ie,te),ie.return=Q,Q=ie)}return _(Q);case x:e:{for(xe=te.key;V!==null;){if(V.key===xe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){i(Q,V.sibling),ie=f(V,te.children||[]),ie.return=Q,Q=ie;break e}else{i(Q,V);break}else n(Q,V);V=V.sibling}ie=Mc(te,Q.mode,ie),ie.return=Q,Q=ie}return _(Q);case N:return te=ur(te),Qe(Q,V,te,ie)}if(X(te))return me(Q,V,te,ie);if(H(te)){if(xe=H(te),typeof xe!="function")throw Error(s(150));return te=xe.call(te),_e(Q,V,te,ie)}if(typeof te.then=="function")return Qe(Q,V,kl(te),ie);if(te.$$typeof===M)return Qe(Q,V,wl(Q,te),ie);El(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(i(Q,V.sibling),ie=f(V,te),ie.return=Q,Q=ie):(i(Q,V),ie=Oc(te,Q.mode,ie),ie.return=Q,Q=ie),_(Q)):i(Q,V)}return function(Q,V,te,ie){try{Ws=0;var xe=Qe(Q,V,te,ie);return Xr=null,xe}catch(ye){if(ye===Wr||ye===_l)throw ye;var Be=sn(29,ye,null,Q.mode);return Be.lanes=ie,Be.return=Q,Be}finally{}}}var hr=Pf(!0),Bf=Pf(!1),Ca=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(e,n,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,n=pl(e),Sf(e,null,i),n}return ml(e,c,n,i),pl(e)}function Qs(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,Ch(e,i)}}function Vc(e,n){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,y=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};y===null?f=y=_:y=y.next=_,i=i.next}while(i!==null);y===null?f=y=n:y=y.next=n}else f=y=n;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Yc=!1;function Js(){if(Yc){var e=Yr;if(e!==null)throw e}}function Zs(e,n,i,c){Yc=!1;var f=e.updateQueue;Ca=!1;var y=f.firstBaseUpdate,_=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var q=C,ne=q.next;q.next=null,_===null?y=ne:_.next=ne,_=q;var se=e.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==_&&(C===null?se.firstBaseUpdate=ne:C.next=ne,se.lastBaseUpdate=q))}if(y!==null){var le=f.baseState;_=0,se=ne=q=null,C=y;do{var ae=C.lane&-536870913,re=ae!==C.lane;if(re?(Ue&ae)===ae:(c&ae)===ae){ae!==0&&ae===Vr&&(Yc=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var me=e,_e=C;ae=n;var Qe=i;switch(_e.tag){case 1:if(me=_e.payload,typeof me=="function"){le=me.call(Qe,le,ae);break e}le=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=_e.payload,ae=typeof me=="function"?me.call(Qe,le,ae):me,ae==null)break e;le=v({},le,ae);break e;case 2:Ca=!0}}ae=C.callback,ae!==null&&(e.flags|=64,re&&(e.flags|=8192),re=f.callbacks,re===null?f.callbacks=[ae]:re.push(ae))}else re={lane:ae,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(ne=se=re,q=le):se=se.next=re,_|=ae;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;re=C,C=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);se===null&&(q=le),f.baseState=q,f.firstBaseUpdate=ne,f.lastBaseUpdate=se,y===null&&(f.shared.lanes=0),za|=_,e.lanes=_,e.memoizedState=le}}function If(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Hf(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)If(i[e],n)}var Qr=z(null),Nl=z(0);function qf(e,n){e=pa,J(Nl,e),J(Qr,n),pa=e|n.baseLanes}function Wc(){J(Nl,pa),J(Qr,Qr.current)}function Xc(){pa=Nl.current,I(Qr),I(Nl)}var ln=z(null),Nn=null;function Ma(e){var n=e.alternate;J(gt,gt.current&1),J(ln,e),Nn===null&&(n===null||Qr.current!==null||n.memoizedState!==null)&&(Nn=e)}function Qc(e){J(gt,gt.current),J(ln,e),Nn===null&&(Nn=e)}function Gf(e){e.tag===22?(J(gt,gt.current),J(ln,e),Nn===null&&(Nn=e)):Da()}function Da(){J(gt,gt.current),J(ln,ln.current)}function on(e){I(ln),Nn===e&&(Nn=null),I(gt)}var gt=z(0);function jl(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||ad(i)||rd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var oa=0,Ce=null,We=null,bt=null,Al=!1,Jr=!1,fr=!1,Tl=0,ei=0,Zr=null,iw=0;function dt(){throw Error(s(321))}function Jc(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!rn(e[i],n[i]))return!1;return!0}function Zc(e,n,i,c,f,y){return oa=y,Ce=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,j.H=e===null||e.memoizedState===null?jg:gu,fr=!1,y=i(c,f),fr=!1,Jr&&(y=Ff(n,i,c,f)),Kf(e),y}function Kf(e){j.H=ai;var n=We!==null&&We.next!==null;if(oa=0,bt=We=Ce=null,Al=!1,ei=0,Zr=null,n)throw Error(s(300));e===null||wt||(e=e.dependencies,e!==null&&bl(e)&&(wt=!0))}function Ff(e,n,i,c){Ce=e;var f=0;do{if(Jr&&(Zr=null),ei=0,Jr=!1,25<=f)throw Error(s(301));if(f+=1,bt=We=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}j.H=Ag,y=n(i,c)}while(Jr);return y}function lw(){var e=j.H,n=e.useState()[0];return n=typeof n.then=="function"?ti(n):n,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(Ce.flags|=1024),n}function eu(){var e=Tl!==0;return Tl=0,e}function tu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function nu(e){if(Al){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Al=!1}oa=0,bt=We=Ce=null,Jr=!1,ei=Tl=0,Zr=null}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ce.memoizedState=bt=e:bt=bt.next=e,bt}function mt(){if(We===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var n=bt===null?Ce.memoizedState:bt.next;if(n!==null)bt=n,We=e;else{if(e===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},bt===null?Ce.memoizedState=bt=e:bt=bt.next=e}return bt}function Cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ti(e){var n=ei;return ei+=1,Zr===null&&(Zr=[]),e=Lf(Zr,e,n),n=Ce,(bt===null?n.memoizedState:bt.next)===null&&(n=n.alternate,j.H=n===null||n.memoizedState===null?jg:gu),e}function Rl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ti(e);if(e.$$typeof===M)return Rt(e)}throw Error(s(438,String(e)))}function au(e){var n=null,i=Ce.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=Ce.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Cl(),Ce.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),c=0;c<e;c++)i[c]=U;return n.index++,i}function ca(e,n){return typeof n=="function"?n(e):n}function Ol(e){var n=mt();return ru(n,We,e)}function ru(e,n,i){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var f=e.baseQueue,y=c.pending;if(y!==null){if(f!==null){var _=f.next;f.next=y.next,y.next=_}n.baseQueue=f=y,c.pending=null}if(y=e.baseState,f===null)e.memoizedState=y;else{n=f.next;var C=_=null,q=null,ne=n,se=!1;do{var le=ne.lane&-536870913;if(le!==ne.lane?(Ue&le)===le:(oa&le)===le){var ae=ne.revertLane;if(ae===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),le===Vr&&(se=!0);else if((oa&ae)===ae){ne=ne.next,ae===Vr&&(se=!0);continue}else le={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(C=q=le,_=y):q=q.next=le,Ce.lanes|=ae,za|=ae;le=ne.action,fr&&i(y,le),y=ne.hasEagerState?ne.eagerState:i(y,le)}else ae={lane:le,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(C=q=ae,_=y):q=q.next=ae,Ce.lanes|=le,za|=le;ne=ne.next}while(ne!==null&&ne!==n);if(q===null?_=y:q.next=C,!rn(y,e.memoizedState)&&(wt=!0,se&&(i=Yr,i!==null)))throw i;e.memoizedState=y,e.baseState=_,e.baseQueue=q,c.lastRenderedState=y}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function su(e){var n=mt(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var c=i.dispatch,f=i.pending,y=n.memoizedState;if(f!==null){i.pending=null;var _=f=f.next;do y=e(y,_.action),_=_.next;while(_!==f);rn(y,n.memoizedState)||(wt=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),i.lastRenderedState=y}return[y,c]}function Vf(e,n,i){var c=Ce,f=mt(),y=$e;if(y){if(i===void 0)throw Error(s(407));i=i()}else i=n();var _=!rn((We||f).memoizedState,i);if(_&&(f.memoizedState=i,wt=!0),f=f.queue,ou(Xf.bind(null,c,f,e),[e]),f.getSnapshot!==n||_||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,es(9,{destroy:void 0},Wf.bind(null,c,f,i,n),null),Je===null)throw Error(s(349));y||(oa&127)!==0||Yf(c,n,i)}return i}function Yf(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Ce.updateQueue,n===null?(n=Cl(),Ce.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Wf(e,n,i,c){n.value=i,n.getSnapshot=c,Qf(n)&&Jf(e)}function Xf(e,n,i){return i(function(){Qf(n)&&Jf(e)})}function Qf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!rn(e,i)}catch{return!0}}function Jf(e){var n=rr(e,2);n!==null&&Jt(n,e,2)}function iu(e){var n=It();if(typeof e=="function"){var i=e;if(e=i(),fr){Lt(!0);try{i()}finally{Lt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},n}function Zf(e,n,i,c){return e.baseState=i,ru(e,We,typeof c=="function"?c:ca)}function ow(e,n,i,c,f){if(Ul(e))throw Error(s(485));if(e=n.action,e!==null){var y={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};j.T!==null?i(!0):y.isTransition=!1,c(y),i=n.pending,i===null?(y.next=n.pending=y,eg(n,y)):(y.next=i.next,n.pending=i.next=y)}}function eg(e,n){var i=n.action,c=n.payload,f=e.state;if(n.isTransition){var y=j.T,_={};j.T=_;try{var C=i(f,c),q=j.S;q!==null&&q(_,C),tg(e,n,C)}catch(ne){lu(e,n,ne)}finally{y!==null&&_.types!==null&&(y.types=_.types),j.T=y}}else try{y=i(f,c),tg(e,n,y)}catch(ne){lu(e,n,ne)}}function tg(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){ng(e,n,c)},function(c){return lu(e,n,c)}):ng(e,n,i)}function ng(e,n,i){n.status="fulfilled",n.value=i,ag(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,eg(e,i)))}function lu(e,n,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,ag(n),n=n.next;while(n!==c)}e.action=null}function ag(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function rg(e,n){return n}function sg(e,n){if($e){var i=Je.formState;if(i!==null){e:{var c=Ce;if($e){if(nt){t:{for(var f=nt,y=En;f.nodeType!==8;){if(!y){f=null;break t}if(f=jn(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){nt=jn(f.nextSibling),c=f.data==="F!";break e}}Aa(c)}c=!1}c&&(n=i[0])}}return i=It(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rg,lastRenderedState:n},i.queue=c,i=kg.bind(null,Ce,c),c.dispatch=i,c=iu(!1),y=fu.bind(null,Ce,!1,c.queue),c=It(),f={state:n,dispatch:null,action:e,pending:null},c.queue=f,i=ow.bind(null,Ce,f,y,i),f.dispatch=i,c.memoizedState=e,[n,i,!1]}function ig(e){var n=mt();return lg(n,We,e)}function lg(e,n,i){if(n=ru(e,n,rg)[0],e=Ol(ca)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=ti(n)}catch(_){throw _===Wr?_l:_}else c=n;n=mt();var f=n.queue,y=f.dispatch;return i!==n.memoizedState&&(Ce.flags|=2048,es(9,{destroy:void 0},cw.bind(null,f,i),null)),[c,y,e]}function cw(e,n){e.action=n}function og(e){var n=mt(),i=We;if(i!==null)return lg(n,i,e);mt(),n=n.memoizedState,i=mt();var c=i.queue.dispatch;return i.memoizedState=e,[n,c,!1]}function es(e,n,i,c){return e={tag:e,create:i,deps:c,inst:n,next:null},n=Ce.updateQueue,n===null&&(n=Cl(),Ce.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,n.lastEffect=e),e}function cg(){return mt().memoizedState}function Ml(e,n,i,c){var f=It();Ce.flags|=e,f.memoizedState=es(1|n,{destroy:void 0},i,c===void 0?null:c)}function Dl(e,n,i,c){var f=mt();c=c===void 0?null:c;var y=f.memoizedState.inst;We!==null&&c!==null&&Jc(c,We.memoizedState.deps)?f.memoizedState=es(n,y,i,c):(Ce.flags|=e,f.memoizedState=es(1|n,y,i,c))}function ug(e,n){Ml(8390656,8,e,n)}function ou(e,n){Dl(2048,8,e,n)}function uw(e){Ce.flags|=4;var n=Ce.updateQueue;if(n===null)n=Cl(),Ce.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function dg(e){var n=mt().memoizedState;return uw({ref:n,nextImpl:e}),function(){if((qe&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function hg(e,n){return Dl(4,2,e,n)}function fg(e,n){return Dl(4,4,e,n)}function gg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function mg(e,n,i){i=i!=null?i.concat([e]):null,Dl(4,4,gg.bind(null,n,e),i)}function cu(){}function pg(e,n){var i=mt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&Jc(n,c[1])?c[0]:(i.memoizedState=[e,n],e)}function yg(e,n){var i=mt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&Jc(n,c[1]))return c[0];if(c=e(),fr){Lt(!0);try{e()}finally{Lt(!1)}}return i.memoizedState=[c,n],c}function uu(e,n,i){return i===void 0||(oa&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=vm(),Ce.lanes|=e,za|=e,i)}function vg(e,n,i,c){return rn(i,n)?i:Qr.current!==null?(e=uu(e,i,c),rn(e,n)||(wt=!0),e):(oa&42)===0||(oa&1073741824)!==0&&(Ue&261930)===0?(wt=!0,e.memoizedState=i):(e=vm(),Ce.lanes|=e,za|=e,n)}function bg(e,n,i,c,f){var y=k.p;k.p=y!==0&&8>y?y:8;var _=j.T,C={};j.T=C,fu(e,!1,n,i);try{var q=f(),ne=j.S;if(ne!==null&&ne(C,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var se=sw(q,c);ni(e,n,se,dn(e))}else ni(e,n,c,dn(e))}catch(le){ni(e,n,{then:function(){},status:"rejected",reason:le},dn())}finally{k.p=y,_!==null&&C.types!==null&&(_.types=C.types),j.T=_}}function dw(){}function du(e,n,i,c){if(e.tag!==5)throw Error(s(476));var f=wg(e).queue;bg(e,f,n,W,i===null?dw:function(){return xg(e),i(c)})}function wg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:W},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function xg(e){var n=wg(e);n.next===null&&(n=e.alternate.memoizedState),ni(e,n.next.queue,{},dn())}function hu(){return Rt(bi)}function _g(){return mt().memoizedState}function Sg(){return mt().memoizedState}function hw(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=dn();e=Ra(i);var c=Oa(n,e,i);c!==null&&(Jt(c,n,i),Qs(c,n,i)),n={cache:Ic()},e.payload=n;return}n=n.return}}function fw(e,n,i){var c=dn();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ul(e)?Eg(n,i):(i=Cc(e,n,i,c),i!==null&&(Jt(i,e,c),Ng(i,n,c)))}function kg(e,n,i){var c=dn();ni(e,n,i,c)}function ni(e,n,i,c){var f={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ul(e))Eg(n,f);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var _=n.lastRenderedState,C=y(_,i);if(f.hasEagerState=!0,f.eagerState=C,rn(C,_))return ml(e,n,f,0),Je===null&&gl(),!1}catch{}finally{}if(i=Cc(e,n,f,c),i!==null)return Jt(i,e,c),Ng(i,n,c),!0}return!1}function fu(e,n,i,c){if(c={lane:2,revertLane:Ku(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ul(e)){if(n)throw Error(s(479))}else n=Cc(e,i,c,2),n!==null&&Jt(n,e,2)}function Ul(e){var n=e.alternate;return e===Ce||n!==null&&n===Ce}function Eg(e,n){Jr=Al=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Ng(e,n,i){if((i&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,Ch(e,i)}}var ai={readContext:Rt,use:Rl,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};ai.useEffectEvent=dt;var jg={readContext:Rt,use:Rl,useCallback:function(e,n){return It().memoizedState=[e,n===void 0?null:n],e},useContext:Rt,useEffect:ug,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Ml(4194308,4,gg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Ml(4194308,4,e,n)},useInsertionEffect:function(e,n){Ml(4,2,e,n)},useMemo:function(e,n){var i=It();n=n===void 0?null:n;var c=e();if(fr){Lt(!0);try{e()}finally{Lt(!1)}}return i.memoizedState=[c,n],c},useReducer:function(e,n,i){var c=It();if(i!==void 0){var f=i(n);if(fr){Lt(!0);try{i(n)}finally{Lt(!1)}}}else f=n;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=fw.bind(null,Ce,e),[c.memoizedState,e]},useRef:function(e){var n=It();return e={current:e},n.memoizedState=e},useState:function(e){e=iu(e);var n=e.queue,i=kg.bind(null,Ce,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:cu,useDeferredValue:function(e,n){var i=It();return uu(i,e,n)},useTransition:function(){var e=iu(!1);return e=bg.bind(null,Ce,e.queue,!0,!1),It().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var c=Ce,f=It();if($e){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Je===null)throw Error(s(349));(Ue&127)!==0||Yf(c,n,i)}f.memoizedState=i;var y={value:i,getSnapshot:n};return f.queue=y,ug(Xf.bind(null,c,y,e),[e]),c.flags|=2048,es(9,{destroy:void 0},Wf.bind(null,c,y,i,n),null),i},useId:function(){var e=It(),n=Je.identifierPrefix;if($e){var i=Vn,c=Fn;i=(c&~(1<<32-At(c)-1)).toString(32)+i,n="_"+n+"R_"+i,i=Tl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=iw++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:hu,useFormState:sg,useActionState:sg,useOptimistic:function(e){var n=It();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=fu.bind(null,Ce,!0,i),i.dispatch=n,[e,n]},useMemoCache:au,useCacheRefresh:function(){return It().memoizedState=hw.bind(null,Ce)},useEffectEvent:function(e){var n=It(),i={impl:e};return n.memoizedState=i,function(){if((qe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},gu={readContext:Rt,use:Rl,useCallback:pg,useContext:Rt,useEffect:ou,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:yg,useReducer:Ol,useRef:cg,useState:function(){return Ol(ca)},useDebugValue:cu,useDeferredValue:function(e,n){var i=mt();return vg(i,We.memoizedState,e,n)},useTransition:function(){var e=Ol(ca)[0],n=mt().memoizedState;return[typeof e=="boolean"?e:ti(e),n]},useSyncExternalStore:Vf,useId:_g,useHostTransitionStatus:hu,useFormState:ig,useActionState:ig,useOptimistic:function(e,n){var i=mt();return Zf(i,We,e,n)},useMemoCache:au,useCacheRefresh:Sg};gu.useEffectEvent=dg;var Ag={readContext:Rt,use:Rl,useCallback:pg,useContext:Rt,useEffect:ou,useImperativeHandle:mg,useInsertionEffect:hg,useLayoutEffect:fg,useMemo:yg,useReducer:su,useRef:cg,useState:function(){return su(ca)},useDebugValue:cu,useDeferredValue:function(e,n){var i=mt();return We===null?uu(i,e,n):vg(i,We.memoizedState,e,n)},useTransition:function(){var e=su(ca)[0],n=mt().memoizedState;return[typeof e=="boolean"?e:ti(e),n]},useSyncExternalStore:Vf,useId:_g,useHostTransitionStatus:hu,useFormState:og,useActionState:og,useOptimistic:function(e,n){var i=mt();return We!==null?Zf(i,We,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:au,useCacheRefresh:Sg};Ag.useEffectEvent=dg;function mu(e,n,i,c){n=e.memoizedState,i=i(c,n),i=i==null?n:v({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var pu={enqueueSetState:function(e,n,i){e=e._reactInternals;var c=dn(),f=Ra(c);f.payload=n,i!=null&&(f.callback=i),n=Oa(e,f,c),n!==null&&(Jt(n,e,c),Qs(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var c=dn(),f=Ra(c);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Oa(e,f,c),n!==null&&(Jt(n,e,c),Qs(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=dn(),c=Ra(i);c.tag=2,n!=null&&(c.callback=n),n=Oa(e,c,i),n!==null&&(Jt(n,e,i),Qs(n,e,i))}};function Tg(e,n,i,c,f,y,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,y,_):n.prototype&&n.prototype.isPureReactComponent?!qs(i,c)||!qs(f,y):!0}function Cg(e,n,i,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==e&&pu.enqueueReplaceState(n,n.state,null)}function gr(e,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(e=e.defaultProps){i===n&&(i=v({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Rg(e){fl(e)}function Og(e){console.error(e)}function Mg(e){fl(e)}function Ll(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Dg(e,n,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function yu(e,n,i){return i=Ra(i),i.tag=3,i.payload={element:null},i.callback=function(){Ll(e,n)},i}function Ug(e){return e=Ra(e),e.tag=3,e}function Lg(e,n,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var y=c.value;e.payload=function(){return f(y)},e.callback=function(){Dg(n,i,c)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Dg(n,i,c),typeof f!="function"&&($a===null?$a=new Set([this]):$a.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function gw(e,n,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&Fr(n,i,f,!0),i=ln.current,i!==null){switch(i.tag){case 31:case 13:return Nn===null?Yl():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===Sl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),Hu(e,c,f)),!1;case 22:return i.flags|=65536,c===Sl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),Hu(e,c,f)),!1}throw Error(s(435,i.tag))}return Hu(e,c,f),Yl(),!1}if($e)return n=ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,c!==Lc&&(e=Error(s(422),{cause:c}),Fs(_n(e,i)))):(c!==Lc&&(n=Error(s(423),{cause:c}),Fs(_n(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=_n(c,i),f=yu(e.stateNode,c,f),Vc(e,f),ht!==4&&(ht=2)),!1;var y=Error(s(520),{cause:c});if(y=_n(y,i),di===null?di=[y]:di.push(y),ht!==4&&(ht=2),n===null)return!0;c=_n(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=yu(i.stateNode,c,e),Vc(i,e),!1;case 1:if(n=i.type,y=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&($a===null||!$a.has(y))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Ug(f),Lg(f,e,i,c),Vc(i,f),!1}i=i.return}while(i!==null);return!1}var vu=Error(s(461)),wt=!1;function Ot(e,n,i,c){n.child=e===null?Bf(n,null,i,c):hr(n,e.child,i,c)}function zg(e,n,i,c,f){i=i.render;var y=n.ref;if("ref"in c){var _={};for(var C in c)C!=="ref"&&(_[C]=c[C])}else _=c;return or(n),c=Zc(e,n,i,_,y,f),C=eu(),e!==null&&!wt?(tu(e,n,f),ua(e,n,f)):($e&&C&&Dc(n),n.flags|=1,Ot(e,n,c,f),n.child)}function $g(e,n,i,c,f){if(e===null){var y=i.type;return typeof y=="function"&&!Rc(y)&&y.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=y,Pg(e,n,y,c,f)):(e=yl(i.type,null,c,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(y=e.child,!Nu(e,f)){var _=y.memoizedProps;if(i=i.compare,i=i!==null?i:qs,i(_,c)&&e.ref===n.ref)return ua(e,n,f)}return n.flags|=1,e=ra(y,c),e.ref=n.ref,e.return=n,n.child=e}function Pg(e,n,i,c,f){if(e!==null){var y=e.memoizedProps;if(qs(y,c)&&e.ref===n.ref)if(wt=!1,n.pendingProps=c=y,Nu(e,f))(e.flags&131072)!==0&&(wt=!0);else return n.lanes=e.lanes,ua(e,n,f)}return bu(e,n,i,c,f)}function Bg(e,n,i,c){var f=c.children,y=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(y=y!==null?y.baseLanes|i:i,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~y}else c=0,n.child=null;return Ig(e,n,y,i,c)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&xl(n,y!==null?y.cachePool:null),y!==null?qf(n,y):Wc(),Gf(n);else return c=n.lanes=536870912,Ig(e,n,y!==null?y.baseLanes|i:i,i,c)}else y!==null?(xl(n,y.cachePool),qf(n,y),Da(),n.memoizedState=null):(e!==null&&xl(n,null),Wc(),Da());return Ot(e,n,f,i),n.child}function ri(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Ig(e,n,i,c,f){var y=qc();return y=y===null?null:{parent:vt._currentValue,pool:y},n.memoizedState={baseLanes:i,cachePool:y},e!==null&&xl(n,null),Wc(),Gf(n),e!==null&&Fr(e,n,c,!0),n.childLanes=f,null}function zl(e,n){return n=Pl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Hg(e,n,i){return hr(n,e.child,null,i),e=zl(n,n.pendingProps),e.flags|=2,on(n),n.memoizedState=null,e}function mw(e,n,i){var c=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if($e){if(c.mode==="hidden")return e=zl(n,c),n.lanes=536870912,ri(null,e);if(Qc(n),(e=nt)?(e=ep(e,En),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Fn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},i=Ef(e),i.return=n,n.child=i,Ct=n,nt=null)):e=null,e===null)throw Aa(n);return n.lanes=536870912,null}return zl(n,c)}var y=e.memoizedState;if(y!==null){var _=y.dehydrated;if(Qc(n),f)if(n.flags&256)n.flags&=-257,n=Hg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(wt||Fr(e,n,i,!1),f=(i&e.childLanes)!==0,wt||f){if(c=Je,c!==null&&(_=Rh(c,i),_!==0&&_!==y.retryLane))throw y.retryLane=_,rr(e,_),Jt(c,e,_),vu;Yl(),n=Hg(e,n,i)}else e=y.treeContext,nt=jn(_.nextSibling),Ct=n,$e=!0,ja=null,En=!1,e!==null&&Af(n,e),n=zl(n,c),n.flags|=4096;return n}return e=ra(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function $l(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function bu(e,n,i,c,f){return or(n),i=Zc(e,n,i,c,void 0,f),c=eu(),e!==null&&!wt?(tu(e,n,f),ua(e,n,f)):($e&&c&&Dc(n),n.flags|=1,Ot(e,n,i,f),n.child)}function qg(e,n,i,c,f,y){return or(n),n.updateQueue=null,i=Ff(n,c,i,f),Kf(e),c=eu(),e!==null&&!wt?(tu(e,n,y),ua(e,n,y)):($e&&c&&Dc(n),n.flags|=1,Ot(e,n,i,y),n.child)}function Gg(e,n,i,c,f){if(or(n),n.stateNode===null){var y=Hr,_=i.contextType;typeof _=="object"&&_!==null&&(y=Rt(_)),y=new i(c,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=pu,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=c,y.state=n.memoizedState,y.refs={},Kc(n),_=i.contextType,y.context=typeof _=="object"&&_!==null?Rt(_):Hr,y.state=n.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(mu(n,i,_,c),y.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&pu.enqueueReplaceState(y,y.state,null),Zs(n,c,y,f),Js(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){y=n.stateNode;var C=n.memoizedProps,q=gr(i,C);y.props=q;var ne=y.context,se=i.contextType;_=Hr,typeof se=="object"&&se!==null&&(_=Rt(se));var le=i.getDerivedStateFromProps;se=typeof le=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,se||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||ne!==_)&&Cg(n,y,c,_),Ca=!1;var ae=n.memoizedState;y.state=ae,Zs(n,c,y,f),Js(),ne=n.memoizedState,C||ae!==ne||Ca?(typeof le=="function"&&(mu(n,i,le,c),ne=n.memoizedState),(q=Ca||Tg(n,i,q,c,ae,ne,_))?(se||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ne),y.props=c,y.state=ne,y.context=_,c=q):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,Fc(e,n),_=n.memoizedProps,se=gr(i,_),y.props=se,le=n.pendingProps,ae=y.context,ne=i.contextType,q=Hr,typeof ne=="object"&&ne!==null&&(q=Rt(ne)),C=i.getDerivedStateFromProps,(ne=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==le||ae!==q)&&Cg(n,y,c,q),Ca=!1,ae=n.memoizedState,y.state=ae,Zs(n,c,y,f),Js();var re=n.memoizedState;_!==le||ae!==re||Ca||e!==null&&e.dependencies!==null&&bl(e.dependencies)?(typeof C=="function"&&(mu(n,i,C,c),re=n.memoizedState),(se=Ca||Tg(n,i,se,c,ae,re,q)||e!==null&&e.dependencies!==null&&bl(e.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,re,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,re,q)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=re),y.props=c,y.state=re,y.context=q,c=se):(typeof y.componentDidUpdate!="function"||_===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),c=!1)}return y=c,$l(e,n),c=(n.flags&128)!==0,y||c?(y=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,e!==null&&c?(n.child=hr(n,e.child,null,f),n.child=hr(n,null,i,f)):Ot(e,n,i,f),n.memoizedState=y.state,e=n.child):e=ua(e,n,f),e}function Kg(e,n,i,c){return ir(),n.flags|=256,Ot(e,n,i,c),n.child}var wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xu(e){return{baseLanes:e,cachePool:Df()}}function _u(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=un),e}function Fg(e,n,i){var c=n.pendingProps,f=!1,y=(n.flags&128)!==0,_;if((_=y)||(_=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),_&&(f=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if($e){if(f?Ma(n):Da(),(e=nt)?(e=ep(e,En),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Na!==null?{id:Fn,overflow:Vn}:null,retryLane:536870912,hydrationErrors:null},i=Ef(e),i.return=n,n.child=i,Ct=n,nt=null)):e=null,e===null)throw Aa(n);return rd(e)?n.lanes=32:n.lanes=536870912,null}var C=c.children;return c=c.fallback,f?(Da(),f=n.mode,C=Pl({mode:"hidden",children:C},f),c=sr(c,f,i,null),C.return=n,c.return=n,C.sibling=c,n.child=C,c=n.child,c.memoizedState=xu(i),c.childLanes=_u(e,_,i),n.memoizedState=wu,ri(null,c)):(Ma(n),Su(n,C))}var q=e.memoizedState;if(q!==null&&(C=q.dehydrated,C!==null)){if(y)n.flags&256?(Ma(n),n.flags&=-257,n=ku(e,n,i)):n.memoizedState!==null?(Da(),n.child=e.child,n.flags|=128,n=null):(Da(),C=c.fallback,f=n.mode,c=Pl({mode:"visible",children:c.children},f),C=sr(C,f,i,null),C.flags|=2,c.return=n,C.return=n,c.sibling=C,n.child=c,hr(n,e.child,null,i),c=n.child,c.memoizedState=xu(i),c.childLanes=_u(e,_,i),n.memoizedState=wu,n=ri(null,c));else if(Ma(n),rd(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var ne=_.dgst;_=ne,c=Error(s(419)),c.stack="",c.digest=_,Fs({value:c,source:null,stack:null}),n=ku(e,n,i)}else if(wt||Fr(e,n,i,!1),_=(i&e.childLanes)!==0,wt||_){if(_=Je,_!==null&&(c=Rh(_,i),c!==0&&c!==q.retryLane))throw q.retryLane=c,rr(e,c),Jt(_,e,c),vu;ad(C)||Yl(),n=ku(e,n,i)}else ad(C)?(n.flags|=192,n.child=e.child,n=null):(e=q.treeContext,nt=jn(C.nextSibling),Ct=n,$e=!0,ja=null,En=!1,e!==null&&Af(n,e),n=Su(n,c.children),n.flags|=4096);return n}return f?(Da(),C=c.fallback,f=n.mode,q=e.child,ne=q.sibling,c=ra(q,{mode:"hidden",children:c.children}),c.subtreeFlags=q.subtreeFlags&65011712,ne!==null?C=ra(ne,C):(C=sr(C,f,i,null),C.flags|=2),C.return=n,c.return=n,c.sibling=C,n.child=c,ri(null,c),c=n.child,C=e.child.memoizedState,C===null?C=xu(i):(f=C.cachePool,f!==null?(q=vt._currentValue,f=f.parent!==q?{parent:q,pool:q}:f):f=Df(),C={baseLanes:C.baseLanes|i,cachePool:f}),c.memoizedState=C,c.childLanes=_u(e,_,i),n.memoizedState=wu,ri(e.child,c)):(Ma(n),i=e.child,e=i.sibling,i=ra(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=i,n.memoizedState=null,i)}function Su(e,n){return n=Pl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Pl(e,n){return e=sn(22,e,null,n),e.lanes=0,e}function ku(e,n,i){return hr(n,e.child,null,i),e=Su(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Vg(e,n,i){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Pc(e.return,n,i)}function Eu(e,n,i,c,f,y){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f,treeForkCount:y}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=i,_.tailMode=f,_.treeForkCount=y)}function Yg(e,n,i){var c=n.pendingProps,f=c.revealOrder,y=c.tail;c=c.children;var _=gt.current,C=(_&2)!==0;if(C?(_=_&1|2,n.flags|=128):_&=1,J(gt,_),Ot(e,n,c,i),c=$e?Ks:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vg(e,i,n);else if(e.tag===19)Vg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&jl(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),Eu(n,!1,f,i,y,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&jl(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}Eu(n,!0,i,null,y,c);break;case"together":Eu(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function ua(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),za|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Fr(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=ra(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=ra(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Nu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&bl(e)))}function pw(e,n,i){switch(n.tag){case 3:Ee(n,n.stateNode.containerInfo),Ta(n,vt,e.memoizedState.cache),ir();break;case 27:case 5:he(n);break;case 4:Ee(n,n.stateNode.containerInfo);break;case 10:Ta(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Qc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Ma(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Fg(e,n,i):(Ma(n),e=ua(e,n,i),e!==null?e.sibling:null);Ma(n);break;case 19:var f=(e.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(Fr(e,n,i,!1),c=(i&n.childLanes)!==0),f){if(c)return Yg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),J(gt,gt.current),c)break;return null;case 22:return n.lanes=0,Bg(e,n,i,n.pendingProps);case 24:Ta(n,vt,e.memoizedState.cache)}return ua(e,n,i)}function Wg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)wt=!0;else{if(!Nu(e,i)&&(n.flags&128)===0)return wt=!1,pw(e,n,i);wt=(e.flags&131072)!==0}else wt=!1,$e&&(n.flags&1048576)!==0&&jf(n,Ks,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(e=ur(n.elementType),n.type=e,typeof e=="function")Rc(e)?(c=gr(e,c),n.tag=1,n=Gg(null,n,e,c,i)):(n.tag=0,n=bu(null,n,e,c,i));else{if(e!=null){var f=e.$$typeof;if(f===$){n.tag=11,n=zg(null,n,e,c,i);break e}else if(f===L){n.tag=14,n=$g(null,n,e,c,i);break e}}throw n=B(e)||e,Error(s(306,n,""))}}return n;case 0:return bu(e,n,n.type,n.pendingProps,i);case 1:return c=n.type,f=gr(c,n.pendingProps),Gg(e,n,c,f,i);case 3:e:{if(Ee(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var y=n.memoizedState;f=y.element,Fc(e,n),Zs(n,c,null,i);var _=n.memoizedState;if(c=_.cache,Ta(n,vt,c),c!==y.cache&&Bc(n,[vt],i,!0),Js(),c=_.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=Kg(e,n,c,i);break e}else if(c!==f){f=_n(Error(s(424)),n),Fs(f),n=Kg(e,n,c,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nt=jn(e.firstChild),Ct=n,$e=!0,ja=null,En=!0,i=Bf(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ir(),c===f){n=ua(e,n,i);break e}Ot(e,n,c,i)}n=n.child}return n;case 26:return $l(e,n),e===null?(i=ip(n.type,null,n.pendingProps,null))?n.memoizedState=i:$e||(i=n.type,e=n.pendingProps,c=to(oe.current).createElement(i),c[Tt]=n,c[Ft]=e,Mt(c,i,e),Nt(c),n.stateNode=c):n.memoizedState=ip(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return he(n),e===null&&$e&&(c=n.stateNode=ap(n.type,n.pendingProps,oe.current),Ct=n,En=!0,f=nt,Ha(n.type)?(sd=f,nt=jn(c.firstChild)):nt=f),Ot(e,n,n.pendingProps.children,i),$l(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&$e&&((f=c=nt)&&(c=Fw(c,n.type,n.pendingProps,En),c!==null?(n.stateNode=c,Ct=n,nt=jn(c.firstChild),En=!1,f=!0):f=!1),f||Aa(n)),he(n),f=n.type,y=n.pendingProps,_=e!==null?e.memoizedProps:null,c=y.children,ed(f,y)?c=null:_!==null&&ed(f,_)&&(n.flags|=32),n.memoizedState!==null&&(f=Zc(e,n,lw,null,null,i),bi._currentValue=f),$l(e,n),Ot(e,n,c,i),n.child;case 6:return e===null&&$e&&((e=i=nt)&&(i=Vw(i,n.pendingProps,En),i!==null?(n.stateNode=i,Ct=n,nt=null,e=!0):e=!1),e||Aa(n)),null;case 13:return Fg(e,n,i);case 4:return Ee(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=hr(n,null,c,i):Ot(e,n,c,i),n.child;case 11:return zg(e,n,n.type,n.pendingProps,i);case 7:return Ot(e,n,n.pendingProps,i),n.child;case 8:return Ot(e,n,n.pendingProps.children,i),n.child;case 12:return Ot(e,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Ta(n,n.type,c.value),Ot(e,n,c.children,i),n.child;case 9:return f=n.type._context,c=n.pendingProps.children,or(n),f=Rt(f),c=c(f),n.flags|=1,Ot(e,n,c,i),n.child;case 14:return $g(e,n,n.type,n.pendingProps,i);case 15:return Pg(e,n,n.type,n.pendingProps,i);case 19:return Yg(e,n,i);case 31:return mw(e,n,i);case 22:return Bg(e,n,i,n.pendingProps);case 24:return or(n),c=Rt(vt),e===null?(f=qc(),f===null&&(f=Je,y=Ic(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=i),f=y),n.memoizedState={parent:c,cache:f},Kc(n),Ta(n,vt,f)):((e.lanes&i)!==0&&(Fc(e,n),Zs(n,null,null,i),Js()),f=e.memoizedState,y=n.memoizedState,f.parent!==c?(f={parent:c,cache:c},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Ta(n,vt,c)):(c=y.cache,Ta(n,vt,c),c!==f.cache&&Bc(n,[vt],i,!0))),Ot(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function da(e){e.flags|=4}function ju(e,n,i,c,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(_m())e.flags|=8192;else throw dr=Sl,Gc}else e.flags&=-16777217}function Xg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!dp(n))if(_m())e.flags|=8192;else throw dr=Sl,Gc}function Bl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Kn():536870912,e.lanes|=n,rs|=n)}function si(e,n){if(!$e)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function at(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=i,n}function yw(e,n,i){var c=n.pendingProps;switch(Uc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(n),null;case 1:return at(n),null;case 3:return i=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),la(vt),ce(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Kr(n)?da(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,zc())),at(n),null;case 26:var f=n.type,y=n.memoizedState;return e===null?(da(n),y!==null?(at(n),Xg(n,y)):(at(n),ju(n,f,null,c,i))):y?y!==e.memoizedState?(da(n),at(n),Xg(n,y)):(at(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&da(n),at(n),ju(n,f,e,c,i)),null;case 27:if(Re(n),i=oe.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&da(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return at(n),null}e=ee.current,Kr(n)?Tf(n):(e=ap(f,c,i),n.stateNode=e,da(n))}return at(n),null;case 5:if(Re(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&da(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return at(n),null}if(y=ee.current,Kr(n))Tf(n);else{var _=to(oe.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?_.createElement(f,{is:c.is}):_.createElement(f)}}y[Tt]=n,y[Ft]=c;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=y;e:switch(Mt(y,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&da(n)}}return at(n),ju(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&da(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=oe.current,Kr(n)){if(e=n.stateNode,i=n.memoizedProps,c=null,f=Ct,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Tt]=n,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Fm(e.nodeValue,i)),e||Aa(n,!0)}else e=to(e).createTextNode(c),e[Tt]=n,n.stateNode=e}return at(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(c=Kr(n),i!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Tt]=n}else ir(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;at(n),e=!1}else i=zc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(on(n),n):(on(n),null);if((n.flags&128)!==0)throw Error(s(558))}return at(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Kr(n),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Tt]=n}else ir(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;at(n),f=!1}else f=zc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(on(n),n):(on(n),null)}return on(n),(n.flags&128)!==0?(n.lanes=i,n):(i=c!==null,e=e!==null&&e.memoizedState!==null,i&&(c=n.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==f&&(c.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Bl(n,n.updateQueue),at(n),null);case 4:return ce(),e===null&&Wu(n.stateNode.containerInfo),at(n),null;case 10:return la(n.type),at(n),null;case 19:if(I(gt),c=n.memoizedState,c===null)return at(n),null;if(f=(n.flags&128)!==0,y=c.rendering,y===null)if(f)si(c,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=jl(e),y!==null){for(n.flags|=128,si(c,!1),e=y.updateQueue,n.updateQueue=e,Bl(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)kf(i,e),i=i.sibling;return J(gt,gt.current&1|2),$e&&sa(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&fe()>Kl&&(n.flags|=128,f=!0,si(c,!1),n.lanes=4194304)}else{if(!f)if(e=jl(y),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Bl(n,e),si(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!$e)return at(n),null}else 2*fe()-c.renderingStartTime>Kl&&i!==536870912&&(n.flags|=128,f=!0,si(c,!1),n.lanes=4194304);c.isBackwards?(y.sibling=n.child,n.child=y):(e=c.last,e!==null?e.sibling=y:n.child=y,c.last=y)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=fe(),e.sibling=null,i=gt.current,J(gt,f?i&1|2:i&1),$e&&sa(n,c.treeForkCount),e):(at(n),null);case 22:case 23:return on(n),Xc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(at(n),n.subtreeFlags&6&&(n.flags|=8192)):at(n),i=n.updateQueue,i!==null&&Bl(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),e!==null&&I(cr),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),la(vt),at(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function vw(e,n){switch(Uc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return la(vt),ce(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Re(n),null;case 31:if(n.memoizedState!==null){if(on(n),n.alternate===null)throw Error(s(340));ir()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(on(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));ir()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return I(gt),null;case 4:return ce(),null;case 10:return la(n.type),null;case 22:case 23:return on(n),Xc(),e!==null&&I(cr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return la(vt),null;case 25:return null;default:return null}}function Qg(e,n){switch(Uc(n),n.tag){case 3:la(vt),ce();break;case 26:case 27:case 5:Re(n);break;case 4:ce();break;case 31:n.memoizedState!==null&&on(n);break;case 13:on(n);break;case 19:I(gt);break;case 10:la(n.type);break;case 22:case 23:on(n),Xc(),e!==null&&I(cr);break;case 24:la(vt)}}function ii(e,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&e)===e){c=void 0;var y=i.create,_=i.inst;c=y(),_.destroy=c}i=i.next}while(i!==f)}}catch(C){Ye(n,n.return,C)}}function Ua(e,n,i){try{var c=n.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&e)===e){var _=c.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,f=n;var q=i,ne=C;try{ne()}catch(se){Ye(f,q,se)}}}c=c.next}while(c!==y)}}catch(se){Ye(n,n.return,se)}}function Jg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Hf(n,i)}catch(c){Ye(e,e.return,c)}}}function Zg(e,n,i){i.props=gr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){Ye(e,n,c)}}function li(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(f){Ye(e,n,f)}}function Yn(e,n){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){Ye(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Ye(e,n,f)}else i.current=null}function em(e){var n=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){Ye(e,e.return,f)}}function Au(e,n,i){try{var c=e.stateNode;Bw(c,e.type,i,n),c[Ft]=n}catch(f){Ye(e,e.return,f)}}function tm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ha(e.type)||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ha(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cu(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=na));else if(c!==4&&(c===27&&Ha(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Cu(e,n,i),e=e.sibling;e!==null;)Cu(e,n,i),e=e.sibling}function Il(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(c!==4&&(c===27&&Ha(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Il(e,n,i),e=e.sibling;e!==null;)Il(e,n,i),e=e.sibling}function nm(e){var n=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Mt(n,c,i),n[Tt]=e,n[Ft]=i}catch(y){Ye(e,e.return,y)}}var ha=!1,xt=!1,Ru=!1,am=typeof WeakSet=="function"?WeakSet:Set,jt=null;function bw(e,n){if(e=e.containerInfo,Ju=oo,e=mf(e),kc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{i.nodeType,y.nodeType}catch{i=null;break e}var _=0,C=-1,q=-1,ne=0,se=0,le=e,ae=null;t:for(;;){for(var re;le!==i||f!==0&&le.nodeType!==3||(C=_+f),le!==y||c!==0&&le.nodeType!==3||(q=_+c),le.nodeType===3&&(_+=le.nodeValue.length),(re=le.firstChild)!==null;)ae=le,le=re;for(;;){if(le===e)break t;if(ae===i&&++ne===f&&(C=_),ae===y&&++se===c&&(q=_),(re=le.nextSibling)!==null)break;le=ae,ae=le.parentNode}le=re}i=C===-1||q===-1?null:{start:C,end:q}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zu={focusedElem:e,selectionRange:i},oo=!1,jt=n;jt!==null;)if(n=jt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,jt=e;else for(;jt!==null;){switch(n=jt,y=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,i=n,f=y.memoizedProps,y=y.memoizedState,c=i.stateNode;try{var me=gr(i.type,f);e=c.getSnapshotBeforeUpdate(me,y),c.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Ye(i,i.return,_e)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)nd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,jt=e;break}jt=n.return}}function rm(e,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ga(e,i),c&4&&ii(5,i);break;case 1:if(ga(e,i),c&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(_){Ye(i,i.return,_)}else{var f=gr(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ye(i,i.return,_)}}c&64&&Jg(i),c&512&&li(i,i.return);break;case 3:if(ga(e,i),c&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Hf(e,n)}catch(_){Ye(i,i.return,_)}}break;case 27:n===null&&c&4&&nm(i);case 26:case 5:ga(e,i),n===null&&c&4&&em(i),c&512&&li(i,i.return);break;case 12:ga(e,i);break;case 31:ga(e,i),c&4&&lm(e,i);break;case 13:ga(e,i),c&4&&om(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Aw.bind(null,i),Yw(e,i))));break;case 22:if(c=i.memoizedState!==null||ha,!c){n=n!==null&&n.memoizedState!==null||xt,f=ha;var y=xt;ha=c,(xt=n)&&!y?ma(e,i,(i.subtreeFlags&8772)!==0):ga(e,i),ha=f,xt=y}break;case 30:break;default:ga(e,i)}}function sm(e){var n=e.alternate;n!==null&&(e.alternate=null,sm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&lc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var lt=null,Yt=!1;function fa(e,n,i){for(i=i.child;i!==null;)im(e,n,i),i=i.sibling}function im(e,n,i){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Bt,i)}catch{}switch(i.tag){case 26:xt||Yn(i,n),fa(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:xt||Yn(i,n);var c=lt,f=Yt;Ha(i.type)&&(lt=i.stateNode,Yt=!1),fa(e,n,i),pi(i.stateNode),lt=c,Yt=f;break;case 5:xt||Yn(i,n);case 6:if(c=lt,f=Yt,lt=null,fa(e,n,i),lt=c,Yt=f,lt!==null)if(Yt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(i.stateNode)}catch(y){Ye(i,n,y)}else try{lt.removeChild(i.stateNode)}catch(y){Ye(i,n,y)}break;case 18:lt!==null&&(Yt?(e=lt,Jm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),hs(e)):Jm(lt,i.stateNode));break;case 4:c=lt,f=Yt,lt=i.stateNode.containerInfo,Yt=!0,fa(e,n,i),lt=c,Yt=f;break;case 0:case 11:case 14:case 15:Ua(2,i,n),xt||Ua(4,i,n),fa(e,n,i);break;case 1:xt||(Yn(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Zg(i,n,c)),fa(e,n,i);break;case 21:fa(e,n,i);break;case 22:xt=(c=xt)||i.memoizedState!==null,fa(e,n,i),xt=c;break;default:fa(e,n,i)}}function lm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hs(e)}catch(i){Ye(n,n.return,i)}}}function om(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hs(e)}catch(i){Ye(n,n.return,i)}}function ww(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new am),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new am),n;default:throw Error(s(435,e.tag))}}function Hl(e,n){var i=ww(e);n.forEach(function(c){if(!i.has(c)){i.add(c);var f=Tw.bind(null,e,c);c.then(f,f)}})}function Wt(e,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],y=e,_=n,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Ha(C.type)){lt=C.stateNode,Yt=!1;break e}break;case 5:lt=C.stateNode,Yt=!1;break e;case 3:case 4:lt=C.stateNode.containerInfo,Yt=!0;break e}C=C.return}if(lt===null)throw Error(s(160));im(y,_,f),lt=null,Yt=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)cm(n,e),n=n.sibling}var Ln=null;function cm(e,n){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wt(n,e),Xt(e),c&4&&(Ua(3,e,e.return),ii(3,e),Ua(5,e,e.return));break;case 1:Wt(n,e),Xt(e),c&512&&(xt||i===null||Yn(i,i.return)),c&64&&ha&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=Ln;if(Wt(n,e),Xt(e),c&512&&(xt||i===null||Yn(i,i.return)),c&4){var y=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":y=f.getElementsByTagName("title")[0],(!y||y[Ds]||y[Tt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(c),f.head.insertBefore(y,f.querySelector("head > title"))),Mt(y,c,i),y[Tt]=e,Nt(y),c=y;break e;case"link":var _=cp("link","href",f).get(c+(i.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&y.getAttribute("rel")===(i.rel==null?null:i.rel)&&y.getAttribute("title")===(i.title==null?null:i.title)&&y.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(C,1);break t}}y=f.createElement(c),Mt(y,c,i),f.head.appendChild(y);break;case"meta":if(_=cp("meta","content",f).get(c+(i.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(i.content==null?null:""+i.content)&&y.getAttribute("name")===(i.name==null?null:i.name)&&y.getAttribute("property")===(i.property==null?null:i.property)&&y.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&y.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(C,1);break t}}y=f.createElement(c),Mt(y,c,i),f.head.appendChild(y);break;default:throw Error(s(468,c))}y[Tt]=e,Nt(y),c=y}e.stateNode=c}else up(f,e.type,e.stateNode);else e.stateNode=op(f,c,e.memoizedProps);else y!==c?(y===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):y.count--,c===null?up(f,e.type,e.stateNode):op(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Au(e,e.memoizedProps,i.memoizedProps)}break;case 27:Wt(n,e),Xt(e),c&512&&(xt||i===null||Yn(i,i.return)),i!==null&&c&4&&Au(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Wt(n,e),Xt(e),c&512&&(xt||i===null||Yn(i,i.return)),e.flags&32){f=e.stateNode;try{Ur(f,"")}catch(me){Ye(e,e.return,me)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,Au(e,f,i!==null?i.memoizedProps:f)),c&1024&&(Ru=!0);break;case 6:if(Wt(n,e),Xt(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(me){Ye(e,e.return,me)}}break;case 3:if(ro=null,f=Ln,Ln=no(n.containerInfo),Wt(n,e),Ln=f,Xt(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{hs(n.containerInfo)}catch(me){Ye(e,e.return,me)}Ru&&(Ru=!1,um(e));break;case 4:c=Ln,Ln=no(e.stateNode.containerInfo),Wt(n,e),Xt(e),Ln=c;break;case 12:Wt(n,e),Xt(e);break;case 31:Wt(n,e),Xt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Hl(e,c)));break;case 13:Wt(n,e),Xt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Gl=fe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Hl(e,c)));break;case 22:f=e.memoizedState!==null;var q=i!==null&&i.memoizedState!==null,ne=ha,se=xt;if(ha=ne||f,xt=se||q,Wt(n,e),xt=se,ha=ne,Xt(e),c&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||q||ha||xt||mr(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){q=i=n;try{if(y=q.stateNode,f)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=q.stateNode;var le=q.memoizedProps.style,ae=le!=null&&le.hasOwnProperty("display")?le.display:null;C.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(me){Ye(q,q.return,me)}}}else if(n.tag===6){if(i===null){q=n;try{q.stateNode.nodeValue=f?"":q.memoizedProps}catch(me){Ye(q,q.return,me)}}}else if(n.tag===18){if(i===null){q=n;try{var re=q.stateNode;f?Zm(re,!0):Zm(q.stateNode,!1)}catch(me){Ye(q,q.return,me)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Hl(e,i))));break;case 19:Wt(n,e),Xt(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Hl(e,c)));break;case 30:break;case 21:break;default:Wt(n,e),Xt(e)}}function Xt(e){var n=e.flags;if(n&2){try{for(var i,c=e.return;c!==null;){if(tm(c)){i=c;break}c=c.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,y=Tu(e);Il(e,y,f);break;case 5:var _=i.stateNode;i.flags&32&&(Ur(_,""),i.flags&=-33);var C=Tu(e);Il(e,C,_);break;case 3:case 4:var q=i.stateNode.containerInfo,ne=Tu(e);Cu(e,ne,q);break;default:throw Error(s(161))}}catch(se){Ye(e,e.return,se)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function um(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;um(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ga(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)rm(e,n.alternate,n),n=n.sibling}function mr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ua(4,n,n.return),mr(n);break;case 1:Yn(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Zg(n,n.return,i),mr(n);break;case 27:pi(n.stateNode);case 26:case 5:Yn(n,n.return),mr(n);break;case 22:n.memoizedState===null&&mr(n);break;case 30:mr(n);break;default:mr(n)}e=e.sibling}}function ma(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,f=e,y=n,_=y.flags;switch(y.tag){case 0:case 11:case 15:ma(f,y,i),ii(4,y);break;case 1:if(ma(f,y,i),c=y,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){Ye(c,c.return,ne)}if(c=y,f=c.updateQueue,f!==null){var C=c.stateNode;try{var q=f.shared.hiddenCallbacks;if(q!==null)for(f.shared.hiddenCallbacks=null,f=0;f<q.length;f++)If(q[f],C)}catch(ne){Ye(c,c.return,ne)}}i&&_&64&&Jg(y),li(y,y.return);break;case 27:nm(y);case 26:case 5:ma(f,y,i),i&&c===null&&_&4&&em(y),li(y,y.return);break;case 12:ma(f,y,i);break;case 31:ma(f,y,i),i&&_&4&&lm(f,y);break;case 13:ma(f,y,i),i&&_&4&&om(f,y);break;case 22:y.memoizedState===null&&ma(f,y,i),li(y,y.return);break;case 30:break;default:ma(f,y,i)}n=n.sibling}}function Ou(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Vs(i))}function Mu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Vs(e))}function zn(e,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dm(e,n,i,c),n=n.sibling}function dm(e,n,i,c){var f=n.flags;switch(n.tag){case 0:case 11:case 15:zn(e,n,i,c),f&2048&&ii(9,n);break;case 1:zn(e,n,i,c);break;case 3:zn(e,n,i,c),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Vs(e)));break;case 12:if(f&2048){zn(e,n,i,c),e=n.stateNode;try{var y=n.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Ye(n,n.return,q)}}else zn(e,n,i,c);break;case 31:zn(e,n,i,c);break;case 13:zn(e,n,i,c);break;case 23:break;case 22:y=n.stateNode,_=n.alternate,n.memoizedState!==null?y._visibility&2?zn(e,n,i,c):oi(e,n):y._visibility&2?zn(e,n,i,c):(y._visibility|=2,ts(e,n,i,c,(n.subtreeFlags&10256)!==0||!1)),f&2048&&Ou(_,n);break;case 24:zn(e,n,i,c),f&2048&&Mu(n.alternate,n);break;default:zn(e,n,i,c)}}function ts(e,n,i,c,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var y=e,_=n,C=i,q=c,ne=_.flags;switch(_.tag){case 0:case 11:case 15:ts(y,_,C,q,f),ii(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?ts(y,_,C,q,f):oi(y,_):(se._visibility|=2,ts(y,_,C,q,f)),f&&ne&2048&&Ou(_.alternate,_);break;case 24:ts(y,_,C,q,f),f&&ne&2048&&Mu(_.alternate,_);break;default:ts(y,_,C,q,f)}n=n.sibling}}function oi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,c=n,f=c.flags;switch(c.tag){case 22:oi(i,c),f&2048&&Ou(c.alternate,c);break;case 24:oi(i,c),f&2048&&Mu(c.alternate,c);break;default:oi(i,c)}n=n.sibling}}var ci=8192;function ns(e,n,i){if(e.subtreeFlags&ci)for(e=e.child;e!==null;)hm(e,n,i),e=e.sibling}function hm(e,n,i){switch(e.tag){case 26:ns(e,n,i),e.flags&ci&&e.memoizedState!==null&&ix(i,Ln,e.memoizedState,e.memoizedProps);break;case 5:ns(e,n,i);break;case 3:case 4:var c=Ln;Ln=no(e.stateNode.containerInfo),ns(e,n,i),Ln=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ci,ci=16777216,ns(e,n,i),ci=c):ns(e,n,i));break;default:ns(e,n,i)}}function fm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ui(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];jt=c,mm(c,e)}fm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gm(e),e=e.sibling}function gm(e){switch(e.tag){case 0:case 11:case 15:ui(e),e.flags&2048&&Ua(9,e,e.return);break;case 3:ui(e);break;case 12:ui(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ql(e)):ui(e);break;default:ui(e)}}function ql(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];jt=c,mm(c,e)}fm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ua(8,n,n.return),ql(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,ql(n));break;default:ql(n)}e=e.sibling}}function mm(e,n){for(;jt!==null;){var i=jt;switch(i.tag){case 0:case 11:case 15:Ua(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Vs(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,jt=c;else e:for(i=e;jt!==null;){c=jt;var f=c.sibling,y=c.return;if(sm(c),c===i){jt=null;break e}if(f!==null){f.return=y,jt=f;break e}jt=y}}}var xw={getCacheForType:function(e){var n=Rt(vt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Rt(vt).controller.signal}},_w=typeof WeakMap=="function"?WeakMap:Map,qe=0,Je=null,Me=null,Ue=0,Ve=0,cn=null,La=!1,as=!1,Du=!1,pa=0,ht=0,za=0,pr=0,Uu=0,un=0,rs=0,di=null,Qt=null,Lu=!1,Gl=0,pm=0,Kl=1/0,Fl=null,$a=null,kt=0,Pa=null,ss=null,ya=0,zu=0,$u=null,ym=null,hi=0,Pu=null;function dn(){return(qe&2)!==0&&Ue!==0?Ue&-Ue:j.T!==null?Ku():Oh()}function vm(){if(un===0)if((Ue&536870912)===0||$e){var e=Ar;Ar<<=1,(Ar&3932160)===0&&(Ar=262144),un=e}else un=536870912;return e=ln.current,e!==null&&(e.flags|=32),un}function Jt(e,n,i){(e===Je&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(is(e,0),Ba(e,Ue,un,!1)),Ms(e,i),((qe&2)===0||e!==Je)&&(e===Je&&((qe&2)===0&&(pr|=i),ht===4&&Ba(e,Ue,un,!1)),Wn(e))}function bm(e,n,i){if((qe&6)!==0)throw Error(s(327));var c=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Mn(e,n),f=c?Ew(e,n):Iu(e,n,!0),y=c;do{if(f===0){as&&!c&&Ba(e,n,0,!1);break}else{if(i=e.current.alternate,y&&!Sw(i)){f=Iu(e,n,!1),y=!1;continue}if(f===2){if(y=n,e.errorRecoveryDisabledLanes&y)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var C=e;f=di;var q=C.current.memoizedState.isDehydrated;if(q&&(is(C,_).flags|=256),_=Iu(C,_,!1),_!==2){if(Du&&!q){C.errorRecoveryDisabledLanes|=y,pr|=y,f=4;break e}y=Qt,Qt=f,y!==null&&(Qt===null?Qt=y:Qt.push.apply(Qt,y))}f=_}if(y=!1,f!==2)continue}}if(f===1){is(e,0),Ba(e,n,0,!0);break}e:{switch(c=e,y=f,y){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ba(c,n,un,!La);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Gl+300-fe(),10<f)){if(Ba(c,n,un,!La),On(c,0,!0)!==0)break e;ya=n,c.timeoutHandle=Xm(wm.bind(null,c,i,Qt,Fl,Lu,n,un,pr,rs,La,y,"Throttled",-0,0),f);break e}wm(c,i,Qt,Fl,Lu,n,un,pr,rs,La,y,null,-0,0)}}break}while(!0);Wn(e)}function wm(e,n,i,c,f,y,_,C,q,ne,se,le,ae,re){if(e.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},hm(n,y,le);var me=(y&62914560)===y?Gl-fe():(y&4194048)===y?pm-fe():0;if(me=lx(le,me),me!==null){ya=y,e.cancelPendingCommit=me(Am.bind(null,e,n,y,i,c,f,_,C,q,se,le,null,ae,re)),Ba(e,y,_,!ne);return}}Am(e,n,y,i,c,f,_,C,q)}function Sw(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],y=f.getSnapshot;f=f.value;try{if(!rn(y(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ba(e,n,i,c){n&=~Uu,n&=~pr,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var f=n;0<f;){var y=31-At(f),_=1<<y;c[y]=-1,f&=~_}i!==0&&Th(e,i,n)}function Vl(){return(qe&6)===0?(fi(0),!1):!0}function Bu(){if(Me!==null){if(Ve===0)var e=Me.return;else e=Me,ia=lr=null,nu(e),Xr=null,Ws=0,e=Me;for(;e!==null;)Qg(e.alternate,e),e=e.return;Me=null}}function is(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,qw(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ya=0,Bu(),Je=e,Me=i=ra(e.current,null),Ue=n,Ve=0,cn=null,La=!1,as=Mn(e,n),Du=!1,rs=un=Uu=pr=za=ht=0,Qt=di=null,Lu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var f=31-At(c),y=1<<f;n|=e[f],c&=~y}return pa=n,gl(),i}function xm(e,n){Ce=null,j.H=ai,n===Wr||n===_l?(n=zf(),Ve=3):n===Gc?(n=zf(),Ve=4):Ve=n===vu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,cn=n,Me===null&&(ht=1,Ll(e,_n(n,e.current)))}function _m(){var e=ln.current;return e===null?!0:(Ue&4194048)===Ue?Nn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===Nn:!1}function Sm(){var e=j.H;return j.H=ai,e===null?ai:e}function km(){var e=j.A;return j.A=xw,e}function Yl(){ht=4,La||(Ue&4194048)!==Ue&&ln.current!==null||(as=!0),(za&134217727)===0&&(pr&134217727)===0||Je===null||Ba(Je,Ue,un,!1)}function Iu(e,n,i){var c=qe;qe|=2;var f=Sm(),y=km();(Je!==e||Ue!==n)&&(Fl=null,is(e,n)),n=!1;var _=ht;e:do try{if(Ve!==0&&Me!==null){var C=Me,q=cn;switch(Ve){case 8:Bu(),_=6;break e;case 3:case 2:case 9:case 6:ln.current===null&&(n=!0);var ne=Ve;if(Ve=0,cn=null,ls(e,C,q,ne),i&&as){_=0;break e}break;default:ne=Ve,Ve=0,cn=null,ls(e,C,q,ne)}}kw(),_=ht;break}catch(se){xm(e,se)}while(!0);return n&&e.shellSuspendCounter++,ia=lr=null,qe=c,j.H=f,j.A=y,Me===null&&(Je=null,Ue=0,gl()),_}function kw(){for(;Me!==null;)Em(Me)}function Ew(e,n){var i=qe;qe|=2;var c=Sm(),f=km();Je!==e||Ue!==n?(Fl=null,Kl=fe()+500,is(e,n)):as=Mn(e,n);e:do try{if(Ve!==0&&Me!==null){n=Me;var y=cn;t:switch(Ve){case 1:Ve=0,cn=null,ls(e,n,y,1);break;case 2:case 9:if(Uf(y)){Ve=0,cn=null,Nm(n);break}n=function(){Ve!==2&&Ve!==9||Je!==e||(Ve=7),Wn(e)},y.then(n,n);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Uf(y)?(Ve=0,cn=null,Nm(n)):(Ve=0,cn=null,ls(e,n,y,7));break;case 5:var _=null;switch(Me.tag){case 26:_=Me.memoizedState;case 5:case 27:var C=Me;if(_?dp(_):C.stateNode.complete){Ve=0,cn=null;var q=C.sibling;if(q!==null)Me=q;else{var ne=C.return;ne!==null?(Me=ne,Wl(ne)):Me=null}break t}}Ve=0,cn=null,ls(e,n,y,5);break;case 6:Ve=0,cn=null,ls(e,n,y,6);break;case 8:Bu(),ht=6;break e;default:throw Error(s(462))}}Nw();break}catch(se){xm(e,se)}while(!0);return ia=lr=null,j.H=c,j.A=f,qe=i,Me!==null?0:(Je=null,Ue=0,gl(),ht)}function Nw(){for(;Me!==null&&!je();)Em(Me)}function Em(e){var n=Wg(e.alternate,e,pa);e.memoizedProps=e.pendingProps,n===null?Wl(e):Me=n}function Nm(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=qg(i,n,n.pendingProps,n.type,void 0,Ue);break;case 11:n=qg(i,n,n.pendingProps,n.type.render,n.ref,Ue);break;case 5:nu(n);default:Qg(i,n),n=Me=kf(n,pa),n=Wg(i,n,pa)}e.memoizedProps=e.pendingProps,n===null?Wl(e):Me=n}function ls(e,n,i,c){ia=lr=null,nu(n),Xr=null,Ws=0;var f=n.return;try{if(gw(e,f,n,i,Ue)){ht=1,Ll(e,_n(i,e.current)),Me=null;return}}catch(y){if(f!==null)throw Me=f,y;ht=1,Ll(e,_n(i,e.current)),Me=null;return}n.flags&32768?($e||c===1?e=!0:as||(Ue&536870912)!==0?e=!1:(La=e=!0,(c===2||c===9||c===3||c===6)&&(c=ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),jm(n,e)):Wl(n)}function Wl(e){var n=e;do{if((n.flags&32768)!==0){jm(n,La);return}e=n.return;var i=yw(n.alternate,n,pa);if(i!==null){Me=i;return}if(n=n.sibling,n!==null){Me=n;return}Me=n=e}while(n!==null);ht===0&&(ht=5)}function jm(e,n){do{var i=vw(e.alternate,e);if(i!==null){i.flags&=32767,Me=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Me=e;return}Me=e=i}while(e!==null);ht=6,Me=null}function Am(e,n,i,c,f,y,_,C,q){e.cancelPendingCommit=null;do Xl();while(kt!==0);if((qe&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(y=n.lanes|n.childLanes,y|=Tc,rb(e,i,y,_,C,q),e===Je&&(Me=Je=null,Ue=0),ss=n,Pa=e,ya=i,zu=y,$u=f,ym=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cw(Pe,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=j.T,j.T=null,f=k.p,k.p=2,_=qe,qe|=4;try{bw(e,n,i)}finally{qe=_,k.p=f,j.T=c}}kt=1,Tm(),Cm(),Rm()}}function Tm(){if(kt===1){kt=0;var e=Pa,n=ss,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var c=k.p;k.p=2;var f=qe;qe|=4;try{cm(n,e);var y=Zu,_=mf(e.containerInfo),C=y.focusedElem,q=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&gf(C.ownerDocument.documentElement,C)){if(q!==null&&kc(C)){var ne=q.start,se=q.end;if(se===void 0&&(se=ne),"selectionStart"in C)C.selectionStart=ne,C.selectionEnd=Math.min(se,C.value.length);else{var le=C.ownerDocument||document,ae=le&&le.defaultView||window;if(ae.getSelection){var re=ae.getSelection(),me=C.textContent.length,_e=Math.min(q.start,me),Qe=q.end===void 0?_e:Math.min(q.end,me);!re.extend&&_e>Qe&&(_=Qe,Qe=_e,_e=_);var Q=ff(C,_e),V=ff(C,Qe);if(Q&&V&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var te=le.createRange();te.setStart(Q.node,Q.offset),re.removeAllRanges(),_e>Qe?(re.addRange(te),re.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),re.addRange(te))}}}}for(le=[],re=C;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<le.length;C++){var ie=le[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}oo=!!Ju,Zu=Ju=null}finally{qe=f,k.p=c,j.T=i}}e.current=n,kt=2}}function Cm(){if(kt===2){kt=0;var e=Pa,n=ss,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var c=k.p;k.p=2;var f=qe;qe|=4;try{rm(e,n.alternate,n)}finally{qe=f,k.p=c,j.T=i}}kt=3}}function Rm(){if(kt===4||kt===3){kt=0,ve();var e=Pa,n=ss,i=ya,c=ym;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?kt=5:(kt=0,ss=Pa=null,Om(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&($a=null),sc(i),n=n.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Bt,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=j.T,f=k.p,k.p=2,j.T=null;try{for(var y=e.onRecoverableError,_=0;_<c.length;_++){var C=c[_];y(C.value,{componentStack:C.stack})}}finally{j.T=n,k.p=f}}(ya&3)!==0&&Xl(),Wn(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===Pu?hi++:(hi=0,Pu=e):hi=0,fi(0)}}function Om(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Vs(n)))}function Xl(){return Tm(),Cm(),Rm(),Mm()}function Mm(){if(kt!==5)return!1;var e=Pa,n=zu;zu=0;var i=sc(ya),c=j.T,f=k.p;try{k.p=32>i?32:i,j.T=null,i=$u,$u=null;var y=Pa,_=ya;if(kt=0,ss=Pa=null,ya=0,(qe&6)!==0)throw Error(s(331));var C=qe;if(qe|=4,gm(y.current),dm(y,y.current,_,i),qe=C,fi(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Bt,y)}catch{}return!0}finally{k.p=f,j.T=c,Om(e,n)}}function Dm(e,n,i){n=_n(i,n),n=yu(e.stateNode,n,2),e=Oa(e,n,2),e!==null&&(Ms(e,2),Wn(e))}function Ye(e,n,i){if(e.tag===3)Dm(e,e,i);else for(;n!==null;){if(n.tag===3){Dm(n,e,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&($a===null||!$a.has(c))){e=_n(i,e),i=Ug(2),c=Oa(n,i,2),c!==null&&(Lg(i,c,n,e),Ms(c,2),Wn(c));break}}n=n.return}}function Hu(e,n,i){var c=e.pingCache;if(c===null){c=e.pingCache=new _w;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(i)||(Du=!0,f.add(i),e=jw.bind(null,e,n,i),n.then(e,e))}function jw(e,n,i){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Je===e&&(Ue&i)===i&&(ht===4||ht===3&&(Ue&62914560)===Ue&&300>fe()-Gl?(qe&2)===0&&is(e,0):Uu|=i,rs===Ue&&(rs=0)),Wn(e)}function Um(e,n){n===0&&(n=Kn()),e=rr(e,n),e!==null&&(Ms(e,n),Wn(e))}function Aw(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Um(e,i)}function Tw(e,n){var i=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),Um(e,i)}function Cw(e,n){return de(e,n)}var Ql=null,os=null,qu=!1,Jl=!1,Gu=!1,Ia=0;function Wn(e){e!==os&&e.next===null&&(os===null?Ql=os=e:os=os.next=e),Jl=!0,qu||(qu=!0,Ow())}function fi(e,n){if(!Gu&&Jl){Gu=!0;do for(var i=!1,c=Ql;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var y=0;else{var _=c.suspendedLanes,C=c.pingedLanes;y=(1<<31-At(42|e)+1)-1,y&=f&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(i=!0,Pm(c,y))}else y=Ue,y=On(c,c===Je?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Mn(c,y)||(i=!0,Pm(c,y));c=c.next}while(i);Gu=!1}}function Rw(){Lm()}function Lm(){Jl=qu=!1;var e=0;Ia!==0&&Hw()&&(e=Ia);for(var n=fe(),i=null,c=Ql;c!==null;){var f=c.next,y=zm(c,n);y===0?(c.next=null,i===null?Ql=f:i.next=f,f===null&&(os=i)):(i=c,(e!==0||(y&3)!==0)&&(Jl=!0)),c=f}kt!==0&&kt!==5||fi(e),Ia!==0&&(Ia=0)}function zm(e,n){for(var i=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var _=31-At(y),C=1<<_,q=f[_];q===-1?((C&i)===0||(C&c)!==0)&&(f[_]=nl(C,n)):q<=n&&(e.expiredLanes|=C),y&=~C}if(n=Je,i=Ue,i=On(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===n&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ge(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Mn(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(c!==null&&ge(c),sc(i)){case 2:case 8:i=vn;break;case 32:i=Pe;break;case 268435456:i=yt;break;default:i=Pe}return c=$m.bind(null,e),i=de(i,c),e.callbackPriority=n,e.callbackNode=i,n}return c!==null&&c!==null&&ge(c),e.callbackPriority=2,e.callbackNode=null,2}function $m(e,n){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Xl()&&e.callbackNode!==i)return null;var c=Ue;return c=On(e,e===Je?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(bm(e,c,n),zm(e,fe()),e.callbackNode!=null&&e.callbackNode===i?$m.bind(null,e):null)}function Pm(e,n){if(Xl())return null;bm(e,n,!0)}function Ow(){Gw(function(){(qe&6)!==0?de(st,Rw):Lm()})}function Ku(){if(Ia===0){var e=Vr;e===0&&(e=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Ia=e}return Ia}function Bm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:il(""+e)}function Im(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function Mw(e,n,i,c,f){if(n==="submit"&&i&&i.stateNode===f){var y=Bm((f[Ft]||null).action),_=c.submitter;_&&(n=(n=_[Ft]||null)?Bm(n.formAction):_.getAttribute("formAction"),n!==null&&(y=n,_=null));var C=new ul("action","action",null,c,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ia!==0){var q=_?Im(f,_):new FormData(f);du(i,{pending:!0,data:q,method:f.method,action:y},null,q)}}else typeof y=="function"&&(C.preventDefault(),q=_?Im(f,_):new FormData(f),du(i,{pending:!0,data:q,method:f.method,action:y},y,q))},currentTarget:f}]})}}for(var Fu=0;Fu<Ac.length;Fu++){var Vu=Ac[Fu],Dw=Vu.toLowerCase(),Uw=Vu[0].toUpperCase()+Vu.slice(1);Un(Dw,"on"+Uw)}Un(vf,"onAnimationEnd"),Un(bf,"onAnimationIteration"),Un(wf,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(Qb,"onTransitionRun"),Un(Jb,"onTransitionStart"),Un(Zb,"onTransitionCancel"),Un(xf,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),er("onBeforeInput",["compositionend","keypress","textInput","paste"]),er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gi));function Hm(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],f=c.event;c=c.listeners;e:{var y=void 0;if(n)for(var _=c.length-1;0<=_;_--){var C=c[_],q=C.instance,ne=C.currentTarget;if(C=C.listener,q!==y&&f.isPropagationStopped())break e;y=C,f.currentTarget=ne;try{y(f)}catch(se){fl(se)}f.currentTarget=null,y=q}else for(_=0;_<c.length;_++){if(C=c[_],q=C.instance,ne=C.currentTarget,C=C.listener,q!==y&&f.isPropagationStopped())break e;y=C,f.currentTarget=ne;try{y(f)}catch(se){fl(se)}f.currentTarget=null,y=q}}}}function De(e,n){var i=n[ic];i===void 0&&(i=n[ic]=new Set);var c=e+"__bubble";i.has(c)||(qm(n,e,2,!1),i.add(c))}function Yu(e,n,i){var c=0;n&&(c|=4),qm(i,e,c,n)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[Zl]){e[Zl]=!0,Uh.forEach(function(i){i!=="selectionchange"&&(Lw.has(i)||Yu(i,!1,e),Yu(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Zl]||(n[Zl]=!0,Yu("selectionchange",!1,n))}}function qm(e,n,i,c){switch(vp(n)){case 2:var f=ux;break;case 8:f=dx;break;default:f=ud}i=f.bind(null,n,i,e),f=void 0,!mc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Xu(e,n,i,c,f){var y=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var C=c.stateNode.containerInfo;if(C===f)break;if(_===4)for(_=c.return;_!==null;){var q=_.tag;if((q===3||q===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;C!==null;){if(_=Cr(C),_===null)return;if(q=_.tag,q===5||q===6||q===26||q===27){c=y=_;continue e}C=C.parentNode}}c=c.return}Vh(function(){var ne=y,se=fc(i),le=[];e:{var ae=_f.get(e);if(ae!==void 0){var re=ul,me=e;switch(e){case"keypress":if(ol(i)===0)break e;case"keydown":case"keyup":re=Tb;break;case"focusin":me="focus",re=bc;break;case"focusout":me="blur",re=bc;break;case"beforeblur":case"afterblur":re=bc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Ob;break;case vf:case bf:case wf:re=wb;break;case xf:re=Db;break;case"scroll":case"scrollend":re=mb;break;case"wheel":re=Lb;break;case"copy":case"cut":case"paste":re=_b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Jh;break;case"toggle":case"beforetoggle":re=$b}var _e=(n&4)!==0,Qe=!_e&&(e==="scroll"||e==="scrollend"),Q=_e?ae!==null?ae+"Capture":null:ae;_e=[];for(var V=ne,te;V!==null;){var ie=V;if(te=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||te===null||Q===null||(ie=Ls(V,Q),ie!=null&&_e.push(mi(V,ie,te))),Qe)break;V=V.return}0<_e.length&&(ae=new re(ae,me,null,i,se),le.push({event:ae,listeners:_e}))}}if((n&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",ae&&i!==hc&&(me=i.relatedTarget||i.fromElement)&&(Cr(me)||me[Tr]))break e;if((re||ae)&&(ae=se.window===se?se:(ae=se.ownerDocument)?ae.defaultView||ae.parentWindow:window,re?(me=i.relatedTarget||i.toElement,re=ne,me=me?Cr(me):null,me!==null&&(Qe=o(me),_e=me.tag,me!==Qe||_e!==5&&_e!==27&&_e!==6)&&(me=null)):(re=null,me=ne),re!==me)){if(_e=Xh,ie="onMouseLeave",Q="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Jh,ie="onPointerLeave",Q="onPointerEnter",V="pointer"),Qe=re==null?ae:Us(re),te=me==null?ae:Us(me),ae=new _e(ie,V+"leave",re,i,se),ae.target=Qe,ae.relatedTarget=te,ie=null,Cr(se)===ne&&(_e=new _e(Q,V+"enter",me,i,se),_e.target=te,_e.relatedTarget=Qe,ie=_e),Qe=ie,re&&me)t:{for(_e=zw,Q=re,V=me,te=0,ie=Q;ie;ie=_e(ie))te++;ie=0;for(var xe=V;xe;xe=_e(xe))ie++;for(;0<te-ie;)Q=_e(Q),te--;for(;0<ie-te;)V=_e(V),ie--;for(;te--;){if(Q===V||V!==null&&Q===V.alternate){_e=Q;break t}Q=_e(Q),V=_e(V)}_e=null}else _e=null;re!==null&&Gm(le,ae,re,_e,!1),me!==null&&Qe!==null&&Gm(le,Qe,me,_e,!0)}}e:{if(ae=ne?Us(ne):window,re=ae.nodeName&&ae.nodeName.toLowerCase(),re==="select"||re==="input"&&ae.type==="file")var Be=lf;else if(rf(ae))if(of)Be=Yb;else{Be=Fb;var ye=Kb}else re=ae.nodeName,!re||re.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&dc(ne.elementType)&&(Be=lf):Be=Vb;if(Be&&(Be=Be(e,ne))){sf(le,Be,i,se);break e}ye&&ye(e,ae,ne),e==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&uc(ae,"number",ae.value)}switch(ye=ne?Us(ne):window,e){case"focusin":(rf(ye)||ye.contentEditable==="true")&&(Pr=ye,Ec=ne,Gs=null);break;case"focusout":Gs=Ec=Pr=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,pf(le,i,se);break;case"selectionchange":if(Xb)break;case"keydown":case"keyup":pf(le,i,se)}var Oe;if(xc)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else $r?nf(e,i)&&(Le="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(Zh&&i.locale!=="ko"&&($r||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&$r&&(Oe=Yh()):(Ea=se,pc="value"in Ea?Ea.value:Ea.textContent,$r=!0)),ye=eo(ne,Le),0<ye.length&&(Le=new Qh(Le,e,null,i,se),le.push({event:Le,listeners:ye}),Oe?Le.data=Oe:(Oe=af(i),Oe!==null&&(Le.data=Oe)))),(Oe=Bb?Ib(e,i):Hb(e,i))&&(Le=eo(ne,"onBeforeInput"),0<Le.length&&(ye=new Qh("onBeforeInput","beforeinput",null,i,se),le.push({event:ye,listeners:Le}),ye.data=Oe)),Mw(le,e,ne,i,se)}Hm(le,n)})}function mi(e,n,i){return{instance:e,listener:n,currentTarget:i}}function eo(e,n){for(var i=n+"Capture",c=[];e!==null;){var f=e,y=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=Ls(e,i),f!=null&&c.unshift(mi(e,f,y)),f=Ls(e,n),f!=null&&c.push(mi(e,f,y))),e.tag===3)return c;e=e.return}return[]}function zw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gm(e,n,i,c,f){for(var y=n._reactName,_=[];i!==null&&i!==c;){var C=i,q=C.alternate,ne=C.stateNode;if(C=C.tag,q!==null&&q===c)break;C!==5&&C!==26&&C!==27||ne===null||(q=ne,f?(ne=Ls(i,y),ne!=null&&_.unshift(mi(i,ne,q))):f||(ne=Ls(i,y),ne!=null&&_.push(mi(i,ne,q)))),i=i.return}_.length!==0&&e.push({event:n,listeners:_})}var $w=/\r\n?/g,Pw=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace($w,`
`).replace(Pw,"")}function Fm(e,n){return n=Km(n),Km(e)===n}function Xe(e,n,i,c,f,y){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Ur(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Ur(e,""+c);break;case"className":rl(e,"class",c);break;case"tabIndex":rl(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":rl(e,i,c);break;case"style":Kh(e,c,y);break;case"data":if(n!=="object"){rl(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=il(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(i==="formAction"?(n!=="input"&&Xe(e,n,"name",f.name,f,null),Xe(e,n,"formEncType",f.formEncType,f,null),Xe(e,n,"formMethod",f.formMethod,f,null),Xe(e,n,"formTarget",f.formTarget,f,null)):(Xe(e,n,"encType",f.encType,f,null),Xe(e,n,"method",f.method,f,null),Xe(e,n,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=il(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=na);break;case"onScroll":c!=null&&De("scroll",e);break;case"onScrollEnd":c!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=il(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":De("beforetoggle",e),De("toggle",e),al(e,"popover",c);break;case"xlinkActuate":ta(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ta(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ta(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ta(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ta(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ta(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ta(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ta(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ta(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":al(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=fb.get(i)||i,al(e,i,c))}}function Qu(e,n,i,c,f,y){switch(i){case"style":Kh(e,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof c=="string"?Ur(e,c):(typeof c=="number"||typeof c=="bigint")&&Ur(e,""+c);break;case"onScroll":c!=null&&De("scroll",e);break;case"onScrollEnd":c!=null&&De("scrollend",e);break;case"onClick":c!=null&&(e.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),y=e[Ft]||null,y=y!=null?y[i]:null,typeof y=="function"&&e.removeEventListener(n,y,f),typeof c=="function")){typeof y!="function"&&y!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,c,f);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):al(e,i,c)}}}function Mt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var c=!1,f=!1,y;for(y in i)if(i.hasOwnProperty(y)){var _=i[y];if(_!=null)switch(y){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Xe(e,n,y,_,i,null)}}f&&Xe(e,n,"srcSet",i.srcSet,i,null),c&&Xe(e,n,"src",i.src,i,null);return;case"input":De("invalid",e);var C=y=_=f=null,q=null,ne=null;for(c in i)if(i.hasOwnProperty(c)){var se=i[c];if(se!=null)switch(c){case"name":f=se;break;case"type":_=se;break;case"checked":q=se;break;case"defaultChecked":ne=se;break;case"value":y=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,n));break;default:Xe(e,n,c,se,i,null)}}Ih(e,y,C,q,ne,_,f,!1);return;case"select":De("invalid",e),c=_=y=null;for(f in i)if(i.hasOwnProperty(f)&&(C=i[f],C!=null))switch(f){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":c=C;default:Xe(e,n,f,C,i,null)}n=y,i=_,e.multiple=!!c,n!=null?Dr(e,!!c,n,!1):i!=null&&Dr(e,!!c,i,!0);return;case"textarea":De("invalid",e),y=f=c=null;for(_ in i)if(i.hasOwnProperty(_)&&(C=i[_],C!=null))switch(_){case"value":c=C;break;case"defaultValue":f=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Xe(e,n,_,C,i,null)}qh(e,c,f,y);return;case"option":for(q in i)if(i.hasOwnProperty(q)&&(c=i[q],c!=null))switch(q){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Xe(e,n,q,c,i,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(c=0;c<gi.length;c++)De(gi[c],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in i)if(i.hasOwnProperty(ne)&&(c=i[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Xe(e,n,ne,c,i,null)}return;default:if(dc(n)){for(se in i)i.hasOwnProperty(se)&&(c=i[se],c!==void 0&&Qu(e,n,se,c,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(c=i[C],c!=null&&Xe(e,n,C,c,i,null))}function Bw(e,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,_=null,C=null,q=null,ne=null,se=null;for(re in i){var le=i[re];if(i.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":q=le;default:c.hasOwnProperty(re)||Xe(e,n,re,null,c,le)}}for(var ae in c){var re=c[ae];if(le=i[ae],c.hasOwnProperty(ae)&&(re!=null||le!=null))switch(ae){case"type":y=re;break;case"name":f=re;break;case"checked":ne=re;break;case"defaultChecked":se=re;break;case"value":_=re;break;case"defaultValue":C=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,n));break;default:re!==le&&Xe(e,n,ae,re,c,le)}}cc(e,_,C,q,ne,se,y,f);return;case"select":re=_=C=ae=null;for(y in i)if(q=i[y],i.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":re=q;default:c.hasOwnProperty(y)||Xe(e,n,y,null,c,q)}for(f in c)if(y=c[f],q=i[f],c.hasOwnProperty(f)&&(y!=null||q!=null))switch(f){case"value":ae=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==q&&Xe(e,n,f,y,c,q)}n=C,i=_,c=re,ae!=null?Dr(e,!!i,ae,!1):!!c!=!!i&&(n!=null?Dr(e,!!i,n,!0):Dr(e,!!i,i?[]:"",!1));return;case"textarea":re=ae=null;for(C in i)if(f=i[C],i.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Xe(e,n,C,null,c,f)}for(_ in c)if(f=c[_],y=i[_],c.hasOwnProperty(_)&&(f!=null||y!=null))switch(_){case"value":ae=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==y&&Xe(e,n,_,f,c,y)}Hh(e,ae,re);return;case"option":for(var me in i)if(ae=i[me],i.hasOwnProperty(me)&&ae!=null&&!c.hasOwnProperty(me))switch(me){case"selected":e.selected=!1;break;default:Xe(e,n,me,null,c,ae)}for(q in c)if(ae=c[q],re=i[q],c.hasOwnProperty(q)&&ae!==re&&(ae!=null||re!=null))switch(q){case"selected":e.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Xe(e,n,q,ae,c,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in i)ae=i[_e],i.hasOwnProperty(_e)&&ae!=null&&!c.hasOwnProperty(_e)&&Xe(e,n,_e,null,c,ae);for(ne in c)if(ae=c[ne],re=i[ne],c.hasOwnProperty(ne)&&ae!==re&&(ae!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,n));break;default:Xe(e,n,ne,ae,c,re)}return;default:if(dc(n)){for(var Qe in i)ae=i[Qe],i.hasOwnProperty(Qe)&&ae!==void 0&&!c.hasOwnProperty(Qe)&&Qu(e,n,Qe,void 0,c,ae);for(se in c)ae=c[se],re=i[se],!c.hasOwnProperty(se)||ae===re||ae===void 0&&re===void 0||Qu(e,n,se,ae,c,re);return}}for(var Q in i)ae=i[Q],i.hasOwnProperty(Q)&&ae!=null&&!c.hasOwnProperty(Q)&&Xe(e,n,Q,null,c,ae);for(le in c)ae=c[le],re=i[le],!c.hasOwnProperty(le)||ae===re||ae==null&&re==null||Xe(e,n,le,ae,c,re)}function Vm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Iw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var f=i[c],y=f.transferSize,_=f.initiatorType,C=f.duration;if(y&&C&&Vm(_)){for(_=0,C=f.responseEnd,c+=1;c<i.length;c++){var q=i[c],ne=q.startTime;if(ne>C)break;var se=q.transferSize,le=q.initiatorType;se&&Vm(le)&&(q=q.responseEnd,_+=se*(q<C?1:(C-ne)/(q-ne)))}if(--c,n+=8*(y+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ju=null,Zu=null;function to(e){return e.nodeType===9?e:e.ownerDocument}function Ym(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ed(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var td=null;function Hw(){var e=window.event;return e&&e.type==="popstate"?e===td?!1:(td=e,!0):(td=null,!1)}var Xm=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,Qm=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qm<"u"?function(e){return Qm.resolve(null).then(e).catch(Kw)}:Xm;function Kw(e){setTimeout(function(){throw e})}function Ha(e){return e==="head"}function Jm(e,n){var i=n,c=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(c===0){e.removeChild(f),hs(n);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")pi(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,pi(i);for(var y=i.firstChild;y;){var _=y.nextSibling,C=y.nodeName;y[Ds]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||i.removeChild(y),y=_}}else i==="body"&&pi(e.ownerDocument.body);i=f}while(i);hs(n)}function Zm(e,n){var i=e;e=0;do{var c=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=c}while(i)}function nd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":nd(i),lc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Fw(e,n,i,c){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Ds])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function Vw(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=jn(e.nextSibling),e===null))return null;return e}function ep(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=jn(e.nextSibling),e===null))return null;return e}function ad(e){return e.data==="$?"||e.data==="$~"}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Yw(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function jn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var sd=null;function tp(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return jn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function np(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function ap(e,n,i){switch(n=to(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function pi(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);lc(e)}var An=new Map,rp=new Set;function no(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var va=k.d;k.d={f:Ww,r:Xw,D:Qw,C:Jw,L:Zw,m:ex,X:nx,S:tx,M:ax};function Ww(){var e=va.f(),n=Vl();return e||n}function Xw(e){var n=Rr(e);n!==null&&n.tag===5&&n.type==="form"?xg(n):va.r(e)}var cs=typeof document>"u"?null:document;function sp(e,n,i){var c=cs;if(c&&typeof n=="string"&&n){var f=wn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),rp.has(f)||(rp.add(f),e={rel:e,crossOrigin:i,href:n},c.querySelector(f)===null&&(n=c.createElement("link"),Mt(n,"link",e),Nt(n),c.head.appendChild(n)))}}function Qw(e){va.D(e),sp("dns-prefetch",e,null)}function Jw(e,n){va.C(e,n),sp("preconnect",e,n)}function Zw(e,n,i){va.L(e,n,i);var c=cs;if(c&&e&&n){var f='link[rel="preload"][as="'+wn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+wn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+wn(i.imageSizes)+'"]')):f+='[href="'+wn(e)+'"]';var y=f;switch(n){case"style":y=us(e);break;case"script":y=ds(e)}An.has(y)||(e=v({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),An.set(y,e),c.querySelector(f)!==null||n==="style"&&c.querySelector(yi(y))||n==="script"&&c.querySelector(vi(y))||(n=c.createElement("link"),Mt(n,"link",e),Nt(n),c.head.appendChild(n)))}}function ex(e,n){va.m(e,n);var i=cs;if(i&&e){var c=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+wn(c)+'"][href="'+wn(e)+'"]',y=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ds(e)}if(!An.has(y)&&(e=v({rel:"modulepreload",href:e},n),An.set(y,e),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vi(y)))return}c=i.createElement("link"),Mt(c,"link",e),Nt(c),i.head.appendChild(c)}}}function tx(e,n,i){va.S(e,n,i);var c=cs;if(c&&e){var f=Or(c).hoistableStyles,y=us(e);n=n||"default";var _=f.get(y);if(!_){var C={loading:0,preload:null};if(_=c.querySelector(yi(y)))C.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},i),(i=An.get(y))&&id(e,i);var q=_=c.createElement("link");Nt(q),Mt(q,"link",e),q._p=new Promise(function(ne,se){q.onload=ne,q.onerror=se}),q.addEventListener("load",function(){C.loading|=1}),q.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ao(_,n,c)}_={type:"stylesheet",instance:_,count:1,state:C},f.set(y,_)}}}function nx(e,n){va.X(e,n);var i=cs;if(i&&e){var c=Or(i).hoistableScripts,f=ds(e),y=c.get(f);y||(y=i.querySelector(vi(f)),y||(e=v({src:e,async:!0},n),(n=An.get(f))&&ld(e,n),y=i.createElement("script"),Nt(y),Mt(y,"link",e),i.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function ax(e,n){va.M(e,n);var i=cs;if(i&&e){var c=Or(i).hoistableScripts,f=ds(e),y=c.get(f);y||(y=i.querySelector(vi(f)),y||(e=v({src:e,async:!0,type:"module"},n),(n=An.get(f))&&ld(e,n),y=i.createElement("script"),Nt(y),Mt(y,"link",e),i.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(f,y))}}function ip(e,n,i,c){var f=(f=oe.current)?no(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=us(i.href),i=Or(f).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=us(i.href);var y=Or(f).hoistableStyles,_=y.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,_),(y=f.querySelector(yi(e)))&&!y._p&&(_.instance=y,_.state.loading=5),An.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},An.set(e,i),y||rx(f,e,i,_.state))),n&&c===null)throw Error(s(528,""));return _}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ds(i),i=Or(f).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function us(e){return'href="'+wn(e)+'"'}function yi(e){return'link[rel="stylesheet"]['+e+"]"}function lp(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function rx(e,n,i,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Mt(n,"link",i),Nt(n),e.head.appendChild(n))}function ds(e){return'[src="'+wn(e)+'"]'}function vi(e){return"script[async]"+e}function op(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+wn(i.href)+'"]');if(c)return n.instance=c,Nt(c),c;var f=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Nt(c),Mt(c,"style",f),ao(c,i.precedence,e),n.instance=c;case"stylesheet":f=us(i.href);var y=e.querySelector(yi(f));if(y)return n.state.loading|=4,n.instance=y,Nt(y),y;c=lp(i),(f=An.get(f))&&id(c,f),y=(e.ownerDocument||e).createElement("link"),Nt(y);var _=y;return _._p=new Promise(function(C,q){_.onload=C,_.onerror=q}),Mt(y,"link",c),n.state.loading|=4,ao(y,i.precedence,e),n.instance=y;case"script":return y=ds(i.src),(f=e.querySelector(vi(y)))?(n.instance=f,Nt(f),f):(c=i,(f=An.get(y))&&(c=v({},i),ld(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),Nt(f),Mt(f,"link",c),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ao(c,i.precedence,e));return n.instance}function ao(e,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,y=f,_=0;_<c.length;_++){var C=c[_];if(C.dataset.precedence===n)y=C;else if(y!==f)break}y?y.parentNode.insertBefore(e,y.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function id(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ro=null;function cp(e,n,i){if(ro===null){var c=new Map,f=ro=new Map;f.set(i,c)}else f=ro,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var y=i[f];if(!(y[Ds]||y[Tt]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(n)||"";_=e+_;var C=c.get(_);C?C.push(y):c.set(_,[y])}}return c}function up(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function sx(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function dp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ix(e,n,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=us(c.href),y=n.querySelector(yi(f));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=so.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=y,Nt(y);return}y=n.ownerDocument||n,c=lp(c),(f=An.get(f))&&id(c,f),y=y.createElement("link"),Nt(y);var _=y;_._p=new Promise(function(C,q){_.onload=C,_.onerror=q}),Mt(y,"link",c),i.instance=y}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=so.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var od=0;function lx(e,n){return e.stylesheets&&e.count===0&&lo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var c=setTimeout(function(){if(e.stylesheets&&lo(e,e.stylesheets),e.unsuspend){var y=e.unsuspend;e.unsuspend=null,y()}},6e4+n);0<e.imgBytes&&od===0&&(od=62500*Iw());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&lo(e,e.stylesheets),e.unsuspend)){var y=e.unsuspend;e.unsuspend=null,y()}},(e.imgBytes>od?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function so(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var io=null;function lo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,io=new Map,n.forEach(ox,e),io=null,so.call(e))}function ox(e,n){if(!(n.state.loading&4)){var i=io.get(e);if(i)var c=i.get(null);else{i=new Map,io.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var _=f[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),c=_)}c&&i.set(null,c)}f=n.instance,_=f.getAttribute("data-precedence"),y=i.get(_)||c,y===c&&i.set(null,f),i.set(_,f),this.count++,c=so.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),y?y.parentNode.insertBefore(f,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var bi={$$typeof:M,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function cx(e,n,i,c,f,y,_,C,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function hp(e,n,i,c,f,y,_,C,q,ne,se,le){return e=new cx(e,n,i,_,q,ne,se,le,C),n=1,y===!0&&(n|=24),y=sn(3,null,null,n),e.current=y,y.stateNode=e,n=Ic(),n.refCount++,e.pooledCache=n,n.refCount++,y.memoizedState={element:c,isDehydrated:i,cache:n},Kc(y),e}function fp(e){return e?(e=Hr,e):Hr}function gp(e,n,i,c,f,y){f=fp(f),c.context===null?c.context=f:c.pendingContext=f,c=Ra(n),c.payload={element:i},y=y===void 0?null:y,y!==null&&(c.callback=y),i=Oa(e,c,n),i!==null&&(Jt(i,e,n),Qs(i,e,n))}function mp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function cd(e,n){mp(e,n),(e=e.alternate)&&mp(e,n)}function pp(e){if(e.tag===13||e.tag===31){var n=rr(e,67108864);n!==null&&Jt(n,e,67108864),cd(e,67108864)}}function yp(e){if(e.tag===13||e.tag===31){var n=dn();n=rc(n);var i=rr(e,n);i!==null&&Jt(i,e,n),cd(e,n)}}var oo=!0;function ux(e,n,i,c){var f=j.T;j.T=null;var y=k.p;try{k.p=2,ud(e,n,i,c)}finally{k.p=y,j.T=f}}function dx(e,n,i,c){var f=j.T;j.T=null;var y=k.p;try{k.p=8,ud(e,n,i,c)}finally{k.p=y,j.T=f}}function ud(e,n,i,c){if(oo){var f=dd(c);if(f===null)Xu(e,n,c,co,i),bp(e,c);else if(fx(f,e,n,i,c))c.stopPropagation();else if(bp(e,c),n&4&&-1<hx.indexOf(e)){for(;f!==null;){var y=Rr(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=zt(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var q=1<<31-At(_);C.entanglements[1]|=q,_&=~q}Wn(y),(qe&6)===0&&(Kl=fe()+500,fi(0))}}break;case 31:case 13:C=rr(y,2),C!==null&&Jt(C,y,2),Vl(),cd(y,2)}if(y=dd(c),y===null&&Xu(e,n,c,co,i),y===f)break;f=y}f!==null&&c.stopPropagation()}else Xu(e,n,c,null,i)}}function dd(e){return e=fc(e),hd(e)}var co=null;function hd(e){if(co=null,e=Cr(e),e!==null){var n=o(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=u(n),e!==null)return e;e=null}else if(i===31){if(e=d(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return co=e,null}function vp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case st:return 2;case vn:return 8;case Pe:case tn:return 32;case yt:return 268435456;default:return 32}default:return 32}}var fd=!1,qa=null,Ga=null,Ka=null,wi=new Map,xi=new Map,Fa=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bp(e,n){switch(e){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":wi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xi.delete(n.pointerId)}}function _i(e,n,i,c,f,y){return e===null||e.nativeEvent!==y?(e={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},n!==null&&(n=Rr(n),n!==null&&pp(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function fx(e,n,i,c,f){switch(n){case"focusin":return qa=_i(qa,e,n,i,c,f),!0;case"dragenter":return Ga=_i(Ga,e,n,i,c,f),!0;case"mouseover":return Ka=_i(Ka,e,n,i,c,f),!0;case"pointerover":var y=f.pointerId;return wi.set(y,_i(wi.get(y)||null,e,n,i,c,f)),!0;case"gotpointercapture":return y=f.pointerId,xi.set(y,_i(xi.get(y)||null,e,n,i,c,f)),!0}return!1}function wp(e){var n=Cr(e.target);if(n!==null){var i=o(n);if(i!==null){if(n=i.tag,n===13){if(n=u(i),n!==null){e.blockedOn=n,Mh(e.priority,function(){yp(i)});return}}else if(n===31){if(n=d(i),n!==null){e.blockedOn=n,Mh(e.priority,function(){yp(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=dd(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);hc=c,i.target.dispatchEvent(c),hc=null}else return n=Rr(i),n!==null&&pp(n),e.blockedOn=i,!1;n.shift()}return!0}function xp(e,n,i){uo(e)&&i.delete(n)}function gx(){fd=!1,qa!==null&&uo(qa)&&(qa=null),Ga!==null&&uo(Ga)&&(Ga=null),Ka!==null&&uo(Ka)&&(Ka=null),wi.forEach(xp),xi.forEach(xp)}function ho(e,n){e.blockedOn===n&&(e.blockedOn=null,fd||(fd=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,gx)))}var fo=null;function _p(e){fo!==e&&(fo=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){fo===e&&(fo=null);for(var n=0;n<e.length;n+=3){var i=e[n],c=e[n+1],f=e[n+2];if(typeof c!="function"){if(hd(c||i)===null)continue;break}var y=Rr(i);y!==null&&(e.splice(n,3),n-=3,du(y,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function hs(e){function n(q){return ho(q,e)}qa!==null&&ho(qa,e),Ga!==null&&ho(Ga,e),Ka!==null&&ho(Ka,e),wi.forEach(n),xi.forEach(n);for(var i=0;i<Fa.length;i++){var c=Fa[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Fa.length&&(i=Fa[0],i.blockedOn===null);)wp(i),i.blockedOn===null&&Fa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],y=i[c+1],_=f[Ft]||null;if(typeof y=="function")_||_p(i);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(f=y,_=y[Ft]||null)C=_.formAction;else if(hd(f)!==null)continue}else C=_.action;typeof C=="function"?i[c+1]=C:(i.splice(c,3),c-=3),_p(i)}}}function Sp(){function e(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function gd(e){this._internalRoot=e}go.prototype.render=gd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,c=dn();gp(i,c,e,n,null,null)},go.prototype.unmount=gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;gp(e.current,2,null,e,null,null),Vl(),n[Tr]=null}};function go(e){this._internalRoot=e}go.prototype.unstable_scheduleHydration=function(e){if(e){var n=Oh();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Fa.length&&n!==0&&n<Fa[i].priority;i++);Fa.splice(i,0,e),i===0&&wp(e)}};var kp=t.version;if(kp!=="19.2.3")throw Error(s(527,kp,"19.2.3"));k.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var mx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{Bt=mo.inject(mx),it=mo}catch{}}return ki.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,c="",f=Rg,y=Og,_=Mg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=hp(e,1,!1,null,null,i,c,null,f,y,_,Sp),e[Tr]=n.current,Wu(e),new gd(n)},ki.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var c=!1,f="",y=Rg,_=Og,C=Mg,q=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(q=i.formState)),n=hp(e,1,!0,n,i??null,c,f,q,y,_,C,Sp),n.context=fp(null),i=n.current,c=dn(),c=rc(c),f=Ra(c),f.callback=null,Oa(i,f,c),i=c,n.current.lanes=i,Ms(n,i),Wn(n),e[Tr]=n.current,Wu(e),new go(n)},ki.version="19.2.3",ki}var Dp;function jx(){if(Dp)return yd.exports;Dp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),yd.exports=Nx(),yd.exports}var Ax=jx();var Up="popstate";function Tx(a={}){function t(l,o){let{pathname:u="/",search:d="",hash:h=""}=jr(l.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),$d("",{pathname:u,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(l,o){let u=l.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let h=l.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof o=="string"?o:Mi(o))}function s(l,o){Cn(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Rx(t,r,s,a)}function ut(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function Cn(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cx(){return Math.random().toString(36).substring(2,10)}function Lp(a,t){return{usr:a.state,key:a.key,idx:t}}function $d(a,t,r=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?jr(t):t,state:r,key:t&&t.key||s||Cx()}}function Mi({pathname:a="/",search:t="",hash:r=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function jr(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substring(r),a=a.substring(0,r));let s=a.indexOf("?");s>=0&&(t.search=a.substring(s),a=a.substring(0,s)),a&&(t.pathname=a)}return t}function Rx(a,t,r,s={}){let{window:l=document.defaultView,v5Compat:o=!1}=s,u=l.history,d="POP",h=null,m=p();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function p(){return(u.state||{idx:null}).idx}function v(){d="POP";let A=p(),T=A==null?null:A-m;m=A,h&&h({action:d,location:S.location,delta:T})}function b(A,T){d="PUSH";let D=$d(S.location,A,T);r&&r(D,A),m=p()+1;let M=Lp(D,m),$=S.createHref(D);try{u.pushState(M,"",$)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;l.location.assign($)}o&&h&&h({action:d,location:S.location,delta:1})}function w(A,T){d="REPLACE";let D=$d(S.location,A,T);r&&r(D,A),m=p();let M=Lp(D,m),$=S.createHref(D);u.replaceState(M,"",$),o&&h&&h({action:d,location:S.location,delta:0})}function x(A){return Ox(A)}let S={get action(){return d},get location(){return a(l,u)},listen(A){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(Up,v),h=A,()=>{l.removeEventListener(Up,v),h=null}},createHref(A){return t(l,A)},createURL:x,encodeLocation(A){let T=x(A);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:w,go(A){return u.go(A)}};return S}function Ox(a,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ut(r,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Mi(a);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function py(a,t,r="/"){return Mx(a,t,r,!1)}function Mx(a,t,r,s){let l=typeof t=="string"?jr(t):t,o=xa(l.pathname||"/",r);if(o==null)return null;let u=yy(a);Dx(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let m=Kx(o);d=qx(u[h],m,s)}return d}function yy(a,t=[],r=[],s="",l=!1){let o=(u,d,h=l,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&h)return;ut(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let v=wa([s,p.relativePath]),b=r.concat(p);u.children&&u.children.length>0&&(ut(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),yy(u.children,t,b,v,h)),!(u.path==null&&!u.index)&&t.push({path:v,score:Ix(v,u.index),routesMeta:b})};return a.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let h of vy(u.path))o(u,d,!0,h)}),t}function vy(a){let t=a.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return l?[o,""]:[o];let u=vy(s.join("/")),d=[];return d.push(...u.map(h=>h===""?o:[o,h].join("/"))),l&&d.push(...u),d.map(h=>a.startsWith("/")&&h===""?"/":h)}function Dx(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:Hx(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var Ux=/^:[\w-]+$/,Lx=3,zx=2,$x=1,Px=10,Bx=-2,zp=a=>a==="*";function Ix(a,t){let r=a.split("/"),s=r.length;return r.some(zp)&&(s+=Bx),t&&(s+=zx),r.filter(l=>!zp(l)).reduce((l,o)=>l+(Ux.test(o)?Lx:o===""?$x:Px),s)}function Hx(a,t){return a.length===t.length&&a.slice(0,-1).every((s,l)=>s===t[l])?a[a.length-1]-t[t.length-1]:0}function qx(a,t,r=!1){let{routesMeta:s}=a,l={},o="/",u=[];for(let d=0;d<s.length;++d){let h=s[d],m=d===s.length-1,p=o==="/"?t:t.slice(o.length)||"/",v=Ro({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),b=h.route;if(!v&&m&&r&&!s[s.length-1].route.index&&(v=Ro({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:wa([o,v.pathname]),pathnameBase:Xx(wa([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=wa([o,v.pathnameBase]))}return u}function Ro(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,s]=Gx(a.path,a.caseSensitive,a.end),l=t.match(r);if(!l)return null;let o=l[0],u=o.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:s.reduce((m,{paramName:p,isOptional:v},b)=>{if(p==="*"){let x=d[b]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const w=d[b];return v&&!w?m[p]=void 0:m[p]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:a}}function Gx(a,t=!1,r=!0){Cn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function Kx(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function xa(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=a.charAt(r);return s&&s!=="/"?null:a.slice(r)||"/"}var Fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=a=>Fx.test(a);function Yx(a,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof a=="string"?jr(a):a,o;if(r)if(Vx(r))o=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),Cn(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${r}`)}r.startsWith("/")?o=$p(r.substring(1),"/"):o=$p(r,t)}else o=t;return{pathname:o,search:Qx(s),hash:Jx(l)}}function $p(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function xd(a,t,r,s){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wx(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function by(a){let t=Wx(a);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function wy(a,t,r,s=!1){let l;typeof a=="string"?l=jr(a):(l={...a},ut(!l.pathname||!l.pathname.includes("?"),xd("?","pathname","search",l)),ut(!l.pathname||!l.pathname.includes("#"),xd("#","pathname","hash",l)),ut(!l.search||!l.search.includes("#"),xd("#","search","hash",l)));let o=a===""||l.pathname==="",u=o?"/":l.pathname,d;if(u==null)d=r;else{let v=t.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;l.pathname=b.join("/")}d=v>=0?t[v]:"/"}let h=Yx(l,d),m=u&&u!=="/"&&u.endsWith("/"),p=(o||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var wa=a=>a.join("/").replace(/\/\/+/g,"/"),Xx=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),Qx=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Jx=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function Zx(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function e1(a){return a.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xy=["POST","PUT","PATCH","DELETE"];new Set(xy);var t1=["GET",...xy];new Set(t1);var Rs=O.createContext(null);Rs.displayName="DataRouter";var Ko=O.createContext(null);Ko.displayName="DataRouterState";O.createContext(!1);var _y=O.createContext({isTransitioning:!1});_y.displayName="ViewTransition";var n1=O.createContext(new Map);n1.displayName="Fetchers";var a1=O.createContext(null);a1.displayName="Await";var Hn=O.createContext(null);Hn.displayName="Navigation";var Yi=O.createContext(null);Yi.displayName="Location";var qn=O.createContext({outlet:null,matches:[],isDataRoute:!1});qn.displayName="Route";var ih=O.createContext(null);ih.displayName="RouteError";function r1(a,{relative:t}={}){ut(Wi(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=O.useContext(Hn),{hash:l,pathname:o,search:u}=Xi(a,{relative:t}),d=o;return r!=="/"&&(d=o==="/"?r:wa([r,o])),s.createHref({pathname:d,search:u,hash:l})}function Wi(){return O.useContext(Yi)!=null}function qt(){return ut(Wi(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Yi).location}var Sy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ky(a){O.useContext(Hn).static||O.useLayoutEffect(a)}function pn(){let{isDataRoute:a}=O.useContext(qn);return a?b1():s1()}function s1(){ut(Wi(),"useNavigate() may be used only in the context of a <Router> component.");let a=O.useContext(Rs),{basename:t,navigator:r}=O.useContext(Hn),{matches:s}=O.useContext(qn),{pathname:l}=qt(),o=JSON.stringify(by(s)),u=O.useRef(!1);return ky(()=>{u.current=!0}),O.useCallback((h,m={})=>{if(Cn(u.current,Sy),!u.current)return;if(typeof h=="number"){r.go(h);return}let p=wy(h,JSON.parse(o),l,m.relative==="path");a==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:wa([t,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[t,r,o,l,a])}var i1=O.createContext(null);function l1(a){let t=O.useContext(qn).outlet;return O.useMemo(()=>t&&O.createElement(i1.Provider,{value:a},t),[t,a])}function lh(){let{matches:a}=O.useContext(qn),t=a[a.length-1];return t?t.params:{}}function Xi(a,{relative:t}={}){let{matches:r}=O.useContext(qn),{pathname:s}=qt(),l=JSON.stringify(by(r));return O.useMemo(()=>wy(a,JSON.parse(l),s,t==="path"),[a,l,s,t])}function o1(a,t){return Ey(a,t)}function Ey(a,t,r,s,l){ut(Wi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=O.useContext(Hn),{matches:u}=O.useContext(qn),d=u[u.length-1],h=d?d.params:{},m=d?d.pathname:"/",p=d?d.pathnameBase:"/",v=d&&d.route;{let D=v&&v.path||"";Ny(m,!v||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let b=qt(),w;if(t){let D=typeof t=="string"?jr(t):t;ut(p==="/"||D.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${D.pathname}" was given in the \`location\` prop.`),w=D}else w=b;let x=w.pathname||"/",S=x;if(p!=="/"){let D=p.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=py(a,{pathname:S});Cn(v||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Cn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=f1(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:wa([p,o.encodeLocation?o.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?p:wa([p,o.encodeLocation?o.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),u,r,s,l);return t&&T?O.createElement(Yi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function c1(){let a=v1(),t=Zx(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",a),u=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:o},"ErrorBoundary")," or"," ",O.createElement("code",{style:o},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),r?O.createElement("pre",{style:l},r):null,u)}var u1=O.createElement(c1,null),d1=class extends O.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.onError?this.props.onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?O.createElement(qn.Provider,{value:this.props.routeContext},O.createElement(ih.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function h1({routeContext:a,match:t,children:r}){let s=O.useContext(Rs);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(qn.Provider,{value:a},r)}function f1(a,t=[],r=null,s=null,l=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let o=a,u=r?.errors;if(u!=null){let p=o.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);ut(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,h=-1;if(r)for(let p=0;p<o.length;p++){let v=o[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=p),v.route.id){let{loaderData:b,errors:w}=r,x=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||x){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let m=r&&s?(p,v)=>{s(p,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:e1(r.matches),errorInfo:v})}:void 0;return o.reduceRight((p,v,b)=>{let w,x=!1,S=null,A=null;r&&(w=u&&v.route.id?u[v.route.id]:void 0,S=v.route.errorElement||u1,d&&(h<0&&b===0?(Ny("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):h===b&&(x=!0,A=v.route.hydrateFallbackElement||null)));let T=t.concat(o.slice(0,b+1)),D=()=>{let M;return w?M=S:x?M=A:v.route.Component?M=O.createElement(v.route.Component,null):v.route.element?M=v.route.element:M=p,O.createElement(h1,{match:v,routeContext:{outlet:p,matches:T,isDataRoute:r!=null},children:M})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?O.createElement(d1,{location:r.location,revalidation:r.revalidation,component:S,error:w,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:m}):D()},null)}function oh(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g1(a){let t=O.useContext(Rs);return ut(t,oh(a)),t}function m1(a){let t=O.useContext(Ko);return ut(t,oh(a)),t}function p1(a){let t=O.useContext(qn);return ut(t,oh(a)),t}function ch(a){let t=p1(a),r=t.matches[t.matches.length-1];return ut(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function y1(){return ch("useRouteId")}function v1(){let a=O.useContext(ih),t=m1("useRouteError"),r=ch("useRouteError");return a!==void 0?a:t.errors?.[r]}function b1(){let{router:a}=g1("useNavigate"),t=ch("useNavigate"),r=O.useRef(!1);return ky(()=>{r.current=!0}),O.useCallback(async(l,o={})=>{Cn(r.current,Sy),r.current&&(typeof l=="number"?await a.navigate(l):await a.navigate(l,{fromRouteId:t,...o}))},[a,t])}var Pp={};function Ny(a,t,r){!t&&!Pp[a]&&(Pp[a]=!0,Cn(!1,r))}O.memo(w1);function w1({routes:a,future:t,state:r,unstable_onError:s}){return Ey(a,void 0,r,s,t)}function x1(a){return l1(a.context)}function hn(a){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _1({basename:a="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:o=!1,unstable_useTransitions:u}){ut(!Wi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=a.replace(/^\/*/,"/"),h=O.useMemo(()=>({basename:d,navigator:l,static:o,unstable_useTransitions:u,future:{}}),[d,l,o,u]);typeof r=="string"&&(r=jr(r));let{pathname:m="/",search:p="",hash:v="",state:b=null,key:w="default"}=r,x=O.useMemo(()=>{let S=xa(m,d);return S==null?null:{location:{pathname:S,search:p,hash:v,state:b,key:w},navigationType:s}},[d,m,p,v,b,w,s]);return Cn(x!=null,`<Router basename="${d}"> is not able to match the URL "${m}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:O.createElement(Hn.Provider,{value:h},O.createElement(Yi.Provider,{children:t,value:x}))}function S1({children:a,location:t}){return o1(Pd(a),t)}function Pd(a,t=[]){let r=[];return O.Children.forEach(a,(s,l)=>{if(!O.isValidElement(s))return;let o=[...t,l];if(s.type===O.Fragment){r.push.apply(r,Pd(s.props.children,o));return}ut(s.type===hn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Pd(s.props.children,o)),r.push(u)}),r}var ko="get",Eo="application/x-www-form-urlencoded";function Fo(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function k1(a){return Fo(a)&&a.tagName.toLowerCase()==="button"}function E1(a){return Fo(a)&&a.tagName.toLowerCase()==="form"}function N1(a){return Fo(a)&&a.tagName.toLowerCase()==="input"}function j1(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function A1(a,t){return a.button===0&&(!t||t==="_self")&&!j1(a)}var po=null;function T1(){if(po===null)try{new FormData(document.createElement("form"),0),po=!1}catch{po=!0}return po}var C1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _d(a){return a!=null&&!C1.has(a)?(Cn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eo}"`),null):a}function R1(a,t){let r,s,l,o,u;if(E1(a)){let d=a.getAttribute("action");s=d?xa(d,t):null,r=a.getAttribute("method")||ko,l=_d(a.getAttribute("enctype"))||Eo,o=new FormData(a)}else if(k1(a)||N1(a)&&(a.type==="submit"||a.type==="image")){let d=a.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=a.getAttribute("formaction")||d.getAttribute("action");if(s=h?xa(h,t):null,r=a.getAttribute("formmethod")||d.getAttribute("method")||ko,l=_d(a.getAttribute("formenctype"))||_d(d.getAttribute("enctype"))||Eo,o=new FormData(d,a),!T1()){let{name:m,type:p,value:v}=a;if(p==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,v)}}else{if(Fo(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ko,s=null,l=Eo,u=a}return o&&l==="text/plain"&&(u=o,o=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uh(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function O1(a,t,r){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&xa(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function M1(a,t){if(a.id in t)return t[a.id];try{let r=await import(a.module);return t[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D1(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function U1(a,t,r){let s=await Promise.all(a.map(async l=>{let o=t.routes[l.route.id];if(o){let u=await M1(o,r);return u.links?u.links():[]}return[]}));return P1(s.flat(1).filter(D1).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Bp(a,t,r,s,l,o){let u=(h,m)=>r[m]?h.route.id!==r[m].route.id:!0,d=(h,m)=>r[m].pathname!==h.pathname||r[m].route.path?.endsWith("*")&&r[m].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,m)=>u(h,m)||d(h,m)):o==="data"?t.filter((h,m)=>{let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(u(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function L1(a,t,{includeHydrateFallback:r}={}){return z1(a.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function z1(a){return[...new Set(a)]}function $1(a){let t={},r=Object.keys(a).sort();for(let s of r)t[s]=a[s];return t}function P1(a,t){let r=new Set;return new Set(t),a.reduce((s,l)=>{let o=JSON.stringify($1(l));return r.has(o)||(r.add(o),s.push({key:o,link:l})),s},[])}function jy(){let a=O.useContext(Rs);return uh(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function B1(){let a=O.useContext(Ko);return uh(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var dh=O.createContext(void 0);dh.displayName="FrameworkContext";function Ay(){let a=O.useContext(dh);return uh(a,"You must render this element inside a <HydratedRouter> element"),a}function I1(a,t){let r=O.useContext(dh),[s,l]=O.useState(!1),[o,u]=O.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:v}=t,b=O.useRef(null);O.useEffect(()=>{if(a==="render"&&u(!0),a==="viewport"){let S=T=>{T.forEach(D=>{u(D.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[a]),O.useEffect(()=>{if(s){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[s]);let w=()=>{l(!0)},x=()=>{l(!1),u(!1)};return r?a!=="intent"?[o,b,{}]:[o,b,{onFocus:Ei(d,w),onBlur:Ei(h,x),onMouseEnter:Ei(m,w),onMouseLeave:Ei(p,x),onTouchStart:Ei(v,w)}]:[!1,b,{}]}function Ei(a,t){return r=>{a&&a(r),r.defaultPrevented||t(r)}}function H1({page:a,...t}){let{router:r}=jy(),s=O.useMemo(()=>py(r.routes,a,r.basename),[r.routes,a,r.basename]);return s?O.createElement(G1,{page:a,matches:s,...t}):null}function q1(a){let{manifest:t,routeModules:r}=Ay(),[s,l]=O.useState([]);return O.useEffect(()=>{let o=!1;return U1(a,t,r).then(u=>{o||l(u)}),()=>{o=!0}},[a,t,r]),s}function G1({page:a,matches:t,...r}){let s=qt(),{manifest:l,routeModules:o}=Ay(),{basename:u}=jy(),{loaderData:d,matches:h}=B1(),m=O.useMemo(()=>Bp(a,t,h,l,s,"data"),[a,t,h,l,s]),p=O.useMemo(()=>Bp(a,t,h,l,s,"assets"),[a,t,h,l,s]),v=O.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let x=new Set,S=!1;if(t.forEach(T=>{let D=l.routes[T.route.id];!D||!D.hasLoader||(!m.some(M=>M.route.id===T.route.id)&&T.route.id in d&&o[T.route.id]?.shouldRevalidate||D.hasClientLoader?S=!0:x.add(T.route.id))}),x.size===0)return[];let A=O1(a,u,"data");return S&&x.size>0&&A.searchParams.set("_routes",t.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[A.pathname+A.search]},[u,d,s,l,m,t,a,o]),b=O.useMemo(()=>L1(p,l),[p,l]),w=q1(p);return O.createElement(O.Fragment,null,v.map(x=>O.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),b.map(x=>O.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),w.map(({key:x,link:S})=>O.createElement("link",{key:x,nonce:r.nonce,...S})))}function K1(...a){return t=>{a.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Ty=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ty&&(window.__reactRouterVersion="7.10.1")}catch{}function F1({basename:a,children:t,unstable_useTransitions:r,window:s}){let l=O.useRef();l.current==null&&(l.current=Tx({window:s,v5Compat:!0}));let o=l.current,[u,d]=O.useState({action:o.action,location:o.location}),h=O.useCallback(m=>{r===!1?d(m):O.startTransition(()=>d(m))},[r]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.createElement(_1,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:r===!0})}var Cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=O.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:o,replace:u,state:d,target:h,to:m,preventScrollReset:p,viewTransition:v,...b},w){let{basename:x,unstable_useTransitions:S}=O.useContext(Hn),A=typeof m=="string"&&Cy.test(m),T,D=!1;if(typeof m=="string"&&A&&(T=m,Ty))try{let U=new URL(window.location.href),P=m.startsWith("//")?new URL(U.protocol+m):new URL(m),H=xa(P.pathname,x);P.origin===U.origin&&H!=null?m=H+P.search+P.hash:D=!0}catch{Cn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=r1(m,{relative:l}),[$,K,R]=I1(s,b),L=X1(m,{replace:u,state:d,target:h,preventScrollReset:p,relative:l,viewTransition:v,unstable_useTransitions:S});function N(U){t&&t(U),U.defaultPrevented||L(U)}let E=O.createElement("a",{...b,...R,href:T||M,onClick:D||o?t:N,ref:K1(w,K),target:h,"data-discover":!A&&r==="render"?"true":void 0});return $&&!A?O.createElement(O.Fragment,null,E,O.createElement(H1,{page:M})):E});Zn.displayName="Link";var V1=O.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:o,to:u,viewTransition:d,children:h,...m},p){let v=Xi(u,{relative:m.relative}),b=qt(),w=O.useContext(Ko),{navigator:x,basename:S}=O.useContext(Hn),A=w!=null&&t_(v)&&d===!0,T=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,D=b.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(D=D.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&S&&(M=xa(M,S)||M);const $=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let K=D===T||!l&&D.startsWith(T)&&D.charAt($)==="/",R=M!=null&&(M===T||!l&&M.startsWith(T)&&M.charAt(T.length)==="/"),L={isActive:K,isPending:R,isTransitioning:A},N=K?t:void 0,E;typeof s=="function"?E=s(L):E=[s,K?"active":null,R?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(L):o;return O.createElement(Zn,{...m,"aria-current":N,className:E,ref:p,style:U,to:u,viewTransition:d},typeof h=="function"?h(L):h)});V1.displayName="NavLink";var Y1=O.forwardRef(({discover:a="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:o,method:u=ko,action:d,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:v,...b},w)=>{let{unstable_useTransitions:x}=O.useContext(Hn),S=Z1(),A=e_(d,{relative:m}),T=u.toLowerCase()==="get"?"get":"post",D=typeof d=="string"&&Cy.test(d),M=$=>{if(h&&h($),$.defaultPrevented)return;$.preventDefault();let K=$.nativeEvent.submitter,R=K?.getAttribute("formmethod")||u,L=()=>S(K||$.currentTarget,{fetcherKey:t,method:R,navigate:r,replace:l,state:o,relative:m,preventScrollReset:p,viewTransition:v});x&&r!==!1?O.startTransition(()=>L()):L()};return O.createElement("form",{ref:w,method:T,action:A,onSubmit:s?h:M,...b,"data-discover":!D&&a==="render"?"true":void 0})});Y1.displayName="Form";function W1(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ry(a){let t=O.useContext(Rs);return ut(t,W1(a)),t}function X1(a,{target:t,replace:r,state:s,preventScrollReset:l,relative:o,viewTransition:u,unstable_useTransitions:d}={}){let h=pn(),m=qt(),p=Xi(a,{relative:o});return O.useCallback(v=>{if(A1(v,t)){v.preventDefault();let b=r!==void 0?r:Mi(m)===Mi(p),w=()=>h(a,{replace:b,state:s,preventScrollReset:l,relative:o,viewTransition:u});d?O.startTransition(()=>w()):w()}},[m,h,p,r,s,t,a,l,o,u,d])}var Q1=0,J1=()=>`__${String(++Q1)}__`;function Z1(){let{router:a}=Ry("useSubmit"),{basename:t}=O.useContext(Hn),r=y1(),s=a.fetch,l=a.navigate;return O.useCallback(async(o,u={})=>{let{action:d,method:h,encType:m,formData:p,body:v}=R1(o,t);if(u.navigate===!1){let b=u.fetcherKey||J1();await s(b,r,u.action||d,{preventScrollReset:u.preventScrollReset,formData:p,body:v,formMethod:u.method||h,formEncType:u.encType||m,flushSync:u.flushSync})}else await l(u.action||d,{preventScrollReset:u.preventScrollReset,formData:p,body:v,formMethod:u.method||h,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:r,flushSync:u.flushSync,viewTransition:u.viewTransition})},[s,l,t,r])}function e_(a,{relative:t}={}){let{basename:r}=O.useContext(Hn),s=O.useContext(qn);ut(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),o={...Xi(a||".",{relative:t})},u=qt();if(a==null){o.search=u.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();o.search=p?`?${p}`:""}}return(!a||a===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:wa([r,o.pathname])),Mi(o)}function t_(a,{relative:t}={}){let r=O.useContext(_y);ut(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ry("useViewTransitionState"),l=Xi(a,{relative:t});if(!r.isTransitioning)return!1;let o=xa(r.currentLocation.pathname,s)||r.currentLocation.pathname,u=xa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Ro(l.pathname,u)!=null||Ro(l.pathname,o)!=null}const Ne=a=>typeof a=="string",Ni=()=>{let a,t;const r=new Promise((s,l)=>{a=s,t=l});return r.resolve=a,r.reject=t,r},Ip=a=>a==null?"":""+a,n_=(a,t,r)=>{a.forEach(s=>{t[s]&&(r[s]=t[s])})},a_=/###/g,Hp=a=>a&&a.indexOf("###")>-1?a.replace(a_,"."):a,qp=a=>!a||Ne(a),Ai=(a,t,r)=>{const s=Ne(t)?t.split("."):t;let l=0;for(;l<s.length-1;){if(qp(a))return{};const o=Hp(s[l]);!a[o]&&r&&(a[o]=new r),Object.prototype.hasOwnProperty.call(a,o)?a=a[o]:a={},++l}return qp(a)?{}:{obj:a,k:Hp(s[l])}},Gp=(a,t,r)=>{const{obj:s,k:l}=Ai(a,t,Object);if(s!==void 0||t.length===1){s[l]=r;return}let o=t[t.length-1],u=t.slice(0,t.length-1),d=Ai(a,u,Object);for(;d.obj===void 0&&u.length;)o=`${u[u.length-1]}.${o}`,u=u.slice(0,u.length-1),d=Ai(a,u,Object),d?.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=r},r_=(a,t,r,s)=>{const{obj:l,k:o}=Ai(a,t,Object);l[o]=l[o]||[],l[o].push(r)},Oo=(a,t)=>{const{obj:r,k:s}=Ai(a,t);if(r&&Object.prototype.hasOwnProperty.call(r,s))return r[s]},s_=(a,t,r)=>{const s=Oo(a,r);return s!==void 0?s:Oo(t,r)},Oy=(a,t,r)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in a?Ne(a[s])||a[s]instanceof String||Ne(t[s])||t[s]instanceof String?r&&(a[s]=t[s]):Oy(a[s],t[s],r):a[s]=t[s]);return a},fs=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var i_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const l_=a=>Ne(a)?a.replace(/[&<>"'\/]/g,t=>i_[t]):a;class o_{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const c_=[" ",",","?","!",";"],u_=new o_(20),d_=(a,t,r)=>{t=t||"",r=r||"";const s=c_.filter(u=>t.indexOf(u)<0&&r.indexOf(u)<0);if(s.length===0)return!0;const l=u_.getRegExp(`(${s.map(u=>u==="?"?"\\?":u).join("|")})`);let o=!l.test(a);if(!o){const u=a.indexOf(r);u>0&&!l.test(a.substring(0,u))&&(o=!0)}return o},Bd=(a,t,r=".")=>{if(!a)return;if(a[t])return Object.prototype.hasOwnProperty.call(a,t)?a[t]:void 0;const s=t.split(r);let l=a;for(let o=0;o<s.length;){if(!l||typeof l!="object")return;let u,d="";for(let h=o;h<s.length;++h)if(h!==o&&(d+=r),d+=s[h],u=l[d],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&h<s.length-1)continue;o+=h-o+1;break}l=u}return l},Di=a=>a?.replace("_","-"),h_={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,t){console?.[a]?.apply?.(console,t)}};class Mo{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||h_,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,s,l){return l&&!this.debug?null:(Ne(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Mo(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Mo(this.logger,t)}}var ea=new Mo;class Vo{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const l=this.observers[s].get(r)||0;this.observers[s].set(r,l+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([l,o])=>{for(let u=0;u<o;u++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,o])=>{for(let u=0;u<o;u++)l.apply(l,[t,...r])})}}class Kp extends Vo{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,s,l={}){const o=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,u=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;t.indexOf(".")>-1?d=t.split("."):(d=[t,r],s&&(Array.isArray(s)?d.push(...s):Ne(s)&&o?d.push(...s.split(o)):d.push(s)));const h=Oo(this.data,d);return!h&&!r&&!s&&t.indexOf(".")>-1&&(t=d[0],r=d[1],s=d.slice(2).join(".")),h||!u||!Ne(s)?h:Bd(this.data?.[t]?.[r],s,o)}addResource(t,r,s,l,o={silent:!1}){const u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[t,r];s&&(d=d.concat(u?s.split(u):s)),t.indexOf(".")>-1&&(d=t.split("."),l=r,r=d[1]),this.addNamespaces(r),Gp(this.data,d,l),o.silent||this.emit("added",t,r,s,l)}addResources(t,r,s,l={silent:!1}){for(const o in s)(Ne(s[o])||Array.isArray(s[o]))&&this.addResource(t,r,o,s[o],{silent:!0});l.silent||this.emit("added",t,r,s)}addResourceBundle(t,r,s,l,o,u={silent:!1,skipCopy:!1}){let d=[t,r];t.indexOf(".")>-1&&(d=t.split("."),l=s,s=r,r=d[1]),this.addNamespaces(r);let h=Oo(this.data,d)||{};u.skipCopy||(s=JSON.parse(JSON.stringify(s))),l?Oy(h,s,o):h={...h,...s},Gp(this.data,d,h),u.silent||this.emit("added",t,r,s)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(l=>r[l]&&Object.keys(r[l]).length>0)}toJSON(){return this.data}}var My={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,t,r,s,l){return a.forEach(o=>{t=this.processors[o]?.process(t,r,s,l)??t}),t}};const Dy=Symbol("i18next/PATH_KEY");function f_(){const a=[],t=Object.create(null);let r;return t.get=(s,l)=>(r?.revoke?.(),l===Dy?a:(a.push(l),r=Proxy.revocable(s,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Id(a,t){const{[Dy]:r}=a(f_());return r.join(t?.keySeparator??".")}const Fp={},Sd=a=>!Ne(a)&&typeof a!="boolean"&&typeof a!="number";class Do extends Vo{constructor(t,r={}){super(),n_(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ea.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const s={...r};if(t==null)return!1;const l=this.resolve(t,s);if(l?.res===void 0)return!1;const o=Sd(l.res);return!(s.returnObjects===!1&&o)}extractFromKey(t,r){let s=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const u=s&&t.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!d_(t,s,l);if(u&&!d){const h=t.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:t,namespaces:Ne(o)?[o]:o};const m=t.split(s);(s!==l||s===l&&this.options.ns.indexOf(m[0])>-1)&&(o=m.shift()),t=m.join(l)}return{key:t,namespaces:Ne(o)?[o]:o}}translate(t,r,s){let l=typeof r=="object"?{...r}:r;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof l=="object"&&(l={...l}),l||(l={}),t==null)return"";typeof t=="function"&&(t=Id(t,{...this.options,...l})),Array.isArray(t)||(t=[String(t)]);const o=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:d,namespaces:h}=this.extractFromKey(t[t.length-1],l),m=h[h.length-1];let p=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const v=l.lng||this.language,b=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return b?o?{res:`${m}${p}${d}`,usedKey:d,exactUsedKey:d,usedLng:v,usedNS:m,usedParams:this.getUsedParamsDetails(l)}:`${m}${p}${d}`:o?{res:d,usedKey:d,exactUsedKey:d,usedLng:v,usedNS:m,usedParams:this.getUsedParamsDetails(l)}:d;const w=this.resolve(t,l);let x=w?.res;const S=w?.usedKey||d,A=w?.exactUsedKey||d,T=["[object Number]","[object Function]","[object RegExp]"],D=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,M=!this.i18nFormat||this.i18nFormat.handleAsObject,$=l.count!==void 0&&!Ne(l.count),K=Do.hasDefaultValue(l),R=$?this.pluralResolver.getSuffix(v,l.count,l):"",L=l.ordinal&&$?this.pluralResolver.getSuffix(v,l.count,{ordinal:!1}):"",N=$&&!l.ordinal&&l.count===0,E=N&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${R}`]||l[`defaultValue${L}`]||l.defaultValue;let U=x;M&&!x&&K&&(U=E);const P=Sd(U),H=Object.prototype.toString.apply(U);if(M&&U&&P&&T.indexOf(H)<0&&!(Ne(D)&&Array.isArray(U))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const F=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,U,{...l,ns:h}):`key '${d} (${this.language})' returned an object instead of string.`;return o?(w.res=F,w.usedParams=this.getUsedParamsDetails(l),w):F}if(u){const F=Array.isArray(U),B=F?[]:{},X=F?A:S;for(const j in U)if(Object.prototype.hasOwnProperty.call(U,j)){const k=`${X}${u}${j}`;K&&!x?B[j]=this.translate(k,{...l,defaultValue:Sd(E)?E[j]:void 0,joinArrays:!1,ns:h}):B[j]=this.translate(k,{...l,joinArrays:!1,ns:h}),B[j]===k&&(B[j]=U[j])}x=B}}else if(M&&Ne(D)&&Array.isArray(x))x=x.join(D),x&&(x=this.extendTranslation(x,t,l,s));else{let F=!1,B=!1;!this.isValidLookup(x)&&K&&(F=!0,x=E),this.isValidLookup(x)||(B=!0,x=d);const j=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&B?void 0:x,k=K&&E!==x&&this.options.updateMissing;if(B||F||k){if(this.logger.log(k?"updateKey":"missingKey",v,m,d,k?E:x),u){const z=this.resolve(d,{...l,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const G=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&G&&G[0])for(let z=0;z<G.length;z++)W.push(G[z]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(l.lng||this.language):W.push(l.lng||this.language);const Y=(z,I,J)=>{const ee=K&&J!==x?J:j;this.options.missingKeyHandler?this.options.missingKeyHandler(z,m,I,ee,k,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(z,m,I,ee,k,l),this.emit("missingKey",z,m,I,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?W.forEach(z=>{const I=this.pluralResolver.getSuffixes(z,l);N&&l[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(J=>{Y([z],d+J,l[`defaultValue${J}`]||E)})}):Y(W,d,E))}x=this.extendTranslation(x,t,l,w,s),B&&x===d&&this.options.appendNamespaceToMissingKey&&(x=`${m}${p}${d}`),(B||F)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${p}${d}`:d,F?x:void 0,l))}return o?(w.res=x,w.usedParams=this.getUsedParamsDetails(l),w):x}extendTranslation(t,r,s,l,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const h=Ne(t)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(h){const v=t.match(this.interpolator.nestingRegexp);m=v&&v.length}let p=s.replace&&!Ne(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,s.lng||this.language||l.usedLng,s),h){const v=t.match(this.interpolator.nestingRegexp),b=v&&v.length;m<b&&(s.nest=!1)}!s.lng&&l&&l.res&&(s.lng=this.language||l.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...v)=>o?.[0]===v[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${r[0]}`),null):this.translate(...v,r),s)),s.interpolation&&this.interpolator.reset()}const u=s.postProcess||this.options.postProcess,d=Ne(u)?[u]:u;return t!=null&&d?.length&&s.applyPostProcessor!==!1&&(t=My.handle(d,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,r={}){let s,l,o,u,d;return Ne(t)&&(t=[t]),t.forEach(h=>{if(this.isValidLookup(s))return;const m=this.extractFromKey(h,r),p=m.key;l=p;let v=m.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const b=r.count!==void 0&&!Ne(r.count),w=b&&!r.ordinal&&r.count===0,x=r.context!==void 0&&(Ne(r.context)||typeof r.context=="number")&&r.context!=="",S=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);v.forEach(A=>{this.isValidLookup(s)||(d=A,!Fp[`${S[0]}-${A}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(Fp[`${S[0]}-${A}`]=!0,this.logger.warn(`key "${l}" for languages "${S.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(T=>{if(this.isValidLookup(s))return;u=T;const D=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(D,p,T,A,r);else{let $;b&&($=this.pluralResolver.getSuffix(T,r.count,r));const K=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(b&&(r.ordinal&&$.indexOf(R)===0&&D.push(p+$.replace(R,this.options.pluralSeparator)),D.push(p+$),w&&D.push(p+K)),x){const L=`${p}${this.options.contextSeparator||"_"}${r.context}`;D.push(L),b&&(r.ordinal&&$.indexOf(R)===0&&D.push(L+$.replace(R,this.options.pluralSeparator)),D.push(L+$),w&&D.push(L+K))}}let M;for(;M=D.pop();)this.isValidLookup(s)||(o=M,s=this.getResource(T,A,M,r))}))})}),{res:s,usedKey:l,exactUsedKey:o,usedLng:u,usedNS:d}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,s,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,s,l):this.resourceStore.getResource(t,r,s,l)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!Ne(t.replace);let l=s?t.replace:t;if(s&&typeof t.count<"u"&&(l.count=t.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!s){l={...l};for(const o of r)delete l[o]}return l}static hasDefaultValue(t){const r="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&r===s.substring(0,r.length)&&t[s]!==void 0)return!0;return!1}}class Vp{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ea.create("languageUtils")}getScriptPartFromCode(t){if(t=Di(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Di(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Ne(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(s=>{if(r)return;const l=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(l))&&(r=l)}),!r&&this.options.supportedLngs&&t.forEach(s=>{if(r)return;const l=this.getScriptPartFromCode(s);if(this.isSupportedCode(l))return r=l;const o=this.getLanguagePartFromCode(s);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(u=>{if(u===o)return u;if(!(u.indexOf("-")<0&&o.indexOf("-")<0)&&(u.indexOf("-")>0&&o.indexOf("-")<0&&u.substring(0,u.indexOf("-"))===o||u.indexOf(o)===0&&o.length>1))return u})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Ne(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let s=t[r];return s||(s=t[this.getScriptPartFromCode(r)]),s||(s=t[this.formatLanguageCode(r)]),s||(s=t[this.getLanguagePartFromCode(r)]),s||(s=t.default),s||[]}toResolveHierarchy(t,r){const s=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),l=[],o=u=>{u&&(this.isSupportedCode(u)?l.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return Ne(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):Ne(t)&&o(this.formatLanguageCode(t)),s.forEach(u=>{l.indexOf(u)<0&&o(this.formatLanguageCode(u))}),l}}const Yp={zero:0,one:1,two:2,few:3,many:4,other:5},Wp={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class g_{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=ea.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const s=Di(t==="dev"?"en":t),l=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:s,type:l});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let u;try{u=new Intl.PluralRules(s,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Wp;if(!t.match(/-|_/))return Wp;const h=this.languageUtils.getLanguagePartFromCode(t);u=this.getRule(h,r)}return this.pluralRulesCache[o]=u,u}needsPlural(t,r={}){let s=this.getRule(t,r);return s||(s=this.getRule("dev",r)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,s={}){return this.getSuffixes(t,s).map(l=>`${r}${l}`)}getSuffixes(t,r={}){let s=this.getRule(t,r);return s||(s=this.getRule("dev",r)),s?s.resolvedOptions().pluralCategories.sort((l,o)=>Yp[l]-Yp[o]).map(l=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(t,r,s={}){const l=this.getRule(t,s);return l?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${l.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,s))}}const Xp=(a,t,r,s=".",l=!0)=>{let o=s_(a,t,r);return!o&&l&&Ne(r)&&(o=Bd(a,r,s),o===void 0&&(o=Bd(t,r,s))),o},kd=a=>a.replace(/\$/g,"$$$$");class Qp{constructor(t={}){this.logger=ea.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:s,useRawValueToEscape:l,prefix:o,prefixEscaped:u,suffix:d,suffixEscaped:h,formatSeparator:m,unescapeSuffix:p,unescapePrefix:v,nestingPrefix:b,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:S,nestingOptionsSeparator:A,maxReplaces:T,alwaysFormat:D}=t.interpolation;this.escape=r!==void 0?r:l_,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=o?fs(o):u||"{{",this.suffix=d?fs(d):h||"}}",this.formatSeparator=m||",",this.unescapePrefix=p?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=b?fs(b):w||fs("$t("),this.nestingSuffix=x?fs(x):S||fs(")"),this.nestingOptionsSeparator=A||",",this.maxReplaces=T||1e3,this.alwaysFormat=D!==void 0?D:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,s)=>r?.source===s?(r.lastIndex=0,r):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,s,l){let o,u,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=w=>{if(w.indexOf(this.formatSeparator)<0){const T=Xp(r,h,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,s,{...l,...r,interpolationkey:w}):T}const x=w.split(this.formatSeparator),S=x.shift().trim(),A=x.join(this.formatSeparator).trim();return this.format(Xp(r,h,S,this.options.keySeparator,this.options.ignoreJSONStructure),A,s,{...l,...r,interpolationkey:S})};this.resetRegExp();const p=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>kd(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?kd(this.escape(w)):kd(w)}].forEach(w=>{for(d=0;o=w.regex.exec(t);){const x=o[1].trim();if(u=m(x),u===void 0)if(typeof p=="function"){const A=p(t,o,l);u=Ne(A)?A:""}else if(l&&Object.prototype.hasOwnProperty.call(l,x))u="";else if(v){u=o[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),u="";else!Ne(u)&&!this.useRawValueToEscape&&(u=Ip(u));const S=w.safeValue(u);if(t=t.replace(o[0],S),v?(w.regex.lastIndex+=u.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),t}nest(t,r,s={}){let l,o,u;const d=(h,m)=>{const p=this.nestingOptionsSeparator;if(h.indexOf(p)<0)return h;const v=h.split(new RegExp(`${p}[ ]*{`));let b=`{${v[1]}`;h=v[0],b=this.interpolate(b,u);const w=b.match(/'/g),x=b.match(/"/g);((w?.length??0)%2===0&&!x||x.length%2!==0)&&(b=b.replace(/'/g,'"'));try{u=JSON.parse(b),m&&(u={...m,...u})}catch(S){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,S),`${h}${p}${b}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,h};for(;l=this.nestingRegexp.exec(t);){let h=[];u={...s},u=u.replace&&!Ne(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;const m=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(m!==-1&&(h=l[1].slice(m).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),l[1]=l[1].slice(0,m)),o=r(d.call(this,l[1].trim(),u),u),o&&l[0]===t&&!Ne(o))return o;Ne(o)||(o=Ip(o)),o||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${t}`),o=""),h.length&&(o=h.reduce((p,v)=>this.format(p,v,s.lng,{...s,interpolationkey:l[1].trim()}),o.trim())),t=t.replace(l[0],o),this.regexp.lastIndex=0}return t}}const m_=a=>{let t=a.toLowerCase().trim();const r={};if(a.indexOf("(")>-1){const s=a.split("(");t=s[0].toLowerCase().trim();const l=s[1].substring(0,s[1].length-1);t==="currency"&&l.indexOf(":")<0?r.currency||(r.currency=l.trim()):t==="relativetime"&&l.indexOf(":")<0?r.range||(r.range=l.trim()):l.split(";").forEach(u=>{if(u){const[d,...h]=u.split(":"),m=h.join(":").trim().replace(/^'+|'+$/g,""),p=d.trim();r[p]||(r[p]=m),m==="false"&&(r[p]=!1),m==="true"&&(r[p]=!0),isNaN(m)||(r[p]=parseInt(m,10))}})}return{formatName:t,formatOptions:r}},Jp=a=>{const t={};return(r,s,l)=>{let o=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(o={...o,[l.interpolationkey]:void 0});const u=s+JSON.stringify(o);let d=t[u];return d||(d=a(Di(s),l),t[u]=d),d(r)}},p_=a=>(t,r,s)=>a(Di(r),s)(t);class y_{constructor(t={}){this.logger=ea.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const s=r.cacheInBuiltFormats?Jp:p_;this.formats={number:s((l,o)=>{const u=new Intl.NumberFormat(l,{...o});return d=>u.format(d)}),currency:s((l,o)=>{const u=new Intl.NumberFormat(l,{...o,style:"currency"});return d=>u.format(d)}),datetime:s((l,o)=>{const u=new Intl.DateTimeFormat(l,{...o});return d=>u.format(d)}),relativetime:s((l,o)=>{const u=new Intl.RelativeTimeFormat(l,{...o});return d=>u.format(d,o.range||"day")}),list:s((l,o)=>{const u=new Intl.ListFormat(l,{...o});return d=>u.format(d)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Jp(r)}format(t,r,s,l={}){const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,h)=>{const{formatName:m,formatOptions:p}=m_(h);if(this.formats[m]){let v=d;try{const b=l?.formatParams?.[l.interpolationkey]||{},w=b.locale||b.lng||l.locale||l.lng||s;v=this.formats[m](d,w,{...p,...l,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${m}`);return d},t)}}const v_=(a,t)=>{a.pending[t]!==void 0&&(delete a.pending[t],a.pendingCount--)};class b_ extends Vo{constructor(t,r,s,l={}){super(),this.backend=t,this.store=r,this.services=s,this.languageUtils=s.languageUtils,this.options=l,this.logger=ea.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,l.backend,l)}queueLoad(t,r,s,l){const o={},u={},d={},h={};return t.forEach(m=>{let p=!0;r.forEach(v=>{const b=`${m}|${v}`;!s.reload&&this.store.hasResourceBundle(m,v)?this.state[b]=2:this.state[b]<0||(this.state[b]===1?u[b]===void 0&&(u[b]=!0):(this.state[b]=1,p=!1,u[b]===void 0&&(u[b]=!0),o[b]===void 0&&(o[b]=!0),h[v]===void 0&&(h[v]=!0)))}),p||(d[m]=!0)}),(Object.keys(o).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(o),pending:Object.keys(u),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(t,r,s){const l=t.split("|"),o=l[0],u=l[1];r&&this.emit("failedLoading",o,u,r),!r&&s&&this.store.addResourceBundle(o,u,s,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&s&&(this.state[t]=0);const d={};this.queue.forEach(h=>{r_(h.loaded,[o],u),v_(h,t),r&&h.errors.push(r),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(m=>{d[m]||(d[m]={});const p=h.loaded[m];p.length&&p.forEach(v=>{d[m][v]===void 0&&(d[m][v]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(t,r,s,l=0,o=this.retryTimeout,u){if(!t.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:s,tried:l,wait:o,callback:u});return}this.readingCalls++;const d=(m,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(m&&p&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,s,l+1,o*2,u)},o);return}u(m,p)},h=this.backend[s].bind(this.backend);if(h.length===2){try{const m=h(t,r);m&&typeof m.then=="function"?m.then(p=>d(null,p)).catch(d):d(null,m)}catch(m){d(m)}return}return h(t,r,d)}prepareLoading(t,r,s={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();Ne(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ne(r)&&(r=[r]);const o=this.queueLoad(t,r,s,l);if(!o.toLoad.length)return o.pending.length||l(),null;o.toLoad.forEach(u=>{this.loadOne(u)})}load(t,r,s){this.prepareLoading(t,r,{},s)}reload(t,r,s){this.prepareLoading(t,r,{reload:!0},s)}loadOne(t,r=""){const s=t.split("|"),l=s[0],o=s[1];this.read(l,o,"read",void 0,void 0,(u,d)=>{u&&this.logger.warn(`${r}loading namespace ${o} for language ${l} failed`,u),!u&&d&&this.logger.log(`${r}loaded namespace ${o} for language ${l}`,d),this.loaded(t,u,d)})}saveMissing(t,r,s,l,o,u={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${s}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const h={...u,isUpdate:o},m=this.backend.create.bind(this.backend);if(m.length<6)try{let p;m.length===5?p=m(t,r,s,l,h):p=m(t,r,s,l),p&&typeof p.then=="function"?p.then(v=>d(null,v)).catch(d):d(null,p)}catch(p){d(p)}else m(t,r,s,l,d,h)}!t||!t[0]||this.store.addResource(t[0],r,s,l)}}}const Zp=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let t={};if(typeof a[1]=="object"&&(t=a[1]),Ne(a[1])&&(t.defaultValue=a[1]),Ne(a[2])&&(t.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const r=a[3]||a[2];Object.keys(r).forEach(s=>{t[s]=r[s]})}return t},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),e0=a=>(Ne(a.ns)&&(a.ns=[a.ns]),Ne(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),Ne(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs?.indexOf?.("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a),yo=()=>{},w_=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(r=>{typeof a[r]=="function"&&(a[r]=a[r].bind(a))})};class Ti extends Vo{constructor(t={},r){if(super(),this.options=e0(t),this.services={},this.logger=ea,this.modules={external:[]},w_(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ne(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Zp();this.options={...s,...this.options,...e0(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler);const l=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?ea.init(l(this.modules.logger),this.options):ea.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=y_;const p=new Vp(this.options);this.store=new Kp(this.options.resources,this.options);const v=this.services;v.logger=ea,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new g_(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(v.formatter=l(m),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new Qp(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new b_(l(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.languageDetector&&(v.languageDetector=l(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=l(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Do(this.services,this.options),this.translator.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,r||(r=yo),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...p)=>this.store[m](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...p)=>(this.store[m](...p),this)});const d=Ni(),h=()=>{const m=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(v),r(p,v)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),d}loadResources(t,r=yo){let s=r;const l=Ne(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],u=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(m=>{m!=="cimode"&&o.indexOf(m)<0&&o.push(m)})};l?u(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>u(h)),this.options.preload?.forEach?.(d=>u(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(t,r,s){const l=Ni();return typeof t=="function"&&(s=t,t=void 0),typeof r=="function"&&(s=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),s||(s=yo),this.services.backendConnector.reload(t,r,o=>{l.resolve(),s(o)}),l}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&My.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const s=this.languages[r];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const s=Ni();this.emit("languageChanging",t);const l=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},o=(d,h)=>{h?this.isLanguageChangingTo===t&&(l(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve((...m)=>this.t(...m)),r&&r(d,(...m)=>this.t(...m))},u=d=>{!t&&!d&&this.services.languageDetector&&(d=[]);const h=Ne(d)?d:d&&d[0],m=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(Ne(d)?[d]:d);m&&(this.language||l(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,p=>{o(p,m)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(t),s}getFixedT(t,r,s){const l=(o,u,...d)=>{let h;typeof u!="object"?h=this.options.overloadTranslationOptionHandler([o,u].concat(d)):h={...u},h.lng=h.lng||l.lng,h.lngs=h.lngs||l.lngs,h.ns=h.ns||l.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||s||l.keyPrefix);const m=this.options.keySeparator||".";let p;return h.keyPrefix&&Array.isArray(o)?p=o.map(v=>(typeof v=="function"&&(v=Id(v,{...this.options,...u})),`${h.keyPrefix}${m}${v}`)):(typeof o=="function"&&(o=Id(o,{...this.options,...u})),p=h.keyPrefix?`${h.keyPrefix}${m}${o}`:o),this.t(p,h)};return Ne(t)?l.lng=t:l.lngs=t,l.ns=r,l.keyPrefix=s,l}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=r.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const u=(d,h)=>{const m=this.services.backendConnector.state[`${d}|${h}`];return m===-1||m===0||m===2};if(r.precheck){const d=r.precheck(this,u);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,t)&&(!l||u(o,t)))}loadNamespaces(t,r){const s=Ni();return this.options.ns?(Ne(t)&&(t=[t]),t.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{s.resolve(),r&&r(l)}),s):(r&&r(),Promise.resolve())}loadLanguages(t,r){const s=Ni();Ne(t)&&(t=[t]);const l=this.options.preload||[],o=t.filter(u=>l.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return o.length?(this.options.preload=l.concat(o),this.loadResources(u=>{s.resolve(),r&&r(u)}),s):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const l=new Intl.Locale(t);if(l&&l.getTextInfo){const o=l.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new Vp(Zp());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){const s=new Ti(t,r);return s.createInstance=Ti.createInstance,s}cloneInstance(t={},r=yo){const s=t.forkResourceStore;s&&delete t.forkResourceStore;const l={...this.options,...t,isClone:!0},o=new Ti(l);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},s){const d=Object.keys(this.store.data).reduce((h,m)=>(h[m]={...this.store.data[m]},h[m]=Object.keys(h[m]).reduce((p,v)=>(p[v]={...h[m][v]},p),h[m]),h),{});o.store=new Kp(d,l),o.services.resourceStore=o.store}return t.interpolation&&(o.services.interpolator=new Qp(l)),o.translator=new Do(o.services,l),o.translator.on("*",(d,...h)=>{o.emit(d,...h)}),o.init(l,r),o.translator.options=l,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Gt=Ti.createInstance();Gt.createInstance;Gt.dir;Gt.init;Gt.loadResources;Gt.reloadResources;Gt.use;Gt.changeLanguage;Gt.getFixedT;Gt.t;Gt.exists;Gt.setDefaultNamespace;Gt.hasLoadedNamespace;Gt.loadNamespaces;Gt.loadLanguages;const x_=(a,t,r,s)=>{const l=[r,{code:t,...s||{}}];if(a?.services?.logger?.forward)return a.services.logger.forward(l,"warn","react-i18next::",!0);Er(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),a?.services?.logger?.warn?a.services.logger.warn(...l):console?.warn&&console.warn(...l)},t0={},Uy=(a,t,r,s)=>{Er(r)&&t0[r]||(Er(r)&&(t0[r]=new Date),x_(a,t,r,s))},Ly=(a,t)=>()=>{if(a.isInitialized)t();else{const r=()=>{setTimeout(()=>{a.off("initialized",r)},0),t()};a.on("initialized",r)}},Hd=(a,t,r)=>{a.loadNamespaces(t,Ly(a,r))},n0=(a,t,r,s)=>{if(Er(r)&&(r=[r]),a.options.preload&&a.options.preload.indexOf(t)>-1)return Hd(a,r,s);r.forEach(l=>{a.options.ns.indexOf(l)<0&&a.options.ns.push(l)}),a.loadLanguages(t,Ly(a,s))},__=(a,t,r={})=>!t.languages||!t.languages.length?(Uy(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(a,{lng:r.lng,precheck:(s,l)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!l(s.isLanguageChangingTo,a))return!1}}),Er=a=>typeof a=="string",S_=a=>typeof a=="object"&&a!==null,k_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,E_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},N_=a=>E_[a],j_=a=>a.replace(k_,N_);let qd={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:j_,transDefaultProps:void 0};const A_=(a={})=>{qd={...qd,...a}},T_=()=>qd;let zy;const C_=a=>{zy=a},R_=()=>zy,O_={type:"3rdParty",init(a){A_(a.options.react),C_(a)}},M_=O.createContext();class D_{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Ed={exports:{}},Nd={};var a0;function U_(){if(a0)return Nd;a0=1;var a=Go();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,s=a.useState,l=a.useEffect,o=a.useLayoutEffect,u=a.useDebugValue;function d(v,b){var w=b(),x=s({inst:{value:w,getSnapshot:b}}),S=x[0].inst,A=x[1];return o(function(){S.value=w,S.getSnapshot=b,h(S)&&A({inst:S})},[v,w,b]),l(function(){return h(S)&&A({inst:S}),v(function(){h(S)&&A({inst:S})})},[v]),u(w),w}function h(v){var b=v.getSnapshot;v=v.value;try{var w=b();return!r(v,w)}catch{return!0}}function m(v,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Nd.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:p,Nd}var r0;function L_(){return r0||(r0=1,Ed.exports=U_()),Ed.exports}var z_=L_();const $_=(a,t)=>Er(t)?t:S_(t)&&Er(t.defaultValue)?t.defaultValue:Array.isArray(a)?a[a.length-1]:a,P_={t:$_,ready:!1},B_=()=>()=>{},ot=(a,t={})=>{const{i18n:r}=t,{i18n:s,defaultNS:l}=O.useContext(M_)||{},o=r||s||R_();o&&!o.reportNamespaces&&(o.reportNamespaces=new D_),o||Uy(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=O.useMemo(()=>({...T_(),...o?.options?.react,...t}),[o,t]),{useSuspense:d,keyPrefix:h}=u,m=l||o?.options?.defaultNS,p=Er(m)?[m]:m||["translation"],v=O.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(v);const b=O.useRef(0),w=O.useCallback(E=>{if(!o)return B_;const{bindI18n:U,bindI18nStore:P}=u,H=()=>{b.current+=1,E()};return U&&o.on(U,H),P&&o.store.on(P,H),()=>{U&&U.split(" ").forEach(F=>o.off(F,H)),P&&P.split(" ").forEach(F=>o.store.off(F,H))}},[o,u]),x=O.useRef(),S=O.useCallback(()=>{if(!o)return P_;const E=!!(o.isInitialized||o.initializedStoreOnce)&&v.every(X=>__(X,o,u)),U=t.lng||o.language,P=b.current,H=x.current;if(H&&H.ready===E&&H.lng===U&&H.keyPrefix===h&&H.revision===P)return H;const B={t:o.getFixedT(U,u.nsMode==="fallback"?v:v[0],h),ready:E,lng:U,keyPrefix:h,revision:P};return x.current=B,B},[o,v,h,u,t.lng]),[A,T]=O.useState(0),{t:D,ready:M}=z_.useSyncExternalStore(w,S,S);O.useEffect(()=>{if(o&&!M&&!d){const E=()=>T(U=>U+1);t.lng?n0(o,t.lng,v,E):Hd(o,v,E)}},[o,t.lng,v,M,d,A]);const $=o||{},K=O.useRef(null),R=O.useRef(),L=E=>{const U=Object.getOwnPropertyDescriptors(E);U.__original&&delete U.__original;const P=Object.create(Object.getPrototypeOf(E),U);if(!Object.prototype.hasOwnProperty.call(P,"__original"))try{Object.defineProperty(P,"__original",{value:E,writable:!1,enumerable:!1,configurable:!1})}catch{}return P},N=O.useMemo(()=>{const E=$,U=E?.language;let P=E;E&&(K.current&&K.current.__original===E?R.current!==U?(P=L(E),K.current=P,R.current=U):P=K.current:(P=L(E),K.current=P,R.current=U));const H=[D,P,M];return H.t=D,H.i18n=P,H.ready=M,H},[D,$,M,$.resolvedLanguage,$.language,$.languages]);if(o&&d&&!M)throw new Promise(E=>{const U=()=>E();t.lng?n0(o,t.lng,v,U):Hd(o,v,U)});return N};function Yo(a,t){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&t.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r}function I_(a,t,r,s){function l(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function d(p){try{m(s.next(p))}catch(v){u(v)}}function h(p){try{m(s.throw(p))}catch(v){u(v)}}function m(p){p.done?o(p.value):l(p.value).then(d,h)}m((s=s.apply(a,t||[])).next())})}const H_=a=>a?(...t)=>a(...t):(...t)=>fetch(...t);class hh extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class q_ extends hh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class s0 extends hh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class i0 extends hh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gd;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Gd||(Gd={}));class G_{constructor(t,{headers:r={},customFetch:s,region:l=Gd.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=H_(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return I_(this,arguments,void 0,function*(r,s={}){var l;let o,u;try{const{headers:d,method:h,body:m,signal:p,timeout:v}=s;let b={},{region:w}=s;w||(w=this.region);const x=new URL(`${this.url}/${r}`);w&&w!=="any"&&(b["x-region"]=w,x.searchParams.set("forceFunctionRegion",w));let S;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",S=m):typeof m=="string"?(b["Content-Type"]="text/plain",S=m):typeof FormData<"u"&&m instanceof FormData?S=m:(b["Content-Type"]="application/json",S=JSON.stringify(m)):S=m;let A=p;v&&(u=new AbortController,o=setTimeout(()=>u.abort(),v),p?(A=u.signal,p.addEventListener("abort",()=>u.abort())):A=u.signal);const T=yield this.fetch(x.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:S,signal:A}).catch(K=>{throw new q_(K)}),D=T.headers.get("x-relay-error");if(D&&D==="true")throw new s0(T);if(!T.ok)throw new i0(T);let M=((l=T.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),$;return M==="application/json"?$=yield T.json():M==="application/octet-stream"||M==="application/pdf"?$=yield T.blob():M==="text/event-stream"?$=T:M==="multipart/form-data"?$=yield T.formData():$=yield T.text(),{data:$,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof i0||d instanceof s0?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var K_=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},F_=class{constructor(a){var t,r;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(t=a.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=a.signal,this.isMaybeSingle=(r=a.isMaybeSingle)!==null&&r!==void 0?r:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,t){return this.headers=new Headers(this.headers),this.headers.set(a,t),this}then(a,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let u=null,d=null,h=null,m=o.status,p=o.statusText;if(o.ok){var v,b;if(r.method!=="HEAD"){var w;const T=await o.text();T===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((w=r.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?d=T:d=JSON.parse(T))}const S=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),A=(b=o.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");S&&A&&A.length>1&&(h=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var x;const S=await o.text();try{u=JSON.parse(S),Array.isArray(u)&&o.status===404&&(d=[],u=null,m=200,p="OK")}catch{o.status===404&&S===""?(m=204,p="No Content"):u={message:S}}if(u&&r.isMaybeSingle&&(!(u==null||(x=u.details)===null||x===void 0)&&x.includes("0 rows"))&&(u=null,m=200,p="OK"),u&&r.shouldThrowOnError)throw new K_(u)}return{error:u,data:d,count:h,status:m,statusText:p}});return this.shouldThrowOnError||(l=l.catch(o=>{var u;let d="";const h=o?.cause;if(h){var m,p,v,b;const x=(m=h?.message)!==null&&m!==void 0?m:"",S=(p=h?.code)!==null&&p!==void 0?p:"";d=`${(v=o?.name)!==null&&v!==void 0?v:"FetchError"}: ${o?.message}`,d+=`

Caused by: ${(b=h?.name)!==null&&b!==void 0?b:"Error"}: ${x}`,S&&(d+=` (${S})`),h?.stack&&(d+=`
${h.stack}`)}else{var w;d=(w=o?.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(u=o?.name)!==null&&u!==void 0?u:"FetchError"}: ${o?.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,t)}returns(){return this}overrideTypes(){return this}},V_=class extends F_{select(a){let t=!1;const r=(a??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.order`:"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${u?`${u},`:""}${a}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${a}`),this}range(a,t,{foreignTable:r,referencedTable:s=r}={}){const l=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(o,`${t-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:l=!1,format:o="text"}={}){var u;const d=[a?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const l0=new RegExp("[,()]");var Ss=class extends V_{eq(a,t){return this.url.searchParams.append(a,`eq.${t}`),this}neq(a,t){return this.url.searchParams.append(a,`neq.${t}`),this}gt(a,t){return this.url.searchParams.append(a,`gt.${t}`),this}gte(a,t){return this.url.searchParams.append(a,`gte.${t}`),this}lt(a,t){return this.url.searchParams.append(a,`lt.${t}`),this}lte(a,t){return this.url.searchParams.append(a,`lte.${t}`),this}like(a,t){return this.url.searchParams.append(a,`like.${t}`),this}likeAllOf(a,t){return this.url.searchParams.append(a,`like(all).{${t.join(",")}}`),this}likeAnyOf(a,t){return this.url.searchParams.append(a,`like(any).{${t.join(",")}}`),this}ilike(a,t){return this.url.searchParams.append(a,`ilike.${t}`),this}ilikeAllOf(a,t){return this.url.searchParams.append(a,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(a,t){return this.url.searchParams.append(a,`ilike(any).{${t.join(",")}}`),this}regexMatch(a,t){return this.url.searchParams.append(a,`match.${t}`),this}regexIMatch(a,t){return this.url.searchParams.append(a,`imatch.${t}`),this}is(a,t){return this.url.searchParams.append(a,`is.${t}`),this}isDistinct(a,t){return this.url.searchParams.append(a,`isdistinct.${t}`),this}in(a,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&l0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`in.(${r})`),this}notIn(a,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&l0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`not.in.(${r})`),this}contains(a,t){return typeof t=="string"?this.url.searchParams.append(a,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(a,`cs.{${t.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(t)}`),this}containedBy(a,t){return typeof t=="string"?this.url.searchParams.append(a,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(a,`cd.{${t.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(t)}`),this}rangeGt(a,t){return this.url.searchParams.append(a,`sr.${t}`),this}rangeGte(a,t){return this.url.searchParams.append(a,`nxl.${t}`),this}rangeLt(a,t){return this.url.searchParams.append(a,`sl.${t}`),this}rangeLte(a,t){return this.url.searchParams.append(a,`nxr.${t}`),this}rangeAdjacent(a,t){return this.url.searchParams.append(a,`adj.${t}`),this}overlaps(a,t){return typeof t=="string"?this.url.searchParams.append(a,`ov.${t}`):this.url.searchParams.append(a,`ov.{${t.join(",")}}`),this}textSearch(a,t,{config:r,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(a,`${l}fts${o}.${t}`),this}match(a){return Object.entries(a).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(a,t,r){return this.url.searchParams.append(a,`not.${t}.${r}`),this}or(a,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${a})`),this}filter(a,t,r){return this.url.searchParams.append(a,`${t}.${r}`),this}},Y_=class{constructor(a,{headers:t={},schema:r,fetch:s}){this.url=a,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(a,t){const{head:r=!1,count:s}=t??{},l=r?"HEAD":"GET";let o=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new Ss({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:t,defaultToNull:r=!0}={}){var s;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const o=a.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ss({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(a,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:l=!0}={}){var o;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ss({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(a,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ss({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:a}={}){var t;const r="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new Ss({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},W_=class $y{constructor(t,{headers:r={},schema:s,fetch:l}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Y_(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $y(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:l=!1,count:o}={}){var u;let d;const h=new URL(`${this.url}/rpc/${t}`);let m;s||l?(d=s?"HEAD":"GET",Object.entries(r).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{h.searchParams.append(v,b)})):(d="POST",m=r);const p=new Headers(this.headers);return o&&p.set("Prefer",`count=${o}`),new Ss({method:d,url:h,headers:p,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class X_{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,l=parseInt(s.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Q_="2.89.0",J_=`realtime-js/${Q_}`,Py="1.0.0",Z_="2.0.0",o0=Py,Kd=1e4,e2=1e3,t2=100;var Ya;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Ya||(Ya={}));var Et;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Et||(Et={}));var In;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(In||(In={}));var Fd;(function(a){a.websocket="websocket"})(Fd||(Fd={}));var wr;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(wr||(wr={}));class n2{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const l=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,s;const l=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,s){var l,o;const u=t.topic,d=(l=t.ref)!==null&&l!==void 0?l:"",h=(o=t.join_ref)!==null&&o!==void 0?o:"",m=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+u.length+m.length+v.length,w=new ArrayBuffer(this.HEADER_LENGTH+b);let x=new DataView(w),S=0;x.setUint8(S++,this.KINDS.userBroadcastPush),x.setUint8(S++,h.length),x.setUint8(S++,d.length),x.setUint8(S++,u.length),x.setUint8(S++,m.length),x.setUint8(S++,v.length),x.setUint8(S++,r),Array.from(h,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(d,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(u,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(m,T=>x.setUint8(S++,T.charCodeAt(0))),Array.from(v,T=>x.setUint8(S++,T.charCodeAt(0)));var A=new Uint8Array(w.byteLength+s.byteLength);return A.set(new Uint8Array(w),0),A.set(new Uint8Array(s),w.byteLength),A.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[l,o,u,d,h]=s;return r({join_ref:l,ref:o,topic:u,event:d,payload:h})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),l=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,l)}}_decodeUserBroadcast(t,r,s){const l=r.getUint8(1),o=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const m=s.decode(t.slice(h,h+l));h=h+l;const p=s.decode(t.slice(h,h+o));h=h+o;const v=s.decode(t.slice(h,h+u));h=h+u;const b=t.slice(h,t.byteLength),w=d===this.JSON_ENCODING?JSON.parse(s.decode(b)):b,x={type:this.BROADCAST_EVENT,event:p,payload:w};return u>0&&(x.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class By{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(et||(et={}));const c0=(a,t,r={})=>{var s;const l=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,u)=>(o[u]=a2(u,a,t,l),o),{}):{}},a2=(a,t,r,s)=>{const l=t.find(d=>d.name===a),o=l?.type,u=r[a];return o&&!s.includes(o)?Iy(o,u):Vd(u)},Iy=(a,t)=>{if(a.charAt(0)==="_"){const r=a.slice(1,a.length);return l2(t,r)}switch(a){case et.bool:return r2(t);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return s2(t);case et.json:case et.jsonb:return i2(t);case et.timestamp:return o2(t);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Vd(t);default:return Vd(t)}},Vd=a=>a,r2=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},s2=a=>{if(typeof a=="string"){const t=parseFloat(a);if(!Number.isNaN(t))return t}return a},i2=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},l2=(a,t)=>{if(typeof a!="string")return a;const r=a.length-1,s=a[r];if(a[0]==="{"&&s==="}"){let o;const u=a.slice(1,r);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>Iy(t,d))}return a},o2=a=>typeof a=="string"?a.replace(" ","T"):a,Hy=a=>{const t=new URL(a);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class jd{constructor(t,r,s={},l=Kd){this.channel=t,this.event=r,this.payload=s,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u0;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(u0||(u0={}));class Ci{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},l=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ci.syncState(this.state,l,o,u),this.pendingDiffs.forEach(h=>{this.state=Ci.syncDiff(this.state,h,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},l=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ci.syncDiff(this.state,l,o,u),d())}),this.onJoin((l,o,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:o,newPresences:u})}),this.onLeave((l,o,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,l){const o=this.cloneDeep(t),u=this.transformState(r),d={},h={};return this.map(o,(m,p)=>{u[m]||(h[m]=p)}),this.map(u,(m,p)=>{const v=o[m];if(v){const b=p.map(A=>A.presence_ref),w=v.map(A=>A.presence_ref),x=p.filter(A=>w.indexOf(A.presence_ref)<0),S=v.filter(A=>b.indexOf(A.presence_ref)<0);x.length>0&&(d[m]=x),S.length>0&&(h[m]=S)}else d[m]=p}),this.syncDiff(o,{joins:d,leaves:h},s,l)}static syncDiff(t,r,s,l){const{joins:o,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),l||(l=()=>{}),this.map(o,(d,h)=>{var m;const p=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(h),p.length>0){const v=t[d].map(w=>w.presence_ref),b=p.filter(w=>v.indexOf(w.presence_ref)<0);t[d].unshift(...b)}s(d,p,h)}),this.map(u,(d,h)=>{let m=t[d];if(!m)return;const p=h.map(v=>v.presence_ref);m=m.filter(v=>p.indexOf(v.presence_ref)<0),t[d]=m,l(d,m,h),m.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const l=t[s];return"metas"in l?r[s]=l.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var d0;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(d0||(d0={}));var Ri;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Ri||(Ri={}));var ba;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(ba||(ba={}));class Ns{constructor(t,r={config:{}},s){var l,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jd(this,In.join,this.params,this.timeout),this.rejoinTimer=new By(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Ci(this),this.broadcastEndpointURL=Hy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,l,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(l=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&l!==void 0?l:[],p=!!this.bindings[Ri.PRESENCE]&&this.bindings[Ri.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},b={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(w=>t?.(ba.CHANNEL_ERROR,w)),this._onClose(()=>t?.(ba.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){t?.(ba.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,A=(x=S?.length)!==null&&x!==void 0?x:0,T=[];for(let D=0;D<A;D++){const M=S[D],{filter:{event:$,schema:K,table:R,filter:L}}=M,N=w&&w[D];if(N&&N.event===$&&Ns.isFilterValueEqual(N.schema,K)&&Ns.isFilterValueEqual(N.table,R)&&Ns.isFilterValueEqual(N.filter,L))T.push(Object.assign(Object.assign({},M),{id:N.id}));else{this.unsubscribe(),this.state=Et.errored,t?.(ba.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(ba.SUBSCRIBED);return}}).receive("error",w=>{this.state=Et.errored,t?.(ba.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t?.(ba.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Et.joined&&t===Ri.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(t,r={}){var s,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:u}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,h;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(l=>{s=new jd(this,In.leave,{},t),s.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const l=new AbortController,o=setTimeout(()=>l.abort(),s),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(o),u}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new jd(this,t,r,s);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>t2){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var l,o;const u=t.toLocaleLowerCase(),{close:d,error:h,leave:m,join:p}=In;if(s&&[d,h,m,p].indexOf(u)>=0&&s!==this._joinRef())return;let b=this._onMessage(u,r,s);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var x,S,A;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((A=(S=w.filter)===null||S===void 0?void 0:S.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(w=>w.callback(b,s)):(o=this.bindings[u])===null||o===void 0||o.filter(w=>{var x,S,A,T,D,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const $=w.id,K=(x=w.filter)===null||x===void 0?void 0:x.event;return $&&((S=r.ids)===null||S===void 0?void 0:S.includes($))&&(K==="*"||K?.toLocaleLowerCase()===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const $=(D=(T=w?.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return $==="*"||$===((M=r?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof b=="object"&&"ids"in b){const x=b.data,{schema:S,table:A,commit_timestamp:T,type:D,errors:M}=x;b=Object.assign(Object.assign({},{schema:S,table:A,commit_timestamp:T,eventType:D,new:{},old:{},errors:M}),this._getPayloadRecords(x))}w.callback(b,s)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const l=t.toLocaleLowerCase(),o={type:l,filter:r,callback:s};return this.bindings[l]?this.bindings[l].push(o):this.bindings[l]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(l=>{var o;return!(((o=l.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Ns.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(In.close,{},t)}_onError(t){this._on(In.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=c0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=c0(t.columns,t.old_record)),r}}const Ad=()=>{},vo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},c2=[1e3,2e3,5e3,1e4],u2=1e4,d2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class h2{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kd,this.transport=null,this.heartbeatIntervalMs=vo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ad,this.ref=0,this.reconnectTimer=null,this.vsn=o0,this.logger=Ad,this.conn=null,this.sendBuffer=[],this.serializer=new n2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...o)=>l(...o):(...o)=>fetch(...o),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Fd.websocket}`,this.httpEndpoint=Hy(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=X_.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ya.connecting:return wr.Connecting;case Ya.open:return wr.Open;case Ya.closing:return wr.Closing;default:return wr.Closed}}isConnected(){return this.connectionState()===wr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,l=this.getChannels().find(o=>o.topic===s);if(l)return l;{const o=new Ns(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:l,ref:o}=t,u=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${s} (${o})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(e2,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},vo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:l,payload:o,ref:u}=r,d=u?`(${u})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${l} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(l,o,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ya.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ya.open||this.conn.readyState===Ya.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(In.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${s}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([d2],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const o={access_token:r,version:J_};r&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(In.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new By(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,l,o,u,d,h,m,p,v,b,w;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t?.timeout)!==null&&s!==void 0?s:Kd,this.heartbeatIntervalMs=(l=t?.heartbeatIntervalMs)!==null&&l!==void 0?l:vo.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:Ad,this.vsn=(h=t?.vsn)!==null&&h!==void 0?h:o0,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t?.reconnectAfterMs)!==null&&m!==void 0?m:(x=>c2[x-1]||u2),this.vsn){case Py:this.encode=(p=t?.encode)!==null&&p!==void 0?p:((x,S)=>S(JSON.stringify(x))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((x,S)=>S(JSON.parse(x)));break;case Z_:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(w=t?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Ui=class extends Error{constructor(a,t){super(a),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function f2(a,t,r){const s=new URL(t,a);if(r)for(const[l,o]of Object.entries(r))o!==void 0&&s.searchParams.set(l,o);return s.toString()}async function g2(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function m2(a){const t=a.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:l,body:o,headers:u}){const d=f2(a.baseUrl,s,l),h=await g2(a.auth),m=await t(d,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...h,...u},body:o?JSON.stringify(o):void 0}),p=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),b=v&&p?JSON.parse(p):p;if(!m.ok){const w=v?b:void 0,x=w?.error;throw new Ui(x?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:x?.type,icebergCode:x?.code,details:w})}return{status:m.status,headers:m.headers,data:b}}}}function bo(a){return a.join("")}var p2=class{constructor(a,t=""){this.client=a,this.prefix=t}async listNamespaces(a){const t=a?{parent:bo(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(a,t){const r={namespace:a.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bo(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bo(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bo(a.namespace)}`}),!0}catch(t){if(t instanceof Ui&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(a,t){try{return await this.createNamespace(a,t)}catch(r){if(r instanceof Ui&&r.status===409)return;throw r}}};function gs(a){return a.join("")}var y2=class{constructor(a,t="",r){this.client=a,this.prefix=t,this.accessDelegation=r}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables`})).data.identifiers}async createTable(a,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(a,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables/${a.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(a,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(a){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables/${a.name}`,headers:t})).data.metadata}async tableExists(a){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gs(a.namespace)}/tables/${a.name}`,headers:t}),!0}catch(r){if(r instanceof Ui&&r.status===404)return!1;throw r}}async createTableIfNotExists(a,t){try{return await this.createTable(a,t)}catch(r){if(r instanceof Ui&&r.status===409)return await this.loadTable({namespace:a.namespace,name:t.name});throw r}}},v2=class{constructor(a){let t="v1";a.catalogName&&(t+=`/${a.catalogName}`);const r=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=m2({baseUrl:r,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new p2(this.client,t),this.tableOps=new y2(this.client,t,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,t){return this.namespaceOps.createNamespace(a,t)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,t){return this.tableOps.createTable(a,t)}async updateTable(a,t){return this.tableOps.updateTable(a,t)}async dropTable(a,t){await this.tableOps.dropTable(a,t)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,t){return this.namespaceOps.createNamespaceIfNotExists(a,t)}async createTableIfNotExists(a,t){return this.tableOps.createTableIfNotExists(a,t)}},Wo=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function ct(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var b2=class extends Wo{constructor(a,t,r){super(a),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Yd=class extends Wo{constructor(a,t){super(a),this.name="StorageUnknownError",this.originalError=t}};const fh=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),w2=()=>Response,Wd=a=>{if(Array.isArray(a))return a.map(r=>Wd(r));if(typeof a=="function"||a!==Object(a))return a;const t={};return Object.entries(a).forEach(([r,s])=>{const l=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[l]=Wd(s)}),t},x2=a=>{if(typeof a!="object"||a===null)return!1;const t=Object.getPrototypeOf(a);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},_2=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Li(a){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(a)}function S2(a,t){if(Li(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Li(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function k2(a){var t=S2(a,"string");return Li(t)=="symbol"?t:t+""}function E2(a,t,r){return(t=k2(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function h0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function ke(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h0(Object(r),!0).forEach(function(s){E2(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):h0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}const Td=a=>{var t;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(t=a.error)===null||t===void 0?void 0:t.message)||JSON.stringify(a)},N2=async(a,t,r)=>{a instanceof await w2()&&!r?.noResolveJson?a.json().then(s=>{const l=a.status||500,o=s?.statusCode||l+"";t(new b2(Td(s),l,o))}).catch(s=>{t(new Yd(Td(s),s))}):t(new Yd(Td(a),a))},j2=(a,t,r,s)=>{const l={method:a,headers:t?.headers||{}};return a==="GET"||!s?l:(x2(s)?(l.headers=ke({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(s)):l.body=s,t?.duplex&&(l.duplex=t.duplex),ke(ke({},l),r))};async function Qi(a,t,r,s,l,o){return new Promise((u,d)=>{a(r,j2(t,s,l,o)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>N2(h,d,s))})}async function zi(a,t,r,s){return Qi(a,"GET",t,r,s)}async function Bn(a,t,r,s,l){return Qi(a,"POST",t,s,l,r)}async function Xd(a,t,r,s,l){return Qi(a,"PUT",t,s,l,r)}async function A2(a,t,r,s){return Qi(a,"HEAD",t,ke(ke({},r),{},{noResolveJson:!0}),s)}async function gh(a,t,r,s,l){return Qi(a,"DELETE",t,s,l,r)}var T2=class{constructor(a,t){this.downloadFn=a,this.shouldThrowOnError=t}then(a,t){return this.execute().then(a,t)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(t){if(a.shouldThrowOnError)throw t;if(ct(t))return{data:null,error:t};throw t}}};let qy;qy=Symbol.toStringTag;var C2=class{constructor(a,t){this.downloadFn=a,this.shouldThrowOnError=t,this[qy]="BlobDownloadBuilder",this.promise=null}asStream(){return new T2(this.downloadFn,this.shouldThrowOnError)}then(a,t){return this.getPromise().then(a,t)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(t){if(a.shouldThrowOnError)throw t;if(ct(t))return{data:null,error:t};throw t}}};const R2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var O2=class{constructor(a,t={},r,s){this.shouldThrowOnError=!1,this.url=a,this.headers=t,this.bucketId=r,this.fetch=fh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,t,r,s){var l=this;try{let o;const u=ke(ke({},f0),s);let d=ke(ke({},l.headers),a==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),h&&o.append("metadata",l.encodeMetadata(h)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",u.cacheControl),h&&!o.has("metadata")&&o.append("metadata",l.encodeMetadata(h))):(o=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=l.toBase64(l.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!u.duplex&&(u.duplex="half")),s?.headers&&(d=ke(ke({},d),s.headers));const m=l._removeEmptyFolders(t),p=l._getFinalPath(m),v=await(a=="PUT"?Xd:Bn)(l.fetch,`${l.url}/object/${p}`,o,ke({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(ct(o))return{data:null,error:o};throw o}}async upload(a,t,r){return this.uploadOrUpdate("POST",a,t,r)}async uploadToSignedUrl(a,t,r,s){var l=this;const o=l._removeEmptyFolders(a),u=l._getFinalPath(o),d=new URL(l.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let h;const m=ke({upsert:f0.upsert},s),p=ke(ke({},l.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",m.cacheControl)):(h=r,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType),{data:{path:o,fullPath:(await Xd(l.fetch,d.toString(),h,{headers:p})).Key},error:null}}catch(h){if(l.shouldThrowOnError)throw h;if(ct(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(a,t){var r=this;try{let s=r._getFinalPath(a);const l=ke({},r.headers);t?.upsert&&(l["x-upsert"]="true");const o=await Bn(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:l}),u=new URL(r.url+o.url),d=u.searchParams.get("token");if(!d)throw new Wo("No token returned by API");return{data:{signedUrl:u.toString(),path:a,token:d},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}}async update(a,t,r){return this.uploadOrUpdate("PUT",a,t,r)}async move(a,t,r){var s=this;try{return{data:await Bn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:a,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:s.headers}),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async copy(a,t,r){var s=this;try{return{data:{path:(await Bn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:a,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async createSignedUrl(a,t,r){var s=this;try{let l=s._getFinalPath(a),o=await Bn(s.fetch,`${s.url}/object/sign/${l}`,ke({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:s.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async createSignedUrls(a,t,r){var s=this;try{const l=await Bn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:a},{headers:s.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(u=>ke(ke({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${o}`):null})),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}download(a,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),l=s?`?${s}`:"",o=this._getFinalPath(a),u=()=>zi(this.fetch,`${this.url}/${r}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new C2(u,this.shouldThrowOnError)}async info(a){var t=this;const r=t._getFinalPath(a);try{return{data:Wd(await zi(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}}async exists(a){var t=this;const r=t._getFinalPath(a);try{return await A2(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(ct(s)&&s instanceof Yd){const l=s.originalError;if([400,404].includes(l?.status))return{data:!1,error:s}}throw s}}getPublicUrl(a,t){const r=this._getFinalPath(a),s=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&s.push(l);const o=typeof t?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(t?.transform||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}async remove(a){var t=this;try{return{data:await gh(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:a},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async list(a,t,r){var s=this;try{const l=ke(ke(ke({},R2),t),{},{prefix:a||""});return{data:await Bn(s.fetch,`${s.url}/object/list/${s.bucketId}`,l,{headers:s.headers},r),error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}}async listV2(a,t){var r=this;try{const s=ke({},a);return{data:await Bn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const t=[];return a.width&&t.push(`width=${a.width}`),a.height&&t.push(`height=${a.height}`),a.resize&&t.push(`resize=${a.resize}`),a.format&&t.push(`format=${a.format}`),a.quality&&t.push(`quality=${a.quality}`),t.join("&")}};const Gy="2.89.0",Ky={"X-Client-Info":`storage-js/${Gy}`};var M2=class{constructor(a,t={},r,s){this.shouldThrowOnError=!1;const l=new URL(a);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=ke(ke({},Ky),t),this.fetch=fh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var t=this;try{const r=t.listBucketOptionsToQueryString(a);return{data:await zi(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async getBucket(a){var t=this;try{return{data:await zi(t.fetch,`${t.url}/bucket/${a}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async createBucket(a,t={public:!1}){var r=this;try{return{data:await Bn(r.fetch,`${r.url}/bucket`,{id:a,name:a,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}}async updateBucket(a,t){var r=this;try{return{data:await Xd(r.fetch,`${r.url}/bucket/${a}`,{id:a,name:a,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}}async emptyBucket(a){var t=this;try{return{data:await Bn(t.fetch,`${t.url}/bucket/${a}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(a){var t=this;try{return{data:await gh(t.fetch,`${t.url}/bucket/${a}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(a){const t={};return a&&("limit"in a&&(t.limit=String(a.limit)),"offset"in a&&(t.offset=String(a.offset)),a.search&&(t.search=a.search),a.sortColumn&&(t.sortColumn=a.sortColumn),a.sortOrder&&(t.sortOrder=a.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},D2=class{constructor(a,t={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ke(ke({},Ky),t),this.fetch=fh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var t=this;try{return{data:await Bn(t.fetch,`${t.url}/bucket`,{name:a},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async listBuckets(a){var t=this;try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const s=r.toString(),l=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await zi(t.fetch,l,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(a){var t=this;try{return{data:await gh(t.fetch,`${t.url}/bucket/${a}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}from(a){var t=this;if(!_2(a))throw new Wo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new v2({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(l,o){const u=l[o];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(l,d),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}}}})}};const mh={"X-Client-Info":`storage-js/${Gy}`,"Content-Type":"application/json"};var Fy=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gn(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var Cd=class extends Fy{constructor(a,t,r){super(a),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U2=class extends Fy{constructor(a,t){super(a),this.name="StorageVectorsUnknownError",this.originalError=t}};const ph=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),L2=a=>{if(typeof a!="object"||a===null)return!1;const t=Object.getPrototypeOf(a);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},g0=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),z2=async(a,t,r)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!r?.noResolveJson){const s=a.status||500,l=a;if(typeof l.json=="function")l.json().then(o=>{const u=o?.statusCode||o?.code||s+"";t(new Cd(g0(o),s,u))}).catch(()=>{const o=s+"";t(new Cd(l.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";t(new Cd(l.statusText||`HTTP ${s} error`,s,o))}}else t(new U2(g0(a),a))},$2=(a,t,r,s)=>{const l={method:a,headers:t?.headers||{}};return s?(L2(s)?(l.headers=ke({"Content-Type":"application/json"},t?.headers),l.body=JSON.stringify(s)):l.body=s,ke(ke({},l),r)):l};async function P2(a,t,r,s,l,o){return new Promise((u,d)=>{a(r,$2(t,s,l,o)).then(h=>{if(!h.ok)throw h;if(s?.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>z2(h,d,s))})}async function mn(a,t,r,s,l){return P2(a,"POST",t,s,l,r)}var B2=class{constructor(a,t={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ke(ke({},mh),t),this.fetch=ph(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/CreateIndex`,a,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async getIndex(a,t){var r=this;try{return{data:await mn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:a,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gn(s))return{data:null,error:s};throw s}}async listIndexes(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/ListIndexes`,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async deleteIndex(a,t){var r=this;try{return{data:await mn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:a,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(gn(s))return{data:null,error:s};throw s}}},I2=class{constructor(a,t={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ke(ke({},mh),t),this.fetch=ph(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var t=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await mn(t.fetch,`${t.url}/PutVectors`,a,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async getVectors(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/GetVectors`,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async listVectors(a){var t=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await mn(t.fetch,`${t.url}/ListVectors`,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async queryVectors(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/QueryVectors`,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async deleteVectors(a){var t=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await mn(t.fetch,`${t.url}/DeleteVectors`,a,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}},H2=class{constructor(a,t={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ke(ke({},mh),t),this.fetch=ph(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async getBucket(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:a},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async listBuckets(a={}){var t=this;try{return{data:await mn(t.fetch,`${t.url}/ListVectorBuckets`,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}async deleteBucket(a){var t=this;try{return{data:await mn(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gn(r))return{data:null,error:r};throw r}}},q2=class extends H2{constructor(a,t={}){super(a,t.headers||{},t.fetch)}from(a){return new G2(this.url,this.headers,a,this.fetch)}async createBucket(a){var t=()=>super.createBucket,r=this;return t().call(r,a)}async getBucket(a){var t=()=>super.getBucket,r=this;return t().call(r,a)}async listBuckets(a={}){var t=()=>super.listBuckets,r=this;return t().call(r,a)}async deleteBucket(a){var t=()=>super.deleteBucket,r=this;return t().call(r,a)}},G2=class extends B2{constructor(a,t,r,s){super(a,t,s),this.vectorBucketName=r}async createIndex(a){var t=()=>super.createIndex,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(a={}){var t=()=>super.listIndexes,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(a){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,a)}async deleteIndex(a){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,a)}index(a){return new K2(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},K2=class extends I2{constructor(a,t,r,s,l){super(a,t,l),this.vectorBucketName=r,this.indexName=s}async putVectors(a){var t=()=>super.putVectors,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(a){var t=()=>super.getVectors,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(a={}){var t=()=>super.listVectors,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(a){var t=()=>super.queryVectors,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(a){var t=()=>super.deleteVectors,r=this;return t().call(r,ke(ke({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},F2=class extends M2{constructor(a,t={},r,s){super(a,t,r,s)}from(a){return new O2(this.url,this.headers,a,this.fetch)}get vectors(){return new q2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new D2(this.url+"/iceberg",this.headers,this.fetch)}};const Vy="2.89.0",ks=30*1e3,Qd=3,Rd=Qd*ks,V2="http://localhost:9999",Y2="supabase.auth.token",W2={"X-Client-Info":`gotrue-js/${Vy}`},Jd="X-Supabase-Api-Version",Yy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},X2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q2=600*1e3;class $i extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function be(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class J2 extends $i{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Z2(a){return be(a)&&a.name==="AuthApiError"}class xr extends $i{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _a extends $i{constructor(t,r,s,l){super(t,s,l),this.name=r,this.status=s}}class fn extends _a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eS(a){return be(a)&&a.name==="AuthSessionMissingError"}class ms extends _a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wo extends _a{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class xo extends _a{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tS(a){return be(a)&&a.name==="AuthImplicitGrantRedirectError"}class m0 extends _a{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nS extends _a{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zd extends _a{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Od(a){return be(a)&&a.name==="AuthRetryableFetchError"}class p0 extends _a{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class eh extends _a{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),y0=` 	
\r=`.split(""),aS=(()=>{const a=new Array(128);for(let t=0;t<a.length;t+=1)a[t]=-1;for(let t=0;t<y0.length;t+=1)a[y0[t].charCodeAt(0)]=-2;for(let t=0;t<Uo.length;t+=1)a[Uo[t].charCodeAt(0)]=t;return a})();function v0(a,t,r){if(a!==null)for(t.queue=t.queue<<8|a,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Uo[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Uo[s]),t.queuedBits-=6}}function Wy(a,t,r){const s=aS[a];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function b0(a){const t=[],r=u=>{t.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},o=u=>{iS(u,s,r)};for(let u=0;u<a.length;u+=1)Wy(a.charCodeAt(u),l,o);return t.join("")}function rS(a,t){if(a<=127){t(a);return}else if(a<=2047){t(192|a>>6),t(128|a&63);return}else if(a<=65535){t(224|a>>12),t(128|a>>6&63),t(128|a&63);return}else if(a<=1114111){t(240|a>>18),t(128|a>>12&63),t(128|a>>6&63),t(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function sS(a,t){for(let r=0;r<a.length;r+=1){let s=a.charCodeAt(r);if(s>55295&&s<=56319){const l=(s-55296)*1024&65535;s=(a.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}rS(s,t)}}function iS(a,t,r){if(t.utf8seq===0){if(a<=127){r(a);return}for(let s=1;s<6;s+=1)if((a>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=a&31;else if(t.utf8seq===3)t.codepoint=a&15;else if(t.utf8seq===4)t.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|a&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function As(a){const t=[],r={queue:0,queuedBits:0},s=l=>{t.push(l)};for(let l=0;l<a.length;l+=1)Wy(a.charCodeAt(l),r,s);return new Uint8Array(t)}function lS(a){const t=[];return sS(a,r=>t.push(r)),new Uint8Array(t)}function Sr(a){const t=[],r={queue:0,queuedBits:0},s=l=>{t.push(l)};return a.forEach(l=>v0(l,r,s)),v0(null,r,s),t.join("")}function oS(a){return Math.round(Date.now()/1e3)+a}function cS(){return Symbol("auth-callback")}const Ut=()=>typeof window<"u"&&typeof document<"u",yr={tested:!1,writable:!1},Xy=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yr.tested)return yr.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),yr.tested=!0,yr.writable=!0}catch{yr.tested=!0,yr.writable=!1}return yr.writable};function uS(a){const t={},r=new URL(a);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,o)=>{t[o]=l})}catch{}return r.searchParams.forEach((s,l)=>{t[l]=s}),t}const Qy=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),dS=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Es=async(a,t,r)=>{await a.setItem(t,JSON.stringify(r))},vr=async(a,t)=>{const r=await a.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Dt=async(a,t)=>{await a.removeItem(t)};class Xo{constructor(){this.promise=new Xo.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xo.promiseConstructor=Promise;function Md(a){const t=a.split(".");if(t.length!==3)throw new eh("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!X2.test(t[s]))throw new eh("JWT not in base64url format");return{header:JSON.parse(b0(t[0])),payload:JSON.parse(b0(t[1])),signature:As(t[2]),raw:{header:t[0],payload:t[1]}}}async function hS(a){return await new Promise(t=>{setTimeout(()=>t(null),a)})}function fS(a,t){return new Promise((s,l)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await a(o);if(!t(o,null,u)){s(u);return}}catch(u){if(!t(o,u)){l(u);return}}})()})}function gS(a){return("0"+a.toString(16)).substr(-2)}function mS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let l="";for(let o=0;o<56;o++)l+=r.charAt(Math.floor(Math.random()*s));return l}return crypto.getRandomValues(t),Array.from(t,gS).join("")}async function pS(a){const r=new TextEncoder().encode(a),s=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(s);return Array.from(l).map(o=>String.fromCharCode(o)).join("")}async function yS(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const r=await pS(a);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ps(a,t,r=!1){const s=mS();let l=s;r&&(l+="/PASSWORD_RECOVERY"),await Es(a,`${t}-code-verifier`,l);const o=await yS(s);return[o,s===o?"plain":"s256"]}const vS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bS(a){const t=a.headers.get(Jd);if(!t||!t.match(vS))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wS(a){if(!a)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(a<=t)throw new Error("JWT has expired")}function xS(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _S=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ys(a){if(!_S.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dd(){const a={};return new Proxy(a,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function SS(a,t){return new Proxy(a,{get:(r,s,l)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,l)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,l)}})}function w0(a){return JSON.parse(JSON.stringify(a))}const br=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),kS=[502,503,504];async function x0(a){var t;if(!dS(a))throw new Zd(br(a),0);if(kS.includes(a.status))throw new Zd(br(a),a.status);let r;try{r=await a.json()}catch(o){throw new xr(br(o),o)}let s;const l=bS(a);if(l&&l.getTime()>=Yy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new p0(br(r),a.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new fn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new p0(br(r),a.status,r.weak_password.reasons);throw new J2(br(r),a.status||500,s)}const ES=(a,t,r,s)=>{const l={method:a,headers:t?.headers||{}};return a==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),l.body=JSON.stringify(s),Object.assign(Object.assign({},l),r))};async function Se(a,t,r,s){var l;const o=Object.assign({},s?.headers);o[Jd]||(o[Jd]=Yy["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(l=s?.query)!==null&&l!==void 0?l:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await NS(a,t,r+d,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function NS(a,t,r,s,l,o){const u=ES(t,s,l,o);let d;try{d=await a(r,Object.assign({},u))}catch(h){throw console.error(h),new Zd(br(h),0)}if(d.ok||await x0(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await x0(h)}}function $n(a){var t;let r=null;TS(a)&&(r=Object.assign({},a),a.expires_at||(r.expires_at=oS(a.expires_in)));const s=(t=a.user)!==null&&t!==void 0?t:a;return{data:{session:r,user:s},error:null}}function _0(a){const t=$n(a);return!t.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=a.weak_password),t}function Qa(a){var t;return{data:{user:(t=a.user)!==null&&t!==void 0?t:a},error:null}}function jS(a){return{data:a,error:null}}function AS(a){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:l,verification_type:o}=a,u=Yo(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:s,redirect_to:l,verification_type:o},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function S0(a){return a}function TS(a){return a.access_token&&a.refresh_token&&a.expires_in}const Ud=["global","local","others"];class CS{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Qy(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ud[0]){if(Ud.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ud.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qa})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Yo(t,["options"]),l=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(l.new_email=s?.newEmail,delete l.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:AS,redirectTo:r?.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qa})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,l,o,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},p=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:S0});if(p.error)throw p.error;const v=await p.json(),b=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);m[`${A}Page`]=S}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(be(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){ys(t);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qa})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ys(t);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Qa})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){ys(t);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qa})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){ys(t.userId);try{const{data:r,error:s}=await Se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:s}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ys(t.userId),ys(t.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,l,o,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},p=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(l=t?.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:S0});if(p.error)throw p.error;const v=await p.json(),b=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(x=>{const S=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);m[`${A}Page`]=S}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(be(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(be(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}}function k0(a={}){return{getItem:t=>a[t]||null,setItem:(t,r)=>{a[t]=r},removeItem:t=>{delete a[t]}}}const vs={debug:!!(globalThis&&Xy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jy extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RS extends Jy{}async function OS(a,t,r){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async l=>{if(l){vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,l.name);try{return await r()}finally{vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,l.name)}}else{if(t===0)throw vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new RS(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(vs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function MS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Zy(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function DS(a){return parseInt(a,16)}function US(a){const t=new TextEncoder().encode(a);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function LS(a){var t;const{chainId:r,domain:s,expirationTime:l,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:p,uri:v,version:b}=a;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=a.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const w=Zy(a.address),x=p?`${p}://${s}`:s,S=a.statement?`${a.statement}
`:"",A=`${x} wants you to sign in with your Ethereum account:
${w}

${S}`;let T=`URI: ${v}
Version: ${b}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(l&&(T+=`
Expiration Time: ${l.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),h&&(T+=`
Request ID: ${h}`),m){let D=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);D+=`
- ${M}`}T+=D}return`${A}
${T}`}class St extends Error{constructor({message:t,code:r,cause:s,name:l}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=l??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Lo extends St{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function zS({error:a,options:t}){var r,s,l;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(t.signal instanceof AbortSignal)return new St({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new St({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new St({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((l=o.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new St({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new St({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new St({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new St({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new St({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const u=window.location.hostname;if(ev(u)){if(o.rp.id!==u)return new St({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new St({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new St({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new St({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new St({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function $S({error:a,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(t.signal instanceof AbortSignal)return new St({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new St({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const s=window.location.hostname;if(ev(s)){if(r.rpId!==s)return new St({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new St({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new St({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new St({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class PS{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const BS=new PS;function IS(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:t,user:r,excludeCredentials:s}=a,l=Yo(a,["challenge","user","excludeCredentials"]),o=As(t).buffer,u=Object.assign(Object.assign({},r),{id:As(r.id).buffer}),d=Object.assign(Object.assign({},l),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const m=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:As(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function HS(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:t,allowCredentials:r}=a,s=Yo(a,["challenge","allowCredentials"]),l=As(t).buffer,o=Object.assign(Object.assign({},s),{challenge:l});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:As(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function qS(a){var t;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a;return{id:a.id,rawId:a.id,response:{attestationObject:Sr(new Uint8Array(a.response.attestationObject)),clientDataJSON:Sr(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function GS(a){var t;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a,s=a.getClientExtensionResults(),l=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Sr(new Uint8Array(l.authenticatorData)),clientDataJSON:Sr(new Uint8Array(l.clientDataJSON)),signature:Sr(new Uint8Array(l.signature)),userHandle:l.userHandle?Sr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ev(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function E0(){var a,t;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function KS(a){try{const t=await navigator.credentials.create(a);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lo("Browser returned unexpected credential type",t)}:{data:null,error:new Lo("Empty credential response",t)}}catch(t){return{data:null,error:zS({error:t,options:a})}}}async function FS(a){try{const t=await navigator.credentials.get(a);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lo("Browser returned unexpected credential type",t)}:{data:null,error:new Lo("Empty credential response",t)}}catch(t){return{data:null,error:$S({error:t,options:a})}}}const VS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zo(...a){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),s={};for(const l of a)if(l)for(const o in l){const u=l[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(r(u))s[o]=u;else if(t(u)){const d=s[o];t(d)?s[o]=zo(d,u):s[o]=zo(u)}else s[o]=u}return s}function WS(a,t){return zo(VS,a,t||{})}function XS(a,t){return zo(YS,a,t||{})}class QS{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:l},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!u)return{data:null,error:d};const h=l??BS.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=WS(u.webauthn.credential_options.publicKey,o?.create),{data:p,error:v}=await KS({publicKey:m,signal:h});return p?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}case"request":{const m=XS(u.webauthn.credential_options.publicKey,o?.request),{data:p,error:v}=await FS(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:h}));return p?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new xr("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!r)return{data:null,error:new $i("rpId is required for WebAuthn authentication")};try{if(!E0())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:l},{request:o});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:s,credential_response:h.credential_response}})}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new xr("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!r)return{data:null,error:new $i("rpId is required for WebAuthn registration")};try{if(!E0())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:l},{create:o});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new xr("Unexpected error in register",u)}}}}MS();const JS={url:V2,storageKey:Y2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function N0(a,t,r){return await r()}const bs={};class Pi{get jwks(){var t,r;return(r=(t=bs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=bs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bs[this.storageKey]=Object.assign(Object.assign({},bs[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},JS),t);if(this.storageKey=o.storageKey,this.instanceID=(r=Pi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Pi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ut()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new CS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Qy(o.fetch),this.lock=o.lock||N0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Ut()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=OS:this.lock=N0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new QS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Xy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=k0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=k0(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vy}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(Ut()&&(r=uS(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Ut()&&this.detectSessionInUrl&&s!=="none"){const{data:l,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),tS(o)){const h=(t=o.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?this._returnResult({error:r}):this._returnResult({error:new xr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,l;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(l=t?.options)===null||l===void 0?void 0:l.captchaToken}},xform:$n}),{data:u,error:d}=o;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var r,s,l;try{let o;if("email"in t){const{email:p,password:v,options:b}=t;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await ps(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:p,password:v,data:(r=b?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:w,code_challenge_method:x},xform:$n})}else if("phone"in t){const{phone:p,password:v,options:b}=t;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(s=b?.data)!==null&&s!==void 0?s:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:$n})}else throw new wo("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return await Dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:u,options:d}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_0})}else if("phone"in t){const{phone:o,password:u,options:d}=t;r=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_0})}else throw new wo("You must provide either an email or phone number and a password");const{data:s,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s||!s.session||!s.user){const o=new ms;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:l})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,l,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,l,o,u,d,h,m,p,v,b;let w,x;if("message"in t)w=t.message,x=t.signature;else{const{chain:S,wallet:A,statement:T,options:D}=t;let M;if(Ut())if(typeof A=="object")M=A;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")M=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=A}const $=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href),K=await M.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Zy(K[0]);let L=(s=D?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!L){const E=await M.request({method:"eth_chainId"});L=DS(E)}const N={domain:$.host,address:R,statement:T,uri:$.href,version:"1",chainId:L,nonce:(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(u=(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=D?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=D?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(p=D?.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=LS(N),x=await M.request({method:"personal_sign",params:[US(w),R]})}try{const{data:S,error:A}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:x},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:$n});if(A)throw A;if(!S||!S.session||!S.user){const T=new ms;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:A})}catch(S){if(be(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var r,s,l,o,u,d,h,m,p,v,b,w;let x,S;if("message"in t)x=t.message,S=t.signature;else{const{chain:A,wallet:T,statement:D,options:M}=t;let $;if(Ut())if(typeof T=="object")$=T;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))$=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=T}const K=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in $&&$.signIn){const R=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),D?{statement:D}:null));let L;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")L=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)L=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)x=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),S=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${K.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(l=(s=M?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((o=M?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((d=M?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((h=M?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((v=(p=M?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...M.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const R=await $.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=R}}try{const{data:A,error:T}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Sr(S)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:$n});if(T)throw T;if(!A||!A.session||!A.user){const D=new ms;return this._returnResult({data:{user:null,session:null},error:D})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(be(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const r=await vr(this.storage,`${this.storageKey}-code-verifier`),[s,l]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new nS;const{data:o,error:u}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:$n});if(await Dt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!o||!o.session||!o.user){const d=new ms;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:l??null}),error:u})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:l,access_token:o,nonce:u}=t,d=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:l,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:$n}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const p=new ms;return this._returnResult({data:{user:null,session:null},error:p})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,l,o,u;try{if("email"in t){const{email:d,options:h}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await ps(this.storage,this.storageKey));const{error:v}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:d,options:h}=t,{data:m,error:p}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(l=h?.data)!==null&&l!==void 0?l:{},create_user:(o=h?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(u=h?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:p})}throw new wo("You must provide either an email or phone number.")}catch(d){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,s;try{let l,o;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:l,xform:$n});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var r,s,l,o,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await ps(this.storage,this.storageKey));const m=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((l=t?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:jS});return!((o=m.data)===null||o===void 0)&&o.url&&Ut()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new fn;const{error:l}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:l,options:o}=t,{error:u}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:s,type:l,options:o}=t,{data:u,error:d}=await Se(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:l,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new wo("You must provide either an email or phone number and a type")}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Rd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const u=await vr(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=Dd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=SS(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qa}):await this._useSession(async r=>{var s,l,o;const{data:u,error:d}=r;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0,xform:Qa})})}catch(r){if(be(r))return eS(r)&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:l,error:o}=s;if(o)throw o;if(!l.session)throw new fn;const u=l.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await ps(this.storage,this.storageKey));const{data:m,error:p}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Qa});if(p)throw p;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new fn;const r=Date.now()/1e3;let s=r,l=!0,o=null;const{payload:u}=Md(t.access_token);if(u.exp&&(s=u.exp,l=s<=r),l){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;o={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:u,error:d}=r;if(d)throw d;t=(s=u.session)!==null&&s!==void 0?s:void 0}if(!t?.refresh_token)throw new fn;const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ut())throw new xo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new xo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new m0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new m0("No code detected.");const{data:D,error:M}=await this._exchangeCodeForSession(t.code);if(M)throw M;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:l,access_token:o,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=t;if(!o||!d||!u||!m)throw new xo("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let b=p+v;h&&(b=parseInt(h));const w=b-p;w*1e3<=ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${v}s`);const x=b-v;p-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,b,p):p-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,b,p);const{data:S,error:A}=await this._getUser(o);if(A)throw A;const T={provider_token:s,provider_refresh_token:l,access_token:o,expires_in:v,expires_at:b,refresh_token:u,token_type:m,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:t.type},error:null})}catch(s){if(be(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:l,error:o}=r;if(o)return this._returnResult({error:o});const u=(s=l.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(Z2(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=cS(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,l;try{const{data:{session:o},error:u}=r;if(u)throw u;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,l=null;this.flowType==="pkce"&&([s,l]=await ps(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:l}=await this._useSession(async o=>{var u,d,h,m,p;const{data:v,error:b}=o;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(l)throw l;return Ut()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:t.provider,url:s?.url},error:null})}catch(s){if(be(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:l,data:{session:o}}=r;if(l)throw l;const{options:u,provider:d,token:h,access_token:m,nonce:p}=t,v=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:m,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:$n}),{data:b,error:w}=v;return w?this._returnResult({data:{user:null,session:null},error:w}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new ms}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:w}))}catch(l){if(await Dt(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,l;const{data:o,error:u}=r;if(u)throw u;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await fS(async l=>(l>0&&await hS(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$n})),(l,o)=>{const u=200*Math.pow(2,l);return o&&Od(o)&&Date.now()+u-s<ks})}catch(s){if(this._debug(r,"error",s),be(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Ut()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await vr(this.storage,this.storageKey);if(l&&this.userStorage){let u=await vr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await Es(this.userStorage,this.storageKey+"-user",u)),l.user=(t=u?.user)!==null&&t!==void 0?t:Dd()}else if(l&&!l.user&&!l.user){const u=await vr(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await Dt(this.storage,this.storageKey+"-user"),await Es(this.storage,this.storageKey,l)):l.user=Dd()}if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const o=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Rd;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Rd}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),Od(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(l.access_token);!d&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Xo;const{data:o,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!o.session)throw new fn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(l,"error",o),be(o)){const u={data:null,error:o};return Od(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,r,s=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(h){o.push(h)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Dt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Es(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const o=w0(l);await Es(this.storage,this.storageKey,o)}else{const l=w0(r);await Es(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Dt(this.storage,this.storageKey),await Dt(this.storage,this.storageKey+"-code-verifier"),await Dt(this.storage,this.storageKey+"-user"),this.userStorage&&await Dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ut()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ks);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((s.expires_at*1e3-t)/ks);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ks}ms, refresh threshold is ${Qd} ticks`),l<=Qd&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jy)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const l=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&l.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await ps(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(d.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);l.push(o.toString())}return s?.skipBrowserRedirect&&l.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:l,error:o}=r;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,l;const{data:o,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:m}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&h.type==="totp"&&(!((l=h?.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:o}=r;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?qS(t.webauthn.credential_response):GS(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:o}=r;if(o)return this._returnResult({data:null,error:o});const u=await Se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:IS(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:HS(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const l={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r?.factors)!==null&&t!==void 0?t:[])l.all.push(o),o.status==="verified"&&l[o.factor_type].push(o);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Md(s.access_token);let u=null;o.aal&&(u=o.aal);let d=u;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=o.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;return l?this._returnResult({data:null,error:l}):s?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new fn})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:l},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new fn});const u=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Ut()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(be(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:l},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new fn});const u=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Ut()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(be(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new fn})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;return l?this._returnResult({data:null,error:l}):s?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fn})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(d=>d.kid===t);if(s)return s;const l=Date.now();if(s=this.jwks.keys.find(d=>d.kid===t),s&&this.jwks_cached_at+Q2>l)return s;const{data:o,error:u}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=l,s=o.keys.find(d=>d.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:w,error:x}=await this.getSession();if(x||!w.session)return this._returnResult({data:null,error:x});s=w.session.access_token}const{header:l,payload:o,signature:u,raw:{header:d,payload:h}}=Md(s);r?.allowExpired||wS(o.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:o,header:l,signature:u},error:null}}const p=xS(l.alg),v=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,lS(`${d}.${h}`)))throw new eh("Invalid JWT signature");return{data:{claims:o,header:l,signature:u},error:null}}catch(s){if(be(s))return this._returnResult({data:null,error:s});throw s}}}Pi.nextInstanceID={};const ZS=Pi,ek="2.89.0";let ji="";typeof Deno<"u"?ji="deno":typeof document<"u"?ji="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ji="react-native":ji="node";const tk={"X-Client-Info":`supabase-js-${ji}/${ek}`},nk={headers:tk},ak={schema:"public"},rk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sk={};function Bi(a){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(a)}function ik(a,t){if(Bi(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Bi(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function lk(a){var t=ik(a,"string");return Bi(t)=="symbol"?t:t+""}function ok(a,t,r){return(t=lk(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function j0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function ft(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j0(Object(r),!0).forEach(function(s){ok(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):j0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}const ck=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),uk=()=>Headers,dk=(a,t,r)=>{const s=ck(r),l=uk();return async(o,u)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:a;let m=new l(u?.headers);return m.has("apikey")||m.set("apikey",a),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),s(o,ft(ft({},u),{},{headers:m}))}};function hk(a){return a.endsWith("/")?a:a+"/"}function fk(a,t){var r,s;const{db:l,auth:o,realtime:u,global:d}=a,{db:h,auth:m,realtime:p,global:v}=t,b={db:ft(ft({},h),l),auth:ft(ft({},m),o),realtime:ft(ft({},p),u),storage:{},global:ft(ft(ft({},v),d),{},{headers:ft(ft({},(r=v?.headers)!==null&&r!==void 0?r:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return a.accessToken?b.accessToken=a.accessToken:delete b.accessToken,b}function gk(a){const t=a?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hk(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var mk=class extends ZS{constructor(a){super(a)}},pk=class{constructor(a,t,r){var s,l;this.supabaseUrl=a,this.supabaseKey=t;const o=gk(a);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:ak,realtime:sk,auth:ft(ft({},rk),{},{storageKey:u}),global:nk},h=fk(r??{},d);if(this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=dk(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ft({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new W_(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new F2(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new G_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,t,r)}channel(a,t={config:{}}){return this.realtime.channel(a,t)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,t,r;if(a.accessToken)return await a.accessToken();const{data:s}=await a.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:l,storageKey:o,flowType:u,lock:d,debug:h,throwOnError:m},p,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mk({url:this.authUrl.href,headers:ft(ft({},b),p),storageKey:o,autoRefreshToken:a,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:l,flowType:u,lock:d,debug:h,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new h2(this.realtimeUrl.href,ft(ft({},a),{},{params:ft(ft({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,t)=>{this._handleTokenChanged(a,"CLIENT",t?.access_token)})}_handleTokenChanged(a,t,r){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const yk=(a,t,r)=>new pk(a,t,r);function vk(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const t=a.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}vk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bk=void 0,wk=void 0;console.error("Supabase URL or Key missing!");const ue=yk(bk,wk),tv=O.createContext();function yn(){return O.useContext(tv)}function xk({children:a}){const[t,r]=O.useState(null),[s,l]=O.useState(!0);O.useEffect(()=>{ue.auth.getSession().then(({data:{session:p}})=>{p?.user?o(p.user):(r(null),l(!1))});const{data:{subscription:m}}=ue.auth.onAuthStateChange(async(p,v)=>{v?.user?await o(v.user):(r(null),l(!1))});return()=>m.unsubscribe()},[]);const o=async m=>{try{const{data:p,error:v}=await ue.from("profiles").select("*").eq("id",m.id).single();v&&v.code!=="PGRST116"&&console.error("Error fetching profile:",v);const b={uid:m.id,email:m.email,...p,name:p?.full_name||m.user_metadata?.name||"User",photoURL:p?.avatar_url||m.user_metadata?.avatar_url,displayName:p?.full_name||m.user_metadata?.name};r(b)}catch(p){console.error(p)}finally{l(!1)}},h={currentUser:t,loading:s,logout:async()=>{await ue.auth.signOut(),r(null)},refreshUser:async()=>{if(t){const{data:{user:m}}=await ue.auth.getUser();m&&await o(m)}}};return g.jsx(tv.Provider,{value:h,children:!s&&a})}const _k=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sk=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),A0=a=>{const t=Sk(a);return t.charAt(0).toUpperCase()+t.slice(1)},nv=(...a)=>a.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),kk=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Ek={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nk=O.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:o,iconNode:u,...d},h)=>O.createElement("svg",{ref:h,...Ek,width:t,height:t,stroke:a,strokeWidth:s?Number(r)*24/Number(t):r,className:nv("lucide",l),...!o&&!kk(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,p])=>O.createElement(m,p)),...Array.isArray(o)?o:[o]]));const we=(a,t)=>{const r=O.forwardRef(({className:s,...l},o)=>O.createElement(Nk,{ref:o,iconNode:t,className:nv(`lucide-${_k(A0(a))}`,`lucide-${a}`,s),...l}));return r.displayName=A0(a),r};const jk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yh=we("activity",jk);const Ak=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],th=we("arrow-left",Ak);const Tk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],vh=we("arrow-right",Tk);const Ck=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],nh=we("bell",Ck);const Rk=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ok=we("brain",Rk);const Mk=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Dk=we("bug",Mk);const Uk=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ts=we("camera",Uk);const Lk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zk=we("check",Lk);const $k=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bh=we("chevron-down",$k);const Pk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],av=we("circle-alert",Pk);const Bk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qo=we("circle-check-big",Bk);const Ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hk=we("circle-check",Ik);const qk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jo=we("clock",qk);const Gk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kk=we("file-text",Gk);const Fk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$o=we("globe",Fk);const Vk=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],rv=we("heart",Vk);const Yk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sv=we("house",Yk);const Wk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],iv=we("image",Wk);const Xk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lv=we("info",Xk);const Qk=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],ov=we("leaf",Qk);const Jk=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Zk=we("lightbulb",Jk);const eE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tn=we("loader-circle",eE);const tE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nE=we("lock",tE);const aE=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],T0=we("log-in",aE);const rE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],sE=we("log-out",rE);const iE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cv=we("mail",iE);const lE=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],oE=we("menu",lE);const cE=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ii=we("message-circle",cE);const uE=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],dE=we("mic",uE);const hE=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],C0=we("moon",hE);const fE=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],R0=we("paperclip",fE);const gE=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],mE=we("pause",gE);const pE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uv=we("pen",pE);const yE=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],vE=we("play",yE);const bE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wE=we("plus",bE);const xE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dv=we("refresh-cw",xE);const _E=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hv=we("save",_E);const SE=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],O0=we("scan-line",SE);const kE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fv=we("search",kE);const EE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Hi=we("send",EE);const NE=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Po=we("share-2",NE);const jE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AE=we("shield-check",jE);const TE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],CE=we("sparkles",TE);const RE=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],en=we("sprout",RE);const OE=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],M0=we("stethoscope",OE);const ME=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],D0=we("sun",ME);const DE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],U0=we("target",DE);const UE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qi=we("trash-2",UE);const LE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ah=we("triangle-alert",LE);const zE=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$E=we("user-check",zE);const PE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],BE=we("user-minus",PE);const IE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wh=we("user-plus",IE);const HE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gi=we("user",HE);const qE=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],GE=we("wand-sparkles",qE);const KE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rn=we("x",KE);const FE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],VE=we("zap",FE),gv=O.createContext();function Sa(){return O.useContext(gv)}function YE({children:a}){const[t,r]=O.useState([]),s=O.useCallback((o,u="info",d=4e3)=>{const h=Date.now();r(m=>[...m,{id:h,message:o,type:u}]),setTimeout(()=>{l(h)},d)},[]),l=O.useCallback(o=>{r(u=>u.filter(d=>d.id!==o))},[]);return g.jsxs(gv.Provider,{value:{addToast:s,removeToast:l},children:[a,g.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:t.map(o=>g.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&g.jsx(Qo,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0"}),o.type==="error"&&g.jsx(av,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0"}),(o.type==="info"||o.type==="warning")&&g.jsx(lv,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),g.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}class mv extends xx.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[g.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:g.jsx(ah,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),g.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),g.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[g.jsx(dv,{className:"w-5 h-5"}),"Reload"]}),g.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[g.jsx(sv,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}const WE=async(a,t,r,s)=>{try{if(!a||!r)throw new Error("Invalid user IDs");const{error:l}=await ue.from("follows").insert({follower_id:a,following_id:r});if(l)throw l;return!0}catch(l){throw console.error("Error following user:",l),l}},No=async(a,t)=>{try{if(!a||!t)throw new Error("Invalid user IDs");const{error:r}=await ue.from("follows").delete().match({follower_id:a,following_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error unfollowing user:",r),r}},pv=async(a,t)=>{try{if(!a||!t)return{isFollowing:!1,isRequested:!1};const{data:r,error:s}=await ue.from("follows").select("*").match({follower_id:a,following_id:t}).single(),{data:l}=await ue.from("follow_requests").select("*").match({follower_id:a,target_user_id:t}).single();return{isFollowing:!!r,isRequested:!!l}}catch{return{isFollowing:!1,isRequested:!1}}},yv=async(a,t,r)=>{try{const{error:s}=await ue.from("follow_requests").insert({follower_id:a,target_user_id:r});if(s)throw s;return!0}catch(s){throw console.error("Error sending follow request:",s),s}},vv=async(a,t)=>{try{const{error:r}=await ue.from("follow_requests").delete().match({follower_id:a,target_user_id:t});if(r)throw r;return!0}catch(r){throw r}},XE=async(a,t,r,s,l)=>{try{await WE(t,r,s,l),await bv(s,t);const{error:o}=await ue.from("follow_requests").delete().eq("id",a);if(o)throw o;return!0}catch(o){throw o}},bv=async(a,t)=>{try{const{error:r}=await ue.from("follow_requests").delete().match({follower_id:t,target_user_id:a});if(r)throw r;return!0}catch(r){throw r}},QE=async a=>{try{const{data:t,error:r}=await ue.from("follows").select("follower_id, profiles!follower_id(*)").eq("following_id",a);if(r)throw r;return t.map(s=>({id:s.follower_id,uid:s.follower_id,...s.profiles,name:s.profiles.full_name,photoURL:s.profiles.avatar_url}))}catch{return[]}},JE=async a=>{try{const{data:t,error:r}=await ue.from("follows").select("following_id, profiles!following_id(*)").eq("follower_id",a);if(r)throw r;return t.map(s=>({id:s.following_id,uid:s.following_id,...s.profiles,name:s.profiles.full_name,photoURL:s.profiles.avatar_url}))}catch{return[]}};function ZE({onClose:a}){const{t}=ot(),{currentUser:r}=yn(),{addToast:s}=Sa(),l=pn(),[o,u]=O.useState([]),[d,h]=O.useState(!0),[m,p]=O.useState(null);O.useEffect(()=>{if(!r)return;const w=async()=>{const{data:S,error:A}=await ue.from("follow_requests").select("*").eq("target_user_id",r.uid).eq("status","pending").order("created_at",{ascending:!1});if(A){console.error("Error fetching requests:",A),h(!1);return}if(S&&S.length>0){const T=S.map(K=>K.follower_id),{data:D}=await ue.from("profiles").select("id, full_name, avatar_url").in("id",T),M=(D||[]).reduce((K,R)=>({...K,[R.id]:R}),{}),$=S.map(K=>({id:K.follower_id,requestId:K.id,followerName:M[K.follower_id]?.full_name||"User",followerPhoto:M[K.follower_id]?.avatar_url,...K}));u($)}else u([]);h(!1)};w();const x=ue.channel("notifications_modal").on("postgres_changes",{event:"*",schema:"public",table:"follow_requests",filter:`target_user_id=eq.${r.uid}`},()=>{w()}).subscribe();return()=>{ue.removeChannel(x)}},[r]);const v=async w=>{if(!m){p(w.id),u(x=>x.filter(S=>S.id!==w.id));try{await XE(w.id,r.uid,w.id),s(t("request_accepted")||"Request Accepted","success")}catch(x){console.error(x),s(t("error_occurred")||"Error","error")}finally{p(null)}}},b=async w=>{if(!m){p(w),u(x=>x.filter(S=>S.id!==w));try{await bv(r.uid,w),s(t("request_rejected")||"Request Rejected","info")}catch(x){console.error(x),s("Error","error")}finally{p(null)}}};return g.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:a,children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:w=>w.stopPropagation(),children:[g.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[g.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[g.jsx(nh,{className:"w-5 h-5 text-green-600"}),t("notifications")||"Bildirimler"]}),g.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:g.jsx(Rn,{className:"w-5 h-5 text-gray-500"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:d?g.jsx("div",{className:"flex justify-center py-8",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):o.length===0?g.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[g.jsx(nh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),g.jsx("p",{children:t("no_notifications")||"No new notifications"})]}):g.jsxs("div",{className:"space-y-4",children:[g.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-1",children:t("follow_requests")||"Follow Requests"}),o.map(w=>g.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-2xl",children:[g.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>{a(),l(`/profile/${w.id}`)},children:[g.jsx("img",{src:w.followerPhoto||`https://ui-avatars.com/api/?name=${w.followerName||"User"}&background=random`,alt:w.followerName,className:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-gray-600"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:w.followerName||"User"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("wants_to_follow")||"Wants to follow you"})]})]}),g.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[g.jsx("button",{onClick:()=>b(w.id),disabled:m===w.id,className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition-colors disabled:opacity-50",children:g.jsx(Rn,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>v(w),disabled:m===w.id,className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-xl transition-colors disabled:opacity-50",children:g.jsx(zk,{className:"w-4 h-4"})})]})]},w.id))]})})]})})}function eN(){const{currentUser:a,logout:t}=yn(),{t:r,i18n:s}=ot(),l=qt(),o=pn(),{addToast:u}=Sa(),[d,h]=O.useState(!0),[m,p]=O.useState(!1),[v,b]=O.useState(0),w=()=>{s.changeLanguage(s.language==="en"?"tr":"en")},[x,S]=O.useState(()=>{const R=localStorage.getItem("theme");return R||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});O.useEffect(()=>{document.documentElement.classList.remove("dark","oled"),x==="dark"?document.documentElement.classList.add("dark"):x==="oled"&&document.documentElement.classList.add("dark","oled"),localStorage.setItem("theme",x)},[x]);const[A]=O.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),T=R=>{S(R)},D=()=>{T(x==="light"?"dark":x==="dark"?"oled":"light")};O.useEffect(()=>{if(!a)return;const R=async()=>{try{await ue.from("profiles").update({last_seen:new Date}).eq("id",a.uid)}catch(N){console.error("Presence update failed",N)}};R();const L=setInterval(R,60*1e3);return()=>clearInterval(L)},[a]),O.useEffect(()=>{if(!a)return;const R=ue.channel("global_notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},L=>{const N=L.new;if(N.participants&&N.participants.includes(a.uid)){const E=new Date(N.updated_at).getTime();if(Date.now()-E>5e3)return;const U=N.participants.find(H=>H!==a.uid);!(l.pathname===`/messages/${N.id}`)&&U&&(A.play().catch(H=>console.log("Audio play failed",H)),u(`New message: ${N.last_message?.substring(0,30)}...`,"info",5e3))}}).subscribe();return()=>{ue.removeChannel(R)}},[a,l.pathname,u,A]),O.useEffect(()=>{if(!a)return;const R=async()=>{const{count:N,error:E}=await ue.from("follow_requests").select("*",{count:"exact",head:!0}).eq("target_user_id",a.uid).eq("status","pending");E||b(N||0)};R();const L=ue.channel("follow_requests_count").on("postgres_changes",{event:"*",schema:"public",table:"follow_requests",filter:`target_user_id=eq.${a.uid}`},()=>{R()}).subscribe();return()=>{ue.removeChannel(L)}},[a]);const $=[{name:"home",path:"/",icon:sv,label:r("app_name"),public:!0},{name:"community",path:"/community",icon:$o,label:r("community"),public:!0},{name:"my_analyses",path:"/analyses",icon:Jo,label:r("analyses"),public:!1},{name:"messages",path:"/messages",icon:Ii,label:r("messages"),public:!1},{name:"notifications",action:()=>p(!0),icon:nh,badge:v>0?v:null,label:r("notifications"),public:!1},{name:"profile",path:"/profile",icon:Gi,label:r("profile"),public:!1},{name:"about",path:"/about",icon:lv,label:r("about"),public:!0}].filter(R=>R.public||a),K=(R,L)=>{R.preventDefault(),l.pathname===L?L==="/"?o("/",{state:{refreshId:Date.now()},replace:!0}):(o(L,{state:{refreshId:Date.now()},replace:!0}),window.scrollTo(0,0)):(o(L,{state:{refreshId:Date.now()}}),window.scrollTo(0,0))};return g.jsxs("div",{className:"flex h-[100dvh] bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden transition-colors duration-300",children:[g.jsxs("aside",{className:`hidden md:flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out ${d?"w-64":"w-20"}`,children:[g.jsxs("div",{className:`p-4 flex items-center ${d?"justify-between":"justify-center"} h-20`,children:[d&&g.jsxs(Zn,{to:"/",onClick:R=>{R.preventDefault(),o("/",{state:{refreshId:Date.now()},replace:l.pathname==="/"}),window.scrollTo(0,0)},className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[g.jsx(en,{className:"w-8 h-8 text-green-600"}),g.jsxs("h1",{className:"text-2xl font-bold tracking-tight whitespace-nowrap",children:[g.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),g.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),g.jsx("button",{onClick:()=>h(!d),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Toggle Menu",children:g.jsx(oE,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),!d&&g.jsx("div",{className:"hidden"})]}),g.jsx("nav",{className:"flex-1 px-3 space-y-2 mt-2",children:$.map(R=>{const L=R.icon,N=l.pathname===R.path,E=g.jsxs(g.Fragment,{children:[g.jsx(L,{className:`w-6 h-6 ${d?"":"mx-auto"}`}),d&&g.jsx("span",{className:"truncate",children:R.label}),R.badge&&(d?g.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[1.25rem] text-center",children:R.badge}):g.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"}))]}),U=`w-full flex items-center ${d?"gap-3 px-4":"justify-center px-2"} py-3 rounded-xl transition-all relative group ${N?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`;return R.action?g.jsx("button",{onClick:P=>{P.preventDefault(),R.action()},className:U,title:d?"":R.label,children:E},R.name):g.jsx("button",{onClick:P=>K(P,R.path),className:U,title:d?"":R.label,children:E},R.path)})}),g.jsxs("div",{className:`p-4 border-t border-gray-200 dark:border-gray-700 space-y-4 ${d?"":"flex flex-col items-center"}`,children:[g.jsxs("button",{onClick:w,className:`flex items-center gap-3 w-full text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors ${d?"px-4 py-2":"p-2 justify-center"}`,title:r("language"),children:[g.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:s.language.toUpperCase()}),d&&g.jsx("span",{children:r("language")||"Language"})]}),d?g.jsxs("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-900 rounded-full p-1 relative w-full h-10 border border-gray-200 dark:border-gray-700",children:[g.jsx("div",{className:"absolute top-1 bottom-1 w-[calc(33.33%-4px)] bg-white dark:bg-gray-700 rounded-full shadow-sm transition-all duration-300 ease-out z-0",style:{left:x==="oled"?"4px":x==="dark"?"calc(33.33% + 2px)":"calc(66.66% + 0px)"}}),g.jsx("button",{onClick:()=>T("oled"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="oled"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"OLED Mode",children:g.jsx("span",{className:"text-[10px] font-bold",children:"OLED"})}),g.jsx("button",{onClick:()=>T("dark"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="dark"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"Dark Mode",children:g.jsx(C0,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>T("light"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="light"?"text-gray-900":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"Light Mode",children:g.jsx(D0,{className:"w-4 h-4"})})]}):g.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl text-gray-600 dark:text-gray-400 transition-colors bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",title:`Theme: ${x.toUpperCase()} (Click to cycle)`,children:x==="oled"?g.jsx("span",{className:"text-[10px] font-bold",children:"OLED"}):x==="dark"?g.jsx(C0,{className:"w-5 h-5"}):g.jsx(D0,{className:"w-5 h-5"})}),a?g.jsxs("div",{className:`flex ${d?"flex-col gap-2":"flex-col gap-2 items-center"}`,children:[d?g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("img",{src:a.photoURL||a.avatar||`https://ui-avatars.com/api/?name=${a.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),g.jsxs("div",{className:"flex-1 overflow-hidden",children:[g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:r("welcome_user")}),g.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:a.displayName||a.email,children:a.displayName||a.email})]})]}):g.jsx("img",{src:a.photoURL||a.avatar||`https://ui-avatars.com/api/?name=${a.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600 mb-2 cursor-pointer",title:a.displayName||a.email}),g.jsxs("button",{onClick:async()=>{await t(),o("/")},className:`flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm ${d?"":"justify-center p-2"}`,title:r("logout"),children:[g.jsx(sE,{className:"w-5 h-5"}),d&&g.jsx("span",{children:r("logout")})]})]}):g.jsxs(Zn,{to:"/login",className:`flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold ${d?"":"justify-center p-2"}`,title:r("login"),children:[g.jsx(T0,{className:"w-5 h-5"}),d&&g.jsx("span",{children:r("login")})]})]})]}),g.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[g.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[g.jsxs(Zn,{to:"/",onClick:R=>K(R,"/"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[g.jsx(en,{className:"w-6 h-6 text-green-600"}),g.jsxs("span",{className:"font-bold text-lg",children:[g.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),g.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),g.jsx("button",{onClick:w,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:s.language.toUpperCase()})]}),g.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-32 md:pb-8 scroll-smooth relative",id:"main-scroll",children:g.jsx("div",{className:"w-full min-h-full flex flex-col",children:g.jsx(mv,{children:g.jsx(x1,{})})})}),g.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[$.map(R=>{const L=R.icon,N=l.pathname===R.path;return g.jsx("button",{onClick:E=>K(E,R.path),className:`flex flex-col items-center justify-center p-3 rounded-lg transition-all ${N?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-gray-400 dark:text-gray-500"}`,children:g.jsx(L,{className:"w-7 h-7"})},R.path)}),!a&&g.jsx(Zn,{to:"/login",className:"flex flex-col items-center justify-center p-3 text-gray-400",children:g.jsx(T0,{className:"w-7 h-7"})})]})]}),m&&g.jsx(ZE,{onClose:()=>p(!1)})]})}function tN(){const[a,t]=O.useState(""),[r,s]=O.useState(""),[l,o]=O.useState(""),[u,d]=O.useState(!1),[h,m]=O.useState(!1),[p,v]=O.useState(!1),b=pn(),w=qt(),{t:x}=ot(),{currentUser:S}=yn(),{addToast:A}=Sa();if(S)return w.state?.returnUrl&&w.state?.pendingResult?b(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):b(w.state?.returnUrl||"/"),null;const T=async()=>{v(!0);try{const{error:M}=await ue.auth.resend({type:"signup",email:a});if(M)throw M;A(x("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(M){console.error("Resend error:",M),A(x("resend_failed")||"Failed to resend email.","error")}finally{v(!1)}},D=async M=>{M.preventDefault(),o(""),m(!1),d(!0);try{const{data:$,error:K}=await ue.auth.signInWithPassword({email:a,password:r});if(K)throw K;const R=$.user;R&&!R.confirmed_at&&R.email_confirmed_at}catch($){console.error($);let K=x("login_failed")||"Failed to login.";$.message.includes("Invalid login credentials")?K=x("invalid_credentials")||"Invalid email or password.":$.message.includes("Email not confirmed")&&(K=x("email_not_verified")||"Email not verified.",m(!0)),o(K)}finally{d(!1)}};return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:g.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:g.jsxs("div",{className:"p-8",children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:g.jsx(en,{className:"w-16 h-16 text-white"})})}),g.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:x("welcome")}),g.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:x("login_prompt")}),l&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),h?g.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:g.jsx(en,{className:"w-5 h-5"})}),g.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x("verify_email_title")||"Verify your email"})]}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:x("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),g.jsx("button",{onClick:T,disabled:p,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:p?"Sending...":x("resend_verification")||"Resend Verification Email"})]}):g.jsxs("form",{onSubmit:D,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("email")}),g.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:a,onChange:M=>t(M.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("password")}),g.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:M=>s(M.target.value)})]}),g.jsxs("button",{type:"submit",disabled:u,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u?"Logging in...":x("login"),!u&&g.jsx(vh,{className:"w-4 h-4"})]})]}),g.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[x("no_account")," ",g.jsx(Zn,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:x("register")})]})]})})})}function nN({user:a,onClose:t,onVerified:r}){const{t:s}=ot(),[l,o]=O.useState(!1);O.useEffect(()=>{const d=setInterval(async()=>{const{data:{user:h}}=await ue.auth.getUser();h&&h.email_confirmed_at&&(clearInterval(d),r())},3e3);return()=>clearInterval(d)},[r]);const u=async()=>{o(!0);try{const{data:{user:d},error:h}=await ue.auth.getUser();d&&d.email_confirmed_at&&r()}catch(d){console.error(d)}finally{setTimeout(()=>o(!1),500)}};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[g.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),g.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),g.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:g.jsx(cv,{className:"w-10 h-10"})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:s("verify_email_title")||"Verify Your Email"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:s("verify_email_desc")||`We sent a confirmation link to ${a?.email}. Please check your inbox and click the link to continue.`}),g.jsxs("div",{className:"space-y-4 w-full",children:[g.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:s("open_email_app")||"Open Email App"}),g.jsxs("button",{onClick:u,disabled:l,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[l?g.jsx(dv,{className:"w-5 h-5 animate-spin"}):g.jsx(Qo,{className:"w-5 h-5"}),s("i_verified_it")||"I Verified the Email"]}),g.jsx("button",{onClick:t,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s("cancel")||"Cancel"})]})]})})}function aN(){const[a,t]=O.useState(""),[r,s]=O.useState(""),[l,o]=O.useState(""),[u,d]=O.useState(""),[h,m]=O.useState(!1),[p,v]=O.useState(!1),[b,w]=O.useState(null),x=pn(),S=qt(),{t:A}=ot(),T=async M=>{M.preventDefault(),d(""),m(!0);try{const{data:$,error:K}=await ue.auth.signUp({email:a,password:r,options:{data:{full_name:l}}});if(K)throw K;console.log("Signup success:",$),$.user&&!$.session?(w($.user),v(!0)):$.user&&$.session&&(S.state?.returnUrl&&S.state?.pendingResult?x(S.state.returnUrl,{replace:!0,state:{restoredResult:S.state.pendingResult,restoredImages:S.state.pendingImages,restoredPlantType:S.state.pendingPlantType}}):x("/")),m(!1)}catch($){d($.message),console.error($),m(!1)}},D=async()=>{v(!1),x("/login")};return g.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:g.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[p&&b&&g.jsx(nN,{user:b,onClose:()=>v(!1),onVerified:D,isSupabase:!0}),g.jsxs("div",{className:"p-8",children:[g.jsx("div",{className:"flex justify-center mb-6",children:g.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:g.jsx(en,{className:"w-16 h-16 text-white"})})}),g.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:A("register")}),g.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:A("create_account_desc")||A("join_community")||"Create an account to join the community"}),u&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:u}),g.jsxs("form",{onSubmit:T,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("full_name")||"Full Name"}),g.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:l,onChange:M=>o(M.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("email")}),g.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:a,onChange:M=>t(M.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:A("password")}),g.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:M=>s(M.target.value)})]}),g.jsxs("button",{type:"submit",disabled:h||p,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h?A("creating_account")||"Creating Account...":A("register"),!h&&g.jsx(wh,{className:"w-4 h-4"})]})]}),g.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[A("already_have_account")||"Already have an account?"," "," ",g.jsx(Zn,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:A("login")})]})]})]})})}var L0;(function(a){a.STRING="string",a.NUMBER="number",a.INTEGER="integer",a.BOOLEAN="boolean",a.ARRAY="array",a.OBJECT="object"})(L0||(L0={}));var z0;(function(a){a.LANGUAGE_UNSPECIFIED="language_unspecified",a.PYTHON="python"})(z0||(z0={}));var $0;(function(a){a.OUTCOME_UNSPECIFIED="outcome_unspecified",a.OUTCOME_OK="outcome_ok",a.OUTCOME_FAILED="outcome_failed",a.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})($0||($0={}));const P0=["user","model","function","system"];var B0;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(B0||(B0={}));var I0;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})(I0||(I0={}));var H0;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(H0||(H0={}));var q0;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER"})(q0||(q0={}));var Oi;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.OTHER="OTHER"})(Oi||(Oi={}));var G0;(function(a){a.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",a.RETRIEVAL_QUERY="RETRIEVAL_QUERY",a.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",a.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",a.CLASSIFICATION="CLASSIFICATION",a.CLUSTERING="CLUSTERING"})(G0||(G0={}));var K0;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE"})(K0||(K0={}));var F0;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(F0||(F0={}));class Pt extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ws extends Pt{constructor(t,r){super(t),this.response=r}}class wv extends Pt{constructor(t,r,s,l){super(t),this.status=r,this.statusText=s,this.errorDetails=l}}class Ja extends Pt{}class xv extends Pt{}const rN="https://generativelanguage.googleapis.com",sN="v1beta",iN="0.24.1",lN="genai-js";var Nr;(function(a){a.GENERATE_CONTENT="generateContent",a.STREAM_GENERATE_CONTENT="streamGenerateContent",a.COUNT_TOKENS="countTokens",a.EMBED_CONTENT="embedContent",a.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Nr||(Nr={}));class oN{constructor(t,r,s,l,o){this.model=t,this.task=r,this.apiKey=s,this.stream=l,this.requestOptions=o}toString(){var t,r;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||sN;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||rN}/${s}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function cN(a){const t=[];return a?.apiClient&&t.push(a.apiClient),t.push(`${lN}/${iN}`),t.join(" ")}async function uN(a){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",cN(a.requestOptions)),r.append("x-goog-api-key",a.apiKey);let s=(t=a.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(l){throw new Ja(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${l.message}`)}for(const[l,o]of s.entries()){if(l==="x-goog-api-key")throw new Ja(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new Ja(`Header name ${l} can only be set using the apiClient field`);r.append(l,o)}}return r}async function dN(a,t,r,s,l,o){const u=new oN(a,t,r,s,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},mN(o)),{method:"POST",headers:await uN(u),body:l})}}async function Ji(a,t,r,s,l,o={},u=fetch){const{url:d,fetchOptions:h}=await dN(a,t,r,s,l,o);return hN(d,h,u)}async function hN(a,t,r=fetch){let s;try{s=await r(a,t)}catch(l){fN(l,a)}return s.ok||await gN(s,a),s}function fN(a,t){let r=a;throw r.name==="AbortError"?(r=new xv(`Request aborted when fetching ${t.toString()}: ${a.message}`),r.stack=a.stack):a instanceof wv||a instanceof Ja||(r=new Pt(`Error fetching from ${t.toString()}: ${a.message}`),r.stack=a.stack),r}async function gN(a,t){let r="",s;try{const l=await a.json();r=l.error.message,l.error.details&&(r+=` ${JSON.stringify(l.error.details)}`,s=l.error.details)}catch{}throw new wv(`Error fetching from ${t.toString()}: [${a.status} ${a.statusText}] ${r}`,a.status,a.statusText,s)}function mN(a){const t={};if(a?.signal!==void 0||a?.timeout>=0){const r=new AbortController;a?.timeout>=0&&setTimeout(()=>r.abort(),a.timeout),a?.signal&&a.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}function xh(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(a.candidates[0]))throw new ws(`${Wa(a)}`,a);return pN(a)}else if(a.promptFeedback)throw new ws(`Text not available. ${Wa(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(a.candidates[0]))throw new ws(`${Wa(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),V0(a)[0]}else if(a.promptFeedback)throw new ws(`Function call not available. ${Wa(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),jo(a.candidates[0]))throw new ws(`${Wa(a)}`,a);return V0(a)}else if(a.promptFeedback)throw new ws(`Function call not available. ${Wa(a)}`,a)},a}function pN(a){var t,r,s,l;const o=[];if(!((r=(t=a.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const u of(l=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function V0(a){var t,r,s,l;const o=[];if(!((r=(t=a.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const u of(l=(s=a.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const yN=[Oi.RECITATION,Oi.SAFETY,Oi.LANGUAGE];function jo(a){return!!a.finishReason&&yN.includes(a.finishReason)}function Wa(a){var t,r,s;let l="";if((!a.candidates||a.candidates.length===0)&&a.promptFeedback)l+="Response was blocked",!((t=a.promptFeedback)===null||t===void 0)&&t.blockReason&&(l+=` due to ${a.promptFeedback.blockReason}`),!((r=a.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(l+=`: ${a.promptFeedback.blockReasonMessage}`);else if(!((s=a.candidates)===null||s===void 0)&&s[0]){const o=a.candidates[0];jo(o)&&(l+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(l+=`: ${o.finishMessage}`))}return l}function Ki(a){return this instanceof Ki?(this.v=a,this):new Ki(a)}function vN(a,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(a,t||[]),l,o=[];return l={},u("next"),u("throw"),u("return"),l[Symbol.asyncIterator]=function(){return this},l;function u(b){s[b]&&(l[b]=function(w){return new Promise(function(x,S){o.push([b,w,x,S])>1||d(b,w)})})}function d(b,w){try{h(s[b](w))}catch(x){v(o[0][3],x)}}function h(b){b.value instanceof Ki?Promise.resolve(b.value.v).then(m,p):v(o[0][2],b)}function m(b){d("next",b)}function p(b){d("throw",b)}function v(b,w){b(w),o.shift(),o.length&&d(o[0][0],o[0][1])}}const Y0=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bN(a){const t=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=_N(t),[s,l]=r.tee();return{stream:xN(s),response:wN(l)}}async function wN(a){const t=[],r=a.getReader();for(;;){const{done:s,value:l}=await r.read();if(s)return xh(SN(t));t.push(l)}}function xN(a){return vN(this,arguments,function*(){const r=a.getReader();for(;;){const{value:s,done:l}=yield Ki(r.read());if(l)break;yield yield Ki(xh(s))}})}function _N(a){const t=a.getReader();return new ReadableStream({start(s){let l="";return o();function o(){return t.read().then(({value:u,done:d})=>{if(d){if(l.trim()){s.error(new Pt("Failed to parse stream"));return}s.close();return}l+=u;let h=l.match(Y0),m;for(;h;){try{m=JSON.parse(h[1])}catch{s.error(new Pt(`Error parsing JSON response: "${h[1]}"`));return}s.enqueue(m),l=l.substring(h[0].length),h=l.match(Y0)}return o()}).catch(u=>{let d=u;throw d.stack=u.stack,d.name==="AbortError"?d=new xv("Request aborted when reading from the stream"):d=new Pt("Error reading from the stream"),d})}}})}function SN(a){const t=a[a.length-1],r={promptFeedback:t?.promptFeedback};for(const s of a){if(s.candidates){let l=0;for(const o of s.candidates)if(r.candidates||(r.candidates=[]),r.candidates[l]||(r.candidates[l]={index:l}),r.candidates[l].citationMetadata=o.citationMetadata,r.candidates[l].groundingMetadata=o.groundingMetadata,r.candidates[l].finishReason=o.finishReason,r.candidates[l].finishMessage=o.finishMessage,r.candidates[l].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[l].content||(r.candidates[l].content={role:o.content.role||"user",parts:[]});const u={};for(const d of o.content.parts)d.text&&(u.text=d.text),d.functionCall&&(u.functionCall=d.functionCall),d.executableCode&&(u.executableCode=d.executableCode),d.codeExecutionResult&&(u.codeExecutionResult=d.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),r.candidates[l].content.parts.push(u)}l++}s.usageMetadata&&(r.usageMetadata=s.usageMetadata)}return r}async function _v(a,t,r,s){const l=await Ji(t,Nr.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(r),s);return bN(l)}async function Sv(a,t,r,s){const o=await(await Ji(t,Nr.GENERATE_CONTENT,a,!1,JSON.stringify(r),s)).json();return{response:xh(o)}}function kv(a){if(a!=null){if(typeof a=="string")return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)return a.role?a:{role:"system",parts:a.parts}}}function Fi(a){let t=[];if(typeof a=="string")t=[{text:a}];else for(const r of a)typeof r=="string"?t.push({text:r}):t.push(r);return kN(t)}function kN(a){const t={role:"user",parts:[]},r={role:"function",parts:[]};let s=!1,l=!1;for(const o of a)"functionResponse"in o?(r.parts.push(o),l=!0):(t.parts.push(o),s=!0);if(s&&l)throw new Pt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!l)throw new Pt("No content is provided for sending chat message.");return s?t:r}function EN(a,t){var r;let s={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(r=t?.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const l=a.generateContentRequest!=null;if(a.contents){if(l)throw new Ja("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=a.contents}else if(l)s=Object.assign(Object.assign({},s),a.generateContentRequest);else{const o=Fi(a);s.contents=[o]}return{generateContentRequest:s}}function W0(a){let t;return a.contents?t=a:t={contents:[Fi(a)]},a.systemInstruction&&(t.systemInstruction=kv(a.systemInstruction)),t}function NN(a){return typeof a=="string"||Array.isArray(a)?{content:Fi(a)}:a}const X0=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],jN={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function AN(a){let t=!1;for(const r of a){const{role:s,parts:l}=r;if(!t&&s!=="user")throw new Pt(`First content should be with role 'user', got ${s}`);if(!P0.includes(s))throw new Pt(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(P0)}`);if(!Array.isArray(l))throw new Pt("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new Pt("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of l)for(const h of X0)h in d&&(o[h]+=1);const u=jN[s];for(const d of X0)if(!u.includes(d)&&o[d]>0)throw new Pt(`Content with role '${s}' can't contain '${d}' part`);t=!0}}function Q0(a){var t;if(a.candidates===void 0||a.candidates.length===0)return!1;const r=(t=a.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const s of r.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const J0="SILENT_ERROR";class TN{constructor(t,r,s,l={}){this.model=r,this.params=s,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s?.history&&(AN(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var s,l,o,u,d,h;await this._sendPromise;const m=Fi(t),p={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},v=Object.assign(Object.assign({},this._requestOptions),r);let b;return this._sendPromise=this._sendPromise.then(()=>Sv(this._apiKey,this.model,p,v)).then(w=>{var x;if(Q0(w.response)){this._history.push(m);const S=Object.assign({parts:[],role:"model"},(x=w.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(S)}else{const S=Wa(w.response);S&&console.warn(`sendMessage() was unsuccessful. ${S}. Inspect response object for details.`)}b=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,b}async sendMessageStream(t,r={}){var s,l,o,u,d,h;await this._sendPromise;const m=Fi(t),p={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},v=Object.assign(Object.assign({},this._requestOptions),r),b=_v(this._apiKey,this.model,p,v);return this._sendPromise=this._sendPromise.then(()=>b).catch(w=>{throw new Error(J0)}).then(w=>w.response).then(w=>{if(Q0(w)){this._history.push(m);const x=Object.assign({},w.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Wa(w);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(w=>{w.message!==J0&&console.error(w)}),b}}async function CN(a,t,r,s){return(await Ji(t,Nr.COUNT_TOKENS,a,!1,JSON.stringify(r),s)).json()}async function RN(a,t,r,s){return(await Ji(t,Nr.EMBED_CONTENT,a,!1,JSON.stringify(r),s)).json()}async function ON(a,t,r,s){const l=r.requests.map(u=>Object.assign(Object.assign({},u),{model:t}));return(await Ji(t,Nr.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:l}),s)).json()}class Z0{constructor(t,r,s={}){this.apiKey=t,this._requestOptions=s,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=kv(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var s;const l=W0(t),o=Object.assign(Object.assign({},this._requestOptions),r);return Sv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),o)}async generateContentStream(t,r={}){var s;const l=W0(t),o=Object.assign(Object.assign({},this._requestOptions),r);return _v(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),o)}startChat(t){var r;return new TN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const s=EN(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),r);return CN(this.apiKey,this.model,s,l)}async embedContent(t,r={}){const s=NN(t),l=Object.assign(Object.assign({},this._requestOptions),r);return RN(this.apiKey,this.model,s,l)}async batchEmbedContents(t,r={}){const s=Object.assign(Object.assign({},this._requestOptions),r);return ON(this.apiKey,this.model,t,s)}}class Ev{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Pt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Z0(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,s){if(!t.name)throw new Ja("Cached content must contain a `name` field.");if(!t.model)throw new Ja("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const u of l)if(r?.[u]&&t[u]&&r?.[u]!==t[u]){if(u==="model"){const d=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(d===h)continue}throw new Ja(`Different value for "${u}" specified in modelParams (${r[u]}) and cachedContent (${t[u]})`)}const o=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Z0(this.apiKey,o,s)}}async function Nv(a,t="tr",r=null){const s=Array.isArray(a)?a:[a],l=3,o=2e3;let u;for(let d=0;d<=l;d++)try{return d>0&&(console.log(`Attempt ${d+1} of ${l+1}...`),await new Promise(h=>setTimeout(h,o))),await MN(s,t,r)}catch(h){if(u=h,!(h.message.includes("503")||h.message.includes("429")||h.message.includes("overloaded")||h.message.includes("Server Error")))throw h;console.warn(`Analysis attempt ${d+1} failed:`,h.message)}throw u}async function MN(a,t,r){let s="";r&&r.trim().length>0&&(s=`The user identifies this plant as "${r}". Use this as context but verify visually.`);const l=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${s}
    OUTPUT MUST BE IN ${t==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "plant_name": "Common Plant Name (e.g. Tomato, Rose)",
        "plant_latin_name": "Latin Name of the Plant (e.g. Solanum lycopersicum)",
        "disease_name": "Disease Name",
        "disease_latin_name": "Latin Name of the Disease/Pathogen (if applicable)",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:l}];a.forEach(d=>{if(!d)return;const h=d.includes(",")?d.split(",")[1]:d;o.push({inline_data:{mime_type:"image/jpeg",data:h}})});const u={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const d=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!d.ok){const m=await d.text();throw console.error("Backend Error Response:",m),m.trim().startsWith("<")||m.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${d.status} ${d.statusText}`)}const h=await d.json();if(h.error)throw new Error(h.error.message||"API Connection Error");if(h.plant_name||h.status)return h;if(h.candidates&&h.candidates[0].content){const p=h.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(p)}throw new Error("Invalid response structure from AI")}catch(d){console.warn("Backend analysis failed, attempting client-side fallback...",d);const h="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const p=new Ev(h).getGenerativeModel({model:"gemini-2.5-flash"}),b=[l];a.forEach(T=>{if(!T)return;const D=T.includes(",")?T.split(",")[1]:T;b.push({inlineData:{data:D,mimeType:"image/jpeg"}})});const A=(await(await p.generateContent(b)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(A)}catch(m){throw console.error("Fallback also failed:",m),new Error(m.message||"AI Diagnosis completely failed.")}}}async function DN(a="tr"){const t=["A common garden pest (e.g., aphids, spider mites)","A fascinating fungal disease (e.g., powdery mildew)","An interesting beneficial insect (e.g., ladybugs)","A weird or cool plant adaptation","A tip for organic gardening"],s=`
    Generate a short, engaging "Daily Plant Fact" for a community of gardeners.
    Topic: ${t[Math.floor(Math.random()*t.length)]}
    Language: ${a==="en"?"ENGLISH":"TURKISH"}

    The tone should be fun, educational, and slightly informal (like a friendly bot).
    
    Return a VALID JSON object with this structure:
    {
        "title": "Catchy Title",
        "content": "One or two short paragraphs of interesting info. No markdown.",
        "imageKeyword": "A precise English keyword to search for an image (e.g. 'ladybug leaf', 'powdery mildew rose')",
        "type": "tip" | "pest" | "disease" | "fun_fact"
    }
    
    Ensure the content is accurate but simple to read.
    Return ONLY valid raw JSON (no markdown block).
    `;try{const l="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE",p=(await(await new Ev(l).getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(s)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(p)}catch(l){return console.error("Daily fact generation failed:",l),{title:a==="tr"?"Bitki Dostu pucu":"Plant Friendly Tip",content:a==="tr"?"Bitkilerinizi sabah erken saatlerde sulamak, suyun buharlamadan kklere ulamasn salar.":"Watering your plants early in the morning ensures water reaches the roots before evaporating.",imageKeyword:"watering plants",type:"tip"}}}async function jv(a,t,r,s,l=!1){try{const o=r.main||null,u=r.macro||null,{data:d,error:h}=await ue.from("analyses").insert({user_id:a,plant_type:t,main_image:o,macro_image:u,result:s,is_public:l,status:"active",next_checkup:new Date(Date.now()+10080*60*1e3).toISOString()}).select().single();if(h)throw h;return d.id}catch(o){throw console.error("Error saving analysis:",o),o}}async function Av(a){try{const{data:t,error:r}=await ue.from("analyses").select("*, analysis_updates(*)").eq("user_id",a).order("created_at",{ascending:!1});if(r)throw r;return t.map(s=>({id:s.id,userId:s.user_id,plantType:s.plant_type,mainImage:s.main_image,macroImage:s.macro_image,result:s.result,isPublic:s.is_public,status:s.status,createdAt:{seconds:new Date(s.created_at).getTime()/1e3},updates:(s.analysis_updates||[]).map(l=>({imageUrl:l.image_url,note:l.note,createdAt:{seconds:new Date(l.created_at).getTime()/1e3}}))}))}catch(t){return console.error("Error fetching analyses:",t),[]}}async function Tv(a){try{await ue.from("posts").delete().eq("related_analysis_id",a);const{error:t}=await ue.from("analyses").delete().eq("id",a);if(t)throw t;return!0}catch(t){throw console.error("Error deleting analysis:",t),t}}async function Cv(a,t){try{const r={};if(t.isPublic!==void 0&&(r.is_public=t.isPublic),Object.keys(r).length===0)return;const{error:s}=await ue.from("analyses").update(r).eq("id",a);if(s)throw s}catch(r){throw console.error("Error updating analysis:",r),r}}async function _h(a,t,r){try{const{error:s}=await ue.from("posts").insert({user_id:a,author_name:t.authorName||"Gardener",title:t.title||"",content:t.content,image_url:t.image,plant_type:t.plantType||"Unknown",likes:[],comments:[],related_analysis_id:t.relatedAnalysisId||null});if(s)throw s;return!0}catch(s){throw console.error("Error creating post:",s),s}}async function Rv(a,t,r,s="Gardener",l=null){try{const o=t.result.plant_latin_name||t.result.latin_name||"",u=t.result.disease_latin_name||(o?"":t.result.latin_name)||"",d=`${r}${o?` (${o})`:""}`;let h=`Analiz Sonucu: ${t.result.disease_name}${u&&u!==t.result.disease_name?` (${u})`:""}

${t.result.description}`;return t.result.is_treatable===!1?t.result.preventive_measures?.length>0&&(h+=`

 Koruyucu nlemler:
`+t.result.preventive_measures.map(m=>` ${m}`).join(`
`)):t.result.treatment_steps?.length>0&&(h+=`

 Tedavi Admlar:
`+t.result.treatment_steps.map(m=>` ${m}`).join(`
`)),await _h(t.userId,{authorName:s,title:d,content:h,image:t.mainImage,plantType:r,relatedAnalysisId:a}),await Cv(a,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function Ov(a,t,r){try{const{error:s}=await ue.from("analysis_updates").insert({analysis_id:a,image_url:t,note:r});if(s)throw s;return!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function Mv(a){try{const{data:t}=await ue.from("posts").select("related_analysis_id").eq("id",a).single();t?.related_analysis_id&&await ue.from("analyses").update({is_public:!1}).eq("id",t.related_analysis_id);const{error:r}=await ue.from("posts").delete().eq("id",a);if(r)throw r;return!0}catch(t){throw console.error("Error deleting post:",t),t}}async function Dv(a,t){try{const{data:r,error:s}=await ue.rpc("toggle_like",{post_id:a,user_id:t});if(s){const{data:l}=await ue.from("posts").select("likes").eq("id",a).single();if(l){const o=l.likes||[],u=o.includes(t)?o.filter(d=>d!==t):[...o,t];await ue.from("posts").update({likes:u}).eq("id",a)}}}catch(r){throw console.error("Error toggling like:",r),r}}async function Uv(a,t,r,s){try{const l={userId:t,userName:r,text:s,createdAt:new Date().toISOString()},{data:o}=await ue.from("posts").select("comments").eq("id",a).single();if(o){const u=o.comments||[];await ue.from("posts").update({comments:[...u,l]}).eq("id",a)}return!0}catch(l){throw console.error("Error adding comment:",l),l}}async function Lv(a,t){try{const{error:r}=await ue.from("posts").update(t).eq("id",a);if(r)throw r;return!0}catch(r){throw console.error("Error updating post:",r),r}}async function UN(a,t,r,s){try{if(a===t)throw new Error("Cannot start chat with yourself.");const l=[a,t].sort(),{data:o}=await ue.from("chats").select("id").contains("participants",l);let u;if(o&&o.length>0)u=o[0].id;else{const{data:d,error:h}=await ue.from("chats").insert({participants:l,participant_metadata:{[t]:r,[a]:s},last_message:""}).select().single();if(h)throw h;u=d.id}return u}catch(l){throw console.error("Error starting chat:",l),l}}async function rh(a,t,r){try{const{error:s}=await ue.from("posts").update({author_name:t,user_avatar:r}).eq("user_id",a);if(s)throw s;return!0}catch(s){return console.error("Error syncing user profile to posts:",s),!1}}const LN=Object.freeze(Object.defineProperty({__proto__:null,addComment:Uv,addFeedbackUpdate:Ov,createPost:_h,deleteAnalysis:Tv,deletePost:Mv,getUserAnalyses:Av,saveAnalysis:jv,shareAnalysisToCommunity:Rv,startChat:UN,toggleLike:Dv,updateAnalysisStatus:Cv,updatePost:Lv,updateUserPostsName:rh},Symbol.toStringTag,{value:"Module"}));function zN({result:a,onReset:t}){const{t:r}=ot();return a?a.error==="NOT_PLANT"?g.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[g.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:g.jsx(ah,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),g.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),g.jsx("button",{onClick:t,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):g.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[g.jsx("div",{className:"bg-green-600 text-white p-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-bold",children:a.disease_name}),g.jsxs("div",{className:"flex flex-col",children:[a.plant_name&&g.jsx("span",{className:"text-lg font-medium opacity-90",children:a.plant_name}),g.jsx("span",{className:"opacity-75 italic text-sm",children:a.latin_name})]})]}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsxs("div",{className:"text-2xl font-bold",children:[a.confidence,"%"]}),g.jsx("div",{className:"text-xs uppercase opacity-75",children:r("confidence")})]})]})}),g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[g.jsx(yh,{className:"w-5 h-5"}),g.jsx("span",{children:r("urgency")})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:g.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${a.urgency}%`}})})]}),g.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[g.jsx(en,{className:"w-5 h-5"}),g.jsx("span",{children:r("spread_risk")})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:g.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${a.spread_risk}%`}})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r("description")}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:a.description})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:a.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":r("treatment")}),a.is_treatable===!1&&g.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[g.jsx(ah,{className:"w-5 h-5 flex-shrink-0"}),g.jsx("p",{children:r("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),g.jsx("ul",{className:"space-y-3",children:(a.is_treatable===!1?a.preventive_measures:a.treatment_steps)?.map((s,l)=>g.jsxs("li",{className:"flex gap-3",children:[g.jsx(Qo,{className:`w-6 h-6 flex-shrink-0 ${a.is_treatable===!1?"text-orange-500":"text-green-600"}`}),g.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:s})]},l))})]}),g.jsx("div",{className:"pt-4 flex gap-4",children:g.jsx("button",{onClick:t,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:r("new_scan")})})]})]}):null}function $N({isOpen:a,onClose:t,onCapture:r}){const s=O.useRef(null),l=O.useRef(null),[o,u]=O.useState(null),[d,h]=O.useState(""),{t:m}=ot();O.useEffect(()=>(a?p():v(),()=>v()),[a]);const p=async()=>{h("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});u(w),s.current&&(s.current.srcObject=w)}catch(w){console.error("Camera Error:",w),h(m("camera_permission_denied")||"Camera access denied or not available.")}},v=()=>{o&&(o.getTracks().forEach(w=>w.stop()),u(null))},b=()=>{if(s.current&&l.current){const w=s.current,x=l.current;x.width=w.videoWidth,x.height=w.videoHeight,x.getContext("2d").drawImage(w,0,0,x.width,x.height);const A=x.toDataURL("image/jpeg",.9);r(A),t()}};return a?g.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:g.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[g.jsx("span",{className:"text-white font-medium",children:m("take_photo")}),g.jsx("button",{onClick:t,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:g.jsx(Rn,{className:"w-6 h-6"})})]}),g.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:d?g.jsxs("div",{className:"text-center p-6 text-red-400",children:[g.jsx(av,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),g.jsx("p",{children:d}),g.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:m("retry")||"Retry"})]}):g.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!d&&g.jsx("button",{onClick:b,className:"group relative",children:g.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:g.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),g.jsx("canvas",{ref:l,className:"hidden"})]})}):null}function PN(a,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(s){if(s!=="default"&&!(s in a)){var l=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(a,s,l.get?l:{enumerable:!0,get:function(){return r[s]}})}}))})),Object.freeze(a)}function zv(a,t){return new Promise((function(r,s){let l;return BN(a).then((function(o){try{return l=o,r(new Blob([t.slice(0,2),l,t.slice(2)],{type:"image/jpeg"}))}catch(u){return s(u)}}),s)}))}const BN=a=>new Promise(((t,r)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:l}})=>{const o=new DataView(l);let u=0;if(o.getUint16(u)!==65496)return r("not a valid JPEG");for(u+=2;;){const d=o.getUint16(u);if(d===65498)break;const h=o.getUint16(u+2);if(d===65505&&o.getUint32(u+4)===1165519206){const m=u+10;let p;switch(o.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return r("TIFF header contains invalid endian")}if(o.getUint16(m+2,p)!==42)return r("TIFF header contains invalid version");const v=o.getUint32(m+4,p),b=m+v+2+12*o.getUint16(m+v,p);for(let w=m+v+2;w<b;w+=12)if(o.getUint16(w,p)==274){if(o.getUint16(w+2,p)!==3)return r("Orientation data type is invalid");if(o.getUint32(w+4,p)!==1)return r("Orientation data count is invalid");o.setUint16(w+8,1,p);break}return t(l.slice(u,u+2+h))}u+=2+h}return t(new Blob)})),s.readAsArrayBuffer(a)}));var Bo={},IN={get exports(){return Bo},set exports(a){Bo=a}};(function(a){var t,r,s={};IN.exports=s,s.parse=function(l,o){for(var u=s.bin.readUshort,d=s.bin.readUint,h=0,m={},p=new Uint8Array(l),v=p.length-4;d(p,v)!=101010256;)v--;h=v,h+=4;var b=u(p,h+=4);u(p,h+=2);var w=d(p,h+=2),x=d(p,h+=4);h+=4,h=x;for(var S=0;S<b;S++){d(p,h),h+=4,h+=4,h+=4,d(p,h+=4),w=d(p,h+=4);var A=d(p,h+=4),T=u(p,h+=4),D=u(p,h+2),M=u(p,h+4);h+=6;var $=d(p,h+=8);h+=4,h+=T+D+M,s._readLocal(p,$,m,w,A,o)}return m},s._readLocal=function(l,o,u,d,h,m){var p=s.bin.readUshort,v=s.bin.readUint;v(l,o),p(l,o+=4),p(l,o+=2);var b=p(l,o+=2);v(l,o+=2),v(l,o+=4),o+=4;var w=p(l,o+=8),x=p(l,o+=2);o+=2;var S=s.bin.readUTF8(l,o,w);if(o+=w,o+=x,m)u[S]={size:h,csize:d};else{var A=new Uint8Array(l.buffer,o);if(b==0)u[S]=new Uint8Array(A.buffer.slice(o,o+d));else{if(b!=8)throw"unknown compression method: "+b;var T=new Uint8Array(h);s.inflateRaw(A,T),u[S]=T}}},s.inflateRaw=function(l,o){return s.F.inflate(l,o)},s.inflate=function(l,o){return l[0],l[1],s.inflateRaw(new Uint8Array(l.buffer,l.byteOffset+2,l.length-6),o)},s.deflate=function(l,o){o==null&&(o={level:6});var u=0,d=new Uint8Array(50+Math.floor(1.1*l.length));d[u]=120,d[u+1]=156,u+=2,u=s.F.deflateRaw(l,d,u,o.level);var h=s.adler(l,0,l.length);return d[u+0]=h>>>24&255,d[u+1]=h>>>16&255,d[u+2]=h>>>8&255,d[u+3]=h>>>0&255,new Uint8Array(d.buffer,0,u+4)},s.deflateRaw=function(l,o){o==null&&(o={level:6});var u=new Uint8Array(50+Math.floor(1.1*l.length)),d=s.F.deflateRaw(l,u,d,o.level);return new Uint8Array(u.buffer,0,d)},s.encode=function(l,o){o==null&&(o=!1);var u=0,d=s.bin.writeUint,h=s.bin.writeUshort,m={};for(var p in l){var v=!s._noNeed(p)&&!o,b=l[p],w=s.crc.crc(b,0,b.length);m[p]={cpr:v,usize:b.length,crc:w,file:v?s.deflateRaw(b):b}}for(var p in m)u+=m[p].file.length+30+46+2*s.bin.sizeUTF8(p);u+=22;var x=new Uint8Array(u),S=0,A=[];for(var p in m){var T=m[p];A.push(S),S=s._writeHeader(x,S,p,T,0)}var D=0,M=S;for(var p in m)T=m[p],A.push(S),S=s._writeHeader(x,S,p,T,1,A[D++]);var $=S-M;return d(x,S,101010256),S+=4,h(x,S+=4,D),h(x,S+=2,D),d(x,S+=2,$),d(x,S+=4,M),S+=4,S+=2,x.buffer},s._noNeed=function(l){var o=l.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},s._writeHeader=function(l,o,u,d,h,m){var p=s.bin.writeUint,v=s.bin.writeUshort,b=d.file;return p(l,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),v(l,o,20),v(l,o+=2,0),v(l,o+=2,d.cpr?8:0),p(l,o+=2,0),p(l,o+=4,d.crc),p(l,o+=4,b.length),p(l,o+=4,d.usize),v(l,o+=4,s.bin.sizeUTF8(u)),v(l,o+=2,0),o+=2,h==1&&(o+=2,o+=2,p(l,o+=6,m),o+=4),o+=s.bin.writeUTF8(l,o,u),h==0&&(l.set(b,o),o+=b.length),o},s.crc={table:(function(){for(var l=new Uint32Array(256),o=0;o<256;o++){for(var u=o,d=0;d<8;d++)1&u?u=3988292384^u>>>1:u>>>=1;l[o]=u}return l})(),update:function(l,o,u,d){for(var h=0;h<d;h++)l=s.crc.table[255&(l^o[u+h])]^l>>>8;return l},crc:function(l,o,u){return 4294967295^s.crc.update(4294967295,l,o,u)}},s.adler=function(l,o,u){for(var d=1,h=0,m=o,p=o+u;m<p;){for(var v=Math.min(m+5552,p);m<v;)h+=d+=l[m++];d%=65521,h%=65521}return h<<16|d},s.bin={readUshort:function(l,o){return l[o]|l[o+1]<<8},writeUshort:function(l,o,u){l[o]=255&u,l[o+1]=u>>8&255},readUint:function(l,o){return 16777216*l[o+3]+(l[o+2]<<16|l[o+1]<<8|l[o])},writeUint:function(l,o,u){l[o]=255&u,l[o+1]=u>>8&255,l[o+2]=u>>16&255,l[o+3]=u>>24&255},readASCII:function(l,o,u){for(var d="",h=0;h<u;h++)d+=String.fromCharCode(l[o+h]);return d},writeASCII:function(l,o,u){for(var d=0;d<u.length;d++)l[o+d]=u.charCodeAt(d)},pad:function(l){return l.length<2?"0"+l:l},readUTF8:function(l,o,u){for(var d,h="",m=0;m<u;m++)h+="%"+s.bin.pad(l[o+m].toString(16));try{d=decodeURIComponent(h)}catch{return s.bin.readASCII(l,o,u)}return d},writeUTF8:function(l,o,u){for(var d=u.length,h=0,m=0;m<d;m++){var p=u.charCodeAt(m);if((4294967168&p)==0)l[o+h]=p,h++;else if((4294965248&p)==0)l[o+h]=192|p>>6,l[o+h+1]=128|p>>0&63,h+=2;else if((4294901760&p)==0)l[o+h]=224|p>>12,l[o+h+1]=128|p>>6&63,l[o+h+2]=128|p>>0&63,h+=3;else{if((4292870144&p)!=0)throw"e";l[o+h]=240|p>>18,l[o+h+1]=128|p>>12&63,l[o+h+2]=128|p>>6&63,l[o+h+3]=128|p>>0&63,h+=4}}return h},sizeUTF8:function(l){for(var o=l.length,u=0,d=0;d<o;d++){var h=l.charCodeAt(d);if((4294967168&h)==0)u++;else if((4294965248&h)==0)u+=2;else if((4294901760&h)==0)u+=3;else{if((4292870144&h)!=0)throw"e";u+=4}}return u}},s.F={},s.F.deflateRaw=function(l,o,u,d){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],m=s.F.U,p=s.F._goodIndex;s.F._hash;var v=s.F._putsE,b=0,w=u<<3,x=0,S=l.length;if(d==0){for(;b<S;)v(o,w,b+(P=Math.min(65535,S-b))==S?1:0),w=s.F._copyExact(l,b,P,o,w+8),b+=P;return w>>>3}var A=m.lits,T=m.strt,D=m.prev,M=0,$=0,K=0,R=0,L=0,N=0;for(S>2&&(T[N=s.F._hash(l,0)]=0),b=0;b<S;b++){if(L=N,b+1<S-2){N=s.F._hash(l,b+1);var E=b+1&32767;D[E]=T[N],T[N]=E}if(x<=b){(M>14e3||$>26697)&&S-b>100&&(x<b&&(A[M]=b-x,M+=2,x=b),w=s.F._writeBlock(b==S-1||x==S?1:0,A,M,R,l,K,b-K,o,w),M=$=R=0,K=b);var U=0;b<S-2&&(U=s.F._bestMatch(l,b,D,L,Math.min(h[2],S-b),h[3]));var P=U>>>16,H=65535&U;if(U!=0){H=65535&U;var F=p(P=U>>>16,m.of0);m.lhst[257+F]++;var B=p(H,m.df0);m.dhst[B]++,R+=m.exb[F]+m.dxb[B],A[M]=P<<23|b-x,A[M+1]=H<<16|F<<8|B,M+=2,x=b+P}else m.lhst[l[b]]++;$++}}for(K==b&&l.length!=0||(x<b&&(A[M]=b-x,M+=2,x=b),w=s.F._writeBlock(1,A,M,R,l,K,b-K,o,w),M=0,$=0,M=$=R=0,K=b);(7&w)!=0;)w++;return w>>>3},s.F._bestMatch=function(l,o,u,d,h,m){var p=32767&o,v=u[p],b=p-v+32768&32767;if(v==p||d!=s.F._hash(l,o-b))return 0;for(var w=0,x=0,S=Math.min(32767,o);b<=S&&--m!=0&&v!=p;){if(w==0||l[o+w]==l[o+w-b]){var A=s.F._howLong(l,o,b);if(A>w){if(x=b,(w=A)>=h)break;b+2<A&&(A=b+2);for(var T=0,D=0;D<A-2;D++){var M=o-b+D+32768&32767,$=M-u[M]+32768&32767;$>T&&(T=$,v=M)}}}b+=(p=v)-(v=u[p])+32768&32767}return w<<16|x},s.F._howLong=function(l,o,u){if(l[o]!=l[o-u]||l[o+1]!=l[o+1-u]||l[o+2]!=l[o+2-u])return 0;var d=o,h=Math.min(l.length,o+258);for(o+=3;o<h&&l[o]==l[o-u];)o++;return o-d},s.F._hash=function(l,o){return(l[o]<<8|l[o+1])+(l[o+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(l,o,u,d,h,m,p,v,b){var w,x,S,A,T,D,M,$,K,R=s.F.U,L=s.F._putsF,N=s.F._putsE;R.lhst[256]++,x=(w=s.F.getTrees())[0],S=w[1],A=w[2],T=w[3],D=w[4],M=w[5],$=w[6],K=w[7];var E=32+((b+3&7)==0?0:8-(b+3&7))+(p<<3),U=d+s.F.contSize(R.fltree,R.lhst)+s.F.contSize(R.fdtree,R.dhst),P=d+s.F.contSize(R.ltree,R.lhst)+s.F.contSize(R.dtree,R.dhst);P+=14+3*M+s.F.contSize(R.itree,R.ihst)+(2*R.ihst[16]+3*R.ihst[17]+7*R.ihst[18]);for(var H=0;H<286;H++)R.lhst[H]=0;for(H=0;H<30;H++)R.dhst[H]=0;for(H=0;H<19;H++)R.ihst[H]=0;var F=E<U&&E<P?0:U<P?1:2;if(L(v,b,l),L(v,b+1,F),b+=3,F==0){for(;(7&b)!=0;)b++;b=s.F._copyExact(h,m,p,v,b)}else{var B,X;if(F==1&&(B=R.fltree,X=R.fdtree),F==2){s.F.makeCodes(R.ltree,x),s.F.revCodes(R.ltree,x),s.F.makeCodes(R.dtree,S),s.F.revCodes(R.dtree,S),s.F.makeCodes(R.itree,A),s.F.revCodes(R.itree,A),B=R.ltree,X=R.dtree,N(v,b,T-257),N(v,b+=5,D-1),N(v,b+=5,M-4),b+=4;for(var j=0;j<M;j++)N(v,b+3*j,R.itree[1+(R.ordr[j]<<1)]);b+=3*M,b=s.F._codeTiny($,R.itree,v,b),b=s.F._codeTiny(K,R.itree,v,b)}for(var k=m,W=0;W<u;W+=2){for(var G=o[W],Y=G>>>23,z=k+(8388607&G);k<z;)b=s.F._writeLit(h[k++],B,v,b);if(Y!=0){var I=o[W+1],J=I>>16,ee=I>>8&255,Z=255&I;N(v,b=s.F._writeLit(257+ee,B,v,b),Y-R.of0[ee]),b+=R.exb[ee],L(v,b=s.F._writeLit(Z,X,v,b),J-R.df0[Z]),b+=R.dxb[Z],k+=Y}}b=s.F._writeLit(256,B,v,b)}return b},s.F._copyExact=function(l,o,u,d,h){var m=h>>>3;return d[m]=u,d[m+1]=u>>>8,d[m+2]=255-d[m],d[m+3]=255-d[m+1],m+=4,d.set(new Uint8Array(l.buffer,o,u),m),h+(u+4<<3)},s.F.getTrees=function(){for(var l=s.F.U,o=s.F._hufTree(l.lhst,l.ltree,15),u=s.F._hufTree(l.dhst,l.dtree,15),d=[],h=s.F._lenCodes(l.ltree,d),m=[],p=s.F._lenCodes(l.dtree,m),v=0;v<d.length;v+=2)l.ihst[d[v]]++;for(v=0;v<m.length;v+=2)l.ihst[m[v]]++;for(var b=s.F._hufTree(l.ihst,l.itree,7),w=19;w>4&&l.itree[1+(l.ordr[w-1]<<1)]==0;)w--;return[o,u,b,h,p,w,d,m]},s.F.getSecond=function(l){for(var o=[],u=0;u<l.length;u+=2)o.push(l[u+1]);return o},s.F.nonZero=function(l){for(var o="",u=0;u<l.length;u+=2)l[u+1]!=0&&(o+=(u>>1)+",");return o},s.F.contSize=function(l,o){for(var u=0,d=0;d<o.length;d++)u+=o[d]*l[1+(d<<1)];return u},s.F._codeTiny=function(l,o,u,d){for(var h=0;h<l.length;h+=2){var m=l[h],p=l[h+1];d=s.F._writeLit(m,o,u,d);var v=m==16?2:m==17?3:7;m>15&&(s.F._putsE(u,d,p,v),d+=v)}return d},s.F._lenCodes=function(l,o){for(var u=l.length;u!=2&&l[u-1]==0;)u-=2;for(var d=0;d<u;d+=2){var h=l[d+1],m=d+3<u?l[d+3]:-1,p=d+5<u?l[d+5]:-1,v=d==0?-1:l[d-1];if(h==0&&m==h&&p==h){for(var b=d+5;b+2<u&&l[b+2]==h;)b+=2;(w=Math.min(b+1-d>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),d+=2*w-2}else if(h==v&&m==h&&p==h){for(b=d+5;b+2<u&&l[b+2]==h;)b+=2;var w=Math.min(b+1-d>>>1,6);o.push(16,w-3),d+=2*w-2}else o.push(h,0)}return u>>>1},s.F._hufTree=function(l,o,u){var d=[],h=l.length,m=o.length,p=0;for(p=0;p<m;p+=2)o[p]=0,o[p+1]=0;for(p=0;p<h;p++)l[p]!=0&&d.push({lit:p,f:l[p]});var v=d.length,b=d.slice(0);if(v==0)return 0;if(v==1){var w=d[0].lit;return b=w==0?1:0,o[1+(w<<1)]=1,o[1+(b<<1)]=1,1}d.sort((function($,K){return $.f-K.f}));var x=d[0],S=d[1],A=0,T=1,D=2;for(d[0]={lit:-1,f:x.f+S.f,l:x,r:S,d:0};T!=v-1;)x=A!=T&&(D==v||d[A].f<d[D].f)?d[A++]:d[D++],S=A!=T&&(D==v||d[A].f<d[D].f)?d[A++]:d[D++],d[T++]={lit:-1,f:x.f+S.f,l:x,r:S};var M=s.F.setDepth(d[T-1],0);for(M>u&&(s.F.restrictDepth(b,u,M),M=u),p=0;p<v;p++)o[1+(b[p].lit<<1)]=b[p].d;return M},s.F.setDepth=function(l,o){return l.lit!=-1?(l.d=o,o):Math.max(s.F.setDepth(l.l,o+1),s.F.setDepth(l.r,o+1))},s.F.restrictDepth=function(l,o,u){var d=0,h=1<<u-o,m=0;for(l.sort((function(v,b){return b.d==v.d?v.f-b.f:b.d-v.d})),d=0;d<l.length&&l[d].d>o;d++){var p=l[d].d;l[d].d=o,m+=h-(1<<u-p)}for(m>>>=u-o;m>0;)(p=l[d].d)<o?(l[d].d++,m-=1<<o-p-1):d++;for(;d>=0;d--)l[d].d==o&&m<0&&(l[d].d--,m++);m!=0&&console.log("debt left")},s.F._goodIndex=function(l,o){var u=0;return o[16|u]<=l&&(u|=16),o[8|u]<=l&&(u|=8),o[4|u]<=l&&(u|=4),o[2|u]<=l&&(u|=2),o[1|u]<=l&&(u|=1),u},s.F._writeLit=function(l,o,u,d){return s.F._putsF(u,d,o[l<<1]),d+o[1+(l<<1)]},s.F.inflate=function(l,o){var u=Uint8Array;if(l[0]==3&&l[1]==0)return o||new u(0);var d=s.F,h=d._bitsF,m=d._bitsE,p=d._decodeTiny,v=d.makeCodes,b=d.codes2map,w=d._get17,x=d.U,S=o==null;S&&(o=new u(l.length>>>2<<3));for(var A,T,D=0,M=0,$=0,K=0,R=0,L=0,N=0,E=0,U=0;D==0;)if(D=h(l,U,1),M=h(l,U+1,2),U+=3,M!=0){if(S&&(o=s.F._check(o,E+(1<<17))),M==1&&(A=x.flmap,T=x.fdmap,L=511,N=31),M==2){$=m(l,U,5)+257,K=m(l,U+5,5)+1,R=m(l,U+10,4)+4,U+=14;for(var P=0;P<38;P+=2)x.itree[P]=0,x.itree[P+1]=0;var H=1;for(P=0;P<R;P++){var F=m(l,U+3*P,3);x.itree[1+(x.ordr[P]<<1)]=F,F>H&&(H=F)}U+=3*R,v(x.itree,H),b(x.itree,H,x.imap),A=x.lmap,T=x.dmap,U=p(x.imap,(1<<H)-1,$+K,l,U,x.ttree);var B=d._copyOut(x.ttree,0,$,x.ltree);L=(1<<B)-1;var X=d._copyOut(x.ttree,$,K,x.dtree);N=(1<<X)-1,v(x.ltree,B),b(x.ltree,B,A),v(x.dtree,X),b(x.dtree,X,T)}for(;;){var j=A[w(l,U)&L];U+=15&j;var k=j>>>4;if(!(k>>>8))o[E++]=k;else{if(k==256)break;var W=E+k-254;if(k>264){var G=x.ldef[k-257];W=E+(G>>>3)+m(l,U,7&G),U+=7&G}var Y=T[w(l,U)&N];U+=15&Y;var z=Y>>>4,I=x.ddef[z],J=(I>>>4)+h(l,U,15&I);for(U+=15&I,S&&(o=s.F._check(o,E+(1<<17)));E<W;)o[E]=o[E++-J],o[E]=o[E++-J],o[E]=o[E++-J],o[E]=o[E++-J];E=W}}}else{(7&U)!=0&&(U+=8-(7&U));var ee=4+(U>>>3),Z=l[ee-4]|l[ee-3]<<8;S&&(o=s.F._check(o,E+Z)),o.set(new u(l.buffer,l.byteOffset+ee,Z),E),U=ee+Z<<3,E+=Z}return o.length==E?o:o.slice(0,E)},s.F._check=function(l,o){var u=l.length;if(o<=u)return l;var d=new Uint8Array(Math.max(u<<1,o));return d.set(l,0),d},s.F._decodeTiny=function(l,o,u,d,h,m){for(var p=s.F._bitsE,v=s.F._get17,b=0;b<u;){var w=l[v(d,h)&o];h+=15&w;var x=w>>>4;if(x<=15)m[b]=x,b++;else{var S=0,A=0;x==16?(A=3+p(d,h,2),h+=2,S=m[b-1]):x==17?(A=3+p(d,h,3),h+=3):x==18&&(A=11+p(d,h,7),h+=7);for(var T=b+A;b<T;)m[b]=S,b++}}return h},s.F._copyOut=function(l,o,u,d){for(var h=0,m=0,p=d.length>>>1;m<u;){var v=l[m+o];d[m<<1]=0,d[1+(m<<1)]=v,v>h&&(h=v),m++}for(;m<p;)d[m<<1]=0,d[1+(m<<1)]=0,m++;return h},s.F.makeCodes=function(l,o){for(var u,d,h,m,p=s.F.U,v=l.length,b=p.bl_count,w=0;w<=o;w++)b[w]=0;for(w=1;w<v;w+=2)b[l[w]]++;var x=p.next_code;for(u=0,b[0]=0,d=1;d<=o;d++)u=u+b[d-1]<<1,x[d]=u;for(h=0;h<v;h+=2)(m=l[h+1])!=0&&(l[h]=x[m],x[m]++)},s.F.codes2map=function(l,o,u){for(var d=l.length,h=s.F.U.rev15,m=0;m<d;m+=2)if(l[m+1]!=0)for(var p=m>>1,v=l[m+1],b=p<<4|v,w=o-v,x=l[m]<<w,S=x+(1<<w);x!=S;)u[h[x]>>>15-o]=b,x++},s.F.revCodes=function(l,o){for(var u=s.F.U.rev15,d=15-o,h=0;h<l.length;h+=2){var m=l[h]<<o-l[h+1];l[h]=u[m]>>>d}},s.F._putsE=function(l,o,u){u<<=7&o;var d=o>>>3;l[d]|=u,l[d+1]|=u>>>8},s.F._putsF=function(l,o,u){u<<=7&o;var d=o>>>3;l[d]|=u,l[d+1]|=u>>>8,l[d+2]|=u>>>16},s.F._bitsE=function(l,o,u){return(l[o>>>3]|l[1+(o>>>3)]<<8)>>>(7&o)&(1<<u)-1},s.F._bitsF=function(l,o,u){return(l[o>>>3]|l[1+(o>>>3)]<<8|l[2+(o>>>3)]<<16)>>>(7&o)&(1<<u)-1},s.F._get17=function(l,o){return(l[o>>>3]|l[1+(o>>>3)]<<8|l[2+(o>>>3)]<<16)>>>(7&o)},s.F._get25=function(l,o){return(l[o>>>3]|l[1+(o>>>3)]<<8|l[2+(o>>>3)]<<16|l[3+(o>>>3)]<<24)>>>(7&o)},s.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var l=s.F.U,o=0;o<32768;o++){var u=o;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,l.rev15[o]=(u>>>16|u<<16)>>>17}function d(h,m,p){for(;m--!=0;)h.push(0,p)}for(o=0;o<32;o++)l.ldef[o]=l.of0[o]<<3|l.exb[o],l.ddef[o]=l.df0[o]<<4|l.dxb[o];d(l.fltree,144,8),d(l.fltree,112,9),d(l.fltree,24,7),d(l.fltree,8,8),s.F.makeCodes(l.fltree,9),s.F.codes2map(l.fltree,9,l.flmap),s.F.revCodes(l.fltree,9),d(l.fdtree,32,5),s.F.makeCodes(l.fdtree,5),s.F.codes2map(l.fdtree,5,l.fdmap),s.F.revCodes(l.fdtree,5),d(l.itree,19,0),d(l.ltree,286,0),d(l.dtree,30,0),d(l.ttree,320,0)})()})();var HN=PN({__proto__:null,default:Bo},[Bo]);const Pn=(function(){var a={nextZero(p,v){for(;p[v]!=0;)v++;return v},readUshort:(p,v)=>p[v]<<8|p[v+1],writeUshort(p,v,b){p[v]=b>>8&255,p[v+1]=255&b},readUint:(p,v)=>16777216*p[v]+(p[v+1]<<16|p[v+2]<<8|p[v+3]),writeUint(p,v,b){p[v]=b>>24&255,p[v+1]=b>>16&255,p[v+2]=b>>8&255,p[v+3]=255&b},readASCII(p,v,b){let w="";for(let x=0;x<b;x++)w+=String.fromCharCode(p[v+x]);return w},writeASCII(p,v,b){for(let w=0;w<b.length;w++)p[v+w]=b.charCodeAt(w)},readBytes(p,v,b){const w=[];for(let x=0;x<b;x++)w.push(p[v+x]);return w},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,v,b){let w,x="";for(let S=0;S<b;S++)x+=`%${a.pad(p[v+S].toString(16))}`;try{w=decodeURIComponent(x)}catch{return a.readASCII(p,v,b)}return w}};function t(p,v,b,w){const x=v*b,S=o(w),A=Math.ceil(v*S/8),T=new Uint8Array(4*x),D=new Uint32Array(T.buffer),{ctype:M}=w,{depth:$}=w,K=a.readUshort;if(M==6){const G=x<<2;if($==8)for(var R=0;R<G;R+=4)T[R]=p[R],T[R+1]=p[R+1],T[R+2]=p[R+2],T[R+3]=p[R+3];if($==16)for(R=0;R<G;R++)T[R]=p[R<<1]}else if(M==2){const G=w.tabs.tRNS;if(G==null){if($==8)for(R=0;R<x;R++){var L=3*R;D[R]=255<<24|p[L+2]<<16|p[L+1]<<8|p[L]}if($==16)for(R=0;R<x;R++)L=6*R,D[R]=255<<24|p[L+4]<<16|p[L+2]<<8|p[L]}else{var N=G[0];const Y=G[1],z=G[2];if($==8)for(R=0;R<x;R++){var E=R<<2;L=3*R,D[R]=255<<24|p[L+2]<<16|p[L+1]<<8|p[L],p[L]==N&&p[L+1]==Y&&p[L+2]==z&&(T[E+3]=0)}if($==16)for(R=0;R<x;R++)E=R<<2,L=6*R,D[R]=255<<24|p[L+4]<<16|p[L+2]<<8|p[L],K(p,L)==N&&K(p,L+2)==Y&&K(p,L+4)==z&&(T[E+3]=0)}}else if(M==3){const G=w.tabs.PLTE,Y=w.tabs.tRNS,z=Y?Y.length:0;if($==1)for(var U=0;U<b;U++){var P=U*A,H=U*v;for(R=0;R<v;R++){E=H+R<<2;var F=3*(B=p[P+(R>>3)]>>7-((7&R)<<0)&1);T[E]=G[F],T[E+1]=G[F+1],T[E+2]=G[F+2],T[E+3]=B<z?Y[B]:255}}if($==2)for(U=0;U<b;U++)for(P=U*A,H=U*v,R=0;R<v;R++)E=H+R<<2,F=3*(B=p[P+(R>>2)]>>6-((3&R)<<1)&3),T[E]=G[F],T[E+1]=G[F+1],T[E+2]=G[F+2],T[E+3]=B<z?Y[B]:255;if($==4)for(U=0;U<b;U++)for(P=U*A,H=U*v,R=0;R<v;R++)E=H+R<<2,F=3*(B=p[P+(R>>1)]>>4-((1&R)<<2)&15),T[E]=G[F],T[E+1]=G[F+1],T[E+2]=G[F+2],T[E+3]=B<z?Y[B]:255;if($==8)for(R=0;R<x;R++){var B;E=R<<2,F=3*(B=p[R]),T[E]=G[F],T[E+1]=G[F+1],T[E+2]=G[F+2],T[E+3]=B<z?Y[B]:255}}else if(M==4){if($==8)for(R=0;R<x;R++){E=R<<2;var X=p[j=R<<1];T[E]=X,T[E+1]=X,T[E+2]=X,T[E+3]=p[j+1]}if($==16)for(R=0;R<x;R++){var j;E=R<<2,X=p[j=R<<2],T[E]=X,T[E+1]=X,T[E+2]=X,T[E+3]=p[j+2]}}else if(M==0)for(N=w.tabs.tRNS?w.tabs.tRNS:-1,U=0;U<b;U++){const G=U*A,Y=U*v;if($==1)for(var k=0;k<v;k++){var W=(X=255*(p[G+(k>>>3)]>>>7-(7&k)&1))==255*N?0:255;D[Y+k]=W<<24|X<<16|X<<8|X}else if($==2)for(k=0;k<v;k++)W=(X=85*(p[G+(k>>>2)]>>>6-((3&k)<<1)&3))==85*N?0:255,D[Y+k]=W<<24|X<<16|X<<8|X;else if($==4)for(k=0;k<v;k++)W=(X=17*(p[G+(k>>>1)]>>>4-((1&k)<<2)&15))==17*N?0:255,D[Y+k]=W<<24|X<<16|X<<8|X;else if($==8)for(k=0;k<v;k++)W=(X=p[G+k])==N?0:255,D[Y+k]=W<<24|X<<16|X<<8|X;else if($==16)for(k=0;k<v;k++)X=p[G+(k<<1)],W=K(p,G+(k<<1))==N?0:255,D[Y+k]=W<<24|X<<16|X<<8|X}return T}function r(p,v,b,w){const x=o(p),S=Math.ceil(b*x/8),A=new Uint8Array((S+1+p.interlace)*w);return v=p.tabs.CgBI?l(v,A):s(v,A),p.interlace==0?v=u(v,p,0,b,w):p.interlace==1&&(v=(function(D,M){const $=M.width,K=M.height,R=o(M),L=R>>3,N=Math.ceil($*R/8),E=new Uint8Array(K*N);let U=0;const P=[0,0,4,0,2,0,1],H=[0,4,0,2,0,1,0],F=[8,8,8,4,4,2,2],B=[8,8,4,4,2,2,1];let X=0;for(;X<7;){const k=F[X],W=B[X];let G=0,Y=0,z=P[X];for(;z<K;)z+=k,Y++;let I=H[X];for(;I<$;)I+=W,G++;const J=Math.ceil(G*R/8);u(D,M,U,G,Y);let ee=0,Z=P[X];for(;Z<K;){let oe=H[X],pe=U+ee*J<<3;for(;oe<$;){var j;if(R==1&&(j=(j=D[pe>>3])>>7-(7&pe)&1,E[Z*N+(oe>>3)]|=j<<7-((7&oe)<<0)),R==2&&(j=(j=D[pe>>3])>>6-(7&pe)&3,E[Z*N+(oe>>2)]|=j<<6-((3&oe)<<1)),R==4&&(j=(j=D[pe>>3])>>4-(7&pe)&15,E[Z*N+(oe>>1)]|=j<<4-((1&oe)<<2)),R>=8){const Ee=Z*N+oe*L;for(let ce=0;ce<L;ce++)E[Ee+ce]=D[(pe>>3)+ce]}pe+=R,oe+=W}ee++,Z+=k}G*Y!=0&&(U+=Y*(1+J)),X+=1}return E})(v,p)),v}function s(p,v){return l(new Uint8Array(p.buffer,2,p.length-6),v)}var l=(function(){const p={H:{}};return p.H.N=function(v,b){const w=Uint8Array;let x,S,A=0,T=0,D=0,M=0,$=0,K=0,R=0,L=0,N=0;if(v[0]==3&&v[1]==0)return b||new w(0);const E=p.H,U=E.b,P=E.e,H=E.R,F=E.n,B=E.A,X=E.Z,j=E.m,k=b==null;for(k&&(b=new w(v.length>>>2<<5));A==0;)if(A=U(v,N,1),T=U(v,N+1,2),N+=3,T!=0){if(k&&(b=p.H.W(b,L+(1<<17))),T==1&&(x=j.J,S=j.h,K=511,R=31),T==2){D=P(v,N,5)+257,M=P(v,N+5,5)+1,$=P(v,N+10,4)+4,N+=14;let G=1;for(var W=0;W<38;W+=2)j.Q[W]=0,j.Q[W+1]=0;for(W=0;W<$;W++){const I=P(v,N+3*W,3);j.Q[1+(j.X[W]<<1)]=I,I>G&&(G=I)}N+=3*$,F(j.Q,G),B(j.Q,G,j.u),x=j.w,S=j.d,N=H(j.u,(1<<G)-1,D+M,v,N,j.v);const Y=E.V(j.v,0,D,j.C);K=(1<<Y)-1;const z=E.V(j.v,D,M,j.D);R=(1<<z)-1,F(j.C,Y),B(j.C,Y,x),F(j.D,z),B(j.D,z,S)}for(;;){const G=x[X(v,N)&K];N+=15&G;const Y=G>>>4;if(!(Y>>>8))b[L++]=Y;else{if(Y==256)break;{let z=L+Y-254;if(Y>264){const oe=j.q[Y-257];z=L+(oe>>>3)+P(v,N,7&oe),N+=7&oe}const I=S[X(v,N)&R];N+=15&I;const J=I>>>4,ee=j.c[J],Z=(ee>>>4)+U(v,N,15&ee);for(N+=15&ee;L<z;)b[L]=b[L++-Z],b[L]=b[L++-Z],b[L]=b[L++-Z],b[L]=b[L++-Z];L=z}}}}else{(7&N)!=0&&(N+=8-(7&N));const G=4+(N>>>3),Y=v[G-4]|v[G-3]<<8;k&&(b=p.H.W(b,L+Y)),b.set(new w(v.buffer,v.byteOffset+G,Y),L),N=G+Y<<3,L+=Y}return b.length==L?b:b.slice(0,L)},p.H.W=function(v,b){const w=v.length;if(b<=w)return v;const x=new Uint8Array(w<<1);return x.set(v,0),x},p.H.R=function(v,b,w,x,S,A){const T=p.H.e,D=p.H.Z;let M=0;for(;M<w;){const $=v[D(x,S)&b];S+=15&$;const K=$>>>4;if(K<=15)A[M]=K,M++;else{let R=0,L=0;K==16?(L=3+T(x,S,2),S+=2,R=A[M-1]):K==17?(L=3+T(x,S,3),S+=3):K==18&&(L=11+T(x,S,7),S+=7);const N=M+L;for(;M<N;)A[M]=R,M++}}return S},p.H.V=function(v,b,w,x){let S=0,A=0;const T=x.length>>>1;for(;A<w;){const D=v[A+b];x[A<<1]=0,x[1+(A<<1)]=D,D>S&&(S=D),A++}for(;A<T;)x[A<<1]=0,x[1+(A<<1)]=0,A++;return S},p.H.n=function(v,b){const w=p.H.m,x=v.length;let S,A,T,D;const M=w.j;for(var $=0;$<=b;$++)M[$]=0;for($=1;$<x;$+=2)M[v[$]]++;const K=w.K;for(S=0,M[0]=0,A=1;A<=b;A++)S=S+M[A-1]<<1,K[A]=S;for(T=0;T<x;T+=2)D=v[T+1],D!=0&&(v[T]=K[D],K[D]++)},p.H.A=function(v,b,w){const x=v.length,S=p.H.m.r;for(let A=0;A<x;A+=2)if(v[A+1]!=0){const T=A>>1,D=v[A+1],M=T<<4|D,$=b-D;let K=v[A]<<$;const R=K+(1<<$);for(;K!=R;)w[S[K]>>>15-b]=M,K++}},p.H.l=function(v,b){const w=p.H.m.r,x=15-b;for(let S=0;S<v.length;S+=2){const A=v[S]<<b-v[S+1];v[S]=w[A]>>>x}},p.H.M=function(v,b,w){w<<=7&b;const x=b>>>3;v[x]|=w,v[x+1]|=w>>>8},p.H.I=function(v,b,w){w<<=7&b;const x=b>>>3;v[x]|=w,v[x+1]|=w>>>8,v[x+2]|=w>>>16},p.H.e=function(v,b,w){return(v[b>>>3]|v[1+(b>>>3)]<<8)>>>(7&b)&(1<<w)-1},p.H.b=function(v,b,w){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16)>>>(7&b)&(1<<w)-1},p.H.Z=function(v,b){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16)>>>(7&b)},p.H.i=function(v,b){return(v[b>>>3]|v[1+(b>>>3)]<<8|v[2+(b>>>3)]<<16|v[3+(b>>>3)]<<24)>>>(7&b)},p.H.m=(function(){const v=Uint16Array,b=Uint32Array;return{K:new v(16),j:new v(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new v(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new b(32),J:new v(512),_:[],h:new v(32),$:[],w:new v(32768),C:[],v:[],d:new v(32768),D:[],u:new v(512),Q:[],r:new v(32768),s:new b(286),Y:new b(30),a:new b(19),t:new b(15e3),k:new v(65536),g:new v(32768)}})(),(function(){const v=p.H.m;for(var b=0;b<32768;b++){let x=b;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,v.r[b]=(x>>>16|x<<16)>>>17}function w(x,S,A){for(;S--!=0;)x.push(0,A)}for(b=0;b<32;b++)v.q[b]=v.S[b]<<3|v.T[b],v.c[b]=v.p[b]<<4|v.z[b];w(v._,144,8),w(v._,112,9),w(v._,24,7),w(v._,8,8),p.H.n(v._,9),p.H.A(v._,9,v.J),p.H.l(v._,9),w(v.$,32,5),p.H.n(v.$,5),p.H.A(v.$,5,v.h),p.H.l(v.$,5),w(v.Q,19,0),w(v.C,286,0),w(v.D,30,0),w(v.v,320,0)})(),p.H.N})();function o(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function u(p,v,b,w,x){let S=o(v);const A=Math.ceil(w*S/8);let T,D;S=Math.ceil(S/8);let M=p[b],$=0;if(M>1&&(p[b]=[0,0,1][M-2]),M==3)for($=S;$<A;$++)p[$+1]=p[$+1]+(p[$+1-S]>>>1)&255;for(let K=0;K<x;K++)if(T=b+K*A,D=T+K+1,M=p[D-1],$=0,M==0)for(;$<A;$++)p[T+$]=p[D+$];else if(M==1){for(;$<S;$++)p[T+$]=p[D+$];for(;$<A;$++)p[T+$]=p[D+$]+p[T+$-S]}else if(M==2)for(;$<A;$++)p[T+$]=p[D+$]+p[T+$-A];else if(M==3){for(;$<S;$++)p[T+$]=p[D+$]+(p[T+$-A]>>>1);for(;$<A;$++)p[T+$]=p[D+$]+(p[T+$-A]+p[T+$-S]>>>1)}else{for(;$<S;$++)p[T+$]=p[D+$]+d(0,p[T+$-A],0);for(;$<A;$++)p[T+$]=p[D+$]+d(p[T+$-S],p[T+$-A],p[T+$-S-A])}return p}function d(p,v,b){const w=p+v-b,x=w-p,S=w-v,A=w-b;return x*x<=S*S&&x*x<=A*A?p:S*S<=A*A?v:b}function h(p,v,b){b.width=a.readUint(p,v),v+=4,b.height=a.readUint(p,v),v+=4,b.depth=p[v],v++,b.ctype=p[v],v++,b.compress=p[v],v++,b.filter=p[v],v++,b.interlace=p[v],v++}function m(p,v,b,w,x,S,A,T,D){const M=Math.min(v,x),$=Math.min(b,S);let K=0,R=0;for(let X=0;X<$;X++)for(let j=0;j<M;j++)if(A>=0&&T>=0?(K=X*v+j<<2,R=(T+X)*x+A+j<<2):(K=(-T+X)*v-A+j<<2,R=X*x+j<<2),D==0)w[R]=p[K],w[R+1]=p[K+1],w[R+2]=p[K+2],w[R+3]=p[K+3];else if(D==1){var L=p[K+3]*.00392156862745098,N=p[K]*L,E=p[K+1]*L,U=p[K+2]*L,P=w[R+3]*(1/255),H=w[R]*P,F=w[R+1]*P,B=w[R+2]*P;const k=1-L,W=L+P*k,G=W==0?0:1/W;w[R+3]=255*W,w[R+0]=(N+H*k)*G,w[R+1]=(E+F*k)*G,w[R+2]=(U+B*k)*G}else if(D==2)L=p[K+3],N=p[K],E=p[K+1],U=p[K+2],P=w[R+3],H=w[R],F=w[R+1],B=w[R+2],L==P&&N==H&&E==F&&U==B?(w[R]=0,w[R+1]=0,w[R+2]=0,w[R+3]=0):(w[R]=N,w[R+1]=E,w[R+2]=U,w[R+3]=L);else if(D==3){if(L=p[K+3],N=p[K],E=p[K+1],U=p[K+2],P=w[R+3],H=w[R],F=w[R+1],B=w[R+2],L==P&&N==H&&E==F&&U==B)continue;if(L<220&&P>20)return!1}return!0}return{decode:function(v){const b=new Uint8Array(v);let w=8;const x=a,S=x.readUshort,A=x.readUint,T={tabs:{},frames:[]},D=new Uint8Array(b.length);let M,$=0,K=0;const R=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(b[L]!=R[L])throw"The input is not a PNG file!";for(;w<b.length;){const X=x.readUint(b,w);w+=4;const j=x.readASCII(b,w,4);if(w+=4,j=="IHDR")h(b,w,T);else if(j=="iCCP"){for(var N=w;b[N]!=0;)N++;x.readASCII(b,w,N-w),b[N+1];const k=b.slice(N+2,w+X);let W=null;try{W=s(k)}catch{W=l(k)}T.tabs[j]=W}else if(j=="CgBI")T.tabs[j]=b.slice(w,w+4);else if(j=="IDAT"){for(L=0;L<X;L++)D[$+L]=b[w+L];$+=X}else if(j=="acTL")T.tabs[j]={num_frames:A(b,w),num_plays:A(b,w+4)},M=new Uint8Array(b.length);else if(j=="fcTL"){K!=0&&((B=T.frames[T.frames.length-1]).data=r(T,M.slice(0,K),B.rect.width,B.rect.height),K=0);const k={x:A(b,w+12),y:A(b,w+16),width:A(b,w+4),height:A(b,w+8)};let W=S(b,w+22);W=S(b,w+20)/(W==0?100:W);const G={rect:k,delay:Math.round(1e3*W),dispose:b[w+24],blend:b[w+25]};T.frames.push(G)}else if(j=="fdAT"){for(L=0;L<X-4;L++)M[K+L]=b[w+L+4];K+=X-4}else if(j=="pHYs")T.tabs[j]=[x.readUint(b,w),x.readUint(b,w+4),b[w+8]];else if(j=="cHRM")for(T.tabs[j]=[],L=0;L<8;L++)T.tabs[j].push(x.readUint(b,w+4*L));else if(j=="tEXt"||j=="zTXt"){T.tabs[j]==null&&(T.tabs[j]={});var E=x.nextZero(b,w),U=x.readASCII(b,w,E-w),P=w+X-E-1;if(j=="tEXt")F=x.readASCII(b,E+1,P);else{var H=s(b.slice(E+2,E+2+P));F=x.readUTF8(H,0,H.length)}T.tabs[j][U]=F}else if(j=="iTXt"){T.tabs[j]==null&&(T.tabs[j]={}),E=0,N=w,E=x.nextZero(b,N),U=x.readASCII(b,N,E-N);const k=b[N=E+1];var F;b[N+1],N+=2,E=x.nextZero(b,N),x.readASCII(b,N,E-N),N=E+1,E=x.nextZero(b,N),x.readUTF8(b,N,E-N),P=X-((N=E+1)-w),k==0?F=x.readUTF8(b,N,P):(H=s(b.slice(N,N+P)),F=x.readUTF8(H,0,H.length)),T.tabs[j][U]=F}else if(j=="PLTE")T.tabs[j]=x.readBytes(b,w,X);else if(j=="hIST"){const k=T.tabs.PLTE.length/3;for(T.tabs[j]=[],L=0;L<k;L++)T.tabs[j].push(S(b,w+2*L))}else if(j=="tRNS")T.ctype==3?T.tabs[j]=x.readBytes(b,w,X):T.ctype==0?T.tabs[j]=S(b,w):T.ctype==2&&(T.tabs[j]=[S(b,w),S(b,w+2),S(b,w+4)]);else if(j=="gAMA")T.tabs[j]=x.readUint(b,w)/1e5;else if(j=="sRGB")T.tabs[j]=b[w];else if(j=="bKGD")T.ctype==0||T.ctype==4?T.tabs[j]=[S(b,w)]:T.ctype==2||T.ctype==6?T.tabs[j]=[S(b,w),S(b,w+2),S(b,w+4)]:T.ctype==3&&(T.tabs[j]=b[w]);else if(j=="IEND")break;w+=X,x.readUint(b,w),w+=4}var B;return K!=0&&((B=T.frames[T.frames.length-1]).data=r(T,M.slice(0,K),B.rect.width,B.rect.height)),T.data=r(T,D,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(v){const b=v.width,w=v.height;if(v.tabs.acTL==null)return[t(v.data,b,w,v).buffer];const x=[];v.frames[0].data==null&&(v.frames[0].data=v.data);const S=b*w*4,A=new Uint8Array(S),T=new Uint8Array(S),D=new Uint8Array(S);for(let $=0;$<v.frames.length;$++){const K=v.frames[$],R=K.rect.x,L=K.rect.y,N=K.rect.width,E=K.rect.height,U=t(K.data,N,E,v);if($!=0)for(var M=0;M<S;M++)D[M]=A[M];if(K.blend==0?m(U,N,E,A,b,w,R,L,0):K.blend==1&&m(U,N,E,A,b,w,R,L,1),x.push(A.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)m(T,N,E,A,b,w,R,L,0);else if(K.dispose==2)for(M=0;M<S;M++)A[M]=D[M]}}return x},_paeth:d,_copyTile:m,_bin:a}})();(function(){const{_copyTile:a}=Pn,{_bin:t}=Pn,r=Pn._paeth;var s={table:(function(){const N=new Uint32Array(256);for(let E=0;E<256;E++){let U=E;for(let P=0;P<8;P++)1&U?U=3988292384^U>>>1:U>>>=1;N[E]=U}return N})(),update(N,E,U,P){for(let H=0;H<P;H++)N=s.table[255&(N^E[U+H])]^N>>>8;return N},crc:(N,E,U)=>4294967295^s.update(4294967295,N,E,U)};function l(N,E,U,P){E[U]+=N[0]*P>>4,E[U+1]+=N[1]*P>>4,E[U+2]+=N[2]*P>>4,E[U+3]+=N[3]*P>>4}function o(N){return Math.max(0,Math.min(255,N))}function u(N,E){const U=N[0]-E[0],P=N[1]-E[1],H=N[2]-E[2],F=N[3]-E[3];return U*U+P*P+H*H+F*F}function d(N,E,U,P,H,F,B){B==null&&(B=1);const X=P.length,j=[];for(var k=0;k<X;k++){const Z=P[k];j.push([Z>>>0&255,Z>>>8&255,Z>>>16&255,Z>>>24&255])}for(k=0;k<X;k++){let Z=4294967295;for(var W=0,G=0;G<X;G++){var Y=u(j[k],j[G]);G!=k&&Y<Z&&(Z=Y,W=G)}}const z=new Uint32Array(H.buffer),I=new Int16Array(E*U*4),J=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(k=0;k<J.length;k++)J[k]=255*((J[k]+.5)/16-.5);for(let Z=0;Z<U;Z++)for(let oe=0;oe<E;oe++){var ee;k=4*(Z*E+oe),B!=2?ee=[o(N[k]+I[k]),o(N[k+1]+I[k+1]),o(N[k+2]+I[k+2]),o(N[k+3]+I[k+3])]:(Y=J[4*(3&Z)+(3&oe)],ee=[o(N[k]+Y),o(N[k+1]+Y),o(N[k+2]+Y),o(N[k+3]+Y)]),W=0;let pe=16777215;for(G=0;G<X;G++){const he=u(ee,j[G]);he<pe&&(pe=he,W=G)}const Ee=j[W],ce=[ee[0]-Ee[0],ee[1]-Ee[1],ee[2]-Ee[2],ee[3]-Ee[3]];B==1&&(oe!=E-1&&l(ce,I,k+4,7),Z!=U-1&&(oe!=0&&l(ce,I,k+4*E-4,3),l(ce,I,k+4*E,5),oe!=E-1&&l(ce,I,k+4*E+4,1))),F[k>>2]=W,z[k>>2]=P[W]}}function h(N,E,U,P,H){H==null&&(H={});const{crc:F}=s,B=t.writeUint,X=t.writeUshort,j=t.writeASCII;let k=8;const W=N.frames.length>1;let G,Y=!1,z=33+(W?20:0);if(H.sRGB!=null&&(z+=13),H.pHYs!=null&&(z+=21),H.iCCP!=null&&(G=pako.deflate(H.iCCP),z+=21+G.length+4),N.ctype==3){for(var I=N.plte.length,J=0;J<I;J++)N.plte[J]>>>24!=255&&(Y=!0);z+=8+3*I+4+(Y?8+1*I+4:0)}for(var ee=0;ee<N.frames.length;ee++)W&&(z+=38),z+=(Ee=N.frames[ee]).cimg.length+12,ee!=0&&(z+=4);z+=12;const Z=new Uint8Array(z),oe=[137,80,78,71,13,10,26,10];for(J=0;J<8;J++)Z[J]=oe[J];if(B(Z,k,13),k+=4,j(Z,k,"IHDR"),k+=4,B(Z,k,E),k+=4,B(Z,k,U),k+=4,Z[k]=N.depth,k++,Z[k]=N.ctype,k++,Z[k]=0,k++,Z[k]=0,k++,Z[k]=0,k++,B(Z,k,F(Z,k-17,17)),k+=4,H.sRGB!=null&&(B(Z,k,1),k+=4,j(Z,k,"sRGB"),k+=4,Z[k]=H.sRGB,k++,B(Z,k,F(Z,k-5,5)),k+=4),H.iCCP!=null){const ce=13+G.length;B(Z,k,ce),k+=4,j(Z,k,"iCCP"),k+=4,j(Z,k,"ICC profile"),k+=11,k+=2,Z.set(G,k),k+=G.length,B(Z,k,F(Z,k-(ce+4),ce+4)),k+=4}if(H.pHYs!=null&&(B(Z,k,9),k+=4,j(Z,k,"pHYs"),k+=4,B(Z,k,H.pHYs[0]),k+=4,B(Z,k,H.pHYs[1]),k+=4,Z[k]=H.pHYs[2],k++,B(Z,k,F(Z,k-13,13)),k+=4),W&&(B(Z,k,8),k+=4,j(Z,k,"acTL"),k+=4,B(Z,k,N.frames.length),k+=4,B(Z,k,H.loop!=null?H.loop:0),k+=4,B(Z,k,F(Z,k-12,12)),k+=4),N.ctype==3){for(B(Z,k,3*(I=N.plte.length)),k+=4,j(Z,k,"PLTE"),k+=4,J=0;J<I;J++){const ce=3*J,he=N.plte[J],Re=255&he,ze=he>>>8&255,Te=he>>>16&255;Z[k+ce+0]=Re,Z[k+ce+1]=ze,Z[k+ce+2]=Te}if(k+=3*I,B(Z,k,F(Z,k-3*I-4,3*I+4)),k+=4,Y){for(B(Z,k,I),k+=4,j(Z,k,"tRNS"),k+=4,J=0;J<I;J++)Z[k+J]=N.plte[J]>>>24&255;k+=I,B(Z,k,F(Z,k-I-4,I+4)),k+=4}}let pe=0;for(ee=0;ee<N.frames.length;ee++){var Ee=N.frames[ee];W&&(B(Z,k,26),k+=4,j(Z,k,"fcTL"),k+=4,B(Z,k,pe++),k+=4,B(Z,k,Ee.rect.width),k+=4,B(Z,k,Ee.rect.height),k+=4,B(Z,k,Ee.rect.x),k+=4,B(Z,k,Ee.rect.y),k+=4,X(Z,k,P[ee]),k+=2,X(Z,k,1e3),k+=2,Z[k]=Ee.dispose,k++,Z[k]=Ee.blend,k++,B(Z,k,F(Z,k-30,30)),k+=4);const ce=Ee.cimg;B(Z,k,(I=ce.length)+(ee==0?0:4)),k+=4;const he=k;j(Z,k,ee==0?"IDAT":"fdAT"),k+=4,ee!=0&&(B(Z,k,pe++),k+=4),Z.set(ce,k),k+=I,B(Z,k,F(Z,he,k-he)),k+=4}return B(Z,k,0),k+=4,j(Z,k,"IEND"),k+=4,B(Z,k,F(Z,k-4,4)),k+=4,Z.buffer}function m(N,E,U){for(let P=0;P<N.frames.length;P++){const H=N.frames[P];H.rect.width;const F=H.rect.height,B=new Uint8Array(F*H.bpl+F);H.cimg=w(H.img,F,H.bpp,H.bpl,B,E,U)}}function p(N,E,U,P,H){const F=H[0],B=H[1],X=H[2],j=H[3],k=H[4],W=H[5];let G=6,Y=8,z=255;for(var I=0;I<N.length;I++){const tt=new Uint8Array(N[I]);for(var J=tt.length,ee=0;ee<J;ee+=4)z&=tt[ee+3]}const Z=z!=255,oe=(function(Fe,Ge,rt,de,ge,je){const ve=[];for(var fe=0;fe<Fe.length;fe++){const yt=new Uint8Array(Fe[fe]),nn=new Uint32Array(yt.buffer);var Ze;let Kt=0,Bt=0,it=Ge,Lt=rt,At=de?1:0;if(fe!=0){const ac=je||de||fe==1||ve[fe-2].dispose!=0?1:2;let Os=0,tl=1e9;for(let Gn=0;Gn<ac;Gn++){var st=new Uint8Array(Fe[fe-1-Gn]);const Ar=new Uint32Array(Fe[fe-1-Gn]);let an=Ge,zt=rt,On=-1,Mn=-1;for(let Kn=0;Kn<rt;Kn++)for(let Dn=0;Dn<Ge;Dn++)nn[Pe=Kn*Ge+Dn]!=Ar[Pe]&&(Dn<an&&(an=Dn),Dn>On&&(On=Dn),Kn<zt&&(zt=Kn),Kn>Mn&&(Mn=Kn));On==-1&&(an=zt=On=Mn=0),ge&&((1&an)==1&&an--,(1&zt)==1&&zt--);const nl=(On-an+1)*(Mn-zt+1);nl<tl&&(tl=nl,Os=Gn,Kt=an,Bt=zt,it=On-an+1,Lt=Mn-zt+1)}st=new Uint8Array(Fe[fe-1-Os]),Os==1&&(ve[fe-1].dispose=2),Ze=new Uint8Array(it*Lt*4),a(st,Ge,rt,Ze,it,Lt,-Kt,-Bt,0),At=a(yt,Ge,rt,Ze,it,Lt,-Kt,-Bt,3)?1:0,At==1?b(yt,Ge,rt,Ze,{x:Kt,y:Bt,width:it,height:Lt}):a(yt,Ge,rt,Ze,it,Lt,-Kt,-Bt,0)}else Ze=yt.slice(0);ve.push({rect:{x:Kt,y:Bt,width:it,height:Lt},img:Ze,blend:At,dispose:0})}if(de)for(fe=0;fe<ve.length;fe++){if((tn=ve[fe]).blend==1)continue;const yt=tn.rect,nn=ve[fe-1].rect,Kt=Math.min(yt.x,nn.x),Bt=Math.min(yt.y,nn.y),it={x:Kt,y:Bt,width:Math.max(yt.x+yt.width,nn.x+nn.width)-Kt,height:Math.max(yt.y+yt.height,nn.y+nn.height)-Bt};ve[fe-1].dispose=1,fe-1!=0&&v(Fe,Ge,rt,ve,fe-1,it,ge),v(Fe,Ge,rt,ve,fe,it,ge)}let vn=0;if(Fe.length!=1)for(var Pe=0;Pe<ve.length;Pe++){var tn;vn+=(tn=ve[Pe]).rect.width*tn.rect.height}return ve})(N,E,U,F,B,X),pe={},Ee=[],ce=[];if(P!=0){const tt=[];for(ee=0;ee<oe.length;ee++)tt.push(oe[ee].img.buffer);const Fe=(function(ge){let je=0;for(var ve=0;ve<ge.length;ve++)je+=ge[ve].byteLength;const fe=new Uint8Array(je);let Ze=0;for(ve=0;ve<ge.length;ve++){const st=new Uint8Array(ge[ve]),vn=st.length;for(let Pe=0;Pe<vn;Pe+=4){let tn=st[Pe],yt=st[Pe+1],nn=st[Pe+2];const Kt=st[Pe+3];Kt==0&&(tn=yt=nn=0),fe[Ze+Pe]=tn,fe[Ze+Pe+1]=yt,fe[Ze+Pe+2]=nn,fe[Ze+Pe+3]=Kt}Ze+=vn}return fe.buffer})(tt),Ge=S(Fe,P);for(ee=0;ee<Ge.plte.length;ee++)Ee.push(Ge.plte[ee].est.rgba);let rt=0;for(ee=0;ee<oe.length;ee++){const de=(Re=oe[ee]).img.length;var he=new Uint8Array(Ge.inds.buffer,rt>>2,de>>2);ce.push(he);const ge=new Uint8Array(Ge.abuf,rt,de);W&&d(Re.img,Re.rect.width,Re.rect.height,Ee,ge,he),Re.img.set(ge),rt+=de}}else for(I=0;I<oe.length;I++){var Re=oe[I];const tt=new Uint32Array(Re.img.buffer);var ze=Re.rect.width;for(J=tt.length,he=new Uint8Array(J),ce.push(he),ee=0;ee<J;ee++){const Fe=tt[ee];if(ee!=0&&Fe==tt[ee-1])he[ee]=he[ee-1];else if(ee>ze&&Fe==tt[ee-ze])he[ee]=he[ee-ze];else{let Ge=pe[Fe];if(Ge==null&&(pe[Fe]=Ge=Ee.length,Ee.push(Fe),Ee.length>=300))break;he[ee]=Ge}}}const Te=Ee.length;for(Te<=256&&k==0&&(Y=Te<=2?1:Te<=4?2:Te<=16?4:8,Y=Math.max(Y,j)),I=0;I<oe.length;I++){(Re=oe[I]).rect.x,Re.rect.y,ze=Re.rect.width;const tt=Re.rect.height;let Fe=Re.img;new Uint32Array(Fe.buffer);let Ge=4*ze,rt=4;if(Te<=256&&k==0){Ge=Math.ceil(Y*ze/8);var Ke=new Uint8Array(Ge*tt);const de=ce[I];for(let ge=0;ge<tt;ge++){ee=ge*Ge;const je=ge*ze;if(Y==8)for(var He=0;He<ze;He++)Ke[ee+He]=de[je+He];else if(Y==4)for(He=0;He<ze;He++)Ke[ee+(He>>1)]|=de[je+He]<<4-4*(1&He);else if(Y==2)for(He=0;He<ze;He++)Ke[ee+(He>>2)]|=de[je+He]<<6-2*(3&He);else if(Y==1)for(He=0;He<ze;He++)Ke[ee+(He>>3)]|=de[je+He]<<7-1*(7&He)}Fe=Ke,G=3,rt=1}else if(Z==0&&oe.length==1){Ke=new Uint8Array(ze*tt*3);const de=ze*tt;for(ee=0;ee<de;ee++){const ge=3*ee,je=4*ee;Ke[ge]=Fe[je],Ke[ge+1]=Fe[je+1],Ke[ge+2]=Fe[je+2]}Fe=Ke,G=2,rt=3,Ge=3*ze}Re.img=Fe,Re.bpl=Ge,Re.bpp=rt}return{ctype:G,depth:Y,plte:Ee,frames:oe}}function v(N,E,U,P,H,F,B){const X=Uint8Array,j=Uint32Array,k=new X(N[H-1]),W=new j(N[H-1]),G=H+1<N.length?new X(N[H+1]):null,Y=new X(N[H]),z=new j(Y.buffer);let I=E,J=U,ee=-1,Z=-1;for(let pe=0;pe<F.height;pe++)for(let Ee=0;Ee<F.width;Ee++){const ce=F.x+Ee,he=F.y+pe,Re=he*E+ce,ze=z[Re];ze==0||P[H-1].dispose==0&&W[Re]==ze&&(G==null||G[4*Re+3]!=0)||(ce<I&&(I=ce),ce>ee&&(ee=ce),he<J&&(J=he),he>Z&&(Z=he))}ee==-1&&(I=J=ee=Z=0),B&&((1&I)==1&&I--,(1&J)==1&&J--),F={x:I,y:J,width:ee-I+1,height:Z-J+1};const oe=P[H];oe.rect=F,oe.blend=1,oe.img=new Uint8Array(F.width*F.height*4),P[H-1].dispose==0?(a(k,E,U,oe.img,F.width,F.height,-F.x,-F.y,0),b(Y,E,U,oe.img,F)):a(Y,E,U,oe.img,F.width,F.height,-F.x,-F.y,0)}function b(N,E,U,P,H){a(N,E,U,P,H.width,H.height,-H.x,-H.y,2)}function w(N,E,U,P,H,F,B){const X=[];let j,k=[0,1,2,3,4];F!=-1?k=[F]:(E*P>5e5||U==1)&&(k=[0]),B&&(j={level:0});const W=HN;for(var G=0;G<k.length;G++){for(let I=0;I<E;I++)x(H,N,I,P,U,k[G]);X.push(W.deflate(H,j))}let Y,z=1e9;for(G=0;G<X.length;G++)X[G].length<z&&(Y=G,z=X[G].length);return X[Y]}function x(N,E,U,P,H,F){const B=U*P;let X=B+U;if(N[X]=F,X++,F==0)if(P<500)for(var j=0;j<P;j++)N[X+j]=E[B+j];else N.set(new Uint8Array(E.buffer,B,P),X);else if(F==1){for(j=0;j<H;j++)N[X+j]=E[B+j];for(j=H;j<P;j++)N[X+j]=E[B+j]-E[B+j-H]+256&255}else if(U==0){for(j=0;j<H;j++)N[X+j]=E[B+j];if(F==2)for(j=H;j<P;j++)N[X+j]=E[B+j];if(F==3)for(j=H;j<P;j++)N[X+j]=E[B+j]-(E[B+j-H]>>1)+256&255;if(F==4)for(j=H;j<P;j++)N[X+j]=E[B+j]-r(E[B+j-H],0,0)+256&255}else{if(F==2)for(j=0;j<P;j++)N[X+j]=E[B+j]+256-E[B+j-P]&255;if(F==3){for(j=0;j<H;j++)N[X+j]=E[B+j]+256-(E[B+j-P]>>1)&255;for(j=H;j<P;j++)N[X+j]=E[B+j]+256-(E[B+j-P]+E[B+j-H]>>1)&255}if(F==4){for(j=0;j<H;j++)N[X+j]=E[B+j]+256-r(0,E[B+j-P],0)&255;for(j=H;j<P;j++)N[X+j]=E[B+j]+256-r(E[B+j-H],E[B+j-P],E[B+j-H-P])&255}}}function S(N,E){const U=new Uint8Array(N),P=U.slice(0),H=new Uint32Array(P.buffer),F=A(P,E),B=F[0],X=F[1],j=U.length,k=new Uint8Array(j>>2);let W;if(U.length<2e7)for(var G=0;G<j;G+=4)W=T(B,Y=U[G]*(1/255),z=U[G+1]*(1/255),I=U[G+2]*(1/255),J=U[G+3]*(1/255)),k[G>>2]=W.ind,H[G>>2]=W.est.rgba;else for(G=0;G<j;G+=4){var Y=U[G]*.00392156862745098,z=U[G+1]*(1/255),I=U[G+2]*(1/255),J=U[G+3]*(1/255);for(W=B;W.left;)W=D(W.est,Y,z,I,J)<=0?W.left:W.right;k[G>>2]=W.ind,H[G>>2]=W.est.rgba}return{abuf:P.buffer,inds:k,plte:X}}function A(N,E,U){U==null&&(U=1e-4);const P=new Uint32Array(N.buffer),H={i0:0,i1:N.length,bst:null,est:null,tdst:0,left:null,right:null};H.bst=K(N,H.i0,H.i1),H.est=R(H.bst);const F=[H];for(;F.length<E;){let X=0,j=0;for(var B=0;B<F.length;B++)F[B].est.L>X&&(X=F[B].est.L,j=B);if(X<U)break;const k=F[j],W=M(N,P,k.i0,k.i1,k.est.e,k.est.eMq255);if(k.i0>=W||k.i1<=W){k.est.L=0;continue}const G={i0:k.i0,i1:W,bst:null,est:null,tdst:0,left:null,right:null};G.bst=K(N,G.i0,G.i1),G.est=R(G.bst);const Y={i0:W,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:k.bst.N-G.bst.N},B=0;B<16;B++)Y.bst.R[B]=k.bst.R[B]-G.bst.R[B];for(B=0;B<4;B++)Y.bst.m[B]=k.bst.m[B]-G.bst.m[B];Y.est=R(Y.bst),k.left=G,k.right=Y,F[j]=G,F.push(Y)}for(F.sort(((X,j)=>j.bst.N-X.bst.N)),B=0;B<F.length;B++)F[B].ind=B;return[H,F]}function T(N,E,U,P,H){if(N.left==null)return N.tdst=(function(G,Y,z,I,J){const ee=Y-G[0],Z=z-G[1],oe=I-G[2],pe=J-G[3];return ee*ee+Z*Z+oe*oe+pe*pe})(N.est.q,E,U,P,H),N;const F=D(N.est,E,U,P,H);let B=N.left,X=N.right;F>0&&(B=N.right,X=N.left);const j=T(B,E,U,P,H);if(j.tdst<=F*F)return j;const k=T(X,E,U,P,H);return k.tdst<j.tdst?k:j}function D(N,E,U,P,H){const{e:F}=N;return F[0]*E+F[1]*U+F[2]*P+F[3]*H-N.eMq}function M(N,E,U,P,H,F){for(P-=4;U<P;){for(;$(N,U,H)<=F;)U+=4;for(;$(N,P,H)>F;)P-=4;if(U>=P)break;const B=E[U>>2];E[U>>2]=E[P>>2],E[P>>2]=B,U+=4,P-=4}for(;$(N,U,H)>F;)U-=4;return U+4}function $(N,E,U){return N[E]*U[0]+N[E+1]*U[1]+N[E+2]*U[2]+N[E+3]*U[3]}function K(N,E,U){const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H=[0,0,0,0],F=U-E>>2;for(let B=E;B<U;B+=4){const X=N[B]*.00392156862745098,j=N[B+1]*(1/255),k=N[B+2]*(1/255),W=N[B+3]*(1/255);H[0]+=X,H[1]+=j,H[2]+=k,H[3]+=W,P[0]+=X*X,P[1]+=X*j,P[2]+=X*k,P[3]+=X*W,P[5]+=j*j,P[6]+=j*k,P[7]+=j*W,P[10]+=k*k,P[11]+=k*W,P[15]+=W*W}return P[4]=P[1],P[8]=P[2],P[9]=P[6],P[12]=P[3],P[13]=P[7],P[14]=P[11],{R:P,m:H,N:F}}function R(N){const{R:E}=N,{m:U}=N,{N:P}=N,H=U[0],F=U[1],B=U[2],X=U[3],j=P==0?0:1/P,k=[E[0]-H*H*j,E[1]-H*F*j,E[2]-H*B*j,E[3]-H*X*j,E[4]-F*H*j,E[5]-F*F*j,E[6]-F*B*j,E[7]-F*X*j,E[8]-B*H*j,E[9]-B*F*j,E[10]-B*B*j,E[11]-B*X*j,E[12]-X*H*j,E[13]-X*F*j,E[14]-X*B*j,E[15]-X*X*j],W=k,G=L;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,I=0;if(P!=0)for(let ee=0;ee<16&&(Y=G.multVec(W,Y),I=Math.sqrt(G.dot(Y,Y)),Y=G.sml(1/I,Y),!(ee!=0&&Math.abs(I-z)<1e-9));ee++)z=I;const J=[H*j,F*j,B*j,X*j];return{Cov:k,q:J,e:Y,L:z,eMq255:G.dot(G.sml(255,J),Y),eMq:G.dot(Y,J),rgba:(Math.round(255*J[3])<<24|Math.round(255*J[2])<<16|Math.round(255*J[1])<<8|Math.round(255*J[0])<<0)>>>0}}var L={multVec:(N,E)=>[N[0]*E[0]+N[1]*E[1]+N[2]*E[2]+N[3]*E[3],N[4]*E[0]+N[5]*E[1]+N[6]*E[2]+N[7]*E[3],N[8]*E[0]+N[9]*E[1]+N[10]*E[2]+N[11]*E[3],N[12]*E[0]+N[13]*E[1]+N[14]*E[2]+N[15]*E[3]],dot:(N,E)=>N[0]*E[0]+N[1]*E[1]+N[2]*E[2]+N[3]*E[3],sml:(N,E)=>[N*E[0],N*E[1],N*E[2],N*E[3]]};Pn.encode=function(E,U,P,H,F,B,X){H==null&&(H=0),X==null&&(X=!1);const j=p(E,U,P,H,[!1,!1,!1,0,X,!1]);return m(j,-1),h(j,U,P,F,B)},Pn.encodeLL=function(E,U,P,H,F,B,X,j){const k={ctype:0+(H==1?0:2)+(F==0?0:4),depth:B,frames:[]},W=(H+F)*B,G=W*U;for(let Y=0;Y<E.length;Y++)k.frames.push({rect:{x:0,y:0,width:U,height:P},img:new Uint8Array(E[Y]),blend:0,dispose:1,bpp:Math.ceil(W/8),bpl:Math.ceil(G/8)});return m(k,0,!0),h(k,U,P,X,j)},Pn.encode.compress=p,Pn.encode.dither=d,Pn.quantize=S,Pn.quantize.getKDtree=A,Pn.quantize.getNearest=T})();const $v={toArrayBuffer(a,t){const r=a.width,s=a.height,l=r<<2,o=a.getContext("2d").getImageData(0,0,r,s),u=new Uint32Array(o.data.buffer),d=(32*r+31)/32<<2,h=d*s,m=122+h,p=new ArrayBuffer(m),v=new DataView(p),b=1<<20;let w,x,S,A,T=b,D=0,M=0,$=0;function K(N){v.setUint16(M,N,!0),M+=2}function R(N){v.setUint32(M,N,!0),M+=4}function L(N){M+=N}K(19778),R(m),L(4),R(122),R(108),R(r),R(-s>>>0),K(1),K(32),R(3),R(h),R(2835),R(2835),L(8),R(16711680),R(65280),R(255),R(4278190080),R(1466527264),(function N(){for(;D<s&&T>0;){for(A=122+D*d,w=0;w<l;)T--,x=u[$++],S=x>>>24,v.setUint32(A+w,x<<8|S),w+=4;D++}$<u.length?(T=b,setTimeout(N,$v._dly)):t(p)})()},toBlob(a,t){this.toArrayBuffer(a,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Zt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},qN={[Zt.CHROME]:16384,[Zt.FIREFOX]:11180,[Zt.DESKTOP_SAFARI]:16384,[Zt.IE]:8192,[Zt.IOS]:4096,[Zt.ETC]:8192};const Sh=typeof window<"u",Pv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Io=Sh&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),GN=(Sh||Pv)&&(Io&&Io.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Bv=(Sh||Pv)&&(Io&&Io.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function kh(a,t,r=Date.now()){return new Promise((s=>{const l=a.split(","),o=l[0].match(/:(.*?);/)[1],u=globalThis.atob(l[1]);let d=u.length;const h=new Uint8Array(d);for(;d--;)h[d]=u.charCodeAt(d);const m=new Blob([h],{type:o});m.name=t,m.lastModified=r,s(m)}))}function Iv(a){return new Promise(((t,r)=>{const s=new Bv;s.onload=()=>t(s.result),s.onerror=l=>r(l),s.readAsDataURL(a)}))}function Hv(a){return new Promise(((t,r)=>{const s=new Image;s.onload=()=>t(s),s.onerror=l=>r(l),s.src=a}))}function kr(){if(kr.cachedResult!==void 0)return kr.cachedResult;let a=Zt.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?a=Zt.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?a=Zt.IOS:/Safari/i.test(t)?a=Zt.DESKTOP_SAFARI:/Firefox/i.test(t)?a=Zt.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(a=Zt.IE),kr.cachedResult=a,kr.cachedResult}function qv(a,t){const r=kr(),s=qN[r];let l=a,o=t,u=l*o;const d=l>o?o/l:l/o;for(;u>s*s;){const h=(s+l)/2,m=(s+o)/2;h<m?(o=m,l=m*d):(o=h*d,l=h),u=l*o}return{width:l,height:o}}function Zo(a,t){let r,s;try{if(r=new OffscreenCanvas(a,t),s=r.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),s=r.getContext("2d")}return r.width=a,r.height=t,[r,s]}function Gv(a,t){const{width:r,height:s}=qv(a.width,a.height),[l,o]=Zo(r,s);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,l.width,l.height)),o.drawImage(a,0,0,l.width,l.height),l}function Ao(){return Ao.cachedResult!==void 0||(Ao.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ao.cachedResult}function Ho(a,t={}){return new Promise((function(r,s){let l,o;var u=function(){try{return o=Gv(l,t.fileType||a.type),r([l,o])}catch(h){return s(h)}},d=function(h){try{var m=function(p){try{throw p}catch(v){return s(v)}};try{let p;return Iv(a).then((function(v){try{return p=v,Hv(p).then((function(b){try{return l=b,(function(){try{return u()}catch(w){return s(w)}})()}catch(w){return m(w)}}),m)}catch(b){return m(b)}}),m)}catch(p){m(p)}}catch(p){return s(p)}};try{if(Ao()||[Zt.DESKTOP_SAFARI,Zt.MOBILE_SAFARI].includes(kr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(a).then((function(h){try{return l=h,u()}catch{return d()}}),d)}catch{d()}}))}function qo(a,t,r,s,l=1){return new Promise((function(o,u){let d;if(t==="image/png"){let v,b,w;return v=a.getContext("2d"),{data:b}=v.getImageData(0,0,a.width,a.height),w=Pn.encode([b.buffer],a.width,a.height,4096*l),d=new Blob([w],{type:t}),d.name=r,d.lastModified=s,h.call(this)}{let v=function(){return h.call(this)};var m=v;if(t==="image/bmp")return new Promise((b=>$v.toBlob(a,b))).then((function(b){try{return d=b,d.name=r,d.lastModified=s,v.call(this)}catch(w){return u(w)}}).bind(this),u);{let b=function(){return v.call(this)};var p=b;if(typeof OffscreenCanvas=="function"&&a instanceof OffscreenCanvas)return a.convertToBlob({type:t,quality:l}).then((function(w){try{return d=w,d.name=r,d.lastModified=s,b.call(this)}catch(x){return u(x)}}).bind(this),u);{let w;return w=a.toDataURL(t,l),kh(w,r,s).then((function(x){try{return d=x,b.call(this)}catch(S){return u(S)}}).bind(this),u)}}}function h(){return o(d)}}))}function Xn(a){a.width=0,a.height=0}function js(){return new Promise((function(a,t){let r,s,l,o;return js.cachedResult!==void 0?a(js.cachedResult):kh("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(u){try{return r=u,Ho(r).then((function(d){try{return s=d[1],qo(s,r.type,r.name,r.lastModified).then((function(h){try{return l=h,Xn(s),Ho(l).then((function(m){try{return o=m[0],js.cachedResult=o.width===1&&o.height===2,a(js.cachedResult)}catch(p){return t(p)}}),t)}catch(m){return t(m)}}),t)}catch(h){return t(h)}}),t)}catch(d){return t(d)}}),t)}))}function Kv(a){return new Promise(((t,r)=>{const s=new Bv;s.onload=l=>{const o=new DataView(l.target.result);if(o.getUint16(0,!1)!=65496)return t(-2);const u=o.byteLength;let d=2;for(;d<u;){if(o.getUint16(d+2,!1)<=8)return t(-1);const h=o.getUint16(d,!1);if(d+=2,h==65505){if(o.getUint32(d+=2,!1)!=1165519206)return t(-1);const m=o.getUint16(d+=6,!1)==18761;d+=o.getUint32(d+4,m);const p=o.getUint16(d,m);d+=2;for(let v=0;v<p;v++)if(o.getUint16(d+12*v,m)==274)return t(o.getUint16(d+12*v+8,m))}else{if((65280&h)!=65280)break;d+=o.getUint16(d,!1)}}return t(-1)},s.onerror=l=>r(l),s.readAsArrayBuffer(a)}))}function Fv(a,t){const{width:r}=a,{height:s}=a,{maxWidthOrHeight:l}=t;let o,u=a;return isFinite(l)&&(r>l||s>l)&&([u,o]=Zo(r,s),r>s?(u.width=l,u.height=s/r*l):(u.width=r/s*l,u.height=l),o.drawImage(a,0,0,u.width,u.height),Xn(a)),u}function Vv(a,t){const{width:r}=a,{height:s}=a,[l,o]=Zo(r,s);switch(t>4&&t<9?(l.width=s,l.height=r):(l.width=r,l.height=s),t){case 2:o.transform(-1,0,0,1,r,0);break;case 3:o.transform(-1,0,0,-1,r,s);break;case 4:o.transform(1,0,0,-1,0,s);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,s,0);break;case 7:o.transform(0,-1,-1,0,s,r);break;case 8:o.transform(0,-1,1,0,0,r)}return o.drawImage(a,0,0,r,s),Xn(a),l}function ey(a,t,r=0){return new Promise((function(s,l){let o,u,d,h,m,p,v,b,w,x,S,A,T,D,M,$,K,R,L,N;function E(P=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=P,t.onProgress(Math.min(o,100))}function U(P){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(P,o),100),t.onProgress(o)}return o=r,u=t.maxIteration||10,d=1024*t.maxSizeMB*1024,E(),Ho(a,t).then((function(P){try{return[,h]=P,E(),m=Fv(h,t),E(),new Promise((function(H,F){var B;if(!(B=t.exifOrientation))return Kv(a).then((function(j){try{return B=j,X.call(this)}catch(k){return F(k)}}).bind(this),F);function X(){return H(B)}return X.call(this)})).then((function(H){try{return p=H,E(),js().then((function(F){try{return v=F?m:Vv(m,p),E(),b=t.initialQuality||1,w=t.fileType||a.type,qo(v,w,a.name,a.lastModified,b).then((function(B){try{{let W=function(){if(u--&&(M>d||M>T)){let Y,z;return Y=N?.95*L.width:L.width,z=N?.95*L.height:L.height,[K,R]=Zo(Y,z),R.drawImage(L,0,0,Y,z),b*=w==="image/png"?.85:.95,qo(K,w,a.name,a.lastModified,b).then((function(I){try{return $=I,Xn(L),L=K,M=$.size,U(Math.min(99,Math.floor((D-M)/(D-d)*100))),W}catch(J){return l(J)}}),l)}return[1]},G=function(){return Xn(L),Xn(K),Xn(m),Xn(v),Xn(h),U(100),s($)};var j=W,k=G;if(x=B,E(),S=x.size>d,A=x.size>a.size,!S&&!A)return U(100),s(x);var X;return T=a.size,D=x.size,M=D,L=v,N=!t.alwaysKeepResolution&&S,(X=(function(Y){for(;Y;){if(Y.then)return void Y.then(X,l);try{if(Y.pop){if(Y.length)return Y.pop()?G.call(this):Y;Y=W}else Y=Y.call(this)}catch(z){return l(z)}}}).bind(this))(W)}}catch(W){return l(W)}}).bind(this),l)}catch(B){return l(B)}}).bind(this),l)}catch(F){return l(F)}}).bind(this),l)}catch(H){return l(H)}}).bind(this),l)}))}const KN=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ld;function FN(a,t){return new Promise(((r,s)=>{Ld||(Ld=(function(u){const d=[];return d.push(u),URL.createObjectURL(new Blob(d))})(KN));const l=new Worker(Ld);l.addEventListener("message",(function(u){if(t.signal&&t.signal.aborted)l.terminate();else if(u.data.progress===void 0){if(u.data.error)return s(new Error(u.data.error)),void l.terminate();r(u.data.file),l.terminate()}else t.onProgress(u.data.progress)})),l.addEventListener("error",s),t.signal&&t.signal.addEventListener("abort",(()=>{s(t.signal.reason),l.terminate()})),l.postMessage({file:a,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function _t(a,t){return new Promise((function(r,s){let l,o,u,d,h,m;if(l={...t},u=0,{onProgress:d}=l,l.maxSizeMB=l.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof l.useWebWorker!="boolean"||l.useWebWorker,delete l.useWebWorker,l.onProgress=w=>{u=w,typeof d=="function"&&d(u)},!(a instanceof Blob||a instanceof GN))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(a.type))return s(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||m)return ey(a,l).then((function(w){try{return o=w,b.call(this)}catch(x){return s(x)}}).bind(this),s);var p=(function(){try{return b.call(this)}catch(w){return s(w)}}).bind(this),v=function(w){try{return ey(a,l).then((function(x){try{return o=x,p()}catch(S){return s(S)}}),s)}catch(x){return s(x)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",FN(a,l).then((function(w){try{return o=w,p()}catch{return v()}}),v)}catch{v()}function b(){try{o.name=a.name,o.lastModified=a.lastModified}catch{}try{l.preserveExif&&a.type==="image/jpeg"&&(!l.fileType||l.fileType&&l.fileType===a.type)&&(o=zv(a,o))}catch{}return r(o)}}))}_t.getDataUrlFromFile=Iv,_t.getFilefromDataUrl=kh,_t.loadImage=Hv,_t.drawImageInCanvas=Gv,_t.drawFileInCanvas=Ho,_t.canvasToFile=qo,_t.getExifOrientation=Kv,_t.handleMaxWidthOrHeight=Fv,_t.followExifOrientation=Vv,_t.cleanupCanvasMemory=Xn,_t.isAutoOrientationInBrowser=js,_t.approximateBelowMaximumCanvasSizeOfBrowser=qv,_t.copyExifWithoutOrientation=zv,_t.getBrowserName=kr,_t.version="2.0.2";function VN(){const{t:a,i18n:t}=ot(),{currentUser:r}=yn(),s=pn(),l=qt(),{addToast:o}=Sa(),u=O.useRef(null),[d,h]=O.useState("landing"),[m,p]=O.useState(""),[v,b]=O.useState({main:null,macro:null}),[w,x]=O.useState(!1),[S,A]=O.useState(null),[T,D]=O.useState(!1),[M,$]=O.useState(!1),[K,R]=O.useState(!1);O.useEffect(()=>{if(l.state?.refreshId){j(),h("landing");return}if(l.state?.restoredResult){A(l.state.restoredResult),h("result"),l.state?.restoredImages&&(b(l.state.restoredImages),p(l.state.restoredPlantType||""));return}if(r){const I=localStorage.getItem("pending_analysis_backup");if(I)try{const J=JSON.parse(I);A(J.result),b(J.images),p(J.plantType||""),h("result"),localStorage.removeItem("pending_analysis_backup"),o(a("analysis_restored")||"Analysis restored!","success")}catch(J){console.error("Failed to parse backup:",J),localStorage.removeItem("pending_analysis_backup")}}},[l.state,r]);const L=()=>{d==="input_type"&&h("capture_main")},N=()=>{p(""),h("capture_main")},E=()=>{u.current&&(u.current.value="",u.current.click())},U=I=>{I&&H(I),R(!1)},P=async I=>{const J=I.target.files?.[0];if(J){x(!0);try{const Z=await _t(J,{maxSizeMB:.8,maxWidthOrHeight:1280,useWebWorker:!0}),oe=new FileReader;oe.onloadend=()=>{const pe=oe.result;H(pe),x(!1)},oe.readAsDataURL(Z)}catch(ee){console.error("Image compression failed:",ee),o(a("error_image_process")||"Image processing failed","error"),x(!1)}}},H=async I=>{d==="capture_main"?(b(J=>({...J,main:I})),await F(I)):d==="capture_macro"&&(b(J=>({...J,macro:I})),await F([v.main,I]))},F=async(I,J)=>{x(!0),h("analyzing"),D(!1);try{const ee=await Nv(I,t.language,m);if(ee.status==="needs_details")o(a("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),h("capture_macro");else{if(ee.status==="error")throw new Error(ee.error);A(ee),h("result")}}catch(ee){console.error(ee);let Z=ee.message||a("error_diagnosis_failed")||"Diagnosis failed.";Z.includes("NOT_PLANT")?Z=a("error_not_plant"):(Z.includes("503")||Z.includes("overloaded"))&&(Z=a("error_server_busy")),o(Z,"error"),h("capture_main")}finally{x(!1)}},B=async()=>{if(r&&!(T||M)){$(!0);try{const I=m||S.plant_name||a("unknown_plant")||"Unknown Plant",J=await jv(r.uid,I,v,S);D(!0),o(a("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{$(!1),s("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:J}})},500)}catch(I){console.error("Manual save failed:",I),o((a("save_fail")||"Failed to save analysis:")+" "+I.message,"error"),$(!1)}}},X=()=>{const I={result:S,images:v,plantType:m,timestamp:Date.now()};try{localStorage.setItem("pending_analysis_backup",JSON.stringify(I))}catch(J){console.error("Storage full?",J)}s("/login",{state:{pendingResult:S,pendingImages:v,pendingPlantType:m,returnUrl:"/"}})},j=()=>{b({main:null,macro:null}),p(""),A(null),D(!1),h("input_type"),u.current&&(u.current.value="")},k=()=>g.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[g.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[g.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),g.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),g.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[g.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[g.jsx(CE,{className:"w-4 h-4 text-amber-500"}),g.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:a("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),g.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[a("hero_title_1")||"Heal your plants with"," ",g.jsx("br",{}),g.jsx("span",{className:"text-gradient drop-shadow-sm",children:a("hero_title_highlight")||"AI Precision"})]}),g.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:a("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),g.jsxs("button",{onClick:()=>h("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[g.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),g.jsxs("span",{className:"relative flex items-center gap-3",children:[g.jsx(Ts,{className:"w-6 h-6"}),a("start_diagnosis")]})]})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:a("feature_1_title")||"Instant Analysis",desc:a("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:VE,color:"from-yellow-400 to-orange-500"},{title:a("feature_2_title")||"Smart Interactions",desc:a("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:Ok,color:"from-blue-400 to-indigo-500"},{title:a("feature_3_title")||"Verified Treatments",desc:a("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:AE,color:"from-green-400 to-emerald-500"}].map((I,J)=>{const ee=I.icon;return g.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[g.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${I.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:g.jsx(ee,{className:"w-7 h-7"})}),g.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:I.title}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:I.desc})]},J)})}),g.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:g.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:a("summary_title")||"Your Personal Pocket Botanist"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:a("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),g.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[g.jsx(yh,{className:"w-4 h-4 text-green-500"})," ",a("accuracy_badge")||"95% Accuracy"]}),g.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[g.jsx(O0,{className:"w-4 h-4 text-blue-500"})," ",a("macro_support")||"Macro Support"]})]})]}),g.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),g.jsx("img",{src:"/placeholder-plant.png",onError:I=>{I.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),g.jsx(en,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),W=()=>g.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[g.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:g.jsx(en,{className:"w-12 h-12"})}),g.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:a("scan_step_1")}),g.jsx("p",{className:"text-gray-500 mb-6 text-center",children:a("what_plant_question")}),g.jsx("input",{type:"text",value:m,onChange:I=>p(I.target.value),placeholder:a("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),g.jsxs("button",{onClick:L,disabled:!m.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[a("next_step")," ",g.jsx(vh,{className:"w-4 h-4"})]}),g.jsx("button",{onClick:N,className:"mt-4 text-gray-500 text-sm hover:underline",children:a("skip")})]}),G=I=>g.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[g.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:I?a("close_up_photo")||"Close-up Photo":a("scan_step_2")}),g.jsxs("div",{className:"w-full space-y-4",children:[g.jsxs("button",{onClick:()=>R(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[g.jsx(Ts,{className:"w-8 h-8"}),g.jsx("span",{children:a("open_camera")||"Open Camera"})]}),g.jsxs("button",{onClick:E,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[g.jsx(iv,{className:"w-6 h-6"}),g.jsx("span",{children:a("upload_gallery")||"Select from Gallery"})]})]}),g.jsx("button",{onClick:()=>h("input_type"),className:"mt-6 text-gray-500 underline",children:a("back")})]}),Y=()=>g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[g.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[v.main&&g.jsx("img",{src:v.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:g.jsx(Tn,{className:"w-16 h-16 text-white animate-spin"})})]}),g.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:a("analyzing")||"Analyzing..."}),g.jsx("p",{className:"text-gray-500 mt-2",children:a("ai_thinking")||"AI Botanist is thinking..."})]}),z=()=>g.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[g.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:g.jsxs("div",{className:"sticky top-4",children:[g.jsx("img",{src:v.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),v.macro&&g.jsx("img",{src:v.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),r&&g.jsx("button",{onClick:B,disabled:T||M,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${T||M?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:T?g.jsxs(g.Fragment,{children:[g.jsx(Qo,{className:"w-6 h-6"}),g.jsx("span",{children:a("saved")||"Kaydedildi"})]}):M?g.jsxs(g.Fragment,{children:[g.jsx(Tn,{className:"w-5 h-5 animate-spin"}),g.jsx("span",{children:a("saving")||"Kaydediliyor..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:g.jsx(hv,{className:"w-5 h-5"})}),g.jsx("span",{className:"text-lg",children:S?.is_treatable===!1?a("save_info")||"Bilgiyi Kaydet":a("start_treatment")||"Tedaviye Bala"})]})}),g.jsxs("button",{onClick:j,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[a("take_photo")," (",a("reset"),")"]})]})}),g.jsxs("div",{className:"w-full md:w-2/3 relative",children:[g.jsx("div",{className:`transition-all duration-500 ${r?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:g.jsx(zN,{result:S,onReset:j})}),!r&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:g.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[g.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:g.jsx(O0,{className:"w-8 h-8 text-green-600"})}),g.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a("login_to_view")}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:a("login_blur_text")}),g.jsx("button",{onClick:X,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:a("login")})]})})]})]});return g.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${d==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[g.jsx("input",{type:"file",accept:"image/*",ref:u,onChange:P,className:"hidden"}),g.jsx($N,{isOpen:K,onClose:()=>R(!1),onCapture:U}),d==="landing"?k():g.jsxs(g.Fragment,{children:[d!=="result"&&g.jsxs("button",{onClick:()=>h("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",a("back")]}),d==="input_type"&&W(),d==="capture_main"&&G(!1),d==="capture_macro"&&G(!0),d==="analyzing"&&Y(),d==="result"&&z()]})]})}const _o=43200,ty=1440,ny=Symbol.for("constructDateFrom");function Eh(a,t){return typeof a=="function"?a(t):a&&typeof a=="object"&&ny in a?a[ny](t):a instanceof Date?new a.constructor(t):new Date(t)}function Za(a,t){return Eh(a,a)}let YN={};function WN(){return YN}function ay(a){const t=Za(a),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+a-+r}function Nh(a,...t){const r=Eh.bind(null,a||t.find(s=>typeof s=="object"));return t.map(r)}function To(a,t){const r=+Za(a)-+Za(t);return r<0?-1:r>0?1:r}function XN(a){return Eh(a,Date.now())}function QN(a,t,r){const[s,l]=Nh(r?.in,a,t),o=s.getFullYear()-l.getFullYear(),u=s.getMonth()-l.getMonth();return o*12+u}function JN(a){return t=>{const s=(a?Math[a]:Math.trunc)(t);return s===0?0:s}}function ZN(a,t){return+Za(a)-+Za(t)}function ej(a,t){const r=Za(a);return r.setHours(23,59,59,999),r}function tj(a,t){const r=Za(a),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function nj(a,t){const r=Za(a);return+ej(r)==+tj(r)}function aj(a,t,r){const[s,l,o]=Nh(r?.in,a,a,t),u=To(l,o),d=Math.abs(QN(l,o));if(d<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-u*d);let h=To(l,o)===-u;nj(s)&&d===1&&To(s,o)===1&&(h=!1);const m=u*(d-+h);return m===0?0:m}function rj(a,t,r){const s=ZN(a,t)/1e3;return JN(r?.roundingMethod)(s)}const sj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ij=(a,t,r)=>{let s;const l=sj[a];return typeof l=="string"?s=l:t===1?s=l.one:s=l.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Cs(a){return(t={})=>{const r=t.width?String(t.width):a.defaultWidth;return a.formats[r]||a.formats[a.defaultWidth]}}const lj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uj={date:Cs({formats:lj,defaultWidth:"full"}),time:Cs({formats:oj,defaultWidth:"full"}),dateTime:Cs({formats:cj,defaultWidth:"full"})},dj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hj=(a,t,r,s)=>dj[a];function Qn(a){return(t,r)=>{const s=r?.context?String(r.context):"standalone";let l;if(s==="formatting"&&a.formattingValues){const u=a.defaultFormattingWidth||a.defaultWidth,d=r?.width?String(r.width):u;l=a.formattingValues[d]||a.formattingValues[u]}else{const u=a.defaultWidth,d=r?.width?String(r.width):a.defaultWidth;l=a.values[d]||a.values[u]}const o=a.argumentCallback?a.argumentCallback(t):t;return l[o]}}const fj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bj=(a,t)=>{const r=Number(a),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},wj={ordinalNumber:bj,era:Qn({values:fj,defaultWidth:"wide"}),quarter:Qn({values:gj,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Qn({values:mj,defaultWidth:"wide"}),day:Qn({values:pj,defaultWidth:"wide"}),dayPeriod:Qn({values:yj,defaultWidth:"wide",formattingValues:vj,defaultFormattingWidth:"wide"})};function Jn(a){return(t,r={})=>{const s=r.width,l=s&&a.matchPatterns[s]||a.matchPatterns[a.defaultMatchWidth],o=t.match(l);if(!o)return null;const u=o[0],d=s&&a.parsePatterns[s]||a.parsePatterns[a.defaultParseWidth],h=Array.isArray(d)?_j(d,v=>v.test(u)):xj(d,v=>v.test(u));let m;m=a.valueCallback?a.valueCallback(h):h,m=r.valueCallback?r.valueCallback(m):m;const p=t.slice(u.length);return{value:m,rest:p}}}function xj(a,t){for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&t(a[r]))return r}function _j(a,t){for(let r=0;r<a.length;r++)if(t(a[r]))return r}function Yv(a){return(t,r={})=>{const s=t.match(a.matchPattern);if(!s)return null;const l=s[0],o=t.match(a.parsePattern);if(!o)return null;let u=a.valueCallback?a.valueCallback(o[0]):o[0];u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(l.length);return{value:u,rest:d}}}const Sj=/^(\d+)(th|st|nd|rd)?/i,kj=/\d+/i,Ej={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nj={any:[/^b/i,/^(a|c)/i]},jj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Aj={any:[/1/i,/2/i,/3/i,/4/i]},Tj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Uj={ordinalNumber:Yv({matchPattern:Sj,parsePattern:kj,valueCallback:a=>parseInt(a,10)}),era:Jn({matchPatterns:Ej,defaultMatchWidth:"wide",parsePatterns:Nj,defaultParseWidth:"any"}),quarter:Jn({matchPatterns:jj,defaultMatchWidth:"wide",parsePatterns:Aj,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Jn({matchPatterns:Tj,defaultMatchWidth:"wide",parsePatterns:Cj,defaultParseWidth:"any"}),day:Jn({matchPatterns:Rj,defaultMatchWidth:"wide",parsePatterns:Oj,defaultParseWidth:"any"}),dayPeriod:Jn({matchPatterns:Mj,defaultMatchWidth:"any",parsePatterns:Dj,defaultParseWidth:"any"})},Zi={code:"en-US",formatDistance:ij,formatLong:uj,formatRelative:hj,localize:wj,match:Uj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Lj(a,t,r){const s=WN(),l=r?.locale??s.locale??Zi,o=2520,u=To(a,t);if(isNaN(u))throw new RangeError("Invalid time value");const d=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:u}),[h,m]=Nh(r?.in,...u>0?[t,a]:[a,t]),p=rj(m,h),v=(ay(m)-ay(h))/1e3,b=Math.round((p-v)/60);let w;if(b<2)return r?.includeSeconds?p<5?l.formatDistance("lessThanXSeconds",5,d):p<10?l.formatDistance("lessThanXSeconds",10,d):p<20?l.formatDistance("lessThanXSeconds",20,d):p<40?l.formatDistance("halfAMinute",0,d):p<60?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",1,d):b===0?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",b,d);if(b<45)return l.formatDistance("xMinutes",b,d);if(b<90)return l.formatDistance("aboutXHours",1,d);if(b<ty){const x=Math.round(b/60);return l.formatDistance("aboutXHours",x,d)}else{if(b<o)return l.formatDistance("xDays",1,d);if(b<_o){const x=Math.round(b/ty);return l.formatDistance("xDays",x,d)}else if(b<_o*2)return w=Math.round(b/_o),l.formatDistance("aboutXMonths",w,d)}if(w=aj(m,h),w<12){const x=Math.round(b/_o);return l.formatDistance("xMonths",x,d)}else{const x=w%12,S=Math.trunc(w/12);return x<3?l.formatDistance("aboutXYears",S,d):x<9?l.formatDistance("overXYears",S,d):l.formatDistance("almostXYears",S+1,d)}}function ec(a,t){return Lj(a,XN(a),t)}const zj={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},$j=(a,t,r)=>{let s;const l=zj[a];return typeof l=="string"?s=l:t===1?s=l.one:s=l.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?s+" sonra":s+" nce":s},Pj={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},Bj={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ij={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hj={date:Cs({formats:Pj,defaultWidth:"full"}),time:Cs({formats:Bj,defaultWidth:"full"}),dateTime:Cs({formats:Ij,defaultWidth:"full"})},qj={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},Gj=(a,t,r,s)=>qj[a],Kj={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},Fj={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},Vj={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},Yj={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},Wj={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},Xj={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},Qj=(a,t)=>Number(a)+".",Jj={ordinalNumber:Qj,era:Qn({values:Kj,defaultWidth:"wide"}),quarter:Qn({values:Fj,defaultWidth:"wide",argumentCallback:a=>Number(a)-1}),month:Qn({values:Vj,defaultWidth:"wide"}),day:Qn({values:Yj,defaultWidth:"wide"}),dayPeriod:Qn({values:Wj,defaultWidth:"wide",formattingValues:Xj,defaultFormattingWidth:"wide"})},Zj=/^(\d+)(\.)?/i,eA=/\d+/i,tA={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},nA={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},aA={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},rA={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},sA={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},iA={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},lA={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},oA={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},cA={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},uA={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},dA={ordinalNumber:Yv({matchPattern:Zj,parsePattern:eA,valueCallback:function(a){return parseInt(a,10)}}),era:Jn({matchPatterns:tA,defaultMatchWidth:"wide",parsePatterns:nA,defaultParseWidth:"any"}),quarter:Jn({matchPatterns:aA,defaultMatchWidth:"wide",parsePatterns:rA,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Jn({matchPatterns:sA,defaultMatchWidth:"wide",parsePatterns:iA,defaultParseWidth:"any"}),day:Jn({matchPatterns:lA,defaultMatchWidth:"wide",parsePatterns:oA,defaultParseWidth:"any"}),dayPeriod:Jn({matchPatterns:cA,defaultMatchWidth:"any",parsePatterns:uA,defaultParseWidth:"any"})},tc={code:"tr",formatDistance:$j,formatLong:Hj,formatRelative:Gj,localize:Jj,match:dA,options:{weekStartsOn:1,firstWeekContainsDate:1}},Wv=O.createContext();function jh(){return O.useContext(Wv)}function hA({children:a}){const[t,r]=O.useState(!1),[s,l]=O.useState("login"),m={isOpen:t,view:s,openLogin:()=>{l("login"),r(!0)},openRegister:()=>{l("register"),r(!0)},closeModal:()=>{r(!1)},toggleView:()=>{l(p=>p==="login"?"register":"login")}};return g.jsx(Wv.Provider,{value:m,children:a})}function Ah({post:a,onUserClick:t,onViewAnalysis:r,isDetailView:s=!1,authorOverride:l=null}){const{openLogin:o}=jh(),u=pn(),{t:d,i18n:h}=ot(),{currentUser:m}=yn(),p=h.language==="tr"?tc:Zi,[v,b]=O.useState(""),[w,x]=O.useState(s),[S,A]=O.useState(!1),[T,D]=O.useState(!1),[M,$]=O.useState(a?.content||""),[K,R]=O.useState(null),L=m?.uid===a?.userId;O.useEffect(()=>{if(!a?.userId||L||l)return;(async()=>{try{const{data:z}=await ue.from("profiles").select("*").eq("id",a.userId).single();z&&R({...z,name:z.full_name,photoURL:z.avatar_url,avatar:z.avatar_url})}catch(z){console.error("Failed to fetch author for post",a.id,z)}})()},[a?.userId,L,l,a.id]);const N=async()=>{try{await Lv(a.id,{content:M}),D(!1)}catch{alert("Failed to update post")}};if(!a)return null;const E=a.likes&&m&&a.likes.includes(m.uid),U=a.likes?a.likes.length:0,P=a.comments?a.comments.length:0,[H,F]=O.useState("");O.useEffect(()=>{const Y=()=>{if(!a.createdAt?.seconds){F(d("just_now")||"Just now");return}const I=new Date(a.createdAt.seconds*1e3);(new Date-I)/(1e3*60*60)>24?F(I.toLocaleDateString(h.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):F(ec(I,{addSuffix:!0,locale:p,includeSeconds:!1}))};Y();const z=setInterval(Y,6e4);return()=>clearInterval(z)},[a.createdAt,p,d,h.language]),a.createdAt?.seconds&&new Date(a.createdAt.seconds*1e3);const B=async()=>{if(!(!m||S)){A(!0);try{await Dv(a.id,m.uid)}catch(Y){console.error(Y)}finally{A(!1)}}},X=async()=>{if(window.confirm(d("confirm_delete_post")||"Delete this post?"))try{await Mv(a.id)}catch{alert("Failed to delete post")}},j=async Y=>{if(Y.preventDefault(),!(!v.trim()||!m))try{await Uv(a.id,m.uid,m.displayName||"User",v),b("")}catch(z){console.error(z),alert("Failed to post comment")}},k=async()=>{const Y={title:`Plant AI - ${a.title||a.authorName}`,text:a.content,url:window.location.origin+"/#/community/post/"+a.id};if(navigator.share)try{await navigator.share(Y)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(Y.url),alert(d("link_copied")||"Link copied!")},W=Y=>{if(!Y||Y==="Unknown")return null;const z=`plant_${Y.toLowerCase().replace(/\s+/g,"_")}`,I=d(z);return!I||I===z?Y.charAt(0).toUpperCase()+Y.slice(1):I},G=L&&(m?.photoURL||m?.avatar)?m.photoURL||m.avatar:l?.photoURL||l?.avatar?l.photoURL||l.avatar:K?.photoURL||K?.avatar?K.photoURL||K.avatar:a.userAvatar||`https://ui-avatars.com/api/?name=${a.authorName||"Gardener"}&background=random`;return g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[L&&g.jsx("button",{onClick:X,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",title:d("delete")||"Delete",children:g.jsx(qi,{className:"w-4 h-4"})}),!a.hideAuthor&&g.jsx("div",{className:"p-4 flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t&&t(a.userId),children:[g.jsx("img",{src:G,alt:a.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:a.authorName||d("gardener")}),g.jsx("span",{className:"text-xs text-gray-500",children:H})]})]})}),g.jsxs("div",{className:`px-4 pb-2 ${a.hideAuthor?"pt-4":""}`,children:[a.title&&g.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:a.title}),g.jsx("p",{className:`text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap ${s?"":"cursor-pointer hover:opacity-80"}`,onClick:()=>!s&&u(`/community/post/${a.id}`),children:a.content}),a.plantType&&a.plantType!=="Unknown"&&g.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:W(a.plantType)}),a.relatedAnalysisId&&g.jsx("div",{className:"mt-2",children:g.jsxs("button",{onClick:()=>r&&r(a.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[g.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),d("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),a.image&&g.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(a.image,"_blank"),children:[g.jsx("img",{src:a.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[g.jsx(Ii,{className:"w-3 h-3"}),g.jsxs("span",{children:[20+(a.likes?.length||0)*5," ",d("views")||"Grntlenme"]})]})]}),g.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("button",{onClick:B,className:`flex items-center gap-1.5 transition-colors ${E?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[g.jsx(rv,{className:`w-5 h-5 ${E?"fill-current":""}`}),g.jsx("span",{className:"text-sm font-medium",children:U||d("like")})]}),g.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>x(!w),children:[g.jsx(Ii,{className:"w-5 h-5"}),g.jsx("span",{className:"text-sm font-medium",children:P||d("comment")})]}),L&&g.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>D(!0),children:[g.jsx(uv,{className:"w-5 h-5"}),g.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:d("edit")})]})]}),g.jsxs("button",{onClick:k,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[g.jsx(Po,{className:"w-5 h-5"}),g.jsx("span",{className:"text-sm hidden sm:inline",children:(d("share")||"payla").toLowerCase()})]})]}),T&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[g.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:d("edit_post")}),g.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:M,onChange:Y=>$(Y.target.value),rows:4}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:d("cancel")}),g.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:d("save")})]})]})}),w&&g.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[g.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[a.comments&&a.comments.map((Y,z)=>g.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[g.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[Y.userName,":"]}),g.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:Y.text})]},z)),(!a.comments||a.comments.length===0)&&g.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:d("no_comments_yet")})]}),m?g.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:v,onChange:Y=>b(Y.target.value),placeholder:d("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),g.jsx("button",{type:"submit",disabled:!v.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:g.jsx(Hi,{className:"w-4 h-4"})})]}):g.jsx("button",{onClick:o,className:"w-full py-3 text-center text-sm text-green-600 bg-green-50 dark:bg-green-900/10 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/20 transition-colors font-medium",children:d("login_to_comment")||"Yorum yapmak iin giri yapn"})]})]})}const Co=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}],fA=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function gA(a){if(!a)return!0;const t=a.toLowerCase();return!fA.some(r=>t.includes(r))}async function mA(a,t){try{const{error:r}=await ue.from("user_blocks").insert({blocker_id:a,blocked_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error blocking user:",r),r}}async function pA(a,t){try{const{error:r}=await ue.from("user_blocks").delete().match({blocker_id:a,blocked_id:t});if(r)throw r;return!0}catch(r){throw console.error("Error unblocking user:",r),r}}async function yA(a,t){try{const{data:r,error:s}=await ue.from("user_blocks").select("id").match({blocker_id:a,blocked_id:t}).single();return s?!1:!!r}catch{return!1}}function vA({onClose:a,onPostCreated:t}){const{t:r}=ot(),{currentUser:s}=yn(),l=O.useRef(null),[o,u]=O.useState(""),[d,h]=O.useState(""),[m,p]=O.useState(""),[v,b]=O.useState(!1),[w,x]=O.useState("none"),[S,A]=O.useState(null),[T,D]=O.useState(null),[M,$]=O.useState(!1),[K,R]=O.useState(!1),[L,N]=O.useState(""),[E,U]=O.useState(""),[P,H]=O.useState(0);O.useEffect(()=>{if(d){const k=Co.find(W=>W.value===d);k&&p(r(k.labelKey))}},[d,r]);const F=async k=>{const W=k.target.files[0];if(W){const G=new FileReader;G.onloadend=()=>D(G.result),G.readAsDataURL(W),A(W)}},B=async()=>{if(S){R(!0);try{let k=S;try{k=await _t(S,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(G){console.warn("Compression failed for analysis, using original",G)}const W=new FileReader;W.readAsDataURL(k),W.onloadend=async()=>{const G=W.result,Y=await Nv(G,"en"),z=(Y.plant_name+" "+Y.disease_name).toLowerCase();let I=null;for(const J of Co)if(z.includes(J.value)){I=J;break}I?(h(I.value),p(r(I.labelKey)),U(`${r("auto_detect")}: ${r(I.labelKey)}`)):U("Plant detected but not in our list yet."),setTimeout(()=>U(""),3e3),R(!1)}}catch(k){console.error("Auto detect failed",k),N(r("error_diagnosis_failed")),R(!1)}}},X=async k=>{if(k.preventDefault(),!!o.trim()){if(!gA(o)){N(r("unsafe_content_warning")||"Your post contains inappropriate language.");return}$(!0),N(""),H(0);try{let W=null;if(S)try{console.log("Compressing for Base64 storage...");const Y=await _t(S,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});W=await new Promise((z,I)=>{const J=new FileReader;J.readAsDataURL(Y),J.onload=()=>z(J.result),J.onerror=ee=>I(ee)}),console.log("Base64 string ready, length:",W.length)}catch(G){console.error("Compression failed:",G),N("Image is too large and could not be compressed."),$(!1);return}await _h(s.uid,{authorName:s.displayName||"Gardener",userAvatar:s.photoURL||s.avatar||null,content:o,plantType:d||"other",image:W}),t(),a()}catch(W){console.error("FULL POST ERROR:",W),N(W.message||r("error_diagnosis_failed")||"Failed to share post.")}finally{$(!1)}}},j=Co.filter(k=>r(k.labelKey).toLowerCase().includes(m.toLowerCase()));return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[g.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[g.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r("ask_question")}),g.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:g.jsx(Rn,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[L&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:L}),E&&g.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:E}),g.jsxs("form",{onSubmit:X,className:"space-y-4",children:[g.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:r("what_plant_placeholder"),value:o,onChange:k=>u(k.target.value),required:!0}),g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:r("plant_diagnosis")}),g.jsxs("div",{className:"relative",children:[g.jsx(fv,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),g.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:r("select_plant"),value:m,onChange:k=>{p(k.target.value),b(!0),k.target.value===""&&h("")},onFocus:()=>b(!0)}),g.jsx(bh,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),v&&g.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:j.length>0?j.map(k=>g.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{h(k.value),p(r(k.labelKey)),b(!1)},children:r(k.labelKey)},k.value)):g.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),v&&g.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>b(!1)})]}),T&&g.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[g.jsx("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"}),g.jsx("button",{type:"button",onClick:()=>{A(null),D(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:M,children:g.jsx(Rn,{className:"w-4 h-4"})}),g.jsxs("button",{type:"button",onClick:B,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?g.jsx(Tn,{className:"w-3 h-3 animate-spin"}):g.jsx(GE,{className:"w-3 h-3"}),r(K?"detecting":"auto_detect")]})]}),M&&P>0&&g.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[g.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${P}%`}}),g.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(P),"%"]})]}),g.jsxs("div",{className:"flex justify-between items-center pt-2",children:[g.jsxs("button",{type:"button",onClick:()=>l.current?.click(),disabled:M,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[g.jsx(iv,{className:"w-5 h-5"}),g.jsx("span",{className:"text-sm font-medium",children:r("upload_photo")})]}),g.jsx("input",{type:"file",ref:l,onChange:F,accept:"image/*",className:"hidden"}),g.jsxs("button",{type:"submit",disabled:M||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[M?g.jsx(Tn,{className:"w-4 h-4 animate-spin"}):g.jsx(Hi,{className:"w-4 h-4"}),M?"...":r("ask_question")]})]})]})]})]})})}function bA({user:a,onClose:t}){const{currentUser:r}=yn(),s=pn(),[l,o]=O.useState(!1),{t:u,i18n:d}=ot(),{addToast:h}=Sa(),{openLogin:m}=jh(),[p,v]=O.useState(a),[b,w]=O.useState(!1);O.useEffect(()=>{if(!a)return;const N=a.uid||a.id;if(!N)return;const E=ue.channel(`public:profiles:id=eq.${N}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${N}`},U=>{v({uid:U.new.id,...U.new,avatar:U.new.avatar_url,name:U.new.full_name,lastSeen:U.new.last_seen})}).subscribe();return ue.from("profiles").select("*").eq("id",N).single().then(({data:U})=>{U&&v({uid:U.id,...U,avatar:U.avatar_url,name:U.full_name,lastSeen:U.last_seen})}),()=>{ue.removeChannel(E)}},[a]);const x=a?{...a,...p,uid:p?.uid||a.uid||a.id}:null,[S,A]=O.useState(!1),[T,D]=O.useState(!1);O.useEffect(()=>{(async()=>{if(r&&x){const{isFollowing:E,isRequested:U}=await pv(r.uid,x.uid);A(E),D(U)}})()},[r,x]);const[M,$]=O.useState(!1);O.useEffect(()=>{r&&x&&yA(r.uid,x.uid).then($)},[r,x]);const K=async()=>{if(!(!r||!x))try{M?(await pA(r.uid,x.uid),$(!1),h(u("user_unblocked")||"User unblocked","success")):window.confirm(u("confirm_block")||"Block this user? They won't be able to message you.")&&(await mA(r.uid,x.uid),$(!0),h(u("user_blocked")||"User blocked","success"))}catch(N){console.error(N),h("Action failed","error")}},R=async()=>{if(!r){m();return}if(!b){w(!0);try{S?(await No(r.uid,x.uid),A(!1),D(!1),h(u("unfollowed_user")||"Takipten kld","info")):T?(await vv(r.uid,x.uid),D(!1),h(u("request_cancelled")||"stek iptal edildi","info")):(await yv(r.uid,{displayName:r.displayName||"Unknown User",photoURL:r.photoURL||null},x.uid),D(!0),h(u("request_sent")||"Takip istei gnderildi","success"))}catch(N){console.error("Follow Error:",N),h(u("error_occurred")||"Bir hata olutu: "+N.message,"error")}finally{w(!1)}}},L=N=>{if(!N?.lastSeen)return!1;const E=new Date(N.lastSeen);return new Date-E<180*1e3};return!a||!x?null:g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:t,children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:N=>N.stopPropagation(),children:[g.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:g.jsx(Rn,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),g.jsxs("div",{className:"flex flex-col items-center relative",children:[g.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name}`,alt:x.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),g.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${L(x)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${L(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),L(x)?"Online":"Offline"]}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:x.name||"User"}),g.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[g.jsx(Gi,{className:"w-3 h-3"}),g.jsxs("span",{children:[u("joined")||"Katlma Tarihi",": ",x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString(d.language,{day:"numeric",month:"long",year:"numeric"}):u("unknown_date")]})]}),g.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[g.jsxs("button",{onClick:()=>{t(),s(`/profile/${x.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[g.jsx(Gi,{className:"w-5 h-5"}),u("view_profile")||"Profili Gr"]}),g.jsxs("div",{className:"flex gap-3 w-full",children:[r&&r.uid!==x.uid&&g.jsx("button",{onClick:R,disabled:b,className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 ${S?"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-white":T?"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:S?g.jsxs(g.Fragment,{children:[g.jsx($E,{className:"w-5 h-5"}),u("following")||"Following"]}):T?g.jsxs(g.Fragment,{children:[g.jsx(Jo,{className:"w-5 h-5"}),u("requested")||"Requested"]}):g.jsxs(g.Fragment,{children:[g.jsx(wh,{className:"w-5 h-5"}),u("follow")||"Follow"]})}),r&&r.uid!==x.uid&&g.jsxs("button",{onClick:async()=>{if(S){t();const N={uid:x.uid,name:x.name||x.displayName||"User",photoURL:x.photoURL||x.avatar||null};s("/messages/new",{state:{targetUser:N}})}else h(u("must_follow_to_message")||"Mesaj gndermek iin takip etmelisin","info")},className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-sm transition-transform active:scale-95 ${S?"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-200":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[g.jsx(Ii,{className:"w-5 h-5"}),u("send_message")||"Mesaj Gnder"]})]}),r&&r.uid!==x.uid&&g.jsx("button",{onClick:K,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${M?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:M?u("unblock_user")||"Unblock User":u("block_user")||"Block User"})]})]})]})})}function nc(){return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:g.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[g.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[g.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),g.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),g.jsx(en,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),g.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}const wA=({fact:a})=>{const{t}=ot(),[r,s]=O.useState(null);if(O.useEffect(()=>{if(!a)return;const d=Math.floor(Math.random()*1e3);s(`https://source.unsplash.com/featured/?${encodeURIComponent(a.imageKeyword)},nature,plant&sig=${d}`);const h=`https://image.pollinations.ai/prompt/${encodeURIComponent("realistic nature photography "+a.imageKeyword)}?nologo=true`;s(h)},[a]),!a)return null;const l=()=>{switch(a.type){case"pest":return g.jsx(Dk,{className:"text-red-500 w-6 h-6"});case"disease":return g.jsx(ov,{className:"text-yellow-500 w-6 h-6"});case"tip":return g.jsx(Zk,{className:"text-yellow-400 w-6 h-6"});default:return g.jsx(en,{className:"text-green-500 w-6 h-6"})}},o=()=>{switch(a.type){case"pest":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"disease":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"tip":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},u=async()=>{const d={title:`Plant AI Daily Tip: ${a.title}`,text:a.content,url:window.location.origin};if(navigator.share)try{await navigator.share(d)}catch{}else navigator.clipboard.writeText(a.content),alert("Copied to clipboard!")};return g.jsxs("div",{className:`mb-6 rounded-xl border p-4 shadow-sm relative overflow-hidden ${o()} transition-all hover:shadow-md`,children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-full shadow-sm",children:g.jsx(en,{className:"text-green-600 w-5 h-5"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("daily_bot_title")||"Plant AI Gnlk Bilgi"}),g.jsx("div",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString()})]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[g.jsxs("div",{className:"w-full md:w-1/3 h-48 md:h-auto relative rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shadow-inner group",children:[r&&g.jsx("img",{src:r,alt:a.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),g.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"AI Generated"})]}),g.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l(),g.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 leading-tight",children:a.title})]}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-4",children:a.content}),g.jsx("div",{className:"mt-auto flex justify-end border-t border-gray-200 dark:border-gray-700/50 pt-3",children:g.jsxs("button",{onClick:u,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[g.jsx(Po,{className:"w-5 h-5"}),g.jsx("span",{className:"text-sm font-medium",children:t("share_generic")||"payla"})]})})]})]})]})},ry="daily_posts",xA=async()=>{const a=new Date().toISOString().split("T")[0];try{const{data:t,error:r}=await ue.from(ry).select("*").eq("date",a).single();if(t)return t;{const l={...await DN("tr"),date:a,created_at:new Date().toISOString(),likes:0,views:0},{data:o,error:u}=await ue.from(ry).insert(l).select().single();if(u)throw u;return o}}catch(t){return console.error("Error fetching/creating daily post:",t),null}};function _A({analysisId:a,onClose:t}){const[r,s]=O.useState(null),[l,o]=O.useState(!0);return O.useEffect(()=>{async function u(){try{const{data:d,error:h}=await ue.from("analyses").select("*, analysis_updates(*)").eq("id",a).single();d&&s({...d,plantType:d.plant_type,mainImage:d.main_image,macroImage:d.macro_image,updates:(d.analysis_updates||[]).map(m=>({imageUrl:m.image_url,note:m.note,createdAt:{seconds:new Date(m.created_at).getTime()/1e3}})).sort((m,p)=>p.createdAt.seconds-m.createdAt.seconds)})}catch(d){console.error(d)}finally{o(!1)}}u()},[a]),O.useEffect(()=>{const u=d=>{d.key==="Escape"&&t()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t]),l?g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:g.jsx(Tn,{className:"animate-spin text-white w-8 h-8"})}):r?g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t,children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:u=>u.stopPropagation(),children:[g.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:g.jsx(Rn,{className:"w-5 h-5 text-gray-500"})}),g.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:g.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[g.jsx("span",{className:"text-green-600",children:r.plantType})," Diagnosis"]})}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("img",{src:r.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),r.macroImage&&g.jsx("img",{src:r.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[g.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),g.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:r.result.disease_name})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),g.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:g.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((r.result.confidence>1?r.result.confidence:r.result.confidence*100)||80,100)}%`}})}),g.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((r.result.confidence>1?r.result.confidence:r.result.confidence*100)||80),"% Match"]})]})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[g.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:r.result.description})]}),r.result.treatment_steps&&g.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[g.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),g.jsx("ul",{className:"space-y-3",children:r.result.treatment_steps.map((u,d)=>g.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[g.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:d+1}),g.jsx("span",{children:u})]},d))})]}),r.updates&&r.updates.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.updates.map((u,d)=>g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[u.imageUrl&&g.jsx("img",{src:u.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),g.jsx("p",{className:"text-xs text-gray-500 mb-1",children:u.createdAt?.seconds?new Date(u.createdAt.seconds*1e3).toLocaleDateString():""}),g.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:u.note})]},d))})]})]})]})}):null}function SA(){const{t:a}=ot(),{currentUser:t}=yn(),r=qt(),[s,l]=O.useState([]),[o,u]=O.useState(!0),[d,h]=O.useState(!1),[m,p]=O.useState(null),[v,b]=O.useState(null),[w,x]=O.useState(null),[S,A]=O.useState("All"),[T,D]=O.useState(!1),[M,$]=O.useState(""),K=20,L=[{value:"All",labelKey:"community"},...Co].filter(N=>(N.value==="All"?a("community")+" (All)":a(N.labelKey)).toLowerCase().includes(M.toLowerCase()));return O.useEffect(()=>{r.state?.refreshId&&(A("All"),$(""),window.scrollTo(0,0))},[r.state]),O.useEffect(()=>{u(!0),(async()=>{let U=ue.from("posts").select("*");S!=="All"&&(U=U.eq("plant_type",S)),U=U.order("created_at",{ascending:!1}).limit(K);const{data:P,error:H}=await U;if(H)console.error(H);else{const F=P.map(B=>({id:B.id,userId:B.user_id,authorName:B.author_name,userAvatar:B.user_avatar,title:B.title,content:B.content,image:B.image_url,plantType:B.plant_type,relatedAnalysisId:B.related_analysis_id,likes:B.likes||[],comments:B.comments||[],createdAt:{seconds:new Date(B.created_at).getTime()/1e3}}));l(F)}u(!1)})();const E=ue.channel("community_posts").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},U=>{const P=U.new;(S==="All"||P.plant_type===S)&&l(H=>[{id:P.id,userId:P.user_id,authorName:P.author_name,userAvatar:P.user_avatar,title:P.title,content:P.content,image:P.image_url,plantType:P.plant_type,relatedAnalysisId:P.related_analysis_id,likes:P.likes||[],comments:P.comments||[],createdAt:{seconds:new Date(P.created_at).getTime()/1e3}},...H])}).subscribe();return()=>{ue.removeChannel(E)}},[S,r.state?.refreshId]),O.useEffect(()=>{async function N(){const E=await xA();E&&x(E)}N()},[]),g.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:a("community")}),g.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[g.jsxs("div",{className:"relative w-full sm:w-64",children:[g.jsxs("div",{className:"relative",children:[g.jsx(fv,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),g.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:a("select_plant"),value:M,onFocus:()=>D(!0),onChange:N=>{$(N.target.value),D(!0)}}),S!=="All"?g.jsx("button",{onClick:()=>{A("All"),$("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:g.jsx(Rn,{className:"w-4 h-4 text-gray-500"})}):g.jsx(bh,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),T&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),g.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[L.map(N=>g.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{A(N.value),$(N.value==="All"?"":a(N.labelKey)),D(!1)},children:[g.jsx("span",{children:N.value==="All"?a("community"):a(N.labelKey)}),S===N.value&&g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},N.value)),L.length===0&&g.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:a("no_results")||"No results"})]})]})]}),g.jsxs("button",{onClick:()=>{if(!t){alert(a("login_to_post")||"Please login to post.");return}h(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[g.jsx(wE,{className:"w-5 h-5"}),g.jsx("span",{className:"hidden sm:inline",children:a("ask_question")}),g.jsx("span",{className:"sm:hidden",children:a("ask_question")})]})]})]}),o?g.jsx(nc,{}):g.jsxs("div",{className:"space-y-6",children:[w&&g.jsx(wA,{fact:w}),s.length>0?s.map(N=>g.jsx(Ah,{post:N,onViewAnalysis:E=>b(E),onUserClick:E=>{p({id:E,name:N.authorName||"Gardener",avatar:N.userAvatar})}},N.id)):g.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[g.jsx("p",{className:"text-lg mb-2",children:a("no_posts_yet")}),g.jsx("p",{className:"text-sm",children:a("be_the_first")})]})]}),d&&g.jsx(vA,{onClose:()=>h(!1),onPostCreated:()=>{}}),v&&g.jsx(_A,{analysisId:v,onClose:()=>b(null)}),m&&g.jsx(bA,{user:m,onClose:()=>p(null)})]})}function kA(){const{postId:a}=lh(),t=pn(),{t:r}=ot(),{currentUser:s}=yn(),[l,o]=O.useState(null),[u,d]=O.useState(!0),[h,m]=O.useState(null),[p,v]=O.useState(null);O.useEffect(()=>{if(!a)return;d(!0),(async()=>{const{data:S,error:A}=await ue.from("posts").select("*").eq("id",a).single();if(A)console.error("Error fetching post:",A),m(r("error_fetching_post")||"Error loading post"),o(null);else if(S){const T={id:S.id,userId:S.user_id,authorName:S.author_name,userAvatar:S.user_avatar,content:S.content,image:S.image_url,plantType:S.plant_type,relatedAnalysisId:S.related_analysis_id,likes:S.likes||[],comments:S.comments||[],createdAt:{seconds:new Date(S.created_at).getTime()/1e3},title:S.title};if(o(T),m(null),S.user_id){const{data:D}=await ue.from("profiles").select("*").eq("id",S.user_id).single();D&&v({...D,name:D.full_name,avatar:D.avatar_url,photoURL:D.avatar_url})}}else m(r("post_not_found")||"Post not found"),o(null);d(!1)})();const x=ue.channel(`public:posts:id=eq.${a}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts",filter:`id=eq.${a}`},S=>{const A=S.new,T={id:A.id,userId:A.user_id,authorName:A.author_name,userAvatar:A.user_avatar,content:A.content,image:A.image_url,plantType:A.plant_type,relatedAnalysisId:A.related_analysis_id,likes:A.likes||[],comments:A.comments||[],createdAt:{seconds:new Date(A.created_at).getTime()/1e3},title:A.title};o(T)}).subscribe();return()=>{ue.removeChannel(x)}},[a,r]);const b=()=>{t("/community")};return u?g.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:g.jsx(Tn,{className:"w-8 h-8 animate-spin text-green-600"})}):h?g.jsxs("div",{className:"max-w-2xl mx-auto p-4 text-center",children:[g.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 p-4 rounded-lg mb-4",children:h}),g.jsxs("button",{onClick:b,className:"flex items-center gap-2 text-green-600 hover:text-green-700 font-medium mx-auto",children:[g.jsx(th,{className:"w-4 h-4"}),r("back_to_community")||"Back to Community"]})]}):g.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 pb-20 flex flex-col gap-4",children:[g.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[g.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx(th,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),g.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r("back_to_community")||"Toplulua Dn"})]}),l&&g.jsx("div",{className:"w-full",children:g.jsx(Ah,{post:l,isDetailView:!0,onUserClick:w=>t(`/profile/${w}`),authorOverride:p})})]})}function EA({chat:a,currentUser:t}){const[r,s]=O.useState(null),{t:l}=ot(),{addToast:o}=Sa(),u=a.participants.find(b=>b!==t.uid);O.useEffect(()=>{(async()=>{if(u)try{const{data:w}=await ue.from("profiles").select("*").eq("id",u).single();w&&s({...w,name:w.full_name,photoURL:w.avatar_url})}catch(w){console.error("Error fetching user",w)}})()},[u]);const d=r||{name:"Unknown User",photoURL:null},h=async b=>{if(b.preventDefault(),!!window.confirm(l("confirm_delete_chat")||"Delete this chat permanently?"))try{const{error:w}=await ue.from("chats").delete().eq("id",a.id);if(w)throw w;o("Chat deleted","success")}catch(w){console.error("Delete Chat Error",w),o("Failed to delete chat","error")}},{i18n:m}=ot(),p=m.language==="tr"?tc:Zi,v=b=>b?b===" Photo"||b.includes(" Photo")?` ${l("photo")||"Photo"}`:b===" Voice Message"||b.includes(" Voice Message")?` ${l("voice_message")||"Voice Message"}`:b:l("new_conversation")||"Yeni Sohbet";return g.jsxs("div",{className:"relative group",children:[g.jsxs(Zn,{to:`/messages/${a.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[g.jsx("img",{src:d.photoURL||d.avatar||`https://ui-avatars.com/api/?name=${d.name||"User"}`,alt:d.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[g.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:d.name||d.displayName||"Loading..."}),a.updated_at&&g.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:ec(new Date(a.updated_at),{addSuffix:!0,locale:p})})]}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:v(a.last_message)})]})]}),g.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:g.jsx(qi,{className:"w-5 h-5"})})]})}function NA(){const{currentUser:a}=yn(),{t}=ot(),[r,s]=O.useState([]),[l,o]=O.useState(!0);return O.useEffect(()=>{if(!a)return;const u=async()=>{const{data:h}=await ue.from("chats").select("*").contains("participants",[a.uid]).order("updated_at",{ascending:!1});h&&s(h),o(!1)};u();const d=ue.channel("chats_list").on("postgres_changes",{event:"*",schema:"public",table:"chats"},()=>{u()}).subscribe();return()=>{ue.removeChannel(d)}},[a]),l?g.jsx(nc,{}):g.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:t("messages")}),g.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:r.length===0?g.jsx("div",{className:"p-8 text-center text-gray-500",children:t("no_messages")||"No messages yet. Start a conversation!"}):r.map(u=>g.jsx(EA,{chat:u,currentUser:a},u.id))})]})}const jA="modulepreload",AA=function(a){return"/"+a},sy={},TA=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let m=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var u=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");l=m(r.map(p=>{if(p=AA(p),p in sy)return;sy[p]=!0;const v=p.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":jA,v||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),v)return new Promise((x,S)=>{w.addEventListener("load",x),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function Ht(a,t,r,s){return new(r||(r=Promise))((function(l,o){function u(m){try{h(s.next(m))}catch(p){o(p)}}function d(m){try{h(s.throw(m))}catch(p){o(p)}}function h(m){var p;m.done?l(m.value):(p=m.value,p instanceof r?p:new r((function(v){v(p)}))).then(u,d)}h((s=s.apply(a,t||[])).next())}))}class el{constructor(){this.listeners={}}on(t,r,s){if(this.listeners[t]||(this.listeners[t]=new Set),s?.once){const l=(...o)=>{this.un(t,l),r(...o)};return this.listeners[t].add(l),()=>this.un(t,l)}return this.listeners[t].add(r),()=>this.un(t,r)}un(t,r){var s;(s=this.listeners[t])===null||s===void 0||s.delete(r)}once(t,r){return this.on(t,r,{once:!0})}unAll(){this.listeners={}}emit(t,...r){this.listeners[t]&&this.listeners[t].forEach((s=>s(...r)))}}const So={decode:function(a,t){return Ht(this,void 0,void 0,(function*(){const r=new AudioContext({sampleRate:t});try{return yield r.decodeAudioData(a)}finally{r.close()}}))},createBuffer:function(a,t){if(!a||a.length===0)throw new Error("channelData must be a non-empty array");if(t<=0)throw new Error("duration must be greater than 0");if(typeof a[0]=="number"&&(a=[a]),!a[0]||a[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(s){const l=s[0];if(l.some((o=>o>1||o<-1))){const o=l.length;let u=0;for(let d=0;d<o;d++){const h=Math.abs(l[d]);h>u&&(u=h)}for(const d of s)for(let h=0;h<o;h++)d[h]/=u}})(a);const r=a.map((s=>s instanceof Float32Array?s:Float32Array.from(s)));return{duration:t,length:r[0].length,sampleRate:r[0].length/t,numberOfChannels:r.length,getChannelData:s=>{const l=r[s];if(!l)throw new Error(`Channel ${s} not found`);return l},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Xv(a,t){const r=t.xmlns?document.createElementNS(t.xmlns,a):document.createElement(a);for(const[s,l]of Object.entries(t))if(s==="children"&&l)for(const[o,u]of Object.entries(l))u instanceof Node?r.appendChild(u):typeof u=="string"?r.appendChild(document.createTextNode(u)):r.appendChild(Xv(o,u));else s==="style"?Object.assign(r.style,l):s==="textContent"?r.textContent=l:r.setAttribute(s,l.toString());return r}function iy(a,t,r){const s=Xv(a,t||{});return r?.appendChild(s),s}var CA=Object.freeze({__proto__:null,createElement:iy,default:iy});const RA={fetchBlob:function(a,t,r){return Ht(this,void 0,void 0,(function*(){const s=yield fetch(a,r);if(s.status>=400)throw new Error(`Failed to fetch ${a}: ${s.status} (${s.statusText})`);return(function(l,o){Ht(this,void 0,void 0,(function*(){if(!l.body||!l.headers)return;const u=l.body.getReader(),d=Number(l.headers.get("Content-Length"))||0;let h=0;const m=p=>{h+=p?.length||0;const v=Math.round(h/d*100);o(v)};try{for(;;){const p=yield u.read();if(p.done)break;m(p.value)}}catch(p){console.warn("Progress tracking error:",p)}}))})(s.clone(),t),s.blob()}))}};function pt(a){let t=a;const r=new Set;return{get value(){return t},set(s){Object.is(t,s)||(t=s,r.forEach((l=>l(t))))},update(s){this.set(s(t))},subscribe:s=>(r.add(s),()=>r.delete(s))}}function _r(a,t){const r=pt(a());return t.forEach((s=>s.subscribe((()=>{const l=a();Object.is(r.value,l)||r.set(l)})))),{get value(){return r.value},subscribe:s=>r.subscribe(s)}}function Xa(a,t){let r;const s=()=>{r&&(r(),r=void 0),r=a()},l=t.map((o=>o.subscribe(s)));return s(),()=>{r&&(r(),r=void 0),l.forEach((o=>o()))}}class OA extends el{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(t){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=pt(!1),this._currentTime=pt(0),this._duration=pt(0),this._volume=pt(this.media.volume),this._muted=pt(this.media.muted),this._playbackRate=pt(this.media.playbackRate||1),this._seeking=pt(!1),this.setupReactiveMediaEvents(),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(t,r,s){return this.media.addEventListener(t,r,s),()=>this.media.removeEventListener(t,r,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,r){const s=this.getSrc();if(t&&s===t)return;this.revokeSrc();const l=r instanceof Blob&&(this.canPlayType(r.type)||!t)?URL.createObjectURL(r):t;if(s&&this.media.removeAttribute("src"),l||t)try{this.media.src=l}catch{this.media.src=t}}destroy(){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(t){this.reactiveMediaEventCleanups.forEach((r=>r())),this.reactiveMediaEventCleanups=[],this.media=t,this.setupReactiveMediaEvents()}play(){return Ht(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&t.name==="AbortError")return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,r){r!=null&&(this.media.preservesPitch=r),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function MA({maxTop:a,maxBottom:t,halfHeight:r,vScale:s,barMinHeight:l=0,barAlign:o}){let u=Math.round(a*r*s),d=u+Math.round(t*r*s)||1;return d<l&&(d=l,o||(u=d/2)),{topHeight:u,totalHeight:d}}function DA({barAlign:a,halfHeight:t,topHeight:r,totalHeight:s,canvasHeight:l}){return a==="top"?0:a==="bottom"?l-s:t-r}function ly(a,t,r){const s=t-a.left,l=r-a.top;return[s/a.width,l/a.height]}function Qv(a){return!!(a.barWidth||a.barGap||a.barAlign)}function oy(a,t){if(!Qv(t))return a;const r=t.barWidth||.5,s=r+(t.barGap||r/2);return s===0?a:Math.floor(a/s)*s}function cy({scrollLeft:a,totalWidth:t,numCanvases:r}){if(t===0)return[0];const s=a/t,l=Math.floor(s*r);return[l-1,l,l+1]}function Jv(a){const t=a._cleanup;typeof t=="function"&&t()}function UA(a){const t=pt({scrollLeft:a.scrollLeft,scrollWidth:a.scrollWidth,clientWidth:a.clientWidth}),r=_r((()=>(function(o){const{scrollLeft:u,scrollWidth:d,clientWidth:h}=o;if(d===0)return{startX:0,endX:1};const m=u/d,p=(u+h)/d;return{startX:Math.max(0,Math.min(1,m)),endX:Math.max(0,Math.min(1,p))}})(t.value)),[t]),s=_r((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(t.value)),[t]),l=()=>{t.set({scrollLeft:a.scrollLeft,scrollWidth:a.scrollWidth,clientWidth:a.clientWidth})};return a.addEventListener("scroll",l,{passive:!0}),{scrollData:t,percentages:r,bounds:s,cleanup:()=>{a.removeEventListener("scroll",l),Jv(t)}}}class LA extends el{constructor(t,r){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=t;const s=this.parentFromOptionsContainer(t.container);this.parent=s;const[l,o]=this.initHtml();s.appendChild(l),this.container=l,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),r&&o.appendChild(r),this.initEvents()}parentFromOptionsContainer(t){let r;if(typeof t=="string"?r=document.querySelector(t):t instanceof HTMLElement&&(r=t),!r)throw new Error("Container not found");return r}initEvents(){this.wrapper.addEventListener("click",(r=>{const s=this.wrapper.getBoundingClientRect(),[l,o]=ly(s,r.clientX,r.clientY);this.emit("click",l,o)})),this.wrapper.addEventListener("dblclick",(r=>{const s=this.wrapper.getBoundingClientRect(),[l,o]=ly(s,r.clientX,r.clientY);this.emit("dblclick",l,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=UA(this.scrollContainer);const t=Xa((()=>{const{startX:r,endX:s}=this.scrollStream.percentages.value,{left:l,right:o}=this.scrollStream.bounds.value;this.emit("scroll",r,s,l,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(t),typeof ResizeObserver=="function"){const r=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{r().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(r,s={}){const{threshold:l=3,mouseButton:o=0,touchDelay:u=100}=s,d=pt(null),h=new Map,m=matchMedia("(pointer: coarse)").matches;let p=()=>{};const v=b=>{if(b.button!==o||(h.set(b.pointerId,b),h.size>1))return;let w=b.clientX,x=b.clientY,S=!1;const A=Date.now(),T=r.getBoundingClientRect(),{left:D,top:M}=T,$=E=>{if(E.defaultPrevented||h.size>1||m&&Date.now()-A<u)return;const U=E.clientX,P=E.clientY,H=U-w,F=P-x;(S||Math.abs(H)>l||Math.abs(F)>l)&&(E.preventDefault(),E.stopPropagation(),S||(d.set({type:"start",x:w-D,y:x-M}),S=!0),d.set({type:"move",x:U-D,y:P-M,deltaX:H,deltaY:F}),w=U,x=P)},K=E=>{if(h.delete(E.pointerId),S){const U=E.clientX,P=E.clientY;d.set({type:"end",x:U-D,y:P-M})}p()},R=E=>{h.delete(E.pointerId),E.relatedTarget&&E.relatedTarget!==document.documentElement||K(E)},L=E=>{S&&(E.stopPropagation(),E.preventDefault())},N=E=>{E.defaultPrevented||h.size>1||S&&E.preventDefault()};document.addEventListener("pointermove",$),document.addEventListener("pointerup",K),document.addEventListener("pointerout",R),document.addEventListener("pointercancel",R),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("click",L,{capture:!0}),p=()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",R),document.removeEventListener("pointercancel",R),document.removeEventListener("touchmove",N),setTimeout((()=>{document.removeEventListener("click",L,{capture:!0})}),10)}};return r.addEventListener("pointerdown",v),{signal:d,cleanup:()=>{p(),r.removeEventListener("pointerdown",v),h.clear(),Jv(d)}}})(this.wrapper);const t=Xa((()=>{const r=this.dragStream.signal.value;if(!r)return;const s=this.wrapper.getBoundingClientRect().width,l=(o=r.x/s)<0?0:o>1?1:o;var o;r.type==="start"?(this.isDragging=!0,this.emit("dragstart",l)):r.type==="move"?this.emit("drag",l):r.type==="end"&&(this.isDragging=!1,this.emit("dragend",l))}),[this.dragStream.signal]);this.subscriptions.push(t)}initHtml(){const t=document.createElement("div"),r=t.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return r.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,r]}setOptions(t){if(this.options.container!==t.container){const r=this.parentFromOptionsContainer(t.container);r.appendChild(this.container),this.parent=r}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:r}=this.scrollContainer,s=r*t;this.setScroll(s)}destroy(){var t;this.subscriptions.forEach((r=>r())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach((r=>r())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(t=10){let r,s;const l=()=>{r&&(clearTimeout(r),r=void 0),s&&(s(),s=void 0)};return this.timeouts.push(l),()=>new Promise(((o,u)=>{l(),s=u,r=setTimeout((()=>{r=void 0,s=void 0,o()}),t)}))}getHeight(t,r){var s;const l=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:u,parentHeight:d,numberOfChannels:h,defaultHeight:m=128}){if(o==null)return m;const p=Number(o);if(!isNaN(p))return p;if(o==="auto"){const v=d||m;return u?.every((b=>!b.overlay))?v/h:v}return m})({optionsHeight:t,optionsSplitChannels:r,parentHeight:this.parent.clientHeight,numberOfChannels:l,defaultHeight:128})}convertColorValues(t,r){return(function(s,l,o){if(!Array.isArray(s))return s||"";if(s.length===0)return"#999";if(s.length<2)return s[0]||"";const u=document.createElement("canvas"),d=u.getContext("2d"),h=o??u.height*l,m=d.createLinearGradient(0,0,0,h||l),p=1/(s.length-1);return s.forEach(((v,b)=>{m.addColorStop(b*p,v)})),m})(t,this.getPixelRatio(),r?.canvas.height)}getPixelRatio(){return t=window.devicePixelRatio,Math.max(1,t||1);var t}renderBarWaveform(t,r,s,l){const{width:o,height:u}=s.canvas,{halfHeight:d,barWidth:h,barRadius:m,barIndexScale:p,barSpacing:v,barMinHeight:b}=(function({width:x,height:S,length:A,options:T,pixelRatio:D}){const M=S/2,$=T.barWidth?T.barWidth*D:1,K=T.barGap?T.barGap*D:T.barWidth?$/2:0,R=$+K||1;return{halfHeight:M,barWidth:$,barGap:K,barRadius:T.barRadius||0,barMinHeight:T.barMinHeight?T.barMinHeight*D:0,barIndexScale:A>0?x/R/A:0,barSpacing:R}})({width:o,height:u,length:(t[0]||[]).length,options:r,pixelRatio:this.getPixelRatio()}),w=(function({channelData:x,barIndexScale:S,barSpacing:A,barWidth:T,halfHeight:D,vScale:M,canvasHeight:$,barAlign:K,barMinHeight:R}){const L=x[0]||[],N=x[1]||L,E=L.length,U=[];let P=0,H=0,F=0;for(let B=0;B<=E;B++){const X=Math.round(B*S);if(X>P){const{topHeight:W,totalHeight:G}=MA({maxTop:H,maxBottom:F,halfHeight:D,vScale:M,barMinHeight:R,barAlign:K}),Y=DA({barAlign:K,halfHeight:D,topHeight:W,totalHeight:G,canvasHeight:$});U.push({x:P*A,y:Y,width:T,height:G}),P=X,H=0,F=0}const j=Math.abs(L[B]||0),k=Math.abs(N[B]||0);j>H&&(H=j),k>F&&(F=k)}return U})({channelData:t,barIndexScale:p,barSpacing:v,barWidth:h,halfHeight:d,vScale:l,canvasHeight:u,barAlign:r.barAlign,barMinHeight:b});s.beginPath();for(const x of w)m&&"roundRect"in s?s.roundRect(x.x,x.y,x.width,x.height,m):s.rect(x.x,x.y,x.width,x.height);s.fill(),s.closePath()}renderLineWaveform(t,r,s,l){const{width:o,height:u}=s.canvas,d=(function({channelData:h,width:m,height:p,vScale:v}){const b=p/2,w=h[0]||[];return[w,h[1]||w].map(((x,S)=>{const A=x.length,T=A?m/A:0,D=b,M=S===0?-1:1,$=[{x:0,y:D}];let K=0,R=0;for(let L=0;L<=A;L++){const N=Math.round(L*T);if(N>K){const U=D+(Math.round(R*b*v)||1)*M;$.push({x:K,y:U}),K=N,R=0}const E=Math.abs(x[L]||0);E>R&&(R=E)}return $.push({x:K,y:D}),$}))})({channelData:t,width:o,height:u,vScale:l});s.beginPath();for(const h of d)if(h.length){s.moveTo(h[0].x,h[0].y);for(let m=1;m<h.length;m++){const p=h[m];s.lineTo(p.x,p.y)}}s.fill(),s.closePath()}renderWaveform(t,r,s){if(s.fillStyle=this.convertColorValues(r.waveColor,s),r.renderFunction)return void r.renderFunction(t,s);const l=(function({channelData:o,barHeight:u,normalize:d,maxPeak:h}){var m;const p=u||1;if(!d)return p;const v=o[0];if(!v||v.length===0)return p;let b=h??0;if(!h)for(let w=0;w<v.length;w++){const x=(m=v[w])!==null&&m!==void 0?m:0,S=Math.abs(x);S>b&&(b=S)}return b?p/b:p})({channelData:t,barHeight:r.barHeight,normalize:r.normalize,maxPeak:r.maxPeak});Qv(r)?this.renderBarWaveform(t,r,s,l):this.renderLineWaveform(t,r,s,l)}renderSingleCanvas(t,r,s,l,o,u,d){const h=this.getPixelRatio(),m=document.createElement("canvas");m.width=Math.round(s*h),m.height=Math.round(l*h),m.style.width=`${s}px`,m.style.height=`${l}px`,m.style.left=`${Math.round(o)}px`,u.appendChild(m);const p=m.getContext("2d");if(r.renderFunction?(p.fillStyle=this.convertColorValues(r.waveColor,p),r.renderFunction(t,p)):this.renderWaveform(t,r,p),m.width>0&&m.height>0){const v=m.cloneNode(),b=v.getContext("2d");b.drawImage(m,0,0),b.globalCompositeOperation="source-in",b.fillStyle=this.convertColorValues(r.progressColor,b),b.fillRect(0,0,m.width,m.height),d.appendChild(v)}}renderMultiCanvas(t,r,s,l,o,u){const d=this.getPixelRatio(),{clientWidth:h}=this.scrollContainer,m=s/d,p=(function({clientWidth:x,totalWidth:S,options:A}){return oy(Math.min(8e3,x,S),A)})({clientWidth:h,totalWidth:m,options:r});let v={};if(p===0)return;const b=x=>{if(x<0||x>=w||v[x])return;v[x]=!0;const S=x*p;let A=Math.min(m-S,p);if(A=oy(A,r),A<=0)return;const T=(function({channelData:D,offset:M,clampedWidth:$,totalWidth:K}){return D.map((R=>{const L=Math.floor(M/K*R.length),N=Math.floor((M+$)/K*R.length);return R.slice(L,N)}))})({channelData:t,offset:S,clampedWidth:A,totalWidth:m});this.renderSingleCanvas(T,r,A,l,S,o,u)},w=Math.ceil(m/p);if(!this.isScrollable){for(let x=0;x<w;x++)b(x);return}if(cy({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:m,numCanvases:w}).forEach((x=>b(x))),w>1){const x=this.on("scroll",(()=>{const{scrollLeft:S}=this.scrollContainer;Object.keys(v).length>10&&(o.innerHTML="",u.innerHTML="",v={}),cy({scrollLeft:S,totalWidth:m,numCanvases:w}).forEach((A=>b(A)))}));this.unsubscribeOnScroll.push(x)}}renderChannel(t,r,s,l){var{overlay:o}=r,u=(function(p,v){var b={};for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&v.indexOf(w)<0&&(b[w]=p[w]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(w=Object.getOwnPropertySymbols(p);x<w.length;x++)v.indexOf(w[x])<0&&Object.prototype.propertyIsEnumerable.call(p,w[x])&&(b[w[x]]=p[w[x]])}return b})(r,["overlay"]);const d=document.createElement("div"),h=this.getHeight(u.height,u.splitChannels);d.style.height=`${h}px`,o&&l>0&&(d.style.marginTop=`-${h}px`),this.canvasWrapper.style.minHeight=`${h}px`,this.canvasWrapper.appendChild(d);const m=d.cloneNode();this.progressWrapper.appendChild(m),this.renderMultiCanvas(t,u,s,h,d,m)}render(t){return Ht(this,void 0,void 0,(function*(){var r;this.timeouts.forEach((m=>m())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),l=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:u,useParentWidth:d,width:h}=(function({duration:m,minPxPerSec:p=0,parentWidth:v,fillParent:b,pixelRatio:w}){const x=Math.ceil(m*p),S=x>v,A=!!(b&&!S);return{scrollWidth:x,isScrollable:S,useParentWidth:A,width:(A?v:x)*w}})({duration:t.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:l,fillParent:this.options.fillParent,pixelRatio:s});if(this.isScrollable=u,this.wrapper.style.width=d?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let m=0;m<t.numberOfChannels;m++){const p=Object.assign(Object.assign({},this.options),(r=this.options.splitChannels)===null||r===void 0?void 0:r[m]);this.renderChannel([t.getChannelData(m)],p,h,m)}else{const m=[t.getChannelData(0)];t.numberOfChannels>1&&m.push(t.getChannelData(1)),this.renderChannel(m,this.options,h,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((s=>s())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:s}=this.progressWrapper.getBoundingClientRect(),l=(function(o){const u=2*o;return(u<0?Math.floor(u):Math.ceil(u))/2})(s-r);this.scrollContainer.scrollLeft+=l}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,r=!1){const{scrollLeft:s,scrollWidth:l,clientWidth:o}=this.scrollContainer,u=t*l,d=s,h=s+o,m=o/2;if(this.isDragging)u+30>h?this.scrollContainer.scrollLeft+=30:u-30<d&&(this.scrollContainer.scrollLeft-=30);else{(u<d||u>h)&&(this.scrollContainer.scrollLeft=u-(this.options.autoCenter?m:0));const p=u-s-m;r&&this.options.autoCenter&&p>0&&(this.scrollContainer.scrollLeft+=p)}}renderProgress(t,r){if(isNaN(t))return;const s=100*t;this.canvasWrapper.style.clipPath=`polygon(${s}% 0%, 100% 0%, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(t,r)}exportImage(t,r,s){return Ht(this,void 0,void 0,(function*(){const l=this.canvasWrapper.querySelectorAll("canvas");if(!l.length)throw new Error("No waveform data");if(s==="dataURL"){const o=Array.from(l).map((u=>u.toDataURL(t,r)));return Promise.resolve(o)}return Promise.all(Array.from(l).map((o=>new Promise(((u,d)=>{o.toBlob((h=>{h?u(h):d(new Error("Could not export image"))}),t,r)})))))}))}}class zA extends el{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(t))};t()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class zd extends el{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Ht(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then((r=>{if(r.status>=400)throw new Error(`Failed to fetch ${t}: ${r.status} (${r.statusText})`);return r.arrayBuffer()})).then((r=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(r))).then((r=>{this.currentSrc===t&&(this.buffer=r,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((r=>{console.error("WebAudioPlayer load error:",r)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Ht(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const r=t-this.currentTime,s=this.bufferNode;s?.stop(this.audioContext.currentTime+r),s?.addEventListener("ended",(()=>{s===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(t){return Ht(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const r=!this.paused;r&&this._pause(),this.playedDuration=t/this._playbackRate,r&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,r;return(t=this._duration)!==null&&t!==void 0?t:((r=this.buffer)===null||r===void 0?void 0:r.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const r=this.buffer.numberOfChannels;for(let s=0;s<r;s++)t.push(this.buffer.getChannelData(s));return t}removeAttribute(t){switch(t){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const $A={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Vi extends OA{static create(t){return new Vi(t)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(t){const r=t.media||(t.backend==="WebAudio"?new zd:void 0);super({media:r,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},$A,t);const{state:s,actions:l}=(function(d){var h,m,p,v,b,w;const x=(h=d?.currentTime)!==null&&h!==void 0?h:pt(0),S=(m=d?.duration)!==null&&m!==void 0?m:pt(0),A=(p=d?.isPlaying)!==null&&p!==void 0?p:pt(!1),T=(v=d?.isSeeking)!==null&&v!==void 0?v:pt(!1),D=(b=d?.volume)!==null&&b!==void 0?b:pt(1),M=(w=d?.playbackRate)!==null&&w!==void 0?w:pt(1),$=pt(null),K=pt(null),R=pt(""),L=pt(0),N=pt(0),E=_r((()=>!A.value),[A]),U=_r((()=>$.value!==null),[$]),P=_r((()=>U.value&&S.value>0),[U,S]),H=_r((()=>x.value),[x]),F=_r((()=>S.value>0?x.value/S.value:0),[x,S]);return{state:{currentTime:x,duration:S,isPlaying:A,isPaused:E,isSeeking:T,volume:D,playbackRate:M,audioBuffer:$,peaks:K,url:R,zoom:L,scrollPosition:N,canPlay:U,isReady:P,progress:H,progressPercent:F},actions:{setCurrentTime:B=>{const X=Math.max(0,Math.min(S.value||1/0,B));x.set(X)},setDuration:B=>{S.set(Math.max(0,B))},setPlaying:B=>{A.set(B)},setSeeking:B=>{T.set(B)},setVolume:B=>{const X=Math.max(0,Math.min(1,B));D.set(X)},setPlaybackRate:B=>{const X=Math.max(.1,Math.min(16,B));M.set(X)},setAudioBuffer:B=>{$.set(B),B&&S.set(B.duration)},setPeaks:B=>{K.set(B)},setUrl:B=>{R.set(B)},setZoom:B=>{L.set(Math.max(0,B))},setScrollPosition:B=>{N.set(Math.max(0,B))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=s,this.wavesurferActions=l,this.timer=new zA;const o=r?void 0:this.getMediaElement();this.renderer=new LA(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const u=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:d,duration:h}=this.options;(u||d&&h)&&this.load(u,d,h).catch((m=>{this.emit("error",m instanceof Error?m:new Error(String(m)))}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(t,r){const s=[];s.push(Xa((()=>{const u=t.isPlaying.value;r.emit(u?"play":"pause")}),[t.isPlaying])),s.push(Xa((()=>{const u=t.currentTime.value;r.emit("timeupdate",u),t.isPlaying.value&&r.emit("audioprocess",u)}),[t.currentTime,t.isPlaying])),s.push(Xa((()=>{t.isSeeking.value&&r.emit("seeking",t.currentTime.value)}),[t.isSeeking,t.currentTime]));let l=!1;s.push(Xa((()=>{t.isReady.value&&!l&&(l=!0,r.emit("ready",t.duration.value))}),[t.isReady,t.duration]));let o=!1;return s.push(Xa((()=>{const u=t.isPlaying.value,d=t.currentTime.value,h=t.duration.value,m=h>0&&d>=h;o&&!u&&m&&r.emit("finish"),o=u&&m}),[t.isPlaying,t.currentTime,t.duration])),s.push(Xa((()=>{const u=t.zoom.value;u>0&&r.emit("zoom",u)}),[t.zoom])),()=>{s.forEach((u=>u()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,r)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,r))})),this.renderer.on("dblclick",((t,r)=>{this.emit("dblclick",t,r)})),this.renderer.on("scroll",((t,r,s,l)=>{const o=this.getDuration();this.emit("scroll",t*o,r*o,s,l)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let t;const r=this.renderer.on("drag",(s=>{var l;if(!this.options.interact)return;this.renderer.renderProgress(s),clearTimeout(t);let o=0;const u=this.options.dragToSeek;this.isPlaying()?o=0:u===!0?o=200:u&&typeof u=="object"&&(o=(l=u.debounceTime)!==null&&l!==void 0?l:200),t=setTimeout((()=>{this.seekTo(s)}),o),this.emit("interaction",s*this.getDuration()),this.emit("drag",s)}));this.subscriptions.push((()=>{clearTimeout(t),r()}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((r=>{this.registerPlugin(r)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=So.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=So.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const r=t.once("destroy",(()=>{this.plugins=this.plugins.filter((s=>s!==t)),this.subscriptions=this.subscriptions.filter((s=>s!==r))}));return this.subscriptions.push(r),t}unregisterPlugin(t){this.plugins=this.plugins.filter((r=>r!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const r=t/this.getDuration();this.renderer.setScrollPercentage(r)}getActivePlugins(){return this.plugins}loadAudio(t,r,s,l){return Ht(this,void 0,void 0,(function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!r&&!s){const d=this.options.fetchParams||{};window.AbortController&&!d.signal&&(this.abortController=new AbortController,d.signal=this.abortController.signal);const h=p=>this.emit("loading",p);r=yield RA.fetchBlob(t,h,d);const m=this.options.blobMimeType;m&&(r=new Blob([r],{type:m}))}this.setSrc(t,r);const u=yield new Promise((d=>{const h=l||this.getDuration();h?d(h):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>d(this.getDuration())),{once:!0}))}));if(!t&&!r){const d=this.getMediaElement();d instanceof zd&&(d.duration=u)}if(s)this.decodedData=So.createBuffer(s,u||0);else if(r){const d=yield r.arrayBuffer();this.decodedData=yield So.decode(d,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,r,s){return Ht(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,r,s)}catch(l){throw this.emit("error",l),l}}))}loadBlob(t,r,s){return Ht(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,r,s)}catch(l){throw this.emit("error",l),l}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:r=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const l=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let u=0;u<l;u++){const d=this.decodedData.getChannelData(u),h=[],m=d.length/r;for(let p=0;p<r;p++){const v=d.slice(Math.floor(p*m),Math.ceil((p+1)*m));let b=0;for(let w=0;w<v.length;w++){const x=v[w];Math.abs(x)>Math.abs(b)&&(b=x)}h.push(Math.round(b*s)/s)}o.push(h)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const r=this.getDuration()*t;this.setTime(r)}play(t,r){const s=Object.create(null,{play:{get:()=>super.play}});return Ht(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const l=yield s.play.call(this);return r!=null&&(this.media instanceof zd?this.media.stopAt(r):this.stopAtPosition=r),l}))}playPause(){return Ht(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Ht(this,arguments,void 0,(function*(t="image/png",r=1,s="dataURL"){return this.renderer.exportImage(t,r,s)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((r=>r.destroy())),this.subscriptions.forEach((r=>r())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((r=>r())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Vi.BasePlugin=class extends el{constructor(a){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=a}onInit(){}_init(a){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=a,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((a=>a())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},Vi.dom=CA;const PA=a=>new Promise((t,r)=>{const s=new FileReader;s.onloadend=()=>t(s.result),s.onerror=r,s.readAsDataURL(a)}),BA=({src:a,isMine:t,messageId:r})=>{const s=O.useRef(null),l=O.useRef(null),[o,u]=O.useState(!1),[d,h]=O.useState(0),[m,p]=O.useState(0);O.useEffect(()=>{if(s.current)return l.current&&l.current.destroy(),l.current=Vi.create({container:s.current,waveColor:t?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:t?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:a}),l.current.on("play",()=>u(!0)),l.current.on("pause",()=>u(!1)),l.current.on("timeupdate",w=>p(w)),l.current.on("ready",w=>h(w)),l.current.on("finish",()=>u(!1)),()=>{l.current&&l.current.destroy()}},[a,t]);const v=()=>{l.current&&l.current.playPause()},b=w=>{if(!w)return"0:00";const x=Math.floor(w/60),S=Math.floor(w%60);return`${x}:${S<10?"0":""}${S}`};return g.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[g.jsx("button",{onClick:v,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${t?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?g.jsx(mE,{className:"w-5 h-5 fill-current"}):g.jsx(vE,{className:"w-5 h-5 fill-current ml-0.5"})}),g.jsx("div",{className:"flex-1 overflow-hidden relative",ref:s}),g.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${t?"text-green-100":"text-gray-500"}`,children:b(o?m:d)})]})};function IA(){const{chatId:a}=lh(),{currentUser:t}=yn(),{t:r,i18n:s}=ot(),l=pn(),o=O.useRef(null),u=O.useRef(null),{addToast:d}=Sa();O.useEffect(()=>{t||l("/login")},[t,l]);const[h,m]=O.useState([]),[p,v]=O.useState(""),[b,w]=O.useState(!0),[x,S]=O.useState(null),[A,T]=O.useState(null),[D,M]=O.useState(null),[$,K]=O.useState(!1),[R,L]=O.useState(null),[N,E]=O.useState(0),[U,P]=O.useState(null),[H,F]=O.useState(!1),[B,X]=O.useState(null),j=qt(),[k,W]=O.useState(j.state?.targetUser||null),[G,Y]=O.useState(a==="new"?null:a);O.useEffect(()=>{a!=="new"&&Y(a)},[a]),O.useEffect(()=>{a==="new"&&k&&t&&(async()=>{try{S(k);const ge=query(collection(db,"chats"),where("participants","array-contains",t.uid)),ve=(await getDocs(ge)).docs.find(fe=>fe.data().participants.includes(k.uid));ve?(Y(ve.id),l(`/messages/${ve.id}`,{replace:!0})):w(!1)}catch(ge){console.warn("Error checking existing chats:",ge)}})()},[a,k,t]),O.useEffect(()=>{if(a==="new"){w(!1);return}if(!G||!t)return;w(!0),(async()=>{const{data:je,error:ve}=await ue.from("messages").select("*").eq("chat_id",G).order("created_at",{ascending:!0});je&&m(je.map(fe=>({...fe,createdAt:{seconds:new Date(fe.created_at).getTime()/1e3},editedAt:fe.edited_at?{seconds:new Date(fe.edited_at).getTime()/1e3}:null,fileUrl:fe.file_url,fileName:fe.file_name,senderId:fe.sender_id}))),w(!1),setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)})();const ge=ue.channel(`chat:${G}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{const ve=je.new;m(fe=>[...fe,{...ve,createdAt:{seconds:new Date(ve.created_at).getTime()/1e3},fileUrl:ve.file_url,fileName:ve.file_name,senderId:ve.sender_id}]),setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{m(ve=>ve.filter(fe=>fe.id!==je.old.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${G}`},je=>{const ve=je.new;m(fe=>fe.map(Ze=>Ze.id===ve.id?{...ve,createdAt:{seconds:new Date(ve.created_at).getTime()/1e3},editedAt:ve.edited_at?{seconds:new Date(ve.edited_at).getTime()/1e3}:null,text:ve.text}:Ze))}).subscribe();return()=>{ue.removeChannel(ge)}},[G,t,a,l]),O.useEffect(()=>{if(!A)return;const de=onSnapshot(doc(db,"users",A),ge=>{if(ge.exists()){const je=ge.data();S(ve=>({...ve,...je}))}});return()=>de()},[A]);const z=async(de,ge=null,je=null,ve="text")=>{F(!0);try{let fe=G;if(!fe&&a==="new"){if(!k)throw new Error("Target user missing");const{startChat:Pe}=await TA(async()=>{const{startChat:tn}=await Promise.resolve().then(()=>LN);return{startChat:tn}},[]);fe=await Pe(t.uid,k.uid,{name:k.name,avatar:k.photoURL},{name:t.displayName,avatar:t.photoURL}),Y(fe),window.history.replaceState(null,"",`/messages/${fe}`)}let Ze=null,st=ve,vn=je;if(ge||U){let Pe=ge||U.file;if(st==="image"||U?.type==="image"){st="image",vn=vn||U?.file.name;const tn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{Pe=await _t(Pe,tn)}catch(yt){console.warn("Compression failed, using original",yt)}}else U&&(st=U.type,vn=U.file.name);if(Ze=await PA(Pe),Ze.length>95e4)throw new Error("File is too large for database storage even after compression.")}if(D){const{error:Pe}=await ue.from("messages").update({text:de,edited_at:new Date().toISOString()}).eq("id",D);if(Pe)throw Pe;M(null)}else{const{error:Pe}=await ue.from("messages").insert({chat_id:fe,text:de||"",type:st,file_url:Ze,file_name:vn,sender_id:t.uid});if(Pe)throw Pe;await ue.from("chats").update({last_message:st==="audio"?" Voice Message":st==="image"?" Photo":de||" File",updated_at:new Date().toISOString()}).eq("id",fe)}v(""),P(null)}catch(fe){console.error("Send failed",fe),d(fe.message||"Failed to send message","error")}finally{F(!1)}},I=async de=>{de.preventDefault(),!(!p.trim()&&!U)&&await z(p)},J=async de=>{if(window.confirm("Delete this message?"))try{const{error:ge}=await ue.from("messages").delete().eq("id",de);if(ge)throw ge;d("Message deleted","success")}catch(ge){console.error("Delete failed",ge),d("Could not delete message","error")}},ee=s.language==="tr"?tc:Zi,Z=de=>{if(!de?.lastSeen)return"Offline";const ge=de.lastSeen.seconds*1e3;return Date.now()-ge<180*1e3?"Online":`${r("last_seen")||"Last seen"} ${ec(new Date(ge),{addSuffix:!0,locale:ee})}`},oe=de=>de?.lastSeen?Date.now()-de.lastSeen.seconds*1e3<180*1e3:!1,pe=de=>de?new Date(de.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Ee=de=>{const ge=de.target.files[0];if(!ge)return;if(ge.size>10*1024*1024){d("File too large (Max 10MB)","error");return}const je=ge.type.startsWith("image/")?"image":"file",ve=je==="image"?URL.createObjectURL(ge):null;P({file:ge,type:je,previewUrl:ve})},ce=de=>{v(de.text||""),M(de.id),P(null),u.current&&(u.current.value="")},he=()=>{M(null),v(""),P(null)},Re=O.useRef("cancel"),ze=O.useRef(null),Te=O.useRef(null),Ke=O.useRef(null),[He,tt]=O.useState(0);O.useEffect(()=>{let de;return $?(E(0),de=setInterval(()=>E(ge=>ge+1),1e3)):(E(0),tt(0)),()=>{clearInterval(de),Ke.current&&cancelAnimationFrame(Ke.current),ze.current&&ze.current.close()}},[$]);const Fe=()=>{if(!Te.current)return;const de=new Uint8Array(Te.current.fftSize);Te.current.getByteTimeDomainData(de);let ge=0;for(let ve=0;ve<de.length;ve++)ge+=Math.abs(de[ve]-128);const je=ge/de.length;tt(je*10),Ke.current=requestAnimationFrame(Fe)},Ge=async()=>{try{const de=await navigator.mediaDevices.getUserMedia({audio:!0}),ge=new(window.AudioContext||window.webkitAudioContext);await ge.resume();const je=ge.createAnalyser();ge.createMediaStreamSource(de).connect(je),je.fftSize=256,ze.current=ge,Te.current=je,Fe();const fe=new MediaRecorder(de),Ze=[];fe.ondataavailable=st=>Ze.push(st.data),fe.onstop=async()=>{if(de.getTracks().forEach(st=>st.stop()),ze.current&&ze.current.close(),Ke.current&&cancelAnimationFrame(Ke.current),Re.current==="send"){const st=new Blob(Ze,{type:"audio/webm"});await z(null,st,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},fe.start(),L(fe),K(!0),Re.current="cancel"}catch(de){console.error("Mic error:",de),d(r("mic_error")||"Microphone error","error")}},rt=de=>{!R||R.state==="inactive"||(Re.current=de,R.stop(),K(!1))};return g.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[b&&g.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),g.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[g.jsx("button",{onClick:()=>l("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:g.jsx(th,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),x?g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name||"User"}`,alt:x.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:x.name||x.displayName||"User"}),g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsx("span",{className:`w-2 h-2 rounded-full ${oe(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:Z(x)})]})]})]}):g.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[h.map(de=>{const ge=de.senderId===t.uid,je=de.type==="audio",ve=de.type==="image",fe=de.type==="file";return g.jsxs("div",{className:`flex flex-col ${ge?"items-end":"items-start"} group`,children:[g.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${ge?"flex-row-reverse":"flex-row"}`,children:[g.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${ge?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${je?"min-w-[150px]":""}`,children:[ve&&g.jsx("a",{href:de.fileUrl,target:"_blank",rel:"noopener noreferrer",children:g.jsx("img",{src:de.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),je&&g.jsx(BA,{src:de.fileUrl,isMine:ge,messageId:de.id}),fe&&g.jsxs("a",{href:de.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[g.jsx(R0,{className:"w-4 h-4"}),g.jsx("span",{className:"truncate max-w-[150px]",children:de.fileName||"File"})]}),de.text&&g.jsx("p",{className:"whitespace-pre-wrap",children:de.text}),de.editedAt&&g.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${ge?"text-green-100":"text-gray-400"}`,children:["(",r("edited")||"Edited"," ",pe(de.editedAt),")"]})]}),ge&&g.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>ce(de),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:g.jsx(uv,{className:"w-3 h-3"})}),g.jsx("button",{onClick:()=>J(de.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:g.jsx(qi,{className:"w-3 h-3"})})]})]}),g.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:pe(de.createdAt)})]},de.id)}),g.jsx("div",{ref:o})]}),D&&g.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[g.jsx("span",{children:r("editing_message")||"Editing message..."}),g.jsx("button",{onClick:he,children:g.jsx(Rn,{className:"w-4 h-4"})})]}),U&&g.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[U.type==="image"?g.jsx("img",{src:U.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):g.jsx(Kk,{className:"w-8 h-8 text-gray-500"}),g.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:U.file.name})]}),g.jsx("button",{onClick:()=>P(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:g.jsx(Rn,{className:"w-4 h-4 text-gray-500"})})]}),g.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:$?g.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[g.jsx("button",{onClick:()=>rt("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:g.jsx(qi,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[g.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(N*1e3).toISOString().substr(14,5)}),g.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((de,ge)=>{const je=Math.max(0,He-5),ve=Math.min(1,je/40),fe=Math.sin(ge*.5+Date.now()/100)*.2+.8;return g.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,ve*36*fe)}px`,opacity:.5+ve*.5}},ge)})})]}),g.jsx("button",{onClick:()=>rt("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:g.jsx(Hi,{className:"w-5 h-5"})})]}):g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"file",ref:u,onChange:Ee,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),g.jsx("button",{onClick:()=>u.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:D,children:g.jsx(R0,{className:"w-5 h-5"})}),g.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:g.jsx("textarea",{value:p,onChange:de=>v(de.target.value),placeholder:D?r("edit_message_placeholder")||"Edit your message...":r("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),p.trim()||U?g.jsx("button",{onClick:I,disabled:H,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:H?g.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):g.jsx(Hi,{className:"w-5 h-5"})}):g.jsx("button",{onClick:Ge,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:g.jsx(dE,{className:"w-5 h-5"})})]})})]})}const HA=({isOpen:a,onClose:t,title:r,users:s,loading:l,actionLabel:o,onAction:u})=>{const{t:d}=ot(),h=pn();if(!a)return null;const m=p=>{t(),h(`/profile/${p}`)};return g.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t,children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[g.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:r}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:g.jsx(Rn,{className:"w-5 h-5 text-gray-500"})})]}),g.jsx("div",{className:"overflow-y-auto p-4 space-y-3 flex-1",children:l?g.jsx("div",{className:"flex justify-center p-8",children:g.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):s.length===0?g.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[g.jsx(Gi,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),g.jsx("p",{children:d("no_results")})]}):s.map(p=>g.jsxs("div",{onClick:()=>m(p.id),className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl cursor-pointer transition-colors",children:[g.jsx("img",{src:p.photoURL||p.avatar||`https://ui-avatars.com/api/?name=${p.displayName||p.name||"User"}&background=random`,alt:p.displayName||p.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 dark:border-gray-700"}),g.jsx("div",{className:"flex-1 min-w-0",children:g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate",children:p.displayName||p.name||"Unknown User"})}),u&&o&&g.jsx("button",{onClick:v=>{v.stopPropagation(),u(p.id)},className:"text-xs font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors mr-2",children:o}),g.jsx("button",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:d("view_profile")})]},p.id))})]})})};function uy(){const{t:a,i18n:t}=ot(),r=pn(),s=qt(),{currentUser:l,refreshUser:o}=yn(),{addToast:u}=Sa(),{userId:d}=lh(),[h,m]=O.useState(null),[p,v]=O.useState(""),[b,w]=O.useState(""),[x,S]=O.useState(!1),[A,T]=O.useState([]),[D,M]=O.useState(!0),[$,K]=O.useState(!1),[R,L]=O.useState(!1),[N,E]=O.useState({followersCount:0,followingCount:0}),[U,P]=O.useState(!1),[H,F]=O.useState("followers"),[B,X]=O.useState([]),[j,k]=O.useState(!1),W=O.useRef(null),G=!d||l&&d===l.uid,Y=d||l?.uid;O.useEffect(()=>{(async()=>{if(Y){M(!0);try{let he=null;if(G&&l)he=l,m(he),v(he.full_name||he.name||""),w(he.avatar_url||he.avatar||""),E({followersCount:he.followers_count||he.followersCount||0,followingCount:he.following_count||he.followingCount||0});else{const{data:Te,error:Ke}=await ue.from("profiles").select("*").eq("id",Y).single();Te?he={uid:Te.id,...Te,name:Te.full_name,avatar:Te.avatar_url,followersCount:Te.followers_count||0,followingCount:Te.following_count||0}:he={uid:Y,name:"Gardener"},m(he),E({followersCount:he.followersCount||0,followingCount:he.followingCount||0})}const{data:Re}=await ue.from("posts").select("*").eq("user_id",Y).order("created_at",{ascending:!1}),ze=(Re||[]).map(Te=>({id:Te.id,userId:Te.user_id,authorName:Te.author_name,userAvatar:Te.user_avatar,content:Te.content,image:Te.image_url,plantType:Te.plant_type,relatedAnalysisId:Te.related_analysis_id,likes:Te.likes||[],comments:Te.comments||[],createdAt:{seconds:new Date(Te.created_at).getTime()/1e3},title:Te.title}));if(T(ze),l&&!G){const{isFollowing:Te,isRequested:Ke}=await pv(l.uid,Y);K(Te),L(Ke)}}catch(he){console.error("Failed to load profile data",he)}finally{M(!1)}}})()},[Y,G,l,s.state?.refreshId]);const z=async()=>{if(!l){u(a("login_required"),"info");return}if(!x){S(!0);try{$?(await No(l.uid,Y),E(ce=>({...ce,followersCount:Math.max(0,ce.followersCount-1)})),K(!1),L(!1),u(a("unfollowed_user")||"Takipten kld","info")):R?(await vv(l.uid,Y),L(!1),u(a("request_cancelled")||"stek iptal edildi","info")):(await yv(l.uid,{displayName:l.full_name||l.name||"Unknown User",photoURL:l.avatar_url||l.avatar||null},Y),L(!0),u(a("request_sent")||"Takip istei gnderildi","success"))}catch(ce){console.error("Profile Follow Error:",ce),u(a("something_went_wrong")+`: ${ce.message}`,"error")}finally{S(!1)}}},I=async ce=>{F(ce),P(!0),k(!0);try{const he=ce==="followers"?await QE(Y):await JE(Y);X(he)}catch(he){console.error(he)}finally{k(!1)}},J=async ce=>{if(!G)return;const he=ce.target.files[0];if(he){S(!0);try{const ze=await _t(he,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),Te=await new Promise(Ke=>{const He=new FileReader;He.readAsDataURL(ze),He.onload=tt=>Ke(tt.target.result)});await ue.from("profiles").update({avatar_url:Te,updated_at:new Date}).eq("id",l.uid),await ue.auth.updateUser({data:{avatar_url:Te}}),w(Te),rh(l.uid,p,Te),await o(),u(a("profile_updated")||"Profile updated!","success")}catch(Re){console.error(Re),u("Error updating avatar.","error")}finally{S(!1)}}},ee=async ce=>{if(ce.preventDefault(),!!G&&p.trim()){S(!0);try{await ue.from("profiles").update({full_name:p,updated_at:new Date}).eq("id",l.uid),await ue.auth.updateUser({data:{full_name:p}}),rh(l.uid,p,b),await o(),u(a("profile_updated")||"Profile updated!","success")}catch{u("Failed to update profile.","error")}finally{S(!1)}}};if(!Y)return g.jsx("div",{className:"p-10 text-center",children:a("login_required")});if(D&&!h)return g.jsx(nc,{});const Z=ce=>{if(!ce?.last_seen)return!1;const he=new Date(ce.last_seen);return new Date-he<180*1e3},oe=ce=>ce?.last_seen?ec(new Date(ce.last_seen),{addSuffix:!0,locale:t.language==="tr"?tc:Zi}):"Offline",pe=async ce=>{if(confirm(a("confirm_unfollow")||"Takipten kmak istediinize emin misiniz?"))try{await No(l.uid,ce),X(he=>he.filter(Re=>Re.id!==ce)),E(he=>({...he,followingCount:Math.max(0,he.followingCount-1)})),u(a("unfollowed_user")||"Takipten kld","success")}catch(he){console.error(he),u("Error","error")}},Ee=async ce=>{if(confirm(a("confirm_remove_follower")||"Bu takipiyi karmak istediinize emin misiniz?"))try{await No(ce,l.uid),X(he=>he.filter(Re=>Re.id!==ce)),E(he=>({...he,followersCount:Math.max(0,he.followersCount-1)})),u(a("follower_removed")||"Takipi karld","success")}catch(he){console.error(he),u("Error","error")}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:g.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[g.jsx("div",{className:"w-full md:w-1/3",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[g.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[g.jsxs("div",{className:`relative ${G?"group cursor-pointer":""} mt-2`,onClick:()=>G&&W.current?.click(),children:[g.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(G?b:h?.avatar||h?.photoURL)?g.jsx("img",{src:G?b:h?.avatar||h?.photoURL,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:g.jsx("img",{src:`https://ui-avatars.com/api/?name=${G?p||"Gardener":h?.name||h?.displayName||A.length>0&&A[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!G&&h&&g.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${Z(h)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[g.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Z(h)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),Z(h)?"Online":oe(h)]}),G&&g.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Ts,{className:"w-8 h-8 text-white"})}),x&&g.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:g.jsx(Tn,{className:"animate-spin text-green-600"})})]}),G&&g.jsx("input",{type:"file",ref:W,onChange:J,className:"hidden",accept:"image/*"}),g.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:G?p||a("gardener")||"Bahvan":h?.name||h?.displayName||A.length>0&&A[0].authorName||a("gardener")||"Bahvan"}),G&&g.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),G?g.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:a("display_name")}),g.jsx("input",{type:"text",value:p,onChange:ce=>v(ce.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),g.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[x?g.jsx(Tn,{className:"animate-spin w-4 h-4"}):g.jsx(hv,{className:"w-4 h-4"}),g.jsx("span",{children:a("save_changes")})]})]}):g.jsxs("div",{className:"text-center",children:[g.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[a("joined")||"Katlma Tarihi",": ",h?.created_at?new Date(h.created_at).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):a("unknown_date")]}),$&&g.jsxs("button",{onClick:()=>{const ce={uid:h.uid||Y,name:h.name||h.displayName||A.length>0&&A[0].authorName||"Gardener",photoURL:h.photoURL||h.avatar||null};r("/messages/new",{state:{targetUser:ce}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[g.jsx(Ii,{className:"w-5 h-5"}),g.jsx("span",{children:a("send_message")})]})]}),g.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>I("followers"),children:[g.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:N.followersCount}),g.jsx("span",{className:"text-xs text-gray-500 font-medium",children:a("followers")})]}),g.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>I("following"),children:[g.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:N.followingCount}),g.jsx("span",{className:"text-xs text-gray-500 font-medium",children:a("following_count")})]})]}),!G&&g.jsx("div",{className:"flex gap-2 w-full px-6 mb-6",children:g.jsxs("button",{onClick:z,disabled:x,className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${$?"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600":R?"bg-gray-100 text-gray-500 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400":"bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-500/20"}`,children:[x?g.jsx(Tn,{className:"w-4 h-4 animate-spin"}):$?g.jsx(BE,{className:"w-4 h-4"}):R?g.jsx(Jo,{className:"w-4 h-4"}):g.jsx(wh,{className:"w-4 h-4"}),$?a("unfollow"):R?a("requested")||"Requested":a("follow")]})})]})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:g.jsx("span",{children:G?a("my_posts")||"Gnderilerim":a("user_posts_title",{name:h?.name||"Kullanc"})||`${h?.name||"Kullanc"} Gnderileri`})}),D?g.jsx("div",{className:"flex justify-center py-20",children:g.jsx(Tn,{className:"w-8 h-8 animate-spin text-gray-300"})}):A.length>0?g.jsx("div",{className:"columns-1 gap-6 space-y-6",children:A.map(ce=>g.jsx("div",{className:"break-inside-avoid",children:g.jsx(Ah,{post:{...ce,hideAuthor:G},onViewAnalysis:()=>{},onDelete:he=>T(Re=>Re.filter(ze=>ze.id!==he))})},ce.id))}):g.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[g.jsx(ov,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),g.jsx("p",{className:"text-gray-500",children:a("no_posts_yet")})]})]})]})}),g.jsx(HA,{isOpen:U,onClose:()=>P(!1),title:a(H==="followers"?"followers":"following"),users:B,loading:j,actionLabel:G?H==="following"?a("unfollow")||"Takipten kar":a("remove")||"Takipten kar":null,onAction:G?H==="following"?pe:Ee:null})]})}function qA(){const{t:a,i18n:t}=ot(),r={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:en},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:$o},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:U0}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:en},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:$o},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:U0}]}},s=r[t.language]||r.en;return g.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:g.jsx(rv,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),g.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:a("about")}),g.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',s.intro,'"']})]}),g.jsx("div",{className:"space-y-6",children:s.sections.map((l,o)=>{const u=l.icon;return g.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[g.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:g.jsx(u,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:l.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:l.text})]})]},o)})})]})}function GA(){const{t:a}=ot(),{currentUser:t}=yn();pn();const r=qt(),[s,l]=O.useState([]),[o,u]=O.useState(!0),[d,h]=O.useState(null),[m,p]=O.useState(!1),[v,b]=O.useState(null),[w,x]=O.useState(""),[S,A]=O.useState(!1),T=O.useRef(null),D=async(L,N)=>{if(L.stopPropagation(),!!window.confirm(a("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await Tv(N),l(E=>E.filter(U=>U.id!==N))}catch(E){console.error("Delete failed",E),alert("Failed to delete analysis.")}};O.useEffect(()=>{t&&M()},[t,r.state?.refreshId]),O.useEffect(()=>{r.state?.showTreatmentGuide&&(p(!0),window.history.replaceState({},document.title))},[r]);const M=async()=>{u(!0);const L=await Av(t.uid);l(L),u(!1),r.state?.newAnalysisId?h(r.state.newAnalysisId):L.length>0&&r.state?.showTreatmentGuide&&h(L[0].id)},$=L=>{h(N=>N===L?null:L),b(null)},K=async(L,N)=>{if(L.stopPropagation(),!N.isPublic&&window.confirm(a("confirm_share")||"Share this diagnosis with the community?"))try{await Rv(N.id,N,N.plantType||"plant",t.displayName||a("gardener")||"Bahvan",t.photoURL),l(E=>E.map(U=>U.id===N.id?{...U,isPublic:!0}:U))}catch(E){console.error("Share failed",E),alert("Failed to share.")}},R=async L=>{if(w.trim()){A(!0);try{let N=null;if(T.current?.files?.[0]){const E=T.current.files[0];N=await new Promise(U=>{const P=new FileReader;P.onload=H=>U(H.target.result),P.readAsDataURL(E)})}await Ov(L.id,N,w),b(null),x(""),M()}catch(N){console.error("Feedback failed",N),alert("Failed to save update.")}finally{A(!1)}}};return o?g.jsx(nc,{}):s.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[g.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:g.jsx(en,{className:"w-12 h-12 text-green-600"})}),g.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:a("no_analyses_title")||"Henz Bir Analiz Yok"}),g.jsx("p",{className:"mb-8 max-w-md",children:a("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),g.jsxs(Zn,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[g.jsx(Ts,{className:"w-5 h-5"}),a("start_diagnosis")||"Analiz Balat"]})]}):g.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[g.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[g.jsx(yh,{className:"w-7 h-7 text-green-600"}),a("treatment_updates")||"Tedavi & Takip"]}),g.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[s.length," ",a("records")||"Kayt"]})]}),g.jsx("div",{className:"grid gap-6",children:s.map(L=>g.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===L.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[g.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer items-center relative",onClick:()=>$(L.id),children:[g.jsx("img",{src:L.mainImage,alt:L.plantType,className:"w-20 h-20 md:w-28 md:h-28 rounded-2xl object-cover bg-gray-100 shadow-sm shrink-0"}),g.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight break-words",children:L.plantType||"Unknown Plant"}),(L.result.plant_latin_name||L.result.latin_name)&&g.jsxs("p",{className:"text-sm text-gray-500 italic font-medium mt-0.5",children:["(",L.result.plant_latin_name||L.result.latin_name,")"]})]}),g.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0 h-fit mt-1",children:[g.jsx(Jo,{className:"w-3 h-3"}),L.createdAt?.seconds?new Date(L.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),g.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-1 text-sm flex items-center gap-2",children:[g.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse shrink-0"}),g.jsx("span",{className:"break-words line-clamp-2",children:L.result.disease_name})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-bold text-gray-400 mt-2",children:[g.jsx("span",{className:"text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded",children:"7 Gnlk Program"}),L.isPublic&&g.jsxs("span",{className:"text-blue-500 flex items-center gap-1",children:[g.jsx(Po,{className:"w-3 h-3"}),"Paylald"]})]})]})]}),g.jsx(bh,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${d===L.id?"rotate-180":""}`}),d===L.id&&g.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:a("description")}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",children:L.result.description})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[g.jsx(M0,{className:"w-5 h-5 text-green-600"}),L.result.is_treatable===!1?a("prevention_tips")||"Koruyucu nlemler":a("treatment_steps")||"Tedavi Admlar"]}),L.result.is_treatable===!1&&g.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:a("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),g.jsx("div",{className:"space-y-3",children:(L.result.is_treatable===!1?L.result.preventive_measures:L.result.treatment_steps)?.map((N,E)=>g.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[g.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${L.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:E+1}),g.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:N})]},E))})]}),L.updates&&L.updates.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),g.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:L.updates.map((N,E)=>g.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm shrink-0",children:[N.imageUrl&&g.jsx("img",{src:N.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),g.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(N.createdAt?.seconds*1e3).toLocaleDateString()}),g.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:N.note})]},E))})]}),g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex gap-3",children:[L.result.is_treatable&&g.jsxs("button",{onClick:()=>b(v===L.id?null:L.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[g.jsx(Ts,{className:"w-5 h-5"}),a("add_update")||"Gelime Ekle"]}),g.jsxs("button",{onClick:N=>K(N,L),disabled:L.isPublic,className:`flex-1 px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${L.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[g.jsx(Po,{className:"w-5 h-5"}),L.isPublic?a("shared")||"Paylald":a("share")||"Payla"]})]}),g.jsxs("button",{onClick:N=>D(N,L.id),className:"w-full py-3 mt-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[g.jsx(qi,{className:"w-4 h-4"}),a("delete_analysis")||"Analizi Sil"]})]}),v===L.id&&g.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[g.jsx("textarea",{value:w,onChange:N=>x(N.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("input",{type:"file",ref:T,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),g.jsx("button",{onClick:()=>R(L),disabled:S,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:S?g.jsx(Tn,{className:"w-5 h-5 animate-spin"}):g.jsx(Hi,{className:"w-5 h-5"})})]})]})]})]},L.id))}),m&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),g.jsxs("div",{className:"text-center relative z-10",children:[g.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:g.jsx(Hk,{className:"w-10 h-10 text-green-600"})}),g.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),g.jsxs("div",{className:"space-y-4 text-left mb-8",children:[g.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[g.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:g.jsx(M0,{className:"w-5 h-5 text-blue-500"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),g.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),g.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[g.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:g.jsx(Ts,{className:"w-5 h-5 text-purple-500"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),g.jsx("button",{onClick:()=>p(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function KA(){const{isOpen:a,view:t,closeModal:r,toggleView:s}=jh(),{t:l}=ot(),{addToast:o}=Sa(),[u,d]=O.useState(""),[h,m]=O.useState(""),[p,v]=O.useState(""),[b,w]=O.useState(!1),[x,S]=O.useState("");if(!a)return null;const A=async T=>{T.preventDefault(),S(""),w(!0);try{if(t==="login"){const{error:D}=await ue.auth.signInWithPassword({email:u,password:h});if(D)throw D}else{const{data:D,error:M}=await ue.auth.signUp({email:u,password:h,options:{data:{full_name:p,avatar_url:`https://ui-avatars.com/api/?name=${p}&background=random`}}});if(M)throw M;D.user&&!D.session&&o(l("check_email_confirmation")||"Please check your email to confirm your account.","info")}r(),d(""),m(""),v("")}catch(D){console.error(D),D.message.includes("Invalid login credentials")?S(l("error_invalid_credential")||"Hatal e-posta veya ifre"):D.message.includes("User already registered")?S(l("error_email_in_use")||"Bu e-posta zaten kullanmda"):S(D.message||l("error_generic")||"Bir hata olutu")}finally{w(!1)}};return g.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:g.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative animate-slide-up",children:[g.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors z-10",children:g.jsx(Rn,{className:"w-5 h-5"})}),g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t==="login"?l("welcome_back")||"Tekrar Hogeldiniz":l("create_account")||"Hesap Olutur"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t==="login"?l("login_desc")||"Devam etmek iin giri yapn":l("register_desc")||"Toplulua katlmak iin kayt olun"})]}),g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t==="register"&&g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("full_name")}),g.jsxs("div",{className:"relative",children:[g.jsx(Gi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:p,onChange:T=>v(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Ad Soyad"})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("email")}),g.jsxs("div",{className:"relative",children:[g.jsx(cv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"email",required:!0,value:u,onChange:T=>d(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"ornek@email.com"})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:l("password")}),g.jsxs("div",{className:"relative",children:[g.jsx(nE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"password",required:!0,value:h,onChange:T=>m(T.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:""})]})]}),x&&g.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg text-center",children:x}),g.jsx("button",{type:"submit",disabled:b,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20 flex items-center justify-center gap-2",children:b?g.jsx(Tn,{className:"w-5 h-5 animate-spin"}):g.jsxs(g.Fragment,{children:[g.jsx("span",{children:t==="login"?l("login")||"Giri Yap":l("register")||"Kayt Ol"}),g.jsx(vh,{className:"w-4 h-4"})]})})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t==="login"?l("no_account")||"Hesabnz yok mu?":l("already_have_account")||"Zaten hesabnz var m?"," ",g.jsx("button",{onClick:s,className:"font-bold text-green-600 hover:text-green-700 transition-colors",children:t==="login"?l("register_now")||"Hemen Kaydol":l("login_now")||"Giri Yap"})]})})]})]})})}var dy={},FA="@vercel/analytics",VA="1.6.1",YA=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function Zv(){return typeof window<"u"}function eb(){try{const a="production"}catch{}return"production"}function WA(a="auto"){if(a==="auto"){window.vam=eb();return}window.vam=a}function XA(){return(Zv()?window.vam:eb())||"production"}function sh(){return XA()==="development"}function QA(a){return a.scriptSrc?a.scriptSrc:sh()?"https://va.vercel-scripts.com/v1/script.debug.js":a.basePath?`${a.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function JA(a={debug:!0}){var t;if(!Zv())return;WA(a.mode),YA(),a.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",a.beforeSend));const r=QA(a);if(document.head.querySelector(`script[src*="${r}"]`))return;const s=document.createElement("script");s.src=r,s.defer=!0,s.dataset.sdkn=FA+(a.framework?`/${a.framework}`:""),s.dataset.sdkv=VA,a.disableAutoTrack&&(s.dataset.disableAutoTrack="1"),a.endpoint?s.dataset.endpoint=a.endpoint:a.basePath&&(s.dataset.endpoint=`${a.basePath}/insights`),a.dsn&&(s.dataset.dsn=a.dsn),s.onerror=()=>{const l=sh()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${l}`)},sh()&&a.debug===!1&&(s.dataset.debug="false"),document.head.appendChild(s)}function ZA({route:a,path:t}){var r;(r=window.va)==null||r.call(window,"pageview",{route:a,path:t})}function eT(){if(!(typeof process>"u"||typeof dy>"u"))return dy.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function tT(a){return O.useEffect(()=>{var t;a.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",a.beforeSend))},[a.beforeSend]),O.useEffect(()=>{JA({framework:a.framework||"react",basePath:a.basePath??eT(),...a.route!==void 0&&{disableAutoTrack:!0},...a})},[]),O.useEffect(()=>{a.route&&a.path&&ZA({route:a.route,path:a.path})},[a.route,a.path]),null}function nT(){const{i18n:a}=ot(),t=()=>{a.changeLanguage(a.language==="en"?"tr":"en")};return g.jsxs("button",{onClick:t,className:"fixed bottom-20 md:bottom-6 right-4 z-[9990] bg-white/90 dark:bg-gray-800/90 backdrop-blur-md text-gray-900 dark:text-white px-4 py-2.5 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 font-bold text-xs flex items-center gap-2 transition-all hover:scale-105 hover:bg-white dark:hover:bg-gray-800","aria-label":"Change Language",children:[g.jsx($o,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),g.jsx("span",{children:a.language==="en"?"TR":"EN"})]})}function aT(){return g.jsx(YE,{children:g.jsxs(hA,{children:[g.jsxs(S1,{children:[g.jsxs(hn,{path:"/",element:g.jsx(eN,{}),children:[g.jsx(hn,{index:!0,element:g.jsx(VN,{})}),g.jsx(hn,{path:"community",element:g.jsx(SA,{})}),g.jsx(hn,{path:"community/post/:postId",element:g.jsx(kA,{})}),g.jsx(hn,{path:"messages",element:g.jsx(NA,{})}),g.jsx(hn,{path:"messages/:chatId",element:g.jsx(IA,{})}),g.jsx(hn,{path:"analyses",element:g.jsx(GA,{})}),g.jsx(hn,{path:"profile",element:g.jsx(uy,{})}),g.jsx(hn,{path:"profile/:userId",element:g.jsx(uy,{})}),g.jsx(hn,{path:"about",element:g.jsx(qA,{})})]}),g.jsx(hn,{path:"/login",element:g.jsx(tN,{})}),g.jsx(hn,{path:"/register",element:g.jsx(aN,{})})]}),g.jsx(KA,{}),g.jsx(nT,{}),g.jsx(tT,{})]})})}const rT="Plant AI",sT="Something went wrong",iT="An unexpected error occurred.",lT="Reload",oT="Go Home",cT="Welcome to Plant AI",uT="Plant Diagnosis",dT="Community",hT="Profile",fT="Login",gT="Messages",mT="Language",pT="Logout",yT="Dark Mode",vT="Light Mode",bT="My Analyses",wT="Register",xT="Upload Photo",_T="Take Photo",ST="Analyzing...",kT="Diagnosis Results",ET="Treatment",NT="Confidence",jT="Save Changes",AT="Saving...",TT="Display Name",CT="Email",RT="Password",OT="Tap to change avatar",MT="Profile updated successfully!",DT="About Project",UT="Do you know the name of this plant?",LT="e.g., Rose, Tomato, Unknown...",zT="1. Plant Name",$T="2. Capture Photo",PT="Next",BT="I don't know",IT="I couldn't identify it clearly. Please take a close-up photo of a leaf.",HT="Take Close-up Photo",qT="Login to view detailed diagnosis and treatment plan.",GT="Login to View Results",KT="Detailed analysis is available for members only.",FT="AI Powered Plant Doctor",VT='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',YT="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",WT="Start Diagnosis",XT="Identify",QT="Tell us the plant name or type.",JT="Analyze",ZT="Upload photos of the affected area.",eC="Heal",tC="Get instant treatment plan.",nC="Welcome, ",aC="Diagnosis failed. Please try again.",rC="Back",sC="Plant",iC="Tomato",lC="Pepper",oC="Cucumber",cC="Rose",uC="Succulent",dC="Orchid",hC="Lemon",fC="Strawberry",gC="Mint",mC="Other",pC="Healthy / No Issue",yC="Yellowing Leaves",vC="Leaf Spots",bC="Wilting",wC="Pests / Bugs",xC="Root/Stem Rot",_C="Mold / Fungus",SC="Unknown / Help Needed",kC="Auto-Detect from Image",EC="Detecting...",NC="Ask Question",jC="Please login to post.",AC="Login Required",TC="Are you sure you want to delete this post?",CC="Just now",RC="Failed to delete post",OC="Failed to post comment",MC="Failed to update post",DC="Add a comment...",UC="Please login to comment.",LC="No comments yet. Be the first!",zC="Edit Post",$C="Cancel",PC="Share to Community",BC="Gardener",IC="Community Member",HC="Send Message",qC="Starting...",GC="Please login to message users.",KC="You cannot message yourself.",FC="Failed to start chat.",VC=" No posts yet",YC="Be the first to share your garden!",WC="No results",XC="Like",QC="Comment",JC="Edit",ZC="Joined",e5="Unknown Date",t5="View Profile",n5="Block User",a5="Unblock User",r5="Posts",s5="Likes",i5="My Posts",l5="{{name}}'s Posts",o5="New Chat",c5="View Analysis Report",u5="Type a message...",d5="POWERED BY GEMINI AI",h5="Heal your plants with",f5="AI Precision",g5="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",m5="Instant Analysis",p5="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",y5="Smart Interactions",v5="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",b5="Verified Treatments",w5="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",x5="Your Personal Pocket Botanist",_5="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",S5="Open Camera",k5="Select from Gallery",E5="No plant detected. Please ensure the subject is a clear plant or leaf.",N5="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",j5="Retry",A5="Camera access denied. Please check your browser permissions.",T5="Last seen",C5="Prevention Tips",R5="This plant may not fully recover, but follow these steps to prevent spread.",O5="Description",M5="Urgency",D5="Spread Risk",U5="New Scan",L5="Back to Community",z5="Welcome Back",$5="Create Account",P5="Log in to continue",B5="Register to join the community",I5="Register Now",H5="Log In",q5="Don't have an account?",G5="Invalid email or password",K5="Email already in use",F5="An error occurred",V5="Plant AI Daily Log",Y5="Delete Analysis",W5="Follow",X5="Following",Q5="Followers",J5="Following",Z5="Unfollow",e4="No followers yet",t4="Not following anyone yet",n4="Requested",a4="Follow request sent",r4="Request cancelled",s4="You must follow to send message",i4="Notifications",l4="Request accepted",o4="Request rejected",c4="Follow Requests",u4="Wants to follow you",d4="No new notifications",h4="An error occurred",f4="Follow to Message",g4="Sign in to your account",m4="Creating Account...",p4="Create an account to join the community",y4="Share",v4={app_name:rT,something_went_wrong:sT,unexpected_error:iT,reload:lT,go_home:oT,welcome:cT,plant_diagnosis:uT,community:dT,profile:hT,login:fT,messages:gT,language:mT,logout:pT,dark_mode:yT,light_mode:vT,analyses:bT,register:wT,upload_photo:xT,take_photo:_T,analyzing:ST,results:kT,treatment:ET,confidence:NT,save_changes:jT,saving:AT,display_name:TT,email:CT,password:RT,change_avatar:OT,profile_updated:MT,about:DT,what_plant_question:UT,what_plant_placeholder:LT,scan_step_1:zT,scan_step_2:$T,next_step:PT,skip:BT,need_macro_photo:IT,take_macro_photo:HT,login_blur_text:qT,login_to_view:GT,guest_limited:KT,hero_badge:FT,hero_title:VT,hero_desc:YT,start_diagnosis:WT,step_1_title:XT,step_1_desc:QT,step_2_title:JT,step_2_desc:ZT,step_3_title:eC,step_3_desc:tC,welcome_user:nC,error_diagnosis_failed:aC,back:rC,plant:sC,plant_tomato:iC,plant_pepper:lC,plant_cucumber:oC,plant_rose:cC,plant_succulent:uC,plant_orchid:dC,plant_lemon:hC,plant_strawberry:fC,plant_mint:gC,plant_other:mC,disease_none:pC,disease_yellowing:yC,disease_spots:vC,disease_wilting:bC,disease_bugs:wC,disease_rot:xC,disease_mold:_C,disease_unknown:SC,auto_detect:kC,detecting:EC,ask_question:NC,login_to_post:jC,login_required:AC,confirm_delete_post:TC,just_now:CC,failed_delete_post:RC,failed_post_comment:OC,failed_update_post:MC,add_comment_placeholder:DC,login_to_comment:UC,no_comments_yet:LC,edit_post:zC,cancel:$C,share:PC,gardener:BC,community_member:IC,send_message:HC,starting_chat:qC,login_to_message:GC,cannot_message_self:KC,failed_start_chat:FC,no_posts_yet:VC,be_the_first:YC,no_results:WC,like:XC,comment:QC,edit:JC,delete:"Delete",joined:ZC,unknown_date:e5,view_profile:t5,block_user:n5,unblock_user:a5,posts:r5,likes:s5,my_posts:i5,user_posts_title:l5,new_conversation:o5,view_analysis_report:c5,type_message:u5,ai_powered_v2:d5,hero_title_1:h5,hero_title_highlight:f5,hero_desc_v2:g5,feature_1_title:m5,feature_1_desc:p5,feature_2_title:y5,feature_2_desc:v5,feature_3_title:b5,feature_3_desc:w5,summary_title:x5,summary_desc:_5,open_camera:S5,upload_gallery:k5,error_not_plant:E5,error_server_busy:N5,retry:j5,camera_permission_denied:A5,last_seen:T5,prevention_tips:C5,plant_not_recoverable:R5,description:O5,urgency:M5,spread_risk:D5,new_scan:U5,back_to_community:L5,welcome_back:z5,create_account:$5,login_desc:P5,register_desc:B5,register_now:I5,login_now:H5,no_account:q5,error_invalid_credential:G5,error_email_in_use:K5,error_generic:F5,daily_bot_title:V5,delete_analysis:Y5,follow:W5,following:X5,followers:Q5,following_count:J5,unfollow:Z5,no_followers:e4,no_following:t4,requested:n4,request_sent:a4,request_cancelled:r4,must_follow_to_message:s4,notifications:i4,request_accepted:l4,request_rejected:o4,follow_requests:c4,wants_to_follow:u4,no_notifications:d4,error_occurred:h4,must_follow:f4,login_prompt:g4,creating_account:m4,join_community:p4,share_generic:y4},b4="Bitki AI",w4="Bir eyler ters gitti",x4="Beklenmedik bir hata olutu.",_4="Yenile",S4="Ana Sayfa",k4="Bitki AI'ye Hogeldiniz",E4="Bitki Tehisi",N4="Topluluk",j4="Profil",A4="Giri Yap",T4="Mesajlar",C4="Dil",R4="k Yap",O4="Koyu Tema",M4="Aydnlk Tema",D4="Analizlerim",U4="Kayt Ol",L4="Fotoraf Ykle",z4="Fotoraf ek",$4="Analiz ediliyor...",P4="Bitki",B4="Domates",I4="Biber",H4="Salatalk",q4="Patlcan",G4="Patates",K4="Soan",F4="Sarmsak",V4="Marul",Y4="Ispanak",W4="Havu",X4="Fasulye",Q4="Msr",J4="Kabak",Z4="ilek",eR="Limon",tR="Portakal",nR="Elma",aR="zm",rR="Karpuz",sR="Kavun",iR="Kiraz",lR="eftali",oR="Gl",cR="Orkide",uR="Sukulent",dR="Lale",hR="Ayiei",fR="Papatya",gR="Lavanta",mR="Kakts",pR="Zeytin",yR="am",vR="Palmiye",bR="Nane",wR="Fesleen",xR="Biberiye",_R="Maydanoz",SR="Dier",kR="Salkl / Sorun Yok",ER="Yaprak Sararmas",NR="Yaprak Lekeleri",jR="Solma",AR="Bcek / Haere",TR="Kk/Gvde rmesi",CR="Kf / Mantar",RR="Mildiy",OR="Besin Eksiklii",MR="Bilinmiyor / Yardm Lazm",DR="Fotoraftan Bul",UR="Taranyor...",LR="Bitki Se...",zR="Tehis Sonular",$R="Tedavi",PR="Gven Oran",BR="Deiiklikleri Kaydet",IR="Analizi Kaydet",HR="Kaydedildi",qR="Analiz baaryla kaydedildi!",GR="Bu analiz zaten toplulukla paylald.",KR="Bu analizi toplulukla paylamak istiyor musunuz?",FR="Baaryla paylald!",VR="Analizlerim",YR="Kaydediliyor...",WR="Grnen sim",XR="E-posta",QR="Fotoraf deitirmek iin dokunun",JR="Profil baaryla gncellendi!",ZR="Proje Hakknda",eO="Bu bitkinin adn biliyor musunuz?",tO="rn. Gl, Domates, Bilmiyorum...",nO="1. Bitki Ad",aO="2. Fotoraf ek",rO="Devam Et",sO="Bilmiyorum",iO="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",lO="Yakndan ek",oO="Detayl tehis ve tedavi plann grmek iin giri yapn.",cO="Sonucu Grmek in Giri Yap",uO="Detayl analiz sadece yelere zeldir.",dO="Yapay Zeka Destekli Bitki Doktoru",hO='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',fO="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",gO="Tehise Bala",mO="Tanmla",pO="Bitkinin adn veya trn belirtin.",yO="Analiz Et",vO="Etkilenen blgenin fotorafn ykleyin.",bO="yiletir",wO="Annda tedavi planna kavuun.",xO="Hogeldin, ",_O="Tehis baarsz oldu. Ltfen tekrar deneyin.",SO="Geri",kO="Az nce",EO="Bu gnderiyi silmek istediinize emin misiniz?",NO="Gnderi silinemedi",jO="Yorum gnderilemedi",AO="Gnderi gncellenemedi",TO="Yorum yaz...",CO="Yorum yapmak iin giri yapn.",RO="Henz yorum yok. lk yorumu sen yap!",OO="Gnderiyi Dzenle",MO="ptal",DO="Kaydet",UO="Bahvan",LO="Topluluk yesi",zO="Mesaj Gnder",$O="Balatlyor...",PO="Mesaj gndermek iin giri yapn.",BO="Kendinize mesaj atamazsnz.",IO="Sohbet balatlamad.",HO=" Henz gnderi yok",qO="Baheni paylaan ilk kii ol!",GO="Sonu yok",KO="Been",FO="Yorum",VO="Dzenle",YO="Ad Soyad",WO="ifre",XO="Toplulua katlmak iin hesap oluturun.",QO="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",JO="E-postanz Dorulayn",ZO="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",e3="E-posta Uygulamasn A",t3="Doruladm, Giri Yap",n3="Zaten hesabnz var m?",a3="Katlma Tarihi",r3="Bilinmiyor",s3="Profili Gr",i3="Kullancy Engelle",l3="Engeli Kaldr",o3="Gnderi",c3="Beeni",u3="Gnderilerim",d3="{{name}} Gnderileri",h3="Yeni Sohbet",f3="Analiz Raporunu Gr",g3="Mesaj yazn...",m3="GEMINI AI DESTEKL",p3="Bitkilerinizi yiletirin",y3="Yapay Zeka Hassasiyeti",v3="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",b3="Annda Analiz",w3="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",x3="Akll Etkileimler",_3="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",S3="Dorulanm Tedaviler",k3="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",E3="Kiisel Cep Botanikiniz",N3="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",j3="Kameray A",A3="Galeriden Se",T3="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",C3="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",R3="Tekrar Dene",O3="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",M3="Yakn ekim Fotoraf",D3="Bitki AI Dnyor...",U3="Analiz kaydedilemedi:",L3="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",z3="Bu cihazda mikrofon bulunamad.",$3="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",P3="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",B3="Kaydediliyor...",I3="Mesaj dzenleniyor...",H3="Mesajnz dzenleyin...",q3="Tedavi sreci balatld!",G3="Bilgiyi Kaydet",K3="Tedaviye Bala",F3="Henz Bir Analiz Yok",V3="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",Y3="Tedavi & Takip",W3="Kayt",X3="Bu analizi silmek istediinizden emin misiniz?",Q3="Gelime Ekle",J3="Paylald",Z3="Toplulukta Payla",e6="Toplulukla paylaarak bakalarna yardmc ol!",t6="Soru Sor",n6="Fotoraf",a6="Sesli Mesaj",r6="Son grlme {{days}} gn nce",s6="Son grlme {{hours}} saat nce",i6="Son grlme {{minutes}} dakika nce",l6="Az nce grld",o6="Dzenlendi",c6="Payla",u6="Balanty Kopyala",d6="Balant kopyaland!",h6="Sosyal Medyada Payla",f6="Son grlme",g6="Koruyucu nlemler",m6="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",p6="Aklama",y6="Aciliyet",v6="Yaylma Riski",b6="Yeni Tarama",w6="Toplulua Dn",x6="Tekrar Hogeldiniz",_6="Hesap Olutur",S6="Devam etmek iin giri yapn",k6="Toplulua katlmak iin kayt olun",E6="Hemen Kaydol",N6="Giri Yap",j6="Hesabnz yok mu?",A6="Hatal e-posta veya ifre",T6="Bu e-posta zaten kullanmda",C6="Bir hata olutu",R6="Plant AI Gnlk Bilgi",O6="Analizi Sil",M6="Takip Et",D6="Takip Ediliyor",U6="Takipi",L6="Takip Edilen",z6="Takibi Brak",$6="Henz takipi yok",P6="Henz kimseyi takip etmiyor",B6="stek Gnderildi",I6="Takip istei gnderildi",H6="stek iptal edildi",q6="Mesaj gndermek iin takip etmelisiniz",G6="Bildirimler",K6="stek kabul edildi",F6="stek reddedildi",V6="Takip stekleri",Y6="Seni takip etmek istiyor",W6="Yeni bildirim yok",X6="Bir hata olutu",Q6="Mesaj in Takip Et",J6="Takipten kar",Z6="Bu takipiyi listenizden karmak istediinize emin misiniz?",e8="Takipten kmak istediinize emin misiniz?",t8="Takipi karld",n8="Takipten kld",a8="%95 Doruluk",r8="Makro Destei",s8="Sfrla",i8="Bilinmeyen Bitki",l8="Hesabnza giri yapn",o8="Hesap Oluturuluyor...",c8="Toplulua katlmak iin hesap oluturun",u8="Payla",d8={app_name:b4,something_went_wrong:w4,unexpected_error:x4,reload:_4,go_home:S4,welcome:k4,plant_diagnosis:E4,community:N4,profile:j4,login:A4,messages:T4,language:C4,logout:R4,dark_mode:O4,light_mode:M4,analyses:D4,register:U4,upload_photo:L4,take_photo:z4,analyzing:$4,plant:P4,plant_tomato:B4,plant_pepper:I4,plant_cucumber:H4,plant_eggplant:q4,plant_potato:G4,plant_onion:K4,plant_garlic:F4,plant_lettuce:V4,plant_spinach:Y4,plant_carrot:W4,plant_bean:X4,plant_corn:Q4,plant_zucchini:J4,plant_strawberry:Z4,plant_lemon:eR,plant_orange:tR,plant_apple:nR,plant_grape:aR,plant_watermelon:rR,plant_melon:sR,plant_cherry:iR,plant_peach:lR,plant_rose:oR,plant_orchid:cR,plant_succulent:uR,plant_tulip:dR,plant_sunflower:hR,plant_daisy:fR,plant_lavender:gR,plant_cactus:mR,plant_olive:pR,plant_pine:yR,plant_palm:vR,plant_mint:bR,plant_basil:wR,plant_rosemary:xR,plant_parsley:_R,plant_other:SR,disease_none:kR,disease_yellowing:ER,disease_spots:NR,disease_wilting:jR,disease_bugs:AR,disease_rot:TR,disease_mold:CR,disease_mildew:RR,disease_nutrient:OR,disease_unknown:MR,auto_detect:DR,detecting:UR,select_plant:LR,results:zR,treatment:$R,confidence:PR,save_changes:BR,save_analysis:IR,saved:HR,save_success:qR,already_shared:GR,confirm_share:KR,share_success:FR,my_analyses:VR,saving:YR,display_name:WR,email:XR,change_avatar:QR,profile_updated:JR,about:ZR,what_plant_question:eO,what_plant_placeholder:tO,scan_step_1:nO,scan_step_2:aO,next_step:rO,skip:sO,need_macro_photo:iO,take_macro_photo:lO,login_blur_text:oO,login_to_view:cO,guest_limited:uO,hero_badge:dO,hero_title:hO,hero_desc:fO,start_diagnosis:gO,step_1_title:mO,step_1_desc:pO,step_2_title:yO,step_2_desc:vO,step_3_title:bO,step_3_desc:wO,welcome_user:xO,error_diagnosis_failed:_O,back:SO,just_now:kO,confirm_delete_post:EO,failed_delete_post:NO,failed_post_comment:jO,failed_update_post:AO,add_comment_placeholder:TO,login_to_comment:CO,no_comments_yet:RO,edit_post:OO,cancel:MO,save:DO,gardener:UO,community_member:LO,send_message:zO,starting_chat:$O,login_to_message:PO,cannot_message_self:BO,failed_start_chat:IO,no_posts_yet:HO,be_the_first:qO,no_results:GO,like:KO,comment:FO,edit:VO,delete:"Sil",full_name:YO,password:WO,create_account_desc:XO,verification_email_sent:QO,verify_email_title:JO,verify_email_desc:ZO,open_email_app:e3,i_verified_it:t3,already_have_account:n3,joined:a3,unknown_date:r3,view_profile:s3,block_user:i3,unblock_user:l3,posts:o3,likes:c3,my_posts:u3,user_posts_title:d3,new_conversation:h3,view_analysis_report:f3,type_message:g3,ai_powered_v2:m3,hero_title_1:p3,hero_title_highlight:y3,hero_desc_v2:v3,feature_1_title:b3,feature_1_desc:w3,feature_2_title:x3,feature_2_desc:_3,feature_3_title:S3,feature_3_desc:k3,summary_title:E3,summary_desc:N3,open_camera:j3,upload_gallery:A3,error_not_plant:T3,error_server_busy:C3,retry:R3,camera_permission_denied:O3,close_up_photo:M3,ai_thinking:D3,save_fail:U3,mic_access_denied:L3,mic_not_found:z3,mic_unavailable:$3,mic_generic_error:P3,recording:B3,editing_message:I3,edit_message_placeholder:H3,treatment_started:q3,save_info:G3,start_treatment:K3,no_analyses_title:F3,no_analyses_desc:V3,treatment_updates:Y3,records:W3,confirm_delete:X3,add_update:Q3,shared:J3,share:Z3,share_help_others:e6,ask_question:t6,photo:n6,voice_message:a6,last_seen_day:r6,last_seen_hour:s6,last_seen_min:i6,last_seen_just_now:l6,edited:o6,share_title:c6,copy_link:u6,link_copied:d6,social_share:h6,last_seen:f6,prevention_tips:g6,plant_not_recoverable:m6,description:p6,urgency:y6,spread_risk:v6,new_scan:b6,back_to_community:w6,welcome_back:x6,create_account:_6,login_desc:S6,register_desc:k6,register_now:E6,login_now:N6,no_account:j6,error_invalid_credential:A6,error_email_in_use:T6,error_generic:C6,daily_bot_title:R6,delete_analysis:O6,follow:M6,following:D6,followers:U6,following_count:L6,unfollow:z6,no_followers:$6,no_following:P6,requested:B6,request_sent:I6,request_cancelled:H6,must_follow_to_message:q6,notifications:G6,request_accepted:K6,request_rejected:F6,follow_requests:V6,wants_to_follow:Y6,no_notifications:W6,request_occurred:X6,must_follow:Q6,remove:J6,confirm_remove_follower:Z6,confirm_unfollow:e8,follower_removed:t8,unfollowed_user:n8,accuracy_badge:a8,macro_support:r8,reset:s8,unknown_plant:i8,login_prompt:l8,creating_account:o8,join_community:c8,share_generic:u8},{slice:h8,forEach:f8}=[];function g8(a){return f8.call(h8.call(arguments,1),t=>{if(t)for(const r in t)a[r]===void 0&&(a[r]=t[r])}),a}function m8(a){return typeof a!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(a))}const hy=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,p8=function(a,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},l=encodeURIComponent(t);let o=`${a}=${l}`;if(s.maxAge>0){const u=s.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(u)}`}if(s.domain){if(!hy.test(s.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${s.domain}`}if(s.path){if(!hy.test(s.path))throw new TypeError("option path is invalid");o+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(o+="; Partitioned"),o},fy={create(a,t,r,s){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(l.expires=new Date,l.expires.setTime(l.expires.getTime()+r*60*1e3)),s&&(l.domain=s),document.cookie=p8(a,t,l)},read(a){const t=`${a}=`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){let l=r[s];for(;l.charAt(0)===" ";)l=l.substring(1,l.length);if(l.indexOf(t)===0)return l.substring(t.length,l.length)}return null},remove(a,t){this.create(a,"",-1,t)}};var y8={name:"cookie",lookup(a){let{lookupCookie:t}=a;if(t&&typeof document<"u")return fy.read(t)||void 0},cacheUserLanguage(a,t){let{lookupCookie:r,cookieMinutes:s,cookieDomain:l,cookieOptions:o}=t;r&&typeof document<"u"&&fy.create(r,a,s,l,o)}},v8={name:"querystring",lookup(a){let{lookupQuerystring:t}=a,r;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let u=0;u<o.length;u++){const d=o[u].indexOf("=");d>0&&o[u].substring(0,d)===t&&(r=o[u].substring(d+1))}}return r}},b8={name:"hash",lookup(a){let{lookupHash:t,lookupFromHashIndex:r}=a,s;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const o=l.substring(1);if(t){const u=o.split("&");for(let d=0;d<u.length;d++){const h=u[d].indexOf("=");h>0&&u[d].substring(0,h)===t&&(s=u[d].substring(h+1))}}if(s)return s;if(!s&&r>-1){const u=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(u)?u[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return s}};let xs=null;const gy=()=>{if(xs!==null)return xs;try{if(xs=typeof window<"u"&&window.localStorage!==null,!xs)return!1;const a="i18next.translate.boo";window.localStorage.setItem(a,"foo"),window.localStorage.removeItem(a)}catch{xs=!1}return xs};var w8={name:"localStorage",lookup(a){let{lookupLocalStorage:t}=a;if(t&&gy())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(a,t){let{lookupLocalStorage:r}=t;r&&gy()&&window.localStorage.setItem(r,a)}};let _s=null;const my=()=>{if(_s!==null)return _s;try{if(_s=typeof window<"u"&&window.sessionStorage!==null,!_s)return!1;const a="i18next.translate.boo";window.sessionStorage.setItem(a,"foo"),window.sessionStorage.removeItem(a)}catch{_s=!1}return _s};var x8={name:"sessionStorage",lookup(a){let{lookupSessionStorage:t}=a;if(t&&my())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(a,t){let{lookupSessionStorage:r}=t;r&&my()&&window.sessionStorage.setItem(r,a)}},_8={name:"navigator",lookup(a){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:s,language:l}=navigator;if(r)for(let o=0;o<r.length;o++)t.push(r[o]);s&&t.push(s),l&&t.push(l)}return t.length>0?t:void 0}},S8={name:"htmlTag",lookup(a){let{htmlTag:t}=a,r;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(r=s.getAttribute("lang")),r}},k8={name:"path",lookup(a){let{lookupFromPathIndex:t}=a;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},E8={name:"subdomain",lookup(a){let{lookupFromSubdomainIndex:t}=a;const r=typeof t=="number"?t+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[r]}};let tb=!1;try{document.cookie,tb=!0}catch{}const nb=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];tb||nb.splice(1,1);const N8=()=>({order:nb,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:a=>a});class ab{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=g8(r,this.options||{},N8()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=l=>l.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(y8),this.addDetector(v8),this.addDetector(w8),this.addDetector(x8),this.addDetector(_8),this.addDetector(S8),this.addDetector(k8),this.addDetector(E8),this.addDetector(b8)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(s=>{if(this.detectors[s]){let l=this.detectors[s].lookup(this.options);l&&typeof l=="string"&&(l=[l]),l&&(r=r.concat(l))}}),r=r.filter(s=>s!=null&&!m8(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}ab.type="languageDetector";Gt.use(ab).use(O_).init({resources:{en:{translation:v4},tr:{translation:d8}},fallbackLng:"en",detection:{order:["localStorage","navigator"],caches:["localStorage"]},interpolation:{escapeValue:!1}});Ax.createRoot(document.getElementById("root")).render(g.jsx(O.StrictMode,{children:g.jsx(mv,{children:g.jsx(F1,{children:g.jsx(xk,{children:g.jsx(aT,{})})})})}));
