(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function BN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sy={exports:{}},wu={};var pw;function qN(){if(pw)return wu;pw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:o}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var yw;function HN(){return yw||(yw=1,sy.exports=qN()),sy.exports}var b=HN(),iy={exports:{}},ze={};var _w;function $N(){if(_w)return ze;_w=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,V={};function L(B,Y,se){this.props=B,this.context=Y,this.refs=V,this.updater=se||A}L.prototype.isReactComponent={},L.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},L.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=L.prototype;function z(B,Y,se){this.props=B,this.context=Y,this.refs=V,this.updater=se||A}var H=z.prototype=new $;H.constructor=z,P(H,L.prototype),H.isPureReactComponent=!0;var X=Array.isArray;function F(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(B,Y,se){var ie=se.ref;return{$$typeof:n,type:B,key:Y,ref:ie!==void 0?ie:null,props:se}}function N(B,Y){return E(B.type,Y,B.props)}function C(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function O(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(se){return Y[se]})}var k=/\/+/g;function G(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):Y.toString(36)}function ee(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(F,F):(B.status="pending",B.then(function(Y){B.status==="pending"&&(B.status="fulfilled",B.value=Y)},function(Y){B.status==="pending"&&(B.status="rejected",B.reason=Y)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function D(B,Y,se,ie,ne){var ye=typeof B;(ye==="undefined"||ye==="boolean")&&(B=null);var Ae=!1;if(B===null)Ae=!0;else switch(ye){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(B.$$typeof){case n:case e:Ae=!0;break;case p:return Ae=B._init,D(Ae(B._payload),Y,se,ie,ne)}}if(Ae)return ne=ne(B),Ae=ie===""?"."+G(B,0):ie,X(ne)?(se="",Ae!=null&&(se=Ae.replace(k,"$&/")+"/"),D(ne,Y,se,"",function(_e){return _e})):ne!=null&&(C(ne)&&(ne=N(ne,se+(ne.key==null||B&&B.key===ne.key?"":(""+ne.key).replace(k,"$&/")+"/")+Ae)),Y.push(ne)),1;Ae=0;var Me=ie===""?".":ie+":";if(X(B))for(var Re=0;Re<B.length;Re++)ie=B[Re],ye=Me+G(ie,Re),Ae+=D(ie,Y,se,ye,ne);else if(Re=w(B),typeof Re=="function")for(B=Re.call(B),Re=0;!(ie=B.next()).done;)ie=ie.value,ye=Me+G(ie,Re++),Ae+=D(ie,Y,se,ye,ne);else if(ye==="object"){if(typeof B.then=="function")return D(ee(B),Y,se,ie,ne);throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function M(B,Y,se){if(B==null)return B;var ie=[],ne=0;return D(B,ie,"","",function(ye){return Y.call(se,ye,ne++)}),ie}function J(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(se){(B._status===0||B._status===-1)&&(B._status=1,B._result=se)},function(se){(B._status===0||B._status===-1)&&(B._status=2,B._result=se)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var W=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Z={map:M,forEach:function(B,Y,se){M(B,function(){Y.apply(this,arguments)},se)},count:function(B){var Y=0;return M(B,function(){Y++}),Y},toArray:function(B){return M(B,function(Y){return Y})||[]},only:function(B){if(!C(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ze.Activity=y,ze.Children=Z,ze.Component=L,ze.Fragment=t,ze.Profiler=i,ze.PureComponent=z,ze.StrictMode=r,ze.Suspense=h,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},ze.cache=function(B){return function(){return B.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(B,Y,se){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ie=P({},B.props),ne=B.key;if(Y!=null)for(ye in Y.key!==void 0&&(ne=""+Y.key),Y)!T.call(Y,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Y.ref===void 0||(ie[ye]=Y[ye]);var ye=arguments.length-2;if(ye===1)ie.children=se;else if(1<ye){for(var Ae=Array(ye),Me=0;Me<ye;Me++)Ae[Me]=arguments[Me+2];ie.children=Ae}return E(B.type,ne,ie)},ze.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},ze.createElement=function(B,Y,se){var ie,ne={},ye=null;if(Y!=null)for(ie in Y.key!==void 0&&(ye=""+Y.key),Y)T.call(Y,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ne[ie]=Y[ie]);var Ae=arguments.length-2;if(Ae===1)ne.children=se;else if(1<Ae){for(var Me=Array(Ae),Re=0;Re<Ae;Re++)Me[Re]=arguments[Re+2];ne.children=Me}if(B&&B.defaultProps)for(ie in Ae=B.defaultProps,Ae)ne[ie]===void 0&&(ne[ie]=Ae[ie]);return E(B,ye,ne)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(B){return{$$typeof:d,render:B}},ze.isValidElement=C,ze.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:J}},ze.memo=function(B,Y){return{$$typeof:m,type:B,compare:Y===void 0?null:Y}},ze.startTransition=function(B){var Y=R.T,se={};R.T=se;try{var ie=B(),ne=R.S;ne!==null&&ne(se,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(F,W)}catch(ye){W(ye)}finally{Y!==null&&se.types!==null&&(Y.types=se.types),R.T=Y}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function(B){return R.H.use(B)},ze.useActionState=function(B,Y,se){return R.H.useActionState(B,Y,se)},ze.useCallback=function(B,Y){return R.H.useCallback(B,Y)},ze.useContext=function(B){return R.H.useContext(B)},ze.useDebugValue=function(){},ze.useDeferredValue=function(B,Y){return R.H.useDeferredValue(B,Y)},ze.useEffect=function(B,Y){return R.H.useEffect(B,Y)},ze.useEffectEvent=function(B){return R.H.useEffectEvent(B)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function(B,Y,se){return R.H.useImperativeHandle(B,Y,se)},ze.useInsertionEffect=function(B,Y){return R.H.useInsertionEffect(B,Y)},ze.useLayoutEffect=function(B,Y){return R.H.useLayoutEffect(B,Y)},ze.useMemo=function(B,Y){return R.H.useMemo(B,Y)},ze.useOptimistic=function(B,Y){return R.H.useOptimistic(B,Y)},ze.useReducer=function(B,Y,se){return R.H.useReducer(B,Y,se)},ze.useRef=function(B){return R.H.useRef(B)},ze.useState=function(B){return R.H.useState(B)},ze.useSyncExternalStore=function(B,Y,se){return R.H.useSyncExternalStore(B,Y,se)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.3",ze}var vw;function wm(){return vw||(vw=1,iy.exports=$N()),iy.exports}var q=wm();const GN=BN(q);var ay={exports:{}},xu={},oy={exports:{}},ly={};var bw;function KN(){return bw||(bw=1,(function(n){function e(D,M){var J=D.length;D.push(M);e:for(;0<J;){var W=J-1>>>1,Z=D[W];if(0<i(Z,M))D[W]=M,D[J]=Z,J=W;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var M=D[0],J=D.pop();if(J!==M){D[0]=J;e:for(var W=0,Z=D.length,B=Z>>>1;W<B;){var Y=2*(W+1)-1,se=D[Y],ie=Y+1,ne=D[ie];if(0>i(se,J))ie<Z&&0>i(ne,se)?(D[W]=ne,D[ie]=J,W=ie):(D[W]=se,D[Y]=J,W=Y);else if(ie<Z&&0>i(ne,J))D[W]=ne,D[ie]=J,W=ie;else break e}}return M}function i(D,M){var J=D.sortIndex-M.sortIndex;return J!==0?J:D.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],m=[],p=1,y=null,v=3,w=!1,A=!1,P=!1,V=!1,L=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function H(D){for(var M=t(m);M!==null;){if(M.callback===null)r(m);else if(M.startTime<=D)r(m),M.sortIndex=M.expirationTime,e(h,M);else break;M=t(m)}}function X(D){if(P=!1,H(D),!A)if(t(h)!==null)A=!0,F||(F=!0,O());else{var M=t(m);M!==null&&ee(X,M.startTime-D)}}var F=!1,R=-1,T=5,E=-1;function N(){return V?!0:!(n.unstable_now()-E<T)}function C(){if(V=!1,F){var D=n.unstable_now();E=D;var M=!0;try{e:{A=!1,P&&(P=!1,$(R),R=-1),w=!0;var J=v;try{t:{for(H(D),y=t(h);y!==null&&!(y.expirationTime>D&&N());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var Z=W(y.expirationTime<=D);if(D=n.unstable_now(),typeof Z=="function"){y.callback=Z,H(D),M=!0;break t}y===t(h)&&r(h),H(D)}else r(h);y=t(h)}if(y!==null)M=!0;else{var B=t(m);B!==null&&ee(X,B.startTime-D),M=!1}}break e}finally{y=null,v=J,w=!1}M=void 0}}finally{M?O():F=!1}}}var O;if(typeof z=="function")O=function(){z(C)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=C,O=function(){G.postMessage(null)}}else O=function(){L(C,0)};function ee(D,M){R=L(function(){D(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(D){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var J=v;v=M;try{return D()}finally{v=J}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=v;v=D;try{return M()}finally{v=J}},n.unstable_scheduleCallback=function(D,M,J){var W=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,D={id:p++,callback:M,priorityLevel:D,startTime:J,expirationTime:Z,sortIndex:-1},J>W?(D.sortIndex=J,e(m,D),t(h)===null&&D===t(m)&&(P?($(R),R=-1):P=!0,ee(X,J-W))):(D.sortIndex=Z,e(h,D),A||w||(A=!0,F||(F=!0,O()))),D},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(D){var M=v;return function(){var J=v;v=M;try{return D.apply(this,arguments)}finally{v=J}}}})(ly)),ly}var ww;function YN(){return ww||(ww=1,oy.exports=KN()),oy.exports}var cy={exports:{}},Dn={};var xw;function QN(){if(xw)return Dn;xw=1;var n=wm();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:m,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(h,m,null,p)},Dn.flushSync=function(h){var m=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=m,r.p=p,r.d.f()}},Dn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(h,m))},Dn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Dn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,y=d(p,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?r.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Dn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=d(m.as,m.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(h)},Dn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=d(p,m.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Dn.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=d(m.as,m.crossOrigin);r.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(h)},Dn.requestFormReset=function(h){r.d.r(h)},Dn.unstable_batchedUpdates=function(h,m){return h(m)},Dn.useFormState=function(h,m,p){return c.H.useFormState(h,m,p)},Dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var Ew;function XN(){if(Ew)return cy.exports;Ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cy.exports=QN(),cy.exports}var Tw;function WN(){if(Tw)return xu;Tw=1;var n=YN(),e=wm(),t=XN();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function m(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,u=a;;){var g=l.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===l)return h(g),s;if(_===u)return h(g),a;_=_.sibling}throw Error(r(188))}if(l.return!==u.return)l=g,u=_;else{for(var S=!1,j=g.child;j;){if(j===l){S=!0,l=g,u=_;break}if(j===u){S=!0,u=g,l=_;break}j=j.sibling}if(!S){for(j=_.child;j;){if(j===l){S=!0,l=_,u=g;break}if(j===u){S=!0,u=_,l=g;break}j=j.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case L:return"Profiler";case V:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList";case E:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case z:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:G(s.type)||"Memo";case T:a=s._payload,s=s._init;try{return G(s(a))}catch{}}return null}var ee=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},W=[],Z=-1;function B(s){return{current:s}}function Y(s){0>Z||(s.current=W[Z],W[Z]=null,Z--)}function se(s,a){Z++,W[Z]=s.current,s.current=a}var ie=B(null),ne=B(null),ye=B(null),Ae=B(null);function Me(s,a){switch(se(ye,a),se(ne,s),se(ie,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?U1(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=U1(a),s=z1(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(ie),se(ie,s)}function Re(){Y(ie),Y(ne),Y(ye)}function _e(s){s.memoizedState!==null&&se(Ae,s);var a=ie.current,l=z1(a,s.type);a!==l&&(se(ne,s),se(ie,l))}function Te(s){ne.current===s&&(Y(ie),Y(ne)),Ae.current===s&&(Y(Ae),yu._currentValue=J)}var Ve,Ze;function De(s){if(Ve===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ve=a&&a[1]||"",Ze=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+s+Ze}var Ke=!1;function at(s,a){if(!s||Ke)return"";Ke=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(de){var ce=de}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(de){ce=de}s.call(ge.prototype)}}else{try{throw Error()}catch(de){ce=de}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],j=_[1];if(S&&j){var K=S.split(`
`),le=j.split(`
`);for(g=u=0;u<K.length&&!K[u].includes("DetermineComponentFrameRoot");)u++;for(;g<le.length&&!le[g].includes("DetermineComponentFrameRoot");)g++;if(u===K.length||g===le.length)for(u=K.length-1,g=le.length-1;1<=u&&0<=g&&K[u]!==le[g];)g--;for(;1<=u&&0<=g;u--,g--)if(K[u]!==le[g]){if(u!==1||g!==1)do if(u--,g--,0>g||K[u]!==le[g]){var fe=`
`+K[u].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=u&&0<=g);break}}}finally{Ke=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?De(l):""}function st(s,a){switch(s.tag){case 26:case 27:case 5:return De(s.type);case 16:return De("Lazy");case 13:return s.child!==a&&a!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return at(s.type,!1);case 11:return at(s.type.render,!1);case 1:return at(s.type,!0);case 31:return De("Activity");default:return""}}function Qe(s){try{var a="",l=null;do a+=st(s,l),l=s,s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Fe=Object.prototype.hasOwnProperty,Xe=n.unstable_scheduleCallback,ft=n.unstable_cancelCallback,_n=n.unstable_shouldYield,Rt=n.unstable_requestPaint,$e=n.unstable_now,qt=n.unstable_getCurrentPriorityLevel,Gn=n.unstable_ImmediatePriority,ss=n.unstable_UserBlockingPriority,Nt=n.unstable_NormalPriority,Lr=n.unstable_LowPriority,Qt=n.unstable_IdlePriority,Cn=n.log,vn=n.unstable_setDisableYieldValue,Ht=null,wt=null;function Xt(s){if(typeof Cn=="function"&&vn(s),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ht,s)}catch{}}var Ct=Math.clz32?Math.clz32:Ca,$o=Math.log,is=Math.LN2;function Ca(s){return s>>>=0,s===0?32:31-($o(s)/is|0)|0}var kn=256,Bs=262144,mt=4194304;function ln(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function bn(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,_=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var j=u&134217727;return j!==0?(u=j&~_,u!==0?g=ln(u):(S&=j,S!==0?g=ln(S):l||(l=j&~s,l!==0&&(g=ln(l))))):(j=u&~_,j!==0?g=ln(j):S!==0?g=ln(S):l||(l=u&~s,l!==0&&(g=ln(l)))),g===0?0:a!==0&&a!==g&&(a&_)===0&&(_=g&-g,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:g}function wn(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Go(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var s=mt;return mt<<=1,(mt&62914560)===0&&(mt=4194304),s}function fn(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function ka(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function cg(s,a,l,u,g,_){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var j=s.entanglements,K=s.expirationTimes,le=s.hiddenUpdates;for(l=S&~l;0<l;){var fe=31-Ct(l),ge=1<<fe;j[fe]=0,K[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var de=ce[fe];de!==null&&(de.lane&=-536870913)}l&=~ge}u!==0&&Da(s,u,0),_!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=_&~(S&~a))}function Da(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Ct(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function xc(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Ct(l),g=1<<u;g&a|s[u]&a&&(s[u]|=a),l&=~g}}function Ec(s,a){var l=a&-a;return l=(l&42)!==0?1:Oa(l),(l&(s.suspendedLanes|a))!==0?0:l}function Oa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function qs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function jd(){var s=M.p;return s!==0?s:(s=window.event,s===void 0?32:cw(s.type))}function Ur(s,a){var l=M.p;try{return M.p=s,a()}finally{M.p=l}}var zr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+zr,mn="__reactProps$"+zr,as="__reactContainer$"+zr,Ko="__reactEvents$"+zr,ug="__reactListeners$"+zr,Ld="__reactHandles$"+zr,Ud="__reactResources$"+zr,os="__reactMarker$"+zr;function Yo(s){delete s[Wt],delete s[mn],delete s[Ko],delete s[ug],delete s[Ld]}function ls(s){var a=s[Wt];if(a)return a;for(var l=s.parentNode;l;){if(a=l[as]||l[Wt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=K1(s);s!==null;){if(l=s[Wt])return l;s=K1(s)}return a}s=l,l=s.parentNode}return null}function _r(s){if(s=s[Wt]||s[as]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function nr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function cs(s){var a=s[Ud];return a||(a=s[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(s){s[os]=!0}var Tc=new Set,Ac={};function us(s,a){ds(s,a),ds(s+"Capture",a)}function ds(s,a){for(Ac[s]=a,s=0;s<a.length;s++)Tc.add(a[s])}var Sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},Rc={};function zd(s){return Fe.call(Rc,s)?!0:Fe.call(Ic,s)?!1:Sc.test(s)?Rc[s]=!0:(Ic[s]=!0,!1)}function Qo(s,a,l){if(zd(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function rr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Zt(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}function gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ai(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nc(s,a,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){l=""+S,_.call(this,S)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function gt(s){if(!s._valueTracker){var a=Ai(s)?"checked":"value";s._valueTracker=Nc(s,a,""+s[a])}}function Ma(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=Ai(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function hs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pa=/[\n"\\]/g;function Kn(s){return s.replace(Pa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xo(s,a,l,u,g,_,S,j){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),a!=null?S==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+gn(a)):s.value!==""+gn(a)&&(s.value=""+gn(a)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),a!=null?Cc(s,S,gn(a)):l!=null?Cc(s,S,gn(l)):u!=null&&s.removeAttribute("value"),g==null&&_!=null&&(s.defaultChecked=!!_),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.name=""+gn(j):s.removeAttribute("name")}function Fd(s,a,l,u,g,_,S,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){gt(s);return}l=l!=null?""+gn(l):"",a=a!=null?""+gn(a):l,j||a===s.value||(s.value=a),s.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=j?s.checked:!!u,s.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),gt(s)}function Cc(s,a,l){a==="number"&&hs(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Si(s,a,l,u){if(s=s.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=a.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+gn(l),a=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Bd(s,a,l){if(a!=null&&(a=""+gn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+gn(l):""}function Ii(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(ee(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=gn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),gt(s)}function Yn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var qd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kc(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||qd.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Dc(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&l[g]!==u&&kc(s,g,u)}else for(var _ in a)a.hasOwnProperty(_)&&kc(s,_,a[_])}function Wo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ri=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(s){return Ri.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Fr(){}var Oc=null;function vr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ni=null,fs=null;function Va(s){var a=_r(s);if(a&&(s=a.stateNode)){var l=s[mn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Xo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var g=u[mn]||null;if(!g)throw Error(r(90));Xo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&Ma(u)}break e;case"textarea":Bd(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Si(s,!!l.multiple,a,!1)}}}var Zo=!1;function Ci(s,a,l){if(Zo)return s(a,l);Zo=!0;try{var u=s(a);return u}finally{if(Zo=!1,(Ni!==null||fs!==null)&&(jh(),Ni&&(a=Ni,s=fs,fs=Ni=null,Va(a),s)))for(a=0;a<s.length;a++)Va(s[a])}}function Br(s,a){var l=s.stateNode;if(l===null)return null;var u=l[mn]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(br)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){ja=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{ja=!1}var ms=null,Mc=null,La=null;function Pc(){if(La)return La;var s,a=Mc,l=a.length,u,g="value"in ms?ms.value:ms.textContent,_=g.length;for(s=0;s<l&&a[s]===g[s];s++);var S=l-s;for(u=1;u<=S&&a[l-u]===g[_-u];u++);return La=g.slice(s,1<u?1-u:void 0)}function Ua(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Hs(){return!0}function qr(){return!1}function xn(s){function a(l,u,g,_,S){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(l=s[j],this[j]=l?l(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Hs:qr,this.isPropagationStopped=qr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),a}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=xn($s),ki=y({},$s,{view:0,detail:0}),Vc=xn(ki),Di,el,ps,tl=y({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ps&&(ps&&s.type==="mousemove"?(Di=s.screenX-ps.screenX,el=s.screenY-ps.screenY):el=Di=0,ps=s),Di)},movementY:function(s){return"movementY"in s?s.movementY:el}}),jc=xn(tl),za=y({},tl,{dataTransfer:0}),$d=xn(za),Gd=y({},ki,{relatedTarget:0}),Fa=xn(Gd),Lc=y({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Kd=xn(Lc),nl=y({},$s,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yd=xn(nl),Qd=y({},$s,{data:0}),ys=xn(Qd),Xd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Jd[s])?!!a[s]:!1}function Oi(){return Zd}var zn=y({},ki,{key:function(s){if(s.key){var a=Xd[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Wd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oi,charCode:function(s){return s.type==="keypress"?Ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),eh=xn(zn),th=y({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gs=xn(th),f=y({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oi}),x=xn(f),I=y({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=xn(I),ae=y({},tl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=xn(ae),be=y({},$s,{newState:0,oldState:0}),Be=xn(be),$t=[9,13,27,32],ut=br&&"CompositionEvent"in window,Ot=null;br&&"documentMode"in document&&(Ot=document.documentMode);var wr=br&&"TextEvent"in window&&!Ot,_s=br&&(!ut||Ot&&8<Ot&&11>=Ot),Hr=" ",$r=!1;function Ba(s,a){switch(s){case"keyup":return $t.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var sl=!1;function hR(s,a){switch(s){case"compositionend":return rl(a);case"keypress":return a.which!==32?null:($r=!0,Hr);case"textInput":return s=a.data,s===Hr&&$r?null:s;default:return null}}function fR(s,a){if(sl)return s==="compositionend"||!ut&&Ba(s,a)?(s=Pc(),La=Mc=ms=null,sl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _s&&a.locale!=="ko"?null:a.data;default:return null}}var mR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!mR[s.type]:a==="textarea"}function W_(s,a,l,u){Ni?fs?fs.push(u):fs=[u]:Ni=u,a=Hh(a,"onChange"),0<a.length&&(l=new gs("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var Uc=null,zc=null;function gR(s){O1(s,0)}function nh(s){var a=nr(s);if(Ma(a))return s}function J_(s,a){if(s==="change")return a}var Z_=!1;if(br){var dg;if(br){var hg="oninput"in document;if(!hg){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),hg=typeof ev.oninput=="function"}dg=hg}else dg=!1;Z_=dg&&(!document.documentMode||9<document.documentMode)}function tv(){Uc&&(Uc.detachEvent("onpropertychange",nv),zc=Uc=null)}function nv(s){if(s.propertyName==="value"&&nh(zc)){var a=[];W_(a,zc,s,vr(s)),Ci(gR,a)}}function pR(s,a,l){s==="focusin"?(tv(),Uc=a,zc=l,Uc.attachEvent("onpropertychange",nv)):s==="focusout"&&tv()}function yR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return nh(zc)}function _R(s,a){if(s==="click")return nh(a)}function vR(s,a){if(s==="input"||s==="change")return nh(a)}function bR(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var sr=typeof Object.is=="function"?Object.is:bR;function Fc(s,a){if(sr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Fe.call(a,g)||!sr(s[g],a[g]))return!1}return!0}function rv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function sv(s,a){var l=rv(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rv(l)}}function iv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?iv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function av(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=hs(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=hs(s.document)}return a}function fg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var wR=br&&"documentMode"in document&&11>=document.documentMode,il=null,mg=null,Bc=null,gg=!1;function ov(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gg||il==null||il!==hs(u)||(u=il,"selectionStart"in u&&fg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bc&&Fc(Bc,u)||(Bc=u,u=Hh(mg,"onSelect"),0<u.length&&(a=new gs("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=il)))}function qa(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var al={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},pg={},lv={};br&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function Ha(s){if(pg[s])return pg[s];if(!al[s])return s;var a=al[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in lv)return pg[s]=a[l];return s}var cv=Ha("animationend"),uv=Ha("animationiteration"),dv=Ha("animationstart"),xR=Ha("transitionrun"),ER=Ha("transitionstart"),TR=Ha("transitioncancel"),hv=Ha("transitionend"),fv=new Map,yg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yg.push("scrollEnd");function Gr(s,a){fv.set(s,a),us(a,[s])}var rh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},xr=[],ol=0,_g=0;function sh(){for(var s=ol,a=_g=ol=0;a<s;){var l=xr[a];xr[a++]=null;var u=xr[a];xr[a++]=null;var g=xr[a];xr[a++]=null;var _=xr[a];if(xr[a++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&mv(l,g,_)}}function ih(s,a,l,u){xr[ol++]=s,xr[ol++]=a,xr[ol++]=l,xr[ol++]=u,_g|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function vg(s,a,l,u){return ih(s,a,l,u),ah(s)}function $a(s,a){return ih(s,null,null,a),ah(s)}function mv(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,_=s.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(g=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,g&&a!==null&&(g=31-Ct(l),s=_.hiddenUpdates,u=s[g],u===null?s[g]=[a]:u.push(a),a.lane=l|536870912),_):null}function ah(s){if(50<uu)throw uu=0,Rp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ll={};function AR(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(s,a,l,u){return new AR(s,a,l,u)}function bg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ks(s,a){var l=s.alternate;return l===null?(l=ir(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function gv(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function oh(s,a,l,u,g,_){var S=0;if(u=s,typeof s=="function")bg(s)&&(S=1);else if(typeof s=="string")S=CN(s,l,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case E:return s=ir(31,l,a,g),s.elementType=E,s.lanes=_,s;case P:return Ga(l.children,g,_,a);case V:S=8,g|=24;break;case L:return s=ir(12,l,a,g|2),s.elementType=L,s.lanes=_,s;case X:return s=ir(13,l,a,g),s.elementType=X,s.lanes=_,s;case F:return s=ir(19,l,a,g),s.elementType=F,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:S=10;break e;case $:S=9;break e;case H:S=11;break e;case R:S=14;break e;case T:S=16,u=null;break e}S=29,l=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=ir(S,l,a,g),a.elementType=s,a.type=u,a.lanes=_,a}function Ga(s,a,l,u){return s=ir(7,s,u,a),s.lanes=l,s}function wg(s,a,l){return s=ir(6,s,null,a),s.lanes=l,s}function pv(s){var a=ir(18,null,null,0);return a.stateNode=s,a}function xg(s,a,l){return a=ir(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var yv=new WeakMap;function Er(s,a){if(typeof s=="object"&&s!==null){var l=yv.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Qe(a)},yv.set(s,a),a)}return{value:s,source:a,stack:Qe(a)}}var cl=[],ul=0,lh=null,qc=0,Tr=[],Ar=0,Mi=null,vs=1,bs="";function Ys(s,a){cl[ul++]=qc,cl[ul++]=lh,lh=s,qc=a}function _v(s,a,l){Tr[Ar++]=vs,Tr[Ar++]=bs,Tr[Ar++]=Mi,Mi=s;var u=vs;s=bs;var g=32-Ct(u)-1;u&=~(1<<g),l+=1;var _=32-Ct(a)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,vs=1<<32-Ct(a)+g|l<<g|u,bs=_+s}else vs=1<<_|l<<g|u,bs=s}function Eg(s){s.return!==null&&(Ys(s,1),_v(s,1,0))}function Tg(s){for(;s===lh;)lh=cl[--ul],cl[ul]=null,qc=cl[--ul],cl[ul]=null;for(;s===Mi;)Mi=Tr[--Ar],Tr[Ar]=null,bs=Tr[--Ar],Tr[Ar]=null,vs=Tr[--Ar],Tr[Ar]=null}function vv(s,a){Tr[Ar++]=vs,Tr[Ar++]=bs,Tr[Ar++]=Mi,vs=a.id,bs=a.overflow,Mi=s}var En=null,kt=null,it=!1,Pi=null,Sr=!1,Ag=Error(r(519));function Vi(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hc(Er(a,s)),Ag}function bv(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Wt]=s,a[mn]=u,l){case"dialog":Je("cancel",a),Je("close",a);break;case"iframe":case"object":case"embed":Je("load",a);break;case"video":case"audio":for(l=0;l<hu.length;l++)Je(hu[l],a);break;case"source":Je("error",a);break;case"img":case"image":case"link":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"input":Je("invalid",a),Fd(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",a);break;case"textarea":Je("invalid",a),Ii(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||j1(a.textContent,l)?(u.popover!=null&&(Je("beforetoggle",a),Je("toggle",a)),u.onScroll!=null&&Je("scroll",a),u.onScrollEnd!=null&&Je("scrollend",a),u.onClick!=null&&(a.onclick=Fr),a=!0):a=!1,a||Vi(s,!0)}function wv(s){for(En=s.return;En;)switch(En.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:En=En.return}}function dl(s){if(s!==En)return!1;if(!it)return wv(s),it=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||qp(s.type,s.memoizedProps)),l=!l),l&&kt&&Vi(s),wv(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=G1(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=G1(s)}else a===27?(a=kt,Xi(s.type)?(s=Yp,Yp=null,kt=s):kt=a):kt=En?Rr(s.stateNode.nextSibling):null;return!0}function Ka(){kt=En=null,it=!1}function Sg(){var s=Pi;return s!==null&&(Jn===null?Jn=s:Jn.push.apply(Jn,s),Pi=null),s}function Hc(s){Pi===null?Pi=[s]:Pi.push(s)}var Ig=B(null),Ya=null,Qs=null;function ji(s,a,l){se(Ig,a._currentValue),a._currentValue=l}function Xs(s){s._currentValue=Ig.current,Y(Ig)}function Rg(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function Ng(s,a,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=g;for(var K=0;K<a.length;K++)if(j.context===a[K]){_.lanes|=l,j=_.alternate,j!==null&&(j.lanes|=l),Rg(_.return,l,s),u||(S=null);break e}_=j.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),Rg(S,l,s),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===s){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function hl(s,a,l,u){s=null;for(var g=a,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var j=g.type;sr(g.pendingProps.value,S.value)||(s!==null?s.push(j):s=[j])}}else if(g===Ae.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(yu):s=[yu])}g=g.return}s!==null&&Ng(a,s,l,u),a.flags|=262144}function ch(s){for(s=s.firstContext;s!==null;){if(!sr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qa(s){Ya=s,Qs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Tn(s){return xv(Ya,s)}function uh(s,a){return Ya===null&&Qa(s),xv(s,a)}function xv(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Qs===null){if(s===null)throw Error(r(308));Qs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Qs=Qs.next=a;return l}var SR=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},IR=n.unstable_scheduleCallback,RR=n.unstable_NormalPriority,en={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cg(){return{controller:new SR,data:new Map,refCount:0}}function $c(s){s.refCount--,s.refCount===0&&IR(RR,function(){s.controller.abort()})}var Gc=null,kg=0,fl=0,ml=null;function NR(s,a){if(Gc===null){var l=Gc=[];kg=0,fl=Mp(),ml={status:"pending",value:void 0,then:function(u){l.push(u)}}}return kg++,a.then(Ev,Ev),a}function Ev(){if(--kg===0&&Gc!==null){ml!==null&&(ml.status="fulfilled");var s=Gc;Gc=null,fl=0,ml=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function CR(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var Tv=D.S;D.S=function(s,a){o1=$e(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&NR(s,a),Tv!==null&&Tv(s,a)};var Xa=B(null);function Dg(){var s=Xa.current;return s!==null?s:St.pooledCache}function dh(s,a){a===null?se(Xa,Xa.current):se(Xa,a.pool)}function Av(){var s=Dg();return s===null?null:{parent:en._currentValue,pool:s}}var gl=Error(r(460)),Og=Error(r(474)),hh=Error(r(542)),fh={then:function(){}};function Sv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Iv(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Fr,Fr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Nv(s),s;default:if(typeof a.status=="string")a.then(Fr,Fr);else{if(s=St,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Nv(s),s}throw Ja=a,gl}}function Wa(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ja=l,gl):l}}var Ja=null;function Rv(){if(Ja===null)throw Error(r(459));var s=Ja;return Ja=null,s}function Nv(s){if(s===gl||s===hh)throw Error(r(483))}var pl=null,Kc=0;function mh(s){var a=Kc;return Kc+=1,pl===null&&(pl=[]),Iv(pl,s,a)}function Yc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function gh(s,a){throw a.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Cv(s){function a(te,Q){if(s){var oe=te.deletions;oe===null?(te.deletions=[Q],te.flags|=16):oe.push(Q)}}function l(te,Q){if(!s)return null;for(;Q!==null;)a(te,Q),Q=Q.sibling;return null}function u(te){for(var Q=new Map;te!==null;)te.key!==null?Q.set(te.key,te):Q.set(te.index,te),te=te.sibling;return Q}function g(te,Q){return te=Ks(te,Q),te.index=0,te.sibling=null,te}function _(te,Q,oe){return te.index=oe,s?(oe=te.alternate,oe!==null?(oe=oe.index,oe<Q?(te.flags|=67108866,Q):oe):(te.flags|=67108866,Q)):(te.flags|=1048576,Q)}function S(te){return s&&te.alternate===null&&(te.flags|=67108866),te}function j(te,Q,oe,me){return Q===null||Q.tag!==6?(Q=wg(oe,te.mode,me),Q.return=te,Q):(Q=g(Q,oe),Q.return=te,Q)}function K(te,Q,oe,me){var Ne=oe.type;return Ne===P?fe(te,Q,oe.props.children,me,oe.key):Q!==null&&(Q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&Wa(Ne)===Q.type)?(Q=g(Q,oe.props),Yc(Q,oe),Q.return=te,Q):(Q=oh(oe.type,oe.key,oe.props,null,te.mode,me),Yc(Q,oe),Q.return=te,Q)}function le(te,Q,oe,me){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=xg(oe,te.mode,me),Q.return=te,Q):(Q=g(Q,oe.children||[]),Q.return=te,Q)}function fe(te,Q,oe,me,Ne){return Q===null||Q.tag!==7?(Q=Ga(oe,te.mode,me,Ne),Q.return=te,Q):(Q=g(Q,oe),Q.return=te,Q)}function ge(te,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=wg(""+Q,te.mode,oe),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return oe=oh(Q.type,Q.key,Q.props,null,te.mode,oe),Yc(oe,Q),oe.return=te,oe;case A:return Q=xg(Q,te.mode,oe),Q.return=te,Q;case T:return Q=Wa(Q),ge(te,Q,oe)}if(ee(Q)||O(Q))return Q=Ga(Q,te.mode,oe,null),Q.return=te,Q;if(typeof Q.then=="function")return ge(te,mh(Q),oe);if(Q.$$typeof===z)return ge(te,uh(te,Q),oe);gh(te,Q)}return null}function ce(te,Q,oe,me){var Ne=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ne!==null?null:j(te,Q,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ne?K(te,Q,oe,me):null;case A:return oe.key===Ne?le(te,Q,oe,me):null;case T:return oe=Wa(oe),ce(te,Q,oe,me)}if(ee(oe)||O(oe))return Ne!==null?null:fe(te,Q,oe,me,null);if(typeof oe.then=="function")return ce(te,Q,mh(oe),me);if(oe.$$typeof===z)return ce(te,Q,uh(te,oe),me);gh(te,oe)}return null}function de(te,Q,oe,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(oe)||null,j(Q,te,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?oe:me.key)||null,K(Q,te,me,Ne);case A:return te=te.get(me.key===null?oe:me.key)||null,le(Q,te,me,Ne);case T:return me=Wa(me),de(te,Q,oe,me,Ne)}if(ee(me)||O(me))return te=te.get(oe)||null,fe(Q,te,me,Ne,null);if(typeof me.then=="function")return de(te,Q,oe,mh(me),Ne);if(me.$$typeof===z)return de(te,Q,oe,uh(Q,me),Ne);gh(Q,me)}return null}function xe(te,Q,oe,me){for(var Ne=null,lt=null,Se=Q,Ge=Q=0,tt=null;Se!==null&&Ge<oe.length;Ge++){Se.index>Ge?(tt=Se,Se=null):tt=Se.sibling;var ct=ce(te,Se,oe[Ge],me);if(ct===null){Se===null&&(Se=tt);break}s&&Se&&ct.alternate===null&&a(te,Se),Q=_(ct,Q,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct,Se=tt}if(Ge===oe.length)return l(te,Se),it&&Ys(te,Ge),Ne;if(Se===null){for(;Ge<oe.length;Ge++)Se=ge(te,oe[Ge],me),Se!==null&&(Q=_(Se,Q,Ge),lt===null?Ne=Se:lt.sibling=Se,lt=Se);return it&&Ys(te,Ge),Ne}for(Se=u(Se);Ge<oe.length;Ge++)tt=de(Se,te,Ge,oe[Ge],me),tt!==null&&(s&&tt.alternate!==null&&Se.delete(tt.key===null?Ge:tt.key),Q=_(tt,Q,Ge),lt===null?Ne=tt:lt.sibling=tt,lt=tt);return s&&Se.forEach(function(ta){return a(te,ta)}),it&&Ys(te,Ge),Ne}function ke(te,Q,oe,me){if(oe==null)throw Error(r(151));for(var Ne=null,lt=null,Se=Q,Ge=Q=0,tt=null,ct=oe.next();Se!==null&&!ct.done;Ge++,ct=oe.next()){Se.index>Ge?(tt=Se,Se=null):tt=Se.sibling;var ta=ce(te,Se,ct.value,me);if(ta===null){Se===null&&(Se=tt);break}s&&Se&&ta.alternate===null&&a(te,Se),Q=_(ta,Q,Ge),lt===null?Ne=ta:lt.sibling=ta,lt=ta,Se=tt}if(ct.done)return l(te,Se),it&&Ys(te,Ge),Ne;if(Se===null){for(;!ct.done;Ge++,ct=oe.next())ct=ge(te,ct.value,me),ct!==null&&(Q=_(ct,Q,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return it&&Ys(te,Ge),Ne}for(Se=u(Se);!ct.done;Ge++,ct=oe.next())ct=de(Se,te,Ge,ct.value,me),ct!==null&&(s&&ct.alternate!==null&&Se.delete(ct.key===null?Ge:ct.key),Q=_(ct,Q,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return s&&Se.forEach(function(FN){return a(te,FN)}),it&&Ys(te,Ge),Ne}function At(te,Q,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===P&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ne=oe.key;Q!==null;){if(Q.key===Ne){if(Ne=oe.type,Ne===P){if(Q.tag===7){l(te,Q.sibling),me=g(Q,oe.props.children),me.return=te,te=me;break e}}else if(Q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&Wa(Ne)===Q.type){l(te,Q.sibling),me=g(Q,oe.props),Yc(me,oe),me.return=te,te=me;break e}l(te,Q);break}else a(te,Q);Q=Q.sibling}oe.type===P?(me=Ga(oe.props.children,te.mode,me,oe.key),me.return=te,te=me):(me=oh(oe.type,oe.key,oe.props,null,te.mode,me),Yc(me,oe),me.return=te,te=me)}return S(te);case A:e:{for(Ne=oe.key;Q!==null;){if(Q.key===Ne)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){l(te,Q.sibling),me=g(Q,oe.children||[]),me.return=te,te=me;break e}else{l(te,Q);break}else a(te,Q);Q=Q.sibling}me=xg(oe,te.mode,me),me.return=te,te=me}return S(te);case T:return oe=Wa(oe),At(te,Q,oe,me)}if(ee(oe))return xe(te,Q,oe,me);if(O(oe)){if(Ne=O(oe),typeof Ne!="function")throw Error(r(150));return oe=Ne.call(oe),ke(te,Q,oe,me)}if(typeof oe.then=="function")return At(te,Q,mh(oe),me);if(oe.$$typeof===z)return At(te,Q,uh(te,oe),me);gh(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Q!==null&&Q.tag===6?(l(te,Q.sibling),me=g(Q,oe),me.return=te,te=me):(l(te,Q),me=wg(oe,te.mode,me),me.return=te,te=me),S(te)):l(te,Q)}return function(te,Q,oe,me){try{Kc=0;var Ne=At(te,Q,oe,me);return pl=null,Ne}catch(Se){if(Se===gl||Se===hh)throw Se;var lt=ir(29,Se,null,te.mode);return lt.lanes=me,lt.return=te,lt}finally{}}}var Za=Cv(!0),kv=Cv(!1),Li=!1;function Mg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ui(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zi(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(dt&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=ah(s),mv(s,null,l),a}return ih(s,u,a,l),ah(s)}function Qc(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,xc(s,l)}}function Vg(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?g=_=a:_=_.next=a}else g=_=a;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var jg=!1;function Xc(){if(jg){var s=ml;if(s!==null)throw s}}function Wc(s,a,l,u){jg=!1;var g=s.updateQueue;Li=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var K=j,le=K.next;K.next=null,S===null?_=le:S.next=le,S=K;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,j=fe.lastBaseUpdate,j!==S&&(j===null?fe.firstBaseUpdate=le:j.next=le,fe.lastBaseUpdate=K))}if(_!==null){var ge=g.baseState;S=0,fe=le=K=null,j=_;do{var ce=j.lane&-536870913,de=ce!==j.lane;if(de?(et&ce)===ce:(u&ce)===ce){ce!==0&&ce===fl&&(jg=!0),fe!==null&&(fe=fe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var xe=s,ke=j;ce=a;var At=l;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){ge=xe.call(At,ge,ce);break e}ge=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,ce=typeof xe=="function"?xe.call(At,ge,ce):xe,ce==null)break e;ge=y({},ge,ce);break e;case 2:Li=!0}}ce=j.callback,ce!==null&&(s.flags|=64,de&&(s.flags|=8192),de=g.callbacks,de===null?g.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},fe===null?(le=fe=de,K=ge):fe=fe.next=de,S|=ce;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;de=j,j=de.next,de.next=null,g.lastBaseUpdate=de,g.shared.pending=null}}while(!0);fe===null&&(K=ge),g.baseState=K,g.firstBaseUpdate=le,g.lastBaseUpdate=fe,_===null&&(g.shared.lanes=0),$i|=S,s.lanes=S,s.memoizedState=ge}}function Dv(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Ov(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Dv(l[s],a)}var yl=B(null),ph=B(0);function Mv(s,a){s=ii,se(ph,s),se(yl,a),ii=s|a.baseLanes}function Lg(){se(ph,ii),se(yl,yl.current)}function Ug(){ii=ph.current,Y(yl),Y(ph)}var ar=B(null),Ir=null;function Fi(s){var a=s.alternate;se(Gt,Gt.current&1),se(ar,s),Ir===null&&(a===null||yl.current!==null||a.memoizedState!==null)&&(Ir=s)}function zg(s){se(Gt,Gt.current),se(ar,s),Ir===null&&(Ir=s)}function Pv(s){s.tag===22?(se(Gt,Gt.current),se(ar,s),Ir===null&&(Ir=s)):Bi()}function Bi(){se(Gt,Gt.current),se(ar,ar.current)}function or(s){Y(ar),Ir===s&&(Ir=null),Y(Gt)}var Gt=B(0);function yh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Gp(l)||Kp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ws=0,qe=null,Et=null,tn=null,_h=!1,_l=!1,eo=!1,vh=0,Jc=0,vl=null,kR=0;function Ut(){throw Error(r(321))}function Fg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!sr(s[l],a[l]))return!1;return!0}function Bg(s,a,l,u,g,_){return Ws=_,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,D.H=s===null||s.memoizedState===null?_b:rp,eo=!1,_=l(u,g),eo=!1,_l&&(_=jv(a,l,u,g)),Vv(s),_}function Vv(s){D.H=tu;var a=Et!==null&&Et.next!==null;if(Ws=0,tn=Et=qe=null,_h=!1,Jc=0,vl=null,a)throw Error(r(300));s===null||nn||(s=s.dependencies,s!==null&&ch(s)&&(nn=!0))}function jv(s,a,l,u){qe=s;var g=0;do{if(_l&&(vl=null),Jc=0,_l=!1,25<=g)throw Error(r(301));if(g+=1,tn=Et=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}D.H=vb,_=a(l,u)}while(_l);return _}function DR(){var s=D.H,a=s.useState()[0];return a=typeof a.then=="function"?Zc(a):a,s=s.useState()[0],(Et!==null?Et.memoizedState:null)!==s&&(qe.flags|=1024),a}function qg(){var s=vh!==0;return vh=0,s}function Hg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function $g(s){if(_h){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}_h=!1}Ws=0,tn=Et=qe=null,_l=!1,Jc=vh=0,vl=null}function Fn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?qe.memoizedState=tn=s:tn=tn.next=s,tn}function Kt(){if(Et===null){var s=qe.alternate;s=s!==null?s.memoizedState:null}else s=Et.next;var a=tn===null?qe.memoizedState:tn.next;if(a!==null)tn=a,Et=s;else{if(s===null)throw qe.alternate===null?Error(r(467)):Error(r(310));Et=s,s={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},tn===null?qe.memoizedState=tn=s:tn=tn.next=s}return tn}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(s){var a=Jc;return Jc+=1,vl===null&&(vl=[]),s=Iv(vl,s,a),a=qe,(tn===null?a.memoizedState:tn.next)===null&&(a=a.alternate,D.H=a===null||a.memoizedState===null?_b:rp),s}function wh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Zc(s);if(s.$$typeof===z)return Tn(s)}throw Error(r(438,String(s)))}function Gg(s){var a=null,l=qe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bh(),qe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=N;return a.index++,l}function Js(s,a){return typeof a=="function"?a(s):a}function xh(s){var a=Kt();return Kg(a,Et,s)}function Kg(s,a,l){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var g=s.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}a.baseQueue=g=_,u.pending=null}if(_=s.baseState,g===null)s.memoizedState=_;else{a=g.next;var j=S=null,K=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(et&ge)===ge:(Ws&ge)===ge){var ce=le.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===fl&&(fe=!0);else if((Ws&ce)===ce){le=le.next,ce===fl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(j=K=ge,S=_):K=K.next=ge,qe.lanes|=ce,$i|=ce;ge=le.action,eo&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(j=K=ce,S=_):K=K.next=ce,qe.lanes|=ge,$i|=ge;le=le.next}while(le!==null&&le!==a);if(K===null?S=_:K.next=j,!sr(_,s.memoizedState)&&(nn=!0,fe&&(l=ml,l!==null)))throw l;s.memoizedState=_,s.baseState=S,s.baseQueue=K,u.lastRenderedState=_}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Yg(s){var a=Kt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,_=a.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do _=s(_,S.action),S=S.next;while(S!==g);sr(_,a.memoizedState)||(nn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,u]}function Lv(s,a,l){var u=qe,g=Kt(),_=it;if(_){if(l===void 0)throw Error(r(407));l=l()}else l=a();var S=!sr((Et||g).memoizedState,l);if(S&&(g.memoizedState=l,nn=!0),g=g.queue,Wg(Fv.bind(null,u,g,s),[s]),g.getSnapshot!==a||S||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,bl(9,{destroy:void 0},zv.bind(null,u,g,l,a),null),St===null)throw Error(r(349));_||(Ws&127)!==0||Uv(u,a,l)}return l}function Uv(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=qe.updateQueue,a===null?(a=bh(),qe.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function zv(s,a,l,u){a.value=l,a.getSnapshot=u,Bv(a)&&qv(s)}function Fv(s,a,l){return l(function(){Bv(a)&&qv(s)})}function Bv(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!sr(s,l)}catch{return!0}}function qv(s){var a=$a(s,2);a!==null&&Zn(a,s,2)}function Qg(s){var a=Fn();if(typeof s=="function"){var l=s;if(s=l(),eo){Xt(!0);try{l()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:s},a}function Hv(s,a,l,u){return s.baseState=l,Kg(s,Et,typeof u=="function"?u:Js)}function OR(s,a,l,u,g){if(Ah(s))throw Error(r(485));if(s=a.action,s!==null){var _={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};D.T!==null?l(!0):_.isTransition=!1,u(_),l=a.pending,l===null?(_.next=a.pending=_,$v(a,_)):(_.next=l.next,a.pending=l.next=_)}}function $v(s,a){var l=a.action,u=a.payload,g=s.state;if(a.isTransition){var _=D.T,S={};D.T=S;try{var j=l(g,u),K=D.S;K!==null&&K(S,j),Gv(s,a,j)}catch(le){Xg(s,a,le)}finally{_!==null&&S.types!==null&&(_.types=S.types),D.T=_}}else try{_=l(g,u),Gv(s,a,_)}catch(le){Xg(s,a,le)}}function Gv(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Kv(s,a,u)},function(u){return Xg(s,a,u)}):Kv(s,a,l)}function Kv(s,a,l){a.status="fulfilled",a.value=l,Yv(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,$v(s,l)))}function Xg(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,Yv(a),a=a.next;while(a!==u)}s.action=null}function Yv(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Qv(s,a){return a}function Xv(s,a){if(it){var l=St.formState;if(l!==null){e:{var u=qe;if(it){if(kt){t:{for(var g=kt,_=Sr;g.nodeType!==8;){if(!_){g=null;break t}if(g=Rr(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){kt=Rr(g.nextSibling),u=g.data==="F!";break e}}Vi(u)}u=!1}u&&(a=l[0])}}return l=Fn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qv,lastRenderedState:a},l.queue=u,l=gb.bind(null,qe,u),u.dispatch=l,u=Qg(!1),_=np.bind(null,qe,!1,u.queue),u=Fn(),g={state:a,dispatch:null,action:s,pending:null},u.queue=g,l=OR.bind(null,qe,g,_,l),g.dispatch=l,u.memoizedState=s,[a,l,!1]}function Wv(s){var a=Kt();return Jv(a,Et,s)}function Jv(s,a,l){if(a=Kg(s,a,Qv)[0],s=xh(Js)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Zc(a)}catch(S){throw S===gl?hh:S}else u=a;a=Kt();var g=a.queue,_=g.dispatch;return l!==a.memoizedState&&(qe.flags|=2048,bl(9,{destroy:void 0},MR.bind(null,g,l),null)),[u,_,s]}function MR(s,a){s.action=a}function Zv(s){var a=Kt(),l=Et;if(l!==null)return Jv(a,l,s);Kt(),a=a.memoizedState,l=Kt();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function bl(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=qe.updateQueue,a===null&&(a=bh(),qe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function eb(){return Kt().memoizedState}function Eh(s,a,l,u){var g=Fn();qe.flags|=s,g.memoizedState=bl(1|a,{destroy:void 0},l,u===void 0?null:u)}function Th(s,a,l,u){var g=Kt();u=u===void 0?null:u;var _=g.memoizedState.inst;Et!==null&&u!==null&&Fg(u,Et.memoizedState.deps)?g.memoizedState=bl(a,_,l,u):(qe.flags|=s,g.memoizedState=bl(1|a,_,l,u))}function tb(s,a){Eh(8390656,8,s,a)}function Wg(s,a){Th(2048,8,s,a)}function PR(s){qe.flags|=4;var a=qe.updateQueue;if(a===null)a=bh(),qe.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function nb(s){var a=Kt().memoizedState;return PR({ref:a,nextImpl:s}),function(){if((dt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function rb(s,a){return Th(4,2,s,a)}function sb(s,a){return Th(4,4,s,a)}function ib(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function ab(s,a,l){l=l!=null?l.concat([s]):null,Th(4,4,ib.bind(null,a,s),l)}function Jg(){}function ob(s,a){var l=Kt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&Fg(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function lb(s,a){var l=Kt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&Fg(a,u[1]))return u[0];if(u=s(),eo){Xt(!0);try{s()}finally{Xt(!1)}}return l.memoizedState=[u,a],u}function Zg(s,a,l){return l===void 0||(Ws&1073741824)!==0&&(et&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=c1(),qe.lanes|=s,$i|=s,l)}function cb(s,a,l,u){return sr(l,a)?l:yl.current!==null?(s=Zg(s,l,u),sr(s,a)||(nn=!0),s):(Ws&42)===0||(Ws&1073741824)!==0&&(et&261930)===0?(nn=!0,s.memoizedState=l):(s=c1(),qe.lanes|=s,$i|=s,a)}function ub(s,a,l,u,g){var _=M.p;M.p=_!==0&&8>_?_:8;var S=D.T,j={};D.T=j,np(s,!1,a,l);try{var K=g(),le=D.S;if(le!==null&&le(j,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=CR(K,u);eu(s,a,fe,ur(s))}else eu(s,a,u,ur(s))}catch(ge){eu(s,a,{then:function(){},status:"rejected",reason:ge},ur())}finally{M.p=_,S!==null&&j.types!==null&&(S.types=j.types),D.T=S}}function VR(){}function ep(s,a,l,u){if(s.tag!==5)throw Error(r(476));var g=db(s).queue;ub(s,g,a,J,l===null?VR:function(){return hb(s),l(u)})}function db(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:J},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function hb(s){var a=db(s);a.next===null&&(a=s.alternate.memoizedState),eu(s,a.next.queue,{},ur())}function tp(){return Tn(yu)}function fb(){return Kt().memoizedState}function mb(){return Kt().memoizedState}function jR(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=ur();s=Ui(l);var u=zi(a,s,l);u!==null&&(Zn(u,a,l),Qc(u,a,l)),a={cache:Cg()},s.payload=a;return}a=a.return}}function LR(s,a,l){var u=ur();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ah(s)?pb(a,l):(l=vg(s,a,l,u),l!==null&&(Zn(l,s,u),yb(l,a,u)))}function gb(s,a,l){var u=ur();eu(s,a,l,u)}function eu(s,a,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ah(s))pb(a,g);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var S=a.lastRenderedState,j=_(S,l);if(g.hasEagerState=!0,g.eagerState=j,sr(j,S))return ih(s,a,g,0),St===null&&sh(),!1}catch{}finally{}if(l=vg(s,a,g,u),l!==null)return Zn(l,s,u),yb(l,a,u),!0}return!1}function np(s,a,l,u){if(u={lane:2,revertLane:Mp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ah(s)){if(a)throw Error(r(479))}else a=vg(s,l,u,2),a!==null&&Zn(a,s,2)}function Ah(s){var a=s.alternate;return s===qe||a!==null&&a===qe}function pb(s,a){_l=_h=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function yb(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,xc(s,l)}}var tu={readContext:Tn,use:wh,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};tu.useEffectEvent=Ut;var _b={readContext:Tn,use:wh,useCallback:function(s,a){return Fn().memoizedState=[s,a===void 0?null:a],s},useContext:Tn,useEffect:tb,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Eh(4194308,4,ib.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Eh(4194308,4,s,a)},useInsertionEffect:function(s,a){Eh(4,2,s,a)},useMemo:function(s,a){var l=Fn();a=a===void 0?null:a;var u=s();if(eo){Xt(!0);try{s()}finally{Xt(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=Fn();if(l!==void 0){var g=l(a);if(eo){Xt(!0);try{l(a)}finally{Xt(!1)}}}else g=a;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=LR.bind(null,qe,s),[u.memoizedState,s]},useRef:function(s){var a=Fn();return s={current:s},a.memoizedState=s},useState:function(s){s=Qg(s);var a=s.queue,l=gb.bind(null,qe,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Jg,useDeferredValue:function(s,a){var l=Fn();return Zg(l,s,a)},useTransition:function(){var s=Qg(!1);return s=ub.bind(null,qe,s.queue,!0,!1),Fn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=qe,g=Fn();if(it){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),St===null)throw Error(r(349));(et&127)!==0||Uv(u,a,l)}g.memoizedState=l;var _={value:l,getSnapshot:a};return g.queue=_,tb(Fv.bind(null,u,_,s),[s]),u.flags|=2048,bl(9,{destroy:void 0},zv.bind(null,u,_,l,a),null),l},useId:function(){var s=Fn(),a=St.identifierPrefix;if(it){var l=bs,u=vs;l=(u&~(1<<32-Ct(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=vh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=kR++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:tp,useFormState:Xv,useActionState:Xv,useOptimistic:function(s){var a=Fn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=np.bind(null,qe,!0,l),l.dispatch=a,[s,a]},useMemoCache:Gg,useCacheRefresh:function(){return Fn().memoizedState=jR.bind(null,qe)},useEffectEvent:function(s){var a=Fn(),l={impl:s};return a.memoizedState=l,function(){if((dt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},rp={readContext:Tn,use:wh,useCallback:ob,useContext:Tn,useEffect:Wg,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:sb,useMemo:lb,useReducer:xh,useRef:eb,useState:function(){return xh(Js)},useDebugValue:Jg,useDeferredValue:function(s,a){var l=Kt();return cb(l,Et.memoizedState,s,a)},useTransition:function(){var s=xh(Js)[0],a=Kt().memoizedState;return[typeof s=="boolean"?s:Zc(s),a]},useSyncExternalStore:Lv,useId:fb,useHostTransitionStatus:tp,useFormState:Wv,useActionState:Wv,useOptimistic:function(s,a){var l=Kt();return Hv(l,Et,s,a)},useMemoCache:Gg,useCacheRefresh:mb};rp.useEffectEvent=nb;var vb={readContext:Tn,use:wh,useCallback:ob,useContext:Tn,useEffect:Wg,useImperativeHandle:ab,useInsertionEffect:rb,useLayoutEffect:sb,useMemo:lb,useReducer:Yg,useRef:eb,useState:function(){return Yg(Js)},useDebugValue:Jg,useDeferredValue:function(s,a){var l=Kt();return Et===null?Zg(l,s,a):cb(l,Et.memoizedState,s,a)},useTransition:function(){var s=Yg(Js)[0],a=Kt().memoizedState;return[typeof s=="boolean"?s:Zc(s),a]},useSyncExternalStore:Lv,useId:fb,useHostTransitionStatus:tp,useFormState:Zv,useActionState:Zv,useOptimistic:function(s,a){var l=Kt();return Et!==null?Hv(l,Et,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Gg,useCacheRefresh:mb};vb.useEffectEvent=nb;function sp(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:y({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ip={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=ur(),g=Ui(u);g.payload=a,l!=null&&(g.callback=l),a=zi(s,g,u),a!==null&&(Zn(a,s,u),Qc(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=ur(),g=Ui(u);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=zi(s,g,u),a!==null&&(Zn(a,s,u),Qc(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=ur(),u=Ui(l);u.tag=2,a!=null&&(u.callback=a),a=zi(s,u,l),a!==null&&(Zn(a,s,l),Qc(a,s,l))}};function bb(s,a,l,u,g,_,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,_,S):a.prototype&&a.prototype.isPureReactComponent?!Fc(l,u)||!Fc(g,_):!0}function wb(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&ip.enqueueReplaceState(a,a.state,null)}function to(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=y({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}function xb(s){rh(s)}function Eb(s){console.error(s)}function Tb(s){rh(s)}function Sh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Ab(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ap(s,a,l){return l=Ui(l),l.tag=3,l.payload={element:null},l.callback=function(){Sh(s,a)},l}function Sb(s){return s=Ui(s),s.tag=3,s}function Ib(s,a,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;s.payload=function(){return g(_)},s.callback=function(){Ab(a,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Ab(a,l,u),typeof g!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function UR(s,a,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&hl(a,l,g,!0),l=ar.current,l!==null){switch(l.tag){case 31:case 13:return Ir===null?Lh():l.alternate===null&&zt===0&&(zt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===fh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),kp(s,u,g)),!1;case 22:return l.flags|=65536,u===fh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),kp(s,u,g)),!1}throw Error(r(435,l.tag))}return kp(s,u,g),Lh(),!1}if(it)return a=ar.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==Ag&&(s=Error(r(422),{cause:u}),Hc(Er(s,l)))):(u!==Ag&&(a=Error(r(423),{cause:u}),Hc(Er(a,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Er(u,l),g=ap(s.stateNode,u,g),Vg(s,g),zt!==4&&(zt=2)),!1;var _=Error(r(520),{cause:u});if(_=Er(_,l),cu===null?cu=[_]:cu.push(_),zt!==4&&(zt=2),a===null)return!0;u=Er(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=ap(l.stateNode,u,s),Vg(l,s),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gi===null||!Gi.has(_))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Sb(g),Ib(g,s,l,u),Vg(l,g),!1}l=l.return}while(l!==null);return!1}var op=Error(r(461)),nn=!1;function An(s,a,l,u){a.child=s===null?kv(a,null,l,u):Za(a,s.child,l,u)}function Rb(s,a,l,u,g){l=l.render;var _=a.ref;if("ref"in u){var S={};for(var j in u)j!=="ref"&&(S[j]=u[j])}else S=u;return Qa(a),u=Bg(s,a,l,S,_,g),j=qg(),s!==null&&!nn?(Hg(s,a,g),Zs(s,a,g)):(it&&j&&Eg(a),a.flags|=1,An(s,a,u,g),a.child)}function Nb(s,a,l,u,g){if(s===null){var _=l.type;return typeof _=="function"&&!bg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Cb(s,a,_,u,g)):(s=oh(l.type,null,u,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(_=s.child,!gp(s,g)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:Fc,l(S,u)&&s.ref===a.ref)return Zs(s,a,g)}return a.flags|=1,s=Ks(_,u),s.ref=a.ref,s.return=a,a.child=s}function Cb(s,a,l,u,g){if(s!==null){var _=s.memoizedProps;if(Fc(_,u)&&s.ref===a.ref)if(nn=!1,a.pendingProps=u=_,gp(s,g))(s.flags&131072)!==0&&(nn=!0);else return a.lanes=s.lanes,Zs(s,a,g)}return lp(s,a,l,u,g)}function kb(s,a,l,u){var g=u.children,_=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(u=a.child=s.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,a.child=null;return Db(s,a,_,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&dh(a,_!==null?_.cachePool:null),_!==null?Mv(a,_):Lg(),Pv(a);else return u=a.lanes=536870912,Db(s,a,_!==null?_.baseLanes|l:l,l,u)}else _!==null?(dh(a,_.cachePool),Mv(a,_),Bi(),a.memoizedState=null):(s!==null&&dh(a,null),Lg(),Bi());return An(s,a,g,l),a.child}function nu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Db(s,a,l,u,g){var _=Dg();return _=_===null?null:{parent:en._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},s!==null&&dh(a,null),Lg(),Pv(a),s!==null&&hl(s,a,u,!0),a.childLanes=g,null}function Ih(s,a){return a=Nh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Ob(s,a,l){return Za(a,s.child,null,l),s=Ih(a,a.pendingProps),s.flags|=2,or(a),a.memoizedState=null,s}function zR(s,a,l){var u=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(it){if(u.mode==="hidden")return s=Ih(a,u),a.lanes=536870912,nu(null,s);if(zg(a),(s=kt)?(s=$1(s,Sr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Mi!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},l=pv(s),l.return=a,a.child=l,En=a,kt=null)):s=null,s===null)throw Vi(a);return a.lanes=536870912,null}return Ih(a,u)}var _=s.memoizedState;if(_!==null){var S=_.dehydrated;if(zg(a),g)if(a.flags&256)a.flags&=-257,a=Ob(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(nn||hl(s,a,l,!1),g=(l&s.childLanes)!==0,nn||g){if(u=St,u!==null&&(S=Ec(u,l),S!==0&&S!==_.retryLane))throw _.retryLane=S,$a(s,S),Zn(u,s,S),op;Lh(),a=Ob(s,a,l)}else s=_.treeContext,kt=Rr(S.nextSibling),En=a,it=!0,Pi=null,Sr=!1,s!==null&&vv(a,s),a=Ih(a,u),a.flags|=4096;return a}return s=Ks(s.child,{mode:u.mode,children:u.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Rh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function lp(s,a,l,u,g){return Qa(a),l=Bg(s,a,l,u,void 0,g),u=qg(),s!==null&&!nn?(Hg(s,a,g),Zs(s,a,g)):(it&&u&&Eg(a),a.flags|=1,An(s,a,l,g),a.child)}function Mb(s,a,l,u,g,_){return Qa(a),a.updateQueue=null,l=jv(a,u,l,g),Vv(s),u=qg(),s!==null&&!nn?(Hg(s,a,_),Zs(s,a,_)):(it&&u&&Eg(a),a.flags|=1,An(s,a,l,_),a.child)}function Pb(s,a,l,u,g){if(Qa(a),a.stateNode===null){var _=ll,S=l.contextType;typeof S=="object"&&S!==null&&(_=Tn(S)),_=new l(u,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ip,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=u,_.state=a.memoizedState,_.refs={},Mg(a),S=l.contextType,_.context=typeof S=="object"&&S!==null?Tn(S):ll,_.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(sp(a,l,S,u),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&ip.enqueueReplaceState(_,_.state,null),Wc(a,u,_,g),Xc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){_=a.stateNode;var j=a.memoizedProps,K=to(l,j);_.props=K;var le=_.context,fe=l.contextType;S=ll,typeof fe=="object"&&fe!==null&&(S=Tn(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||le!==S)&&wb(a,_,u,S),Li=!1;var ce=a.memoizedState;_.state=ce,Wc(a,u,_,g),Xc(),le=a.memoizedState,j||ce!==le||Li?(typeof ge=="function"&&(sp(a,l,ge,u),le=a.memoizedState),(K=Li||bb(a,l,K,u,ce,le,S))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=le),_.props=u,_.state=le,_.context=S,u=K):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{_=a.stateNode,Pg(s,a),S=a.memoizedProps,fe=to(l,S),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,K=ll,typeof le=="object"&&le!==null&&(K=Tn(le)),j=l.getDerivedStateFromProps,(le=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ge||ce!==K)&&wb(a,_,u,K),Li=!1,ce=a.memoizedState,_.state=ce,Wc(a,u,_,g),Xc();var de=a.memoizedState;S!==ge||ce!==de||Li||s!==null&&s.dependencies!==null&&ch(s.dependencies)?(typeof j=="function"&&(sp(a,l,j,u),de=a.memoizedState),(fe=Li||bb(a,l,fe,u,ce,de,K)||s!==null&&s.dependencies!==null&&ch(s.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,de,K),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,de,K)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=de),_.props=u,_.state=de,_.context=K,u=fe):(typeof _.componentDidUpdate!="function"||S===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),u=!1)}return _=u,Rh(s,a),u=(a.flags&128)!==0,_||u?(_=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,s!==null&&u?(a.child=Za(a,s.child,null,g),a.child=Za(a,null,l,g)):An(s,a,l,g),a.memoizedState=_.state,s=a.child):s=Zs(s,a,g),s}function Vb(s,a,l,u){return Ka(),a.flags|=256,An(s,a,l,u),a.child}var cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(s){return{baseLanes:s,cachePool:Av()}}function dp(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=cr),s}function jb(s,a,l){var u=a.pendingProps,g=!1,_=(a.flags&128)!==0,S;if((S=_)||(S=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),S&&(g=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,s===null){if(it){if(g?Fi(a):Bi(),(s=kt)?(s=$1(s,Sr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Mi!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},l=pv(s),l.return=a,a.child=l,En=a,kt=null)):s=null,s===null)throw Vi(a);return Kp(s)?a.lanes=32:a.lanes=536870912,null}var j=u.children;return u=u.fallback,g?(Bi(),g=a.mode,j=Nh({mode:"hidden",children:j},g),u=Ga(u,g,l,null),j.return=a,u.return=a,j.sibling=u,a.child=j,u=a.child,u.memoizedState=up(l),u.childLanes=dp(s,S,l),a.memoizedState=cp,nu(null,u)):(Fi(a),hp(a,j))}var K=s.memoizedState;if(K!==null&&(j=K.dehydrated,j!==null)){if(_)a.flags&256?(Fi(a),a.flags&=-257,a=fp(s,a,l)):a.memoizedState!==null?(Bi(),a.child=s.child,a.flags|=128,a=null):(Bi(),j=u.fallback,g=a.mode,u=Nh({mode:"visible",children:u.children},g),j=Ga(j,g,l,null),j.flags|=2,u.return=a,j.return=a,u.sibling=j,a.child=u,Za(a,s.child,null,l),u=a.child,u.memoizedState=up(l),u.childLanes=dp(s,S,l),a.memoizedState=cp,a=nu(null,u));else if(Fi(a),Kp(j)){if(S=j.nextSibling&&j.nextSibling.dataset,S)var le=S.dgst;S=le,u=Error(r(419)),u.stack="",u.digest=S,Hc({value:u,source:null,stack:null}),a=fp(s,a,l)}else if(nn||hl(s,a,l,!1),S=(l&s.childLanes)!==0,nn||S){if(S=St,S!==null&&(u=Ec(S,l),u!==0&&u!==K.retryLane))throw K.retryLane=u,$a(s,u),Zn(S,s,u),op;Gp(j)||Lh(),a=fp(s,a,l)}else Gp(j)?(a.flags|=192,a.child=s.child,a=null):(s=K.treeContext,kt=Rr(j.nextSibling),En=a,it=!0,Pi=null,Sr=!1,s!==null&&vv(a,s),a=hp(a,u.children),a.flags|=4096);return a}return g?(Bi(),j=u.fallback,g=a.mode,K=s.child,le=K.sibling,u=Ks(K,{mode:"hidden",children:u.children}),u.subtreeFlags=K.subtreeFlags&65011712,le!==null?j=Ks(le,j):(j=Ga(j,g,l,null),j.flags|=2),j.return=a,u.return=a,u.sibling=j,a.child=u,nu(null,u),u=a.child,j=s.child.memoizedState,j===null?j=up(l):(g=j.cachePool,g!==null?(K=en._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=Av(),j={baseLanes:j.baseLanes|l,cachePool:g}),u.memoizedState=j,u.childLanes=dp(s,S,l),a.memoizedState=cp,nu(s.child,u)):(Fi(a),l=s.child,s=l.sibling,l=Ks(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(S=a.deletions,S===null?(a.deletions=[s],a.flags|=16):S.push(s)),a.child=l,a.memoizedState=null,l)}function hp(s,a){return a=Nh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Nh(s,a){return s=ir(22,s,null,a),s.lanes=0,s}function fp(s,a,l){return Za(a,s.child,null,l),s=hp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Lb(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),Rg(s.return,a,l)}function mp(s,a,l,u,g,_){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:_}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=g,S.treeForkCount=_)}function Ub(s,a,l){var u=a.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=Gt.current,j=(S&2)!==0;if(j?(S=S&1|2,a.flags|=128):S&=1,se(Gt,S),An(s,a,u,l),u=it?qc:0,!j&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Lb(s,l,a);else if(s.tag===19)Lb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)s=l.alternate,s!==null&&yh(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),mp(a,!1,g,l,_,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&yh(s)===null){a.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}mp(a,!0,l,null,_,u);break;case"together":mp(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Zs(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),$i|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(hl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=Ks(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Ks(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function gp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ch(s)))}function FR(s,a,l){switch(a.tag){case 3:Me(a,a.stateNode.containerInfo),ji(a,en,s.memoizedState.cache),Ka();break;case 27:case 5:_e(a);break;case 4:Me(a,a.stateNode.containerInfo);break;case 10:ji(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,zg(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Fi(a),a.flags|=128,null):(l&a.child.childLanes)!==0?jb(s,a,l):(Fi(a),s=Zs(s,a,l),s!==null?s.sibling:null);Fi(a);break;case 19:var g=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(hl(s,a,l,!1),u=(l&a.childLanes)!==0),g){if(u)return Ub(s,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),se(Gt,Gt.current),u)break;return null;case 22:return a.lanes=0,kb(s,a,l,a.pendingProps);case 24:ji(a,en,s.memoizedState.cache)}return Zs(s,a,l)}function zb(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)nn=!0;else{if(!gp(s,l)&&(a.flags&128)===0)return nn=!1,FR(s,a,l);nn=(s.flags&131072)!==0}else nn=!1,it&&(a.flags&1048576)!==0&&_v(a,qc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(s=Wa(a.elementType),a.type=s,typeof s=="function")bg(s)?(u=to(s,u),a.tag=1,a=Pb(null,a,s,u,l)):(a.tag=0,a=lp(null,a,s,u,l));else{if(s!=null){var g=s.$$typeof;if(g===H){a.tag=11,a=Rb(null,a,s,u,l);break e}else if(g===R){a.tag=14,a=Nb(null,a,s,u,l);break e}}throw a=G(s)||s,Error(r(306,a,""))}}return a;case 0:return lp(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,g=to(u,a.pendingProps),Pb(s,a,u,g,l);case 3:e:{if(Me(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var _=a.memoizedState;g=_.element,Pg(s,a),Wc(a,u,null,l);var S=a.memoizedState;if(u=S.cache,ji(a,en,u),u!==_.cache&&Ng(a,[en],l,!0),Xc(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Vb(s,a,u,l);break e}else if(u!==g){g=Er(Error(r(424)),a),Hc(g),a=Vb(s,a,u,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(kt=Rr(s.firstChild),En=a,it=!0,Pi=null,Sr=!0,l=kv(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ka(),u===g){a=Zs(s,a,l);break e}An(s,a,u,l)}a=a.child}return a;case 26:return Rh(s,a),s===null?(l=W1(a.type,null,a.pendingProps,null))?a.memoizedState=l:it||(l=a.type,s=a.pendingProps,u=$h(ye.current).createElement(l),u[Wt]=a,u[mn]=s,Sn(u,l,s),Jt(u),a.stateNode=u):a.memoizedState=W1(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return _e(a),s===null&&it&&(u=a.stateNode=Y1(a.type,a.pendingProps,ye.current),En=a,Sr=!0,g=kt,Xi(a.type)?(Yp=g,kt=Rr(u.firstChild)):kt=g),An(s,a,a.pendingProps.children,l),Rh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&it&&((g=u=kt)&&(u=yN(u,a.type,a.pendingProps,Sr),u!==null?(a.stateNode=u,En=a,kt=Rr(u.firstChild),Sr=!1,g=!0):g=!1),g||Vi(a)),_e(a),g=a.type,_=a.pendingProps,S=s!==null?s.memoizedProps:null,u=_.children,qp(g,_)?u=null:S!==null&&qp(g,S)&&(a.flags|=32),a.memoizedState!==null&&(g=Bg(s,a,DR,null,null,l),yu._currentValue=g),Rh(s,a),An(s,a,u,l),a.child;case 6:return s===null&&it&&((s=l=kt)&&(l=_N(l,a.pendingProps,Sr),l!==null?(a.stateNode=l,En=a,kt=null,s=!0):s=!1),s||Vi(a)),null;case 13:return jb(s,a,l);case 4:return Me(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=Za(a,null,u,l):An(s,a,u,l),a.child;case 11:return Rb(s,a,a.type,a.pendingProps,l);case 7:return An(s,a,a.pendingProps,l),a.child;case 8:return An(s,a,a.pendingProps.children,l),a.child;case 12:return An(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,ji(a,a.type,u.value),An(s,a,u.children,l),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,Qa(a),g=Tn(g),u=u(g),a.flags|=1,An(s,a,u,l),a.child;case 14:return Nb(s,a,a.type,a.pendingProps,l);case 15:return Cb(s,a,a.type,a.pendingProps,l);case 19:return Ub(s,a,l);case 31:return zR(s,a,l);case 22:return kb(s,a,l,a.pendingProps);case 24:return Qa(a),u=Tn(en),s===null?(g=Dg(),g===null&&(g=St,_=Cg(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=l),g=_),a.memoizedState={parent:u,cache:g},Mg(a),ji(a,en,g)):((s.lanes&l)!==0&&(Pg(s,a),Wc(a,null,null,l),Xc()),g=s.memoizedState,_=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),ji(a,en,u)):(u=_.cache,ji(a,en,u),u!==g.cache&&Ng(a,[en],l,!0))),An(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ei(s){s.flags|=4}function pp(s,a,l,u,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(f1())s.flags|=8192;else throw Ja=fh,Og}else s.flags&=-16777217}function Fb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!nw(a))if(f1())s.flags|=8192;else throw Ja=fh,Og}function Ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?yr():536870912,s.lanes|=a,Tl|=a)}function ru(s,a){if(!it)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Dt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function BR(s,a,l){var u=a.pendingProps;switch(Tg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Xs(en),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(dl(a)?ei(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Sg())),Dt(a),null;case 26:var g=a.type,_=a.memoizedState;return s===null?(ei(a),_!==null?(Dt(a),Fb(a,_)):(Dt(a),pp(a,g,null,u,l))):_?_!==s.memoizedState?(ei(a),Dt(a),Fb(a,_)):(Dt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==u&&ei(a),Dt(a),pp(a,g,s,u,l)),null;case 27:if(Te(a),l=ye.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ei(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}s=ie.current,dl(a)?bv(a):(s=Y1(g,u,l),a.stateNode=s,ei(a))}return Dt(a),null;case 5:if(Te(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ei(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}if(_=ie.current,dl(a))bv(a);else{var S=$h(ye.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[Wt]=a,_[mn]=u;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=_;e:switch(Sn(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ei(a)}}return Dt(a),pp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&ei(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=ye.current,dl(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,g=En,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Wt]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||j1(s.nodeValue,l)),s||Vi(a,!0)}else s=$h(s).createTextNode(u),s[Wt]=a,a.stateNode=s}return Dt(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(u=dl(a),l!==null){if(s===null){if(!u)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Wt]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),s=!1}else l=Sg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(or(a),a):(or(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Dt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=dl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Wt]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),g=!1}else g=Sg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(or(a),a):(or(a),null)}return or(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Ch(a,a.updateQueue),Dt(a),null);case 4:return Re(),s===null&&Lp(a.stateNode.containerInfo),Dt(a),null;case 10:return Xs(a.type),Dt(a),null;case 19:if(Y(Gt),u=a.memoizedState,u===null)return Dt(a),null;if(g=(a.flags&128)!==0,_=u.rendering,_===null)if(g)ru(u,!1);else{if(zt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(_=yh(s),_!==null){for(a.flags|=128,ru(u,!1),s=_.updateQueue,a.updateQueue=s,Ch(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)gv(l,s),l=l.sibling;return se(Gt,Gt.current&1|2),it&&Ys(a,u.treeForkCount),a.child}s=s.sibling}u.tail!==null&&$e()>Ph&&(a.flags|=128,g=!0,ru(u,!1),a.lanes=4194304)}else{if(!g)if(s=yh(_),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,Ch(a,s),ru(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!it)return Dt(a),null}else 2*$e()-u.renderingStartTime>Ph&&l!==536870912&&(a.flags|=128,g=!0,ru(u,!1),a.lanes=4194304);u.isBackwards?(_.sibling=a.child,a.child=_):(s=u.last,s!==null?s.sibling=_:a.child=_,u.last=_)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=$e(),s.sibling=null,l=Gt.current,se(Gt,g?l&1|2:l&1),it&&Ys(a,u.treeForkCount),s):(Dt(a),null);case 22:case 23:return or(a),Ug(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),l=a.updateQueue,l!==null&&Ch(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&Y(Xa),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xs(en),Dt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function qR(s,a){switch(Tg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Xs(en),Re(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Te(a),null;case 31:if(a.memoizedState!==null){if(or(a),a.alternate===null)throw Error(r(340));Ka()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(or(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ka()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Y(Gt),null;case 4:return Re(),null;case 10:return Xs(a.type),null;case 22:case 23:return or(a),Ug(),s!==null&&Y(Xa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Xs(en),null;case 25:return null;default:return null}}function Bb(s,a){switch(Tg(a),a.tag){case 3:Xs(en),Re();break;case 26:case 27:case 5:Te(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&or(a);break;case 13:or(a);break;case 19:Y(Gt);break;case 10:Xs(a.type);break;case 22:case 23:or(a),Ug(),s!==null&&Y(Xa);break;case 24:Xs(en)}}function su(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var _=l.create,S=l.inst;u=_(),S.destroy=u}l=l.next}while(l!==g)}}catch(j){yt(a,a.return,j)}}function qi(s,a,l){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&s)===s){var S=u.inst,j=S.destroy;if(j!==void 0){S.destroy=void 0,g=a;var K=l,le=j;try{le()}catch(fe){yt(g,K,fe)}}}u=u.next}while(u!==_)}}catch(fe){yt(a,a.return,fe)}}function qb(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{Ov(a,l)}catch(u){yt(s,s.return,u)}}}function Hb(s,a,l){l.props=to(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){yt(s,a,u)}}function iu(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){yt(s,a,g)}}function ws(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){yt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){yt(s,a,g)}else l.current=null}function $b(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){yt(s,s.return,g)}}function yp(s,a,l){try{var u=s.stateNode;dN(u,s.type,l,a),u[mn]=a}catch(g){yt(s,s.return,g)}}function Gb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xi(s.type)||s.tag===4}function _p(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Gb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vp(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fr));else if(u!==4&&(u===27&&Xi(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(vp(s,a,l),s=s.sibling;s!==null;)vp(s,a,l),s=s.sibling}function kh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Xi(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(kh(s,a,l),s=s.sibling;s!==null;)kh(s,a,l),s=s.sibling}function Kb(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Sn(a,u,l),a[Wt]=s,a[mn]=l}catch(_){yt(s,s.return,_)}}var ti=!1,rn=!1,bp=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,pn=null;function HR(s,a){if(s=s.containerInfo,Fp=Jh,s=av(s),fg(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,j=-1,K=-1,le=0,fe=0,ge=s,ce=null;t:for(;;){for(var de;ge!==l||g!==0&&ge.nodeType!==3||(j=S+g),ge!==_||u!==0&&ge.nodeType!==3||(K=S+u),ge.nodeType===3&&(S+=ge.nodeValue.length),(de=ge.firstChild)!==null;)ce=ge,ge=de;for(;;){if(ge===s)break t;if(ce===l&&++le===g&&(j=S),ce===_&&++fe===u&&(K=S),(de=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=de}l=j===-1||K===-1?null:{start:j,end:K}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bp={focusedElem:s,selectionRange:l},Jh=!1,pn=a;pn!==null;)if(a=pn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,pn=s;else for(;pn!==null;){switch(a=pn,_=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)g=s[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=a,g=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var xe=to(l.type,g);s=u.getSnapshotBeforeUpdate(xe,_),u.__reactInternalSnapshotBeforeUpdate=s}catch(ke){yt(l,l.return,ke)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)$p(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":$p(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,pn=s;break}pn=a.return}}function Qb(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:ri(s,l),u&4&&su(5,l);break;case 1:if(ri(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(S){yt(l,l.return,S)}else{var g=to(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(S){yt(l,l.return,S)}}u&64&&qb(l),u&512&&iu(l,l.return);break;case 3:if(ri(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ov(s,a)}catch(S){yt(l,l.return,S)}}break;case 27:a===null&&u&4&&Kb(l);case 26:case 5:ri(s,l),a===null&&u&4&&$b(l),u&512&&iu(l,l.return);break;case 12:ri(s,l);break;case 31:ri(s,l),u&4&&Jb(s,l);break;case 13:ri(s,l),u&4&&Zb(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=ZR.bind(null,l),vN(s,l))));break;case 22:if(u=l.memoizedState!==null||ti,!u){a=a!==null&&a.memoizedState!==null||rn,g=ti;var _=rn;ti=u,(rn=a)&&!_?si(s,l,(l.subtreeFlags&8772)!==0):ri(s,l),ti=g,rn=_}break;case 30:break;default:ri(s,l)}}function Xb(s){var a=s.alternate;a!==null&&(s.alternate=null,Xb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Yo(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Mt=null,Qn=!1;function ni(s,a,l){for(l=l.child;l!==null;)Wb(s,a,l),l=l.sibling}function Wb(s,a,l){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ht,l)}catch{}switch(l.tag){case 26:rn||ws(l,a),ni(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rn||ws(l,a);var u=Mt,g=Qn;Xi(l.type)&&(Mt=l.stateNode,Qn=!1),ni(s,a,l),mu(l.stateNode),Mt=u,Qn=g;break;case 5:rn||ws(l,a);case 6:if(u=Mt,g=Qn,Mt=null,ni(s,a,l),Mt=u,Qn=g,Mt!==null)if(Qn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(l.stateNode)}catch(_){yt(l,a,_)}else try{Mt.removeChild(l.stateNode)}catch(_){yt(l,a,_)}break;case 18:Mt!==null&&(Qn?(s=Mt,q1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Dl(s)):q1(Mt,l.stateNode));break;case 4:u=Mt,g=Qn,Mt=l.stateNode.containerInfo,Qn=!0,ni(s,a,l),Mt=u,Qn=g;break;case 0:case 11:case 14:case 15:qi(2,l,a),rn||qi(4,l,a),ni(s,a,l);break;case 1:rn||(ws(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Hb(l,a,u)),ni(s,a,l);break;case 21:ni(s,a,l);break;case 22:rn=(u=rn)||l.memoizedState!==null,ni(s,a,l),rn=u;break;default:ni(s,a,l)}}function Jb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Dl(s)}catch(l){yt(a,a.return,l)}}}function Zb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Dl(s)}catch(l){yt(a,a.return,l)}}function $R(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Yb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Yb),a;default:throw Error(r(435,s.tag))}}function Dh(s,a){var l=$R(s);a.forEach(function(u){if(!l.has(u)){l.add(u);var g=eN.bind(null,s,u);u.then(g,g)}})}function Xn(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],_=s,S=a,j=S;e:for(;j!==null;){switch(j.tag){case 27:if(Xi(j.type)){Mt=j.stateNode,Qn=!1;break e}break;case 5:Mt=j.stateNode,Qn=!1;break e;case 3:case 4:Mt=j.stateNode.containerInfo,Qn=!0;break e}j=j.return}if(Mt===null)throw Error(r(160));Wb(_,S,g),Mt=null,Qn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)e1(a,s),a=a.sibling}var Kr=null;function e1(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xn(a,s),Wn(s),u&4&&(qi(3,s,s.return),su(3,s),qi(5,s,s.return));break;case 1:Xn(a,s),Wn(s),u&512&&(rn||l===null||ws(l,l.return)),u&64&&ti&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Kr;if(Xn(a,s),Wn(s),u&512&&(rn||l===null||ws(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[os]||_[Wt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Sn(_,u,l),_[Wt]=s,Jt(_),u=_;break e;case"link":var S=ew("link","href",g).get(u+(l.href||""));if(S){for(var j=0;j<S.length;j++)if(_=S[j],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(j,1);break t}}_=g.createElement(u),Sn(_,u,l),g.head.appendChild(_);break;case"meta":if(S=ew("meta","content",g).get(u+(l.content||""))){for(j=0;j<S.length;j++)if(_=S[j],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(j,1);break t}}_=g.createElement(u),Sn(_,u,l),g.head.appendChild(_);break;default:throw Error(r(468,u))}_[Wt]=s,Jt(_),u=_}s.stateNode=u}else tw(g,s.type,s.stateNode);else s.stateNode=Z1(g,u,s.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?tw(g,s.type,s.stateNode):Z1(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&yp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Xn(a,s),Wn(s),u&512&&(rn||l===null||ws(l,l.return)),l!==null&&u&4&&yp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Xn(a,s),Wn(s),u&512&&(rn||l===null||ws(l,l.return)),s.flags&32){g=s.stateNode;try{Yn(g,"")}catch(xe){yt(s,s.return,xe)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,yp(s,g,l!==null?l.memoizedProps:g)),u&1024&&(bp=!0);break;case 6:if(Xn(a,s),Wn(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(xe){yt(s,s.return,xe)}}break;case 3:if(Yh=null,g=Kr,Kr=Gh(a.containerInfo),Xn(a,s),Kr=g,Wn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Dl(a.containerInfo)}catch(xe){yt(s,s.return,xe)}bp&&(bp=!1,t1(s));break;case 4:u=Kr,Kr=Gh(s.stateNode.containerInfo),Xn(a,s),Wn(s),Kr=u;break;case 12:Xn(a,s),Wn(s);break;case 31:Xn(a,s),Wn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Dh(s,u)));break;case 13:Xn(a,s),Wn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Mh=$e()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Dh(s,u)));break;case 22:g=s.memoizedState!==null;var K=l!==null&&l.memoizedState!==null,le=ti,fe=rn;if(ti=le||g,rn=fe||K,Xn(a,s),rn=fe,ti=le,Wn(s),u&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||K||ti||rn||no(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){K=l=a;try{if(_=K.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{j=K.stateNode;var ge=K.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(xe){yt(K,K.return,xe)}}}else if(a.tag===6){if(l===null){K=a;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(xe){yt(K,K.return,xe)}}}else if(a.tag===18){if(l===null){K=a;try{var de=K.stateNode;g?H1(de,!0):H1(K.stateNode,!1)}catch(xe){yt(K,K.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Dh(s,l))));break;case 19:Xn(a,s),Wn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Dh(s,u)));break;case 30:break;case 21:break;default:Xn(a,s),Wn(s)}}function Wn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(Gb(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,_=_p(s);kh(s,_,g);break;case 5:var S=l.stateNode;l.flags&32&&(Yn(S,""),l.flags&=-33);var j=_p(s);kh(s,j,S);break;case 3:case 4:var K=l.stateNode.containerInfo,le=_p(s);vp(s,le,K);break;default:throw Error(r(161))}}catch(fe){yt(s,s.return,fe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function t1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;t1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function ri(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qb(s,a.alternate,a),a=a.sibling}function no(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:qi(4,a,a.return),no(a);break;case 1:ws(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Hb(a,a.return,l),no(a);break;case 27:mu(a.stateNode);case 26:case 5:ws(a,a.return),no(a);break;case 22:a.memoizedState===null&&no(a);break;case 30:no(a);break;default:no(a)}s=s.sibling}}function si(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=s,_=a,S=_.flags;switch(_.tag){case 0:case 11:case 15:si(g,_,l),su(4,_);break;case 1:if(si(g,_,l),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(le){yt(u,u.return,le)}if(u=_,g=u.updateQueue,g!==null){var j=u.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)Dv(K[g],j)}catch(le){yt(u,u.return,le)}}l&&S&64&&qb(_),iu(_,_.return);break;case 27:Kb(_);case 26:case 5:si(g,_,l),l&&u===null&&S&4&&$b(_),iu(_,_.return);break;case 12:si(g,_,l);break;case 31:si(g,_,l),l&&S&4&&Jb(g,_);break;case 13:si(g,_,l),l&&S&4&&Zb(g,_);break;case 22:_.memoizedState===null&&si(g,_,l),iu(_,_.return);break;case 30:break;default:si(g,_,l)}a=a.sibling}}function wp(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&$c(l))}function xp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$c(s))}function Yr(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)n1(s,a,l,u),a=a.sibling}function n1(s,a,l,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(s,a,l,u),g&2048&&su(9,a);break;case 1:Yr(s,a,l,u);break;case 3:Yr(s,a,l,u),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$c(s)));break;case 12:if(g&2048){Yr(s,a,l,u),s=a.stateNode;try{var _=a.memoizedProps,S=_.id,j=_.onPostCommit;typeof j=="function"&&j(S,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(K){yt(a,a.return,K)}}else Yr(s,a,l,u);break;case 31:Yr(s,a,l,u);break;case 13:Yr(s,a,l,u);break;case 23:break;case 22:_=a.stateNode,S=a.alternate,a.memoizedState!==null?_._visibility&2?Yr(s,a,l,u):au(s,a):_._visibility&2?Yr(s,a,l,u):(_._visibility|=2,wl(s,a,l,u,(a.subtreeFlags&10256)!==0||!1)),g&2048&&wp(S,a);break;case 24:Yr(s,a,l,u),g&2048&&xp(a.alternate,a);break;default:Yr(s,a,l,u)}}function wl(s,a,l,u,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=s,S=a,j=l,K=u,le=S.flags;switch(S.tag){case 0:case 11:case 15:wl(_,S,j,K,g),su(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&2?wl(_,S,j,K,g):au(_,S):(fe._visibility|=2,wl(_,S,j,K,g)),g&&le&2048&&wp(S.alternate,S);break;case 24:wl(_,S,j,K,g),g&&le&2048&&xp(S.alternate,S);break;default:wl(_,S,j,K,g)}a=a.sibling}}function au(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,g=u.flags;switch(u.tag){case 22:au(l,u),g&2048&&wp(u.alternate,u);break;case 24:au(l,u),g&2048&&xp(u.alternate,u);break;default:au(l,u)}a=a.sibling}}var ou=8192;function xl(s,a,l){if(s.subtreeFlags&ou)for(s=s.child;s!==null;)r1(s,a,l),s=s.sibling}function r1(s,a,l){switch(s.tag){case 26:xl(s,a,l),s.flags&ou&&s.memoizedState!==null&&kN(l,Kr,s.memoizedState,s.memoizedProps);break;case 5:xl(s,a,l);break;case 3:case 4:var u=Kr;Kr=Gh(s.stateNode.containerInfo),xl(s,a,l),Kr=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=ou,ou=16777216,xl(s,a,l),ou=u):xl(s,a,l));break;default:xl(s,a,l)}}function s1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function lu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,a1(u,s)}s1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)i1(s),s=s.sibling}function i1(s){switch(s.tag){case 0:case 11:case 15:lu(s),s.flags&2048&&qi(9,s,s.return);break;case 3:lu(s);break;case 12:lu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Oh(s)):lu(s);break;default:lu(s)}}function Oh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,a1(u,s)}s1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:qi(8,a,a.return),Oh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Oh(a));break;default:Oh(a)}s=s.sibling}}function a1(s,a){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:qi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$c(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,pn=u;else e:for(l=s;pn!==null;){u=pn;var g=u.sibling,_=u.return;if(Xb(u),u===l){pn=null;break e}if(g!==null){g.return=_,pn=g;break e}pn=_}}}var GR={getCacheForType:function(s){var a=Tn(en),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return Tn(en).controller.signal}},KR=typeof WeakMap=="function"?WeakMap:Map,dt=0,St=null,We=null,et=0,pt=0,lr=null,Hi=!1,El=!1,Ep=!1,ii=0,zt=0,$i=0,ro=0,Tp=0,cr=0,Tl=0,cu=null,Jn=null,Ap=!1,Mh=0,o1=0,Ph=1/0,Vh=null,Gi=null,cn=0,Ki=null,Al=null,ai=0,Sp=0,Ip=null,l1=null,uu=0,Rp=null;function ur(){return(dt&2)!==0&&et!==0?et&-et:D.T!==null?Mp():jd()}function c1(){if(cr===0)if((et&536870912)===0||it){var s=Bs;Bs<<=1,(Bs&3932160)===0&&(Bs=262144),cr=s}else cr=536870912;return s=ar.current,s!==null&&(s.flags|=32),cr}function Zn(s,a,l){(s===St&&(pt===2||pt===9)||s.cancelPendingCommit!==null)&&(Sl(s,0),Yi(s,et,cr,!1)),ka(s,l),((dt&2)===0||s!==St)&&(s===St&&((dt&2)===0&&(ro|=l),zt===4&&Yi(s,et,cr,!1)),xs(s))}function u1(s,a,l){if((dt&6)!==0)throw Error(r(327));var u=!l&&(a&127)===0&&(a&s.expiredLanes)===0||wn(s,a),g=u?XR(s,a):Cp(s,a,!0),_=u;do{if(g===0){El&&!u&&Yi(s,a,0,!1);break}else{if(l=s.current.alternate,_&&!YR(l)){g=Cp(s,a,!1),_=!1;continue}if(g===2){if(_=a,s.errorRecoveryDisabledLanes&_)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var j=s;g=cu;var K=j.current.memoizedState.isDehydrated;if(K&&(Sl(j,S).flags|=256),S=Cp(j,S,!1),S!==2){if(Ep&&!K){j.errorRecoveryDisabledLanes|=_,ro|=_,g=4;break e}_=Jn,Jn=g,_!==null&&(Jn===null?Jn=_:Jn.push.apply(Jn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){Sl(s,0),Yi(s,a,0,!0);break}e:{switch(u=s,_=g,_){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Yi(u,a,cr,!Hi);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Mh+300-$e(),10<g)){if(Yi(u,a,cr,!Hi),bn(u,0,!0)!==0)break e;ai=a,u.timeoutHandle=F1(d1.bind(null,u,l,Jn,Vh,Ap,a,cr,ro,Tl,Hi,_,"Throttled",-0,0),g);break e}d1(u,l,Jn,Vh,Ap,a,cr,ro,Tl,Hi,_,null,-0,0)}}break}while(!0);xs(s)}function d1(s,a,l,u,g,_,S,j,K,le,fe,ge,ce,de){if(s.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},r1(a,_,ge);var xe=(_&62914560)===_?Mh-$e():(_&4194048)===_?o1-$e():0;if(xe=DN(ge,xe),xe!==null){ai=_,s.cancelPendingCommit=xe(v1.bind(null,s,a,_,l,u,g,S,j,K,fe,ge,null,ce,de)),Yi(s,_,S,!le);return}}v1(s,a,_,l,u,g,S,j,K)}function YR(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],_=g.getSnapshot;g=g.value;try{if(!sr(_(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yi(s,a,l,u){a&=~Tp,a&=~ro,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var g=a;0<g;){var _=31-Ct(g),S=1<<_;u[_]=-1,g&=~S}l!==0&&Da(s,l,a)}function jh(){return(dt&6)===0?(du(0),!1):!0}function Np(){if(We!==null){if(pt===0)var s=We.return;else s=We,Qs=Ya=null,$g(s),pl=null,Kc=0,s=We;for(;s!==null;)Bb(s.alternate,s),s=s.return;We=null}}function Sl(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,mN(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ai=0,Np(),St=s,We=l=Ks(s.current,null),et=a,pt=0,lr=null,Hi=!1,El=wn(s,a),Ep=!1,Tl=cr=Tp=ro=$i=zt=0,Jn=cu=null,Ap=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var g=31-Ct(u),_=1<<g;a|=s[g],u&=~_}return ii=a,sh(),l}function h1(s,a){qe=null,D.H=tu,a===gl||a===hh?(a=Rv(),pt=3):a===Og?(a=Rv(),pt=4):pt=a===op?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,lr=a,We===null&&(zt=1,Sh(s,Er(a,s.current)))}function f1(){var s=ar.current;return s===null?!0:(et&4194048)===et?Ir===null:(et&62914560)===et||(et&536870912)!==0?s===Ir:!1}function m1(){var s=D.H;return D.H=tu,s===null?tu:s}function g1(){var s=D.A;return D.A=GR,s}function Lh(){zt=4,Hi||(et&4194048)!==et&&ar.current!==null||(El=!0),($i&134217727)===0&&(ro&134217727)===0||St===null||Yi(St,et,cr,!1)}function Cp(s,a,l){var u=dt;dt|=2;var g=m1(),_=g1();(St!==s||et!==a)&&(Vh=null,Sl(s,a)),a=!1;var S=zt;e:do try{if(pt!==0&&We!==null){var j=We,K=lr;switch(pt){case 8:Np(),S=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(a=!0);var le=pt;if(pt=0,lr=null,Il(s,j,K,le),l&&El){S=0;break e}break;default:le=pt,pt=0,lr=null,Il(s,j,K,le)}}QR(),S=zt;break}catch(fe){h1(s,fe)}while(!0);return a&&s.shellSuspendCounter++,Qs=Ya=null,dt=u,D.H=g,D.A=_,We===null&&(St=null,et=0,sh()),S}function QR(){for(;We!==null;)p1(We)}function XR(s,a){var l=dt;dt|=2;var u=m1(),g=g1();St!==s||et!==a?(Vh=null,Ph=$e()+500,Sl(s,a)):El=wn(s,a);e:do try{if(pt!==0&&We!==null){a=We;var _=lr;t:switch(pt){case 1:pt=0,lr=null,Il(s,a,_,1);break;case 2:case 9:if(Sv(_)){pt=0,lr=null,y1(a);break}a=function(){pt!==2&&pt!==9||St!==s||(pt=7),xs(s)},_.then(a,a);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Sv(_)?(pt=0,lr=null,y1(a)):(pt=0,lr=null,Il(s,a,_,7));break;case 5:var S=null;switch(We.tag){case 26:S=We.memoizedState;case 5:case 27:var j=We;if(S?nw(S):j.stateNode.complete){pt=0,lr=null;var K=j.sibling;if(K!==null)We=K;else{var le=j.return;le!==null?(We=le,Uh(le)):We=null}break t}}pt=0,lr=null,Il(s,a,_,5);break;case 6:pt=0,lr=null,Il(s,a,_,6);break;case 8:Np(),zt=6;break e;default:throw Error(r(462))}}WR();break}catch(fe){h1(s,fe)}while(!0);return Qs=Ya=null,D.H=u,D.A=g,dt=l,We!==null?0:(St=null,et=0,sh(),zt)}function WR(){for(;We!==null&&!_n();)p1(We)}function p1(s){var a=zb(s.alternate,s,ii);s.memoizedProps=s.pendingProps,a===null?Uh(s):We=a}function y1(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Mb(l,a,a.pendingProps,a.type,void 0,et);break;case 11:a=Mb(l,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:$g(a);default:Bb(l,a),a=We=gv(a,ii),a=zb(l,a,ii)}s.memoizedProps=s.pendingProps,a===null?Uh(s):We=a}function Il(s,a,l,u){Qs=Ya=null,$g(a),pl=null,Kc=0;var g=a.return;try{if(UR(s,g,a,l,et)){zt=1,Sh(s,Er(l,s.current)),We=null;return}}catch(_){if(g!==null)throw We=g,_;zt=1,Sh(s,Er(l,s.current)),We=null;return}a.flags&32768?(it||u===1?s=!0:El||(et&536870912)!==0?s=!1:(Hi=s=!0,(u===2||u===9||u===3||u===6)&&(u=ar.current,u!==null&&u.tag===13&&(u.flags|=16384))),_1(a,s)):Uh(a)}function Uh(s){var a=s;do{if((a.flags&32768)!==0){_1(a,Hi);return}s=a.return;var l=BR(a.alternate,a,ii);if(l!==null){We=l;return}if(a=a.sibling,a!==null){We=a;return}We=a=s}while(a!==null);zt===0&&(zt=5)}function _1(s,a){do{var l=qR(s.alternate,s);if(l!==null){l.flags&=32767,We=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){We=s;return}We=s=l}while(s!==null);zt=6,We=null}function v1(s,a,l,u,g,_,S,j,K){s.cancelPendingCommit=null;do zh();while(cn!==0);if((dt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(_=a.lanes|a.childLanes,_|=_g,cg(s,l,_,S,j,K),s===St&&(We=St=null,et=0),Al=a,Ki=s,ai=l,Sp=_,Ip=g,l1=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,tN(Nt,function(){return T1(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,g=M.p,M.p=2,S=dt,dt|=4;try{HR(s,a,l)}finally{dt=S,M.p=g,D.T=u}}cn=1,b1(),w1(),x1()}}function b1(){if(cn===1){cn=0;var s=Ki,a=Al,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=D.T,D.T=null;var u=M.p;M.p=2;var g=dt;dt|=4;try{e1(a,s);var _=Bp,S=av(s.containerInfo),j=_.focusedElem,K=_.selectionRange;if(S!==j&&j&&j.ownerDocument&&iv(j.ownerDocument.documentElement,j)){if(K!==null&&fg(j)){var le=K.start,fe=K.end;if(fe===void 0&&(fe=le),"selectionStart"in j)j.selectionStart=le,j.selectionEnd=Math.min(fe,j.value.length);else{var ge=j.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),xe=j.textContent.length,ke=Math.min(K.start,xe),At=K.end===void 0?ke:Math.min(K.end,xe);!de.extend&&ke>At&&(S=At,At=ke,ke=S);var te=sv(j,ke),Q=sv(j,At);if(te&&Q&&(de.rangeCount!==1||de.anchorNode!==te.node||de.anchorOffset!==te.offset||de.focusNode!==Q.node||de.focusOffset!==Q.offset)){var oe=ge.createRange();oe.setStart(te.node,te.offset),de.removeAllRanges(),ke>At?(de.addRange(oe),de.extend(Q.node,Q.offset)):(oe.setEnd(Q.node,Q.offset),de.addRange(oe))}}}}for(ge=[],de=j;de=de.parentNode;)de.nodeType===1&&ge.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ge.length;j++){var me=ge[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Jh=!!Fp,Bp=Fp=null}finally{dt=g,M.p=u,D.T=l}}s.current=a,cn=2}}function w1(){if(cn===2){cn=0;var s=Ki,a=Al,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=D.T,D.T=null;var u=M.p;M.p=2;var g=dt;dt|=4;try{Qb(s,a.alternate,a)}finally{dt=g,M.p=u,D.T=l}}cn=3}}function x1(){if(cn===4||cn===3){cn=0,Rt();var s=Ki,a=Al,l=ai,u=l1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?cn=5:(cn=0,Al=Ki=null,E1(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Gi=null),qs(l),a=a.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ht,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=D.T,g=M.p,M.p=2,D.T=null;try{for(var _=s.onRecoverableError,S=0;S<u.length;S++){var j=u[S];_(j.value,{componentStack:j.stack})}}finally{D.T=a,M.p=g}}(ai&3)!==0&&zh(),xs(s),g=s.pendingLanes,(l&261930)!==0&&(g&42)!==0?s===Rp?uu++:(uu=0,Rp=s):uu=0,du(0)}}function E1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,$c(a)))}function zh(){return b1(),w1(),x1(),T1()}function T1(){if(cn!==5)return!1;var s=Ki,a=Sp;Sp=0;var l=qs(ai),u=D.T,g=M.p;try{M.p=32>l?32:l,D.T=null,l=Ip,Ip=null;var _=Ki,S=ai;if(cn=0,Al=Ki=null,ai=0,(dt&6)!==0)throw Error(r(331));var j=dt;if(dt|=4,i1(_.current),n1(_,_.current,S,l),dt=j,du(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ht,_)}catch{}return!0}finally{M.p=g,D.T=u,E1(s,a)}}function A1(s,a,l){a=Er(l,a),a=ap(s.stateNode,a,2),s=zi(s,a,2),s!==null&&(ka(s,2),xs(s))}function yt(s,a,l){if(s.tag===3)A1(s,s,l);else for(;a!==null;){if(a.tag===3){A1(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gi===null||!Gi.has(u))){s=Er(l,s),l=Sb(2),u=zi(a,l,2),u!==null&&(Ib(l,u,a,s),ka(u,2),xs(u));break}}a=a.return}}function kp(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new KR;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(l)||(Ep=!0,g.add(l),s=JR.bind(null,s,a,l),a.then(s,s))}function JR(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,St===s&&(et&l)===l&&(zt===4||zt===3&&(et&62914560)===et&&300>$e()-Mh?(dt&2)===0&&Sl(s,0):Tp|=l,Tl===et&&(Tl=0)),xs(s)}function S1(s,a){a===0&&(a=yr()),s=$a(s,a),s!==null&&(ka(s,a),xs(s))}function ZR(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),S1(s,l)}function eN(s,a){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),S1(s,l)}function tN(s,a){return Xe(s,a)}var Fh=null,Rl=null,Dp=!1,Bh=!1,Op=!1,Qi=0;function xs(s){s!==Rl&&s.next===null&&(Rl===null?Fh=Rl=s:Rl=Rl.next=s),Bh=!0,Dp||(Dp=!0,rN())}function du(s,a){if(!Op&&Bh){Op=!0;do for(var l=!1,u=Fh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,j=u.pingedLanes;_=(1<<31-Ct(42|s)+1)-1,_&=g&~(S&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,C1(u,_))}else _=et,_=bn(u,u===St?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||wn(u,_)||(l=!0,C1(u,_));u=u.next}while(l);Op=!1}}function nN(){I1()}function I1(){Bh=Dp=!1;var s=0;Qi!==0&&fN()&&(s=Qi);for(var a=$e(),l=null,u=Fh;u!==null;){var g=u.next,_=R1(u,a);_===0?(u.next=null,l===null?Fh=g:l.next=g,g===null&&(Rl=l)):(l=u,(s!==0||(_&3)!==0)&&(Bh=!0)),u=g}cn!==0&&cn!==5||du(s),Qi!==0&&(Qi=0)}function R1(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var S=31-Ct(_),j=1<<S,K=g[S];K===-1?((j&l)===0||(j&u)!==0)&&(g[S]=Go(j,a)):K<=a&&(s.expiredLanes|=j),_&=~j}if(a=St,l=et,l=bn(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(pt===2||pt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&ft(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||wn(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&ft(u),qs(l)){case 2:case 8:l=ss;break;case 32:l=Nt;break;case 268435456:l=Qt;break;default:l=Nt}return u=N1.bind(null,s),l=Xe(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&ft(u),s.callbackPriority=2,s.callbackNode=null,2}function N1(s,a){if(cn!==0&&cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(zh()&&s.callbackNode!==l)return null;var u=et;return u=bn(s,s===St?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(u1(s,u,a),R1(s,$e()),s.callbackNode!=null&&s.callbackNode===l?N1.bind(null,s):null)}function C1(s,a){if(zh())return null;u1(s,a,!0)}function rN(){gN(function(){(dt&6)!==0?Xe(Gn,nN):I1()})}function Mp(){if(Qi===0){var s=fl;s===0&&(s=kn,kn<<=1,(kn&261888)===0&&(kn=256)),Qi=s}return Qi}function k1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Jo(""+s)}function D1(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function sN(s,a,l,u,g){if(a==="submit"&&l&&l.stateNode===g){var _=k1((g[mn]||null).action),S=u.submitter;S&&(a=(a=S[mn]||null)?k1(a.formAction):S.getAttribute("formAction"),a!==null&&(_=a,S=null));var j=new gs("action","action",null,u,g);s.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qi!==0){var K=S?D1(g,S):new FormData(g);ep(l,{pending:!0,data:K,method:g.method,action:_},null,K)}}else typeof _=="function"&&(j.preventDefault(),K=S?D1(g,S):new FormData(g),ep(l,{pending:!0,data:K,method:g.method,action:_},_,K))},currentTarget:g}]})}}for(var Pp=0;Pp<yg.length;Pp++){var Vp=yg[Pp],iN=Vp.toLowerCase(),aN=Vp[0].toUpperCase()+Vp.slice(1);Gr(iN,"on"+aN)}Gr(cv,"onAnimationEnd"),Gr(uv,"onAnimationIteration"),Gr(dv,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(xR,"onTransitionRun"),Gr(ER,"onTransitionStart"),Gr(TR,"onTransitionCancel"),Gr(hv,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),us("onBeforeInput",["compositionend","keypress","textInput","paste"]),us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function O1(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;e:{var _=void 0;if(a)for(var S=u.length-1;0<=S;S--){var j=u[S],K=j.instance,le=j.currentTarget;if(j=j.listener,K!==_&&g.isPropagationStopped())break e;_=j,g.currentTarget=le;try{_(g)}catch(fe){rh(fe)}g.currentTarget=null,_=K}else for(S=0;S<u.length;S++){if(j=u[S],K=j.instance,le=j.currentTarget,j=j.listener,K!==_&&g.isPropagationStopped())break e;_=j,g.currentTarget=le;try{_(g)}catch(fe){rh(fe)}g.currentTarget=null,_=K}}}}function Je(s,a){var l=a[Ko];l===void 0&&(l=a[Ko]=new Set);var u=s+"__bubble";l.has(u)||(M1(a,s,2,!1),l.add(u))}function jp(s,a,l){var u=0;a&&(u|=4),M1(l,s,u,a)}var qh="_reactListening"+Math.random().toString(36).slice(2);function Lp(s){if(!s[qh]){s[qh]=!0,Tc.forEach(function(l){l!=="selectionchange"&&(oN.has(l)||jp(l,!1,s),jp(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[qh]||(a[qh]=!0,jp("selectionchange",!1,a))}}function M1(s,a,l,u){switch(cw(a)){case 2:var g=PN;break;case 8:g=VN;break;default:g=Zp}l=g.bind(null,a,l,s),g=void 0,!ja||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(a,l,{capture:!0,passive:g}):s.addEventListener(a,l,!0):g!==void 0?s.addEventListener(a,l,{passive:g}):s.addEventListener(a,l,!1)}function Up(s,a,l,u,g){var _=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var j=u.stateNode.containerInfo;if(j===g)break;if(S===4)for(S=u.return;S!==null;){var K=S.tag;if((K===3||K===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;j!==null;){if(S=ls(j),S===null)return;if(K=S.tag,K===5||K===6||K===26||K===27){u=_=S;continue e}j=j.parentNode}}u=u.return}Ci(function(){var le=_,fe=vr(l),ge=[];e:{var ce=fv.get(s);if(ce!==void 0){var de=gs,xe=s;switch(s){case"keypress":if(Ua(l)===0)break e;case"keydown":case"keyup":de=eh;break;case"focusin":xe="focus",de=Fa;break;case"focusout":xe="blur",de=Fa;break;case"beforeblur":case"afterblur":de=Fa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=x;break;case cv:case uv:case dv:de=Kd;break;case hv:de=U;break;case"scroll":case"scrollend":de=Vc;break;case"wheel":de=ue;break;case"copy":case"cut":case"paste":de=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Gs;break;case"toggle":case"beforetoggle":de=Be}var ke=(a&4)!==0,At=!ke&&(s==="scroll"||s==="scrollend"),te=ke?ce!==null?ce+"Capture":null:ce;ke=[];for(var Q=le,oe;Q!==null;){var me=Q;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||te===null||(me=Br(Q,te),me!=null&&ke.push(fu(Q,me,oe))),At)break;Q=Q.return}0<ke.length&&(ce=new de(ce,xe,null,l,fe),ge.push({event:ce,listeners:ke}))}}if((a&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ce&&l!==Oc&&(xe=l.relatedTarget||l.fromElement)&&(ls(xe)||xe[as]))break e;if((de||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(xe=l.relatedTarget||l.toElement,de=le,xe=xe?ls(xe):null,xe!==null&&(At=o(xe),ke=xe.tag,xe!==At||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(de=null,xe=le),de!==xe)){if(ke=jc,me="onMouseLeave",te="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(ke=Gs,me="onPointerLeave",te="onPointerEnter",Q="pointer"),At=de==null?ce:nr(de),oe=xe==null?ce:nr(xe),ce=new ke(me,Q+"leave",de,l,fe),ce.target=At,ce.relatedTarget=oe,me=null,ls(fe)===le&&(ke=new ke(te,Q+"enter",xe,l,fe),ke.target=oe,ke.relatedTarget=At,me=ke),At=me,de&&xe)t:{for(ke=lN,te=de,Q=xe,oe=0,me=te;me;me=ke(me))oe++;me=0;for(var Ne=Q;Ne;Ne=ke(Ne))me++;for(;0<oe-me;)te=ke(te),oe--;for(;0<me-oe;)Q=ke(Q),me--;for(;oe--;){if(te===Q||Q!==null&&te===Q.alternate){ke=te;break t}te=ke(te),Q=ke(Q)}ke=null}else ke=null;de!==null&&P1(ge,ce,de,ke,!1),xe!==null&&At!==null&&P1(ge,At,xe,ke,!0)}}e:{if(ce=le?nr(le):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var lt=J_;else if(X_(ce))if(Z_)lt=vR;else{lt=yR;var Se=pR}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Wo(le.elementType)&&(lt=J_):lt=_R;if(lt&&(lt=lt(s,le))){W_(ge,lt,l,fe);break e}Se&&Se(s,ce,le),s==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Cc(ce,"number",ce.value)}switch(Se=le?nr(le):window,s){case"focusin":(X_(Se)||Se.contentEditable==="true")&&(il=Se,mg=le,Bc=null);break;case"focusout":Bc=mg=il=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,ov(ge,l,fe);break;case"selectionchange":if(wR)break;case"keydown":case"keyup":ov(ge,l,fe)}var Ge;if(ut)e:{switch(s){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else sl?Ba(s,l)&&(tt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(tt="onCompositionStart");tt&&(_s&&l.locale!=="ko"&&(sl||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&sl&&(Ge=Pc()):(ms=fe,Mc="value"in ms?ms.value:ms.textContent,sl=!0)),Se=Hh(le,tt),0<Se.length&&(tt=new ys(tt,s,null,l,fe),ge.push({event:tt,listeners:Se}),Ge?tt.data=Ge:(Ge=rl(l),Ge!==null&&(tt.data=Ge)))),(Ge=wr?hR(s,l):fR(s,l))&&(tt=Hh(le,"onBeforeInput"),0<tt.length&&(Se=new ys("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Se,listeners:tt}),Se.data=Ge)),sN(ge,s,le,l,fe)}O1(ge,a)})}function fu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Hh(s,a){for(var l=a+"Capture",u=[];s!==null;){var g=s,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Br(s,l),g!=null&&u.unshift(fu(s,g,_)),g=Br(s,a),g!=null&&u.push(fu(s,g,_))),s.tag===3)return u;s=s.return}return[]}function lN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function P1(s,a,l,u,g){for(var _=a._reactName,S=[];l!==null&&l!==u;){var j=l,K=j.alternate,le=j.stateNode;if(j=j.tag,K!==null&&K===u)break;j!==5&&j!==26&&j!==27||le===null||(K=le,g?(le=Br(l,_),le!=null&&S.unshift(fu(l,le,K))):g||(le=Br(l,_),le!=null&&S.push(fu(l,le,K)))),l=l.return}S.length!==0&&s.push({event:a,listeners:S})}var cN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function V1(s){return(typeof s=="string"?s:""+s).replace(cN,`
`).replace(uN,"")}function j1(s,a){return a=V1(a),V1(s)===a}function Tt(s,a,l,u,g,_){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Yn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Yn(s,""+u);break;case"className":rr(s,"class",u);break;case"tabIndex":rr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(s,l,u);break;case"style":Dc(s,u,_);break;case"data":if(a!=="object"){rr(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Jo(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&Tt(s,a,"name",g.name,g,null),Tt(s,a,"formEncType",g.formEncType,g,null),Tt(s,a,"formMethod",g.formMethod,g,null),Tt(s,a,"formTarget",g.formTarget,g,null)):(Tt(s,a,"encType",g.encType,g,null),Tt(s,a,"method",g.method,g,null),Tt(s,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Jo(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Fr);break;case"onScroll":u!=null&&Je("scroll",s);break;case"onScrollEnd":u!=null&&Je("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Jo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Je("beforetoggle",s),Je("toggle",s),Qo(s,"popover",u);break;case"xlinkActuate":Zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Hd.get(l)||l,Qo(s,l,u))}}function zp(s,a,l,u,g,_){switch(l){case"style":Dc(s,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Yn(s,u):(typeof u=="number"||typeof u=="bigint")&&Yn(s,""+u);break;case"onScroll":u!=null&&Je("scroll",s);break;case"onScrollEnd":u!=null&&Je("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ac.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),_=s[mn]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(a,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,g);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Qo(s,l,u)}}}function Sn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",s),Je("load",s);var u=!1,g=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(s,a,_,S,l,null)}}g&&Tt(s,a,"srcSet",l.srcSet,l,null),u&&Tt(s,a,"src",l.src,l,null);return;case"input":Je("invalid",s);var j=_=S=g=null,K=null,le=null;for(u in l)if(l.hasOwnProperty(u)){var fe=l[u];if(fe!=null)switch(u){case"name":g=fe;break;case"type":S=fe;break;case"checked":K=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":j=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Tt(s,a,u,fe,l,null)}}Fd(s,_,j,K,le,S,g,!1);return;case"select":Je("invalid",s),u=S=_=null;for(g in l)if(l.hasOwnProperty(g)&&(j=l[g],j!=null))switch(g){case"value":_=j;break;case"defaultValue":S=j;break;case"multiple":u=j;default:Tt(s,a,g,j,l,null)}a=_,l=S,s.multiple=!!u,a!=null?Si(s,!!u,a,!1):l!=null&&Si(s,!!u,l,!0);return;case"textarea":Je("invalid",s),_=g=u=null;for(S in l)if(l.hasOwnProperty(S)&&(j=l[S],j!=null))switch(S){case"value":u=j;break;case"defaultValue":g=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Tt(s,a,S,j,l,null)}Ii(s,u,g,_);return;case"option":for(K in l)if(l.hasOwnProperty(K)&&(u=l[K],u!=null))switch(K){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Tt(s,a,K,u,l,null)}return;case"dialog":Je("beforetoggle",s),Je("toggle",s),Je("cancel",s),Je("close",s);break;case"iframe":case"object":Je("load",s);break;case"video":case"audio":for(u=0;u<hu.length;u++)Je(hu[u],s);break;case"image":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"embed":case"source":case"link":Je("error",s),Je("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(u=l[le],u!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(s,a,le,u,l,null)}return;default:if(Wo(a)){for(fe in l)l.hasOwnProperty(fe)&&(u=l[fe],u!==void 0&&zp(s,a,fe,u,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(u=l[j],u!=null&&Tt(s,a,j,u,l,null))}function dN(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,j=null,K=null,le=null,fe=null;for(de in l){var ge=l[de];if(l.hasOwnProperty(de)&&ge!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":K=ge;default:u.hasOwnProperty(de)||Tt(s,a,de,null,u,ge)}}for(var ce in u){var de=u[ce];if(ge=l[ce],u.hasOwnProperty(ce)&&(de!=null||ge!=null))switch(ce){case"type":_=de;break;case"name":g=de;break;case"checked":le=de;break;case"defaultChecked":fe=de;break;case"value":S=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:de!==ge&&Tt(s,a,ce,de,u,ge)}}Xo(s,S,j,K,le,fe,_,g);return;case"select":de=S=j=ce=null;for(_ in l)if(K=l[_],l.hasOwnProperty(_)&&K!=null)switch(_){case"value":break;case"multiple":de=K;default:u.hasOwnProperty(_)||Tt(s,a,_,null,u,K)}for(g in u)if(_=u[g],K=l[g],u.hasOwnProperty(g)&&(_!=null||K!=null))switch(g){case"value":ce=_;break;case"defaultValue":j=_;break;case"multiple":S=_;default:_!==K&&Tt(s,a,g,_,u,K)}a=j,l=S,u=de,ce!=null?Si(s,!!l,ce,!1):!!u!=!!l&&(a!=null?Si(s,!!l,a,!0):Si(s,!!l,l?[]:"",!1));return;case"textarea":de=ce=null;for(j in l)if(g=l[j],l.hasOwnProperty(j)&&g!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Tt(s,a,j,null,u,g)}for(S in u)if(g=u[S],_=l[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":ce=g;break;case"defaultValue":de=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==_&&Tt(s,a,S,g,u,_)}Bd(s,ce,de);return;case"option":for(var xe in l)if(ce=l[xe],l.hasOwnProperty(xe)&&ce!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":s.selected=!1;break;default:Tt(s,a,xe,null,u,ce)}for(K in u)if(ce=u[K],de=l[K],u.hasOwnProperty(K)&&ce!==de&&(ce!=null||de!=null))switch(K){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Tt(s,a,K,ce,u,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in l)ce=l[ke],l.hasOwnProperty(ke)&&ce!=null&&!u.hasOwnProperty(ke)&&Tt(s,a,ke,null,u,ce);for(le in u)if(ce=u[le],de=l[le],u.hasOwnProperty(le)&&ce!==de&&(ce!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:Tt(s,a,le,ce,u,de)}return;default:if(Wo(a)){for(var At in l)ce=l[At],l.hasOwnProperty(At)&&ce!==void 0&&!u.hasOwnProperty(At)&&zp(s,a,At,void 0,u,ce);for(fe in u)ce=u[fe],de=l[fe],!u.hasOwnProperty(fe)||ce===de||ce===void 0&&de===void 0||zp(s,a,fe,ce,u,de);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!u.hasOwnProperty(te)&&Tt(s,a,te,null,u,ce);for(ge in u)ce=u[ge],de=l[ge],!u.hasOwnProperty(ge)||ce===de||ce==null&&de==null||Tt(s,a,ge,ce,u,de)}function L1(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],_=g.transferSize,S=g.initiatorType,j=g.duration;if(_&&j&&L1(S)){for(S=0,j=g.responseEnd,u+=1;u<l.length;u++){var K=l[u],le=K.startTime;if(le>j)break;var fe=K.transferSize,ge=K.initiatorType;fe&&L1(ge)&&(K=K.responseEnd,S+=fe*(K<j?1:(j-le)/(K-le)))}if(--u,a+=8*(_+S)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Fp=null,Bp=null;function $h(s){return s.nodeType===9?s:s.ownerDocument}function U1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z1(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function qp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hp=null;function fN(){var s=window.event;return s&&s.type==="popstate"?s===Hp?!1:(Hp=s,!0):(Hp=null,!1)}var F1=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,B1=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof B1<"u"?function(s){return B1.resolve(null).then(s).catch(pN)}:F1;function pN(s){setTimeout(function(){throw s})}function Xi(s){return s==="head"}function q1(s,a){var l=a,u=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(g),Dl(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")mu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,mu(l);for(var _=l.firstChild;_;){var S=_.nextSibling,j=_.nodeName;_[os]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=S}}else l==="body"&&mu(s.ownerDocument.body);l=g}while(l);Dl(a)}function H1(s,a){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function $p(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$p(l),Yo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function yN(s,a,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[os])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Rr(s.nextSibling),s===null)break}return null}function _N(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Rr(s.nextSibling),s===null))return null;return s}function $1(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Rr(s.nextSibling),s===null))return null;return s}function Gp(s){return s.data==="$?"||s.data==="$~"}function Kp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function vN(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Rr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Yp=null;function G1(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return Rr(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function K1(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Y1(s,a,l){switch(a=$h(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function mu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Yo(s)}var Nr=new Map,Q1=new Set;function Gh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var oi=M.d;M.d={f:bN,r:wN,D:xN,C:EN,L:TN,m:AN,X:IN,S:SN,M:RN};function bN(){var s=oi.f(),a=jh();return s||a}function wN(s){var a=_r(s);a!==null&&a.tag===5&&a.type==="form"?hb(a):oi.r(s)}var Nl=typeof document>"u"?null:document;function X1(s,a,l){var u=Nl;if(u&&typeof a=="string"&&a){var g=Kn(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Q1.has(g)||(Q1.add(g),s={rel:s,crossOrigin:l,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),Sn(a,"link",s),Jt(a),u.head.appendChild(a)))}}function xN(s){oi.D(s),X1("dns-prefetch",s,null)}function EN(s,a){oi.C(s,a),X1("preconnect",s,a)}function TN(s,a,l){oi.L(s,a,l);var u=Nl;if(u&&s&&a){var g='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Kn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Kn(l.imageSizes)+'"]')):g+='[href="'+Kn(s)+'"]';var _=g;switch(a){case"style":_=Cl(s);break;case"script":_=kl(s)}Nr.has(_)||(s=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Nr.set(_,s),u.querySelector(g)!==null||a==="style"&&u.querySelector(gu(_))||a==="script"&&u.querySelector(pu(_))||(a=u.createElement("link"),Sn(a,"link",s),Jt(a),u.head.appendChild(a)))}}function AN(s,a){oi.m(s,a);var l=Nl;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Kn(u)+'"][href="'+Kn(s)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=kl(s)}if(!Nr.has(_)&&(s=y({rel:"modulepreload",href:s},a),Nr.set(_,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(pu(_)))return}u=l.createElement("link"),Sn(u,"link",s),Jt(u),l.head.appendChild(u)}}}function SN(s,a,l){oi.S(s,a,l);var u=Nl;if(u&&s){var g=cs(u).hoistableStyles,_=Cl(s);a=a||"default";var S=g.get(_);if(!S){var j={loading:0,preload:null};if(S=u.querySelector(gu(_)))j.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Nr.get(_))&&Qp(s,l);var K=S=u.createElement("link");Jt(K),Sn(K,"link",s),K._p=new Promise(function(le,fe){K.onload=le,K.onerror=fe}),K.addEventListener("load",function(){j.loading|=1}),K.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Kh(S,a,u)}S={type:"stylesheet",instance:S,count:1,state:j},g.set(_,S)}}}function IN(s,a){oi.X(s,a);var l=Nl;if(l&&s){var u=cs(l).hoistableScripts,g=kl(s),_=u.get(g);_||(_=l.querySelector(pu(g)),_||(s=y({src:s,async:!0},a),(a=Nr.get(g))&&Xp(s,a),_=l.createElement("script"),Jt(_),Sn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function RN(s,a){oi.M(s,a);var l=Nl;if(l&&s){var u=cs(l).hoistableScripts,g=kl(s),_=u.get(g);_||(_=l.querySelector(pu(g)),_||(s=y({src:s,async:!0,type:"module"},a),(a=Nr.get(g))&&Xp(s,a),_=l.createElement("script"),Jt(_),Sn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function W1(s,a,l,u){var g=(g=ye.current)?Gh(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Cl(l.href),l=cs(g).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Cl(l.href);var _=cs(g).hoistableStyles,S=_.get(s);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,S),(_=g.querySelector(gu(s)))&&!_._p&&(S.instance=_,S.state.loading=5),Nr.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Nr.set(s,l),_||NN(g,s,l,S.state))),a&&u===null)throw Error(r(528,""));return S}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=kl(l),l=cs(g).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Cl(s){return'href="'+Kn(s)+'"'}function gu(s){return'link[rel="stylesheet"]['+s+"]"}function J1(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function NN(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Sn(a,"link",l),Jt(a),s.head.appendChild(a))}function kl(s){return'[src="'+Kn(s)+'"]'}function pu(s){return"script[async]"+s}function Z1(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Kn(l.href)+'"]');if(u)return a.instance=u,Jt(u),u;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Jt(u),Sn(u,"style",g),Kh(u,l.precedence,s),a.instance=u;case"stylesheet":g=Cl(l.href);var _=s.querySelector(gu(g));if(_)return a.state.loading|=4,a.instance=_,Jt(_),_;u=J1(l),(g=Nr.get(g))&&Qp(u,g),_=(s.ownerDocument||s).createElement("link"),Jt(_);var S=_;return S._p=new Promise(function(j,K){S.onload=j,S.onerror=K}),Sn(_,"link",u),a.state.loading|=4,Kh(_,l.precedence,s),a.instance=_;case"script":return _=kl(l.src),(g=s.querySelector(pu(_)))?(a.instance=g,Jt(g),g):(u=l,(g=Nr.get(_))&&(u=y({},l),Xp(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),Jt(g),Sn(g,"link",u),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Kh(u,l.precedence,s));return a.instance}function Kh(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var j=u[S];if(j.dataset.precedence===a)_=j;else if(_!==g)break}_?_.parentNode.insertBefore(s,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Qp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Xp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Yh=null;function ew(s,a,l){if(Yh===null){var u=new Map,g=Yh=new Map;g.set(l,u)}else g=Yh,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var _=l[g];if(!(_[os]||_[Wt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(a)||"";S=s+S;var j=u.get(S);j?j.push(_):u.set(S,[_])}}return u}function tw(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function CN(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function nw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function kN(s,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Cl(u.href),_=a.querySelector(gu(g));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Qh.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=_,Jt(_);return}_=a.ownerDocument||a,u=J1(u),(g=Nr.get(g))&&Qp(u,g),_=_.createElement("link"),Jt(_);var S=_;S._p=new Promise(function(j,K){S.onload=j,S.onerror=K}),Sn(_,"link",u),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Qh.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Wp=0;function DN(s,a){return s.stylesheets&&s.count===0&&Wh(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Wh(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+a);0<s.imgBytes&&Wp===0&&(Wp=62500*hN());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Wh(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Wp?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Xh=null;function Wh(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Xh=new Map,a.forEach(ON,s),Xh=null,Qh.call(s))}function ON(s,a){if(!(a.state.loading&4)){var l=Xh.get(s);if(l)var u=l.get(null);else{l=new Map,Xh.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}g=a.instance,S=g.getAttribute("data-precedence"),_=l.get(S)||u,_===u&&l.set(null,g),l.set(S,g),this.count++,u=Qh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var yu={$$typeof:z,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function MN(s,a,l,u,g,_,S,j,K){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.hiddenUpdates=fn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function rw(s,a,l,u,g,_,S,j,K,le,fe,ge){return s=new MN(s,a,l,S,K,le,fe,ge,j),a=1,_===!0&&(a|=24),_=ir(3,null,null,a),s.current=_,_.stateNode=s,a=Cg(),a.refCount++,s.pooledCache=a,a.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:a},Mg(_),s}function sw(s){return s?(s=ll,s):ll}function iw(s,a,l,u,g,_){g=sw(g),u.context===null?u.context=g:u.pendingContext=g,u=Ui(a),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=zi(s,u,a),l!==null&&(Zn(l,s,a),Qc(l,s,a))}function aw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Jp(s,a){aw(s,a),(s=s.alternate)&&aw(s,a)}function ow(s){if(s.tag===13||s.tag===31){var a=$a(s,67108864);a!==null&&Zn(a,s,67108864),Jp(s,67108864)}}function lw(s){if(s.tag===13||s.tag===31){var a=ur();a=Oa(a);var l=$a(s,a);l!==null&&Zn(l,s,a),Jp(s,a)}}var Jh=!0;function PN(s,a,l,u){var g=D.T;D.T=null;var _=M.p;try{M.p=2,Zp(s,a,l,u)}finally{M.p=_,D.T=g}}function VN(s,a,l,u){var g=D.T;D.T=null;var _=M.p;try{M.p=8,Zp(s,a,l,u)}finally{M.p=_,D.T=g}}function Zp(s,a,l,u){if(Jh){var g=ey(u);if(g===null)Up(s,a,u,Zh,l),uw(s,u);else if(LN(g,s,a,l,u))u.stopPropagation();else if(uw(s,u),a&4&&-1<jN.indexOf(s)){for(;g!==null;){var _=_r(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=ln(_.pendingLanes);if(S!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;S;){var K=1<<31-Ct(S);j.entanglements[1]|=K,S&=~K}xs(_),(dt&6)===0&&(Ph=$e()+500,du(0))}}break;case 31:case 13:j=$a(_,2),j!==null&&Zn(j,_,2),jh(),Jp(_,2)}if(_=ey(u),_===null&&Up(s,a,u,Zh,l),_===g)break;g=_}g!==null&&u.stopPropagation()}else Up(s,a,u,null,l)}}function ey(s){return s=vr(s),ty(s)}var Zh=null;function ty(s){if(Zh=null,s=ls(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=d(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Zh=s,null}function cw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qt()){case Gn:return 2;case ss:return 8;case Nt:case Lr:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var ny=!1,Wi=null,Ji=null,Zi=null,_u=new Map,vu=new Map,ea=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uw(s,a){switch(s){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":_u.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(a.pointerId)}}function bu(s,a,l,u,g,_){return s===null||s.nativeEvent!==_?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},a!==null&&(a=_r(a),a!==null&&ow(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function LN(s,a,l,u,g){switch(a){case"focusin":return Wi=bu(Wi,s,a,l,u,g),!0;case"dragenter":return Ji=bu(Ji,s,a,l,u,g),!0;case"mouseover":return Zi=bu(Zi,s,a,l,u,g),!0;case"pointerover":var _=g.pointerId;return _u.set(_,bu(_u.get(_)||null,s,a,l,u,g)),!0;case"gotpointercapture":return _=g.pointerId,vu.set(_,bu(vu.get(_)||null,s,a,l,u,g)),!0}return!1}function dw(s){var a=ls(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Ur(s.priority,function(){lw(l)});return}}else if(a===31){if(a=d(l),a!==null){s.blockedOn=a,Ur(s.priority,function(){lw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ef(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=ey(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Oc=u,l.target.dispatchEvent(u),Oc=null}else return a=_r(l),a!==null&&ow(a),s.blockedOn=l,!1;a.shift()}return!0}function hw(s,a,l){ef(s)&&l.delete(a)}function UN(){ny=!1,Wi!==null&&ef(Wi)&&(Wi=null),Ji!==null&&ef(Ji)&&(Ji=null),Zi!==null&&ef(Zi)&&(Zi=null),_u.forEach(hw),vu.forEach(hw)}function tf(s,a){s.blockedOn===a&&(s.blockedOn=null,ny||(ny=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UN)))}var nf=null;function fw(s){nf!==s&&(nf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nf===s&&(nf=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],g=s[a+2];if(typeof u!="function"){if(ty(u||l)===null)continue;break}var _=_r(l);_!==null&&(s.splice(a,3),a-=3,ep(_,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function Dl(s){function a(K){return tf(K,s)}Wi!==null&&tf(Wi,s),Ji!==null&&tf(Ji,s),Zi!==null&&tf(Zi,s),_u.forEach(a),vu.forEach(a);for(var l=0;l<ea.length;l++){var u=ea[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ea.length&&(l=ea[0],l.blockedOn===null);)dw(l),l.blockedOn===null&&ea.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],_=l[u+1],S=g[mn]||null;if(typeof _=="function")S||fw(l);else if(S){var j=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[mn]||null)j=S.formAction;else if(ty(g)!==null)continue}else j=S.action;typeof j=="function"?l[u+1]=j:(l.splice(u,3),u-=3),fw(l)}}}function mw(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function ry(s){this._internalRoot=s}rf.prototype.render=ry.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=ur();iw(l,u,s,a,null,null)},rf.prototype.unmount=ry.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;iw(s.current,2,null,s,null,null),jh(),a[as]=null}};function rf(s){this._internalRoot=s}rf.prototype.unstable_scheduleHydration=function(s){if(s){var a=jd();s={blockedOn:null,target:s,priority:a};for(var l=0;l<ea.length&&a!==0&&a<ea[l].priority;l++);ea.splice(l,0,s),l===0&&dw(s)}};var gw=e.version;if(gw!=="19.2.3")throw Error(r(527,gw,"19.2.3"));M.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var zN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Ht=sf.inject(zN),wt=sf}catch{}}return xu.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,u="",g=xb,_=Eb,S=Tb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=rw(s,1,!1,null,null,l,u,null,g,_,S,mw),s[as]=a.current,Lp(s),new ry(a)},xu.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var u=!1,g="",_=xb,S=Eb,j=Tb,K=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(K=l.formState)),a=rw(s,1,!0,a,l??null,u,g,K,_,S,j,mw),a.context=sw(null),l=a.current,u=ur(),u=Oa(u),g=Ui(u),g.callback=null,zi(l,g,u),l=u,a.current.lanes=l,ka(a,l),xs(a),s[as]=a.current,Lp(s),new rf(a)},xu.version="19.2.3",xu}var Aw;function JN(){if(Aw)return ay.exports;Aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ay.exports=WN(),ay.exports}var ZN=JN();var Sw="popstate";function eC(n={}){function e(i,o){let{pathname:c="/",search:d="",hash:h=""}=Vo(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Dy("",{pathname:c,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let h=i.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof o=="string"?o:Xu(o))}function r(i,o){Vr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return nC(e,t,r,n)}function Lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tC(){return Math.random().toString(36).substring(2,10)}function Iw(n,e){return{usr:n.state,key:n.key,idx:e}}function Dy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||r||tC()}}function Xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function nC(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,d="POP",h=null,m=p();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function p(){return(c.state||{idx:null}).idx}function y(){d="POP";let V=p(),L=V==null?null:V-m;m=V,h&&h({action:d,location:P.location,delta:L})}function v(V,L){d="PUSH";let $=Dy(P.location,V,L);t&&t($,V),m=p()+1;let z=Iw($,m),H=P.createHref($);try{c.pushState(z,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(H)}o&&h&&h({action:d,location:P.location,delta:1})}function w(V,L){d="REPLACE";let $=Dy(P.location,V,L);t&&t($,V),m=p();let z=Iw($,m),H=P.createHref($);c.replaceState(z,"",H),o&&h&&h({action:d,location:P.location,delta:0})}function A(V){return rC(V)}let P={get action(){return d},get location(){return n(i,c)},listen(V){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Sw,y),h=V,()=>{i.removeEventListener(Sw,y),h=null}},createHref(V){return e(i,V)},createURL:A,encodeLocation(V){let L=A(V);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:w,go(V){return c.go(V)}};return P}function rC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Xu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function MT(n,e,t="/"){return sC(n,e,t,!1)}function sC(n,e,t,r){let i=typeof e=="string"?Vo(e):e,o=mi(i.pathname||"/",t);if(o==null)return null;let c=PT(n);iC(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let m=pC(o);d=mC(c[h],m,r)}return d}function PT(n,e=[],t=[],r="",i=!1){let o=(c,d,h=i,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;Lt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let y=hi([r,p.relativePath]),v=t.concat(p);c.children&&c.children.length>0&&(Lt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),PT(c.children,e,v,y,h)),!(c.path==null&&!c.index)&&e.push({path:y,score:hC(y,c.index),routesMeta:v})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let h of VT(c.path))o(c,d,!0,h)}),e}function VT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=VT(r.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function iC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var aC=/^:[\w-]+$/,oC=3,lC=2,cC=1,uC=10,dC=-2,Rw=n=>n==="*";function hC(n,e){let t=n.split("/"),r=t.length;return t.some(Rw)&&(r+=dC),e&&(r+=lC),t.filter(i=>!Rw(i)).reduce((i,o)=>i+(aC.test(o)?oC:o===""?cC:uC),r)}function fC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function mC(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],m=d===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=zf({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),v=h.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=zf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:hi([o,y.pathname]),pathnameBase:wC(hi([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=hi([o,y.pathnameBase]))}return c}function zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gC(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:p,isOptional:y},v)=>{if(p==="*"){let A=d[v]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=d[v];return y&&!w?m[p]=void 0:m[p]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function gC(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function mi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_C=n=>yC.test(n);function vC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Vo(n):n,o;if(t)if(_C(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Nw(t.substring(1),"/"):o=Nw(t,e)}else o=e;return{pathname:o,search:xC(r),hash:EC(i)}}function Nw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jT(n){let e=bC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function LT(n,e,t,r=!1){let i;typeof n=="string"?i=Vo(n):(i={...n},Lt(!i.pathname||!i.pathname.includes("?"),uy("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),uy("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),uy("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}d=y>=0?e[y]:"/"}let h=vC(i,d),m=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var hi=n=>n.join("/").replace(/\/\/+/g,"/"),wC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,EC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function TC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function AC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UT=["POST","PUT","PATCH","DELETE"];new Set(UT);var SC=["GET",...UT];new Set(SC);var gc=q.createContext(null);gc.displayName="DataRouter";var xm=q.createContext(null);xm.displayName="DataRouterState";q.createContext(!1);var zT=q.createContext({isTransitioning:!1});zT.displayName="ViewTransition";var IC=q.createContext(new Map);IC.displayName="Fetchers";var RC=q.createContext(null);RC.displayName="Await";var ts=q.createContext(null);ts.displayName="Navigation";var yd=q.createContext(null);yd.displayName="Location";var ns=q.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var S0=q.createContext(null);S0.displayName="RouteError";function NC(n,{relative:e}={}){Lt(_d(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(ts),{hash:i,pathname:o,search:c}=vd(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:hi([t,o])),r.createHref({pathname:d,search:c,hash:i})}function _d(){return q.useContext(yd)!=null}function pr(){return Lt(_d(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(yd).location}var FT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BT(n){q.useContext(ts).static||q.useLayoutEffect(n)}function bi(){let{isDataRoute:n}=q.useContext(ns);return n?HC():CC()}function CC(){Lt(_d(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(gc),{basename:e,navigator:t}=q.useContext(ts),{matches:r}=q.useContext(ns),{pathname:i}=pr(),o=JSON.stringify(jT(r)),c=q.useRef(!1);return BT(()=>{c.current=!0}),q.useCallback((h,m={})=>{if(Vr(c.current,FT),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=LT(h,JSON.parse(o),i,m.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:hi([e,p.pathname])),(m.replace?t.replace:t.push)(p,m.state,m)},[e,t,o,i,n])}var kC=q.createContext(null);function DC(n){let e=q.useContext(ns).outlet;return q.useMemo(()=>e&&q.createElement(kC.Provider,{value:n},e),[e,n])}function qT(){let{matches:n}=q.useContext(ns),e=n[n.length-1];return e?e.params:{}}function vd(n,{relative:e}={}){let{matches:t}=q.useContext(ns),{pathname:r}=pr(),i=JSON.stringify(jT(t));return q.useMemo(()=>LT(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function OC(n,e){return HT(n,e)}function HT(n,e,t,r,i){Lt(_d(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(ts),{matches:c}=q.useContext(ns),d=c[c.length-1],h=d?d.params:{},m=d?d.pathname:"/",p=d?d.pathnameBase:"/",y=d&&d.route;{let $=y&&y.path||"";$T(m,!y||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let v=pr(),w;if(e){let $=typeof e=="string"?Vo(e):e;Lt(p==="/"||$.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${$.pathname}" was given in the \`location\` prop.`),w=$}else w=v;let A=w.pathname||"/",P=A;if(p!=="/"){let $=p.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice($.length).join("/")}let V=MT(n,{pathname:P});Vr(y||V!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Vr(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=LC(V&&V.map($=>Object.assign({},$,{params:Object.assign({},h,$.params),pathname:hi([p,o.encodeLocation?o.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?p:hi([p,o.encodeLocation?o.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),c,t,r,i);return e&&L?q.createElement(yd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function MC(){let n=qC(),e=TC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:o},"ErrorBoundary")," or"," ",q.createElement("code",{style:o},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:i},t):null,c)}var PC=q.createElement(MC,null),VC=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?q.createElement(ns.Provider,{value:this.props.routeContext},q.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jC({routeContext:n,match:e,children:t}){let r=q.useContext(gc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(ns.Provider,{value:n},t)}function LC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let p=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Lt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:v,errors:w}=t,A=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let m=t&&r?(p,y)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:AC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((p,y,v)=>{let w,A=!1,P=null,V=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,P=y.route.errorElement||PC,d&&(h<0&&v===0?($T("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,V=null):h===v&&(A=!0,V=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),$=()=>{let z;return w?z=P:A?z=V:y.route.Component?z=q.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=p,q.createElement(jC,{match:y,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:z})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?q.createElement(VC,{location:t.location,revalidation:t.revalidation,component:P,error:w,children:$(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:m}):$()},null)}function I0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UC(n){let e=q.useContext(gc);return Lt(e,I0(n)),e}function zC(n){let e=q.useContext(xm);return Lt(e,I0(n)),e}function FC(n){let e=q.useContext(ns);return Lt(e,I0(n)),e}function R0(n){let e=FC(n),t=e.matches[e.matches.length-1];return Lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function BC(){return R0("useRouteId")}function qC(){let n=q.useContext(S0),e=zC("useRouteError"),t=R0("useRouteError");return n!==void 0?n:e.errors?.[t]}function HC(){let{router:n}=UC("useNavigate"),e=R0("useNavigate"),t=q.useRef(!1);return BT(()=>{t.current=!0}),q.useCallback(async(i,o={})=>{Vr(t.current,FT),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var Cw={};function $T(n,e,t){!e&&!Cw[n]&&(Cw[n]=!0,Vr(!1,t))}q.memo($C);function $C({routes:n,future:e,state:t,unstable_onError:r}){return HT(n,void 0,t,r,e)}function GC(n){return DC(n.context)}function Cr(n){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:c}){Lt(!_d(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=q.useMemo(()=>({basename:d,navigator:i,static:o,unstable_useTransitions:c,future:{}}),[d,i,o,c]);typeof t=="string"&&(t=Vo(t));let{pathname:m="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,A=q.useMemo(()=>{let P=mi(m,d);return P==null?null:{location:{pathname:P,search:p,hash:y,state:v,key:w},navigationType:r}},[d,m,p,y,v,w,r]);return Vr(A!=null,`<Router basename="${d}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:q.createElement(ts.Provider,{value:h},q.createElement(yd.Provider,{children:e,value:A}))}function YC({children:n,location:e}){return OC(Oy(n),e)}function Oy(n,e=[]){let t=[];return q.Children.forEach(n,(r,i)=>{if(!q.isValidElement(r))return;let o=[...e,i];if(r.type===q.Fragment){t.push.apply(t,Oy(r.props.children,o));return}Lt(r.type===Cr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Oy(r.props.children,o)),t.push(c)}),t}var _f="get",vf="application/x-www-form-urlencoded";function Em(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function QC(n){return Em(n)&&n.tagName.toLowerCase()==="button"}function XC(n){return Em(n)&&n.tagName.toLowerCase()==="form"}function WC(n){return Em(n)&&n.tagName.toLowerCase()==="input"}function JC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZC(n,e){return n.button===0&&(!e||e==="_self")&&!JC(n)}var af=null;function ek(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var tk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dy(n){return n!=null&&!tk.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vf}"`),null):n}function nk(n,e){let t,r,i,o,c;if(XC(n)){let d=n.getAttribute("action");r=d?mi(d,e):null,t=n.getAttribute("method")||_f,i=dy(n.getAttribute("enctype"))||vf,o=new FormData(n)}else if(QC(n)||WC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?mi(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||_f,i=dy(n.getAttribute("formenctype"))||dy(d.getAttribute("enctype"))||vf,o=new FormData(d,n),!ek()){let{name:m,type:p,value:y}=n;if(p==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,y)}}else{if(Em(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_f,r=null,i=vf,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rk(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&mi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function sk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ik(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ak(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await sk(o,t);return c.links?c.links():[]}return[]}));return uk(r.flat(1).filter(ik).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function kw(n,e,t,r,i,o){let c=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,d=(h,m)=>t[m].pathname!==h.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,m)=>c(h,m)||d(h,m)):o==="data"?e.filter((h,m)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ok(n,e,{includeHydrateFallback:t}={}){return lk(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function lk(n){return[...new Set(n)]}function ck(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function uk(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(ck(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function GT(){let n=q.useContext(gc);return N0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dk(){let n=q.useContext(xm);return N0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var C0=q.createContext(void 0);C0.displayName="FrameworkContext";function KT(){let n=q.useContext(C0);return N0(n,"You must render this element inside a <HydratedRouter> element"),n}function hk(n,e){let t=q.useContext(C0),[r,i]=q.useState(!1),[o,c]=q.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:y}=e,v=q.useRef(null);q.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let P=L=>{L.forEach($=>{c($.isIntersecting)})},V=new IntersectionObserver(P,{threshold:.5});return v.current&&V.observe(v.current),()=>{V.disconnect()}}},[n]),q.useEffect(()=>{if(r){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[r]);let w=()=>{i(!0)},A=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Eu(d,w),onBlur:Eu(h,A),onMouseEnter:Eu(m,w),onMouseLeave:Eu(p,A),onTouchStart:Eu(y,w)}]:[!1,v,{}]}function Eu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function fk({page:n,...e}){let{router:t}=GT(),r=q.useMemo(()=>MT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(gk,{page:n,matches:r,...e}):null}function mk(n){let{manifest:e,routeModules:t}=KT(),[r,i]=q.useState([]);return q.useEffect(()=>{let o=!1;return ak(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function gk({page:n,matches:e,...t}){let r=pr(),{manifest:i,routeModules:o}=KT(),{basename:c}=GT(),{loaderData:d,matches:h}=dk(),m=q.useMemo(()=>kw(n,e,h,i,r,"data"),[n,e,h,i,r]),p=q.useMemo(()=>kw(n,e,h,i,r,"assets"),[n,e,h,i,r]),y=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,P=!1;if(e.forEach(L=>{let $=i.routes[L.route.id];!$||!$.hasLoader||(!m.some(z=>z.route.id===L.route.id)&&L.route.id in d&&o[L.route.id]?.shouldRevalidate||$.hasClientLoader?P=!0:A.add(L.route.id))}),A.size===0)return[];let V=rk(n,c,"data");return P&&A.size>0&&V.searchParams.set("_routes",e.filter(L=>A.has(L.route.id)).map(L=>L.route.id).join(",")),[V.pathname+V.search]},[c,d,r,i,m,e,n,o]),v=q.useMemo(()=>ok(p,i),[p,i]),w=mk(p);return q.createElement(q.Fragment,null,y.map(A=>q.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>q.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:P})=>q.createElement("link",{key:A,nonce:t.nonce,...P})))}function pk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YT&&(window.__reactRouterVersion="7.10.1")}catch{}function yk({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=q.useRef();i.current==null&&(i.current=eC({window:r,v5Compat:!0}));let o=i.current,[c,d]=q.useState({action:o.action,location:o.location}),h=q.useCallback(m=>{t===!1?d(m):q.startTransition(()=>d(m))},[t]);return q.useLayoutEffect(()=>o.listen(h),[o,h]),q.createElement(KC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var QT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kr=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:d,target:h,to:m,preventScrollReset:p,viewTransition:y,...v},w){let{basename:A,unstable_useTransitions:P}=q.useContext(ts),V=typeof m=="string"&&QT.test(m),L,$=!1;if(typeof m=="string"&&V&&(L=m,YT))try{let N=new URL(window.location.href),C=m.startsWith("//")?new URL(N.protocol+m):new URL(m),O=mi(C.pathname,A);C.origin===N.origin&&O!=null?m=O+C.search+C.hash:$=!0}catch{Vr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=NC(m,{relative:i}),[H,X,F]=hk(r,v),R=wk(m,{replace:c,state:d,target:h,preventScrollReset:p,relative:i,viewTransition:y,unstable_useTransitions:P});function T(N){e&&e(N),N.defaultPrevented||R(N)}let E=q.createElement("a",{...v,...F,href:L||z,onClick:$||o?e:T,ref:pk(w,X),target:h,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?q.createElement(q.Fragment,null,E,q.createElement(fk,{page:z})):E});kr.displayName="Link";var _k=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:h,...m},p){let y=vd(c,{relative:m.relative}),v=pr(),w=q.useContext(xm),{navigator:A,basename:P}=q.useContext(ts),V=w!=null&&Sk(y)&&d===!0,L=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,$=v.pathname,z=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||($=$.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&P&&(z=mi(z,P)||z);const H=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let X=$===L||!i&&$.startsWith(L)&&$.charAt(H)==="/",F=z!=null&&(z===L||!i&&z.startsWith(L)&&z.charAt(L.length)==="/"),R={isActive:X,isPending:F,isTransitioning:V},T=X?e:void 0,E;typeof r=="function"?E=r(R):E=[r,X?"active":null,F?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(R):o;return q.createElement(kr,{...m,"aria-current":T,className:E,ref:p,style:N,to:c,viewTransition:d},typeof h=="function"?h(R):h)});_k.displayName="NavLink";var vk=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=_f,action:d,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:y,...v},w)=>{let{unstable_useTransitions:A}=q.useContext(ts),P=Tk(),V=Ak(d,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&QT.test(d),z=H=>{if(h&&h(H),H.defaultPrevented)return;H.preventDefault();let X=H.nativeEvent.submitter,F=X?.getAttribute("formmethod")||c,R=()=>P(X||H.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:i,state:o,relative:m,preventScrollReset:p,viewTransition:y});A&&t!==!1?q.startTransition(()=>R()):R()};return q.createElement("form",{ref:w,method:L,action:V,onSubmit:r?h:z,...v,"data-discover":!$&&n==="render"?"true":void 0})});vk.displayName="Form";function bk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XT(n){let e=q.useContext(gc);return Lt(e,bk(n)),e}function wk(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c,unstable_useTransitions:d}={}){let h=bi(),m=pr(),p=vd(n,{relative:o});return q.useCallback(y=>{if(ZC(y,e)){y.preventDefault();let v=t!==void 0?t:Xu(m)===Xu(p),w=()=>h(n,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:c});d?q.startTransition(()=>w()):w()}},[m,h,p,t,r,e,n,i,o,c,d])}var xk=0,Ek=()=>`__${String(++xk)}__`;function Tk(){let{router:n}=XT("useSubmit"),{basename:e}=q.useContext(ts),t=BC(),r=n.fetch,i=n.navigate;return q.useCallback(async(o,c={})=>{let{action:d,method:h,encType:m,formData:p,body:y}=nk(o,e);if(c.navigate===!1){let v=c.fetcherKey||Ek();await r(v,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await i(c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function Ak(n,{relative:e}={}){let{basename:t}=q.useContext(ts),r=q.useContext(ns);Lt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...vd(n||".",{relative:e})},c=pr();if(n==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let p=d.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:hi([t,o.pathname])),Xu(o)}function Sk(n,{relative:e}={}){let t=q.useContext(zT);Lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=XT("useViewTransitionState"),i=vd(n,{relative:e});if(!t.isTransitioning)return!1;let o=mi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=mi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zf(i.pathname,c)!=null||zf(i.pathname,o)!=null}const je=n=>typeof n=="string",Tu=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},Dw=n=>n==null?"":""+n,Ik=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},Rk=/###/g,Ow=n=>n&&n.indexOf("###")>-1?n.replace(Rk,"."):n,Mw=n=>!n||je(n),ju=(n,e,t)=>{const r=je(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Mw(n))return{};const o=Ow(r[i]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++i}return Mw(n)?{}:{obj:n,k:Ow(r[i])}},Pw=(n,e,t)=>{const{obj:r,k:i}=ju(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),d=ju(n,c,Object);for(;d.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),d=ju(n,c,Object),d?.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=t},Nk=(n,e,t,r)=>{const{obj:i,k:o}=ju(n,e,Object);i[o]=i[o]||[],i[o].push(t)},Ff=(n,e)=>{const{obj:t,k:r}=ju(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},Ck=(n,e,t)=>{const r=Ff(n,t);return r!==void 0?r:Ff(e,t)},WT=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?je(n[r])||n[r]instanceof String||je(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):WT(n[r],e[r],t):n[r]=e[r]);return n},Ol=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var kk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Dk=n=>je(n)?n.replace(/[&<>"'\/]/g,e=>kk[e]):n;class Ok{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Mk=[" ",",","?","!",";"],Pk=new Ok(20),Vk=(n,e,t)=>{e=e||"",t=t||"";const r=Mk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(r.length===0)return!0;const i=Pk.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!i.test(n);if(!o){const c=n.indexOf(t);c>0&&!i.test(n.substring(0,c))&&(o=!0)}return o},My=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let c,d="";for(let h=o;h<r.length;++h)if(h!==o&&(d+=t),d+=r[h],c=i[d],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&h<r.length-1)continue;o+=h-o+1;break}i=c}return i},Wu=n=>n?.replace("_","-"),jk={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};let Lk=class Py{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||jk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(je(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Py(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Py(this.logger,e)}};var Is=new Lk;class Tm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i.apply(i,[e,...t])})}}class Vw extends Tm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,t],r&&(Array.isArray(r)?d.push(...r):je(r)&&o?d.push(...r.split(o)):d.push(r)));const h=Ff(this.data,d);return!h&&!t&&!r&&e.indexOf(".")>-1&&(e=d[0],t=d[1],r=d.slice(2).join(".")),h||!c||!je(r)?h:My(this.data?.[e]?.[t],r,o)}addResource(e,t,r,i,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[e,t];r&&(d=d.concat(c?r.split(c):r)),e.indexOf(".")>-1&&(d=e.split("."),i=t,t=d[1]),this.addNamespaces(t),Pw(this.data,d,i),o.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const o in r)(je(r[o])||Array.isArray(r[o]))&&this.addResource(e,t,o,r[o],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,o,c={silent:!1,skipCopy:!1}){let d=[e,t];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=t,t=d[1]),this.addNamespaces(t);let h=Ff(this.data,d)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?WT(h,r,o):h={...h,...r},Pw(this.data,d,h),c.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var JT={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(o=>{e=this.processors[o]?.process(e,t,r,i)??e}),e}};const ZT=Symbol("i18next/PATH_KEY");function Uk(){const n=[],e=Object.create(null);let t;return e.get=(r,i)=>(t?.revoke?.(),i===ZT?n:(n.push(i),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Vy(n,e){const{[ZT]:t}=n(Uk());return t.join(e?.keySeparator??".")}const jw={},hy=n=>!je(n)&&typeof n!="boolean"&&typeof n!="number";class Bf extends Tm{constructor(e,t={}){super(),Ik(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Is.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const o=hy(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Vk(e,r,i);if(c&&!d){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:je(o)?[o]:o};const m=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(m[0])>-1)&&(o=m.shift()),e=m.join(i)}return{key:e,namespaces:je(o)?[o]:o}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Vy(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:h}=this.extractFromKey(e[e.length-1],i),m=h[h.length-1];let p=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const y=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${m}${p}${d}`,usedKey:d,exactUsedKey:d,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(i)}:`${m}${p}${d}`:o?{res:d,usedKey:d,exactUsedKey:d,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(i)}:d;const w=this.resolve(e,i);let A=w?.res;const P=w?.usedKey||d,V=w?.exactUsedKey||d,L=["[object Number]","[object Function]","[object RegExp]"],$=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,z=!this.i18nFormat||this.i18nFormat.handleAsObject,H=i.count!==void 0&&!je(i.count),X=Bf.hasDefaultValue(i),F=H?this.pluralResolver.getSuffix(y,i.count,i):"",R=i.ordinal&&H?this.pluralResolver.getSuffix(y,i.count,{ordinal:!1}):"",T=H&&!i.ordinal&&i.count===0,E=T&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${F}`]||i[`defaultValue${R}`]||i.defaultValue;let N=A;z&&!A&&X&&(N=E);const C=hy(N),O=Object.prototype.toString.apply(N);if(z&&N&&C&&L.indexOf(O)<0&&!(je($)&&Array.isArray(N))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,N,{...i,ns:h}):`key '${d} (${this.language})' returned an object instead of string.`;return o?(w.res=k,w.usedParams=this.getUsedParamsDetails(i),w):k}if(c){const k=Array.isArray(N),G=k?[]:{},ee=k?V:P;for(const D in N)if(Object.prototype.hasOwnProperty.call(N,D)){const M=`${ee}${c}${D}`;X&&!A?G[D]=this.translate(M,{...i,defaultValue:hy(E)?E[D]:void 0,joinArrays:!1,ns:h}):G[D]=this.translate(M,{...i,joinArrays:!1,ns:h}),G[D]===M&&(G[D]=N[D])}A=G}}else if(z&&je($)&&Array.isArray(A))A=A.join($),A&&(A=this.extendTranslation(A,e,i,r));else{let k=!1,G=!1;!this.isValidLookup(A)&&X&&(k=!0,A=E),this.isValidLookup(A)||(G=!0,A=d);const D=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:A,M=X&&E!==A&&this.options.updateMissing;if(G||k||M){if(this.logger.log(M?"updateKey":"missingKey",y,m,d,M?E:A),c){const B=this.resolve(d,{...i,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let J=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let B=0;B<W.length;B++)J.push(W[B]);else this.options.saveMissingTo==="all"?J=this.languageUtils.toResolveHierarchy(i.lng||this.language):J.push(i.lng||this.language);const Z=(B,Y,se)=>{const ie=X&&se!==A?se:D;this.options.missingKeyHandler?this.options.missingKeyHandler(B,m,Y,ie,M,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(B,m,Y,ie,M,i),this.emit("missingKey",B,m,Y,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?J.forEach(B=>{const Y=this.pluralResolver.getSuffixes(B,i);T&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(se=>{Z([B],d+se,i[`defaultValue${se}`]||E)})}):Z(J,d,E))}A=this.extendTranslation(A,e,i,w,r),G&&A===d&&this.options.appendNamespaceToMissingKey&&(A=`${m}${p}${d}`),(G||k)&&this.options.parseMissingKeyHandler&&(A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${p}${d}`:d,k?A:void 0,i))}return o?(w.res=A,w.usedParams=this.getUsedParamsDetails(i),w):A}extendTranslation(e,t,r,i,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=je(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(h){const y=e.match(this.interpolator.nestingRegexp);m=y&&y.length}let p=r.replace&&!je(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||i.usedLng,r),h){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;m<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,d=je(c)?[c]:c;return e!=null&&d?.length&&r.applyPostProcessor!==!1&&(e=JT.handle(d,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,o,c,d;return je(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(r))return;const m=this.extractFromKey(h,t),p=m.key;i=p;let y=m.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!je(t.count),w=v&&!t.ordinal&&t.count===0,A=t.context!==void 0&&(je(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(V=>{this.isValidLookup(r)||(d=V,!jw[`${P[0]}-${V}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(jw[`${P[0]}-${V}`]=!0,this.logger.warn(`key "${i}" for languages "${P.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(L=>{if(this.isValidLookup(r))return;c=L;const $=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys($,p,L,V,t);else{let H;v&&(H=this.pluralResolver.getSuffix(L,t.count,t));const X=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&H.indexOf(F)===0&&$.push(p+H.replace(F,this.options.pluralSeparator)),$.push(p+H),w&&$.push(p+X)),A){const R=`${p}${this.options.contextSeparator||"_"}${t.context}`;$.push(R),v&&(t.ordinal&&H.indexOf(F)===0&&$.push(R+H.replace(F,this.options.pluralSeparator)),$.push(R+H),w&&$.push(R+X))}}let z;for(;z=$.pop();)this.isValidLookup(r)||(o=z,r=this.getResource(L,V,z,t))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:c,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!je(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of t)delete i[o]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class Lw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Is.create("languageUtils")}getScriptPartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(je(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),je(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],o=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return je(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):je(e)&&o(this.formatLanguageCode(e)),r.forEach(c=>{i.indexOf(c)<0&&o(this.formatLanguageCode(c))}),i}}const Uw={zero:0,one:1,two:2,few:3,many:4,other:5},zw={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class zk{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Is.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=Wu(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zw;if(!e.match(/-|_/))return zw;const h=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(h,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>Uw[i]-Uw[o]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const Fw=(n,e,t,r=".",i=!0)=>{let o=Ck(n,e,t);return!o&&i&&je(t)&&(o=My(n,t,r),o===void 0&&(o=My(e,t,r))),o},fy=n=>n.replace(/\$/g,"$$$$");class Bw{constructor(e={}){this.logger=Is.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:c,suffix:d,suffixEscaped:h,formatSeparator:m,unescapeSuffix:p,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:A,nestingSuffixEscaped:P,nestingOptionsSeparator:V,maxReplaces:L,alwaysFormat:$}=e.interpolation;this.escape=t!==void 0?t:Dk,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Ol(o):c||"{{",this.suffix=d?Ol(d):h||"}}",this.formatSeparator=m||",",this.unescapePrefix=p?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=v?Ol(v):w||Ol("$t("),this.nestingSuffix=A?Ol(A):P||Ol(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=L||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let o,c,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=w=>{if(w.indexOf(this.formatSeparator)<0){const L=Fw(t,h,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...t,interpolationkey:w}):L}const A=w.split(this.formatSeparator),P=A.shift().trim(),V=A.join(this.formatSeparator).trim();return this.format(Fw(t,h,P,this.options.keySeparator,this.options.ignoreJSONStructure),V,r,{...i,...t,interpolationkey:P})};this.resetRegExp();const p=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>fy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?fy(this.escape(w)):fy(w)}].forEach(w=>{for(d=0;o=w.regex.exec(e);){const A=o[1].trim();if(c=m(A),c===void 0)if(typeof p=="function"){const V=p(e,o,i);c=je(V)?V:""}else if(i&&Object.prototype.hasOwnProperty.call(i,A))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),c="";else!je(c)&&!this.useRawValueToEscape&&(c=Dw(c));const P=w.safeValue(c);if(e=e.replace(o[0],P),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,o,c;const d=(h,m)=>{const p=this.nestingOptionsSeparator;if(h.indexOf(p)<0)return h;const y=h.split(new RegExp(`${p}[ ]*{`));let v=`{${y[1]}`;h=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),A=v.match(/"/g);((w?.length??0)%2===0&&!A||A.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),m&&(c={...m,...c})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,P),`${h}${p}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,h};for(;i=this.nestingRegexp.exec(e);){let h=[];c={...r},c=c.replace&&!je(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const m=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(m!==-1&&(h=i[1].slice(m).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),i[1]=i[1].slice(0,m)),o=t(d.call(this,i[1].trim(),c),c),o&&i[0]===e&&!je(o))return o;je(o)||(o=Dw(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),h.length&&(o=h.reduce((p,y)=>this.format(p,y,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const Fk=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(c=>{if(c){const[d,...h]=c.split(":"),m=h.join(":").trim().replace(/^'+|'+$/g,""),p=d.trim();t[p]||(t[p]=m),m==="false"&&(t[p]=!1),m==="true"&&(t[p]=!0),isNaN(m)||(t[p]=parseInt(m,10))}})}return{formatName:e,formatOptions:t}},qw=n=>{const e={};return(t,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const c=r+JSON.stringify(o);let d=e[c];return d||(d=n(Wu(r),i),e[c]=d),d(t)}},Bk=n=>(e,t,r)=>n(Wu(t),r)(e);class qk{constructor(e={}){this.logger=Is.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?qw:Bk;this.formats={number:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o});return d=>c.format(d)}),currency:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o,style:"currency"});return d=>c.format(d)}),datetime:r((i,o)=>{const c=new Intl.DateTimeFormat(i,{...o});return d=>c.format(d)}),relativetime:r((i,o)=>{const c=new Intl.RelativeTimeFormat(i,{...o});return d=>c.format(d,o.range||"day")}),list:r((i,o)=>{const c=new Intl.ListFormat(i,{...o});return d=>c.format(d)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=qw(t)}format(e,t,r,i={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,h)=>{const{formatName:m,formatOptions:p}=Fk(h);if(this.formats[m]){let y=d;try{const v=i?.formatParams?.[i.interpolationkey]||{},w=v.locale||v.lng||i.locale||i.lng||r;y=this.formats[m](d,w,{...p,...i,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${m}`);return d},e)}}const Hk=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class $k extends Tm{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Is.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const o={},c={},d={},h={};return e.forEach(m=>{let p=!0;t.forEach(y=>{const v=`${m}|${y}`;!r.reload&&this.store.hasResourceBundle(m,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,p=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),h[y]===void 0&&(h[y]=!0)))}),p||(d[m]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(e,t,r){const i=e.split("|"),o=i[0],c=i[1];t&&this.emit("failedLoading",o,c,t),!t&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const d={};this.queue.forEach(h=>{Nk(h.loaded,[o],c),Hk(h,e),t&&h.errors.push(t),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(m=>{d[m]||(d[m]={});const p=h.loaded[m];p.length&&p.forEach(y=>{d[m][y]===void 0&&(d[m][y]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(e,t,r,i=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:o,callback:c});return}this.readingCalls++;const d=(m,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(m&&p&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,o*2,c)},o);return}c(m,p)},h=this.backend[r].bind(this.backend);if(h.length===2){try{const m=h(e,t);m&&typeof m.then=="function"?m.then(p=>d(null,p)).catch(d):d(null,m)}catch(m){d(m)}return}return h(e,t,d)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();je(e)&&(e=this.languageUtils.toResolveHierarchy(e)),je(t)&&(t=[t]);const o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(c,d)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,c),!c&&d&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,d),this.loaded(e,c,d)})}saveMissing(e,t,r,i,o,c={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const h={...c,isUpdate:o},m=this.backend.create.bind(this.backend);if(m.length<6)try{let p;m.length===5?p=m(e,t,r,i,h):p=m(e,t,r,i),p&&typeof p.then=="function"?p.then(y=>d(null,y)).catch(d):d(null,p)}catch(p){d(p)}else m(e,t,r,i,d,h)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const Hw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),je(n[1])&&(e.defaultValue=n[1]),je(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),$w=n=>(je(n.ns)&&(n.ns=[n.ns]),je(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),je(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),of=()=>{},Gk=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Lu extends Tm{constructor(e={},t){if(super(),this.options=$w(e),this.services={},this.logger=Is,this.modules={external:[]},Gk(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(je(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Hw();this.options={...r,...this.options,...$w(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?Is.init(i(this.modules.logger),this.options):Is.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=qk;const p=new Lw(this.options);this.store=new Vw(this.options.resources,this.options);const y=this.services;y.logger=Is,y.resourceStore=this.store,y.languageUtils=p,y.pluralResolver=new zk(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(y.formatter=i(m),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Bw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new $k(i(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...A)=>{this.emit(w,...A)}),this.modules.languageDetector&&(y.languageDetector=i(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=i(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Bf(this.services,this.options),this.translator.on("*",(w,...A)=>{this.emit(w,...A)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=of),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...p)=>this.store[m](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...p)=>(this.store[m](...p),this)});const d=Tu(),h=()=>{const m=(p,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(y),t(p,y)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),d}loadResources(e,t=of){let r=t;const i=je(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(m=>{m!=="cimode"&&o.indexOf(m)<0&&o.push(m)})};i?c(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>c(h)),this.options.preload?.forEach?.(d=>c(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(d)})}else r(null)}reloadResources(e,t,r){const i=Tu();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=of),this.services.backendConnector.reload(e,t,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&JT.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Tu();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},o=(d,h)=>{h?this.isLanguageChangingTo===e&&(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,r.resolve((...m)=>this.t(...m)),t&&t(d,(...m)=>this.t(...m))},c=d=>{!e&&!d&&this.services.languageDetector&&(d=[]);const h=je(d)?d:d&&d[0],m=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(je(d)?[d]:d);m&&(this.language||i(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,p=>{o(p,m)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,t,r){const i=(o,c,...d)=>{let h;typeof c!="object"?h=this.options.overloadTranslationOptionHandler([o,c].concat(d)):h={...c},h.lng=h.lng||i.lng,h.lngs=h.lngs||i.lngs,h.ns=h.ns||i.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||r||i.keyPrefix);const m=this.options.keySeparator||".";let p;return h.keyPrefix&&Array.isArray(o)?p=o.map(y=>(typeof y=="function"&&(y=Vy(y,{...this.options,...c})),`${h.keyPrefix}${m}${y}`)):(typeof o=="function"&&(o=Vy(o,{...this.options,...c})),p=h.keyPrefix?`${h.keyPrefix}${m}${o}`:o),this.t(p,h)};return je(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(d,h)=>{const m=this.services.backendConnector.state[`${d}|${h}`];return m===-1||m===0||m===2};if(t.precheck){const d=t.precheck(this,c);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,e)&&(!i||c(o,e)))}loadNamespaces(e,t){const r=Tu();return this.options.ns?(je(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Tu();je(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=i.concat(o),this.loadResources(c=>{r.resolve(),t&&t(c)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Lw(Hw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const r=new Lu(e,t);return r.createInstance=Lu.createInstance,r}cloneInstance(e={},t=of){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Lu(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const d=Object.keys(this.store.data).reduce((h,m)=>(h[m]={...this.store.data[m]},h[m]=Object.keys(h[m]).reduce((p,y)=>(p[y]={...h[m][y]},p),h[m]),h),{});o.store=new Vw(d,i),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Bw(i)),o.translator=new Bf(o.services,i),o.translator.on("*",(d,...h)=>{o.emit(d,...h)}),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const $n=Lu.createInstance();$n.createInstance;$n.dir;$n.init;$n.loadResources;$n.reloadResources;$n.use;$n.changeLanguage;$n.getFixedT;$n.t;$n.exists;$n.setDefaultNamespace;$n.hasLoadedNamespace;$n.loadNamespaces;$n.loadLanguages;const Kk=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);wo(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},Gw={},e2=(n,e,t,r)=>{wo(t)&&Gw[t]||(wo(t)&&(Gw[t]=new Date),Kk(n,e,t,r))},t2=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},jy=(n,e,t)=>{n.loadNamespaces(e,t2(n,t))},Kw=(n,e,t,r)=>{if(wo(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return jy(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,t2(n,r))},Yk=(n,e,t={})=>!e.languages||!e.languages.length?(e2(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),wo=n=>typeof n=="string",Qk=n=>typeof n=="object"&&n!==null,Xk=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wk={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Jk=n=>Wk[n],Zk=n=>n.replace(Xk,Jk);let Ly={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Zk,transDefaultProps:void 0};const e4=(n={})=>{Ly={...Ly,...n}},t4=()=>Ly;let n2;const n4=n=>{n2=n},r4=()=>n2,s4={type:"3rdParty",init(n){e4(n.options.react),n4(n)}},i4=q.createContext();class a4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var my={exports:{}},gy={};var Yw;function o4(){if(Yw)return gy;Yw=1;var n=wm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function d(y,v){var w=v(),A=r({inst:{value:w,getSnapshot:v}}),P=A[0].inst,V=A[1];return o(function(){P.value=w,P.getSnapshot=v,h(P)&&V({inst:P})},[y,w,v]),i(function(){return h(P)&&V({inst:P}),y(function(){h(P)&&V({inst:P})})},[y]),c(w),w}function h(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function m(y,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return gy.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,gy}var Qw;function l4(){return Qw||(Qw=1,my.exports=o4()),my.exports}var c4=l4();const u4=(n,e)=>wo(e)?e:Qk(e)&&wo(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,d4={t:u4,ready:!1},h4=()=>()=>{},Nn=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=q.useContext(i4)||{},o=t||r||r4();o&&!o.reportNamespaces&&(o.reportNamespaces=new a4),o||e2(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=q.useMemo(()=>({...t4(),...o?.options?.react,...e}),[o,e]),{useSuspense:d,keyPrefix:h}=c,m=i||o?.options?.defaultNS,p=wo(m)?[m]:m||["translation"],y=q.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=q.useRef(0),w=q.useCallback(E=>{if(!o)return h4;const{bindI18n:N,bindI18nStore:C}=c,O=()=>{v.current+=1,E()};return N&&o.on(N,O),C&&o.store.on(C,O),()=>{N&&N.split(" ").forEach(k=>o.off(k,O)),C&&C.split(" ").forEach(k=>o.store.off(k,O))}},[o,c]),A=q.useRef(),P=q.useCallback(()=>{if(!o)return d4;const E=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(ee=>Yk(ee,o,c)),N=e.lng||o.language,C=v.current,O=A.current;if(O&&O.ready===E&&O.lng===N&&O.keyPrefix===h&&O.revision===C)return O;const G={t:o.getFixedT(N,c.nsMode==="fallback"?y:y[0],h),ready:E,lng:N,keyPrefix:h,revision:C};return A.current=G,G},[o,y,h,c,e.lng]),[V,L]=q.useState(0),{t:$,ready:z}=c4.useSyncExternalStore(w,P,P);q.useEffect(()=>{if(o&&!z&&!d){const E=()=>L(N=>N+1);e.lng?Kw(o,e.lng,y,E):jy(o,y,E)}},[o,e.lng,y,z,d,V]);const H=o||{},X=q.useRef(null),F=q.useRef(),R=E=>{const N=Object.getOwnPropertyDescriptors(E);N.__original&&delete N.__original;const C=Object.create(Object.getPrototypeOf(E),N);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:E,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},T=q.useMemo(()=>{const E=H,N=E?.language;let C=E;E&&(X.current&&X.current.__original===E?F.current!==N?(C=R(E),X.current=C,F.current=N):C=X.current:(C=R(E),X.current=C,F.current=N));const O=[$,C,z];return O.t=$,O.i18n=C,O.ready=z,O},[$,H,z,H.resolvedLanguage,H.language,H.languages]);if(o&&d&&!z)throw new Promise(E=>{const N=()=>E();e.lng?Kw(o,e.lng,y,N):jy(o,y,N)});return T},f4=()=>{};var Xw={};const r2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},m4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},s2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,m=h?n[i+2]:0,p=o>>2,y=(o&3)<<4|d>>4;let v=(d&15)<<2|m>>6,w=m&63;h||(w=64,c||(v=64)),r.push(t[p],t[y],t[v],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(r2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):m4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||d==null||m==null||y==null)throw new g4;const v=o<<2|d>>4;if(r.push(v),m!==64){const w=d<<4&240|m>>2;if(r.push(w),y!==64){const A=m<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class g4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p4=function(n){const e=r2(n);return s2.encodeByteArray(e,!0)},qf=function(n){return p4(n).replace(/\./g,"")},i2=function(n){try{return s2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const y4=()=>a2().__FIREBASE_DEFAULTS__,_4=()=>{if(typeof process>"u"||typeof Xw>"u")return;const n=Xw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},v4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&i2(n[1]);return e&&JSON.parse(e)},Am=()=>{try{return f4()||y4()||_4()||v4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},o2=n=>Am()?.emulatorHosts?.[n],l2=n=>{const e=o2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},c2=()=>Am()?.config,u2=n=>Am()?.[`_${n}`];class b4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function jo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k0(n){return(await fetch(n,{credentials:"include"})).ok}function d2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qf(JSON.stringify(t)),qf(JSON.stringify(c)),""].join(".")}const Uu={};function w4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?n.emulator.push(e):n.prod.push(e);return n}function x4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ww=!1;function D0(n,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||Uu[n]===e||Uu[n]||Ww)return;Uu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=w4().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Ww=!0,c()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=x4(r),w=t("text"),A=document.getElementById(w)||document.createElement("span"),P=t("learnmore"),V=document.getElementById(P)||document.createElement("a"),L=t("preprendIcon"),$=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;d(z),p(V,P);const H=m();h($,L),z.append($,A,V,H),document.body.appendChild(z)}o?(A.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function h2(){const n=Am()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function S4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I4(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function f2(){return!h2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m2(){return!h2()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function g2(){try{return typeof indexedDB=="object"}catch{return!1}}function R4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const N4="FirebaseError";class Us extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N4,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bd.prototype.create)}}class bd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?C4(o,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Us(i,d,r)}}function C4(n,e){return n.replace(k4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const k4=/\{\$([^}]+)}/g;function D4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function gi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(Jw(o)&&Jw(c)){if(!gi(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Jw(n){return n!==null&&typeof n=="object"}function wd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ku(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function O4(n,e){const t=new M4(n,e);return t.subscribe.bind(t)}class M4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");P4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=py),i.error===void 0&&(i.error=py),i.complete===void 0&&(i.complete=py);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function py(){}function Yt(n){return n&&n._delegate?n._delegate:n}class va{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class V4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new b4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L4(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j4(n){return n===io?void 0:n}function L4(n){return n.instantiationMode==="EAGER"}class U4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new V4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const z4={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},F4=nt.INFO,B4={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},q4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=B4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O0{constructor(e){this.name=e,this._logLevel=F4,this._logHandler=q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const H4=(n,e)=>e.some(t=>n instanceof t);let Zw,ex;function $4(){return Zw||(Zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G4(){return ex||(ex=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p2=new WeakMap,Uy=new WeakMap,y2=new WeakMap,yy=new WeakMap,M0=new WeakMap;function K4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(ha(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&p2.set(t,n)}).catch(()=>{}),M0.set(e,n),e}function Y4(n){if(Uy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Uy.set(n,e)}let zy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Uy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||y2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ha(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q4(n){zy=n(zy)}function X4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(_y(this),e,...t);return y2.set(r,e.sort?e.sort():[e]),ha(r)}:G4().includes(n)?function(...e){return n.apply(_y(this),e),ha(p2.get(this))}:function(...e){return ha(n.apply(_y(this),e))}}function W4(n){return typeof n=="function"?X4(n):(n instanceof IDBTransaction&&Y4(n),H4(n,$4())?new Proxy(n,zy):n)}function ha(n){if(n instanceof IDBRequest)return K4(n);if(yy.has(n))return yy.get(n);const e=W4(n);return e!==n&&(yy.set(n,e),M0.set(e,n)),e}const _y=n=>M0.get(n);function J4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),d=ha(c);return r&&c.addEventListener("upgradeneeded",h=>{r(ha(c.result),h.oldVersion,h.newVersion,ha(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Z4=["get","getKey","getAll","getAllKeys","count"],eD=["put","add","delete","clear"],vy=new Map;function tx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=eD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Z4.includes(t)))return;const o=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&h.done]))[0]};return vy.set(e,o),o}Q4(n=>({...n,get:(e,t,r)=>tx(e,t)||n.get(e,t,r),has:(e,t)=>!!tx(e,t)||n.has(e,t)}));class tD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function nD(n){return n.getComponent()?.type==="VERSION"}const Fy="@firebase/app",nx="0.14.6";const pi=new O0("@firebase/app"),rD="@firebase/app-compat",sD="@firebase/analytics-compat",iD="@firebase/analytics",aD="@firebase/app-check-compat",oD="@firebase/app-check",lD="@firebase/auth",cD="@firebase/auth-compat",uD="@firebase/database",dD="@firebase/data-connect",hD="@firebase/database-compat",fD="@firebase/functions",mD="@firebase/functions-compat",gD="@firebase/installations",pD="@firebase/installations-compat",yD="@firebase/messaging",_D="@firebase/messaging-compat",vD="@firebase/performance",bD="@firebase/performance-compat",wD="@firebase/remote-config",xD="@firebase/remote-config-compat",ED="@firebase/storage",TD="@firebase/storage-compat",AD="@firebase/firestore",SD="@firebase/ai",ID="@firebase/firestore-compat",RD="firebase",ND="12.6.0";const By="[DEFAULT]",CD={[Fy]:"fire-core",[rD]:"fire-core-compat",[iD]:"fire-analytics",[sD]:"fire-analytics-compat",[oD]:"fire-app-check",[aD]:"fire-app-check-compat",[lD]:"fire-auth",[cD]:"fire-auth-compat",[uD]:"fire-rtdb",[dD]:"fire-data-connect",[hD]:"fire-rtdb-compat",[fD]:"fire-fn",[mD]:"fire-fn-compat",[gD]:"fire-iid",[pD]:"fire-iid-compat",[yD]:"fire-fcm",[_D]:"fire-fcm-compat",[vD]:"fire-perf",[bD]:"fire-perf-compat",[wD]:"fire-rc",[xD]:"fire-rc-compat",[ED]:"fire-gcs",[TD]:"fire-gcs-compat",[AD]:"fire-fst",[ID]:"fire-fst-compat",[SD]:"fire-vertex","fire-js":"fire-js",[RD]:"fire-js-all"};const Hf=new Map,kD=new Map,qy=new Map;function rx(n,e){try{n.container.addComponent(e)}catch(t){pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xo(n){const e=n.name;if(qy.has(e))return pi.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,n);for(const t of Hf.values())rx(t,n);for(const t of kD.values())rx(t,n);return!0}function Sm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hr(n){return n==null?!1:n.settings!==void 0}const DD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fa=new bd("app","Firebase",DD);class OD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}const Lo=ND;function _2(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:By,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw fa.create("bad-app-name",{appName:String(i)});if(t||(t=c2()),!t)throw fa.create("no-options");const o=Hf.get(i);if(o){if(gi(t,o.options)&&gi(r,o.config))return o;throw fa.create("duplicate-app",{appName:i})}const c=new U4(i);for(const h of qy.values())c.addComponent(h);const d=new OD(t,r,c);return Hf.set(i,d),d}function P0(n=By){const e=Hf.get(n);if(!e&&n===By&&c2())return _2();if(!e)throw fa.create("no-app",{appName:n});return e}function Cs(n,e,t){let r=CD[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pi.warn(c.join(" "));return}xo(new va(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const MD="firebase-heartbeat-database",PD=1,Ju="firebase-heartbeat-store";let by=null;function v2(){return by||(by=J4(MD,PD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw fa.create("idb-open",{originalErrorMessage:n.message})})),by}async function VD(n){try{const t=(await v2()).transaction(Ju),r=await t.objectStore(Ju).get(b2(n));return await t.done,r}catch(e){if(e instanceof Us)pi.warn(e.message);else{const t=fa.create("idb-get",{originalErrorMessage:e?.message});pi.warn(t.message)}}}async function sx(n,e){try{const r=(await v2()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,b2(n)),await r.done}catch(t){if(t instanceof Us)pi.warn(t.message);else{const r=fa.create("idb-set",{originalErrorMessage:t?.message});pi.warn(r.message)}}}function b2(n){return`${n.name}!${n.options.appId}`}const jD=1024,LD=30;class UD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ix();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>LD){const i=BD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ix(),{heartbeatsToSend:t,unsentEntries:r}=zD(this._heartbeatsCache.heartbeats),i=qf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return pi.warn(e),""}}}function ix(){return new Date().toISOString().substring(0,10)}function zD(n,e=jD){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),ax(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ax(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class FD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g2()?R4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ax(n){return qf(JSON.stringify({version:2,heartbeats:n})).length}function BD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qD(n){xo(new va("platform-logger",e=>new tD(e),"PRIVATE")),xo(new va("heartbeat",e=>new UD(e),"PRIVATE")),Cs(Fy,nx,n),Cs(Fy,nx,"esm2020"),Cs("fire-js","")}qD("");var HD="firebase",$D="12.6.0";Cs(HD,$D,"app");function w2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GD=w2,x2=new bd("auth","Firebase",w2());const $f=new O0("@firebase/auth");function KD(n,...e){$f.logLevel<=nt.WARN&&$f.warn(`Auth (${Lo}): ${n}`,...e)}function bf(n,...e){$f.logLevel<=nt.ERROR&&$f.error(`Auth (${Lo}): ${n}`,...e)}function es(n,...e){throw V0(n,...e)}function ks(n,...e){return V0(n,...e)}function E2(n,e,t){const r={...GD(),[e]:t};return new bd("auth","Firebase",r).create(e,{appName:n.name})}function fi(n){return E2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return x2.create(n,...e)}function Pe(n,e,...t){if(!n)throw V0(e,...t)}function ci(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bf(e),new Error(e)}function yi(n,e){n||ci(e)}function Hy(){return typeof self<"u"&&self.location?.href||""}function YD(){return ox()==="http:"||ox()==="https:"}function ox(){return typeof self<"u"&&self.location?.protocol||null}function QD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YD()||A4()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class xd{constructor(e,t){this.shortDelay=e,this.longDelay=t,yi(t>e,"Short delay should be less than long delay!"),this.isMobile=E4()||S4()}get(){return QD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function j0(n,e){yi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class T2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const JD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZD=new xd(3e4,6e4);function wi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function zs(n,e,t,r,i={}){return A2(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const d=wd({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:h,...o};return T4()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&jo(n.emulatorConfig.host)&&(m.credentials="include"),T2.fetch()(await S2(n,n.config.apiHost,t,d),m)})}async function A2(n,e,t){n._canInitEmulator=!1;const r={...WD,...e};try{const i=new tO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw lf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const d=o.ok?c.errorMessage:c.error.message,[h,m]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw lf(n,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw E2(n,p,m);es(n,p)}}catch(i){if(i instanceof Us)throw i;es(n,"network-request-failed",{message:String(i)})}}async function Ed(n,e,t,r,i={}){const o=await zs(n,e,t,r,i);return"mfaPendingCredential"in o&&es(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function S2(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?j0(n.config,i):`${n.config.apiScheme}://${i}`;return JD.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function eO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),ZD.get())})}}function lf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ks(n,e,r);return i.customData._tokenResponse=t,i}function lx(n){return n!==void 0&&n.enterprise!==void 0}class nO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rO(n,e){return zs(n,"GET","/v2/recaptchaConfig",wi(n,e))}async function sO(n,e){return zs(n,"POST","/v1/accounts:delete",e)}async function Gf(n,e){return zs(n,"POST","/v1/accounts:lookup",e)}function zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iO(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),i=L0(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:zu(wy(i.auth_time)),issuedAtTime:zu(wy(i.iat)),expirationTime:zu(wy(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function wy(n){return Number(n)*1e3}function L0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const i=i2(t);return i?JSON.parse(i):(bf("Failed to decode base64 JWT payload"),null)}catch(i){return bf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cx(n){const e=L0(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ec(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Us&&aO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function aO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class oO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(n){const e=n.auth,t=await n.getIdToken(),r=await ec(n,Gf(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?I2(i.providerUserInfo):[],c=cO(n.providerData,o),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,m=d?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,p)}async function lO(n){const e=Yt(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function I2(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function uO(n,e){const t=await A2(n,{},async()=>{const r=wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await S2(n,i,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&jo(n.emulatorConfig.host)&&(h.credentials="include"),T2.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dO(n,e){return zs(n,"POST","/v2/accounts:revokeToken",wi(n,e))}class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=cx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await uO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new Yl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return ci("not implemented")}}function na(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new oO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $y(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ec(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iO(this,e)}reload(){return lO(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(fi(this.auth));const e=await this.getIdToken();return await ec(this,sO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,m=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:A,stsTokenManager:P}=t;Pe(y&&P,e,"internal-error");const V=Yl.fromJSON(this.name,P);Pe(typeof y=="string",e,"internal-error"),na(r,e.name),na(i,e.name),Pe(typeof v=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),na(o,e.name),na(c,e.name),na(d,e.name),na(h,e.name),na(m,e.name),na(p,e.name);const L=new Wr({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:d,stsTokenManager:V,createdAt:m,lastLoginAt:p});return A&&Array.isArray(A)&&(L.providerData=A.map($=>({...$}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Yl;i.updateFromServerResponse(t);const o=new Wr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?I2(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,d=new Yl;d.updateFromIdToken(r);const h=new Wr({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,m),h}}const ux=new Map;function ui(n){yi(n instanceof Function,"Expected a class definition");let e=ux.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ux.set(n,e),e)}class R2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}R2.type="NONE";const dx=R2;function wf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=wf(this.userKey,i.apiKey,o),this.fullPersistenceKey=wf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gf(this.auth,{idToken:e}).catch(()=>{});return t?Wr._fromGetAccountInfoResponse(this.auth,t,e):null}return Wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ql(ui(dx),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||ui(dx);const c=wf(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const p=await m._get(c);if(p){let y;if(typeof p=="string"){const v=await Gf(e,{idToken:p}).catch(()=>{});if(!v)break;y=await Wr._fromGetAccountInfoResponse(e,v,p)}else y=Wr._fromJSON(e,p);m!==o&&(d=y),o=m;break}}catch{}const h=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ql(o,e,r):(o=h[0],d&&await o._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Ql(o,e,r))}}function hx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M2(e))return"Blackberry";if(P2(e))return"Webos";if(C2(e))return"Safari";if((e.includes("chrome/")||k2(e))&&!e.includes("edge/"))return"Chrome";if(O2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function N2(n=dn()){return/firefox\//i.test(n)}function C2(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k2(n=dn()){return/crios\//i.test(n)}function D2(n=dn()){return/iemobile/i.test(n)}function O2(n=dn()){return/android/i.test(n)}function M2(n=dn()){return/blackberry/i.test(n)}function P2(n=dn()){return/webos/i.test(n)}function U0(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hO(n=dn()){return U0(n)&&!!window.navigator?.standalone}function fO(){return I4()&&document.documentMode===10}function V2(n=dn()){return U0(n)||O2(n)||P2(n)||M2(n)||/windows phone/i.test(n)||D2(n)}function j2(n,e=[]){let t;switch(n){case"Browser":t=hx(dn());break;case"Worker":t=`${hx(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${r}`}class mO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,d)=>{try{const h=e(o);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function gO(n,e={}){return zs(n,"GET","/v2/passwordPolicy",wi(n,e))}const pO=6;class yO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class _O{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fx(this),this.idTokenSubscription=new fx(this),this.beforeStateQueue=new mO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gf(this,{idToken:e}),r=await Wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(fi(this));const t=e?Yt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gO(this),t=new yO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await dO(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ui(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(d,this,"internal-error"),d.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=j2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&KD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uo(n){return Yt(n)}class fx{constructor(e){this.auth=e,this.observer=null,this.addObserver=O4(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vO(n){Im=n}function L2(n){return Im.loadJS(n)}function bO(){return Im.recaptchaEnterpriseScript}function wO(){return Im.gapiScript}function xO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class EO{constructor(){this.enterprise=new TO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const AO="recaptcha-enterprise",U2="NO_RECAPTCHA";class SO{constructor(e){this.type=AO,this.auth=Uo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,d)=>{rO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new nO(h);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(h=>{d(h)})})}function i(o,c,d){const h=window.grecaptcha;lx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(U2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(d=>{if(!t&&lx(window.grecaptcha))i(d,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=bO();h.length!==0&&(h+=d),L2(h).then(()=>{i(d,o,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function mx(n,e,t,r=!1,i=!1){const o=new SO(n);let c;if(i)c=U2;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Gy(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await mx(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function IO(n,e){const t=Sm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(gi(o,e??{}))return i;es(i,"already-initialized")}return t.initialize({options:e})}function RO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ui);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function NO(n,e,t){const r=Uo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=z2(e),{host:c,port:d}=CO(e),h=d===null?"":`:${d}`,m={url:`${o}//${c}${h}/`},p=Object.freeze({host:c,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(gi(m,r.config.emulator)&&gi(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,jo(c)?(k0(`${o}//${c}${h}`),D0("Auth",!0)):kO()}function z2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CO(n){const e=z2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:gx(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:gx(c)}}}function gx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class z0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function DO(n,e){return zs(n,"POST","/v1/accounts:signUp",e)}async function OO(n,e){return Ed(n,"POST","/v1/accounts:signInWithPassword",wi(n,e))}async function MO(n,e){return zs(n,"POST","/v1/accounts:sendOobCode",wi(n,e))}async function PO(n,e){return MO(n,e)}async function VO(n,e){return Ed(n,"POST","/v1/accounts:signInWithEmailLink",wi(n,e))}async function jO(n,e){return Ed(n,"POST","/v1/accounts:signInWithEmailLink",wi(n,e))}class Zu extends z0{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gy(e,t,"signInWithPassword",OO);case"emailLink":return VO(e,{email:this._email,oobCode:this._password});default:es(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gy(e,r,"signUpPassword",DO);case"emailLink":return jO(e,{idToken:t,email:this._email,oobCode:this._password});default:es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xl(n,e){return Ed(n,"POST","/v1/accounts:signInWithIdp",wi(n,e))}const LO="http://localhost";class Eo extends z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):es("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Eo(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xl(e,t)}buildRequest(){const e={requestUri:LO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wd(t)}return e}}function UO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zO(n){const e=Cu(ku(n)).link,t=e?Cu(ku(e)).deep_link_id:null,r=Cu(ku(n)).deep_link_id;return(r?Cu(ku(r)).link:null)||r||t||e||n}class F0{constructor(e){const t=Cu(ku(e)),r=t.apiKey??null,i=t.oobCode??null,o=UO(t.mode??null);Pe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=zO(e);try{return new F0(t)}catch{return null}}}class pc{constructor(){this.providerId=pc.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=F0.parseLink(t);return Pe(r,"argument-error"),Zu._fromEmailAndCode(e,r.code,r.tenantId)}}pc.PROVIDER_ID="password";pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class F2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Td extends F2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oa extends Td{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.FACEBOOK_SIGN_IN_METHOD="facebook.com";oa.PROVIDER_ID="facebook.com";class li extends Td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return li.credential(t,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";class la extends Td{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.GITHUB_SIGN_IN_METHOD="github.com";la.PROVIDER_ID="github.com";class ca extends Td{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ca.credential(t,r)}catch{return null}}}ca.TWITTER_SIGN_IN_METHOD="twitter.com";ca.PROVIDER_ID="twitter.com";async function FO(n,e){return Ed(n,"POST","/v1/accounts:signUp",wi(n,e))}class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Wr._fromIdTokenResponse(e,r,i),c=px(r);return new To({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=px(r);return new To({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function px(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Yf extends Us{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Yf(e,t,r,i)}}function B2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(n,o,e,r):o})}async function BO(n,e,t=!1){const r=await ec(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",r)}async function qO(n,e,t=!1){const{auth:r}=n;if(hr(r.app))return Promise.reject(fi(r));const i="reauthenticate";try{const o=await ec(n,B2(r,i,e,n),t);Pe(o.idToken,r,"internal-error");const c=L0(o.idToken);Pe(c,r,"internal-error");const{sub:d}=c;return Pe(n.uid===d,r,"user-mismatch"),To._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&es(r,"user-mismatch"),o}}async function q2(n,e,t=!1){if(hr(n.app))return Promise.reject(fi(n));const r="signIn",i=await B2(n,r,e),o=await To._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function HO(n,e){return q2(Uo(n),e)}async function H2(n){const e=Uo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $O(n,e,t){if(hr(n.app))return Promise.reject(fi(n));const r=Uo(n),c=await Gy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&H2(n),h}),d=await To._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function yx(n,e,t){return hr(n.app)?Promise.reject(fi(n)):HO(Yt(n),pc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H2(n),r})}async function $2(n,e){const t=Yt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await PO(t.auth,i);o!==n.email&&await n.reload()}async function GO(n,e){return zs(n,"POST","/v1/accounts:update",e)}async function Ky(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Yt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ec(r,GO(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function KO(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function YO(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function QO(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}const Qf="__sak";class G2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const XO=1e3,WO=10;class K2 extends G2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);fO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},XO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}K2.type="LOCAL";const JO=K2;class Y2 extends G2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Y2.type="SESSION";const Q2=Y2;function ZO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Rm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async m=>m(t.origin,o)),h=await ZO(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];function B0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class e5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((d,h)=>{const m=B0("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(v.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ds(){return window}function t5(n){Ds().location.href=n}function X2(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function n5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r5(){return navigator?.serviceWorker?.controller||null}function s5(){return X2()?self:null}const W2="firebaseLocalStorageDb",i5=1,Xf="firebaseLocalStorage",J2="fbase_key";class Ad{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nm(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function a5(){const n=indexedDB.deleteDatabase(W2);return new Ad(n).toPromise()}function Yy(){const n=indexedDB.open(W2,i5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Xf,{keyPath:J2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Xf)?e(r):(r.close(),await a5(),e(await Yy()))})})}async function _x(n,e,t){const r=Nm(n,!0).put({[J2]:e,value:t});return new Ad(r).toPromise()}async function o5(n,e){const t=Nm(n,!1).get(e),r=await new Ad(t).toPromise();return r===void 0?null:r.value}function vx(n,e){const t=Nm(n,!0).delete(e);return new Ad(t).toPromise()}const l5=800,c5=3;class Z2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>c5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(s5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await n5(),!this.activeServiceWorker)return;this.sender=new e5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yy();return await _x(e,Qf,"1"),await vx(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_x(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>o5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Nm(i,!1).getAll();return new Ad(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z2.type="LOCAL";const u5=Z2;new xd(3e4,6e4);function d5(n,e){return e?ui(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class q0 extends z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function h5(n){return q2(n.auth,new q0(n),n.bypassAuthState)}function f5(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),qO(t,new q0(n),n.bypassAuthState)}async function m5(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),BO(t,new q0(n),n.bypassAuthState)}class eA{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h5;case"linkViaPopup":case"linkViaRedirect":return m5;case"reauthViaPopup":case"reauthViaRedirect":return f5;default:es(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const g5=new xd(2e3,1e4);class Gl extends eA{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Gl.currentPopupAction&&Gl.currentPopupAction.cancel(),Gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=B0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g5.get())};e()}}Gl.currentPopupAction=null;const p5="pendingRedirect",xf=new Map;class y5 extends eA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xf.get(this.auth._key());if(!e){try{const r=await _5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _5(n,e){const t=w5(e),r=b5(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function v5(n,e){xf.set(n._key(),e)}function b5(n){return ui(n._redirectPersistence)}function w5(n){return wf(p5,n.config.apiKey,n.name)}async function x5(n,e,t=!1){if(hr(n.app))return Promise.reject(fi(n));const r=Uo(n),i=d5(r,e),c=await new y5(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const E5=600*1e3;class T5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!tA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ks(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bx(e))}saveEventToCache(e){this.cachedEventUids.add(bx(e)),this.lastProcessedEventTime=Date.now()}}function bx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function A5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tA(n);default:return!1}}async function S5(n,e={}){return zs(n,"GET","/v1/projects",e)}const I5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R5=/^https?/;async function N5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await S5(n);for(const t of e)try{if(C5(t))return}catch{}es(n,"unauthorized-domain")}function C5(n){const e=Hy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!R5.test(t))return!1;if(I5.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const k5=new xd(3e4,6e4);function wx(){const n=Ds().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function D5(n){return new Promise((e,t)=>{function r(){wx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wx(),t(ks(n,"network-request-failed"))},timeout:k5.get()})}if(Ds().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ds().gapi?.load)r();else{const i=xO("iframefcb");return Ds()[i]=()=>{gapi.load?r():t(ks(n,"network-request-failed"))},L2(`${wO()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Ef=null,e})}let Ef=null;function O5(n){return Ef=Ef||D5(n),Ef}const M5=new xd(5e3,15e3),P5="__/auth/iframe",V5="emulator/auth/iframe",j5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U5(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?j0(e,V5):`https://${n.config.authDomain}/${P5}`,r={apiKey:e.apiKey,appName:n.name,v:Lo},i=L5.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wd(r).slice(1)}`}async function z5(n){const e=await O5(n),t=Ds().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:U5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j5,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=ks(n,"network-request-failed"),d=Ds().setTimeout(()=>{o(c)},M5.get());function h(){Ds().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{o(c)})}))}const F5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B5=500,q5=600,H5="_blank",$5="http://localhost";class xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G5(n,e,t,r=B5,i=q5){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...F5,width:r.toString(),height:i.toString(),top:o,left:c},m=dn().toLowerCase();t&&(d=k2(m)?H5:t),N2(m)&&(e=e||$5,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[w,A])=>`${v}${w}=${A},`,"");if(hO(m)&&d!=="_self")return K5(e||"",d),new xx(null);const y=window.open(e||"",d,p);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new xx(y)}function K5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Y5="__/auth/handler",Q5="emulator/auth/handler",X5=encodeURIComponent("fac");async function Ex(n,e,t,r,i,o){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lo,eventId:i};if(e instanceof F2){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",D4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))c[p]=y}if(e instanceof Td){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const h=await n._getAppCheckToken(),m=h?`#${X5}=${encodeURIComponent(h)}`:"";return`${W5(n)}?${wd(d).slice(1)}${m}`}function W5({config:n}){return n.emulator?j0(n,Q5):`https://${n.authDomain}/${Y5}`}const xy="webStorageSupport";class J5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q2,this._completeRedirectFn=x5,this._overrideRedirectResult=v5}async _openPopup(e,t,r,i){yi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Ex(e,t,r,Hy(),i);return G5(e,o,B0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Ex(e,t,r,Hy(),i);return t5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(yi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await z5(e),r=new T5(e);return t.register("authEvent",i=>(Pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xy,{type:xy},i=>{const o=i?.[0]?.[xy];o!==void 0&&t(!!o),es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=N5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return V2()||C2()||U0()}}const Z5=J5;var Tx="@firebase/auth",Ax="1.11.1";class e3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function t3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n3(n){xo(new va("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j2(n)},m=new _O(r,i,o,h);return RO(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xo(new va("auth-internal",e=>{const t=Uo(e.getProvider("auth").getImmediate());return(r=>new e3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(Tx,Ax,t3(n)),Cs(Tx,Ax,"esm2020")}const r3=300,s3=u2("authIdTokenMaxAge")||r3;let Sx=null;const i3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>s3)return;const i=t?.token;Sx!==i&&(Sx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function a3(n=P0()){const e=Sm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=IO(n,{popupRedirectResolver:Z5,persistence:[u5,JO,Q2]}),r=u2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=i3(o.toString());YO(t,c,()=>c(t.currentUser)),KO(t,d=>c(d))}}const i=o2("auth");return i&&NO(t,`http://${i}`),t}function o3(){return document.getElementsByTagName("head")?.[0]??document}vO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ks("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",o3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n3("Browser");var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ma,nA;(function(){var n;function e(R,T){function E(){}E.prototype=T.prototype,R.F=T.prototype,R.prototype=new E,R.prototype.constructor=R,R.D=function(N,C,O){for(var k=Array(arguments.length-2),G=2;G<arguments.length;G++)k[G-2]=arguments[G];return T.prototype[C].apply(N,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,T,E){E||(E=0);const N=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)N[C]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(C=0;C<16;++C)N[C]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=R.g[0],E=R.g[1],C=R.g[2];let O=R.g[3],k;k=T+(O^E&(C^O))+N[0]+3614090360&4294967295,T=E+(k<<7&4294967295|k>>>25),k=O+(C^T&(E^C))+N[1]+3905402710&4294967295,O=T+(k<<12&4294967295|k>>>20),k=C+(E^O&(T^E))+N[2]+606105819&4294967295,C=O+(k<<17&4294967295|k>>>15),k=E+(T^C&(O^T))+N[3]+3250441966&4294967295,E=C+(k<<22&4294967295|k>>>10),k=T+(O^E&(C^O))+N[4]+4118548399&4294967295,T=E+(k<<7&4294967295|k>>>25),k=O+(C^T&(E^C))+N[5]+1200080426&4294967295,O=T+(k<<12&4294967295|k>>>20),k=C+(E^O&(T^E))+N[6]+2821735955&4294967295,C=O+(k<<17&4294967295|k>>>15),k=E+(T^C&(O^T))+N[7]+4249261313&4294967295,E=C+(k<<22&4294967295|k>>>10),k=T+(O^E&(C^O))+N[8]+1770035416&4294967295,T=E+(k<<7&4294967295|k>>>25),k=O+(C^T&(E^C))+N[9]+2336552879&4294967295,O=T+(k<<12&4294967295|k>>>20),k=C+(E^O&(T^E))+N[10]+4294925233&4294967295,C=O+(k<<17&4294967295|k>>>15),k=E+(T^C&(O^T))+N[11]+2304563134&4294967295,E=C+(k<<22&4294967295|k>>>10),k=T+(O^E&(C^O))+N[12]+1804603682&4294967295,T=E+(k<<7&4294967295|k>>>25),k=O+(C^T&(E^C))+N[13]+4254626195&4294967295,O=T+(k<<12&4294967295|k>>>20),k=C+(E^O&(T^E))+N[14]+2792965006&4294967295,C=O+(k<<17&4294967295|k>>>15),k=E+(T^C&(O^T))+N[15]+1236535329&4294967295,E=C+(k<<22&4294967295|k>>>10),k=T+(C^O&(E^C))+N[1]+4129170786&4294967295,T=E+(k<<5&4294967295|k>>>27),k=O+(E^C&(T^E))+N[6]+3225465664&4294967295,O=T+(k<<9&4294967295|k>>>23),k=C+(T^E&(O^T))+N[11]+643717713&4294967295,C=O+(k<<14&4294967295|k>>>18),k=E+(O^T&(C^O))+N[0]+3921069994&4294967295,E=C+(k<<20&4294967295|k>>>12),k=T+(C^O&(E^C))+N[5]+3593408605&4294967295,T=E+(k<<5&4294967295|k>>>27),k=O+(E^C&(T^E))+N[10]+38016083&4294967295,O=T+(k<<9&4294967295|k>>>23),k=C+(T^E&(O^T))+N[15]+3634488961&4294967295,C=O+(k<<14&4294967295|k>>>18),k=E+(O^T&(C^O))+N[4]+3889429448&4294967295,E=C+(k<<20&4294967295|k>>>12),k=T+(C^O&(E^C))+N[9]+568446438&4294967295,T=E+(k<<5&4294967295|k>>>27),k=O+(E^C&(T^E))+N[14]+3275163606&4294967295,O=T+(k<<9&4294967295|k>>>23),k=C+(T^E&(O^T))+N[3]+4107603335&4294967295,C=O+(k<<14&4294967295|k>>>18),k=E+(O^T&(C^O))+N[8]+1163531501&4294967295,E=C+(k<<20&4294967295|k>>>12),k=T+(C^O&(E^C))+N[13]+2850285829&4294967295,T=E+(k<<5&4294967295|k>>>27),k=O+(E^C&(T^E))+N[2]+4243563512&4294967295,O=T+(k<<9&4294967295|k>>>23),k=C+(T^E&(O^T))+N[7]+1735328473&4294967295,C=O+(k<<14&4294967295|k>>>18),k=E+(O^T&(C^O))+N[12]+2368359562&4294967295,E=C+(k<<20&4294967295|k>>>12),k=T+(E^C^O)+N[5]+4294588738&4294967295,T=E+(k<<4&4294967295|k>>>28),k=O+(T^E^C)+N[8]+2272392833&4294967295,O=T+(k<<11&4294967295|k>>>21),k=C+(O^T^E)+N[11]+1839030562&4294967295,C=O+(k<<16&4294967295|k>>>16),k=E+(C^O^T)+N[14]+4259657740&4294967295,E=C+(k<<23&4294967295|k>>>9),k=T+(E^C^O)+N[1]+2763975236&4294967295,T=E+(k<<4&4294967295|k>>>28),k=O+(T^E^C)+N[4]+1272893353&4294967295,O=T+(k<<11&4294967295|k>>>21),k=C+(O^T^E)+N[7]+4139469664&4294967295,C=O+(k<<16&4294967295|k>>>16),k=E+(C^O^T)+N[10]+3200236656&4294967295,E=C+(k<<23&4294967295|k>>>9),k=T+(E^C^O)+N[13]+681279174&4294967295,T=E+(k<<4&4294967295|k>>>28),k=O+(T^E^C)+N[0]+3936430074&4294967295,O=T+(k<<11&4294967295|k>>>21),k=C+(O^T^E)+N[3]+3572445317&4294967295,C=O+(k<<16&4294967295|k>>>16),k=E+(C^O^T)+N[6]+76029189&4294967295,E=C+(k<<23&4294967295|k>>>9),k=T+(E^C^O)+N[9]+3654602809&4294967295,T=E+(k<<4&4294967295|k>>>28),k=O+(T^E^C)+N[12]+3873151461&4294967295,O=T+(k<<11&4294967295|k>>>21),k=C+(O^T^E)+N[15]+530742520&4294967295,C=O+(k<<16&4294967295|k>>>16),k=E+(C^O^T)+N[2]+3299628645&4294967295,E=C+(k<<23&4294967295|k>>>9),k=T+(C^(E|~O))+N[0]+4096336452&4294967295,T=E+(k<<6&4294967295|k>>>26),k=O+(E^(T|~C))+N[7]+1126891415&4294967295,O=T+(k<<10&4294967295|k>>>22),k=C+(T^(O|~E))+N[14]+2878612391&4294967295,C=O+(k<<15&4294967295|k>>>17),k=E+(O^(C|~T))+N[5]+4237533241&4294967295,E=C+(k<<21&4294967295|k>>>11),k=T+(C^(E|~O))+N[12]+1700485571&4294967295,T=E+(k<<6&4294967295|k>>>26),k=O+(E^(T|~C))+N[3]+2399980690&4294967295,O=T+(k<<10&4294967295|k>>>22),k=C+(T^(O|~E))+N[10]+4293915773&4294967295,C=O+(k<<15&4294967295|k>>>17),k=E+(O^(C|~T))+N[1]+2240044497&4294967295,E=C+(k<<21&4294967295|k>>>11),k=T+(C^(E|~O))+N[8]+1873313359&4294967295,T=E+(k<<6&4294967295|k>>>26),k=O+(E^(T|~C))+N[15]+4264355552&4294967295,O=T+(k<<10&4294967295|k>>>22),k=C+(T^(O|~E))+N[6]+2734768916&4294967295,C=O+(k<<15&4294967295|k>>>17),k=E+(O^(C|~T))+N[13]+1309151649&4294967295,E=C+(k<<21&4294967295|k>>>11),k=T+(C^(E|~O))+N[4]+4149444226&4294967295,T=E+(k<<6&4294967295|k>>>26),k=O+(E^(T|~C))+N[11]+3174756917&4294967295,O=T+(k<<10&4294967295|k>>>22),k=C+(T^(O|~E))+N[2]+718787259&4294967295,C=O+(k<<15&4294967295|k>>>17),k=E+(O^(C|~T))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const E=T-this.blockSize,N=this.C;let C=this.h,O=0;for(;O<T;){if(C==0)for(;O<=E;)i(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<T;)if(N[C++]=R.charCodeAt(O++),C==this.blockSize){i(this,N),C=0;break}}else for(;O<T;)if(N[C++]=R[O++],C==this.blockSize){i(this,N),C=0;break}}this.h=C,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var E=R.length-8;E<R.length;++E)R[E]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,E=0;E<4;++E)for(let N=0;N<32;N+=8)R[T++]=this.g[E]>>>N&255;return R};function o(R,T){var E=d;return Object.prototype.hasOwnProperty.call(E,R)?E[R]:E[R]=T(R)}function c(R,T){this.h=T;const E=[];let N=!0;for(let C=R.length-1;C>=0;C--){const O=R[C]|0;N&&O==T||(E[C]=O,N=!1)}this.g=E}var d={};function h(R){return-128<=R&&R<128?o(R,function(T){return new c([T|0],T<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return V(m(-R));const T=[];let E=1;for(let N=0;R>=E;N++)T[N]=R/E|0,E*=4294967296;return new c(T,0)}function p(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return V(p(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=m(Math.pow(T,8));let N=y;for(let O=0;O<R.length;O+=8){var C=Math.min(8,R.length-O);const k=parseInt(R.substring(O,O+C),T);C<8?(C=m(Math.pow(T,C)),N=N.j(C).add(m(k))):(N=N.j(E),N=N.add(m(k)))}return N}var y=h(0),v=h(1),w=h(16777216);n=c.prototype,n.m=function(){if(P(this))return-V(this).m();let R=0,T=1;for(let E=0;E<this.g.length;E++){const N=this.i(E);R+=(N>=0?N:4294967296+N)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(P(this))return"-"+V(this).toString(R);const T=m(Math.pow(R,6));var E=this;let N="";for(;;){const C=H(E,T).g;E=L(E,C.j(T));let O=((E.g.length>0?E.g[0]:E.h)>>>0).toString(R);if(E=C,A(E))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function P(R){return R.h==-1}n.l=function(R){return R=L(this,R),P(R)?-1:A(R)?0:1};function V(R){const T=R.g.length,E=[];for(let N=0;N<T;N++)E[N]=~R.g[N];return new c(E,~R.h).add(v)}n.abs=function(){return P(this)?V(this):this},n.add=function(R){const T=Math.max(this.g.length,R.g.length),E=[];let N=0;for(let C=0;C<=T;C++){let O=N+(this.i(C)&65535)+(R.i(C)&65535),k=(O>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);N=k>>>16,O&=65535,k&=65535,E[C]=k<<16|O}return new c(E,E[E.length-1]&-2147483648?-1:0)};function L(R,T){return R.add(V(T))}n.j=function(R){if(A(this)||A(R))return y;if(P(this))return P(R)?V(this).j(V(R)):V(V(this).j(R));if(P(R))return V(this.j(V(R)));if(this.l(w)<0&&R.l(w)<0)return m(this.m()*R.m());const T=this.g.length+R.g.length,E=[];for(var N=0;N<2*T;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<R.g.length;C++){const O=this.i(N)>>>16,k=this.i(N)&65535,G=R.i(C)>>>16,ee=R.i(C)&65535;E[2*N+2*C]+=k*ee,$(E,2*N+2*C),E[2*N+2*C+1]+=O*ee,$(E,2*N+2*C+1),E[2*N+2*C+1]+=k*G,$(E,2*N+2*C+1),E[2*N+2*C+2]+=O*G,$(E,2*N+2*C+2)}for(R=0;R<T;R++)E[R]=E[2*R+1]<<16|E[2*R];for(R=T;R<2*T;R++)E[R]=0;return new c(E,0)};function $(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function z(R,T){this.g=R,this.h=T}function H(R,T){if(A(T))throw Error("division by zero");if(A(R))return new z(y,y);if(P(R))return T=H(V(R),T),new z(V(T.g),V(T.h));if(P(T))return T=H(R,V(T)),new z(V(T.g),T.h);if(R.g.length>30){if(P(R)||P(T))throw Error("slowDivide_ only works with positive integers.");for(var E=v,N=T;N.l(R)<=0;)E=X(E),N=X(N);var C=F(E,1),O=F(N,1);for(N=F(N,2),E=F(E,2);!A(N);){var k=O.add(N);k.l(R)<=0&&(C=C.add(E),O=k),N=F(N,1),E=F(E,1)}return T=L(R,C.j(T)),new z(C,T)}for(C=y;R.l(T)>=0;){for(E=Math.max(1,Math.floor(R.m()/T.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=m(E),k=O.j(T);P(k)||k.l(R)>0;)E-=N,O=m(E),k=O.j(T);A(O)&&(O=v),C=C.add(O),R=L(R,k)}return new z(C,R)}n.B=function(R){return H(this,R).h},n.and=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)&R.i(N);return new c(E,this.h&R.h)},n.or=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)|R.i(N);return new c(E,this.h|R.h)},n.xor=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)^R.i(N);return new c(E,this.h^R.h)};function X(R){const T=R.g.length+1,E=[];for(let N=0;N<T;N++)E[N]=R.i(N)<<1|R.i(N-1)>>>31;return new c(E,R.h)}function F(R,T){const E=T>>5;T%=32;const N=R.g.length-E,C=[];for(let O=0;O<N;O++)C[O]=T>0?R.i(O+E)>>>T|R.i(O+E+1)<<32-T:R.i(O+E);return new c(C,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=p,ma=c}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rA,Du,sA,Tf,Qy,iA,aA,oA;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var x=0;x<f.length;++x){var I=f[x];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=t(this);function i(f,x){if(x)e:{var I=r;f=f.split(".");for(var U=0;U<f.length-1;U++){var ae=f[U];if(!(ae in I))break e;I=I[ae]}f=f[f.length-1],U=I[f],x=x(U),x!=U&&x!=null&&e(I,f,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(x){var I=[],U;for(U in x)Object.prototype.hasOwnProperty.call(x,U)&&I.push([U,x[U]]);return I}});var o=o||{},c=this||self;function d(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function h(f,x,I){return f.call.apply(f.bind,arguments)}function m(f,x,I){return m=h,m.apply(null,arguments)}function p(f,x){var I=Array.prototype.slice.call(arguments,1);return function(){var U=I.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function y(f,x){function I(){}I.prototype=x.prototype,f.Z=x.prototype,f.prototype=new I,f.prototype.constructor=f,f.Ob=function(U,ae,ue){for(var be=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)be[Be-2]=arguments[Be];return x.prototype[ae].apply(U,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function w(f){const x=f.length;if(x>0){const I=Array(x);for(let U=0;U<x;U++)I[U]=f[U];return I}return[]}function A(f,x){for(let U=1;U<arguments.length;U++){const ae=arguments[U];var I=typeof ae;if(I=I!="object"?I:ae?Array.isArray(ae)?"array":I:"null",I=="array"||I=="object"&&typeof ae.length=="number"){I=f.length||0;const ue=ae.length||0;f.length=I+ue;for(let be=0;be<ue;be++)f[I+be]=ae[be]}else f.push(ae)}}class P{constructor(x,I){this.i=x,this.j=I,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function V(f){c.setTimeout(()=>{throw f},0)}function L(){var f=R;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class ${constructor(){this.h=this.g=null}add(x,I){const U=z.get();U.set(x,I),this.h?this.h.next=U:this.g=U,this.h=U}}var z=new P(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,I){this.h=x,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let X,F=!1,R=new $,T=()=>{const f=Promise.resolve(void 0);X=()=>{f.then(E)}};function E(){for(var f;f=L();){try{f.h.call(f.g)}catch(I){V(I)}var x=z;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}F=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};c.addEventListener("test",I,x),c.removeEventListener("test",I,x)}catch{}return f})();function k(f){return/^[\s\xa0]*$/.test(f)}function G(f,x){C.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}y(G,C),G.prototype.init=function(f,x){const I=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(I=="mouseover"?x=f.fromElement:I=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),D=0;function M(f,x,I,U,ae){this.listener=f,this.proxy=null,this.src=x,this.type=I,this.capture=!!U,this.ha=ae,this.key=++D,this.da=this.fa=!1}function J(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function W(f,x,I){for(const U in f)x.call(I,f[U],U,f)}function Z(f,x){for(const I in f)x.call(void 0,f[I],I,f)}function B(f){const x={};for(const I in f)x[I]=f[I];return x}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(f,x){let I,U;for(let ae=1;ae<arguments.length;ae++){U=arguments[ae];for(I in U)f[I]=U[I];for(let ue=0;ue<Y.length;ue++)I=Y[ue],Object.prototype.hasOwnProperty.call(U,I)&&(f[I]=U[I])}}function ie(f){this.src=f,this.g={},this.h=0}ie.prototype.add=function(f,x,I,U,ae){const ue=f.toString();f=this.g[ue],f||(f=this.g[ue]=[],this.h++);const be=ye(f,x,U,ae);return be>-1?(x=f[be],I||(x.fa=!1)):(x=new M(x,this.src,ue,!!U,ae),x.fa=I,f.push(x)),x};function ne(f,x){const I=x.type;if(I in f.g){var U=f.g[I],ae=Array.prototype.indexOf.call(U,x,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(U,ae,1),ue&&(J(x),f.g[I].length==0&&(delete f.g[I],f.h--))}}function ye(f,x,I,U){for(let ae=0;ae<f.length;++ae){const ue=f[ae];if(!ue.da&&ue.listener==x&&ue.capture==!!I&&ue.ha==U)return ae}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Me={};function Re(f,x,I,U,ae){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Re(f,x[ue],I,U,ae);return null}return I=Qe(I),f&&f[ee]?f.J(x,I,d(U)?!!U.capture:!1,ae):_e(f,x,I,!1,U,ae)}function _e(f,x,I,U,ae,ue){if(!x)throw Error("Invalid event type");const be=d(ae)?!!ae.capture:!!ae;let Be=at(f);if(Be||(f[Ae]=Be=new ie(f)),I=Be.add(x,I,U,be,ue),I.proxy)return I;if(U=Te(),I.proxy=U,U.src=f,U.listener=I,f.addEventListener)O||(ae=be),ae===void 0&&(ae=!1),f.addEventListener(x.toString(),U,ae);else if(f.attachEvent)f.attachEvent(De(x.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Te(){function f(I){return x.call(f.src,f.listener,I)}const x=Ke;return f}function Ve(f,x,I,U,ae){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)Ve(f,x[ue],I,U,ae);else U=d(U)?!!U.capture:!!U,I=Qe(I),f&&f[ee]?(f=f.i,ue=String(x).toString(),ue in f.g&&(x=f.g[ue],I=ye(x,I,U,ae),I>-1&&(J(x[I]),Array.prototype.splice.call(x,I,1),x.length==0&&(delete f.g[ue],f.h--)))):f&&(f=at(f))&&(x=f.g[x.toString()],f=-1,x&&(f=ye(x,I,U,ae)),(I=f>-1?x[f]:null)&&Ze(I))}function Ze(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[ee])ne(x.i,f);else{var I=f.type,U=f.proxy;x.removeEventListener?x.removeEventListener(I,U,f.capture):x.detachEvent?x.detachEvent(De(I),U):x.addListener&&x.removeListener&&x.removeListener(U),(I=at(x))?(ne(I,f),I.h==0&&(I.src=null,x[Ae]=null)):J(f)}}}function De(f){return f in Me?Me[f]:Me[f]="on"+f}function Ke(f,x){if(f.da)f=!0;else{x=new G(x,this);const I=f.listener,U=f.ha||f.src;f.fa&&Ze(f),f=I.call(U,x)}return f}function at(f){return f=f[Ae],f instanceof ie?f:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qe(f){return typeof f=="function"?f:(f[st]||(f[st]=function(x){return f.handleEvent(x)}),f[st])}function Fe(){N.call(this),this.i=new ie(this),this.M=this,this.G=null}y(Fe,N),Fe.prototype[ee]=!0,Fe.prototype.removeEventListener=function(f,x,I,U){Ve(this,f,x,I,U)};function Xe(f,x){var I,U=f.G;if(U)for(I=[];U;U=U.G)I.push(U);if(f=f.M,U=x.type||x,typeof x=="string")x=new C(x,f);else if(x instanceof C)x.target=x.target||f;else{var ae=x;x=new C(U,f),se(x,ae)}ae=!0;let ue,be;if(I)for(be=I.length-1;be>=0;be--)ue=x.g=I[be],ae=ft(ue,U,!0,x)&&ae;if(ue=x.g=f,ae=ft(ue,U,!0,x)&&ae,ae=ft(ue,U,!1,x)&&ae,I)for(be=0;be<I.length;be++)ue=x.g=I[be],ae=ft(ue,U,!1,x)&&ae}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const I=f.g[x];for(let U=0;U<I.length;U++)J(I[U]);delete f.g[x],f.h--}}this.G=null},Fe.prototype.J=function(f,x,I,U){return this.i.add(String(f),x,!1,I,U)},Fe.prototype.K=function(f,x,I,U){return this.i.add(String(f),x,!0,I,U)};function ft(f,x,I,U){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ue=0;ue<x.length;++ue){const be=x[ue];if(be&&!be.da&&be.capture==I){const Be=be.listener,$t=be.ha||be.src;be.fa&&ne(f.i,be),ae=Be.call($t,U)!==!1&&ae}}return ae&&!U.defaultPrevented}function _n(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(f,x||0)}function Rt(f){f.g=_n(()=>{f.g=null,f.i&&(f.i=!1,Rt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class $e extends N{constructor(x,I){super(),this.m=x,this.l=I,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qt(f){N.call(this),this.h=f,this.g={}}y(qt,N);var Gn=[];function ss(f){W(f.g,function(x,I){this.g.hasOwnProperty(I)&&Ze(x)},f),f.g={}}qt.prototype.N=function(){qt.Z.N.call(this),ss(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=c.JSON.stringify,Lr=c.JSON.parse,Qt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Cn(){}function vn(){}var Ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){C.call(this,"d")}y(wt,C);function Xt(){C.call(this,"c")}y(Xt,C);var Ct={},$o=null;function is(){return $o=$o||new Fe}Ct.Ia="serverreachability";function Ca(f){C.call(this,Ct.Ia,f)}y(Ca,C);function kn(f){const x=is();Xe(x,new Ca(x))}Ct.STAT_EVENT="statevent";function Bs(f,x){C.call(this,Ct.STAT_EVENT,f),this.stat=x}y(Bs,C);function mt(f){const x=is();Xe(x,new Bs(x,f))}Ct.Ja="timingevent";function ln(f,x){C.call(this,Ct.Ja,f),this.size=x}y(ln,C);function bn(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},x)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Go(f,x,I,U,ae,ue){f.info(function(){if(f.g)if(ue){var be="",Be=ue.split("&");for(let ut=0;ut<Be.length;ut++){var $t=Be[ut].split("=");if($t.length>1){const Ot=$t[0];$t=$t[1];const wr=Ot.split("_");be=wr.length>=2&&wr[1]=="type"?be+(Ot+"="+$t+"&"):be+(Ot+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+U+") [attempt "+ae+"]: "+x+`
`+I+`
`+be})}function yr(f,x,I,U,ae,ue,be){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ae+"]: "+x+`
`+I+`
`+ue+" "+be})}function fn(f,x,I,U){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+cg(f,I)+(U?" "+U:"")})}function ka(f,x){f.info(function(){return"TIMEOUT: "+x})}wn.prototype.info=function(){};function cg(f,x){if(!f.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(f=0;f<ue.length;f++)if(Array.isArray(ue[f])){var I=ue[f];if(!(I.length<2)){var U=I[1];if(Array.isArray(U)&&!(U.length<1)){var ae=U[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<U.length;be++)U[be]=""}}}}return Nt(ue)}catch{return x}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ec;function Oa(){}y(Oa,Cn),Oa.prototype.g=function(){return new XMLHttpRequest},Ec=new Oa;function qs(f){return encodeURIComponent(String(f))}function jd(f){var x=1;f=f.split(":");const I=[];for(;x>0&&f.length;)I.push(f.shift()),x--;return f.length&&I.push(f.join(":")),I}function Ur(f,x,I,U){this.j=f,this.i=x,this.l=I,this.S=U||1,this.V=new qt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var Wt={},mn={};function as(f,x,I){f.M=1,f.A=Ma(Zt(x)),f.u=I,f.R=!0,Ko(f,null)}function Ko(f,x){f.F=Date.now(),os(f),f.B=Zt(f.A);var I=f.B,U=f.S;Array.isArray(U)||(U=[String(U)]),Wo(I.i,"t",U),f.C=0,I=f.j.L,f.h=new zr,f.g=Jd(f.j,I?x:null,!f.u),f.P>0&&(f.O=new $e(m(f.Y,f,f.g),f.P)),x=f.V,I=f.g,U=f.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Gn[0]=ae.toString()),ae=Gn);for(let ue=0;ue<ae.length;ue++){const be=Re(I,ae[ue],U||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=f.J?B(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),kn(),Go(f.i,f.v,f.B,f.l,f.S,f.u)}Ur.prototype.ba=function(f){f=f.target;const x=this.O;x&&qr(f)==3?x.j():this.Y(f)},Ur.prototype.Y=function(f){try{if(f==this.g)e:{const Be=qr(this.g),$t=this.g.ya(),ut=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Be!=4||$t==7||($t==8||ut<=0?kn(3):kn(2)),ls(this);var x=this.g.ca();this.X=x;var I=ug(this);if(this.o=x==200,yr(this.i,this.v,this.B,this.l,this.S,Be,x),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ae=this.g;if((U=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(U)){var ue=U;break t}}ue=null}if(f=ue)fn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cs(this,f);else{this.o=!1,this.m=3,mt(12),nr(this),_r(this);break e}}if(this.R){f=!0;let Ot;for(;!this.K&&this.C<I.length;)if(Ot=Ud(this,I),Ot==mn){Be==4&&(this.m=4,mt(14),f=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Wt){this.m=4,mt(15),fn(this.i,this.l,I,"[Invalid Chunk]"),f=!1;break}else fn(this.i,this.l,Ot,null),cs(this,Ot);if(Ld(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||I.length!=0||this.h.h||(this.m=1,mt(16),f=!1),this.o=this.o&&f,!f)fn(this.i,this.l,I,"[Invalid Chunked Response]"),nr(this),_r(this);else if(I.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Lc(be),be.P=!0,mt(11))}}else fn(this.i,this.l,I,null),cs(this,I);Be==4&&nr(this),this.o&&!this.K&&(Be==4?Yd(this.j,this):(this.o=!1,os(this)))}else $s(this.g),x==400&&I.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),nr(this),_r(this)}}}catch{}finally{}};function ug(f){if(!Ld(f))return f.g.la();const x=xn(f.g);if(x==="")return"";let I="";const U=x.length,ae=qr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return nr(f),_r(f),"";f.h.i=new c.TextDecoder}for(let ue=0;ue<U;ue++)f.h.h=!0,I+=f.h.i.decode(x[ue],{stream:!(ae&&ue==U-1)});return x.length=0,f.h.g+=I,f.C=0,f.h.g}function Ld(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ud(f,x){var I=f.C,U=x.indexOf(`
`,I);return U==-1?mn:(I=Number(x.substring(I,U)),isNaN(I)?Wt:(U+=1,U+I>x.length?mn:(x=x.slice(U,U+I),f.C=U+I,x)))}Ur.prototype.cancel=function(){this.K=!0,nr(this)};function os(f){f.T=Date.now()+f.H,Yo(f,f.H)}function Yo(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=bn(m(f.aa,f),x)}function ls(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Ur.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(ka(this.i,this.B),this.M!=2&&(kn(),mt(17)),nr(this),this.m=2,_r(this)):Yo(this,this.T-f)};function _r(f){f.j.I==0||f.K||Yd(f.j,f)}function nr(f){ls(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,ss(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function cs(f,x){try{var I=f.j;if(I.I!=0&&(I.g==f||ds(I.h,f))){if(!f.L&&ds(I.h,f)&&I.I==3){try{var U=I.Ba.g.parse(x)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ae=U;if(ae[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<f.F)nl(I),Di(I);else break e;Fa(I),mt(18)}}else I.xa=ae[1],0<I.xa-I.K&&ae[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=bn(m(I.Va,I),6e3));us(I.h)<=1&&I.ta&&(I.ta=void 0)}else ys(I,11)}else if((f.L||I.g==f)&&nl(I),!k(x))for(ae=I.Ba.g.parse(x),x=0;x<ae.length;x++){let ut=ae[x];const Ot=ut[0];if(!(Ot<=I.K))if(I.K=Ot,ut=ut[1],I.I==2)if(ut[0]=="c"){I.M=ut[1],I.ba=ut[2];const wr=ut[3];wr!=null&&(I.ka=wr,I.j.info("VER="+I.ka));const _s=ut[4];_s!=null&&(I.za=_s,I.j.info("SVER="+I.za));const Hr=ut[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(U=1.5*Hr,I.O=U,I.j.info("backChannelRequestTimeoutMs_="+U)),U=I;const $r=f.g;if($r){const Ba=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var ue=U.h;ue.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Sc(ue,ue.h),ue.h=null))}if(U.G){const rl=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(U.wa=rl,gt(U.J,U.G,rl))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-f.F,I.j.info("Handshake RTT: "+I.T+"ms")),U=I;var be=f;if(U.na=Wd(U,U.L?U.ba:null,U.W),be.L){Ic(U.h,be);var Be=be,$t=U.O;$t&&(Be.H=$t),Be.D&&(ls(Be),os(Be)),U.g=be}else Gd(U);I.i.length>0&&ps(I)}else ut[0]!="stop"&&ut[0]!="close"||ys(I,7);else I.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?ys(I,7):Vc(I):ut[0]!="noop"&&I.l&&I.l.qa(ut),I.A=0)}}kn(4)}catch{}}var Jt=class{constructor(f,x){this.g=f,this.map=x}};function Tc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ac(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function us(f){return f.h?1:f.g?f.g.size:0}function ds(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Sc(f,x){f.g?f.g.add(x):f.h=x}function Ic(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Tc.prototype.cancel=function(){if(this.i=Rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Rc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const I of f.g.values())x=x.concat(I.G);return x}return w(f.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(f,x){if(f){f=f.split("&");for(let I=0;I<f.length;I++){const U=f[I].indexOf("=");let ae,ue=null;U>=0?(ae=f[I].substring(0,U),ue=f[I].substring(U+1)):ae=f[I],x(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function rr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof rr?(this.l=f.l,gn(this,f.j),this.o=f.o,this.g=f.g,Ai(this,f.u),this.h=f.h,Nc(this,Hd(f.i)),this.m=f.m):f&&(x=String(f).match(zd))?(this.l=!1,gn(this,x[1]||"",!0),this.o=hs(x[2]||""),this.g=hs(x[3]||"",!0),Ai(this,x[4]),this.h=hs(x[5]||"",!0),Nc(this,x[6]||"",!0),this.m=hs(x[7]||"")):(this.l=!1,this.i=new Ii(null,this.l))}rr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Pa(x,Xo,!0),":");var I=this.g;return(I||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Pa(x,Xo,!0),"@"),f.push(qs(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&f.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Pa(I,I.charAt(0)=="/"?Cc:Fd,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Pa(I,Bd)),f.join("")},rr.prototype.resolve=function(f){const x=Zt(this);let I=!!f.j;I?gn(x,f.j):I=!!f.o,I?x.o=f.o:I=!!f.g,I?x.g=f.g:I=f.u!=null;var U=f.h;if(I)Ai(x,f.u);else if(I=!!f.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(U=x.h.slice(0,ae+1)+U)}if(ae=U,ae==".."||ae==".")U="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){U=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const Be=ae[be++];Be=="."?U&&be==ae.length&&ue.push(""):Be==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),U&&be==ae.length&&ue.push("")):(ue.push(Be),U=!0)}U=ue.join("/")}else U=ae}return I?x.h=U:I=f.i.toString()!=="",I?Nc(x,Hd(f.i)):I=!!f.m,I&&(x.m=f.m),x};function Zt(f){return new rr(f)}function gn(f,x,I){f.j=I?hs(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Ai(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Nc(f,x,I){x instanceof Ii?(f.i=x,Jo(f.i,f.l)):(I||(x=Pa(x,Si)),f.i=new Ii(x,f.l))}function gt(f,x,I){f.i.set(x,I)}function Ma(f){return gt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function hs(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Pa(f,x,I){return typeof f=="string"?(f=encodeURI(f).replace(x,Kn),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Kn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xo=/[#\/\?@]/g,Fd=/[#\?:]/g,Cc=/[#\?]/g,Si=/[#\?@]/g,Bd=/#/g;function Ii(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Yn(f){f.g||(f.g=new Map,f.h=0,f.i&&Qo(f.i,function(x,I){f.add(decodeURIComponent(x.replace(/\+/g," ")),I)}))}n=Ii.prototype,n.add=function(f,x){Yn(this),this.i=null,f=Ri(this,f);let I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(x),this.h+=1,this};function qd(f,x){Yn(f),x=Ri(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function kc(f,x){return Yn(f),x=Ri(f,x),f.g.has(x)}n.forEach=function(f,x){Yn(this),this.g.forEach(function(I,U){I.forEach(function(ae){f.call(x,ae,U,this)},this)},this)};function Dc(f,x){Yn(f);let I=[];if(typeof x=="string")kc(f,x)&&(I=I.concat(f.g.get(Ri(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)I=I.concat(f[x]);return I}n.set=function(f,x){return Yn(this),this.i=null,f=Ri(this,f),kc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Dc(this,f),f.length>0?String(f[0]):x):x};function Wo(f,x,I){qd(f,x),I.length>0&&(f.i=null,f.g.set(Ri(f,x),w(I)),f.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let U=0;U<x.length;U++){var I=x[U];const ae=qs(I);I=Dc(this,I);for(let ue=0;ue<I.length;ue++){let be=ae;I[ue]!==""&&(be+="="+qs(I[ue])),f.push(be)}}return this.i=f.join("&")};function Hd(f){const x=new Ii;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Ri(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Jo(f,x){x&&!f.j&&(Yn(f),f.i=null,f.g.forEach(function(I,U){const ae=U.toLowerCase();U!=ae&&(qd(this,U),Wo(this,ae,I))},f)),f.j=x}function Fr(f,x){const I=new wn;if(c.Image){const U=new Image;U.onload=p(vr,I,"TestLoadImage: loaded",!0,x,U),U.onerror=p(vr,I,"TestLoadImage: error",!1,x,U),U.onabort=p(vr,I,"TestLoadImage: abort",!1,x,U),U.ontimeout=p(vr,I,"TestLoadImage: timeout",!1,x,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else x(!1)}function Oc(f,x){const I=new wn,U=new AbortController,ae=setTimeout(()=>{U.abort(),vr(I,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:U.signal}).then(ue=>{clearTimeout(ae),ue.ok?vr(I,"TestPingServer: ok",!0,x):vr(I,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),vr(I,"TestPingServer: error",!1,x)})}function vr(f,x,I,U,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),U(I)}catch{}}function Ni(){this.g=new Qt}function fs(f){this.i=f.Sb||null,this.h=f.ab||!1}y(fs,Cn),fs.prototype.g=function(){return new Va(this.i,this.h)};function Va(f,x){Fe.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Va,Fe),n=Va.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Br(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Ci(this):Br(this),this.readyState==3&&Zo(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ci(this))},n.Na=function(f){this.g&&(this.response=f,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Br(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var I=x.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=x.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function br(f){let x="";return W(f,function(I,U){x+=U,x+=":",x+=I,x+=`\r
`}),x}function ja(f,x,I){e:{for(U in I){var U=!1;break e}U=!0}U||(I=br(I),typeof f=="string"?I!=null&&qs(I):gt(f,x,I))}function xt(f){Fe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(xt,Fe);var ms=/^https?$/i,Mc=["POST","PUT"];n=xt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,I,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ec.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ue){La(this,ue);return}if(f=I||"",I=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ae in U)I.set(ae,U[ae]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ue of U.keys())I.set(ue,U.get(ue));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(I.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Mc,x,void 0)>=0)||U||ae||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of I)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ue){La(this,ue)}};function La(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Pc(f),Hs(f)}function Pc(f){f.A||(f.A=!0,Xe(f,"complete"),Xe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Xe(this,"complete"),Xe(this,"abort"),Hs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},n.Xa=function(){Ua(this)};function Ua(f){if(f.h&&typeof o<"u"){if(f.v&&qr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Xe(f,"readystatechange"),qr(f)==4){f.h=!1;try{const ue=f.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var I;if(!(I=x)){var U;if(U=ue===0){let be=String(f.D).match(zd)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),U=!ms.test(be?be.toLowerCase():"")}I=U}if(I)Xe(f,"complete"),Xe(f,"success");else{f.o=6;try{var ae=qr(f)>2?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.ca()+"]",Pc(f)}}finally{Hs(f)}}}}function Hs(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const I=f.g;f.g=null,x||Xe(f,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Lr(x)}};function xn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(f){const x={};f=(f.g&&qr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(k(f[U]))continue;var I=jd(f[U]);const ae=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ue=x[ae]||[];x[ae]=ue,ue.push(I)}Z(x,function(U){return U.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(f,x,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||x}function ki(f){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,f),this.Za=gs("retryDelaySeedMs",1e4,f),this.Ta=gs("forwardChannelMaxRetries",2,f),this.va=gs("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Tc(f&&f.concurrentRequestLimit),this.Ba=new Ni,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ki.prototype,n.ka=8,n.I=1,n.connect=function(f,x,I,U){mt(0),this.W=f,this.H=x||{},I&&U!==void 0&&(this.H.OSID=I,this.H.OAID=U),this.F=this.X,this.J=Wd(this,null,this.W),ps(this)};function Vc(f){if(el(f),f.I==3){var x=f.V++,I=Zt(f.J);if(gt(I,"SID",f.M),gt(I,"RID",x),gt(I,"TYPE","terminate"),za(f,I),x=new Ur(f,f.j,x),x.M=2,x.A=Ma(Zt(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=x.A,I=!0),I||(x.g=Jd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),os(x)}Xd(f)}function Di(f){f.g&&(Lc(f),f.g.cancel(),f.g=null)}function el(f){Di(f),f.v&&(c.clearTimeout(f.v),f.v=null),nl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function ps(f){if(!Ac(f.h)&&!f.m){f.m=!0;var x=f.Ea;X||T(),F||(X(),F=!0),R.add(x,f),f.D=0}}function tl(f,x){return us(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=bn(m(f.Ea,f,x),Qd(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ae=new Ur(this,this.j,f);let ue=this.o;if(this.U&&(ue?(ue=B(ue),se(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var x=0,I=0;I<this.i.length;I++){t:{var U=this.i[I];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(x+=U,x>4096){x=I;break e}if(x===4096||I===this.i.length-1){x=I+1;break e}}x=1e3}else x=1e3;x=$d(this,ae,x),I=Zt(this.J),gt(I,"RID",f),gt(I,"CVER",22),this.G&&gt(I,"X-HTTP-Session-Id",this.G),za(this,I),ue&&(this.R?x="headers="+qs(br(ue))+"&"+x:this.u&&ja(I,this.u,ue)),Sc(this.h,ae),this.Ra&&gt(I,"TYPE","init"),this.S?(gt(I,"$req",x),gt(I,"SID","null"),ae.U=!0,as(ae,I,null)):as(ae,I,x),this.I=2}}else this.I==3&&(f?jc(this,f):this.i.length==0||Ac(this.h)||jc(this))};function jc(f,x){var I;x?I=x.l:I=f.V++;const U=Zt(f.J);gt(U,"SID",f.M),gt(U,"RID",I),gt(U,"AID",f.K),za(f,U),f.u&&f.o&&ja(U,f.u,f.o),I=new Ur(f,f.j,I,f.D+1),f.u===null&&(I.J=f.o),x&&(f.i=x.G.concat(f.i)),x=$d(f,I,1e3),I.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Sc(f.h,I),as(I,U,x)}function za(f,x){f.H&&W(f.H,function(I,U){gt(x,U,I)}),f.l&&W({},function(I,U){gt(x,U,I)})}function $d(f,x,I){I=Math.min(f.i.length,I);const U=f.l?m(f.l.Ka,f.l,f):null;e:{var ae=f.i;let Be=-1;for(;;){const $t=["count="+I];Be==-1?I>0?(Be=ae[0].g,$t.push("ofs="+Be)):Be=0:$t.push("ofs="+Be);let ut=!0;for(let Ot=0;Ot<I;Ot++){var ue=ae[Ot].g;const wr=ae[Ot].map;if(ue-=Be,ue<0)Be=Math.max(0,ae[Ot].g-100),ut=!1;else try{ue="req"+ue+"_"||"";try{var be=wr instanceof Map?wr:Object.entries(wr);for(const[_s,Hr]of be){let $r=Hr;d(Hr)&&($r=Nt(Hr)),$t.push(ue+_s+"="+encodeURIComponent($r))}}catch(_s){throw $t.push(ue+"type="+encodeURIComponent("_badmap")),_s}}catch{U&&U(wr)}}if(ut){be=$t.join("&");break e}}be=void 0}return f=f.i.splice(0,I),x.G=f,be}function Gd(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;X||T(),F||(X(),F=!0),R.add(x,f),f.A=0}}function Fa(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=bn(m(f.Da,f),Qd(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Kd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=bn(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),Di(this),Kd(this))};function Lc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Kd(f){f.g=new Ur(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=Zt(f.na);gt(x,"RID","rpc"),gt(x,"SID",f.M),gt(x,"AID",f.K),gt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&gt(x,"TO",f.ia),gt(x,"TYPE","xmlhttp"),za(f,x),f.u&&f.o&&ja(x,f.u,f.o),f.O&&(f.g.H=f.O);var I=f.g;f=f.ba,I.M=1,I.A=Ma(Zt(x)),I.u=null,I.R=!0,Ko(I,f)}n.Va=function(){this.C!=null&&(this.C=null,Di(this),Fa(this),mt(19))};function nl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Yd(f,x){var I=null;if(f.g==x){nl(f),Lc(f),f.g=null;var U=2}else if(ds(f.h,x))I=x.G,Ic(f.h,x),U=1;else return;if(f.I!=0){if(x.o)if(U==1){I=x.u?x.u.length:0,x=Date.now()-x.F;var ae=f.D;U=is(),Xe(U,new ln(U,I)),ps(f)}else Gd(f);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(U==1&&tl(f,x)||U==2&&Fa(f)))switch(I&&I.length>0&&(x=f.h,x.i=x.i.concat(I)),ae){case 1:ys(f,5);break;case 4:ys(f,10);break;case 3:ys(f,6);break;default:ys(f,2)}}}function Qd(f,x){let I=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(I*=2),I*x}function ys(f,x){if(f.j.info("Error code "+x),x==2){var I=m(f.bb,f),U=f.Ua;const ae=!U;U=new rr(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(U,"https"),Ma(U),ae?Fr(U.toString(),I):Oc(U.toString(),I)}else mt(2);f.I=0,f.l&&f.l.pa(x),Xd(f),el(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Xd(f){if(f.I=0,f.ja=[],f.l){const x=Rc(f.h);(x.length!=0||f.i.length!=0)&&(A(f.ja,x),A(f.ja,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.oa()}}function Wd(f,x,I){var U=I instanceof rr?Zt(I):new rr(I);if(U.g!="")x&&(U.g=x+"."+U.g),Ai(U,U.u);else{var ae=c.location;U=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new rr(null);U&&gn(ue,U),x&&(ue.g=x),ae&&Ai(ue,ae),I&&(ue.h=I),U=ue}return I=f.G,x=f.wa,I&&x&&gt(U,I,x),gt(U,"VER",f.ka),za(f,U),U}function Jd(f,x,I){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new xt(new fs({ab:I})):new xt(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zd(){}n=Zd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Oi(){}Oi.prototype.g=function(f,x){return new zn(f,x)};function zn(f,x){Fe.call(this),this.g=new ki(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!k(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Gs(this)}y(zn,Fe),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Vc(this.g)},zn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.v&&(I={},I.__data__=Nt(f),f=I);x.i.push(new Jt(x.Ya++,f)),x.I==3&&ps(x)},zn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,zn.Z.N.call(this)};function eh(f){wt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const I in x){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}y(eh,wt);function th(){Xt.call(this),this.status=1}y(th,Xt);function Gs(f){this.g=f}y(Gs,Zd),Gs.prototype.ra=function(){Xe(this.g,"a")},Gs.prototype.qa=function(f){Xe(this.g,new eh(f))},Gs.prototype.pa=function(f){Xe(this.g,new th)},Gs.prototype.oa=function(){Xe(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,oA=function(){return new Oi},aA=function(){return is()},iA=Ct,Qy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,Tf=Da,xc.COMPLETE="complete",sA=xc,vn.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,Du=vn,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,rA=xt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Rx="@firebase/firestore",Nx="4.9.2";let In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");let yc="12.3.0";const Ao=new O0("@firebase/firestore");function Fl(){return Ao.logLevel}function pe(n,...e){if(Ao.logLevel<=nt.DEBUG){const t=e.map(H0);Ao.debug(`Firestore (${yc}): ${n}`,...t)}}function Bn(n,...e){if(Ao.logLevel<=nt.ERROR){const t=e.map(H0);Ao.error(`Firestore (${yc}): ${n}`,...t)}}function So(n,...e){if(Ao.logLevel<=nt.WARN){const t=e.map(H0);Ao.warn(`Firestore (${yc}): ${n}`,...t)}}function H0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lA(n,r,t)}function lA(n,e,t){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bn(r),new Error(r)}function Ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||lA(e,i,r)}function Ue(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class cA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class c3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class u3{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Os,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Os)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new cA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class d3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new d3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);const r=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function m3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=m3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Xy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Ey(i)===Ey(o)?Le(i,o):Ey(i)?1:-1}return Le(n.length,e.length)}const g3=55296,p3=57343;function Ey(n){const e=n.charCodeAt(0);return e>=g3&&e<=p3}function tc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function uA(n){return n+"\0"}const kx="__name__";class Es{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Es.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const r=Es.isNumericId(e),i=Es.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Es.extractNumericId(e).compare(Es.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class ht extends Es{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Es{construct(e,t,r){return new jt(e,t,r)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kx}static keyField(){return new jt([kx])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ve(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new ve(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ve(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new ve(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ht.fromString(e))}static fromName(e){return new we(ht.fromString(e).popFirst(5))}static empty(){return new we(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ht(e.slice()))}}function dA(n,e,t){if(!t)throw new ve(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _3(n,e,t,r){if(e===!0&&r===!0)throw new ve(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dx(n){if(!we.isDocumentKey(n))throw new ve(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ox(n){if(we.isDocumentKey(n))throw new ve(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cm(n);throw new ve(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function v3(n,e){if(e<=0)throw new ve(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function an(n,e){const t={typeString:n};return e&&(t.value=e),t}function Sd(n,e){if(!hA(n))throw new ve(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ve(he.INVALID_ARGUMENT,t);return!0}const Mx=-62135596800,Px=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Px);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mx)throw new ve(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sd(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:an("string",_t._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new _t(0,0))}static max(){return new Ce(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ed=-1;class Wf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Wy(n){return n.fields.find((e=>e.kind===2))}function ao(n){return n.fields.filter((e=>e.kind!==2))}Wf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class td{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new td(0,mr.min())}}function b3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new mr(i,we.empty(),e)}function fA(n){return new mr(n.readTime,n.key,ed)}class mr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mr(Ce.min(),we.empty(),ed)}static max(){return new mr(Ce.max(),we.empty(),ed)}}function G0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}const mA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zo(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==mA)throw n;pe("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,r)=>{t(e)}))}static reject(e){return new re(((t,r)=>{r(e)}))}static waitFor(e){return new re(((t,r)=>{let i=0,o=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++o,c&&o===i&&t()}),(h=>r(h)))})),c=!0,o===i&&t()}))}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next((i=>i?re.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new re(((r,i)=>{const o=e.length,c=new Array(o);let d=0;for(let h=0;h<o;h++){const m=h;t(e[m]).next((p=>{c[m]=p,++d,d===o&&r(c)}),(p=>i(p)))}}))}static doWhile(e,t){return new re(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}const dr="SimpleDb";class km{static open(e,t,r,i){try{return new km(t,e.transaction(i,r))}catch(o){throw new Fu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Os,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Fu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=K0(r.target.error);this.S.reject(new Fu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(pe(dr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new x3(t)}}class ga{static delete(e){return pe(dr,"Removing database:",e),lo(a2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!g2())return!1;if(ga.F())return!0;const e=dn(),t=ga.M(e),r=0<t&&t<10,i=pA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ga.M(dn())===12.2&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(pe(dr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new ve(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ve(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Fu(e,c))},i.onupgradeneeded=o=>{pe(dr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next((()=>{pe(dr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=km.open(this.db,e,o?"readonly":"readwrite",r),h=i(d).next((m=>(d.C(),m))).catch((m=>(d.abort(m),re.reject(m)))).toPromise();return h.catch((()=>{})),await d.D,h}catch(d){const h=d,m=h.name!=="FirebaseError"&&c<3;if(pe(dr,"Transaction failed with error:",h.message,"Retrying:",m),this.close(),!m)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class w3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lo(this.U.delete())}}class Fu extends ve{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ia(n){return n.name==="IndexedDbTransactionError"}class x3{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(pe(dr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(pe(dr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return pe(dr,"ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next((t=>(t===void 0&&(t=null),pe(dr,"GET",this.store.name,e,t),t)))}delete(e){return pe(dr,"DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return pe(dr,"COUNT",this.store.name),lo(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new re(((c,d)=>{o.onerror=h=>{d(h.target.error)},o.onsuccess=h=>{c(h.target.result)}}))}{const o=this.cursor(r),c=[];return this.H(o,((d,h)=>{c.push(h)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new re(((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}}))}Z(e,t){pe(dr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((o,c,d)=>d.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new re(((r,i)=>{t.onerror=o=>{const c=K0(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}H(e,t){const r=[];return new re(((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const h=new w3(d),m=t(d.primaryKey,d.value,h);if(m instanceof re){const p=m.catch((y=>(h.done(),re.reject(y))));r.push(p)}h.isDone?i():h.G===null?d.continue():d.continue(h.G)}})).next((()=>re.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(n){return new re(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=K0(r.target.error);t(i)}}))}let Vx=!1;function K0(n){const e=ga.M(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vx||(Vx=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Bu="IndexBackfiller";class E3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){pe(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();pe(Bu,`Documents written: ${t}`)}catch(t){Ia(t)?pe(Bu,"Ignoring IndexedDB error during index backfill: ",t):await zo(t)}await this.re(6e4)}))}}class T3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,o=!0;return re.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return pe(Bu,`Processing collection: ${c}`),this.oe(e,c,i).next((d=>{i-=d,r.add(c)}));o=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(i,o))).next((d=>(pe(Bu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,o)=>{const c=fA(o);G0(c,r)>0&&(r=c)})),new mr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Or.ce=-1;const go=-1;function Dm(n){return n==null}function nd(n){return n===0&&1/n==-1/0}function A3(n){return typeof n=="number"&&Number.isInteger(n)&&!nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Jf="";function Ln(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jx(e)),e=S3(n.get(t),e);return jx(e)}function S3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case Jf:t+="";break;default:t+=o}}return t}function jx(n){return n+Jf+""}function Rs(n){const e=n.length;if(Ie(e>=2,64408,{path:n}),e===2)return Ie(n.charAt(0)===Jf&&n.charAt(1)==="",56145,{path:n}),ht.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(Jf,o);switch((c<0||c>t)&&Ee(50515,{path:n}),n.charAt(c+1)){case"":const d=n.substring(o,c);let h;i.length===0?h=d:(i+=d,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:Ee(61167,{path:n})}o=c+2}return new ht(r)}const oo="remoteDocuments",Id="owner",Ml="owner",rd="mutationQueues",I3="userId",Xr="mutations",Lx="batchId",fo="userMutationsIndex",Ux=["userId","batchId"];function Sf(n,e){return[n,Ln(e)]}function yA(n,e,t){return[n,Ln(e),t]}const R3={},nc="documentMutations",Zf="remoteDocumentsV14",N3=["prefixPath","collectionGroup","readTime","documentId"],If="documentKeyIndex",C3=["prefixPath","collectionGroup","documentId"],_A="collectionGroupIndex",k3=["collectionGroup","readTime","prefixPath","documentId"],sd="remoteDocumentGlobal",Jy="remoteDocumentGlobalKey",rc="targets",vA="queryTargetsIndex",D3=["canonicalId","targetId"],sc="targetDocuments",O3=["targetId","path"],Y0="documentTargetsIndex",M3=["path","targetId"],em="targetGlobalKey",po="targetGlobal",id="collectionParents",P3=["collectionId","parent"],ic="clientMetadata",V3="clientId",Om="bundles",j3="bundleId",Mm="namedQueries",L3="name",Q0="indexConfiguration",U3="indexId",Zy="collectionGroupIndex",z3="collectionGroup",qu="indexState",F3=["indexId","uid"],bA="sequenceNumberIndex",B3=["uid","sequenceNumber"],Hu="indexEntries",q3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wA="documentKeyIndex",H3=["indexId","uid","orderedDocumentKey"],Pm="documentOverlays",$3=["userId","collectionPath","documentId"],e0="collectionPathOverlayIndex",G3=["userId","collectionPath","largestBatchId"],xA="collectionGroupOverlayIndex",K3=["userId","collectionGroup","largestBatchId"],X0="globals",Y3="name",EA=[rd,Xr,nc,oo,rc,Id,po,sc,ic,sd,id,Om,Mm],Q3=[...EA,Pm],TA=[rd,Xr,nc,Zf,rc,Id,po,sc,ic,sd,id,Om,Mm,Pm],AA=TA,W0=[...AA,Q0,qu,Hu],X3=W0,SA=[...W0,X0],W3=SA;class t0 extends gA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(n,e){const t=Ue(n);return ga.O(t.le,e)}function zx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ra(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vt{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Rn.RED,this.left=i??Rn.EMPTY,this.right=o??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Rn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fx(this.data.getIterator())}getIteratorFrom(e){return new Fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class Fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class tr{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new tr([])}unionWith(e){let t=new bt(jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class RA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new RA("Invalid base64 string: "+o):o}})(e);return new on(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const J3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(n){if(Ie(!!n,39018),typeof n=="string"){let e=0;const t=J3.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vi(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}const NA="server_timestamp",CA="__type__",kA="__previous_value__",DA="__local_write_time__";function J0(n){return(n?.mapValue?.fields||{})[CA]?.stringValue===NA}function Vm(n){const e=n.mapValue.fields[kA];return J0(e)?Vm(e):e}function ad(n){const e=_i(n.mapValue.fields[DA].timestampValue);return new _t(e.seconds,e.nanos)}class Z3{constructor(e,t,r,i,o,c,d,h,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=p}}const tm="(default)";class Io{constructor(e,t){this.projectId=e,this.database=t||tm}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}const Z0="__type__",OA="__max__",da={mapValue:{fields:{__type__:{stringValue:OA}}}},e_="__vector__",ac="value",Rf={nullValue:"NULL_VALUE"};function ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?J0(n)?4:MA(n)?9007199254740991:jm(n)?10:11:Ee(28295,{value:n})}function Vs(n,e){if(n===e)return!0;const t=ba(n);if(t!==ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ad(n).isEqual(ad(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=_i(i.timestampValue),d=_i(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return vi(i.bytesValue).isEqual(vi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Pt(i.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Pt(i.integerValue)===Pt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=Pt(i.doubleValue),d=Pt(o.doubleValue);return c===d?nd(c)===nd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return tc(n.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return(function(i,o){const c=i.mapValue.fields||{},d=o.mapValue.fields||{};if(zx(c)!==zx(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Vs(c[h],d[h])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function od(n,e){return(n.values||[]).find((t=>Vs(t,e)))!==void 0}function wa(n,e){if(n===e)return 0;const t=ba(n),r=ba(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const d=Pt(o.integerValue||o.doubleValue),h=Pt(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return Bx(n.timestampValue,e.timestampValue);case 4:return Bx(ad(n),ad(e));case 5:return Xy(n.stringValue,e.stringValue);case 6:return(function(o,c){const d=vi(o),h=vi(c);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const d=o.split("/"),h=c.split("/");for(let m=0;m<d.length&&m<h.length;m++){const p=Le(d[m],h[m]);if(p!==0)return p}return Le(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const d=Le(Pt(o.latitude),Pt(c.latitude));return d!==0?d:Le(Pt(o.longitude),Pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qx(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const d=o.fields||{},h=c.fields||{},m=d[ac]?.arrayValue,p=h[ac]?.arrayValue,y=Le(m?.values?.length||0,p?.values?.length||0);return y!==0?y:qx(m,p)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===da.mapValue&&c===da.mapValue)return 0;if(o===da.mapValue)return 1;if(c===da.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),m=c.fields||{},p=Object.keys(m);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const v=Xy(h[y],p[y]);if(v!==0)return v;const w=wa(d[h[y]],m[p[y]]);if(w!==0)return w}return Le(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function Bx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=_i(n),r=_i(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function qx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=wa(t[i],r[i]);if(o)return o}return Le(t.length,r.length)}function oc(n){return n0(n)}function n0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=_i(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return vi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=n0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${n0(t.fields[c])}`;return i+"}"})(n.mapValue):Ee(61005,{value:n})}function Nf(n){switch(ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vm(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return vi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Nf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ra(r.fields,((o,c)=>{i+=o.length+Nf(c)})),i})(n.mapValue);default:throw Ee(13486,{value:n})}}function ld(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function r0(n){return!!n&&"integerValue"in n}function cd(n){return!!n&&"arrayValue"in n}function Hx(n){return!!n&&"nullValue"in n}function $x(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cf(n){return!!n&&"mapValue"in n}function jm(n){return(n?.mapValue?.fields||{})[Z0]?.stringValue===e_}function $u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ra(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=$u(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$u(n.arrayValue.values[t]);return e}return{...n}}function MA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OA}const PA={mapValue:{fields:{[Z0]:{stringValue:e_},[ac]:{arrayValue:{}}}}};function eM(n){return"nullValue"in n?Rf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ld(Io.empty(),we.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jm(n)?PA:{mapValue:{}}:Ee(35942,{value:n})}function tM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ld(Io.empty(),we.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?PA:"mapValue"in n?jm(n)?{mapValue:{}}:da:Ee(61959,{value:n})}function Gx(n,e){const t=wa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Kx(n,e){const t=wa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)}setAll(e){let t=jt.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=$u(c):i.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ra(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Pn($u(this.value))}}function VA(n){const e=[];return Ra(n.fields,((t,r)=>{const i=new jt([t]);if(Cf(r)){const o=VA(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)})),new tr(e)}class Ft{constructor(e,t,r,i,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Ft(e,0,Ce.min(),Ce.min(),Ce.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,i){return new Ft(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ce.min(),Ce.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ce.min(),Ce.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lc{constructor(e,t){this.position=e,this.inclusive=t}}function Yx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=we.comparator(we.fromName(c.referenceValue),t.key):r=wa(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vs(n.position[t],e.position[t]))return!1;return!0}class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function nM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jA{}class rt extends jA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new rM(e,t,r):t==="array-contains"?new aM(e,r):t==="in"?new qA(e,r):t==="not-in"?new oM(e,r):t==="array-contains-any"?new lM(e,r):new rt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sM(e,r):new iM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&ba(this.value)===ba(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends jA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return cc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cc(n){return n.op==="and"}function s0(n){return n.op==="or"}function t_(n){return LA(n)&&cc(n)}function LA(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function i0(n){if(n instanceof rt)return n.field.canonicalString()+n.op.toString()+oc(n.value);if(t_(n))return n.filters.map((e=>i0(e))).join(",");{const e=n.filters.map((t=>i0(t))).join(",");return`${n.op}(${e})`}}function UA(n,e){return n instanceof rt?(function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Vs(r.value,i.value)})(n,e):n instanceof vt?(function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,c,d)=>o&&UA(c,i.filters[d])),!0):!1})(n,e):void Ee(19439)}function zA(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function FA(n){return n instanceof rt?(function(t){return`${t.field.canonicalString()} ${t.op} ${oc(t.value)}`})(n):n instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(FA).join(" ,")+"}"})(n):"Filter"}class rM extends rt{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class sM extends rt{constructor(e,t){super(e,"in",t),this.keys=BA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iM extends rt{constructor(e,t){super(e,"not-in",t),this.keys=BA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BA(n,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class aM extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cd(t)&&od(t.arrayValue,this.value)}}class qA extends rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&od(this.value.arrayValue,t)}}class oM extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!od(this.value.arrayValue,t)}}class lM extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>od(this.value.arrayValue,r)))}}class cM{constructor(e,t=null,r=[],i=[],o=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.Te=null}}function a0(n,e=null,t=[],r=[],i=null,o=null,c=null){return new cM(n,e,t,r,i,o,c)}function Ro(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>i0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>oc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>oc(r))).join(",")),e.Te=t}return e.Te}function Rd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qx(n.startAt,e.startAt)&&Qx(n.endAt,e.endAt)}function nm(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rm(n,e){return n.filters.filter((t=>t instanceof rt&&t.field.isEqual(e)))}function Xx(n,e,t){let r=Rf,i=!0;for(const o of rm(n,e)){let c=Rf,d=!0;switch(o.op){case"<":case"<=":c=eM(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,d=!1;break;case"!=":case"not-in":c=Rf}Gx({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];Gx({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function Wx(n,e,t){let r=da,i=!0;for(const o of rm(n,e)){let c=da,d=!0;switch(o.op){case">=":case">":c=tM(o.value),d=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,d=!1;break;case"!=":case"not-in":c=da}Kx({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];Kx({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}class _c{constructor(e,t=null,r=[],i=[],o=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uM(n,e,t,r,i,o,c,d){return new _c(n,e,t,r,i,o,c,d)}function Nd(n){return new _c(n)}function Jx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HA(n){return n.collectionGroup!==null}function Gu(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new bt(jt.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ud(o,r))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new ud(jt.keyField(),r))}return e.Ie}function Mr(n){const e=Ue(n);return e.Ee||(e.Ee=dM(e,Gu(n))),e.Ee}function dM(n,e){if(n.limitType==="F")return a0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new ud(i.field,o)}));const t=n.endAt?new lc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lc(n.startAt.position,n.startAt.inclusive):null;return a0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function o0(n,e){const t=n.filters.concat([e]);return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sm(n,e,t){return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lm(n,e){return Rd(Mr(n),Mr(e))&&n.limitType===e.limitType}function $A(n){return`${Ro(Mr(n))}|lt:${n.limitType}`}function Bl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>FA(i))).join(", ")}]`),Dm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>oc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>oc(i))).join(",")),`Target(${r})`})(Mr(n))}; limitType=${n.limitType})`}function Cd(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):we.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Gu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,h){const m=Yx(c,d,h);return c.inclusive?m<=0:m<0})(r.startAt,Gu(r),i)||r.endAt&&!(function(c,d,h){const m=Yx(c,d,h);return c.inclusive?m>=0:m>0})(r.endAt,Gu(r),i))})(n,e)}function hM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GA(n){return(e,t)=>{let r=!1;for(const i of Gu(n)){const o=fM(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function fM(n,e,t){const r=n.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,d){const h=c.data.field(o),m=d.data.field(o);return h!==null&&m!==null?wa(h,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}class xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return IA(this.inner)}size(){return this.innerSize}}const mM=new Vt(we.comparator);function fr(){return mM}const KA=new Vt(we.comparator);function Ou(...n){let e=KA;for(const t of n)e=e.insert(t.key,t);return e}function YA(n){let e=KA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ns(){return Ku()}function QA(){return Ku()}function Ku(){return new xi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const gM=new Vt(we.comparator),pM=new bt(we.comparator);function Ye(...n){let e=pM;for(const t of n)e=e.add(t);return e}const yM=new bt(Le);function _M(){return yM}function n_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function XA(n){return{integerValue:""+n}}function vM(n,e){return A3(e)?XA(e):n_(n,e)}class Um{constructor(){this._=void 0}}function bM(n,e,t){return n instanceof uc?(function(i,o){const c={fields:{[CA]:{stringValue:NA},[DA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&J0(o)&&(o=Vm(o)),o&&(c.fields[kA]=o),{mapValue:c}})(t,e):n instanceof No?JA(n,e):n instanceof Co?ZA(n,e):(function(i,o){const c=WA(i,o),d=Zx(c)+Zx(i.Ae);return r0(c)&&r0(i.Ae)?XA(d):n_(i.serializer,d)})(n,e)}function wM(n,e,t){return n instanceof No?JA(n,e):n instanceof Co?ZA(n,e):t}function WA(n,e){return n instanceof dd?(function(r){return r0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class uc extends Um{}class No extends Um{constructor(e){super(),this.elements=e}}function JA(n,e){const t=eS(e);for(const r of n.elements)t.some((i=>Vs(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Co extends Um{constructor(e){super(),this.elements=e}}function ZA(n,e){let t=eS(e);for(const r of n.elements)t=t.filter((i=>!Vs(i,r)));return{arrayValue:{values:t}}}class dd extends Um{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zx(n){return Pt(n.integerValue||n.doubleValue)}function eS(n){return cd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zm{constructor(e,t){this.field=e,this.transform=t}}function xM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof No&&i instanceof No||r instanceof Co&&i instanceof Co?tc(r.elements,i.elements,Vs):r instanceof dd&&i instanceof dd?Vs(r.Ae,i.Ae):r instanceof uc&&i instanceof uc})(n.transform,e.transform)}class EM{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fm{}function tS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bm(n.key,jn.none()):new vc(n.key,n.data,jn.none());{const t=n.data,r=Pn.empty();let i=new bt(jt.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Ei(n.key,r,new tr(i.toArray()),jn.none())}}function TM(n,e,t){n instanceof vc?(function(i,o,c){const d=i.value.clone(),h=tE(i.fieldTransforms,o,c.transformResults);d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ei?(function(i,o,c){if(!kf(i.precondition,o))return void o.convertToUnknownDocument(c.version);const d=tE(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(nS(i)),h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Yu(n,e,t,r){return n instanceof vc?(function(o,c,d,h){if(!kf(o.precondition,c))return d;const m=o.value.clone(),p=nE(o.fieldTransforms,h,c);return m.setAll(p),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ei?(function(o,c,d,h){if(!kf(o.precondition,c))return d;const m=nE(o.fieldTransforms,h,c),p=c.data;return p.setAll(nS(o)),p.setAll(m),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,c,d){return kf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function AM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=WA(r.transform,i||null);o!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,o))}return t||null}function eE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tc(r,i,((o,c)=>xM(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends Fm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ei extends Fm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function tE(n,e,t){const r=new Map;Ie(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,d=e.data.field(o.field);r.set(o.field,wM(c,d,t[i]))}return r}function nE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,bM(o,c,e))}return r}class Bm extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rS extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class r_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&TM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QA();return this.mutations.forEach((i=>{const o=e.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=t.has(i.key)?null:d;const h=tS(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,((t,r)=>eE(t,r)))&&tc(this.baseMutations,e.baseMutations,((t,r)=>eE(t,r)))}}class s_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gM})();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new s_(e,t,r,i)}}class i_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SM{constructor(e,t){this.count=e,this.unchangedNames=t}}var sn,ot;function IM(n){switch(n){case he.OK:return Ee(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function sS(n){if(n===void 0)return Bn("GRPC error has no .code"),he.UNKNOWN;switch(n){case sn.OK:return he.OK;case sn.CANCELLED:return he.CANCELLED;case sn.UNKNOWN:return he.UNKNOWN;case sn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case sn.INTERNAL:return he.INTERNAL;case sn.UNAVAILABLE:return he.UNAVAILABLE;case sn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case sn.NOT_FOUND:return he.NOT_FOUND;case sn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case sn.ABORTED:return he.ABORTED;case sn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case sn.DATA_LOSS:return he.DATA_LOSS;default:return Ee(39323,{code:n})}}(ot=sn||(sn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";function RM(){return new TextEncoder}const NM=new ma([4294967295,4294967295],0);function rE(n){const e=RM().encode(n),t=new nA;return t.update(e),new Uint8Array(t.digest())}function sE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ma([t,r],0),new ma([i,o],0)]}class a_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ma.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ma.fromNumber(r)));return i.compare(NM)===1&&(i=new ma([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=rE(e),[r,i]=sE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new a_(o,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=rE(e),[r,i]=sE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qm{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qm(Ce.min(),i,new Vt(Le),fr(),Ye())}}class kd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kd(r,t,Ye(),Ye(),Ye())}}class Df{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class iS{constructor(e,t){this.targetId=e,this.Ce=t}}class aS{constructor(e,t,r=on.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iE{constructor(){this.ve=0,this.Fe=aE(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee(38017,{changeType:o})}})),new kd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=aE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CM{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=df(),this.He=df(),this.Ye=new Vt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(nm(o))if(r===0){const c=new we(o.path);this.et(t,c,Ft.newNoDocument(c,Ce.min()))}else Ie(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,d;try{c=vi(r).toUint8Array()}catch(h){if(h instanceof RA)return So("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new a_(c,i,o)}catch(h){return So(h instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const d=this.ot(c);if(d){if(o.current&&nm(d.target)){const h=new we(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Ft.newNoDocument(h,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,c)=>{let d=!0;c.forEachWhile((h=>{const m=this.ot(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const i=new qm(e,t,this.Ye,this.je,r);return this.je=fr(),this.Je=df(),this.He=df(),this.Ye=new Vt(Le),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new iE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function df(){return new Vt(we.comparator)}function aE(){return new Vt(we.comparator)}const kM={asc:"ASCENDING",desc:"DESCENDING"},DM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OM={and:"AND",or:"OR"};class MM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function l0(n,e){return n.useProto3Json||Dm(e)?e:{value:e}}function dc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function PM(n,e){return dc(n,e.toTimestamp())}function Hn(n){return Ie(!!n,49232),Ce.fromTimestamp((function(t){const r=_i(t);return new _t(r.seconds,r.nanos)})(n))}function o_(n,e){return c0(n,e).canonicalString()}function c0(n,e){const t=(function(i){return new ht(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lS(n){const e=ht.fromString(n);return Ie(yS(e),10190,{key:e.toString()}),e}function im(n,e){return o_(n.databaseId,e.path)}function yo(n,e){const t=lS(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(dS(t))}function cS(n,e){return o_(n.databaseId,e)}function uS(n){const e=lS(n);return e.length===4?ht.emptyPath():dS(e)}function u0(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oE(n,e,t){return{name:im(n,e),fields:t.value.mapValue.fields}}function VM(n,e,t){const r=yo(n,e.name),i=Hn(e.updateTime),o=e.createTime?Hn(e.createTime):Ce.min(),c=new Pn({mapValue:{fields:e.fields}}),d=Ft.newFoundDocument(r,i,o,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function jM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(m,p){return m.useProto3Json?(Ie(p===void 0||typeof p=="string",58123),on.fromBase64String(p||"")):(Ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),on.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const p=m.code===void 0?he.UNKNOWN:sS(m.code);return new ve(p,m.message||"")})(c);t=new aS(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yo(n,r.document.name),o=Hn(r.document.updateTime),c=r.document.createTime?Hn(r.document.createTime):Ce.min(),d=new Pn({mapValue:{fields:r.document.fields}}),h=Ft.newFoundDocument(i,o,c,d),m=r.targetIds||[],p=r.removedTargetIds||[];t=new Df(m,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yo(n,r.document),o=r.readTime?Hn(r.readTime):Ce.min(),c=Ft.newNoDocument(i,o),d=r.removedTargetIds||[];t=new Df([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yo(n,r.document),o=r.removedTargetIds||[];t=new Df([],o,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new SM(i,o),d=r.targetId;t=new iS(d,c)}}return t}function am(n,e){let t;if(e instanceof vc)t={update:oE(n,e.key,e.value)};else if(e instanceof Bm)t={delete:im(n,e.key)};else if(e instanceof Ei)t={update:oE(n,e.key,e.data),updateMask:qM(e.fieldMask)};else{if(!(e instanceof rS))return Ee(16599,{Vt:e.type});t={verify:im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const d=c.transform;if(d instanceof uc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof No)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Co)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof dd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ee(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:PM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)})(n,e.precondition)),t}function d0(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?jn.updateTime(Hn(o.updateTime)):o.exists!==void 0?jn.exists(o.exists):jn.none()})(e.currentDocument):jn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(c,d){let h=null;if("setToServerValue"in d)Ie(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),h=new uc;else if("appendMissingElements"in d){const p=d.appendMissingElements.values||[];h=new No(p)}else if("removeAllFromArray"in d){const p=d.removeAllFromArray.values||[];h=new Co(p)}else"increment"in d?h=new dd(c,d.increment):Ee(16584,{proto:d});const m=jt.fromServerFormat(d.fieldPath);return new zm(m,h)})(n,i))):[];if(e.update){e.update.name;const i=yo(n,e.update.name),o=new Pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(h){const m=h.fieldPaths||[];return new tr(m.map((p=>jt.fromServerFormat(p))))})(e.updateMask);return new Ei(i,o,c,t,r)}return new vc(i,o,t,r)}if(e.delete){const i=yo(n,e.delete);return new Bm(i,t)}if(e.verify){const i=yo(n,e.verify);return new rS(i,t)}return Ee(1463,{proto:e})}function LM(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map((t=>(function(i,o){let c=i.updateTime?Hn(i.updateTime):Hn(o);return c.isEqual(Ce.min())&&(c=Hn(o)),new EM(c,i.transformResults||[])})(t,e)))):[]}function hS(n,e){return{documents:[cS(n,e.path)]}}function fS(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cS(n,i);const o=(function(m){if(m.length!==0)return pS(vt.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((p=>(function(v){return{field:ql(v.field),direction:zM(v.dir)}})(p)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=l0(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function mS(n){let e=uS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ie(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(y){const v=gS(y);return v instanceof vt&&t_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(A){return new ud(Hl(A.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let v;return v=typeof y=="object"?y.value:y,Dm(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(y){const v=!!y.before,w=y.values||[];return new lc(w,v)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const v=!y.before,w=y.values||[];return new lc(w,v)})(t.endAt)),uM(e,i,c,o,d,"F",h,m)}function UM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hl(t.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hl(t.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hl(t.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hl(t.unaryFilter.field);return rt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return rt.create(Hl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((r=>gS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function zM(n){return kM[n]}function FM(n){return DM[n]}function BM(n){return OM[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Hl(n){return jt.fromServerFormat(n.fieldPath)}function pS(n){return n instanceof rt?(function(t){if(t.op==="=="){if($x(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(Hx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($x(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(Hx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:FM(t.op),value:t.value}}})(n):n instanceof vt?(function(t){const r=t.getFilters().map((i=>pS(i)));return r.length===1?r[0]:{compositeFilter:{op:BM(t.op),filters:r}}})(n):Ee(54877,{filter:n})}function qM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class di{constructor(e,t,r,i,o=Ce.min(),c=Ce.min(),d=on.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _S{constructor(e){this.yt=e}}function HM(n,e){let t;if(e.document)t=VM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=we.fromSegments(e.noDocument.path),i=Do(e.noDocument.readTime);t=Ft.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee(56709);{const r=we.fromSegments(e.unknownDocument.path),i=Do(e.unknownDocument.version);t=Ft.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const o=new _t(i[0],i[1]);return Ce.fromTimestamp(o)})(e.readTime)),t}function lE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,c){return{name:im(o,c.key),fields:c.data.value.mapValue.fields,updateTime:dc(o,c.version.toTimestamp()),createTime:dc(o,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return Ee(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return r}function om(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Do(n){const e=new _t(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function co(n,e){const t=(e.baseMutations||[]).map((o=>d0(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const d=e.mutations[o+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>d0(n.yt,o))),i=_t.fromMillis(e.localWriteTimeMs);return new r_(e.batchId,i,t,r)}function Pu(n){const e=Do(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Do(n.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Ie(c===1,1966,{count:c}),Mr(Nd(uS(o.documents[0])))})(n.query):(function(o){return Mr(mS(o))})(n.query),new di(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,on.fromBase64String(n.resumeToken))}function vS(n,e){const t=ko(e.snapshotVersion),r=ko(e.lastLimboFreeSnapshotVersion);let i;i=nm(e.target)?hS(n.yt,e.target):fS(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ro(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bS(n){const e=mS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sm(e,e.limit,"L"):e}function Ty(n,e){return new i_(e.largestBatchId,d0(n.yt,e.overlayMutation))}function cE(n,e){const t=e.path.lastSegment();return[n,Ln(e.path.popLast()),t]}function uE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ko(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}class $M{getBundleMetadata(e,t){return dE(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Do(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return dE(e).put((function(i){return{bundleId:i.id,createTime:ko(Hn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return hE(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:bS(o.bundledQuery),readTime:Do(o.readTime)}})(r)}))}saveNamedQuery(e,t){return hE(e).put((function(i){return{name:i.name,readTime:ko(Hn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function dE(n){return hn(n,Om)}function hE(n){return hn(n,Mm)}class Hm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Hm(e,r)}getOverlay(e,t){return Au(e).get(cE(this.userId,t)).next((r=>r?Ty(this.serializer,r):null))}getOverlays(e,t){const r=Ns();return re.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((o,c)=>{const d=new i_(t,c);i.push(this.St(e,d))})),re.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((c=>i.add(Ln(c.getCollectionPath()))));const o=[];return i.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Au(e).Z(e0,d))})),re.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ns(),o=Ln(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Au(e).J(e0,c).next((d=>{for(const h of d){const m=Ty(this.serializer,h);i.set(m.getKey(),m)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const o=Ns();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:xA,range:d},((h,m,p)=>{const y=Ty(this.serializer,m);o.size()<i||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):p.done()})).next((()=>o))}St(e,t){return Au(e).put((function(i,o,c){const[d,h,m]=cE(o,c.mutation.key);return{userId:o,collectionPath:h,documentId:m,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:am(i.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(n){return hn(n,Pm)}class GM{bt(e){return hn(e,X0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?on.fromUint8Array(r):on.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),nd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=_i(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(vi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?MA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):jm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=ac,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Pt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uo.Kt=new uo;const Vl=255;function KM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function fE(n){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const c=KM(255&r[o]);if(i+=c,c!==8)break}return i})(n);return Math.ceil(e/8)}class YM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=fE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=fE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Vl),this.sn(255)}_n(){this.an(Vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vl?(this.sn(Vl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vl?(this.an(Vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QM{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class XM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Su{constructor(){this.cn=new YM,this.ln=new QM(this.cn),this.hn=new XM(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ho{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ho(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Of(this.En),directionalValue:Of(this.dn),orderedDocumentKey:Of(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ra(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=mE(n.En,e.En),t!==0?t:(t=mE(n.dn,e.dn),t!==0?t:we.comparator(n.In,e.In)))}function mE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Of(n){return m2()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function gE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class pE{constructor(e){this.mn=new bt(((t,r)=>jt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ie(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Wy(e);if(t!==void 0&&!this.wn(t))return!1;const r=ao(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!i.has(d.field.canonicalString())){const h=r[o];if(!this.Sn(d,h)||!this.bn(this.fn[c++],h))return!1}++o}for(;o<r.length;++o){const d=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new bt(jt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Af(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Af(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Af(r.field,r.dir==="asc"?0:1)));return new Wf(Wf.UNKNOWN_ID,this.collectionId,t,td.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function wS(n){if(Ie(n instanceof rt||n instanceof vt,20012),n instanceof rt){if(n instanceof qA){const t=n.value.arrayValue?.values?.map((r=>rt.create(n.field,"==",r)))||[];return vt.create(t,"or")}return n}const e=n.filters.map((t=>wS(t)));return vt.create(e,n.op)}function WM(n){if(n.getFilters().length===0)return[];const e=m0(wS(n));return Ie(xS(e),7391),h0(e)||f0(e)?[e]:e.getFilters()}function h0(n){return n instanceof rt}function f0(n){return n instanceof vt&&t_(n)}function xS(n){return h0(n)||f0(n)||(function(t){if(t instanceof vt&&s0(t)){for(const r of t.getFilters())if(!h0(r)&&!f0(r))return!1;return!0}return!1})(n)}function m0(n){if(Ie(n instanceof rt||n instanceof vt,34018),n instanceof rt)return n;if(n.filters.length===1)return m0(n.filters[0]);const e=n.filters.map((r=>m0(r)));let t=vt.create(e,n.op);return t=lm(t),xS(t)?t:(Ie(t instanceof vt,64498),Ie(cc(t),40251),Ie(t.filters.length>1,57927),t.filters.reduce(((r,i)=>l_(r,i))))}function l_(n,e){let t;return Ie(n instanceof rt||n instanceof vt,38388),Ie(e instanceof rt||e instanceof vt,25473),t=n instanceof rt?e instanceof rt?(function(i,o){return vt.create([i,o],"and")})(n,e):yE(n,e):e instanceof rt?yE(e,n):(function(i,o){if(Ie(i.filters.length>0&&o.filters.length>0,48005),cc(i)&&cc(o))return zA(i,o.getFilters());const c=s0(i)?i:o,d=s0(i)?o:i,h=c.filters.map((m=>l_(m,d)));return vt.create(h,"or")})(n,e),lm(t)}function yE(n,e){if(cc(e))return zA(e,n.getFilters());{const t=e.filters.map((r=>l_(n,r)));return vt.create(t,"or")}}function lm(n){if(Ie(n instanceof rt||n instanceof vt,11850),n instanceof rt)return n;const e=n.getFilters();if(e.length===1)return lm(e[0]);if(LA(n))return n;const t=e.map((i=>lm(i))),r=[];return t.forEach((i=>{i instanceof rt?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:vt.create(r,n.op)}class JM{constructor(){this.Cn=new c_}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(mr.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class c_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bt(ht.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(ht.comparator)).toArray()}}const _E="IndexedDbIndexManager",hf=new Uint8Array(0);class ZM{constructor(e,t){this.databaseId=t,this.vn=new c_,this.Fn=new xi((r=>Ro(r)),((r,i)=>Rd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:Ln(i)};return vE(e).put(o)}return re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uA(t),""],!1,!0);return vE(e).J(i).next((o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Rs(c.parent))}return r}))}addFieldIndex(e,t){const r=Iu(e),i=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=Ll(e);return o.next((d=>{c.put(uE(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Iu(e),i=Ll(e),o=jl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),r=jl(e),i=Ll(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return re.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new pE(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=jl(e);let i=!0;const o=new Map;return re.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{i&&(i=!!d),o.set(c,d)})))).next((()=>{if(i){let c=Ye();const d=[];return re.forEach(o,((h,m)=>{pe(_E,`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(h)} to execute ${Ro(t)}`);const p=(function(z,H){const X=Wy(H);if(X===void 0)return null;for(const F of rm(z,X.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null})(m,h),y=(function(z,H){const X=new Map;for(const F of ao(H))for(const R of rm(z,F.fieldPath))switch(R.op){case"==":case"in":X.set(F.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return X.set(F.fieldPath.canonicalString(),R.value),Array.from(X.values())}return null})(m,h),v=(function(z,H){const X=[];let F=!0;for(const R of ao(H)){const T=R.kind===0?Xx(z,R.fieldPath,z.startAt):Wx(z,R.fieldPath,z.startAt);X.push(T.value),F&&(F=T.inclusive)}return new lc(X,F)})(m,h),w=(function(z,H){const X=[];let F=!0;for(const R of ao(H)){const T=R.kind===0?Wx(z,R.fieldPath,z.endAt):Xx(z,R.fieldPath,z.endAt);X.push(T.value),F&&(F=T.inclusive)}return new lc(X,F)})(m,h),A=this.On(h,m,v),P=this.On(h,m,w),V=this.Nn(h,m,y),L=this.Bn(h.indexId,p,A,v.inclusive,P,w.inclusive,V);return re.forEach(L,($=>r.Y($,t.limit).next((z=>{z.forEach((H=>{const X=we.fromSegments(H.documentKey);c.has(X)||(c=c.add(X),d.push(X))}))}))))})).next((()=>d))}return re.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=WM(vt.create(e.filters,"and")).map((r=>a0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,d){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),m=h/(t!=null?t.length:1),p=[];for(let y=0;y<h;++y){const v=t?this.Ln(t[y/m]):hf,w=this.kn(e,v,r[y%m],i),A=this.qn(e,v,o[y%m],c),P=d.map((V=>this.kn(e,v,V,!0)));p.push(...this.createRange(w,A,P))}return p}kn(e,t,r,i){const o=new ho(e,we.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new ho(e,we.empty(),t,r);return i?o.An():o}xn(e,t){const r=new pE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let c=null;for(const d of o)r.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return re.forEach(i,(o=>this.xn(e,o).next((c=>{c?r!==0&&c.fields.length<(function(h){let m=new bt(jt.comparator),p=!1;for(const y of h.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:m=m.add(v.field));for(const y of h.orderBy)y.field.isKeyField()||(m=m.add(y.field));return m.size+(p?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Su;for(const i of ao(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);uo.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Su;return uo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Su;return uo.Kt.Dt(ld(this.databaseId,t),r.Pn((function(o){const c=ao(o);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Su);let o=0;for(const c of ao(e)){const d=r[o++];for(const h of i)if(this.Un(t,c.fieldPath)&&cd(d))i=this.Kn(i,c,d);else{const m=h.Pn(c.kind);uo.Kt.Dt(d,m)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const d of i){const h=new Su;h.seed(d.un()),uo.Kt.Dt(c,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof rt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Iu(e),i=Ll(e);return(t?r.J(Zy,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const c=[];return re.forEach(o,(d=>i.get([d.indexId,this.uid]).next((h=>{c.push((function(p,y){const v=y?new td(y.sequenceNumber,new mr(Do(y.readTime),new we(Rs(y.documentKey)),y.largestBatchId)):td.empty(),w=p.fields.map((([A,P])=>new Af(jt.fromServerFormat(A),P)));return new Wf(p.indexId,p.collectionGroup,w,v)})(d,h))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Le(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Iu(e),o=Ll(e);return this.Gn(e).next((c=>i.J(Zy,IDBKeyRange.bound(t,t)).next((d=>re.forEach(d,(h=>o.put(uE(h.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,((i,o)=>{const c=r.get(i.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next((d=>(r.set(i.collectionGroup,d),re.forEach(d,(h=>this.zn(e,i,h).next((m=>{const p=this.jn(o,h);return m.isEqual(p)?re.resolve():this.Jn(e,o,h,m,p)})))))))}))}Hn(e,t,r,i){return jl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return jl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=jl(e);let o=new bt(ra);return i.ee({index:wA,range:IDBKeyRange.only([r.indexId,this.uid,Of(this.$n(r,t))])},((c,d)=>{o=o.add(new ho(r.indexId,t,gE(d.arrayValue),gE(d.directionalValue)))})).next((()=>o))}jn(e,t){let r=new bt(ra);const i=this.Qn(t,e);if(i==null)return r;const o=Wy(t);if(o!=null){const c=e.data.field(o.fieldPath);if(cd(c))for(const d of c.arrayValue.values||[])r=r.add(new ho(t.indexId,e.key,this.Ln(d),i))}else r=r.add(new ho(t.indexId,e.key,hf,i));return r}Jn(e,t,r,i,o){pe(_E,"Updating index entries for document '%s'",t.key);const c=[];return(function(h,m,p,y,v){const w=h.getIterator(),A=m.getIterator();let P=Pl(w),V=Pl(A);for(;P||V;){let L=!1,$=!1;if(P&&V){const z=p(P,V);z<0?$=!0:z>0&&(L=!0)}else P!=null?$=!0:L=!0;L?(y(V),V=Pl(A)):$?(v(P),P=Pl(w)):(P=Pl(w),V=Pl(A))}})(i,o,ra,(d=>{c.push(this.Hn(e,t,r,d))}),(d=>{c.push(this.Yn(e,t,r,d))})),re.waitFor(c)}Gn(e){let t=1;return Ll(e).ee({index:bA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>ra(c,d))).filter(((c,d,h)=>!d||ra(c,h[d-1])!==0));const i=[];i.push(e);for(const c of r){const d=ra(c,e),h=ra(c,t);if(d===0)i[0]=e.An();else if(d>0&&h<0)i.push(c),i.push(c.An());else if(h>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const d=i[c].Vn(this.uid,hf,we.empty()),h=i[c+1].Vn(this.uid,hf,we.empty());o.push(IDBKeyRange.bound(d,h))}return o}Zn(e,t){return ra(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(bE)}getMinOffset(e,t){return re.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ee(44426))))).next(bE)}}function vE(n){return hn(n,id)}function jl(n){return hn(n,Hu)}function Iu(n){return hn(n,Q0)}function Ll(n){return hn(n,qu)}function bE(n){Ie(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;G0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new mr(e.readTime,e.documentKey,t)}const wE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ES=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function TS(n,e,t){const r=n.store(Xr),i=n.store(nc),o=[],c=IDBKeyRange.only(t.batchId);let d=0;const h=r.ee({range:c},((p,y,v)=>(d++,v.delete())));o.push(h.next((()=>{Ie(d===1,47070,{batchId:t.batchId})})));const m=[];for(const p of t.mutations){const y=yA(e,p.key.path,t.batchId);o.push(i.delete(y)),m.push(p.key)}return re.waitFor(o).next((()=>m))}function cm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee(14731);e=n.noDocument}return JSON.stringify(e).length}Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(ES,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);class $m{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ie(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new $m(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).ee({index:fo,range:r},((i,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const o=$l(e),c=sa(e);return c.add({}).next((d=>{Ie(typeof d=="number",49019);const h=new r_(d,t,r,i),m=(function(w,A,P){const V=P.baseMutations.map(($=>am(w.yt,$))),L=P.mutations.map(($=>am(w.yt,$)));return{userId:A,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:V,mutations:L}})(this.serializer,this.userId,h),p=[];let y=new bt(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of i){const w=yA(this.userId,v.key.path,d);y=y.add(v.key.path.popLast()),p.push(c.put(m)),p.push(o.put(w,R3))}return y.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[d]=h.keys()})),re.waitFor(p).next((()=>h))}))}lookupMutationBatch(e,t){return sa(e).get(t).next((r=>r?(Ie(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),co(this.serializer,r)):null))}er(e,t){return this.Xn[t]?re.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return sa(e).ee({index:fo,range:i},((c,d,h)=>{d.userId===this.userId&&(Ie(d.batchId>=r,47524,{tr:r}),o=co(this.serializer,d)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=go;return sa(e).ee({index:fo,range:t,reverse:!0},((i,o,c)=>{r=o.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,go],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).J(fo,t).next((r=>r.map((i=>co(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return $l(e).ee({range:i},((c,d,h)=>{const[m,p,y]=c,v=Rs(p);if(m===this.userId&&t.path.isEqual(v))return sa(e).get(y).next((w=>{if(!w)throw Ee(61480,{nr:c,batchId:y});Ie(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(co(this.serializer,w))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Le);const i=[];return t.forEach((o=>{const c=Sf(this.userId,o.path),d=IDBKeyRange.lowerBound(c),h=$l(e).ee({range:d},((m,p,y)=>{const[v,w,A]=m,P=Rs(w);v===this.userId&&o.path.isEqual(P)?r=r.add(A):y.done()}));i.push(h)})),re.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Sf(this.userId,r),c=IDBKeyRange.lowerBound(o);let d=new bt(Le);return $l(e).ee({range:c},((h,m,p)=>{const[y,v,w]=h,A=Rs(v);y===this.userId&&r.isPrefixOf(A)?A.length===i&&(d=d.add(w)):p.done()})).next((()=>this.rr(e,d)))}rr(e,t){const r=[],i=[];return t.forEach((o=>{i.push(sa(e).get(o).next((c=>{if(c===null)throw Ee(35274,{batchId:o});Ie(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(co(this.serializer,c))})))})),re.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return TS(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),re.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),i=[];return $l(e).ee({range:r},((o,c,d)=>{if(o[0]===this.userId){const h=Rs(o[1]);i.push(h)}else d.done()})).next((()=>{Ie(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return AS(e,this.userId,t)}_r(e){return SS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:go,lastStreamToken:""}))}}function AS(n,e,t){const r=Sf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return $l(n).ee({range:o,X:!0},((d,h,m)=>{const[p,y,v]=d;p===e&&y===i&&(c=!0),m.done()})).next((()=>c))}function sa(n){return hn(n,Xr)}function $l(n){return hn(n,nc)}function SS(n){return hn(n,rd)}class Oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oo(0)}static cr(){return new Oo(-1)}}class eP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Oo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ce.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ul(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ie(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const o=[];return Ul(e).ee(((c,d)=>{const h=Pu(d);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>re.waitFor(o))).next((()=>i))}forEachTarget(e,t){return Ul(e).ee(((r,i)=>{const o=Pu(i);t(o)}))}lr(e){return xE(e).get(em).next((t=>(Ie(t!==null,2888),t)))}hr(e,t){return xE(e).put(em,t)}Pr(e,t){return Ul(e).put(vS(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ro(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ul(e).ee({range:i,index:vA},((c,d,h)=>{const m=Pu(d);Rd(t,m.target)&&(o=m,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const i=[],o=ua(e);return t.forEach((c=>{const d=Ln(c.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,c))})),re.waitFor(i)}removeMatchingKeys(e,t,r){const i=ua(e);return re.forEach(t,(o=>{const c=Ln(o.path);return re.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=ua(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ua(e);let o=Ye();return i.ee({range:r,X:!0},((c,d,h)=>{const m=Rs(c[1]),p=new we(m);o=o.add(p)})).next((()=>o))}containsKey(e,t){const r=Ln(t.path),i=IDBKeyRange.bound([r],[uA(r)],!1,!0);let o=0;return ua(e).ee({index:Y0,X:!0,range:i},(([c,d],h,m)=>{c!==0&&(o++,m.done())})).next((()=>o>0))}At(e,t){return Ul(e).get(t).next((r=>r?Pu(r):null))}}function Ul(n){return hn(n,rc)}function xE(n){return hn(n,po)}function ua(n){return hn(n,sc)}const EE="LruGarbageCollector",tP=1048576;function TE([n,e],[t,r]){const i=Le(n,t);return i===0?Le(e,r):i}class nP{constructor(e){this.Ir=e,this.buffer=new bt(TE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(EE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?pe(EE,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class rP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Or.ce);const r=new nP(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(wE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,d,h,m;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,d=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Fl()<=nt.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${y} documents in `+(m-h)+`ms
Total Duration: ${m-p}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y}))))}}function RS(n,e){return new rP(n,e)}class sP{constructor(e,t){this.db=e,this.garbageCollector=RS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return ff(e,r)}removeReference(e,t,r){return ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ff(e,t)}br(e,t){return(function(i,o){let c=!1;return SS(i).te((d=>AS(i,d,o).next((h=>(h&&(c=!0),re.resolve(!h)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((c,d)=>{if(d<=t){const h=this.br(e,c).next((m=>{if(!m)return o++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ce.min()),ua(e).delete((function(y){return[0,Ln(y.path)]})(c)))))}));i.push(h)}})).next((()=>re.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ff(e,t)}Sr(e,t){const r=ua(e);let i,o=Or.ce;return r.ee({index:Y0},(([c,d],{path:h,sequenceNumber:m})=>{c===0?(o!==Or.ce&&t(new we(Rs(i)),o),o=m,i=h):o=Or.ce})).next((()=>{o!==Or.ce&&t(new we(Rs(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(n,e){return ua(n).put((function(r,i){return{targetId:0,path:Ln(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class NS{constructor(){this.changes=new xi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete((function(o,c){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],om(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ft.newInvalidDocument(t);return so(e).ee({index:If,range:IDBKeyRange.only(Ru(t))},((i,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:Ft.newInvalidDocument(t)};return so(e).ee({index:If,range:IDBKeyRange.only(Ru(t))},((i,o)=>{r={document:this.Cr(t,o),size:cm(o)}})).next((()=>r))}getEntries(e,t){let r=fr();return this.Fr(e,t,((i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)})).next((()=>r))}Mr(e,t){let r=fr(),i=new Vt(we.comparator);return this.Fr(e,t,((o,c)=>{const d=this.Cr(o,c);r=r.insert(o,d),i=i.insert(o,cm(c))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return re.resolve();let i=new bt(IE);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(Ru(i.first()),Ru(i.last())),c=i.getIterator();let d=c.getNext();return so(e).ee({index:If,range:o},((h,m,p)=>{const y=we.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&IE(d,y)<0;)r(d,null),d=c.getNext();d&&d.isEqual(y)&&(r(d,m),d=c.hasNext()?c.getNext():null),d?p.j(Ru(d)):p.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),om(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).J(IDBKeyRange.bound(d,h,!0)).next((m=>{o?.incrementDocumentReadCount(m.length);let p=fr();for(const y of m){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Cd(t,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(e,t,r,i){let o=fr();const c=SE(t,r),d=SE(t,mr.max());return so(e).ee({index:_A,range:IDBKeyRange.bound(c,d,!0)},((h,m,p)=>{const y=this.Cr(we.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(y.key,y),o.size===i&&p.done()})).next((()=>o))}newChangeBuffer(e){return new aP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return AE(e).get(Jy).next((t=>(Ie(!!t,20021),t)))}Dr(e,t){return AE(e).put(Jy,t)}Cr(e,t){if(t){const r=HM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Ft.newInvalidDocument(e)}}function CS(n){return new iP(n)}class aP extends NS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new xi((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new bt(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const d=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,d.readTime)),c.isValidDocument()){const h=lE(this.Nr.serializer,c);i=i.add(o.path.popLast());const m=cm(h);r+=m-d.size,t.push(this.Nr.addEntry(e,o,h))}else if(r-=d.size,this.trackRemovals){const h=lE(this.Nr.serializer,c.convertToNoDocument(Ce.min()));t.push(this.Nr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})})),r)))}}function AE(n){return hn(n,sd)}function so(n){return hn(n,Zf)}function Ru(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SE(n,e){const t=e.documentKey.path.toArray();return[n,om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Le(t[o],r[o]),i)return i;return i=Le(t.length,r.length),i||(i=Le(t[t.length-2],r[r.length-2]),i||Le(t[t.length-1],r[r.length-1]))}class oP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Yu(r.mutation,i,tr.empty(),_t.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Ns();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let c=Ou();return o.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ns();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let o=fr();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((h,m)=>{const p=r.get(m.key);i.has(m.key)&&(p===void 0||p.mutation instanceof Ei)?o=o.insert(m.key,m):p!==void 0?(c.set(m.key,p.mutation.getFieldMask()),Yu(p.mutation,m,p.mutation.getFieldMask(),_t.now())):c.set(m.key,tr.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((m,p)=>c.set(m,p))),t.forEach(((m,p)=>d.set(m,new oP(p,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Ku();let i=new Vt(((c,d)=>c-d)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((h=>{const m=t.get(h);if(m===null)return;let p=r.get(h)||tr.empty();p=d.applyToLocalView(m,p),r.set(h,p);const y=(i.get(d.batchId)||Ye()).add(h);i=i.insert(d.batchId,y)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),m=h.key,p=h.value,y=QA();p.forEach((v=>{if(!o.has(v)){const w=tS(t.get(v),r.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return re.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):re.resolve(Ns());let d=ed,h=o;return c.next((m=>re.forEach(m,((p,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),o.get(p)?re.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{h=h.insert(p,v)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,h,m,Ye()))).next((p=>({batchId:d,changes:YA(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((r=>{let i=Ou();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,o).next((d=>re.forEach(d,(h=>{const m=(function(y,v){return new _c(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((p=>{p.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((c=>{o.forEach(((h,m)=>{const p=m.getKey();c.get(p)===null&&(c=c.insert(p,Ft.newInvalidDocument(p)))}));let d=Ou();return c.forEach(((h,m)=>{const p=o.get(h);p!==void 0&&Yu(p.mutation,m,tr.empty(),_t.now()),Cd(t,m)&&(d=d.insert(h,m))})),d}))}}class lP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:bS(i.bundledQuery),readTime:Hn(i.readTime)}})(t)),re.resolve()}}class cP{constructor(){this.overlays=new Vt(we.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ns();return re.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Ns(),o=t.length+1,c=new we(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Vt(((m,p)=>m-p));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let p=o.get(m.largestBatchId);p===null&&(p=Ns(),o=o.insert(m.largestBatchId,p)),p.set(m.getKey(),m)}}const d=Ns(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((m,p)=>d.set(m,p))),!(d.size()>=i)););return re.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new i_(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class uP{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}class u_{constructor(){this.Qr=new bt(yn.$r),this.Ur=new bt(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new we(new ht([])),r=new yn(t,e),i=new yn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ht([])),r=new yn(t,e),i=new yn(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,i],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new yn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class dP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(yn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new r_(o,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new yn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?go:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),i=new yn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);o.push(d)})),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Le);return t.forEach((i=>{const o=new yn(i,0),c=new yn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(d=>{r=r.add(d.Yr)}))})),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;we.isDocumentKey(o)||(o=o.child(""));const c=new yn(new we(o),0);let d=new bt(Le);return this.Zr.forEachWhile((h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(h.Yr)),!0)}),c),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ie(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(t.mutations,(i=>{const o=new yn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new yn(t,0),i=this.Zr.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hP{constructor(e){this.ri=e,this.docs=(function(){return new Vt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let r=fr();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ft.newInvalidDocument(i))})),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fr();const c=t.path,d=new we(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:m,value:{document:p}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||G0(fA(p),r)<=0||(i.has(p.key)||Cd(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ee(9500)}ii(e,t){return re.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new fP(this)}getSize(e){return re.resolve(this.size)}}class fP extends NS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class mP{constructor(e){this.persistence=e,this.si=new xi((t=>Ro(t)),Rd),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new u_,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),re.waitFor(o).next((()=>i))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((c=>{o.push(i.markPotentiallyOrphaned(e,c))})),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}class d_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Or(0),this.li=!1,this.li=!0,this.hi=new uP,this.referenceDelegate=e(this),this.Pi=new mP(this),this.indexManager=new JM,this.remoteDocumentCache=(function(i){return new hP(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new _S(t),this.Ii=new lP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new dP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const i=new gP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return re.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class gP extends gA{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Ri=new u_,this.Vi=null}static mi(e){return new Gm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(r=>{const i=we.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class um{constructor(e,t){this.persistence=e,this.pi=new xi((r=>Ln(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=RS(this,t)}static mi(e,t){return new um(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?re.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,o.removeEntry(c,Ce.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,r){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class pP{constructor(e){this.serializer=e}k(e,t,r,i){const o=new km("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore(Id)})(e),(function(h){h.createObjectStore(rd,{keyPath:I3}),h.createObjectStore(Xr,{keyPath:Lx,autoIncrement:!0}).createIndex(fo,Ux,{unique:!0}),h.createObjectStore(nc)})(e),RE(e),(function(h){h.createObjectStore(oo)})(e));let c=re.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore(sc),h.deleteObjectStore(rc),h.deleteObjectStore(po)})(e),RE(e)),c=c.next((()=>(function(h){const m=h.store(po),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return m.put(em,p)})(o)))),r<4&&i>=4&&(r!==0&&(c=c.next((()=>(function(h,m){return m.store(Xr).J().next((y=>{h.deleteObjectStore(Xr),h.createObjectStore(Xr,{keyPath:Lx,autoIncrement:!0}).createIndex(fo,Ux,{unique:!0});const v=m.store(Xr),w=y.map((A=>v.put(A)));return re.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(h){h.createObjectStore(ic,{keyPath:V3})})(e)}))),r<5&&i>=5&&(c=c.next((()=>this.yi(o)))),r<6&&i>=6&&(c=c.next((()=>((function(h){h.createObjectStore(sd)})(e),this.wi(o))))),r<7&&i>=7&&(c=c.next((()=>this.Si(o)))),r<8&&i>=8&&(c=c.next((()=>this.bi(e,o)))),r<9&&i>=9&&(c=c.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(c=c.next((()=>this.Di(o)))),r<11&&i>=11&&(c=c.next((()=>{(function(h){h.createObjectStore(Om,{keyPath:j3})})(e),(function(h){h.createObjectStore(Mm,{keyPath:L3})})(e)}))),r<12&&i>=12&&(c=c.next((()=>{(function(h){const m=h.createObjectStore(Pm,{keyPath:$3});m.createIndex(e0,G3,{unique:!1}),m.createIndex(xA,K3,{unique:!1})})(e)}))),r<13&&i>=13&&(c=c.next((()=>(function(h){const m=h.createObjectStore(Zf,{keyPath:N3});m.createIndex(If,C3),m.createIndex(_A,k3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(oo)))),r<14&&i>=14&&(c=c.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(c=c.next((()=>(function(h){h.createObjectStore(Q0,{keyPath:U3,autoIncrement:!0}).createIndex(Zy,z3,{unique:!1}),h.createObjectStore(qu,{keyPath:F3}).createIndex(bA,B3,{unique:!1}),h.createObjectStore(Hu,{keyPath:q3}).createIndex(wA,H3,{unique:!1})})(e)))),r<16&&i>=16&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),r<17&&i>=17&&(c=c.next((()=>{(function(h){h.createObjectStore(X0,{keyPath:Y3})})(e)}))),r<18&&i>=18&&m2()&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),c}wi(e){let t=0;return e.store(oo).ee(((r,i)=>{t+=cm(i)})).next((()=>{const r={byteSize:t};return e.store(sd).put(Jy,r)}))}yi(e){const t=e.store(rd),r=e.store(Xr);return t.J().next((i=>re.forEach(i,(o=>{const c=IDBKeyRange.bound([o.userId,go],[o.userId,o.lastAcknowledgedBatchId]);return r.J(fo,c).next((d=>re.forEach(d,(h=>{Ie(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const m=co(this.serializer,h);return TS(e,o.userId,m).next((()=>{}))}))))}))))}Si(e){const t=e.store(sc),r=e.store(oo);return e.store(po).get(em).next((i=>{const o=[];return r.ee(((c,d)=>{const h=new ht(c),m=(function(y){return[0,Ln(y)]})(h);o.push(t.get(m).next((p=>p?re.resolve():(y=>t.put({targetId:0,path:Ln(y),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>re.waitFor(o)))}))}bi(e,t){e.createObjectStore(id,{keyPath:P3});const r=t.store(id),i=new c_,o=c=>{if(i.add(c)){const d=c.lastSegment(),h=c.popLast();return r.put({collectionId:d,parent:Ln(h)})}};return t.store(oo).ee({X:!0},((c,d)=>{const h=new ht(c);return o(h.popLast())})).next((()=>t.store(nc).ee({X:!0},(([c,d,h],m)=>{const p=Rs(d);return o(p.popLast())}))))}Di(e){const t=e.store(rc);return t.ee(((r,i)=>{const o=Pu(i),c=vS(this.serializer,o);return t.put(c)}))}Ci(e,t){const r=t.store(oo),i=[];return r.ee(((o,c)=>{const d=t.store(Zf),h=(function(y){return y.document?new we(ht.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ee(36783)})(c).path.toArray(),m={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(m))})).next((()=>re.waitFor(i)))}Fi(e,t){const r=t.store(Xr),i=CS(this.serializer),o=new d_(Gm.mi,this.serializer.yt);return r.J().next((c=>{const d=new Map;return c.forEach((h=>{let m=d.get(h.userId)??Ye();co(this.serializer,h).keys().forEach((p=>m=m.add(p))),d.set(h.userId,m)})),re.forEach(d,((h,m)=>{const p=new In(m),y=Hm.wt(this.serializer,p),v=o.getIndexManager(p),w=$m.wt(p,this.serializer,v,o.referenceDelegate);return new kS(i,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new t0(t,Or.ce),h).next()}))}))}}function RE(n){n.createObjectStore(sc,{keyPath:O3}).createIndex(Y0,M3,{unique:!0}),n.createObjectStore(rc,{keyPath:"targetId"}).createIndex(vA,D3,{unique:!0}),n.createObjectStore(po)}const ia="IndexedDbPersistence",Ay=18e5,Sy=5e3,Iy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yP="main";class h_{constructor(e,t,r,i,o,c,d,h,m,p,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=d,this.xi=m,this.Oi=p,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!h_.v())throw new ve(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sP(this,i),this.$i=t+yP,this.serializer=new _S(h),this.Ui=new ga(this.$i,this.Ni,new pP(this.serializer)),this.hi=new GM,this.Pi=new eP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CS(this.serializer),this.Ii=new $M,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Bn(ia,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(he.FAILED_PRECONDITION,Iy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Or(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ia(e))return pe(ia,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe(ia,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Nu(e).get(Ml).next((t=>re.resolve(this.es(t))))}ts(e){return mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ay)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=hn(t,ic);return r.J().next((i=>{const o=this.ss(i,Ay),c=i.filter((d=>o.indexOf(d)===-1));return re.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?re.resolve(!0):Nu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(he.FAILED_PRECONDITION,Iy);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).J().next((r=>this.ss(r,Sy).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(o||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&pe(ia,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Id,ic],(e=>{const t=new t0(e,Or.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>mf(e).J().next((t=>this.ss(t,Ay).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return $m.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Hm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){pe(ia,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?W3:h===17?SA:h===16?X3:h===15?W0:h===14?AA:h===13?TA:h===12?Q3:h===11?EA:void Ee(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,i,o,(d=>(c=new t0(d,this.ci?this.ci.next():Or.ce),t==="readwrite-primary"?this.Hi(c).next((h=>!!h||this.Yi(c))).next((h=>{if(!h)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(he.FAILED_PRECONDITION,mA);return r(c)})).next((h=>this.Xi(c).next((()=>h)))):this.Is(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Nu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(he.FAILED_PRECONDITION,Iy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(Ml,t)}static v(){return ga.v()}Zi(e){const t=Nu(e);return t.get(Ml).next((r=>this.es(r)?(pe(ia,"Releasing primary lease."),t.delete(Ml)):re.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;f2()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return pe(ia,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Bn(ia,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(n){return hn(n,Id)}function mf(n){return hn(n,ic)}function _P(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class f_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ye(),i=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new f_(e,t.fromCache,r,i)}}class vP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class DS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return f2()?8:pA(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new vP;return this.Ss(e,t,c).next((d=>{if(o.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fl()<=nt.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Fl()<=nt.DEBUG&&pe("QueryEngine","Query:",Bl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fl()<=nt.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):re.resolve())}ys(e,t){if(Jx(t))return re.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=sm(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const m=this.Ds(t,d);return this.Cs(t,m,c,h.readTime)?this.ys(e,sm(t,null,"F")):this.vs(e,m,t,h)}))))})))))}ws(e,t,r,i){return Jx(t)||i.isEqual(Ce.min())?re.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?re.resolve(null):(Fl()<=nt.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bl(t)),this.vs(e,c,t,b3(i,ed)).next((d=>d)))}))}Ds(e,t){let r=new bt(GA(e));return t.forEach(((i,o)=>{Cd(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Fl()<=nt.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.ps.getDocumentsMatchingQuery(e,t,mr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const m_="LocalStore",bP=3e8;class wP{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(Le),this.xs=new xi((o=>Ro(o)),Rd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OS(n,e,t,r){return new wP(n,e,t,r)}async function MS(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],d=[];let h=Ye();for(const m of i){c.push(m.batchId);for(const p of m.mutations)h=h.add(p.key)}for(const m of o){d.push(m.batchId);for(const p of m.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function xP(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,m,p){const y=m.batch,v=y.keys();let w=re.resolve();return v.forEach((A=>{w=w.next((()=>p.getEntry(h,A))).next((P=>{const V=m.docVersions.get(A);Ie(V!==null,48541),P.version.compareTo(V)<0&&(y.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),p.addEntry(P)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=Ye();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(h=h.add(d.batch.mutations[m].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function PS(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function EP(n,e){const t=Ue(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((p,y)=>{const v=i.get(y);if(!v)return;d.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,p.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(on.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),i=i.insert(y,w),(function(P,V,L){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=bP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,w,p)&&d.push(t.Pi.updateTargetData(o,w))}));let h=fr(),m=Ye();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))})),d.push(TP(o,c,e.documentUpdates).next((p=>{h=p.ks,m=p.qs}))),!r.isEqual(Ce.min())){const p=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(p)}return re.waitFor(d).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,m))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function TP(n,e,t){let r=Ye(),i=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=fr();return t.forEach(((d,h)=>{const m=o.get(d);h.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Ce.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):pe(m_,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",h.version)})),{ks:c,qs:i}}))}function AP(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=go),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function SP(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,re.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new di(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function g0(n,e,t){const r=Ue(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ia(c))throw c;pe(m_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function NE(n,e,t){const r=Ue(n);let i=Ce.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,m,p){const y=Ue(h),v=y.xs.get(p);return v!==void 0?re.resolve(y.Ms.get(v)):y.Pi.getTargetData(m,p)})(r,c,Mr(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:Ce.min(),t?o:Ye()))).next((d=>(IP(r,hM(e),d),{documents:d,Qs:o})))))}function IP(n,e,t){let r=n.Os.get(e)||Ce.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class CE{constructor(){this.activeTargetIds=_M()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VS{constructor(){this.Mo=new CE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RP{Oo(e){}shutdown(){}}const kE="ConnectivityMonitor";class DE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(kE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(kE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function p0(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const Ry="RestConnection",NP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===tm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=p0(),d=this.zo(e,t.toUriEncodedString());pe(Ry,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:m}=new URL(d),p=jo(m);return this.Jo(e,d,h,r,p).then((y=>(pe(Ry,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw So(Ry,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",r),y}))}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=NP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class kP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const On="WebChannelConnection";class DP extends CP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=p0();return new Promise(((d,h)=>{const m=new rA;m.setWithCredentials(!0),m.listenOnce(sA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Tf.NO_ERROR:const y=m.getResponseJson();pe(On,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),d(y);break;case Tf.TIMEOUT:pe(On,`RPC '${e}' ${c} timed out`),h(new ve(he.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const v=m.getStatus();if(pe(On,`RPC '${e}' ${c} failed with status:`,v,"response text:",m.getResponseText()),v>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const P=(function(L){const $=L.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf($)>=0?$:he.UNKNOWN})(A.status);h(new ve(P,A.message))}else h(new ve(he.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ve(he.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(On,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);pe(On,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=p0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=oA(),d=aA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=o.join("");pe(On,`Creating RPC '${e}' stream ${i}: ${p}`,h);const y=c.createWebChannel(p,h);this.I_(y);let v=!1,w=!1;const A=new kP({Yo:V=>{w?pe(On,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(v||(pe(On,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),pe(On,`RPC '${e}' stream ${i} sending:`,V),y.send(V))},Zo:()=>y.close()}),P=(V,L,$)=>{V.listen(L,(z=>{try{$(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return P(y,Du.EventType.OPEN,(()=>{w||(pe(On,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),P(y,Du.EventType.CLOSE,(()=>{w||(w=!0,pe(On,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(y))})),P(y,Du.EventType.ERROR,(V=>{w||(w=!0,So(On,`RPC '${e}' stream ${i} transport errored. Name:`,V.name,"Message:",V.message),A.a_(new ve(he.UNAVAILABLE,"The operation could not be completed")))})),P(y,Du.EventType.MESSAGE,(V=>{if(!w){const L=V.data[0];Ie(!!L,16349);const $=L,z=$?.error||$[0]?.error;if(z){pe(On,`RPC '${e}' stream ${i} received error:`,z);const H=z.status;let X=(function(T){const E=sn[T];if(E!==void 0)return sS(E)})(H),F=z.message;X===void 0&&(X=he.INTERNAL,F="Unknown error status: "+H+" with message "+z.message),w=!0,A.a_(new ve(X,F)),y.close()}else pe(On,`RPC '${e}' stream ${i} received:`,L),A.u_(L)}})),P(d,iA.STAT_EVENT,(V=>{V.stat===Qy.PROXY?pe(On,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Qy.NOPROXY&&pe(On,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function OP(){return typeof window<"u"?window:null}function Mf(){return typeof document<"u"?document:null}function Km(n){return new MM(n,!0)}class jS{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const OE="PersistentStream";class LS{constructor(e,t,r,i,o,c,d,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ve(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(OE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(OE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MP extends LS{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Hn(c.readTime):Ce.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=u0(this.serializer),t.addTarget=(function(o,c){let d;const h=c.target;if(d=nm(h)?{documents:hS(o,h)}:{query:fS(o,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=oS(o,c.resumeToken);const m=l0(o,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=dc(o,c.snapshotVersion.toTimestamp());const m=l0(o,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=UM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=u0(this.serializer),t.removeTarget=e,this.q_(t)}}class PP extends LS{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=LM(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=u0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>am(this.serializer,r)))};this.q_(t)}}class VP{}class jP extends VP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ve(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,c0(t,r),i,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(he.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,c0(t,r),i,c,d,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(he.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Mo="RemoteStore";class UP{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Fo(this)&&(pe(Mo,"Restarting streams for network reachability change."),await(async function(h){const m=Ue(h);m.Ea.add(4),await Dd(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Ym(m)})(this))}))})),this.Ra=new LP(r,i)}}async function Ym(n){if(Fo(n))for(const e of n.da)await e(!0)}async function Dd(n){for(const e of n.da)await e(!1)}function US(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),__(t)?y_(t):bc(t).O_()&&p_(t,e))}function g_(n,e){const t=Ue(n),r=bc(t);t.Ia.delete(e),r.O_()&&zS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fo(t)&&t.Ra.set("Unknown"))}function p_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(n).Y_(e)}function zS(n,e){n.Va.Ue(e),bc(n).Z_(e)}function y_(n){n.Va=new CM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),bc(n).start(),n.Ra.ua()}function __(n){return Fo(n)&&!bc(n).x_()&&n.Ia.size>0}function Fo(n){return Ue(n).Ea.size===0}function FS(n){n.Va=void 0}async function zP(n){n.Ra.set("Online")}async function FP(n){n.Ia.forEach(((e,t)=>{p_(n,e)}))}async function BP(n,e){FS(n),__(n)?(n.Ra.ha(e),y_(n)):n.Ra.set("Unknown")}async function qP(n,e,t){if(n.Ra.set("Online"),e instanceof aS&&e.state===2&&e.cause)try{await(async function(i,o){const c=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){pe(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dm(n,r)}else if(e instanceof Df?n.Va.Ze(e):e instanceof iS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const r=await PS(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const d=o.Va.Tt(c);return d.targetChanges.forEach(((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const p=o.Ia.get(m);p&&o.Ia.set(m,p.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,m)=>{const p=o.Ia.get(h);if(!p)return;o.Ia.set(h,p.withResumeToken(on.EMPTY_BYTE_STRING,p.snapshotVersion)),zS(o,h);const y=new di(p.target,h,m,p.sequenceNumber);p_(o,y)})),o.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){pe(Mo,"Failed to raise snapshot:",r),await dm(n,r)}}async function dm(n,e,t){if(!Ia(e))throw e;n.Ea.add(1),await Dd(n),n.Ra.set("Offline"),t||(t=()=>PS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Mo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ym(n)}))}function BS(n,e){return e().catch((t=>dm(n,t,e)))}async function Od(n){const e=Ue(n),t=xa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:go;for(;HP(e);)try{const i=await AP(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,$P(e,i)}catch(i){await dm(e,i)}qS(e)&&HS(e)}function HP(n){return Fo(n)&&n.Ta.length<10}function $P(n,e){n.Ta.push(e);const t=xa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function qS(n){return Fo(n)&&!xa(n).x_()&&n.Ta.length>0}function HS(n){xa(n).start()}async function GP(n){xa(n).ra()}async function KP(n){const e=xa(n);for(const t of n.Ta)e.ea(t.mutations)}async function YP(n,e,t){const r=n.Ta.shift(),i=s_.from(r,e,t);await BS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Od(n)}async function QP(n,e){e&&xa(n).X_&&await(async function(r,i){if((function(c){return IM(c)&&c!==he.ABORTED})(i.code)){const o=r.Ta.shift();xa(r).B_(),await BS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Od(r)}})(n,e),qS(n)&&HS(n)}async function ME(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),pe(Mo,"RemoteStore received new credentials");const r=Fo(t);t.Ea.add(3),await Dd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ym(t)}async function XP(n,e){const t=Ue(n);e?(t.Ea.delete(2),await Ym(t)):e||(t.Ea.add(2),await Dd(t),t.Ra.set("Unknown"))}function bc(n){return n.ma||(n.ma=(function(t,r,i){const o=Ue(t);return o.sa(),new MP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:zP.bind(null,n),t_:FP.bind(null,n),r_:BP.bind(null,n),H_:qP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),__(n)?y_(n):n.Ra.set("Unknown")):(await n.ma.stop(),FS(n))}))),n.ma}function xa(n){return n.fa||(n.fa=(function(t,r,i){const o=Ue(t);return o.sa(),new PP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:GP.bind(null,n),r_:QP.bind(null,n),ta:KP.bind(null,n),na:YP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Od(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Mo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class v_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,d=new v_(e,t,c,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b_(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),Ia(n))return new ve(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Wl{static emptySet(e){return new Wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Ou(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PE{constructor(){this.ga=new Vt(we.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class hc{constructor(e,t,r,i,o,c,d,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new hc(e,t,Wl.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class WP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class JP{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ue(t),o=i.queries;i.queries=VE(),o.forEach(((c,d)=>{for(const h of d.Sa)h.onError(r)}))})(this,new ve(he.ABORTED,"Firestore shutting down"))}}function VE(){return new xi((n=>$A(n)),Lm)}async function w_(n,e){const t=Ue(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new WP,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=b_(c,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&E_(t)}async function x_(n,e){const t=Ue(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZP(n,e){const t=Ue(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&E_(t)}function e6(n,e,t){const r=Ue(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function E_(n){n.Ca.forEach((e=>{e.next()}))}var y0,jE;(jE=y0||(y0={})).Ma="default",jE.Cache="cache";class T_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==y0.Cache}}class $S{constructor(e){this.key=e}}class GS{constructor(e){this.key=e}}class t6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=GA(e),this.tu=new Wl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new PE,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,y)=>{const v=i.get(p),w=Cd(this.query,y)?y:null,A=!!v&&this.mutatedKeys.has(v.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;v&&w?v.data.isEqual(w.data)?A!==P&&(r.track({type:3,doc:w}),V=!0):this.su(v,w)||(r.track({type:2,doc:w}),V=!0,(h&&this.eu(w,h)>0||m&&this.eu(w,m)<0)&&(d=!0)):!v&&w?(r.track({type:0,doc:w}),V=!0):v&&!w&&(r.track({type:1,doc:v}),V=!0,(h||m)&&(d=!0)),V&&(w?(c=c.add(w),o=P?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,y)=>(function(w,A){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:V})}};return P(w)-P(A)})(p.type,y.type)||this.eu(p.doc,y.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,m=h!==this.Za;return this.Za=h,c.length!==0||m?{snapshot:new hc(this.query,e.tu,o,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new GS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new $S(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const A_="SyncEngine";class n6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class r6{constructor(e){this.key=e,this.hu=!1}}class s6{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xi((d=>$A(d)),Lm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(we.comparator),this.Au=new Map,this.Ru=new u_,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i6(n,e,t=!0){const r=JS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await KS(r,e,t,!0),i}async function a6(n,e){const t=JS(n);await KS(t,e,!0,!1)}async function KS(n,e,t,r){const i=await SP(n.localStore,Mr(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await o6(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&US(n.remoteStore,i),d}async function o6(n,e,t,r,i){n.pu=(y,v,w)=>(async function(P,V,L,$){let z=V.view.ru(L);z.Cs&&(z=await NE(P.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,z))));const H=$&&$.targetChanges.get(V.targetId),X=$&&$.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(z,P.isPrimaryClient,H,X);return UE(P,V.targetId,F.au),F.snapshot})(n,y,v,w);const o=await NE(n.localStore,e,!0),c=new t6(e,o.Qs),d=c.ru(o.documents),h=kd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(d,n.isPrimaryClient,h);UE(n,t,m.au);const p=new n6(e,t,c);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function l6(n,e,t){const r=Ue(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((c=>!Lm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await g0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&g_(r.remoteStore,i.targetId),_0(r,i.targetId)})).catch(zo)):(_0(r,i.targetId),await g0(r.localStore,i.targetId,!0))}async function c6(n,e){const t=Ue(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),g_(t.remoteStore,r.targetId))}async function u6(n,e,t){const r=ZS(n);try{const i=await(function(c,d){const h=Ue(c),m=_t.now(),p=d.reduce(((w,A)=>w.add(A.key)),Ye());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=fr(),P=Ye();return h.Ns.getEntries(w,p).next((V=>{A=V,A.forEach(((L,$)=>{$.isValidDocument()||(P=P.add(L))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,A))).next((V=>{y=V;const L=[];for(const $ of d){const z=AM($,y.get($.key).overlayedDocument);z!=null&&L.push(new Ei($.key,z,VA(z.value.mapValue),jn.exists(!0)))}return h.mutationQueue.addMutationBatch(w,m,L,d)})).next((V=>{v=V;const L=V.applyToLocalDocumentSet(y,P);return h.documentOverlayCache.saveOverlays(w,V.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:YA(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,h){let m=c.Vu[c.currentUser.toKey()];m||(m=new Vt(Le)),m=m.insert(d,h),c.Vu[c.currentUser.toKey()]=m})(r,i.batchId,t),await Md(r,i.changes),await Od(r.remoteStore)}catch(i){const o=b_(i,"Failed to persist write");t.reject(o)}}async function YS(n,e){const t=Ue(n);try{const r=await EP(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const c=t.Au.get(o);c&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Ie(c.hu,14607):i.removedDocuments.size>0&&(Ie(c.hu,42227),c.hu=!1))})),await Md(t,r,e)}catch(r){await zo(r)}}function LE(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const h=Ue(c);h.onlineState=d;let m=!1;h.queries.forEach(((p,y)=>{for(const v of y.Sa)v.va(d)&&(m=!0)})),m&&E_(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d6(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new Vt(we.comparator);c=c.insert(o,Ft.newNoDocument(o,Ce.min()));const d=Ye().add(o),h=new qm(Ce.min(),new Map,new Vt(Le),c,d);await YS(r,h),r.du=r.du.remove(o),r.Au.delete(e),S_(r)}else await g0(r.localStore,e,!1).then((()=>_0(r,e,t))).catch(zo)}async function h6(n,e){const t=Ue(n),r=e.batch.batchId;try{const i=await xP(t.localStore,e);XS(t,r,null),QS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Md(t,i)}catch(i){await zo(i)}}async function f6(n,e,t){const r=Ue(n);try{const i=await(function(c,d){const h=Ue(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let p;return h.mutationQueue.lookupMutationBatch(m,d).next((y=>(Ie(y!==null,37113),p=y.keys(),h.mutationQueue.removeMutationBatch(m,y)))).next((()=>h.mutationQueue.performConsistencyCheck(m))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(m,p,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,p))).next((()=>h.localDocuments.getDocuments(m,p)))}))})(r.localStore,e);XS(r,e,t),QS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Md(r,i)}catch(i){await zo(i)}}function QS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function XS(n,e,t){const r=Ue(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function _0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||WS(n,r)}))}function WS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(g_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),S_(n))}function UE(n,e,t){for(const r of t)r instanceof $S?(n.Ru.addReference(r.key,e),m6(n,r)):r instanceof GS?(pe(A_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||WS(n,r.key)):Ee(19791,{wu:r})}function m6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(pe(A_,"New document in limbo: "+t),n.Eu.add(r),S_(n))}function S_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new r6(t)),n.du=n.du.insert(t,r),US(n.remoteStore,new di(Mr(Nd(t.path)),r,"TargetPurposeLimboResolution",Or.ce))}}async function Md(n,e,t){const r=Ue(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{c.push(r.pu(h,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const p=m?!m.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(m){i.push(m);const p=f_.As(h.targetId,m);o.push(p)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(h,m){const p=Ue(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(m,(v=>re.forEach(v.Es,(w=>p.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>re.forEach(v.ds,(w=>p.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Ia(y))throw y;pe(m_,"Failed to update sequence numbers: "+y)}for(const y of m){const v=y.targetId;if(!y.fromCache){const w=p.Ms.get(v),A=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(v,P)}}})(r.localStore,o))}async function g6(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){pe(A_,"User change. New user:",e.toKey());const r=await MS(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new ve(he.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Md(t,r.Ls)}}function p6(n,e){const t=Ue(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let i=Ye();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function JS(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d6.bind(null,e),e.Pu.H_=ZP.bind(null,e.eventManager),e.Pu.yu=e6.bind(null,e.eventManager),e}function ZS(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f6.bind(null,e),e}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OS(this.persistence,new DS,e.initialUser,this.serializer)}Cu(e){return new d_(Gm.mi,this.serializer)}Du(e){return new VS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class y6 extends hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ie(this.persistence.referenceDelegate instanceof um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new d_((r=>um.mi(r,t)),this.serializer)}}class _6 extends hd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ZS(this.xu.syncEngine),await Od(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return OS(this.persistence,new DS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}Mu(e,t){const r=new T3(t,this.persistence);return new E3(e.asyncQueue,r)}Cu(e){const t=_P(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new h_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OP(),Mf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VS}}class hm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g6.bind(null,this.syncEngine),await XP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JP})()}createDatastore(e){const t=Km(e.databaseInfo.databaseId),r=(function(o){return new DP(o)})(e.databaseInfo);return(function(o,c,d,h){return new jP(o,c,d,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,c,d){return new UP(r,i,o,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>LE(this.syncEngine,t,0)),(function(){return DE.v()?new DE:new RP})())}createSyncEngine(e,t){return(function(i,o,c,d,h,m,p){const y=new s6(i,o,c,d,h,m);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ue(t);pe(Mo,"RemoteStore shutting down."),r.Ea.add(5),await Dd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};class I_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ea="FirestoreClient";class v6{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=$0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{pe(Ea,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pe(Ea,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=b_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ny(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ea,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await MS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function zE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await b6(n);pe(Ea,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ME(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>ME(e.remoteStore,i))),n._onlineComponents=e}async function b6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ea,"Using user provided OfflineComponentProvider");try{await Ny(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await Ny(n,new hd)}}else pe(Ea,"Using default OfflineComponentProvider"),await Ny(n,new y6(void 0));return n._offlineComponents}async function eI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ea,"Using user provided OnlineComponentProvider"),await zE(n,n._uninitializedComponentsProvider._online)):(pe(Ea,"Using default OnlineComponentProvider"),await zE(n,new hm))),n._onlineComponents}function w6(n){return eI(n).then((e=>e.syncEngine))}async function fm(n){const e=await eI(n),t=e.eventManager;return t.onListen=i6.bind(null,e.syncEngine),t.onUnlisten=l6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=c6.bind(null,e.syncEngine),t}function x6(n,e,t={}){const r=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,m){const p=new I_({next:v=>{p.Nu(),c.enqueueAndForget((()=>x_(o,y)));const w=v.docs.has(d);!w&&v.fromCache?m.reject(new ve(he.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?m.reject(new ve(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new T_(Nd(d.path),p,{includeMetadataChanges:!0,qa:!0});return w_(o,y)})(await fm(n),n.asyncQueue,e,t,r))),r.promise}function E6(n,e,t={}){const r=new Os;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,d,h,m){const p=new I_({next:v=>{p.Nu(),c.enqueueAndForget((()=>x_(o,y))),v.fromCache&&h.source==="server"?m.reject(new ve(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new T_(d,p,{includeMetadataChanges:!0,qa:!0});return w_(o,y)})(await fm(n),n.asyncQueue,e,t,r))),r.promise}function tI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const FE=new Map;const nI="firestore.googleapis.com",BE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nI,this.ssl=BE}else this.host=e.host,this.ssl=e.ssl??BE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ES;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tP)throw new ve(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new l3;switch(r.type){case"firstParty":return new h3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=FE.get(t);r&&(pe("ComponentProvider","Removing Datastore"),FE.delete(t),r.terminate())})(this),Promise.resolve()}}function T6(n,e,t,r={}){n=qn(n,Qm);const i=jo(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(k0(`https://${d}`),D0("Firestore",!0)),o.host!==nI&&o.host!==d&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:i,emulatorOptions:r};if(!gi(h,c)&&(n._setSettings(h),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=In.MOCK_USER;else{m=d2(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ve(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new In(y)}n._authCredentials=new c3(new cA(m,p))}}class Ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class Bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Sd(t,Bt._jsonSchema))return new Bt(e,r||null,new we(ht.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:an("string",Bt._jsonSchemaVersion),referencePath:an("string")};class pa extends Ti{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new we(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function Un(n,e,...t){if(n=Yt(n),dA("collection","path",e),n instanceof Qm){const r=ht.fromString(e,...t);return Ox(r),new pa(n,null,r)}{if(!(n instanceof Bt||n instanceof pa))throw new ve(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Ox(r),new pa(n.firestore,null,r)}}function It(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=$0.newId()),dA("doc","path",e),n instanceof Qm){const r=ht.fromString(e,...t);return Dx(r),new Bt(n,null,new we(r))}{if(!(n instanceof Bt||n instanceof pa))throw new ve(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return Dx(r),new Bt(n.firestore,n instanceof pa?n.converter:null,new we(r))}}const HE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jS(this,"async_queue_retry"),this._c=()=>{const r=Mf();r&&pe(HE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;pe(HE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",GE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=v_.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function GE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function KE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class js extends Qm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $E,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function A6(n,e){const t=typeof n=="object"?n:P0(),r=typeof n=="string"?n:tm,i=Sm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=l2("firestore");o&&T6(i,...o)}return i}function Xm(n){if(n._terminated)throw new ve(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rI(n),n._firestoreClient}function rI(n){const e=n._freezeSettings(),t=(function(i,o,c,d){return new Z3(i,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new v6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}function S6(n,e){So("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return I6(n,hm.provider,{build:r=>new _6(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function I6(n,e,t){if((n=qn(n,js))._firestoreClient||n._terminated)throw new ve(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ve(he.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rI(n)}class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(on.fromBase64String(e))}catch(t){throw new ve(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sd(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:an("string",Dr._jsonSchemaVersion),bytes:an("string")};class Wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wc{constructor(e){this._methodName=e}}class Ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ms._jsonSchemaVersion}}static fromJSON(e){if(Sd(e,Ms._jsonSchema))return new Ms(e.latitude,e.longitude)}}Ms._jsonSchemaVersion="firestore/geoPoint/1.0",Ms._jsonSchema={type:an("string",Ms._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class Ps{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sd(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ps(e.vectorValues);throw new ve(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:an("string",Ps._jsonSchemaVersion),vectorValues:an("object")};const R6=/^__.*__$/;class N6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class sI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class Jm{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iI(this.Ac)&&R6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Km(e)}Cc(e,t,r,i=!1){return new Jm({Ac:e,methodName:t,Dc:r,path:jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(n){const e=n._freezeSettings(),t=Km(n._databaseId);return new C6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aI(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);k_("Data must be an object, but it was:",c,r);const d=lI(r,c);let h,m;if(o.merge)h=new tr(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const v=v0(e,y,t);if(!c.contains(v))throw new ve(he.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);uI(p,v)||p.push(v)}h=new tr(p),m=c.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,m=c.fieldTransforms;return new N6(new Pn(d),h,m)}class eg extends wc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function oI(n,e,t){return new Jm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class R_ extends wc{_toFieldTransform(e){return new zm(e.path,new uc)}isEqual(e){return e instanceof R_}}class N_ extends wc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=oI(this,e,!0),r=this.vc.map((o=>Bo(o,t))),i=new No(r);return new zm(e.path,i)}isEqual(e){return e instanceof N_&&gi(this.vc,e.vc)}}class C_ extends wc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=oI(this,e,!0),r=this.vc.map((o=>Bo(o,t))),i=new Co(r);return new zm(e.path,i)}isEqual(e){return e instanceof C_&&gi(this.vc,e.vc)}}function k6(n,e,t,r){const i=n.Cc(1,e,t);k_("Data must be an object, but it was:",i,r);const o=[],c=Pn.empty();Ra(r,((h,m)=>{const p=D_(e,h,t);m=Yt(m);const y=i.yc(p);if(m instanceof eg)o.push(p);else{const v=Bo(m,y);v!=null&&(o.push(p),c.set(p,v))}}));const d=new tr(o);return new sI(c,d,i.fieldTransforms)}function D6(n,e,t,r,i,o){const c=n.Cc(1,e,t),d=[v0(e,r,t)],h=[i];if(o.length%2!=0)throw new ve(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)d.push(v0(e,o[v])),h.push(o[v+1]);const m=[],p=Pn.empty();for(let v=d.length-1;v>=0;--v)if(!uI(m,d[v])){const w=d[v];let A=h[v];A=Yt(A);const P=c.yc(w);if(A instanceof eg)m.push(w);else{const V=Bo(A,P);V!=null&&(m.push(w),p.set(w,V))}}const y=new tr(m);return new sI(p,y,c.fieldTransforms)}function O6(n,e,t,r=!1){return Bo(t,n.Cc(r?4:3,e))}function Bo(n,e){if(cI(n=Yt(n)))return k_("Unsupported field value:",e,n),lI(n,e);if(n instanceof wc)return(function(r,i){if(!iI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let c=0;for(const d of r){let h=Bo(d,i.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=_t.fromDate(r);return{timestampValue:dc(i.serializer,o)}}if(r instanceof _t){const o=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dc(i.serializer,o)}}if(r instanceof Ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:oS(i.serializer,r._byteString)};if(r instanceof Bt){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:o_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ps)return(function(c,d){return{mapValue:{fields:{[Z0]:{stringValue:e_},[ac]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return n_(d.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Cm(r)}`)})(n,e)}function lI(n,e){const t={};return IA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(n,((r,i)=>{const o=Bo(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function cI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Ms||n instanceof Dr||n instanceof Bt||n instanceof wc||n instanceof Ps)}function k_(n,e,t){if(!cI(t)||!hA(t)){const r=Cm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function v0(n,e,t){if((e=Yt(e))instanceof Wm)return e._internalPath;if(typeof e=="string")return D_(n,e);throw mm("Field path arguments must be of type string or ",n,!1,void 0,t)}const M6=new RegExp("[~\\*/\\[\\]]");function D_(n,e,t){if(e.search(M6)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wm(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mm(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new ve(he.INVALID_ARGUMENT,d+n+h)}function uI(n,e){return n.some((t=>t.isEqual(e)))}class dI{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class P6 extends dI{data(){return super.data()}}function tg(n,e){return typeof e=="string"?D_(n,e):e instanceof Wm?e._internalPath:e._delegate._internalPath}function hI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}class M_ extends O_{}function Ta(n,e,...t){let r=[];e instanceof O_&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((h=>h instanceof P_)).length,d=o.filter((h=>h instanceof ng)).length;if(c>1||c>0&&d>0)throw new ve(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class ng extends M_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ng(e,t,r)}_apply(e){const t=this._parse(e);return fI(e._query,t),new Ti(e.firestore,e.converter,o0(e._query,t))}_parse(e){const t=Zm(e.firestore);return(function(o,c,d,h,m,p,y){let v;if(m.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ve(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){XE(y,p);const A=[];for(const P of y)A.push(QE(h,o,P));v={arrayValue:{values:A}}}else v=QE(h,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||XE(y,p),v=O6(d,c,y,p==="in"||p==="not-in");return rt.create(m,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qo(n,e,t){const r=e,i=tg("where",n);return ng._create(i,r,t)}class P_ extends O_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new P_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let c=i;const d=o.getFlattenedFilters();for(const h of d)fI(c,h),c=o0(c,h)})(e._query,t),new Ti(e.firestore,e.converter,o0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class V_ extends M_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new V_(e,t)}_apply(e){const t=(function(i,o,c){if(i.startAt!==null)throw new ve(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ve(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(o,c)})(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,(function(i,o){const c=i.explicitOrderBy.concat([o]);return new _c(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function V6(n,e="asc"){const t=e,r=tg("orderBy",n);return V_._create(r,t)}class j_ extends M_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new j_(e,t,r)}_apply(e){return new Ti(e.firestore,e.converter,sm(e._query,this._limit,this._limitType))}}function YE(n){return v3("limit",n),j_._create("limit",n,"F")}function QE(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new ve(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HA(e)&&t.indexOf("/")!==-1)throw new ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!we.isDocumentKey(r))throw new ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ld(n,new we(r))}if(t instanceof Bt)return ld(n,t._key);throw new ve(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(t)}.`)}function XE(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fI(n,e){const t=(function(i,o){for(const c of i)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class j6{convertValue(e,t="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ra(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[ac].arrayValue?.values?.map((r=>Pt(r.doubleValue)));return new Ps(t)}convertGeoPoint(e){return new Ms(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){const t=_i(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);Ie(yS(r),9688,{name:e});const i=new Io(r.get(1),r.get(3)),o=new we(r.popFirst(5));return i.isEqual(t)||Bn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function mI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends dI{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:an("string",_o._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Pf extends _o{data(e={}){return super.data(e)}}class vo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Pf(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Pf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Vu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Pf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Vu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,p=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:L6(d.type),doc:h,oldIndex:m,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function L6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}function Na(n){n=qn(n,Bt);const e=qn(n.firestore,js);return x6(Xm(e),n._key).then((t=>gI(e,n,t)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:an("string",vo._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class L_ extends j6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function fc(n){n=qn(n,Ti);const e=qn(n.firestore,js),t=Xm(e),r=new L_(e);return hI(n._query),E6(t,n._query).then((i=>new vo(e,r,n,i)))}function b0(n,e,t){n=qn(n,Bt);const r=qn(n.firestore,js),i=mI(n.converter,e,t);return sg(r,[aI(Zm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,jn.none())])}function gr(n,e,t,...r){n=qn(n,Bt);const i=qn(n.firestore,js),o=Zm(i);let c;return c=typeof(e=Yt(e))=="string"||e instanceof Wm?D6(o,"updateDoc",n._key,e,t,r):k6(o,"updateDoc",n._key,e),sg(i,[c.toMutation(n._key,jn.exists(!0))])}function rg(n){return sg(qn(n.firestore,js),[new Bm(n._key,jn.none())])}function Pd(n,e){const t=qn(n.firestore,js),r=It(n),i=mI(n.converter,e);return sg(t,[aI(Zm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jn.exists(!1))]).then((()=>r))}function bo(n,...e){n=Yt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||KE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(KE(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,c,d;if(n instanceof Bt)c=qn(n.firestore,js),d=Nd(n._key.path),o={next:h=>{e[r]&&e[r](gI(c,n,h))},error:e[r+1],complete:e[r+2]};else{const h=qn(n,Ti);c=qn(h.firestore,js),d=h._query;const m=new L_(c);o={next:p=>{e[r]&&e[r](new vo(c,m,h,p))},error:e[r+1],complete:e[r+2]},hI(n._query)}return(function(m,p,y,v){const w=new I_(v),A=new T_(p,w,y);return m.asyncQueue.enqueueAndForget((async()=>w_(await fm(m),A))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>x_(await fm(m),A)))}})(Xm(c),d,i,o)}function sg(n,e){return(function(r,i){const o=new Os;return r.asyncQueue.enqueueAndForget((async()=>u6(await w6(r),i,o))),o.promise})(Xm(n),e)}function gI(n,e,t){const r=t.docs.get(e._key),i=new L_(n);return new _o(n,i,e._key,r,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}function Pr(){return new R_("serverTimestamp")}function U_(...n){return new N_("arrayUnion",n)}function pI(...n){return new C_("arrayRemove",n)}(function(e,t=!0){(function(i){yc=i})(Lo),xo(new va("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),d=new js(new u3(r.getProvider("auth-internal")),new f3(c,r.getProvider("app-check-internal")),(function(m,p){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(m.options.projectId,p)})(c,i),c);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),Cs(Rx,Nx,e),Cs(Rx,Nx,"esm2020")})();const yI="firebasestorage.googleapis.com",U6="storageBucket",z6=120*1e3,F6=600*1e3;class Fs extends Us{constructor(e,t,r=0){super(Cy(e),`Firebase Storage: ${t} (${Cy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ls;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ls||(Ls={}));function Cy(n){return"storage/"+n}function B6(){const n="An unknown error occurred, please check the error payload for server response.";return new Fs(Ls.UNKNOWN,n)}function q6(){return new Fs(Ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H6(){return new Fs(Ls.CANCELED,"User canceled the upload/download.")}function $6(n){return new Fs(Ls.INVALID_URL,"Invalid URL '"+n+"'.")}function G6(n){return new Fs(Ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function WE(n){return new Fs(Ls.INVALID_ARGUMENT,n)}function _I(){return new Fs(Ls.APP_DELETED,"The Firebase app was deleted.")}function K6(n){return new Fs(Ls.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Jr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Jr.makeFromUrl(e,t)}catch{return new Jr(e,"")}if(r.path==="")return r;throw G6(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function m(H){H.path_=decodeURIComponent(H.path)}const p="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${p}/b/${i}/o${v}`,"i"),A={bucket:1,path:3},P=t===yI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",L=new RegExp(`^https?://${P}/${i}/${V}`,"i"),z=[{regex:d,indices:h,postModify:o},{regex:w,indices:A,postModify:m},{regex:L,indices:{bucket:1,path:2},postModify:m}];for(let H=0;H<z.length;H++){const X=z[H],F=X.regex.exec(e);if(F){const R=F[X.indices.bucket];let T=F[X.indices.path];T||(T=""),r=new Jr(R,T),X.postModify(r);break}}if(r==null)throw $6(e);return r}}class Y6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Q6(n,e,t){let r=1,i=null,o=null,c=!1,d=0;function h(){return d===2}let m=!1;function p(...V){m||(m=!0,e.apply(null,V))}function y(V){i=setTimeout(()=>{i=null,n(w,h())},V)}function v(){o&&clearTimeout(o)}function w(V,...L){if(m){v();return}if(V){v(),p.call(null,V,...L);return}if(h()||c){v(),p.call(null,V,...L);return}r<64&&(r*=2);let z;d===1?(d=2,z=0):z=(r+Math.random())*1e3,y(z)}let A=!1;function P(V){A||(A=!0,v(),!m&&(i!==null?(V||(d=2),clearTimeout(i),y(0)):V||(d=1)))}return y(0),o=setTimeout(()=>{c=!0,P(!0)},t),P}function X6(n){n(!1)}function W6(n){return n!==void 0}function JE(n,e,t,r){if(r<e)throw WE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw WE(`Invalid value for '${n}'. Expected ${t} or less.`)}function J6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var gm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(gm||(gm={}));function Z6(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}class eV{constructor(e,t,r,i,o,c,d,h,m,p,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=p,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,P)=>{this.resolve_=A,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{const h=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===gm.NO_ERROR,h=o.getStatus();if(!d||Z6(h,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===gm.ABORT;r(!1,new pf(!1,null,p));return}const m=this.successCodes_.indexOf(h)!==-1;r(!0,new pf(m,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());W6(h)?o(h):o()}catch(h){c(h)}else if(d!==null){const h=B6();h.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,h)):c(h)}else if(i.canceled){const h=this.appDelete_?_I():H6();c(h)}else{const h=q6();c(h)}};this.canceled_?t(!1,new pf(!1,null,!0)):this.backoffId_=Q6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&X6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function tV(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function nV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rV(n,e){e&&(n["X-Firebase-GMPID"]=e)}function sV(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function iV(n,e,t,r,i,o,c=!0,d=!1){const h=J6(n.urlParams),m=n.url+h,p=Object.assign({},n.headers);return rV(p,e),tV(p,t),nV(p,o),sV(p,r),new eV(m,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,d)}function aV(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function oV(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class pm{constructor(e,t){this._service=e,t instanceof Jr?this._location=t:this._location=Jr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pm(e,t)}get root(){const e=new Jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oV(this._location.path)}get storage(){return this._service}get parent(){const e=aV(this._location.path);if(e===null)return null;const t=new Jr(this._location.bucket,e);return new pm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw K6(e)}}function ZE(n,e){const t=e?.[U6];return t==null?null:Jr.makeFromBucketSpec(t,n)}function lV(n,e,t,r={}){n.host=`${e}:${t}`;const i=jo(e);i&&(k0(`https://${n.host}/b`),D0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:d2(o,n.app.options.projectId))}class cV{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=yI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z6,this._maxUploadRetryTime=F6,this._requests=new Set,i!=null?this._bucket=Jr.makeFromBucketSpec(i,this._host):this._bucket=ZE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jr.makeFromBucketSpec(this._url,e):this._bucket=ZE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Y6(_I());{const c=iV(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const eT="@firebase/storage",tT="0.14.0";const vI="storage";function uV(n=P0(),e){n=Yt(n);const r=Sm(n,vI).getImmediate({identifier:e}),i=l2("storage");return i&&dV(r,...i),r}function dV(n,e,t,r={}){lV(n,e,t,r)}function hV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cV(t,r,i,e,Lo)}function fV(){xo(new va(vI,hV,"PUBLIC").setMultipleInstances(!0)),Cs(eT,tT,""),Cs(eT,tT,"esm2020")}fV();const mV={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},z_=_2(mV),Zr=a3(z_),He=A6(z_);uV(z_);new li;try{S6(He).catch(n=>{n.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):n.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const bI=q.createContext();function rs(){return q.useContext(bI)}function gV({children:n}){const[e,t]=q.useState(null),[r,i]=q.useState(!0);q.useEffect(()=>QO(Zr,async h=>{if(h){t(h);try{const m=await Na(It(He,"users",h.uid));m.exists()&&t(p=>({...p,...m.data()}))}catch(m){console.error("Error fetching user profile:",m)}}else t(null);i(!1)}),[]);const c={currentUser:e,loading:r,logout:async()=>{await Zr.signOut(),t(null)}};return b.jsx(bI.Provider,{value:c,children:!r&&n})}const pV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),nT=n=>{const e=yV(n);return e.charAt(0).toUpperCase()+e.slice(1)},wI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),_V=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var vV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bV=q.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...d},h)=>q.createElement("svg",{ref:h,...vV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:wI("lucide",i),...!o&&!_V(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,p])=>q.createElement(m,p)),...Array.isArray(o)?o:[o]]));const Oe=(n,e)=>{const t=q.forwardRef(({className:r,...i},o)=>q.createElement(bV,{ref:o,iconNode:e,className:wI(`lucide-${pV(nT(n))}`,`lucide-${n}`,r),...i}));return t.displayName=nT(n),t};const wV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],F_=Oe("activity",wV);const xV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],EV=Oe("arrow-left",xV);const TV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xI=Oe("arrow-right",TV);const AV=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],SV=Oe("brain",AV);const IV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],RV=Oe("calendar-check",IV);const NV=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Jl=Oe("camera",NV);const CV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B_=Oe("chevron-down",CV);const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],DV=Oe("circle-alert",kV);const OV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],q_=Oe("circle-check-big",OV);const MV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],PV=Oe("circle-check",MV);const VV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EI=Oe("clock",VV);const jV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],LV=Oe("file-text",jV);const UV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],rT=Oe("globe",UV);const zV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],FV=Oe("grid-3x3",zV);const BV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],TI=Oe("heart",BV);const qV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],AI=Oe("house",qV);const HV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],SI=Oe("image",HV);const $V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GV=Oe("info",$V);const KV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],YV=Oe("leaf",KV);const QV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ya=Oe("loader-circle",QV);const XV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],sT=Oe("log-in",XV);const WV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JV=Oe("log-out",WV);const ZV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ej=Oe("mail",ZV);const tj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],fd=Oe("message-circle",tj);const nj=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],rj=Oe("mic",nj);const sj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ij=Oe("moon",sj);const aj=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],iT=Oe("paperclip",aj);const oj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],II=Oe("pen",oj);const lj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cj=Oe("play",lj);const uj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dj=Oe("plus",uj);const hj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RI=Oe("refresh-cw",hj);const fj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],NI=Oe("save",fj);const mj=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],aT=Oe("scan-line",mj);const gj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],CI=Oe("search",gj);const pj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],md=Oe("send",pj);const yj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],w0=Oe("share-2",yj);const _j=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vj=Oe("shield-check",_j);const bj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],wj=Oe("sparkles",bj);const xj=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],jr=Oe("sprout",xj);const Ej=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],oT=Oe("stethoscope",Ej);const Tj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Aj=Oe("sun",Tj);const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lT=Oe("target",Sj);const Ij=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ig=Oe("trash-2",Ij);const Rj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],x0=Oe("triangle-alert",Rj);const Nj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Cj=Oe("user-plus",Nj);const kj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],E0=Oe("user",kj);const Dj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oj=Oe("users",Dj);const Mj=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Pj=Oe("wand-sparkles",Mj);const Vj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Aa=Oe("x",Vj);const jj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Lj=Oe("zap",jj),kI=q.createContext();function Ho(){return q.useContext(kI)}function Uj({children:n}){const[e,t]=q.useState([]),r=q.useCallback((o,c="info",d=4e3)=>{const h=Date.now();t(m=>[...m,{id:h,message:o,type:c}]),setTimeout(()=>{i(h)},d)},[]),i=q.useCallback(o=>{t(c=>c.filter(d=>d.id!==o))},[]);return b.jsxs(kI.Provider,{value:{addToast:r,removeToast:i},children:[n,b.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 shrink-0"}),o.type==="error"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 shrink-0"}),o.type==="info"&&b.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center shrink-0 text-xs font-bold text-green-600",children:"AI"}),b.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}class DI extends GN.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(x0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(RI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(AI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function zj(){const{currentUser:n,logout:e}=rs(),{t,i18n:r}=Nn(),i=pr(),o=bi(),{addToast:c}=Ho(),d=()=>{r.changeLanguage(r.language==="en"?"tr":"en")},[h,m]=q.useState(localStorage.getItem("theme")||"light");q.useEffect(()=>{h==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",h)},[h]);const[p]=q.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{m(A=>A==="dark"?"light":"dark")};q.useEffect(()=>{if(!n)return;const A=async()=>{try{await gr(It(He,"users",n.uid),{lastSeen:Pr()})}catch(V){console.error("Presence update failed",V)}};A();const P=setInterval(A,60*1e3);return()=>clearInterval(P)},[n]),q.useEffect(()=>{if(!n)return;const A=Ta(Un(He,"chats"),qo("participants","array-contains",n.uid)),P=bo(A,V=>{V.docChanges().forEach(L=>{if(L.type==="modified"){const $=L.doc.data(),z=$.updatedAt?.seconds*1e3;if(Date.now()-z>5e3)return;const H=$.participants.find(F=>F!==n.uid);if(!(i.pathname===`/messages/${L.doc.id}`)&&H){const F=$.participantData?.[H]||{name:"Someone"};p.play().catch(R=>console.log("Audio play failed",R)),c(`New message from ${F.name}: ${$.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>P()},[n,i.pathname,c,p]);const w=[{path:"/",icon:AI,label:t("app_name"),public:!0},{path:"/community",icon:Oj,label:t("community"),public:!0},{path:"/analyses",icon:EI,label:t("analyses"),public:!1},{path:"/messages",icon:fd,label:t("messages"),public:!1},{path:"/profile",icon:E0,label:t("profile"),public:!1},{path:"/about",icon:GV,label:t("about"),public:!0}].filter(A=>A.public||n);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(kr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(jr,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(A=>{const P=A.icon,V=i.pathname===A.path;return b.jsxs(kr,{to:A.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${V?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(P,{className:"w-5 h-5"}),b.jsx("span",{children:A.label})]},A.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:d,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:r.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[h==="dark"?b.jsx(Aj,{className:"w-5 h-5"}):b.jsx(ij,{className:"w-5 h-5"}),b.jsx("span",{children:t(h==="dark"?"light_mode":"dark_mode")})]}),n?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"px-2 py-1",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:n.displayName||n.email})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(JV,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(kr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(sT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(kr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(jr,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:d,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:r.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(DI,{children:b.jsx(GC,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(A=>{const P=A.icon,V=i.pathname===A.path;return b.jsxs(kr,{to:A.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${V?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(P,{className:`w-6 h-6 ${V?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:A.label})]},A.path)}),!n&&b.jsxs(kr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(sT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function Fj(){const[n,e]=q.useState(""),[t,r]=q.useState(""),[i,o]=q.useState(""),[c,d]=q.useState(!1),[h,m]=q.useState(!1),[p,y]=q.useState(!1),v=bi(),w=pr(),{t:A}=Nn(),{currentUser:P}=rs(),{addToast:V}=Ho();if(P?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const L=async()=>{y(!0);try{const z=await yx(Zr,n,t);await $2(z.user),await Zr.signOut(),V(A("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(z){console.error("Resend error:",z),z.code==="auth/too-many-requests"?V(A("too_many_requests")||"Too many attempts. Please wait.","error"):V(A("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},$=async z=>{z.preventDefault(),o(""),m(!1),d(!0);try{if(!(await yx(Zr,n,t)).user.emailVerified){await Zr.signOut(),m(!0);return}}catch(H){console.error(H);let X=A("login_failed")||"Failed to login.";H.code==="auth/user-not-found"||H.code==="auth/wrong-password"||H.code==="auth/invalid-credential"?X=A("invalid_credentials")||"Invalid email or password.":H.code==="auth/too-many-requests"?X=A("too_many_requests")||"Too many attempts. Try again later.":H.code==="auth/user-disabled"?X="Account disabled. Contact support.":H.code==="auth/network-request-failed"&&(X="Network error. Check your connection."),o(X)}finally{d(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(jr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:A("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:A("login_prompt")}),i&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),h?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(jr,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:A("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:A("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:L,disabled:p,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:p?"Sending...":A("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:$,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:z=>e(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:z=>r(z.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":A("login"),!c&&b.jsx(xI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(kr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:A("register")})]})]})})})}function Bj({user:n,onClose:e,onVerified:t}){const{t:r}=Nn(),[i,o]=q.useState(!1);q.useEffect(()=>{const d=setInterval(async()=>{if(n)try{await n.reload(),n.emailVerified&&(clearInterval(d),t())}catch(h){console.error("Verification check failed",h)}},3e3);return()=>clearInterval(d)},[n,t]);const c=async()=>{o(!0);try{await n.reload(),n.emailVerified&&t()}catch(d){console.error(d)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(ej,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:r("verify_email_desc")||`We sent a confirmation link to ${n?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:r("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:i,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[i?b.jsx(RI,{className:"w-5 h-5 animate-spin"}):b.jsx(q_,{className:"w-5 h-5"}),r("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r("cancel")||"Cancel"})]})]})})}function qj(){const[n,e]=q.useState(""),[t,r]=q.useState(""),[i,o]=q.useState(""),[c,d]=q.useState(""),[h,m]=q.useState(!1),[p,y]=q.useState(!1),[v,w]=q.useState(null),A=bi(),P=pr(),{t:V}=Nn(),L=async z=>{z.preventDefault(),d(""),m(!0);try{const H=await $O(Zr,n,t);await Ky(H.user,{displayName:i}),await $2(H.user),w(H.user),y(!0),m(!1)}catch(H){d(H.message),console.error(H),m(!1)}},$=async()=>{Zr.currentUser&&await Zr.currentUser.reload(),y(!1),P.state?.returnUrl&&P.state?.pendingResult?A(P.state.returnUrl,{replace:!0,state:{restoredResult:P.state.pendingResult,restoredImages:P.state.pendingImages,restoredPlantType:P.state.pendingPlantType}}):A("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[p&&v&&b.jsx(Bj,{user:v,onClose:()=>y(!1),onVerified:$}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(jr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:V("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:V("create_account_desc")||V("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:L,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:i,onChange:z=>o(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:z=>e(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:z=>r(z.target.value)})]}),b.jsxs("button",{type:"submit",disabled:h||p,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h?V("creating_account")||"Creating Account...":V("register"),!h&&b.jsx(Cj,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[V("already_have_account")||"Already have an account?"," "," ",b.jsx(kr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:V("login")})]})]})]})})}var cT;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(cT||(cT={}));var uT;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(uT||(uT={}));var dT;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(dT||(dT={}));const hT=["user","model","function","system"];var fT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(fT||(fT={}));var mT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(mT||(mT={}));var gT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(gT||(gT={}));var pT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(pT||(pT={}));var Qu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Qu||(Qu={}));var yT;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(yT||(yT={}));var _T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(_T||(_T={}));var vT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(vT||(vT={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class zl extends Vn{constructor(e,t){super(e),this.response=t}}class OI extends Vn{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}}class _a extends Vn{}class MI extends Vn{}const Hj="https://generativelanguage.googleapis.com",$j="v1beta",Gj="0.24.1",Kj="genai-js";var Po;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Po||(Po={}));class Yj{constructor(e,t,r,i,o){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||$j;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||Hj}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function Qj(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${Kj}/${Gj}`),e.join(" ")}async function Xj(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",Qj(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new _a(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,o]of r.entries()){if(i==="x-goog-api-key")throw new _a(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new _a(`Header name ${i} can only be set using the apiClient field`);t.append(i,o)}}return t}async function Wj(n,e,t,r,i,o){const c=new Yj(n,e,t,r,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},tL(o)),{method:"POST",headers:await Xj(c),body:i})}}async function Vd(n,e,t,r,i,o={},c=fetch){const{url:d,fetchOptions:h}=await Wj(n,e,t,r,i,o);return Jj(d,h,c)}async function Jj(n,e,t=fetch){let r;try{r=await t(n,e)}catch(i){Zj(i,n)}return r.ok||await eL(r,n),r}function Zj(n,e){let t=n;throw t.name==="AbortError"?(t=new MI(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof OI||n instanceof _a||(t=new Vn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function eL(n,e){let t="",r;try{const i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new OI(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function tL(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function H_(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${aa(n)}`,n);return nL(n)}else if(n.promptFeedback)throw new zl(`Text not available. ${aa(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${aa(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),bT(n)[0]}else if(n.promptFeedback)throw new zl(`Function call not available. ${aa(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${aa(n)}`,n);return bT(n)}else if(n.promptFeedback)throw new zl(`Function call not available. ${aa(n)}`,n)},n}function nL(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function bT(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const rL=[Qu.RECITATION,Qu.SAFETY,Qu.LANGUAGE];function Vf(n){return!!n.finishReason&&rL.includes(n.finishReason)}function aa(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Vf(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function gd(n){return this instanceof gd?(this.v=n,this):new gd(n)}function sL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(v){r[v]&&(i[v]=function(w){return new Promise(function(A,P){o.push([v,w,A,P])>1||d(v,w)})})}function d(v,w){try{h(r[v](w))}catch(A){y(o[0][3],A)}}function h(v){v.value instanceof gd?Promise.resolve(v.value.v).then(m,p):y(o[0][2],v)}function m(v){d("next",v)}function p(v){d("throw",v)}function y(v,w){v(w),o.shift(),o.length&&d(o[0][0],o[0][1])}}const wT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function iL(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=lL(e),[r,i]=t.tee();return{stream:oL(r),response:aL(i)}}async function aL(n){const e=[],t=n.getReader();for(;;){const{done:r,value:i}=await t.read();if(r)return H_(cL(e));e.push(i)}}function oL(n){return sL(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:i}=yield gd(t.read());if(i)break;yield yield gd(H_(r))}})}function lL(n){const e=n.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:c,done:d})=>{if(d){if(i.trim()){r.error(new Vn("Failed to parse stream"));return}r.close();return}i+=c;let h=i.match(wT),m;for(;h;){try{m=JSON.parse(h[1])}catch{r.error(new Vn(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(m),i=i.substring(h[0].length),h=i.match(wT)}return o()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new MI("Request aborted when reading from the stream"):d=new Vn("Error reading from the stream"),d})}}})}function cL(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let i=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=o.citationMetadata,t.candidates[i].groundingMetadata=o.groundingMetadata,t.candidates[i].finishReason=o.finishReason,t.candidates[i].finishMessage=o.finishMessage,t.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[i].content||(t.candidates[i].content={role:o.content.role||"user",parts:[]});const c={};for(const d of o.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[i].content.parts.push(c)}i++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function PI(n,e,t,r){const i=await Vd(e,Po.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return iL(i)}async function VI(n,e,t,r){const o=await(await Vd(e,Po.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:H_(o)}}function jI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function pd(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return uL(e)}function uL(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,i=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Vn("No content is provided for sending chat message.");return r?e:t}function dL(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=n.generateContentRequest!=null;if(n.contents){if(i)throw new _a("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=pd(n);r.contents=[o]}return{generateContentRequest:r}}function xT(n){let e;return n.contents?e=n:e={contents:[pd(n)]},n.systemInstruction&&(e.systemInstruction=jI(n.systemInstruction)),e}function hL(n){return typeof n=="string"||Array.isArray(n)?{content:pd(n)}:n}const ET=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],fL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function mL(n){let e=!1;for(const t of n){const{role:r,parts:i}=t;if(!e&&r!=="user")throw new Vn(`First content should be with role 'user', got ${r}`);if(!hT.includes(r))throw new Vn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(hT)}`);if(!Array.isArray(i))throw new Vn("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of i)for(const h of ET)h in d&&(o[h]+=1);const c=fL[r];for(const d of ET)if(!c.includes(d)&&o[d]>0)throw new Vn(`Content with role '${r}' can't contain '${d}' part`);e=!0}}function TT(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const AT="SILENT_ERROR";class gL{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(mL(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,i,o,c,d,h;await this._sendPromise;const m=pd(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>VI(this._apiKey,this.model,p,y)).then(w=>{var A;if(TT(w.response)){this._history.push(m);const P=Object.assign({parts:[],role:"model"},(A=w.response.candidates)===null||A===void 0?void 0:A[0].content);this._history.push(P)}else{const P=aa(w.response);P&&console.warn(`sendMessage() was unsuccessful. ${P}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var r,i,o,c,d,h;await this._sendPromise;const m=pd(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t),v=PI(this._apiKey,this.model,p,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(AT)}).then(w=>w.response).then(w=>{if(TT(w)){this._history.push(m);const A=Object.assign({},w.candidates[0].content);A.role||(A.role="model"),this._history.push(A)}else{const A=aa(w);A&&console.warn(`sendMessageStream() was unsuccessful. ${A}. Inspect response object for details.`)}}).catch(w=>{w.message!==AT&&console.error(w)}),v}}async function pL(n,e,t,r){return(await Vd(e,Po.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function yL(n,e,t,r){return(await Vd(e,Po.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function _L(n,e,t,r){const i=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Vd(e,Po.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()}class ST{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=jI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const i=xT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return VI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,t={}){var r;const i=xT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return PI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var t;return new gL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=dL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return pL(this.apiKey,this.model,r,i)}async embedContent(e,t={}){const r=hL(e),i=Object.assign(Object.assign({},this._requestOptions),t);return yL(this.apiKey,this.model,r,i)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return _L(this.apiKey,this.model,e,r)}}class vL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ST(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new _a("Cached content must contain a `name` field.");if(!e.model)throw new _a("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const c of i)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===h)continue}throw new _a(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new ST(this.apiKey,o,r)}}async function LI(n,e="tr",t=null){const r=Array.isArray(n)?n:[n],i=3,o=2e3;let c;for(let d=0;d<=i;d++)try{return d>0&&(console.log(`Attempt ${d+1} of ${i+1}...`),await new Promise(h=>setTimeout(h,o))),await bL(r,e,t)}catch(h){if(c=h,!(h.message.includes("503")||h.message.includes("429")||h.message.includes("overloaded")||h.message.includes("Server Error")))throw h;console.warn(`Analysis attempt ${d+1} failed:`,h.message)}throw c}async function bL(n,e,t){let r="";t&&t.trim().length>0&&(r=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const i=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${r}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:i}];n.forEach(d=>{if(!d)return;const h=d.includes(",")?d.split(",")[1]:d;o.push({inline_data:{mime_type:"image/jpeg",data:h}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const d=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){const m=await d.text();throw console.error("Backend Error Response:",m),m.trim().startsWith("<")||m.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${d.status} ${d.statusText}`)}const h=await d.json();if(h.error)throw new Error(h.error.message||"API Connection Error");if(h.plant_name||h.status)return h;if(h.candidates&&h.candidates[0].content){const p=h.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(p)}throw new Error("Invalid response structure from AI")}catch(d){console.warn("Backend analysis failed, attempting client-side fallback...",d);const h="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const p=new vL(h).getGenerativeModel({model:"gemini-2.5-flash"}),v=[i];n.forEach(L=>{if(!L)return;const $=L.includes(",")?L.split(",")[1]:L;v.push({inlineData:{data:$,mimeType:"image/jpeg"}})});const V=(await(await p.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(V)}catch(m){throw console.error("Fallback also failed:",m),new Error(m.message||"AI Diagnosis completely failed.")}}}const mc="analyses";async function UI(n,e,t,r,i=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Pd(Un(He,mc),{userId:n,plantType:e,mainImage:o,macroImage:c,result:r,isPublic:i,status:"active",createdAt:Pr(),nextCheckup:new Date(Date.now()+10080*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function zI(n){try{const e=Ta(Un(He,mc),qo("userId","==",n)),r=(await fc(e)).docs.map(async o=>{const c=o.data();let d=[];try{d=(await fc(Un(He,mc,o.id,"updates"))).docs.map(m=>m.data()).sort((m,p)=>(p.createdAt?.seconds||0)-(m.createdAt?.seconds||0))}catch(h){console.log("No updates found or error",h)}return{id:o.id,...c,updates:d}});return(await Promise.all(r)).sort((o,c)=>{const d=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-d})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function FI(n){try{return await rg(It(He,mc,n)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function BI(n,e){try{const t=It(He,mc,n);await gr(t,{...e,updatedAt:Pr()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function qI(n,e,t){try{let r=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?r=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const i=Pd(Un(He,"posts"),{userId:n,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:r,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:Pr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([i,o]),!0}catch(r){throw console.error("Error creating post:",r),r}}async function HI(n,e,t,r="Gardener",i=null){try{const o=`${t} - ${e.result.disease_name}`,c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return await Pd(Un(He,"posts"),{userId:e.userId,authorName:r,userAvatar:i,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:Pr(),relatedAnalysisId:n}),await BI(n,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function $I(n,e,t){try{return await Pd(Un(He,mc,n,"updates"),{imageUrl:e||null,note:t,createdAt:Pr()}),!0}catch(r){throw console.error("Error adding feedback:",r),r}}async function GI(n){try{const e=It(He,"posts",n),t=await Na(e);if(!t.exists())return!1;const r=t.data();if(r.relatedAnalysisId)try{const i=It(He,"analyses",r.relatedAnalysisId);await gr(i,{isPublic:!1})}catch(i){console.warn("Could not sync analysis status (might be deleted)",i)}return await rg(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function KI(n,e){try{const t=It(He,"posts",n),r=await Na(t);if(!r.exists())return;(r.data().likes||[]).includes(e)?await gr(t,{likes:pI(e)}):await gr(t,{likes:U_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function YI(n,e,t,r){try{const i=It(He,"posts",n),o={userId:e,userName:t,text:r,createdAt:Date.now()};return await gr(i,{comments:U_(o)}),!0}catch(i){throw console.error("Error adding comment:",i),i}}async function QI(n,e){try{const t=It(He,"posts",n);return await gr(t,{...e,updatedAt:Pr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function T0(n,e,t){try{const r=Ta(Un(He,"posts"),qo("userId","==",n)),o=(await fc(r)).docs.map(c=>gr(c.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(r){return console.error("Error syncing user profile to posts:",r),!1}}async function wL(n,e,t,r){try{if(n===e)throw new Error("Cannot start chat with yourself.");const i=[n,e].sort(),o=`${i[0]}_${i[1]}`,c=It(He,"chats",o);return(await Na(c)).exists()?await gr(c,{[`participantData.${n}`]:r}):await b0(c,{participants:[n,e],participantData:{[e]:t,[n]:r},createdAt:Pr(),updatedAt:Pr(),lastMessage:""}),o}catch(i){throw console.error("Error starting chat:",i),i}}const xL=Object.freeze(Object.defineProperty({__proto__:null,addComment:YI,addFeedbackUpdate:$I,createPost:qI,deleteAnalysis:FI,deletePost:GI,getUserAnalyses:zI,saveAnalysis:UI,shareAnalysisToCommunity:HI,startChat:wL,toggleLike:KI,updateAnalysisStatus:BI,updatePost:QI,updateUserPostsName:T0},Symbol.toStringTag,{value:"Module"}));function EL({result:n,onReset:e}){const{t}=Nn();return n?n.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(x0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:n.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:n.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[n.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(F_,{className:"w-5 h-5"}),b.jsx("span",{children:"Urgency"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${n.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(jr,{className:"w-5 h-5"}),b.jsx("span",{children:"Spread Risk"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),n.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(x0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(n.is_treatable===!1?n.preventive_measures:n.treatment_steps)?.map((r,i)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(q_,{className:`w-6 h-6 flex-shrink-0 ${n.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:r})]},i))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:"New Scan"})})]})]}):null}function TL({isOpen:n,onClose:e,onCapture:t}){const r=q.useRef(null),i=q.useRef(null),[o,c]=q.useState(null),[d,h]=q.useState(""),{t:m}=Nn();q.useEffect(()=>(n?p():y(),()=>y()),[n]);const p=async()=>{h("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),r.current&&(r.current.srcObject=w)}catch(w){console.error("Camera Error:",w),h(m("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(r.current&&i.current){const w=r.current,A=i.current;A.width=w.videoWidth,A.height=w.videoHeight,A.getContext("2d").drawImage(w,0,0,A.width,A.height);const V=A.toDataURL("image/jpeg",.9);t(V),e()}};return n?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:m("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Aa,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:d?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(DV,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:d}),b.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:m("retry")||"Retry"})]}):b.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!d&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:i,className:"hidden"})]})}):null}function AL(){const{t:n,i18n:e}=Nn(),{currentUser:t}=rs(),r=bi(),i=pr(),{addToast:o}=Ho(),c=q.useRef(null),[d,h]=q.useState("landing"),[m,p]=q.useState(""),[y,v]=q.useState({main:null,macro:null}),[w,A]=q.useState(!1),[P,V]=q.useState(null),[L,$]=q.useState(!1),[z,H]=q.useState(!1);q.useEffect(()=>{i.state?.restoredResult&&(V(i.state.restoredResult),h("result"),i.state?.restoredImages&&(v(i.state.restoredImages),p(i.state.restoredPlantType||"")))},[i.state]);const X=()=>{d==="input_type"&&h("capture_main")},F=()=>{p(""),h("capture_main")},R=()=>{c.current&&(c.current.value="",c.current.click())},T=Z=>{Z&&N(Z),H(!1)},E=async Z=>{const B=Z.target.files?.[0];if(!B)return;const Y=new FileReader;Y.onloadend=()=>{const se=Y.result;N(se)},Y.readAsDataURL(B)},N=async Z=>{d==="capture_main"?(v(B=>({...B,main:Z})),await C(Z)):d==="capture_macro"&&(v(B=>({...B,macro:Z})),await C([y.main,Z]))},C=async(Z,B)=>{A(!0),h("analyzing"),$(!1);try{const Y=await LI(Z,e.language,m);if(Y.status==="needs_details")o(n("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),h("capture_macro");else{if(Y.status==="error")throw new Error(Y.error);V(Y),h("result")}}catch(Y){console.error(Y);let se=Y.message||n("error_diagnosis_failed")||"Diagnosis failed.";se.includes("NOT_PLANT")?se=n("error_not_plant"):(se.includes("503")||se.includes("overloaded"))&&(se=n("error_server_busy")),o(se,"error"),h("capture_main")}finally{A(!1)}},O=async()=>{if(t&&!L)try{const Z=await UI(t.uid,m,y,P);$(!0),o(n("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{r("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:Z}})},500)}catch(Z){console.error("Manual save failed:",Z),o("Failed to save analysis: "+Z.message,"error")}},k=()=>{r("/login",{state:{pendingResult:P,pendingImages:y,pendingPlantType:m,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),p(""),V(null),$(!1),h("input_type"),c.current&&(c.current.value="")},ee=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(wj,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:n("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[n("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:n("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:n("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>h("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(Jl,{className:"w-6 h-6"}),n("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:n("feature_1_title")||"Instant Analysis",desc:n("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:Lj,color:"from-yellow-400 to-orange-500"},{title:n("feature_2_title")||"Smart Interactions",desc:n("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:SV,color:"from-blue-400 to-indigo-500"},{title:n("feature_3_title")||"Verified Treatments",desc:n("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:vj,color:"from-green-400 to-emerald-500"}].map((Z,B)=>{const Y=Z.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${Z.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Y,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:Z.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:Z.desc})]},B)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:n("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(F_,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(aT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:Z=>{Z.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(jr,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),D=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(jr,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:n("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:n("what_plant_question")}),b.jsx("input",{type:"text",value:m,onChange:Z=>p(Z.target.value),placeholder:n("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:X,disabled:!m.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[n("next_step")," ",b.jsx(xI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:F,className:"mt-4 text-gray-500 text-sm hover:underline",children:n("skip")})]}),M=Z=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:Z?"Close-up Photo":n("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>H(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(Jl,{className:"w-8 h-8"}),b.jsx("span",{children:n("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:R,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(SI,{className:"w-6 h-6"}),b.jsx("span",{children:n("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>h("input_type"),className:"mt-6 text-gray-500 underline",children:n("back")})]}),J=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(ya,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:n("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:O,disabled:L,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${L?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:L?b.jsxs(b.Fragment,{children:[b.jsx(q_,{className:"w-6 h-6"}),b.jsx("span",{children:n("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(NI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:P?.is_treatable===!1?n("save_info")||"Bilgiyi Kaydet":n("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[n("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(EL,{result:P,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(aT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:n("login_blur_text")}),b.jsx("button",{onClick:k,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:n("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${d==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:E,className:"hidden"}),b.jsx(TL,{isOpen:z,onClose:()=>H(!1),onCapture:T}),d==="landing"?ee():b.jsxs(b.Fragment,{children:[d!=="result"&&b.jsxs("button",{onClick:()=>h("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",n("back")]}),d==="input_type"&&D(),d==="capture_main"&&M(!1),d==="capture_macro"&&M(!0),d==="analyzing"&&J(),d==="result"&&W()]})]})}const yf=43200,IT=1440,RT=Symbol.for("constructDateFrom");function $_(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&RT in n?n[RT](e):n instanceof Date?new n.constructor(e):new Date(e)}function Sa(n,e){return $_(n,n)}let SL={};function IL(){return SL}function NT(n){const e=Sa(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function G_(n,...e){const t=$_.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function jf(n,e){const t=+Sa(n)-+Sa(e);return t<0?-1:t>0?1:t}function RL(n){return $_(n,Date.now())}function NL(n,e,t){const[r,i]=G_(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),c=r.getMonth()-i.getMonth();return o*12+c}function CL(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function kL(n,e){return+Sa(n)-+Sa(e)}function DL(n,e){const t=Sa(n);return t.setHours(23,59,59,999),t}function OL(n,e){const t=Sa(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ML(n,e){const t=Sa(n);return+DL(t)==+OL(t)}function PL(n,e,t){const[r,i,o]=G_(t?.in,n,n,e),c=jf(i,o),d=Math.abs(NL(i,o));if(d<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-c*d);let h=jf(i,o)===-c;ML(r)&&d===1&&jf(r,o)===1&&(h=!1);const m=c*(d-+h);return m===0?0:m}function VL(n,e,t){const r=kL(n,e)/1e3;return CL(t?.roundingMethod)(r)}const jL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LL=(n,e,t)=>{let r;const i=jL[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Zl(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const UL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BL={date:Zl({formats:UL,defaultWidth:"full"}),time:Zl({formats:zL,defaultWidth:"full"}),dateTime:Zl({formats:FL,defaultWidth:"full"})},qL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HL=(n,e,t,r)=>qL[n];function As(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,d=t?.width?String(t.width):c;i=n.formattingValues[d]||n.formattingValues[c]}else{const c=n.defaultWidth,d=t?.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const $L={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WL=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},JL={ordinalNumber:WL,era:As({values:$L,defaultWidth:"wide"}),quarter:As({values:GL,defaultWidth:"wide",argumentCallback:n=>n-1}),month:As({values:KL,defaultWidth:"wide"}),day:As({values:YL,defaultWidth:"wide"}),dayPeriod:As({values:QL,defaultWidth:"wide",formattingValues:XL,defaultFormattingWidth:"wide"})};function Ss(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],d=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(d)?eU(d,y=>y.test(c)):ZL(d,y=>y.test(c));let m;m=n.valueCallback?n.valueCallback(h):h,m=t.valueCallback?t.valueCallback(m):m;const p=e.slice(c.length);return{value:m,rest:p}}}function ZL(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function eU(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function XI(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}const tU=/^(\d+)(th|st|nd|rd)?/i,nU=/\d+/i,rU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sU={any:[/^b/i,/^(a|c)/i]},iU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aU={any:[/1/i,/2/i,/3/i,/4/i]},oU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fU={ordinalNumber:XI({matchPattern:tU,parsePattern:nU,valueCallback:n=>parseInt(n,10)}),era:Ss({matchPatterns:rU,defaultMatchWidth:"wide",parsePatterns:sU,defaultParseWidth:"any"}),quarter:Ss({matchPatterns:iU,defaultMatchWidth:"wide",parsePatterns:aU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ss({matchPatterns:oU,defaultMatchWidth:"wide",parsePatterns:lU,defaultParseWidth:"any"}),day:Ss({matchPatterns:cU,defaultMatchWidth:"wide",parsePatterns:uU,defaultParseWidth:"any"}),dayPeriod:Ss({matchPatterns:dU,defaultMatchWidth:"any",parsePatterns:hU,defaultParseWidth:"any"})},K_={code:"en-US",formatDistance:LL,formatLong:BL,formatRelative:HL,localize:JL,match:fU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mU(n,e,t){const r=IL(),i=t?.locale??r.locale??K_,o=2520,c=jf(n,e);if(isNaN(c))throw new RangeError("Invalid time value");const d=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[h,m]=G_(t?.in,...c>0?[e,n]:[n,e]),p=VL(m,h),y=(NT(m)-NT(h))/1e3,v=Math.round((p-y)/60);let w;if(v<2)return t?.includeSeconds?p<5?i.formatDistance("lessThanXSeconds",5,d):p<10?i.formatDistance("lessThanXSeconds",10,d):p<20?i.formatDistance("lessThanXSeconds",20,d):p<40?i.formatDistance("halfAMinute",0,d):p<60?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",1,d):v===0?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",v,d);if(v<45)return i.formatDistance("xMinutes",v,d);if(v<90)return i.formatDistance("aboutXHours",1,d);if(v<IT){const A=Math.round(v/60);return i.formatDistance("aboutXHours",A,d)}else{if(v<o)return i.formatDistance("xDays",1,d);if(v<yf){const A=Math.round(v/IT);return i.formatDistance("xDays",A,d)}else if(v<yf*2)return w=Math.round(v/yf),i.formatDistance("aboutXMonths",w,d)}if(w=PL(m,h),w<12){const A=Math.round(v/yf);return i.formatDistance("xMonths",A,d)}else{const A=w%12,P=Math.trunc(w/12);return A<3?i.formatDistance("aboutXYears",P,d):A<9?i.formatDistance("overXYears",P,d):i.formatDistance("almostXYears",P+1,d)}}function ag(n,e){return mU(n,RL(n),e)}const gU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},pU=(n,e,t)=>{let r;const i=gU[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?r+" sonra":r+" nce":r},yU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},_U={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},vU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bU={date:Zl({formats:yU,defaultWidth:"full"}),time:Zl({formats:_U,defaultWidth:"full"}),dateTime:Zl({formats:vU,defaultWidth:"full"})},wU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},xU=(n,e,t,r)=>wU[n],EU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},TU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},AU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},SU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},IU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},RU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},NU=(n,e)=>Number(n)+".",CU={ordinalNumber:NU,era:As({values:EU,defaultWidth:"wide"}),quarter:As({values:TU,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:As({values:AU,defaultWidth:"wide"}),day:As({values:SU,defaultWidth:"wide"}),dayPeriod:As({values:IU,defaultWidth:"wide",formattingValues:RU,defaultFormattingWidth:"wide"})},kU=/^(\d+)(\.)?/i,DU=/\d+/i,OU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},MU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},PU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},VU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},jU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},LU={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},UU={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},zU={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},FU={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},BU={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},qU={ordinalNumber:XI({matchPattern:kU,parsePattern:DU,valueCallback:function(n){return parseInt(n,10)}}),era:Ss({matchPatterns:OU,defaultMatchWidth:"wide",parsePatterns:MU,defaultParseWidth:"any"}),quarter:Ss({matchPatterns:PU,defaultMatchWidth:"wide",parsePatterns:VU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ss({matchPatterns:jU,defaultMatchWidth:"wide",parsePatterns:LU,defaultParseWidth:"any"}),day:Ss({matchPatterns:UU,defaultMatchWidth:"wide",parsePatterns:zU,defaultParseWidth:"any"}),dayPeriod:Ss({matchPatterns:FU,defaultMatchWidth:"any",parsePatterns:BU,defaultParseWidth:"any"})},WI={code:"tr",formatDistance:pU,formatLong:bU,formatRelative:xU,localize:CU,match:qU,options:{weekStartsOn:1,firstWeekContainsDate:1}};function JI({post:n,onUserClick:e,onViewAnalysis:t}){const{t:r,i18n:i}=Nn(),{currentUser:o}=rs(),c=i.language==="tr"?WI:K_,[d,h]=q.useState(""),[m,p]=q.useState(!1),[y,v]=q.useState(!1),[w,A]=q.useState(!1),[P,V]=q.useState(n?.content||""),L=async()=>{try{await QI(n.id,{content:P}),A(!1)}catch{alert("Failed to update post")}};if(!n)return null;const $=o?.uid===n.userId,z=n.likes&&o&&n.likes.includes(o.uid),H=n.likes?n.likes.length:0,X=n.comments?n.comments.length:0,[F,R]=q.useState("");q.useEffect(()=>{const C=()=>{if(!n.createdAt?.seconds){R(r("just_now")||"Just now");return}const k=new Date(n.createdAt.seconds*1e3);(new Date-k)/(1e3*60*60)>24?R(k.toLocaleDateString(i.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):R(ag(k,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const O=setInterval(C,6e4);return()=>clearInterval(O)},[n.createdAt,c,r,i.language]),n.createdAt?.seconds&&new Date(n.createdAt.seconds*1e3);const T=async()=>{if(!(!o||y)){v(!0);try{await KI(n.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},E=async()=>{if(window.confirm(r("confirm_delete_post")||"Delete this post?"))try{await GI(n.id)}catch{alert("Failed to delete post")}},N=async C=>{if(C.preventDefault(),!(!d.trim()||!o))try{await YI(n.id,o.uid,o.displayName||"User",d),h("")}catch(O){console.error(O),alert("Failed to post comment")}};return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[$&&b.jsx("button",{onClick:E,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:r("delete")||"Delete",children:b.jsx(ig,{className:"w-4 h-4"})}),!n.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(n.userId),children:[b.jsx("img",{src:n.userAvatar||`https://ui-avatars.com/api/?name=${n.authorName||"Gardener"}&background=random`,alt:n.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:n.authorName||r("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:F})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${n.hideAuthor?"pt-4":""}`,children:[n.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:n.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:n.content}),n.plantType&&n.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:r(n.plantType)||n.plantType}),n.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(n.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),r("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),n.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(n.image,"_blank"),children:[b.jsx("img",{src:n.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(fd,{className:"w-3 h-3"})," ",b.jsxs("span",{children:[20+(n.likes?.length||0)*5," Seen"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:T,className:`flex items-center gap-1.5 transition-colors ${z?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(TI,{className:`w-5 h-5 ${z?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:H||r("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>p(!m),children:[b.jsx(fd,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:X||r("comment")})]}),$&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>A(!0),children:[b.jsx(II,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:r("edit")})]})]}),b.jsx("button",{className:"text-gray-500 hover:text-green-600 transition-colors",children:b.jsx(w0,{className:"w-5 h-5"})})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:r("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:P,onChange:C=>V(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:r("cancel")}),b.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:r("save")})]})]})}),m&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[n.comments&&n.comments.map((C,O)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},O)),(!n.comments||n.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:r("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:N,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:d,onChange:C=>h(C.target.value),placeholder:r("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!d.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(md,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:r("login_to_comment")})]})]})}const Lf=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function HU(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function ZI(n,e){return new Promise((function(t,r){let i;return $U(n).then((function(o){try{return i=o,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}}),r)}))}const $U=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:i}})=>{const o=new DataView(i);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const d=o.getUint16(c);if(d===65498)break;const h=o.getUint16(c+2);if(d===65505&&o.getUint32(c+4)===1165519206){const m=c+10;let p;switch(o.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(m+2,p)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(m+4,p),v=m+y+2+12*o.getUint16(m+y,p);for(let w=m+y+2;w<v;w+=12)if(o.getUint16(w,p)==274){if(o.getUint16(w+2,p)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,p)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,p);break}return e(i.slice(c,c+2+h))}c+=2+h}return e(new Blob)})),r.readAsArrayBuffer(n)}));var ym={},GU={get exports(){return ym},set exports(n){ym=n}};(function(n){var e,t,r={};GU.exports=r,r.parse=function(i,o){for(var c=r.bin.readUshort,d=r.bin.readUint,h=0,m={},p=new Uint8Array(i),y=p.length-4;d(p,y)!=101010256;)y--;h=y,h+=4;var v=c(p,h+=4);c(p,h+=2);var w=d(p,h+=2),A=d(p,h+=4);h+=4,h=A;for(var P=0;P<v;P++){d(p,h),h+=4,h+=4,h+=4,d(p,h+=4),w=d(p,h+=4);var V=d(p,h+=4),L=c(p,h+=4),$=c(p,h+2),z=c(p,h+4);h+=6;var H=d(p,h+=8);h+=4,h+=L+$+z,r._readLocal(p,H,m,w,V,o)}return m},r._readLocal=function(i,o,c,d,h,m){var p=r.bin.readUshort,y=r.bin.readUint;y(i,o),p(i,o+=4),p(i,o+=2);var v=p(i,o+=2);y(i,o+=2),y(i,o+=4),o+=4;var w=p(i,o+=8),A=p(i,o+=2);o+=2;var P=r.bin.readUTF8(i,o,w);if(o+=w,o+=A,m)c[P]={size:h,csize:d};else{var V=new Uint8Array(i.buffer,o);if(v==0)c[P]=new Uint8Array(V.buffer.slice(o,o+d));else{if(v!=8)throw"unknown compression method: "+v;var L=new Uint8Array(h);r.inflateRaw(V,L),c[P]=L}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var c=0,d=new Uint8Array(50+Math.floor(1.1*i.length));d[c]=120,d[c+1]=156,c+=2,c=r.F.deflateRaw(i,d,c,o.level);var h=r.adler(i,0,i.length);return d[c+0]=h>>>24&255,d[c+1]=h>>>16&255,d[c+2]=h>>>8&255,d[c+3]=h>>>0&255,new Uint8Array(d.buffer,0,c+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),d=r.F.deflateRaw(i,c,d,o.level);return new Uint8Array(c.buffer,0,d)},r.encode=function(i,o){o==null&&(o=!1);var c=0,d=r.bin.writeUint,h=r.bin.writeUshort,m={};for(var p in i){var y=!r._noNeed(p)&&!o,v=i[p],w=r.crc.crc(v,0,v.length);m[p]={cpr:y,usize:v.length,crc:w,file:y?r.deflateRaw(v):v}}for(var p in m)c+=m[p].file.length+30+46+2*r.bin.sizeUTF8(p);c+=22;var A=new Uint8Array(c),P=0,V=[];for(var p in m){var L=m[p];V.push(P),P=r._writeHeader(A,P,p,L,0)}var $=0,z=P;for(var p in m)L=m[p],V.push(P),P=r._writeHeader(A,P,p,L,1,V[$++]);var H=P-z;return d(A,P,101010256),P+=4,h(A,P+=4,$),h(A,P+=2,$),d(A,P+=2,H),d(A,P+=4,z),P+=4,P+=2,A.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,c,d,h,m){var p=r.bin.writeUint,y=r.bin.writeUshort,v=d.file;return p(i,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),y(i,o,20),y(i,o+=2,0),y(i,o+=2,d.cpr?8:0),p(i,o+=2,0),p(i,o+=4,d.crc),p(i,o+=4,v.length),p(i,o+=4,d.usize),y(i,o+=4,r.bin.sizeUTF8(c)),y(i,o+=2,0),o+=2,h==1&&(o+=2,o+=2,p(i,o+=6,m),o+=4),o+=r.bin.writeUTF8(i,o,c),h==0&&(i.set(v,o),o+=v.length),o},r.crc={table:(function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var c=o,d=0;d<8;d++)1&c?c=3988292384^c>>>1:c>>>=1;i[o]=c}return i})(),update:function(i,o,c,d){for(var h=0;h<d;h++)i=r.crc.table[255&(i^o[c+h])]^i>>>8;return i},crc:function(i,o,c){return 4294967295^r.crc.update(4294967295,i,o,c)}},r.adler=function(i,o,c){for(var d=1,h=0,m=o,p=o+c;m<p;){for(var y=Math.min(m+5552,p);m<y;)h+=d+=i[m++];d%=65521,h%=65521}return h<<16|d},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255,i[o+2]=c>>16&255,i[o+3]=c>>24&255},readASCII:function(i,o,c){for(var d="",h=0;h<c;h++)d+=String.fromCharCode(i[o+h]);return d},writeASCII:function(i,o,c){for(var d=0;d<c.length;d++)i[o+d]=c.charCodeAt(d)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,c){for(var d,h="",m=0;m<c;m++)h+="%"+r.bin.pad(i[o+m].toString(16));try{d=decodeURIComponent(h)}catch{return r.bin.readASCII(i,o,c)}return d},writeUTF8:function(i,o,c){for(var d=c.length,h=0,m=0;m<d;m++){var p=c.charCodeAt(m);if((4294967168&p)==0)i[o+h]=p,h++;else if((4294965248&p)==0)i[o+h]=192|p>>6,i[o+h+1]=128|p>>0&63,h+=2;else if((4294901760&p)==0)i[o+h]=224|p>>12,i[o+h+1]=128|p>>6&63,i[o+h+2]=128|p>>0&63,h+=3;else{if((4292870144&p)!=0)throw"e";i[o+h]=240|p>>18,i[o+h+1]=128|p>>12&63,i[o+h+2]=128|p>>6&63,i[o+h+3]=128|p>>0&63,h+=4}}return h},sizeUTF8:function(i){for(var o=i.length,c=0,d=0;d<o;d++){var h=i.charCodeAt(d);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(i,o,c,d){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],m=r.F.U,p=r.F._goodIndex;r.F._hash;var y=r.F._putsE,v=0,w=c<<3,A=0,P=i.length;if(d==0){for(;v<P;)y(o,w,v+(C=Math.min(65535,P-v))==P?1:0),w=r.F._copyExact(i,v,C,o,w+8),v+=C;return w>>>3}var V=m.lits,L=m.strt,$=m.prev,z=0,H=0,X=0,F=0,R=0,T=0;for(P>2&&(L[T=r.F._hash(i,0)]=0),v=0;v<P;v++){if(R=T,v+1<P-2){T=r.F._hash(i,v+1);var E=v+1&32767;$[E]=L[T],L[T]=E}if(A<=v){(z>14e3||H>26697)&&P-v>100&&(A<v&&(V[z]=v-A,z+=2,A=v),w=r.F._writeBlock(v==P-1||A==P?1:0,V,z,F,i,X,v-X,o,w),z=H=F=0,X=v);var N=0;v<P-2&&(N=r.F._bestMatch(i,v,$,R,Math.min(h[2],P-v),h[3]));var C=N>>>16,O=65535&N;if(N!=0){O=65535&N;var k=p(C=N>>>16,m.of0);m.lhst[257+k]++;var G=p(O,m.df0);m.dhst[G]++,F+=m.exb[k]+m.dxb[G],V[z]=C<<23|v-A,V[z+1]=O<<16|k<<8|G,z+=2,A=v+C}else m.lhst[i[v]]++;H++}}for(X==v&&i.length!=0||(A<v&&(V[z]=v-A,z+=2,A=v),w=r.F._writeBlock(1,V,z,F,i,X,v-X,o,w),z=0,H=0,z=H=F=0,X=v);(7&w)!=0;)w++;return w>>>3},r.F._bestMatch=function(i,o,c,d,h,m){var p=32767&o,y=c[p],v=p-y+32768&32767;if(y==p||d!=r.F._hash(i,o-v))return 0;for(var w=0,A=0,P=Math.min(32767,o);v<=P&&--m!=0&&y!=p;){if(w==0||i[o+w]==i[o+w-v]){var V=r.F._howLong(i,o,v);if(V>w){if(A=v,(w=V)>=h)break;v+2<V&&(V=v+2);for(var L=0,$=0;$<V-2;$++){var z=o-v+$+32768&32767,H=z-c[z]+32768&32767;H>L&&(L=H,y=z)}}}v+=(p=y)-(y=c[p])+32768&32767}return w<<16|A},r.F._howLong=function(i,o,c){if(i[o]!=i[o-c]||i[o+1]!=i[o+1-c]||i[o+2]!=i[o+2-c])return 0;var d=o,h=Math.min(i.length,o+258);for(o+=3;o<h&&i[o]==i[o-c];)o++;return o-d},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,c,d,h,m,p,y,v){var w,A,P,V,L,$,z,H,X,F=r.F.U,R=r.F._putsF,T=r.F._putsE;F.lhst[256]++,A=(w=r.F.getTrees())[0],P=w[1],V=w[2],L=w[3],$=w[4],z=w[5],H=w[6],X=w[7];var E=32+((v+3&7)==0?0:8-(v+3&7))+(p<<3),N=d+r.F.contSize(F.fltree,F.lhst)+r.F.contSize(F.fdtree,F.dhst),C=d+r.F.contSize(F.ltree,F.lhst)+r.F.contSize(F.dtree,F.dhst);C+=14+3*z+r.F.contSize(F.itree,F.ihst)+(2*F.ihst[16]+3*F.ihst[17]+7*F.ihst[18]);for(var O=0;O<286;O++)F.lhst[O]=0;for(O=0;O<30;O++)F.dhst[O]=0;for(O=0;O<19;O++)F.ihst[O]=0;var k=E<N&&E<C?0:N<C?1:2;if(R(y,v,i),R(y,v+1,k),v+=3,k==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(h,m,p,y,v)}else{var G,ee;if(k==1&&(G=F.fltree,ee=F.fdtree),k==2){r.F.makeCodes(F.ltree,A),r.F.revCodes(F.ltree,A),r.F.makeCodes(F.dtree,P),r.F.revCodes(F.dtree,P),r.F.makeCodes(F.itree,V),r.F.revCodes(F.itree,V),G=F.ltree,ee=F.dtree,T(y,v,L-257),T(y,v+=5,$-1),T(y,v+=5,z-4),v+=4;for(var D=0;D<z;D++)T(y,v+3*D,F.itree[1+(F.ordr[D]<<1)]);v+=3*z,v=r.F._codeTiny(H,F.itree,y,v),v=r.F._codeTiny(X,F.itree,y,v)}for(var M=m,J=0;J<c;J+=2){for(var W=o[J],Z=W>>>23,B=M+(8388607&W);M<B;)v=r.F._writeLit(h[M++],G,y,v);if(Z!=0){var Y=o[J+1],se=Y>>16,ie=Y>>8&255,ne=255&Y;T(y,v=r.F._writeLit(257+ie,G,y,v),Z-F.of0[ie]),v+=F.exb[ie],R(y,v=r.F._writeLit(ne,ee,y,v),se-F.df0[ne]),v+=F.dxb[ne],M+=Z}}v=r.F._writeLit(256,G,y,v)}return v},r.F._copyExact=function(i,o,c,d,h){var m=h>>>3;return d[m]=c,d[m+1]=c>>>8,d[m+2]=255-d[m],d[m+3]=255-d[m+1],m+=4,d.set(new Uint8Array(i.buffer,o,c),m),h+(c+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),c=r.F._hufTree(i.dhst,i.dtree,15),d=[],h=r.F._lenCodes(i.ltree,d),m=[],p=r.F._lenCodes(i.dtree,m),y=0;y<d.length;y+=2)i.ihst[d[y]]++;for(y=0;y<m.length;y+=2)i.ihst[m[y]]++;for(var v=r.F._hufTree(i.ihst,i.itree,7),w=19;w>4&&i.itree[1+(i.ordr[w-1]<<1)]==0;)w--;return[o,c,v,h,p,w,d,m]},r.F.getSecond=function(i){for(var o=[],c=0;c<i.length;c+=2)o.push(i[c+1]);return o},r.F.nonZero=function(i){for(var o="",c=0;c<i.length;c+=2)i[c+1]!=0&&(o+=(c>>1)+",");return o},r.F.contSize=function(i,o){for(var c=0,d=0;d<o.length;d++)c+=o[d]*i[1+(d<<1)];return c},r.F._codeTiny=function(i,o,c,d){for(var h=0;h<i.length;h+=2){var m=i[h],p=i[h+1];d=r.F._writeLit(m,o,c,d);var y=m==16?2:m==17?3:7;m>15&&(r.F._putsE(c,d,p,y),d+=y)}return d},r.F._lenCodes=function(i,o){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var d=0;d<c;d+=2){var h=i[d+1],m=d+3<c?i[d+3]:-1,p=d+5<c?i[d+5]:-1,y=d==0?-1:i[d-1];if(h==0&&m==h&&p==h){for(var v=d+5;v+2<c&&i[v+2]==h;)v+=2;(w=Math.min(v+1-d>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),d+=2*w-2}else if(h==y&&m==h&&p==h){for(v=d+5;v+2<c&&i[v+2]==h;)v+=2;var w=Math.min(v+1-d>>>1,6);o.push(16,w-3),d+=2*w-2}else o.push(h,0)}return c>>>1},r.F._hufTree=function(i,o,c){var d=[],h=i.length,m=o.length,p=0;for(p=0;p<m;p+=2)o[p]=0,o[p+1]=0;for(p=0;p<h;p++)i[p]!=0&&d.push({lit:p,f:i[p]});var y=d.length,v=d.slice(0);if(y==0)return 0;if(y==1){var w=d[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}d.sort((function(H,X){return H.f-X.f}));var A=d[0],P=d[1],V=0,L=1,$=2;for(d[0]={lit:-1,f:A.f+P.f,l:A,r:P,d:0};L!=y-1;)A=V!=L&&($==y||d[V].f<d[$].f)?d[V++]:d[$++],P=V!=L&&($==y||d[V].f<d[$].f)?d[V++]:d[$++],d[L++]={lit:-1,f:A.f+P.f,l:A,r:P};var z=r.F.setDepth(d[L-1],0);for(z>c&&(r.F.restrictDepth(v,c,z),z=c),p=0;p<y;p++)o[1+(v[p].lit<<1)]=v[p].d;return z},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,c){var d=0,h=1<<c-o,m=0;for(i.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),d=0;d<i.length&&i[d].d>o;d++){var p=i[d].d;i[d].d=o,m+=h-(1<<c-p)}for(m>>>=c-o;m>0;)(p=i[d].d)<o?(i[d].d++,m-=1<<o-p-1):d++;for(;d>=0;d--)i[d].d==o&&m<0&&(i[d].d--,m++);m!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var c=0;return o[16|c]<=i&&(c|=16),o[8|c]<=i&&(c|=8),o[4|c]<=i&&(c|=4),o[2|c]<=i&&(c|=2),o[1|c]<=i&&(c|=1),c},r.F._writeLit=function(i,o,c,d){return r.F._putsF(c,d,o[i<<1]),d+o[1+(i<<1)]},r.F.inflate=function(i,o){var c=Uint8Array;if(i[0]==3&&i[1]==0)return o||new c(0);var d=r.F,h=d._bitsF,m=d._bitsE,p=d._decodeTiny,y=d.makeCodes,v=d.codes2map,w=d._get17,A=d.U,P=o==null;P&&(o=new c(i.length>>>2<<3));for(var V,L,$=0,z=0,H=0,X=0,F=0,R=0,T=0,E=0,N=0;$==0;)if($=h(i,N,1),z=h(i,N+1,2),N+=3,z!=0){if(P&&(o=r.F._check(o,E+(1<<17))),z==1&&(V=A.flmap,L=A.fdmap,R=511,T=31),z==2){H=m(i,N,5)+257,X=m(i,N+5,5)+1,F=m(i,N+10,4)+4,N+=14;for(var C=0;C<38;C+=2)A.itree[C]=0,A.itree[C+1]=0;var O=1;for(C=0;C<F;C++){var k=m(i,N+3*C,3);A.itree[1+(A.ordr[C]<<1)]=k,k>O&&(O=k)}N+=3*F,y(A.itree,O),v(A.itree,O,A.imap),V=A.lmap,L=A.dmap,N=p(A.imap,(1<<O)-1,H+X,i,N,A.ttree);var G=d._copyOut(A.ttree,0,H,A.ltree);R=(1<<G)-1;var ee=d._copyOut(A.ttree,H,X,A.dtree);T=(1<<ee)-1,y(A.ltree,G),v(A.ltree,G,V),y(A.dtree,ee),v(A.dtree,ee,L)}for(;;){var D=V[w(i,N)&R];N+=15&D;var M=D>>>4;if(!(M>>>8))o[E++]=M;else{if(M==256)break;var J=E+M-254;if(M>264){var W=A.ldef[M-257];J=E+(W>>>3)+m(i,N,7&W),N+=7&W}var Z=L[w(i,N)&T];N+=15&Z;var B=Z>>>4,Y=A.ddef[B],se=(Y>>>4)+h(i,N,15&Y);for(N+=15&Y,P&&(o=r.F._check(o,E+(1<<17)));E<J;)o[E]=o[E++-se],o[E]=o[E++-se],o[E]=o[E++-se],o[E]=o[E++-se];E=J}}}else{(7&N)!=0&&(N+=8-(7&N));var ie=4+(N>>>3),ne=i[ie-4]|i[ie-3]<<8;P&&(o=r.F._check(o,E+ne)),o.set(new c(i.buffer,i.byteOffset+ie,ne),E),N=ie+ne<<3,E+=ne}return o.length==E?o:o.slice(0,E)},r.F._check=function(i,o){var c=i.length;if(o<=c)return i;var d=new Uint8Array(Math.max(c<<1,o));return d.set(i,0),d},r.F._decodeTiny=function(i,o,c,d,h,m){for(var p=r.F._bitsE,y=r.F._get17,v=0;v<c;){var w=i[y(d,h)&o];h+=15&w;var A=w>>>4;if(A<=15)m[v]=A,v++;else{var P=0,V=0;A==16?(V=3+p(d,h,2),h+=2,P=m[v-1]):A==17?(V=3+p(d,h,3),h+=3):A==18&&(V=11+p(d,h,7),h+=7);for(var L=v+V;v<L;)m[v]=P,v++}}return h},r.F._copyOut=function(i,o,c,d){for(var h=0,m=0,p=d.length>>>1;m<c;){var y=i[m+o];d[m<<1]=0,d[1+(m<<1)]=y,y>h&&(h=y),m++}for(;m<p;)d[m<<1]=0,d[1+(m<<1)]=0,m++;return h},r.F.makeCodes=function(i,o){for(var c,d,h,m,p=r.F.U,y=i.length,v=p.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[i[w]]++;var A=p.next_code;for(c=0,v[0]=0,d=1;d<=o;d++)c=c+v[d-1]<<1,A[d]=c;for(h=0;h<y;h+=2)(m=i[h+1])!=0&&(i[h]=A[m],A[m]++)},r.F.codes2map=function(i,o,c){for(var d=i.length,h=r.F.U.rev15,m=0;m<d;m+=2)if(i[m+1]!=0)for(var p=m>>1,y=i[m+1],v=p<<4|y,w=o-y,A=i[m]<<w,P=A+(1<<w);A!=P;)c[h[A]>>>15-o]=v,A++},r.F.revCodes=function(i,o){for(var c=r.F.U.rev15,d=15-o,h=0;h<i.length;h+=2){var m=i[h]<<o-i[h+1];i[h]=c[m]>>>d}},r.F._putsE=function(i,o,c){c<<=7&o;var d=o>>>3;i[d]|=c,i[d+1]|=c>>>8},r.F._putsF=function(i,o,c){c<<=7&o;var d=o>>>3;i[d]|=c,i[d+1]|=c>>>8,i[d+2]|=c>>>16},r.F._bitsE=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},r.F._bitsF=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=r.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[o]=(c>>>16|c<<16)>>>17}function d(h,m,p){for(;m--!=0;)h.push(0,p)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];d(i.fltree,144,8),d(i.fltree,112,9),d(i.fltree,24,7),d(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),d(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),d(i.itree,19,0),d(i.ltree,286,0),d(i.dtree,30,0),d(i.ttree,320,0)})()})();var KU=HU({__proto__:null,default:ym},[ym]);const Qr=(function(){var n={nextZero(p,y){for(;p[y]!=0;)y++;return y},readUshort:(p,y)=>p[y]<<8|p[y+1],writeUshort(p,y,v){p[y]=v>>8&255,p[y+1]=255&v},readUint:(p,y)=>16777216*p[y]+(p[y+1]<<16|p[y+2]<<8|p[y+3]),writeUint(p,y,v){p[y]=v>>24&255,p[y+1]=v>>16&255,p[y+2]=v>>8&255,p[y+3]=255&v},readASCII(p,y,v){let w="";for(let A=0;A<v;A++)w+=String.fromCharCode(p[y+A]);return w},writeASCII(p,y,v){for(let w=0;w<v.length;w++)p[y+w]=v.charCodeAt(w)},readBytes(p,y,v){const w=[];for(let A=0;A<v;A++)w.push(p[y+A]);return w},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,y,v){let w,A="";for(let P=0;P<v;P++)A+=`%${n.pad(p[y+P].toString(16))}`;try{w=decodeURIComponent(A)}catch{return n.readASCII(p,y,v)}return w}};function e(p,y,v,w){const A=y*v,P=o(w),V=Math.ceil(y*P/8),L=new Uint8Array(4*A),$=new Uint32Array(L.buffer),{ctype:z}=w,{depth:H}=w,X=n.readUshort;if(z==6){const W=A<<2;if(H==8)for(var F=0;F<W;F+=4)L[F]=p[F],L[F+1]=p[F+1],L[F+2]=p[F+2],L[F+3]=p[F+3];if(H==16)for(F=0;F<W;F++)L[F]=p[F<<1]}else if(z==2){const W=w.tabs.tRNS;if(W==null){if(H==8)for(F=0;F<A;F++){var R=3*F;$[F]=255<<24|p[R+2]<<16|p[R+1]<<8|p[R]}if(H==16)for(F=0;F<A;F++)R=6*F,$[F]=255<<24|p[R+4]<<16|p[R+2]<<8|p[R]}else{var T=W[0];const Z=W[1],B=W[2];if(H==8)for(F=0;F<A;F++){var E=F<<2;R=3*F,$[F]=255<<24|p[R+2]<<16|p[R+1]<<8|p[R],p[R]==T&&p[R+1]==Z&&p[R+2]==B&&(L[E+3]=0)}if(H==16)for(F=0;F<A;F++)E=F<<2,R=6*F,$[F]=255<<24|p[R+4]<<16|p[R+2]<<8|p[R],X(p,R)==T&&X(p,R+2)==Z&&X(p,R+4)==B&&(L[E+3]=0)}}else if(z==3){const W=w.tabs.PLTE,Z=w.tabs.tRNS,B=Z?Z.length:0;if(H==1)for(var N=0;N<v;N++){var C=N*V,O=N*y;for(F=0;F<y;F++){E=O+F<<2;var k=3*(G=p[C+(F>>3)]>>7-((7&F)<<0)&1);L[E]=W[k],L[E+1]=W[k+1],L[E+2]=W[k+2],L[E+3]=G<B?Z[G]:255}}if(H==2)for(N=0;N<v;N++)for(C=N*V,O=N*y,F=0;F<y;F++)E=O+F<<2,k=3*(G=p[C+(F>>2)]>>6-((3&F)<<1)&3),L[E]=W[k],L[E+1]=W[k+1],L[E+2]=W[k+2],L[E+3]=G<B?Z[G]:255;if(H==4)for(N=0;N<v;N++)for(C=N*V,O=N*y,F=0;F<y;F++)E=O+F<<2,k=3*(G=p[C+(F>>1)]>>4-((1&F)<<2)&15),L[E]=W[k],L[E+1]=W[k+1],L[E+2]=W[k+2],L[E+3]=G<B?Z[G]:255;if(H==8)for(F=0;F<A;F++){var G;E=F<<2,k=3*(G=p[F]),L[E]=W[k],L[E+1]=W[k+1],L[E+2]=W[k+2],L[E+3]=G<B?Z[G]:255}}else if(z==4){if(H==8)for(F=0;F<A;F++){E=F<<2;var ee=p[D=F<<1];L[E]=ee,L[E+1]=ee,L[E+2]=ee,L[E+3]=p[D+1]}if(H==16)for(F=0;F<A;F++){var D;E=F<<2,ee=p[D=F<<2],L[E]=ee,L[E+1]=ee,L[E+2]=ee,L[E+3]=p[D+2]}}else if(z==0)for(T=w.tabs.tRNS?w.tabs.tRNS:-1,N=0;N<v;N++){const W=N*V,Z=N*y;if(H==1)for(var M=0;M<y;M++){var J=(ee=255*(p[W+(M>>>3)]>>>7-(7&M)&1))==255*T?0:255;$[Z+M]=J<<24|ee<<16|ee<<8|ee}else if(H==2)for(M=0;M<y;M++)J=(ee=85*(p[W+(M>>>2)]>>>6-((3&M)<<1)&3))==85*T?0:255,$[Z+M]=J<<24|ee<<16|ee<<8|ee;else if(H==4)for(M=0;M<y;M++)J=(ee=17*(p[W+(M>>>1)]>>>4-((1&M)<<2)&15))==17*T?0:255,$[Z+M]=J<<24|ee<<16|ee<<8|ee;else if(H==8)for(M=0;M<y;M++)J=(ee=p[W+M])==T?0:255,$[Z+M]=J<<24|ee<<16|ee<<8|ee;else if(H==16)for(M=0;M<y;M++)ee=p[W+(M<<1)],J=X(p,W+(M<<1))==T?0:255,$[Z+M]=J<<24|ee<<16|ee<<8|ee}return L}function t(p,y,v,w){const A=o(p),P=Math.ceil(v*A/8),V=new Uint8Array((P+1+p.interlace)*w);return y=p.tabs.CgBI?i(y,V):r(y,V),p.interlace==0?y=c(y,p,0,v,w):p.interlace==1&&(y=(function($,z){const H=z.width,X=z.height,F=o(z),R=F>>3,T=Math.ceil(H*F/8),E=new Uint8Array(X*T);let N=0;const C=[0,0,4,0,2,0,1],O=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let ee=0;for(;ee<7;){const M=k[ee],J=G[ee];let W=0,Z=0,B=C[ee];for(;B<X;)B+=M,Z++;let Y=O[ee];for(;Y<H;)Y+=J,W++;const se=Math.ceil(W*F/8);c($,z,N,W,Z);let ie=0,ne=C[ee];for(;ne<X;){let ye=O[ee],Ae=N+ie*se<<3;for(;ye<H;){var D;if(F==1&&(D=(D=$[Ae>>3])>>7-(7&Ae)&1,E[ne*T+(ye>>3)]|=D<<7-((7&ye)<<0)),F==2&&(D=(D=$[Ae>>3])>>6-(7&Ae)&3,E[ne*T+(ye>>2)]|=D<<6-((3&ye)<<1)),F==4&&(D=(D=$[Ae>>3])>>4-(7&Ae)&15,E[ne*T+(ye>>1)]|=D<<4-((1&ye)<<2)),F>=8){const Me=ne*T+ye*R;for(let Re=0;Re<R;Re++)E[Me+Re]=$[(Ae>>3)+Re]}Ae+=F,ye+=J}ie++,ne+=M}W*Z!=0&&(N+=Z*(1+se)),ee+=1}return E})(y,p)),y}function r(p,y){return i(new Uint8Array(p.buffer,2,p.length-6),y)}var i=(function(){const p={H:{}};return p.H.N=function(y,v){const w=Uint8Array;let A,P,V=0,L=0,$=0,z=0,H=0,X=0,F=0,R=0,T=0;if(y[0]==3&&y[1]==0)return v||new w(0);const E=p.H,N=E.b,C=E.e,O=E.R,k=E.n,G=E.A,ee=E.Z,D=E.m,M=v==null;for(M&&(v=new w(y.length>>>2<<5));V==0;)if(V=N(y,T,1),L=N(y,T+1,2),T+=3,L!=0){if(M&&(v=p.H.W(v,R+(1<<17))),L==1&&(A=D.J,P=D.h,X=511,F=31),L==2){$=C(y,T,5)+257,z=C(y,T+5,5)+1,H=C(y,T+10,4)+4,T+=14;let W=1;for(var J=0;J<38;J+=2)D.Q[J]=0,D.Q[J+1]=0;for(J=0;J<H;J++){const Y=C(y,T+3*J,3);D.Q[1+(D.X[J]<<1)]=Y,Y>W&&(W=Y)}T+=3*H,k(D.Q,W),G(D.Q,W,D.u),A=D.w,P=D.d,T=O(D.u,(1<<W)-1,$+z,y,T,D.v);const Z=E.V(D.v,0,$,D.C);X=(1<<Z)-1;const B=E.V(D.v,$,z,D.D);F=(1<<B)-1,k(D.C,Z),G(D.C,Z,A),k(D.D,B),G(D.D,B,P)}for(;;){const W=A[ee(y,T)&X];T+=15&W;const Z=W>>>4;if(!(Z>>>8))v[R++]=Z;else{if(Z==256)break;{let B=R+Z-254;if(Z>264){const ye=D.q[Z-257];B=R+(ye>>>3)+C(y,T,7&ye),T+=7&ye}const Y=P[ee(y,T)&F];T+=15&Y;const se=Y>>>4,ie=D.c[se],ne=(ie>>>4)+N(y,T,15&ie);for(T+=15&ie;R<B;)v[R]=v[R++-ne],v[R]=v[R++-ne],v[R]=v[R++-ne],v[R]=v[R++-ne];R=B}}}}else{(7&T)!=0&&(T+=8-(7&T));const W=4+(T>>>3),Z=y[W-4]|y[W-3]<<8;M&&(v=p.H.W(v,R+Z)),v.set(new w(y.buffer,y.byteOffset+W,Z),R),T=W+Z<<3,R+=Z}return v.length==R?v:v.slice(0,R)},p.H.W=function(y,v){const w=y.length;if(v<=w)return y;const A=new Uint8Array(w<<1);return A.set(y,0),A},p.H.R=function(y,v,w,A,P,V){const L=p.H.e,$=p.H.Z;let z=0;for(;z<w;){const H=y[$(A,P)&v];P+=15&H;const X=H>>>4;if(X<=15)V[z]=X,z++;else{let F=0,R=0;X==16?(R=3+L(A,P,2),P+=2,F=V[z-1]):X==17?(R=3+L(A,P,3),P+=3):X==18&&(R=11+L(A,P,7),P+=7);const T=z+R;for(;z<T;)V[z]=F,z++}}return P},p.H.V=function(y,v,w,A){let P=0,V=0;const L=A.length>>>1;for(;V<w;){const $=y[V+v];A[V<<1]=0,A[1+(V<<1)]=$,$>P&&(P=$),V++}for(;V<L;)A[V<<1]=0,A[1+(V<<1)]=0,V++;return P},p.H.n=function(y,v){const w=p.H.m,A=y.length;let P,V,L,$;const z=w.j;for(var H=0;H<=v;H++)z[H]=0;for(H=1;H<A;H+=2)z[y[H]]++;const X=w.K;for(P=0,z[0]=0,V=1;V<=v;V++)P=P+z[V-1]<<1,X[V]=P;for(L=0;L<A;L+=2)$=y[L+1],$!=0&&(y[L]=X[$],X[$]++)},p.H.A=function(y,v,w){const A=y.length,P=p.H.m.r;for(let V=0;V<A;V+=2)if(y[V+1]!=0){const L=V>>1,$=y[V+1],z=L<<4|$,H=v-$;let X=y[V]<<H;const F=X+(1<<H);for(;X!=F;)w[P[X]>>>15-v]=z,X++}},p.H.l=function(y,v){const w=p.H.m.r,A=15-v;for(let P=0;P<y.length;P+=2){const V=y[P]<<v-y[P+1];y[P]=w[V]>>>A}},p.H.M=function(y,v,w){w<<=7&v;const A=v>>>3;y[A]|=w,y[A+1]|=w>>>8},p.H.I=function(y,v,w){w<<=7&v;const A=v>>>3;y[A]|=w,y[A+1]|=w>>>8,y[A+2]|=w>>>16},p.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},p.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},p.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},p.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},p.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=p.H.m;for(var v=0;v<32768;v++){let A=v;A=(2863311530&A)>>>1|(1431655765&A)<<1,A=(3435973836&A)>>>2|(858993459&A)<<2,A=(4042322160&A)>>>4|(252645135&A)<<4,A=(4278255360&A)>>>8|(16711935&A)<<8,y.r[v]=(A>>>16|A<<16)>>>17}function w(A,P,V){for(;P--!=0;)A.push(0,V)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),p.H.n(y._,9),p.H.A(y._,9,y.J),p.H.l(y._,9),w(y.$,32,5),p.H.n(y.$,5),p.H.A(y.$,5,y.h),p.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),p.H.N})();function o(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function c(p,y,v,w,A){let P=o(y);const V=Math.ceil(w*P/8);let L,$;P=Math.ceil(P/8);let z=p[v],H=0;if(z>1&&(p[v]=[0,0,1][z-2]),z==3)for(H=P;H<V;H++)p[H+1]=p[H+1]+(p[H+1-P]>>>1)&255;for(let X=0;X<A;X++)if(L=v+X*V,$=L+X+1,z=p[$-1],H=0,z==0)for(;H<V;H++)p[L+H]=p[$+H];else if(z==1){for(;H<P;H++)p[L+H]=p[$+H];for(;H<V;H++)p[L+H]=p[$+H]+p[L+H-P]}else if(z==2)for(;H<V;H++)p[L+H]=p[$+H]+p[L+H-V];else if(z==3){for(;H<P;H++)p[L+H]=p[$+H]+(p[L+H-V]>>>1);for(;H<V;H++)p[L+H]=p[$+H]+(p[L+H-V]+p[L+H-P]>>>1)}else{for(;H<P;H++)p[L+H]=p[$+H]+d(0,p[L+H-V],0);for(;H<V;H++)p[L+H]=p[$+H]+d(p[L+H-P],p[L+H-V],p[L+H-P-V])}return p}function d(p,y,v){const w=p+y-v,A=w-p,P=w-y,V=w-v;return A*A<=P*P&&A*A<=V*V?p:P*P<=V*V?y:v}function h(p,y,v){v.width=n.readUint(p,y),y+=4,v.height=n.readUint(p,y),y+=4,v.depth=p[y],y++,v.ctype=p[y],y++,v.compress=p[y],y++,v.filter=p[y],y++,v.interlace=p[y],y++}function m(p,y,v,w,A,P,V,L,$){const z=Math.min(y,A),H=Math.min(v,P);let X=0,F=0;for(let ee=0;ee<H;ee++)for(let D=0;D<z;D++)if(V>=0&&L>=0?(X=ee*y+D<<2,F=(L+ee)*A+V+D<<2):(X=(-L+ee)*y-V+D<<2,F=ee*A+D<<2),$==0)w[F]=p[X],w[F+1]=p[X+1],w[F+2]=p[X+2],w[F+3]=p[X+3];else if($==1){var R=p[X+3]*.00392156862745098,T=p[X]*R,E=p[X+1]*R,N=p[X+2]*R,C=w[F+3]*(1/255),O=w[F]*C,k=w[F+1]*C,G=w[F+2]*C;const M=1-R,J=R+C*M,W=J==0?0:1/J;w[F+3]=255*J,w[F+0]=(T+O*M)*W,w[F+1]=(E+k*M)*W,w[F+2]=(N+G*M)*W}else if($==2)R=p[X+3],T=p[X],E=p[X+1],N=p[X+2],C=w[F+3],O=w[F],k=w[F+1],G=w[F+2],R==C&&T==O&&E==k&&N==G?(w[F]=0,w[F+1]=0,w[F+2]=0,w[F+3]=0):(w[F]=T,w[F+1]=E,w[F+2]=N,w[F+3]=R);else if($==3){if(R=p[X+3],T=p[X],E=p[X+1],N=p[X+2],C=w[F+3],O=w[F],k=w[F+1],G=w[F+2],R==C&&T==O&&E==k&&N==G)continue;if(R<220&&C>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const A=n,P=A.readUshort,V=A.readUint,L={tabs:{},frames:[]},$=new Uint8Array(v.length);let z,H=0,X=0;const F=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(v[R]!=F[R])throw"The input is not a PNG file!";for(;w<v.length;){const ee=A.readUint(v,w);w+=4;const D=A.readASCII(v,w,4);if(w+=4,D=="IHDR")h(v,w,L);else if(D=="iCCP"){for(var T=w;v[T]!=0;)T++;A.readASCII(v,w,T-w),v[T+1];const M=v.slice(T+2,w+ee);let J=null;try{J=r(M)}catch{J=i(M)}L.tabs[D]=J}else if(D=="CgBI")L.tabs[D]=v.slice(w,w+4);else if(D=="IDAT"){for(R=0;R<ee;R++)$[H+R]=v[w+R];H+=ee}else if(D=="acTL")L.tabs[D]={num_frames:V(v,w),num_plays:V(v,w+4)},z=new Uint8Array(v.length);else if(D=="fcTL"){X!=0&&((G=L.frames[L.frames.length-1]).data=t(L,z.slice(0,X),G.rect.width,G.rect.height),X=0);const M={x:V(v,w+12),y:V(v,w+16),width:V(v,w+4),height:V(v,w+8)};let J=P(v,w+22);J=P(v,w+20)/(J==0?100:J);const W={rect:M,delay:Math.round(1e3*J),dispose:v[w+24],blend:v[w+25]};L.frames.push(W)}else if(D=="fdAT"){for(R=0;R<ee-4;R++)z[X+R]=v[w+R+4];X+=ee-4}else if(D=="pHYs")L.tabs[D]=[A.readUint(v,w),A.readUint(v,w+4),v[w+8]];else if(D=="cHRM")for(L.tabs[D]=[],R=0;R<8;R++)L.tabs[D].push(A.readUint(v,w+4*R));else if(D=="tEXt"||D=="zTXt"){L.tabs[D]==null&&(L.tabs[D]={});var E=A.nextZero(v,w),N=A.readASCII(v,w,E-w),C=w+ee-E-1;if(D=="tEXt")k=A.readASCII(v,E+1,C);else{var O=r(v.slice(E+2,E+2+C));k=A.readUTF8(O,0,O.length)}L.tabs[D][N]=k}else if(D=="iTXt"){L.tabs[D]==null&&(L.tabs[D]={}),E=0,T=w,E=A.nextZero(v,T),N=A.readASCII(v,T,E-T);const M=v[T=E+1];var k;v[T+1],T+=2,E=A.nextZero(v,T),A.readASCII(v,T,E-T),T=E+1,E=A.nextZero(v,T),A.readUTF8(v,T,E-T),C=ee-((T=E+1)-w),M==0?k=A.readUTF8(v,T,C):(O=r(v.slice(T,T+C)),k=A.readUTF8(O,0,O.length)),L.tabs[D][N]=k}else if(D=="PLTE")L.tabs[D]=A.readBytes(v,w,ee);else if(D=="hIST"){const M=L.tabs.PLTE.length/3;for(L.tabs[D]=[],R=0;R<M;R++)L.tabs[D].push(P(v,w+2*R))}else if(D=="tRNS")L.ctype==3?L.tabs[D]=A.readBytes(v,w,ee):L.ctype==0?L.tabs[D]=P(v,w):L.ctype==2&&(L.tabs[D]=[P(v,w),P(v,w+2),P(v,w+4)]);else if(D=="gAMA")L.tabs[D]=A.readUint(v,w)/1e5;else if(D=="sRGB")L.tabs[D]=v[w];else if(D=="bKGD")L.ctype==0||L.ctype==4?L.tabs[D]=[P(v,w)]:L.ctype==2||L.ctype==6?L.tabs[D]=[P(v,w),P(v,w+2),P(v,w+4)]:L.ctype==3&&(L.tabs[D]=v[w]);else if(D=="IEND")break;w+=ee,A.readUint(v,w),w+=4}var G;return X!=0&&((G=L.frames[L.frames.length-1]).data=t(L,z.slice(0,X),G.rect.width,G.rect.height)),L.data=t(L,$,L.width,L.height),delete L.compress,delete L.interlace,delete L.filter,L},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const A=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const P=v*w*4,V=new Uint8Array(P),L=new Uint8Array(P),$=new Uint8Array(P);for(let H=0;H<y.frames.length;H++){const X=y.frames[H],F=X.rect.x,R=X.rect.y,T=X.rect.width,E=X.rect.height,N=e(X.data,T,E,y);if(H!=0)for(var z=0;z<P;z++)$[z]=V[z];if(X.blend==0?m(N,T,E,V,v,w,F,R,0):X.blend==1&&m(N,T,E,V,v,w,F,R,1),A.push(V.buffer.slice(0)),X.dispose!=0){if(X.dispose==1)m(L,T,E,V,v,w,F,R,0);else if(X.dispose==2)for(z=0;z<P;z++)V[z]=$[z]}}return A},_paeth:d,_copyTile:m,_bin:n}})();(function(){const{_copyTile:n}=Qr,{_bin:e}=Qr,t=Qr._paeth;var r={table:(function(){const T=new Uint32Array(256);for(let E=0;E<256;E++){let N=E;for(let C=0;C<8;C++)1&N?N=3988292384^N>>>1:N>>>=1;T[E]=N}return T})(),update(T,E,N,C){for(let O=0;O<C;O++)T=r.table[255&(T^E[N+O])]^T>>>8;return T},crc:(T,E,N)=>4294967295^r.update(4294967295,T,E,N)};function i(T,E,N,C){E[N]+=T[0]*C>>4,E[N+1]+=T[1]*C>>4,E[N+2]+=T[2]*C>>4,E[N+3]+=T[3]*C>>4}function o(T){return Math.max(0,Math.min(255,T))}function c(T,E){const N=T[0]-E[0],C=T[1]-E[1],O=T[2]-E[2],k=T[3]-E[3];return N*N+C*C+O*O+k*k}function d(T,E,N,C,O,k,G){G==null&&(G=1);const ee=C.length,D=[];for(var M=0;M<ee;M++){const ne=C[M];D.push([ne>>>0&255,ne>>>8&255,ne>>>16&255,ne>>>24&255])}for(M=0;M<ee;M++){let ne=4294967295;for(var J=0,W=0;W<ee;W++){var Z=c(D[M],D[W]);W!=M&&Z<ne&&(ne=Z,J=W)}}const B=new Uint32Array(O.buffer),Y=new Int16Array(E*N*4),se=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<se.length;M++)se[M]=255*((se[M]+.5)/16-.5);for(let ne=0;ne<N;ne++)for(let ye=0;ye<E;ye++){var ie;M=4*(ne*E+ye),G!=2?ie=[o(T[M]+Y[M]),o(T[M+1]+Y[M+1]),o(T[M+2]+Y[M+2]),o(T[M+3]+Y[M+3])]:(Z=se[4*(3&ne)+(3&ye)],ie=[o(T[M]+Z),o(T[M+1]+Z),o(T[M+2]+Z),o(T[M+3]+Z)]),J=0;let Ae=16777215;for(W=0;W<ee;W++){const _e=c(ie,D[W]);_e<Ae&&(Ae=_e,J=W)}const Me=D[J],Re=[ie[0]-Me[0],ie[1]-Me[1],ie[2]-Me[2],ie[3]-Me[3]];G==1&&(ye!=E-1&&i(Re,Y,M+4,7),ne!=N-1&&(ye!=0&&i(Re,Y,M+4*E-4,3),i(Re,Y,M+4*E,5),ye!=E-1&&i(Re,Y,M+4*E+4,1))),k[M>>2]=J,B[M>>2]=C[J]}}function h(T,E,N,C,O){O==null&&(O={});const{crc:k}=r,G=e.writeUint,ee=e.writeUshort,D=e.writeASCII;let M=8;const J=T.frames.length>1;let W,Z=!1,B=33+(J?20:0);if(O.sRGB!=null&&(B+=13),O.pHYs!=null&&(B+=21),O.iCCP!=null&&(W=pako.deflate(O.iCCP),B+=21+W.length+4),T.ctype==3){for(var Y=T.plte.length,se=0;se<Y;se++)T.plte[se]>>>24!=255&&(Z=!0);B+=8+3*Y+4+(Z?8+1*Y+4:0)}for(var ie=0;ie<T.frames.length;ie++)J&&(B+=38),B+=(Me=T.frames[ie]).cimg.length+12,ie!=0&&(B+=4);B+=12;const ne=new Uint8Array(B),ye=[137,80,78,71,13,10,26,10];for(se=0;se<8;se++)ne[se]=ye[se];if(G(ne,M,13),M+=4,D(ne,M,"IHDR"),M+=4,G(ne,M,E),M+=4,G(ne,M,N),M+=4,ne[M]=T.depth,M++,ne[M]=T.ctype,M++,ne[M]=0,M++,ne[M]=0,M++,ne[M]=0,M++,G(ne,M,k(ne,M-17,17)),M+=4,O.sRGB!=null&&(G(ne,M,1),M+=4,D(ne,M,"sRGB"),M+=4,ne[M]=O.sRGB,M++,G(ne,M,k(ne,M-5,5)),M+=4),O.iCCP!=null){const Re=13+W.length;G(ne,M,Re),M+=4,D(ne,M,"iCCP"),M+=4,D(ne,M,"ICC profile"),M+=11,M+=2,ne.set(W,M),M+=W.length,G(ne,M,k(ne,M-(Re+4),Re+4)),M+=4}if(O.pHYs!=null&&(G(ne,M,9),M+=4,D(ne,M,"pHYs"),M+=4,G(ne,M,O.pHYs[0]),M+=4,G(ne,M,O.pHYs[1]),M+=4,ne[M]=O.pHYs[2],M++,G(ne,M,k(ne,M-13,13)),M+=4),J&&(G(ne,M,8),M+=4,D(ne,M,"acTL"),M+=4,G(ne,M,T.frames.length),M+=4,G(ne,M,O.loop!=null?O.loop:0),M+=4,G(ne,M,k(ne,M-12,12)),M+=4),T.ctype==3){for(G(ne,M,3*(Y=T.plte.length)),M+=4,D(ne,M,"PLTE"),M+=4,se=0;se<Y;se++){const Re=3*se,_e=T.plte[se],Te=255&_e,Ve=_e>>>8&255,Ze=_e>>>16&255;ne[M+Re+0]=Te,ne[M+Re+1]=Ve,ne[M+Re+2]=Ze}if(M+=3*Y,G(ne,M,k(ne,M-3*Y-4,3*Y+4)),M+=4,Z){for(G(ne,M,Y),M+=4,D(ne,M,"tRNS"),M+=4,se=0;se<Y;se++)ne[M+se]=T.plte[se]>>>24&255;M+=Y,G(ne,M,k(ne,M-Y-4,Y+4)),M+=4}}let Ae=0;for(ie=0;ie<T.frames.length;ie++){var Me=T.frames[ie];J&&(G(ne,M,26),M+=4,D(ne,M,"fcTL"),M+=4,G(ne,M,Ae++),M+=4,G(ne,M,Me.rect.width),M+=4,G(ne,M,Me.rect.height),M+=4,G(ne,M,Me.rect.x),M+=4,G(ne,M,Me.rect.y),M+=4,ee(ne,M,C[ie]),M+=2,ee(ne,M,1e3),M+=2,ne[M]=Me.dispose,M++,ne[M]=Me.blend,M++,G(ne,M,k(ne,M-30,30)),M+=4);const Re=Me.cimg;G(ne,M,(Y=Re.length)+(ie==0?0:4)),M+=4;const _e=M;D(ne,M,ie==0?"IDAT":"fdAT"),M+=4,ie!=0&&(G(ne,M,Ae++),M+=4),ne.set(Re,M),M+=Y,G(ne,M,k(ne,_e,M-_e)),M+=4}return G(ne,M,0),M+=4,D(ne,M,"IEND"),M+=4,G(ne,M,k(ne,M-4,4)),M+=4,ne.buffer}function m(T,E,N){for(let C=0;C<T.frames.length;C++){const O=T.frames[C];O.rect.width;const k=O.rect.height,G=new Uint8Array(k*O.bpl+k);O.cimg=w(O.img,k,O.bpp,O.bpl,G,E,N)}}function p(T,E,N,C,O){const k=O[0],G=O[1],ee=O[2],D=O[3],M=O[4],J=O[5];let W=6,Z=8,B=255;for(var Y=0;Y<T.length;Y++){const at=new Uint8Array(T[Y]);for(var se=at.length,ie=0;ie<se;ie+=4)B&=at[ie+3]}const ne=B!=255,ye=(function(st,Qe,Fe,Xe,ft,_n){const Rt=[];for(var $e=0;$e<st.length;$e++){const Qt=new Uint8Array(st[$e]),Cn=new Uint32Array(Qt.buffer);var qt;let vn=0,Ht=0,wt=Qe,Xt=Fe,Ct=Xe?1:0;if($e!=0){const $o=_n||Xe||$e==1||Rt[$e-2].dispose!=0?1:2;let is=0,Ca=1e9;for(let kn=0;kn<$o;kn++){var Gn=new Uint8Array(st[$e-1-kn]);const Bs=new Uint32Array(st[$e-1-kn]);let mt=Qe,ln=Fe,bn=-1,wn=-1;for(let yr=0;yr<Fe;yr++)for(let fn=0;fn<Qe;fn++)Cn[Nt=yr*Qe+fn]!=Bs[Nt]&&(fn<mt&&(mt=fn),fn>bn&&(bn=fn),yr<ln&&(ln=yr),yr>wn&&(wn=yr));bn==-1&&(mt=ln=bn=wn=0),ft&&((1&mt)==1&&mt--,(1&ln)==1&&ln--);const Go=(bn-mt+1)*(wn-ln+1);Go<Ca&&(Ca=Go,is=kn,vn=mt,Ht=ln,wt=bn-mt+1,Xt=wn-ln+1)}Gn=new Uint8Array(st[$e-1-is]),is==1&&(Rt[$e-1].dispose=2),qt=new Uint8Array(wt*Xt*4),n(Gn,Qe,Fe,qt,wt,Xt,-vn,-Ht,0),Ct=n(Qt,Qe,Fe,qt,wt,Xt,-vn,-Ht,3)?1:0,Ct==1?v(Qt,Qe,Fe,qt,{x:vn,y:Ht,width:wt,height:Xt}):n(Qt,Qe,Fe,qt,wt,Xt,-vn,-Ht,0)}else qt=Qt.slice(0);Rt.push({rect:{x:vn,y:Ht,width:wt,height:Xt},img:qt,blend:Ct,dispose:0})}if(Xe)for($e=0;$e<Rt.length;$e++){if((Lr=Rt[$e]).blend==1)continue;const Qt=Lr.rect,Cn=Rt[$e-1].rect,vn=Math.min(Qt.x,Cn.x),Ht=Math.min(Qt.y,Cn.y),wt={x:vn,y:Ht,width:Math.max(Qt.x+Qt.width,Cn.x+Cn.width)-vn,height:Math.max(Qt.y+Qt.height,Cn.y+Cn.height)-Ht};Rt[$e-1].dispose=1,$e-1!=0&&y(st,Qe,Fe,Rt,$e-1,wt,ft),y(st,Qe,Fe,Rt,$e,wt,ft)}let ss=0;if(st.length!=1)for(var Nt=0;Nt<Rt.length;Nt++){var Lr;ss+=(Lr=Rt[Nt]).rect.width*Lr.rect.height}return Rt})(T,E,N,k,G,ee),Ae={},Me=[],Re=[];if(C!=0){const at=[];for(ie=0;ie<ye.length;ie++)at.push(ye[ie].img.buffer);const st=(function(ft){let _n=0;for(var Rt=0;Rt<ft.length;Rt++)_n+=ft[Rt].byteLength;const $e=new Uint8Array(_n);let qt=0;for(Rt=0;Rt<ft.length;Rt++){const Gn=new Uint8Array(ft[Rt]),ss=Gn.length;for(let Nt=0;Nt<ss;Nt+=4){let Lr=Gn[Nt],Qt=Gn[Nt+1],Cn=Gn[Nt+2];const vn=Gn[Nt+3];vn==0&&(Lr=Qt=Cn=0),$e[qt+Nt]=Lr,$e[qt+Nt+1]=Qt,$e[qt+Nt+2]=Cn,$e[qt+Nt+3]=vn}qt+=ss}return $e.buffer})(at),Qe=P(st,C);for(ie=0;ie<Qe.plte.length;ie++)Me.push(Qe.plte[ie].est.rgba);let Fe=0;for(ie=0;ie<ye.length;ie++){const Xe=(Te=ye[ie]).img.length;var _e=new Uint8Array(Qe.inds.buffer,Fe>>2,Xe>>2);Re.push(_e);const ft=new Uint8Array(Qe.abuf,Fe,Xe);J&&d(Te.img,Te.rect.width,Te.rect.height,Me,ft,_e),Te.img.set(ft),Fe+=Xe}}else for(Y=0;Y<ye.length;Y++){var Te=ye[Y];const at=new Uint32Array(Te.img.buffer);var Ve=Te.rect.width;for(se=at.length,_e=new Uint8Array(se),Re.push(_e),ie=0;ie<se;ie++){const st=at[ie];if(ie!=0&&st==at[ie-1])_e[ie]=_e[ie-1];else if(ie>Ve&&st==at[ie-Ve])_e[ie]=_e[ie-Ve];else{let Qe=Ae[st];if(Qe==null&&(Ae[st]=Qe=Me.length,Me.push(st),Me.length>=300))break;_e[ie]=Qe}}}const Ze=Me.length;for(Ze<=256&&M==0&&(Z=Ze<=2?1:Ze<=4?2:Ze<=16?4:8,Z=Math.max(Z,D)),Y=0;Y<ye.length;Y++){(Te=ye[Y]).rect.x,Te.rect.y,Ve=Te.rect.width;const at=Te.rect.height;let st=Te.img;new Uint32Array(st.buffer);let Qe=4*Ve,Fe=4;if(Ze<=256&&M==0){Qe=Math.ceil(Z*Ve/8);var De=new Uint8Array(Qe*at);const Xe=Re[Y];for(let ft=0;ft<at;ft++){ie=ft*Qe;const _n=ft*Ve;if(Z==8)for(var Ke=0;Ke<Ve;Ke++)De[ie+Ke]=Xe[_n+Ke];else if(Z==4)for(Ke=0;Ke<Ve;Ke++)De[ie+(Ke>>1)]|=Xe[_n+Ke]<<4-4*(1&Ke);else if(Z==2)for(Ke=0;Ke<Ve;Ke++)De[ie+(Ke>>2)]|=Xe[_n+Ke]<<6-2*(3&Ke);else if(Z==1)for(Ke=0;Ke<Ve;Ke++)De[ie+(Ke>>3)]|=Xe[_n+Ke]<<7-1*(7&Ke)}st=De,W=3,Fe=1}else if(ne==0&&ye.length==1){De=new Uint8Array(Ve*at*3);const Xe=Ve*at;for(ie=0;ie<Xe;ie++){const ft=3*ie,_n=4*ie;De[ft]=st[_n],De[ft+1]=st[_n+1],De[ft+2]=st[_n+2]}st=De,W=2,Fe=3,Qe=3*Ve}Te.img=st,Te.bpl=Qe,Te.bpp=Fe}return{ctype:W,depth:Z,plte:Me,frames:ye}}function y(T,E,N,C,O,k,G){const ee=Uint8Array,D=Uint32Array,M=new ee(T[O-1]),J=new D(T[O-1]),W=O+1<T.length?new ee(T[O+1]):null,Z=new ee(T[O]),B=new D(Z.buffer);let Y=E,se=N,ie=-1,ne=-1;for(let Ae=0;Ae<k.height;Ae++)for(let Me=0;Me<k.width;Me++){const Re=k.x+Me,_e=k.y+Ae,Te=_e*E+Re,Ve=B[Te];Ve==0||C[O-1].dispose==0&&J[Te]==Ve&&(W==null||W[4*Te+3]!=0)||(Re<Y&&(Y=Re),Re>ie&&(ie=Re),_e<se&&(se=_e),_e>ne&&(ne=_e))}ie==-1&&(Y=se=ie=ne=0),G&&((1&Y)==1&&Y--,(1&se)==1&&se--),k={x:Y,y:se,width:ie-Y+1,height:ne-se+1};const ye=C[O];ye.rect=k,ye.blend=1,ye.img=new Uint8Array(k.width*k.height*4),C[O-1].dispose==0?(n(M,E,N,ye.img,k.width,k.height,-k.x,-k.y,0),v(Z,E,N,ye.img,k)):n(Z,E,N,ye.img,k.width,k.height,-k.x,-k.y,0)}function v(T,E,N,C,O){n(T,E,N,C,O.width,O.height,-O.x,-O.y,2)}function w(T,E,N,C,O,k,G){const ee=[];let D,M=[0,1,2,3,4];k!=-1?M=[k]:(E*C>5e5||N==1)&&(M=[0]),G&&(D={level:0});const J=KU;for(var W=0;W<M.length;W++){for(let Y=0;Y<E;Y++)A(O,T,Y,C,N,M[W]);ee.push(J.deflate(O,D))}let Z,B=1e9;for(W=0;W<ee.length;W++)ee[W].length<B&&(Z=W,B=ee[W].length);return ee[Z]}function A(T,E,N,C,O,k){const G=N*C;let ee=G+N;if(T[ee]=k,ee++,k==0)if(C<500)for(var D=0;D<C;D++)T[ee+D]=E[G+D];else T.set(new Uint8Array(E.buffer,G,C),ee);else if(k==1){for(D=0;D<O;D++)T[ee+D]=E[G+D];for(D=O;D<C;D++)T[ee+D]=E[G+D]-E[G+D-O]+256&255}else if(N==0){for(D=0;D<O;D++)T[ee+D]=E[G+D];if(k==2)for(D=O;D<C;D++)T[ee+D]=E[G+D];if(k==3)for(D=O;D<C;D++)T[ee+D]=E[G+D]-(E[G+D-O]>>1)+256&255;if(k==4)for(D=O;D<C;D++)T[ee+D]=E[G+D]-t(E[G+D-O],0,0)+256&255}else{if(k==2)for(D=0;D<C;D++)T[ee+D]=E[G+D]+256-E[G+D-C]&255;if(k==3){for(D=0;D<O;D++)T[ee+D]=E[G+D]+256-(E[G+D-C]>>1)&255;for(D=O;D<C;D++)T[ee+D]=E[G+D]+256-(E[G+D-C]+E[G+D-O]>>1)&255}if(k==4){for(D=0;D<O;D++)T[ee+D]=E[G+D]+256-t(0,E[G+D-C],0)&255;for(D=O;D<C;D++)T[ee+D]=E[G+D]+256-t(E[G+D-O],E[G+D-C],E[G+D-O-C])&255}}}function P(T,E){const N=new Uint8Array(T),C=N.slice(0),O=new Uint32Array(C.buffer),k=V(C,E),G=k[0],ee=k[1],D=N.length,M=new Uint8Array(D>>2);let J;if(N.length<2e7)for(var W=0;W<D;W+=4)J=L(G,Z=N[W]*(1/255),B=N[W+1]*(1/255),Y=N[W+2]*(1/255),se=N[W+3]*(1/255)),M[W>>2]=J.ind,O[W>>2]=J.est.rgba;else for(W=0;W<D;W+=4){var Z=N[W]*.00392156862745098,B=N[W+1]*(1/255),Y=N[W+2]*(1/255),se=N[W+3]*(1/255);for(J=G;J.left;)J=$(J.est,Z,B,Y,se)<=0?J.left:J.right;M[W>>2]=J.ind,O[W>>2]=J.est.rgba}return{abuf:C.buffer,inds:M,plte:ee}}function V(T,E,N){N==null&&(N=1e-4);const C=new Uint32Array(T.buffer),O={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=X(T,O.i0,O.i1),O.est=F(O.bst);const k=[O];for(;k.length<E;){let ee=0,D=0;for(var G=0;G<k.length;G++)k[G].est.L>ee&&(ee=k[G].est.L,D=G);if(ee<N)break;const M=k[D],J=z(T,C,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=J||M.i1<=J){M.est.L=0;continue}const W={i0:M.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};W.bst=X(T,W.i0,W.i1),W.est=F(W.bst);const Z={i0:J,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:M.bst.N-W.bst.N},G=0;G<16;G++)Z.bst.R[G]=M.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)Z.bst.m[G]=M.bst.m[G]-W.bst.m[G];Z.est=F(Z.bst),M.left=W,M.right=Z,k[D]=W,k.push(Z)}for(k.sort(((ee,D)=>D.bst.N-ee.bst.N)),G=0;G<k.length;G++)k[G].ind=G;return[O,k]}function L(T,E,N,C,O){if(T.left==null)return T.tdst=(function(W,Z,B,Y,se){const ie=Z-W[0],ne=B-W[1],ye=Y-W[2],Ae=se-W[3];return ie*ie+ne*ne+ye*ye+Ae*Ae})(T.est.q,E,N,C,O),T;const k=$(T.est,E,N,C,O);let G=T.left,ee=T.right;k>0&&(G=T.right,ee=T.left);const D=L(G,E,N,C,O);if(D.tdst<=k*k)return D;const M=L(ee,E,N,C,O);return M.tdst<D.tdst?M:D}function $(T,E,N,C,O){const{e:k}=T;return k[0]*E+k[1]*N+k[2]*C+k[3]*O-T.eMq}function z(T,E,N,C,O,k){for(C-=4;N<C;){for(;H(T,N,O)<=k;)N+=4;for(;H(T,C,O)>k;)C-=4;if(N>=C)break;const G=E[N>>2];E[N>>2]=E[C>>2],E[C>>2]=G,N+=4,C-=4}for(;H(T,N,O)>k;)N-=4;return N+4}function H(T,E,N){return T[E]*N[0]+T[E+1]*N[1]+T[E+2]*N[2]+T[E+3]*N[3]}function X(T,E,N){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0],k=N-E>>2;for(let G=E;G<N;G+=4){const ee=T[G]*.00392156862745098,D=T[G+1]*(1/255),M=T[G+2]*(1/255),J=T[G+3]*(1/255);O[0]+=ee,O[1]+=D,O[2]+=M,O[3]+=J,C[0]+=ee*ee,C[1]+=ee*D,C[2]+=ee*M,C[3]+=ee*J,C[5]+=D*D,C[6]+=D*M,C[7]+=D*J,C[10]+=M*M,C[11]+=M*J,C[15]+=J*J}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:O,N:k}}function F(T){const{R:E}=T,{m:N}=T,{N:C}=T,O=N[0],k=N[1],G=N[2],ee=N[3],D=C==0?0:1/C,M=[E[0]-O*O*D,E[1]-O*k*D,E[2]-O*G*D,E[3]-O*ee*D,E[4]-k*O*D,E[5]-k*k*D,E[6]-k*G*D,E[7]-k*ee*D,E[8]-G*O*D,E[9]-G*k*D,E[10]-G*G*D,E[11]-G*ee*D,E[12]-ee*O*D,E[13]-ee*k*D,E[14]-ee*G*D,E[15]-ee*ee*D],J=M,W=R;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],B=0,Y=0;if(C!=0)for(let ie=0;ie<16&&(Z=W.multVec(J,Z),Y=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/Y,Z),!(ie!=0&&Math.abs(Y-B)<1e-9));ie++)B=Y;const se=[O*D,k*D,G*D,ee*D];return{Cov:M,q:se,e:Z,L:B,eMq255:W.dot(W.sml(255,se),Z),eMq:W.dot(Z,se),rgba:(Math.round(255*se[3])<<24|Math.round(255*se[2])<<16|Math.round(255*se[1])<<8|Math.round(255*se[0])<<0)>>>0}}var R={multVec:(T,E)=>[T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],T[4]*E[0]+T[5]*E[1]+T[6]*E[2]+T[7]*E[3],T[8]*E[0]+T[9]*E[1]+T[10]*E[2]+T[11]*E[3],T[12]*E[0]+T[13]*E[1]+T[14]*E[2]+T[15]*E[3]],dot:(T,E)=>T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],sml:(T,E)=>[T*E[0],T*E[1],T*E[2],T*E[3]]};Qr.encode=function(E,N,C,O,k,G,ee){O==null&&(O=0),ee==null&&(ee=!1);const D=p(E,N,C,O,[!1,!1,!1,0,ee,!1]);return m(D,-1),h(D,N,C,k,G)},Qr.encodeLL=function(E,N,C,O,k,G,ee,D){const M={ctype:0+(O==1?0:2)+(k==0?0:4),depth:G,frames:[]},J=(O+k)*G,W=J*N;for(let Z=0;Z<E.length;Z++)M.frames.push({rect:{x:0,y:0,width:N,height:C},img:new Uint8Array(E[Z]),blend:0,dispose:1,bpp:Math.ceil(J/8),bpl:Math.ceil(W/8)});return m(M,0,!0),h(M,N,C,ee,D)},Qr.encode.compress=p,Qr.encode.dither=d,Qr.quantize=P,Qr.quantize.getKDtree=V,Qr.quantize.getNearest=L})();const eR={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,o=n.getContext("2d").getImageData(0,0,t,r),c=new Uint32Array(o.data.buffer),d=(32*t+31)/32<<2,h=d*r,m=122+h,p=new ArrayBuffer(m),y=new DataView(p),v=1<<20;let w,A,P,V,L=v,$=0,z=0,H=0;function X(T){y.setUint16(z,T,!0),z+=2}function F(T){y.setUint32(z,T,!0),z+=4}function R(T){z+=T}X(19778),F(m),R(4),F(122),F(108),F(t),F(-r>>>0),X(1),X(32),F(3),F(h),F(2835),F(2835),R(8),F(16711680),F(65280),F(255),F(4278190080),F(1466527264),(function T(){for(;$<r&&L>0;){for(V=122+$*d,w=0;w<i;)L--,A=c[H++],P=A>>>24,y.setUint32(V+w,A<<8|P),w+=4;$++}H<c.length?(L=v,setTimeout(T,eR._dly)):e(p)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var er={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},YU={[er.CHROME]:16384,[er.FIREFOX]:11180,[er.DESKTOP_SAFARI]:16384,[er.IE]:8192,[er.IOS]:4096,[er.ETC]:8192};const Y_=typeof window<"u",tR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,_m=Y_&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),QU=(Y_||tR)&&(_m&&_m.getOriginalSymbol(window,"File")||typeof File<"u"&&File),nR=(Y_||tR)&&(_m&&_m.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Q_(n,e,t=Date.now()){return new Promise((r=>{const i=n.split(","),o=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let d=c.length;const h=new Uint8Array(d);for(;d--;)h[d]=c.charCodeAt(d);const m=new Blob([h],{type:o});m.name=e,m.lastModified=t,r(m)}))}function rR(n){return new Promise(((e,t)=>{const r=new nR;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)}))}function sR(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n}))}function mo(){if(mo.cachedResult!==void 0)return mo.cachedResult;let n=er.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=er.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=er.IOS:/Safari/i.test(e)?n=er.DESKTOP_SAFARI:/Firefox/i.test(e)?n=er.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=er.IE),mo.cachedResult=n,mo.cachedResult}function iR(n,e){const t=mo(),r=YU[t];let i=n,o=e,c=i*o;const d=i>o?o/i:i/o;for(;c>r*r;){const h=(r+i)/2,m=(r+o)/2;h<m?(o=m,i=m*d):(o=h*d,i=h),c=i*o}return{width:i,height:o}}function og(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function aR(n,e){const{width:t,height:r}=iR(n.width,n.height),[i,o]=og(t,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(n,0,0,i.width,i.height),i}function Uf(){return Uf.cachedResult!==void 0||(Uf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Uf.cachedResult}function vm(n,e={}){return new Promise((function(t,r){let i,o;var c=function(){try{return o=aR(i,e.fileType||n.type),t([i,o])}catch(h){return r(h)}},d=function(h){try{var m=function(p){try{throw p}catch(y){return r(y)}};try{let p;return rR(n).then((function(y){try{return p=y,sR(p).then((function(v){try{return i=v,(function(){try{return c()}catch(w){return r(w)}})()}catch(w){return m(w)}}),m)}catch(v){return m(v)}}),m)}catch(p){m(p)}}catch(p){return r(p)}};try{if(Uf()||[er.DESKTOP_SAFARI,er.MOBILE_SAFARI].includes(mo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(h){try{return i=h,c()}catch{return d()}}),d)}catch{d()}}))}function bm(n,e,t,r,i=1){return new Promise((function(o,c){let d;if(e==="image/png"){let y,v,w;return y=n.getContext("2d"),{data:v}=y.getImageData(0,0,n.width,n.height),w=Qr.encode([v.buffer],n.width,n.height,4096*i),d=new Blob([w],{type:e}),d.name=t,d.lastModified=r,h.call(this)}{let y=function(){return h.call(this)};var m=y;if(e==="image/bmp")return new Promise((v=>eR.toBlob(n,v))).then((function(v){try{return d=v,d.name=t,d.lastModified=r,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var p=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(w){try{return d=w,d.name=t,d.lastModified=r,v.call(this)}catch(A){return c(A)}}).bind(this),c);{let w;return w=n.toDataURL(e,i),Q_(w,t,r).then((function(A){try{return d=A,v.call(this)}catch(P){return c(P)}}).bind(this),c)}}}function h(){return o(d)}}))}function Ts(n){n.width=0,n.height=0}function Kl(){return new Promise((function(n,e){let t,r,i,o;return Kl.cachedResult!==void 0?n(Kl.cachedResult):Q_("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,vm(t).then((function(d){try{return r=d[1],bm(r,t.type,t.name,t.lastModified).then((function(h){try{return i=h,Ts(r),vm(i).then((function(m){try{return o=m[0],Kl.cachedResult=o.width===1&&o.height===2,n(Kl.cachedResult)}catch(p){return e(p)}}),e)}catch(m){return e(m)}}),e)}catch(h){return e(h)}}),e)}catch(d){return e(d)}}),e)}))}function oR(n){return new Promise(((e,t)=>{const r=new nR;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let d=2;for(;d<c;){if(o.getUint16(d+2,!1)<=8)return e(-1);const h=o.getUint16(d,!1);if(d+=2,h==65505){if(o.getUint32(d+=2,!1)!=1165519206)return e(-1);const m=o.getUint16(d+=6,!1)==18761;d+=o.getUint32(d+4,m);const p=o.getUint16(d,m);d+=2;for(let y=0;y<p;y++)if(o.getUint16(d+12*y,m)==274)return e(o.getUint16(d+12*y+8,m))}else{if((65280&h)!=65280)break;d+=o.getUint16(d,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)}))}function lR(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let o,c=n;return isFinite(i)&&(t>i||r>i)&&([c,o]=og(t,r),t>r?(c.width=i,c.height=r/t*i):(c.width=t/r*i,c.height=i),o.drawImage(n,0,0,c.width,c.height),Ts(n)),c}function cR(n,e){const{width:t}=n,{height:r}=n,[i,o]=og(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,r),Ts(n),i}function CT(n,e,t=0){return new Promise((function(r,i){let o,c,d,h,m,p,y,v,w,A,P,V,L,$,z,H,X,F,R,T;function E(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=C,e.onProgress(Math.min(o,100))}function N(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(C,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,d=1024*e.maxSizeMB*1024,E(),vm(n,e).then((function(C){try{return[,h]=C,E(),m=lR(h,e),E(),new Promise((function(O,k){var G;if(!(G=e.exifOrientation))return oR(n).then((function(D){try{return G=D,ee.call(this)}catch(M){return k(M)}}).bind(this),k);function ee(){return O(G)}return ee.call(this)})).then((function(O){try{return p=O,E(),Kl().then((function(k){try{return y=k?m:cR(m,p),E(),v=e.initialQuality||1,w=e.fileType||n.type,bm(y,w,n.name,n.lastModified,v).then((function(G){try{{let J=function(){if(c--&&(z>d||z>L)){let Z,B;return Z=T?.95*R.width:R.width,B=T?.95*R.height:R.height,[X,F]=og(Z,B),F.drawImage(R,0,0,Z,B),v*=w==="image/png"?.85:.95,bm(X,w,n.name,n.lastModified,v).then((function(Y){try{return H=Y,Ts(R),R=X,z=H.size,N(Math.min(99,Math.floor(($-z)/($-d)*100))),J}catch(se){return i(se)}}),i)}return[1]},W=function(){return Ts(R),Ts(X),Ts(m),Ts(y),Ts(h),N(100),r(H)};var D=J,M=W;if(A=G,E(),P=A.size>d,V=A.size>n.size,!P&&!V)return N(100),r(A);var ee;return L=n.size,$=A.size,z=$,R=y,T=!e.alwaysKeepResolution&&P,(ee=(function(Z){for(;Z;){if(Z.then)return void Z.then(ee,i);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=J}else Z=Z.call(this)}catch(B){return i(B)}}}).bind(this))(J)}}catch(J){return i(J)}}).bind(this),i)}catch(G){return i(G)}}).bind(this),i)}catch(k){return i(k)}}).bind(this),i)}catch(O){return i(O)}}).bind(this),i)}))}const XU=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ky;function WU(n,e){return new Promise(((t,r)=>{ky||(ky=(function(c){const d=[];return d.push(c),URL.createObjectURL(new Blob(d))})(XU));const i=new Worker(ky);i.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void i.terminate();t(c.data.file),i.terminate()}else e.onProgress(c.data.progress)})),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),i.terminate()})),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function un(n,e){return new Promise((function(t,r){let i,o,c,d,h,m;if(i={...e},c=0,{onProgress:d}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=w=>{c=w,typeof d=="function"&&d(c)},!(n instanceof Blob||n instanceof QU))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||m)return CT(n,i).then((function(w){try{return o=w,v.call(this)}catch(A){return r(A)}}).bind(this),r);var p=(function(){try{return v.call(this)}catch(w){return r(w)}}).bind(this),y=function(w){try{return CT(n,i).then((function(A){try{return o=A,p()}catch(P){return r(P)}}),r)}catch(A){return r(A)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",WU(n,i).then((function(w){try{return o=w,p()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(o=ZI(n,o))}catch{}return t(o)}}))}un.getDataUrlFromFile=rR,un.getFilefromDataUrl=Q_,un.loadImage=sR,un.drawImageInCanvas=aR,un.drawFileInCanvas=vm,un.canvasToFile=bm,un.getExifOrientation=oR,un.handleMaxWidthOrHeight=lR,un.followExifOrientation=cR,un.cleanupCanvasMemory=Ts,un.isAutoOrientationInBrowser=Kl,un.approximateBelowMaximumCanvasSizeOfBrowser=iR,un.copyExifWithoutOrientation=ZI,un.getBrowserName=mo,un.version="2.0.2";const JU=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function ZU(n){if(!n)return!0;const e=n.toLowerCase();return!JU.some(t=>e.includes(t))}async function e9(n,e){try{const t=It(He,"users",n);return await gr(t,{blockedUsers:U_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function t9(n,e){try{const t=It(He,"users",n);return await gr(t,{blockedUsers:pI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function n9(n,e){try{const t=It(He,"users",n),r=await Na(t);return r.exists()?(r.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function r9({onClose:n,onPostCreated:e}){const{t}=Nn(),{currentUser:r}=rs(),i=q.useRef(null),[o,c]=q.useState(""),[d,h]=q.useState(""),[m,p]=q.useState(""),[y,v]=q.useState(!1),[w,A]=q.useState("none"),[P,V]=q.useState(null),[L,$]=q.useState(null),[z,H]=q.useState(!1),[X,F]=q.useState(!1),[R,T]=q.useState(""),[E,N]=q.useState(""),[C,O]=q.useState(0);q.useEffect(()=>{if(d){const M=Lf.find(J=>J.value===d);M&&p(t(M.labelKey))}},[d,t]);const k=async M=>{const J=M.target.files[0];if(J){const W=new FileReader;W.onloadend=()=>$(W.result),W.readAsDataURL(J),V(J)}},G=async()=>{if(P){F(!0);try{let M=P;try{M=await un(P,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const J=new FileReader;J.readAsDataURL(M),J.onloadend=async()=>{const W=J.result,Z=await LI(W,"en"),B=(Z.plant_name+" "+Z.disease_name).toLowerCase();let Y=null;for(const se of Lf)if(B.includes(se.value)){Y=se;break}Y?(h(Y.value),p(t(Y.labelKey)),N(`${t("auto_detect")}: ${t(Y.labelKey)}`)):N("Plant detected but not in our list yet."),setTimeout(()=>N(""),3e3),F(!1)}}catch(M){console.error("Auto detect failed",M),T(t("error_diagnosis_failed")),F(!1)}}},ee=async M=>{if(M.preventDefault(),!!o.trim()){if(!ZU(o)){T(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}H(!0),T(""),O(0);try{let J=null;if(P)try{console.log("Compressing for Base64 storage...");const Z=await un(P,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});J=await new Promise((B,Y)=>{const se=new FileReader;se.readAsDataURL(Z),se.onload=()=>B(se.result),se.onerror=ie=>Y(ie)}),console.log("Base64 string ready, length:",J.length)}catch(W){console.error("Compression failed:",W),T("Image is too large and could not be compressed."),H(!1);return}await qI(r.uid,{authorName:r.displayName||"Gardener",content:o,plantType:d||"other",image:J}),e(),n()}catch(J){console.error("FULL POST ERROR:",J),T(J.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{H(!1)}}},D=Lf.filter(M=>t(M.labelKey).toLowerCase().includes(m.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Aa,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[R&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:R}),E&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:E}),b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:M=>c(M.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(CI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:m,onChange:M=>{p(M.target.value),v(!0),M.target.value===""&&h("")},onFocus:()=>v(!0)}),b.jsx(B_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:D.length>0?D.map(M=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{h(M.value),p(t(M.labelKey)),v(!1)},children:t(M.labelKey)},M.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),L&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{V(null),$(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:z,children:b.jsx(Aa,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:X,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[X?b.jsx(ya,{className:"w-3 h-3 animate-spin"}):b.jsx(Pj,{className:"w-3 h-3"}),t(X?"detecting":"auto_detect")]})]}),z&&C>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${C}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(C),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>i.current?.click(),disabled:z,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(SI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:i,onChange:k,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:z||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[z?b.jsx(ya,{className:"w-4 h-4 animate-spin"}):b.jsx(md,{className:"w-4 h-4"}),z?"...":t("ask_question")]})]})]})]})]})})}function s9({user:n,onClose:e}){const{currentUser:t}=rs(),r=bi(),[i,o]=q.useState(!1),{t:c}=Nn(),{addToast:d}=Ho(),[h,m]=q.useState(n);q.useEffect(()=>{if(!n)return;const V=n.uid||n.id;if(!V)return;const L=bo(It(He,"users",V),$=>{$.exists()&&m({uid:$.id,...$.data()})},$=>{console.error("User listener error",$)});return()=>L()},[n]);const p=n?{...n,...h,uid:h?.uid||n.uid||n.id}:null,[y,v]=q.useState(!1);q.useEffect(()=>{t&&p&&n9(t.uid,p.uid).then(v)},[t,p]);const w=async()=>{if(!(!t||!p))try{y?(await t9(t.uid,p.uid),v(!1),d(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await e9(t.uid,p.uid),v(!0),d(c("user_blocked")||"User blocked","success"))}catch(V){console.error(V),d("Action failed","error")}},A=V=>!V?.lastSeen||!V.lastSeen.seconds?!1:Date.now()-V.lastSeen.seconds*1e3<180*1e3;if(!n||!p)return null;const P=async()=>{if(!t){d(c("login_to_message"),"info"),r("/login");return}if(t.uid===p.uid){d(c("cannot_message_self"),"warning");return}o(!0);try{e();const V={uid:p.uid,name:p.name||p.displayName||"User",photoURL:p.photoURL||p.avatar||null};r("/messages/new",{state:{targetUser:V}})}catch(V){console.error(V),d("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:V=>V.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Aa,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:p.photoURL||p.avatar||`https://ui-avatars.com/api/?name=${p.name}`,alt:p.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${A(p)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${A(p)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),A(p)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:p.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(E0,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",p.createdAt?.seconds?new Date(p.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),r(`/profile/${p.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(E0,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:P,disabled:i||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:i?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(fd,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==p.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function lg(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(jr,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function i9({analysisId:n,onClose:e}){const[t,r]=q.useState(null),[i,o]=q.useState(!0);return q.useEffect(()=>{async function c(){try{const d=await Na(It(He,"analyses",n));if(d.exists()){const h=d.data();let m=[];try{m=(await fc(Un(He,"analyses",n,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(p){console.warn("Could not fetch updates for modal",p)}r({...h,updates:m})}}catch(d){console.error(d)}finally{o(!1)}}c()},[n]),q.useEffect(()=>{const c=d=>{d.key==="Escape"&&e()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e]),i?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:b.jsx(ya,{className:"animate-spin text-white w-8 h-8"})}):t?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:c=>c.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:b.jsx(Aa,{className:"w-5 h-5 text-gray-500"})}),b.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:b.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[b.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&b.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[b.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),b.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:b.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),b.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[b.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&b.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),b.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((c,d)=>b.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:d+1}),b.jsx("span",{children:c})]},d))})]}),t.updates&&t.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((c,d)=>b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.imageUrl&&b.jsx("img",{src:c.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString():""}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:c.note})]},d))})]})]})]})}):null}function a9(){const{t:n}=Nn(),{currentUser:e}=rs(),[t,r]=q.useState([]),[i,o]=q.useState(!0),[c,d]=q.useState(!1),[h,m]=q.useState(null),[p,y]=q.useState(null),[v,w]=q.useState("All"),[A,P]=q.useState(!1),[V,L]=q.useState(""),$=10,[z,H]=q.useState(!0),F=[{value:"All",labelKey:"community"},...Lf].filter(R=>(R.value==="All"?n("community")+" (All)":n(R.labelKey)).toLowerCase().includes(V.toLowerCase()));return q.useEffect(()=>{o(!0);let R;v==="All"?R=Ta(Un(He,"posts"),V6("createdAt","desc"),YE($)):R=Ta(Un(He,"posts"),qo("plantType","==",v),YE(50));const T=bo(R,E=>{const N=E.docs.map(C=>({id:C.id,...C.data()}));N.sort((C,O)=>{const k=C.createdAt?.seconds||0;return(O.createdAt?.seconds||0)-k}),r(N),o(!1),H(E.docs.length>=$)},E=>{console.error("Error fetching posts:",E),o(!1)});return()=>T()},[v]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:n("community")}),b.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[b.jsxs("div",{className:"relative w-full sm:w-64",children:[b.jsxs("div",{className:"relative",children:[b.jsx(CI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:n("select_plant"),value:V,onFocus:()=>P(!0),onChange:R=>{L(R.target.value),P(!0)}}),v!=="All"?b.jsx("button",{onClick:()=>{w("All"),L("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:b.jsx(Aa,{className:"w-4 h-4 text-gray-500"})}):b.jsx(B_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),A&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>P(!1)}),b.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[F.map(R=>b.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{w(R.value),L(R.value==="All"?"":n(R.labelKey)),P(!1)},children:[b.jsx("span",{children:R.value==="All"?n("community"):n(R.labelKey)}),v===R.value&&b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},R.value)),F.length===0&&b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:n("no_results")||"No results"})]})]})]}),b.jsxs("button",{onClick:()=>{if(!e){alert(n("login_to_post")||"Please login to post.");return}d(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(dj,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:n("ask_question")}),b.jsx("span",{className:"sm:hidden",children:n("ask_question")})]})]})]}),i?b.jsx(lg,{}):t.length>0?b.jsx("div",{className:"space-y-6",children:t.map(R=>b.jsx(JI,{post:R,onViewAnalysis:T=>y(T),onUserClick:T=>{m({id:T,name:R.authorName||"Gardener",avatar:R.userAvatar})}},R.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:n("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:n("be_the_first")})]}),c&&b.jsx(r9,{onClose:()=>d(!1),onPostCreated:()=>{}}),p&&b.jsx(i9,{analysisId:p,onClose:()=>y(null)}),h&&b.jsx(s9,{user:h,onClose:()=>m(null)})]})}function o9({chat:n,currentUser:e}){const[t,r]=q.useState(null),{t:i}=Nn(),{addToast:o}=Ho(),c=n.participants.find(m=>m!==e.uid);q.useEffect(()=>{(async()=>{if(c)try{const p=await Na(It(He,"users",c));if(p.exists())r(p.data());else{const y=n.participantData?.[c];y&&r(y)}}catch(p){console.error("Error fetching user",p)}})()},[c,n.participantData]);const d=t||{name:"Unknown User",photoURL:null},h=async m=>{if(m.preventDefault(),!!window.confirm(i("confirm_delete_chat")||"Delete this chat permanently?"))try{await rg(It(He,"chats",n.id)),o("Chat deleted","success")}catch(p){console.error("Delete Chat Error",p),o("Failed to delete chat","error")}};return b.jsxs("div",{className:"relative group",children:[b.jsxs(kr,{to:`/messages/${n.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[b.jsx("img",{src:d.photoURL||d.avatar||`https://ui-avatars.com/api/?name=${d.name||"User"}`,alt:d.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[b.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:d.name||d.displayName||"Loading..."}),n.updatedAt&&b.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:ag(new Date(n.updatedAt.seconds*1e3),{addSuffix:!0})})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:n.lastMessage||i("new_conversation")||"Yeni Sohbet"})]})]}),b.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:b.jsx(ig,{className:"w-5 h-5"})})]})}function l9(){const{currentUser:n}=rs(),{t:e}=Nn(),[t,r]=q.useState([]),[i,o]=q.useState(!0);return q.useEffect(()=>{if(!n)return;const c=Ta(Un(He,"chats"),qo("participants","array-contains",n.uid)),d=bo(c,h=>{const m=h.docs.map(p=>({id:p.id,...p.data()})).sort((p,y)=>{const v=p.updatedAt?.seconds||0;return(y.updatedAt?.seconds||0)-v});r(m),o(!1)});return()=>d()},[n]),i?b.jsx(lg,{}):b.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:e("messages")}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:t.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500",children:e("no_messages")||"No messages yet. Start a conversation!"}):t.map(c=>b.jsx(o9,{chat:c,currentUser:n},c.id))})]})}const c9="modulepreload",u9=function(n){return"/"+n},kT={},d9=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=m(t.map(p=>{if(p=u9(p),p in kT)return;kT[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":c9,y||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),y)return new Promise((A,P)=>{w.addEventListener("load",A),w.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return i.then(d=>{for(const h of d||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},h9=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)});function f9(){const{chatId:n}=qT(),{currentUser:e}=rs(),{t}=Nn(),r=bi(),i=q.useRef(null),o=q.useRef(null),{addToast:c}=Ho(),[d,h]=q.useState([]),[m,p]=q.useState(""),[y,v]=q.useState(!0),[w,A]=q.useState(null),[P,V]=q.useState(null),[L,$]=q.useState(null),[z,H]=q.useState(!1),[X,F]=q.useState(null),[R,T]=q.useState(0),[E,N]=q.useState(null),[C,O]=q.useState(!1),[k,G]=q.useState(null),ee=pr(),[D,M]=q.useState(ee.state?.targetUser||null),[J,W]=q.useState(n==="new"?null:n);q.useEffect(()=>{n!=="new"&&W(n)},[n]),q.useEffect(()=>{n==="new"&&D&&e&&(async()=>{try{A(D);const Te=Ta(Un(He,"chats"),qo("participants","array-contains",e.uid)),Ze=(await fc(Te)).docs.find(De=>De.data().participants.includes(D.uid));Ze?(W(Ze.id),r(`/messages/${Ze.id}`,{replace:!0})):v(!1)}catch(Te){console.warn("Error checking existing chats:",Te)}})()},[n,D,e]),q.useEffect(()=>{if(n==="new"){v(!1);return}if(!J||!e)return;v(!0);const _e=bo(It(He,"chats",J),Ve=>{if(Ve.exists()){const Ze=Ve.data(),De=Ze.participants.find(Ke=>Ke!==e.uid);if(De){if(Ze.participantData?.[De]){const Ke=Ze.participantData[De];A(at=>at?.id===De?at:{...Ke,id:De})}V(De)}}else n!=="new"&&r("/messages")}),Te=bo(Un(He,"chats",J,"messages"),Ve=>{const Ze=Ve.docs.map(De=>({id:De.id,...De.data()})).sort((De,Ke)=>(De.createdAt?.seconds||0)-(Ke.createdAt?.seconds||0));h(Ze),v(!1),L||setTimeout(()=>i.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Te(),_e()}},[J,e,L,n,r]),q.useEffect(()=>{if(!P)return;const _e=bo(It(He,"users",P),Te=>{if(Te.exists()){const Ve=Te.data();A(Ze=>({...Ze,...Ve}))}});return()=>_e()},[P]);const Z=async(_e,Te=null,Ve=null,Ze="text")=>{O(!0);try{let De=J;if(!De&&n==="new"){if(!D)throw new Error("Target user missing");const{startChat:Qe}=await d9(async()=>{const{startChat:Fe}=await Promise.resolve().then(()=>xL);return{startChat:Fe}},[]);De=await Qe(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),W(De),window.history.replaceState(null,"",`/messages/${De}`)}let Ke=null,at=Ze,st=Ve;if(Te||E){let Qe=Te||E.file;if(at==="image"||E?.type==="image"){at="image",st=st||E?.file.name;const Fe={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{Qe=await un(Qe,Fe)}catch(Xe){console.warn("Compression failed, using original",Xe)}}else E&&(at=E.type,st=E.file.name);if(Ke=await h9(Qe),Ke.length>95e4)throw new Error("File is too large for database storage even after compression.")}L?(await gr(It(He,"chats",De,"messages",L),{text:_e,editedAt:Pr()}),$(null)):(await Pd(Un(He,"chats",De,"messages"),{text:_e||"",type:at,fileUrl:Ke,fileName:st,senderId:e.uid,createdAt:Pr()}),await gr(It(He,"chats",De),{lastMessage:at==="audio"?" Voice Message":at==="image"?" Photo":_e||" File",updatedAt:Pr()})),p(""),N(null)}catch(De){console.error("Send failed",De),c(De.message||"Failed to send message","error")}finally{O(!1)}},B=async _e=>{_e.preventDefault(),!(!m.trim()&&!E)&&await Z(m)},Y=async _e=>{if(window.confirm("Delete this message?"))try{await rg(It(He,"chats",n,"messages",_e)),c("Message deleted","success")}catch(Te){console.error("Delete failed",Te),c("Could not delete message","error")}},se=_e=>{if(!_e?.lastSeen)return"Offline";const Te=_e.lastSeen.seconds*1e3;return Date.now()-Te<180*1e3?"Online":`Last seen ${ag(new Date(Te),{addSuffix:!0})}`},ie=_e=>_e?.lastSeen?Date.now()-_e.lastSeen.seconds*1e3<180*1e3:!1,ne=_e=>_e?new Date(_e.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",ye=_e=>{const Te=_e.target.files[0];if(!Te)return;if(Te.size>10*1024*1024){c("File too large (Max 10MB)","error");return}const Ve=Te.type.startsWith("image/")?"image":"file",Ze=Ve==="image"?URL.createObjectURL(Te):null;N({file:Te,type:Ve,previewUrl:Ze})},Ae=_e=>{p(_e.text||""),$(_e.id),N(null),o.current&&(o.current.value="")},Me=()=>{$(null),p(""),N(null)},Re=async()=>{if(z)X&&X.state!=="inactive"&&X.stop(),H(!1);else try{const _e=await navigator.mediaDevices.getUserMedia({audio:!0}),Te=new MediaRecorder(_e),Ve=[];Te.ondataavailable=Ze=>Ve.push(Ze.data),Te.onstop=async()=>{const Ze=new Blob(Ve,{type:"audio/webm"});await Z(null,Ze,"voice_message.webm","audio"),_e.getTracks().forEach(De=>De.stop())},Te.start(),F(Te),H(!0)}catch(_e){console.error("Mic error:",_e),c("Could not access microphone","error")}};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[y&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>r("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(EV,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),w?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:w.photoURL||w.avatar||`https://ui-avatars.com/api/?name=${w.name||"User"}`,alt:w.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:w.name||w.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${ie(w)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:se(w)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(_e=>{const Te=_e.senderId===e.uid,Ve=_e.type==="audio",Ze=_e.type==="image",De=_e.type==="file";return b.jsxs("div",{className:`flex flex-col ${Te?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Te?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Te?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Ve?"min-w-[150px]":""}`,children:[Ze&&b.jsx("a",{href:_e.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:_e.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Ve&&b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>{new Audio(_e.fileUrl).play()},className:`p-2 rounded-full ${Te?"bg-green-500 text-white":"bg-gray-100 text-gray-800"}`,children:b.jsx(cj,{className:"w-4 h-4"})}),b.jsx("div",{className:"h-1 flex-1 bg-current opacity-20 rounded-full w-24"}),b.jsx("span",{className:"text-xs opacity-70",children:"Voice"})]}),De&&b.jsxs("a",{href:_e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(iT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:_e.fileName||"File"})]}),_e.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:_e.text}),_e.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Te?"text-green-100":"text-gray-400"}`,children:["(Edited ",ne(_e.editedAt),")"]})]}),Te&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ae(_e),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(II,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>Y(_e.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(ig,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:ne(_e.createdAt)})]},_e.id)}),b.jsx("div",{ref:i})]}),L&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:"Editing message..."}),b.jsx("button",{onClick:Me,children:b.jsx(Aa,{className:"w-4 h-4"})})]}),E&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[E.type==="image"?b.jsx("img",{src:E.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(LV,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:E.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Aa,{className:"w-4 h-4 text-gray-500"})})]}),b.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:[b.jsx("input",{type:"file",ref:o,onChange:ye,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>o.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:z||L,children:b.jsx(iT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:z?b.jsxs("div",{className:"flex-1 px-4 flex items-center text-red-500 animate-pulse font-medium",children:[b.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3 animate-pulse"}),"Recording... ",new Date(R*1e3).toISOString().substr(14,5)]}):b.jsx("textarea",{value:m,onChange:_e=>p(_e.target.value),placeholder:L?"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),m.trim()||E?b.jsx("button",{onClick:B,disabled:C,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:C?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(md,{className:"w-5 h-5"})}):b.jsx("button",{onClick:Re,className:`p-3 rounded-xl transition-all transform active:scale-95 shadow-lg ${z?"bg-red-500 hover:bg-red-600 text-white shadow-red-200":"bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:z?b.jsx(md,{className:"w-5 h-5"}):b.jsx(rj,{className:"w-5 h-5"})})]})]})}function DT(){const{t:n,i18n:e}=Nn(),t=bi(),{currentUser:r}=rs(),{addToast:i}=Ho(),{userId:o}=qT(),[c,d]=q.useState(null),[h,m]=q.useState(""),[p,y]=q.useState(""),[v,w]=q.useState(!1),[A,P]=q.useState([]),[V,L]=q.useState(!0),$=q.useRef(null),z=!o||r&&o===r.uid,H=o||r?.uid;q.useEffect(()=>{(async()=>{if(H){L(!0);try{const N=It(He,"users",H),C=await Na(N);let O=null;C.exists()?O={uid:C.id,...C.data()}:(O={uid:H},z&&r&&(O={...O,...r})),O&&(d(O),z?(m(O.name||O.displayName||r.displayName||""),y(O.avatar||O.photoURL||r.photoURL||"")):(m(O.name||O.displayName||"Gardener"),y(O.avatar||O.photoURL||"")));const k=Ta(Un(He,"posts"),qo("userId","==",String(H)));let ee=(await fc(k)).docs.map(D=>({id:D.id,...D.data()}));ee.sort((D,M)=>{const J=D.createdAt?.seconds||0;return(M.createdAt?.seconds||0)-J}),P(ee)}catch(N){console.error("Failed to load profile data",N)}finally{L(!1)}}})()},[H,z,r]);const X=async E=>{if(!z)return;const N=E.target.files[0];if(N){w(!0);try{const O=await un(N,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),k=await new Promise(G=>{const ee=new FileReader;ee.readAsDataURL(O),ee.onload=D=>G(D.target.result)});y(k),await b0(It(He,"users",r.uid),{avatar:k,email:r.email,name:h||r.displayName,updatedAt:new Date},{merge:!0});try{await Ky(Zr.currentUser,{photoURL:k})}catch{}T0(r.uid,h,k),i(n("profile_updated")||"Profile updated!","success")}catch(C){console.error(C),i("Error updating avatar.","error")}finally{w(!1)}}},F=async E=>{if(E.preventDefault(),!!z&&h.trim()){w(!0);try{await Ky(Zr.currentUser,{displayName:h}),await b0(It(He,"users",r.uid),{name:h,updatedAt:new Date},{merge:!0}),T0(r.uid,h,p),i(n("profile_updated")||"Profile updated!","success")}catch{i("Failed to update profile.","error")}finally{w(!1)}}};if(!H)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(V&&!c)return b.jsx(lg,{});const R=E=>!E?.lastSeen||!E.lastSeen.seconds?!1:Date.now()-E.lastSeen.seconds*1e3<180*1e3,T=E=>E?.lastSeen?ag(new Date(E.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?WI:K_}):"Offline";return b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${z?"group cursor-pointer":""} mt-2`,onClick:()=>z&&$.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(z?p:c?.avatar||c?.photoURL)?b.jsx("img",{src:z?p:c?.avatar||c?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${z?h||"Gardener":c?.name||c?.displayName||A.length>0&&A[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!z&&c&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${R(c)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R(c)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),R(c)?"Online":T(c)]}),z&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(Jl,{className:"w-8 h-8 text-white"})}),v&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(ya,{className:"animate-spin text-green-600"})})]}),z&&b.jsx("input",{type:"file",ref:$,onChange:X,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:z?h||n("gardener")||"Bahvan":c?.name||c?.displayName||A.length>0&&A[0].authorName||n("gardener")||"Bahvan"}),z&&b.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),z?b.jsxs("form",{onSubmit:F,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:h,onChange:E=>m(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[v?b.jsx(ya,{className:"animate-spin w-4 h-4"}):b.jsx(NI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",c?.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{const E={uid:c.uid||H,name:c.name||c.displayName||A.length>0&&A[0].authorName||"Gardener",photoURL:c.photoURL||c.avatar||null};t("/messages/new",{state:{targetUser:E}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(fd,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.reduce((E,N)=>E+(N.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(FV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:z?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:c?.name||"Kullanc"})||`${c?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(ya,{className:"w-8 h-8 animate-spin text-gray-300"})}):A.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:A.map(E=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(JI,{post:{...E,hideAuthor:z},onViewAnalysis:()=>{}})},E.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(YV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})})}function m9(){const{t:n,i18n:e}=Nn(),t={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:jr},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:rT},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:lT}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:jr},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:rT},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:lT}]}},r=t[e.language]||t.en;return b.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:b.jsx(TI,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),b.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("about")}),b.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',r.intro,'"']})]}),b.jsx("div",{className:"space-y-6",children:r.sections.map((i,o)=>{const c=i.icon;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:b.jsx(c,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:i.title}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:i.text})]})]},o)})})]})}function g9(){const{t:n}=Nn(),{currentUser:e}=rs();bi();const t=pr(),[r,i]=q.useState([]),[o,c]=q.useState(!0),[d,h]=q.useState(null),[m,p]=q.useState(!1),[y,v]=q.useState(null),[w,A]=q.useState(""),[P,V]=q.useState(!1),L=q.useRef(null),$=async(R,T)=>{if(R.stopPropagation(),!!window.confirm(n("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await FI(T),i(E=>E.filter(N=>N.id!==T))}catch(E){console.error("Delete failed",E),alert("Failed to delete analysis.")}};q.useEffect(()=>{e&&z()},[e]),q.useEffect(()=>{t.state?.showTreatmentGuide&&(p(!0),window.history.replaceState({},document.title))},[t]);const z=async()=>{c(!0);const R=await zI(e.uid);i(R),c(!1),t.state?.newAnalysisId?h(t.state.newAnalysisId):R.length>0&&t.state?.showTreatmentGuide&&h(R[0].id)},H=R=>{h(T=>T===R?null:R),v(null)},X=async(R,T)=>{if(R.stopPropagation(),!T.isPublic&&window.confirm(n("confirm_share")||"Share this diagnosis with the community?"))try{await HI(T.id,T,T.plantType||"plant",e.displayName||n("gardener")||"Bahvan",e.photoURL),i(E=>E.map(N=>N.id===T.id?{...N,isPublic:!0}:N))}catch(E){console.error("Share failed",E),alert("Failed to share.")}},F=async R=>{if(w.trim()){V(!0);try{let T=null;if(L.current?.files?.[0]){const E=L.current.files[0];T=await new Promise(N=>{const C=new FileReader;C.onload=O=>N(O.target.result),C.readAsDataURL(E)})}await $I(R.id,T,w),v(null),A(""),z()}catch(T){console.error("Feedback failed",T),alert("Failed to save update.")}finally{V(!1)}}};return o?b.jsx(lg,{}):r.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(jr,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:n("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:n("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(kr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(Jl,{className:"w-5 h-5"}),n("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(F_,{className:"w-7 h-7 text-green-600"}),n("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[r.length," ",n("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:r.map(R=>b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===R.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:T=>$(T,R.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:n("delete"),children:b.jsx(ig,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>H(R.id),children:[b.jsx("img",{src:R.mainImage,alt:R.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:R.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(EI,{className:"w-3 h-3"}),R.createdAt?.seconds?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),R.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:R.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(RV,{className:"w-4 h-4"}),b.jsx("span",{children:"7 Gnlk Program"})]}),R.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(w0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(B_,{className:`w-6 h-6 text-gray-300 transition-transform ${d===R.id?"rotate-180":""}`})})]}),d===R.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(oT,{className:"w-5 h-5 text-green-600"}),R.result.is_treatable===!1?n("preventive_measures")||"Koruyucu nlemler":n("treatment_steps")||"Tedavi Admlar"]}),R.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(R.result.is_treatable===!1?R.result.preventive_measures:R.result.treatment_steps)?.map((T,E)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${R.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:E+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:T})]},E))})]}),R.updates&&R.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:R.updates.map((T,E)=>b.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm",children:[T.imageUrl&&b.jsx("img",{src:T.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(T.createdAt?.seconds*1e3).toLocaleDateString()}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:T.note})]},E))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===R.id?null:R.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(Jl,{className:"w-5 h-5"}),n("add_update")||"Gelime Ekle"]}),b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsxs("button",{onClick:T=>X(T,R),disabled:R.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${R.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(w0,{className:"w-5 h-5"}),R.isPublic?n("shared")||"Paylald":n("share")||"Payla"]}),!R.isPublic&&b.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:n("share_help_others")||"Toplulukla paylaarak bakalarna yardmc ol!"})]})]}),y===R.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[b.jsx("textarea",{value:w,onChange:T=>A(T.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:L,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),b.jsx("button",{onClick:()=>F(R),disabled:P,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:P?b.jsx(ya,{className:"w-5 h-5 animate-spin"}):b.jsx(md,{className:"w-5 h-5"})})]})]})]})]},R.id))}),m&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(PV,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(oT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(Jl,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>p(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}var OT={},p9="@vercel/analytics",y9="1.6.1",_9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function uR(){return typeof window<"u"}function dR(){try{const n="production"}catch{}return"production"}function v9(n="auto"){if(n==="auto"){window.vam=dR();return}window.vam=n}function b9(){return(uR()?window.vam:dR())||"production"}function A0(){return b9()==="development"}function w9(n){return n.scriptSrc?n.scriptSrc:A0()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function x9(n={debug:!0}){var e;if(!uR())return;v9(n.mode),_9(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=w9(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=p9+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=y9,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=A0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},A0()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function E9({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function T9(){if(!(typeof process>"u"||typeof OT>"u"))return OT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function A9(n){return q.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),q.useEffect(()=>{x9({framework:n.framework||"react",basePath:n.basePath??T9(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),q.useEffect(()=>{n.route&&n.path&&E9({route:n.route,path:n.path})},[n.route,n.path]),null}function S9(){return b.jsxs(Uj,{children:[b.jsxs(YC,{children:[b.jsxs(Cr,{path:"/",element:b.jsx(zj,{}),children:[b.jsx(Cr,{index:!0,element:b.jsx(AL,{})}),b.jsx(Cr,{path:"community",element:b.jsx(a9,{})}),b.jsx(Cr,{path:"messages",element:b.jsx(l9,{})}),b.jsx(Cr,{path:"messages/:chatId",element:b.jsx(f9,{})}),b.jsx(Cr,{path:"analyses",element:b.jsx(g9,{})}),b.jsx(Cr,{path:"profile",element:b.jsx(DT,{})}),b.jsx(Cr,{path:"profile/:userId",element:b.jsx(DT,{})}),b.jsx(Cr,{path:"about",element:b.jsx(m9,{})})]}),b.jsx(Cr,{path:"/login",element:b.jsx(Fj,{})}),b.jsx(Cr,{path:"/register",element:b.jsx(qj,{})})]}),b.jsx(A9,{})]})}const I9="Plant AI",R9="Welcome to Plant AI",N9="Plant Diagnosis",C9="Community",k9="Profile",D9="Login",O9="Messages",M9="Language",P9="Logout",V9="Dark Mode",j9="Light Mode",L9="My Analyses",U9="Register",z9="Upload Photo",F9="Take Photo",B9="Analyzing...",q9="Diagnosis Results",H9="Treatment",$9="Confidence",G9="Save Changes",K9="Saving...",Y9="Display Name",Q9="Email",X9="Tap to change avatar",W9="Profile updated successfully!",J9="About Project",Z9="Do you know the name of this plant?",e8="e.g., Rose, Tomato, Unknown...",t8="1. Plant Name",n8="2. Capture Photo",r8="Next",s8="I don't know",i8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",a8="Take Close-up Photo",o8="Login to view detailed diagnosis and treatment plan.",l8="Login to View Results",c8="Detailed analysis is available for members only.",u8="AI Powered Plant Doctor",d8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',h8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",f8="Start Diagnosis",m8="Identify",g8="Tell us the plant name or type.",p8="Analyze",y8="Upload photos of the affected area.",_8="Heal",v8="Get instant treatment plan.",b8="Welcome, ",w8="Diagnosis failed. Please try again.",x8="Back",E8="Tomato",T8="Pepper",A8="Cucumber",S8="Rose",I8="Succulent",R8="Orchid",N8="Lemon",C8="Strawberry",k8="Mint",D8="Other",O8="Healthy / No Issue",M8="Yellowing Leaves",P8="Leaf Spots",V8="Wilting",j8="Pests / Bugs",L8="Root/Stem Rot",U8="Mold / Fungus",z8="Unknown / Help Needed",F8="Auto-Detect from Image",B8="Detecting...",q8="Ask Question",H8="Please login to post.",$8="Login Required",G8="Are you sure you want to delete this post?",K8="Just now",Y8="Failed to delete post",Q8="Failed to post comment",X8="Failed to update post",W8="Add a comment...",J8="Please login to comment.",Z8="No comments yet. Be the first!",e7="Edit Post",t7="Cancel",n7="Save",r7="Gardener",s7="Community Member",i7="Send Message",a7="Starting...",o7="Please login to message users.",l7="You cannot message yourself.",c7="Failed to start chat.",u7=" No posts yet",d7="Be the first to share your garden!",h7="No results",f7="Like",m7="Comment",g7="Edit",p7="Joined",y7="Unknown Date",_7="View Profile",v7="Block User",b7="Unblock User",w7="Posts",x7="Likes",E7="My Posts",T7="{{name}}'s Posts",A7="New Chat",S7="View Analysis Report",I7="Type a message...",R7="POWERED BY GEMINI AI",N7="Heal your plants with",C7="AI Precision",k7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",D7="Instant Analysis",O7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",M7="Smart Interactions",P7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",V7="Verified Treatments",j7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",L7="Your Personal Pocket Botanist",U7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",z7="Open Camera",F7="Select from Gallery",B7="No plant detected. Please ensure the subject is a clear plant or leaf.",q7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",H7="Retry",$7="Camera access denied. Please check your browser permissions.",G7={app_name:I9,welcome:R9,plant_diagnosis:N9,community:C9,profile:k9,login:D9,messages:O9,language:M9,logout:P9,dark_mode:V9,light_mode:j9,analyses:L9,register:U9,upload_photo:z9,take_photo:F9,analyzing:B9,results:q9,treatment:H9,confidence:$9,save_changes:G9,saving:K9,display_name:Y9,email:Q9,change_avatar:X9,profile_updated:W9,about:J9,what_plant_question:Z9,what_plant_placeholder:e8,scan_step_1:t8,scan_step_2:n8,next_step:r8,skip:s8,need_macro_photo:i8,take_macro_photo:a8,login_blur_text:o8,login_to_view:l8,guest_limited:c8,hero_badge:u8,hero_title:d8,hero_desc:h8,start_diagnosis:f8,step_1_title:m8,step_1_desc:g8,step_2_title:p8,step_2_desc:y8,step_3_title:_8,step_3_desc:v8,welcome_user:b8,error_diagnosis_failed:w8,back:x8,plant_tomato:E8,plant_pepper:T8,plant_cucumber:A8,plant_rose:S8,plant_succulent:I8,plant_orchid:R8,plant_lemon:N8,plant_strawberry:C8,plant_mint:k8,plant_other:D8,disease_none:O8,disease_yellowing:M8,disease_spots:P8,disease_wilting:V8,disease_bugs:j8,disease_rot:L8,disease_mold:U8,disease_unknown:z8,auto_detect:F8,detecting:B8,ask_question:q8,login_to_post:H8,login_required:$8,confirm_delete_post:G8,just_now:K8,failed_delete_post:Y8,failed_post_comment:Q8,failed_update_post:X8,add_comment_placeholder:W8,login_to_comment:J8,no_comments_yet:Z8,edit_post:e7,cancel:t7,save:n7,gardener:r7,community_member:s7,send_message:i7,starting_chat:a7,login_to_message:o7,cannot_message_self:l7,failed_start_chat:c7,no_posts_yet:u7,be_the_first:d7,no_results:h7,like:f7,comment:m7,edit:g7,delete:"Delete",joined:p7,unknown_date:y7,view_profile:_7,block_user:v7,unblock_user:b7,posts:w7,likes:x7,my_posts:E7,user_posts_title:T7,new_conversation:A7,view_analysis_report:S7,type_message:I7,ai_powered_v2:R7,hero_title_1:N7,hero_title_highlight:C7,hero_desc_v2:k7,feature_1_title:D7,feature_1_desc:O7,feature_2_title:M7,feature_2_desc:P7,feature_3_title:V7,feature_3_desc:j7,summary_title:L7,summary_desc:U7,open_camera:z7,upload_gallery:F7,error_not_plant:B7,error_server_busy:q7,retry:H7,camera_permission_denied:$7},K7="Bitki AI",Y7="Bitki AI'ye Hogeldiniz",Q7="Bitki Tehisi",X7="Topluluk",W7="Profil",J7="Giri Yap",Z7="Mesajlar",ez="Dil",tz="k Yap",nz="Koyu Tema",rz="Aydnlk Tema",sz="Analizlerim",iz="Kayt Ol",az="Fotoraf Ykle",oz="Fotoraf ek",lz="Analiz ediliyor...",cz="Domates",uz="Biber",dz="Salatalk",hz="Patlcan",fz="Patates",mz="Soan",gz="Sarmsak",pz="Marul",yz="Ispanak",_z="Havu",vz="Fasulye",bz="Msr",wz="Kabak",xz="ilek",Ez="Limon",Tz="Portakal",Az="Elma",Sz="zm",Iz="Karpuz",Rz="Kavun",Nz="Kiraz",Cz="eftali",kz="Gl",Dz="Orkide",Oz="Sukulent",Mz="Lale",Pz="Ayiei",Vz="Papatya",jz="Lavanta",Lz="Kakts",Uz="Zeytin",zz="am",Fz="Palmiye",Bz="Nane",qz="Fesleen",Hz="Biberiye",$z="Maydanoz",Gz="Dier",Kz="Salkl / Sorun Yok",Yz="Yaprak Sararmas",Qz="Yaprak Lekeleri",Xz="Solma",Wz="Bcek / Haere",Jz="Kk/Gvde rmesi",Zz="Kf / Mantar",eF="Mildiy",tF="Besin Eksiklii",nF="Bilinmiyor / Yardm Lazm",rF="Fotoraftan Bul",sF="Taranyor...",iF="Bitki Se...",aF="Tehis Sonular",oF="Tedavi",lF="Gven Oran",cF="Deiiklikleri Kaydet",uF="Analizi Kaydet",dF="Kaydedildi",hF="Analiz baaryla kaydedildi!",fF="Bu analiz zaten toplulukla paylald.",mF="Bu analizi toplulukla paylamak istiyor musunuz?",gF="Baaryla paylald!",pF="Analizlerim",yF="Kaydediliyor...",_F="Grnen sim",vF="E-posta",bF="Fotoraf deitirmek iin dokunun",wF="Profil baaryla gncellendi!",xF="Proje Hakknda",EF="Bu bitkinin adn biliyor musunuz?",TF="rn. Gl, Domates, Bilmiyorum...",AF="1. Bitki Ad",SF="2. Fotoraf ek",IF="Devam Et",RF="Bilmiyorum",NF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",CF="Yakndan ek",kF="Detayl tehis ve tedavi plann grmek iin giri yapn.",DF="Sonucu Grmek in Giri Yap",OF="Detayl analiz sadece yelere zeldir.",MF="Yapay Zeka Destekli Bitki Doktoru",PF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',VF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",jF="Tehise Bala",LF="Tanmla",UF="Bitkinin adn veya trn belirtin.",zF="Analiz Et",FF="Etkilenen blgenin fotorafn ykleyin.",BF="yiletir",qF="Annda tedavi planna kavuun.",HF="Hogeldin, ",$F="Tehis baarsz oldu. Ltfen tekrar deneyin.",GF="Geri",KF="Az nce",YF="Bu gnderiyi silmek istediinize emin misiniz?",QF="Gnderi silinemedi",XF="Yorum gnderilemedi",WF="Gnderi gncellenemedi",JF="Yorum yaz...",ZF="Yorum yapmak iin giri yapn.",eB="Henz yorum yok. lk yorumu sen yap!",tB="Gnderiyi Dzenle",nB="ptal",rB="Kaydet",sB="Bahvan",iB="Topluluk yesi",aB="Mesaj Gnder",oB="Balatlyor...",lB="Mesaj gndermek iin giri yapn.",cB="Kendinize mesaj atamazsnz.",uB="Sohbet balatlamad.",dB=" Henz gnderi yok",hB="Baheni paylaan ilk kii ol!",fB="Sonu yok",mB="Been",gB="Yorum",pB="Dzenle",yB="Ad Soyad",_B="ifre",vB="Toplulua katlmak iin hesap oluturun.",bB="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",wB="E-postanz Dorulayn",xB="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",EB="E-posta Uygulamasn A",TB="Doruladm, Giri Yap",AB="Zaten hesabnz var m?",SB="Katlma Tarihi",IB="Bilinmiyor",RB="Profili Gr",NB="Kullancy Engelle",CB="Engeli Kaldr",kB="Gnderi",DB="Beeni",OB="Gnderilerim",MB="{{name}} Gnderileri",PB="Yeni Sohbet",VB="Analiz Raporunu Gr",jB="Mesaj yazn...",LB="GEMINI AI DESTEKL",UB="Bitkilerinizi yiletirin",zB="Yapay Zeka Hassasiyeti",FB="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",BB="Annda Analiz",qB="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",HB="Akll Etkileimler",$B="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",GB="Dorulanm Tedaviler",KB="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",YB="Kiisel Cep Botanikiniz",QB="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",XB="Kameray A",WB="Galeriden Se",JB="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",ZB="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",eq="Tekrar Dene",tq="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",nq={app_name:K7,welcome:Y7,plant_diagnosis:Q7,community:X7,profile:W7,login:J7,messages:Z7,language:ez,logout:tz,dark_mode:nz,light_mode:rz,analyses:sz,register:iz,upload_photo:az,take_photo:oz,analyzing:lz,plant_tomato:cz,plant_pepper:uz,plant_cucumber:dz,plant_eggplant:hz,plant_potato:fz,plant_onion:mz,plant_garlic:gz,plant_lettuce:pz,plant_spinach:yz,plant_carrot:_z,plant_bean:vz,plant_corn:bz,plant_zucchini:wz,plant_strawberry:xz,plant_lemon:Ez,plant_orange:Tz,plant_apple:Az,plant_grape:Sz,plant_watermelon:Iz,plant_melon:Rz,plant_cherry:Nz,plant_peach:Cz,plant_rose:kz,plant_orchid:Dz,plant_succulent:Oz,plant_tulip:Mz,plant_sunflower:Pz,plant_daisy:Vz,plant_lavender:jz,plant_cactus:Lz,plant_olive:Uz,plant_pine:zz,plant_palm:Fz,plant_mint:Bz,plant_basil:qz,plant_rosemary:Hz,plant_parsley:$z,plant_other:Gz,disease_none:Kz,disease_yellowing:Yz,disease_spots:Qz,disease_wilting:Xz,disease_bugs:Wz,disease_rot:Jz,disease_mold:Zz,disease_mildew:eF,disease_nutrient:tF,disease_unknown:nF,auto_detect:rF,detecting:sF,select_plant:iF,results:aF,treatment:oF,confidence:lF,save_changes:cF,save_analysis:uF,saved:dF,save_success:hF,already_shared:fF,confirm_share:mF,share_success:gF,my_analyses:pF,saving:yF,display_name:_F,email:vF,change_avatar:bF,profile_updated:wF,about:xF,what_plant_question:EF,what_plant_placeholder:TF,scan_step_1:AF,scan_step_2:SF,next_step:IF,skip:RF,need_macro_photo:NF,take_macro_photo:CF,login_blur_text:kF,login_to_view:DF,guest_limited:OF,hero_badge:MF,hero_title:PF,hero_desc:VF,start_diagnosis:jF,step_1_title:LF,step_1_desc:UF,step_2_title:zF,step_2_desc:FF,step_3_title:BF,step_3_desc:qF,welcome_user:HF,error_diagnosis_failed:$F,back:GF,just_now:KF,confirm_delete_post:YF,failed_delete_post:QF,failed_post_comment:XF,failed_update_post:WF,add_comment_placeholder:JF,login_to_comment:ZF,no_comments_yet:eB,edit_post:tB,cancel:nB,save:rB,gardener:sB,community_member:iB,send_message:aB,starting_chat:oB,login_to_message:lB,cannot_message_self:cB,failed_start_chat:uB,no_posts_yet:dB,be_the_first:hB,no_results:fB,like:mB,comment:gB,edit:pB,delete:"Sil",full_name:yB,password:_B,create_account_desc:vB,verification_email_sent:bB,verify_email_title:wB,verify_email_desc:xB,open_email_app:EB,i_verified_it:TB,already_have_account:AB,joined:SB,unknown_date:IB,view_profile:RB,block_user:NB,unblock_user:CB,posts:kB,likes:DB,my_posts:OB,user_posts_title:MB,new_conversation:PB,view_analysis_report:VB,type_message:jB,ai_powered_v2:LB,hero_title_1:UB,hero_title_highlight:zB,hero_desc_v2:FB,feature_1_title:BB,feature_1_desc:qB,feature_2_title:HB,feature_2_desc:$B,feature_3_title:GB,feature_3_desc:KB,summary_title:YB,summary_desc:QB,open_camera:XB,upload_gallery:WB,error_not_plant:JB,error_server_busy:ZB,retry:eq,camera_permission_denied:tq};$n.use(s4).init({resources:{en:{translation:G7},tr:{translation:nq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});ZN.createRoot(document.getElementById("root")).render(b.jsx(q.StrictMode,{children:b.jsx(DI,{children:b.jsx(yk,{children:b.jsx(gV,{children:b.jsx(S9,{})})})})}));
