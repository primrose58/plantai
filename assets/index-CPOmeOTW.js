(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function EN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ey={exports:{}},ku={};var zw;function TN(){if(zw)return ku;zw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:o}}return ku.Fragment=e,ku.jsx=t,ku.jsxs=t,ku}var Fw;function SN(){return Fw||(Fw=1,Ey.exports=TN()),Ey.exports}var _=SN(),Ty={exports:{}},qe={};var Bw;function AN(){if(Bw)return qe;Bw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=v&&$[v]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function L($,K,ne){this.props=$,this.context=K,this.refs=M,this.updater=ne||x}L.prototype.isReactComponent={},L.prototype.setState=function($,K){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,K,"setState")},L.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F(){}F.prototype=L.prototype;function B($,K,ne){this.props=$,this.context=K,this.refs=M,this.updater=ne||x}var H=B.prototype=new F;H.constructor=B,N(H,L.prototype),H.isPureReactComponent=!0;var Y=Array.isArray;function U(){}var I={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E($,K,ne){var te=ne.ref;return{$$typeof:n,type:$,key:K,ref:te!==void 0?te:null,props:ne}}function R($,K){return E($.type,K,$.props)}function C($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function j($){var K={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ne){return K[ne]})}var D=/\/+/g;function G($,K){return typeof $=="object"&&$!==null&&$.key!=null?j(""+$.key):K.toString(36)}function ee($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(U,U):($.status="pending",$.then(function(K){$.status==="pending"&&($.status="fulfilled",$.value=K)},function(K){$.status==="pending"&&($.status="rejected",$.reason=K)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function P($,K,ne,te,se){var _e=typeof $;(_e==="undefined"||_e==="boolean")&&($=null);var Re=!1;if($===null)Re=!0;else switch(_e){case"bigint":case"string":case"number":Re=!0;break;case"object":switch($.$$typeof){case n:case e:Re=!0;break;case g:return Re=$._init,P(Re($._payload),K,ne,te,se)}}if(Re)return se=se($),Re=te===""?"."+G($,0):te,Y(se)?(ne="",Re!=null&&(ne=Re.replace(D,"$&/")+"/"),P(se,K,ne,"",function(Ue){return Ue})):se!=null&&(C(se)&&(se=R(se,ne+(se.key==null||$&&$.key===se.key?"":(""+se.key).replace(D,"$&/")+"/")+Re)),K.push(se)),1;Re=0;var we=te===""?".":te+":";if(Y($))for(var ye=0;ye<$.length;ye++)te=$[ye],_e=we+G(te,ye),Re+=P(te,K,ne,_e,se);else if(ye=w($),typeof ye=="function")for($=ye.call($),ye=0;!(te=$.next()).done;)te=te.value,_e=we+G(te,ye++),Re+=P(te,K,ne,_e,se);else if(_e==="object"){if(typeof $.then=="function")return P(ee($),K,ne,te,se);throw K=String($),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Re}function O($,K,ne){if($==null)return $;var te=[],se=0;return P($,te,"","",function(_e){return K.call(ne,_e,se++)}),te}function X($){if($._status===-1){var K=$._result;K=K(),K.then(function(ne){($._status===0||$._status===-1)&&($._status=1,$._result=ne)},function(ne){($._status===0||$._status===-1)&&($._status=2,$._result=ne)}),$._status===-1&&($._status=0,$._result=K)}if($._status===1)return $._result.default;throw $._result}var W=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Z={map:O,forEach:function($,K,ne){O($,function(){K.apply(this,arguments)},ne)},count:function($){var K=0;return O($,function(){K++}),K},toArray:function($){return O($,function(K){return K})||[]},only:function($){if(!C($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return qe.Activity=y,qe.Children=Z,qe.Component=L,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=B,qe.StrictMode=r,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,qe.__COMPILER_RUNTIME={__proto__:null,c:function($){return I.H.useMemoCache($)}},qe.cache=function($){return function(){return $.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function($,K,ne){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var te=N({},$.props),se=$.key;if(K!=null)for(_e in K.key!==void 0&&(se=""+K.key),K)!T.call(K,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&K.ref===void 0||(te[_e]=K[_e]);var _e=arguments.length-2;if(_e===1)te.children=ne;else if(1<_e){for(var Re=Array(_e),we=0;we<_e;we++)Re[we]=arguments[we+2];te.children=Re}return E($.type,se,te)},qe.createContext=function($){return $={$$typeof:c,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},qe.createElement=function($,K,ne){var te,se={},_e=null;if(K!=null)for(te in K.key!==void 0&&(_e=""+K.key),K)T.call(K,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(se[te]=K[te]);var Re=arguments.length-2;if(Re===1)se.children=ne;else if(1<Re){for(var we=Array(Re),ye=0;ye<Re;ye++)we[ye]=arguments[ye+2];se.children=we}if($&&$.defaultProps)for(te in Re=$.defaultProps,Re)se[te]===void 0&&(se[te]=Re[te]);return E($,_e,se)},qe.createRef=function(){return{current:null}},qe.forwardRef=function($){return{$$typeof:u,render:$}},qe.isValidElement=C,qe.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:X}},qe.memo=function($,K){return{$$typeof:f,type:$,compare:K===void 0?null:K}},qe.startTransition=function($){var K=I.T,ne={};I.T=ne;try{var te=$(),se=I.S;se!==null&&se(ne,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(U,W)}catch(_e){W(_e)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),I.T=K}},qe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},qe.use=function($){return I.H.use($)},qe.useActionState=function($,K,ne){return I.H.useActionState($,K,ne)},qe.useCallback=function($,K){return I.H.useCallback($,K)},qe.useContext=function($){return I.H.useContext($)},qe.useDebugValue=function(){},qe.useDeferredValue=function($,K){return I.H.useDeferredValue($,K)},qe.useEffect=function($,K){return I.H.useEffect($,K)},qe.useEffectEvent=function($){return I.H.useEffectEvent($)},qe.useId=function(){return I.H.useId()},qe.useImperativeHandle=function($,K,ne){return I.H.useImperativeHandle($,K,ne)},qe.useInsertionEffect=function($,K){return I.H.useInsertionEffect($,K)},qe.useLayoutEffect=function($,K){return I.H.useLayoutEffect($,K)},qe.useMemo=function($,K){return I.H.useMemo($,K)},qe.useOptimistic=function($,K){return I.H.useOptimistic($,K)},qe.useReducer=function($,K,ne){return I.H.useReducer($,K,ne)},qe.useRef=function($){return I.H.useRef($)},qe.useState=function($){return I.H.useState($)},qe.useSyncExternalStore=function($,K,ne){return I.H.useSyncExternalStore($,K,ne)},qe.useTransition=function(){return I.H.useTransition()},qe.version="19.2.3",qe}var qw;function Um(){return qw||(qw=1,Ty.exports=AN()),Ty.exports}var z=Um();const RN=EN(z);var Sy={exports:{}},Iu={},Ay={exports:{}},Ry={};var Hw;function kN(){return Hw||(Hw=1,(function(n){function e(P,O){var X=P.length;P.push(O);e:for(;0<X;){var W=X-1>>>1,Z=P[W];if(0<i(Z,O))P[W]=O,P[X]=Z,X=W;else break e}}function t(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var O=P[0],X=P.pop();if(X!==O){P[0]=X;e:for(var W=0,Z=P.length,$=Z>>>1;W<$;){var K=2*(W+1)-1,ne=P[K],te=K+1,se=P[te];if(0>i(ne,X))te<Z&&0>i(se,ne)?(P[W]=se,P[te]=X,W=te):(P[W]=ne,P[K]=X,W=K);else if(te<Z&&0>i(se,X))P[W]=se,P[te]=X,W=te;else break e}}return O}function i(P,O){var X=P.sortIndex-O.sortIndex;return X!==0?X:P.id-O.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,v=3,w=!1,x=!1,N=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(P){for(var O=t(f);O!==null;){if(O.callback===null)r(f);else if(O.startTime<=P)r(f),O.sortIndex=O.expirationTime,e(h,O);else break;O=t(f)}}function Y(P){if(N=!1,H(P),!x)if(t(h)!==null)x=!0,U||(U=!0,j());else{var O=t(f);O!==null&&ee(Y,O.startTime-P)}}var U=!1,I=-1,T=5,E=-1;function R(){return M?!0:!(n.unstable_now()-E<T)}function C(){if(M=!1,U){var P=n.unstable_now();E=P;var O=!0;try{e:{x=!1,N&&(N=!1,F(I),I=-1),w=!0;var X=v;try{t:{for(H(P),y=t(h);y!==null&&!(y.expirationTime>P&&R());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var Z=W(y.expirationTime<=P);if(P=n.unstable_now(),typeof Z=="function"){y.callback=Z,H(P),O=!0;break t}y===t(h)&&r(h),H(P)}else r(h);y=t(h)}if(y!==null)O=!0;else{var $=t(f);$!==null&&ee(Y,$.startTime-P),O=!1}}break e}finally{y=null,v=X,w=!1}O=void 0}}finally{O?j():U=!1}}}var j;if(typeof B=="function")j=function(){B(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,G=D.port2;D.port1.onmessage=C,j=function(){G.postMessage(null)}}else j=function(){L(C,0)};function ee(P,O){I=L(function(){P(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(P){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var X=v;v=O;try{return P()}finally{v=X}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var X=v;v=P;try{return O()}finally{v=X}},n.unstable_scheduleCallback=function(P,O,X){var W=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=X+Z,P={id:g++,callback:O,priorityLevel:P,startTime:X,expirationTime:Z,sortIndex:-1},X>W?(P.sortIndex=X,e(f,P),t(h)===null&&P===t(f)&&(N?(F(I),I=-1):N=!0,ee(Y,X-W))):(P.sortIndex=Z,e(h,P),x||w||(x=!0,U||(U=!0,j()))),P},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(P){var O=v;return function(){var X=v;v=O;try{return P.apply(this,arguments)}finally{v=X}}}})(Ry)),Ry}var $w;function IN(){return $w||($w=1,Ay.exports=kN()),Ay.exports}var ky={exports:{}},Ln={};var Gw;function NN(){if(Gw)return Ln;Gw=1;var n=Um();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},Ln.flushSync=function(h){var f=c.T,g=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=g,r.d.f()}},Ln.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ln.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ln.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ln.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ln.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ln.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ln.requestFormReset=function(h){r.d.r(h)},Ln.unstable_batchedUpdates=function(h,f){return h(f)},Ln.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ln.version="19.2.3",Ln}var Kw;function CN(){if(Kw)return ky.exports;Kw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ky.exports=NN(),ky.exports}var Yw;function DN(){if(Yw)return Iu;Yw=1;var n=IN(),e=Um(),t=CN();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var l=s,d=a;;){var p=l.return;if(p===null)break;var b=p.alternate;if(b===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===l)return h(p),s;if(b===d)return h(p),a;b=b.sibling}throw Error(r(188))}if(l.return!==d.return)l=p,d=b;else{for(var A=!1,V=p.child;V;){if(V===l){A=!0,l=p,d=b;break}if(V===d){A=!0,d=p,l=b;break}V=V.sibling}if(!A){for(V=b.child;V;){if(V===l){A=!0,l=b,d=p;break}if(V===d){A=!0,d=b,l=p;break}V=V.sibling}if(!A)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case L:return"Profiler";case M:return"StrictMode";case Y:return"Suspense";case U:return"SuspenseList";case E:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case B:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:G(s.type)||"Memo";case T:a=s._payload,s=s._init;try{return G(s(a))}catch{}}return null}var ee=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},W=[],Z=-1;function $(s){return{current:s}}function K(s){0>Z||(s.current=W[Z],W[Z]=null,Z--)}function ne(s,a){Z++,W[Z]=s.current,s.current=a}var te=$(null),se=$(null),_e=$(null),Re=$(null);function we(s,a){switch(ne(_e,a),ne(se,s),ne(te,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?cw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=cw(a),s=uw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(te),ne(te,s)}function ye(){K(te),K(se),K(_e)}function Ue(s){s.memoizedState!==null&&ne(Re,s);var a=te.current,l=uw(a,s.type);a!==l&&(ne(se,s),ne(te,l))}function Je(s){se.current===s&&(K(te),K(se)),Re.current===s&&(K(Re),Tu._currentValue=X)}var Ke,ct;function Xe(s){if(Ke===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ke=a&&a[1]||"",ct=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+s+ct}var tt=!1;function At(s,a){if(!s||tt)return"";tt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(de){var ce=de}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(de){ce=de}s.call(ge.prototype)}}else{try{throw Error()}catch(de){ce=de}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],V=b[1];if(A&&V){var Q=A.split(`
`),le=V.split(`
`);for(p=d=0;d<Q.length&&!Q[d].includes("DetermineComponentFrameRoot");)d++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(d===Q.length||p===le.length)for(d=Q.length-1,p=le.length-1;1<=d&&0<=p&&Q[d]!==le[p];)p--;for(;1<=d&&0<=p;d--,p--)if(Q[d]!==le[p]){if(d!==1||p!==1)do if(d--,p--,0>p||Q[d]!==le[p]){var fe=`
`+Q[d].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=d&&0<=p);break}}}finally{tt=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Xe(l):""}function ut(s,a){switch(s.tag){case 26:case 27:case 5:return Xe(s.type);case 16:return Xe("Lazy");case 13:return s.child!==a&&a!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return At(s.type,!1);case 11:return At(s.type.render,!1);case 1:return At(s.type,!0);case 31:return Xe("Activity");default:return""}}function dt(s){try{var a="",l=null;do a+=ut(s,l),l=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ye=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,Se=n.unstable_cancelCallback,He=n.unstable_shouldYield,je=n.unstable_requestPaint,Te=n.unstable_now,at=n.unstable_getCurrentPriorityLevel,_t=n.unstable_ImmediatePriority,Gn=n.unstable_UserBlockingPriority,mt=n.unstable_NormalPriority,Kn=n.unstable_LowPriority,qt=n.unstable_IdlePriority,Pn=n.log,Tn=n.unstable_setDisableYieldValue,Yt=null,Rt=null;function tn(s){if(typeof Pn=="function"&&Tn(s),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Yt,s)}catch{}}var Ot=Math.clz32?Math.clz32:Ua,Zo=Math.log,hs=Math.LN2;function Ua(s){return s>>>=0,s===0?32:31-(Zo(s)/hs|0)|0}var jn=256,Js=262144,vt=4194304;function mn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Sn(s,a,l){var d=s.pendingLanes;if(d===0)return 0;var p=0,b=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var V=d&134217727;return V!==0?(d=V&~b,d!==0?p=mn(d):(A&=V,A!==0?p=mn(A):l||(l=V&~s,l!==0&&(p=mn(l))))):(V=d&~b,V!==0?p=mn(V):A!==0?p=mn(A):l||(l=d&~s,l!==0&&(p=mn(l)))),p===0?0:a!==0&&a!==p&&(a&b)===0&&(b=p&-p,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:p}function An(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function el(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(){var s=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),s}function _n(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function za(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function kg(s,a,l,d,p,b){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var V=s.entanglements,Q=s.expirationTimes,le=s.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-Ot(l),ge=1<<fe;V[fe]=0,Q[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var de=ce[fe];de!==null&&(de.lane&=-536870913)}l&=~ge}d!==0&&Fa(s,d,0),b!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=b&~(A&~a))}function Fa(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Ot(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|l&261930}function Ic(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var d=31-Ot(l),p=1<<d;p&a|s[d]&a&&(s[d]|=a),l&=~p}}function Nc(s,a){var l=a&-a;return l=(l&42)!==0?1:Ba(l),(l&(s.suspendedLanes|a))!==0?0:l}function Ba(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Zs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qd(){var s=O.p;return s!==0?s:(s=window.event,s===void 0?32:Ow(s.type))}function Qr(s,a){var l=O.p;try{return O.p=s,a()}finally{O.p=l}}var Wr=Math.random().toString(36).slice(2),nn="__reactFiber$"+Wr,vn="__reactProps$"+Wr,fs="__reactContainer$"+Wr,tl="__reactEvents$"+Wr,Ig="__reactListeners$"+Wr,Wd="__reactHandles$"+Wr,Xd="__reactResources$"+Wr,ms="__reactMarker$"+Wr;function nl(s){delete s[nn],delete s[vn],delete s[tl],delete s[Ig],delete s[Wd]}function gs(s){var a=s[nn];if(a)return a;for(var l=s.parentNode;l;){if(a=l[fs]||l[nn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=yw(s);s!==null;){if(l=s[nn])return l;s=yw(s)}return a}s=l,l=s.parentNode}return null}function Nr(s){if(s=s[nn]||s[fs]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function dr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function ps(s){var a=s[Xd];return a||(a=s[Xd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rn(s){s[ms]=!0}var Cc=new Set,Dc={};function ys(s,a){_s(s,a),_s(s+"Capture",a)}function _s(s,a){for(Dc[s]=a,s=0;s<a.length;s++)Cc.add(a[s])}var Oc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mc={},Pc={};function Jd(s){return Ye.call(Pc,s)?!0:Ye.call(Mc,s)?!1:Oc.test(s)?Pc[s]=!0:(Mc[s]=!0,!1)}function rl(s,a,l){if(Jd(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function hr(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function sn(s,a,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+d)}}function bn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Pi(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function jc(s,a,l){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,b=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,b.call(this,A)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function bt(s){if(!s._valueTracker){var a=Pi(s)?"checked":"value";s._valueTracker=jc(s,a,""+s[a])}}function qa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return s&&(d=Pi(s)?s.checked?"true":"false":s.value),s=d,s!==l?(a.setValue(s),!0):!1}function vs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ha=/[\n"\\]/g;function tr(s){return s.replace(Ha,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sl(s,a,l,d,p,b,A,V){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+bn(a)):s.value!==""+bn(a)&&(s.value=""+bn(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?Lc(s,A,bn(a)):l!=null?Lc(s,A,bn(l)):d!=null&&s.removeAttribute("value"),p==null&&b!=null&&(s.defaultChecked=!!b),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?s.name=""+bn(V):s.removeAttribute("name")}function Zd(s,a,l,d,p,b,A,V){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){bt(s);return}l=l!=null?""+bn(l):"",a=a!=null?""+bn(a):l,V||a===s.value||(s.value=a),s.defaultValue=a}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=V?s.checked:!!d,s.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),bt(s)}function Lc(s,a,l){a==="number"&&vs(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function ji(s,a,l,d){if(s=s.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=a.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&d&&(s[l].defaultSelected=!0)}else{for(l=""+bn(l),a=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function eh(s,a,l){if(a!=null&&(a=""+bn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+bn(l):""}function Li(s,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(r(92));if(ee(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=bn(a),s.defaultValue=l,d=s.textContent,d===l&&d!==""&&d!==null&&(s.value=d),bt(s)}function nr(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vc(s,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,l):typeof l!="number"||l===0||th.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Uc(s,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var p in a)d=a[p],a.hasOwnProperty(p)&&l[p]!==d&&Vc(s,p,d)}else for(var b in a)a.hasOwnProperty(b)&&Vc(s,b,a[b])}function il(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(s){return Vi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Xr(){}var zc=null;function Cr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ui=null,bs=null;function $a(s){var a=Nr(s);if(a&&(s=a.stateNode)){var l=s[vn]||null;e:switch(s=a.stateNode,a.type){case"input":if(sl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+tr(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==s&&d.form===s.form){var p=d[vn]||null;if(!p)throw Error(r(90));sl(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===s.form&&qa(d)}break e;case"textarea":eh(s,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ji(s,!!l.multiple,a,!1)}}}var ol=!1;function zi(s,a,l){if(ol)return s(a,l);ol=!0;try{var d=s(a);return d}finally{if(ol=!1,(Ui!==null||bs!==null)&&(Qh(),Ui&&(a=Ui,s=bs,bs=Ui=null,$a(a),s)))for(a=0;a<s.length;a++)$a(s[a])}}function Jr(s,a){var l=s.stateNode;if(l===null)return null;var d=l[vn]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Dr)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{Ga=!1}var ws=null,Fc=null,Ka=null;function Bc(){if(Ka)return Ka;var s,a=Fc,l=a.length,d,p="value"in ws?ws.value:ws.textContent,b=p.length;for(s=0;s<l&&a[s]===p[s];s++);var A=l-s;for(d=1;d<=A&&a[l-d]===p[b-d];d++);return Ka=p.slice(s,1<d?1-d:void 0)}function Ya(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ei(){return!0}function Zr(){return!1}function Rn(s){function a(l,d,p,b,A){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var V in s)s.hasOwnProperty(V)&&(l=s[V],this[V]=l?l(b):b[V]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ei:Zr,this.isPropagationStopped=Zr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),a}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Rn(ti),Fi=y({},ti,{view:0,detail:0}),qc=Rn(Fi),Bi,ll,Es,cl=y({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Es&&(Es&&s.type==="mousemove"?(Bi=s.screenX-Es.screenX,ll=s.screenY-Es.screenY):ll=Bi=0,Es=s),Bi)},movementY:function(s){return"movementY"in s?s.movementY:ll}}),Hc=Rn(cl),Qa=y({},cl,{dataTransfer:0}),rh=Rn(Qa),sh=y({},Fi,{relatedTarget:0}),Wa=Rn(sh),$c=y({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=Rn($c),ul=y({},ti,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ah=Rn(ul),oh=y({},ti,{data:0}),Ts=Rn(oh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uh[s])?!!a[s]:!1}function qi(){return dh}var Yn=y({},Fi,{key:function(s){if(s.key){var a=lh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ch[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(s){return s.type==="keypress"?Ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hh=Rn(Yn),fh=y({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ni=Rn(fh),m=y({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),S=Rn(m),k=y({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=Rn(k),ae=y({},cl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Rn(ae),xe=y({},ti,{newState:0,oldState:0}),$e=Rn(xe),Qt=[9,13,27,32],gt=Dr&&"CompositionEvent"in window,jt=null;Dr&&"documentMode"in document&&(jt=document.documentMode);var Or=Dr&&"TextEvent"in window&&!jt,Ss=Dr&&(!gt||jt&&8<jt&&11>=jt),es=" ",ts=!1;function Xa(s,a){switch(s){case"keyup":return Qt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var hl=!1;function Kk(s,a){switch(s){case"compositionend":return dl(a);case"keypress":return a.which!==32?null:(ts=!0,es);case"textInput":return s=a.data,s===es&&ts?null:s;default:return null}}function Yk(s,a){if(hl)return s==="compositionend"||!gt&&Xa(s,a)?(s=Bc(),Ka=Fc=ws=null,hl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ss&&a.locale!=="ko"?null:a.data;default:return null}}var Qk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Qk[s.type]:a==="textarea"}function wv(s,a,l,d){Ui?bs?bs.push(d):bs=[d]:Ui=d,a=nf(a,"onChange"),0<a.length&&(l=new xs("onChange","change",null,l,d),s.push({event:l,listeners:a}))}var Gc=null,Kc=null;function Wk(s){rw(s,0)}function mh(s){var a=dr(s);if(qa(a))return s}function xv(s,a){if(s==="change")return a}var Ev=!1;if(Dr){var Ng;if(Dr){var Cg="oninput"in document;if(!Cg){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),Cg=typeof Tv.oninput=="function"}Ng=Cg}else Ng=!1;Ev=Ng&&(!document.documentMode||9<document.documentMode)}function Sv(){Gc&&(Gc.detachEvent("onpropertychange",Av),Kc=Gc=null)}function Av(s){if(s.propertyName==="value"&&mh(Kc)){var a=[];wv(a,Kc,s,Cr(s)),zi(Wk,a)}}function Xk(s,a,l){s==="focusin"?(Sv(),Gc=a,Kc=l,Gc.attachEvent("onpropertychange",Av)):s==="focusout"&&Sv()}function Jk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mh(Kc)}function Zk(s,a){if(s==="click")return mh(a)}function eI(s,a){if(s==="input"||s==="change")return mh(a)}function tI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var fr=typeof Object.is=="function"?Object.is:tI;function Yc(s,a){if(fr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!Ye.call(a,p)||!fr(s[p],a[p]))return!1}return!0}function Rv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kv(s,a){var l=Rv(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=a&&d>=a)return{node:l,offset:a-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Rv(l)}}function Iv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Iv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Nv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=vs(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=vs(s.document)}return a}function Dg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var nI=Dr&&"documentMode"in document&&11>=document.documentMode,fl=null,Og=null,Qc=null,Mg=!1;function Cv(s,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Mg||fl==null||fl!==vs(d)||(d=fl,"selectionStart"in d&&Dg(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Qc&&Yc(Qc,d)||(Qc=d,d=nf(Og,"onSelect"),0<d.length&&(a=new xs("onSelect","select",null,a,l),s.push({event:a,listeners:d}),a.target=fl)))}function Ja(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var ml={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Pg={},Dv={};Dr&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Za(s){if(Pg[s])return Pg[s];if(!ml[s])return s;var a=ml[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in Dv)return Pg[s]=a[l];return s}var Ov=Za("animationend"),Mv=Za("animationiteration"),Pv=Za("animationstart"),rI=Za("transitionrun"),sI=Za("transitionstart"),iI=Za("transitioncancel"),jv=Za("transitionend"),Lv=new Map,jg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jg.push("scrollEnd");function ns(s,a){Lv.set(s,a),ys(a,[s])}var gh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Mr=[],gl=0,Lg=0;function ph(){for(var s=gl,a=Lg=gl=0;a<s;){var l=Mr[a];Mr[a++]=null;var d=Mr[a];Mr[a++]=null;var p=Mr[a];Mr[a++]=null;var b=Mr[a];if(Mr[a++]=null,d!==null&&p!==null){var A=d.pending;A===null?p.next=p:(p.next=A.next,A.next=p),d.pending=p}b!==0&&Vv(l,p,b)}}function yh(s,a,l,d){Mr[gl++]=s,Mr[gl++]=a,Mr[gl++]=l,Mr[gl++]=d,Lg|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Vg(s,a,l,d){return yh(s,a,l,d),_h(s)}function eo(s,a){return yh(s,null,null,a),_h(s)}function Vv(s,a,l){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l);for(var p=!1,b=s.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(p=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,p&&a!==null&&(p=31-Ot(l),s=b.hiddenUpdates,d=s[p],d===null?s[p]=[a]:d.push(a),a.lane=l|536870912),b):null}function _h(s){if(50<yu)throw yu=0,Kp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var pl={};function aI(s,a,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(s,a,l,d){return new aI(s,a,l,d)}function Ug(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ri(s,a){var l=s.alternate;return l===null?(l=mr(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Uv(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function vh(s,a,l,d,p,b){var A=0;if(d=s,typeof s=="function")Ug(s)&&(A=1);else if(typeof s=="string")A=dN(s,l,te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case E:return s=mr(31,l,a,p),s.elementType=E,s.lanes=b,s;case N:return to(l.children,p,b,a);case M:A=8,p|=24;break;case L:return s=mr(12,l,a,p|2),s.elementType=L,s.lanes=b,s;case Y:return s=mr(13,l,a,p),s.elementType=Y,s.lanes=b,s;case U:return s=mr(19,l,a,p),s.elementType=U,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:A=10;break e;case F:A=9;break e;case H:A=11;break e;case I:A=14;break e;case T:A=16,d=null;break e}A=29,l=Error(r(130,s===null?"null":typeof s,"")),d=null}return a=mr(A,l,a,p),a.elementType=s,a.type=d,a.lanes=b,a}function to(s,a,l,d){return s=mr(7,s,d,a),s.lanes=l,s}function zg(s,a,l){return s=mr(6,s,null,a),s.lanes=l,s}function zv(s){var a=mr(18,null,null,0);return a.stateNode=s,a}function Fg(s,a,l){return a=mr(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Fv=new WeakMap;function Pr(s,a){if(typeof s=="object"&&s!==null){var l=Fv.get(s);return l!==void 0?l:(a={value:s,source:a,stack:dt(a)},Fv.set(s,a),a)}return{value:s,source:a,stack:dt(a)}}var yl=[],_l=0,bh=null,Wc=0,jr=[],Lr=0,Hi=null,As=1,Rs="";function si(s,a){yl[_l++]=Wc,yl[_l++]=bh,bh=s,Wc=a}function Bv(s,a,l){jr[Lr++]=As,jr[Lr++]=Rs,jr[Lr++]=Hi,Hi=s;var d=As;s=Rs;var p=32-Ot(d)-1;d&=~(1<<p),l+=1;var b=32-Ot(a)+p;if(30<b){var A=p-p%5;b=(d&(1<<A)-1).toString(32),d>>=A,p-=A,As=1<<32-Ot(a)+p|l<<p|d,Rs=b+s}else As=1<<b|l<<p|d,Rs=s}function Bg(s){s.return!==null&&(si(s,1),Bv(s,1,0))}function qg(s){for(;s===bh;)bh=yl[--_l],yl[_l]=null,Wc=yl[--_l],yl[_l]=null;for(;s===Hi;)Hi=jr[--Lr],jr[Lr]=null,Rs=jr[--Lr],jr[Lr]=null,As=jr[--Lr],jr[Lr]=null}function qv(s,a){jr[Lr++]=As,jr[Lr++]=Rs,jr[Lr++]=Hi,As=a.id,Rs=a.overflow,Hi=s}var kn=null,Mt=null,ot=!1,$i=null,Vr=!1,Hg=Error(r(519));function Gi(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xc(Pr(a,s)),Hg}function Hv(s){var a=s.stateNode,l=s.type,d=s.memoizedProps;switch(a[nn]=s,a[vn]=d,l){case"dialog":et("cancel",a),et("close",a);break;case"iframe":case"object":case"embed":et("load",a);break;case"video":case"audio":for(l=0;l<vu.length;l++)et(vu[l],a);break;case"source":et("error",a);break;case"img":case"image":case"link":et("error",a),et("load",a);break;case"details":et("toggle",a);break;case"input":et("invalid",a),Zd(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":et("invalid",a);break;case"textarea":et("invalid",a),Li(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||ow(a.textContent,l)?(d.popover!=null&&(et("beforetoggle",a),et("toggle",a)),d.onScroll!=null&&et("scroll",a),d.onScrollEnd!=null&&et("scrollend",a),d.onClick!=null&&(a.onclick=Xr),a=!0):a=!1,a||Gi(s,!0)}function $v(s){for(kn=s.return;kn;)switch(kn.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:kn=kn.return}}function vl(s){if(s!==kn)return!1;if(!ot)return $v(s),ot=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||ly(s.type,s.memoizedProps)),l=!l),l&&Mt&&Gi(s),$v(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=pw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=pw(s)}else a===27?(a=Mt,aa(s.type)?(s=fy,fy=null,Mt=s):Mt=a):Mt=kn?zr(s.stateNode.nextSibling):null;return!0}function no(){Mt=kn=null,ot=!1}function $g(){var s=$i;return s!==null&&(ar===null?ar=s:ar.push.apply(ar,s),$i=null),s}function Xc(s){$i===null?$i=[s]:$i.push(s)}var Gg=$(null),ro=null,ii=null;function Ki(s,a,l){ne(Gg,a._currentValue),a._currentValue=l}function ai(s){s._currentValue=Gg.current,K(Gg)}function Kg(s,a,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===l)break;s=s.return}}function Yg(s,a,l,d){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var b=p.dependencies;if(b!==null){var A=p.child;b=b.firstContext;e:for(;b!==null;){var V=b;b=p;for(var Q=0;Q<a.length;Q++)if(V.context===a[Q]){b.lanes|=l,V=b.alternate,V!==null&&(V.lanes|=l),Kg(b.return,l,s),d||(A=null);break e}b=V.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(r(341));A.lanes|=l,b=A.alternate,b!==null&&(b.lanes|=l),Kg(A,l,s),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===s){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function bl(s,a,l,d){s=null;for(var p=a,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var V=p.type;fr(p.pendingProps.value,A.value)||(s!==null?s.push(V):s=[V])}}else if(p===Re.current){if(A=p.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Tu):s=[Tu])}p=p.return}s!==null&&Yg(a,s,l,d),a.flags|=262144}function wh(s){for(s=s.firstContext;s!==null;){if(!fr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function so(s){ro=s,ii=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return Gv(ro,s)}function xh(s,a){return ro===null&&so(s),Gv(s,a)}function Gv(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ii===null){if(s===null)throw Error(r(308));ii=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ii=ii.next=a;return l}var oI=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},lI=n.unstable_scheduleCallback,cI=n.unstable_NormalPriority,an={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qg(){return{controller:new oI,data:new Map,refCount:0}}function Jc(s){s.refCount--,s.refCount===0&&lI(cI,function(){s.controller.abort()})}var Zc=null,Wg=0,wl=0,xl=null;function uI(s,a){if(Zc===null){var l=Zc=[];Wg=0,wl=Zp(),xl={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Wg++,a.then(Kv,Kv),a}function Kv(){if(--Wg===0&&Zc!==null){xl!==null&&(xl.status="fulfilled");var s=Zc;Zc=null,wl=0,xl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function dI(s,a){var l=[],d={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(d.status="rejected",d.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),d}var Yv=P.S;P.S=function(s,a){C1=Te(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&uI(s,a),Yv!==null&&Yv(s,a)};var io=$(null);function Xg(){var s=io.current;return s!==null?s:Dt.pooledCache}function Eh(s,a){a===null?ne(io,io.current):ne(io,a.pool)}function Qv(){var s=Xg();return s===null?null:{parent:an._currentValue,pool:s}}var El=Error(r(460)),Jg=Error(r(474)),Th=Error(r(542)),Sh={then:function(){}};function Wv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Xv(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(Xr,Xr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Zv(s),s;default:if(typeof a.status=="string")a.then(Xr,Xr);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=d}},function(d){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Zv(s),s}throw oo=a,El}}function ao(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(oo=l,El):l}}var oo=null;function Jv(){if(oo===null)throw Error(r(459));var s=oo;return oo=null,s}function Zv(s){if(s===El||s===Th)throw Error(r(483))}var Tl=null,eu=0;function Ah(s){var a=eu;return eu+=1,Tl===null&&(Tl=[]),Xv(Tl,s,a)}function tu(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Rh(s,a){throw a.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function eb(s){function a(re,J){if(s){var oe=re.deletions;oe===null?(re.deletions=[J],re.flags|=16):oe.push(J)}}function l(re,J){if(!s)return null;for(;J!==null;)a(re,J),J=J.sibling;return null}function d(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function p(re,J){return re=ri(re,J),re.index=0,re.sibling=null,re}function b(re,J,oe){return re.index=oe,s?(oe=re.alternate,oe!==null?(oe=oe.index,oe<J?(re.flags|=67108866,J):oe):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function A(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function V(re,J,oe,me){return J===null||J.tag!==6?(J=zg(oe,re.mode,me),J.return=re,J):(J=p(J,oe),J.return=re,J)}function Q(re,J,oe,me){var De=oe.type;return De===N?fe(re,J,oe.props.children,me,oe.key):J!==null&&(J.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&ao(De)===J.type)?(J=p(J,oe.props),tu(J,oe),J.return=re,J):(J=vh(oe.type,oe.key,oe.props,null,re.mode,me),tu(J,oe),J.return=re,J)}function le(re,J,oe,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=Fg(oe,re.mode,me),J.return=re,J):(J=p(J,oe.children||[]),J.return=re,J)}function fe(re,J,oe,me,De){return J===null||J.tag!==7?(J=to(oe,re.mode,me,De),J.return=re,J):(J=p(J,oe),J.return=re,J)}function ge(re,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=zg(""+J,re.mode,oe),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return oe=vh(J.type,J.key,J.props,null,re.mode,oe),tu(oe,J),oe.return=re,oe;case x:return J=Fg(J,re.mode,oe),J.return=re,J;case T:return J=ao(J),ge(re,J,oe)}if(ee(J)||j(J))return J=to(J,re.mode,oe,null),J.return=re,J;if(typeof J.then=="function")return ge(re,Ah(J),oe);if(J.$$typeof===B)return ge(re,xh(re,J),oe);Rh(re,J)}return null}function ce(re,J,oe,me){var De=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return De!==null?null:V(re,J,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===De?Q(re,J,oe,me):null;case x:return oe.key===De?le(re,J,oe,me):null;case T:return oe=ao(oe),ce(re,J,oe,me)}if(ee(oe)||j(oe))return De!==null?null:fe(re,J,oe,me,null);if(typeof oe.then=="function")return ce(re,J,Ah(oe),me);if(oe.$$typeof===B)return ce(re,J,xh(re,oe),me);Rh(re,oe)}return null}function de(re,J,oe,me,De){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return re=re.get(oe)||null,V(J,re,""+me,De);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return re=re.get(me.key===null?oe:me.key)||null,Q(J,re,me,De);case x:return re=re.get(me.key===null?oe:me.key)||null,le(J,re,me,De);case T:return me=ao(me),de(re,J,oe,me,De)}if(ee(me)||j(me))return re=re.get(oe)||null,fe(J,re,me,De,null);if(typeof me.then=="function")return de(re,J,oe,Ah(me),De);if(me.$$typeof===B)return de(re,J,oe,xh(J,me),De);Rh(J,me)}return null}function ke(re,J,oe,me){for(var De=null,ht=null,Ne=J,Qe=J=0,rt=null;Ne!==null&&Qe<oe.length;Qe++){Ne.index>Qe?(rt=Ne,Ne=null):rt=Ne.sibling;var ft=ce(re,Ne,oe[Qe],me);if(ft===null){Ne===null&&(Ne=rt);break}s&&Ne&&ft.alternate===null&&a(re,Ne),J=b(ft,J,Qe),ht===null?De=ft:ht.sibling=ft,ht=ft,Ne=rt}if(Qe===oe.length)return l(re,Ne),ot&&si(re,Qe),De;if(Ne===null){for(;Qe<oe.length;Qe++)Ne=ge(re,oe[Qe],me),Ne!==null&&(J=b(Ne,J,Qe),ht===null?De=Ne:ht.sibling=Ne,ht=Ne);return ot&&si(re,Qe),De}for(Ne=d(Ne);Qe<oe.length;Qe++)rt=de(Ne,re,Qe,oe[Qe],me),rt!==null&&(s&&rt.alternate!==null&&Ne.delete(rt.key===null?Qe:rt.key),J=b(rt,J,Qe),ht===null?De=rt:ht.sibling=rt,ht=rt);return s&&Ne.forEach(function(da){return a(re,da)}),ot&&si(re,Qe),De}function Le(re,J,oe,me){if(oe==null)throw Error(r(151));for(var De=null,ht=null,Ne=J,Qe=J=0,rt=null,ft=oe.next();Ne!==null&&!ft.done;Qe++,ft=oe.next()){Ne.index>Qe?(rt=Ne,Ne=null):rt=Ne.sibling;var da=ce(re,Ne,ft.value,me);if(da===null){Ne===null&&(Ne=rt);break}s&&Ne&&da.alternate===null&&a(re,Ne),J=b(da,J,Qe),ht===null?De=da:ht.sibling=da,ht=da,Ne=rt}if(ft.done)return l(re,Ne),ot&&si(re,Qe),De;if(Ne===null){for(;!ft.done;Qe++,ft=oe.next())ft=ge(re,ft.value,me),ft!==null&&(J=b(ft,J,Qe),ht===null?De=ft:ht.sibling=ft,ht=ft);return ot&&si(re,Qe),De}for(Ne=d(Ne);!ft.done;Qe++,ft=oe.next())ft=de(Ne,re,Qe,ft.value,me),ft!==null&&(s&&ft.alternate!==null&&Ne.delete(ft.key===null?Qe:ft.key),J=b(ft,J,Qe),ht===null?De=ft:ht.sibling=ft,ht=ft);return s&&Ne.forEach(function(xN){return a(re,xN)}),ot&&si(re,Qe),De}function Ct(re,J,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var De=oe.key;J!==null;){if(J.key===De){if(De=oe.type,De===N){if(J.tag===7){l(re,J.sibling),me=p(J,oe.props.children),me.return=re,re=me;break e}}else if(J.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===T&&ao(De)===J.type){l(re,J.sibling),me=p(J,oe.props),tu(me,oe),me.return=re,re=me;break e}l(re,J);break}else a(re,J);J=J.sibling}oe.type===N?(me=to(oe.props.children,re.mode,me,oe.key),me.return=re,re=me):(me=vh(oe.type,oe.key,oe.props,null,re.mode,me),tu(me,oe),me.return=re,re=me)}return A(re);case x:e:{for(De=oe.key;J!==null;){if(J.key===De)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){l(re,J.sibling),me=p(J,oe.children||[]),me.return=re,re=me;break e}else{l(re,J);break}else a(re,J);J=J.sibling}me=Fg(oe,re.mode,me),me.return=re,re=me}return A(re);case T:return oe=ao(oe),Ct(re,J,oe,me)}if(ee(oe))return ke(re,J,oe,me);if(j(oe)){if(De=j(oe),typeof De!="function")throw Error(r(150));return oe=De.call(oe),Le(re,J,oe,me)}if(typeof oe.then=="function")return Ct(re,J,Ah(oe),me);if(oe.$$typeof===B)return Ct(re,J,xh(re,oe),me);Rh(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(l(re,J.sibling),me=p(J,oe),me.return=re,re=me):(l(re,J),me=zg(oe,re.mode,me),me.return=re,re=me),A(re)):l(re,J)}return function(re,J,oe,me){try{eu=0;var De=Ct(re,J,oe,me);return Tl=null,De}catch(Ne){if(Ne===El||Ne===Th)throw Ne;var ht=mr(29,Ne,null,re.mode);return ht.lanes=me,ht.return=re,ht}finally{}}}var lo=eb(!0),tb=eb(!1),Yi=!1;function Zg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ep(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Wi(s,a,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(pt&2)!==0){var p=d.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),d.pending=a,a=_h(s),Vv(s,null,l),a}return yh(s,d,a,l),_h(s)}function nu(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,Ic(s,l)}}function tp(s,a){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?p=b=A:b=b.next=A,l=l.next}while(l!==null);b===null?p=b=a:b=b.next=a}else p=b=a;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var np=!1;function ru(){if(np){var s=xl;if(s!==null)throw s}}function su(s,a,l,d){np=!1;var p=s.updateQueue;Yi=!1;var b=p.firstBaseUpdate,A=p.lastBaseUpdate,V=p.shared.pending;if(V!==null){p.shared.pending=null;var Q=V,le=Q.next;Q.next=null,A===null?b=le:A.next=le,A=Q;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,V=fe.lastBaseUpdate,V!==A&&(V===null?fe.firstBaseUpdate=le:V.next=le,fe.lastBaseUpdate=Q))}if(b!==null){var ge=p.baseState;A=0,fe=le=Q=null,V=b;do{var ce=V.lane&-536870913,de=ce!==V.lane;if(de?(nt&ce)===ce:(d&ce)===ce){ce!==0&&ce===wl&&(np=!0),fe!==null&&(fe=fe.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var ke=s,Le=V;ce=a;var Ct=l;switch(Le.tag){case 1:if(ke=Le.payload,typeof ke=="function"){ge=ke.call(Ct,ge,ce);break e}ge=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Le.payload,ce=typeof ke=="function"?ke.call(Ct,ge,ce):ke,ce==null)break e;ge=y({},ge,ce);break e;case 2:Yi=!0}}ce=V.callback,ce!==null&&(s.flags|=64,de&&(s.flags|=8192),de=p.callbacks,de===null?p.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:V.tag,payload:V.payload,callback:V.callback,next:null},fe===null?(le=fe=de,Q=ge):fe=fe.next=de,A|=ce;if(V=V.next,V===null){if(V=p.shared.pending,V===null)break;de=V,V=de.next,de.next=null,p.lastBaseUpdate=de,p.shared.pending=null}}while(!0);fe===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,b===null&&(p.shared.lanes=0),ta|=A,s.lanes=A,s.memoizedState=ge}}function nb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function rb(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)nb(l[s],a)}var Sl=$(null),kh=$(0);function sb(s,a){s=gi,ne(kh,s),ne(Sl,a),gi=s|a.baseLanes}function rp(){ne(kh,gi),ne(Sl,Sl.current)}function sp(){gi=kh.current,K(Sl),K(kh)}var gr=$(null),Ur=null;function Xi(s){var a=s.alternate;ne(Wt,Wt.current&1),ne(gr,s),Ur===null&&(a===null||Sl.current!==null||a.memoizedState!==null)&&(Ur=s)}function ip(s){ne(Wt,Wt.current),ne(gr,s),Ur===null&&(Ur=s)}function ib(s){s.tag===22?(ne(Wt,Wt.current),ne(gr,s),Ur===null&&(Ur=s)):Ji()}function Ji(){ne(Wt,Wt.current),ne(gr,gr.current)}function pr(s){K(gr),Ur===s&&(Ur=null),K(Wt)}var Wt=$(0);function Ih(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||dy(l)||hy(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var oi=0,Ge=null,It=null,on=null,Nh=!1,Al=!1,co=!1,Ch=0,iu=0,Rl=null,hI=0;function Ht(){throw Error(r(321))}function ap(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!fr(s[l],a[l]))return!1;return!0}function op(s,a,l,d,p,b){return oi=b,Ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=s===null||s.memoizedState===null?Bb:xp,co=!1,b=l(d,p),co=!1,Al&&(b=ob(a,l,d,p)),ab(s),b}function ab(s){P.H=lu;var a=It!==null&&It.next!==null;if(oi=0,on=It=Ge=null,Nh=!1,iu=0,Rl=null,a)throw Error(r(300));s===null||ln||(s=s.dependencies,s!==null&&wh(s)&&(ln=!0))}function ob(s,a,l,d){Ge=s;var p=0;do{if(Al&&(Rl=null),iu=0,Al=!1,25<=p)throw Error(r(301));if(p+=1,on=It=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=qb,b=a(l,d)}while(Al);return b}function fI(){var s=P.H,a=s.useState()[0];return a=typeof a.then=="function"?au(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&(Ge.flags|=1024),a}function lp(){var s=Ch!==0;return Ch=0,s}function cp(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function up(s){if(Nh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Nh=!1}oi=0,on=It=Ge=null,Al=!1,iu=Ch=0,Rl=null}function Qn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Ge.memoizedState=on=s:on=on.next=s,on}function Xt(){if(It===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=on===null?Ge.memoizedState:on.next;if(a!==null)on=a,It=s;else{if(s===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},on===null?Ge.memoizedState=on=s:on=on.next=s}return on}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(s){var a=iu;return iu+=1,Rl===null&&(Rl=[]),s=Xv(Rl,s,a),a=Ge,(on===null?a.memoizedState:on.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Bb:xp),s}function Oh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return au(s);if(s.$$typeof===B)return In(s)}throw Error(r(438,String(s)))}function dp(s){var a=null,l=Ge.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Ge.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Dh(),Ge.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),d=0;d<s;d++)l[d]=R;return a.index++,l}function li(s,a){return typeof a=="function"?a(s):a}function Mh(s){var a=Xt();return hp(a,It,s)}function hp(s,a,l){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var p=s.baseQueue,b=d.pending;if(b!==null){if(p!==null){var A=p.next;p.next=b.next,b.next=A}a.baseQueue=p=b,d.pending=null}if(b=s.baseState,p===null)s.memoizedState=b;else{a=p.next;var V=A=null,Q=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(nt&ge)===ge:(oi&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===wl&&(fe=!0);else if((oi&ce)===ce){le=le.next,ce===wl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(V=Q=ge,A=b):Q=Q.next=ge,Ge.lanes|=ce,ta|=ce;ge=le.action,co&&l(b,ge),b=le.hasEagerState?le.eagerState:l(b,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(V=Q=ce,A=b):Q=Q.next=ce,Ge.lanes|=ge,ta|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=b:Q.next=V,!fr(b,s.memoizedState)&&(ln=!0,fe&&(l=xl,l!==null)))throw l;s.memoizedState=b,s.baseState=A,s.baseQueue=Q,d.lastRenderedState=b}return p===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function fp(s){var a=Xt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var d=l.dispatch,p=l.pending,b=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do b=s(b,A.action),A=A.next;while(A!==p);fr(b,a.memoizedState)||(ln=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,d]}function lb(s,a,l){var d=Ge,p=Xt(),b=ot;if(b){if(l===void 0)throw Error(r(407));l=l()}else l=a();var A=!fr((It||p).memoizedState,l);if(A&&(p.memoizedState=l,ln=!0),p=p.queue,pp(db.bind(null,d,p,s),[s]),p.getSnapshot!==a||A||on!==null&&on.memoizedState.tag&1){if(d.flags|=2048,kl(9,{destroy:void 0},ub.bind(null,d,p,l,a),null),Dt===null)throw Error(r(349));b||(oi&127)!==0||cb(d,a,l)}return l}function cb(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Ge.updateQueue,a===null?(a=Dh(),Ge.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function ub(s,a,l,d){a.value=l,a.getSnapshot=d,hb(a)&&fb(s)}function db(s,a,l){return l(function(){hb(a)&&fb(s)})}function hb(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!fr(s,l)}catch{return!0}}function fb(s){var a=eo(s,2);a!==null&&or(a,s,2)}function mp(s){var a=Qn();if(typeof s=="function"){var l=s;if(s=l(),co){tn(!0);try{l()}finally{tn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:s},a}function mb(s,a,l,d){return s.baseState=l,hp(s,It,typeof d=="function"?d:li)}function mI(s,a,l,d,p){if(Lh(s))throw Error(r(485));if(s=a.action,s!==null){var b={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};P.T!==null?l(!0):b.isTransition=!1,d(b),l=a.pending,l===null?(b.next=a.pending=b,gb(a,b)):(b.next=l.next,a.pending=l.next=b)}}function gb(s,a){var l=a.action,d=a.payload,p=s.state;if(a.isTransition){var b=P.T,A={};P.T=A;try{var V=l(p,d),Q=P.S;Q!==null&&Q(A,V),pb(s,a,V)}catch(le){gp(s,a,le)}finally{b!==null&&A.types!==null&&(b.types=A.types),P.T=b}}else try{b=l(p,d),pb(s,a,b)}catch(le){gp(s,a,le)}}function pb(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){yb(s,a,d)},function(d){return gp(s,a,d)}):yb(s,a,l)}function yb(s,a,l){a.status="fulfilled",a.value=l,_b(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,gb(s,l)))}function gp(s,a,l){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,_b(a),a=a.next;while(a!==d)}s.action=null}function _b(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function vb(s,a){return a}function bb(s,a){if(ot){var l=Dt.formState;if(l!==null){e:{var d=Ge;if(ot){if(Mt){t:{for(var p=Mt,b=Vr;p.nodeType!==8;){if(!b){p=null;break t}if(p=zr(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){Mt=zr(p.nextSibling),d=p.data==="F!";break e}}Gi(d)}d=!1}d&&(a=l[0])}}return l=Qn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vb,lastRenderedState:a},l.queue=d,l=Ub.bind(null,Ge,d),d.dispatch=l,d=mp(!1),b=wp.bind(null,Ge,!1,d.queue),d=Qn(),p={state:a,dispatch:null,action:s,pending:null},d.queue=p,l=mI.bind(null,Ge,p,b,l),p.dispatch=l,d.memoizedState=s,[a,l,!1]}function wb(s){var a=Xt();return xb(a,It,s)}function xb(s,a,l){if(a=hp(s,a,vb)[0],s=Mh(li)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=au(a)}catch(A){throw A===El?Th:A}else d=a;a=Xt();var p=a.queue,b=p.dispatch;return l!==a.memoizedState&&(Ge.flags|=2048,kl(9,{destroy:void 0},gI.bind(null,p,l),null)),[d,b,s]}function gI(s,a){s.action=a}function Eb(s){var a=Xt(),l=It;if(l!==null)return xb(a,l,s);Xt(),a=a.memoizedState,l=Xt();var d=l.queue.dispatch;return l.memoizedState=s,[a,d,!1]}function kl(s,a,l,d){return s={tag:s,create:l,deps:d,inst:a,next:null},a=Ge.updateQueue,a===null&&(a=Dh(),Ge.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,a.lastEffect=s),s}function Tb(){return Xt().memoizedState}function Ph(s,a,l,d){var p=Qn();Ge.flags|=s,p.memoizedState=kl(1|a,{destroy:void 0},l,d===void 0?null:d)}function jh(s,a,l,d){var p=Xt();d=d===void 0?null:d;var b=p.memoizedState.inst;It!==null&&d!==null&&ap(d,It.memoizedState.deps)?p.memoizedState=kl(a,b,l,d):(Ge.flags|=s,p.memoizedState=kl(1|a,b,l,d))}function Sb(s,a){Ph(8390656,8,s,a)}function pp(s,a){jh(2048,8,s,a)}function pI(s){Ge.flags|=4;var a=Ge.updateQueue;if(a===null)a=Dh(),Ge.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function Ab(s){var a=Xt().memoizedState;return pI({ref:a,nextImpl:s}),function(){if((pt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function Rb(s,a){return jh(4,2,s,a)}function kb(s,a){return jh(4,4,s,a)}function Ib(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Nb(s,a,l){l=l!=null?l.concat([s]):null,jh(4,4,Ib.bind(null,a,s),l)}function yp(){}function Cb(s,a){var l=Xt();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&ap(a,d[1])?d[0]:(l.memoizedState=[s,a],s)}function Db(s,a){var l=Xt();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&ap(a,d[1]))return d[0];if(d=s(),co){tn(!0);try{s()}finally{tn(!1)}}return l.memoizedState=[d,a],d}function _p(s,a,l){return l===void 0||(oi&1073741824)!==0&&(nt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=O1(),Ge.lanes|=s,ta|=s,l)}function Ob(s,a,l,d){return fr(l,a)?l:Sl.current!==null?(s=_p(s,l,d),fr(s,a)||(ln=!0),s):(oi&42)===0||(oi&1073741824)!==0&&(nt&261930)===0?(ln=!0,s.memoizedState=l):(s=O1(),Ge.lanes|=s,ta|=s,a)}function Mb(s,a,l,d,p){var b=O.p;O.p=b!==0&&8>b?b:8;var A=P.T,V={};P.T=V,wp(s,!1,a,l);try{var Q=p(),le=P.S;if(le!==null&&le(V,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var fe=dI(Q,d);ou(s,a,fe,vr(s))}else ou(s,a,d,vr(s))}catch(ge){ou(s,a,{then:function(){},status:"rejected",reason:ge},vr())}finally{O.p=b,A!==null&&V.types!==null&&(A.types=V.types),P.T=A}}function yI(){}function vp(s,a,l,d){if(s.tag!==5)throw Error(r(476));var p=Pb(s).queue;Mb(s,p,a,X,l===null?yI:function(){return jb(s),l(d)})}function Pb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:X},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function jb(s){var a=Pb(s);a.next===null&&(a=s.alternate.memoizedState),ou(s,a.next.queue,{},vr())}function bp(){return In(Tu)}function Lb(){return Xt().memoizedState}function Vb(){return Xt().memoizedState}function _I(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=vr();s=Qi(l);var d=Wi(a,s,l);d!==null&&(or(d,a,l),nu(d,a,l)),a={cache:Qg()},s.payload=a;return}a=a.return}}function vI(s,a,l){var d=vr();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Lh(s)?zb(a,l):(l=Vg(s,a,l,d),l!==null&&(or(l,s,d),Fb(l,a,d)))}function Ub(s,a,l){var d=vr();ou(s,a,l,d)}function ou(s,a,l,d){var p={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lh(s))zb(a,p);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var A=a.lastRenderedState,V=b(A,l);if(p.hasEagerState=!0,p.eagerState=V,fr(V,A))return yh(s,a,p,0),Dt===null&&ph(),!1}catch{}finally{}if(l=Vg(s,a,p,d),l!==null)return or(l,s,d),Fb(l,a,d),!0}return!1}function wp(s,a,l,d){if(d={lane:2,revertLane:Zp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Lh(s)){if(a)throw Error(r(479))}else a=Vg(s,l,d,2),a!==null&&or(a,s,2)}function Lh(s){var a=s.alternate;return s===Ge||a!==null&&a===Ge}function zb(s,a){Al=Nh=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Fb(s,a,l){if((l&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,l|=d,a.lanes=l,Ic(s,l)}}var lu={readContext:In,use:Oh,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};lu.useEffectEvent=Ht;var Bb={readContext:In,use:Oh,useCallback:function(s,a){return Qn().memoizedState=[s,a===void 0?null:a],s},useContext:In,useEffect:Sb,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Ph(4194308,4,Ib.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Ph(4194308,4,s,a)},useInsertionEffect:function(s,a){Ph(4,2,s,a)},useMemo:function(s,a){var l=Qn();a=a===void 0?null:a;var d=s();if(co){tn(!0);try{s()}finally{tn(!1)}}return l.memoizedState=[d,a],d},useReducer:function(s,a,l){var d=Qn();if(l!==void 0){var p=l(a);if(co){tn(!0);try{l(a)}finally{tn(!1)}}}else p=a;return d.memoizedState=d.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},d.queue=s,s=s.dispatch=vI.bind(null,Ge,s),[d.memoizedState,s]},useRef:function(s){var a=Qn();return s={current:s},a.memoizedState=s},useState:function(s){s=mp(s);var a=s.queue,l=Ub.bind(null,Ge,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:yp,useDeferredValue:function(s,a){var l=Qn();return _p(l,s,a)},useTransition:function(){var s=mp(!1);return s=Mb.bind(null,Ge,s.queue,!0,!1),Qn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var d=Ge,p=Qn();if(ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Dt===null)throw Error(r(349));(nt&127)!==0||cb(d,a,l)}p.memoizedState=l;var b={value:l,getSnapshot:a};return p.queue=b,Sb(db.bind(null,d,b,s),[s]),d.flags|=2048,kl(9,{destroy:void 0},ub.bind(null,d,b,l,a),null),l},useId:function(){var s=Qn(),a=Dt.identifierPrefix;if(ot){var l=Rs,d=As;l=(d&~(1<<32-Ot(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Ch++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=hI++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:bp,useFormState:bb,useActionState:bb,useOptimistic:function(s){var a=Qn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=wp.bind(null,Ge,!0,l),l.dispatch=a,[s,a]},useMemoCache:dp,useCacheRefresh:function(){return Qn().memoizedState=_I.bind(null,Ge)},useEffectEvent:function(s){var a=Qn(),l={impl:s};return a.memoizedState=l,function(){if((pt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},xp={readContext:In,use:Oh,useCallback:Cb,useContext:In,useEffect:pp,useImperativeHandle:Nb,useInsertionEffect:Rb,useLayoutEffect:kb,useMemo:Db,useReducer:Mh,useRef:Tb,useState:function(){return Mh(li)},useDebugValue:yp,useDeferredValue:function(s,a){var l=Xt();return Ob(l,It.memoizedState,s,a)},useTransition:function(){var s=Mh(li)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:au(s),a]},useSyncExternalStore:lb,useId:Lb,useHostTransitionStatus:bp,useFormState:wb,useActionState:wb,useOptimistic:function(s,a){var l=Xt();return mb(l,It,s,a)},useMemoCache:dp,useCacheRefresh:Vb};xp.useEffectEvent=Ab;var qb={readContext:In,use:Oh,useCallback:Cb,useContext:In,useEffect:pp,useImperativeHandle:Nb,useInsertionEffect:Rb,useLayoutEffect:kb,useMemo:Db,useReducer:fp,useRef:Tb,useState:function(){return fp(li)},useDebugValue:yp,useDeferredValue:function(s,a){var l=Xt();return It===null?_p(l,s,a):Ob(l,It.memoizedState,s,a)},useTransition:function(){var s=fp(li)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:au(s),a]},useSyncExternalStore:lb,useId:Lb,useHostTransitionStatus:bp,useFormState:Eb,useActionState:Eb,useOptimistic:function(s,a){var l=Xt();return It!==null?mb(l,It,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:dp,useCacheRefresh:Vb};qb.useEffectEvent=Ab;function Ep(s,a,l,d){a=s.memoizedState,l=l(d,a),l=l==null?a:y({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Tp={enqueueSetState:function(s,a,l){s=s._reactInternals;var d=vr(),p=Qi(d);p.payload=a,l!=null&&(p.callback=l),a=Wi(s,p,d),a!==null&&(or(a,s,d),nu(a,s,d))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var d=vr(),p=Qi(d);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Wi(s,p,d),a!==null&&(or(a,s,d),nu(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=vr(),d=Qi(l);d.tag=2,a!=null&&(d.callback=a),a=Wi(s,d,l),a!==null&&(or(a,s,l),nu(a,s,l))}};function Hb(s,a,l,d,p,b,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,A):a.prototype&&a.prototype.isPureReactComponent?!Yc(l,d)||!Yc(p,b):!0}function $b(s,a,l,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==s&&Tp.enqueueReplaceState(a,a.state,null)}function uo(s,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(s=s.defaultProps){l===a&&(l=y({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}function Gb(s){gh(s)}function Kb(s){console.error(s)}function Yb(s){gh(s)}function Vh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Qb(s,a,l){try{var d=s.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Sp(s,a,l){return l=Qi(l),l.tag=3,l.payload={element:null},l.callback=function(){Vh(s,a)},l}function Wb(s){return s=Qi(s),s.tag=3,s}function Xb(s,a,l,d){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var b=d.value;s.payload=function(){return p(b)},s.callback=function(){Qb(a,l,d)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Qb(a,l,d),typeof p!="function"&&(na===null?na=new Set([this]):na.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})})}function bI(s,a,l,d,p){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&bl(a,l,p,!0),l=gr.current,l!==null){switch(l.tag){case 31:case 13:return Ur===null?Wh():l.alternate===null&&$t===0&&($t=3),l.flags&=-257,l.flags|=65536,l.lanes=p,d===Sh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Wp(s,d,p)),!1;case 22:return l.flags|=65536,d===Sh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Wp(s,d,p)),!1}throw Error(r(435,l.tag))}return Wp(s,d,p),Wh(),!1}if(ot)return a=gr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,d!==Hg&&(s=Error(r(422),{cause:d}),Xc(Pr(s,l)))):(d!==Hg&&(a=Error(r(423),{cause:d}),Xc(Pr(a,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,d=Pr(d,l),p=Sp(s.stateNode,d,p),tp(s,p),$t!==4&&($t=2)),!1;var b=Error(r(520),{cause:d});if(b=Pr(b,l),pu===null?pu=[b]:pu.push(b),$t!==4&&($t=2),a===null)return!0;d=Pr(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=Sp(l.stateNode,d,s),tp(l,s),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(na===null||!na.has(b))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Wb(p),Xb(p,s,l,d),tp(l,p),!1}l=l.return}while(l!==null);return!1}var Ap=Error(r(461)),ln=!1;function Nn(s,a,l,d){a.child=s===null?tb(a,null,l,d):lo(a,s.child,l,d)}function Jb(s,a,l,d,p){l=l.render;var b=a.ref;if("ref"in d){var A={};for(var V in d)V!=="ref"&&(A[V]=d[V])}else A=d;return so(a),d=op(s,a,l,A,b,p),V=lp(),s!==null&&!ln?(cp(s,a,p),ci(s,a,p)):(ot&&V&&Bg(a),a.flags|=1,Nn(s,a,d,p),a.child)}function Zb(s,a,l,d,p){if(s===null){var b=l.type;return typeof b=="function"&&!Ug(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,e1(s,a,b,d,p)):(s=vh(l.type,null,d,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Mp(s,p)){var A=b.memoizedProps;if(l=l.compare,l=l!==null?l:Yc,l(A,d)&&s.ref===a.ref)return ci(s,a,p)}return a.flags|=1,s=ri(b,d),s.ref=a.ref,s.return=a,a.child=s}function e1(s,a,l,d,p){if(s!==null){var b=s.memoizedProps;if(Yc(b,d)&&s.ref===a.ref)if(ln=!1,a.pendingProps=d=b,Mp(s,p))(s.flags&131072)!==0&&(ln=!0);else return a.lanes=s.lanes,ci(s,a,p)}return Rp(s,a,l,d,p)}function t1(s,a,l,d){var p=d.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,s!==null){for(d=a.child=s.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~b}else d=0,a.child=null;return n1(s,a,b,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eh(a,b!==null?b.cachePool:null),b!==null?sb(a,b):rp(),ib(a);else return d=a.lanes=536870912,n1(s,a,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Eh(a,b.cachePool),sb(a,b),Ji(),a.memoizedState=null):(s!==null&&Eh(a,null),rp(),Ji());return Nn(s,a,p,l),a.child}function cu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function n1(s,a,l,d,p){var b=Xg();return b=b===null?null:{parent:an._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},s!==null&&Eh(a,null),rp(),ib(a),s!==null&&bl(s,a,d,!0),a.childLanes=p,null}function Uh(s,a){return a=Fh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function r1(s,a,l){return lo(a,s.child,null,l),s=Uh(a,a.pendingProps),s.flags|=2,pr(a),a.memoizedState=null,s}function wI(s,a,l){var d=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ot){if(d.mode==="hidden")return s=Uh(a,d),a.lanes=536870912,cu(null,s);if(ip(a),(s=Mt)?(s=gw(s,Vr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Hi!==null?{id:As,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},l=zv(s),l.return=a,a.child=l,kn=a,Mt=null)):s=null,s===null)throw Gi(a);return a.lanes=536870912,null}return Uh(a,d)}var b=s.memoizedState;if(b!==null){var A=b.dehydrated;if(ip(a),p)if(a.flags&256)a.flags&=-257,a=r1(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(ln||bl(s,a,l,!1),p=(l&s.childLanes)!==0,ln||p){if(d=Dt,d!==null&&(A=Nc(d,l),A!==0&&A!==b.retryLane))throw b.retryLane=A,eo(s,A),or(d,s,A),Ap;Wh(),a=r1(s,a,l)}else s=b.treeContext,Mt=zr(A.nextSibling),kn=a,ot=!0,$i=null,Vr=!1,s!==null&&qv(a,s),a=Uh(a,d),a.flags|=4096;return a}return s=ri(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function zh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function Rp(s,a,l,d,p){return so(a),l=op(s,a,l,d,void 0,p),d=lp(),s!==null&&!ln?(cp(s,a,p),ci(s,a,p)):(ot&&d&&Bg(a),a.flags|=1,Nn(s,a,l,p),a.child)}function s1(s,a,l,d,p,b){return so(a),a.updateQueue=null,l=ob(a,d,l,p),ab(s),d=lp(),s!==null&&!ln?(cp(s,a,b),ci(s,a,b)):(ot&&d&&Bg(a),a.flags|=1,Nn(s,a,l,b),a.child)}function i1(s,a,l,d,p){if(so(a),a.stateNode===null){var b=pl,A=l.contextType;typeof A=="object"&&A!==null&&(b=In(A)),b=new l(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Tp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Zg(a),A=l.contextType,b.context=typeof A=="object"&&A!==null?In(A):pl,b.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Ep(a,l,A,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&Tp.enqueueReplaceState(b,b.state,null),su(a,d,b,p),ru(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){b=a.stateNode;var V=a.memoizedProps,Q=uo(l,V);b.props=Q;var le=b.context,fe=l.contextType;A=pl,typeof fe=="object"&&fe!==null&&(A=In(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function",V=a.pendingProps!==V,fe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(V||le!==A)&&$b(a,b,d,A),Yi=!1;var ce=a.memoizedState;b.state=ce,su(a,d,b,p),ru(),le=a.memoizedState,V||ce!==le||Yi?(typeof ge=="function"&&(Ep(a,l,ge,d),le=a.memoizedState),(Q=Yi||Hb(a,l,Q,d,ce,le,A))?(fe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=le),b.props=d,b.state=le,b.context=A,d=Q):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,ep(s,a),A=a.memoizedProps,fe=uo(l,A),b.props=fe,ge=a.pendingProps,ce=b.context,le=l.contextType,Q=pl,typeof le=="object"&&le!==null&&(Q=In(le)),V=l.getDerivedStateFromProps,(le=typeof V=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&$b(a,b,d,Q),Yi=!1,ce=a.memoizedState,b.state=ce,su(a,d,b,p),ru();var de=a.memoizedState;A!==ge||ce!==de||Yi||s!==null&&s.dependencies!==null&&wh(s.dependencies)?(typeof V=="function"&&(Ep(a,l,V,d),de=a.memoizedState),(fe=Yi||Hb(a,l,fe,d,ce,de,Q)||s!==null&&s.dependencies!==null&&wh(s.dependencies))?(le||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,de,Q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,de,Q)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=de),b.props=d,b.state=de,b.context=Q,d=fe):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),d=!1)}return b=d,zh(s,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&d?(a.child=lo(a,s.child,null,p),a.child=lo(a,null,l,p)):Nn(s,a,l,p),a.memoizedState=b.state,s=a.child):s=ci(s,a,p),s}function a1(s,a,l,d){return no(),a.flags|=256,Nn(s,a,l,d),a.child}var kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(s){return{baseLanes:s,cachePool:Qv()}}function Np(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=_r),s}function o1(s,a,l){var d=a.pendingProps,p=!1,b=(a.flags&128)!==0,A;if((A=b)||(A=s!==null&&s.memoizedState===null?!1:(Wt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(ot){if(p?Xi(a):Ji(),(s=Mt)?(s=gw(s,Vr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Hi!==null?{id:As,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},l=zv(s),l.return=a,a.child=l,kn=a,Mt=null)):s=null,s===null)throw Gi(a);return hy(s)?a.lanes=32:a.lanes=536870912,null}var V=d.children;return d=d.fallback,p?(Ji(),p=a.mode,V=Fh({mode:"hidden",children:V},p),d=to(d,p,l,null),V.return=a,d.return=a,V.sibling=d,a.child=V,d=a.child,d.memoizedState=Ip(l),d.childLanes=Np(s,A,l),a.memoizedState=kp,cu(null,d)):(Xi(a),Cp(a,V))}var Q=s.memoizedState;if(Q!==null&&(V=Q.dehydrated,V!==null)){if(b)a.flags&256?(Xi(a),a.flags&=-257,a=Dp(s,a,l)):a.memoizedState!==null?(Ji(),a.child=s.child,a.flags|=128,a=null):(Ji(),V=d.fallback,p=a.mode,d=Fh({mode:"visible",children:d.children},p),V=to(V,p,l,null),V.flags|=2,d.return=a,V.return=a,d.sibling=V,a.child=d,lo(a,s.child,null,l),d=a.child,d.memoizedState=Ip(l),d.childLanes=Np(s,A,l),a.memoizedState=kp,a=cu(null,d));else if(Xi(a),hy(V)){if(A=V.nextSibling&&V.nextSibling.dataset,A)var le=A.dgst;A=le,d=Error(r(419)),d.stack="",d.digest=A,Xc({value:d,source:null,stack:null}),a=Dp(s,a,l)}else if(ln||bl(s,a,l,!1),A=(l&s.childLanes)!==0,ln||A){if(A=Dt,A!==null&&(d=Nc(A,l),d!==0&&d!==Q.retryLane))throw Q.retryLane=d,eo(s,d),or(A,s,d),Ap;dy(V)||Wh(),a=Dp(s,a,l)}else dy(V)?(a.flags|=192,a.child=s.child,a=null):(s=Q.treeContext,Mt=zr(V.nextSibling),kn=a,ot=!0,$i=null,Vr=!1,s!==null&&qv(a,s),a=Cp(a,d.children),a.flags|=4096);return a}return p?(Ji(),V=d.fallback,p=a.mode,Q=s.child,le=Q.sibling,d=ri(Q,{mode:"hidden",children:d.children}),d.subtreeFlags=Q.subtreeFlags&65011712,le!==null?V=ri(le,V):(V=to(V,p,l,null),V.flags|=2),V.return=a,d.return=a,d.sibling=V,a.child=d,cu(null,d),d=a.child,V=s.child.memoizedState,V===null?V=Ip(l):(p=V.cachePool,p!==null?(Q=an._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Qv(),V={baseLanes:V.baseLanes|l,cachePool:p}),d.memoizedState=V,d.childLanes=Np(s,A,l),a.memoizedState=kp,cu(s.child,d)):(Xi(a),l=s.child,s=l.sibling,l=ri(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=l,a.memoizedState=null,l)}function Cp(s,a){return a=Fh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Fh(s,a){return s=mr(22,s,null,a),s.lanes=0,s}function Dp(s,a,l){return lo(a,s.child,null,l),s=Cp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function l1(s,a,l){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Kg(s.return,a,l)}function Op(s,a,l,d,p,b){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p,treeForkCount:b}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=l,A.tailMode=p,A.treeForkCount=b)}function c1(s,a,l){var d=a.pendingProps,p=d.revealOrder,b=d.tail;d=d.children;var A=Wt.current,V=(A&2)!==0;if(V?(A=A&1|2,a.flags|=128):A&=1,ne(Wt,A),Nn(s,a,d,l),d=ot?Wc:0,!V&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&l1(s,l,a);else if(s.tag===19)l1(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)s=l.alternate,s!==null&&Ih(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Op(a,!1,p,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&Ih(s)===null){a.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}Op(a,!0,l,null,b,d);break;case"together":Op(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ci(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),ta|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(bl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,l=ri(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=ri(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function Mp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&wh(s)))}function xI(s,a,l){switch(a.tag){case 3:we(a,a.stateNode.containerInfo),Ki(a,an,s.memoizedState.cache),no();break;case 27:case 5:Ue(a);break;case 4:we(a,a.stateNode.containerInfo);break;case 10:Ki(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ip(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Xi(a),a.flags|=128,null):(l&a.child.childLanes)!==0?o1(s,a,l):(Xi(a),s=ci(s,a,l),s!==null?s.sibling:null);Xi(a);break;case 19:var p=(s.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(bl(s,a,l,!1),d=(l&a.childLanes)!==0),p){if(d)return c1(s,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ne(Wt,Wt.current),d)break;return null;case 22:return a.lanes=0,t1(s,a,l,a.pendingProps);case 24:Ki(a,an,s.memoizedState.cache)}return ci(s,a,l)}function u1(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)ln=!0;else{if(!Mp(s,l)&&(a.flags&128)===0)return ln=!1,xI(s,a,l);ln=(s.flags&131072)!==0}else ln=!1,ot&&(a.flags&1048576)!==0&&Bv(a,Wc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=ao(a.elementType),a.type=s,typeof s=="function")Ug(s)?(d=uo(s,d),a.tag=1,a=i1(null,a,s,d,l)):(a.tag=0,a=Rp(null,a,s,d,l));else{if(s!=null){var p=s.$$typeof;if(p===H){a.tag=11,a=Jb(null,a,s,d,l);break e}else if(p===I){a.tag=14,a=Zb(null,a,s,d,l);break e}}throw a=G(s)||s,Error(r(306,a,""))}}return a;case 0:return Rp(s,a,a.type,a.pendingProps,l);case 1:return d=a.type,p=uo(d,a.pendingProps),i1(s,a,d,p,l);case 3:e:{if(we(a,a.stateNode.containerInfo),s===null)throw Error(r(387));d=a.pendingProps;var b=a.memoizedState;p=b.element,ep(s,a),su(a,d,null,l);var A=a.memoizedState;if(d=A.cache,Ki(a,an,d),d!==b.cache&&Yg(a,[an],l,!0),ru(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=a1(s,a,d,l);break e}else if(d!==p){p=Pr(Error(r(424)),a),Xc(p),a=a1(s,a,d,l);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=zr(s.firstChild),kn=a,ot=!0,$i=null,Vr=!0,l=tb(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(no(),d===p){a=ci(s,a,l);break e}Nn(s,a,d,l)}a=a.child}return a;case 26:return zh(s,a),s===null?(l=ww(a.type,null,a.pendingProps,null))?a.memoizedState=l:ot||(l=a.type,s=a.pendingProps,d=rf(_e.current).createElement(l),d[nn]=a,d[vn]=s,Cn(d,l,s),rn(d),a.stateNode=d):a.memoizedState=ww(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ue(a),s===null&&ot&&(d=a.stateNode=_w(a.type,a.pendingProps,_e.current),kn=a,Vr=!0,p=Mt,aa(a.type)?(fy=p,Mt=zr(d.firstChild)):Mt=p),Nn(s,a,a.pendingProps.children,l),zh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ot&&((p=d=Mt)&&(d=JI(d,a.type,a.pendingProps,Vr),d!==null?(a.stateNode=d,kn=a,Mt=zr(d.firstChild),Vr=!1,p=!0):p=!1),p||Gi(a)),Ue(a),p=a.type,b=a.pendingProps,A=s!==null?s.memoizedProps:null,d=b.children,ly(p,b)?d=null:A!==null&&ly(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=op(s,a,fI,null,null,l),Tu._currentValue=p),zh(s,a),Nn(s,a,d,l),a.child;case 6:return s===null&&ot&&((s=l=Mt)&&(l=ZI(l,a.pendingProps,Vr),l!==null?(a.stateNode=l,kn=a,Mt=null,s=!0):s=!1),s||Gi(a)),null;case 13:return o1(s,a,l);case 4:return we(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=lo(a,null,d,l):Nn(s,a,d,l),a.child;case 11:return Jb(s,a,a.type,a.pendingProps,l);case 7:return Nn(s,a,a.pendingProps,l),a.child;case 8:return Nn(s,a,a.pendingProps.children,l),a.child;case 12:return Nn(s,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Ki(a,a.type,d.value),Nn(s,a,d.children,l),a.child;case 9:return p=a.type._context,d=a.pendingProps.children,so(a),p=In(p),d=d(p),a.flags|=1,Nn(s,a,d,l),a.child;case 14:return Zb(s,a,a.type,a.pendingProps,l);case 15:return e1(s,a,a.type,a.pendingProps,l);case 19:return c1(s,a,l);case 31:return wI(s,a,l);case 22:return t1(s,a,l,a.pendingProps);case 24:return so(a),d=In(an),s===null?(p=Xg(),p===null&&(p=Dt,b=Qg(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=l),p=b),a.memoizedState={parent:d,cache:p},Zg(a),Ki(a,an,p)):((s.lanes&l)!==0&&(ep(s,a),su(a,null,null,l),ru()),p=s.memoizedState,b=a.memoizedState,p.parent!==d?(p={parent:d,cache:d},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Ki(a,an,d)):(d=b.cache,Ki(a,an,d),d!==p.cache&&Yg(a,[an],l,!0))),Nn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ui(s){s.flags|=4}function Pp(s,a,l,d,p){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(L1())s.flags|=8192;else throw oo=Sh,Jg}else s.flags&=-16777217}function d1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Aw(a))if(L1())s.flags|=8192;else throw oo=Sh,Jg}function Bh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ir():536870912,s.lanes|=a,Dl|=a)}function uu(s,a){if(!ot)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Pt(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(a)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=l,a}function EI(s,a,l){var d=a.pendingProps;switch(qg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return l=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ai(an),ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(vl(a)?ui(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$g())),Pt(a),null;case 26:var p=a.type,b=a.memoizedState;return s===null?(ui(a),b!==null?(Pt(a),d1(a,b)):(Pt(a),Pp(a,p,null,d,l))):b?b!==s.memoizedState?(ui(a),Pt(a),d1(a,b)):(Pt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&ui(a),Pt(a),Pp(a,p,s,d,l)),null;case 27:if(Je(a),l=_e.current,p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}s=te.current,vl(a)?Hv(a):(s=_w(p,d,l),a.stateNode=s,ui(a))}return Pt(a),null;case 5:if(Je(a),p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}if(b=te.current,vl(a))Hv(a);else{var A=rf(_e.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?A.createElement(p,{is:d.is}):A.createElement(p)}}b[nn]=a,b[vn]=d;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=b;e:switch(Cn(b,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ui(a)}}return Pt(a),Pp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(s=_e.current,vl(a)){if(s=a.stateNode,l=a.memoizedProps,d=null,p=kn,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}s[nn]=a,s=!!(s.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||ow(s.nodeValue,l)),s||Gi(a,!0)}else s=rf(s).createTextNode(d),s[nn]=a,a.stateNode=s}return Pt(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(d=vl(a),l!==null){if(s===null){if(!d)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[nn]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),s=!1}else l=$g(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(pr(a),a):(pr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Pt(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=vl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[nn]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),p=!1}else p=$g(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(pr(a),a):(pr(a),null)}return pr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,s=s!==null&&s.memoizedState!==null,l&&(d=a.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Bh(a,a.updateQueue),Pt(a),null);case 4:return ye(),s===null&&ry(a.stateNode.containerInfo),Pt(a),null;case 10:return ai(a.type),Pt(a),null;case 19:if(K(Wt),d=a.memoizedState,d===null)return Pt(a),null;if(p=(a.flags&128)!==0,b=d.rendering,b===null)if(p)uu(d,!1);else{if($t!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Ih(s),b!==null){for(a.flags|=128,uu(d,!1),s=b.updateQueue,a.updateQueue=s,Bh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Uv(l,s),l=l.sibling;return ne(Wt,Wt.current&1|2),ot&&si(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&Te()>Kh&&(a.flags|=128,p=!0,uu(d,!1),a.lanes=4194304)}else{if(!p)if(s=Ih(b),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,Bh(a,s),uu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ot)return Pt(a),null}else 2*Te()-d.renderingStartTime>Kh&&l!==536870912&&(a.flags|=128,p=!0,uu(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(s=d.last,s!==null?s.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Te(),s.sibling=null,l=Wt.current,ne(Wt,p?l&1|2:l&1),ot&&si(a,d.treeForkCount),s):(Pt(a),null);case 22:case 23:return pr(a),sp(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),l=a.updateQueue,l!==null&&Bh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),s!==null&&K(io),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ai(an),Pt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function TI(s,a){switch(qg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ai(an),ye(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Je(a),null;case 31:if(a.memoizedState!==null){if(pr(a),a.alternate===null)throw Error(r(340));no()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(pr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));no()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return K(Wt),null;case 4:return ye(),null;case 10:return ai(a.type),null;case 22:case 23:return pr(a),sp(),s!==null&&K(io),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ai(an),null;case 25:return null;default:return null}}function h1(s,a){switch(qg(a),a.tag){case 3:ai(an),ye();break;case 26:case 27:case 5:Je(a);break;case 4:ye();break;case 31:a.memoizedState!==null&&pr(a);break;case 13:pr(a);break;case 19:K(Wt);break;case 10:ai(a.type);break;case 22:case 23:pr(a),sp(),s!==null&&K(io);break;case 24:ai(an)}}function du(s,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var p=d.next;l=p;do{if((l.tag&s)===s){d=void 0;var b=l.create,A=l.inst;d=b(),A.destroy=d}l=l.next}while(l!==p)}}catch(V){xt(a,a.return,V)}}function Zi(s,a,l){try{var d=a.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&s)===s){var A=d.inst,V=A.destroy;if(V!==void 0){A.destroy=void 0,p=a;var Q=l,le=V;try{le()}catch(fe){xt(p,Q,fe)}}}d=d.next}while(d!==b)}}catch(fe){xt(a,a.return,fe)}}function f1(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{rb(a,l)}catch(d){xt(s,s.return,d)}}}function m1(s,a,l){l.props=uo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(d){xt(s,a,d)}}function hu(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof l=="function"?s.refCleanup=l(d):l.current=d}}catch(p){xt(s,a,p)}}function ks(s,a){var l=s.ref,d=s.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(p){xt(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){xt(s,a,p)}else l.current=null}function g1(s){var a=s.type,l=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(p){xt(s,s.return,p)}}function jp(s,a,l){try{var d=s.stateNode;GI(d,s.type,l,a),d[vn]=a}catch(p){xt(s,s.return,p)}}function p1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&aa(s.type)||s.tag===4}function Lp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||p1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&aa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vp(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Xr));else if(d!==4&&(d===27&&aa(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Vp(s,a,l),s=s.sibling;s!==null;)Vp(s,a,l),s=s.sibling}function qh(s,a,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(d!==4&&(d===27&&aa(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(qh(s,a,l),s=s.sibling;s!==null;)qh(s,a,l),s=s.sibling}function y1(s){var a=s.stateNode,l=s.memoizedProps;try{for(var d=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Cn(a,d,l),a[nn]=s,a[vn]=l}catch(b){xt(s,s.return,b)}}var di=!1,cn=!1,Up=!1,_1=typeof WeakSet=="function"?WeakSet:Set,wn=null;function SI(s,a){if(s=s.containerInfo,ay=df,s=Nv(s),Dg(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var A=0,V=-1,Q=-1,le=0,fe=0,ge=s,ce=null;t:for(;;){for(var de;ge!==l||p!==0&&ge.nodeType!==3||(V=A+p),ge!==b||d!==0&&ge.nodeType!==3||(Q=A+d),ge.nodeType===3&&(A+=ge.nodeValue.length),(de=ge.firstChild)!==null;)ce=ge,ge=de;for(;;){if(ge===s)break t;if(ce===l&&++le===p&&(V=A),ce===b&&++fe===d&&(Q=A),(de=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=de}l=V===-1||Q===-1?null:{start:V,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(oy={focusedElem:s,selectionRange:l},df=!1,wn=a;wn!==null;)if(a=wn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,wn=s;else for(;wn!==null;){switch(a=wn,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)p=s[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,l=a,p=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var ke=uo(l.type,p);s=d.getSnapshotBeforeUpdate(ke,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(Le){xt(l,l.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)uy(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":uy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,wn=s;break}wn=a.return}}function v1(s,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:fi(s,l),d&4&&du(5,l);break;case 1:if(fi(s,l),d&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(A){xt(l,l.return,A)}else{var p=uo(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(l,l.return,A)}}d&64&&f1(l),d&512&&hu(l,l.return);break;case 3:if(fi(s,l),d&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{rb(s,a)}catch(A){xt(l,l.return,A)}}break;case 27:a===null&&d&4&&y1(l);case 26:case 5:fi(s,l),a===null&&d&4&&g1(l),d&512&&hu(l,l.return);break;case 12:fi(s,l);break;case 31:fi(s,l),d&4&&x1(s,l);break;case 13:fi(s,l),d&4&&E1(s,l),d&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=MI.bind(null,l),eN(s,l))));break;case 22:if(d=l.memoizedState!==null||di,!d){a=a!==null&&a.memoizedState!==null||cn,p=di;var b=cn;di=d,(cn=a)&&!b?mi(s,l,(l.subtreeFlags&8772)!==0):fi(s,l),di=p,cn=b}break;case 30:break;default:fi(s,l)}}function b1(s){var a=s.alternate;a!==null&&(s.alternate=null,b1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&nl(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Lt=null,rr=!1;function hi(s,a,l){for(l=l.child;l!==null;)w1(s,a,l),l=l.sibling}function w1(s,a,l){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Yt,l)}catch{}switch(l.tag){case 26:cn||ks(l,a),hi(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:cn||ks(l,a);var d=Lt,p=rr;aa(l.type)&&(Lt=l.stateNode,rr=!1),hi(s,a,l),wu(l.stateNode),Lt=d,rr=p;break;case 5:cn||ks(l,a);case 6:if(d=Lt,p=rr,Lt=null,hi(s,a,l),Lt=d,rr=p,Lt!==null)if(rr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(l.stateNode)}catch(b){xt(l,a,b)}else try{Lt.removeChild(l.stateNode)}catch(b){xt(l,a,b)}break;case 18:Lt!==null&&(rr?(s=Lt,fw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),zl(s)):fw(Lt,l.stateNode));break;case 4:d=Lt,p=rr,Lt=l.stateNode.containerInfo,rr=!0,hi(s,a,l),Lt=d,rr=p;break;case 0:case 11:case 14:case 15:Zi(2,l,a),cn||Zi(4,l,a),hi(s,a,l);break;case 1:cn||(ks(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&m1(l,a,d)),hi(s,a,l);break;case 21:hi(s,a,l);break;case 22:cn=(d=cn)||l.memoizedState!==null,hi(s,a,l),cn=d;break;default:hi(s,a,l)}}function x1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{zl(s)}catch(l){xt(a,a.return,l)}}}function E1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zl(s)}catch(l){xt(a,a.return,l)}}function AI(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new _1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new _1),a;default:throw Error(r(435,s.tag))}}function Hh(s,a){var l=AI(s);a.forEach(function(d){if(!l.has(d)){l.add(d);var p=PI.bind(null,s,d);d.then(p,p)}})}function sr(s,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d],b=s,A=a,V=A;e:for(;V!==null;){switch(V.tag){case 27:if(aa(V.type)){Lt=V.stateNode,rr=!1;break e}break;case 5:Lt=V.stateNode,rr=!1;break e;case 3:case 4:Lt=V.stateNode.containerInfo,rr=!0;break e}V=V.return}if(Lt===null)throw Error(r(160));w1(b,A,p),Lt=null,rr=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)T1(a,s),a=a.sibling}var rs=null;function T1(s,a){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:sr(a,s),ir(s),d&4&&(Zi(3,s,s.return),du(3,s),Zi(5,s,s.return));break;case 1:sr(a,s),ir(s),d&512&&(cn||l===null||ks(l,l.return)),d&64&&di&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var p=rs;if(sr(a,s),ir(s),d&512&&(cn||l===null||ks(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=s.memoizedState,l===null)if(d===null)if(s.stateNode===null){e:{d=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":b=p.getElementsByTagName("title")[0],(!b||b[ms]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(d),p.head.insertBefore(b,p.querySelector("head > title"))),Cn(b,d,l),b[nn]=s,rn(b),d=b;break e;case"link":var A=Tw("link","href",p).get(d+(l.href||""));if(A){for(var V=0;V<A.length;V++)if(b=A[V],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(V,1);break t}}b=p.createElement(d),Cn(b,d,l),p.head.appendChild(b);break;case"meta":if(A=Tw("meta","content",p).get(d+(l.content||""))){for(V=0;V<A.length;V++)if(b=A[V],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(V,1);break t}}b=p.createElement(d),Cn(b,d,l),p.head.appendChild(b);break;default:throw Error(r(468,d))}b[nn]=s,rn(b),d=b}s.stateNode=d}else Sw(p,s.type,s.stateNode);else s.stateNode=Ew(p,d,s.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Sw(p,s.type,s.stateNode):Ew(p,d,s.memoizedProps)):d===null&&s.stateNode!==null&&jp(s,s.memoizedProps,l.memoizedProps)}break;case 27:sr(a,s),ir(s),d&512&&(cn||l===null||ks(l,l.return)),l!==null&&d&4&&jp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(sr(a,s),ir(s),d&512&&(cn||l===null||ks(l,l.return)),s.flags&32){p=s.stateNode;try{nr(p,"")}catch(ke){xt(s,s.return,ke)}}d&4&&s.stateNode!=null&&(p=s.memoizedProps,jp(s,p,l!==null?l.memoizedProps:p)),d&1024&&(Up=!0);break;case 6:if(sr(a,s),ir(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,l=s.stateNode;try{l.nodeValue=d}catch(ke){xt(s,s.return,ke)}}break;case 3:if(of=null,p=rs,rs=sf(a.containerInfo),sr(a,s),rs=p,ir(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{zl(a.containerInfo)}catch(ke){xt(s,s.return,ke)}Up&&(Up=!1,S1(s));break;case 4:d=rs,rs=sf(s.stateNode.containerInfo),sr(a,s),ir(s),rs=d;break;case 12:sr(a,s),ir(s);break;case 31:sr(a,s),ir(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hh(s,d)));break;case 13:sr(a,s),ir(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gh=Te()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hh(s,d)));break;case 22:p=s.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=di,fe=cn;if(di=le||p,cn=fe||Q,sr(a,s),cn=fe,di=le,ir(s),d&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||di||cn||ho(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(b=Q.stateNode,p)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{V=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;V.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ke){xt(Q,Q.return,ke)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(ke){xt(Q,Q.return,ke)}}}else if(a.tag===18){if(l===null){Q=a;try{var de=Q.stateNode;p?mw(de,!0):mw(Q.stateNode,!1)}catch(ke){xt(Q,Q.return,ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Hh(s,l))));break;case 19:sr(a,s),ir(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Hh(s,d)));break;case 30:break;case 21:break;default:sr(a,s),ir(s)}}function ir(s){var a=s.flags;if(a&2){try{for(var l,d=s.return;d!==null;){if(p1(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,b=Lp(s);qh(s,b,p);break;case 5:var A=l.stateNode;l.flags&32&&(nr(A,""),l.flags&=-33);var V=Lp(s);qh(s,V,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=Lp(s);Vp(s,le,Q);break;default:throw Error(r(161))}}catch(fe){xt(s,s.return,fe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function S1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;S1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function fi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)v1(s,a.alternate,a),a=a.sibling}function ho(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Zi(4,a,a.return),ho(a);break;case 1:ks(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&m1(a,a.return,l),ho(a);break;case 27:wu(a.stateNode);case 26:case 5:ks(a,a.return),ho(a);break;case 22:a.memoizedState===null&&ho(a);break;case 30:ho(a);break;default:ho(a)}s=s.sibling}}function mi(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,p=s,b=a,A=b.flags;switch(b.tag){case 0:case 11:case 15:mi(p,b,l),du(4,b);break;case 1:if(mi(p,b,l),d=b,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){xt(d,d.return,le)}if(d=b,p=d.updateQueue,p!==null){var V=d.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)nb(Q[p],V)}catch(le){xt(d,d.return,le)}}l&&A&64&&f1(b),hu(b,b.return);break;case 27:y1(b);case 26:case 5:mi(p,b,l),l&&d===null&&A&4&&g1(b),hu(b,b.return);break;case 12:mi(p,b,l);break;case 31:mi(p,b,l),l&&A&4&&x1(p,b);break;case 13:mi(p,b,l),l&&A&4&&E1(p,b);break;case 22:b.memoizedState===null&&mi(p,b,l),hu(b,b.return);break;case 30:break;default:mi(p,b,l)}a=a.sibling}}function zp(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Jc(l))}function Fp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Jc(s))}function ss(s,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)A1(s,a,l,d),a=a.sibling}function A1(s,a,l,d){var p=a.flags;switch(a.tag){case 0:case 11:case 15:ss(s,a,l,d),p&2048&&du(9,a);break;case 1:ss(s,a,l,d);break;case 3:ss(s,a,l,d),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Jc(s)));break;case 12:if(p&2048){ss(s,a,l,d),s=a.stateNode;try{var b=a.memoizedProps,A=b.id,V=b.onPostCommit;typeof V=="function"&&V(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Q){xt(a,a.return,Q)}}else ss(s,a,l,d);break;case 31:ss(s,a,l,d);break;case 13:ss(s,a,l,d);break;case 23:break;case 22:b=a.stateNode,A=a.alternate,a.memoizedState!==null?b._visibility&2?ss(s,a,l,d):fu(s,a):b._visibility&2?ss(s,a,l,d):(b._visibility|=2,Il(s,a,l,d,(a.subtreeFlags&10256)!==0||!1)),p&2048&&zp(A,a);break;case 24:ss(s,a,l,d),p&2048&&Fp(a.alternate,a);break;default:ss(s,a,l,d)}}function Il(s,a,l,d,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,A=a,V=l,Q=d,le=A.flags;switch(A.tag){case 0:case 11:case 15:Il(b,A,V,Q,p),du(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Il(b,A,V,Q,p):fu(b,A):(fe._visibility|=2,Il(b,A,V,Q,p)),p&&le&2048&&zp(A.alternate,A);break;case 24:Il(b,A,V,Q,p),p&&le&2048&&Fp(A.alternate,A);break;default:Il(b,A,V,Q,p)}a=a.sibling}}function fu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,d=a,p=d.flags;switch(d.tag){case 22:fu(l,d),p&2048&&zp(d.alternate,d);break;case 24:fu(l,d),p&2048&&Fp(d.alternate,d);break;default:fu(l,d)}a=a.sibling}}var mu=8192;function Nl(s,a,l){if(s.subtreeFlags&mu)for(s=s.child;s!==null;)R1(s,a,l),s=s.sibling}function R1(s,a,l){switch(s.tag){case 26:Nl(s,a,l),s.flags&mu&&s.memoizedState!==null&&hN(l,rs,s.memoizedState,s.memoizedProps);break;case 5:Nl(s,a,l);break;case 3:case 4:var d=rs;rs=sf(s.stateNode.containerInfo),Nl(s,a,l),rs=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=mu,mu=16777216,Nl(s,a,l),mu=d):Nl(s,a,l));break;default:Nl(s,a,l)}}function k1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function gu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];wn=d,N1(d,s)}k1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I1(s),s=s.sibling}function I1(s){switch(s.tag){case 0:case 11:case 15:gu(s),s.flags&2048&&Zi(9,s,s.return);break;case 3:gu(s);break;case 12:gu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,$h(s)):gu(s);break;default:gu(s)}}function $h(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];wn=d,N1(d,s)}k1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Zi(8,a,a.return),$h(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,$h(a));break;default:$h(a)}s=s.sibling}}function N1(s,a){for(;wn!==null;){var l=wn;switch(l.tag){case 0:case 11:case 15:Zi(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Jc(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,wn=d;else e:for(l=s;wn!==null;){d=wn;var p=d.sibling,b=d.return;if(b1(d),d===l){wn=null;break e}if(p!==null){p.return=b,wn=p;break e}wn=b}}}var RI={getCacheForType:function(s){var a=In(an),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return In(an).controller.signal}},kI=typeof WeakMap=="function"?WeakMap:Map,pt=0,Dt=null,Ze=null,nt=0,wt=0,yr=null,ea=!1,Cl=!1,Bp=!1,gi=0,$t=0,ta=0,fo=0,qp=0,_r=0,Dl=0,pu=null,ar=null,Hp=!1,Gh=0,C1=0,Kh=1/0,Yh=null,na=null,gn=0,ra=null,Ol=null,pi=0,$p=0,Gp=null,D1=null,yu=0,Kp=null;function vr(){return(pt&2)!==0&&nt!==0?nt&-nt:P.T!==null?Zp():Qd()}function O1(){if(_r===0)if((nt&536870912)===0||ot){var s=Js;Js<<=1,(Js&3932160)===0&&(Js=262144),_r=s}else _r=536870912;return s=gr.current,s!==null&&(s.flags|=32),_r}function or(s,a,l){(s===Dt&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(Ml(s,0),sa(s,nt,_r,!1)),za(s,l),((pt&2)===0||s!==Dt)&&(s===Dt&&((pt&2)===0&&(fo|=l),$t===4&&sa(s,nt,_r,!1)),Is(s))}function M1(s,a,l){if((pt&6)!==0)throw Error(r(327));var d=!l&&(a&127)===0&&(a&s.expiredLanes)===0||An(s,a),p=d?CI(s,a):Qp(s,a,!0),b=d;do{if(p===0){Cl&&!d&&sa(s,a,0,!1);break}else{if(l=s.current.alternate,b&&!II(l)){p=Qp(s,a,!1),b=!1;continue}if(p===2){if(b=a,s.errorRecoveryDisabledLanes&b)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var V=s;p=pu;var Q=V.current.memoizedState.isDehydrated;if(Q&&(Ml(V,A).flags|=256),A=Qp(V,A,!1),A!==2){if(Bp&&!Q){V.errorRecoveryDisabledLanes|=b,fo|=b,p=4;break e}b=ar,ar=p,b!==null&&(ar===null?ar=b:ar.push.apply(ar,b))}p=A}if(b=!1,p!==2)continue}}if(p===1){Ml(s,0),sa(s,a,0,!0);break}e:{switch(d=s,b=p,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:sa(d,a,_r,!ea);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Gh+300-Te(),10<p)){if(sa(d,a,_r,!ea),Sn(d,0,!0)!==0)break e;pi=a,d.timeoutHandle=dw(P1.bind(null,d,l,ar,Yh,Hp,a,_r,fo,Dl,ea,b,"Throttled",-0,0),p);break e}P1(d,l,ar,Yh,Hp,a,_r,fo,Dl,ea,b,null,-0,0)}}break}while(!0);Is(s)}function P1(s,a,l,d,p,b,A,V,Q,le,fe,ge,ce,de){if(s.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},R1(a,b,ge);var ke=(b&62914560)===b?Gh-Te():(b&4194048)===b?C1-Te():0;if(ke=fN(ge,ke),ke!==null){pi=b,s.cancelPendingCommit=ke(q1.bind(null,s,a,b,l,d,p,A,V,Q,fe,ge,null,ce,de)),sa(s,b,A,!le);return}}q1(s,a,b,l,d,p,A,V,Q)}function II(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var p=l[d],b=p.getSnapshot;p=p.value;try{if(!fr(b(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function sa(s,a,l,d){a&=~qp,a&=~fo,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var p=a;0<p;){var b=31-Ot(p),A=1<<b;d[b]=-1,p&=~A}l!==0&&Fa(s,l,a)}function Qh(){return(pt&6)===0?(_u(0),!1):!0}function Yp(){if(Ze!==null){if(wt===0)var s=Ze.return;else s=Ze,ii=ro=null,up(s),Tl=null,eu=0,s=Ze;for(;s!==null;)h1(s.alternate,s),s=s.return;Ze=null}}function Ml(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,QI(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),pi=0,Yp(),Dt=s,Ze=l=ri(s.current,null),nt=a,wt=0,yr=null,ea=!1,Cl=An(s,a),Bp=!1,Dl=_r=qp=fo=ta=$t=0,ar=pu=null,Hp=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var p=31-Ot(d),b=1<<p;a|=s[p],d&=~b}return gi=a,ph(),l}function j1(s,a){Ge=null,P.H=lu,a===El||a===Th?(a=Jv(),wt=3):a===Jg?(a=Jv(),wt=4):wt=a===Ap?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yr=a,Ze===null&&($t=1,Vh(s,Pr(a,s.current)))}function L1(){var s=gr.current;return s===null?!0:(nt&4194048)===nt?Ur===null:(nt&62914560)===nt||(nt&536870912)!==0?s===Ur:!1}function V1(){var s=P.H;return P.H=lu,s===null?lu:s}function U1(){var s=P.A;return P.A=RI,s}function Wh(){$t=4,ea||(nt&4194048)!==nt&&gr.current!==null||(Cl=!0),(ta&134217727)===0&&(fo&134217727)===0||Dt===null||sa(Dt,nt,_r,!1)}function Qp(s,a,l){var d=pt;pt|=2;var p=V1(),b=U1();(Dt!==s||nt!==a)&&(Yh=null,Ml(s,a)),a=!1;var A=$t;e:do try{if(wt!==0&&Ze!==null){var V=Ze,Q=yr;switch(wt){case 8:Yp(),A=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(a=!0);var le=wt;if(wt=0,yr=null,Pl(s,V,Q,le),l&&Cl){A=0;break e}break;default:le=wt,wt=0,yr=null,Pl(s,V,Q,le)}}NI(),A=$t;break}catch(fe){j1(s,fe)}while(!0);return a&&s.shellSuspendCounter++,ii=ro=null,pt=d,P.H=p,P.A=b,Ze===null&&(Dt=null,nt=0,ph()),A}function NI(){for(;Ze!==null;)z1(Ze)}function CI(s,a){var l=pt;pt|=2;var d=V1(),p=U1();Dt!==s||nt!==a?(Yh=null,Kh=Te()+500,Ml(s,a)):Cl=An(s,a);e:do try{if(wt!==0&&Ze!==null){a=Ze;var b=yr;t:switch(wt){case 1:wt=0,yr=null,Pl(s,a,b,1);break;case 2:case 9:if(Wv(b)){wt=0,yr=null,F1(a);break}a=function(){wt!==2&&wt!==9||Dt!==s||(wt=7),Is(s)},b.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Wv(b)?(wt=0,yr=null,F1(a)):(wt=0,yr=null,Pl(s,a,b,7));break;case 5:var A=null;switch(Ze.tag){case 26:A=Ze.memoizedState;case 5:case 27:var V=Ze;if(A?Aw(A):V.stateNode.complete){wt=0,yr=null;var Q=V.sibling;if(Q!==null)Ze=Q;else{var le=V.return;le!==null?(Ze=le,Xh(le)):Ze=null}break t}}wt=0,yr=null,Pl(s,a,b,5);break;case 6:wt=0,yr=null,Pl(s,a,b,6);break;case 8:Yp(),$t=6;break e;default:throw Error(r(462))}}DI();break}catch(fe){j1(s,fe)}while(!0);return ii=ro=null,P.H=d,P.A=p,pt=l,Ze!==null?0:(Dt=null,nt=0,ph(),$t)}function DI(){for(;Ze!==null&&!He();)z1(Ze)}function z1(s){var a=u1(s.alternate,s,gi);s.memoizedProps=s.pendingProps,a===null?Xh(s):Ze=a}function F1(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=s1(l,a,a.pendingProps,a.type,void 0,nt);break;case 11:a=s1(l,a,a.pendingProps,a.type.render,a.ref,nt);break;case 5:up(a);default:h1(l,a),a=Ze=Uv(a,gi),a=u1(l,a,gi)}s.memoizedProps=s.pendingProps,a===null?Xh(s):Ze=a}function Pl(s,a,l,d){ii=ro=null,up(a),Tl=null,eu=0;var p=a.return;try{if(bI(s,p,a,l,nt)){$t=1,Vh(s,Pr(l,s.current)),Ze=null;return}}catch(b){if(p!==null)throw Ze=p,b;$t=1,Vh(s,Pr(l,s.current)),Ze=null;return}a.flags&32768?(ot||d===1?s=!0:Cl||(nt&536870912)!==0?s=!1:(ea=s=!0,(d===2||d===9||d===3||d===6)&&(d=gr.current,d!==null&&d.tag===13&&(d.flags|=16384))),B1(a,s)):Xh(a)}function Xh(s){var a=s;do{if((a.flags&32768)!==0){B1(a,ea);return}s=a.return;var l=EI(a.alternate,a,gi);if(l!==null){Ze=l;return}if(a=a.sibling,a!==null){Ze=a;return}Ze=a=s}while(a!==null);$t===0&&($t=5)}function B1(s,a){do{var l=TI(s.alternate,s);if(l!==null){l.flags&=32767,Ze=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ze=s;return}Ze=s=l}while(s!==null);$t=6,Ze=null}function q1(s,a,l,d,p,b,A,V,Q){s.cancelPendingCommit=null;do Jh();while(gn!==0);if((pt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=Lg,kg(s,l,b,A,V,Q),s===Dt&&(Ze=Dt=null,nt=0),Ol=a,ra=s,pi=l,$p=b,Gp=p,D1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,jI(mt,function(){return Y1(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,p=O.p,O.p=2,A=pt,pt|=4;try{SI(s,a,l)}finally{pt=A,O.p=p,P.T=d}}gn=1,H1(),$1(),G1()}}function H1(){if(gn===1){gn=0;var s=ra,a=Ol,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var d=O.p;O.p=2;var p=pt;pt|=4;try{T1(a,s);var b=oy,A=Nv(s.containerInfo),V=b.focusedElem,Q=b.selectionRange;if(A!==V&&V&&V.ownerDocument&&Iv(V.ownerDocument.documentElement,V)){if(Q!==null&&Dg(V)){var le=Q.start,fe=Q.end;if(fe===void 0&&(fe=le),"selectionStart"in V)V.selectionStart=le,V.selectionEnd=Math.min(fe,V.value.length);else{var ge=V.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),ke=V.textContent.length,Le=Math.min(Q.start,ke),Ct=Q.end===void 0?Le:Math.min(Q.end,ke);!de.extend&&Le>Ct&&(A=Ct,Ct=Le,Le=A);var re=kv(V,Le),J=kv(V,Ct);if(re&&J&&(de.rangeCount!==1||de.anchorNode!==re.node||de.anchorOffset!==re.offset||de.focusNode!==J.node||de.focusOffset!==J.offset)){var oe=ge.createRange();oe.setStart(re.node,re.offset),de.removeAllRanges(),Le>Ct?(de.addRange(oe),de.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),de.addRange(oe))}}}}for(ge=[],de=V;de=de.parentNode;)de.nodeType===1&&ge.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ge.length;V++){var me=ge[V];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}df=!!ay,oy=ay=null}finally{pt=p,O.p=d,P.T=l}}s.current=a,gn=2}}function $1(){if(gn===2){gn=0;var s=ra,a=Ol,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var d=O.p;O.p=2;var p=pt;pt|=4;try{v1(s,a.alternate,a)}finally{pt=p,O.p=d,P.T=l}}gn=3}}function G1(){if(gn===4||gn===3){gn=0,je();var s=ra,a=Ol,l=pi,d=D1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?gn=5:(gn=0,Ol=ra=null,K1(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(na=null),Zs(l),a=a.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=P.T,p=O.p,O.p=2,P.T=null;try{for(var b=s.onRecoverableError,A=0;A<d.length;A++){var V=d[A];b(V.value,{componentStack:V.stack})}}finally{P.T=a,O.p=p}}(pi&3)!==0&&Jh(),Is(s),p=s.pendingLanes,(l&261930)!==0&&(p&42)!==0?s===Kp?yu++:(yu=0,Kp=s):yu=0,_u(0)}}function K1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Jc(a)))}function Jh(){return H1(),$1(),G1(),Y1()}function Y1(){if(gn!==5)return!1;var s=ra,a=$p;$p=0;var l=Zs(pi),d=P.T,p=O.p;try{O.p=32>l?32:l,P.T=null,l=Gp,Gp=null;var b=ra,A=pi;if(gn=0,Ol=ra=null,pi=0,(pt&6)!==0)throw Error(r(331));var V=pt;if(pt|=4,I1(b.current),A1(b,b.current,A,l),pt=V,_u(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{O.p=p,P.T=d,K1(s,a)}}function Q1(s,a,l){a=Pr(l,a),a=Sp(s.stateNode,a,2),s=Wi(s,a,2),s!==null&&(za(s,2),Is(s))}function xt(s,a,l){if(s.tag===3)Q1(s,s,l);else for(;a!==null;){if(a.tag===3){Q1(a,s,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(na===null||!na.has(d))){s=Pr(l,s),l=Wb(2),d=Wi(a,l,2),d!==null&&(Xb(l,d,a,s),za(d,2),Is(d));break}}a=a.return}}function Wp(s,a,l){var d=s.pingCache;if(d===null){d=s.pingCache=new kI;var p=new Set;d.set(a,p)}else p=d.get(a),p===void 0&&(p=new Set,d.set(a,p));p.has(l)||(Bp=!0,p.add(l),s=OI.bind(null,s,a,l),a.then(s,s))}function OI(s,a,l){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Dt===s&&(nt&l)===l&&($t===4||$t===3&&(nt&62914560)===nt&&300>Te()-Gh?(pt&2)===0&&Ml(s,0):qp|=l,Dl===nt&&(Dl=0)),Is(s)}function W1(s,a){a===0&&(a=Ir()),s=eo(s,a),s!==null&&(za(s,a),Is(s))}function MI(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),W1(s,l)}function PI(s,a){var l=0;switch(s.tag){case 31:case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),W1(s,l)}function jI(s,a){return pe(s,a)}var Zh=null,jl=null,Xp=!1,ef=!1,Jp=!1,ia=0;function Is(s){s!==jl&&s.next===null&&(jl===null?Zh=jl=s:jl=jl.next=s),ef=!0,Xp||(Xp=!0,VI())}function _u(s,a){if(!Jp&&ef){Jp=!0;do for(var l=!1,d=Zh;d!==null;){if(s!==0){var p=d.pendingLanes;if(p===0)var b=0;else{var A=d.suspendedLanes,V=d.pingedLanes;b=(1<<31-Ot(42|s)+1)-1,b&=p&~(A&~V),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,ew(d,b))}else b=nt,b=Sn(d,d===Dt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||An(d,b)||(l=!0,ew(d,b));d=d.next}while(l);Jp=!1}}function LI(){X1()}function X1(){ef=Xp=!1;var s=0;ia!==0&&YI()&&(s=ia);for(var a=Te(),l=null,d=Zh;d!==null;){var p=d.next,b=J1(d,a);b===0?(d.next=null,l===null?Zh=p:l.next=p,p===null&&(jl=l)):(l=d,(s!==0||(b&3)!==0)&&(ef=!0)),d=p}gn!==0&&gn!==5||_u(s),ia!==0&&(ia=0)}function J1(s,a){for(var l=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var A=31-Ot(b),V=1<<A,Q=p[A];Q===-1?((V&l)===0||(V&d)!==0)&&(p[A]=el(V,a)):Q<=a&&(s.expiredLanes|=V),b&=~V}if(a=Dt,l=nt,l=Sn(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,l===0||s===a&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Se(d),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||An(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(d!==null&&Se(d),Zs(l)){case 2:case 8:l=Gn;break;case 32:l=mt;break;case 268435456:l=qt;break;default:l=mt}return d=Z1.bind(null,s),l=pe(l,d),s.callbackPriority=a,s.callbackNode=l,a}return d!==null&&d!==null&&Se(d),s.callbackPriority=2,s.callbackNode=null,2}function Z1(s,a){if(gn!==0&&gn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Jh()&&s.callbackNode!==l)return null;var d=nt;return d=Sn(s,s===Dt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(M1(s,d,a),J1(s,Te()),s.callbackNode!=null&&s.callbackNode===l?Z1.bind(null,s):null)}function ew(s,a){if(Jh())return null;M1(s,a,!0)}function VI(){WI(function(){(pt&6)!==0?pe(_t,LI):X1()})}function Zp(){if(ia===0){var s=wl;s===0&&(s=jn,jn<<=1,(jn&261888)===0&&(jn=256)),ia=s}return ia}function tw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:al(""+s)}function nw(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function UI(s,a,l,d,p){if(a==="submit"&&l&&l.stateNode===p){var b=tw((p[vn]||null).action),A=d.submitter;A&&(a=(a=A[vn]||null)?tw(a.formAction):A.getAttribute("formAction"),a!==null&&(b=a,A=null));var V=new xs("action","action",null,d,p);s.push({event:V,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ia!==0){var Q=A?nw(p,A):new FormData(p);vp(l,{pending:!0,data:Q,method:p.method,action:b},null,Q)}}else typeof b=="function"&&(V.preventDefault(),Q=A?nw(p,A):new FormData(p),vp(l,{pending:!0,data:Q,method:p.method,action:b},b,Q))},currentTarget:p}]})}}for(var ey=0;ey<jg.length;ey++){var ty=jg[ey],zI=ty.toLowerCase(),FI=ty[0].toUpperCase()+ty.slice(1);ns(zI,"on"+FI)}ns(Ov,"onAnimationEnd"),ns(Mv,"onAnimationIteration"),ns(Pv,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(rI,"onTransitionRun"),ns(sI,"onTransitionStart"),ns(iI,"onTransitionCancel"),ns(jv,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function rw(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],p=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var A=d.length-1;0<=A;A--){var V=d[A],Q=V.instance,le=V.currentTarget;if(V=V.listener,Q!==b&&p.isPropagationStopped())break e;b=V,p.currentTarget=le;try{b(p)}catch(fe){gh(fe)}p.currentTarget=null,b=Q}else for(A=0;A<d.length;A++){if(V=d[A],Q=V.instance,le=V.currentTarget,V=V.listener,Q!==b&&p.isPropagationStopped())break e;b=V,p.currentTarget=le;try{b(p)}catch(fe){gh(fe)}p.currentTarget=null,b=Q}}}}function et(s,a){var l=a[tl];l===void 0&&(l=a[tl]=new Set);var d=s+"__bubble";l.has(d)||(sw(a,s,2,!1),l.add(d))}function ny(s,a,l){var d=0;a&&(d|=4),sw(l,s,d,a)}var tf="_reactListening"+Math.random().toString(36).slice(2);function ry(s){if(!s[tf]){s[tf]=!0,Cc.forEach(function(l){l!=="selectionchange"&&(BI.has(l)||ny(l,!1,s),ny(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[tf]||(a[tf]=!0,ny("selectionchange",!1,a))}}function sw(s,a,l,d){switch(Ow(a)){case 2:var p=pN;break;case 8:p=yN;break;default:p=_y}l=p.bind(null,a,l,s),p=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(a,l,{capture:!0,passive:p}):s.addEventListener(a,l,!0):p!==void 0?s.addEventListener(a,l,{passive:p}):s.addEventListener(a,l,!1)}function sy(s,a,l,d,p){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var V=d.stateNode.containerInfo;if(V===p)break;if(A===4)for(A=d.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;V!==null;){if(A=gs(V),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){d=b=A;continue e}V=V.parentNode}}d=d.return}zi(function(){var le=b,fe=Cr(l),ge=[];e:{var ce=Lv.get(s);if(ce!==void 0){var de=xs,ke=s;switch(s){case"keypress":if(Ya(l)===0)break e;case"keydown":case"keyup":de=hh;break;case"focusin":ke="focus",de=Wa;break;case"focusout":ke="blur",de=Wa;break;case"beforeblur":case"afterblur":de=Wa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=S;break;case Ov:case Mv:case Pv:de=ih;break;case jv:de=q;break;case"scroll":case"scrollend":de=qc;break;case"wheel":de=ue;break;case"copy":case"cut":case"paste":de=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ni;break;case"toggle":case"beforetoggle":de=$e}var Le=(a&4)!==0,Ct=!Le&&(s==="scroll"||s==="scrollend"),re=Le?ce!==null?ce+"Capture":null:ce;Le=[];for(var J=le,oe;J!==null;){var me=J;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||re===null||(me=Jr(J,re),me!=null&&Le.push(bu(J,me,oe))),Ct)break;J=J.return}0<Le.length&&(ce=new de(ce,ke,null,l,fe),ge.push({event:ce,listeners:Le}))}}if((a&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ce&&l!==zc&&(ke=l.relatedTarget||l.fromElement)&&(gs(ke)||ke[fs]))break e;if((de||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(ke=l.relatedTarget||l.toElement,de=le,ke=ke?gs(ke):null,ke!==null&&(Ct=o(ke),Le=ke.tag,ke!==Ct||Le!==5&&Le!==27&&Le!==6)&&(ke=null)):(de=null,ke=le),de!==ke)){if(Le=Hc,me="onMouseLeave",re="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Le=ni,me="onPointerLeave",re="onPointerEnter",J="pointer"),Ct=de==null?ce:dr(de),oe=ke==null?ce:dr(ke),ce=new Le(me,J+"leave",de,l,fe),ce.target=Ct,ce.relatedTarget=oe,me=null,gs(fe)===le&&(Le=new Le(re,J+"enter",ke,l,fe),Le.target=oe,Le.relatedTarget=Ct,me=Le),Ct=me,de&&ke)t:{for(Le=qI,re=de,J=ke,oe=0,me=re;me;me=Le(me))oe++;me=0;for(var De=J;De;De=Le(De))me++;for(;0<oe-me;)re=Le(re),oe--;for(;0<me-oe;)J=Le(J),me--;for(;oe--;){if(re===J||J!==null&&re===J.alternate){Le=re;break t}re=Le(re),J=Le(J)}Le=null}else Le=null;de!==null&&iw(ge,ce,de,Le,!1),ke!==null&&Ct!==null&&iw(ge,Ct,ke,Le,!0)}}e:{if(ce=le?dr(le):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var ht=xv;else if(bv(ce))if(Ev)ht=eI;else{ht=Jk;var Ne=Xk}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&il(le.elementType)&&(ht=xv):ht=Zk;if(ht&&(ht=ht(s,le))){wv(ge,ht,l,fe);break e}Ne&&Ne(s,ce,le),s==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Lc(ce,"number",ce.value)}switch(Ne=le?dr(le):window,s){case"focusin":(bv(Ne)||Ne.contentEditable==="true")&&(fl=Ne,Og=le,Qc=null);break;case"focusout":Qc=Og=fl=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,Cv(ge,l,fe);break;case"selectionchange":if(nI)break;case"keydown":case"keyup":Cv(ge,l,fe)}var Qe;if(gt)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else hl?Xa(s,l)&&(rt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(Ss&&l.locale!=="ko"&&(hl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&hl&&(Qe=Bc()):(ws=fe,Fc="value"in ws?ws.value:ws.textContent,hl=!0)),Ne=nf(le,rt),0<Ne.length&&(rt=new Ts(rt,s,null,l,fe),ge.push({event:rt,listeners:Ne}),Qe?rt.data=Qe:(Qe=dl(l),Qe!==null&&(rt.data=Qe)))),(Qe=Or?Kk(s,l):Yk(s,l))&&(rt=nf(le,"onBeforeInput"),0<rt.length&&(Ne=new Ts("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Ne,listeners:rt}),Ne.data=Qe)),UI(ge,s,le,l,fe)}rw(ge,a)})}function bu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function nf(s,a){for(var l=a+"Capture",d=[];s!==null;){var p=s,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=Jr(s,l),p!=null&&d.unshift(bu(s,p,b)),p=Jr(s,a),p!=null&&d.push(bu(s,p,b))),s.tag===3)return d;s=s.return}return[]}function qI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function iw(s,a,l,d,p){for(var b=a._reactName,A=[];l!==null&&l!==d;){var V=l,Q=V.alternate,le=V.stateNode;if(V=V.tag,Q!==null&&Q===d)break;V!==5&&V!==26&&V!==27||le===null||(Q=le,p?(le=Jr(l,b),le!=null&&A.unshift(bu(l,le,Q))):p||(le=Jr(l,b),le!=null&&A.push(bu(l,le,Q)))),l=l.return}A.length!==0&&s.push({event:a,listeners:A})}var HI=/\r\n?/g,$I=/\u0000|\uFFFD/g;function aw(s){return(typeof s=="string"?s:""+s).replace(HI,`
`).replace($I,"")}function ow(s,a){return a=aw(a),aw(s)===a}function Nt(s,a,l,d,p,b){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||nr(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&nr(s,""+d);break;case"className":hr(s,"class",d);break;case"tabIndex":hr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":hr(s,l,d);break;case"style":Uc(s,d,b);break;case"data":if(a!=="object"){hr(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=al(""+d),s.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&Nt(s,a,"name",p.name,p,null),Nt(s,a,"formEncType",p.formEncType,p,null),Nt(s,a,"formMethod",p.formMethod,p,null),Nt(s,a,"formTarget",p.formTarget,p,null)):(Nt(s,a,"encType",p.encType,p,null),Nt(s,a,"method",p.method,p,null),Nt(s,a,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(l);break}d=al(""+d),s.setAttribute(l,d);break;case"onClick":d!=null&&(s.onclick=Xr);break;case"onScroll":d!=null&&et("scroll",s);break;case"onScrollEnd":d!=null&&et("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}l=al(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""+d):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":d===!0?s.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(l,d):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(l,d):s.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(l):s.setAttribute(l,d);break;case"popover":et("beforetoggle",s),et("toggle",s),rl(s,"popover",d);break;case"xlinkActuate":sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":rl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=nh.get(l)||l,rl(s,l,d))}}function iy(s,a,l,d,p,b){switch(l){case"style":Uc(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof d=="string"?nr(s,d):(typeof d=="number"||typeof d=="bigint")&&nr(s,""+d);break;case"onScroll":d!=null&&et("scroll",s);break;case"onScrollEnd":d!=null&&et("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),b=s[vn]||null,b=b!=null?b[l]:null,typeof b=="function"&&s.removeEventListener(a,b,p),typeof d=="function")){typeof b!="function"&&b!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,d,p);break e}l in s?s[l]=d:d===!0?s.setAttribute(l,""):rl(s,l,d)}}}function Cn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",s),et("load",s);var d=!1,p=!1,b;for(b in l)if(l.hasOwnProperty(b)){var A=l[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(s,a,b,A,l,null)}}p&&Nt(s,a,"srcSet",l.srcSet,l,null),d&&Nt(s,a,"src",l.src,l,null);return;case"input":et("invalid",s);var V=b=A=p=null,Q=null,le=null;for(d in l)if(l.hasOwnProperty(d)){var fe=l[d];if(fe!=null)switch(d){case"name":p=fe;break;case"type":A=fe;break;case"checked":Q=fe;break;case"defaultChecked":le=fe;break;case"value":b=fe;break;case"defaultValue":V=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Nt(s,a,d,fe,l,null)}}Zd(s,b,V,Q,le,A,p,!1);return;case"select":et("invalid",s),d=A=b=null;for(p in l)if(l.hasOwnProperty(p)&&(V=l[p],V!=null))switch(p){case"value":b=V;break;case"defaultValue":A=V;break;case"multiple":d=V;default:Nt(s,a,p,V,l,null)}a=b,l=A,s.multiple=!!d,a!=null?ji(s,!!d,a,!1):l!=null&&ji(s,!!d,l,!0);return;case"textarea":et("invalid",s),b=p=d=null;for(A in l)if(l.hasOwnProperty(A)&&(V=l[A],V!=null))switch(A){case"value":d=V;break;case"defaultValue":p=V;break;case"children":b=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:Nt(s,a,A,V,l,null)}Li(s,d,p,b);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(d=l[Q],d!=null))switch(Q){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Nt(s,a,Q,d,l,null)}return;case"dialog":et("beforetoggle",s),et("toggle",s),et("cancel",s),et("close",s);break;case"iframe":case"object":et("load",s);break;case"video":case"audio":for(d=0;d<vu.length;d++)et(vu[d],s);break;case"image":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"embed":case"source":case"link":et("error",s),et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(d=l[le],d!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(s,a,le,d,l,null)}return;default:if(il(a)){for(fe in l)l.hasOwnProperty(fe)&&(d=l[fe],d!==void 0&&iy(s,a,fe,d,l,void 0));return}}for(V in l)l.hasOwnProperty(V)&&(d=l[V],d!=null&&Nt(s,a,V,d,l,null))}function GI(s,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,A=null,V=null,Q=null,le=null,fe=null;for(de in l){var ge=l[de];if(l.hasOwnProperty(de)&&ge!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:d.hasOwnProperty(de)||Nt(s,a,de,null,d,ge)}}for(var ce in d){var de=d[ce];if(ge=l[ce],d.hasOwnProperty(ce)&&(de!=null||ge!=null))switch(ce){case"type":b=de;break;case"name":p=de;break;case"checked":le=de;break;case"defaultChecked":fe=de;break;case"value":A=de;break;case"defaultValue":V=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:de!==ge&&Nt(s,a,ce,de,d,ge)}}sl(s,A,V,Q,le,fe,b,p);return;case"select":de=A=V=ce=null;for(b in l)if(Q=l[b],l.hasOwnProperty(b)&&Q!=null)switch(b){case"value":break;case"multiple":de=Q;default:d.hasOwnProperty(b)||Nt(s,a,b,null,d,Q)}for(p in d)if(b=d[p],Q=l[p],d.hasOwnProperty(p)&&(b!=null||Q!=null))switch(p){case"value":ce=b;break;case"defaultValue":V=b;break;case"multiple":A=b;default:b!==Q&&Nt(s,a,p,b,d,Q)}a=V,l=A,d=de,ce!=null?ji(s,!!l,ce,!1):!!d!=!!l&&(a!=null?ji(s,!!l,a,!0):ji(s,!!l,l?[]:"",!1));return;case"textarea":de=ce=null;for(V in l)if(p=l[V],l.hasOwnProperty(V)&&p!=null&&!d.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Nt(s,a,V,null,d,p)}for(A in d)if(p=d[A],b=l[A],d.hasOwnProperty(A)&&(p!=null||b!=null))switch(A){case"value":ce=p;break;case"defaultValue":de=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==b&&Nt(s,a,A,p,d,b)}eh(s,ce,de);return;case"option":for(var ke in l)if(ce=l[ke],l.hasOwnProperty(ke)&&ce!=null&&!d.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:Nt(s,a,ke,null,d,ce)}for(Q in d)if(ce=d[Q],de=l[Q],d.hasOwnProperty(Q)&&ce!==de&&(ce!=null||de!=null))switch(Q){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Nt(s,a,Q,ce,d,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)ce=l[Le],l.hasOwnProperty(Le)&&ce!=null&&!d.hasOwnProperty(Le)&&Nt(s,a,Le,null,d,ce);for(le in d)if(ce=d[le],de=l[le],d.hasOwnProperty(le)&&ce!==de&&(ce!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:Nt(s,a,le,ce,d,de)}return;default:if(il(a)){for(var Ct in l)ce=l[Ct],l.hasOwnProperty(Ct)&&ce!==void 0&&!d.hasOwnProperty(Ct)&&iy(s,a,Ct,void 0,d,ce);for(fe in d)ce=d[fe],de=l[fe],!d.hasOwnProperty(fe)||ce===de||ce===void 0&&de===void 0||iy(s,a,fe,ce,d,de);return}}for(var re in l)ce=l[re],l.hasOwnProperty(re)&&ce!=null&&!d.hasOwnProperty(re)&&Nt(s,a,re,null,d,ce);for(ge in d)ce=d[ge],de=l[ge],!d.hasOwnProperty(ge)||ce===de||ce==null&&de==null||Nt(s,a,ge,ce,d,de)}function lw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var p=l[d],b=p.transferSize,A=p.initiatorType,V=p.duration;if(b&&V&&lw(A)){for(A=0,V=p.responseEnd,d+=1;d<l.length;d++){var Q=l[d],le=Q.startTime;if(le>V)break;var fe=Q.transferSize,ge=Q.initiatorType;fe&&lw(ge)&&(Q=Q.responseEnd,A+=fe*(Q<V?1:(V-le)/(Q-le)))}if(--d,a+=8*(b+A)/(p.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ay=null,oy=null;function rf(s){return s.nodeType===9?s:s.ownerDocument}function cw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function ly(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var cy=null;function YI(){var s=window.event;return s&&s.type==="popstate"?s===cy?!1:(cy=s,!0):(cy=null,!1)}var dw=typeof setTimeout=="function"?setTimeout:void 0,QI=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,WI=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(s){return hw.resolve(null).then(s).catch(XI)}:dw;function XI(s){setTimeout(function(){throw s})}function aa(s){return s==="head"}function fw(s,a){var l=a,d=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(d===0){s.removeChild(p),zl(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")wu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,wu(l);for(var b=l.firstChild;b;){var A=b.nextSibling,V=b.nodeName;b[ms]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=A}}else l==="body"&&wu(s.ownerDocument.body);l=p}while(l);zl(a)}function mw(s,a){var l=s;s=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=d}while(l)}function uy(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":uy(l),nl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function JI(s,a,l,d){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[ms])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=zr(s.nextSibling),s===null)break}return null}function ZI(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=zr(s.nextSibling),s===null))return null;return s}function gw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=zr(s.nextSibling),s===null))return null;return s}function dy(s){return s.data==="$?"||s.data==="$~"}function hy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function eN(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function zr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var fy=null;function pw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return zr(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function yw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function _w(s,a,l){switch(a=rf(l),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function wu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);nl(s)}var Fr=new Map,vw=new Set;function sf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var yi=O.d;O.d={f:tN,r:nN,D:rN,C:sN,L:iN,m:aN,X:lN,S:oN,M:cN};function tN(){var s=yi.f(),a=Qh();return s||a}function nN(s){var a=Nr(s);a!==null&&a.tag===5&&a.type==="form"?jb(a):yi.r(s)}var Ll=typeof document>"u"?null:document;function bw(s,a,l){var d=Ll;if(d&&typeof a=="string"&&a){var p=tr(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),vw.has(p)||(vw.add(p),s={rel:s,crossOrigin:l,href:a},d.querySelector(p)===null&&(a=d.createElement("link"),Cn(a,"link",s),rn(a),d.head.appendChild(a)))}}function rN(s){yi.D(s),bw("dns-prefetch",s,null)}function sN(s,a){yi.C(s,a),bw("preconnect",s,a)}function iN(s,a,l){yi.L(s,a,l);var d=Ll;if(d&&s&&a){var p='link[rel="preload"][as="'+tr(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+tr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+tr(l.imageSizes)+'"]')):p+='[href="'+tr(s)+'"]';var b=p;switch(a){case"style":b=Vl(s);break;case"script":b=Ul(s)}Fr.has(b)||(s=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Fr.set(b,s),d.querySelector(p)!==null||a==="style"&&d.querySelector(xu(b))||a==="script"&&d.querySelector(Eu(b))||(a=d.createElement("link"),Cn(a,"link",s),rn(a),d.head.appendChild(a)))}}function aN(s,a){yi.m(s,a);var l=Ll;if(l&&s){var d=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+tr(d)+'"][href="'+tr(s)+'"]',b=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ul(s)}if(!Fr.has(b)&&(s=y({rel:"modulepreload",href:s},a),Fr.set(b,s),l.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Eu(b)))return}d=l.createElement("link"),Cn(d,"link",s),rn(d),l.head.appendChild(d)}}}function oN(s,a,l){yi.S(s,a,l);var d=Ll;if(d&&s){var p=ps(d).hoistableStyles,b=Vl(s);a=a||"default";var A=p.get(b);if(!A){var V={loading:0,preload:null};if(A=d.querySelector(xu(b)))V.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Fr.get(b))&&my(s,l);var Q=A=d.createElement("link");rn(Q),Cn(Q,"link",s),Q._p=new Promise(function(le,fe){Q.onload=le,Q.onerror=fe}),Q.addEventListener("load",function(){V.loading|=1}),Q.addEventListener("error",function(){V.loading|=2}),V.loading|=4,af(A,a,d)}A={type:"stylesheet",instance:A,count:1,state:V},p.set(b,A)}}}function lN(s,a){yi.X(s,a);var l=Ll;if(l&&s){var d=ps(l).hoistableScripts,p=Ul(s),b=d.get(p);b||(b=l.querySelector(Eu(p)),b||(s=y({src:s,async:!0},a),(a=Fr.get(p))&&gy(s,a),b=l.createElement("script"),rn(b),Cn(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(p,b))}}function cN(s,a){yi.M(s,a);var l=Ll;if(l&&s){var d=ps(l).hoistableScripts,p=Ul(s),b=d.get(p);b||(b=l.querySelector(Eu(p)),b||(s=y({src:s,async:!0,type:"module"},a),(a=Fr.get(p))&&gy(s,a),b=l.createElement("script"),rn(b),Cn(b,"link",s),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(p,b))}}function ww(s,a,l,d){var p=(p=_e.current)?sf(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Vl(l.href),l=ps(p).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Vl(l.href);var b=ps(p).hoistableStyles,A=b.get(s);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,A),(b=p.querySelector(xu(s)))&&!b._p&&(A.instance=b,A.state.loading=5),Fr.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fr.set(s,l),b||uN(p,s,l,A.state))),a&&d===null)throw Error(r(528,""));return A}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(l),l=ps(p).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Vl(s){return'href="'+tr(s)+'"'}function xu(s){return'link[rel="stylesheet"]['+s+"]"}function xw(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function uN(s,a,l,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Cn(a,"link",l),rn(a),s.head.appendChild(a))}function Ul(s){return'[src="'+tr(s)+'"]'}function Eu(s){return"script[async]"+s}function Ew(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+tr(l.href)+'"]');if(d)return a.instance=d,rn(d),d;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),rn(d),Cn(d,"style",p),af(d,l.precedence,s),a.instance=d;case"stylesheet":p=Vl(l.href);var b=s.querySelector(xu(p));if(b)return a.state.loading|=4,a.instance=b,rn(b),b;d=xw(l),(p=Fr.get(p))&&my(d,p),b=(s.ownerDocument||s).createElement("link"),rn(b);var A=b;return A._p=new Promise(function(V,Q){A.onload=V,A.onerror=Q}),Cn(b,"link",d),a.state.loading|=4,af(b,l.precedence,s),a.instance=b;case"script":return b=Ul(l.src),(p=s.querySelector(Eu(b)))?(a.instance=p,rn(p),p):(d=l,(p=Fr.get(b))&&(d=y({},l),gy(d,p)),s=s.ownerDocument||s,p=s.createElement("script"),rn(p),Cn(p,"link",d),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,af(d,l.precedence,s));return a.instance}function af(s,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,b=p,A=0;A<d.length;A++){var V=d[A];if(V.dataset.precedence===a)b=V;else if(b!==p)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function my(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function gy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var of=null;function Tw(s,a,l){if(of===null){var d=new Map,p=of=new Map;p.set(l,d)}else p=of,d=p.get(l),d||(d=new Map,p.set(l,d));if(d.has(s))return d;for(d.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var b=l[p];if(!(b[ms]||b[nn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(a)||"";A=s+A;var V=d.get(A);V?V.push(b):d.set(A,[b])}}return d}function Sw(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function dN(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Aw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function hN(s,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Vl(d.href),b=a.querySelector(xu(p));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=lf.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=b,rn(b);return}b=a.ownerDocument||a,d=xw(d),(p=Fr.get(p))&&my(d,p),b=b.createElement("link"),rn(b);var A=b;A._p=new Promise(function(V,Q){A.onload=V,A.onerror=Q}),Cn(b,"link",d),l.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=lf.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var py=0;function fN(s,a){return s.stylesheets&&s.count===0&&uf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var d=setTimeout(function(){if(s.stylesheets&&uf(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&py===0&&(py=62500*KI());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&uf(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>py?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cf=null;function uf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cf=new Map,a.forEach(mN,s),cf=null,lf.call(s))}function mN(s,a){if(!(a.state.loading&4)){var l=cf.get(s);if(l)var d=l.get(null);else{l=new Map,cf.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var A=p[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),d=A)}d&&l.set(null,d)}p=a.instance,A=p.getAttribute("data-precedence"),b=l.get(A)||d,b===d&&l.set(null,p),l.set(A,p),this.count++,d=lf.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),b?b.parentNode.insertBefore(p,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var Tu={$$typeof:B,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function gN(s,a,l,d,p,b,A,V,Q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.hiddenUpdates=_n(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function Rw(s,a,l,d,p,b,A,V,Q,le,fe,ge){return s=new gN(s,a,l,A,Q,le,fe,ge,V),a=1,b===!0&&(a|=24),b=mr(3,null,null,a),s.current=b,b.stateNode=s,a=Qg(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:a},Zg(b),s}function kw(s){return s?(s=pl,s):pl}function Iw(s,a,l,d,p,b){p=kw(p),d.context===null?d.context=p:d.pendingContext=p,d=Qi(a),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=Wi(s,d,a),l!==null&&(or(l,s,a),nu(l,s,a))}function Nw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function yy(s,a){Nw(s,a),(s=s.alternate)&&Nw(s,a)}function Cw(s){if(s.tag===13||s.tag===31){var a=eo(s,67108864);a!==null&&or(a,s,67108864),yy(s,67108864)}}function Dw(s){if(s.tag===13||s.tag===31){var a=vr();a=Ba(a);var l=eo(s,a);l!==null&&or(l,s,a),yy(s,a)}}var df=!0;function pN(s,a,l,d){var p=P.T;P.T=null;var b=O.p;try{O.p=2,_y(s,a,l,d)}finally{O.p=b,P.T=p}}function yN(s,a,l,d){var p=P.T;P.T=null;var b=O.p;try{O.p=8,_y(s,a,l,d)}finally{O.p=b,P.T=p}}function _y(s,a,l,d){if(df){var p=vy(d);if(p===null)sy(s,a,d,hf,l),Mw(s,d);else if(vN(p,s,a,l,d))d.stopPropagation();else if(Mw(s,d),a&4&&-1<_N.indexOf(s)){for(;p!==null;){var b=Nr(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=mn(b.pendingLanes);if(A!==0){var V=b;for(V.pendingLanes|=2,V.entangledLanes|=2;A;){var Q=1<<31-Ot(A);V.entanglements[1]|=Q,A&=~Q}Is(b),(pt&6)===0&&(Kh=Te()+500,_u(0))}}break;case 31:case 13:V=eo(b,2),V!==null&&or(V,b,2),Qh(),yy(b,2)}if(b=vy(d),b===null&&sy(s,a,d,hf,l),b===p)break;p=b}p!==null&&d.stopPropagation()}else sy(s,a,d,null,l)}}function vy(s){return s=Cr(s),by(s)}var hf=null;function by(s){if(hf=null,s=gs(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=u(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return hf=s,null}function Ow(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case _t:return 2;case Gn:return 8;case mt:case Kn:return 32;case qt:return 268435456;default:return 32}default:return 32}}var wy=!1,oa=null,la=null,ca=null,Su=new Map,Au=new Map,ua=[],_N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mw(s,a){switch(s){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Su.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(a.pointerId)}}function Ru(s,a,l,d,p,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[p]},a!==null&&(a=Nr(a),a!==null&&Cw(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function vN(s,a,l,d,p){switch(a){case"focusin":return oa=Ru(oa,s,a,l,d,p),!0;case"dragenter":return la=Ru(la,s,a,l,d,p),!0;case"mouseover":return ca=Ru(ca,s,a,l,d,p),!0;case"pointerover":var b=p.pointerId;return Su.set(b,Ru(Su.get(b)||null,s,a,l,d,p)),!0;case"gotpointercapture":return b=p.pointerId,Au.set(b,Ru(Au.get(b)||null,s,a,l,d,p)),!0}return!1}function Pw(s){var a=gs(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,Qr(s.priority,function(){Dw(l)});return}}else if(a===31){if(a=u(l),a!==null){s.blockedOn=a,Qr(s.priority,function(){Dw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ff(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=vy(s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);zc=d,l.target.dispatchEvent(d),zc=null}else return a=Nr(l),a!==null&&Cw(a),s.blockedOn=l,!1;a.shift()}return!0}function jw(s,a,l){ff(s)&&l.delete(a)}function bN(){wy=!1,oa!==null&&ff(oa)&&(oa=null),la!==null&&ff(la)&&(la=null),ca!==null&&ff(ca)&&(ca=null),Su.forEach(jw),Au.forEach(jw)}function mf(s,a){s.blockedOn===a&&(s.blockedOn=null,wy||(wy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bN)))}var gf=null;function Lw(s){gf!==s&&(gf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gf===s&&(gf=null);for(var a=0;a<s.length;a+=3){var l=s[a],d=s[a+1],p=s[a+2];if(typeof d!="function"){if(by(d||l)===null)continue;break}var b=Nr(l);b!==null&&(s.splice(a,3),a-=3,vp(b,{pending:!0,data:p,method:l.method,action:d},d,p))}}))}function zl(s){function a(Q){return mf(Q,s)}oa!==null&&mf(oa,s),la!==null&&mf(la,s),ca!==null&&mf(ca,s),Su.forEach(a),Au.forEach(a);for(var l=0;l<ua.length;l++){var d=ua[l];d.blockedOn===s&&(d.blockedOn=null)}for(;0<ua.length&&(l=ua[0],l.blockedOn===null);)Pw(l),l.blockedOn===null&&ua.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],A=p[vn]||null;if(typeof b=="function")A||Lw(l);else if(A){var V=null;if(b&&b.hasAttribute("formAction")){if(p=b,A=b[vn]||null)V=A.formAction;else if(by(p)!==null)continue}else V=A.action;typeof V=="function"?l[d+1]=V:(l.splice(d,3),d-=3),Lw(l)}}}function Vw(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function xy(s){this._internalRoot=s}pf.prototype.render=xy.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,d=vr();Iw(l,d,s,a,null,null)},pf.prototype.unmount=xy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Iw(s.current,2,null,s,null,null),Qh(),a[fs]=null}};function pf(s){this._internalRoot=s}pf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Qd();s={blockedOn:null,target:s,priority:a};for(var l=0;l<ua.length&&a!==0&&a<ua[l].priority;l++);ua.splice(l,0,s),l===0&&Pw(s)}};var Uw=e.version;if(Uw!=="19.2.3")throw Error(r(527,Uw,"19.2.3"));O.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var wN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{Yt=yf.inject(wN),Rt=yf}catch{}}return Iu.createRoot=function(s,a){if(!i(s))throw Error(r(299));var l=!1,d="",p=Gb,b=Kb,A=Yb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Rw(s,1,!1,null,null,l,d,null,p,b,A,Vw),s[fs]=a.current,ry(s),new xy(a)},Iu.hydrateRoot=function(s,a,l){if(!i(s))throw Error(r(299));var d=!1,p="",b=Gb,A=Kb,V=Yb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(V=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=Rw(s,1,!0,a,l??null,d,p,Q,b,A,V,Vw),a.context=kw(null),l=a.current,d=vr(),d=Ba(d),p=Qi(d),p.callback=null,Wi(l,p,d),l=d,a.current.lanes=l,za(a,l),Is(a),s[fs]=a.current,ry(s),new pf(a)},Iu.version="19.2.3",Iu}var Qw;function ON(){if(Qw)return Sy.exports;Qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sy.exports=DN(),Sy.exports}var MN=ON();var Ww="popstate";function PN(n={}){function e(i,o){let{pathname:c="/",search:u="",hash:h=""}=$o(i.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Jy("",{pathname:c,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let c=i.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let h=i.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:rd(o))}function r(i,o){Kr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return LN(e,t,r,n)}function Ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jN(){return Math.random().toString(36).substring(2,10)}function Xw(n,e){return{usr:n.state,key:n.key,idx:e}}function Jy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?$o(e):e,state:t,key:e&&e.key||r||jN()}}function rd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function $o(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function LN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let M=g(),L=M==null?null:M-f;f=M,h&&h({action:u,location:N.location,delta:L})}function v(M,L){u="PUSH";let F=Jy(N.location,M,L);t&&t(F,M),f=g()+1;let B=Xw(F,f),H=N.createHref(F);try{c.pushState(B,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(H)}o&&h&&h({action:u,location:N.location,delta:1})}function w(M,L){u="REPLACE";let F=Jy(N.location,M,L);t&&t(F,M),f=g();let B=Xw(F,f),H=N.createHref(F);c.replaceState(B,"",H),o&&h&&h({action:u,location:N.location,delta:0})}function x(M){return VN(M)}let N={get action(){return u},get location(){return n(i,c)},listen(M){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Ww,y),h=M,()=>{i.removeEventListener(Ww,y),h=null}},createHref(M){return e(i,M)},createURL:x,encodeLocation(M){let L=x(M);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:w,go(M){return c.go(M)}};return N}function VN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:rd(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function aS(n,e,t="/"){return UN(n,e,t,!1)}function UN(n,e,t,r){let i=typeof e=="string"?$o(e):e,o=Ti(i.pathname||"/",t);if(o==null)return null;let c=oS(n);zN(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=XN(o);u=QN(c[h],f,r)}return u}function oS(n,e=[],t=[],r="",i=!1){let o=(c,u,h=i,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&h)return;Ft(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=xi([r,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(Ft(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),oS(c.children,e,v,y,h)),!(c.path==null&&!c.index)&&e.push({path:y,score:KN(y,c.index),routesMeta:v})};return n.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of lS(c.path))o(c,u,!0,h)}),e}function lS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=lS(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function zN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var FN=/^:[\w-]+$/,BN=3,qN=2,HN=1,$N=10,GN=-2,Jw=n=>n==="*";function KN(n,e){let t=n.split("/"),r=t.length;return t.some(Jw)&&(r+=GN),e&&(r+=qN),t.filter(i=>!Jw(i)).reduce((i,o)=>i+(FN.test(o)?BN:o===""?HN:$N),r)}function YN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function QN(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=em({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=em({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:xi([o,y.pathname]),pathnameBase:nC(xi([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=xi([o,y.pathnameBase]))}return c}function em(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=WN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let x=u[v]||"";c=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:n}}function WN(n,e=!1,t=!0){Kr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ti(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var JN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZN=n=>JN.test(n);function eC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?$o(n):n,o;if(t)if(ZN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Kr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Zw(t.substring(1),"/"):o=Zw(t,e)}else o=e;return{pathname:o,search:rC(r),hash:sC(i)}}function Zw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Iy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cS(n){let e=tC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function uS(n,e,t,r=!1){let i;typeof n=="string"?i=$o(n):(i={...n},Ft(!i.pathname||!i.pathname.includes("?"),Iy("?","pathname","search",i)),Ft(!i.pathname||!i.pathname.includes("#"),Iy("#","pathname","hash",i)),Ft(!i.search||!i.search.includes("#"),Iy("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=eC(i,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var xi=n=>n.join("/").replace(/\/\/+/g,"/"),nC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function iC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function aC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dS=["POST","PUT","PATCH","DELETE"];new Set(dS);var oC=["GET",...dS];new Set(oC);var Ec=z.createContext(null);Ec.displayName="DataRouter";var zm=z.createContext(null);zm.displayName="DataRouterState";z.createContext(!1);var hS=z.createContext({isTransitioning:!1});hS.displayName="ViewTransition";var lC=z.createContext(new Map);lC.displayName="Fetchers";var cC=z.createContext(null);cC.displayName="Await";var us=z.createContext(null);us.displayName="Navigation";var Ad=z.createContext(null);Ad.displayName="Location";var ds=z.createContext({outlet:null,matches:[],isDataRoute:!1});ds.displayName="Route";var G0=z.createContext(null);G0.displayName="RouteError";function uC(n,{relative:e}={}){Ft(Rd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(us),{hash:i,pathname:o,search:c}=kd(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:xi([t,o])),r.createHref({pathname:u,search:c,hash:i})}function Rd(){return z.useContext(Ad)!=null}function Ar(){return Ft(Rd(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Ad).location}var fS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mS(n){z.useContext(us).static||z.useLayoutEffect(n)}function Rr(){let{isDataRoute:n}=z.useContext(ds);return n?SC():dC()}function dC(){Ft(Rd(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Ec),{basename:e,navigator:t}=z.useContext(us),{matches:r}=z.useContext(ds),{pathname:i}=Ar(),o=JSON.stringify(cS(r)),c=z.useRef(!1);return mS(()=>{c.current=!0}),z.useCallback((h,f={})=>{if(Kr(c.current,fS),!c.current)return;if(typeof h=="number"){t.go(h);return}let g=uS(h,JSON.parse(o),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:xi([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,i,n])}var hC=z.createContext(null);function fC(n){let e=z.useContext(ds).outlet;return z.useMemo(()=>e&&z.createElement(hC.Provider,{value:n},e),[e,n])}function K0(){let{matches:n}=z.useContext(ds),e=n[n.length-1];return e?e.params:{}}function kd(n,{relative:e}={}){let{matches:t}=z.useContext(ds),{pathname:r}=Ar(),i=JSON.stringify(cS(t));return z.useMemo(()=>uS(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function mC(n,e){return gS(n,e)}function gS(n,e,t,r,i){Ft(Rd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=z.useContext(us),{matches:c}=z.useContext(ds),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let F=y&&y.path||"";pS(f,!y||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let v=Ar(),w;if(e){let F=typeof e=="string"?$o(e):e;Ft(g==="/"||F.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),w=F}else w=v;let x=w.pathname||"/",N=x;if(g!=="/"){let F=g.replace(/^\//,"").split("/");N="/"+x.replace(/^\//,"").split("/").slice(F.length).join("/")}let M=aS(n,{pathname:N});Kr(y||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Kr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=vC(M&&M.map(F=>Object.assign({},F,{params:Object.assign({},h,F.params),pathname:xi([g,o.encodeLocation?o.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:xi([g,o.encodeLocation?o.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,r,i);return e&&L?z.createElement(Ad.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function gC(){let n=TC(),e=iC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,c)}var pC=z.createElement(gC,null),yC=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?z.createElement(ds.Provider,{value:this.props.routeContext},z.createElement(G0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _C({routeContext:n,match:e,children:t}){let r=z.useContext(Ec);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(ds.Provider,{value:n},t)}function vC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,h=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:v,errors:w}=t,x=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||x){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=t&&r?(g,y)=>{r(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:aC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,x=!1,N=null,M=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||pC,u&&(h<0&&v===0?(pS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,M=null):h===v&&(x=!0,M=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),F=()=>{let B;return w?B=N:x?B=M:y.route.Component?B=z.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=g,z.createElement(_C,{match:y,routeContext:{outlet:g,matches:L,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?z.createElement(yC,{location:t.location,revalidation:t.revalidation,component:N,error:w,children:F(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):F()},null)}function Y0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bC(n){let e=z.useContext(Ec);return Ft(e,Y0(n)),e}function wC(n){let e=z.useContext(zm);return Ft(e,Y0(n)),e}function xC(n){let e=z.useContext(ds);return Ft(e,Y0(n)),e}function Q0(n){let e=xC(n),t=e.matches[e.matches.length-1];return Ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function EC(){return Q0("useRouteId")}function TC(){let n=z.useContext(G0),e=wC("useRouteError"),t=Q0("useRouteError");return n!==void 0?n:e.errors?.[t]}function SC(){let{router:n}=bC("useNavigate"),e=Q0("useNavigate"),t=z.useRef(!1);return mS(()=>{t.current=!0}),z.useCallback(async(i,o={})=>{Kr(t.current,fS),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var ex={};function pS(n,e,t){!e&&!ex[n]&&(ex[n]=!0,Kr(!1,t))}z.memo(AC);function AC({routes:n,future:e,state:t,unstable_onError:r}){return gS(n,void 0,t,r,e)}function RC(n){return fC(n.context)}function br(n){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:c}){Ft(!Rd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:c,future:{}}),[u,i,o,c]);typeof t=="string"&&(t=$o(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,x=z.useMemo(()=>{let N=Ti(f,u);return N==null?null:{location:{pathname:N,search:g,hash:y,state:v,key:w},navigationType:r}},[u,f,g,y,v,w,r]);return Kr(x!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:z.createElement(us.Provider,{value:h},z.createElement(Ad.Provider,{children:e,value:x}))}function IC({children:n,location:e}){return mC(Zy(n),e)}function Zy(n,e=[]){let t=[];return z.Children.forEach(n,(r,i)=>{if(!z.isValidElement(r))return;let o=[...e,i];if(r.type===z.Fragment){t.push.apply(t,Zy(r.props.children,o));return}Ft(r.type===br,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Zy(r.props.children,o)),t.push(c)}),t}var Cf="get",Df="application/x-www-form-urlencoded";function Fm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function NC(n){return Fm(n)&&n.tagName.toLowerCase()==="button"}function CC(n){return Fm(n)&&n.tagName.toLowerCase()==="form"}function DC(n){return Fm(n)&&n.tagName.toLowerCase()==="input"}function OC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MC(n,e){return n.button===0&&(!e||e==="_self")&&!OC(n)}var _f=null;function PC(){if(_f===null)try{new FormData(document.createElement("form"),0),_f=!1}catch{_f=!0}return _f}var jC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ny(n){return n!=null&&!jC.has(n)?(Kr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Df}"`),null):n}function LC(n,e){let t,r,i,o,c;if(CC(n)){let u=n.getAttribute("action");r=u?Ti(u,e):null,t=n.getAttribute("method")||Cf,i=Ny(n.getAttribute("enctype"))||Df,o=new FormData(n)}else if(NC(n)||DC(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?Ti(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Cf,i=Ny(n.getAttribute("formenctype"))||Ny(u.getAttribute("enctype"))||Df,o=new FormData(u,n),!PC()){let{name:f,type:g,value:y}=n;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Fm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cf,r=null,i=Df,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function W0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VC(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ti(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function UC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function FC(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await UC(o,t);return c.links?c.links():[]}return[]}));return $C(r.flat(1).filter(zC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function tx(n,e,t,r,i,o){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||u(h,f)):o==="data"?e.filter((h,f)=>{let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function BC(n,e,{includeHydrateFallback:t}={}){return qC(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function qC(n){return[...new Set(n)]}function HC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function $C(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(HC(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function yS(){let n=z.useContext(Ec);return W0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function GC(){let n=z.useContext(zm);return W0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var X0=z.createContext(void 0);X0.displayName="FrameworkContext";function _S(){let n=z.useContext(X0);return W0(n,"You must render this element inside a <HydratedRouter> element"),n}function KC(n,e){let t=z.useContext(X0),[r,i]=z.useState(!1),[o,c]=z.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=z.useRef(null);z.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let N=L=>{L.forEach(F=>{c(F.isIntersecting)})},M=new IntersectionObserver(N,{threshold:.5});return v.current&&M.observe(v.current),()=>{M.disconnect()}}},[n]),z.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let w=()=>{i(!0)},x=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Nu(u,w),onBlur:Nu(h,x),onMouseEnter:Nu(f,w),onMouseLeave:Nu(g,x),onTouchStart:Nu(y,w)}]:[!1,v,{}]}function Nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function YC({page:n,...e}){let{router:t}=yS(),r=z.useMemo(()=>aS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(WC,{page:n,matches:r,...e}):null}function QC(n){let{manifest:e,routeModules:t}=_S(),[r,i]=z.useState([]);return z.useEffect(()=>{let o=!1;return FC(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function WC({page:n,matches:e,...t}){let r=Ar(),{manifest:i,routeModules:o}=_S(),{basename:c}=yS(),{loaderData:u,matches:h}=GC(),f=z.useMemo(()=>tx(n,e,h,i,r,"data"),[n,e,h,i,r]),g=z.useMemo(()=>tx(n,e,h,i,r,"assets"),[n,e,h,i,r]),y=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,N=!1;if(e.forEach(L=>{let F=i.routes[L.route.id];!F||!F.hasLoader||(!f.some(B=>B.route.id===L.route.id)&&L.route.id in u&&o[L.route.id]?.shouldRevalidate||F.hasClientLoader?N=!0:x.add(L.route.id))}),x.size===0)return[];let M=VC(n,c,"data");return N&&x.size>0&&M.searchParams.set("_routes",e.filter(L=>x.has(L.route.id)).map(L=>L.route.id).join(",")),[M.pathname+M.search]},[c,u,r,i,f,e,n,o]),v=z.useMemo(()=>BC(g,i),[g,i]),w=QC(g);return z.createElement(z.Fragment,null,y.map(x=>z.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>z.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),w.map(({key:x,link:N})=>z.createElement("link",{key:x,nonce:t.nonce,...N})))}function XC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vS&&(window.__reactRouterVersion="7.10.1")}catch{}function JC({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=z.useRef();i.current==null&&(i.current=PN({window:r,v5Compat:!0}));let o=i.current,[c,u]=z.useState({action:o.action,location:o.location}),h=z.useCallback(f=>{t===!1?u(f):z.startTransition(()=>u(f))},[t]);return z.useLayoutEffect(()=>o.listen(h),[o,h]),z.createElement(kC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var bS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Br=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:x,unstable_useTransitions:N}=z.useContext(us),M=typeof f=="string"&&bS.test(f),L,F=!1;if(typeof f=="string"&&M&&(L=f,vS))try{let R=new URL(window.location.href),C=f.startsWith("//")?new URL(R.protocol+f):new URL(f),j=Ti(C.pathname,x);C.origin===R.origin&&j!=null?f=j+C.search+C.hash:F=!0}catch{Kr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=uC(f,{relative:i}),[H,Y,U]=KC(r,v),I=n4(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:y,unstable_useTransitions:N});function T(R){e&&e(R),R.defaultPrevented||I(R)}let E=z.createElement("a",{...v,...U,href:L||B,onClick:F||o?e:T,ref:XC(w,Y),target:h,"data-discover":!M&&t==="render"?"true":void 0});return H&&!M?z.createElement(z.Fragment,null,E,z.createElement(YC,{page:B})):E});Br.displayName="Link";var ZC=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:u,children:h,...f},g){let y=kd(c,{relative:f.relative}),v=Ar(),w=z.useContext(zm),{navigator:x,basename:N}=z.useContext(us),M=w!=null&&o4(y)&&u===!0,L=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,F=v.pathname,B=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(F=F.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&N&&(B=Ti(B,N)||B);const H=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Y=F===L||!i&&F.startsWith(L)&&F.charAt(H)==="/",U=B!=null&&(B===L||!i&&B.startsWith(L)&&B.charAt(L.length)==="/"),I={isActive:Y,isPending:U,isTransitioning:M},T=Y?e:void 0,E;typeof r=="function"?E=r(I):E=[r,Y?"active":null,U?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return z.createElement(Br,{...f,"aria-current":T,className:E,ref:g,style:R,to:c,viewTransition:u},typeof h=="function"?h(I):h)});ZC.displayName="NavLink";var e4=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=Cf,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:x}=z.useContext(us),N=i4(),M=a4(u,{relative:f}),L=c.toLowerCase()==="get"?"get":"post",F=typeof u=="string"&&bS.test(u),B=H=>{if(h&&h(H),H.defaultPrevented)return;H.preventDefault();let Y=H.nativeEvent.submitter,U=Y?.getAttribute("formmethod")||c,I=()=>N(Y||H.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:i,state:o,relative:f,preventScrollReset:g,viewTransition:y});x&&t!==!1?z.startTransition(()=>I()):I()};return z.createElement("form",{ref:w,method:L,action:M,onSubmit:r?h:B,...v,"data-discover":!F&&n==="render"?"true":void 0})});e4.displayName="Form";function t4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wS(n){let e=z.useContext(Ec);return Ft(e,t4(n)),e}function n4(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let h=Rr(),f=Ar(),g=kd(n,{relative:o});return z.useCallback(y=>{if(MC(y,e)){y.preventDefault();let v=t!==void 0?t:rd(f)===rd(g),w=()=>h(n,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:c});u?z.startTransition(()=>w()):w()}},[f,h,g,t,r,e,n,i,o,c,u])}var r4=0,s4=()=>`__${String(++r4)}__`;function i4(){let{router:n}=wS("useSubmit"),{basename:e}=z.useContext(us),t=EC(),r=n.fetch,i=n.navigate;return z.useCallback(async(o,c={})=>{let{action:u,method:h,encType:f,formData:g,body:y}=LC(o,e);if(c.navigate===!1){let v=c.fetcherKey||s4();await r(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await i(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function a4(n,{relative:e}={}){let{basename:t}=z.useContext(us),r=z.useContext(ds);Ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...kd(n||".",{relative:e})},c=Ar();if(n==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:xi([t,o.pathname])),rd(o)}function o4(n,{relative:e}={}){let t=z.useContext(hS);Ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wS("useViewTransitionState"),i=kd(n,{relative:e});if(!t.isTransitioning)return!1;let o=Ti(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ti(t.nextLocation.pathname,r)||t.nextLocation.pathname;return em(i.pathname,c)!=null||em(i.pathname,o)!=null}const ze=n=>typeof n=="string",Cu=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},nx=n=>n==null?"":""+n,l4=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},c4=/###/g,rx=n=>n&&n.indexOf("###")>-1?n.replace(c4,"."):n,sx=n=>!n||ze(n),Hu=(n,e,t)=>{const r=ze(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(sx(n))return{};const o=rx(r[i]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++i}return sx(n)?{}:{obj:n,k:rx(r[i])}},ix=(n,e,t)=>{const{obj:r,k:i}=Hu(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Hu(n,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Hu(n,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},u4=(n,e,t,r)=>{const{obj:i,k:o}=Hu(n,e,Object);i[o]=i[o]||[],i[o].push(t)},tm=(n,e)=>{const{obj:t,k:r}=Hu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},d4=(n,e,t)=>{const r=tm(n,t);return r!==void 0?r:tm(e,t)},xS=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?ze(n[r])||n[r]instanceof String||ze(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):xS(n[r],e[r],t):n[r]=e[r]);return n},Fl=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var h4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const f4=n=>ze(n)?n.replace(/[&<>"'\/]/g,e=>h4[e]):n;class m4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const g4=[" ",",","?","!",";"],p4=new m4(20),y4=(n,e,t)=>{e=e||"",t=t||"";const r=g4.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(r.length===0)return!0;const i=p4.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!i.test(n);if(!o){const c=n.indexOf(t);c>0&&!i.test(n.substring(0,c))&&(o=!0)}return o},e0=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let c,u="";for(let h=o;h<r.length;++h)if(h!==o&&(u+=t),u+=r[h],c=i[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&h<r.length-1)continue;o+=h-o+1;break}i=c}return i},sd=n=>n?.replace("_","-"),_4={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};let v4=class t0{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||_4,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(ze(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new t0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new t0(this.logger,e)}};var Ms=new v4;class Bm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let c=0;c<o;c++)i.apply(i,[e,...t])})}}class ax extends Bm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,c=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],r&&(Array.isArray(r)?u.push(...r):ze(r)&&o?u.push(...r.split(o)):u.push(r)));const h=tm(this.data,u);return!h&&!t&&!r&&e.indexOf(".")>-1&&(e=u[0],t=u[1],r=u.slice(2).join(".")),h||!c||!ze(r)?h:e0(this.data?.[e]?.[t],r,o)}addResource(e,t,r,i,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];r&&(u=u.concat(c?r.split(c):r)),e.indexOf(".")>-1&&(u=e.split("."),i=t,t=u[1]),this.addNamespaces(t),ix(this.data,u,i),o.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const o in r)(ze(r[o])||Array.isArray(r[o]))&&this.addResource(e,t,o,r[o],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),i=r,r=t,t=u[1]),this.addNamespaces(t);let h=tm(this.data,u)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?xS(h,r,o):h={...h,...r},ix(this.data,u,h),c.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var ES={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(o=>{e=this.processors[o]?.process(e,t,r,i)??e}),e}};const TS=Symbol("i18next/PATH_KEY");function b4(){const n=[],e=Object.create(null);let t;return e.get=(r,i)=>(t?.revoke?.(),i===TS?n:(n.push(i),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function n0(n,e){const{[TS]:t}=n(b4());return t.join(e?.keySeparator??".")}const ox={},Cy=n=>!ze(n)&&typeof n!="boolean"&&typeof n!="number";class nm extends Bm{constructor(e,t={}){super(),l4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ms.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const o=Cy(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!y4(e,r,i);if(c&&!u){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:ze(o)?[o]:o};const f=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(i)}return{key:e,namespaces:ze(o)?[o]:o}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=n0(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:u,namespaces:h}=this.extractFromKey(e[e.length-1],i),f=h[h.length-1];let g=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:u;const w=this.resolve(e,i);let x=w?.res;const N=w?.usedKey||u,M=w?.exactUsedKey||u,L=["[object Number]","[object Function]","[object RegExp]"],F=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,H=i.count!==void 0&&!ze(i.count),Y=nm.hasDefaultValue(i),U=H?this.pluralResolver.getSuffix(y,i.count,i):"",I=i.ordinal&&H?this.pluralResolver.getSuffix(y,i.count,{ordinal:!1}):"",T=H&&!i.ordinal&&i.count===0,E=T&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${U}`]||i[`defaultValue${I}`]||i.defaultValue;let R=x;B&&!x&&Y&&(R=E);const C=Cy(R),j=Object.prototype.toString.apply(R);if(B&&R&&C&&L.indexOf(j)<0&&!(ze(F)&&Array.isArray(R))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,R,{...i,ns:h}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=D,w.usedParams=this.getUsedParamsDetails(i),w):D}if(c){const D=Array.isArray(R),G=D?[]:{},ee=D?M:N;for(const P in R)if(Object.prototype.hasOwnProperty.call(R,P)){const O=`${ee}${c}${P}`;Y&&!x?G[P]=this.translate(O,{...i,defaultValue:Cy(E)?E[P]:void 0,joinArrays:!1,ns:h}):G[P]=this.translate(O,{...i,joinArrays:!1,ns:h}),G[P]===O&&(G[P]=R[P])}x=G}}else if(B&&ze(F)&&Array.isArray(x))x=x.join(F),x&&(x=this.extendTranslation(x,e,i,r));else{let D=!1,G=!1;!this.isValidLookup(x)&&Y&&(D=!0,x=E),this.isValidLookup(x)||(G=!0,x=u);const P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:x,O=Y&&E!==x&&this.options.updateMissing;if(G||D||O){if(this.logger.log(O?"updateKey":"missingKey",y,f,u,O?E:x),c){const $=this.resolve(u,{...i,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let $=0;$<W.length;$++)X.push(W[$]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(i.lng||this.language):X.push(i.lng||this.language);const Z=($,K,ne)=>{const te=Y&&ne!==x?ne:P;this.options.missingKeyHandler?this.options.missingKeyHandler($,f,K,te,O,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing($,f,K,te,O,i),this.emit("missingKey",$,f,K,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?X.forEach($=>{const K=this.pluralResolver.getSuffixes($,i);T&&i[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(ne=>{Z([$],u+ne,i[`defaultValue${ne}`]||E)})}):Z(X,u,E))}x=this.extendTranslation(x,e,i,w,r),G&&x===u&&this.options.appendNamespaceToMissingKey&&(x=`${f}${g}${u}`),(G||D)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,D?x:void 0,i))}return o?(w.res=x,w.usedParams=this.getUsedParamsDetails(i),w):x}extendTranslation(e,t,r,i,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=ze(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=r.replace&&!ze(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||i.usedLng,r),h){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,u=ze(c)?[c]:c;return e!=null&&u?.length&&r.applyPostProcessor!==!1&&(e=ES.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,o,c,u;return ze(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(h,t),g=f.key;i=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!ze(t.count),w=v&&!t.ordinal&&t.count===0,x=t.context!==void 0&&(ze(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(M=>{this.isValidLookup(r)||(u=M,!ox[`${N[0]}-${M}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(ox[`${N[0]}-${M}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(L=>{if(this.isValidLookup(r))return;c=L;const F=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(F,g,L,M,t);else{let H;v&&(H=this.pluralResolver.getSuffix(L,t.count,t));const Y=`${this.options.pluralSeparator}zero`,U=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&H.indexOf(U)===0&&F.push(g+H.replace(U,this.options.pluralSeparator)),F.push(g+H),w&&F.push(g+Y)),x){const I=`${g}${this.options.contextSeparator||"_"}${t.context}`;F.push(I),v&&(t.ordinal&&H.indexOf(U)===0&&F.push(I+H.replace(U,this.options.pluralSeparator)),F.push(I+H),w&&F.push(I+Y))}}let B;for(;B=F.pop();)this.isValidLookup(r)||(o=B,r=this.getResource(L,M,B,t))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ze(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of t)delete i[o]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class lx{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ms.create("languageUtils")}getScriptPartFromCode(e){if(e=sd(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=sd(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ze(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ze(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],o=c=>{c&&(this.isSupportedCode(c)?i.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return ze(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ze(e)&&o(this.formatLanguageCode(e)),r.forEach(c=>{i.indexOf(c)<0&&o(this.formatLanguageCode(c))}),i}}const cx={zero:0,one:1,two:2,few:3,many:4,other:5},ux={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class w4{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ms.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=sd(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ux;if(!e.match(/-|_/))return ux;const h=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(h,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>cx[i]-cx[o]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const dx=(n,e,t,r=".",i=!0)=>{let o=d4(n,e,t);return!o&&i&&ze(t)&&(o=e0(n,t,r),o===void 0&&(o=e0(e,t,r))),o},Dy=n=>n.replace(/\$/g,"$$$$");class hx{constructor(e={}){this.logger=Ms.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:h,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:N,nestingOptionsSeparator:M,maxReplaces:L,alwaysFormat:F}=e.interpolation;this.escape=t!==void 0?t:f4,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Fl(o):c||"{{",this.suffix=u?Fl(u):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Fl(v):w||Fl("$t("),this.nestingSuffix=x?Fl(x):N||Fl(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=L||1e3,this.alwaysFormat=F!==void 0?F:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let o,c,u;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const L=dx(t,h,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...t,interpolationkey:w}):L}const x=w.split(this.formatSeparator),N=x.shift().trim(),M=x.join(this.formatSeparator).trim();return this.format(dx(t,h,N,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const g=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>Dy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?Dy(this.escape(w)):Dy(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const x=o[1].trim();if(c=f(x),c===void 0)if(typeof g=="function"){const M=g(e,o,i);c=ze(M)?M:""}else if(i&&Object.prototype.hasOwnProperty.call(i,x))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),c="";else!ze(c)&&!this.useRawValueToEscape&&(c=nx(c));const N=w.safeValue(c);if(e=e.replace(o[0],N),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,o,c;const u=(h,f)=>{const g=this.nestingOptionsSeparator;if(h.indexOf(g)<0)return h;const y=h.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;h=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),x=v.match(/"/g);((w?.length??0)%2===0&&!x||x.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,N),`${h}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,h};for(;i=this.nestingRegexp.exec(e);){let h=[];c={...r},c=c.replace&&!ze(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(f!==-1&&(h=i[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),i[1]=i[1].slice(0,f)),o=t(u.call(this,i[1].trim(),c),c),o&&i[0]===e&&!ze(o))return o;ze(o)||(o=nx(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),h.length&&(o=h.reduce((g,y)=>this.format(g,y,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const x4=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(c=>{if(c){const[u,...h]=c.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},fx=n=>{const e={};return(t,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const c=r+JSON.stringify(o);let u=e[c];return u||(u=n(sd(r),i),e[c]=u),u(t)}},E4=n=>(e,t,r)=>n(sd(t),r)(e);class T4{constructor(e={}){this.logger=Ms.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?fx:E4;this.formats={number:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o});return u=>c.format(u)}),currency:r((i,o)=>{const c=new Intl.NumberFormat(i,{...o,style:"currency"});return u=>c.format(u)}),datetime:r((i,o)=>{const c=new Intl.DateTimeFormat(i,{...o});return u=>c.format(u)}),relativetime:r((i,o)=>{const c=new Intl.RelativeTimeFormat(i,{...o});return u=>c.format(u,o.range||"day")}),list:r((i,o)=>{const c=new Intl.ListFormat(i,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=fx(t)}format(e,t,r,i={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,h)=>{const{formatName:f,formatOptions:g}=x4(h);if(this.formats[f]){let y=u;try{const v=i?.formatParams?.[i.interpolationkey]||{},w=v.locale||v.lng||i.locale||i.lng||r;y=this.formats[f](u,w,{...g,...i,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const S4=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class A4 extends Bm{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Ms.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const o={},c={},u={},h={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!r.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),h[y]===void 0&&(h[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}loaded(e,t,r){const i=e.split("|"),o=i[0],c=i[1];t&&this.emit("failedLoading",o,c,t),!t&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const u={};this.queue.forEach(h=>{u4(h.loaded,[o],c),S4(h,e),t&&h.errors.push(t),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{u[f]||(u[f]={});const g=h.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(h=>!h.done)}read(e,t,r,i=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,o*2,c)},o);return}c(f,g)},h=this.backend[r].bind(this.backend);if(h.length===2){try{const f=h(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return h(e,t,u)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ze(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ze(t)&&(t=[t]);const o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,u),this.loaded(e,c,u)})}saveMissing(e,t,r,i,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const h={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,r,i,h):g=f(e,t,r,i),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,r,i,u,h)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const mx=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),ze(n[1])&&(e.defaultValue=n[1]),ze(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),gx=n=>(ze(n.ns)&&(n.ns=[n.ns]),ze(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),ze(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),vf=()=>{},R4=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class $u extends Bm{constructor(e={},t){if(super(),this.options=gx(e),this.services={},this.logger=Ms,this.modules={external:[]},R4(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(ze(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=mx();this.options={...r,...this.options,...gx(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ms.init(i(this.modules.logger),this.options):Ms.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=T4;const g=new lx(this.options);this.store=new ax(this.options.resources,this.options);const y=this.services;y.logger=Ms,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new w4(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(y.formatter=i(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new hx(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new A4(i(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.languageDetector&&(y.languageDetector=i(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=i(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new nm(this.services,this.options),this.translator.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=vf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Cu(),h=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),u}loadResources(e,t=vf){let r=t;const i=ze(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?c(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>c(h)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,t,r){const i=Cu();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=vf),this.services.backendConnector.reload(e,t,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ES.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Cu();this.emit("languageChanging",e);const i=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,h)=>{h?this.isLanguageChangingTo===e&&(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,r.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const h=ze(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(ze(u)?[u]:u);f&&(this.language||i(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,t,r){const i=(o,c,...u)=>{let h;typeof c!="object"?h=this.options.overloadTranslationOptionHandler([o,c].concat(u)):h={...c},h.lng=h.lng||i.lng,h.lngs=h.lngs||i.lngs,h.ns=h.ns||i.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||r||i.keyPrefix);const f=this.options.keySeparator||".";let g;return h.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=n0(y,{...this.options,...c})),`${h.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=n0(o,{...this.options,...c})),g=h.keyPrefix?`${h.keyPrefix}${f}${o}`:o),this.t(g,h)};return ze(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(u,h)=>{const f=this.services.backendConnector.state[`${u}|${h}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,e)&&(!i||c(o,e)))}loadNamespaces(e,t){const r=Cu();return this.options.ns?(ze(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Cu();ze(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(c=>i.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=i.concat(o),this.loadResources(c=>{r.resolve(),t&&t(c)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new lx(mx());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const r=new $u(e,t);return r.createInstance=$u.createInstance,r}cloneInstance(e={},t=vf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new $u(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const u=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},h[f]=Object.keys(h[f]).reduce((g,y)=>(g[y]={...h[f][y]},g),h[f]),h),{});o.store=new ax(u,i),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new hx(i)),o.translator=new nm(o.services,i),o.translator.on("*",(u,...h)=>{o.emit(u,...h)}),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const er=$u.createInstance();er.createInstance;er.dir;er.init;er.loadResources;er.reloadResources;er.use;er.changeLanguage;er.getFixedT;er.t;er.exists;er.setDefaultNamespace;er.hasLoadedNamespace;er.loadNamespaces;er.loadLanguages;const k4=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);No(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},px={},SS=(n,e,t,r)=>{No(t)&&px[t]||(No(t)&&(px[t]=new Date),k4(n,e,t,r))},AS=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},r0=(n,e,t)=>{n.loadNamespaces(e,AS(n,t))},yx=(n,e,t,r)=>{if(No(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return r0(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,AS(n,r))},I4=(n,e,t={})=>!e.languages||!e.languages.length?(SS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),No=n=>typeof n=="string",N4=n=>typeof n=="object"&&n!==null,C4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,D4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},O4=n=>D4[n],M4=n=>n.replace(C4,O4);let s0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:M4,transDefaultProps:void 0};const P4=(n={})=>{s0={...s0,...n}},j4=()=>s0;let RS;const L4=n=>{RS=n},V4=()=>RS,U4={type:"3rdParty",init(n){P4(n.options.react),L4(n)}},z4=z.createContext();class F4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Oy={exports:{}},My={};var _x;function B4(){if(_x)return My;_x=1;var n=Um();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function u(y,v){var w=v(),x=r({inst:{value:w,getSnapshot:v}}),N=x[0].inst,M=x[1];return o(function(){N.value=w,N.getSnapshot=v,h(N)&&M({inst:N})},[y,w,v]),i(function(){return h(N)&&M({inst:N}),y(function(){h(N)&&M({inst:N})})},[y]),c(w),w}function h(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return My.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,My}var vx;function q4(){return vx||(vx=1,Oy.exports=B4()),Oy.exports}var H4=q4();const $4=(n,e)=>No(e)?e:N4(e)&&No(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,G4={t:$4,ready:!1},K4=()=>()=>{},Bt=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=z.useContext(z4)||{},o=t||r||V4();o&&!o.reportNamespaces&&(o.reportNamespaces=new F4),o||SS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=z.useMemo(()=>({...j4(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:h}=c,f=i||o?.options?.defaultNS,g=No(f)?[f]:f||["translation"],y=z.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=z.useRef(0),w=z.useCallback(E=>{if(!o)return K4;const{bindI18n:R,bindI18nStore:C}=c,j=()=>{v.current+=1,E()};return R&&o.on(R,j),C&&o.store.on(C,j),()=>{R&&R.split(" ").forEach(D=>o.off(D,j)),C&&C.split(" ").forEach(D=>o.store.off(D,j))}},[o,c]),x=z.useRef(),N=z.useCallback(()=>{if(!o)return G4;const E=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(ee=>I4(ee,o,c)),R=e.lng||o.language,C=v.current,j=x.current;if(j&&j.ready===E&&j.lng===R&&j.keyPrefix===h&&j.revision===C)return j;const G={t:o.getFixedT(R,c.nsMode==="fallback"?y:y[0],h),ready:E,lng:R,keyPrefix:h,revision:C};return x.current=G,G},[o,y,h,c,e.lng]),[M,L]=z.useState(0),{t:F,ready:B}=H4.useSyncExternalStore(w,N,N);z.useEffect(()=>{if(o&&!B&&!u){const E=()=>L(R=>R+1);e.lng?yx(o,e.lng,y,E):r0(o,y,E)}},[o,e.lng,y,B,u,M]);const H=o||{},Y=z.useRef(null),U=z.useRef(),I=E=>{const R=Object.getOwnPropertyDescriptors(E);R.__original&&delete R.__original;const C=Object.create(Object.getPrototypeOf(E),R);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:E,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},T=z.useMemo(()=>{const E=H,R=E?.language;let C=E;E&&(Y.current&&Y.current.__original===E?U.current!==R?(C=I(E),Y.current=C,U.current=R):C=Y.current:(C=I(E),Y.current=C,U.current=R));const j=[F,C,B];return j.t=F,j.i18n=C,j.ready=B,j},[F,H,B,H.resolvedLanguage,H.language,H.languages]);if(o&&u&&!B)throw new Promise(E=>{const R=()=>E();e.lng?yx(o,e.lng,y,R):r0(o,y,R)});return T},Y4=()=>{};var bx={};const kS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Q4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},IS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,u=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,c||(v=64)),r.push(t[g],t[y],t[v],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Q4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new W4;const v=o<<2|u>>4;if(r.push(v),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const x=f<<6&192|y;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class W4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X4=function(n){const e=kS(n);return IS.encodeByteArray(e,!0)},rm=function(n){return X4(n).replace(/\./g,"")},NS=function(n){try{return IS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const J4=()=>CS().__FIREBASE_DEFAULTS__,Z4=()=>{if(typeof process>"u"||typeof bx>"u")return;const n=bx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NS(n[1]);return e&&JSON.parse(e)},qm=()=>{try{return Y4()||J4()||Z4()||eD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DS=n=>qm()?.emulatorHosts?.[n],OS=n=>{const e=DS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},MS=()=>qm()?.config,PS=n=>qm()?.[`_${n}`];class tD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Go(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(n){return(await fetch(n,{credentials:"include"})).ok}function jS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rm(JSON.stringify(t)),rm(JSON.stringify(c)),""].join(".")}const Gu={};function nD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function rD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wx=!1;function Z0(n,e){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||Gu[n]===e||Gu[n]||wx)return;Gu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=nD().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{wx=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=rD(r),w=t("text"),x=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),M=document.getElementById(N)||document.createElement("a"),L=t("preprendIcon"),F=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const B=v.element;u(B),g(M,N);const H=f();h(F,L),B.append(F,x,M,H),document.body.appendChild(B)}o?(x.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function LS(){const n=qm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lD(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VS(){return!LS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function US(){return!LS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function zS(){try{return typeof indexedDB=="object"}catch{return!1}}function cD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const uD="FirebaseError";class Qs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uD,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Id.prototype.create)}}class Id{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?dD(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Qs(i,u,r)}}function dD(n,e){return n.replace(hD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hD=/\{\$([^}]+)}/g;function fD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Si(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(xx(o)&&xx(c)){if(!Si(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xx(n){return n!==null&&typeof n=="object"}function Nd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mD(n,e){const t=new gD(n,e);return t.subscribe.bind(t)}class gD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");pD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Py),i.error===void 0&&(i.error=Py),i.complete===void 0&&(i.complete=Py);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Py(){}function en(n){return n&&n._delegate?n._delegate:n}class Ia{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class yD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vD(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_D(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _D(n){return n===go?void 0:n}function vD(n){return n.instantiationMode==="EAGER"}class bD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const wD={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},xD=st.INFO,ED={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},TD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ED[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=TD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const SD=(n,e)=>e.some(t=>n instanceof t);let Ex,Tx;function AD(){return Ex||(Ex=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return Tx||(Tx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FS=new WeakMap,i0=new WeakMap,BS=new WeakMap,jy=new WeakMap,t_=new WeakMap;function kD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Ea(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&FS.set(t,n)}).catch(()=>{}),t_.set(e,n),e}function ID(n){if(i0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});i0.set(n,e)}let a0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return i0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ND(n){a0=n(a0)}function CD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ly(this),e,...t);return BS.set(r,e.sort?e.sort():[e]),Ea(r)}:RD().includes(n)?function(...e){return n.apply(Ly(this),e),Ea(FS.get(this))}:function(...e){return Ea(n.apply(Ly(this),e))}}function DD(n){return typeof n=="function"?CD(n):(n instanceof IDBTransaction&&ID(n),SD(n,AD())?new Proxy(n,a0):n)}function Ea(n){if(n instanceof IDBRequest)return kD(n);if(jy.has(n))return jy.get(n);const e=DD(n);return e!==n&&(jy.set(n,e),t_.set(e,n)),e}const Ly=n=>t_.get(n);function OD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),u=Ea(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Ea(c.result),h.oldVersion,h.newVersion,Ea(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const MD=["get","getKey","getAll","getAllKeys","count"],PD=["put","add","delete","clear"],Vy=new Map;function Sx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vy.get(e))return Vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=PD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MD.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return Vy.set(e,o),o}ND(n=>({...n,get:(e,t,r)=>Sx(e,t)||n.get(e,t,r),has:(e,t)=>!!Sx(e,t)||n.has(e,t)}));class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function LD(n){return n.getComponent()?.type==="VERSION"}const o0="@firebase/app",Ax="0.14.6";const Ai=new e_("@firebase/app"),VD="@firebase/app-compat",UD="@firebase/analytics-compat",zD="@firebase/analytics",FD="@firebase/app-check-compat",BD="@firebase/app-check",qD="@firebase/auth",HD="@firebase/auth-compat",$D="@firebase/database",GD="@firebase/data-connect",KD="@firebase/database-compat",YD="@firebase/functions",QD="@firebase/functions-compat",WD="@firebase/installations",XD="@firebase/installations-compat",JD="@firebase/messaging",ZD="@firebase/messaging-compat",e5="@firebase/performance",t5="@firebase/performance-compat",n5="@firebase/remote-config",r5="@firebase/remote-config-compat",s5="@firebase/storage",i5="@firebase/storage-compat",a5="@firebase/firestore",o5="@firebase/ai",l5="@firebase/firestore-compat",c5="firebase",u5="12.6.0";const l0="[DEFAULT]",d5={[o0]:"fire-core",[VD]:"fire-core-compat",[zD]:"fire-analytics",[UD]:"fire-analytics-compat",[BD]:"fire-app-check",[FD]:"fire-app-check-compat",[qD]:"fire-auth",[HD]:"fire-auth-compat",[$D]:"fire-rtdb",[GD]:"fire-data-connect",[KD]:"fire-rtdb-compat",[YD]:"fire-fn",[QD]:"fire-fn-compat",[WD]:"fire-iid",[XD]:"fire-iid-compat",[JD]:"fire-fcm",[ZD]:"fire-fcm-compat",[e5]:"fire-perf",[t5]:"fire-perf-compat",[n5]:"fire-rc",[r5]:"fire-rc-compat",[s5]:"fire-gcs",[i5]:"fire-gcs-compat",[a5]:"fire-fst",[l5]:"fire-fst-compat",[o5]:"fire-vertex","fire-js":"fire-js",[c5]:"fire-js-all"};const sm=new Map,h5=new Map,c0=new Map;function Rx(n,e){try{n.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Co(n){const e=n.name;if(c0.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;c0.set(e,n);for(const t of sm.values())Rx(t,n);for(const t of h5.values())Rx(t,n);return!0}function Hm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xr(n){return n==null?!1:n.settings!==void 0}const f5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ta=new Id("app","Firebase",f5);class m5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ta.create("app-deleted",{appName:this._name})}}const Ko=u5;function qS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:l0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ta.create("bad-app-name",{appName:String(i)});if(t||(t=MS()),!t)throw Ta.create("no-options");const o=sm.get(i);if(o){if(Si(t,o.options)&&Si(r,o.config))return o;throw Ta.create("duplicate-app",{appName:i})}const c=new bD(i);for(const h of c0.values())c.addComponent(h);const u=new m5(t,r,c);return sm.set(i,u),u}function n_(n=l0){const e=sm.get(n);if(!e&&n===l0&&MS())return qS();if(!e)throw Ta.create("no-app",{appName:n});return e}function Ls(n,e,t){let r=d5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(c.join(" "));return}Co(new Ia(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const g5="firebase-heartbeat-database",p5=1,id="firebase-heartbeat-store";let Uy=null;function HS(){return Uy||(Uy=OD(g5,p5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(id)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ta.create("idb-open",{originalErrorMessage:n.message})})),Uy}async function y5(n){try{const t=(await HS()).transaction(id),r=await t.objectStore(id).get($S(n));return await t.done,r}catch(e){if(e instanceof Qs)Ai.warn(e.message);else{const t=Ta.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function kx(n,e){try{const r=(await HS()).transaction(id,"readwrite");await r.objectStore(id).put(e,$S(n)),await r.done}catch(t){if(t instanceof Qs)Ai.warn(t.message);else{const r=Ta.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function $S(n){return`${n.name}!${n.options.appId}`}const _5=1024,v5=30;class b5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new x5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ix();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>v5){const i=E5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ix(),{heartbeatsToSend:t,unsentEntries:r}=w5(this._heartbeatsCache.heartbeats),i=rm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ai.warn(e),""}}}function Ix(){return new Date().toISOString().substring(0,10)}function w5(n,e=_5){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Nx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class x5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zS()?cD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await y5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nx(n){return rm(JSON.stringify({version:2,heartbeats:n})).length}function E5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function T5(n){Co(new Ia("platform-logger",e=>new jD(e),"PRIVATE")),Co(new Ia("heartbeat",e=>new b5(e),"PRIVATE")),Ls(o0,Ax,n),Ls(o0,Ax,"esm2020"),Ls("fire-js","")}T5("");var S5="firebase",A5="12.6.0";Ls(S5,A5,"app");function GS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R5=GS,KS=new Id("auth","Firebase",GS());const im=new e_("@firebase/auth");function k5(n,...e){im.logLevel<=st.WARN&&im.warn(`Auth (${Ko}): ${n}`,...e)}function Of(n,...e){im.logLevel<=st.ERROR&&im.error(`Auth (${Ko}): ${n}`,...e)}function cs(n,...e){throw r_(n,...e)}function Vs(n,...e){return r_(n,...e)}function YS(n,e,t){const r={...R5(),[e]:t};return new Id("auth","Firebase",r).create(e,{appName:n.name})}function Ei(n){return YS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return KS.create(n,...e)}function Pe(n,e,...t){if(!n)throw r_(e,...t)}function vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Of(e),new Error(e)}function Ri(n,e){n||vi(e)}function u0(){return typeof self<"u"&&self.location?.href||""}function I5(){return Cx()==="http:"||Cx()==="https:"}function Cx(){return typeof self<"u"&&self.location?.protocol||null}function N5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I5()||aD()||"connection"in navigator)?navigator.onLine:!0}function C5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=sD()||oD()}get(){return N5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function s_(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class QS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const D5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const O5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M5=new Cd(3e4,6e4);function Ci(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ws(n,e,t,r,i={}){return WS(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Nd({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return iD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Go(n.emulatorConfig.host)&&(f.credentials="include"),QS.fetch()(await XS(n,n.config.apiHost,t,u),f)})}async function WS(n,e,t){n._canInitEmulator=!1;const r={...D5,...e};try{const i=new j5(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw bf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw bf(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw bf(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw YS(n,g,f);cs(n,g)}}catch(i){if(i instanceof Qs)throw i;cs(n,"network-request-failed",{message:String(i)})}}async function Dd(n,e,t,r,i={}){const o=await Ws(n,e,t,r,i);return"mfaPendingCredential"in o&&cs(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function XS(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?s_(n.config,i):`${n.config.apiScheme}://${i}`;return O5.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function P5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),M5.get())})}}function bf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Vs(n,e,r);return i.customData._tokenResponse=t,i}function Dx(n){return n!==void 0&&n.enterprise!==void 0}class L5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V5(n,e){return Ws(n,"GET","/v2/recaptchaConfig",Ci(n,e))}async function U5(n,e){return Ws(n,"POST","/v1/accounts:delete",e)}async function am(n,e){return Ws(n,"POST","/v1/accounts:lookup",e)}function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z5(n,e=!1){const t=en(n),r=await t.getIdToken(e),i=i_(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:Ku(zy(i.auth_time)),issuedAtTime:Ku(zy(i.iat)),expirationTime:Ku(zy(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function zy(n){return Number(n)*1e3}function i_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Of("JWT malformed, contained fewer than 3 sections"),null;try{const i=NS(t);return i?JSON.parse(i):(Of("Failed to decode base64 JWT payload"),null)}catch(i){return Of("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ox(n){const e=i_(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qs&&F5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function F5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class B5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class d0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function om(n){const e=n.auth,t=await n.getIdToken(),r=await lc(n,am(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?JS(i.providerUserInfo):[],c=H5(n.providerData,o),u=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,f=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new d0(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function q5(n){const e=en(n);await om(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function $5(n,e){const t=await WS(n,{},async()=>{const r=Nd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await XS(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Go(n.emulatorConfig.host)&&(h.credentials="include"),QS.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function G5(n,e){return Ws(n,"POST","/v2/accounts:revokeToken",Ci(n,e))}class nc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ox(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Ox(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await $5(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new nc;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nc,this.toJSON())}_performRefresh(){return vi("not implemented")}}function ha(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class os{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new B5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new d0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await lc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z5(this,e)}reload(){return q5(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await om(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await lc(this,U5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:x,stsTokenManager:N}=t;Pe(y&&N,e,"internal-error");const M=nc.fromJSON(this.name,N);Pe(typeof y=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),Pe(typeof v=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),ha(o,e.name),ha(c,e.name),ha(u,e.name),ha(h,e.name),ha(f,e.name),ha(g,e.name);const L=new os({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:M,createdAt:f,lastLoginAt:g});return x&&Array.isArray(x)&&(L.providerData=x.map(F=>({...F}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new nc;i.updateFromServerResponse(t);const o=new os({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await om(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?JS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,u=new nc;u.updateFromIdToken(r);const h=new os({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new d0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const Mx=new Map;function bi(n){Ri(n instanceof Function,"Expected a class definition");let e=Mx.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mx.set(n,e),e)}class ZS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ZS.type="NONE";const Px=ZS;function Mf(n,e,t){return`firebase:${n}:${e}:${t}`}class rc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Mf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await am(this.auth,{idToken:e}).catch(()=>{});return t?os._fromGetAccountInfoResponse(this.auth,t,e):null}return os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new rc(bi(Px),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||bi(Px);const c=Mf(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await am(e,{idToken:g}).catch(()=>{});if(!v)break;y=await os._fromGetAccountInfoResponse(e,v,g)}else y=os._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new rc(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new rc(o,e,r))}}function jx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i2(e))return"Blackberry";if(a2(e))return"Webos";if(t2(e))return"Safari";if((e.includes("chrome/")||n2(e))&&!e.includes("edge/"))return"Chrome";if(s2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function e2(n=pn()){return/firefox\//i.test(n)}function t2(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n2(n=pn()){return/crios\//i.test(n)}function r2(n=pn()){return/iemobile/i.test(n)}function s2(n=pn()){return/android/i.test(n)}function i2(n=pn()){return/blackberry/i.test(n)}function a2(n=pn()){return/webos/i.test(n)}function a_(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function K5(n=pn()){return a_(n)&&!!window.navigator?.standalone}function Y5(){return lD()&&document.documentMode===10}function o2(n=pn()){return a_(n)||s2(n)||a2(n)||i2(n)||/windows phone/i.test(n)||r2(n)}function l2(n,e=[]){let t;switch(n){case"Browser":t=jx(pn());break;case"Worker":t=`${jx(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ko}/${r}`}class Q5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function W5(n,e={}){return Ws(n,"GET","/v2/passwordPolicy",Ci(n,e))}const X5=6;class J5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??X5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Z5{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lx(this),this.idTokenSubscription=new Lx(this),this.beforeStateQueue=new Q5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await rc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await am(this,{idToken:e}),r=await os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await om(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(Ei(this));const t=e?en(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),t=new J5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Id("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await G5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await rc.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&k5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yo(n){return en(n)}class Lx{constructor(e){this.auth=e,this.observer=null,this.addObserver=mD(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eO(n){$m=n}function c2(n){return $m.loadJS(n)}function tO(){return $m.recaptchaEnterpriseScript}function nO(){return $m.gapiScript}function rO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sO{constructor(){this.enterprise=new iO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class iO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aO="recaptcha-enterprise",u2="NO_RECAPTCHA";class oO{constructor(e){this.type=aO,this.auth=Yo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{V5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new L5(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function i(o,c,u){const h=window.grecaptcha;Dx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(u2)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!t&&Dx(window.grecaptcha))i(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=tO();h.length!==0&&(h+=u),c2(h).then(()=>{i(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Vx(n,e,t,r=!1,i=!1){const o=new oO(n);let c;if(i)c=u2;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function h0(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Vx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Vx(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function lO(n,e){const t=Hm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Si(o,e??{}))return i;cs(i,"already-initialized")}return t.initialize({options:e})}function cO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function uO(n,e,t){const r=Yo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=d2(e),{host:c,port:u}=dO(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Si(f,r.config.emulator)&&Si(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Go(c)?(J0(`${o}//${c}${h}`),Z0("Auth",!0)):hO()}function d2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dO(n){const e=d2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Ux(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Ux(c)}}}function Ux(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class o_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function fO(n,e){return Ws(n,"POST","/v1/accounts:signUp",e)}async function mO(n,e){return Dd(n,"POST","/v1/accounts:signInWithPassword",Ci(n,e))}async function gO(n,e){return Ws(n,"POST","/v1/accounts:sendOobCode",Ci(n,e))}async function pO(n,e){return gO(n,e)}async function yO(n,e){return Dd(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}async function _O(n,e){return Dd(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}class ad extends o_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ad(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ad(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h0(e,t,"signInWithPassword",mO);case"emailLink":return yO(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h0(e,r,"signUpPassword",fO);case"emailLink":return _O(e,{idToken:t,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sc(n,e){return Dd(n,"POST","/v1/accounts:signInWithIdp",Ci(n,e))}const vO="http://localhost";class Do extends o_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Do(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return sc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,sc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sc(e,t)}buildRequest(){const e={requestUri:vO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nd(t)}return e}}function bO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wO(n){const e=Lu(Vu(n)).link,t=e?Lu(Vu(e)).deep_link_id:null,r=Lu(Vu(n)).deep_link_id;return(r?Lu(Vu(r)).link:null)||r||t||e||n}class l_{constructor(e){const t=Lu(Vu(e)),r=t.apiKey??null,i=t.oobCode??null,o=bO(t.mode??null);Pe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wO(e);try{return new l_(t)}catch{return null}}}class Tc{constructor(){this.providerId=Tc.PROVIDER_ID}static credential(e,t){return ad._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=l_.parseLink(t);return Pe(r,"argument-error"),ad._fromEmailAndCode(e,r.code,r.tenantId)}}Tc.PROVIDER_ID="password";Tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class h2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Od extends h2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends Od{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";class _i extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _i.credential(t,r)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";class va extends Od{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.GITHUB_SIGN_IN_METHOD="github.com";va.PROVIDER_ID="github.com";class ba extends Od{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ba.credential(t,r)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";async function xO(n,e){return Dd(n,"POST","/v1/accounts:signUp",Ci(n,e))}class Oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await os._fromIdTokenResponse(e,r,i),c=zx(r);return new Oo({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=zx(r);return new Oo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function zx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class lm extends Qs{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lm(e,t,r,i)}}function f2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lm._fromErrorAndOperation(n,o,e,r):o})}async function EO(n,e,t=!1){const r=await lc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oo._forOperation(n,"link",r)}async function TO(n,e,t=!1){const{auth:r}=n;if(xr(r.app))return Promise.reject(Ei(r));const i="reauthenticate";try{const o=await lc(n,f2(r,i,e,n),t);Pe(o.idToken,r,"internal-error");const c=i_(o.idToken);Pe(c,r,"internal-error");const{sub:u}=c;return Pe(n.uid===u,r,"user-mismatch"),Oo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&cs(r,"user-mismatch"),o}}async function m2(n,e,t=!1){if(xr(n.app))return Promise.reject(Ei(n));const r="signIn",i=await f2(n,r,e),o=await Oo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function SO(n,e){return m2(Yo(n),e)}function AO(n,e,t){Pe(t.url?.length>0,n,"invalid-continue-uri"),Pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function g2(n){const e=Yo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p2(n,e,t){if(xr(n.app))return Promise.reject(Ei(n));const r=Yo(n),c=await h0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&g2(n),h}),u=await Oo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function f0(n,e,t){return xr(n.app)?Promise.reject(Ei(n)):SO(en(n),Tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&g2(n),r})}async function y2(n,e){const t=en(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&AO(t.auth,i,e);const{email:o}=await pO(t.auth,i);o!==n.email&&await n.reload()}async function RO(n,e){return Ws(n,"POST","/v1/accounts:update",e)}async function cm(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=en(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await lc(r,RO(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function kO(n,e,t,r){return en(n).onIdTokenChanged(e,t,r)}function IO(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function NO(n,e,t,r){return en(n).onAuthStateChanged(e,t,r)}const um="__sak";class _2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(um,"1"),this.storage.removeItem(um),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CO=1e3,DO=10;class v2 extends _2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);Y5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},CO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v2.type="LOCAL";const OO=v2;class b2 extends _2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}b2.type="SESSION";const w2=b2;function MO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Gm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(t.origin,o)),h=await MO(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gm.receivers=[];function c_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class PO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=c_("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Us(){return window}function jO(n){Us().location.href=n}function x2(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function LO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VO(){return navigator?.serviceWorker?.controller||null}function UO(){return x2()?self:null}const E2="firebaseLocalStorageDb",zO=1,dm="firebaseLocalStorage",T2="fbase_key";class Md{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Km(n,e){return n.transaction([dm],e?"readwrite":"readonly").objectStore(dm)}function FO(){const n=indexedDB.deleteDatabase(E2);return new Md(n).toPromise()}function m0(){const n=indexedDB.open(E2,zO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(dm,{keyPath:T2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(dm)?e(r):(r.close(),await FO(),e(await m0()))})})}async function Fx(n,e,t){const r=Km(n,!0).put({[T2]:e,value:t});return new Md(r).toPromise()}async function BO(n,e){const t=Km(n,!1).get(e),r=await new Md(t).toPromise();return r===void 0?null:r.value}function Bx(n,e){const t=Km(n,!0).delete(e);return new Md(t).toPromise()}const qO=800,HO=3;class S2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gm._getInstance(UO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LO(),!this.activeServiceWorker)return;this.sender=new PO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m0();return await Fx(e,um,"1"),await Bx(e,um),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>BO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Km(i,!1).getAll();return new Md(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S2.type="LOCAL";const $O=S2;new Cd(3e4,6e4);function GO(n,e){return e?bi(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class u_ extends o_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KO(n){return m2(n.auth,new u_(n),n.bypassAuthState)}function YO(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),TO(t,new u_(n),n.bypassAuthState)}async function QO(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),EO(t,new u_(n),n.bypassAuthState)}class A2{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KO;case"linkViaPopup":case"linkViaRedirect":return QO;case"reauthViaPopup":case"reauthViaRedirect":return YO;default:cs(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WO=new Cd(2e3,1e4);class ec extends A2{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ec.currentPopupAction&&ec.currentPopupAction.cancel(),ec.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=c_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ec.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WO.get())};e()}}ec.currentPopupAction=null;const XO="pendingRedirect",Pf=new Map;class JO extends A2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Pf.get(this.auth._key());if(!e){try{const r=await ZO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Pf.set(this.auth._key(),e)}return this.bypassAuthState||Pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZO(n,e){const t=nM(e),r=tM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function eM(n,e){Pf.set(n._key(),e)}function tM(n){return bi(n._redirectPersistence)}function nM(n){return Mf(XO,n.config.apiKey,n.name)}async function rM(n,e,t=!1){if(xr(n.app))return Promise.reject(Ei(n));const r=Yo(n),i=GO(r,e),c=await new JO(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const sM=600*1e3;class iM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!R2(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Vs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sM&&this.cachedEventUids.clear(),this.cachedEventUids.has(qx(e))}saveEventToCache(e){this.cachedEventUids.add(qx(e)),this.lastProcessedEventTime=Date.now()}}function qx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function R2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R2(n);default:return!1}}async function oM(n,e={}){return Ws(n,"GET","/v1/projects",e)}const lM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cM=/^https?/;async function uM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oM(n);for(const t of e)try{if(dM(t))return}catch{}cs(n,"unauthorized-domain")}function dM(n){const e=u0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!cM.test(t))return!1;if(lM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hM=new Cd(3e4,6e4);function Hx(){const n=Us().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fM(n){return new Promise((e,t)=>{function r(){Hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hx(),t(Vs(n,"network-request-failed"))},timeout:hM.get()})}if(Us().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Us().gapi?.load)r();else{const i=rO("iframefcb");return Us()[i]=()=>{gapi.load?r():t(Vs(n,"network-request-failed"))},c2(`${nO()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw jf=null,e})}let jf=null;function mM(n){return jf=jf||fM(n),jf}const gM=new Cd(5e3,15e3),pM="__/auth/iframe",yM="emulator/auth/iframe",_M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bM(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?s_(e,yM):`https://${n.config.authDomain}/${pM}`,r={apiKey:e.apiKey,appName:n.name,v:Ko},i=vM.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Nd(r).slice(1)}`}async function wM(n){const e=await mM(n),t=Us().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:bM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_M,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Vs(n,"network-request-failed"),u=Us().setTimeout(()=>{o(c)},gM.get());function h(){Us().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(c)})}))}const xM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,SM="_blank",AM="http://localhost";class $x{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RM(n,e,t,r=EM,i=TM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...xM,width:r.toString(),height:i.toString(),top:o,left:c},f=pn().toLowerCase();t&&(u=n2(f)?SM:t),e2(f)&&(e=e||AM,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[w,x])=>`${v}${w}=${x},`,"");if(K5(f)&&u!=="_self")return kM(e||"",u),new $x(null);const y=window.open(e||"",u,g);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new $x(y)}function kM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const IM="__/auth/handler",NM="emulator/auth/handler",CM=encodeURIComponent("fac");async function Gx(n,e,t,r,i,o){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ko,eventId:i};if(e instanceof h2){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",fD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Od){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),f=h?`#${CM}=${encodeURIComponent(h)}`:"";return`${DM(n)}?${Nd(u).slice(1)}${f}`}function DM({config:n}){return n.emulator?s_(n,NM):`https://${n.authDomain}/${IM}`}const Fy="webStorageSupport";class OM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=w2,this._completeRedirectFn=rM,this._overrideRedirectResult=eM}async _openPopup(e,t,r,i){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Gx(e,t,r,u0(),i);return RM(e,o,c_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Gx(e,t,r,u0(),i);return jO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ri(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wM(e),r=new iM(e);return t.register("authEvent",i=>(Pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fy,{type:Fy},i=>{const o=i?.[0]?.[Fy];o!==void 0&&t(!!o),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return o2()||t2()||a_()}}const MM=OM;var Kx="@firebase/auth",Yx="1.11.1";class PM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LM(n){Co(new Ia("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l2(n)},f=new Z5(r,i,o,h);return cO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Co(new Ia("auth-internal",e=>{const t=Yo(e.getProvider("auth").getImmediate());return(r=>new PM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Kx,Yx,jM(n)),Ls(Kx,Yx,"esm2020")}const VM=300,UM=PS("authIdTokenMaxAge")||VM;let Qx=null;const zM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UM)return;const i=t?.token;Qx!==i&&(Qx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FM(n=n_()){const e=Hm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lO(n,{popupRedirectResolver:MM,persistence:[$O,OO,w2]}),r=PS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=zM(o.toString());IO(t,c,()=>c(t.currentUser)),kO(t,u=>c(u))}}const i=DS("auth");return i&&uO(t,`http://${i}`),t}function BM(){return document.getElementsByTagName("head")?.[0]??document}eO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Vs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",BM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LM("Browser");var Wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sa,k2;(function(){var n;function e(I,T){function E(){}E.prototype=T.prototype,I.F=T.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(R,C,j){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return T.prototype[C].apply(R,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,T,E){E||(E=0);const R=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)R[C]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(C=0;C<16;++C)R[C]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=I.g[0],E=I.g[1],C=I.g[2];let j=I.g[3],D;D=T+(j^E&(C^j))+R[0]+3614090360&4294967295,T=E+(D<<7&4294967295|D>>>25),D=j+(C^T&(E^C))+R[1]+3905402710&4294967295,j=T+(D<<12&4294967295|D>>>20),D=C+(E^j&(T^E))+R[2]+606105819&4294967295,C=j+(D<<17&4294967295|D>>>15),D=E+(T^C&(j^T))+R[3]+3250441966&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(j^E&(C^j))+R[4]+4118548399&4294967295,T=E+(D<<7&4294967295|D>>>25),D=j+(C^T&(E^C))+R[5]+1200080426&4294967295,j=T+(D<<12&4294967295|D>>>20),D=C+(E^j&(T^E))+R[6]+2821735955&4294967295,C=j+(D<<17&4294967295|D>>>15),D=E+(T^C&(j^T))+R[7]+4249261313&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(j^E&(C^j))+R[8]+1770035416&4294967295,T=E+(D<<7&4294967295|D>>>25),D=j+(C^T&(E^C))+R[9]+2336552879&4294967295,j=T+(D<<12&4294967295|D>>>20),D=C+(E^j&(T^E))+R[10]+4294925233&4294967295,C=j+(D<<17&4294967295|D>>>15),D=E+(T^C&(j^T))+R[11]+2304563134&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(j^E&(C^j))+R[12]+1804603682&4294967295,T=E+(D<<7&4294967295|D>>>25),D=j+(C^T&(E^C))+R[13]+4254626195&4294967295,j=T+(D<<12&4294967295|D>>>20),D=C+(E^j&(T^E))+R[14]+2792965006&4294967295,C=j+(D<<17&4294967295|D>>>15),D=E+(T^C&(j^T))+R[15]+1236535329&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(C^j&(E^C))+R[1]+4129170786&4294967295,T=E+(D<<5&4294967295|D>>>27),D=j+(E^C&(T^E))+R[6]+3225465664&4294967295,j=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(j^T))+R[11]+643717713&4294967295,C=j+(D<<14&4294967295|D>>>18),D=E+(j^T&(C^j))+R[0]+3921069994&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^j&(E^C))+R[5]+3593408605&4294967295,T=E+(D<<5&4294967295|D>>>27),D=j+(E^C&(T^E))+R[10]+38016083&4294967295,j=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(j^T))+R[15]+3634488961&4294967295,C=j+(D<<14&4294967295|D>>>18),D=E+(j^T&(C^j))+R[4]+3889429448&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^j&(E^C))+R[9]+568446438&4294967295,T=E+(D<<5&4294967295|D>>>27),D=j+(E^C&(T^E))+R[14]+3275163606&4294967295,j=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(j^T))+R[3]+4107603335&4294967295,C=j+(D<<14&4294967295|D>>>18),D=E+(j^T&(C^j))+R[8]+1163531501&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^j&(E^C))+R[13]+2850285829&4294967295,T=E+(D<<5&4294967295|D>>>27),D=j+(E^C&(T^E))+R[2]+4243563512&4294967295,j=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(j^T))+R[7]+1735328473&4294967295,C=j+(D<<14&4294967295|D>>>18),D=E+(j^T&(C^j))+R[12]+2368359562&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(E^C^j)+R[5]+4294588738&4294967295,T=E+(D<<4&4294967295|D>>>28),D=j+(T^E^C)+R[8]+2272392833&4294967295,j=T+(D<<11&4294967295|D>>>21),D=C+(j^T^E)+R[11]+1839030562&4294967295,C=j+(D<<16&4294967295|D>>>16),D=E+(C^j^T)+R[14]+4259657740&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^j)+R[1]+2763975236&4294967295,T=E+(D<<4&4294967295|D>>>28),D=j+(T^E^C)+R[4]+1272893353&4294967295,j=T+(D<<11&4294967295|D>>>21),D=C+(j^T^E)+R[7]+4139469664&4294967295,C=j+(D<<16&4294967295|D>>>16),D=E+(C^j^T)+R[10]+3200236656&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^j)+R[13]+681279174&4294967295,T=E+(D<<4&4294967295|D>>>28),D=j+(T^E^C)+R[0]+3936430074&4294967295,j=T+(D<<11&4294967295|D>>>21),D=C+(j^T^E)+R[3]+3572445317&4294967295,C=j+(D<<16&4294967295|D>>>16),D=E+(C^j^T)+R[6]+76029189&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^j)+R[9]+3654602809&4294967295,T=E+(D<<4&4294967295|D>>>28),D=j+(T^E^C)+R[12]+3873151461&4294967295,j=T+(D<<11&4294967295|D>>>21),D=C+(j^T^E)+R[15]+530742520&4294967295,C=j+(D<<16&4294967295|D>>>16),D=E+(C^j^T)+R[2]+3299628645&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(C^(E|~j))+R[0]+4096336452&4294967295,T=E+(D<<6&4294967295|D>>>26),D=j+(E^(T|~C))+R[7]+1126891415&4294967295,j=T+(D<<10&4294967295|D>>>22),D=C+(T^(j|~E))+R[14]+2878612391&4294967295,C=j+(D<<15&4294967295|D>>>17),D=E+(j^(C|~T))+R[5]+4237533241&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~j))+R[12]+1700485571&4294967295,T=E+(D<<6&4294967295|D>>>26),D=j+(E^(T|~C))+R[3]+2399980690&4294967295,j=T+(D<<10&4294967295|D>>>22),D=C+(T^(j|~E))+R[10]+4293915773&4294967295,C=j+(D<<15&4294967295|D>>>17),D=E+(j^(C|~T))+R[1]+2240044497&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~j))+R[8]+1873313359&4294967295,T=E+(D<<6&4294967295|D>>>26),D=j+(E^(T|~C))+R[15]+4264355552&4294967295,j=T+(D<<10&4294967295|D>>>22),D=C+(T^(j|~E))+R[6]+2734768916&4294967295,C=j+(D<<15&4294967295|D>>>17),D=E+(j^(C|~T))+R[13]+1309151649&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~j))+R[4]+4149444226&4294967295,T=E+(D<<6&4294967295|D>>>26),D=j+(E^(T|~C))+R[11]+3174756917&4294967295,j=T+(D<<10&4294967295|D>>>22),D=C+(T^(j|~E))+R[2]+718787259&4294967295,C=j+(D<<15&4294967295|D>>>17),D=E+(j^(C|~T))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.v=function(I,T){T===void 0&&(T=I.length);const E=T-this.blockSize,R=this.C;let C=this.h,j=0;for(;j<T;){if(C==0)for(;j<=E;)i(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<T;)if(R[C++]=I.charCodeAt(j++),C==this.blockSize){i(this,R),C=0;break}}else for(;j<T;)if(R[C++]=I[j++],C==this.blockSize){i(this,R),C=0;break}}this.h=C,this.o+=T},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;T=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=T&255,T/=256;for(this.v(I),I=Array(16),T=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)I[T++]=this.g[E]>>>R&255;return I};function o(I,T){var E=u;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=T(I)}function c(I,T){this.h=T;const E=[];let R=!0;for(let C=I.length-1;C>=0;C--){const j=I[C]|0;R&&j==T||(E[C]=j,R=!1)}this.g=E}var u={};function h(I){return-128<=I&&I<128?o(I,function(T){return new c([T|0],T<0?-1:0)}):new c([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return y;if(I<0)return M(f(-I));const T=[];let E=1;for(let R=0;I>=E;R++)T[R]=I/E|0,E*=4294967296;return new c(T,0)}function g(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return M(g(I.substring(1),T));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=f(Math.pow(T,8));let R=y;for(let j=0;j<I.length;j+=8){var C=Math.min(8,I.length-j);const D=parseInt(I.substring(j,j+C),T);C<8?(C=f(Math.pow(T,C)),R=R.j(C).add(f(D))):(R=R.j(E),R=R.add(f(D)))}return R}var y=h(0),v=h(1),w=h(16777216);n=c.prototype,n.m=function(){if(N(this))return-M(this).m();let I=0,T=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);I+=(R>=0?R:4294967296+R)*T,T*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(N(this))return"-"+M(this).toString(I);const T=f(Math.pow(I,6));var E=this;let R="";for(;;){const C=H(E,T).g;E=L(E,C.j(T));let j=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=C,x(E))return j+R;for(;j.length<6;)j="0"+j;R=j+R}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(let T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=L(this,I),N(I)?-1:x(I)?0:1};function M(I){const T=I.g.length,E=[];for(let R=0;R<T;R++)E[R]=~I.g[R];return new c(E,~I.h).add(v)}n.abs=function(){return N(this)?M(this):this},n.add=function(I){const T=Math.max(this.g.length,I.g.length),E=[];let R=0;for(let C=0;C<=T;C++){let j=R+(this.i(C)&65535)+(I.i(C)&65535),D=(j>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);R=D>>>16,j&=65535,D&=65535,E[C]=D<<16|j}return new c(E,E[E.length-1]&-2147483648?-1:0)};function L(I,T){return I.add(M(T))}n.j=function(I){if(x(this)||x(I))return y;if(N(this))return N(I)?M(this).j(M(I)):M(M(this).j(I));if(N(I))return M(this.j(M(I)));if(this.l(w)<0&&I.l(w)<0)return f(this.m()*I.m());const T=this.g.length+I.g.length,E=[];for(var R=0;R<2*T;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<I.g.length;C++){const j=this.i(R)>>>16,D=this.i(R)&65535,G=I.i(C)>>>16,ee=I.i(C)&65535;E[2*R+2*C]+=D*ee,F(E,2*R+2*C),E[2*R+2*C+1]+=j*ee,F(E,2*R+2*C+1),E[2*R+2*C+1]+=D*G,F(E,2*R+2*C+1),E[2*R+2*C+2]+=j*G,F(E,2*R+2*C+2)}for(I=0;I<T;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=T;I<2*T;I++)E[I]=0;return new c(E,0)};function F(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function B(I,T){this.g=I,this.h=T}function H(I,T){if(x(T))throw Error("division by zero");if(x(I))return new B(y,y);if(N(I))return T=H(M(I),T),new B(M(T.g),M(T.h));if(N(T))return T=H(I,M(T)),new B(M(T.g),T.h);if(I.g.length>30){if(N(I)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var E=v,R=T;R.l(I)<=0;)E=Y(E),R=Y(R);var C=U(E,1),j=U(R,1);for(R=U(R,2),E=U(E,2);!x(R);){var D=j.add(R);D.l(I)<=0&&(C=C.add(E),j=D),R=U(R,1),E=U(E,1)}return T=L(I,C.j(T)),new B(C,T)}for(C=y;I.l(T)>=0;){for(E=Math.max(1,Math.floor(I.m()/T.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),j=f(E),D=j.j(T);N(D)||D.l(I)>0;)E-=R,j=f(E),D=j.j(T);x(j)&&(j=v),C=C.add(j),I=L(I,D)}return new B(C,I)}n.B=function(I){return H(this,I).h},n.and=function(I){const T=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)&I.i(R);return new c(E,this.h&I.h)},n.or=function(I){const T=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)|I.i(R);return new c(E,this.h|I.h)},n.xor=function(I){const T=Math.max(this.g.length,I.g.length),E=[];for(let R=0;R<T;R++)E[R]=this.i(R)^I.i(R);return new c(E,this.h^I.h)};function Y(I){const T=I.g.length+1,E=[];for(let R=0;R<T;R++)E[R]=I.i(R)<<1|I.i(R-1)>>>31;return new c(E,I.h)}function U(I,T){const E=T>>5;T%=32;const R=I.g.length-E,C=[];for(let j=0;j<R;j++)C[j]=T>0?I.i(j+E)>>>T|I.i(j+E+1)<<32-T:I.i(j+E);return new c(C,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,k2=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,Sa=c}).apply(typeof Wx<"u"?Wx:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var I2,Uu,N2,Lf,g0,C2,D2,O2;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var S=0;S<m.length;++S){var k=m[S];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=t(this);function i(m,S){if(S)e:{var k=r;m=m.split(".");for(var q=0;q<m.length-1;q++){var ae=m[q];if(!(ae in k))break e;k=k[ae]}m=m[m.length-1],q=k[m],S=S(q),S!=q&&S!=null&&e(k,m,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(S){var k=[],q;for(q in S)Object.prototype.hasOwnProperty.call(S,q)&&k.push([q,S[q]]);return k}});var o=o||{},c=this||self;function u(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function h(m,S,k){return m.call.apply(m.bind,arguments)}function f(m,S,k){return f=h,f.apply(null,arguments)}function g(m,S){var k=Array.prototype.slice.call(arguments,1);return function(){var q=k.slice();return q.push.apply(q,arguments),m.apply(this,q)}}function y(m,S){function k(){}k.prototype=S.prototype,m.Z=S.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(q,ae,ue){for(var xe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)xe[$e-2]=arguments[$e];return S.prototype[ae].apply(q,xe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const S=m.length;if(S>0){const k=Array(S);for(let q=0;q<S;q++)k[q]=m[q];return k}return[]}function x(m,S){for(let q=1;q<arguments.length;q++){const ae=arguments[q];var k=typeof ae;if(k=k!="object"?k:ae?Array.isArray(ae)?"array":k:"null",k=="array"||k=="object"&&typeof ae.length=="number"){k=m.length||0;const ue=ae.length||0;m.length=k+ue;for(let xe=0;xe<ue;xe++)m[k+xe]=ae[xe]}else m.push(ae)}}class N{constructor(S,k){this.i=S,this.j=k,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function M(m){c.setTimeout(()=>{throw m},0)}function L(){var m=I;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class F{constructor(){this.h=this.g=null}add(S,k){const q=B.get();q.set(S,k),this.h?this.h.next=q:this.g=q,this.h=q}}var B=new N(()=>new H,m=>m.reset());class H{constructor(){this.next=this.g=this.h=null}set(S,k){this.h=S,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,U=!1,I=new F,T=()=>{const m=Promise.resolve(void 0);Y=()=>{m.then(E)}};function E(){for(var m;m=L();){try{m.h.call(m.g)}catch(k){M(k)}var S=B;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};c.addEventListener("test",k,S),c.removeEventListener("test",k,S)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function G(m,S){C.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}y(G,C),G.prototype.init=function(m,S){const k=this.type=m.type,q=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(k=="mouseover"?S=m.fromElement:k=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),P=0;function O(m,S,k,q,ae){this.listener=m,this.proxy=null,this.src=S,this.type=k,this.capture=!!q,this.ha=ae,this.key=++P,this.da=this.fa=!1}function X(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,S,k){for(const q in m)S.call(k,m[q],q,m)}function Z(m,S){for(const k in m)S.call(void 0,m[k],k,m)}function $(m){const S={};for(const k in m)S[k]=m[k];return S}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(m,S){let k,q;for(let ae=1;ae<arguments.length;ae++){q=arguments[ae];for(k in q)m[k]=q[k];for(let ue=0;ue<K.length;ue++)k=K[ue],Object.prototype.hasOwnProperty.call(q,k)&&(m[k]=q[k])}}function te(m){this.src=m,this.g={},this.h=0}te.prototype.add=function(m,S,k,q,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const xe=_e(m,S,q,ae);return xe>-1?(S=m[xe],k||(S.fa=!1)):(S=new O(S,this.src,ue,!!q,ae),S.fa=k,m.push(S)),S};function se(m,S){const k=S.type;if(k in m.g){var q=m.g[k],ae=Array.prototype.indexOf.call(q,S,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(q,ae,1),ue&&(X(S),m.g[k].length==0&&(delete m.g[k],m.h--))}}function _e(m,S,k,q){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==S&&ue.capture==!!k&&ue.ha==q)return ae}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),we={};function ye(m,S,k,q,ae){if(Array.isArray(S)){for(let ue=0;ue<S.length;ue++)ye(m,S[ue],k,q,ae);return null}return k=dt(k),m&&m[ee]?m.J(S,k,u(q)?!!q.capture:!1,ae):Ue(m,S,k,!1,q,ae)}function Ue(m,S,k,q,ae,ue){if(!S)throw Error("Invalid event type");const xe=u(ae)?!!ae.capture:!!ae;let $e=At(m);if($e||(m[Re]=$e=new te(m)),k=$e.add(S,k,q,xe,ue),k.proxy)return k;if(q=Je(),k.proxy=q,q.src=m,q.listener=k,m.addEventListener)j||(ae=xe),ae===void 0&&(ae=!1),m.addEventListener(S.toString(),q,ae);else if(m.attachEvent)m.attachEvent(Xe(S.toString()),q);else if(m.addListener&&m.removeListener)m.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Je(){function m(k){return S.call(m.src,m.listener,k)}const S=tt;return m}function Ke(m,S,k,q,ae){if(Array.isArray(S))for(var ue=0;ue<S.length;ue++)Ke(m,S[ue],k,q,ae);else q=u(q)?!!q.capture:!!q,k=dt(k),m&&m[ee]?(m=m.i,ue=String(S).toString(),ue in m.g&&(S=m.g[ue],k=_e(S,k,q,ae),k>-1&&(X(S[k]),Array.prototype.splice.call(S,k,1),S.length==0&&(delete m.g[ue],m.h--)))):m&&(m=At(m))&&(S=m.g[S.toString()],m=-1,S&&(m=_e(S,k,q,ae)),(k=m>-1?S[m]:null)&&ct(k))}function ct(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[ee])se(S.i,m);else{var k=m.type,q=m.proxy;S.removeEventListener?S.removeEventListener(k,q,m.capture):S.detachEvent?S.detachEvent(Xe(k),q):S.addListener&&S.removeListener&&S.removeListener(q),(k=At(S))?(se(k,m),k.h==0&&(k.src=null,S[Re]=null)):X(m)}}}function Xe(m){return m in we?we[m]:we[m]="on"+m}function tt(m,S){if(m.da)m=!0;else{S=new G(S,this);const k=m.listener,q=m.ha||m.src;m.fa&&ct(m),m=k.call(q,S)}return m}function At(m){return m=m[Re],m instanceof te?m:null}var ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function dt(m){return typeof m=="function"?m:(m[ut]||(m[ut]=function(S){return m.handleEvent(S)}),m[ut])}function Ye(){R.call(this),this.i=new te(this),this.M=this,this.G=null}y(Ye,R),Ye.prototype[ee]=!0,Ye.prototype.removeEventListener=function(m,S,k,q){Ke(this,m,S,k,q)};function pe(m,S){var k,q=m.G;if(q)for(k=[];q;q=q.G)k.push(q);if(m=m.M,q=S.type||S,typeof S=="string")S=new C(S,m);else if(S instanceof C)S.target=S.target||m;else{var ae=S;S=new C(q,m),ne(S,ae)}ae=!0;let ue,xe;if(k)for(xe=k.length-1;xe>=0;xe--)ue=S.g=k[xe],ae=Se(ue,q,!0,S)&&ae;if(ue=S.g=m,ae=Se(ue,q,!0,S)&&ae,ae=Se(ue,q,!1,S)&&ae,k)for(xe=0;xe<k.length;xe++)ue=S.g=k[xe],ae=Se(ue,q,!1,S)&&ae}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const k=m.g[S];for(let q=0;q<k.length;q++)X(k[q]);delete m.g[S],m.h--}}this.G=null},Ye.prototype.J=function(m,S,k,q){return this.i.add(String(m),S,!1,k,q)},Ye.prototype.K=function(m,S,k,q){return this.i.add(String(m),S,!0,k,q)};function Se(m,S,k,q){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let ae=!0;for(let ue=0;ue<S.length;++ue){const xe=S[ue];if(xe&&!xe.da&&xe.capture==k){const $e=xe.listener,Qt=xe.ha||xe.src;xe.fa&&se(m.i,xe),ae=$e.call(Qt,q)!==!1&&ae}}return ae&&!q.defaultPrevented}function He(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:c.setTimeout(m,S||0)}function je(m){m.g=He(()=>{m.g=null,m.i&&(m.i=!1,je(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Te extends R{constructor(S,k){super(),this.m=S,this.l=k,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function at(m){R.call(this),this.h=m,this.g={}}y(at,R);var _t=[];function Gn(m){W(m.g,function(S,k){this.g.hasOwnProperty(k)&&ct(S)},m),m.g={}}at.prototype.N=function(){at.Z.N.call(this),Gn(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=c.JSON.stringify,Kn=c.JSON.parse,qt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Pn(){}function Tn(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rt(){C.call(this,"d")}y(Rt,C);function tn(){C.call(this,"c")}y(tn,C);var Ot={},Zo=null;function hs(){return Zo=Zo||new Ye}Ot.Ia="serverreachability";function Ua(m){C.call(this,Ot.Ia,m)}y(Ua,C);function jn(m){const S=hs();pe(S,new Ua(S))}Ot.STAT_EVENT="statevent";function Js(m,S){C.call(this,Ot.STAT_EVENT,m),this.stat=S}y(Js,C);function vt(m){const S=hs();pe(S,new Js(S,m))}Ot.Ja="timingevent";function mn(m,S){C.call(this,Ot.Ja,m),this.size=S}y(mn,C);function Sn(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function An(){this.g=!0}An.prototype.ua=function(){this.g=!1};function el(m,S,k,q,ae,ue){m.info(function(){if(m.g)if(ue){var xe="",$e=ue.split("&");for(let gt=0;gt<$e.length;gt++){var Qt=$e[gt].split("=");if(Qt.length>1){const jt=Qt[0];Qt=Qt[1];const Or=jt.split("_");xe=Or.length>=2&&Or[1]=="type"?xe+(jt+"="+Qt+"&"):xe+(jt+"=redacted&")}}}else xe=null;else xe=ue;return"XMLHTTP REQ ("+q+") [attempt "+ae+"]: "+S+`
`+k+`
`+xe})}function Ir(m,S,k,q,ae,ue,xe){m.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+ae+"]: "+S+`
`+k+`
`+ue+" "+xe})}function _n(m,S,k,q){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+kg(m,k)+(q?" "+q:"")})}function za(m,S){m.info(function(){return"TIMEOUT: "+S})}An.prototype.info=function(){};function kg(m,S){if(!m.g)return S;if(!S)return null;try{const ue=JSON.parse(S);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var k=ue[m];if(!(k.length<2)){var q=k[1];if(Array.isArray(q)&&!(q.length<1)){var ae=q[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let xe=1;xe<q.length;xe++)q[xe]=""}}}}return mt(ue)}catch{return S}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ic={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nc;function Ba(){}y(Ba,Pn),Ba.prototype.g=function(){return new XMLHttpRequest},Nc=new Ba;function Zs(m){return encodeURIComponent(String(m))}function Qd(m){var S=1;m=m.split(":");const k=[];for(;S>0&&m.length;)k.push(m.shift()),S--;return m.length&&k.push(m.join(":")),k}function Qr(m,S,k,q){this.j=m,this.i=S,this.l=k,this.S=q||1,this.V=new at(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wr}function Wr(){this.i=null,this.g="",this.h=!1}var nn={},vn={};function fs(m,S,k){m.M=1,m.A=qa(sn(S)),m.u=k,m.R=!0,tl(m,null)}function tl(m,S){m.F=Date.now(),ms(m),m.B=sn(m.A);var k=m.B,q=m.S;Array.isArray(q)||(q=[String(q)]),il(k.i,"t",q),m.C=0,k=m.j.L,m.h=new Wr,m.g=uh(m.j,k?S:null,!m.u),m.P>0&&(m.O=new Te(f(m.Y,m,m.g),m.P)),S=m.V,k=m.g,q=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(_t[0]=ae.toString()),ae=_t);for(let ue=0;ue<ae.length;ue++){const xe=ye(k,ae[ue],q||S.handleEvent,!1,S.h||S);if(!xe)break;S.g[xe.key]=xe}S=m.J?$(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),jn(),el(m.i,m.v,m.B,m.l,m.S,m.u)}Qr.prototype.ba=function(m){m=m.target;const S=this.O;S&&Zr(m)==3?S.j():this.Y(m)},Qr.prototype.Y=function(m){try{if(m==this.g)e:{const $e=Zr(this.g),Qt=this.g.ya(),gt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Rn(this.g)))){this.K||$e!=4||Qt==7||(Qt==8||gt<=0?jn(3):jn(2)),gs(this);var S=this.g.ca();this.X=S;var k=Ig(this);if(this.o=S==200,Ir(this.i,this.v,this.B,this.l,this.S,$e,S),this.o){if(this.U&&!this.L){t:{if(this.g){var q,ae=this.g;if((q=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(q)){var ue=q;break t}}ue=null}if(m=ue)_n(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ps(this,m);else{this.o=!1,this.m=3,vt(12),dr(this),Nr(this);break e}}if(this.R){m=!0;let jt;for(;!this.K&&this.C<k.length;)if(jt=Xd(this,k),jt==vn){$e==4&&(this.m=4,vt(14),m=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==nn){this.m=4,vt(15),_n(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else _n(this.i,this.l,jt,null),ps(this,jt);if(Wd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||k.length!=0||this.h.h||(this.m=1,vt(16),m=!1),this.o=this.o&&m,!m)_n(this.i,this.l,k,"[Invalid Chunked Response]"),dr(this),Nr(this);else if(k.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),$c(xe),xe.P=!0,vt(11))}}else _n(this.i,this.l,k,null),ps(this,k);$e==4&&dr(this),this.o&&!this.K&&($e==4?ah(this.j,this):(this.o=!1,ms(this)))}else ti(this.g),S==400&&k.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),dr(this),Nr(this)}}}catch{}finally{}};function Ig(m){if(!Wd(m))return m.g.la();const S=Rn(m.g);if(S==="")return"";let k="";const q=S.length,ae=Zr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return dr(m),Nr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<q;ue++)m.h.h=!0,k+=m.h.i.decode(S[ue],{stream:!(ae&&ue==q-1)});return S.length=0,m.h.g+=k,m.C=0,m.h.g}function Wd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Xd(m,S){var k=m.C,q=S.indexOf(`
`,k);return q==-1?vn:(k=Number(S.substring(k,q)),isNaN(k)?nn:(q+=1,q+k>S.length?vn:(S=S.slice(q,q+k),m.C=q+k,S)))}Qr.prototype.cancel=function(){this.K=!0,dr(this)};function ms(m){m.T=Date.now()+m.H,nl(m,m.H)}function nl(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Sn(f(m.aa,m),S)}function gs(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Qr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(za(this.i,this.B),this.M!=2&&(jn(),vt(17)),dr(this),this.m=2,Nr(this)):nl(this,this.T-m)};function Nr(m){m.j.I==0||m.K||ah(m.j,m)}function dr(m){gs(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,Gn(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function ps(m,S){try{var k=m.j;if(k.I!=0&&(k.g==m||_s(k.h,m))){if(!m.L&&_s(k.h,m)&&k.I==3){try{var q=k.Ba.g.parse(S)}catch{q=null}if(Array.isArray(q)&&q.length==3){var ae=q;if(ae[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)ul(k),Bi(k);else break e;Wa(k),vt(18)}}else k.xa=ae[1],0<k.xa-k.K&&ae[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Sn(f(k.Va,k),6e3));ys(k.h)<=1&&k.ta&&(k.ta=void 0)}else Ts(k,11)}else if((m.L||k.g==m)&&ul(k),!D(S))for(ae=k.Ba.g.parse(S),S=0;S<ae.length;S++){let gt=ae[S];const jt=gt[0];if(!(jt<=k.K))if(k.K=jt,gt=gt[1],k.I==2)if(gt[0]=="c"){k.M=gt[1],k.ba=gt[2];const Or=gt[3];Or!=null&&(k.ka=Or,k.j.info("VER="+k.ka));const Ss=gt[4];Ss!=null&&(k.za=Ss,k.j.info("SVER="+k.za));const es=gt[5];es!=null&&typeof es=="number"&&es>0&&(q=1.5*es,k.O=q,k.j.info("backChannelRequestTimeoutMs_="+q)),q=k;const ts=m.g;if(ts){const Xa=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ue=q.h;ue.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Oc(ue,ue.h),ue.h=null))}if(q.G){const dl=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(q.wa=dl,bt(q.J,q.G,dl))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),q=k;var xe=m;if(q.na=ch(q,q.L?q.ba:null,q.W),xe.L){Mc(q.h,xe);var $e=xe,Qt=q.O;Qt&&($e.H=Qt),$e.D&&(gs($e),ms($e)),q.g=xe}else sh(q);k.i.length>0&&Es(k)}else gt[0]!="stop"&&gt[0]!="close"||Ts(k,7);else k.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Ts(k,7):qc(k):gt[0]!="noop"&&k.l&&k.l.qa(gt),k.A=0)}}jn(4)}catch{}}var rn=class{constructor(m,S){this.g=m,this.map=S}};function Cc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ys(m){return m.h?1:m.g?m.g.size:0}function _s(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Oc(m,S){m.g?m.g.add(S):m.h=S}function Mc(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}Cc.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Pc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const k of m.g.values())S=S.concat(k.G);return S}return w(m.i)}var Jd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(m,S){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const q=m[k].indexOf("=");let ae,ue=null;q>=0?(ae=m[k].substring(0,q),ue=m[k].substring(q+1)):ae=m[k],S(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function hr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof hr?(this.l=m.l,bn(this,m.j),this.o=m.o,this.g=m.g,Pi(this,m.u),this.h=m.h,jc(this,nh(m.i)),this.m=m.m):m&&(S=String(m).match(Jd))?(this.l=!1,bn(this,S[1]||"",!0),this.o=vs(S[2]||""),this.g=vs(S[3]||"",!0),Pi(this,S[4]),this.h=vs(S[5]||"",!0),jc(this,S[6]||"",!0),this.m=vs(S[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}hr.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(Ha(S,sl,!0),":");var k=this.g;return(k||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Ha(S,sl,!0),"@"),m.push(Zs(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Ha(k,k.charAt(0)=="/"?Lc:Zd,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Ha(k,eh)),m.join("")},hr.prototype.resolve=function(m){const S=sn(this);let k=!!m.j;k?bn(S,m.j):k=!!m.o,k?S.o=m.o:k=!!m.g,k?S.g=m.g:k=m.u!=null;var q=m.h;if(k)Pi(S,m.u);else if(k=!!m.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var ae=S.h.lastIndexOf("/");ae!=-1&&(q=S.h.slice(0,ae+1)+q)}if(ae=q,ae==".."||ae==".")q="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){q=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let xe=0;xe<ae.length;){const $e=ae[xe++];$e=="."?q&&xe==ae.length&&ue.push(""):$e==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),q&&xe==ae.length&&ue.push("")):(ue.push($e),q=!0)}q=ue.join("/")}else q=ae}return k?S.h=q:k=m.i.toString()!=="",k?jc(S,nh(m.i)):k=!!m.m,k&&(S.m=m.m),S};function sn(m){return new hr(m)}function bn(m,S,k){m.j=k?vs(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Pi(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function jc(m,S,k){S instanceof Li?(m.i=S,al(m.i,m.l)):(k||(S=Ha(S,ji)),m.i=new Li(S,m.l))}function bt(m,S,k){m.i.set(S,k)}function qa(m){return bt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function vs(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ha(m,S,k){return typeof m=="string"?(m=encodeURI(m).replace(S,tr),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function tr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var sl=/[#\/\?@]/g,Zd=/[#\?:]/g,Lc=/[#\?]/g,ji=/[#\?@]/g,eh=/#/g;function Li(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function nr(m){m.g||(m.g=new Map,m.h=0,m.i&&rl(m.i,function(S,k){m.add(decodeURIComponent(S.replace(/\+/g," ")),k)}))}n=Li.prototype,n.add=function(m,S){nr(this),this.i=null,m=Vi(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(S),this.h+=1,this};function th(m,S){nr(m),S=Vi(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Vc(m,S){return nr(m),S=Vi(m,S),m.g.has(S)}n.forEach=function(m,S){nr(this),this.g.forEach(function(k,q){k.forEach(function(ae){m.call(S,ae,q,this)},this)},this)};function Uc(m,S){nr(m);let k=[];if(typeof S=="string")Vc(m,S)&&(k=k.concat(m.g.get(Vi(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)k=k.concat(m[S]);return k}n.set=function(m,S){return nr(this),this.i=null,m=Vi(this,m),Vc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=Uc(this,m),m.length>0?String(m[0]):S):S};function il(m,S,k){th(m,S),k.length>0&&(m.i=null,m.g.set(Vi(m,S),w(k)),m.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let q=0;q<S.length;q++){var k=S[q];const ae=Zs(k);k=Uc(this,k);for(let ue=0;ue<k.length;ue++){let xe=ae;k[ue]!==""&&(xe+="="+Zs(k[ue])),m.push(xe)}}return this.i=m.join("&")};function nh(m){const S=new Li;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Vi(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function al(m,S){S&&!m.j&&(nr(m),m.i=null,m.g.forEach(function(k,q){const ae=q.toLowerCase();q!=ae&&(th(this,q),il(this,ae,k))},m)),m.j=S}function Xr(m,S){const k=new An;if(c.Image){const q=new Image;q.onload=g(Cr,k,"TestLoadImage: loaded",!0,S,q),q.onerror=g(Cr,k,"TestLoadImage: error",!1,S,q),q.onabort=g(Cr,k,"TestLoadImage: abort",!1,S,q),q.ontimeout=g(Cr,k,"TestLoadImage: timeout",!1,S,q),c.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=m}else S(!1)}function zc(m,S){const k=new An,q=new AbortController,ae=setTimeout(()=>{q.abort(),Cr(k,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:q.signal}).then(ue=>{clearTimeout(ae),ue.ok?Cr(k,"TestPingServer: ok",!0,S):Cr(k,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ae),Cr(k,"TestPingServer: error",!1,S)})}function Cr(m,S,k,q,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),q(k)}catch{}}function Ui(){this.g=new qt}function bs(m){this.i=m.Sb||null,this.h=m.ab||!1}y(bs,Pn),bs.prototype.g=function(){return new $a(this.i,this.h)};function $a(m,S){Ye.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y($a,Ye),n=$a.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,Jr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||c).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?zi(this):Jr(this),this.readyState==3&&ol(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,zi(this))},n.Na=function(m){this.g&&(this.response=m,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Jr(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var k=S.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=S.next();return m.join(`\r
`)};function Jr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Dr(m){let S="";return W(m,function(k,q){S+=q,S+=":",S+=k,S+=`\r
`}),S}function Ga(m,S,k){e:{for(q in k){var q=!1;break e}q=!0}q||(k=Dr(k),typeof m=="string"?k!=null&&Zs(k):bt(m,S,k))}function kt(m){Ye.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(kt,Ye);var ws=/^https?$/i,Fc=["POST","PUT"];n=kt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,k,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ue){Ka(this,ue);return}if(m=k||"",k=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var ae in q)k.set(ae,q[ae]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const ue of q.keys())k.set(ue,q.get(ue));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(k.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Fc,S,void 0)>=0)||q||ae||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,xe]of k)this.g.setRequestHeader(ue,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Ka(this,ue)}};function Ka(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Bc(m),ei(m)}function Bc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),ei(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),kt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},n.Xa=function(){Ya(this)};function Ya(m){if(m.h&&typeof o<"u"){if(m.v&&Zr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),Zr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var k;if(!(k=S)){var q;if(q=ue===0){let xe=String(m.D).match(Jd)[1]||null;!xe&&c.self&&c.self.location&&(xe=c.self.location.protocol.slice(0,-1)),q=!ws.test(xe?xe.toLowerCase():"")}k=q}if(k)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=Zr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Bc(m)}}finally{ei(m)}}}}function ei(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,S||pe(m,"ready");try{k.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zr(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Kn(S)}};function Rn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ti(m){const S={};m=(m.g&&Zr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<m.length;q++){if(D(m[q]))continue;var k=Qd(m[q]);const ae=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ue=S[ae]||[];S[ae]=ue,ue.push(k)}Z(S,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(m,S,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||S}function Fi(m){this.za=0,this.i=[],this.j=new An,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,m),this.Za=xs("retryDelaySeedMs",1e4,m),this.Ta=xs("forwardChannelMaxRetries",2,m),this.va=xs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Cc(m&&m.concurrentRequestLimit),this.Ba=new Ui,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fi.prototype,n.ka=8,n.I=1,n.connect=function(m,S,k,q){vt(0),this.W=m,this.H=S||{},k&&q!==void 0&&(this.H.OSID=k,this.H.OAID=q),this.F=this.X,this.J=ch(this,null,this.W),Es(this)};function qc(m){if(ll(m),m.I==3){var S=m.V++,k=sn(m.J);if(bt(k,"SID",m.M),bt(k,"RID",S),bt(k,"TYPE","terminate"),Qa(m,k),S=new Qr(m,m.j,S),S.M=2,S.A=qa(sn(k)),k=!1,c.navigator&&c.navigator.sendBeacon)try{k=c.navigator.sendBeacon(S.A.toString(),"")}catch{}!k&&c.Image&&(new Image().src=S.A,k=!0),k||(S.g=uh(S.j,null),S.g.ea(S.A)),S.F=Date.now(),ms(S)}lh(m)}function Bi(m){m.g&&($c(m),m.g.cancel(),m.g=null)}function ll(m){Bi(m),m.v&&(c.clearTimeout(m.v),m.v=null),ul(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Es(m){if(!Dc(m.h)&&!m.m){m.m=!0;var S=m.Ea;Y||T(),U||(Y(),U=!0),I.add(S,m),m.D=0}}function cl(m,S){return ys(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Sn(f(m.Ea,m,S),oh(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Qr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=$(ue),ne(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var S=0,k=0;k<this.i.length;k++){t:{var q=this.i[k];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(S+=q,S>4096){S=k;break e}if(S===4096||k===this.i.length-1){S=k+1;break e}}S=1e3}else S=1e3;S=rh(this,ae,S),k=sn(this.J),bt(k,"RID",m),bt(k,"CVER",22),this.G&&bt(k,"X-HTTP-Session-Id",this.G),Qa(this,k),ue&&(this.R?S="headers="+Zs(Dr(ue))+"&"+S:this.u&&Ga(k,this.u,ue)),Oc(this.h,ae),this.Ra&&bt(k,"TYPE","init"),this.S?(bt(k,"$req",S),bt(k,"SID","null"),ae.U=!0,fs(ae,k,null)):fs(ae,k,S),this.I=2}}else this.I==3&&(m?Hc(this,m):this.i.length==0||Dc(this.h)||Hc(this))};function Hc(m,S){var k;S?k=S.l:k=m.V++;const q=sn(m.J);bt(q,"SID",m.M),bt(q,"RID",k),bt(q,"AID",m.K),Qa(m,q),m.u&&m.o&&Ga(q,m.u,m.o),k=new Qr(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),S&&(m.i=S.G.concat(m.i)),S=rh(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Oc(m.h,k),fs(k,q,S)}function Qa(m,S){m.H&&W(m.H,function(k,q){bt(S,q,k)}),m.l&&W({},function(k,q){bt(S,q,k)})}function rh(m,S,k){k=Math.min(m.i.length,k);const q=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let $e=-1;for(;;){const Qt=["count="+k];$e==-1?k>0?($e=ae[0].g,Qt.push("ofs="+$e)):$e=0:Qt.push("ofs="+$e);let gt=!0;for(let jt=0;jt<k;jt++){var ue=ae[jt].g;const Or=ae[jt].map;if(ue-=$e,ue<0)$e=Math.max(0,ae[jt].g-100),gt=!1;else try{ue="req"+ue+"_"||"";try{var xe=Or instanceof Map?Or:Object.entries(Or);for(const[Ss,es]of xe){let ts=es;u(es)&&(ts=mt(es)),Qt.push(ue+Ss+"="+encodeURIComponent(ts))}}catch(Ss){throw Qt.push(ue+"type="+encodeURIComponent("_badmap")),Ss}}catch{q&&q(Or)}}if(gt){xe=Qt.join("&");break e}}xe=void 0}return m=m.i.splice(0,k),S.G=m,xe}function sh(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;Y||T(),U||(Y(),U=!0),I.add(S,m),m.A=0}}function Wa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Sn(f(m.Da,m),oh(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,ih(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Sn(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),Bi(this),ih(this))};function $c(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function ih(m){m.g=new Qr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=sn(m.na);bt(S,"RID","rpc"),bt(S,"SID",m.M),bt(S,"AID",m.K),bt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&bt(S,"TO",m.ia),bt(S,"TYPE","xmlhttp"),Qa(m,S),m.u&&m.o&&Ga(S,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=qa(sn(S)),k.u=null,k.R=!0,tl(k,m)}n.Va=function(){this.C!=null&&(this.C=null,Bi(this),Wa(this),vt(19))};function ul(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ah(m,S){var k=null;if(m.g==S){ul(m),$c(m),m.g=null;var q=2}else if(_s(m.h,S))k=S.G,Mc(m.h,S),q=1;else return;if(m.I!=0){if(S.o)if(q==1){k=S.u?S.u.length:0,S=Date.now()-S.F;var ae=m.D;q=hs(),pe(q,new mn(q,k)),Es(m)}else sh(m);else if(ae=S.m,ae==3||ae==0&&S.X>0||!(q==1&&cl(m,S)||q==2&&Wa(m)))switch(k&&k.length>0&&(S=m.h,S.i=S.i.concat(k)),ae){case 1:Ts(m,5);break;case 4:Ts(m,10);break;case 3:Ts(m,6);break;default:Ts(m,2)}}}function oh(m,S){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*S}function Ts(m,S){if(m.j.info("Error code "+S),S==2){var k=f(m.bb,m),q=m.Ua;const ae=!q;q=new hr(q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bn(q,"https"),qa(q),ae?Xr(q.toString(),k):zc(q.toString(),k)}else vt(2);m.I=0,m.l&&m.l.pa(S),lh(m),ll(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function lh(m){if(m.I=0,m.ja=[],m.l){const S=Pc(m.h);(S.length!=0||m.i.length!=0)&&(x(m.ja,S),x(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function ch(m,S,k){var q=k instanceof hr?sn(k):new hr(k);if(q.g!="")S&&(q.g=S+"."+q.g),Pi(q,q.u);else{var ae=c.location;q=ae.protocol,S=S?S+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new hr(null);q&&bn(ue,q),S&&(ue.g=S),ae&&Pi(ue,ae),k&&(ue.h=k),q=ue}return k=m.G,S=m.wa,k&&S&&bt(q,k,S),bt(q,"VER",m.ka),Qa(m,q),q}function uh(m,S,k){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new kt(new bs({ab:k})):new kt(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}n=dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qi(){}qi.prototype.g=function(m,S){return new Yn(m,S)};function Yn(m,S){Ye.call(this),this.g=new Fi(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!D(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new ni(this)}y(Yn,Ye),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){qc(this.g)},Yn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=mt(m),m=k);S.i.push(new rn(S.Ya++,m)),S.I==3&&Es(S)},Yn.prototype.N=function(){this.g.l=null,delete this.j,qc(this.g),delete this.g,Yn.Z.N.call(this)};function hh(m){Rt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const k in S){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}y(hh,Rt);function fh(){tn.call(this),this.status=1}y(fh,tn);function ni(m){this.g=m}y(ni,dh),ni.prototype.ra=function(){pe(this.g,"a")},ni.prototype.qa=function(m){pe(this.g,new hh(m))},ni.prototype.pa=function(m){pe(this.g,new fh)},ni.prototype.oa=function(){pe(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,O2=function(){return new qi},D2=function(){return hs()},C2=Ot,g0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,Lf=Fa,Ic.COMPLETE="complete",N2=Ic,Tn.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,Uu=Tn,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,I2=kt}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const Xx="@firebase/firestore",Jx="4.9.2";let Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");let Sc="12.3.0";const Mo=new e_("@firebase/firestore");function Ql(){return Mo.logLevel}function ve(n,...e){if(Mo.logLevel<=st.DEBUG){const t=e.map(d_);Mo.debug(`Firestore (${Sc}): ${n}`,...t)}}function Xn(n,...e){if(Mo.logLevel<=st.ERROR){const t=e.map(d_);Mo.error(`Firestore (${Sc}): ${n}`,...t)}}function Po(n,...e){if(Mo.logLevel<=st.WARN){const t=e.map(d_);Mo.warn(`Firestore (${Sc}): ${n}`,...t)}}function d_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,M2(n,r,t)}function M2(n,e,t){let r=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xn(r),new Error(r)}function Ce(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||M2(e,i,r)}function Be(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class P2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class HM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $M{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zs,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new P2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class GM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class h_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=QM(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function p0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return By(i)===By(o)?Fe(i,o):By(i)?1:-1}return Fe(n.length,e.length)}const WM=55296,XM=57343;function By(n){const e=n.charCodeAt(0);return e>=WM&&e<=XM}function cc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function j2(n){return n+"\0"}const eE="__name__";class Ns{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ns.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ns.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Fe(e.length,t.length)}static compareSegments(e,t){const r=Ns.isNumericId(e),i=Ns.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ns.extractNumericId(e).compare(Ns.extractNumericId(t)):p0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class yt extends Ns{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const JM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Ns{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return JM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eE}static keyField(){return new zt([eE])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new be(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new be(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(yt.fromString(e))}static fromName(e){return new Ee(yt.fromString(e).popFirst(5))}static empty(){return new Ee(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new yt(e.slice()))}}function L2(n,e,t){if(!t)throw new be(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZM(n,e,t,r){if(e===!0&&r===!0)throw new be(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tE(n){if(!Ee.isDocumentKey(n))throw new be(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nE(n){if(Ee.isDocumentKey(n))throw new be(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function V2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ym(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ym(n);throw new be(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function e3(n,e){if(e<=0)throw new be(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Pd(n,e){if(!V2(n))throw new be(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new be(he.INVALID_ARGUMENT,t);return!0}const rE=-62135596800,sE=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sE);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rE)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pd(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:hn("string",Et._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Et(0,0))}static max(){return new Me(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const od=-1;class hm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function y0(n){return n.fields.find((e=>e.kind===2))}function po(n){return n.fields.filter((e=>e.kind!==2))}hm.UNKNOWN_ID=-1;class Vf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ld{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ld(0,Tr.min())}}function t3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new Tr(i,Ee.empty(),e)}function U2(n){return new Tr(n.readTime,n.key,od)}class Tr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tr(Me.min(),Ee.empty(),od)}static max(){return new Tr(Me.max(),Ee.empty(),od)}}function f_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}const z2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qo(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==z2)throw n;ve("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let i=0,o=0,c=!1;e.forEach((u=>{++i,u.next((()=>{++o,c&&o===i&&t()}),(h=>r(h)))})),c=!0,o===i&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((i=>i?ie.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,i)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((g=>{c[f]=g,++u,u===o&&r(c)}),(g=>i(g)))}}))}static doWhile(e,t){return new ie(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}const wr="SimpleDb";class Qm{static open(e,t,r,i){try{return new Qm(t,e.transaction(i,r))}catch(o){throw new Yu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Yu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=m_(r.target.error);this.S.reject(new Yu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ve(wr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new r3(t)}}class Aa{static delete(e){return ve(wr,"Removing database:",e),_o(CS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!zS())return!1;if(Aa.F())return!0;const e=pn(),t=Aa.M(e),r=0<t&&t<10,i=B2(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Aa.M(pn())===12.2&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ve(wr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new Yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new be(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new be(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Yu(e,c))},i.onupgradeneeded=o=>{ve(wr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next((()=>{ve(wr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Qm.open(this.db,e,o?"readonly":"readwrite",r),h=i(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),ie.reject(f)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,f=h.name!=="FirebaseError"&&c<3;if(ve(wr,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function B2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class n3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _o(this.U.delete())}}class Yu extends be{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(n){return n.name==="IndexedDbTransactionError"}class r3{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ve(wr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve(wr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_o(r)}add(e){return ve(wr,"ADD",this.store.name,e,e),_o(this.store.add(e))}get(e){return _o(this.store.get(e)).next((t=>(t===void 0&&(t=null),ve(wr,"GET",this.store.name,e,t),t)))}delete(e){return ve(wr,"DELETE",this.store.name,e),_o(this.store.delete(e))}count(){return ve(wr,"COUNT",this.store.name),_o(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ie(((c,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{c(h.target.result)}}))}{const o=this.cursor(r),c=[];return this.H(o,((u,h)=>{c.push(h)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ie(((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}}))}Z(e,t){ve(wr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((o,c,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ie(((r,i)=>{t.onerror=o=>{const c=m_(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():r()})):r()}}))}H(e,t){const r=[];return new ie(((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void i();const h=new n3(u),f=t(u.primaryKey,u.value,h);if(f instanceof ie){const g=f.catch((y=>(h.done(),ie.reject(y))));r.push(g)}h.isDone?i():h.G===null?u.continue():u.continue(h.G)}})).next((()=>ie.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _o(n){return new ie(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=m_(r.target.error);t(i)}}))}let iE=!1;function m_(n){const e=Aa.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iE||(iE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Qu="IndexBackfiller";class s3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ve(Qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ve(Qu,`Documents written: ${t}`)}catch(t){Pa(t)?ve(Qu,"Ignoring IndexedDB error during index backfill: ",t):await Qo(t)}await this.re(6e4)}))}}class i3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,o=!0;return ie.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ve(Qu,`Processing collection: ${c}`),this.oe(e,c,i).next((u=>{i-=u,r.add(c)}));o=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(i,o))).next((u=>(ve(Qu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,o)=>{const c=U2(o);f_(c,r)>0&&(r=c)})),new Tr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hr.ce=-1;const So=-1;function Wm(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function a3(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const fm="";function Hn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aE(e)),e=o3(n.get(t),e);return aE(e)}function o3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case fm:t+="";break;default:t+=o}}return t}function aE(n){return n+fm+""}function Ps(n){const e=n.length;if(Ce(e>=2,64408,{path:n}),e===2)return Ce(n.charAt(0)===fm&&n.charAt(1)==="",56145,{path:n}),yt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(fm,o);switch((c<0||c>t)&&Ie(50515,{path:n}),n.charAt(c+1)){case"":const u=n.substring(o,c);let h;i.length===0?h=u:(i+=u,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:Ie(61167,{path:n})}o=c+2}return new yt(r)}const yo="remoteDocuments",jd="owner",Bl="owner",ud="mutationQueues",l3="userId",as="mutations",oE="batchId",Eo="userMutationsIndex",lE=["userId","batchId"];function Uf(n,e){return[n,Hn(e)]}function q2(n,e,t){return[n,Hn(e),t]}const c3={},uc="documentMutations",mm="remoteDocumentsV14",u3=["prefixPath","collectionGroup","readTime","documentId"],zf="documentKeyIndex",d3=["prefixPath","collectionGroup","documentId"],H2="collectionGroupIndex",h3=["collectionGroup","readTime","prefixPath","documentId"],dd="remoteDocumentGlobal",_0="remoteDocumentGlobalKey",dc="targets",$2="queryTargetsIndex",f3=["canonicalId","targetId"],hc="targetDocuments",m3=["targetId","path"],g_="documentTargetsIndex",g3=["path","targetId"],gm="targetGlobalKey",Ao="targetGlobal",hd="collectionParents",p3=["collectionId","parent"],fc="clientMetadata",y3="clientId",Xm="bundles",_3="bundleId",Jm="namedQueries",v3="name",p_="indexConfiguration",b3="indexId",v0="collectionGroupIndex",w3="collectionGroup",Wu="indexState",x3=["indexId","uid"],G2="sequenceNumberIndex",E3=["uid","sequenceNumber"],Xu="indexEntries",T3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K2="documentKeyIndex",S3=["indexId","uid","orderedDocumentKey"],Zm="documentOverlays",A3=["userId","collectionPath","documentId"],b0="collectionPathOverlayIndex",R3=["userId","collectionPath","largestBatchId"],Y2="collectionGroupOverlayIndex",k3=["userId","collectionGroup","largestBatchId"],y_="globals",I3="name",Q2=[ud,as,uc,yo,dc,jd,Ao,hc,fc,dd,hd,Xm,Jm],N3=[...Q2,Zm],W2=[ud,as,uc,mm,dc,jd,Ao,hc,fc,dd,hd,Xm,Jm,Zm],X2=W2,__=[...X2,p_,Wu,Xu],C3=__,J2=[...__,y_],D3=J2;class w0 extends F2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function yn(n,e){const t=Be(n);return Aa.O(t.le,e)}function cE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ja(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ut{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xf(this.root,e,this.comparator,!0)}}class xf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??On.RED,this.left=i??On.EMPTY,this.right=o??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new On(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uE(this.data.getIterator())}getIteratorFrom(e){return new uE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class uE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ql(n){return n.hasNext()?n.getNext():void 0}class cr{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new cr([])}unionWith(e){let t=new St(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eA("Invalid base64 string: "+o):o}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const O3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(Ce(!!n,39018),typeof n=="string"){let e=0;const t=O3.exec(n);if(Ce(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ii(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}const tA="server_timestamp",nA="__type__",rA="__previous_value__",sA="__local_write_time__";function v_(n){return(n?.mapValue?.fields||{})[nA]?.stringValue===tA}function eg(n){const e=n.mapValue.fields[rA];return v_(e)?eg(e):e}function fd(n){const e=ki(n.mapValue.fields[sA].timestampValue);return new Et(e.seconds,e.nanos)}class M3{constructor(e,t,r,i,o,c,u,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const pm="(default)";class jo{constructor(e,t){this.projectId=e,this.database=t||pm}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database===pm}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}const b_="__type__",iA="__max__",xa={mapValue:{fields:{__type__:{stringValue:iA}}}},w_="__vector__",mc="value",Ff={nullValue:"NULL_VALUE"};function Na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?v_(n)?4:aA(n)?9007199254740991:tg(n)?10:11:Ie(28295,{value:n})}function Hs(n,e){if(n===e)return!0;const t=Na(n);if(t!==Na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fd(n).isEqual(fd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=ki(i.timestampValue),u=ki(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Ii(i.bytesValue).isEqual(Ii(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Vt(i.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Vt(i.integerValue)===Vt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=Vt(i.doubleValue),u=Vt(o.doubleValue);return c===u?cd(c)===cd(u):isNaN(c)&&isNaN(u)}return!1})(n,e);case 9:return cc(n.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(i,o){const c=i.mapValue.fields||{},u=o.mapValue.fields||{};if(cE(c)!==cE(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Hs(c[h],u[h])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function md(n,e){return(n.values||[]).find((t=>Hs(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=Na(n),r=Na(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Vt(o.integerValue||o.doubleValue),h=Vt(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return dE(n.timestampValue,e.timestampValue);case 4:return dE(fd(n),fd(e));case 5:return p0(n.stringValue,e.stringValue);case 6:return(function(o,c){const u=Ii(o),h=Ii(c);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=Fe(u[f],h[f]);if(g!==0)return g}return Fe(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Fe(Vt(o.latitude),Vt(c.latitude));return u!==0?u:Fe(Vt(o.longitude),Vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hE(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},h=c.fields||{},f=u[mc]?.arrayValue,g=h[mc]?.arrayValue,y=Fe(f?.values?.length||0,g?.values?.length||0);return y!==0?y:hE(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===xa.mapValue&&c===xa.mapValue)return 0;if(o===xa.mapValue)return 1;if(c===xa.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=p0(h[y],g[y]);if(v!==0)return v;const w=Ca(u[h[y]],f[g[y]]);if(w!==0)return w}return Fe(h.length,g.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function dE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=ki(n),r=ki(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function hE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ca(t[i],r[i]);if(o)return o}return Fe(t.length,r.length)}function gc(n){return x0(n)}function x0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ki(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ii(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=x0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${x0(t.fields[c])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function Bf(n){switch(Na(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eg(n);return e?16+Bf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ii(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Bf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ja(r.fields,((o,c)=>{i+=o.length+Bf(c)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function E0(n){return!!n&&"integerValue"in n}function pd(n){return!!n&&"arrayValue"in n}function fE(n){return!!n&&"nullValue"in n}function mE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qf(n){return!!n&&"mapValue"in n}function tg(n){return(n?.mapValue?.fields||{})[b_]?.stringValue===w_}function Ju(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ja(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ju(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return{...n}}function aA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iA}const oA={mapValue:{fields:{[b_]:{stringValue:w_},[mc]:{arrayValue:{}}}}};function P3(n){return"nullValue"in n?Ff:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gd(jo.empty(),Ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tg(n)?oA:{mapValue:{}}:Ie(35942,{value:n})}function j3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gd(jo.empty(),Ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?oA:"mapValue"in n?tg(n)?{mapValue:{}}:xa:Ie(61959,{value:n})}function gE(n,e){const t=Ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pE(n,e){const t=Ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=zt.emptyPath(),r={},i=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}c?r[u.lastSegment()]=Ju(c):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ja(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new zn(Ju(this.value))}}function lA(n){const e=[];return ja(n.fields,((t,r)=>{const i=new zt([t]);if(qf(r)){const o=lA(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)})),new cr(e)}class Gt{constructor(e,t,r,i,o,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Gt(e,0,Me.min(),Me.min(),Me.min(),zn.empty(),0)}static newFoundDocument(e,t,r,i){return new Gt(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new Gt(e,2,t,Me.min(),Me.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Me.min(),Me.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function yE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(c.referenceValue),t.key):r=Ca(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _E(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hs(n.position[t],e.position[t]))return!1;return!0}class yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function L3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class cA{}class it extends cA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new V3(e,t,r):t==="array-contains"?new F3(e,r):t==="in"?new gA(e,r):t==="not-in"?new B3(e,r):t==="array-contains-any"?new q3(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new U3(e,r):new z3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&Na(this.value)===Na(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends cA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tt(e,t)}matches(e){return yc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yc(n){return n.op==="and"}function T0(n){return n.op==="or"}function x_(n){return uA(n)&&yc(n)}function uA(n){for(const e of n.filters)if(e instanceof Tt)return!1;return!0}function S0(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+gc(n.value);if(x_(n))return n.filters.map((e=>S0(e))).join(",");{const e=n.filters.map((t=>S0(t))).join(",");return`${n.op}(${e})`}}function dA(n,e){return n instanceof it?(function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Hs(r.value,i.value)})(n,e):n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,c,u)=>o&&dA(c,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function hA(n,e){const t=n.filters.concat(e);return Tt.create(t,n.op)}function fA(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${gc(t.value)}`})(n):n instanceof Tt?(function(t){return t.op.toString()+" {"+t.getFilters().map(fA).join(" ,")+"}"})(n):"Filter"}class V3 extends it{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class U3 extends it{constructor(e,t){super(e,"in",t),this.keys=mA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class z3 extends it{constructor(e,t){super(e,"not-in",t),this.keys=mA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mA(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class F3 extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pd(t)&&md(t.arrayValue,this.value)}}class gA extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&md(this.value.arrayValue,t)}}class B3 extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!md(this.value.arrayValue,t)}}class q3 extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>md(this.value.arrayValue,r)))}}class H3{constructor(e,t=null,r=[],i=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function A0(n,e=null,t=[],r=[],i=null,o=null,c=null){return new H3(n,e,t,r,i,o,c)}function Lo(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>S0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Wm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>gc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>gc(r))).join(",")),e.Te=t}return e.Te}function Ld(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_E(n.startAt,e.startAt)&&_E(n.endAt,e.endAt)}function ym(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function _m(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function vE(n,e,t){let r=Ff,i=!0;for(const o of _m(n,e)){let c=Ff,u=!0;switch(o.op){case"<":case"<=":c=P3(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Ff}gE({value:r,inclusive:i},{value:c,inclusive:u})<0&&(r=c,i=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];gE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function bE(n,e,t){let r=xa,i=!0;for(const o of _m(n,e)){let c=xa,u=!0;switch(o.op){case">=":case">":c=j3(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=xa}pE({value:r,inclusive:i},{value:c,inclusive:u})>0&&(r=c,i=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];pE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}class Ac{constructor(e,t=null,r=[],i=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $3(n,e,t,r,i,o,c,u){return new Ac(n,e,t,r,i,o,c,u)}function Vd(n){return new Ac(n)}function wE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pA(n){return n.collectionGroup!==null}function Zu(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new St(zt.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new yd(o,r))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new yd(zt.keyField(),r))}return e.Ie}function Gr(n){const e=Be(n);return e.Ee||(e.Ee=G3(e,Zu(n))),e.Ee}function G3(n,e){if(n.limitType==="F")return A0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new yd(i.field,o)}));const t=n.endAt?new pc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pc(n.startAt.position,n.startAt.inclusive):null;return A0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function R0(n,e){const t=n.filters.concat([e]);return new Ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vm(n,e,t){return new Ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ng(n,e){return Ld(Gr(n),Gr(e))&&n.limitType===e.limitType}function yA(n){return`${Lo(Gr(n))}|lt:${n.limitType}`}function Wl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>fA(i))).join(", ")}]`),Wm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>gc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>gc(i))).join(",")),`Target(${r})`})(Gr(n))}; limitType=${n.limitType})`}function Ud(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Zu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,u,h){const f=yE(c,u,h);return c.inclusive?f<=0:f<0})(r.startAt,Zu(r),i)||r.endAt&&!(function(c,u,h){const f=yE(c,u,h);return c.inclusive?f>=0:f>0})(r.endAt,Zu(r),i))})(n,e)}function K3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _A(n){return(e,t)=>{let r=!1;for(const i of Zu(n)){const o=Y3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Y3(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(o,c,u){const h=c.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ca(h,f):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return Z2(this.inner)}size(){return this.innerSize}}const Q3=new Ut(Ee.comparator);function Er(){return Q3}const vA=new Ut(Ee.comparator);function zu(...n){let e=vA;for(const t of n)e=e.insert(t.key,t);return e}function bA(n){let e=vA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function js(){return ed()}function wA(){return ed()}function ed(){return new Di((n=>n.toString()),((n,e)=>n.isEqual(e)))}const W3=new Ut(Ee.comparator),X3=new St(Ee.comparator);function We(...n){let e=X3;for(const t of n)e=e.add(t);return e}const J3=new St(Fe);function Z3(){return J3}function E_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function xA(n){return{integerValue:""+n}}function EA(n,e){return a3(e)?xA(e):E_(n,e)}class rg{constructor(){this._=void 0}}function eP(n,e,t){return n instanceof _c?(function(i,o){const c={fields:{[nA]:{stringValue:tA},[sA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&v_(o)&&(o=eg(o)),o&&(c.fields[rA]=o),{mapValue:c}})(t,e):n instanceof Vo?SA(n,e):n instanceof Uo?AA(n,e):(function(i,o){const c=TA(i,o),u=xE(c)+xE(i.Ae);return E0(c)&&E0(i.Ae)?xA(u):E_(i.serializer,u)})(n,e)}function tP(n,e,t){return n instanceof Vo?SA(n,e):n instanceof Uo?AA(n,e):t}function TA(n,e){return n instanceof vc?(function(r){return E0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class _c extends rg{}class Vo extends rg{constructor(e){super(),this.elements=e}}function SA(n,e){const t=RA(e);for(const r of n.elements)t.some((i=>Hs(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Uo extends rg{constructor(e){super(),this.elements=e}}function AA(n,e){let t=RA(e);for(const r of n.elements)t=t.filter((i=>!Hs(i,r)));return{arrayValue:{values:t}}}class vc extends rg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xE(n){return Vt(n.integerValue||n.doubleValue)}function RA(n){return pd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zd{constructor(e,t){this.field=e,this.transform=t}}function nP(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Vo&&i instanceof Vo||r instanceof Uo&&i instanceof Uo?cc(r.elements,i.elements,Hs):r instanceof vc&&i instanceof vc?Hs(r.Ae,i.Ae):r instanceof _c&&i instanceof _c})(n.transform,e.transform)}class rP{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sg{}function kA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ig(n.key,qn.none()):new Rc(n.key,n.data,qn.none());{const t=n.data,r=zn.empty();let i=new St(zt.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Oi(n.key,r,new cr(i.toArray()),qn.none())}}function sP(n,e,t){n instanceof Rc?(function(i,o,c){const u=i.value.clone(),h=TE(i.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Oi?(function(i,o,c){if(!Hf(i.precondition,o))return void o.convertToUnknownDocument(c.version);const u=TE(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(IA(i)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function td(n,e,t,r){return n instanceof Rc?(function(o,c,u,h){if(!Hf(o.precondition,c))return u;const f=o.value.clone(),g=SE(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Oi?(function(o,c,u,h){if(!Hf(o.precondition,c))return u;const f=SE(o.fieldTransforms,h,c),g=c.data;return g.setAll(IA(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,c,u){return Hf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,e,t)}function iP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=TA(r.transform,i||null);o!=null&&(t===null&&(t=zn.empty()),t.set(r.field,o))}return t||null}function EE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cc(r,i,((o,c)=>nP(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Rc extends sg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oi extends sg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function TE(n,e,t){const r=new Map;Ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,u=e.data.field(o.field);r.set(o.field,tP(c,u,t[i]))}return r}function SE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,eP(o,c,e))}return r}class ig extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NA extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&sP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wA();return this.mutations.forEach((i=>{const o=e.get(i.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(i.key)?null:u;const h=kA(c,u);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,((t,r)=>EE(t,r)))&&cc(this.baseMutations,e.baseMutations,((t,r)=>EE(t,r)))}}class S_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return W3})();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new S_(e,t,r,i)}}class A_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class aP{constructor(e,t){this.count=e,this.unchangedNames=t}}var un,lt;function oP(n){switch(n){case he.OK:return Ie(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function CA(n){if(n===void 0)return Xn("GRPC error has no .code"),he.UNKNOWN;switch(n){case un.OK:return he.OK;case un.CANCELLED:return he.CANCELLED;case un.UNKNOWN:return he.UNKNOWN;case un.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case un.INTERNAL:return he.INTERNAL;case un.UNAVAILABLE:return he.UNAVAILABLE;case un.UNAUTHENTICATED:return he.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case un.NOT_FOUND:return he.NOT_FOUND;case un.ALREADY_EXISTS:return he.ALREADY_EXISTS;case un.PERMISSION_DENIED:return he.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case un.ABORTED:return he.ABORTED;case un.OUT_OF_RANGE:return he.OUT_OF_RANGE;case un.UNIMPLEMENTED:return he.UNIMPLEMENTED;case un.DATA_LOSS:return he.DATA_LOSS;default:return Ie(39323,{code:n})}}(lt=un||(un={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";function lP(){return new TextEncoder}const cP=new Sa([4294967295,4294967295],0);function AE(n){const e=lP().encode(n),t=new k2;return t.update(e),new Uint8Array(t.digest())}function RE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sa([t,r],0),new Sa([i,o],0)]}class R_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fu(`Invalid padding: ${t}`);if(r<0)throw new Fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sa.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Sa.fromNumber(r)));return i.compare(cP)===1&&(i=new Sa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AE(e),[r,i]=RE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new R_(o,i,t);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=AE(e),[r,i]=RE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ag{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ag(Me.min(),i,new Ut(Fe),Er(),We())}}class Fd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fd(r,t,We(),We(),We())}}class $f{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class DA{constructor(e,t){this.targetId=e,this.Ce=t}}class OA{constructor(e,t,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kE{constructor(){this.ve=0,this.Fe=IE(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),r=We();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:o})}})),new Fd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=IE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Er(),this.Je=Ef(),this.He=Ef(),this.Ye=new Ut(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(ym(o))if(r===0){const c=new Ee(o.path);this.et(t,c,Gt.newNoDocument(c,Me.min()))}else Ce(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const u=this.ut(e),h=u?this.ct(u,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,u;try{c=Ii(r).toUint8Array()}catch(h){if(h instanceof eA)return Po("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new R_(c,i,o)}catch(h){return Po(h instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&ym(u.target)){const h=new Ee(u.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Gt.newNoDocument(h,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=We();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const i=new ag(e,t,this.Ye,this.je,r);return this.je=Er(),this.Je=Ef(),this.He=Ef(),this.Ye=new Ut(Fe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new kE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ef(){return new Ut(Ee.comparator)}function IE(){return new Ut(Ee.comparator)}const dP={asc:"ASCENDING",desc:"DESCENDING"},hP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fP={and:"AND",or:"OR"};class mP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function k0(n,e){return n.useProto3Json||Wm(e)?e:{value:e}}function bc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gP(n,e){return bc(n,e.toTimestamp())}function Zn(n){return Ce(!!n,49232),Me.fromTimestamp((function(t){const r=ki(t);return new Et(r.seconds,r.nanos)})(n))}function k_(n,e){return I0(n,e).canonicalString()}function I0(n,e){const t=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function PA(n){const e=yt.fromString(n);return Ce(HA(e),10190,{key:e.toString()}),e}function bm(n,e){return k_(n.databaseId,e.path)}function Ro(n,e){const t=PA(e);if(t.get(1)!==n.databaseId.projectId)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(VA(t))}function jA(n,e){return k_(n.databaseId,e)}function LA(n){const e=PA(n);return e.length===4?yt.emptyPath():VA(e)}function N0(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VA(n){return Ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NE(n,e,t){return{name:bm(n,e),fields:t.value.mapValue.fields}}function pP(n,e,t){const r=Ro(n,e.name),i=Zn(e.updateTime),o=e.createTime?Zn(e.createTime):Me.min(),c=new zn({mapValue:{fields:e.fields}}),u=Gt.newFoundDocument(r,i,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function yP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ie(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ce(g===void 0||typeof g=="string",58123),fn.fromBase64String(g||"")):(Ce(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),fn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?he.UNKNOWN:CA(f.code);return new be(g,f.message||"")})(c);t=new OA(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ro(n,r.document.name),o=Zn(r.document.updateTime),c=r.document.createTime?Zn(r.document.createTime):Me.min(),u=new zn({mapValue:{fields:r.document.fields}}),h=Gt.newFoundDocument(i,o,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new $f(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ro(n,r.document),o=r.readTime?Zn(r.readTime):Me.min(),c=Gt.newNoDocument(i,o),u=r.removedTargetIds||[];t=new $f([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ro(n,r.document),o=r.removedTargetIds||[];t=new $f([],o,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new aP(i,o),u=r.targetId;t=new DA(u,c)}}return t}function wm(n,e){let t;if(e instanceof Rc)t={update:NE(n,e.key,e.value)};else if(e instanceof ig)t={delete:bm(n,e.key)};else if(e instanceof Oi)t={update:NE(n,e.key,e.data),updateMask:EP(e.fieldMask)};else{if(!(e instanceof NA))return Ie(16599,{Vt:e.type});t={verify:bm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const u=c.transform;if(u instanceof _c)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vc)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:gP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(n,e.precondition)),t}function C0(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?qn.updateTime(Zn(o.updateTime)):o.exists!==void 0?qn.exists(o.exists):qn.none()})(e.currentDocument):qn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(c,u){let h=null;if("setToServerValue"in u)Ce(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new _c;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Vo(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Uo(g)}else"increment"in u?h=new vc(c,u.increment):Ie(16584,{proto:u});const f=zt.fromServerFormat(u.fieldPath);return new zd(f,h)})(n,i))):[];if(e.update){e.update.name;const i=Ro(n,e.update.name),o=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(h){const f=h.fieldPaths||[];return new cr(f.map((g=>zt.fromServerFormat(g))))})(e.updateMask);return new Oi(i,o,c,t,r)}return new Rc(i,o,t,r)}if(e.delete){const i=Ro(n,e.delete);return new ig(i,t)}if(e.verify){const i=Ro(n,e.verify);return new NA(i,t)}return Ie(1463,{proto:e})}function _P(n,e){return n&&n.length>0?(Ce(e!==void 0,14353),n.map((t=>(function(i,o){let c=i.updateTime?Zn(i.updateTime):Zn(o);return c.isEqual(Me.min())&&(c=Zn(o)),new rP(c,i.transformResults||[])})(t,e)))):[]}function UA(n,e){return{documents:[jA(n,e.path)]}}function zA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jA(n,i);const o=(function(f){if(f.length!==0)return qA(Tt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Xl(v.field),direction:bP(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=k0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function FA(n){let e=LA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=BA(y);return v instanceof Tt&&x_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(x){return new yd(Jl(x.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Wm(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(y){const v=!!y.before,w=y.values||[];return new pc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new pc(w,v)})(t.endAt)),$3(e,i,c,o,u,"F",h,f)}function vP(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jl(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jl(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jl(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Jl(t.unaryFilter.field);return it.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(Jl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Tt.create(t.compositeFilter.filters.map((r=>BA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function bP(n){return dP[n]}function wP(n){return hP[n]}function xP(n){return fP[n]}function Xl(n){return{fieldPath:n.canonicalString()}}function Jl(n){return zt.fromServerFormat(n.fieldPath)}function qA(n){return n instanceof it?(function(t){if(t.op==="=="){if(mE(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NAN"}};if(fE(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mE(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NAN"}};if(fE(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(t.field),op:wP(t.op),value:t.value}}})(n):n instanceof Tt?(function(t){const r=t.getFilters().map((i=>qA(i)));return r.length===1?r[0]:{compositeFilter:{op:xP(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function EP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function HA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class wi{constructor(e,t,r,i,o=Me.min(),c=Me.min(),u=fn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $A{constructor(e){this.yt=e}}function TP(n,e){let t;if(e.document)t=pP(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),i=Fo(e.noDocument.readTime);t=Gt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=Ee.fromSegments(e.unknownDocument.path),i=Fo(e.unknownDocument.version);t=Gt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const o=new Et(i[0],i[1]);return Me.fromTimestamp(o)})(e.readTime)),t}function CE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,c){return{name:bm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:bc(o,c.version.toTimestamp()),createTime:bc(o,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zo(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:zo(e.version)}}return r}function xm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fo(n){const e=new Et(n.seconds,n.nanoseconds);return Me.fromTimestamp(e)}function vo(n,e){const t=(e.baseMutations||[]).map((o=>C0(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>C0(n.yt,o))),i=Et.fromMillis(e.localWriteTimeMs);return new T_(e.batchId,i,t,r)}function Bu(n){const e=Fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fo(n.lastLimboFreeSnapshotVersion):Me.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Ce(c===1,1966,{count:c}),Gr(Vd(LA(o.documents[0])))})(n.query):(function(o){return Gr(FA(o))})(n.query),new wi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,fn.fromBase64String(n.resumeToken))}function GA(n,e){const t=zo(e.snapshotVersion),r=zo(e.lastLimboFreeSnapshotVersion);let i;i=ym(e.target)?UA(n.yt,e.target):zA(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KA(n){const e=FA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vm(e,e.limit,"L"):e}function qy(n,e){return new A_(e.largestBatchId,C0(n.yt,e.overlayMutation))}function DE(n,e){const t=e.path.lastSegment();return[n,Hn(e.path.popLast()),t]}function OE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:zo(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}class SP{getBundleMetadata(e,t){return ME(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Fo(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return ME(e).put((function(i){return{bundleId:i.id,createTime:zo(Zn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return PE(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:KA(o.bundledQuery),readTime:Fo(o.readTime)}})(r)}))}saveNamedQuery(e,t){return PE(e).put((function(i){return{name:i.name,readTime:zo(Zn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function ME(n){return yn(n,Xm)}function PE(n){return yn(n,Jm)}class og{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new og(e,r)}getOverlay(e,t){return Du(e).get(DE(this.userId,t)).next((r=>r?qy(this.serializer,r):null))}getOverlays(e,t){const r=js();return ie.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((o,c)=>{const u=new A_(t,c);i.push(this.St(e,u))})),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((c=>i.add(Hn(c.getCollectionPath()))));const o=[];return i.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Du(e).Z(b0,u))})),ie.waitFor(o)}getOverlaysForCollection(e,t,r){const i=js(),o=Hn(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Du(e).J(b0,c).next((u=>{for(const h of u){const f=qy(this.serializer,h);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const o=js();let c;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Du(e).ee({index:Y2,range:u},((h,f,g)=>{const y=qy(this.serializer,f);o.size()<i||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Du(e).put((function(i,o,c){const[u,h,f]=DE(o,c.mutation.key);return{userId:o,collectionPath:h,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wm(i.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Du(n){return yn(n,Zm)}class AP{bt(e){return yn(e,y_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?fn.fromUint8Array(r):fn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class bo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const r=Vt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),cd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ki(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ii(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?aA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=mc,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Vt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}bo.Kt=new bo;const Hl=255;function RP(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function jE(n){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const c=RP(255&r[o]);if(i+=c,c!==8)break}return i})(n);return Math.ceil(e/8)}class kP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=jE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=jE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Hl),this.sn(255)}_n(){this.an(Hl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Hl?(this.sn(Hl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Hl?(this.an(Hl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class IP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class NP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ou{constructor(){this.cn=new kP,this.ln=new IP(this.cn),this.hn=new NP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class wo{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new wo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Gf(this.En),directionalValue:Gf(this.dn),orderedDocumentKey:Gf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function fa(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=LE(n.En,e.En),t!==0?t:(t=LE(n.dn,e.dn),t!==0?t:Ee.comparator(n.In,e.In)))}function LE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Gf(n){return US()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function VE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class UE{constructor(e){this.mn=new St(((t,r)=>zt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=y0(e);if(t!==void 0&&!this.wn(t))return!1;const r=po(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=r[o];if(!this.Sn(u,h)||!this.bn(this.fn[c++],h))return!1}++o}for(;o<r.length;++o){const u=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(zt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Vf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vf(r.field,r.dir==="asc"?0:1)));return new hm(hm.UNKNOWN_ID,this.collectionId,t,ld.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function YA(n){if(Ce(n instanceof it||n instanceof Tt,20012),n instanceof it){if(n instanceof gA){const t=n.value.arrayValue?.values?.map((r=>it.create(n.field,"==",r)))||[];return Tt.create(t,"or")}return n}const e=n.filters.map((t=>YA(t)));return Tt.create(e,n.op)}function CP(n){if(n.getFilters().length===0)return[];const e=M0(YA(n));return Ce(QA(e),7391),D0(e)||O0(e)?[e]:e.getFilters()}function D0(n){return n instanceof it}function O0(n){return n instanceof Tt&&x_(n)}function QA(n){return D0(n)||O0(n)||(function(t){if(t instanceof Tt&&T0(t)){for(const r of t.getFilters())if(!D0(r)&&!O0(r))return!1;return!0}return!1})(n)}function M0(n){if(Ce(n instanceof it||n instanceof Tt,34018),n instanceof it)return n;if(n.filters.length===1)return M0(n.filters[0]);const e=n.filters.map((r=>M0(r)));let t=Tt.create(e,n.op);return t=Em(t),QA(t)?t:(Ce(t instanceof Tt,64498),Ce(yc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((r,i)=>I_(r,i))))}function I_(n,e){let t;return Ce(n instanceof it||n instanceof Tt,38388),Ce(e instanceof it||e instanceof Tt,25473),t=n instanceof it?e instanceof it?(function(i,o){return Tt.create([i,o],"and")})(n,e):zE(n,e):e instanceof it?zE(e,n):(function(i,o){if(Ce(i.filters.length>0&&o.filters.length>0,48005),yc(i)&&yc(o))return hA(i,o.getFilters());const c=T0(i)?i:o,u=T0(i)?o:i,h=c.filters.map((f=>I_(f,u)));return Tt.create(h,"or")})(n,e),Em(t)}function zE(n,e){if(yc(e))return hA(e,n.getFilters());{const t=e.filters.map((r=>I_(n,r)));return Tt.create(t,"or")}}function Em(n){if(Ce(n instanceof it||n instanceof Tt,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return Em(e[0]);if(uA(n))return n;const t=e.map((i=>Em(i))),r=[];return t.forEach((i=>{i instanceof it?r.push(i):i instanceof Tt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Tt.create(r,n.op)}class DP{constructor(){this.Cn=new N_}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Tr.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class N_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new St(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(yt.comparator)).toArray()}}const FE="IndexedDbIndexManager",Tf=new Uint8Array(0);class OP{constructor(e,t){this.databaseId=t,this.vn=new N_,this.Fn=new Di((r=>Lo(r)),((r,i)=>Ld(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:Hn(i)};return BE(e).put(o)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[j2(t),""],!1,!0);return BE(e).J(i).next((o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Ps(c.parent))}return r}))}addFieldIndex(e,t){const r=Mu(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=Gl(e);return o.next((u=>{c.put(OE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Mu(e),i=Gl(e),o=$l(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Mu(e),r=$l(e),i=Gl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ie.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new UE(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=$l(e);let i=!0;const o=new Map;return ie.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{i&&(i=!!u),o.set(c,u)})))).next((()=>{if(i){let c=We();const u=[];return ie.forEach(o,((h,f)=>{ve(FE,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(h)} to execute ${Lo(t)}`);const g=(function(B,H){const Y=y0(H);if(Y===void 0)return null;for(const U of _m(B,Y.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(f,h),y=(function(B,H){const Y=new Map;for(const U of po(H))for(const I of _m(B,U.fieldPath))switch(I.op){case"==":case"in":Y.set(U.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Y.set(U.fieldPath.canonicalString(),I.value),Array.from(Y.values())}return null})(f,h),v=(function(B,H){const Y=[];let U=!0;for(const I of po(H)){const T=I.kind===0?vE(B,I.fieldPath,B.startAt):bE(B,I.fieldPath,B.startAt);Y.push(T.value),U&&(U=T.inclusive)}return new pc(Y,U)})(f,h),w=(function(B,H){const Y=[];let U=!0;for(const I of po(H)){const T=I.kind===0?bE(B,I.fieldPath,B.endAt):vE(B,I.fieldPath,B.endAt);Y.push(T.value),U&&(U=T.inclusive)}return new pc(Y,U)})(f,h),x=this.On(h,f,v),N=this.On(h,f,w),M=this.Nn(h,f,y),L=this.Bn(h.indexId,g,x,v.inclusive,N,w.inclusive,M);return ie.forEach(L,(F=>r.Y(F,t.limit).next((B=>{B.forEach((H=>{const Y=Ee.fromSegments(H.documentKey);c.has(Y)||(c=c.add(Y),u.push(Y))}))}))))})).next((()=>u))}return ie.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=CP(Tt.create(e.filters,"and")).map((r=>A0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,u){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),f=h/(t!=null?t.length:1),g=[];for(let y=0;y<h;++y){const v=t?this.Ln(t[y/f]):Tf,w=this.kn(e,v,r[y%f],i),x=this.qn(e,v,o[y%f],c),N=u.map((M=>this.kn(e,v,M,!0)));g.push(...this.createRange(w,x,N))}return g}kn(e,t,r,i){const o=new wo(e,Ee.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new wo(e,Ee.empty(),t,r);return i?o.An():o}xn(e,t){const r=new UE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let c=null;for(const u of o)r.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ie.forEach(i,(o=>this.xn(e,o).next((c=>{c?r!==0&&c.fields.length<(function(h){let f=new St(zt.comparator),g=!1;for(const y of h.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of h.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Ou;for(const i of po(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);bo.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Ou;return bo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Ou;return bo.Kt.Dt(gd(this.databaseId,t),r.Pn((function(o){const c=po(o);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Ou);let o=0;for(const c of po(e)){const u=r[o++];for(const h of i)if(this.Un(t,c.fieldPath)&&pd(u))i=this.Kn(i,c,u);else{const f=h.Pn(c.kind);bo.Kt.Dt(u,f)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const u of i){const h=new Ou;h.seed(u.un()),bo.Kt.Dt(c,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Mu(e),i=Gl(e);return(t?r.J(v0,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const c=[];return ie.forEach(o,(u=>i.get([u.indexId,this.uid]).next((h=>{c.push((function(g,y){const v=y?new ld(y.sequenceNumber,new Tr(Fo(y.readTime),new Ee(Ps(y.documentKey)),y.largestBatchId)):ld.empty(),w=g.fields.map((([x,N])=>new Vf(zt.fromServerFormat(x),N)));return new hm(g.indexId,g.collectionGroup,w,v)})(u,h))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Fe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Mu(e),o=Gl(e);return this.Gn(e).next((c=>i.J(v0,IDBKeyRange.bound(t,t)).next((u=>ie.forEach(u,(h=>o.put(OE(h.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,((i,o)=>{const c=r.get(i.collectionGroup);return(c?ie.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),ie.forEach(u,(h=>this.zn(e,i,h).next((f=>{const g=this.jn(o,h);return f.isEqual(g)?ie.resolve():this.Jn(e,o,h,f,g)})))))))}))}Hn(e,t,r,i){return $l(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return $l(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=$l(e);let o=new St(fa);return i.ee({index:K2,range:IDBKeyRange.only([r.indexId,this.uid,Gf(this.$n(r,t))])},((c,u)=>{o=o.add(new wo(r.indexId,t,VE(u.arrayValue),VE(u.directionalValue)))})).next((()=>o))}jn(e,t){let r=new St(fa);const i=this.Qn(t,e);if(i==null)return r;const o=y0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(pd(c))for(const u of c.arrayValue.values||[])r=r.add(new wo(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new wo(t.indexId,e.key,Tf,i));return r}Jn(e,t,r,i,o){ve(FE,"Updating index entries for document '%s'",t.key);const c=[];return(function(h,f,g,y,v){const w=h.getIterator(),x=f.getIterator();let N=ql(w),M=ql(x);for(;N||M;){let L=!1,F=!1;if(N&&M){const B=g(N,M);B<0?F=!0:B>0&&(L=!0)}else N!=null?F=!0:L=!0;L?(y(M),M=ql(x)):F?(v(N),N=ql(w)):(N=ql(w),M=ql(x))}})(i,o,fa,(u=>{c.push(this.Hn(e,t,r,u))}),(u=>{c.push(this.Yn(e,t,r,u))})),ie.waitFor(c)}Gn(e){let t=1;return Gl(e).ee({index:G2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,u)=>fa(c,u))).filter(((c,u,h)=>!u||fa(c,h[u-1])!==0));const i=[];i.push(e);for(const c of r){const u=fa(c,e),h=fa(c,t);if(u===0)i[0]=e.An();else if(u>0&&h<0)i.push(c),i.push(c.An());else if(h>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const u=i[c].Vn(this.uid,Tf,Ee.empty()),h=i[c+1].Vn(this.uid,Tf,Ee.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return fa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qE)}getMinOffset(e,t){return ie.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(qE)}}function BE(n){return yn(n,hd)}function $l(n){return yn(n,Xu)}function Mu(n){return yn(n,p_)}function Gl(n){return yn(n,Wu)}function qE(n){Ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;f_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Tr(e.readTime,e.documentKey,t)}const HE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WA=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function XA(n,e,t){const r=n.store(as),i=n.store(uc),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const h=r.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(h.next((()=>{Ce(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=q2(e,g.key.path,t.batchId);o.push(i.delete(y)),f.push(g.key)}return ie.waitFor(o).next((()=>f))}function Tm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(WA,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class lg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ce(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new lg(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).ee({index:Eo,range:r},((i,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const o=Zl(e),c=ma(e);return c.add({}).next((u=>{Ce(typeof u=="number",49019);const h=new T_(u,t,r,i),f=(function(w,x,N){const M=N.baseMutations.map((F=>wm(w.yt,F))),L=N.mutations.map((F=>wm(w.yt,F)));return{userId:x,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:M,mutations:L}})(this.serializer,this.userId,h),g=[];let y=new St(((v,w)=>Fe(v.canonicalString(),w.canonicalString())));for(const v of i){const w=q2(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,c3))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),ie.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return ma(e).get(t).next((r=>r?(Ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),vo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ie.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ma(e).ee({index:Eo,range:i},((c,u,h)=>{u.userId===this.userId&&(Ce(u.batchId>=r,47524,{tr:r}),o=vo(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=So;return ma(e).ee({index:Eo,range:t,reverse:!0},((i,o,c)=>{r=o.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,So],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).J(Eo,t).next((r=>r.map((i=>vo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Uf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Zl(e).ee({range:i},((c,u,h)=>{const[f,g,y]=c,v=Ps(g);if(f===this.userId&&t.path.isEqual(v))return ma(e).get(y).next((w=>{if(!w)throw Ie(61480,{nr:c,batchId:y});Ce(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(vo(this.serializer,w))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new St(Fe);const i=[];return t.forEach((o=>{const c=Uf(this.userId,o.path),u=IDBKeyRange.lowerBound(c),h=Zl(e).ee({range:u},((f,g,y)=>{const[v,w,x]=f,N=Ps(w);v===this.userId&&o.path.isEqual(N)?r=r.add(x):y.done()}));i.push(h)})),ie.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Uf(this.userId,r),c=IDBKeyRange.lowerBound(o);let u=new St(Fe);return Zl(e).ee({range:c},((h,f,g)=>{const[y,v,w]=h,x=Ps(v);y===this.userId&&r.isPrefixOf(x)?x.length===i&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((o=>{i.push(ma(e).get(o).next((c=>{if(c===null)throw Ie(35274,{batchId:o});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(vo(this.serializer,c))})))})),ie.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return XA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),i=[];return Zl(e).ee({range:r},((o,c,u)=>{if(o[0]===this.userId){const h=Ps(o[1]);i.push(h)}else u.done()})).next((()=>{Ce(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return JA(e,this.userId,t)}_r(e){return ZA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:So,lastStreamToken:""}))}}function JA(n,e,t){const r=Uf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return Zl(n).ee({range:o,X:!0},((u,h,f)=>{const[g,y,v]=u;g===e&&y===i&&(c=!0),f.done()})).next((()=>c))}function ma(n){return yn(n,as)}function Zl(n){return yn(n,uc)}function ZA(n){return yn(n,ud)}class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}class MP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Bo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Me.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Kl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ce(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const o=[];return Kl(e).ee(((c,u)=>{const h=Bu(u);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>ie.waitFor(o))).next((()=>i))}forEachTarget(e,t){return Kl(e).ee(((r,i)=>{const o=Bu(i);t(o)}))}lr(e){return $E(e).get(gm).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return $E(e).put(gm,t)}Pr(e,t){return Kl(e).put(GA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Lo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Kl(e).ee({range:i,index:$2},((c,u,h)=>{const f=Bu(u);Ld(t,f.target)&&(o=f,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const i=[],o=wa(e);return t.forEach((c=>{const u=Hn(c.path);i.push(o.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,c))})),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=wa(e);return ie.forEach(t,(o=>{const c=Hn(o.path);return ie.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=wa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wa(e);let o=We();return i.ee({range:r,X:!0},((c,u,h)=>{const f=Ps(c[1]),g=new Ee(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const r=Hn(t.path),i=IDBKeyRange.bound([r],[j2(r)],!1,!0);let o=0;return wa(e).ee({index:g_,X:!0,range:i},(([c,u],h,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Kl(e).get(t).next((r=>r?Bu(r):null))}}function Kl(n){return yn(n,dc)}function $E(n){return yn(n,Ao)}function wa(n){return yn(n,hc)}const GE="LruGarbageCollector",PP=1048576;function KE([n,e],[t,r]){const i=Fe(n,t);return i===0?Fe(e,r):i}class jP{constructor(e){this.Ir=e,this.buffer=new St(KE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(GE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?ve(GE,"Ignoring IndexedDB error during garbage collection: ",t):await Qo(t)}await this.Vr(3e5)}))}}class LP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Hr.ce);const r=new jP(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(HE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Ql()<=st.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y}))))}}function tR(n,e){return new LP(n,e)}class VP{constructor(e,t){this.db=e,this.garbageCollector=tR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Sf(e,r)}removeReference(e,t,r){return Sf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sf(e,t)}br(e,t){return(function(i,o){let c=!1;return ZA(i).te((u=>JA(i,u,o).next((h=>(h&&(c=!0),ie.resolve(!h)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const h=this.br(e,c).next((f=>{if(!f)return o++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Me.min()),wa(e).delete((function(y){return[0,Hn(y.path)]})(c)))))}));i.push(h)}})).next((()=>ie.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sf(e,t)}Sr(e,t){const r=wa(e);let i,o=Hr.ce;return r.ee({index:g_},(([c,u],{path:h,sequenceNumber:f})=>{c===0?(o!==Hr.ce&&t(new Ee(Ps(i)),o),o=f,i=h):o=Hr.ce})).next((()=>{o!==Hr.ce&&t(new Ee(Ps(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sf(n,e){return wa(n).put((function(r,i){return{targetId:0,path:Hn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class nR{constructor(){this.changes=new Di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mo(e).put(r)}removeEntry(e,t,r){return mo(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],xm(c),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Gt.newInvalidDocument(t);return mo(e).ee({index:zf,range:IDBKeyRange.only(Pu(t))},((i,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:Gt.newInvalidDocument(t)};return mo(e).ee({index:zf,range:IDBKeyRange.only(Pu(t))},((i,o)=>{r={document:this.Cr(t,o),size:Tm(o)}})).next((()=>r))}getEntries(e,t){let r=Er();return this.Fr(e,t,((i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)})).next((()=>r))}Mr(e,t){let r=Er(),i=new Ut(Ee.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);r=r.insert(o,u),i=i.insert(o,Tm(c))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ie.resolve();let i=new St(WE);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(Pu(i.first()),Pu(i.last())),c=i.getIterator();let u=c.getNext();return mo(e).ee({index:zf,range:o},((h,f,g)=>{const y=Ee.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&WE(u,y)<0;)r(u,null),u=c.getNext();u&&u.isEqual(y)&&(r(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Pu(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),xm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).J(IDBKeyRange.bound(u,h,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=Er();for(const y of f){const v=this.Cr(Ee.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Ud(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,r,i){let o=Er();const c=QE(t,r),u=QE(t,Tr.max());return mo(e).ee({index:H2,range:IDBKeyRange.bound(c,u,!0)},((h,f,g)=>{const y=this.Cr(Ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===i&&g.done()})).next((()=>o))}newChangeBuffer(e){return new zP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return YE(e).get(_0).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return YE(e).put(_0,t)}Cr(e,t){if(t){const r=TP(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Me.min())))return r}return Gt.newInvalidDocument(e)}}function rR(n){return new UP(n)}class zP extends nR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Di((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new St(((o,c)=>Fe(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const h=CE(this.Nr.serializer,c);i=i.add(o.path.popLast());const f=Tm(h);r+=f-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(r-=u.size,this.trackRemovals){const h=CE(this.Nr.serializer,c.convertToNoDocument(Me.min()));t.push(this.Nr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})})),r)))}}function YE(n){return yn(n,dd)}function mo(n){return yn(n,mm)}function Pu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QE(n,e){const t=e.documentKey.path.toArray();return[n,xm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Fe(t[o],r[o]),i)return i;return i=Fe(t.length,r.length),i||(i=Fe(t[t.length-2],r[r.length-2]),i||Fe(t[t.length-1],r[r.length-1]))}class FP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&td(r.mutation,i,cr.empty(),Et.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,We()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=We()){const i=js();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let c=zu();return o.forEach(((u,h)=>{c=c.insert(u,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=js();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,We())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,r,i){let o=Er();const c=ed(),u=(function(){return ed()})();return t.forEach(((h,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Oi)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),td(g.mutation,f,g.mutation.getFieldMask(),Et.now())):c.set(f.key,cr.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new FP(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=ed();let i=new Ut(((c,u)=>c-u)),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||cr.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(i.get(u.batchId)||We()).add(h);i=i.insert(u.batchId,y)}))})).next((()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=wA();g.forEach((v=>{if(!o.has(v)){const w=kA(t.get(v),r.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ie.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(js());let u=od,h=o;return c.next((f=>ie.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?ie.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{h=h.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,We()))).next((g=>({batchId:u,changes:bA(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((r=>{let i=zu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=zu();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(h=>{const f=(function(y,v){return new Ac(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Gt.newInvalidDocument(g)))}));let u=zu();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&td(g.mutation,f,cr.empty(),Et.now()),Ud(t,f)&&(u=u.insert(h,f))})),u}))}}class BP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:KA(i.bundledQuery),readTime:Zn(i.readTime)}})(t)),ie.resolve()}}class qP{constructor(){this.overlays=new Ut(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=js();return ie.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=js(),o=t.length+1,c=new Ee(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ut(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=js(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=js(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=i)););return ie.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new A_(t,r));let o=this.qr.get(t);o===void 0&&(o=We(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class HP{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class C_{constructor(){this.Qr=new St(xn.$r),this.Ur=new St(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ee(new yt([])),r=new xn(t,e),i=new xn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new yt([])),r=new xn(t,e),i=new xn(t,e+1);let o=We();return this.Ur.forEachInRange([r,i],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new xn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class $P{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(xn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new T_(o,t,r,i);this.mutationQueue.push(c);for(const u of i)this.Zr=this.Zr.add(new xn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?So:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),i=new xn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(c=>{const u=this.Xr(c.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new St(Fe);return t.forEach((i=>{const o=new xn(i,0),c=new xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ee.isDocumentKey(o)||(o=o.child(""));const c=new xn(new Ee(o),0);let u=new St(Fe);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Yr)),!0)}),c),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(i=>{const o=new xn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xn(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GP{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=Er();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gt.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Er();const c=t.path,u=new Ee(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||f_(U2(g),r)<=0||(i.has(g.key)||Ud(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KP(this)}getSize(e){return ie.resolve(this.size)}}class KP extends nR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class YP{constructor(e){this.persistence=e,this.si=new Di((t=>Lo(t)),Ld),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new C_,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ie.waitFor(o).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((c=>{o.push(i.markPotentiallyOrphaned(e,c))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class D_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hr(0),this.li=!1,this.li=!0,this.hi=new HP,this.referenceDelegate=e(this),this.Pi=new YP(this),this.indexManager=new DP,this.remoteDocumentCache=(function(i){return new GP(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $A(t),this.Ii=new BP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $P(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new QP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class QP extends F2{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new C_,this.Vi=null}static mi(e){return new cg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=Ee.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sm{constructor(e,t){this.persistence=e,this.pi=new Di((r=>Hn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=tR(this,t)}static mi(e,t){return new Sm(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?ie.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((u=>{u||(r++,o.removeEntry(c,Me.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bf(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class WP{constructor(e){this.serializer=e}k(e,t,r,i){const o=new Qm("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore(jd)})(e),(function(h){h.createObjectStore(ud,{keyPath:l3}),h.createObjectStore(as,{keyPath:oE,autoIncrement:!0}).createIndex(Eo,lE,{unique:!0}),h.createObjectStore(uc)})(e),XE(e),(function(h){h.createObjectStore(yo)})(e));let c=ie.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore(hc),h.deleteObjectStore(dc),h.deleteObjectStore(Ao)})(e),XE(e)),c=c.next((()=>(function(h){const f=h.store(Ao),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return f.put(gm,g)})(o)))),r<4&&i>=4&&(r!==0&&(c=c.next((()=>(function(h,f){return f.store(as).J().next((y=>{h.deleteObjectStore(as),h.createObjectStore(as,{keyPath:oE,autoIncrement:!0}).createIndex(Eo,lE,{unique:!0});const v=f.store(as),w=y.map((x=>v.put(x)));return ie.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(h){h.createObjectStore(fc,{keyPath:y3})})(e)}))),r<5&&i>=5&&(c=c.next((()=>this.yi(o)))),r<6&&i>=6&&(c=c.next((()=>((function(h){h.createObjectStore(dd)})(e),this.wi(o))))),r<7&&i>=7&&(c=c.next((()=>this.Si(o)))),r<8&&i>=8&&(c=c.next((()=>this.bi(e,o)))),r<9&&i>=9&&(c=c.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(c=c.next((()=>this.Di(o)))),r<11&&i>=11&&(c=c.next((()=>{(function(h){h.createObjectStore(Xm,{keyPath:_3})})(e),(function(h){h.createObjectStore(Jm,{keyPath:v3})})(e)}))),r<12&&i>=12&&(c=c.next((()=>{(function(h){const f=h.createObjectStore(Zm,{keyPath:A3});f.createIndex(b0,R3,{unique:!1}),f.createIndex(Y2,k3,{unique:!1})})(e)}))),r<13&&i>=13&&(c=c.next((()=>(function(h){const f=h.createObjectStore(mm,{keyPath:u3});f.createIndex(zf,d3),f.createIndex(H2,h3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(yo)))),r<14&&i>=14&&(c=c.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(c=c.next((()=>(function(h){h.createObjectStore(p_,{keyPath:b3,autoIncrement:!0}).createIndex(v0,w3,{unique:!1}),h.createObjectStore(Wu,{keyPath:x3}).createIndex(G2,E3,{unique:!1}),h.createObjectStore(Xu,{keyPath:T3}).createIndex(K2,S3,{unique:!1})})(e)))),r<16&&i>=16&&(c=c.next((()=>{t.objectStore(Wu).clear()})).next((()=>{t.objectStore(Xu).clear()}))),r<17&&i>=17&&(c=c.next((()=>{(function(h){h.createObjectStore(y_,{keyPath:I3})})(e)}))),r<18&&i>=18&&US()&&(c=c.next((()=>{t.objectStore(Wu).clear()})).next((()=>{t.objectStore(Xu).clear()}))),c}wi(e){let t=0;return e.store(yo).ee(((r,i)=>{t+=Tm(i)})).next((()=>{const r={byteSize:t};return e.store(dd).put(_0,r)}))}yi(e){const t=e.store(ud),r=e.store(as);return t.J().next((i=>ie.forEach(i,(o=>{const c=IDBKeyRange.bound([o.userId,So],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Eo,c).next((u=>ie.forEach(u,(h=>{Ce(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=vo(this.serializer,h);return XA(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(hc),r=e.store(yo);return e.store(Ao).get(gm).next((i=>{const o=[];return r.ee(((c,u)=>{const h=new yt(c),f=(function(y){return[0,Hn(y)]})(h);o.push(t.get(f).next((g=>g?ie.resolve():(y=>t.put({targetId:0,path:Hn(y),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>ie.waitFor(o)))}))}bi(e,t){e.createObjectStore(hd,{keyPath:p3});const r=t.store(hd),i=new N_,o=c=>{if(i.add(c)){const u=c.lastSegment(),h=c.popLast();return r.put({collectionId:u,parent:Hn(h)})}};return t.store(yo).ee({X:!0},((c,u)=>{const h=new yt(c);return o(h.popLast())})).next((()=>t.store(uc).ee({X:!0},(([c,u,h],f)=>{const g=Ps(u);return o(g.popLast())}))))}Di(e){const t=e.store(dc);return t.ee(((r,i)=>{const o=Bu(i),c=GA(this.serializer,o);return t.put(c)}))}Ci(e,t){const r=t.store(yo),i=[];return r.ee(((o,c)=>{const u=t.store(mm),h=(function(y){return y.document?new Ee(yt.fromString(y.document.name).popFirst(5)):y.noDocument?Ee.fromSegments(y.noDocument.path):y.unknownDocument?Ee.fromSegments(y.unknownDocument.path):Ie(36783)})(c).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(u.put(f))})).next((()=>ie.waitFor(i)))}Fi(e,t){const r=t.store(as),i=rR(this.serializer),o=new D_(cg.mi,this.serializer.yt);return r.J().next((c=>{const u=new Map;return c.forEach((h=>{let f=u.get(h.userId)??We();vo(this.serializer,h).keys().forEach((g=>f=f.add(g))),u.set(h.userId,f)})),ie.forEach(u,((h,f)=>{const g=new Dn(f),y=og.wt(this.serializer,g),v=o.getIndexManager(g),w=lg.wt(g,this.serializer,v,o.referenceDelegate);return new sR(i,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new w0(t,Hr.ce),h).next()}))}))}}function XE(n){n.createObjectStore(hc,{keyPath:m3}).createIndex(g_,g3,{unique:!0}),n.createObjectStore(dc,{keyPath:"targetId"}).createIndex($2,f3,{unique:!0}),n.createObjectStore(Ao)}const ga="IndexedDbPersistence",Hy=18e5,$y=5e3,Gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XP="main";class O_{constructor(e,t,r,i,o,c,u,h,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!O_.v())throw new be(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VP(this,i),this.$i=t+XP,this.serializer=new $A(h),this.Ui=new Aa(this.$i,this.Ni,new WP(this.serializer)),this.hi=new AP,this.Pi=new MP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rR(this.serializer),this.Ii=new SP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Xn(ga,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(he.FAILED_PRECONDITION,Gy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Hr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Af(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Pa(e))return ve(ga,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve(ga,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return ju(e).get(Bl).next((t=>ie.resolve(this.es(t))))}ts(e){return Af(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Hy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=yn(t,fc);return r.J().next((i=>{const o=this.ss(i,Hy),c=i.filter((u=>o.indexOf(u)===-1));return ie.forEach(c,(u=>r.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ie.resolve(!0):ju(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,$y)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new be(he.FAILED_PRECONDITION,Gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Af(e).J().next((r=>this.ss(r,$y).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ve(ga,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[jd,fc],(e=>{const t=new w0(e,Hr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Af(e).J().next((t=>this.ss(t,Hy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return lg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return og.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ve(ga,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?D3:h===17?J2:h===16?C3:h===15?__:h===14?X2:h===13?W2:h===12?N3:h===11?Q2:void Ie(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,i,o,(u=>(c=new w0(u,this.ci?this.ci.next():Hr.ce),t==="readwrite-primary"?this.Hi(c).next((h=>!!h||this.Yi(c))).next((h=>{if(!h)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new be(he.FAILED_PRECONDITION,z2);return r(c)})).next((h=>this.Xi(c).next((()=>h)))):this.Is(c).next((()=>r(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return ju(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,$y)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(he.FAILED_PRECONDITION,Gy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ju(e).put(Bl,t)}static v(){return Aa.v()}Zi(e){const t=ju(e);return t.get(Bl).next((r=>this.es(r)?(ve(ga,"Releasing primary lease."),t.delete(Bl)):ie.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Xn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;VS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ve(ga,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Xn(ga,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ju(n){return yn(n,jd)}function Af(n){return yn(n,fc)}function JP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class M_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=We(),i=We();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new M_(e,t.fromCache,r,i)}}class ZP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VS()?8:B2(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new ZP;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ql()<=st.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Ql()<=st.DEBUG&&ve("QueryEngine","Query:",Wl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ql()<=st.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):ie.resolve())}ys(e,t){if(wE(t))return ie.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=vm(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=We(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,u);return this.Cs(t,f,c,h.readTime)?this.ys(e,vm(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return wE(t)||i.isEqual(Me.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?ie.resolve(null):(Ql()<=st.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wl(t)),this.vs(e,c,t,t3(i,od)).next((u=>u)))}))}Ds(e,t){let r=new St(_A(e));return t.forEach(((i,o)=>{Ud(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ql()<=st.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Wl(t)),this.ps.getDocumentsMatchingQuery(e,t,Tr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const P_="LocalStore",e6=3e8;class t6{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ut(Fe),this.xs=new Di((o=>Lo(o)),Ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function aR(n,e,t,r){return new t6(n,e,t,r)}async function oR(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],u=[];let h=We();for(const f of i){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function n6(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,g){const y=f.batch,v=y.keys();let w=ie.resolve();return v.forEach((x=>{w=w.next((()=>g.getEntry(h,x))).next((N=>{const M=f.docVersions.get(x);Ce(M!==null,48541),N.version.compareTo(M)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=We();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function lR(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function r6(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=i.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(fn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(y,w),(function(N,M,L){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=e6?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let h=Er(),f=We();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(s6(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!r.isEqual(Me.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return ie.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function s6(n,e,t){let r=We(),i=We();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=Er();return t.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Me.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):ve(P_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:i}}))}function i6(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=So),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function a6(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,ie.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new wi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function P0(n,e,t){const r=Be(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Pa(c))throw c;ve(P_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function JE(n,e,t){const r=Be(n);let i=Me.min(),o=We();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const y=Be(h),v=y.xs.get(g);return v!==void 0?ie.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(r,c,Gr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,u.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:Me.min(),t?o:We()))).next((u=>(o6(r,K3(e),u),{documents:u,Qs:o})))))}function o6(n,e,t){let r=n.Os.get(e)||Me.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class ZE{constructor(){this.activeTargetIds=Z3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cR{constructor(){this.Mo=new ZE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ZE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class l6{Oo(e){}shutdown(){}}const eT="ConnectivityMonitor";class tT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(eT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(eT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Rf=null;function j0(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}const Ky="RestConnection",c6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===pm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=j0(),u=this.zo(e,t.toUriEncodedString());ve(Ky,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:f}=new URL(u),g=Go(f);return this.Jo(e,u,h,r,g).then((y=>(ve(Ky,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Po(Ky,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=c6[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class d6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Vn="WebChannelConnection";class h6 extends u6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=j0();return new Promise(((u,h)=>{const f=new I2;f.setWithCredentials(!0),f.listenOnce(N2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Lf.NO_ERROR:const y=f.getResponseJson();ve(Vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Lf.TIMEOUT:ve(Vn,`RPC '${e}' ${c} timed out`),h(new be(he.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const v=f.getStatus();if(ve(Vn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w?.error;if(x&&x.status&&x.message){const N=(function(L){const F=L.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(F)>=0?F:he.UNKNOWN})(x.status);h(new be(N,x.message))}else h(new be(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(he.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ve(Vn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(i);ve(Vn,`RPC '${e}' ${c} sending request:`,i),f.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=j0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=O2(),u=D2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");ve(Vn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const y=c.createWebChannel(g,h);this.I_(y);let v=!1,w=!1;const x=new d6({Yo:M=>{w?ve(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(ve(Vn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),ve(Vn,`RPC '${e}' stream ${i} sending:`,M),y.send(M))},Zo:()=>y.close()}),N=(M,L,F)=>{M.listen(L,(B=>{try{F(B)}catch(H){setTimeout((()=>{throw H}),0)}}))};return N(y,Uu.EventType.OPEN,(()=>{w||(ve(Vn,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),N(y,Uu.EventType.CLOSE,(()=>{w||(w=!0,ve(Vn,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(y))})),N(y,Uu.EventType.ERROR,(M=>{w||(w=!0,Po(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),x.a_(new be(he.UNAVAILABLE,"The operation could not be completed")))})),N(y,Uu.EventType.MESSAGE,(M=>{if(!w){const L=M.data[0];Ce(!!L,16349);const F=L,B=F?.error||F[0]?.error;if(B){ve(Vn,`RPC '${e}' stream ${i} received error:`,B);const H=B.status;let Y=(function(T){const E=un[T];if(E!==void 0)return CA(E)})(H),U=B.message;Y===void 0&&(Y=he.INTERNAL,U="Unknown error status: "+H+" with message "+B.message),w=!0,x.a_(new be(Y,U)),y.close()}else ve(Vn,`RPC '${e}' stream ${i} received:`,L),x.u_(L)}})),N(u,C2.STAT_EVENT,(M=>{M.stat===g0.PROXY?ve(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===g0.NOPROXY&&ve(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function f6(){return typeof window<"u"?window:null}function Kf(){return typeof document<"u"?document:null}function ug(n){return new mP(n,!0)}class uR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const nT="PersistentStream";class dR{constructor(e,t,r,i,o,c,u,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new be(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(nT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(nT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class m6 extends dR{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yP(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Me.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Me.min():c.readTime?Zn(c.readTime):Me.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=N0(this.serializer),t.addTarget=(function(o,c){let u;const h=c.target;if(u=ym(h)?{documents:UA(o,h)}:{query:zA(o,h).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=MA(o,c.resumeToken);const f=k0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Me.min())>0){u.readTime=bc(o,c.snapshotVersion.toTimestamp());const f=k0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=vP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=N0(this.serializer),t.removeTarget=e,this.q_(t)}}class g6 extends dR{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_P(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=N0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>wm(this.serializer,r)))};this.q_(t)}}class p6{}class y6 extends p6{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,I0(t,r),i,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(he.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,I0(t,r),i,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(he.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xn(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qo="RemoteStore";class v6{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Wo(this)&&(ve(qo,"Restarting streams for network reachability change."),await(async function(h){const f=Be(h);f.Ea.add(4),await Bd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await dg(f)})(this))}))})),this.Ra=new _6(r,i)}}async function dg(n){if(Wo(n))for(const e of n.da)await e(!0)}async function Bd(n){for(const e of n.da)await e(!1)}function hR(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?V_(t):kc(t).O_()&&L_(t,e))}function j_(n,e){const t=Be(n),r=kc(t);t.Ia.delete(e),r.O_()&&fR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Wo(t)&&t.Ra.set("Unknown"))}function L_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kc(n).Y_(e)}function fR(n,e){n.Va.Ue(e),kc(n).Z_(e)}function V_(n){n.Va=new uP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),kc(n).start(),n.Ra.ua()}function U_(n){return Wo(n)&&!kc(n).x_()&&n.Ia.size>0}function Wo(n){return Be(n).Ea.size===0}function mR(n){n.Va=void 0}async function b6(n){n.Ra.set("Online")}async function w6(n){n.Ia.forEach(((e,t)=>{L_(n,e)}))}async function x6(n,e){mR(n),U_(n)?(n.Ra.ha(e),V_(n)):n.Ra.set("Unknown")}async function E6(n,e,t){if(n.Ra.set("Online"),e instanceof OA&&e.state===2&&e.cause)try{await(async function(i,o){const c=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){ve(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Am(n,r)}else if(e instanceof $f?n.Va.Ze(e):e instanceof DA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const r=await lR(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),u.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(fn.EMPTY_BYTE_STRING,g.snapshotVersion)),fR(o,h);const y=new wi(g.target,h,f,g.sequenceNumber);L_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ve(qo,"Failed to raise snapshot:",r),await Am(n,r)}}async function Am(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await Bd(n),n.Ra.set("Offline"),t||(t=()=>lR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await dg(n)}))}function gR(n,e){return e().catch((t=>Am(n,t,e)))}async function qd(n){const e=Be(n),t=Da(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:So;for(;T6(e);)try{const i=await i6(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,S6(e,i)}catch(i){await Am(e,i)}pR(e)&&yR(e)}function T6(n){return Wo(n)&&n.Ta.length<10}function S6(n,e){n.Ta.push(e);const t=Da(n);t.O_()&&t.X_&&t.ea(e.mutations)}function pR(n){return Wo(n)&&!Da(n).x_()&&n.Ta.length>0}function yR(n){Da(n).start()}async function A6(n){Da(n).ra()}async function R6(n){const e=Da(n);for(const t of n.Ta)e.ea(t.mutations)}async function k6(n,e,t){const r=n.Ta.shift(),i=S_.from(r,e,t);await gR(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await qd(n)}async function I6(n,e){e&&Da(n).X_&&await(async function(r,i){if((function(c){return oP(c)&&c!==he.ABORTED})(i.code)){const o=r.Ta.shift();Da(r).B_(),await gR(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await qd(r)}})(n,e),pR(n)&&yR(n)}async function rT(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),ve(qo,"RemoteStore received new credentials");const r=Wo(t);t.Ea.add(3),await Bd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await dg(t)}async function N6(n,e){const t=Be(n);e?(t.Ea.delete(2),await dg(t)):e||(t.Ea.add(2),await Bd(t),t.Ra.set("Unknown"))}function kc(n){return n.ma||(n.ma=(function(t,r,i){const o=Be(t);return o.sa(),new m6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:b6.bind(null,n),t_:w6.bind(null,n),r_:x6.bind(null,n),H_:E6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),U_(n)?V_(n):n.Ra.set("Unknown")):(await n.ma.stop(),mR(n))}))),n.ma}function Da(n){return n.fa||(n.fa=(function(t,r,i){const o=Be(t);return o.sa(),new g6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:A6.bind(null,n),r_:I6.bind(null,n),ta:R6.bind(null,n),na:k6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await qd(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class z_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,u=new z_(e,t,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),Pa(n))return new be(he.UNAVAILABLE,`${e}: ${n}`);throw n}class ic{static emptySet(e){return new ic(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ic)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ic;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sT{constructor(){this.ga=new Ut(Ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class wc{constructor(e,t,r,i,o,c,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new wc(e,t,ic.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class C6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class D6{constructor(){this.queries=iT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Be(t),o=i.queries;i.queries=iT(),o.forEach(((c,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new be(he.ABORTED,"Firestore shutting down"))}}function iT(){return new Di((n=>yA(n)),ng)}async function B_(n,e){const t=Be(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new C6,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const u=F_(c,`Initialization of query '${Wl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&H_(t)}async function q_(n,e){const t=Be(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function O6(n,e){const t=Be(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(i)&&(r=!0);c.wa=i}}r&&H_(t)}function M6(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function H_(n){n.Ca.forEach((e=>{e.next()}))}var L0,aT;(aT=L0||(L0={})).Ma="default",aT.Cache="cache";class $_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==L0.Cache}}class _R{constructor(e){this.key=e}}class vR{constructor(e){this.key=e}}class P6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=_A(e),this.tu=new ic(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new sT,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,y)=>{const v=i.get(g),w=Ud(this.query,y)?y:null,x=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?x!==N&&(r.track({type:3,doc:w}),M=!0):this.su(v,w)||(r.track({type:2,doc:w}),M=!0,(h&&this.eu(w,h)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(r.track({type:0,doc:w}),M=!0):v&&!w&&(r.track({type:1,doc:v}),M=!0,(h||f)&&(u=!0)),M&&(w?(c=c.add(w),o=N?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,x){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:M})}};return N(w)-N(x)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new wc(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new vR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new _R(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const G_="SyncEngine";class j6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class L6{constructor(e){this.key=e,this.hu=!1}}class V6{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Di((u=>yA(u)),ng),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Ee.comparator),this.Au=new Map,this.Ru=new C_,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U6(n,e,t=!0){const r=SR(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await bR(r,e,t,!0),i}async function z6(n,e){const t=SR(n);await bR(t,e,!0,!1)}async function bR(n,e,t,r){const i=await a6(n.localStore,Gr(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await F6(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&hR(n.remoteStore,i),u}async function F6(n,e,t,r,i){n.pu=(y,v,w)=>(async function(N,M,L,F){let B=M.view.ru(L);B.Cs&&(B=await JE(N.localStore,M.query,!1).then((({documents:I})=>M.view.ru(I,B))));const H=F&&F.targetChanges.get(M.targetId),Y=F&&F.targetMismatches.get(M.targetId)!=null,U=M.view.applyChanges(B,N.isPrimaryClient,H,Y);return lT(N,M.targetId,U.au),U.snapshot})(n,y,v,w);const o=await JE(n.localStore,e,!0),c=new P6(e,o.Qs),u=c.ru(o.documents),h=Fd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(u,n.isPrimaryClient,h);lT(n,t,f.au);const g=new j6(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function B6(n,e,t){const r=Be(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((c=>!ng(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await P0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&j_(r.remoteStore,i.targetId),V0(r,i.targetId)})).catch(Qo)):(V0(r,i.targetId),await P0(r.localStore,i.targetId,!0))}async function q6(n,e){const t=Be(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),j_(t.remoteStore,r.targetId))}async function H6(n,e,t){const r=AR(n);try{const i=await(function(c,u){const h=Be(c),f=Et.now(),g=u.reduce(((w,x)=>w.add(x.key)),We());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let x=Er(),N=We();return h.Ns.getEntries(w,g).next((M=>{x=M,x.forEach(((L,F)=>{F.isValidDocument()||(N=N.add(L))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,x))).next((M=>{y=M;const L=[];for(const F of u){const B=iP(F,y.get(F.key).overlayedDocument);B!=null&&L.push(new Oi(F.key,B,lA(B.value.mapValue),qn.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,L,u)})).next((M=>{v=M;const L=M.applyToLocalDocumentSet(y,N);return h.documentOverlayCache.saveOverlays(w,M.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:bA(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,u,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Ut(Fe)),f=f.insert(u,h),c.Vu[c.currentUser.toKey()]=f})(r,i.batchId,t),await Hd(r,i.changes),await qd(r.remoteStore)}catch(i){const o=F_(i,"Failed to persist write");t.reject(o)}}async function wR(n,e){const t=Be(n);try{const r=await r6(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const c=t.Au.get(o);c&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Ce(c.hu,14607):i.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await Hd(t,r,e)}catch(r){await Qo(r)}}function oT(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(c,u){const h=Be(c);h.onlineState=u;let f=!1;h.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&H_(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $6(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new Ut(Ee.comparator);c=c.insert(o,Gt.newNoDocument(o,Me.min()));const u=We().add(o),h=new ag(Me.min(),new Map,new Ut(Fe),c,u);await wR(r,h),r.du=r.du.remove(o),r.Au.delete(e),K_(r)}else await P0(r.localStore,e,!1).then((()=>V0(r,e,t))).catch(Qo)}async function G6(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await n6(t.localStore,e);ER(t,r,null),xR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hd(t,i)}catch(i){await Qo(i)}}async function K6(n,e,t){const r=Be(n);try{const i=await(function(c,u){const h=Be(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ce(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);ER(r,e,t),xR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hd(r,i)}catch(i){await Qo(i)}}function xR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ER(n,e,t){const r=Be(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function V0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||TR(n,r)}))}function TR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(j_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),K_(n))}function lT(n,e,t){for(const r of t)r instanceof _R?(n.Ru.addReference(r.key,e),Y6(n,r)):r instanceof vR?(ve(G_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||TR(n,r.key)):Ie(19791,{wu:r})}function Y6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ve(G_,"New document in limbo: "+t),n.Eu.add(r),K_(n))}function K_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(yt.fromString(e)),r=n.fu.next();n.Au.set(r,new L6(t)),n.du=n.du.insert(t,r),hR(n.remoteStore,new wi(Gr(Vd(t.path)),r,"TargetPurposeLimboResolution",Hr.ce))}}async function Hd(n,e,t){const r=Be(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){i.push(f);const g=M_.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(h,f){const g=Be(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ie.forEach(f,(v=>ie.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>ie.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Pa(y))throw y;ve(P_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),x=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(x);g.Ms=g.Ms.insert(v,N)}}})(r.localStore,o))}async function Q6(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){ve(G_,"User change. New user:",e.toKey());const r=await oR(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new be(he.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hd(t,r.Ls)}}function W6(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const u=t.Tu.get(c);i=i.unionWith(u.view.nu)}return i}}function SR(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$6.bind(null,e),e.Pu.H_=O6.bind(null,e.eventManager),e.Pu.yu=M6.bind(null,e.eventManager),e}function AR(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K6.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ug(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return aR(this.persistence,new iR,e.initialUser,this.serializer)}Cu(e){return new D_(cg.mi,this.serializer)}Du(e){return new cR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class X6 extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Sm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new D_((r=>Sm.mi(r,t)),this.serializer)}}class J6 extends _d{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await AR(this.xu.syncEngine),await qd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return aR(this.persistence,new iR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new eR(r,e.asyncQueue,t)}Mu(e,t){const r=new i3(t,this.persistence);return new s3(e.asyncQueue,r)}Cu(e){const t=JP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new O_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,f6(),Kf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new cR}}class Rm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q6.bind(null,this.syncEngine),await N6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new D6})()}createDatastore(e){const t=ug(e.databaseInfo.databaseId),r=(function(o){return new h6(o)})(e.databaseInfo);return(function(o,c,u,h){return new y6(o,c,u,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,c,u){return new v6(r,i,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>oT(this.syncEngine,t,0)),(function(){return tT.v()?new tT:new l6})())}createSyncEngine(e,t){return(function(i,o,c,u,h,f,g){const y=new V6(i,o,c,u,h,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);ve(qo,"RemoteStore shutting down."),r.Ea.add(5),await Bd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rm.provider={build:()=>new Rm};class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Oa="FirestoreClient";class Z6{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=h_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{ve(Oa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ve(Oa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=F_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yy(n,e){n.asyncQueue.verifyOperationInProgress(),ve(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await oR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ej(n);ve(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>rT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>rT(e.remoteStore,i))),n._onlineComponents=e}async function ej(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(Oa,"Using user provided OfflineComponentProvider");try{await Yy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Yy(n,new _d)}}else ve(Oa,"Using default OfflineComponentProvider"),await Yy(n,new X6(void 0));return n._offlineComponents}async function RR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(Oa,"Using user provided OnlineComponentProvider"),await cT(n,n._uninitializedComponentsProvider._online)):(ve(Oa,"Using default OnlineComponentProvider"),await cT(n,new Rm))),n._onlineComponents}function tj(n){return RR(n).then((e=>e.syncEngine))}async function km(n){const e=await RR(n),t=e.eventManager;return t.onListen=U6.bind(null,e.syncEngine),t.onUnlisten=B6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=q6.bind(null,e.syncEngine),t}function nj(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new Y_({next:v=>{g.Nu(),c.enqueueAndForget((()=>q_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(he.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new be(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new $_(Vd(u.path),g,{includeMetadataChanges:!0,qa:!0});return B_(o,y)})(await km(n),n.asyncQueue,e,t,r))),r.promise}function rj(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new Y_({next:v=>{g.Nu(),c.enqueueAndForget((()=>q_(o,y))),v.fromCache&&h.source==="server"?f.reject(new be(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new $_(u,g,{includeMetadataChanges:!0,qa:!0});return B_(o,y)})(await km(n),n.asyncQueue,e,t,r))),r.promise}function kR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const uT=new Map;const IR="firestore.googleapis.com",dT=!0;class hT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IR,this.ssl=dT}else this.host=e.host,this.ssl=e.ssl??dT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PP)throw new be(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qM;switch(r.type){case"firstParty":return new KM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=uT.get(t);r&&(ve("ComponentProvider","Removing Datastore"),uT.delete(t),r.terminate())})(this),Promise.resolve()}}function sj(n,e,t,r={}){n=Jn(n,hg);const i=Go(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(J0(`https://${u}`),Z0("Firestore",!0)),o.host!==IR&&o.host!==u&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:r};if(!Si(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Dn.MOCK_USER;else{f=jS(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new be(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Dn(y)}n._authCredentials=new HM(new P2(f,g))}}class Mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Pd(t,Kt._jsonSchema))return new Kt(e,r||null,new Ee(yt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:hn("string",Kt._jsonSchemaVersion),referencePath:hn("string")};class Ra extends Mi{constructor(e,t,r){super(e,t,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ee(e))}withConverter(e){return new Ra(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=en(n),L2("collection","path",e),n instanceof hg){const r=yt.fromString(e,...t);return nE(r),new Ra(n,null,r)}{if(!(n instanceof Kt||n instanceof Ra))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return nE(r),new Ra(n.firestore,null,r)}}function Ve(n,e,...t){if(n=en(n),arguments.length===1&&(e=h_.newId()),L2("doc","path",e),n instanceof hg){const r=yt.fromString(e,...t);return tE(r),new Kt(n,null,new Ee(r))}{if(!(n instanceof Kt||n instanceof Ra))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return tE(r),new Kt(n.firestore,n instanceof Ra?n.converter:null,new Ee(r))}}const fT="AsyncQueue";class mT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uR(this,"async_queue_retry"),this._c=()=>{const r=Kf();r&&ve(fT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;ve(fT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Xn("INTERNAL UNHANDLED ERROR: ",gT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=z_.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:gT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function pT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class $s extends hg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mT(e),this._firestoreClient=void 0,await e}}}function ij(n,e){const t=typeof n=="object"?n:n_(),r=typeof n=="string"?n:pm,i=Hm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=OS("firestore");o&&sj(i,...o)}return i}function fg(n){if(n._terminated)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||NR(n),n._firestoreClient}function NR(n){const e=n._freezeSettings(),t=(function(i,o,c,u){return new M3(i,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kR(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Z6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}function aj(n,e){Po("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return oj(n,Rm.provider,{build:r=>new J6(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function oj(n,e,t){if((n=Jn(n,$s))._firestoreClient||n._terminated)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new be(he.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},NR(n)}class qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qr(fn.fromBase64String(e))}catch(t){throw new be(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pd(e,qr._jsonSchema))return qr.fromBase64String(e.bytes)}}qr._jsonSchemaVersion="firestore/bytes/1.0",qr._jsonSchema={type:hn("string",qr._jsonSchemaVersion),bytes:hn("string")};class mg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xo{constructor(e){this._methodName=e}}class Fs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(e){if(Pd(e,Fs._jsonSchema))return new Fs(e.latitude,e.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:hn("string",Fs._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};class Bs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pd(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bs(e.vectorValues);throw new be(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:hn("string",Bs._jsonSchemaVersion),vectorValues:hn("object")};const lj=/^__.*__$/;class cj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class CR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class gg{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Im(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(DR(this.Ac)&&lj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ug(e)}Cc(e,t,r,i=!1){return new gg({Ac:e,methodName:t,Dc:r,path:zt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pg(n){const e=n._freezeSettings(),t=ug(n._databaseId);return new uj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OR(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Z_("Data must be an object, but it was:",c,r);const u=PR(r,c);let h,f;if(o.merge)h=new cr(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=U0(e,y,t);if(!c.contains(v))throw new be(he.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);LR(g,v)||g.push(v)}h=new cr(g),f=c.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=c.fieldTransforms;return new cj(new zn(u),h,f)}class yg extends Xo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yg}}function MR(n,e,t){return new gg({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Q_ extends Xo{_toFieldTransform(e){return new zd(e.path,new _c)}isEqual(e){return e instanceof Q_}}class W_ extends Xo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=MR(this,e,!0),r=this.vc.map((o=>Jo(o,t))),i=new Vo(r);return new zd(e.path,i)}isEqual(e){return e instanceof W_&&Si(this.vc,e.vc)}}class X_ extends Xo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=MR(this,e,!0),r=this.vc.map((o=>Jo(o,t))),i=new Uo(r);return new zd(e.path,i)}isEqual(e){return e instanceof X_&&Si(this.vc,e.vc)}}class J_ extends Xo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new vc(e.serializer,EA(e.serializer,this.Fc));return new zd(e.path,t)}isEqual(e){return e instanceof J_&&this.Fc===e.Fc}}function dj(n,e,t,r){const i=n.Cc(1,e,t);Z_("Data must be an object, but it was:",i,r);const o=[],c=zn.empty();ja(r,((h,f)=>{const g=ev(e,h,t);f=en(f);const y=i.yc(g);if(f instanceof yg)o.push(g);else{const v=Jo(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new cr(o);return new CR(c,u,i.fieldTransforms)}function hj(n,e,t,r,i,o){const c=n.Cc(1,e,t),u=[U0(e,r,t)],h=[i];if(o.length%2!=0)throw new be(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(U0(e,o[v])),h.push(o[v+1]);const f=[],g=zn.empty();for(let v=u.length-1;v>=0;--v)if(!LR(f,u[v])){const w=u[v];let x=h[v];x=en(x);const N=c.yc(w);if(x instanceof yg)f.push(w);else{const M=Jo(x,N);M!=null&&(f.push(w),g.set(w,M))}}const y=new cr(f);return new CR(g,y,c.fieldTransforms)}function fj(n,e,t,r=!1){return Jo(t,n.Cc(r?4:3,e))}function Jo(n,e){if(jR(n=en(n)))return Z_("Unsupported field value:",e,n),PR(n,e);if(n instanceof Xo)return(function(r,i){if(!DR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let c=0;for(const u of r){let h=Jo(u,i.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Et.fromDate(r);return{timestampValue:bc(i.serializer,o)}}if(r instanceof Et){const o=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bc(i.serializer,o)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qr)return{bytesValue:MA(i.serializer,r._byteString)};if(r instanceof Kt){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:k_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bs)return(function(c,u){return{mapValue:{fields:{[b_]:{stringValue:w_},[mc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return E_(u.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Ym(r)}`)})(n,e)}function PR(n,e){const t={};return Z2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(n,((r,i)=>{const o=Jo(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function jR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Fs||n instanceof qr||n instanceof Kt||n instanceof Xo||n instanceof Bs)}function Z_(n,e,t){if(!jR(t)||!V2(t)){const r=Ym(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function U0(n,e,t){if((e=en(e))instanceof mg)return e._internalPath;if(typeof e=="string")return ev(n,e);throw Im("Field path arguments must be of type string or ",n,!1,void 0,t)}const mj=new RegExp("[~\\*/\\[\\]]");function ev(n,e,t){if(e.search(mj)>=0)throw Im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mg(...e.split("."))._internalPath}catch{throw Im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Im(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new be(he.INVALID_ARGUMENT,u+n+h)}function LR(n,e){return n.some((t=>t.isEqual(e)))}class VR{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_g("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gj extends VR{data(){return super.data()}}function _g(n,e){return typeof e=="string"?ev(n,e):e instanceof mg?e._internalPath:e._delegate._internalPath}function UR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class nv extends tv{}function Sr(n,e,...t){let r=[];e instanceof tv&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((h=>h instanceof rv)).length,u=o.filter((h=>h instanceof vg)).length;if(c>1||c>0&&u>0)throw new be(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class vg extends nv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vg(e,t,r)}_apply(e){const t=this._parse(e);return zR(e._query,t),new Mi(e.firestore,e.converter,R0(e._query,t))}_parse(e){const t=pg(e.firestore);return(function(o,c,u,h,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){_T(y,g);const x=[];for(const N of y)x.push(yT(h,o,N));v={arrayValue:{values:x}}}else v=yT(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||_T(y,g),v=fj(u,c,y,g==="in"||g==="not-in");return it.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function La(n,e,t){const r=e,i=_g("where",n);return vg._create(i,r,t)}class rv extends tv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let c=i;const u=o.getFlattenedFilters();for(const h of u)zR(c,h),c=R0(c,h)})(e._query,t),new Mi(e.firestore,e.converter,R0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sv extends nv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sv(e,t)}_apply(e){const t=(function(i,o,c){if(i.startAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yd(o,c)})(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,(function(i,o){const c=i.explicitOrderBy.concat([o]);return new Ac(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function bg(n,e="asc"){const t=e,r=_g("orderBy",n);return sv._create(r,t)}class iv extends nv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new iv(e,t,r)}_apply(e){return new Mi(e.firestore,e.converter,vm(e._query,this._limit,this._limitType))}}function Nm(n){return e3("limit",n),iv._create("limit",n,"F")}function yT(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new be(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pA(e)&&t.indexOf("/")!==-1)throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yt.fromString(t));if(!Ee.isDocumentKey(r))throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gd(n,new Ee(r))}if(t instanceof Kt)return gd(n,t._key);throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ym(t)}.`)}function _T(n,e){if(!Array.isArray(n)||n.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(n,e){const t=(function(i,o){for(const c of i)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pj{convertValue(e,t="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ja(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[mc].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new Bs(t)}convertGeoPoint(e){return new Fs(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=eg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fd(e));default:return null}}convertTimestamp(e){const t=ki(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);Ce(HA(r),9688,{name:e});const i=new jo(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return i.isEqual(t)||Xn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function FR(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ko extends VR{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ko._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",ko._jsonSchema={type:hn("string",ko._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Yf extends ko{data(e={}){return super.data(e)}}class Io{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Yf(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((u=>{const h=new Yf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new Yf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:yj(u.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function $n(n){n=Jn(n,Kt);const e=Jn(n.firestore,$s);return nj(fg(e),n._key).then((t=>BR(e,n,t)))}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:hn("string",Io._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class av extends pj{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function Ni(n){n=Jn(n,Mi);const e=Jn(n.firestore,$s),t=fg(e),r=new av(e);return UR(n._query),rj(t,n._query).then((i=>new Io(e,r,n,i)))}function Gs(n,e,t){n=Jn(n,Kt);const r=Jn(n.firestore,$s),i=FR(n.converter,e,t);return wg(r,[OR(pg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qn.none())])}function Mn(n,e,t,...r){n=Jn(n,Kt);const i=Jn(n.firestore,$s),o=pg(i);let c;return c=typeof(e=en(e))=="string"||e instanceof mg?hj(o,"updateDoc",n._key,e,t,r):dj(o,"updateDoc",n._key,e),wg(i,[c.toMutation(n._key,qn.exists(!0))])}function Ks(n){return wg(Jn(n.firestore,$s),[new ig(n._key,qn.none())])}function $d(n,e){const t=Jn(n.firestore,$s),r=Ve(n),i=FR(n.converter,e);return wg(t,[OR(pg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then((()=>r))}function qs(n,...e){n=en(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pT(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pT(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,c,u;if(n instanceof Kt)c=Jn(n.firestore,$s),u=Vd(n._key.path),o={next:h=>{e[r]&&e[r](BR(c,n,h))},error:e[r+1],complete:e[r+2]};else{const h=Jn(n,Mi);c=Jn(h.firestore,$s),u=h._query;const f=new av(c);o={next:g=>{e[r]&&e[r](new Io(c,f,h,g))},error:e[r+1],complete:e[r+2]},UR(n._query)}return(function(f,g,y,v){const w=new Y_(v),x=new $_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>B_(await km(f),x))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>q_(await km(f),x)))}})(fg(c),u,i,o)}function wg(n,e){return(function(r,i){const o=new zs;return r.asyncQueue.enqueueAndForget((async()=>H6(await tj(r),i,o))),o.promise})(fg(n),e)}function BR(n,e,t){const r=t.docs.get(e._key),i=new av(n);return new ko(n,i,e._key,r,new qu(t.hasPendingWrites,t.fromCache),e.converter)}function En(){return new Q_("serverTimestamp")}function ov(...n){return new W_("arrayUnion",n)}function qR(...n){return new X_("arrayRemove",n)}function Cm(n){return new J_("increment",n)}(function(e,t=!0){(function(i){Sc=i})(Ko),Co(new Ia("firestore",((r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new $s(new $M(r.getProvider("auth-internal")),new YM(c,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(f.options.projectId,g)})(c,i),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Ls(Xx,Jx,e),Ls(Xx,Jx,"esm2020")})();const HR="firebasestorage.googleapis.com",_j="storageBucket",vj=120*1e3,bj=600*1e3;class Xs extends Qs{constructor(e,t,r=0){super(Qy(e),`Firebase Storage: ${t} (${Qy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ys;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ys||(Ys={}));function Qy(n){return"storage/"+n}function wj(){const n="An unknown error occurred, please check the error payload for server response.";return new Xs(Ys.UNKNOWN,n)}function xj(){return new Xs(Ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ej(){return new Xs(Ys.CANCELED,"User canceled the upload/download.")}function Tj(n){return new Xs(Ys.INVALID_URL,"Invalid URL '"+n+"'.")}function Sj(n){return new Xs(Ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vT(n){return new Xs(Ys.INVALID_ARGUMENT,n)}function $R(){return new Xs(Ys.APP_DELETED,"The Firebase app was deleted.")}function Aj(n){return new Xs(Ys.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(r.path==="")return r;throw Sj(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${i}/o${v}`,"i"),x={bucket:1,path:3},N=t===HR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",L=new RegExp(`^https?://${N}/${i}/${M}`,"i"),B=[{regex:u,indices:h,postModify:o},{regex:w,indices:x,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<B.length;H++){const Y=B[H],U=Y.regex.exec(e);if(U){const I=U[Y.indices.bucket];let T=U[Y.indices.path];T||(T=""),r=new ls(I,T),Y.postModify(r);break}}if(r==null)throw Tj(e);return r}}class Rj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kj(n,e,t){let r=1,i=null,o=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...M){f||(f=!0,e.apply(null,M))}function y(M){i=setTimeout(()=>{i=null,n(w,h())},M)}function v(){o&&clearTimeout(o)}function w(M,...L){if(f){v();return}if(M){v(),g.call(null,M,...L);return}if(h()||c){v(),g.call(null,M,...L);return}r<64&&(r*=2);let B;u===1?(u=2,B=0):B=(r+Math.random())*1e3,y(B)}let x=!1;function N(M){x||(x=!0,v(),!f&&(i!==null?(M||(u=2),clearTimeout(i),y(0)):M||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,N(!0)},t),N}function Ij(n){n(!1)}function Nj(n){return n!==void 0}function bT(n,e,t,r){if(r<e)throw vT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw vT(`Invalid value for '${n}'. Expected ${t} or less.`)}function Cj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Dm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Dm||(Dm={}));function Dj(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}class Oj{constructor(e,t,r,i,o,c,u,h,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new kf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Dm.NO_ERROR,h=o.getStatus();if(!u||Dj(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Dm.ABORT;r(!1,new kf(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new kf(f,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());Nj(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=wj();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(i.canceled){const h=this.appDelete_?$R():Ej();c(h)}else{const h=xj();c(h)}};this.canceled_?t(!1,new kf(!1,null,!0)):this.backoffId_=kj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ij(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Mj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Pj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Lj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Vj(n,e,t,r,i,o,c=!0,u=!1){const h=Cj(n.urlParams),f=n.url+h,g=Object.assign({},n.headers);return jj(g,e),Mj(g,t),Pj(g,o),Lj(g,r),new Oj(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,u)}function Uj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function zj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Om{constructor(e,t){this._service=e,t instanceof ls?this._location=t:this._location=ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Om(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zj(this._location.path)}get storage(){return this._service}get parent(){const e=Uj(this._location.path);if(e===null)return null;const t=new ls(this._location.bucket,e);return new Om(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Aj(e)}}function wT(n,e){const t=e?.[_j];return t==null?null:ls.makeFromBucketSpec(t,n)}function Fj(n,e,t,r={}){n.host=`${e}:${t}`;const i=Go(e);i&&(J0(`https://${n.host}/b`),Z0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:jS(o,n.app.options.projectId))}class Bj{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=HR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vj,this._maxUploadRetryTime=bj,this._requests=new Set,i!=null?this._bucket=ls.makeFromBucketSpec(i,this._host):this._bucket=wT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ls.makeFromBucketSpec(this._url,e):this._bucket=wT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Om(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Rj($R());{const c=Vj(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const xT="@firebase/storage",ET="0.14.0";const GR="storage";function qj(n=n_(),e){n=en(n);const r=Hm(n,GR).getImmediate({identifier:e}),i=OS("storage");return i&&Hj(r,...i),r}function Hj(n,e,t,r={}){Fj(n,e,t,r)}function $j(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Bj(t,r,i,e,Ko)}function Gj(){Co(new Ia(GR,$j,"PUBLIC").setMultipleInstances(!0)),Ls(xT,ET,""),Ls(xT,ET,"esm2020")}Gj();const Kj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},lv=qS(Kj),Fn=FM(lv),Ae=ij(lv);qj(lv);new _i;try{aj(Ae).catch(n=>{n.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):n.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const KR=z.createContext();function kr(){return z.useContext(KR)}function Yj({children:n}){const[e,t]=z.useState(null),[r,i]=z.useState(!0);z.useEffect(()=>{const h=NO(Fn,async f=>{if(f){t(y=>({...y,...f}));const g=Ve(Ae,"users",f.uid);onSnapshot(g,async y=>{if(y.exists())t(v=>({...v,...v?.reloadUserInfo,...f,...y.data()}));else{console.warn("User document missing. Creating active sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await Gs(g,v,{merge:!0})}catch(w){console.error("Failed to auto-create user doc:",w)}}},y=>{console.error("Real-time profile sync error:",y)})}else t(null);i(!1)});return()=>{h()}},[]);const u={currentUser:e,loading:r,logout:async()=>{await Fn.signOut(),t(null)},refreshUser:async()=>{if(Fn.currentUser){await Fn.currentUser.reload();const h=Fn.currentUser;let f={};try{const g=await $n(Ve(Ae,"users",h.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...h,...f})}}};return _.jsx(KR.Provider,{value:u,children:!r&&n})}const Qj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),TT=n=>{const e=Wj(n);return e.charAt(0).toUpperCase()+e.slice(1)},YR=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Xj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Zj=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...u},h)=>z.createElement("svg",{ref:h,...Jj,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:YR("lucide",i),...!o&&!Xj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>z.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Oe=(n,e)=>{const t=z.forwardRef(({className:r,...i},o)=>z.createElement(Zj,{ref:o,iconNode:e,className:YR(`lucide-${Qj(TT(n))}`,`lucide-${n}`,r),...i}));return t.displayName=TT(n),t};const eL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],cv=Oe("activity",eL);const tL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],z0=Oe("arrow-left",tL);const nL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],uv=Oe("arrow-right",nL);const rL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],F0=Oe("bell",rL);const sL=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],iL=Oe("brain",sL);const aL=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],oL=Oe("bug",aL);const lL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ac=Oe("camera",lL);const cL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uL=Oe("check",cL);const dL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dv=Oe("chevron-down",dL);const hL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],QR=Oe("circle-alert",hL);const fL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xg=Oe("circle-check-big",fL);const mL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gL=Oe("circle-check",mL);const pL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Eg=Oe("clock",pL);const yL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_L=Oe("file-text",yL);const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],B0=Oe("globe",vL);const bL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],WR=Oe("heart",bL);const wL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],XR=Oe("house",wL);const xL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],JR=Oe("image",xL);const EL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ZR=Oe("info",EL);const TL=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],ek=Oe("leaf",TL);const SL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],AL=Oe("lightbulb",SL);const RL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$r=Oe("loader-circle",RL);const kL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],IL=Oe("lock",kL);const NL=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ST=Oe("log-in",NL);const CL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DL=Oe("log-out",CL);const OL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tk=Oe("mail",OL);const ML=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],vd=Oe("message-circle",ML);const PL=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],jL=Oe("mic",PL);const LL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],VL=Oe("moon",LL);const UL=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],AT=Oe("paperclip",UL);const zL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],FL=Oe("pause",zL);const BL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nk=Oe("pen",BL);const qL=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],HL=Oe("play",qL);const $L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],GL=Oe("plus",$L);const KL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rk=Oe("refresh-cw",KL);const YL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sk=Oe("save",YL);const QL=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],RT=Oe("scan-line",QL);const WL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ik=Oe("search",WL);const XL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bd=Oe("send",XL);const JL=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Mm=Oe("share-2",JL);const ZL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eV=Oe("shield-check",ZL);const tV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nV=Oe("sparkles",tV);const rV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],ur=Oe("sprout",rV);const sV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],kT=Oe("stethoscope",sV);const iV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],aV=Oe("sun",iV);const oV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IT=Oe("target",oV);const lV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wd=Oe("trash-2",lV);const cV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],q0=Oe("triangle-alert",cV);const uV=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dV=Oe("user-check",uV);const hV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fV=Oe("user-minus",hV);const mV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hv=Oe("user-plus",mV);const gV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xd=Oe("user",gV);const pV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],yV=Oe("wand-sparkles",pV);const _V=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yr=Oe("x",_V);const vV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bV=Oe("zap",vV),ak=z.createContext();function Va(){return z.useContext(ak)}function wV({children:n}){const[e,t]=z.useState([]),r=z.useCallback((o,c="info",u=4e3)=>{const h=Date.now();t(f=>[...f,{id:h,message:o,type:c}]),setTimeout(()=>{i(h)},u)},[]),i=z.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return _.jsxs(ak.Provider,{value:{addToast:r,removeToast:i},children:[n,_.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>_.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&_.jsx(xg,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0"}),o.type==="error"&&_.jsx(QR,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0"}),(o.type==="info"||o.type==="warning")&&_.jsx(ZR,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),_.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}class ok extends RN.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[_.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:_.jsx(q0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),_.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[_.jsx(rk,{className:"w-5 h-5"}),"Reload"]}),_.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[_.jsx(XR,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}const xV=async(n,e,t,r)=>{try{if(!n||!t)throw new Error("Invalid user IDs");const i=Ve(Ae,"users",n,"following",t);await Gs(i,{...r,followedAt:En()});const o=Ve(Ae,"users",t,"followers",n);await Gs(o,{...e,followedAt:En()});const c=Ve(Ae,"users",n);await Mn(c,{followingCount:Cm(1)});const u=Ve(Ae,"users",t);return await Mn(u,{followersCount:Cm(1)}),!0}catch(i){throw console.error("Error following user:",i),i}},Qf=async(n,e)=>{try{if(!n||!e)throw new Error("Invalid user IDs");return await Ks(Ve(Ae,"users",n,"following",e)),await Ks(Ve(Ae,"users",e,"followers",n)),await Mn(Ve(Ae,"users",n),{followingCount:Cm(-1)}),await Mn(Ve(Ae,"users",e),{followersCount:Cm(-1)}),!0}catch(t){throw console.error("Error unfollowing user:",t),t}},lk=async(n,e)=>{try{if(!n||!e)return{isFollowing:!1,isRequested:!1};const t=Ve(Ae,"users",n,"following",e),i=(await $n(t)).exists(),o=Ve(Ae,"users",e,"followRequests",n),u=(await $n(o)).exists();return{isFollowing:i,isRequested:u}}catch(t){return console.error("Error checking follow status:",t),{isFollowing:!1,isRequested:!1}}},ck=async(n,e,t)=>{try{if(!n||!t)throw new Error("Invalid IDs");return await Gs(Ve(Ae,"users",t,"followRequests",n),{followerId:n,followerName:e.displayName||e.name||"User",followerPhoto:e.photoURL||e.avatar||null,createdAt:En(),status:"pending"}),!0}catch(r){throw console.error("Error sending follow request:",r),r}},uk=async(n,e)=>{try{return await Ks(Ve(Ae,"users",e,"followRequests",n)),!0}catch(t){throw console.error("Error cancelling request:",t),t}},EV=async(n,e,t,r,i)=>{try{return await xV(e,t,r,i),await Ks(Ve(Ae,"users",r,"followRequests",e)),!0}catch(o){throw console.error("Error accepting request:",o),o}},TV=async(n,e)=>{try{return await Ks(Ve(Ae,"users",n,"followRequests",e)),!0}catch(t){throw console.error("Error rejecting request:",t),t}},NT=async n=>{try{const e=await $n(Ve(Ae,"users",n));if(e.exists()){const t=e.data();return{followersCount:t.followersCount||0,followingCount:t.followingCount||0}}return{followersCount:0,followingCount:0}}catch(e){return console.error("Error getting user stats:",e),{followersCount:0,followingCount:0}}},SV=async n=>{try{const e=Sr(Zt(Ae,"users",n,"followers"),bg("followedAt","desc"),Nm(50)),t=await Ni(e);if(t.empty)return[];const r=t.docs.map(u=>u.id),i=[],o=r.map(u=>$n(Ve(Ae,"users",u)));return(await Promise.all(o)).forEach(u=>{u.exists()&&i.push({id:u.id,...u.data()})}),i}catch(e){return console.error("Error fetching followers:",e),[]}},AV=async n=>{try{const e=Sr(Zt(Ae,"users",n,"following"),bg("followedAt","desc"),Nm(50)),t=await Ni(e);if(t.empty)return[];const r=t.docs.map(u=>u.id),i=[],o=r.map(u=>$n(Ve(Ae,"users",u)));return(await Promise.all(o)).forEach(u=>{u.exists()&&i.push({id:u.id,...u.data()})}),i}catch(e){return console.error("Error fetching following:",e),[]}};function RV({onClose:n}){const{t:e}=Bt(),{currentUser:t}=kr(),{addToast:r}=Va(),i=Rr(),[o,c]=z.useState([]),[u,h]=z.useState(!0),[f,g]=z.useState(null);z.useEffect(()=>{if(!t)return;const w=Sr(Zt(Ae,"users",t.uid,"followRequests"),bg("createdAt","desc")),x=qs(w,N=>{const M=N.docs.map(L=>({id:L.id,...L.data()}));c(M),h(!1)},N=>{console.error("Error fetching requests:",N),h(!1)});return()=>x()},[t]);const y=async w=>{if(!f){g(w.id),c(x=>x.filter(N=>N.id!==w.id));try{await EV(w.id,w.id,{displayName:w.followerName,photoURL:w.followerPhoto},t.uid,{displayName:t.displayName,photoURL:t.photoURL}),r(e("request_accepted")||"Request Accepted","success")}catch(x){console.error(x),r(e("error_occurred")||"Error","error")}finally{g(null)}}},v=async w=>{if(!f){g(w),c(x=>x.filter(N=>N.id!==w));try{await TV(t.uid,w),r(e("request_rejected")||"Request Rejected","info")}catch(x){console.error(x),r("Error","error")}finally{g(null)}}};return _.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:n,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:w=>w.stopPropagation(),children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[_.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[_.jsx(F0,{className:"w-5 h-5 text-green-600"}),e("notifications")||"Bildirimler"]}),_.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Yr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:u?_.jsx("div",{className:"flex justify-center py-8",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):o.length===0?_.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[_.jsx(F0,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),_.jsx("p",{children:e("no_notifications")||"No new notifications"})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-1",children:e("follow_requests")||"Follow Requests"}),o.map(w=>_.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-2xl",children:[_.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>{n(),i(`/profile/${w.id}`)},children:[_.jsx("img",{src:w.followerPhoto||`https://ui-avatars.com/api/?name=${w.followerName||"User"}&background=random`,alt:w.followerName,className:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-gray-600"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:w.followerName||"User"}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("wants_to_follow")||"Wants to follow you"})]})]}),_.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[_.jsx("button",{onClick:()=>v(w.id),disabled:f===w.id,className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition-colors disabled:opacity-50",children:_.jsx(Yr,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>y(w),disabled:f===w.id,className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-xl transition-colors disabled:opacity-50",children:_.jsx(uL,{className:"w-4 h-4"})})]})]},w.id))]})})]})})}function kV(){const{currentUser:n,logout:e}=kr(),{t,i18n:r}=Bt(),i=Ar(),o=Rr(),{addToast:c}=Va(),[u,h]=z.useState(!1),[f,g]=z.useState(0),y=()=>{r.changeLanguage(r.language==="en"?"tr":"en")},[v,w]=z.useState(()=>{const F=localStorage.getItem("theme");return F||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});z.useEffect(()=>{v==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",v)},[v]);const[x]=z.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),N=()=>{w(F=>F==="dark"?"light":"dark")};z.useEffect(()=>{if(!n)return;const F=async()=>{try{await Mn(Ve(Ae,"users",n.uid),{lastSeen:En()})}catch(H){console.error("Presence update failed",H)}};F();const B=setInterval(F,60*1e3);return()=>clearInterval(B)},[n]),z.useEffect(()=>{if(!n)return;const F=Sr(Zt(Ae,"chats"),La("participants","array-contains",n.uid)),B=qs(F,H=>{H.docChanges().forEach(Y=>{if(Y.type==="modified"){const U=Y.doc.data(),I=U.updatedAt?.seconds*1e3;if(Date.now()-I>5e3)return;const T=U.participants.find(R=>R!==n.uid);if(!(i.pathname===`/messages/${Y.doc.id}`)&&T){const R=U.participantData?.[T]||{name:"Someone"};x.play().catch(C=>console.log("Audio play failed",C)),c(`New message from ${R.name}: ${U.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>B()},[n,i.pathname,c,x]),z.useEffect(()=>{if(!n)return;const F=Sr(Zt(Ae,"users",n.uid,"followRequests")),B=qs(F,H=>{g(H.size)});return()=>B()},[n]);const L=[{name:"home",path:"/",icon:XR,label:t("app_name"),public:!0},{name:"community",path:"/community",icon:B0,label:t("community"),public:!0},{name:"my_analyses",path:"/analyses",icon:Eg,label:t("analyses"),public:!1},{name:"messages",path:"/messages",icon:vd,label:t("messages"),public:!1},{name:"notifications",action:()=>h(!0),icon:F0,badge:f>0?f:null,label:t("notifications"),public:!1},{name:"profile",path:"/profile",icon:xd,label:t("profile"),public:!1},{name:"about",path:"/about",icon:ZR,label:t("about"),public:!0}].filter(F=>F.public||n);return _.jsxs("div",{className:"flex h-[100dvh] bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[_.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[_.jsxs(Br,{to:"/",onClick:()=>window.scrollTo(0,0),state:{refreshId:new Date().getTime()},className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[_.jsx(ur,{className:"w-8 h-8 text-green-600"}),_.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[_.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),_.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),_.jsx("nav",{className:"flex-1 px-4 space-y-2",children:L.map(F=>{const B=F.icon,H=i.pathname===F.path,Y=_.jsxs(_.Fragment,{children:[_.jsx(B,{className:"w-5 h-5"}),_.jsx("span",{children:F.label}),F.badge&&_.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[1.25rem] text-center",children:F.badge})]});return F.action?_.jsx("button",{onClick:U=>{U.preventDefault(),F.action()},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${H?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:Y},F.name):_.jsx(Br,{to:F.path,state:{refreshId:new Date().getTime()},className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${H?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:Y},F.path)})}),_.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[_.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[_.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:r.language.toUpperCase()}),_.jsx("span",{children:t("language")||"Language"})]}),_.jsxs("button",{onClick:N,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[v==="dark"?_.jsx(aV,{className:"w-5 h-5"}):_.jsx(VL,{className:"w-5 h-5"}),_.jsx("span",{children:t(v==="dark"?"light_mode":"dark_mode")})]}),n?_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("img",{src:n.photoURL||n.avatar||`https://ui-avatars.com/api/?name=${n.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),_.jsxs("div",{className:"flex-1 overflow-hidden",children:[_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),_.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:n.displayName||n.email,children:n.displayName||n.email})]})]}),_.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[_.jsx(DL,{className:"w-5 h-5"}),_.jsx("span",{children:t("logout")})]})]}):_.jsxs(Br,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[_.jsx(ST,{className:"w-5 h-5"}),_.jsx("span",{children:t("login")})]})]})]}),_.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[_.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[_.jsxs(Br,{to:"/",onClick:()=>window.scrollTo(0,0),state:{refreshId:new Date().getTime()},className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[_.jsx(ur,{className:"w-6 h-6 text-green-600"}),_.jsxs("span",{className:"font-bold text-lg",children:[_.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),_.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),_.jsx("button",{onClick:y,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:r.language.toUpperCase()})]}),_.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-32 md:pb-8 scroll-smooth relative",id:"main-scroll",children:_.jsx("div",{className:"w-full min-h-full flex flex-col",children:_.jsx(ok,{children:_.jsx(RC,{})})})}),_.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[L.map(F=>{const B=F.icon,H=i.pathname===F.path;return _.jsx(Br,{to:F.path,state:{refreshId:new Date().getTime()},className:`flex flex-col items-center justify-center p-3 rounded-lg transition-all ${H?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-gray-400 dark:text-gray-500"}`,children:_.jsx(B,{className:"w-7 h-7"})},F.path)}),!n&&_.jsx(Br,{to:"/login",className:"flex flex-col items-center justify-center p-3 text-gray-400",children:_.jsx(ST,{className:"w-7 h-7"})})]})]}),u&&_.jsx(RV,{onClose:()=>h(!1)})]})}function IV(){const[n,e]=z.useState(""),[t,r]=z.useState(""),[i,o]=z.useState(""),[c,u]=z.useState(!1),[h,f]=z.useState(!1),[g,y]=z.useState(!1),v=Rr(),w=Ar(),{t:x}=Bt(),{currentUser:N}=kr(),{addToast:M}=Va();if(N?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const L=async()=>{y(!0);try{const B=await f0(Fn,n,t),H={url:window.location.origin+"/login",handleCodeInApp:!0};await y2(B.user,H),await Fn.signOut(),M(x("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(B){console.error("Resend error:",B),B.code==="auth/too-many-requests"?M(x("too_many_requests")||"Too many attempts. Please wait.","error"):M(x("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},F=async B=>{B.preventDefault(),o(""),f(!1),u(!0);try{if(!(await f0(Fn,n,t)).user.emailVerified){await Fn.signOut(),f(!0);return}}catch(H){console.error(H);let Y=x("login_failed")||"Failed to login.";H.code==="auth/user-not-found"||H.code==="auth/wrong-password"||H.code==="auth/invalid-credential"?Y=x("invalid_credentials")||"Invalid email or password.":H.code==="auth/too-many-requests"?Y=x("too_many_requests")||"Too many attempts. Try again later.":H.code==="auth/user-disabled"?Y="Account disabled. Contact support.":H.code==="auth/network-request-failed"&&(Y="Network error. Check your connection."),o(Y)}finally{u(!1)}};return _.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:_.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:_.jsxs("div",{className:"p-8",children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:_.jsx(ur,{className:"w-16 h-16 text-white"})})}),_.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:x("welcome")}),_.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:x("login_prompt")}),i&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),h?_.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:_.jsx(ur,{className:"w-5 h-5"})}),_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x("verify_email_title")||"Verify your email"})]}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:x("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),_.jsx("button",{onClick:L,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":x("resend_verification")||"Resend Verification Email"})]}):_.jsxs("form",{onSubmit:F,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:B=>e(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),_.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>r(B.target.value)})]}),_.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":x("login"),!c&&_.jsx(uv,{className:"w-4 h-4"})]})]}),_.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",_.jsx(Br,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:x("register")})]})]})})})}function NV({user:n,onClose:e,onVerified:t}){const{t:r}=Bt(),[i,o]=z.useState(!1);z.useEffect(()=>{const u=setInterval(async()=>{if(n)try{await n.reload(),n.emailVerified&&(clearInterval(u),t())}catch(h){console.error("Verification check failed",h)}},3e3);return()=>clearInterval(u)},[n,t]);const c=async()=>{o(!0);try{await n.reload(),n.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[_.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),_.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),_.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:_.jsx(tk,{className:"w-10 h-10"})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r("verify_email_title")||"Verify Your Email"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:r("verify_email_desc")||`We sent a confirmation link to ${n?.email}. Please check your inbox and click the link to continue.`}),_.jsxs("div",{className:"space-y-4 w-full",children:[_.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:r("open_email_app")||"Open Email App"}),_.jsxs("button",{onClick:c,disabled:i,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[i?_.jsx(rk,{className:"w-5 h-5 animate-spin"}):_.jsx(xg,{className:"w-5 h-5"}),r("i_verified_it")||"I Verified the Email"]}),_.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r("cancel")||"Cancel"})]})]})})}function CV(){const[n,e]=z.useState(""),[t,r]=z.useState(""),[i,o]=z.useState(""),[c,u]=z.useState(""),[h,f]=z.useState(!1),[g,y]=z.useState(!1),[v,w]=z.useState(null),x=Rr(),N=Ar(),{t:M}=Bt(),L=async B=>{B.preventDefault(),u(""),f(!0);try{const H=await p2(Fn,n,t);await cm(H.user,{displayName:i}),await Gs(Ve(Ae,"users",H.user.uid),{uid:H.user.uid,name:i,displayName:i,email:n,photoURL:null,avatar:null,createdAt:En(),lastSeen:En(),bio:""},{merge:!0}),await y2(H.user),w(H.user),y(!0),f(!1)}catch(H){u(H.message),console.error(H),f(!1)}},F=async()=>{Fn.currentUser&&await Fn.currentUser.reload(),y(!1),N.state?.returnUrl&&N.state?.pendingResult?x(N.state.returnUrl,{replace:!0,state:{restoredResult:N.state.pendingResult,restoredImages:N.state.pendingImages,restoredPlantType:N.state.pendingPlantType}}):x("/")};return _.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:_.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&_.jsx(NV,{user:v,onClose:()=>y(!1),onVerified:F}),_.jsxs("div",{className:"p-8",children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:_.jsx(ur,{className:"w-16 h-16 text-white"})})}),_.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:M("register")}),_.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:M("create_account_desc")||M("join_community")||"Create an account to join the community"}),c&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),_.jsxs("form",{onSubmit:L,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("full_name")||"Full Name"}),_.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:i,onChange:B=>o(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("email")}),_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:B=>e(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("password")}),_.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>r(B.target.value)})]}),_.jsxs("button",{type:"submit",disabled:h||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h?M("creating_account")||"Creating Account...":M("register"),!h&&_.jsx(hv,{className:"w-4 h-4"})]})]}),_.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[M("already_have_account")||"Already have an account?"," "," ",_.jsx(Br,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:M("login")})]})]})]})})}var CT;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(CT||(CT={}));var DT;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(DT||(DT={}));var OT;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(OT||(OT={}));const MT=["user","model","function","system"];var PT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(PT||(PT={}));var jT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(jT||(jT={}));var LT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(LT||(LT={}));var VT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(VT||(VT={}));var nd;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(nd||(nd={}));var UT;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(UT||(UT={}));var zT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(zT||(zT={}));var FT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(FT||(FT={}));class Bn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Yl extends Bn{constructor(e,t){super(e),this.response=t}}class dk extends Bn{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}}class ka extends Bn{}class hk extends Bn{}const DV="https://generativelanguage.googleapis.com",OV="v1beta",MV="0.24.1",PV="genai-js";var Ho;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ho||(Ho={}));class jV{constructor(e,t,r,i,o){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||OV;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||DV}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function LV(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${PV}/${MV}`),e.join(" ")}async function VV(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",LV(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new ka(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,o]of r.entries()){if(i==="x-goog-api-key")throw new ka(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new ka(`Header name ${i} can only be set using the apiClient field`);t.append(i,o)}}return t}async function UV(n,e,t,r,i,o){const c=new jV(n,e,t,r,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},qV(o)),{method:"POST",headers:await VV(c),body:i})}}async function Gd(n,e,t,r,i,o={},c=fetch){const{url:u,fetchOptions:h}=await UV(n,e,t,r,i,o);return zV(u,h,c)}async function zV(n,e,t=fetch){let r;try{r=await t(n,e)}catch(i){FV(i,n)}return r.ok||await BV(r,n),r}function FV(n,e){let t=n;throw t.name==="AbortError"?(t=new hk(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof dk||n instanceof ka||(t=new Bn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function BV(n,e){let t="",r;try{const i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new dk(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function qV(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function fv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return HV(n)}else if(n.promptFeedback)throw new Yl(`Text not available. ${pa(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),BT(n)[0]}else if(n.promptFeedback)throw new Yl(`Function call not available. ${pa(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return BT(n)}else if(n.promptFeedback)throw new Yl(`Function call not available. ${pa(n)}`,n)},n}function HV(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function BT(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const $V=[nd.RECITATION,nd.SAFETY,nd.LANGUAGE];function Wf(n){return!!n.finishReason&&$V.includes(n.finishReason)}function pa(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Wf(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function Ed(n){return this instanceof Ed?(this.v=n,this):new Ed(n)}function GV(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(v){r[v]&&(i[v]=function(w){return new Promise(function(x,N){o.push([v,w,x,N])>1||u(v,w)})})}function u(v,w){try{h(r[v](w))}catch(x){y(o[0][3],x)}}function h(v){v.value instanceof Ed?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const qT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function KV(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=WV(e),[r,i]=t.tee();return{stream:QV(r),response:YV(i)}}async function YV(n){const e=[],t=n.getReader();for(;;){const{done:r,value:i}=await t.read();if(r)return fv(XV(e));e.push(i)}}function QV(n){return GV(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:i}=yield Ed(t.read());if(i)break;yield yield Ed(fv(r))}})}function WV(n){const e=n.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(i.trim()){r.error(new Bn("Failed to parse stream"));return}r.close();return}i+=c;let h=i.match(qT),f;for(;h;){try{f=JSON.parse(h[1])}catch{r.error(new Bn(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(f),i=i.substring(h[0].length),h=i.match(qT)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new hk("Request aborted when reading from the stream"):u=new Bn("Error reading from the stream"),u})}}})}function XV(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let i=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=o.citationMetadata,t.candidates[i].groundingMetadata=o.groundingMetadata,t.candidates[i].finishReason=o.finishReason,t.candidates[i].finishMessage=o.finishMessage,t.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[i].content||(t.candidates[i].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[i].content.parts.push(c)}i++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function fk(n,e,t,r){const i=await Gd(e,Ho.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return KV(i)}async function mk(n,e,t,r){const o=await(await Gd(e,Ho.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:fv(o)}}function gk(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Td(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return JV(e)}function JV(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,i=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new Bn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Bn("No content is provided for sending chat message.");return r?e:t}function ZV(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=n.generateContentRequest!=null;if(n.contents){if(i)throw new ka("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=Td(n);r.contents=[o]}return{generateContentRequest:r}}function HT(n){let e;return n.contents?e=n:e={contents:[Td(n)]},n.systemInstruction&&(e.systemInstruction=gk(n.systemInstruction)),e}function eU(n){return typeof n=="string"||Array.isArray(n)?{content:Td(n)}:n}const $T=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],tU={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function nU(n){let e=!1;for(const t of n){const{role:r,parts:i}=t;if(!e&&r!=="user")throw new Bn(`First content should be with role 'user', got ${r}`);if(!MT.includes(r))throw new Bn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(MT)}`);if(!Array.isArray(i))throw new Bn("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Bn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of i)for(const h of $T)h in u&&(o[h]+=1);const c=tU[r];for(const u of $T)if(!c.includes(u)&&o[u]>0)throw new Bn(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function GT(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const KT="SILENT_ERROR";class rU{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(nU(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,i,o,c,u,h;await this._sendPromise;const f=Td(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>mk(this._apiKey,this.model,g,y)).then(w=>{var x;if(GT(w.response)){this._history.push(f);const N=Object.assign({parts:[],role:"model"},(x=w.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(N)}else{const N=pa(w.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var r,i,o,c,u,h;await this._sendPromise;const f=Td(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=fk(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(KT)}).then(w=>w.response).then(w=>{if(GT(w)){this._history.push(f);const x=Object.assign({},w.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=pa(w);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(w=>{w.message!==KT&&console.error(w)}),v}}async function sU(n,e,t,r){return(await Gd(e,Ho.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function iU(n,e,t,r){return(await Gd(e,Ho.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function aU(n,e,t,r){const i=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Gd(e,Ho.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()}class YT{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=gk(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const i=HT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return mk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,t={}){var r;const i=HT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return fk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var t;return new rU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=ZV(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return sU(this.apiKey,this.model,r,i)}async embedContent(e,t={}){const r=eU(e),i=Object.assign(Object.assign({},this._requestOptions),t);return iU(this.apiKey,this.model,r,i)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return aU(this.apiKey,this.model,e,r)}}class pk{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Bn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new YT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new ka("Cached content must contain a `name` field.");if(!e.model)throw new ka("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const c of i)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===h)continue}throw new ka(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new YT(this.apiKey,o,r)}}async function yk(n,e="tr",t=null){const r=Array.isArray(n)?n:[n],i=3,o=2e3;let c;for(let u=0;u<=i;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${i+1}...`),await new Promise(h=>setTimeout(h,o))),await oU(r,e,t)}catch(h){if(c=h,!(h.message.includes("503")||h.message.includes("429")||h.message.includes("overloaded")||h.message.includes("Server Error")))throw h;console.warn(`Analysis attempt ${u+1} failed:`,h.message)}throw c}async function oU(n,e,t){let r="";t&&t.trim().length>0&&(r=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const i=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${r}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "plant_name": "Common Plant Name (e.g. Tomato, Rose)",
        "plant_latin_name": "Latin Name of the Plant (e.g. Solanum lycopersicum)",
        "disease_name": "Disease Name",
        "disease_latin_name": "Latin Name of the Disease/Pathogen (if applicable)",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:i}];n.forEach(u=>{if(!u)return;const h=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:h}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const h=await u.json();if(h.error)throw new Error(h.error.message||"API Connection Error");if(h.plant_name||h.status)return h;if(h.candidates&&h.candidates[0].content){const g=h.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const h="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new pk(h).getGenerativeModel({model:"gemini-2.5-flash"}),v=[i];n.forEach(L=>{if(!L)return;const F=L.includes(",")?L.split(",")[1]:L;v.push({inlineData:{data:F,mimeType:"image/jpeg"}})});const M=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(M)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}async function lU(n="tr"){const e=["A common garden pest (e.g., aphids, spider mites)","A fascinating fungal disease (e.g., powdery mildew)","An interesting beneficial insect (e.g., ladybugs)","A weird or cool plant adaptation","A tip for organic gardening"],r=`
    Generate a short, engaging "Daily Plant Fact" for a community of gardeners.
    Topic: ${e[Math.floor(Math.random()*e.length)]}
    Language: ${n==="en"?"ENGLISH":"TURKISH"}

    The tone should be fun, educational, and slightly informal (like a friendly bot).
    
    Return a VALID JSON object with this structure:
    {
        "title": "Catchy Title",
        "content": "One or two short paragraphs of interesting info. No markdown.",
        "imageKeyword": "A precise English keyword to search for an image (e.g. 'ladybug leaf', 'powdery mildew rose')",
        "type": "tip" | "pest" | "disease" | "fun_fact"
    }
    
    Ensure the content is accurate but simple to read.
    Return ONLY valid raw JSON (no markdown block).
    `;try{const i="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE",g=(await(await new pk(i).getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(r)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}catch(i){return console.error("Daily fact generation failed:",i),{title:n==="tr"?"Bitki Dostu pucu":"Plant Friendly Tip",content:n==="tr"?"Bitkilerinizi sabah erken saatlerde sulamak, suyun buharlamadan kklere ulamasn salar.":"Watering your plants early in the morning ensures water reaches the roots before evaporating.",imageKeyword:"watering plants",type:"tip"}}}const xc="analyses";async function _k(n,e,t,r,i=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await $d(Zt(Ae,xc),{userId:n,plantType:e,mainImage:o,macroImage:c,result:r,isPublic:i,status:"active",createdAt:En(),nextCheckup:new Date(Date.now()+10080*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function vk(n){try{const e=Sr(Zt(Ae,xc),La("userId","==",n)),r=(await Ni(e)).docs.map(async o=>{const c=o.data();let u=[];try{u=(await Ni(Zt(Ae,xc,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(h){console.log("No updates found or error",h)}return{id:o.id,...c,updates:u}});return(await Promise.all(r)).sort((o,c)=>{const u=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function bk(n){try{const e=Sr(Zt(Ae,"posts"),La("relatedAnalysisId","==",n)),t=await Ni(e);if(!t.empty){const r=t.docs.map(i=>Ks(i.ref));await Promise.all(r)}return await Ks(Ve(Ae,xc,n)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function wk(n,e){try{const t=Ve(Ae,xc,n);await Mn(t,{...e,updatedAt:En()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function xk(n,e,t){try{let r=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?r=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const i=$d(Zt(Ae,"posts"),{userId:n,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:r,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:En()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([i,o]),!0}catch(r){throw console.error("Error creating post:",r),r}}async function Ek(n,e,t,r="Gardener",i=null){try{const o=e.result.plant_latin_name||e.result.latin_name||"",c=e.result.disease_latin_name||(o?"":e.result.latin_name)||"",u=`${t}${o?` (${o})`:""}`;let h=`Analiz Sonucu: ${e.result.disease_name}${c&&c!==e.result.disease_name?` (${c})`:""}

${e.result.description}`;return e.result.is_treatable===!1?e.result.preventive_measures&&e.result.preventive_measures.length>0&&(h+=`

 Koruyucu nlemler:
`+e.result.preventive_measures.map(f=>` ${f}`).join(`
`)):e.result.treatment_steps&&e.result.treatment_steps.length>0&&(h+=`

 Tedavi Admlar:
`+e.result.treatment_steps.map(f=>` ${f}`).join(`
`)),await $d(Zt(Ae,"posts"),{userId:e.userId,authorName:r,userAvatar:i,title:u,content:h,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:En(),relatedAnalysisId:n}),await wk(n,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function Tk(n,e,t){try{return await $d(Zt(Ae,xc,n,"updates"),{imageUrl:e||null,note:t,createdAt:En()}),!0}catch(r){throw console.error("Error adding feedback:",r),r}}async function Sk(n){try{const e=Ve(Ae,"posts",n),t=await $n(e);if(!t.exists())return!1;const r=t.data();if(r.relatedAnalysisId)try{const i=Ve(Ae,"analyses",r.relatedAnalysisId);await Mn(i,{isPublic:!1})}catch(i){console.warn("Could not sync analysis status (might be deleted)",i)}return await Ks(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function Ak(n,e){try{const t=Ve(Ae,"posts",n),r=await $n(t);if(!r.exists())return;(r.data().likes||[]).includes(e)?await Mn(t,{likes:qR(e)}):await Mn(t,{likes:ov(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function Rk(n,e,t,r){try{const i=Ve(Ae,"posts",n),o={userId:e,userName:t,text:r,createdAt:Date.now()};return await Mn(i,{comments:ov(o)}),!0}catch(i){throw console.error("Error adding comment:",i),i}}async function kk(n,e){try{const t=Ve(Ae,"posts",n);return await Mn(t,{...e,updatedAt:En()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function H0(n,e,t){try{const r=Sr(Zt(Ae,"posts"),La("userId","==",n)),o=(await Ni(r)).docs.map(c=>Mn(c.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(r){return console.error("Error syncing user profile to posts:",r),!1}}async function cU(n,e,t,r){try{if(n===e)throw new Error("Cannot start chat with yourself.");const i=[n,e].sort(),o=`${i[0]}_${i[1]}`,c=Ve(Ae,"chats",o);return(await $n(c)).exists()?await Mn(c,{[`participantData.${n}`]:r}):await Gs(c,{participants:[n,e],participantData:{[e]:t,[n]:r},createdAt:En(),updatedAt:En(),lastMessage:""}),o}catch(i){throw console.error("Error starting chat:",i),i}}const uU=Object.freeze(Object.defineProperty({__proto__:null,addComment:Rk,addFeedbackUpdate:Tk,createPost:xk,deleteAnalysis:bk,deletePost:Sk,getUserAnalyses:vk,saveAnalysis:_k,shareAnalysisToCommunity:Ek,startChat:cU,toggleLike:Ak,updateAnalysisStatus:wk,updatePost:kk,updateUserPostsName:H0},Symbol.toStringTag,{value:"Module"}));function dU({result:n,onReset:e}){const{t}=Bt();return n?n.error==="NOT_PLANT"?_.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[_.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:_.jsx(q0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),_.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),_.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):_.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[_.jsx("div",{className:"bg-green-600 text-white p-6",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold",children:n.disease_name}),_.jsxs("div",{className:"flex flex-col",children:[n.plant_name&&_.jsx("span",{className:"text-lg font-medium opacity-90",children:n.plant_name}),_.jsx("span",{className:"opacity-75 italic text-sm",children:n.latin_name})]})]}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsxs("div",{className:"text-2xl font-bold",children:[n.confidence,"%"]}),_.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),_.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[_.jsx(cv,{className:"w-5 h-5"}),_.jsx("span",{children:t("urgency")})]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:_.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${n.urgency}%`}})})]}),_.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[_.jsx(ur,{className:"w-5 h-5"}),_.jsx("span",{children:t("spread_risk")})]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:_.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.spread_risk}%`}})})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),_.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n.description})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),n.is_treatable===!1&&_.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[_.jsx(q0,{className:"w-5 h-5 flex-shrink-0"}),_.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),_.jsx("ul",{className:"space-y-3",children:(n.is_treatable===!1?n.preventive_measures:n.treatment_steps)?.map((r,i)=>_.jsxs("li",{className:"flex gap-3",children:[_.jsx(xg,{className:`w-6 h-6 flex-shrink-0 ${n.is_treatable===!1?"text-orange-500":"text-green-600"}`}),_.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:r})]},i))})]}),_.jsx("div",{className:"pt-4 flex gap-4",children:_.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function hU({isOpen:n,onClose:e,onCapture:t}){const r=z.useRef(null),i=z.useRef(null),[o,c]=z.useState(null),[u,h]=z.useState(""),{t:f}=Bt();z.useEffect(()=>(n?g():y(),()=>y()),[n]);const g=async()=>{h("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),r.current&&(r.current.srcObject=w)}catch(w){console.error("Camera Error:",w),h(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(r.current&&i.current){const w=r.current,x=i.current;x.width=w.videoWidth,x.height=w.videoHeight,x.getContext("2d").drawImage(w,0,0,x.width,x.height);const M=x.toDataURL("image/jpeg",.9);t(M),e()}};return n?_.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:_.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[_.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[_.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),_.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:_.jsx(Yr,{className:"w-6 h-6"})})]}),_.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?_.jsxs("div",{className:"text-center p-6 text-red-400",children:[_.jsx(QR,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),_.jsx("p",{children:u}),_.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):_.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),_.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&_.jsx("button",{onClick:v,className:"group relative",children:_.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:_.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),_.jsx("canvas",{ref:i,className:"hidden"})]})}):null}function fU(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function Ik(n,e){return new Promise((function(t,r){let i;return mU(n).then((function(o){try{return i=o,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}}),r)}))}const mU=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:i}})=>{const o=new DataView(i);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const h=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(i.slice(c,c+2+h))}c+=2+h}return e(new Blob)})),r.readAsArrayBuffer(n)}));var Pm={},gU={get exports(){return Pm},set exports(n){Pm=n}};(function(n){var e,t,r={};gU.exports=r,r.parse=function(i,o){for(var c=r.bin.readUshort,u=r.bin.readUint,h=0,f={},g=new Uint8Array(i),y=g.length-4;u(g,y)!=101010256;)y--;h=y,h+=4;var v=c(g,h+=4);c(g,h+=2);var w=u(g,h+=2),x=u(g,h+=4);h+=4,h=x;for(var N=0;N<v;N++){u(g,h),h+=4,h+=4,h+=4,u(g,h+=4),w=u(g,h+=4);var M=u(g,h+=4),L=c(g,h+=4),F=c(g,h+2),B=c(g,h+4);h+=6;var H=u(g,h+=8);h+=4,h+=L+F+B,r._readLocal(g,H,f,w,M,o)}return f},r._readLocal=function(i,o,c,u,h,f){var g=r.bin.readUshort,y=r.bin.readUint;y(i,o),g(i,o+=4),g(i,o+=2);var v=g(i,o+=2);y(i,o+=2),y(i,o+=4),o+=4;var w=g(i,o+=8),x=g(i,o+=2);o+=2;var N=r.bin.readUTF8(i,o,w);if(o+=w,o+=x,f)c[N]={size:h,csize:u};else{var M=new Uint8Array(i.buffer,o);if(v==0)c[N]=new Uint8Array(M.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var L=new Uint8Array(h);r.inflateRaw(M,L),c[N]=L}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*i.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(i,u,c,o.level);var h=r.adler(i,0,i.length);return u[c+0]=h>>>24&255,u[c+1]=h>>>16&255,u[c+2]=h>>>8&255,u[c+3]=h>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),u=r.F.deflateRaw(i,c,u,o.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(i,o){o==null&&(o=!1);var c=0,u=r.bin.writeUint,h=r.bin.writeUshort,f={};for(var g in i){var y=!r._noNeed(g)&&!o,v=i[g],w=r.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?r.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*r.bin.sizeUTF8(g);c+=22;var x=new Uint8Array(c),N=0,M=[];for(var g in f){var L=f[g];M.push(N),N=r._writeHeader(x,N,g,L,0)}var F=0,B=N;for(var g in f)L=f[g],M.push(N),N=r._writeHeader(x,N,g,L,1,M[F++]);var H=N-B;return u(x,N,101010256),N+=4,h(x,N+=4,F),h(x,N+=2,F),u(x,N+=2,H),u(x,N+=4,B),N+=4,N+=2,x.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,c,u,h,f){var g=r.bin.writeUint,y=r.bin.writeUshort,v=u.file;return g(i,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),y(i,o,20),y(i,o+=2,0),y(i,o+=2,u.cpr?8:0),g(i,o+=2,0),g(i,o+=4,u.crc),g(i,o+=4,v.length),g(i,o+=4,u.usize),y(i,o+=4,r.bin.sizeUTF8(c)),y(i,o+=2,0),o+=2,h==1&&(o+=2,o+=2,g(i,o+=6,f),o+=4),o+=r.bin.writeUTF8(i,o,c),h==0&&(i.set(v,o),o+=v.length),o},r.crc={table:(function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;i[o]=c}return i})(),update:function(i,o,c,u){for(var h=0;h<u;h++)i=r.crc.table[255&(i^o[c+h])]^i>>>8;return i},crc:function(i,o,c){return 4294967295^r.crc.update(4294967295,i,o,c)}},r.adler=function(i,o,c){for(var u=1,h=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)h+=u+=i[f++];u%=65521,h%=65521}return h<<16|u},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255,i[o+2]=c>>16&255,i[o+3]=c>>24&255},readASCII:function(i,o,c){for(var u="",h=0;h<c;h++)u+=String.fromCharCode(i[o+h]);return u},writeASCII:function(i,o,c){for(var u=0;u<c.length;u++)i[o+u]=c.charCodeAt(u)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,c){for(var u,h="",f=0;f<c;f++)h+="%"+r.bin.pad(i[o+f].toString(16));try{u=decodeURIComponent(h)}catch{return r.bin.readASCII(i,o,c)}return u},writeUTF8:function(i,o,c){for(var u=c.length,h=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)i[o+h]=g,h++;else if((4294965248&g)==0)i[o+h]=192|g>>6,i[o+h+1]=128|g>>0&63,h+=2;else if((4294901760&g)==0)i[o+h]=224|g>>12,i[o+h+1]=128|g>>6&63,i[o+h+2]=128|g>>0&63,h+=3;else{if((4292870144&g)!=0)throw"e";i[o+h]=240|g>>18,i[o+h+1]=128|g>>12&63,i[o+h+2]=128|g>>6&63,i[o+h+3]=128|g>>0&63,h+=4}}return h},sizeUTF8:function(i){for(var o=i.length,c=0,u=0;u<o;u++){var h=i.charCodeAt(u);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(i,o,c,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=r.F.U,g=r.F._goodIndex;r.F._hash;var y=r.F._putsE,v=0,w=c<<3,x=0,N=i.length;if(u==0){for(;v<N;)y(o,w,v+(C=Math.min(65535,N-v))==N?1:0),w=r.F._copyExact(i,v,C,o,w+8),v+=C;return w>>>3}var M=f.lits,L=f.strt,F=f.prev,B=0,H=0,Y=0,U=0,I=0,T=0;for(N>2&&(L[T=r.F._hash(i,0)]=0),v=0;v<N;v++){if(I=T,v+1<N-2){T=r.F._hash(i,v+1);var E=v+1&32767;F[E]=L[T],L[T]=E}if(x<=v){(B>14e3||H>26697)&&N-v>100&&(x<v&&(M[B]=v-x,B+=2,x=v),w=r.F._writeBlock(v==N-1||x==N?1:0,M,B,U,i,Y,v-Y,o,w),B=H=U=0,Y=v);var R=0;v<N-2&&(R=r.F._bestMatch(i,v,F,I,Math.min(h[2],N-v),h[3]));var C=R>>>16,j=65535&R;if(R!=0){j=65535&R;var D=g(C=R>>>16,f.of0);f.lhst[257+D]++;var G=g(j,f.df0);f.dhst[G]++,U+=f.exb[D]+f.dxb[G],M[B]=C<<23|v-x,M[B+1]=j<<16|D<<8|G,B+=2,x=v+C}else f.lhst[i[v]]++;H++}}for(Y==v&&i.length!=0||(x<v&&(M[B]=v-x,B+=2,x=v),w=r.F._writeBlock(1,M,B,U,i,Y,v-Y,o,w),B=0,H=0,B=H=U=0,Y=v);(7&w)!=0;)w++;return w>>>3},r.F._bestMatch=function(i,o,c,u,h,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=r.F._hash(i,o-v))return 0;for(var w=0,x=0,N=Math.min(32767,o);v<=N&&--f!=0&&y!=g;){if(w==0||i[o+w]==i[o+w-v]){var M=r.F._howLong(i,o,v);if(M>w){if(x=v,(w=M)>=h)break;v+2<M&&(M=v+2);for(var L=0,F=0;F<M-2;F++){var B=o-v+F+32768&32767,H=B-c[B]+32768&32767;H>L&&(L=H,y=B)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|x},r.F._howLong=function(i,o,c){if(i[o]!=i[o-c]||i[o+1]!=i[o+1-c]||i[o+2]!=i[o+2-c])return 0;var u=o,h=Math.min(i.length,o+258);for(o+=3;o<h&&i[o]==i[o-c];)o++;return o-u},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,c,u,h,f,g,y,v){var w,x,N,M,L,F,B,H,Y,U=r.F.U,I=r.F._putsF,T=r.F._putsE;U.lhst[256]++,x=(w=r.F.getTrees())[0],N=w[1],M=w[2],L=w[3],F=w[4],B=w[5],H=w[6],Y=w[7];var E=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),R=u+r.F.contSize(U.fltree,U.lhst)+r.F.contSize(U.fdtree,U.dhst),C=u+r.F.contSize(U.ltree,U.lhst)+r.F.contSize(U.dtree,U.dhst);C+=14+3*B+r.F.contSize(U.itree,U.ihst)+(2*U.ihst[16]+3*U.ihst[17]+7*U.ihst[18]);for(var j=0;j<286;j++)U.lhst[j]=0;for(j=0;j<30;j++)U.dhst[j]=0;for(j=0;j<19;j++)U.ihst[j]=0;var D=E<R&&E<C?0:R<C?1:2;if(I(y,v,i),I(y,v+1,D),v+=3,D==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(h,f,g,y,v)}else{var G,ee;if(D==1&&(G=U.fltree,ee=U.fdtree),D==2){r.F.makeCodes(U.ltree,x),r.F.revCodes(U.ltree,x),r.F.makeCodes(U.dtree,N),r.F.revCodes(U.dtree,N),r.F.makeCodes(U.itree,M),r.F.revCodes(U.itree,M),G=U.ltree,ee=U.dtree,T(y,v,L-257),T(y,v+=5,F-1),T(y,v+=5,B-4),v+=4;for(var P=0;P<B;P++)T(y,v+3*P,U.itree[1+(U.ordr[P]<<1)]);v+=3*B,v=r.F._codeTiny(H,U.itree,y,v),v=r.F._codeTiny(Y,U.itree,y,v)}for(var O=f,X=0;X<c;X+=2){for(var W=o[X],Z=W>>>23,$=O+(8388607&W);O<$;)v=r.F._writeLit(h[O++],G,y,v);if(Z!=0){var K=o[X+1],ne=K>>16,te=K>>8&255,se=255&K;T(y,v=r.F._writeLit(257+te,G,y,v),Z-U.of0[te]),v+=U.exb[te],I(y,v=r.F._writeLit(se,ee,y,v),ne-U.df0[se]),v+=U.dxb[se],O+=Z}}v=r.F._writeLit(256,G,y,v)}return v},r.F._copyExact=function(i,o,c,u,h){var f=h>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(i.buffer,o,c),f),h+(c+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),c=r.F._hufTree(i.dhst,i.dtree,15),u=[],h=r.F._lenCodes(i.ltree,u),f=[],g=r.F._lenCodes(i.dtree,f),y=0;y<u.length;y+=2)i.ihst[u[y]]++;for(y=0;y<f.length;y+=2)i.ihst[f[y]]++;for(var v=r.F._hufTree(i.ihst,i.itree,7),w=19;w>4&&i.itree[1+(i.ordr[w-1]<<1)]==0;)w--;return[o,c,v,h,g,w,u,f]},r.F.getSecond=function(i){for(var o=[],c=0;c<i.length;c+=2)o.push(i[c+1]);return o},r.F.nonZero=function(i){for(var o="",c=0;c<i.length;c+=2)i[c+1]!=0&&(o+=(c>>1)+",");return o},r.F.contSize=function(i,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*i[1+(u<<1)];return c},r.F._codeTiny=function(i,o,c,u){for(var h=0;h<i.length;h+=2){var f=i[h],g=i[h+1];u=r.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(r.F._putsE(c,u,g,y),u+=y)}return u},r.F._lenCodes=function(i,o){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var h=i[u+1],f=u+3<c?i[u+3]:-1,g=u+5<c?i[u+5]:-1,y=u==0?-1:i[u-1];if(h==0&&f==h&&g==h){for(var v=u+5;v+2<c&&i[v+2]==h;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(h==y&&f==h&&g==h){for(v=u+5;v+2<c&&i[v+2]==h;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(h,0)}return c>>>1},r.F._hufTree=function(i,o,c){var u=[],h=i.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<h;g++)i[g]!=0&&u.push({lit:g,f:i[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(H,Y){return H.f-Y.f}));var x=u[0],N=u[1],M=0,L=1,F=2;for(u[0]={lit:-1,f:x.f+N.f,l:x,r:N,d:0};L!=y-1;)x=M!=L&&(F==y||u[M].f<u[F].f)?u[M++]:u[F++],N=M!=L&&(F==y||u[M].f<u[F].f)?u[M++]:u[F++],u[L++]={lit:-1,f:x.f+N.f,l:x,r:N};var B=r.F.setDepth(u[L-1],0);for(B>c&&(r.F.restrictDepth(v,c,B),B=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return B},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,c){var u=0,h=1<<c-o,f=0;for(i.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<i.length&&i[u].d>o;u++){var g=i[u].d;i[u].d=o,f+=h-(1<<c-g)}for(f>>>=c-o;f>0;)(g=i[u].d)<o?(i[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)i[u].d==o&&f<0&&(i[u].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var c=0;return o[16|c]<=i&&(c|=16),o[8|c]<=i&&(c|=8),o[4|c]<=i&&(c|=4),o[2|c]<=i&&(c|=2),o[1|c]<=i&&(c|=1),c},r.F._writeLit=function(i,o,c,u){return r.F._putsF(c,u,o[i<<1]),u+o[1+(i<<1)]},r.F.inflate=function(i,o){var c=Uint8Array;if(i[0]==3&&i[1]==0)return o||new c(0);var u=r.F,h=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,x=u.U,N=o==null;N&&(o=new c(i.length>>>2<<3));for(var M,L,F=0,B=0,H=0,Y=0,U=0,I=0,T=0,E=0,R=0;F==0;)if(F=h(i,R,1),B=h(i,R+1,2),R+=3,B!=0){if(N&&(o=r.F._check(o,E+(1<<17))),B==1&&(M=x.flmap,L=x.fdmap,I=511,T=31),B==2){H=f(i,R,5)+257,Y=f(i,R+5,5)+1,U=f(i,R+10,4)+4,R+=14;for(var C=0;C<38;C+=2)x.itree[C]=0,x.itree[C+1]=0;var j=1;for(C=0;C<U;C++){var D=f(i,R+3*C,3);x.itree[1+(x.ordr[C]<<1)]=D,D>j&&(j=D)}R+=3*U,y(x.itree,j),v(x.itree,j,x.imap),M=x.lmap,L=x.dmap,R=g(x.imap,(1<<j)-1,H+Y,i,R,x.ttree);var G=u._copyOut(x.ttree,0,H,x.ltree);I=(1<<G)-1;var ee=u._copyOut(x.ttree,H,Y,x.dtree);T=(1<<ee)-1,y(x.ltree,G),v(x.ltree,G,M),y(x.dtree,ee),v(x.dtree,ee,L)}for(;;){var P=M[w(i,R)&I];R+=15&P;var O=P>>>4;if(!(O>>>8))o[E++]=O;else{if(O==256)break;var X=E+O-254;if(O>264){var W=x.ldef[O-257];X=E+(W>>>3)+f(i,R,7&W),R+=7&W}var Z=L[w(i,R)&T];R+=15&Z;var $=Z>>>4,K=x.ddef[$],ne=(K>>>4)+h(i,R,15&K);for(R+=15&K,N&&(o=r.F._check(o,E+(1<<17)));E<X;)o[E]=o[E++-ne],o[E]=o[E++-ne],o[E]=o[E++-ne],o[E]=o[E++-ne];E=X}}}else{(7&R)!=0&&(R+=8-(7&R));var te=4+(R>>>3),se=i[te-4]|i[te-3]<<8;N&&(o=r.F._check(o,E+se)),o.set(new c(i.buffer,i.byteOffset+te,se),E),R=te+se<<3,E+=se}return o.length==E?o:o.slice(0,E)},r.F._check=function(i,o){var c=i.length;if(o<=c)return i;var u=new Uint8Array(Math.max(c<<1,o));return u.set(i,0),u},r.F._decodeTiny=function(i,o,c,u,h,f){for(var g=r.F._bitsE,y=r.F._get17,v=0;v<c;){var w=i[y(u,h)&o];h+=15&w;var x=w>>>4;if(x<=15)f[v]=x,v++;else{var N=0,M=0;x==16?(M=3+g(u,h,2),h+=2,N=f[v-1]):x==17?(M=3+g(u,h,3),h+=3):x==18&&(M=11+g(u,h,7),h+=7);for(var L=v+M;v<L;)f[v]=N,v++}}return h},r.F._copyOut=function(i,o,c,u){for(var h=0,f=0,g=u.length>>>1;f<c;){var y=i[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>h&&(h=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return h},r.F.makeCodes=function(i,o){for(var c,u,h,f,g=r.F.U,y=i.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[i[w]]++;var x=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,x[u]=c;for(h=0;h<y;h+=2)(f=i[h+1])!=0&&(i[h]=x[f],x[f]++)},r.F.codes2map=function(i,o,c){for(var u=i.length,h=r.F.U.rev15,f=0;f<u;f+=2)if(i[f+1]!=0)for(var g=f>>1,y=i[f+1],v=g<<4|y,w=o-y,x=i[f]<<w,N=x+(1<<w);x!=N;)c[h[x]>>>15-o]=v,x++},r.F.revCodes=function(i,o){for(var c=r.F.U.rev15,u=15-o,h=0;h<i.length;h+=2){var f=i[h]<<o-i[h+1];i[h]=c[f]>>>u}},r.F._putsE=function(i,o,c){c<<=7&o;var u=o>>>3;i[u]|=c,i[u+1]|=c>>>8},r.F._putsF=function(i,o,c){c<<=7&o;var u=o>>>3;i[u]|=c,i[u+1]|=c>>>8,i[u+2]|=c>>>16},r.F._bitsE=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},r.F._bitsF=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=r.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[o]=(c>>>16|c<<16)>>>17}function u(h,f,g){for(;f--!=0;)h.push(0,g)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];u(i.fltree,144,8),u(i.fltree,112,9),u(i.fltree,24,7),u(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),u(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),u(i.itree,19,0),u(i.ltree,286,0),u(i.dtree,30,0),u(i.ttree,320,0)})()})();var pU=fU({__proto__:null,default:Pm},[Pm]);const is=(function(){var n={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let x=0;x<v;x++)w+=String.fromCharCode(g[y+x]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let x=0;x<v;x++)w.push(g[y+x]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,x="";for(let N=0;N<v;N++)x+=`%${n.pad(g[y+N].toString(16))}`;try{w=decodeURIComponent(x)}catch{return n.readASCII(g,y,v)}return w}};function e(g,y,v,w){const x=y*v,N=o(w),M=Math.ceil(y*N/8),L=new Uint8Array(4*x),F=new Uint32Array(L.buffer),{ctype:B}=w,{depth:H}=w,Y=n.readUshort;if(B==6){const W=x<<2;if(H==8)for(var U=0;U<W;U+=4)L[U]=g[U],L[U+1]=g[U+1],L[U+2]=g[U+2],L[U+3]=g[U+3];if(H==16)for(U=0;U<W;U++)L[U]=g[U<<1]}else if(B==2){const W=w.tabs.tRNS;if(W==null){if(H==8)for(U=0;U<x;U++){var I=3*U;F[U]=255<<24|g[I+2]<<16|g[I+1]<<8|g[I]}if(H==16)for(U=0;U<x;U++)I=6*U,F[U]=255<<24|g[I+4]<<16|g[I+2]<<8|g[I]}else{var T=W[0];const Z=W[1],$=W[2];if(H==8)for(U=0;U<x;U++){var E=U<<2;I=3*U,F[U]=255<<24|g[I+2]<<16|g[I+1]<<8|g[I],g[I]==T&&g[I+1]==Z&&g[I+2]==$&&(L[E+3]=0)}if(H==16)for(U=0;U<x;U++)E=U<<2,I=6*U,F[U]=255<<24|g[I+4]<<16|g[I+2]<<8|g[I],Y(g,I)==T&&Y(g,I+2)==Z&&Y(g,I+4)==$&&(L[E+3]=0)}}else if(B==3){const W=w.tabs.PLTE,Z=w.tabs.tRNS,$=Z?Z.length:0;if(H==1)for(var R=0;R<v;R++){var C=R*M,j=R*y;for(U=0;U<y;U++){E=j+U<<2;var D=3*(G=g[C+(U>>3)]>>7-((7&U)<<0)&1);L[E]=W[D],L[E+1]=W[D+1],L[E+2]=W[D+2],L[E+3]=G<$?Z[G]:255}}if(H==2)for(R=0;R<v;R++)for(C=R*M,j=R*y,U=0;U<y;U++)E=j+U<<2,D=3*(G=g[C+(U>>2)]>>6-((3&U)<<1)&3),L[E]=W[D],L[E+1]=W[D+1],L[E+2]=W[D+2],L[E+3]=G<$?Z[G]:255;if(H==4)for(R=0;R<v;R++)for(C=R*M,j=R*y,U=0;U<y;U++)E=j+U<<2,D=3*(G=g[C+(U>>1)]>>4-((1&U)<<2)&15),L[E]=W[D],L[E+1]=W[D+1],L[E+2]=W[D+2],L[E+3]=G<$?Z[G]:255;if(H==8)for(U=0;U<x;U++){var G;E=U<<2,D=3*(G=g[U]),L[E]=W[D],L[E+1]=W[D+1],L[E+2]=W[D+2],L[E+3]=G<$?Z[G]:255}}else if(B==4){if(H==8)for(U=0;U<x;U++){E=U<<2;var ee=g[P=U<<1];L[E]=ee,L[E+1]=ee,L[E+2]=ee,L[E+3]=g[P+1]}if(H==16)for(U=0;U<x;U++){var P;E=U<<2,ee=g[P=U<<2],L[E]=ee,L[E+1]=ee,L[E+2]=ee,L[E+3]=g[P+2]}}else if(B==0)for(T=w.tabs.tRNS?w.tabs.tRNS:-1,R=0;R<v;R++){const W=R*M,Z=R*y;if(H==1)for(var O=0;O<y;O++){var X=(ee=255*(g[W+(O>>>3)]>>>7-(7&O)&1))==255*T?0:255;F[Z+O]=X<<24|ee<<16|ee<<8|ee}else if(H==2)for(O=0;O<y;O++)X=(ee=85*(g[W+(O>>>2)]>>>6-((3&O)<<1)&3))==85*T?0:255,F[Z+O]=X<<24|ee<<16|ee<<8|ee;else if(H==4)for(O=0;O<y;O++)X=(ee=17*(g[W+(O>>>1)]>>>4-((1&O)<<2)&15))==17*T?0:255,F[Z+O]=X<<24|ee<<16|ee<<8|ee;else if(H==8)for(O=0;O<y;O++)X=(ee=g[W+O])==T?0:255,F[Z+O]=X<<24|ee<<16|ee<<8|ee;else if(H==16)for(O=0;O<y;O++)ee=g[W+(O<<1)],X=Y(g,W+(O<<1))==T?0:255,F[Z+O]=X<<24|ee<<16|ee<<8|ee}return L}function t(g,y,v,w){const x=o(g),N=Math.ceil(v*x/8),M=new Uint8Array((N+1+g.interlace)*w);return y=g.tabs.CgBI?i(y,M):r(y,M),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(F,B){const H=B.width,Y=B.height,U=o(B),I=U>>3,T=Math.ceil(H*U/8),E=new Uint8Array(Y*T);let R=0;const C=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let ee=0;for(;ee<7;){const O=D[ee],X=G[ee];let W=0,Z=0,$=C[ee];for(;$<Y;)$+=O,Z++;let K=j[ee];for(;K<H;)K+=X,W++;const ne=Math.ceil(W*U/8);c(F,B,R,W,Z);let te=0,se=C[ee];for(;se<Y;){let _e=j[ee],Re=R+te*ne<<3;for(;_e<H;){var P;if(U==1&&(P=(P=F[Re>>3])>>7-(7&Re)&1,E[se*T+(_e>>3)]|=P<<7-((7&_e)<<0)),U==2&&(P=(P=F[Re>>3])>>6-(7&Re)&3,E[se*T+(_e>>2)]|=P<<6-((3&_e)<<1)),U==4&&(P=(P=F[Re>>3])>>4-(7&Re)&15,E[se*T+(_e>>1)]|=P<<4-((1&_e)<<2)),U>=8){const we=se*T+_e*I;for(let ye=0;ye<I;ye++)E[we+ye]=F[(Re>>3)+ye]}Re+=U,_e+=X}te++,se+=O}W*Z!=0&&(R+=Z*(1+ne)),ee+=1}return E})(y,g)),y}function r(g,y){return i(new Uint8Array(g.buffer,2,g.length-6),y)}var i=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let x,N,M=0,L=0,F=0,B=0,H=0,Y=0,U=0,I=0,T=0;if(y[0]==3&&y[1]==0)return v||new w(0);const E=g.H,R=E.b,C=E.e,j=E.R,D=E.n,G=E.A,ee=E.Z,P=E.m,O=v==null;for(O&&(v=new w(y.length>>>2<<5));M==0;)if(M=R(y,T,1),L=R(y,T+1,2),T+=3,L!=0){if(O&&(v=g.H.W(v,I+(1<<17))),L==1&&(x=P.J,N=P.h,Y=511,U=31),L==2){F=C(y,T,5)+257,B=C(y,T+5,5)+1,H=C(y,T+10,4)+4,T+=14;let W=1;for(var X=0;X<38;X+=2)P.Q[X]=0,P.Q[X+1]=0;for(X=0;X<H;X++){const K=C(y,T+3*X,3);P.Q[1+(P.X[X]<<1)]=K,K>W&&(W=K)}T+=3*H,D(P.Q,W),G(P.Q,W,P.u),x=P.w,N=P.d,T=j(P.u,(1<<W)-1,F+B,y,T,P.v);const Z=E.V(P.v,0,F,P.C);Y=(1<<Z)-1;const $=E.V(P.v,F,B,P.D);U=(1<<$)-1,D(P.C,Z),G(P.C,Z,x),D(P.D,$),G(P.D,$,N)}for(;;){const W=x[ee(y,T)&Y];T+=15&W;const Z=W>>>4;if(!(Z>>>8))v[I++]=Z;else{if(Z==256)break;{let $=I+Z-254;if(Z>264){const _e=P.q[Z-257];$=I+(_e>>>3)+C(y,T,7&_e),T+=7&_e}const K=N[ee(y,T)&U];T+=15&K;const ne=K>>>4,te=P.c[ne],se=(te>>>4)+R(y,T,15&te);for(T+=15&te;I<$;)v[I]=v[I++-se],v[I]=v[I++-se],v[I]=v[I++-se],v[I]=v[I++-se];I=$}}}}else{(7&T)!=0&&(T+=8-(7&T));const W=4+(T>>>3),Z=y[W-4]|y[W-3]<<8;O&&(v=g.H.W(v,I+Z)),v.set(new w(y.buffer,y.byteOffset+W,Z),I),T=W+Z<<3,I+=Z}return v.length==I?v:v.slice(0,I)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const x=new Uint8Array(w<<1);return x.set(y,0),x},g.H.R=function(y,v,w,x,N,M){const L=g.H.e,F=g.H.Z;let B=0;for(;B<w;){const H=y[F(x,N)&v];N+=15&H;const Y=H>>>4;if(Y<=15)M[B]=Y,B++;else{let U=0,I=0;Y==16?(I=3+L(x,N,2),N+=2,U=M[B-1]):Y==17?(I=3+L(x,N,3),N+=3):Y==18&&(I=11+L(x,N,7),N+=7);const T=B+I;for(;B<T;)M[B]=U,B++}}return N},g.H.V=function(y,v,w,x){let N=0,M=0;const L=x.length>>>1;for(;M<w;){const F=y[M+v];x[M<<1]=0,x[1+(M<<1)]=F,F>N&&(N=F),M++}for(;M<L;)x[M<<1]=0,x[1+(M<<1)]=0,M++;return N},g.H.n=function(y,v){const w=g.H.m,x=y.length;let N,M,L,F;const B=w.j;for(var H=0;H<=v;H++)B[H]=0;for(H=1;H<x;H+=2)B[y[H]]++;const Y=w.K;for(N=0,B[0]=0,M=1;M<=v;M++)N=N+B[M-1]<<1,Y[M]=N;for(L=0;L<x;L+=2)F=y[L+1],F!=0&&(y[L]=Y[F],Y[F]++)},g.H.A=function(y,v,w){const x=y.length,N=g.H.m.r;for(let M=0;M<x;M+=2)if(y[M+1]!=0){const L=M>>1,F=y[M+1],B=L<<4|F,H=v-F;let Y=y[M]<<H;const U=Y+(1<<H);for(;Y!=U;)w[N[Y]>>>15-v]=B,Y++}},g.H.l=function(y,v){const w=g.H.m.r,x=15-v;for(let N=0;N<y.length;N+=2){const M=y[N]<<v-y[N+1];y[N]=w[M]>>>x}},g.H.M=function(y,v,w){w<<=7&v;const x=v>>>3;y[x]|=w,y[x+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const x=v>>>3;y[x]|=w,y[x+1]|=w>>>8,y[x+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let x=v;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,y.r[v]=(x>>>16|x<<16)>>>17}function w(x,N,M){for(;N--!=0;)x.push(0,M)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,x){let N=o(y);const M=Math.ceil(w*N/8);let L,F;N=Math.ceil(N/8);let B=g[v],H=0;if(B>1&&(g[v]=[0,0,1][B-2]),B==3)for(H=N;H<M;H++)g[H+1]=g[H+1]+(g[H+1-N]>>>1)&255;for(let Y=0;Y<x;Y++)if(L=v+Y*M,F=L+Y+1,B=g[F-1],H=0,B==0)for(;H<M;H++)g[L+H]=g[F+H];else if(B==1){for(;H<N;H++)g[L+H]=g[F+H];for(;H<M;H++)g[L+H]=g[F+H]+g[L+H-N]}else if(B==2)for(;H<M;H++)g[L+H]=g[F+H]+g[L+H-M];else if(B==3){for(;H<N;H++)g[L+H]=g[F+H]+(g[L+H-M]>>>1);for(;H<M;H++)g[L+H]=g[F+H]+(g[L+H-M]+g[L+H-N]>>>1)}else{for(;H<N;H++)g[L+H]=g[F+H]+u(0,g[L+H-M],0);for(;H<M;H++)g[L+H]=g[F+H]+u(g[L+H-N],g[L+H-M],g[L+H-N-M])}return g}function u(g,y,v){const w=g+y-v,x=w-g,N=w-y,M=w-v;return x*x<=N*N&&x*x<=M*M?g:N*N<=M*M?y:v}function h(g,y,v){v.width=n.readUint(g,y),y+=4,v.height=n.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,x,N,M,L,F){const B=Math.min(y,x),H=Math.min(v,N);let Y=0,U=0;for(let ee=0;ee<H;ee++)for(let P=0;P<B;P++)if(M>=0&&L>=0?(Y=ee*y+P<<2,U=(L+ee)*x+M+P<<2):(Y=(-L+ee)*y-M+P<<2,U=ee*x+P<<2),F==0)w[U]=g[Y],w[U+1]=g[Y+1],w[U+2]=g[Y+2],w[U+3]=g[Y+3];else if(F==1){var I=g[Y+3]*.00392156862745098,T=g[Y]*I,E=g[Y+1]*I,R=g[Y+2]*I,C=w[U+3]*(1/255),j=w[U]*C,D=w[U+1]*C,G=w[U+2]*C;const O=1-I,X=I+C*O,W=X==0?0:1/X;w[U+3]=255*X,w[U+0]=(T+j*O)*W,w[U+1]=(E+D*O)*W,w[U+2]=(R+G*O)*W}else if(F==2)I=g[Y+3],T=g[Y],E=g[Y+1],R=g[Y+2],C=w[U+3],j=w[U],D=w[U+1],G=w[U+2],I==C&&T==j&&E==D&&R==G?(w[U]=0,w[U+1]=0,w[U+2]=0,w[U+3]=0):(w[U]=T,w[U+1]=E,w[U+2]=R,w[U+3]=I);else if(F==3){if(I=g[Y+3],T=g[Y],E=g[Y+1],R=g[Y+2],C=w[U+3],j=w[U],D=w[U+1],G=w[U+2],I==C&&T==j&&E==D&&R==G)continue;if(I<220&&C>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const x=n,N=x.readUshort,M=x.readUint,L={tabs:{},frames:[]},F=new Uint8Array(v.length);let B,H=0,Y=0;const U=[137,80,78,71,13,10,26,10];for(var I=0;I<8;I++)if(v[I]!=U[I])throw"The input is not a PNG file!";for(;w<v.length;){const ee=x.readUint(v,w);w+=4;const P=x.readASCII(v,w,4);if(w+=4,P=="IHDR")h(v,w,L);else if(P=="iCCP"){for(var T=w;v[T]!=0;)T++;x.readASCII(v,w,T-w),v[T+1];const O=v.slice(T+2,w+ee);let X=null;try{X=r(O)}catch{X=i(O)}L.tabs[P]=X}else if(P=="CgBI")L.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(I=0;I<ee;I++)F[H+I]=v[w+I];H+=ee}else if(P=="acTL")L.tabs[P]={num_frames:M(v,w),num_plays:M(v,w+4)},B=new Uint8Array(v.length);else if(P=="fcTL"){Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,B.slice(0,Y),G.rect.width,G.rect.height),Y=0);const O={x:M(v,w+12),y:M(v,w+16),width:M(v,w+4),height:M(v,w+8)};let X=N(v,w+22);X=N(v,w+20)/(X==0?100:X);const W={rect:O,delay:Math.round(1e3*X),dispose:v[w+24],blend:v[w+25]};L.frames.push(W)}else if(P=="fdAT"){for(I=0;I<ee-4;I++)B[Y+I]=v[w+I+4];Y+=ee-4}else if(P=="pHYs")L.tabs[P]=[x.readUint(v,w),x.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(L.tabs[P]=[],I=0;I<8;I++)L.tabs[P].push(x.readUint(v,w+4*I));else if(P=="tEXt"||P=="zTXt"){L.tabs[P]==null&&(L.tabs[P]={});var E=x.nextZero(v,w),R=x.readASCII(v,w,E-w),C=w+ee-E-1;if(P=="tEXt")D=x.readASCII(v,E+1,C);else{var j=r(v.slice(E+2,E+2+C));D=x.readUTF8(j,0,j.length)}L.tabs[P][R]=D}else if(P=="iTXt"){L.tabs[P]==null&&(L.tabs[P]={}),E=0,T=w,E=x.nextZero(v,T),R=x.readASCII(v,T,E-T);const O=v[T=E+1];var D;v[T+1],T+=2,E=x.nextZero(v,T),x.readASCII(v,T,E-T),T=E+1,E=x.nextZero(v,T),x.readUTF8(v,T,E-T),C=ee-((T=E+1)-w),O==0?D=x.readUTF8(v,T,C):(j=r(v.slice(T,T+C)),D=x.readUTF8(j,0,j.length)),L.tabs[P][R]=D}else if(P=="PLTE")L.tabs[P]=x.readBytes(v,w,ee);else if(P=="hIST"){const O=L.tabs.PLTE.length/3;for(L.tabs[P]=[],I=0;I<O;I++)L.tabs[P].push(N(v,w+2*I))}else if(P=="tRNS")L.ctype==3?L.tabs[P]=x.readBytes(v,w,ee):L.ctype==0?L.tabs[P]=N(v,w):L.ctype==2&&(L.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]);else if(P=="gAMA")L.tabs[P]=x.readUint(v,w)/1e5;else if(P=="sRGB")L.tabs[P]=v[w];else if(P=="bKGD")L.ctype==0||L.ctype==4?L.tabs[P]=[N(v,w)]:L.ctype==2||L.ctype==6?L.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]:L.ctype==3&&(L.tabs[P]=v[w]);else if(P=="IEND")break;w+=ee,x.readUint(v,w),w+=4}var G;return Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,B.slice(0,Y),G.rect.width,G.rect.height)),L.data=t(L,F,L.width,L.height),delete L.compress,delete L.interlace,delete L.filter,L},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const x=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const N=v*w*4,M=new Uint8Array(N),L=new Uint8Array(N),F=new Uint8Array(N);for(let H=0;H<y.frames.length;H++){const Y=y.frames[H],U=Y.rect.x,I=Y.rect.y,T=Y.rect.width,E=Y.rect.height,R=e(Y.data,T,E,y);if(H!=0)for(var B=0;B<N;B++)F[B]=M[B];if(Y.blend==0?f(R,T,E,M,v,w,U,I,0):Y.blend==1&&f(R,T,E,M,v,w,U,I,1),x.push(M.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(L,T,E,M,v,w,U,I,0);else if(Y.dispose==2)for(B=0;B<N;B++)M[B]=F[B]}}return x},_paeth:u,_copyTile:f,_bin:n}})();(function(){const{_copyTile:n}=is,{_bin:e}=is,t=is._paeth;var r={table:(function(){const T=new Uint32Array(256);for(let E=0;E<256;E++){let R=E;for(let C=0;C<8;C++)1&R?R=3988292384^R>>>1:R>>>=1;T[E]=R}return T})(),update(T,E,R,C){for(let j=0;j<C;j++)T=r.table[255&(T^E[R+j])]^T>>>8;return T},crc:(T,E,R)=>4294967295^r.update(4294967295,T,E,R)};function i(T,E,R,C){E[R]+=T[0]*C>>4,E[R+1]+=T[1]*C>>4,E[R+2]+=T[2]*C>>4,E[R+3]+=T[3]*C>>4}function o(T){return Math.max(0,Math.min(255,T))}function c(T,E){const R=T[0]-E[0],C=T[1]-E[1],j=T[2]-E[2],D=T[3]-E[3];return R*R+C*C+j*j+D*D}function u(T,E,R,C,j,D,G){G==null&&(G=1);const ee=C.length,P=[];for(var O=0;O<ee;O++){const se=C[O];P.push([se>>>0&255,se>>>8&255,se>>>16&255,se>>>24&255])}for(O=0;O<ee;O++){let se=4294967295;for(var X=0,W=0;W<ee;W++){var Z=c(P[O],P[W]);W!=O&&Z<se&&(se=Z,X=W)}}const $=new Uint32Array(j.buffer),K=new Int16Array(E*R*4),ne=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<ne.length;O++)ne[O]=255*((ne[O]+.5)/16-.5);for(let se=0;se<R;se++)for(let _e=0;_e<E;_e++){var te;O=4*(se*E+_e),G!=2?te=[o(T[O]+K[O]),o(T[O+1]+K[O+1]),o(T[O+2]+K[O+2]),o(T[O+3]+K[O+3])]:(Z=ne[4*(3&se)+(3&_e)],te=[o(T[O]+Z),o(T[O+1]+Z),o(T[O+2]+Z),o(T[O+3]+Z)]),X=0;let Re=16777215;for(W=0;W<ee;W++){const Ue=c(te,P[W]);Ue<Re&&(Re=Ue,X=W)}const we=P[X],ye=[te[0]-we[0],te[1]-we[1],te[2]-we[2],te[3]-we[3]];G==1&&(_e!=E-1&&i(ye,K,O+4,7),se!=R-1&&(_e!=0&&i(ye,K,O+4*E-4,3),i(ye,K,O+4*E,5),_e!=E-1&&i(ye,K,O+4*E+4,1))),D[O>>2]=X,$[O>>2]=C[X]}}function h(T,E,R,C,j){j==null&&(j={});const{crc:D}=r,G=e.writeUint,ee=e.writeUshort,P=e.writeASCII;let O=8;const X=T.frames.length>1;let W,Z=!1,$=33+(X?20:0);if(j.sRGB!=null&&($+=13),j.pHYs!=null&&($+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),$+=21+W.length+4),T.ctype==3){for(var K=T.plte.length,ne=0;ne<K;ne++)T.plte[ne]>>>24!=255&&(Z=!0);$+=8+3*K+4+(Z?8+1*K+4:0)}for(var te=0;te<T.frames.length;te++)X&&($+=38),$+=(we=T.frames[te]).cimg.length+12,te!=0&&($+=4);$+=12;const se=new Uint8Array($),_e=[137,80,78,71,13,10,26,10];for(ne=0;ne<8;ne++)se[ne]=_e[ne];if(G(se,O,13),O+=4,P(se,O,"IHDR"),O+=4,G(se,O,E),O+=4,G(se,O,R),O+=4,se[O]=T.depth,O++,se[O]=T.ctype,O++,se[O]=0,O++,se[O]=0,O++,se[O]=0,O++,G(se,O,D(se,O-17,17)),O+=4,j.sRGB!=null&&(G(se,O,1),O+=4,P(se,O,"sRGB"),O+=4,se[O]=j.sRGB,O++,G(se,O,D(se,O-5,5)),O+=4),j.iCCP!=null){const ye=13+W.length;G(se,O,ye),O+=4,P(se,O,"iCCP"),O+=4,P(se,O,"ICC profile"),O+=11,O+=2,se.set(W,O),O+=W.length,G(se,O,D(se,O-(ye+4),ye+4)),O+=4}if(j.pHYs!=null&&(G(se,O,9),O+=4,P(se,O,"pHYs"),O+=4,G(se,O,j.pHYs[0]),O+=4,G(se,O,j.pHYs[1]),O+=4,se[O]=j.pHYs[2],O++,G(se,O,D(se,O-13,13)),O+=4),X&&(G(se,O,8),O+=4,P(se,O,"acTL"),O+=4,G(se,O,T.frames.length),O+=4,G(se,O,j.loop!=null?j.loop:0),O+=4,G(se,O,D(se,O-12,12)),O+=4),T.ctype==3){for(G(se,O,3*(K=T.plte.length)),O+=4,P(se,O,"PLTE"),O+=4,ne=0;ne<K;ne++){const ye=3*ne,Ue=T.plte[ne],Je=255&Ue,Ke=Ue>>>8&255,ct=Ue>>>16&255;se[O+ye+0]=Je,se[O+ye+1]=Ke,se[O+ye+2]=ct}if(O+=3*K,G(se,O,D(se,O-3*K-4,3*K+4)),O+=4,Z){for(G(se,O,K),O+=4,P(se,O,"tRNS"),O+=4,ne=0;ne<K;ne++)se[O+ne]=T.plte[ne]>>>24&255;O+=K,G(se,O,D(se,O-K-4,K+4)),O+=4}}let Re=0;for(te=0;te<T.frames.length;te++){var we=T.frames[te];X&&(G(se,O,26),O+=4,P(se,O,"fcTL"),O+=4,G(se,O,Re++),O+=4,G(se,O,we.rect.width),O+=4,G(se,O,we.rect.height),O+=4,G(se,O,we.rect.x),O+=4,G(se,O,we.rect.y),O+=4,ee(se,O,C[te]),O+=2,ee(se,O,1e3),O+=2,se[O]=we.dispose,O++,se[O]=we.blend,O++,G(se,O,D(se,O-30,30)),O+=4);const ye=we.cimg;G(se,O,(K=ye.length)+(te==0?0:4)),O+=4;const Ue=O;P(se,O,te==0?"IDAT":"fdAT"),O+=4,te!=0&&(G(se,O,Re++),O+=4),se.set(ye,O),O+=K,G(se,O,D(se,Ue,O-Ue)),O+=4}return G(se,O,0),O+=4,P(se,O,"IEND"),O+=4,G(se,O,D(se,O-4,4)),O+=4,se.buffer}function f(T,E,R){for(let C=0;C<T.frames.length;C++){const j=T.frames[C];j.rect.width;const D=j.rect.height,G=new Uint8Array(D*j.bpl+D);j.cimg=w(j.img,D,j.bpp,j.bpl,G,E,R)}}function g(T,E,R,C,j){const D=j[0],G=j[1],ee=j[2],P=j[3],O=j[4],X=j[5];let W=6,Z=8,$=255;for(var K=0;K<T.length;K++){const At=new Uint8Array(T[K]);for(var ne=At.length,te=0;te<ne;te+=4)$&=At[te+3]}const se=$!=255,_e=(function(ut,dt,Ye,pe,Se,He){const je=[];for(var Te=0;Te<ut.length;Te++){const qt=new Uint8Array(ut[Te]),Pn=new Uint32Array(qt.buffer);var at;let Tn=0,Yt=0,Rt=dt,tn=Ye,Ot=pe?1:0;if(Te!=0){const Zo=He||pe||Te==1||je[Te-2].dispose!=0?1:2;let hs=0,Ua=1e9;for(let jn=0;jn<Zo;jn++){var _t=new Uint8Array(ut[Te-1-jn]);const Js=new Uint32Array(ut[Te-1-jn]);let vt=dt,mn=Ye,Sn=-1,An=-1;for(let Ir=0;Ir<Ye;Ir++)for(let _n=0;_n<dt;_n++)Pn[mt=Ir*dt+_n]!=Js[mt]&&(_n<vt&&(vt=_n),_n>Sn&&(Sn=_n),Ir<mn&&(mn=Ir),Ir>An&&(An=Ir));Sn==-1&&(vt=mn=Sn=An=0),Se&&((1&vt)==1&&vt--,(1&mn)==1&&mn--);const el=(Sn-vt+1)*(An-mn+1);el<Ua&&(Ua=el,hs=jn,Tn=vt,Yt=mn,Rt=Sn-vt+1,tn=An-mn+1)}_t=new Uint8Array(ut[Te-1-hs]),hs==1&&(je[Te-1].dispose=2),at=new Uint8Array(Rt*tn*4),n(_t,dt,Ye,at,Rt,tn,-Tn,-Yt,0),Ot=n(qt,dt,Ye,at,Rt,tn,-Tn,-Yt,3)?1:0,Ot==1?v(qt,dt,Ye,at,{x:Tn,y:Yt,width:Rt,height:tn}):n(qt,dt,Ye,at,Rt,tn,-Tn,-Yt,0)}else at=qt.slice(0);je.push({rect:{x:Tn,y:Yt,width:Rt,height:tn},img:at,blend:Ot,dispose:0})}if(pe)for(Te=0;Te<je.length;Te++){if((Kn=je[Te]).blend==1)continue;const qt=Kn.rect,Pn=je[Te-1].rect,Tn=Math.min(qt.x,Pn.x),Yt=Math.min(qt.y,Pn.y),Rt={x:Tn,y:Yt,width:Math.max(qt.x+qt.width,Pn.x+Pn.width)-Tn,height:Math.max(qt.y+qt.height,Pn.y+Pn.height)-Yt};je[Te-1].dispose=1,Te-1!=0&&y(ut,dt,Ye,je,Te-1,Rt,Se),y(ut,dt,Ye,je,Te,Rt,Se)}let Gn=0;if(ut.length!=1)for(var mt=0;mt<je.length;mt++){var Kn;Gn+=(Kn=je[mt]).rect.width*Kn.rect.height}return je})(T,E,R,D,G,ee),Re={},we=[],ye=[];if(C!=0){const At=[];for(te=0;te<_e.length;te++)At.push(_e[te].img.buffer);const ut=(function(Se){let He=0;for(var je=0;je<Se.length;je++)He+=Se[je].byteLength;const Te=new Uint8Array(He);let at=0;for(je=0;je<Se.length;je++){const _t=new Uint8Array(Se[je]),Gn=_t.length;for(let mt=0;mt<Gn;mt+=4){let Kn=_t[mt],qt=_t[mt+1],Pn=_t[mt+2];const Tn=_t[mt+3];Tn==0&&(Kn=qt=Pn=0),Te[at+mt]=Kn,Te[at+mt+1]=qt,Te[at+mt+2]=Pn,Te[at+mt+3]=Tn}at+=Gn}return Te.buffer})(At),dt=N(ut,C);for(te=0;te<dt.plte.length;te++)we.push(dt.plte[te].est.rgba);let Ye=0;for(te=0;te<_e.length;te++){const pe=(Je=_e[te]).img.length;var Ue=new Uint8Array(dt.inds.buffer,Ye>>2,pe>>2);ye.push(Ue);const Se=new Uint8Array(dt.abuf,Ye,pe);X&&u(Je.img,Je.rect.width,Je.rect.height,we,Se,Ue),Je.img.set(Se),Ye+=pe}}else for(K=0;K<_e.length;K++){var Je=_e[K];const At=new Uint32Array(Je.img.buffer);var Ke=Je.rect.width;for(ne=At.length,Ue=new Uint8Array(ne),ye.push(Ue),te=0;te<ne;te++){const ut=At[te];if(te!=0&&ut==At[te-1])Ue[te]=Ue[te-1];else if(te>Ke&&ut==At[te-Ke])Ue[te]=Ue[te-Ke];else{let dt=Re[ut];if(dt==null&&(Re[ut]=dt=we.length,we.push(ut),we.length>=300))break;Ue[te]=dt}}}const ct=we.length;for(ct<=256&&O==0&&(Z=ct<=2?1:ct<=4?2:ct<=16?4:8,Z=Math.max(Z,P)),K=0;K<_e.length;K++){(Je=_e[K]).rect.x,Je.rect.y,Ke=Je.rect.width;const At=Je.rect.height;let ut=Je.img;new Uint32Array(ut.buffer);let dt=4*Ke,Ye=4;if(ct<=256&&O==0){dt=Math.ceil(Z*Ke/8);var Xe=new Uint8Array(dt*At);const pe=ye[K];for(let Se=0;Se<At;Se++){te=Se*dt;const He=Se*Ke;if(Z==8)for(var tt=0;tt<Ke;tt++)Xe[te+tt]=pe[He+tt];else if(Z==4)for(tt=0;tt<Ke;tt++)Xe[te+(tt>>1)]|=pe[He+tt]<<4-4*(1&tt);else if(Z==2)for(tt=0;tt<Ke;tt++)Xe[te+(tt>>2)]|=pe[He+tt]<<6-2*(3&tt);else if(Z==1)for(tt=0;tt<Ke;tt++)Xe[te+(tt>>3)]|=pe[He+tt]<<7-1*(7&tt)}ut=Xe,W=3,Ye=1}else if(se==0&&_e.length==1){Xe=new Uint8Array(Ke*At*3);const pe=Ke*At;for(te=0;te<pe;te++){const Se=3*te,He=4*te;Xe[Se]=ut[He],Xe[Se+1]=ut[He+1],Xe[Se+2]=ut[He+2]}ut=Xe,W=2,Ye=3,dt=3*Ke}Je.img=ut,Je.bpl=dt,Je.bpp=Ye}return{ctype:W,depth:Z,plte:we,frames:_e}}function y(T,E,R,C,j,D,G){const ee=Uint8Array,P=Uint32Array,O=new ee(T[j-1]),X=new P(T[j-1]),W=j+1<T.length?new ee(T[j+1]):null,Z=new ee(T[j]),$=new P(Z.buffer);let K=E,ne=R,te=-1,se=-1;for(let Re=0;Re<D.height;Re++)for(let we=0;we<D.width;we++){const ye=D.x+we,Ue=D.y+Re,Je=Ue*E+ye,Ke=$[Je];Ke==0||C[j-1].dispose==0&&X[Je]==Ke&&(W==null||W[4*Je+3]!=0)||(ye<K&&(K=ye),ye>te&&(te=ye),Ue<ne&&(ne=Ue),Ue>se&&(se=Ue))}te==-1&&(K=ne=te=se=0),G&&((1&K)==1&&K--,(1&ne)==1&&ne--),D={x:K,y:ne,width:te-K+1,height:se-ne+1};const _e=C[j];_e.rect=D,_e.blend=1,_e.img=new Uint8Array(D.width*D.height*4),C[j-1].dispose==0?(n(O,E,R,_e.img,D.width,D.height,-D.x,-D.y,0),v(Z,E,R,_e.img,D)):n(Z,E,R,_e.img,D.width,D.height,-D.x,-D.y,0)}function v(T,E,R,C,j){n(T,E,R,C,j.width,j.height,-j.x,-j.y,2)}function w(T,E,R,C,j,D,G){const ee=[];let P,O=[0,1,2,3,4];D!=-1?O=[D]:(E*C>5e5||R==1)&&(O=[0]),G&&(P={level:0});const X=pU;for(var W=0;W<O.length;W++){for(let K=0;K<E;K++)x(j,T,K,C,R,O[W]);ee.push(X.deflate(j,P))}let Z,$=1e9;for(W=0;W<ee.length;W++)ee[W].length<$&&(Z=W,$=ee[W].length);return ee[Z]}function x(T,E,R,C,j,D){const G=R*C;let ee=G+R;if(T[ee]=D,ee++,D==0)if(C<500)for(var P=0;P<C;P++)T[ee+P]=E[G+P];else T.set(new Uint8Array(E.buffer,G,C),ee);else if(D==1){for(P=0;P<j;P++)T[ee+P]=E[G+P];for(P=j;P<C;P++)T[ee+P]=E[G+P]-E[G+P-j]+256&255}else if(R==0){for(P=0;P<j;P++)T[ee+P]=E[G+P];if(D==2)for(P=j;P<C;P++)T[ee+P]=E[G+P];if(D==3)for(P=j;P<C;P++)T[ee+P]=E[G+P]-(E[G+P-j]>>1)+256&255;if(D==4)for(P=j;P<C;P++)T[ee+P]=E[G+P]-t(E[G+P-j],0,0)+256&255}else{if(D==2)for(P=0;P<C;P++)T[ee+P]=E[G+P]+256-E[G+P-C]&255;if(D==3){for(P=0;P<j;P++)T[ee+P]=E[G+P]+256-(E[G+P-C]>>1)&255;for(P=j;P<C;P++)T[ee+P]=E[G+P]+256-(E[G+P-C]+E[G+P-j]>>1)&255}if(D==4){for(P=0;P<j;P++)T[ee+P]=E[G+P]+256-t(0,E[G+P-C],0)&255;for(P=j;P<C;P++)T[ee+P]=E[G+P]+256-t(E[G+P-j],E[G+P-C],E[G+P-j-C])&255}}}function N(T,E){const R=new Uint8Array(T),C=R.slice(0),j=new Uint32Array(C.buffer),D=M(C,E),G=D[0],ee=D[1],P=R.length,O=new Uint8Array(P>>2);let X;if(R.length<2e7)for(var W=0;W<P;W+=4)X=L(G,Z=R[W]*(1/255),$=R[W+1]*(1/255),K=R[W+2]*(1/255),ne=R[W+3]*(1/255)),O[W>>2]=X.ind,j[W>>2]=X.est.rgba;else for(W=0;W<P;W+=4){var Z=R[W]*.00392156862745098,$=R[W+1]*(1/255),K=R[W+2]*(1/255),ne=R[W+3]*(1/255);for(X=G;X.left;)X=F(X.est,Z,$,K,ne)<=0?X.left:X.right;O[W>>2]=X.ind,j[W>>2]=X.est.rgba}return{abuf:C.buffer,inds:O,plte:ee}}function M(T,E,R){R==null&&(R=1e-4);const C=new Uint32Array(T.buffer),j={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=Y(T,j.i0,j.i1),j.est=U(j.bst);const D=[j];for(;D.length<E;){let ee=0,P=0;for(var G=0;G<D.length;G++)D[G].est.L>ee&&(ee=D[G].est.L,P=G);if(ee<R)break;const O=D[P],X=B(T,C,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=X||O.i1<=X){O.est.L=0;continue}const W={i0:O.i0,i1:X,bst:null,est:null,tdst:0,left:null,right:null};W.bst=Y(T,W.i0,W.i1),W.est=U(W.bst);const Z={i0:X,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:O.bst.N-W.bst.N},G=0;G<16;G++)Z.bst.R[G]=O.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)Z.bst.m[G]=O.bst.m[G]-W.bst.m[G];Z.est=U(Z.bst),O.left=W,O.right=Z,D[P]=W,D.push(Z)}for(D.sort(((ee,P)=>P.bst.N-ee.bst.N)),G=0;G<D.length;G++)D[G].ind=G;return[j,D]}function L(T,E,R,C,j){if(T.left==null)return T.tdst=(function(W,Z,$,K,ne){const te=Z-W[0],se=$-W[1],_e=K-W[2],Re=ne-W[3];return te*te+se*se+_e*_e+Re*Re})(T.est.q,E,R,C,j),T;const D=F(T.est,E,R,C,j);let G=T.left,ee=T.right;D>0&&(G=T.right,ee=T.left);const P=L(G,E,R,C,j);if(P.tdst<=D*D)return P;const O=L(ee,E,R,C,j);return O.tdst<P.tdst?O:P}function F(T,E,R,C,j){const{e:D}=T;return D[0]*E+D[1]*R+D[2]*C+D[3]*j-T.eMq}function B(T,E,R,C,j,D){for(C-=4;R<C;){for(;H(T,R,j)<=D;)R+=4;for(;H(T,C,j)>D;)C-=4;if(R>=C)break;const G=E[R>>2];E[R>>2]=E[C>>2],E[C>>2]=G,R+=4,C-=4}for(;H(T,R,j)>D;)R-=4;return R+4}function H(T,E,R){return T[E]*R[0]+T[E+1]*R[1]+T[E+2]*R[2]+T[E+3]*R[3]}function Y(T,E,R){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],D=R-E>>2;for(let G=E;G<R;G+=4){const ee=T[G]*.00392156862745098,P=T[G+1]*(1/255),O=T[G+2]*(1/255),X=T[G+3]*(1/255);j[0]+=ee,j[1]+=P,j[2]+=O,j[3]+=X,C[0]+=ee*ee,C[1]+=ee*P,C[2]+=ee*O,C[3]+=ee*X,C[5]+=P*P,C[6]+=P*O,C[7]+=P*X,C[10]+=O*O,C[11]+=O*X,C[15]+=X*X}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:j,N:D}}function U(T){const{R:E}=T,{m:R}=T,{N:C}=T,j=R[0],D=R[1],G=R[2],ee=R[3],P=C==0?0:1/C,O=[E[0]-j*j*P,E[1]-j*D*P,E[2]-j*G*P,E[3]-j*ee*P,E[4]-D*j*P,E[5]-D*D*P,E[6]-D*G*P,E[7]-D*ee*P,E[8]-G*j*P,E[9]-G*D*P,E[10]-G*G*P,E[11]-G*ee*P,E[12]-ee*j*P,E[13]-ee*D*P,E[14]-ee*G*P,E[15]-ee*ee*P],X=O,W=I;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,K=0;if(C!=0)for(let te=0;te<16&&(Z=W.multVec(X,Z),K=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/K,Z),!(te!=0&&Math.abs(K-$)<1e-9));te++)$=K;const ne=[j*P,D*P,G*P,ee*P];return{Cov:O,q:ne,e:Z,L:$,eMq255:W.dot(W.sml(255,ne),Z),eMq:W.dot(Z,ne),rgba:(Math.round(255*ne[3])<<24|Math.round(255*ne[2])<<16|Math.round(255*ne[1])<<8|Math.round(255*ne[0])<<0)>>>0}}var I={multVec:(T,E)=>[T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],T[4]*E[0]+T[5]*E[1]+T[6]*E[2]+T[7]*E[3],T[8]*E[0]+T[9]*E[1]+T[10]*E[2]+T[11]*E[3],T[12]*E[0]+T[13]*E[1]+T[14]*E[2]+T[15]*E[3]],dot:(T,E)=>T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],sml:(T,E)=>[T*E[0],T*E[1],T*E[2],T*E[3]]};is.encode=function(E,R,C,j,D,G,ee){j==null&&(j=0),ee==null&&(ee=!1);const P=g(E,R,C,j,[!1,!1,!1,0,ee,!1]);return f(P,-1),h(P,R,C,D,G)},is.encodeLL=function(E,R,C,j,D,G,ee,P){const O={ctype:0+(j==1?0:2)+(D==0?0:4),depth:G,frames:[]},X=(j+D)*G,W=X*R;for(let Z=0;Z<E.length;Z++)O.frames.push({rect:{x:0,y:0,width:R,height:C},img:new Uint8Array(E[Z]),blend:0,dispose:1,bpp:Math.ceil(X/8),bpl:Math.ceil(W/8)});return f(O,0,!0),h(O,R,C,ee,P)},is.encode.compress=g,is.encode.dither=u,is.quantize=N,is.quantize.getKDtree=M,is.quantize.getNearest=L})();const Nk={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,o=n.getContext("2d").getImageData(0,0,t,r),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,h=u*r,f=122+h,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,x,N,M,L=v,F=0,B=0,H=0;function Y(T){y.setUint16(B,T,!0),B+=2}function U(T){y.setUint32(B,T,!0),B+=4}function I(T){B+=T}Y(19778),U(f),I(4),U(122),U(108),U(t),U(-r>>>0),Y(1),Y(32),U(3),U(h),U(2835),U(2835),I(8),U(16711680),U(65280),U(255),U(4278190080),U(1466527264),(function T(){for(;F<r&&L>0;){for(M=122+F*u,w=0;w<i;)L--,x=c[H++],N=x>>>24,y.setUint32(M+w,x<<8|N),w+=4;F++}H<c.length?(L=v,setTimeout(T,Nk._dly)):e(g)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var lr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},yU={[lr.CHROME]:16384,[lr.FIREFOX]:11180,[lr.DESKTOP_SAFARI]:16384,[lr.IE]:8192,[lr.IOS]:4096,[lr.ETC]:8192};const mv=typeof window<"u",Ck=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,jm=mv&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),_U=(mv||Ck)&&(jm&&jm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Dk=(mv||Ck)&&(jm&&jm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function gv(n,e,t=Date.now()){return new Promise((r=>{const i=n.split(","),o=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let u=c.length;const h=new Uint8Array(u);for(;u--;)h[u]=c.charCodeAt(u);const f=new Blob([h],{type:o});f.name=e,f.lastModified=t,r(f)}))}function Ok(n){return new Promise(((e,t)=>{const r=new Dk;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)}))}function Mk(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n}))}function To(){if(To.cachedResult!==void 0)return To.cachedResult;let n=lr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=lr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=lr.IOS:/Safari/i.test(e)?n=lr.DESKTOP_SAFARI:/Firefox/i.test(e)?n=lr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=lr.IE),To.cachedResult=n,To.cachedResult}function Pk(n,e){const t=To(),r=yU[t];let i=n,o=e,c=i*o;const u=i>o?o/i:i/o;for(;c>r*r;){const h=(r+i)/2,f=(r+o)/2;h<f?(o=f,i=f*u):(o=h*u,i=h),c=i*o}return{width:i,height:o}}function Tg(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function jk(n,e){const{width:t,height:r}=Pk(n.width,n.height),[i,o]=Tg(t,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(n,0,0,i.width,i.height),i}function Xf(){return Xf.cachedResult!==void 0||(Xf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Xf.cachedResult}function Lm(n,e={}){return new Promise((function(t,r){let i,o;var c=function(){try{return o=jk(i,e.fileType||n.type),t([i,o])}catch(h){return r(h)}},u=function(h){try{var f=function(g){try{throw g}catch(y){return r(y)}};try{let g;return Ok(n).then((function(y){try{return g=y,Mk(g).then((function(v){try{return i=v,(function(){try{return c()}catch(w){return r(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return r(g)}};try{if(Xf()||[lr.DESKTOP_SAFARI,lr.MOBILE_SAFARI].includes(To()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(h){try{return i=h,c()}catch{return u()}}),u)}catch{u()}}))}function Vm(n,e,t,r,i=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=n.getContext("2d"),{data:v}=y.getImageData(0,0,n.width,n.height),w=is.encode([v.buffer],n.width,n.height,4096*i),u=new Blob([w],{type:e}),u.name=t,u.lastModified=r,h.call(this)}{let y=function(){return h.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>Nk.toBlob(n,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=r,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(w){try{return u=w,u.name=t,u.lastModified=r,v.call(this)}catch(x){return c(x)}}).bind(this),c);{let w;return w=n.toDataURL(e,i),gv(w,t,r).then((function(x){try{return u=x,v.call(this)}catch(N){return c(N)}}).bind(this),c)}}}function h(){return o(u)}}))}function Cs(n){n.width=0,n.height=0}function tc(){return new Promise((function(n,e){let t,r,i,o;return tc.cachedResult!==void 0?n(tc.cachedResult):gv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Lm(t).then((function(u){try{return r=u[1],Vm(r,t.type,t.name,t.lastModified).then((function(h){try{return i=h,Cs(r),Lm(i).then((function(f){try{return o=f[0],tc.cachedResult=o.width===1&&o.height===2,n(tc.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(h){return e(h)}}),e)}catch(u){return e(u)}}),e)}))}function Lk(n){return new Promise(((e,t)=>{const r=new Dk;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const h=o.getUint16(u,!1);if(u+=2,h==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&h)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)}))}function Vk(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let o,c=n;return isFinite(i)&&(t>i||r>i)&&([c,o]=Tg(t,r),t>r?(c.width=i,c.height=r/t*i):(c.width=t/r*i,c.height=i),o.drawImage(n,0,0,c.width,c.height),Cs(n)),c}function Uk(n,e){const{width:t}=n,{height:r}=n,[i,o]=Tg(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,r),Cs(n),i}function QT(n,e,t=0){return new Promise((function(r,i){let o,c,u,h,f,g,y,v,w,x,N,M,L,F,B,H,Y,U,I,T;function E(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=C,e.onProgress(Math.min(o,100))}function R(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(C,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,E(),Lm(n,e).then((function(C){try{return[,h]=C,E(),f=Vk(h,e),E(),new Promise((function(j,D){var G;if(!(G=e.exifOrientation))return Lk(n).then((function(P){try{return G=P,ee.call(this)}catch(O){return D(O)}}).bind(this),D);function ee(){return j(G)}return ee.call(this)})).then((function(j){try{return g=j,E(),tc().then((function(D){try{return y=D?f:Uk(f,g),E(),v=e.initialQuality||1,w=e.fileType||n.type,Vm(y,w,n.name,n.lastModified,v).then((function(G){try{{let X=function(){if(c--&&(B>u||B>L)){let Z,$;return Z=T?.95*I.width:I.width,$=T?.95*I.height:I.height,[Y,U]=Tg(Z,$),U.drawImage(I,0,0,Z,$),v*=w==="image/png"?.85:.95,Vm(Y,w,n.name,n.lastModified,v).then((function(K){try{return H=K,Cs(I),I=Y,B=H.size,R(Math.min(99,Math.floor((F-B)/(F-u)*100))),X}catch(ne){return i(ne)}}),i)}return[1]},W=function(){return Cs(I),Cs(Y),Cs(f),Cs(y),Cs(h),R(100),r(H)};var P=X,O=W;if(x=G,E(),N=x.size>u,M=x.size>n.size,!N&&!M)return R(100),r(x);var ee;return L=n.size,F=x.size,B=F,I=y,T=!e.alwaysKeepResolution&&N,(ee=(function(Z){for(;Z;){if(Z.then)return void Z.then(ee,i);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=X}else Z=Z.call(this)}catch($){return i($)}}}).bind(this))(X)}}catch(X){return i(X)}}).bind(this),i)}catch(G){return i(G)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(j){return i(j)}}).bind(this),i)}))}const vU=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Wy;function bU(n,e){return new Promise(((t,r)=>{Wy||(Wy=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(vU));const i=new Worker(Wy);i.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void i.terminate();t(c.data.file),i.terminate()}else e.onProgress(c.data.progress)})),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),i.terminate()})),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function dn(n,e){return new Promise((function(t,r){let i,o,c,u,h,f;if(i={...e},c=0,{onProgress:u}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(n instanceof Blob||n instanceof _U))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||f)return QT(n,i).then((function(w){try{return o=w,v.call(this)}catch(x){return r(x)}}).bind(this),r);var g=(function(){try{return v.call(this)}catch(w){return r(w)}}).bind(this),y=function(w){try{return QT(n,i).then((function(x){try{return o=x,g()}catch(N){return r(N)}}),r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",bU(n,i).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(o=Ik(n,o))}catch{}return t(o)}}))}dn.getDataUrlFromFile=Ok,dn.getFilefromDataUrl=gv,dn.loadImage=Mk,dn.drawImageInCanvas=jk,dn.drawFileInCanvas=Lm,dn.canvasToFile=Vm,dn.getExifOrientation=Lk,dn.handleMaxWidthOrHeight=Vk,dn.followExifOrientation=Uk,dn.cleanupCanvasMemory=Cs,dn.isAutoOrientationInBrowser=tc,dn.approximateBelowMaximumCanvasSizeOfBrowser=Pk,dn.copyExifWithoutOrientation=Ik,dn.getBrowserName=To,dn.version="2.0.2";function wU(){const{t:n,i18n:e}=Bt(),{currentUser:t}=kr(),r=Rr(),i=Ar(),{addToast:o}=Va(),c=z.useRef(null),[u,h]=z.useState("landing"),[f,g]=z.useState(""),[y,v]=z.useState({main:null,macro:null}),[w,x]=z.useState(!1),[N,M]=z.useState(null),[L,F]=z.useState(!1),[B,H]=z.useState(!1),[Y,U]=z.useState(!1);z.useEffect(()=>{if(i.state?.refreshId){P(),h("landing");return}if(i.state?.restoredResult){M(i.state.restoredResult),h("result"),i.state?.restoredImages&&(v(i.state.restoredImages),g(i.state.restoredPlantType||""));return}if(t){const K=localStorage.getItem("pending_analysis_backup");if(K)try{const ne=JSON.parse(K);M(ne.result),v(ne.images),g(ne.plantType||""),h("result"),localStorage.removeItem("pending_analysis_backup"),o(n("analysis_restored")||"Analysis restored!","success")}catch(ne){console.error("Failed to parse backup:",ne),localStorage.removeItem("pending_analysis_backup")}}},[i.state,t]);const I=()=>{u==="input_type"&&h("capture_main")},T=()=>{g(""),h("capture_main")},E=()=>{c.current&&(c.current.value="",c.current.click())},R=K=>{K&&j(K),U(!1)},C=async K=>{const ne=K.target.files?.[0];if(ne){x(!0);try{const se=await dn(ne,{maxSizeMB:.8,maxWidthOrHeight:1280,useWebWorker:!0}),_e=new FileReader;_e.onloadend=()=>{const Re=_e.result;j(Re),x(!1)},_e.readAsDataURL(se)}catch(te){console.error("Image compression failed:",te),o(n("error_image_process")||"Image processing failed","error"),x(!1)}}},j=async K=>{u==="capture_main"?(v(ne=>({...ne,main:K})),await D(K)):u==="capture_macro"&&(v(ne=>({...ne,macro:K})),await D([y.main,K]))},D=async(K,ne)=>{x(!0),h("analyzing"),F(!1);try{const te=await yk(K,e.language,f);if(te.status==="needs_details")o(n("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),h("capture_macro");else{if(te.status==="error")throw new Error(te.error);M(te),h("result")}}catch(te){console.error(te);let se=te.message||n("error_diagnosis_failed")||"Diagnosis failed.";se.includes("NOT_PLANT")?se=n("error_not_plant"):(se.includes("503")||se.includes("overloaded"))&&(se=n("error_server_busy")),o(se,"error"),h("capture_main")}finally{x(!1)}},G=async()=>{if(t&&!(L||B)){H(!0);try{const K=f||N.plant_name||n("unknown_plant")||"Unknown Plant",ne=await _k(t.uid,K,y,N);F(!0),o(n("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{H(!1),r("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ne}})},500)}catch(K){console.error("Manual save failed:",K),o((n("save_fail")||"Failed to save analysis:")+" "+K.message,"error"),H(!1)}}},ee=()=>{const K={result:N,images:y,plantType:f,timestamp:Date.now()};try{localStorage.setItem("pending_analysis_backup",JSON.stringify(K))}catch(ne){console.error("Storage full?",ne)}r("/login",{state:{pendingResult:N,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},P=()=>{v({main:null,macro:null}),g(""),M(null),F(!1),h("input_type"),c.current&&(c.current.value="")},O=()=>_.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[_.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[_.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),_.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),_.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[_.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[_.jsx(nV,{className:"w-4 h-4 text-amber-500"}),_.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:n("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),_.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[n("hero_title_1")||"Heal your plants with"," ",_.jsx("br",{}),_.jsx("span",{className:"text-gradient drop-shadow-sm",children:n("hero_title_highlight")||"AI Precision"})]}),_.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:n("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),_.jsxs("button",{onClick:()=>h("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[_.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),_.jsxs("span",{className:"relative flex items-center gap-3",children:[_.jsx(ac,{className:"w-6 h-6"}),n("start_diagnosis")]})]})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:n("feature_1_title")||"Instant Analysis",desc:n("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:bV,color:"from-yellow-400 to-orange-500"},{title:n("feature_2_title")||"Smart Interactions",desc:n("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:iL,color:"from-blue-400 to-indigo-500"},{title:n("feature_3_title")||"Verified Treatments",desc:n("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:eV,color:"from-green-400 to-emerald-500"}].map((K,ne)=>{const te=K.icon;return _.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[_.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${K.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:_.jsx(te,{className:"w-7 h-7"})}),_.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:K.title}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:K.desc})]},ne)})}),_.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:_.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("summary_title")||"Your Personal Pocket Botanist"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:n("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),_.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[_.jsx(cv,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[_.jsx(RT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),_.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),_.jsx("img",{src:"/placeholder-plant.png",onError:K=>{K.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),_.jsx(ur,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),X=()=>_.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:_.jsx(ur,{className:"w-12 h-12"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:n("scan_step_1")}),_.jsx("p",{className:"text-gray-500 mb-6 text-center",children:n("what_plant_question")}),_.jsx("input",{type:"text",value:f,onChange:K=>g(K.target.value),placeholder:n("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),_.jsxs("button",{onClick:I,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[n("next_step")," ",_.jsx(uv,{className:"w-4 h-4"})]}),_.jsx("button",{onClick:T,className:"mt-4 text-gray-500 text-sm hover:underline",children:n("skip")})]}),W=K=>_.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[_.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:K?n("close_up_photo")||"Close-up Photo":n("scan_step_2")}),_.jsxs("div",{className:"w-full space-y-4",children:[_.jsxs("button",{onClick:()=>U(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[_.jsx(ac,{className:"w-8 h-8"}),_.jsx("span",{children:n("open_camera")||"Open Camera"})]}),_.jsxs("button",{onClick:E,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[_.jsx(JR,{className:"w-6 h-6"}),_.jsx("span",{children:n("upload_gallery")||"Select from Gallery"})]})]}),_.jsx("button",{onClick:()=>h("input_type"),className:"mt-6 text-gray-500 underline",children:n("back")})]}),Z=()=>_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[_.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&_.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:_.jsx($r,{className:"w-16 h-16 text-white animate-spin"})})]}),_.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:n("analyzing")||"Analyzing..."}),_.jsx("p",{className:"text-gray-500 mt-2",children:n("ai_thinking")||"AI Botanist is thinking..."})]}),$=()=>_.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[_.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:_.jsxs("div",{className:"sticky top-4",children:[_.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&_.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&_.jsx("button",{onClick:G,disabled:L||B,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${L||B?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:L?_.jsxs(_.Fragment,{children:[_.jsx(xg,{className:"w-6 h-6"}),_.jsx("span",{children:n("saved")||"Kaydedildi"})]}):B?_.jsxs(_.Fragment,{children:[_.jsx($r,{className:"w-5 h-5 animate-spin"}),_.jsx("span",{children:n("saving")||"Kaydediliyor..."})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:_.jsx(sk,{className:"w-5 h-5"})}),_.jsx("span",{className:"text-lg",children:N?.is_treatable===!1?n("save_info")||"Bilgiyi Kaydet":n("start_treatment")||"Tedaviye Bala"})]})}),_.jsxs("button",{onClick:P,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[n("take_photo")," (Reset)"]})]})}),_.jsxs("div",{className:"w-full md:w-2/3 relative",children:[_.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:_.jsx(dU,{result:N,onReset:P})}),!t&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:_.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:_.jsx(RT,{className:"w-8 h-8 text-green-600"})}),_.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n("login_to_view")}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:n("login_blur_text")}),_.jsx("button",{onClick:ee,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:n("login")})]})})]})]});return _.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[_.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:C,className:"hidden"}),_.jsx(hU,{isOpen:Y,onClose:()=>U(!1),onCapture:R}),u==="landing"?O():_.jsxs(_.Fragment,{children:[u!=="result"&&_.jsxs("button",{onClick:()=>h("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",n("back")]}),u==="input_type"&&X(),u==="capture_main"&&W(!1),u==="capture_macro"&&W(!0),u==="analyzing"&&Z(),u==="result"&&$()]})]})}const If=43200,WT=1440,XT=Symbol.for("constructDateFrom");function pv(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&XT in n?n[XT](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ma(n,e){return pv(n,n)}let xU={};function EU(){return xU}function JT(n){const e=Ma(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function yv(n,...e){const t=pv.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function Jf(n,e){const t=+Ma(n)-+Ma(e);return t<0?-1:t>0?1:t}function TU(n){return pv(n,Date.now())}function SU(n,e,t){const[r,i]=yv(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),c=r.getMonth()-i.getMonth();return o*12+c}function AU(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function RU(n,e){return+Ma(n)-+Ma(e)}function kU(n,e){const t=Ma(n);return t.setHours(23,59,59,999),t}function IU(n,e){const t=Ma(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function NU(n,e){const t=Ma(n);return+kU(t)==+IU(t)}function CU(n,e,t){const[r,i,o]=yv(t?.in,n,n,e),c=Jf(i,o),u=Math.abs(SU(i,o));if(u<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-c*u);let h=Jf(i,o)===-c;NU(r)&&u===1&&Jf(r,o)===1&&(h=!1);const f=c*(u-+h);return f===0?0:f}function DU(n,e,t){const r=RU(n,e)/1e3;return AU(t?.roundingMethod)(r)}const OU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MU=(n,e,t)=>{let r;const i=OU[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function oc(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const PU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VU={date:oc({formats:PU,defaultWidth:"full"}),time:oc({formats:jU,defaultWidth:"full"}),dateTime:oc({formats:LU,defaultWidth:"full"})},UU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zU=(n,e,t,r)=>UU[n];function Ds(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,u=t?.width?String(t.width):c;i=n.formattingValues[u]||n.formattingValues[c]}else{const c=n.defaultWidth,u=t?.width?String(t.width):n.defaultWidth;i=n.values[u]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const FU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$U={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},KU=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},YU={ordinalNumber:KU,era:Ds({values:FU,defaultWidth:"wide"}),quarter:Ds({values:BU,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ds({values:qU,defaultWidth:"wide"}),day:Ds({values:HU,defaultWidth:"wide"}),dayPeriod:Ds({values:$U,defaultWidth:"wide",formattingValues:GU,defaultFormattingWidth:"wide"})};function Os(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?WU(u,y=>y.test(c)):QU(u,y=>y.test(c));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function QU(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function WU(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function zk(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}const XU=/^(\d+)(th|st|nd|rd)?/i,JU=/\d+/i,ZU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e9={any:[/^b/i,/^(a|c)/i]},t9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},n9={any:[/1/i,/2/i,/3/i,/4/i]},r9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},s9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},a9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},c9={ordinalNumber:zk({matchPattern:XU,parsePattern:JU,valueCallback:n=>parseInt(n,10)}),era:Os({matchPatterns:ZU,defaultMatchWidth:"wide",parsePatterns:e9,defaultParseWidth:"any"}),quarter:Os({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:n9,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Os({matchPatterns:r9,defaultMatchWidth:"wide",parsePatterns:s9,defaultParseWidth:"any"}),day:Os({matchPatterns:i9,defaultMatchWidth:"wide",parsePatterns:a9,defaultParseWidth:"any"}),dayPeriod:Os({matchPatterns:o9,defaultMatchWidth:"any",parsePatterns:l9,defaultParseWidth:"any"})},Kd={code:"en-US",formatDistance:MU,formatLong:VU,formatRelative:zU,localize:YU,match:c9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function u9(n,e,t){const r=EU(),i=t?.locale??r.locale??Kd,o=2520,c=Jf(n,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[h,f]=yv(t?.in,...c>0?[e,n]:[n,e]),g=DU(f,h),y=(JT(f)-JT(h))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?i.formatDistance("lessThanXSeconds",5,u):g<10?i.formatDistance("lessThanXSeconds",10,u):g<20?i.formatDistance("lessThanXSeconds",20,u):g<40?i.formatDistance("halfAMinute",0,u):g<60?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",1,u):v===0?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",v,u);if(v<45)return i.formatDistance("xMinutes",v,u);if(v<90)return i.formatDistance("aboutXHours",1,u);if(v<WT){const x=Math.round(v/60);return i.formatDistance("aboutXHours",x,u)}else{if(v<o)return i.formatDistance("xDays",1,u);if(v<If){const x=Math.round(v/WT);return i.formatDistance("xDays",x,u)}else if(v<If*2)return w=Math.round(v/If),i.formatDistance("aboutXMonths",w,u)}if(w=CU(f,h),w<12){const x=Math.round(v/If);return i.formatDistance("xMonths",x,u)}else{const x=w%12,N=Math.trunc(w/12);return x<3?i.formatDistance("aboutXYears",N,u):x<9?i.formatDistance("overXYears",N,u):i.formatDistance("almostXYears",N+1,u)}}function Sg(n,e){return u9(n,TU(n),e)}const d9={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},h9=(n,e,t)=>{let r;const i=d9[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?r+" sonra":r+" nce":r},f9={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},m9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},g9={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p9={date:oc({formats:f9,defaultWidth:"full"}),time:oc({formats:m9,defaultWidth:"full"}),dateTime:oc({formats:g9,defaultWidth:"full"})},y9={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},_9=(n,e,t,r)=>y9[n],v9={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},b9={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},w9={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},x9={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},E9={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},T9={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},S9=(n,e)=>Number(n)+".",A9={ordinalNumber:S9,era:Ds({values:v9,defaultWidth:"wide"}),quarter:Ds({values:b9,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Ds({values:w9,defaultWidth:"wide"}),day:Ds({values:x9,defaultWidth:"wide"}),dayPeriod:Ds({values:E9,defaultWidth:"wide",formattingValues:T9,defaultFormattingWidth:"wide"})},R9=/^(\d+)(\.)?/i,k9=/\d+/i,I9={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},N9={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},C9={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},D9={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},O9={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},M9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},P9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},j9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},L9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},V9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},U9={ordinalNumber:zk({matchPattern:R9,parsePattern:k9,valueCallback:function(n){return parseInt(n,10)}}),era:Os({matchPatterns:I9,defaultMatchWidth:"wide",parsePatterns:N9,defaultParseWidth:"any"}),quarter:Os({matchPatterns:C9,defaultMatchWidth:"wide",parsePatterns:D9,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Os({matchPatterns:O9,defaultMatchWidth:"wide",parsePatterns:M9,defaultParseWidth:"any"}),day:Os({matchPatterns:P9,defaultMatchWidth:"wide",parsePatterns:j9,defaultParseWidth:"any"}),dayPeriod:Os({matchPatterns:L9,defaultMatchWidth:"any",parsePatterns:V9,defaultParseWidth:"any"})},Ag={code:"tr",formatDistance:h9,formatLong:p9,formatRelative:_9,localize:A9,match:U9,options:{weekStartsOn:1,firstWeekContainsDate:1}},Fk=z.createContext();function _v(){return z.useContext(Fk)}function z9({children:n}){const[e,t]=z.useState(!1),[r,i]=z.useState("login"),f={isOpen:e,view:r,openLogin:()=>{i("login"),t(!0)},openRegister:()=>{i("register"),t(!0)},closeModal:()=>{t(!1)},toggleView:()=>{i(g=>g==="login"?"register":"login")}};return _.jsx(Fk.Provider,{value:f,children:n})}function vv({post:n,onUserClick:e,onViewAnalysis:t,isDetailView:r=!1,authorOverride:i=null}){const{openLogin:o}=_v(),c=Rr(),{t:u,i18n:h}=Bt(),{currentUser:f}=kr(),g=h.language==="tr"?Ag:Kd,[y,v]=z.useState(""),[w,x]=z.useState(r),[N,M]=z.useState(!1),[L,F]=z.useState(!1),[B,H]=z.useState(n?.content||""),[Y,U]=z.useState(null),I=f?.uid===n?.userId;z.useEffect(()=>{if(!n?.userId||I||i)return;(async()=>{try{const $=Ve(Ae,"users",n.userId),K=await $n($);K.exists()&&U(K.data())}catch($){console.error("Failed to fetch author for post",n.id,$)}})()},[n?.userId,I,i,n.id]);const T=async()=>{try{await kk(n.id,{content:B}),F(!1)}catch{alert("Failed to update post")}};if(!n)return null;const E=n.likes&&f&&n.likes.includes(f.uid),R=n.likes?n.likes.length:0,C=n.comments?n.comments.length:0,[j,D]=z.useState("");z.useEffect(()=>{const Z=()=>{if(!n.createdAt?.seconds){D(u("just_now")||"Just now");return}const K=new Date(n.createdAt.seconds*1e3);(new Date-K)/(1e3*60*60)>24?D(K.toLocaleDateString(h.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):D(Sg(K,{addSuffix:!0,locale:g,includeSeconds:!1}))};Z();const $=setInterval(Z,6e4);return()=>clearInterval($)},[n.createdAt,g,u,h.language]),n.createdAt?.seconds&&new Date(n.createdAt.seconds*1e3);const G=async()=>{if(!(!f||N)){M(!0);try{await Ak(n.id,f.uid)}catch(Z){console.error(Z)}finally{M(!1)}}},ee=async()=>{if(window.confirm(u("confirm_delete_post")||"Delete this post?"))try{await Sk(n.id)}catch{alert("Failed to delete post")}},P=async Z=>{if(Z.preventDefault(),!(!y.trim()||!f))try{await Rk(n.id,f.uid,f.displayName||"User",y),v("")}catch($){console.error($),alert("Failed to post comment")}},O=async()=>{const Z={title:`Plant AI - ${n.title||n.authorName}`,text:n.content,url:window.location.origin+"/#/community/post/"+n.id};if(navigator.share)try{await navigator.share(Z)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(Z.url),alert(u("link_copied")||"Link copied!")},X=Z=>{if(!Z||Z==="Unknown")return null;const $=`plant_${Z.toLowerCase().replace(/\s+/g,"_")}`,K=u($);return!K||K===$?Z.charAt(0).toUpperCase()+Z.slice(1):K},W=I&&(f?.photoURL||f?.avatar)?f.photoURL||f.avatar:i?.photoURL||i?.avatar?i.photoURL||i.avatar:Y?.photoURL||Y?.avatar?Y.photoURL||Y.avatar:n.userAvatar||`https://ui-avatars.com/api/?name=${n.authorName||"Gardener"}&background=random`;return _.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[I&&_.jsx("button",{onClick:ee,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",title:u("delete")||"Delete",children:_.jsx(wd,{className:"w-4 h-4"})}),!n.hideAuthor&&_.jsx("div",{className:"p-4 flex items-center justify-between",children:_.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(n.userId),children:[_.jsx("img",{src:W,alt:n.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:n.authorName||u("gardener")}),_.jsx("span",{className:"text-xs text-gray-500",children:j})]})]})}),_.jsxs("div",{className:`px-4 pb-2 ${n.hideAuthor?"pt-4":""}`,children:[n.title&&_.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:n.title}),_.jsx("p",{className:`text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap ${r?"":"cursor-pointer hover:opacity-80"}`,onClick:()=>!r&&c(`/community/post/${n.id}`),children:n.content}),n.plantType&&n.plantType!=="Unknown"&&_.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:X(n.plantType)}),n.relatedAnalysisId&&_.jsx("div",{className:"mt-2",children:_.jsxs("button",{onClick:()=>t&&t(n.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[_.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),u("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),n.image&&_.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(n.image,"_blank"),children:[_.jsx("img",{src:n.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),_.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[_.jsx(vd,{className:"w-3 h-3"}),_.jsxs("span",{children:[20+(n.likes?.length||0)*5," ",u("views")||"Grntlenme"]})]})]}),_.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("button",{onClick:G,className:`flex items-center gap-1.5 transition-colors ${E?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[_.jsx(WR,{className:`w-5 h-5 ${E?"fill-current":""}`}),_.jsx("span",{className:"text-sm font-medium",children:R||u("like")})]}),_.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>x(!w),children:[_.jsx(vd,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:C||u("comment")})]}),I&&_.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>F(!0),children:[_.jsx(nk,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:u("edit")})]})]}),_.jsxs("button",{onClick:O,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[_.jsx(Mm,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm hidden sm:inline",children:(u("share")||"payla").toLowerCase()})]})]}),L&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[_.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:u("edit_post")}),_.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:B,onChange:Z=>H(Z.target.value),rows:4}),_.jsxs("div",{className:"flex justify-end gap-2",children:[_.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:u("cancel")}),_.jsx("button",{onClick:T,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:u("save")})]})]})}),w&&_.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[_.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[n.comments&&n.comments.map((Z,$)=>_.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[_.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[Z.userName,":"]}),_.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:Z.text})]},$)),(!n.comments||n.comments.length===0)&&_.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:u("no_comments_yet")})]}),f?_.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[_.jsx("input",{type:"text",value:y,onChange:Z=>v(Z.target.value),placeholder:u("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),_.jsx("button",{type:"submit",disabled:!y.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:_.jsx(bd,{className:"w-4 h-4"})})]}):_.jsx("button",{onClick:o,className:"w-full py-3 text-center text-sm text-green-600 bg-green-50 dark:bg-green-900/10 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/20 transition-colors font-medium",children:u("login_to_comment")||"Yorum yapmak iin giri yapn"})]})]})}const Zf=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}],F9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function B9(n){if(!n)return!0;const e=n.toLowerCase();return!F9.some(t=>e.includes(t))}async function q9(n,e){try{const t=Ve(Ae,"users",n);return await Mn(t,{blockedUsers:ov(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function H9(n,e){try{const t=Ve(Ae,"users",n);return await Mn(t,{blockedUsers:qR(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function $9(n,e){try{const t=Ve(Ae,"users",n),r=await $n(t);return r.exists()?(r.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function G9({onClose:n,onPostCreated:e}){const{t}=Bt(),{currentUser:r}=kr(),i=z.useRef(null),[o,c]=z.useState(""),[u,h]=z.useState(""),[f,g]=z.useState(""),[y,v]=z.useState(!1),[w,x]=z.useState("none"),[N,M]=z.useState(null),[L,F]=z.useState(null),[B,H]=z.useState(!1),[Y,U]=z.useState(!1),[I,T]=z.useState(""),[E,R]=z.useState(""),[C,j]=z.useState(0);z.useEffect(()=>{if(u){const O=Zf.find(X=>X.value===u);O&&g(t(O.labelKey))}},[u,t]);const D=async O=>{const X=O.target.files[0];if(X){const W=new FileReader;W.onloadend=()=>F(W.result),W.readAsDataURL(X),M(X)}},G=async()=>{if(N){U(!0);try{let O=N;try{O=await dn(N,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const X=new FileReader;X.readAsDataURL(O),X.onloadend=async()=>{const W=X.result,Z=await yk(W,"en"),$=(Z.plant_name+" "+Z.disease_name).toLowerCase();let K=null;for(const ne of Zf)if($.includes(ne.value)){K=ne;break}K?(h(K.value),g(t(K.labelKey)),R(`${t("auto_detect")}: ${t(K.labelKey)}`)):R("Plant detected but not in our list yet."),setTimeout(()=>R(""),3e3),U(!1)}}catch(O){console.error("Auto detect failed",O),T(t("error_diagnosis_failed")),U(!1)}}},ee=async O=>{if(O.preventDefault(),!!o.trim()){if(!B9(o)){T(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}H(!0),T(""),j(0);try{let X=null;if(N)try{console.log("Compressing for Base64 storage...");const Z=await dn(N,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});X=await new Promise(($,K)=>{const ne=new FileReader;ne.readAsDataURL(Z),ne.onload=()=>$(ne.result),ne.onerror=te=>K(te)}),console.log("Base64 string ready, length:",X.length)}catch(W){console.error("Compression failed:",W),T("Image is too large and could not be compressed."),H(!1);return}await xk(r.uid,{authorName:r.displayName||"Gardener",userAvatar:r.photoURL||r.avatar||null,content:o,plantType:u||"other",image:X}),e(),n()}catch(X){console.error("FULL POST ERROR:",X),T(X.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{H(!1)}}},P=Zf.filter(O=>t(O.labelKey).toLowerCase().includes(f.toLowerCase()));return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),_.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Yr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[I&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:I}),E&&_.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:E}),_.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[_.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:O=>c(O.target.value),required:!0}),_.jsxs("div",{className:"relative",children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),_.jsxs("div",{className:"relative",children:[_.jsx(ik,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),_.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:O=>{g(O.target.value),v(!0),O.target.value===""&&h("")},onFocus:()=>v(!0)}),_.jsx(dv,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&_.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(O=>_.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{h(O.value),g(t(O.labelKey)),v(!1)},children:t(O.labelKey)},O.value)):_.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&_.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),L&&_.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[_.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}),_.jsx("button",{type:"button",onClick:()=>{M(null),F(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:B,children:_.jsx(Yr,{className:"w-4 h-4"})}),_.jsxs("button",{type:"button",onClick:G,disabled:Y,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[Y?_.jsx($r,{className:"w-3 h-3 animate-spin"}):_.jsx(yV,{className:"w-3 h-3"}),t(Y?"detecting":"auto_detect")]})]}),B&&C>0&&_.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[_.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${C}%`}}),_.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(C),"%"]})]}),_.jsxs("div",{className:"flex justify-between items-center pt-2",children:[_.jsxs("button",{type:"button",onClick:()=>i.current?.click(),disabled:B,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[_.jsx(JR,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),_.jsx("input",{type:"file",ref:i,onChange:D,accept:"image/*",className:"hidden"}),_.jsxs("button",{type:"submit",disabled:B||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[B?_.jsx($r,{className:"w-4 h-4 animate-spin"}):_.jsx(bd,{className:"w-4 h-4"}),B?"...":t("ask_question")]})]})]})]})]})})}function K9({user:n,onClose:e}){const{currentUser:t}=kr(),r=Rr(),[i,o]=z.useState(!1),{t:c,i18n:u}=Bt(),{addToast:h}=Va(),{openLogin:f}=_v(),[g,y]=z.useState(n),[v,w]=z.useState(!1);z.useEffect(()=>{if(!n)return;const T=n.uid||n.id;if(!T)return;const E=qs(Ve(Ae,"users",T),R=>{R.exists()&&y({uid:R.id,...R.data()})},R=>{console.error("User listener error",R)});return()=>E()},[n]);const x=n?{...n,...g,uid:g?.uid||n.uid||n.id}:null,[N,M]=z.useState(!1),[L,F]=z.useState(!1);z.useEffect(()=>{(async()=>{if(t&&x){const{isFollowing:E,isRequested:R}=await lk(t.uid,x.uid);M(E),F(R)}})()},[t,x]);const[B,H]=z.useState(!1);z.useEffect(()=>{t&&x&&$9(t.uid,x.uid).then(H)},[t,x]);const Y=async()=>{if(!(!t||!x))try{B?(await H9(t.uid,x.uid),H(!1),h(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await q9(t.uid,x.uid),H(!0),h(c("user_blocked")||"User blocked","success"))}catch(T){console.error(T),h("Action failed","error")}},U=async()=>{if(!t){f();return}if(!v){console.log("Follow Toggle Initiated:",{currentUser:t.uid,targetUser:x.uid,status:{isFollowing:N,isRequested:L}}),w(!0);try{N?(console.log("Unfollowing..."),await Qf(t.uid,x.uid),M(!1),F(!1),h(c("unfollowed_user")||"Takipten kld","info")):L?(console.log("Cancelling Request..."),await uk(t.uid,x.uid),F(!1),h(c("request_cancelled")||"stek iptal edildi","info")):(console.log("Sending Request...",{uid:t.uid,name:t.displayName,photo:t.photoURL}),await ck(t.uid,{displayName:t.displayName||"Unknown User",photoURL:t.photoURL||null},x.uid),F(!0),h(c("request_sent")||"Takip istei gnderildi","success"))}catch(T){console.error("Follow Error:",T),h(c("error_occurred")||"Bir hata olutu: "+T.message,"error")}finally{w(!1)}}},I=T=>!T?.lastSeen||!T.lastSeen.seconds?!1:Date.now()-T.lastSeen.seconds*1e3<180*1e3;return!n||!x?null:_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:T=>T.stopPropagation(),children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:_.jsx(Yr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),_.jsxs("div",{className:"flex flex-col items-center relative",children:[_.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name}`,alt:x.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),_.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${I(x)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${I(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),I(x)?"Online":"Offline"]}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:x.name||"User"}),_.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[_.jsx(xd,{className:"w-3 h-3"}),_.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString(u.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),_.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[_.jsxs("button",{onClick:()=>{e(),r(`/profile/${x.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[_.jsx(xd,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),_.jsxs("div",{className:"flex gap-3 w-full",children:[t&&t.uid!==x.uid&&_.jsx("button",{onClick:U,disabled:v,className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 ${N?"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-white":L?"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:N?_.jsxs(_.Fragment,{children:[_.jsx(dV,{className:"w-5 h-5"}),c("following")||"Following"]}):L?_.jsxs(_.Fragment,{children:[_.jsx(Eg,{className:"w-5 h-5"}),c("requested")||"Requested"]}):_.jsxs(_.Fragment,{children:[_.jsx(hv,{className:"w-5 h-5"}),c("follow")||"Follow"]})}),t&&t.uid!==x.uid&&_.jsxs("button",{onClick:async()=>{if(N){e();const T={uid:x.uid,name:x.name||x.displayName||"User",photoURL:x.photoURL||x.avatar||null};r("/messages/new",{state:{targetUser:T}})}else h(c("must_follow_to_message")||"Mesaj gndermek iin takip etmelisin","info")},className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-sm transition-transform active:scale-95 ${N?"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-200":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[_.jsx(vd,{className:"w-5 h-5"}),c("send_message")||"Mesaj Gnder"]})]}),t&&t.uid!==x.uid&&_.jsx("button",{onClick:Y,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${B?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:B?c("unblock_user")||"Unblock User":c("block_user")||"Block User"})]})]})]})})}function Rg(){return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:_.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[_.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[_.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),_.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),_.jsx(ur,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),_.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}const Y9=({fact:n})=>{const{t:e}=Bt(),[t,r]=z.useState(null);if(z.useEffect(()=>{if(!n)return;const u=Math.floor(Math.random()*1e3);r(`https://source.unsplash.com/featured/?${encodeURIComponent(n.imageKeyword)},nature,plant&sig=${u}`);const h=`https://image.pollinations.ai/prompt/${encodeURIComponent("realistic nature photography "+n.imageKeyword)}?nologo=true`;r(h)},[n]),!n)return null;const i=()=>{switch(n.type){case"pest":return _.jsx(oL,{className:"text-red-500 w-6 h-6"});case"disease":return _.jsx(ek,{className:"text-yellow-500 w-6 h-6"});case"tip":return _.jsx(AL,{className:"text-yellow-400 w-6 h-6"});default:return _.jsx(ur,{className:"text-green-500 w-6 h-6"})}},o=()=>{switch(n.type){case"pest":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"disease":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"tip":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},c=async()=>{const u={title:`Plant AI Daily Tip: ${n.title}`,text:n.content,url:window.location.origin};if(navigator.share)try{await navigator.share(u)}catch{}else navigator.clipboard.writeText(n.content),alert("Copied to clipboard!")};return _.jsxs("div",{className:`mb-6 rounded-xl border p-4 shadow-sm relative overflow-hidden ${o()} transition-all hover:shadow-md`,children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-full shadow-sm",children:_.jsx(ur,{className:"text-green-600 w-5 h-5"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e("daily_bot_title")||"Plant AI Gnlk Bilgi"}),_.jsx("div",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString()})]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[_.jsxs("div",{className:"w-full md:w-1/3 h-48 md:h-auto relative rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shadow-inner group",children:[t&&_.jsx("img",{src:t,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),_.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"AI Generated"})]}),_.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i(),_.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 leading-tight",children:n.title})]}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-4",children:n.content}),_.jsx("div",{className:"mt-auto flex justify-end border-t border-gray-200 dark:border-gray-700/50 pt-3",children:_.jsxs("button",{onClick:c,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[_.jsx(Mm,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:(e("share")||"payla").toLowerCase()})]})})]})]})]})},Q9="daily_posts",W9=async()=>{const n=new Date().toISOString().split("T")[0],e=Ve(Ae,Q9,n);try{const t=await $n(e);if(t.exists())return t.data();{const i={...await lU("tr"),date:n,createdAt:En(),likes:0,views:0};return await Gs(e,i),i}}catch(t){return console.error("Error fetching/creating daily post:",t),null}};function X9({analysisId:n,onClose:e}){const[t,r]=z.useState(null),[i,o]=z.useState(!0);return z.useEffect(()=>{async function c(){try{const u=await $n(Ve(Ae,"analyses",n));if(u.exists()){const h=u.data();let f=[];try{f=(await Ni(Zt(Ae,"analyses",n,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(g){console.warn("Could not fetch updates for modal",g)}r({...h,updates:f})}}catch(u){console.error(u)}finally{o(!1)}}c()},[n]),z.useEffect(()=>{const c=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e]),i?_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:_.jsx($r,{className:"animate-spin text-white w-8 h-8"})}):t?_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:c=>c.stopPropagation(),children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:_.jsx(Yr,{className:"w-5 h-5 text-gray-500"})}),_.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:_.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[_.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&_.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[_.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),_.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),_.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:_.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[_.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&_.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),_.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((c,u)=>_.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[_.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:u+1}),_.jsx("span",{children:c})]},u))})]}),t.updates&&t.updates.length>0&&_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((c,u)=>_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.imageUrl&&_.jsx("img",{src:c.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString():""}),_.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:c.note})]},u))})]})]})]})}):null}function J9(){const{t:n}=Bt(),{currentUser:e}=kr(),[t,r]=z.useState([]),[i,o]=z.useState(!0),[c,u]=z.useState(!1),[h,f]=z.useState(null),[g,y]=z.useState(null),[v,w]=z.useState(null),[x,N]=z.useState("All"),[M,L]=z.useState(!1),[F,B]=z.useState(""),H=10,[Y,U]=z.useState(!0),T=[{value:"All",labelKey:"community"},...Zf].filter(E=>(E.value==="All"?n("community")+" (All)":n(E.labelKey)).toLowerCase().includes(F.toLowerCase()));return z.useEffect(()=>{o(!0);let E;x==="All"?E=Sr(Zt(Ae,"posts"),bg("createdAt","desc"),Nm(H)):E=Sr(Zt(Ae,"posts"),La("plantType","==",x),Nm(50));const R=qs(E,C=>{const j=C.docs.map(D=>({id:D.id,...D.data()}));j.sort((D,G)=>{const ee=D.createdAt?.seconds||Date.now()/1e3;return(G.createdAt?.seconds||Date.now()/1e3)-ee}),r(j),o(!1),U(C.docs.length>=H)},C=>{console.error("Error fetching posts:",C),o(!1)});return()=>R()},[x]),z.useEffect(()=>{async function E(){const R=await W9();R&&w(R)}E()},[]),_.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:n("community")}),_.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[_.jsxs("div",{className:"relative w-full sm:w-64",children:[_.jsxs("div",{className:"relative",children:[_.jsx(ik,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),_.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:n("select_plant"),value:F,onFocus:()=>L(!0),onChange:E=>{B(E.target.value),L(!0)}}),x!=="All"?_.jsx("button",{onClick:()=>{N("All"),B("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:_.jsx(Yr,{className:"w-4 h-4 text-gray-500"})}):_.jsx(dv,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),M&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>L(!1)}),_.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[T.map(E=>_.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{N(E.value),B(E.value==="All"?"":n(E.labelKey)),L(!1)},children:[_.jsx("span",{children:E.value==="All"?n("community"):n(E.labelKey)}),x===E.value&&_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},E.value)),T.length===0&&_.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:n("no_results")||"No results"})]})]})]}),_.jsxs("button",{onClick:()=>{if(!e){alert(n("login_to_post")||"Please login to post.");return}u(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[_.jsx(GL,{className:"w-5 h-5"}),_.jsx("span",{className:"hidden sm:inline",children:n("ask_question")}),_.jsx("span",{className:"sm:hidden",children:n("ask_question")})]})]})]}),i?_.jsx(Rg,{}):_.jsxs("div",{className:"space-y-6",children:[v&&_.jsx(Y9,{fact:v}),t.length>0?t.map(E=>_.jsx(vv,{post:E,onViewAnalysis:R=>y(R),onUserClick:R=>{f({id:R,name:E.authorName||"Gardener",avatar:E.userAvatar})}},E.id)):_.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[_.jsx("p",{className:"text-lg mb-2",children:n("no_posts_yet")}),_.jsx("p",{className:"text-sm",children:n("be_the_first")})]})]}),c&&_.jsx(G9,{onClose:()=>u(!1),onPostCreated:()=>{}}),g&&_.jsx(X9,{analysisId:g,onClose:()=>y(null)}),h&&_.jsx(K9,{user:h,onClose:()=>f(null)})]})}function Z9(){const{postId:n}=K0(),e=Rr(),{t}=Bt(),{currentUser:r}=kr(),[i,o]=z.useState(null),[c,u]=z.useState(!0),[h,f]=z.useState(null),[g,y]=z.useState(null);z.useEffect(()=>{if(!n)return;u(!0);const w=Ve(Ae,"posts",n),x=qs(w,N=>{if(N.exists()){const M={id:N.id,...N.data()};if(o(M),f(null),M.userId){const L=Ve(Ae,"users",M.userId);$n(L).then(F=>{F.exists()&&y(F.data())})}}else f(t("post_not_found")||"Post not found"),o(null);u(!1)},N=>{console.error("Error fetching post:",N),f(t("error_fetching_post")||"Error loading post"),u(!1)});return()=>x()},[n,t]);const v=()=>{e("/community")};return c?_.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:_.jsx($r,{className:"w-8 h-8 animate-spin text-green-600"})}):h?_.jsxs("div",{className:"max-w-2xl mx-auto p-4 text-center",children:[_.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 p-4 rounded-lg mb-4",children:h}),_.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-green-600 hover:text-green-700 font-medium mx-auto",children:[_.jsx(z0,{className:"w-4 h-4"}),t("back_to_community")||"Back to Community"]})]}):_.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 pb-20 flex flex-col gap-4",children:[_.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[_.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:_.jsx(z0,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),_.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("back_to_community")||"Toplulua Dn"})]}),i&&_.jsx("div",{className:"w-full",children:_.jsx(vv,{post:i,isDetailView:!0,onUserClick:w=>e(`/profile/${w}`),authorOverride:g})})]})}function e8({chat:n,currentUser:e}){const[t,r]=z.useState(null),{t:i}=Bt(),{addToast:o}=Va(),c=n.participants.find(v=>v!==e.uid);z.useEffect(()=>{(async()=>{if(c)try{const w=await $n(Ve(Ae,"users",c));if(w.exists())r(w.data());else{const x=n.participantData?.[c];x&&r(x)}}catch(w){console.error("Error fetching user",w)}})()},[c,n.participantData]);const u=t||{name:"Unknown User",photoURL:null},h=async v=>{if(v.preventDefault(),!!window.confirm(i("confirm_delete_chat")||"Delete this chat permanently?"))try{await Ks(Ve(Ae,"chats",n.id)),o("Chat deleted","success")}catch(w){console.error("Delete Chat Error",w),o("Failed to delete chat","error")}},{i18n:f}=Bt(),g=f.language==="tr"?Ag:Kd,y=v=>v?v===" Photo"||v.includes(" Photo")?` ${i("photo")||"Photo"}`:v===" Voice Message"||v.includes(" Voice Message")?` ${i("voice_message")||"Voice Message"}`:v:i("new_conversation")||"Yeni Sohbet";return _.jsxs("div",{className:"relative group",children:[_.jsxs(Br,{to:`/messages/${n.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[_.jsx("img",{src:u.photoURL||u.avatar||`https://ui-avatars.com/api/?name=${u.name||"User"}`,alt:u.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[_.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:u.name||u.displayName||"Loading..."}),n.updatedAt&&_.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:Sg(new Date(n.updatedAt.seconds*1e3),{addSuffix:!0,locale:g})})]}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:y(n.lastMessage)})]})]}),_.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:_.jsx(wd,{className:"w-5 h-5"})})]})}function t8(){const{currentUser:n}=kr(),{t:e}=Bt(),[t,r]=z.useState([]),[i,o]=z.useState(!0);return z.useEffect(()=>{if(!n)return;const c=Sr(Zt(Ae,"chats"),La("participants","array-contains",n.uid)),u=qs(c,h=>{const f=h.docs.map(g=>({id:g.id,...g.data()})).sort((g,y)=>{const v=g.updatedAt?.seconds||0;return(y.updatedAt?.seconds||0)-v});r(f),o(!1)});return()=>u()},[n]),i?_.jsx(Rg,{}):_.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[_.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:e("messages")}),_.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:t.length===0?_.jsx("div",{className:"p-8 text-center text-gray-500",children:e("no_messages")||"No messages yet. Start a conversation!"}):t.map(c=>_.jsx(e8,{chat:c,currentUser:n},c.id))})]})}const n8="modulepreload",r8=function(n){return"/"+n},ZT={},s8=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");i=f(t.map(g=>{if(g=r8(g),g in ZT)return;ZT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":n8,y||(w.as="script"),w.crossOrigin="",w.href=g,h&&w.setAttribute("nonce",h),document.head.appendChild(w),y)return new Promise((x,N)=>{w.addEventListener("load",x),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function Wn(n,e,t,r){return new(t||(t=Promise))((function(i,o){function c(f){try{h(r.next(f))}catch(g){o(g)}}function u(f){try{h(r.throw(f))}catch(g){o(g)}}function h(f){var g;f.done?i(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}h((r=r.apply(n,e||[])).next())}))}class Yd{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),r?.once){const i=(...o)=>{this.un(e,i),t(...o)};return this.listeners[e].add(i),()=>this.un(e,i)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var r;(r=this.listeners[e])===null||r===void 0||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((r=>r(...t)))}}const Nf={decode:function(n,e){return Wn(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(n)}finally{t.close()}}))},createBuffer:function(n,e){if(!n||n.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof n[0]=="number"&&(n=[n]),!n[0]||n[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(r){const i=r[0];if(i.some((o=>o>1||o<-1))){const o=i.length;let c=0;for(let u=0;u<o;u++){const h=Math.abs(i[u]);h>c&&(c=h)}for(const u of r)for(let h=0;h<o;h++)u[h]/=c}})(n);const t=n.map((r=>r instanceof Float32Array?r:Float32Array.from(r)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:r=>{const i=t[r];if(!i)throw new Error(`Channel ${r} not found`);return i},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Bk(n,e){const t=e.xmlns?document.createElementNS(e.xmlns,n):document.createElement(n);for(const[r,i]of Object.entries(e))if(r==="children"&&i)for(const[o,c]of Object.entries(i))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(Bk(o,c));else r==="style"?Object.assign(t.style,i):r==="textContent"?t.textContent=i:t.setAttribute(r,i.toString());return t}function eS(n,e,t){const r=Bk(n,e||{});return t?.appendChild(r),r}var i8=Object.freeze({__proto__:null,createElement:eS,default:eS});const a8={fetchBlob:function(n,e,t){return Wn(this,void 0,void 0,(function*(){const r=yield fetch(n,t);if(r.status>=400)throw new Error(`Failed to fetch ${n}: ${r.status} (${r.statusText})`);return(function(i,o){Wn(this,void 0,void 0,(function*(){if(!i.body||!i.headers)return;const c=i.body.getReader(),u=Number(i.headers.get("Content-Length"))||0;let h=0;const f=g=>{h+=g?.length||0;const y=Math.round(h/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(r.clone(),e),r.blob()}))}};function Jt(n){let e=n;const t=new Set;return{get value(){return e},set(r){Object.is(e,r)||(e=r,t.forEach((i=>i(e))))},update(r){this.set(r(e))},subscribe:r=>(t.add(r),()=>t.delete(r))}}function xo(n,e){const t=Jt(n());return e.forEach((r=>r.subscribe((()=>{const i=n();Object.is(t.value,i)||t.set(i)})))),{get value(){return t.value},subscribe:r=>t.subscribe(r)}}function ya(n,e){let t;const r=()=>{t&&(t(),t=void 0),t=n()},i=e.map((o=>o.subscribe(r)));return r(),()=>{t&&(t(),t=void 0),i.forEach((o=>o()))}}class o8 extends Yd{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Jt(!1),this._currentTime=Jt(0),this._duration=Jt(0),this._volume=Jt(this.media.volume),this._muted=Jt(this.media.muted),this._playbackRate=Jt(this.media.playbackRate||1),this._seeking=Jt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,r){return this.media.addEventListener(e,t,r),()=>this.media.removeEventListener(e,t,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const r=this.getSrc();if(e&&r===e)return;this.revokeSrc();const i=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(r&&this.media.removeAttribute("src"),i||e)try{this.media.src=i}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Wn(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function l8({maxTop:n,maxBottom:e,halfHeight:t,vScale:r,barMinHeight:i=0,barAlign:o}){let c=Math.round(n*t*r),u=c+Math.round(e*t*r)||1;return u<i&&(u=i,o||(c=u/2)),{topHeight:c,totalHeight:u}}function c8({barAlign:n,halfHeight:e,topHeight:t,totalHeight:r,canvasHeight:i}){return n==="top"?0:n==="bottom"?i-r:e-t}function tS(n,e,t){const r=e-n.left,i=t-n.top;return[r/n.width,i/n.height]}function qk(n){return!!(n.barWidth||n.barGap||n.barAlign)}function nS(n,e){if(!qk(e))return n;const t=e.barWidth||.5,r=t+(e.barGap||t/2);return r===0?n:Math.floor(n/r)*r}function rS({scrollLeft:n,totalWidth:e,numCanvases:t}){if(e===0)return[0];const r=n/e,i=Math.floor(r*t);return[i-1,i,i+1]}function Hk(n){const e=n._cleanup;typeof e=="function"&&e()}function u8(n){const e=Jt({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth}),t=xo((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:h}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+h)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),r=xo((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),i=()=>{e.set({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth})};return n.addEventListener("scroll",i,{passive:!0}),{scrollData:e,percentages:t,bounds:r,cleanup:()=>{n.removeEventListener("scroll",i),Hk(e)}}}class d8 extends Yd{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const r=this.parentFromOptionsContainer(e.container);this.parent=r;const[i,o]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const r=this.wrapper.getBoundingClientRect(),[i,o]=tS(r,t.clientX,t.clientY);this.emit("click",i,o)})),this.wrapper.addEventListener("dblclick",(t=>{const r=this.wrapper.getBoundingClientRect(),[i,o]=tS(r,t.clientX,t.clientY);this.emit("dblclick",i,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=u8(this.scrollContainer);const e=ya((()=>{const{startX:t,endX:r}=this.scrollStream.percentages.value,{left:i,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,r,i,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,r={}){const{threshold:i=3,mouseButton:o=0,touchDelay:c=100}=r,u=Jt(null),h=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(h.set(v.pointerId,v),h.size>1))return;let w=v.clientX,x=v.clientY,N=!1;const M=Date.now(),L=t.getBoundingClientRect(),{left:F,top:B}=L,H=E=>{if(E.defaultPrevented||h.size>1||f&&Date.now()-M<c)return;const R=E.clientX,C=E.clientY,j=R-w,D=C-x;(N||Math.abs(j)>i||Math.abs(D)>i)&&(E.preventDefault(),E.stopPropagation(),N||(u.set({type:"start",x:w-F,y:x-B}),N=!0),u.set({type:"move",x:R-F,y:C-B,deltaX:j,deltaY:D}),w=R,x=C)},Y=E=>{if(h.delete(E.pointerId),N){const R=E.clientX,C=E.clientY;u.set({type:"end",x:R-F,y:C-B})}g()},U=E=>{h.delete(E.pointerId),E.relatedTarget&&E.relatedTarget!==document.documentElement||Y(E)},I=E=>{N&&(E.stopPropagation(),E.preventDefault())},T=E=>{E.defaultPrevented||h.size>1||N&&E.preventDefault()};document.addEventListener("pointermove",H),document.addEventListener("pointerup",Y),document.addEventListener("pointerout",U),document.addEventListener("pointercancel",U),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("click",I,{capture:!0}),g=()=>{document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",Y),document.removeEventListener("pointerout",U),document.removeEventListener("pointercancel",U),document.removeEventListener("touchmove",T),setTimeout((()=>{document.removeEventListener("click",I,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),h.clear(),Hk(u)}}})(this.wrapper);const e=ya((()=>{const t=this.dragStream.signal.value;if(!t)return;const r=this.wrapper.getBoundingClientRect().width,i=(o=t.x/r)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",i)):t.type==="move"?this.emit("drag",i):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",i))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,r=t*e;this.setScroll(r)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,r;const i=()=>{t&&(clearTimeout(t),t=void 0),r&&(r(),r=void 0)};return this.timeouts.push(i),()=>new Promise(((o,c)=>{i(),r=c,t=setTimeout((()=>{t=void 0,r=void 0,o()}),e)}))}getHeight(e,t){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:h,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/h:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:i,defaultHeight:128})}convertColorValues(e,t){return(function(r,i,o){if(!Array.isArray(r))return r||"";if(r.length===0)return"#999";if(r.length<2)return r[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),h=o??c.height*i,f=u.createLinearGradient(0,0,0,h||i),g=1/(r.length-1);return r.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,r,i){const{width:o,height:c}=r.canvas,{halfHeight:u,barWidth:h,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:x,height:N,length:M,options:L,pixelRatio:F}){const B=N/2,H=L.barWidth?L.barWidth*F:1,Y=L.barGap?L.barGap*F:L.barWidth?H/2:0,U=H+Y||1;return{halfHeight:B,barWidth:H,barGap:Y,barRadius:L.barRadius||0,barMinHeight:L.barMinHeight?L.barMinHeight*F:0,barIndexScale:M>0?x/U/M:0,barSpacing:U}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:x,barIndexScale:N,barSpacing:M,barWidth:L,halfHeight:F,vScale:B,canvasHeight:H,barAlign:Y,barMinHeight:U}){const I=x[0]||[],T=x[1]||I,E=I.length,R=[];let C=0,j=0,D=0;for(let G=0;G<=E;G++){const ee=Math.round(G*N);if(ee>C){const{topHeight:X,totalHeight:W}=l8({maxTop:j,maxBottom:D,halfHeight:F,vScale:B,barMinHeight:U,barAlign:Y}),Z=c8({barAlign:Y,halfHeight:F,topHeight:X,totalHeight:W,canvasHeight:H});R.push({x:C*M,y:Z,width:L,height:W}),C=ee,j=0,D=0}const P=Math.abs(I[G]||0),O=Math.abs(T[G]||0);P>j&&(j=P),O>D&&(D=O)}return R})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:h,halfHeight:u,vScale:i,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});r.beginPath();for(const x of w)f&&"roundRect"in r?r.roundRect(x.x,x.y,x.width,x.height,f):r.rect(x.x,x.y,x.width,x.height);r.fill(),r.closePath()}renderLineWaveform(e,t,r,i){const{width:o,height:c}=r.canvas,u=(function({channelData:h,width:f,height:g,vScale:y}){const v=g/2,w=h[0]||[];return[w,h[1]||w].map(((x,N)=>{const M=x.length,L=M?f/M:0,F=v,B=N===0?-1:1,H=[{x:0,y:F}];let Y=0,U=0;for(let I=0;I<=M;I++){const T=Math.round(I*L);if(T>Y){const R=F+(Math.round(U*v*y)||1)*B;H.push({x:Y,y:R}),Y=T,U=0}const E=Math.abs(x[I]||0);E>U&&(U=E)}return H.push({x:Y,y:F}),H}))})({channelData:e,width:o,height:c,vScale:i});r.beginPath();for(const h of u)if(h.length){r.moveTo(h[0].x,h[0].y);for(let f=1;f<h.length;f++){const g=h[f];r.lineTo(g.x,g.y)}}r.fill(),r.closePath()}renderWaveform(e,t,r){if(r.fillStyle=this.convertColorValues(t.waveColor,r),t.renderFunction)return void t.renderFunction(e,r);const i=(function({channelData:o,barHeight:c,normalize:u,maxPeak:h}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=h??0;if(!h)for(let w=0;w<y.length;w++){const x=(f=y[w])!==null&&f!==void 0?f:0,N=Math.abs(x);N>v&&(v=N)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});qk(t)?this.renderBarWaveform(e,t,r,i):this.renderLineWaveform(e,t,r,i)}renderSingleCanvas(e,t,r,i,o,c,u){const h=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(r*h),f.height=Math.round(i*h),f.style.width=`${r}px`,f.style.height=`${i}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,r,i,o,c){const u=this.getPixelRatio(),{clientWidth:h}=this.scrollContainer,f=r/u,g=(function({clientWidth:x,totalWidth:N,options:M}){return nS(Math.min(8e3,x,N),M)})({clientWidth:h,totalWidth:f,options:t});let y={};if(g===0)return;const v=x=>{if(x<0||x>=w||y[x])return;y[x]=!0;const N=x*g;let M=Math.min(f-N,g);if(M=nS(M,t),M<=0)return;const L=(function({channelData:F,offset:B,clampedWidth:H,totalWidth:Y}){return F.map((U=>{const I=Math.floor(B/Y*U.length),T=Math.floor((B+H)/Y*U.length);return U.slice(I,T)}))})({channelData:e,offset:N,clampedWidth:M,totalWidth:f});this.renderSingleCanvas(L,t,M,i,N,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let x=0;x<w;x++)v(x);return}if(rS({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((x=>v(x))),w>1){const x=this.on("scroll",(()=>{const{scrollLeft:N}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),rS({scrollLeft:N,totalWidth:f,numCanvases:w}).forEach((M=>v(M)))}));this.unsubscribeOnScroll.push(x)}}renderChannel(e,t,r,i){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(w=Object.getOwnPropertySymbols(g);x<w.length;x++)y.indexOf(w[x])<0&&Object.prototype.propertyIsEnumerable.call(g,w[x])&&(v[w[x]]=g[w[x]])}return v})(t,["overlay"]);const u=document.createElement("div"),h=this.getHeight(c.height,c.splitChannels);u.style.height=`${h}px`,o&&i>0&&(u.style.marginTop=`-${h}px`),this.canvasWrapper.style.minHeight=`${h}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,r,h,u,f)}render(e){return Wn(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:h}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const x=Math.ceil(f*g),N=x>y,M=!!(v&&!N);return{scrollWidth:x,isScrollable:N,useParentWidth:M,width:(M?y:x)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:i,fillParent:this.options.fillParent,pixelRatio:r});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,h,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,h,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((r=>r())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect(),i=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(r-t);this.scrollContainer.scrollLeft+=i}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:o}=this.scrollContainer,c=e*i,u=r,h=r+o,f=o/2;if(this.isDragging)c+30>h?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>h)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-r-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const r=100*e;this.canvasWrapper.style.clipPath=`polygon(${r}% 0%, 100% 0%, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,r){return Wn(this,void 0,void 0,(function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const o=Array.from(i).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(i).map((o=>new Promise(((c,u)=>{o.toBlob((h=>{h?c(h):u(new Error("Could not export image"))}),e,t)})))))}))}}class h8 extends Yd{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Xy extends Yd{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Wn(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Wn(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,r=this.bufferNode;r?.stop(this.audioContext.currentTime+t),r?.addEventListener("ended",(()=>{r===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Wn(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let r=0;r<t;r++)e.push(this.buffer.getChannelData(r));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const f8={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Sd extends o8{static create(e){return new Sd(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Xy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},f8,e);const{state:r,actions:i}=(function(u){var h,f,g,y,v,w;const x=(h=u?.currentTime)!==null&&h!==void 0?h:Jt(0),N=(f=u?.duration)!==null&&f!==void 0?f:Jt(0),M=(g=u?.isPlaying)!==null&&g!==void 0?g:Jt(!1),L=(y=u?.isSeeking)!==null&&y!==void 0?y:Jt(!1),F=(v=u?.volume)!==null&&v!==void 0?v:Jt(1),B=(w=u?.playbackRate)!==null&&w!==void 0?w:Jt(1),H=Jt(null),Y=Jt(null),U=Jt(""),I=Jt(0),T=Jt(0),E=xo((()=>!M.value),[M]),R=xo((()=>H.value!==null),[H]),C=xo((()=>R.value&&N.value>0),[R,N]),j=xo((()=>x.value),[x]),D=xo((()=>N.value>0?x.value/N.value:0),[x,N]);return{state:{currentTime:x,duration:N,isPlaying:M,isPaused:E,isSeeking:L,volume:F,playbackRate:B,audioBuffer:H,peaks:Y,url:U,zoom:I,scrollPosition:T,canPlay:R,isReady:C,progress:j,progressPercent:D},actions:{setCurrentTime:G=>{const ee=Math.max(0,Math.min(N.value||1/0,G));x.set(ee)},setDuration:G=>{N.set(Math.max(0,G))},setPlaying:G=>{M.set(G)},setSeeking:G=>{L.set(G)},setVolume:G=>{const ee=Math.max(0,Math.min(1,G));F.set(ee)},setPlaybackRate:G=>{const ee=Math.max(.1,Math.min(16,G));B.set(ee)},setAudioBuffer:G=>{H.set(G),G&&N.set(G.duration)},setPeaks:G=>{Y.set(G)},setUrl:G=>{U.set(G)},setZoom:G=>{I.set(Math.max(0,G))},setScrollPosition:G=>{T.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=r,this.wavesurferActions=i,this.timer=new h8;const o=t?void 0:this.getMediaElement();this.renderer=new d8(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:h}=this.options;(c||u&&h)&&this.load(c,u,h).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const r=[];r.push(ya((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),r.push(ya((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),r.push(ya((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let i=!1;r.push(ya((()=>{e.isReady.value&&!i&&(i=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return r.push(ya((()=>{const c=e.isPlaying.value,u=e.currentTime.value,h=e.duration.value,f=h>0&&u>=h;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),r.push(ya((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{r.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,r,i)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,r,i)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(r=>{var i;if(!this.options.interact)return;this.renderer.renderProgress(r),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(i=c.debounceTime)!==null&&i!==void 0?i:200),e=setTimeout((()=>{this.seekTo(r)}),o),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Nf.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Nf.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((r=>r!==e)),this.subscriptions=this.subscriptions.filter((r=>r!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,r,i){return Wn(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!r){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const h=g=>this.emit("loading",g);t=yield a8.fetchBlob(e,h,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const h=i||this.getDuration();h?u(h):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof Xy&&(u.duration=c)}if(r)this.decodedData=Nf.createBuffer(r,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Nf.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,r){return Wn(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,r)}catch(i){throw this.emit("error",i),i}}))}loadBlob(e,t,r){return Wn(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,r)}catch(i){throw this.emit("error",i),i}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<i;c++){const u=this.decodedData.getChannelData(c),h=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const x=y[w];Math.abs(x)>Math.abs(v)&&(v=x)}h.push(Math.round(v*r)/r)}o.push(h)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const r=Object.create(null,{play:{get:()=>super.play}});return Wn(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const i=yield r.play.call(this);return t!=null&&(this.media instanceof Xy?this.media.stopAt(t):this.stopAtPosition=t),i}))}playPause(){return Wn(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Wn(this,arguments,void 0,(function*(e="image/png",t=1,r="dataURL"){return this.renderer.exportImage(e,t,r)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Sd.BasePlugin=class extends Yd{constructor(n){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=n}onInit(){}_init(n){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((n=>n())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},Sd.dom=i8;const m8=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}),g8=({src:n,isMine:e,messageId:t})=>{const r=z.useRef(null),i=z.useRef(null),[o,c]=z.useState(!1),[u,h]=z.useState(0),[f,g]=z.useState(0);z.useEffect(()=>{if(r.current)return i.current&&i.current.destroy(),i.current=Sd.create({container:r.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:n}),i.current.on("play",()=>c(!0)),i.current.on("pause",()=>c(!1)),i.current.on("timeupdate",w=>g(w)),i.current.on("ready",w=>h(w)),i.current.on("finish",()=>c(!1)),()=>{i.current&&i.current.destroy()}},[n,e]);const y=()=>{i.current&&i.current.playPause()},v=w=>{if(!w)return"0:00";const x=Math.floor(w/60),N=Math.floor(w%60);return`${x}:${N<10?"0":""}${N}`};return _.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[_.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?_.jsx(FL,{className:"w-5 h-5 fill-current"}):_.jsx(HL,{className:"w-5 h-5 fill-current ml-0.5"})}),_.jsx("div",{className:"flex-1 overflow-hidden relative",ref:r}),_.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function p8(){const{chatId:n}=K0(),{currentUser:e}=kr(),{t,i18n:r}=Bt(),i=Rr(),o=z.useRef(null),c=z.useRef(null),{addToast:u}=Va();z.useEffect(()=>{e||i("/login")},[e,i]);const[h,f]=z.useState([]),[g,y]=z.useState(""),[v,w]=z.useState(!0),[x,N]=z.useState(null),[M,L]=z.useState(null),[F,B]=z.useState(null),[H,Y]=z.useState(!1),[U,I]=z.useState(null),[T,E]=z.useState(0),[R,C]=z.useState(null),[j,D]=z.useState(!1),[G,ee]=z.useState(null),P=Ar(),[O,X]=z.useState(P.state?.targetUser||null),[W,Z]=z.useState(n==="new"?null:n);z.useEffect(()=>{n!=="new"&&Z(n)},[n]),z.useEffect(()=>{n==="new"&&O&&e&&(async()=>{try{N(O);const Se=Sr(Zt(Ae,"chats"),La("participants","array-contains",e.uid)),je=(await Ni(Se)).docs.find(Te=>Te.data().participants.includes(O.uid));je?(Z(je.id),i(`/messages/${je.id}`,{replace:!0})):w(!1)}catch(Se){console.warn("Error checking existing chats:",Se)}})()},[n,O,e]),z.useEffect(()=>{if(n==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=qs(Ve(Ae,"chats",W),He=>{if(He.exists()){const je=He.data(),Te=je.participants.find(at=>at!==e.uid);if(Te){if(je.participantData?.[Te]){const at=je.participantData[Te];N(_t=>_t?.id===Te?_t:{...at,id:Te})}L(Te)}}else n!=="new"&&i("/messages")}),Se=qs(Zt(Ae,"chats",W,"messages"),He=>{const je=He.docs.map(Te=>({id:Te.id,...Te.data()})).sort((Te,at)=>(Te.createdAt?.seconds||0)-(at.createdAt?.seconds||0));f(je),w(!1),F||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Se(),pe()}},[W,e,F,n,i]),z.useEffect(()=>{if(!M)return;const pe=qs(Ve(Ae,"users",M),Se=>{if(Se.exists()){const He=Se.data();N(je=>({...je,...He}))}});return()=>pe()},[M]);const $=async(pe,Se=null,He=null,je="text")=>{D(!0);try{let Te=W;if(!Te&&n==="new"){if(!O)throw new Error("Target user missing");const{startChat:mt}=await s8(async()=>{const{startChat:Kn}=await Promise.resolve().then(()=>uU);return{startChat:Kn}},[]);Te=await mt(e.uid,O.uid,{name:O.name,avatar:O.photoURL},{name:e.displayName,avatar:e.photoURL}),Z(Te),window.history.replaceState(null,"",`/messages/${Te}`)}let at=null,_t=je,Gn=He;if(Se||R){let mt=Se||R.file;if(_t==="image"||R?.type==="image"){_t="image",Gn=Gn||R?.file.name;const Kn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{mt=await dn(mt,Kn)}catch(qt){console.warn("Compression failed, using original",qt)}}else R&&(_t=R.type,Gn=R.file.name);if(at=await m8(mt),at.length>95e4)throw new Error("File is too large for database storage even after compression.")}F?(await Mn(Ve(Ae,"chats",Te,"messages",F),{text:pe,editedAt:En()}),B(null)):(await $d(Zt(Ae,"chats",Te,"messages"),{text:pe||"",type:_t,fileUrl:at,fileName:Gn,senderId:e.uid,createdAt:En()}),await Mn(Ve(Ae,"chats",Te),{lastMessage:_t==="audio"?" Voice Message":_t==="image"?" Photo":pe||" File",updatedAt:En()})),y(""),C(null)}catch(Te){console.error("Send failed",Te),u(Te.message||"Failed to send message","error")}finally{D(!1)}},K=async pe=>{pe.preventDefault(),!(!g.trim()&&!R)&&await $(g)},ne=async pe=>{if(window.confirm("Delete this message?"))try{await Ks(Ve(Ae,"chats",n,"messages",pe)),u("Message deleted","success")}catch(Se){console.error("Delete failed",Se),u("Could not delete message","error")}},te=r.language==="tr"?Ag:Kd,se=pe=>{if(!pe?.lastSeen)return"Offline";const Se=pe.lastSeen.seconds*1e3;return Date.now()-Se<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${Sg(new Date(Se),{addSuffix:!0,locale:te})}`},_e=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Re=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",we=pe=>{const Se=pe.target.files[0];if(!Se)return;if(Se.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const He=Se.type.startsWith("image/")?"image":"file",je=He==="image"?URL.createObjectURL(Se):null;C({file:Se,type:He,previewUrl:je})},ye=pe=>{y(pe.text||""),B(pe.id),C(null),c.current&&(c.current.value="")},Ue=()=>{B(null),y(""),C(null)},Je=z.useRef("cancel"),Ke=z.useRef(null),ct=z.useRef(null),Xe=z.useRef(null),[tt,At]=z.useState(0);z.useEffect(()=>{let pe;return H?(E(0),pe=setInterval(()=>E(Se=>Se+1),1e3)):(E(0),At(0)),()=>{clearInterval(pe),Xe.current&&cancelAnimationFrame(Xe.current),Ke.current&&Ke.current.close()}},[H]);const ut=()=>{if(!ct.current)return;const pe=new Uint8Array(ct.current.fftSize);ct.current.getByteTimeDomainData(pe);let Se=0;for(let je=0;je<pe.length;je++)Se+=Math.abs(pe[je]-128);const He=Se/pe.length;At(He*10),Xe.current=requestAnimationFrame(ut)},dt=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Se=new(window.AudioContext||window.webkitAudioContext);await Se.resume();const He=Se.createAnalyser();Se.createMediaStreamSource(pe).connect(He),He.fftSize=256,Ke.current=Se,ct.current=He,ut();const Te=new MediaRecorder(pe),at=[];Te.ondataavailable=_t=>at.push(_t.data),Te.onstop=async()=>{if(pe.getTracks().forEach(_t=>_t.stop()),Ke.current&&Ke.current.close(),Xe.current&&cancelAnimationFrame(Xe.current),Je.current==="send"){const _t=new Blob(at,{type:"audio/webm"});await $(null,_t,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},Te.start(),I(Te),Y(!0),Je.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},Ye=pe=>{!U||U.state==="inactive"||(Je.current=pe,U.stop(),Y(!1))};return _.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&_.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[_.jsx("button",{onClick:()=>i("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(z0,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),x?_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name||"User"}`,alt:x.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),_.jsxs("div",{children:[_.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:x.name||x.displayName||"User"}),_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx("span",{className:`w-2 h-2 rounded-full ${_e(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:se(x)})]})]})]}):_.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[h.map(pe=>{const Se=pe.senderId===e.uid,He=pe.type==="audio",je=pe.type==="image",Te=pe.type==="file";return _.jsxs("div",{className:`flex flex-col ${Se?"items-end":"items-start"} group`,children:[_.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Se?"flex-row-reverse":"flex-row"}`,children:[_.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Se?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${He?"min-w-[150px]":""}`,children:[je&&_.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:_.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),He&&_.jsx(g8,{src:pe.fileUrl,isMine:Se,messageId:pe.id}),Te&&_.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[_.jsx(AT,{className:"w-4 h-4"}),_.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&_.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&_.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Se?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Re(pe.editedAt),")"]})]}),Se&&_.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[_.jsx("button",{onClick:()=>ye(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:_.jsx(nk,{className:"w-3 h-3"})}),_.jsx("button",{onClick:()=>ne(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:_.jsx(wd,{className:"w-3 h-3"})})]})]}),_.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Re(pe.createdAt)})]},pe.id)}),_.jsx("div",{ref:o})]}),F&&_.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[_.jsx("span",{children:t("editing_message")||"Editing message..."}),_.jsx("button",{onClick:Ue,children:_.jsx(Yr,{className:"w-4 h-4"})})]}),R&&_.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="image"?_.jsx("img",{src:R.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):_.jsx(_L,{className:"w-8 h-8 text-gray-500"}),_.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:R.file.name})]}),_.jsx("button",{onClick:()=>C(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:_.jsx(Yr,{className:"w-4 h-4 text-gray-500"})})]}),_.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:H?_.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[_.jsx("button",{onClick:()=>Ye("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:_.jsx(wd,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[_.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(T*1e3).toISOString().substr(14,5)}),_.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Se)=>{const He=Math.max(0,tt-5),je=Math.min(1,He/40),Te=Math.sin(Se*.5+Date.now()/100)*.2+.8;return _.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,je*36*Te)}px`,opacity:.5+je*.5}},Se)})})]}),_.jsx("button",{onClick:()=>Ye("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:_.jsx(bd,{className:"w-5 h-5"})})]}):_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"file",ref:c,onChange:we,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),_.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:F,children:_.jsx(AT,{className:"w-5 h-5"})}),_.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:_.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:F?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||R?_.jsx("button",{onClick:K,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?_.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):_.jsx(bd,{className:"w-5 h-5"})}):_.jsx("button",{onClick:dt,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:_.jsx(jL,{className:"w-5 h-5"})})]})})]})}const y8=({isOpen:n,onClose:e,title:t,users:r,loading:i,actionLabel:o,onAction:c})=>{const{t:u}=Bt(),h=Rr();if(!n)return null;const f=g=>{e(),h(`/profile/${g}`)};return _.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:g=>g.stopPropagation(),children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t}),_.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Yr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsx("div",{className:"overflow-y-auto p-4 space-y-3 flex-1",children:i?_.jsx("div",{className:"flex justify-center p-8",children:_.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):r.length===0?_.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[_.jsx(xd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),_.jsx("p",{children:u("no_results")})]}):r.map(g=>_.jsxs("div",{onClick:()=>f(g.id),className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl cursor-pointer transition-colors",children:[_.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.displayName||g.name||"User"}&background=random`,alt:g.displayName||g.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 dark:border-gray-700"}),_.jsx("div",{className:"flex-1 min-w-0",children:_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate",children:g.displayName||g.name||"Unknown User"})}),c&&o&&_.jsx("button",{onClick:y=>{y.stopPropagation(),c(g.id)},className:"text-xs font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors mr-2",children:o}),_.jsx("button",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:u("view_profile")})]},g.id))})]})})};function sS(){const{t:n,i18n:e}=Bt(),t=Rr(),{currentUser:r,refreshUser:i}=kr(),{addToast:o}=Va(),{userId:c}=K0(),[u,h]=z.useState(null),[f,g]=z.useState(""),[y,v]=z.useState(""),[w,x]=z.useState(!1),[N,M]=z.useState([]),[L,F]=z.useState(!0),[B,H]=z.useState(!1),[Y,U]=z.useState(!1),[I,T]=z.useState({followersCount:0,followingCount:0}),[E,R]=z.useState(!1),[C,j]=z.useState("followers"),[D,G]=z.useState([]),[ee,P]=z.useState(!1),O=z.useRef(null),X=!c||r&&c===r.uid,W=c||r?.uid;z.useEffect(()=>{(async()=>{if(W){F(!0);try{let ye=null;if(X&&r)if(ye=r,h(ye),g(ye.name||ye.displayName||""),v(ye.avatar||ye.photoURL||""),ye.followersCount!==void 0)T({followersCount:ye.followersCount||0,followingCount:ye.followingCount||0});else{const ct=await NT(W);T(ct)}else{const ct=Ve(Ae,"users",W),Xe=await $n(ct);Xe.exists()?ye={uid:Xe.id,...Xe.data()}:ye={uid:W,name:"Gardener"},h(ye);const tt=await NT(W);T(tt)}const Ue=Sr(Zt(Ae,"posts"),La("userId","==",String(W)));let Ke=(await Ni(Ue)).docs.map(ct=>({id:ct.id,...ct.data()}));if(Ke.sort((ct,Xe)=>{const tt=ct.createdAt?.seconds||0;return(Xe.createdAt?.seconds||0)-tt}),M(Ke),r&&!X){const{isFollowing:ct,isRequested:Xe}=await lk(r.uid,W);H(ct),U(Xe)}}catch(ye){console.error("Failed to load profile data",ye)}finally{F(!1)}}})()},[W,X,r]);const Z=async()=>{if(!r){o(n("login_required"),"info");return}if(!w){console.log("Follow Toggle Profile:",{currentUser:r.uid,targetUser:W,status:{isFollowing:B,isRequested:Y}}),x(!0);try{B?(console.log("Unfollowing from Profile..."),await Qf(r.uid,W),T(we=>({...we,followersCount:Math.max(0,we.followersCount-1)})),H(!1),U(!1),o(n("unfollowed_user")||"Takipten kld","info")):Y?(console.log("Cancelling Request from Profile..."),await uk(r.uid,W),U(!1),o(n("request_cancelled")||"stek iptal edildi","info")):(console.log("Sending Request from Profile...",{uid:r.uid,name:r.displayName,photo:r.photoURL}),await ck(r.uid,{displayName:r.displayName||"Unknown User",photoURL:r.photoURL||null},W),U(!0),o(n("request_sent")||"Takip istei gnderildi","success"))}catch(we){console.error("Profile Follow Error:",we),o(n("something_went_wrong")+`: ${we.message}`,"error")}finally{x(!1)}}},$=async we=>{j(we),R(!0),P(!0);try{const ye=we==="followers"?await SV(W):await AV(W);G(ye)}catch(ye){console.error(ye)}finally{P(!1)}},K=async we=>{if(!X)return;const ye=we.target.files[0];if(ye){x(!0);try{const Je=await dn(ye,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),Ke=await new Promise(ct=>{const Xe=new FileReader;Xe.readAsDataURL(Je),Xe.onload=tt=>ct(tt.target.result)});v(Ke),await Gs(Ve(Ae,"users",r.uid),{avatar:Ke,photoURL:Ke,email:r.email,name:f||r.displayName,displayName:f||r.displayName,updatedAt:new Date},{merge:!0});try{await cm(Fn.currentUser,{photoURL:Ke})}catch{}H0(r.uid,f,Ke),await i(),o(n("profile_updated")||"Profile updated!","success")}catch(Ue){console.error(Ue),o("Error updating avatar.","error")}finally{x(!1)}}},ne=async we=>{if(we.preventDefault(),!!X&&f.trim()){x(!0);try{await cm(Fn.currentUser,{displayName:f}),await Gs(Ve(Ae,"users",r.uid),{name:f,displayName:f,updatedAt:new Date},{merge:!0}),H0(r.uid,f,y),await i(),o(n("profile_updated")||"Profile updated!","success")}catch{o("Failed to update profile.","error")}finally{x(!1)}}};if(!W)return _.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(L&&!u)return _.jsx(Rg,{});const te=we=>!we?.lastSeen||!we.lastSeen.seconds?!1:Date.now()-we.lastSeen.seconds*1e3<180*1e3,se=we=>we?.lastSeen?Sg(new Date(we.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?Ag:Kd}):"Offline",_e=async we=>{if(confirm(n("confirm_unfollow")||"Takipten kmak istediinize emin misiniz?"))try{await Qf(r.uid,we),G(ye=>ye.filter(Ue=>Ue.id!==we)),T(ye=>({...ye,followingCount:Math.max(0,ye.followingCount-1)})),o(n("unfollowed_user")||"Takipten kld","success")}catch(ye){console.error(ye),o("Error","error")}},Re=async we=>{if(confirm(n("confirm_remove_follower")||"Bu takipiyi karmak istediinize emin misiniz?"))try{await Qf(we,r.uid),G(ye=>ye.filter(Ue=>Ue.id!==we)),T(ye=>({...ye,followersCount:Math.max(0,ye.followersCount-1)})),o(n("follower_removed")||"Takipi karld","success")}catch(ye){console.error(ye),o("Error","error")}};return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:_.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[_.jsx("div",{className:"w-full md:w-1/3",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[_.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[_.jsxs("div",{className:`relative ${X?"group cursor-pointer":""} mt-2`,onClick:()=>X&&O.current?.click(),children:[_.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(X?y:u?.avatar||u?.photoURL)?_.jsx("img",{src:X?y:u?.avatar||u?.photoURL,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:_.jsx("img",{src:`https://ui-avatars.com/api/?name=${X?f||"Gardener":u?.name||u?.displayName||N.length>0&&N[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!X&&u&&_.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${te(u)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[_.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${te(u)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),te(u)?"Online":se(u)]}),X&&_.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:_.jsx(ac,{className:"w-8 h-8 text-white"})}),w&&_.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:_.jsx($r,{className:"animate-spin text-green-600"})})]}),X&&_.jsx("input",{type:"file",ref:O,onChange:K,className:"hidden",accept:"image/*"}),_.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:X?f||n("gardener")||"Bahvan":u?.name||u?.displayName||N.length>0&&N[0].authorName||n("gardener")||"Bahvan"}),X&&_.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),X?_.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),_.jsx("input",{type:"text",value:f,onChange:we=>g(we.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),_.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[w?_.jsx($r,{className:"animate-spin w-4 h-4"}):_.jsx(sk,{className:"w-4 h-4"}),_.jsx("span",{children:n("save_changes")})]})]}):_.jsxs("div",{className:"text-center",children:[_.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",u?.createdAt?.seconds?new Date(u.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),B&&_.jsxs("button",{onClick:()=>{const we={uid:u.uid||W,name:u.name||u.displayName||N.length>0&&N[0].authorName||"Gardener",photoURL:u.photoURL||u.avatar||null};t("/messages/new",{state:{targetUser:we}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[_.jsx(vd,{className:"w-5 h-5"}),_.jsx("span",{children:n("send_message")})]})]}),_.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>$("followers"),children:[_.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:I.followersCount}),_.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("followers")})]}),_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>$("following"),children:[_.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:I.followingCount}),_.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("following_count")})]})]}),!X&&_.jsx("div",{className:"flex gap-2 w-full px-6 mb-6",children:_.jsxs("button",{onClick:Z,disabled:w,className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${B?"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600":Y?"bg-gray-100 text-gray-500 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400":"bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-500/20"}`,children:[w?_.jsx($r,{className:"w-4 h-4 animate-spin"}):B?_.jsx(fV,{className:"w-4 h-4"}):Y?_.jsx(Eg,{className:"w-4 h-4"}):_.jsx(hv,{className:"w-4 h-4"}),B?n("unfollow"):Y?n("requested")||"Requested":n("follow")]})})]})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:_.jsx("span",{children:X?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:u?.name||"Kullanc"})||`${u?.name||"Kullanc"} Gnderileri`})}),L?_.jsx("div",{className:"flex justify-center py-20",children:_.jsx($r,{className:"w-8 h-8 animate-spin text-gray-300"})}):N.length>0?_.jsx("div",{className:"columns-1 gap-6 space-y-6",children:N.map(we=>_.jsx("div",{className:"break-inside-avoid",children:_.jsx(vv,{post:{...we,hideAuthor:X},onViewAnalysis:()=>{},onDelete:ye=>M(Ue=>Ue.filter(Je=>Je.id!==ye))})},we.id))}):_.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[_.jsx(ek,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),_.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})}),_.jsx(y8,{isOpen:E,onClose:()=>R(!1),title:n(C==="followers"?"followers":"following"),users:D,loading:ee,actionLabel:X?C==="following"?n("unfollow")||"Takipten kar":n("remove")||"Takipten kar":null,onAction:X?C==="following"?_e:Re:null})]})}function _8(){const{t:n,i18n:e}=Bt(),t={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:ur},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:B0},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:IT}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:ur},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:B0},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:IT}]}},r=t[e.language]||t.en;return _.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:_.jsx(WR,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),_.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("about")}),_.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',r.intro,'"']})]}),_.jsx("div",{className:"space-y-6",children:r.sections.map((i,o)=>{const c=i.icon;return _.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[_.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:_.jsx(c,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:i.title}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:i.text})]})]},o)})})]})}function v8(){const{t:n}=Bt(),{currentUser:e}=kr();Rr();const t=Ar(),[r,i]=z.useState([]),[o,c]=z.useState(!0),[u,h]=z.useState(null),[f,g]=z.useState(!1),[y,v]=z.useState(null),[w,x]=z.useState(""),[N,M]=z.useState(!1),L=z.useRef(null),F=async(I,T)=>{if(I.stopPropagation(),!!window.confirm(n("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await bk(T),i(E=>E.filter(R=>R.id!==T))}catch(E){console.error("Delete failed",E),alert("Failed to delete analysis.")}};z.useEffect(()=>{e&&B()},[e]),z.useEffect(()=>{t.state?.showTreatmentGuide&&(g(!0),window.history.replaceState({},document.title))},[t]);const B=async()=>{c(!0);const I=await vk(e.uid);i(I),c(!1),t.state?.newAnalysisId?h(t.state.newAnalysisId):I.length>0&&t.state?.showTreatmentGuide&&h(I[0].id)},H=I=>{h(T=>T===I?null:I),v(null)},Y=async(I,T)=>{if(I.stopPropagation(),!T.isPublic&&window.confirm(n("confirm_share")||"Share this diagnosis with the community?"))try{await Ek(T.id,T,T.plantType||"plant",e.displayName||n("gardener")||"Bahvan",e.photoURL),i(E=>E.map(R=>R.id===T.id?{...R,isPublic:!0}:R))}catch(E){console.error("Share failed",E),alert("Failed to share.")}},U=async I=>{if(w.trim()){M(!0);try{let T=null;if(L.current?.files?.[0]){const E=L.current.files[0];T=await new Promise(R=>{const C=new FileReader;C.onload=j=>R(j.target.result),C.readAsDataURL(E)})}await Tk(I.id,T,w),v(null),x(""),B()}catch(T){console.error("Feedback failed",T),alert("Failed to save update.")}finally{M(!1)}}};return o?_.jsx(Rg,{}):r.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:_.jsx(ur,{className:"w-12 h-12 text-green-600"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:n("no_analyses_title")||"Henz Bir Analiz Yok"}),_.jsx("p",{className:"mb-8 max-w-md",children:n("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),_.jsxs(Br,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[_.jsx(ac,{className:"w-5 h-5"}),n("start_diagnosis")||"Analiz Balat"]})]}):_.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[_.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[_.jsx(cv,{className:"w-7 h-7 text-green-600"}),n("treatment_updates")||"Tedavi & Takip"]}),_.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[r.length," ",n("records")||"Kayt"]})]}),_.jsx("div",{className:"grid gap-6",children:r.map(I=>_.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===I.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[_.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer items-center relative",onClick:()=>H(I.id),children:[_.jsx("img",{src:I.mainImage,alt:I.plantType,className:"w-20 h-20 md:w-28 md:h-28 rounded-2xl object-cover bg-gray-100 shadow-sm shrink-0"}),_.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[_.jsxs("div",{className:"min-w-0 flex-1",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight break-words",children:I.plantType||"Unknown Plant"}),(I.result.plant_latin_name||I.result.latin_name)&&_.jsxs("p",{className:"text-sm text-gray-500 italic font-medium mt-0.5",children:["(",I.result.plant_latin_name||I.result.latin_name,")"]})]}),_.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0 h-fit mt-1",children:[_.jsx(Eg,{className:"w-3 h-3"}),I.createdAt?.seconds?new Date(I.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),_.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-1 text-sm flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse shrink-0"}),_.jsx("span",{className:"break-words line-clamp-2",children:I.result.disease_name})]}),_.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-bold text-gray-400 mt-2",children:[_.jsx("span",{className:"text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded",children:"7 Gnlk Program"}),I.isPublic&&_.jsxs("span",{className:"text-blue-500 flex items-center gap-1",children:[_.jsx(Mm,{className:"w-3 h-3"}),"Paylald"]})]})]})]}),_.jsx(dv,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${u===I.id?"rotate-180":""}`}),u===I.id&&_.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:n("description")}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",children:I.result.description})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[_.jsx(kT,{className:"w-5 h-5 text-green-600"}),I.result.is_treatable===!1?n("prevention_tips")||"Koruyucu nlemler":n("treatment_steps")||"Tedavi Admlar"]}),I.result.is_treatable===!1&&_.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:n("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),_.jsx("div",{className:"space-y-3",children:(I.result.is_treatable===!1?I.result.preventive_measures:I.result.treatment_steps)?.map((T,E)=>_.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[_.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${I.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:E+1}),_.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:T})]},E))})]}),I.updates&&I.updates.length>0&&_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),_.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:I.updates.map((T,E)=>_.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm shrink-0",children:[T.imageUrl&&_.jsx("img",{src:T.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(T.createdAt?.seconds*1e3).toLocaleDateString()}),_.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:T.note})]},E))})]}),_.jsxs("div",{className:"flex flex-col gap-3",children:[_.jsxs("div",{className:"flex gap-3",children:[I.result.is_treatable&&_.jsxs("button",{onClick:()=>v(y===I.id?null:I.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[_.jsx(ac,{className:"w-5 h-5"}),n("add_update")||"Gelime Ekle"]}),_.jsxs("button",{onClick:T=>Y(T,I),disabled:I.isPublic,className:`flex-1 px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${I.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[_.jsx(Mm,{className:"w-5 h-5"}),I.isPublic?n("shared")||"Paylald":n("share")||"Payla"]})]}),_.jsxs("button",{onClick:T=>F(T,I.id),className:"w-full py-3 mt-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[_.jsx(wd,{className:"w-4 h-4"}),n("delete_analysis")||"Analizi Sil"]})]}),y===I.id&&_.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[_.jsx("textarea",{value:w,onChange:T=>x(T.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("input",{type:"file",ref:L,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),_.jsx("button",{onClick:()=>U(I),disabled:N,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:N?_.jsx($r,{className:"w-5 h-5 animate-spin"}):_.jsx(bd,{className:"w-5 h-5"})})]})]})]})]},I.id))}),f&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),_.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),_.jsxs("div",{className:"text-center relative z-10",children:[_.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:_.jsx(gL,{className:"w-10 h-10 text-green-600"})}),_.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),_.jsxs("div",{className:"space-y-4 text-left mb-8",children:[_.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:_.jsx(kT,{className:"w-5 h-5 text-blue-500"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),_.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),_.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:_.jsx(ac,{className:"w-5 h-5 text-purple-500"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),_.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),_.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function b8(){const{isOpen:n,view:e,closeModal:t,toggleView:r}=_v(),{t:i}=Bt(),[o,c]=z.useState(""),[u,h]=z.useState(""),[f,g]=z.useState(""),[y,v]=z.useState(!1),[w,x]=z.useState("");if(!n)return null;const N=async M=>{M.preventDefault(),x(""),v(!0);try{if(e==="login")await f0(Fn,o,u);else{const L=await p2(Fn,o,u);await cm(L.user,{displayName:f}),await Gs(Ve(Ae,"users",L.user.uid),{uid:L.user.uid,displayName:f,email:o,createdAt:new Date,photoURL:`https://ui-avatars.com/api/?name=${f}&background=random`})}t(),c(""),h(""),g("")}catch(L){console.error(L),L.code==="auth/invalid-credential"?x(i("error_invalid_credential")||"Hatal e-posta veya ifre"):L.code==="auth/email-already-in-use"?x(i("error_email_in_use")||"Bu e-posta zaten kullanmda"):x(i("error_generic")||"Bir hata olutu")}finally{v(!1)}};return _.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative animate-slide-up",children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors z-10",children:_.jsx(Yr,{className:"w-5 h-5"})}),_.jsxs("div",{className:"p-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e==="login"?i("welcome_back")||"Tekrar Hogeldiniz":i("create_account")||"Hesap Olutur"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e==="login"?i("login_desc")||"Devam etmek iin giri yapn":i("register_desc")||"Toplulua katlmak iin kayt olun"})]}),_.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e==="register"&&_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("full_name")}),_.jsxs("div",{className:"relative",children:[_.jsx(xd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"text",required:!0,value:f,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Ad Soyad"})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("email")}),_.jsxs("div",{className:"relative",children:[_.jsx(tk,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"email",required:!0,value:o,onChange:M=>c(M.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"ornek@email.com"})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("password")}),_.jsxs("div",{className:"relative",children:[_.jsx(IL,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"password",required:!0,value:u,onChange:M=>h(M.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:""})]})]}),w&&_.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg text-center",children:w}),_.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20 flex items-center justify-center gap-2",children:y?_.jsx($r,{className:"w-5 h-5 animate-spin"}):_.jsxs(_.Fragment,{children:[_.jsx("span",{children:e==="login"?i("login")||"Giri Yap":i("register")||"Kayt Ol"}),_.jsx(uv,{className:"w-4 h-4"})]})})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e==="login"?i("no_account")||"Hesabnz yok mu?":i("already_have_account")||"Zaten hesabnz var m?"," ",_.jsx("button",{onClick:r,className:"font-bold text-green-600 hover:text-green-700 transition-colors",children:e==="login"?i("register_now")||"Hemen Kaydol":i("login_now")||"Giri Yap"})]})})]})]})})}var iS={},w8="@vercel/analytics",x8="1.6.1",E8=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function $k(){return typeof window<"u"}function Gk(){try{const n="production"}catch{}return"production"}function T8(n="auto"){if(n==="auto"){window.vam=Gk();return}window.vam=n}function S8(){return($k()?window.vam:Gk())||"production"}function $0(){return S8()==="development"}function A8(n){return n.scriptSrc?n.scriptSrc:$0()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function R8(n={debug:!0}){var e;if(!$k())return;T8(n.mode),E8(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=A8(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=w8+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=x8,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=$0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},$0()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function k8({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function I8(){if(!(typeof process>"u"||typeof iS>"u"))return iS.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function N8(n){return z.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),z.useEffect(()=>{R8({framework:n.framework||"react",basePath:n.basePath??I8(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),z.useEffect(()=>{n.route&&n.path&&k8({route:n.route,path:n.path})},[n.route,n.path]),null}function C8(){return _.jsx(wV,{children:_.jsxs(z9,{children:[_.jsxs(IC,{children:[_.jsxs(br,{path:"/",element:_.jsx(kV,{}),children:[_.jsx(br,{index:!0,element:_.jsx(wU,{})}),_.jsx(br,{path:"community",element:_.jsx(J9,{})}),_.jsx(br,{path:"community/post/:postId",element:_.jsx(Z9,{})}),_.jsx(br,{path:"messages",element:_.jsx(t8,{})}),_.jsx(br,{path:"messages/:chatId",element:_.jsx(p8,{})}),_.jsx(br,{path:"analyses",element:_.jsx(v8,{})}),_.jsx(br,{path:"profile",element:_.jsx(sS,{})}),_.jsx(br,{path:"profile/:userId",element:_.jsx(sS,{})}),_.jsx(br,{path:"about",element:_.jsx(_8,{})})]}),_.jsx(br,{path:"/login",element:_.jsx(IV,{})}),_.jsx(br,{path:"/register",element:_.jsx(CV,{})})]}),_.jsx(b8,{}),_.jsx(N8,{})]})})}const D8="Plant AI",O8="Something went wrong",M8="An unexpected error occurred.",P8="Reload",j8="Go Home",L8="Welcome to Plant AI",V8="Plant Diagnosis",U8="Community",z8="Profile",F8="Login",B8="Messages",q8="Language",H8="Logout",$8="Dark Mode",G8="Light Mode",K8="My Analyses",Y8="Register",Q8="Upload Photo",W8="Take Photo",X8="Analyzing...",J8="Diagnosis Results",Z8="Treatment",ez="Confidence",tz="Save Changes",nz="Saving...",rz="Display Name",sz="Email",iz="Tap to change avatar",az="Profile updated successfully!",oz="About Project",lz="Do you know the name of this plant?",cz="e.g., Rose, Tomato, Unknown...",uz="1. Plant Name",dz="2. Capture Photo",hz="Next",fz="I don't know",mz="I couldn't identify it clearly. Please take a close-up photo of a leaf.",gz="Take Close-up Photo",pz="Login to view detailed diagnosis and treatment plan.",yz="Login to View Results",_z="Detailed analysis is available for members only.",vz="AI Powered Plant Doctor",bz='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',wz="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",xz="Start Diagnosis",Ez="Identify",Tz="Tell us the plant name or type.",Sz="Analyze",Az="Upload photos of the affected area.",Rz="Heal",kz="Get instant treatment plan.",Iz="Welcome, ",Nz="Diagnosis failed. Please try again.",Cz="Back",Dz="Plant",Oz="Tomato",Mz="Pepper",Pz="Cucumber",jz="Rose",Lz="Succulent",Vz="Orchid",Uz="Lemon",zz="Strawberry",Fz="Mint",Bz="Other",qz="Healthy / No Issue",Hz="Yellowing Leaves",$z="Leaf Spots",Gz="Wilting",Kz="Pests / Bugs",Yz="Root/Stem Rot",Qz="Mold / Fungus",Wz="Unknown / Help Needed",Xz="Auto-Detect from Image",Jz="Detecting...",Zz="Ask Question",e7="Please login to post.",t7="Login Required",n7="Are you sure you want to delete this post?",r7="Just now",s7="Failed to delete post",i7="Failed to post comment",a7="Failed to update post",o7="Add a comment...",l7="Please login to comment.",c7="No comments yet. Be the first!",u7="Edit Post",d7="Cancel",h7="Share to Community",f7="Gardener",m7="Community Member",g7="Send Message",p7="Starting...",y7="Please login to message users.",_7="You cannot message yourself.",v7="Failed to start chat.",b7=" No posts yet",w7="Be the first to share your garden!",x7="No results",E7="Like",T7="Comment",S7="Edit",A7="Joined",R7="Unknown Date",k7="View Profile",I7="Block User",N7="Unblock User",C7="Posts",D7="Likes",O7="My Posts",M7="{{name}}'s Posts",P7="New Chat",j7="View Analysis Report",L7="Type a message...",V7="POWERED BY GEMINI AI",U7="Heal your plants with",z7="AI Precision",F7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",B7="Instant Analysis",q7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",H7="Smart Interactions",$7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",G7="Verified Treatments",K7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",Y7="Your Personal Pocket Botanist",Q7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",W7="Open Camera",X7="Select from Gallery",J7="No plant detected. Please ensure the subject is a clear plant or leaf.",Z7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",eF="Retry",tF="Camera access denied. Please check your browser permissions.",nF="Last seen",rF="Prevention Tips",sF="This plant may not fully recover, but follow these steps to prevent spread.",iF="Description",aF="Urgency",oF="Spread Risk",lF="New Scan",cF="Back to Community",uF="Welcome Back",dF="Create Account",hF="Log in to continue",fF="Register to join the community",mF="Register Now",gF="Log In",pF="Don't have an account?",yF="Invalid email or password",_F="Email already in use",vF="An error occurred",bF="Plant AI Daily Log",wF="Delete Analysis",xF="Follow",EF="Following",TF="Followers",SF="Following",AF="Unfollow",RF="No followers yet",kF="Not following anyone yet",IF="Requested",NF="Follow request sent",CF="Request cancelled",DF="You must follow to send message",OF="Notifications",MF="Request accepted",PF="Request rejected",jF="Follow Requests",LF="Wants to follow you",VF="No new notifications",UF="An error occurred",zF="Follow to Message",FF={app_name:D8,something_went_wrong:O8,unexpected_error:M8,reload:P8,go_home:j8,welcome:L8,plant_diagnosis:V8,community:U8,profile:z8,login:F8,messages:B8,language:q8,logout:H8,dark_mode:$8,light_mode:G8,analyses:K8,register:Y8,upload_photo:Q8,take_photo:W8,analyzing:X8,results:J8,treatment:Z8,confidence:ez,save_changes:tz,saving:nz,display_name:rz,email:sz,change_avatar:iz,profile_updated:az,about:oz,what_plant_question:lz,what_plant_placeholder:cz,scan_step_1:uz,scan_step_2:dz,next_step:hz,skip:fz,need_macro_photo:mz,take_macro_photo:gz,login_blur_text:pz,login_to_view:yz,guest_limited:_z,hero_badge:vz,hero_title:bz,hero_desc:wz,start_diagnosis:xz,step_1_title:Ez,step_1_desc:Tz,step_2_title:Sz,step_2_desc:Az,step_3_title:Rz,step_3_desc:kz,welcome_user:Iz,error_diagnosis_failed:Nz,back:Cz,plant:Dz,plant_tomato:Oz,plant_pepper:Mz,plant_cucumber:Pz,plant_rose:jz,plant_succulent:Lz,plant_orchid:Vz,plant_lemon:Uz,plant_strawberry:zz,plant_mint:Fz,plant_other:Bz,disease_none:qz,disease_yellowing:Hz,disease_spots:$z,disease_wilting:Gz,disease_bugs:Kz,disease_rot:Yz,disease_mold:Qz,disease_unknown:Wz,auto_detect:Xz,detecting:Jz,ask_question:Zz,login_to_post:e7,login_required:t7,confirm_delete_post:n7,just_now:r7,failed_delete_post:s7,failed_post_comment:i7,failed_update_post:a7,add_comment_placeholder:o7,login_to_comment:l7,no_comments_yet:c7,edit_post:u7,cancel:d7,share:h7,gardener:f7,community_member:m7,send_message:g7,starting_chat:p7,login_to_message:y7,cannot_message_self:_7,failed_start_chat:v7,no_posts_yet:b7,be_the_first:w7,no_results:x7,like:E7,comment:T7,edit:S7,delete:"Delete",joined:A7,unknown_date:R7,view_profile:k7,block_user:I7,unblock_user:N7,posts:C7,likes:D7,my_posts:O7,user_posts_title:M7,new_conversation:P7,view_analysis_report:j7,type_message:L7,ai_powered_v2:V7,hero_title_1:U7,hero_title_highlight:z7,hero_desc_v2:F7,feature_1_title:B7,feature_1_desc:q7,feature_2_title:H7,feature_2_desc:$7,feature_3_title:G7,feature_3_desc:K7,summary_title:Y7,summary_desc:Q7,open_camera:W7,upload_gallery:X7,error_not_plant:J7,error_server_busy:Z7,retry:eF,camera_permission_denied:tF,last_seen:nF,prevention_tips:rF,plant_not_recoverable:sF,description:iF,urgency:aF,spread_risk:oF,new_scan:lF,back_to_community:cF,welcome_back:uF,create_account:dF,login_desc:hF,register_desc:fF,register_now:mF,login_now:gF,no_account:pF,error_invalid_credential:yF,error_email_in_use:_F,error_generic:vF,daily_bot_title:bF,delete_analysis:wF,follow:xF,following:EF,followers:TF,following_count:SF,unfollow:AF,no_followers:RF,no_following:kF,requested:IF,request_sent:NF,request_cancelled:CF,must_follow_to_message:DF,notifications:OF,request_accepted:MF,request_rejected:PF,follow_requests:jF,wants_to_follow:LF,no_notifications:VF,error_occurred:UF,must_follow:zF},BF="Bitki AI",qF="Bir eyler ters gitti",HF="Beklenmedik bir hata olutu.",$F="Yenile",GF="Ana Sayfa",KF="Bitki AI'ye Hogeldiniz",YF="Bitki Tehisi",QF="Topluluk",WF="Profil",XF="Giri Yap",JF="Mesajlar",ZF="Dil",eB="k Yap",tB="Koyu Tema",nB="Aydnlk Tema",rB="Analizlerim",sB="Kayt Ol",iB="Fotoraf Ykle",aB="Fotoraf ek",oB="Analiz ediliyor...",lB="Bitki",cB="Domates",uB="Biber",dB="Salatalk",hB="Patlcan",fB="Patates",mB="Soan",gB="Sarmsak",pB="Marul",yB="Ispanak",_B="Havu",vB="Fasulye",bB="Msr",wB="Kabak",xB="ilek",EB="Limon",TB="Portakal",SB="Elma",AB="zm",RB="Karpuz",kB="Kavun",IB="Kiraz",NB="eftali",CB="Gl",DB="Orkide",OB="Sukulent",MB="Lale",PB="Ayiei",jB="Papatya",LB="Lavanta",VB="Kakts",UB="Zeytin",zB="am",FB="Palmiye",BB="Nane",qB="Fesleen",HB="Biberiye",$B="Maydanoz",GB="Dier",KB="Salkl / Sorun Yok",YB="Yaprak Sararmas",QB="Yaprak Lekeleri",WB="Solma",XB="Bcek / Haere",JB="Kk/Gvde rmesi",ZB="Kf / Mantar",eq="Mildiy",tq="Besin Eksiklii",nq="Bilinmiyor / Yardm Lazm",rq="Fotoraftan Bul",sq="Taranyor...",iq="Bitki Se...",aq="Tehis Sonular",oq="Tedavi",lq="Gven Oran",cq="Deiiklikleri Kaydet",uq="Analizi Kaydet",dq="Kaydedildi",hq="Analiz baaryla kaydedildi!",fq="Bu analiz zaten toplulukla paylald.",mq="Bu analizi toplulukla paylamak istiyor musunuz?",gq="Baaryla paylald!",pq="Analizlerim",yq="Kaydediliyor...",_q="Grnen sim",vq="E-posta",bq="Fotoraf deitirmek iin dokunun",wq="Profil baaryla gncellendi!",xq="Proje Hakknda",Eq="Bu bitkinin adn biliyor musunuz?",Tq="rn. Gl, Domates, Bilmiyorum...",Sq="1. Bitki Ad",Aq="2. Fotoraf ek",Rq="Devam Et",kq="Bilmiyorum",Iq="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",Nq="Yakndan ek",Cq="Detayl tehis ve tedavi plann grmek iin giri yapn.",Dq="Sonucu Grmek in Giri Yap",Oq="Detayl analiz sadece yelere zeldir.",Mq="Yapay Zeka Destekli Bitki Doktoru",Pq='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',jq="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",Lq="Tehise Bala",Vq="Tanmla",Uq="Bitkinin adn veya trn belirtin.",zq="Analiz Et",Fq="Etkilenen blgenin fotorafn ykleyin.",Bq="yiletir",qq="Annda tedavi planna kavuun.",Hq="Hogeldin, ",$q="Tehis baarsz oldu. Ltfen tekrar deneyin.",Gq="Geri",Kq="Az nce",Yq="Bu gnderiyi silmek istediinize emin misiniz?",Qq="Gnderi silinemedi",Wq="Yorum gnderilemedi",Xq="Gnderi gncellenemedi",Jq="Yorum yaz...",Zq="Yorum yapmak iin giri yapn.",eH="Henz yorum yok. lk yorumu sen yap!",tH="Gnderiyi Dzenle",nH="ptal",rH="Kaydet",sH="Bahvan",iH="Topluluk yesi",aH="Mesaj Gnder",oH="Balatlyor...",lH="Mesaj gndermek iin giri yapn.",cH="Kendinize mesaj atamazsnz.",uH="Sohbet balatlamad.",dH=" Henz gnderi yok",hH="Baheni paylaan ilk kii ol!",fH="Sonu yok",mH="Been",gH="Yorum",pH="Dzenle",yH="Ad Soyad",_H="ifre",vH="Toplulua katlmak iin hesap oluturun.",bH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",wH="E-postanz Dorulayn",xH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",EH="E-posta Uygulamasn A",TH="Doruladm, Giri Yap",SH="Zaten hesabnz var m?",AH="Katlma Tarihi",RH="Bilinmiyor",kH="Profili Gr",IH="Kullancy Engelle",NH="Engeli Kaldr",CH="Gnderi",DH="Beeni",OH="Gnderilerim",MH="{{name}} Gnderileri",PH="Yeni Sohbet",jH="Analiz Raporunu Gr",LH="Mesaj yazn...",VH="GEMINI AI DESTEKL",UH="Bitkilerinizi yiletirin",zH="Yapay Zeka Hassasiyeti",FH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",BH="Annda Analiz",qH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",HH="Akll Etkileimler",$H="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",GH="Dorulanm Tedaviler",KH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",YH="Kiisel Cep Botanikiniz",QH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",WH="Kameray A",XH="Galeriden Se",JH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",ZH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",e$="Tekrar Dene",t$="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",n$="Yakn ekim Fotoraf",r$="Bitki AI Dnyor...",s$="Analiz kaydedilemedi:",i$="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",a$="Bu cihazda mikrofon bulunamad.",o$="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",l$="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",c$="Kaydediliyor...",u$="Mesaj dzenleniyor...",d$="Mesajnz dzenleyin...",h$="Tedavi sreci balatld!",f$="Bilgiyi Kaydet",m$="Tedaviye Bala",g$="Henz Bir Analiz Yok",p$="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",y$="Tedavi & Takip",_$="Kayt",v$="Bu analizi silmek istediinizden emin misiniz?",b$="Gelime Ekle",w$="Paylald",x$="Toplulukta Payla",E$="Toplulukla paylaarak bakalarna yardmc ol!",T$="Soru Sor",S$="Fotoraf",A$="Sesli Mesaj",R$="Son grlme {{days}} gn nce",k$="Son grlme {{hours}} saat nce",I$="Son grlme {{minutes}} dakika nce",N$="Az nce grld",C$="Dzenlendi",D$="Payla",O$="Balanty Kopyala",M$="Balant kopyaland!",P$="Sosyal Medyada Payla",j$="Son grlme",L$="Koruyucu nlemler",V$="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",U$="Aklama",z$="Aciliyet",F$="Yaylma Riski",B$="Yeni Tarama",q$="Toplulua Dn",H$="Tekrar Hogeldiniz",$$="Hesap Olutur",G$="Devam etmek iin giri yapn",K$="Toplulua katlmak iin kayt olun",Y$="Hemen Kaydol",Q$="Giri Yap",W$="Hesabnz yok mu?",X$="Hatal e-posta veya ifre",J$="Bu e-posta zaten kullanmda",Z$="Bir hata olutu",eG="Plant AI Gnlk Bilgi",tG="Analizi Sil",nG="Takip Et",rG="Takip Ediliyor",sG="Takipi",iG="Takip Edilen",aG="Takipten kar",oG="Henz takipi yok",lG="Henz kimseyi takip etmiyor",cG="stek Gnderildi",uG="Takip istei gnderildi",dG="stek iptal edildi",hG="Mesaj gndermek iin takip etmelisiniz",fG="Bildirimler",mG="stek kabul edildi",gG="stek reddedildi",pG="Takip stekleri",yG="Seni takip etmek istiyor",_G="Yeni bildirim yok",vG="Bir hata olutu",bG="Mesaj in Takip Et",wG="Takipten kar",xG="Bu takipiyi listenizden karmak istediinize emin misiniz?",EG="Takipten kmak istediinize emin misiniz?",TG="Takipi karld",SG="Takipten kld",AG={app_name:BF,something_went_wrong:qF,unexpected_error:HF,reload:$F,go_home:GF,welcome:KF,plant_diagnosis:YF,community:QF,profile:WF,login:XF,messages:JF,language:ZF,logout:eB,dark_mode:tB,light_mode:nB,analyses:rB,register:sB,upload_photo:iB,take_photo:aB,analyzing:oB,plant:lB,plant_tomato:cB,plant_pepper:uB,plant_cucumber:dB,plant_eggplant:hB,plant_potato:fB,plant_onion:mB,plant_garlic:gB,plant_lettuce:pB,plant_spinach:yB,plant_carrot:_B,plant_bean:vB,plant_corn:bB,plant_zucchini:wB,plant_strawberry:xB,plant_lemon:EB,plant_orange:TB,plant_apple:SB,plant_grape:AB,plant_watermelon:RB,plant_melon:kB,plant_cherry:IB,plant_peach:NB,plant_rose:CB,plant_orchid:DB,plant_succulent:OB,plant_tulip:MB,plant_sunflower:PB,plant_daisy:jB,plant_lavender:LB,plant_cactus:VB,plant_olive:UB,plant_pine:zB,plant_palm:FB,plant_mint:BB,plant_basil:qB,plant_rosemary:HB,plant_parsley:$B,plant_other:GB,disease_none:KB,disease_yellowing:YB,disease_spots:QB,disease_wilting:WB,disease_bugs:XB,disease_rot:JB,disease_mold:ZB,disease_mildew:eq,disease_nutrient:tq,disease_unknown:nq,auto_detect:rq,detecting:sq,select_plant:iq,results:aq,treatment:oq,confidence:lq,save_changes:cq,save_analysis:uq,saved:dq,save_success:hq,already_shared:fq,confirm_share:mq,share_success:gq,my_analyses:pq,saving:yq,display_name:_q,email:vq,change_avatar:bq,profile_updated:wq,about:xq,what_plant_question:Eq,what_plant_placeholder:Tq,scan_step_1:Sq,scan_step_2:Aq,next_step:Rq,skip:kq,need_macro_photo:Iq,take_macro_photo:Nq,login_blur_text:Cq,login_to_view:Dq,guest_limited:Oq,hero_badge:Mq,hero_title:Pq,hero_desc:jq,start_diagnosis:Lq,step_1_title:Vq,step_1_desc:Uq,step_2_title:zq,step_2_desc:Fq,step_3_title:Bq,step_3_desc:qq,welcome_user:Hq,error_diagnosis_failed:$q,back:Gq,just_now:Kq,confirm_delete_post:Yq,failed_delete_post:Qq,failed_post_comment:Wq,failed_update_post:Xq,add_comment_placeholder:Jq,login_to_comment:Zq,no_comments_yet:eH,edit_post:tH,cancel:nH,save:rH,gardener:sH,community_member:iH,send_message:aH,starting_chat:oH,login_to_message:lH,cannot_message_self:cH,failed_start_chat:uH,no_posts_yet:dH,be_the_first:hH,no_results:fH,like:mH,comment:gH,edit:pH,delete:"Sil",full_name:yH,password:_H,create_account_desc:vH,verification_email_sent:bH,verify_email_title:wH,verify_email_desc:xH,open_email_app:EH,i_verified_it:TH,already_have_account:SH,joined:AH,unknown_date:RH,view_profile:kH,block_user:IH,unblock_user:NH,posts:CH,likes:DH,my_posts:OH,user_posts_title:MH,new_conversation:PH,view_analysis_report:jH,type_message:LH,ai_powered_v2:VH,hero_title_1:UH,hero_title_highlight:zH,hero_desc_v2:FH,feature_1_title:BH,feature_1_desc:qH,feature_2_title:HH,feature_2_desc:$H,feature_3_title:GH,feature_3_desc:KH,summary_title:YH,summary_desc:QH,open_camera:WH,upload_gallery:XH,error_not_plant:JH,error_server_busy:ZH,retry:e$,camera_permission_denied:t$,close_up_photo:n$,ai_thinking:r$,save_fail:s$,mic_access_denied:i$,mic_not_found:a$,mic_unavailable:o$,mic_generic_error:l$,recording:c$,editing_message:u$,edit_message_placeholder:d$,treatment_started:h$,save_info:f$,start_treatment:m$,no_analyses_title:g$,no_analyses_desc:p$,treatment_updates:y$,records:_$,confirm_delete:v$,add_update:b$,shared:w$,share:x$,share_help_others:E$,ask_question:T$,photo:S$,voice_message:A$,last_seen_day:R$,last_seen_hour:k$,last_seen_min:I$,last_seen_just_now:N$,edited:C$,share_title:D$,copy_link:O$,link_copied:M$,social_share:P$,last_seen:j$,prevention_tips:L$,plant_not_recoverable:V$,description:U$,urgency:z$,spread_risk:F$,new_scan:B$,back_to_community:q$,welcome_back:H$,create_account:$$,login_desc:G$,register_desc:K$,register_now:Y$,login_now:Q$,no_account:W$,error_invalid_credential:X$,error_email_in_use:J$,error_generic:Z$,daily_bot_title:eG,delete_analysis:tG,follow:nG,following:rG,followers:sG,following_count:iG,unfollow:aG,no_followers:oG,no_following:lG,requested:cG,request_sent:uG,request_cancelled:dG,must_follow_to_message:hG,notifications:fG,request_accepted:mG,request_rejected:gG,follow_requests:pG,wants_to_follow:yG,no_notifications:_G,request_occurred:vG,must_follow:bG,remove:wG,confirm_remove_follower:xG,confirm_unfollow:EG,follower_removed:TG,unfollowed_user:SG};er.use(U4).init({resources:{en:{translation:FF},tr:{translation:AG}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});MN.createRoot(document.getElementById("root")).render(_.jsx(z.StrictMode,{children:_.jsx(ok,{children:_.jsx(JC,{children:_.jsx(Yj,{children:_.jsx(C8,{})})})})}));
