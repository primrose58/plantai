(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function nN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dy={exports:{}},xu={};var Ew;function rN(){if(Ew)return xu;Ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return xu.Fragment=e,xu.jsx=t,xu.jsxs=t,xu}var Tw;function iN(){return Tw||(Tw=1,dy.exports=rN()),dy.exports}var b=iN(),fy={exports:{}},ze={};var Sw;function sN(){if(Sw)return ze;Sw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function V(q,Q,ie){this.props=q,this.context=Q,this.refs=M,this.updater=ie||E}V.prototype.isReactComponent={},V.prototype.setState=function(q,Q){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Q,"setState")},V.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function H(){}H.prototype=V.prototype;function U(q,Q,ie){this.props=q,this.context=Q,this.refs=M,this.updater=ie||E}var F=U.prototype=new H;F.constructor=U,k(F,V.prototype),F.isPureReactComponent=!0;var K=Array.isArray;function z(){}var D={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function T(q,Q,ie){var se=ie.ref;return{$$typeof:r,type:q,key:Q,ref:se!==void 0?se:null,props:ie}}function I(q,Q){return T(q.type,Q,q.props)}function N(q){return typeof q=="object"&&q!==null&&q.$$typeof===r}function j(q){var Q={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ie){return Q[ie]})}var C=/\/+/g;function G(q,Q){return typeof q=="object"&&q!==null&&q.key!=null?j(""+q.key):Q.toString(36)}function J(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(z,z):(q.status="pending",q.then(function(Q){q.status==="pending"&&(q.status="fulfilled",q.value=Q)},function(Q){q.status==="pending"&&(q.status="rejected",q.reason=Q)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function P(q,Q,ie,se,ne){var _e=typeof q;(_e==="undefined"||_e==="boolean")&&(q=null);var Ae=!1;if(q===null)Ae=!0;else switch(_e){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(q.$$typeof){case r:case e:Ae=!0;break;case g:return Ae=q._init,P(Ae(q._payload),Q,ie,se,ne)}}if(Ae)return ne=ne(q),Ae=se===""?"."+G(q,0):se,K(ne)?(ie="",Ae!=null&&(ie=Ae.replace(C,"$&/")+"/"),P(ne,Q,ie,"",function(et){return et})):ne!=null&&(N(ne)&&(ne=I(ne,ie+(ne.key==null||q&&q.key===ne.key?"":(""+ne.key).replace(C,"$&/")+"/")+Ae)),Q.push(ne)),1;Ae=0;var Pe=se===""?".":se+":";if(K(q))for(var Ce=0;Ce<q.length;Ce++)se=q[Ce],_e=Pe+G(se,Ce),Ae+=P(se,Q,ie,_e,ne);else if(Ce=w(q),typeof Ce=="function")for(q=Ce.call(q),Ce=0;!(se=q.next()).done;)se=se.value,_e=Pe+G(se,Ce++),Ae+=P(se,Q,ie,_e,ne);else if(_e==="object"){if(typeof q.then=="function")return P(J(q),Q,ie,se,ne);throw Q=String(q),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function O(q,Q,ie){if(q==null)return q;var se=[],ne=0;return P(q,se,"","",function(_e){return Q.call(ie,_e,ne++)}),se}function ee(q){if(q._status===-1){var Q=q._result;Q=Q(),Q.then(function(ie){(q._status===0||q._status===-1)&&(q._status=1,q._result=ie)},function(ie){(q._status===0||q._status===-1)&&(q._status=2,q._result=ie)}),q._status===-1&&(q._status=0,q._result=Q)}if(q._status===1)return q._result.default;throw q._result}var W=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Z={map:O,forEach:function(q,Q,ie){O(q,function(){Q.apply(this,arguments)},ie)},count:function(q){var Q=0;return O(q,function(){Q++}),Q},toArray:function(q){return O(q,function(Q){return Q})||[]},only:function(q){if(!N(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return ze.Activity=y,ze.Children=Z,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=U,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ze.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},ze.cache=function(q){return function(){return q.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(q,Q,ie){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var se=k({},q.props),ne=q.key;if(Q!=null)for(_e in Q.key!==void 0&&(ne=""+Q.key),Q)!S.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(se[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)se.children=ie;else if(1<_e){for(var Ae=Array(_e),Pe=0;Pe<_e;Pe++)Ae[Pe]=arguments[Pe+2];se.children=Ae}return T(q.type,ne,se)},ze.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},ze.createElement=function(q,Q,ie){var se,ne={},_e=null;if(Q!=null)for(se in Q.key!==void 0&&(_e=""+Q.key),Q)S.call(Q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ne[se]=Q[se]);var Ae=arguments.length-2;if(Ae===1)ne.children=ie;else if(1<Ae){for(var Pe=Array(Ae),Ce=0;Ce<Ae;Ce++)Pe[Ce]=arguments[Ce+2];ne.children=Pe}if(q&&q.defaultProps)for(se in Ae=q.defaultProps,Ae)ne[se]===void 0&&(ne[se]=Ae[se]);return T(q,_e,ne)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(q){return{$$typeof:u,render:q}},ze.isValidElement=N,ze.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:ee}},ze.memo=function(q,Q){return{$$typeof:f,type:q,compare:Q===void 0?null:Q}},ze.startTransition=function(q){var Q=D.T,ie={};D.T=ie;try{var se=q(),ne=D.S;ne!==null&&ne(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(z,W)}catch(_e){W(_e)}finally{Q!==null&&ie.types!==null&&(Q.types=ie.types),D.T=Q}},ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ze.use=function(q){return D.H.use(q)},ze.useActionState=function(q,Q,ie){return D.H.useActionState(q,Q,ie)},ze.useCallback=function(q,Q){return D.H.useCallback(q,Q)},ze.useContext=function(q){return D.H.useContext(q)},ze.useDebugValue=function(){},ze.useDeferredValue=function(q,Q){return D.H.useDeferredValue(q,Q)},ze.useEffect=function(q,Q){return D.H.useEffect(q,Q)},ze.useEffectEvent=function(q){return D.H.useEffectEvent(q)},ze.useId=function(){return D.H.useId()},ze.useImperativeHandle=function(q,Q,ie){return D.H.useImperativeHandle(q,Q,ie)},ze.useInsertionEffect=function(q,Q){return D.H.useInsertionEffect(q,Q)},ze.useLayoutEffect=function(q,Q){return D.H.useLayoutEffect(q,Q)},ze.useMemo=function(q,Q){return D.H.useMemo(q,Q)},ze.useOptimistic=function(q,Q){return D.H.useOptimistic(q,Q)},ze.useReducer=function(q,Q,ie){return D.H.useReducer(q,Q,ie)},ze.useRef=function(q){return D.H.useRef(q)},ze.useState=function(q){return D.H.useState(q)},ze.useSyncExternalStore=function(q,Q,ie){return D.H.useSyncExternalStore(q,Q,ie)},ze.useTransition=function(){return D.H.useTransition()},ze.version="19.2.3",ze}var Aw;function Cm(){return Aw||(Aw=1,fy.exports=sN()),fy.exports}var $=Cm();const aN=nN($);var my={exports:{}},Eu={},gy={exports:{}},py={};var Iw;function oN(){return Iw||(Iw=1,(function(r){function e(P,O){var ee=P.length;P.push(O);e:for(;0<ee;){var W=ee-1>>>1,Z=P[W];if(0<s(Z,O))P[W]=O,P[ee]=Z,ee=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var O=P[0],ee=P.pop();if(ee!==O){P[0]=ee;e:for(var W=0,Z=P.length,q=Z>>>1;W<q;){var Q=2*(W+1)-1,ie=P[Q],se=Q+1,ne=P[se];if(0>s(ie,ee))se<Z&&0>s(ne,ie)?(P[W]=ne,P[se]=ee,W=se):(P[W]=ie,P[Q]=ee,W=Q);else if(se<Z&&0>s(ne,ee))P[W]=ne,P[se]=ee,W=se;else break e}}return O}function s(P,O){var ee=P.sortIndex-O.sortIndex;return ee!==0?ee:P.id-O.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,E=!1,k=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function F(P){for(var O=t(f);O!==null;){if(O.callback===null)n(f);else if(O.startTime<=P)n(f),O.sortIndex=O.expirationTime,e(d,O);else break;O=t(f)}}function K(P){if(k=!1,F(P),!E)if(t(d)!==null)E=!0,z||(z=!0,j());else{var O=t(f);O!==null&&J(K,O.startTime-P)}}var z=!1,D=-1,S=5,T=-1;function I(){return M?!0:!(r.unstable_now()-T<S)}function N(){if(M=!1,z){var P=r.unstable_now();T=P;var O=!0;try{e:{E=!1,k&&(k=!1,H(D),D=-1),w=!0;var ee=v;try{t:{for(F(P),y=t(d);y!==null&&!(y.expirationTime>P&&I());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var Z=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof Z=="function"){y.callback=Z,F(P),O=!0;break t}y===t(d)&&n(d),F(P)}else n(d);y=t(d)}if(y!==null)O=!0;else{var q=t(f);q!==null&&J(K,q.startTime-P),O=!1}}break e}finally{y=null,v=ee,w=!1}O=void 0}}finally{O?j():z=!1}}}var j;if(typeof U=="function")j=function(){U(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,G=C.port2;C.port1.onmessage=N,j=function(){G.postMessage(null)}}else j=function(){V(N,0)};function J(P,O){D=V(function(){P(r.unstable_now())},O)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var ee=v;v=O;try{return P()}finally{v=ee}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=v;v=P;try{return O()}finally{v=ee}},r.unstable_scheduleCallback=function(P,O,ee){var W=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?W+ee:W):ee=W,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ee+Z,P={id:g++,callback:O,priorityLevel:P,startTime:ee,expirationTime:Z,sortIndex:-1},ee>W?(P.sortIndex=ee,e(f,P),t(d)===null&&P===t(f)&&(k?(H(D),D=-1):k=!0,J(K,ee-W))):(P.sortIndex=Z,e(d,P),E||w||(E=!0,z||(z=!0,j()))),P},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(P){var O=v;return function(){var ee=v;v=O;try{return P.apply(this,arguments)}finally{v=ee}}}})(py)),py}var Rw;function lN(){return Rw||(Rw=1,gy.exports=oN()),gy.exports}var yy={exports:{}},On={};var Cw;function cN(){if(Cw)return On;Cw=1;var r=Cm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Nw;function uN(){if(Nw)return yy.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yy.exports=cN(),yy.exports}var kw;function hN(){if(kw)return Eu;kw=1;var r=lN(),e=Cm(),t=uN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,L=p.child;L;){if(L===l){A=!0,l=p,h=_;break}if(L===h){A=!0,h=p,l=_;break}L=L.sibling}if(!A){for(L=_.child;L;){if(L===l){A=!0,l=_,h=p;break}if(L===h){A=!0,h=_,l=p;break}L=L.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case V:return"Profiler";case M:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case T:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case U:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var J=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},W=[],Z=-1;function q(i){return{current:i}}function Q(i){0>Z||(i.current=W[Z],W[Z]=null,Z--)}function ie(i,a){Z++,W[Z]=i.current,i.current=a}var se=q(null),ne=q(null),_e=q(null),Ae=q(null);function Pe(i,a){switch(ie(_e,a),ie(ne,i),ie(se,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?G1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=G1(a),i=K1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(se),ie(se,i)}function Ce(){Q(se),Q(ne),Q(_e)}function et(i){i.memoizedState!==null&&ie(Ae,i);var a=se.current,l=K1(a,i.type);a!==l&&(ie(ne,i),ie(se,l))}function at(i){ne.current===i&&(Q(se),Q(ne)),Ae.current===i&&(Q(Ae),_u._currentValue=ee)}var ot,un;function Rt(i){if(ot===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ot=a&&a[1]||"",un=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+i+un}var mt=!1;function Ct(i,a){if(!i||mt)return"";mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],L=_[1];if(A&&L){var Y=A.split(`
`),le=L.split(`
`);for(p=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Y.length||p===le.length)for(h=Y.length-1,p=le.length-1;1<=h&&0<=p&&Y[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Y[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Y[h]!==le[p]){var fe=`
`+Y[h].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=h&&0<=p);break}}}finally{mt=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Rt(l):""}function it(i,a){switch(i.tag){case 26:case 27:case 5:return Rt(i.type);case 16:return Rt("Lazy");case 13:return i.child!==a&&a!==null?Rt("Suspense Fallback"):Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return Rt("Activity");default:return""}}function st(i){try{var a="",l=null;do a+=it(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var qe=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,De=r.unstable_requestPaint,xe=r.unstable_now,tt=r.unstable_getCurrentPriorityLevel,gt=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,ut=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,Bt=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Gt=null,Et=null;function Jt(i){if(typeof kn=="function"&&wn(i),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(Gt,i)}catch{}}var kt=Math.clz32?Math.clz32:Da,Ko=Math.log,ai=Math.LN2;function Da(i){return i>>>=0,i===0?32:31-(Ko(i)/ai|0)|0}var Dn=256,qi=262144,pt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=h&134217727;return L!==0?(h=L&~_,h!==0?p=hn(h):(A&=L,A!==0?p=hn(A):l||(l=L&~i,l!==0&&(p=hn(l))))):(L=h&~_,L!==0?p=hn(L):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Yo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(){var i=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),i}function pn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Oa(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function yg(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var L=i.entanglements,Y=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-kt(l),ge=1<<fe;L[fe]=0,Y[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&Ma(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function Ma(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Ec(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-kt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function Tc(i,a){var l=a&-a;return l=(l&42)!==0?1:Pa(l),(l&(i.suspendedLanes|a))!==0?0:l}function Pa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Bh(){var i=O.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function zr(i,a){var l=O.p;try{return O.p=i,a()}finally{O.p=l}}var Br=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Br,yn="__reactProps$"+Br,oi="__reactContainer$"+Br,Qo="__reactEvents$"+Br,_g="__reactListeners$"+Br,Fh="__reactHandles$"+Br,Hh="__reactResources$"+Br,li="__reactMarker$"+Br;function Wo(i){delete i[Zt],delete i[yn],delete i[Qo],delete i[_g],delete i[Fh]}function ci(i){var a=i[Zt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[oi]||l[Zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=ew(i);i!==null;){if(l=i[Zt])return l;i=ew(i)}return a}i=l,l=i.parentNode}return null}function wr(i){if(i=i[Zt]||i[oi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ar(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ui(i){var a=i[Hh];return a||(a=i[Hh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function en(i){i[li]=!0}var Sc=new Set,Ac={};function hi(i,a){di(i,a),di(i+"Capture",a)}function di(i,a){for(Ac[i]=a,i=0;i<a.length;i++)Sc.add(a[i])}var Ic=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rc={},Cc={};function qh(i){return qe.call(Cc,i)?!0:qe.call(Rc,i)?!1:Ic.test(i)?Cc[i]=!0:(Rc[i]=!0,!1)}function Xo(i,a,l){if(qh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function or(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function tn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rs(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function yt(i){if(!i._valueTracker){var a=Rs(i)?"checked":"value";i._valueTracker=Nc(i,a,""+i[a])}}function ja(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Rs(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Va=/[\n"\\]/g;function Wn(i){return i.replace(Va,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Jo(i,a,l,h,p,_,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+_n(a)):i.value!==""+_n(a)&&(i.value=""+_n(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?kc(i,A,_n(a)):l!=null?kc(i,A,_n(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+_n(L):i.removeAttribute("name")}function $h(i,a,l,h,p,_,A,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){yt(i);return}l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,L||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=L?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),yt(i)}function kc(i,a,l){a==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Cs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Gh(i,a,l){if(a!=null&&(a=""+_n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+_n(l):""}function Ns(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(J(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=_n(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),yt(i)}function Xn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Kh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Oc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Dc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Dc(i,_,a[_])}function Zo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function el(i){return ks.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fr(){}var Mc=null;function xr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ds=null,mi=null;function La(i){var a=wr(i);if(a&&(i=a.stateNode)){var l=i[yn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Jo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[yn]||null;if(!p)throw Error(n(90));Jo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&ja(h)}break e;case"textarea":Gh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Cs(i,!!l.multiple,a,!1)}}}var tl=!1;function Os(i,a,l){if(tl)return i(a,l);tl=!0;try{var h=i(a);return h}finally{if(tl=!1,(Ds!==null||mi!==null)&&(Bd(),Ds&&(a=Ds,i=mi,mi=Ds=null,La(a),i)))for(a=0;a<i.length;a++)La(i[a])}}function Hr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[yn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(Er)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{Ua=!1}var gi=null,Pc=null,za=null;function jc(){if(za)return za;var i,a=Pc,l=a.length,h,p="value"in gi?gi.value:gi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return za=p.slice(i,1<h?1-h:void 0)}function Ba(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function qr(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:qr,this.isPropagationStopped=qr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=Tn(Ki),Ms=y({},Ki,{view:0,detail:0}),Vc=Tn(Ms),Ps,nl,yi,rl=y({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ps=i.screenX-yi.screenX,nl=i.screenY-yi.screenY):nl=Ps=0,yi=i),Ps)},movementY:function(i){return"movementY"in i?i.movementY:nl}}),Lc=Tn(rl),Fa=y({},rl,{dataTransfer:0}),Qh=Tn(Fa),Wh=y({},Ms,{relatedTarget:0}),Ha=Tn(Wh),Uc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Xh=Tn(Uc),il=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jh=Tn(il),Zh=y({},Ki,{data:0}),_i=Tn(Zh),ed={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},td={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=nd[i])?!!a[i]:!1}function js(){return rd}var Hn=y({},Ms,{key:function(i){if(i.key){var a=ed[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ba(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?td[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(i){return i.type==="keypress"?Ba(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ba(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),id=Tn(Hn),sd=y({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Tn(sd),m=y({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),x=Tn(m),R=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=Tn(R),ae=y({},rl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),be=y({},Ki,{newState:0,oldState:0}),Fe=Tn(be),Kt=[9,13,27,32],ht=Er&&"CompositionEvent"in window,Mt=null;Er&&"documentMode"in document&&(Mt=document.documentMode);var Tr=Er&&"TextEvent"in window&&!Mt,vi=Er&&(!ht||Mt&&8<Mt&&11>=Mt),$r=" ",Gr=!1;function qa(i,a){switch(i){case"keyup":return Kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var al=!1;function AR(i,a){switch(i){case"compositionend":return sl(a);case"keypress":return a.which!==32?null:(Gr=!0,$r);case"textInput":return i=a.data,i===$r&&Gr?null:i;default:return null}}function IR(i,a){if(al)return i==="compositionend"||!ht&&qa(i,a)?(i=jc(),za=Pc=gi=null,al=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vi&&a.locale!=="ko"?null:a.data;default:return null}}var RR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!RR[i.type]:a==="textarea"}function iv(i,a,l,h){Ds?mi?mi.push(h):mi=[h]:Ds=h,a=Yd(a,"onChange"),0<a.length&&(l=new pi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var zc=null,Bc=null;function CR(i){z1(i,0)}function ad(i){var a=ar(i);if(ja(a))return i}function sv(i,a){if(i==="change")return a}var av=!1;if(Er){var vg;if(Er){var bg="oninput"in document;if(!bg){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),bg=typeof ov.oninput=="function"}vg=bg}else vg=!1;av=vg&&(!document.documentMode||9<document.documentMode)}function lv(){zc&&(zc.detachEvent("onpropertychange",cv),Bc=zc=null)}function cv(i){if(i.propertyName==="value"&&ad(Bc)){var a=[];iv(a,Bc,i,xr(i)),Os(CR,a)}}function NR(i,a,l){i==="focusin"?(lv(),zc=a,Bc=l,zc.attachEvent("onpropertychange",cv)):i==="focusout"&&lv()}function kR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ad(Bc)}function DR(i,a){if(i==="click")return ad(a)}function OR(i,a){if(i==="input"||i==="change")return ad(a)}function MR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var lr=typeof Object.is=="function"?Object.is:MR;function Fc(i,a){if(lr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!qe.call(a,p)||!lr(i[p],a[p]))return!1}return!0}function uv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hv(i,a){var l=uv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=uv(l)}}function dv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function fv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=fi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=fi(i.document)}return a}function wg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var PR=Er&&"documentMode"in document&&11>=document.documentMode,ol=null,xg=null,Hc=null,Eg=!1;function mv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Eg||ol==null||ol!==fi(h)||(h=ol,"selectionStart"in h&&wg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Hc&&Fc(Hc,h)||(Hc=h,h=Yd(xg,"onSelect"),0<h.length&&(a=new pi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ol)))}function $a(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ll={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionrun:$a("Transition","TransitionRun"),transitionstart:$a("Transition","TransitionStart"),transitioncancel:$a("Transition","TransitionCancel"),transitionend:$a("Transition","TransitionEnd")},Tg={},gv={};Er&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Ga(i){if(Tg[i])return Tg[i];if(!ll[i])return i;var a=ll[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in gv)return Tg[i]=a[l];return i}var pv=Ga("animationend"),yv=Ga("animationiteration"),_v=Ga("animationstart"),jR=Ga("transitionrun"),VR=Ga("transitionstart"),LR=Ga("transitioncancel"),vv=Ga("transitionend"),bv=new Map,Sg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sg.push("scrollEnd");function Kr(i,a){bv.set(i,a),hi(a,[i])}var od=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Sr=[],cl=0,Ag=0;function ld(){for(var i=cl,a=Ag=cl=0;a<i;){var l=Sr[a];Sr[a++]=null;var h=Sr[a];Sr[a++]=null;var p=Sr[a];Sr[a++]=null;var _=Sr[a];if(Sr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&wv(l,p,_)}}function cd(i,a,l,h){Sr[cl++]=i,Sr[cl++]=a,Sr[cl++]=l,Sr[cl++]=h,Ag|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Ig(i,a,l,h){return cd(i,a,l,h),ud(i)}function Ka(i,a){return cd(i,null,null,a),ud(i)}function wv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-kt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function ud(i){if(50<hu)throw hu=0,jp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ul={};function UR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(i,a,l,h){return new UR(i,a,l,h)}function Rg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=cr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function xv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function hd(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Rg(i)&&(A=1);else if(typeof i=="string")A=qC(i,l,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case T:return i=cr(31,l,a,p),i.elementType=T,i.lanes=_,i;case k:return Ya(l.children,p,_,a);case M:A=8,p|=24;break;case V:return i=cr(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case K:return i=cr(13,l,a,p),i.elementType=K,i.lanes=_,i;case z:return i=cr(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:A=10;break e;case H:A=9;break e;case F:A=11;break e;case D:A=14;break e;case S:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=cr(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function Ya(i,a,l,h){return i=cr(7,i,h,a),i.lanes=l,i}function Cg(i,a,l){return i=cr(6,i,null,a),i.lanes=l,i}function Ev(i){var a=cr(18,null,null,0);return a.stateNode=i,a}function Ng(i,a,l){return a=cr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Tv=new WeakMap;function Ar(i,a){if(typeof i=="object"&&i!==null){var l=Tv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:st(a)},Tv.set(i,a),a)}return{value:i,source:a,stack:st(a)}}var hl=[],dl=0,dd=null,qc=0,Ir=[],Rr=0,Vs=null,bi=1,wi="";function Wi(i,a){hl[dl++]=qc,hl[dl++]=dd,dd=i,qc=a}function Sv(i,a,l){Ir[Rr++]=bi,Ir[Rr++]=wi,Ir[Rr++]=Vs,Vs=i;var h=bi;i=wi;var p=32-kt(h)-1;h&=~(1<<p),l+=1;var _=32-kt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,bi=1<<32-kt(a)+p|l<<p|h,wi=_+i}else bi=1<<_|l<<p|h,wi=i}function kg(i){i.return!==null&&(Wi(i,1),Sv(i,1,0))}function Dg(i){for(;i===dd;)dd=hl[--dl],hl[dl]=null,qc=hl[--dl],hl[dl]=null;for(;i===Vs;)Vs=Ir[--Rr],Ir[Rr]=null,wi=Ir[--Rr],Ir[Rr]=null,bi=Ir[--Rr],Ir[Rr]=null}function Av(i,a){Ir[Rr++]=bi,Ir[Rr++]=wi,Ir[Rr++]=Vs,bi=a.id,wi=a.overflow,Vs=i}var Sn=null,Dt=null,nt=!1,Ls=null,Cr=!1,Og=Error(n(519));function Us(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $c(Ar(a,i)),Og}function Iv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Zt]=i,a[yn]=h,l){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(l=0;l<fu.length;l++)Ye(fu[l],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),$h(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),Ns(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||q1(a.textContent,l)?(h.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),h.onScroll!=null&&Ye("scroll",a),h.onScrollEnd!=null&&Ye("scrollend",a),h.onClick!=null&&(a.onclick=Fr),a=!0):a=!1,a||Us(i,!0)}function Rv(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:Sn=Sn.return}}function fl(i){if(i!==Sn)return!1;if(!nt)return Rv(i),nt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Xp(i.type,i.memoizedProps)),l=!l),l&&Dt&&Us(i),Rv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=Z1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=Z1(i)}else a===27?(a=Dt,Zs(i.type)?(i=ny,ny=null,Dt=i):Dt=a):Dt=Sn?kr(i.stateNode.nextSibling):null;return!0}function Qa(){Dt=Sn=null,nt=!1}function Mg(){var i=Ls;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Ls=null),i}function $c(i){Ls===null?Ls=[i]:Ls.push(i)}var Pg=q(null),Wa=null,Xi=null;function zs(i,a,l){ie(Pg,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=Pg.current,Q(Pg)}function jg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Vg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=p;for(var Y=0;Y<a.length;Y++)if(L.context===a[Y]){_.lanes|=l,L=_.alternate,L!==null&&(L.lanes|=l),jg(_.return,l,i),h||(A=null);break e}_=L.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),jg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function ml(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var L=p.type;lr(p.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(p===Ae.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(_u):i=[_u])}p=p.return}i!==null&&Vg(a,i,l,h),a.flags|=262144}function fd(i){for(i=i.firstContext;i!==null;){if(!lr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xa(i){Wa=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return Cv(Wa,i)}function md(i,a){return Wa===null&&Xa(i),Cv(i,a)}function Cv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var zR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},BR=r.unstable_scheduleCallback,FR=r.unstable_NormalPriority,nn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lg(){return{controller:new zR,data:new Map,refCount:0}}function Gc(i){i.refCount--,i.refCount===0&&BR(FR,function(){i.controller.abort()})}var Kc=null,Ug=0,gl=0,pl=null;function HR(i,a){if(Kc===null){var l=Kc=[];Ug=0,gl=Fp(),pl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Ug++,a.then(Nv,Nv),a}function Nv(){if(--Ug===0&&Kc!==null){pl!==null&&(pl.status="fulfilled");var i=Kc;Kc=null,gl=0,pl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function qR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var kv=P.S;P.S=function(i,a){m1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&HR(i,a),kv!==null&&kv(i,a)};var Ja=q(null);function zg(){var i=Ja.current;return i!==null?i:Nt.pooledCache}function gd(i,a){a===null?ie(Ja,Ja.current):ie(Ja,a.pool)}function Dv(){var i=zg();return i===null?null:{parent:nn._currentValue,pool:i}}var yl=Error(n(460)),Bg=Error(n(474)),pd=Error(n(542)),yd={then:function(){}};function Ov(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Mv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fr,Fr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jv(i),i;default:if(typeof a.status=="string")a.then(Fr,Fr);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jv(i),i}throw eo=a,yl}}function Za(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(eo=l,yl):l}}var eo=null;function Pv(){if(eo===null)throw Error(n(459));var i=eo;return eo=null,i}function jv(i){if(i===yl||i===pd)throw Error(n(483))}var _l=null,Yc=0;function _d(i){var a=Yc;return Yc+=1,_l===null&&(_l=[]),Mv(_l,i,a)}function Qc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function vd(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Vv(i){function a(te,X){if(i){var oe=te.deletions;oe===null?(te.deletions=[X],te.flags|=16):oe.push(X)}}function l(te,X){if(!i)return null;for(;X!==null;)a(te,X),X=X.sibling;return null}function h(te){for(var X=new Map;te!==null;)te.key!==null?X.set(te.key,te):X.set(te.index,te),te=te.sibling;return X}function p(te,X){return te=Qi(te,X),te.index=0,te.sibling=null,te}function _(te,X,oe){return te.index=oe,i?(oe=te.alternate,oe!==null?(oe=oe.index,oe<X?(te.flags|=67108866,X):oe):(te.flags|=67108866,X)):(te.flags|=1048576,X)}function A(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function L(te,X,oe,me){return X===null||X.tag!==6?(X=Cg(oe,te.mode,me),X.return=te,X):(X=p(X,oe),X.return=te,X)}function Y(te,X,oe,me){var Ne=oe.type;return Ne===k?fe(te,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Za(Ne)===X.type)?(X=p(X,oe.props),Qc(X,oe),X.return=te,X):(X=hd(oe.type,oe.key,oe.props,null,te.mode,me),Qc(X,oe),X.return=te,X)}function le(te,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=Ng(oe,te.mode,me),X.return=te,X):(X=p(X,oe.children||[]),X.return=te,X)}function fe(te,X,oe,me,Ne){return X===null||X.tag!==7?(X=Ya(oe,te.mode,me,Ne),X.return=te,X):(X=p(X,oe),X.return=te,X)}function ge(te,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Cg(""+X,te.mode,oe),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=hd(X.type,X.key,X.props,null,te.mode,oe),Qc(oe,X),oe.return=te,oe;case E:return X=Ng(X,te.mode,oe),X.return=te,X;case S:return X=Za(X),ge(te,X,oe)}if(J(X)||j(X))return X=Ya(X,te.mode,oe,null),X.return=te,X;if(typeof X.then=="function")return ge(te,_d(X),oe);if(X.$$typeof===U)return ge(te,md(te,X),oe);vd(te,X)}return null}function ce(te,X,oe,me){var Ne=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ne!==null?null:L(te,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Ne?Y(te,X,oe,me):null;case E:return oe.key===Ne?le(te,X,oe,me):null;case S:return oe=Za(oe),ce(te,X,oe,me)}if(J(oe)||j(oe))return Ne!==null?null:fe(te,X,oe,me,null);if(typeof oe.then=="function")return ce(te,X,_d(oe),me);if(oe.$$typeof===U)return ce(te,X,md(te,oe),me);vd(te,oe)}return null}function he(te,X,oe,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return te=te.get(oe)||null,L(X,te,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return te=te.get(me.key===null?oe:me.key)||null,Y(X,te,me,Ne);case E:return te=te.get(me.key===null?oe:me.key)||null,le(X,te,me,Ne);case S:return me=Za(me),he(te,X,oe,me,Ne)}if(J(me)||j(me))return te=te.get(oe)||null,fe(X,te,me,Ne,null);if(typeof me.then=="function")return he(te,X,oe,_d(me),Ne);if(me.$$typeof===U)return he(te,X,oe,md(X,me),Ne);vd(X,me)}return null}function Te(te,X,oe,me){for(var Ne=null,lt=null,Ie=X,$e=X=0,We=null;Ie!==null&&$e<oe.length;$e++){Ie.index>$e?(We=Ie,Ie=null):We=Ie.sibling;var ct=ce(te,Ie,oe[$e],me);if(ct===null){Ie===null&&(Ie=We);break}i&&Ie&&ct.alternate===null&&a(te,Ie),X=_(ct,X,$e),lt===null?Ne=ct:lt.sibling=ct,lt=ct,Ie=We}if($e===oe.length)return l(te,Ie),nt&&Wi(te,$e),Ne;if(Ie===null){for(;$e<oe.length;$e++)Ie=ge(te,oe[$e],me),Ie!==null&&(X=_(Ie,X,$e),lt===null?Ne=Ie:lt.sibling=Ie,lt=Ie);return nt&&Wi(te,$e),Ne}for(Ie=h(Ie);$e<oe.length;$e++)We=he(Ie,te,$e,oe[$e],me),We!==null&&(i&&We.alternate!==null&&Ie.delete(We.key===null?$e:We.key),X=_(We,X,$e),lt===null?Ne=We:lt.sibling=We,lt=We);return i&&Ie.forEach(function(ia){return a(te,ia)}),nt&&Wi(te,$e),Ne}function Oe(te,X,oe,me){if(oe==null)throw Error(n(151));for(var Ne=null,lt=null,Ie=X,$e=X=0,We=null,ct=oe.next();Ie!==null&&!ct.done;$e++,ct=oe.next()){Ie.index>$e?(We=Ie,Ie=null):We=Ie.sibling;var ia=ce(te,Ie,ct.value,me);if(ia===null){Ie===null&&(Ie=We);break}i&&Ie&&ia.alternate===null&&a(te,Ie),X=_(ia,X,$e),lt===null?Ne=ia:lt.sibling=ia,lt=ia,Ie=We}if(ct.done)return l(te,Ie),nt&&Wi(te,$e),Ne;if(Ie===null){for(;!ct.done;$e++,ct=oe.next())ct=ge(te,ct.value,me),ct!==null&&(X=_(ct,X,$e),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return nt&&Wi(te,$e),Ne}for(Ie=h(Ie);!ct.done;$e++,ct=oe.next())ct=he(Ie,te,$e,ct.value,me),ct!==null&&(i&&ct.alternate!==null&&Ie.delete(ct.key===null?$e:ct.key),X=_(ct,X,$e),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return i&&Ie.forEach(function(tN){return a(te,tN)}),nt&&Wi(te,$e),Ne}function It(te,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===k&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Ne=oe.key;X!==null;){if(X.key===Ne){if(Ne=oe.type,Ne===k){if(X.tag===7){l(te,X.sibling),me=p(X,oe.props.children),me.return=te,te=me;break e}}else if(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===S&&Za(Ne)===X.type){l(te,X.sibling),me=p(X,oe.props),Qc(me,oe),me.return=te,te=me;break e}l(te,X);break}else a(te,X);X=X.sibling}oe.type===k?(me=Ya(oe.props.children,te.mode,me,oe.key),me.return=te,te=me):(me=hd(oe.type,oe.key,oe.props,null,te.mode,me),Qc(me,oe),me.return=te,te=me)}return A(te);case E:e:{for(Ne=oe.key;X!==null;){if(X.key===Ne)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(te,X.sibling),me=p(X,oe.children||[]),me.return=te,te=me;break e}else{l(te,X);break}else a(te,X);X=X.sibling}me=Ng(oe,te.mode,me),me.return=te,te=me}return A(te);case S:return oe=Za(oe),It(te,X,oe,me)}if(J(oe))return Te(te,X,oe,me);if(j(oe)){if(Ne=j(oe),typeof Ne!="function")throw Error(n(150));return oe=Ne.call(oe),Oe(te,X,oe,me)}if(typeof oe.then=="function")return It(te,X,_d(oe),me);if(oe.$$typeof===U)return It(te,X,md(te,oe),me);vd(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(te,X.sibling),me=p(X,oe),me.return=te,te=me):(l(te,X),me=Cg(oe,te.mode,me),me.return=te,te=me),A(te)):l(te,X)}return function(te,X,oe,me){try{Yc=0;var Ne=It(te,X,oe,me);return _l=null,Ne}catch(Ie){if(Ie===yl||Ie===pd)throw Ie;var lt=cr(29,Ie,null,te.mode);return lt.lanes=me,lt.return=te,lt}finally{}}}var to=Vv(!0),Lv=Vv(!1),Bs=!1;function Fg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Hs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=ud(i),wv(i,null,l),a}return cd(i,h,a,l),ud(i)}function Wc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ec(i,l)}}function qg(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var $g=!1;function Xc(){if($g){var i=pl;if(i!==null)throw i}}function Jc(i,a,l,h){$g=!1;var p=i.updateQueue;Bs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var Y=L,le=Y.next;Y.next=null,A===null?_=le:A.next=le,A=Y;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,L=fe.lastBaseUpdate,L!==A&&(L===null?fe.firstBaseUpdate=le:L.next=le,fe.lastBaseUpdate=Y))}if(_!==null){var ge=p.baseState;A=0,fe=le=Y=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(Qe&ce)===ce:(h&ce)===ce){ce!==0&&ce===gl&&($g=!0),fe!==null&&(fe=fe.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Te=i,Oe=L;ce=a;var It=l;switch(Oe.tag){case 1:if(Te=Oe.payload,typeof Te=="function"){ge=Te.call(It,ge,ce);break e}ge=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Oe.payload,ce=typeof Te=="function"?Te.call(It,ge,ce):Te,ce==null)break e;ge=y({},ge,ce);break e;case 2:Bs=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},fe===null?(le=fe=he,Y=ge):fe=fe.next=he,A|=ce;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;he=L,L=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);fe===null&&(Y=ge),p.baseState=Y,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,_===null&&(p.shared.lanes=0),Ys|=A,i.lanes=A,i.memoizedState=ge}}function Uv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function zv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Uv(l[i],a)}var vl=q(null),bd=q(0);function Bv(i,a){i=os,ie(bd,i),ie(vl,a),os=i|a.baseLanes}function Gg(){ie(bd,os),ie(vl,vl.current)}function Kg(){os=bd.current,Q(vl),Q(bd)}var ur=q(null),Nr=null;function qs(i){var a=i.alternate;ie(Yt,Yt.current&1),ie(ur,i),Nr===null&&(a===null||vl.current!==null||a.memoizedState!==null)&&(Nr=i)}function Yg(i){ie(Yt,Yt.current),ie(ur,i),Nr===null&&(Nr=i)}function Fv(i){i.tag===22?(ie(Yt,Yt.current),ie(ur,i),Nr===null&&(Nr=i)):$s()}function $s(){ie(Yt,Yt.current),ie(ur,ur.current)}function hr(i){Q(ur),Nr===i&&(Nr=null),Q(Yt)}var Yt=q(0);function wd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ey(l)||ty(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,He=null,St=null,rn=null,xd=!1,bl=!1,no=!1,Ed=0,Zc=0,wl=null,$R=0;function Ft(){throw Error(n(321))}function Qg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!lr(i[l],a[l]))return!1;return!0}function Wg(i,a,l,h,p,_){return Zi=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?Sb:hp,no=!1,_=l(h,p),no=!1,bl&&(_=qv(a,l,h,p)),Hv(i),_}function Hv(i){P.H=nu;var a=St!==null&&St.next!==null;if(Zi=0,rn=St=He=null,xd=!1,Zc=0,wl=null,a)throw Error(n(300));i===null||sn||(i=i.dependencies,i!==null&&fd(i)&&(sn=!0))}function qv(i,a,l,h){He=i;var p=0;do{if(bl&&(wl=null),Zc=0,bl=!1,25<=p)throw Error(n(301));if(p+=1,rn=St=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=Ab,_=a(l,h)}while(bl);return _}function GR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?eu(a):a,i=i.useState()[0],(St!==null?St.memoizedState:null)!==i&&(He.flags|=1024),a}function Xg(){var i=Ed!==0;return Ed=0,i}function Jg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Zg(i){if(xd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}xd=!1}Zi=0,rn=St=He=null,bl=!1,Zc=Ed=0,wl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=i:rn=rn.next=i,rn}function Qt(){if(St===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=St.next;var a=rn===null?He.memoizedState:rn.next;if(a!==null)rn=a,St=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));St=i,i={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?He.memoizedState=rn=i:rn=rn.next=i}return rn}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(i){var a=Zc;return Zc+=1,wl===null&&(wl=[]),i=Mv(wl,i,a),a=He,(rn===null?a.memoizedState:rn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Sb:hp),i}function Sd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return eu(i);if(i.$$typeof===U)return An(i)}throw Error(n(438,String(i)))}function ep(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Td(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=I;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function Ad(i){var a=Qt();return tp(a,St,i)}function tp(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var L=A=null,Y=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(Qe&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===gl&&(fe=!0);else if((Zi&ce)===ce){le=le.next,ce===gl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(L=Y=ge,A=_):Y=Y.next=ge,He.lanes|=ce,Ys|=ce;ge=le.action,no&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(L=Y=ce,A=_):Y=Y.next=ce,He.lanes|=ge,Ys|=ge;le=le.next}while(le!==null&&le!==a);if(Y===null?A=_:Y.next=L,!lr(_,i.memoizedState)&&(sn=!0,fe&&(l=pl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Y,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function np(i){var a=Qt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);lr(_,a.memoizedState)||(sn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function $v(i,a,l){var h=He,p=Qt(),_=nt;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!lr((St||p).memoizedState,l);if(A&&(p.memoizedState=l,sn=!0),p=p.queue,sp(Yv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,xl(9,{destroy:void 0},Kv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||Gv(h,a,l)}return l}function Gv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=Td(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Kv(i,a,l,h){a.value=l,a.getSnapshot=h,Qv(a)&&Wv(i)}function Yv(i,a,l){return l(function(){Qv(a)&&Wv(i)})}function Qv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!lr(i,l)}catch{return!0}}function Wv(i){var a=Ka(i,2);a!==null&&nr(a,i,2)}function rp(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),no){Jt(!0);try{l()}finally{Jt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function Xv(i,a,l,h){return i.baseState=l,tp(i,St,typeof h=="function"?h:es)}function KR(i,a,l,h,p){if(Cd(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,Jv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Jv(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var L=l(p,h),Y=P.S;Y!==null&&Y(A,L),Zv(i,a,L)}catch(le){ip(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),Zv(i,a,_)}catch(le){ip(i,a,le)}}function Zv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){eb(i,a,h)},function(h){return ip(i,a,h)}):eb(i,a,l)}function eb(i,a,l){a.status="fulfilled",a.value=l,tb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Jv(i,l)))}function ip(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,tb(a),a=a.next;while(a!==h)}i.action=null}function tb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function nb(i,a){return a}function rb(i,a){if(nt){var l=Nt.formState;if(l!==null){e:{var h=He;if(nt){if(Dt){t:{for(var p=Dt,_=Cr;p.nodeType!==8;){if(!_){p=null;break t}if(p=kr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Dt=kr(p.nextSibling),h=p.data==="F!";break e}}Us(h)}h=!1}h&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nb,lastRenderedState:a},l.queue=h,l=xb.bind(null,He,h),h.dispatch=l,h=rp(!1),_=up.bind(null,He,!1,h.queue),h=qn(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=KR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function ib(i){var a=Qt();return sb(a,St,i)}function sb(i,a,l){if(a=tp(i,a,nb)[0],i=Ad(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=eu(a)}catch(A){throw A===yl?pd:A}else h=a;a=Qt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,xl(9,{destroy:void 0},YR.bind(null,p,l),null)),[h,_,i]}function YR(i,a){i.action=a}function ab(i){var a=Qt(),l=St;if(l!==null)return sb(a,l,i);Qt(),a=a.memoizedState,l=Qt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function xl(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=Td(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function ob(){return Qt().memoizedState}function Id(i,a,l,h){var p=qn();He.flags|=i,p.memoizedState=xl(1|a,{destroy:void 0},l,h===void 0?null:h)}function Rd(i,a,l,h){var p=Qt();h=h===void 0?null:h;var _=p.memoizedState.inst;St!==null&&h!==null&&Qg(h,St.memoizedState.deps)?p.memoizedState=xl(a,_,l,h):(He.flags|=i,p.memoizedState=xl(1|a,_,l,h))}function lb(i,a){Id(8390656,8,i,a)}function sp(i,a){Rd(2048,8,i,a)}function QR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=Td(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function cb(i){var a=Qt().memoizedState;return QR({ref:a,nextImpl:i}),function(){if((dt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function ub(i,a){return Rd(4,2,i,a)}function hb(i,a){return Rd(4,4,i,a)}function db(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function fb(i,a,l){l=l!=null?l.concat([i]):null,Rd(4,4,db.bind(null,a,i),l)}function ap(){}function mb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Qg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function gb(i,a){var l=Qt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Qg(a,h[1]))return h[0];if(h=i(),no){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h}function op(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(Qe&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=p1(),He.lanes|=i,Ys|=i,l)}function pb(i,a,l,h){return lr(l,a)?l:vl.current!==null?(i=op(i,l,h),lr(i,a)||(sn=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Qe&261930)===0?(sn=!0,i.memoizedState=l):(i=p1(),He.lanes|=i,Ys|=i,a)}function yb(i,a,l,h,p){var _=O.p;O.p=_!==0&&8>_?_:8;var A=P.T,L={};P.T=L,up(i,!1,a,l);try{var Y=p(),le=P.S;if(le!==null&&le(L,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var fe=qR(Y,h);tu(i,a,fe,mr(i))}else tu(i,a,h,mr(i))}catch(ge){tu(i,a,{then:function(){},status:"rejected",reason:ge},mr())}finally{O.p=_,A!==null&&L.types!==null&&(A.types=L.types),P.T=A}}function WR(){}function lp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=_b(i).queue;yb(i,p,a,ee,l===null?WR:function(){return vb(i),l(h)})}function _b(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:ee},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function vb(i){var a=_b(i);a.next===null&&(a=i.alternate.memoizedState),tu(i,a.next.queue,{},mr())}function cp(){return An(_u)}function bb(){return Qt().memoizedState}function wb(){return Qt().memoizedState}function XR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=mr();i=Fs(l);var h=Hs(a,i,l);h!==null&&(nr(h,a,l),Wc(h,a,l)),a={cache:Lg()},i.payload=a;return}a=a.return}}function JR(i,a,l){var h=mr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cd(i)?Eb(a,l):(l=Ig(i,a,l,h),l!==null&&(nr(l,i,h),Tb(l,a,h)))}function xb(i,a,l){var h=mr();tu(i,a,l,h)}function tu(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cd(i))Eb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,L=_(A,l);if(p.hasEagerState=!0,p.eagerState=L,lr(L,A))return cd(i,a,p,0),Nt===null&&ld(),!1}catch{}finally{}if(l=Ig(i,a,p,h),l!==null)return nr(l,i,h),Tb(l,a,h),!0}return!1}function up(i,a,l,h){if(h={lane:2,revertLane:Fp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Cd(i)){if(a)throw Error(n(479))}else a=Ig(i,l,h,2),a!==null&&nr(a,i,2)}function Cd(i){var a=i.alternate;return i===He||a!==null&&a===He}function Eb(i,a){bl=xd=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Tb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ec(i,l)}}var nu={readContext:An,use:Sd,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};nu.useEffectEvent=Ft;var Sb={readContext:An,use:Sd,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:lb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Id(4194308,4,db.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Id(4194308,4,i,a)},useInsertionEffect:function(i,a){Id(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var h=i();if(no){Jt(!0);try{i()}finally{Jt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=qn();if(l!==void 0){var p=l(a);if(no){Jt(!0);try{l(a)}finally{Jt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=JR.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=rp(i);var a=i.queue,l=xb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:ap,useDeferredValue:function(i,a){var l=qn();return op(l,i,a)},useTransition:function(){var i=rp(!1);return i=yb.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=qn();if(nt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(Qe&127)!==0||Gv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,lb(Yv.bind(null,h,_,i),[i]),h.flags|=2048,xl(9,{destroy:void 0},Kv.bind(null,h,_,l,a),null),l},useId:function(){var i=qn(),a=Nt.identifierPrefix;if(nt){var l=wi,h=bi;l=(h&~(1<<32-kt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Ed++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=$R++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:cp,useFormState:rb,useActionState:rb,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=up.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:ep,useCacheRefresh:function(){return qn().memoizedState=XR.bind(null,He)},useEffectEvent:function(i){var a=qn(),l={impl:i};return a.memoizedState=l,function(){if((dt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},hp={readContext:An,use:Sd,useCallback:mb,useContext:An,useEffect:sp,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:Ad,useRef:ob,useState:function(){return Ad(es)},useDebugValue:ap,useDeferredValue:function(i,a){var l=Qt();return pb(l,St.memoizedState,i,a)},useTransition:function(){var i=Ad(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:eu(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:cp,useFormState:ib,useActionState:ib,useOptimistic:function(i,a){var l=Qt();return Xv(l,St,i,a)},useMemoCache:ep,useCacheRefresh:wb};hp.useEffectEvent=cb;var Ab={readContext:An,use:Sd,useCallback:mb,useContext:An,useEffect:sp,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:np,useRef:ob,useState:function(){return np(es)},useDebugValue:ap,useDeferredValue:function(i,a){var l=Qt();return St===null?op(l,i,a):pb(l,St.memoizedState,i,a)},useTransition:function(){var i=np(es)[0],a=Qt().memoizedState;return[typeof i=="boolean"?i:eu(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:cp,useFormState:ab,useActionState:ab,useOptimistic:function(i,a){var l=Qt();return St!==null?Xv(l,St,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:ep,useCacheRefresh:wb};Ab.useEffectEvent=cb;function dp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var fp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=mr(),p=Fs(h);p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(nr(a,i,h),Wc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=mr(),p=Fs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Hs(i,p,h),a!==null&&(nr(a,i,h),Wc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=mr(),h=Fs(l);h.tag=2,a!=null&&(h.callback=a),a=Hs(i,h,l),a!==null&&(nr(a,i,l),Wc(a,i,l))}};function Ib(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!Fc(l,h)||!Fc(p,_):!0}function Rb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&fp.enqueueReplaceState(a,a.state,null)}function ro(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Cb(i){od(i)}function Nb(i){console.error(i)}function kb(i){od(i)}function Nd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Db(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function mp(i,a,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Nd(i,a)},l}function Ob(i){return i=Fs(i),i.tag=3,i}function Mb(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Db(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Db(a,l,h),typeof p!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function ZR(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&ml(a,l,p,!0),l=ur.current,l!==null){switch(l.tag){case 31:case 13:return Nr===null?Fd():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===yd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Up(i,h,p)),!1;case 22:return l.flags|=65536,h===yd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Up(i,h,p)),!1}throw Error(n(435,l.tag))}return Up(i,h,p),Fd(),!1}if(nt)return a=ur.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Og&&(i=Error(n(422),{cause:h}),$c(Ar(i,l)))):(h!==Og&&(a=Error(n(423),{cause:h}),$c(Ar(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Ar(h,l),p=mp(i.stateNode,h,p),qg(i,p),Ht!==4&&(Ht=2)),!1;var _=Error(n(520),{cause:h});if(_=Ar(_,l),uu===null?uu=[_]:uu.push(_),Ht!==4&&(Ht=2),a===null)return!0;h=Ar(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=mp(l.stateNode,h,i),qg(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ob(p),Mb(p,i,l,h),qg(l,p),!1}l=l.return}while(l!==null);return!1}var gp=Error(n(461)),sn=!1;function In(i,a,l,h){a.child=i===null?Lv(a,null,l,h):to(a,i.child,l,h)}function Pb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var L in h)L!=="ref"&&(A[L]=h[L])}else A=h;return Xa(a),h=Wg(i,a,l,A,_,p),L=Xg(),i!==null&&!sn?(Jg(i,a,p),ts(i,a,p)):(nt&&L&&kg(a),a.flags|=1,In(i,a,h,p),a.child)}function jb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Rg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Vb(i,a,_,h,p)):(i=hd(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Ep(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:Fc,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Vb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if(Fc(_,h)&&i.ref===a.ref)if(sn=!1,a.pendingProps=h=_,Ep(i,p))(i.flags&131072)!==0&&(sn=!0);else return a.lanes=i.lanes,ts(i,a,p)}return pp(i,a,l,h,p)}function Lb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Ub(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&gd(a,_!==null?_.cachePool:null),_!==null?Bv(a,_):Gg(),Fv(a);else return h=a.lanes=536870912,Ub(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(gd(a,_.cachePool),Bv(a,_),$s(),a.memoizedState=null):(i!==null&&gd(a,null),Gg(),$s());return In(i,a,p,l),a.child}function ru(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ub(i,a,l,h,p){var _=zg();return _=_===null?null:{parent:nn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&gd(a,null),Gg(),Fv(a),i!==null&&ml(i,a,h,!0),a.childLanes=p,null}function kd(i,a){return a=Od({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function zb(i,a,l){return to(a,i.child,null,l),i=kd(a,a.pendingProps),i.flags|=2,hr(a),a.memoizedState=null,i}function eC(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(nt){if(h.mode==="hidden")return i=kd(a,h),a.lanes=536870912,ru(null,i);if(Yg(a),(i=Dt)?(i=J1(i,Cr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Us(a);return a.lanes=536870912,null}return kd(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Yg(a),p)if(a.flags&256)a.flags&=-257,a=zb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(sn||ml(i,a,l,!1),p=(l&i.childLanes)!==0,sn||p){if(h=Nt,h!==null&&(A=Tc(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ka(i,A),nr(h,i,A),gp;Fd(),a=zb(i,a,l)}else i=_.treeContext,Dt=kr(A.nextSibling),Sn=a,nt=!0,Ls=null,Cr=!1,i!==null&&Av(a,i),a=kd(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Dd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function pp(i,a,l,h,p){return Xa(a),l=Wg(i,a,l,h,void 0,p),h=Xg(),i!==null&&!sn?(Jg(i,a,p),ts(i,a,p)):(nt&&h&&kg(a),a.flags|=1,In(i,a,l,p),a.child)}function Bb(i,a,l,h,p,_){return Xa(a),a.updateQueue=null,l=qv(a,h,l,p),Hv(i),h=Xg(),i!==null&&!sn?(Jg(i,a,_),ts(i,a,_)):(nt&&h&&kg(a),a.flags|=1,In(i,a,l,_),a.child)}function Fb(i,a,l,h,p){if(Xa(a),a.stateNode===null){var _=ul,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=fp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Fg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):ul,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(dp(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&fp.enqueueReplaceState(_,_.state,null),Jc(a,h,_,p),Xc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var L=a.memoizedProps,Y=ro(l,L);_.props=Y;var le=_.context,fe=l.contextType;A=ul,typeof fe=="object"&&fe!==null&&(A=An(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==A)&&Rb(a,_,h,A),Bs=!1;var ce=a.memoizedState;_.state=ce,Jc(a,h,_,p),Xc(),le=a.memoizedState,L||ce!==le||Bs?(typeof ge=="function"&&(dp(a,l,ge,h),le=a.memoizedState),(Y=Bs||Ib(a,l,Y,h,ce,le,A))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Y):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,Hg(i,a),A=a.memoizedProps,fe=ro(l,A),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,Y=ul,typeof le=="object"&&le!==null&&(Y=An(le)),L=l.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Y)&&Rb(a,_,h,Y),Bs=!1,ce=a.memoizedState,_.state=ce,Jc(a,h,_,p),Xc();var he=a.memoizedState;A!==ge||ce!==he||Bs||i!==null&&i.dependencies!==null&&fd(i.dependencies)?(typeof L=="function"&&(dp(a,l,L,h),he=a.memoizedState),(fe=Bs||Ib(a,l,fe,h,ce,he,Y)||i!==null&&i.dependencies!==null&&fd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Y),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Y)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Y,h=fe):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Dd(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=to(a,i.child,null,p),a.child=to(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function Hb(i,a,l,h){return Qa(),a.flags|=256,In(i,a,l,h),a.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _p(i){return{baseLanes:i,cachePool:Dv()}}function vp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=fr),i}function qb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Yt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(nt){if(p?qs(a):$s(),(i=Dt)?(i=J1(i,Cr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Us(a);return ty(i)?a.lanes=32:a.lanes=536870912,null}var L=h.children;return h=h.fallback,p?($s(),p=a.mode,L=Od({mode:"hidden",children:L},p),h=Ya(h,p,l,null),L.return=a,h.return=a,L.sibling=h,a.child=L,h=a.child,h.memoizedState=_p(l),h.childLanes=vp(i,A,l),a.memoizedState=yp,ru(null,h)):(qs(a),bp(a,L))}var Y=i.memoizedState;if(Y!==null&&(L=Y.dehydrated,L!==null)){if(_)a.flags&256?(qs(a),a.flags&=-257,a=wp(i,a,l)):a.memoizedState!==null?($s(),a.child=i.child,a.flags|=128,a=null):($s(),L=h.fallback,p=a.mode,h=Od({mode:"visible",children:h.children},p),L=Ya(L,p,l,null),L.flags|=2,h.return=a,L.return=a,h.sibling=L,a.child=h,to(a,i.child,null,l),h=a.child,h.memoizedState=_p(l),h.childLanes=vp(i,A,l),a.memoizedState=yp,a=ru(null,h));else if(qs(a),ty(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,$c({value:h,source:null,stack:null}),a=wp(i,a,l)}else if(sn||ml(i,a,l,!1),A=(l&i.childLanes)!==0,sn||A){if(A=Nt,A!==null&&(h=Tc(A,l),h!==0&&h!==Y.retryLane))throw Y.retryLane=h,Ka(i,h),nr(A,i,h),gp;ey(L)||Fd(),a=wp(i,a,l)}else ey(L)?(a.flags|=192,a.child=i.child,a=null):(i=Y.treeContext,Dt=kr(L.nextSibling),Sn=a,nt=!0,Ls=null,Cr=!1,i!==null&&Av(a,i),a=bp(a,h.children),a.flags|=4096);return a}return p?($s(),L=h.fallback,p=a.mode,Y=i.child,le=Y.sibling,h=Qi(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,le!==null?L=Qi(le,L):(L=Ya(L,p,l,null),L.flags|=2),L.return=a,h.return=a,h.sibling=L,a.child=h,ru(null,h),h=a.child,L=i.child.memoizedState,L===null?L=_p(l):(p=L.cachePool,p!==null?(Y=nn._currentValue,p=p.parent!==Y?{parent:Y,pool:Y}:p):p=Dv(),L={baseLanes:L.baseLanes|l,cachePool:p}),h.memoizedState=L,h.childLanes=vp(i,A,l),a.memoizedState=yp,ru(i.child,h)):(qs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function bp(i,a){return a=Od({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Od(i,a){return i=cr(22,i,null,a),i.lanes=0,i}function wp(i,a,l){return to(a,i.child,null,l),i=bp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function $b(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),jg(i.return,a,l)}function xp(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function Gb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Yt.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,ie(Yt,A),In(i,a,h,l),h=nt?qc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$b(i,l,a);else if(i.tag===19)$b(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&wd(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),xp(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&wd(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}xp(a,!0,l,null,_,h);break;case"together":xp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ys|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(ml(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Ep(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&fd(i)))}function tC(i,a,l){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),zs(a,nn,i.memoizedState.cache),Qa();break;case 27:case 5:et(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:zs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Yg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(qs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?qb(i,a,l):(qs(a),i=ts(i,a,l),i!==null?i.sibling:null);qs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(ml(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return Gb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(Yt,Yt.current),h)break;return null;case 22:return a.lanes=0,Lb(i,a,l,a.pendingProps);case 24:zs(a,nn,i.memoizedState.cache)}return ts(i,a,l)}function Kb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)sn=!0;else{if(!Ep(i,l)&&(a.flags&128)===0)return sn=!1,tC(i,a,l);sn=(i.flags&131072)!==0}else sn=!1,nt&&(a.flags&1048576)!==0&&Sv(a,qc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Za(a.elementType),a.type=i,typeof i=="function")Rg(i)?(h=ro(i,h),a.tag=1,a=Fb(null,a,i,h,l)):(a.tag=0,a=pp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===F){a.tag=11,a=Pb(null,a,i,h,l);break e}else if(p===D){a.tag=14,a=jb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return pp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=ro(h,a.pendingProps),Fb(i,a,h,p,l);case 3:e:{if(Pe(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,Hg(i,a),Jc(a,h,null,l);var A=a.memoizedState;if(h=A.cache,zs(a,nn,h),h!==_.cache&&Vg(a,[nn],l,!0),Xc(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Hb(i,a,h,l);break e}else if(h!==p){p=Ar(Error(n(424)),a),$c(p),a=Hb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=kr(i.firstChild),Sn=a,nt=!0,Ls=null,Cr=!0,l=Lv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qa(),h===p){a=ts(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Dd(i,a),i===null?(l=iw(a.type,null,a.pendingProps,null))?a.memoizedState=l:nt||(l=a.type,i=a.pendingProps,h=Qd(_e.current).createElement(l),h[Zt]=a,h[yn]=i,Rn(h,l,i),en(h),a.stateNode=h):a.memoizedState=iw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return et(a),i===null&&nt&&(h=a.stateNode=tw(a.type,a.pendingProps,_e.current),Sn=a,Cr=!0,p=Dt,Zs(a.type)?(ny=p,Dt=kr(h.firstChild)):Dt=p),In(i,a,a.pendingProps.children,l),Dd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&nt&&((p=h=Dt)&&(h=kC(h,a.type,a.pendingProps,Cr),h!==null?(a.stateNode=h,Sn=a,Dt=kr(h.firstChild),Cr=!1,p=!0):p=!1),p||Us(a)),et(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Xp(p,_)?h=null:A!==null&&Xp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Wg(i,a,GR,null,null,l),_u._currentValue=p),Dd(i,a),In(i,a,h,l),a.child;case 6:return i===null&&nt&&((i=l=Dt)&&(l=DC(l,a.pendingProps,Cr),l!==null?(a.stateNode=l,Sn=a,Dt=null,i=!0):i=!1),i||Us(a)),null;case 13:return qb(i,a,l);case 4:return Pe(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=to(a,null,h,l):In(i,a,h,l),a.child;case 11:return Pb(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,zs(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Xa(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return jb(i,a,a.type,a.pendingProps,l);case 15:return Vb(i,a,a.type,a.pendingProps,l);case 19:return Gb(i,a,l);case 31:return eC(i,a,l);case 22:return Lb(i,a,l,a.pendingProps);case 24:return Xa(a),h=An(nn),i===null?(p=zg(),p===null&&(p=Nt,_=Lg(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Fg(a),zs(a,nn,p)):((i.lanes&l)!==0&&(Hg(i,a),Jc(a,null,null,l),Xc()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),zs(a,nn,h)):(h=_.cache,zs(a,nn,h),h!==p.cache&&Vg(a,[nn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function Tp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(b1())i.flags|=8192;else throw eo=yd,Bg}else i.flags&=-16777217}function Yb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cw(a))if(b1())i.flags|=8192;else throw eo=yd,Bg}function Md(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?br():536870912,i.lanes|=a,Al|=a)}function iu(i,a){if(!nt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function nC(i,a,l){var h=a.pendingProps;switch(Dg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(nn),Ce(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(fl(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Mg())),Ot(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Ot(a),Yb(a,_)):(Ot(a),Tp(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Ot(a),Yb(a,_)):(Ot(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Ot(a),Tp(a,p,i,h,l)),null;case 27:if(at(a),l=_e.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}i=se.current,fl(a)?Iv(a):(i=tw(p,h,l),a.stateNode=i,ns(a))}return Ot(a),null;case 5:if(at(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}if(_=se.current,fl(a))Iv(a);else{var A=Qd(_e.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[Zt]=a,_[yn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Ot(a),Tp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=_e.current,fl(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[Zt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||q1(i.nodeValue,l)),i||Us(a,!0)}else i=Qd(i).createTextNode(h),i[Zt]=a,a.stateNode=i}return Ot(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=fl(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Zt]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),i=!1}else l=Mg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(hr(a),a):(hr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ot(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=fl(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zt]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),p=!1}else p=Mg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(hr(a),a):(hr(a),null)}return hr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Md(a,a.updateQueue),Ot(a),null);case 4:return Ce(),i===null&&Gp(a.stateNode.containerInfo),Ot(a),null;case 10:return Ji(a.type),Ot(a),null;case 19:if(Q(Yt),h=a.memoizedState,h===null)return Ot(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)iu(h,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=wd(i),_!==null){for(a.flags|=128,iu(h,!1),i=_.updateQueue,a.updateQueue=i,Md(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)xv(l,i),l=l.sibling;return ie(Yt,Yt.current&1|2),nt&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Ud&&(a.flags|=128,p=!0,iu(h,!1),a.lanes=4194304)}else{if(!p)if(i=wd(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Md(a,i),iu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!nt)return Ot(a),null}else 2*xe()-h.renderingStartTime>Ud&&l!==536870912&&(a.flags|=128,p=!0,iu(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Yt.current,ie(Yt,p?l&1|2:l&1),nt&&Wi(a,h.treeForkCount),i):(Ot(a),null);case 22:case 23:return hr(a),Kg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),l=a.updateQueue,l!==null&&Md(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Q(Ja),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(nn),Ot(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function rC(i,a){switch(Dg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(nn),Ce(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return at(a),null;case 31:if(a.memoizedState!==null){if(hr(a),a.alternate===null)throw Error(n(340));Qa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(hr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Qa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Q(Yt),null;case 4:return Ce(),null;case 10:return Ji(a.type),null;case 22:case 23:return hr(a),Kg(),i!==null&&Q(Ja),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(nn),null;case 25:return null;default:return null}}function Qb(i,a){switch(Dg(a),a.tag){case 3:Ji(nn),Ce();break;case 26:case 27:case 5:at(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&hr(a);break;case 13:hr(a);break;case 19:Q(Yt);break;case 10:Ji(a.type);break;case 22:case 23:hr(a),Kg(),i!==null&&Q(Ja);break;case 24:Ji(nn)}}function su(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(L){vt(a,a.return,L)}}function Gs(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,p=a;var Y=l,le=L;try{le()}catch(fe){vt(p,Y,fe)}}}h=h.next}while(h!==_)}}catch(fe){vt(a,a.return,fe)}}function Wb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{zv(a,l)}catch(h){vt(i,i.return,h)}}}function Xb(i,a,l){l.props=ro(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){vt(i,a,h)}}function au(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){vt(i,a,p)}}function xi(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){vt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){vt(i,a,p)}else l.current=null}function Jb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){vt(i,i.return,p)}}function Sp(i,a,l){try{var h=i.stateNode;SC(h,i.type,l,a),h[yn]=a}catch(p){vt(i,i.return,p)}}function Zb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Zs(i.type)||i.tag===4}function Ap(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Zs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ip(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fr));else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Ip(i,a,l),i=i.sibling;i!==null;)Ip(i,a,l),i=i.sibling}function Pd(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Zs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Pd(i,a,l),i=i.sibling;i!==null;)Pd(i,a,l),i=i.sibling}function e1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[Zt]=i,a[yn]=l}catch(_){vt(i,i.return,_)}}var rs=!1,an=!1,Rp=!1,t1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function iC(i,a){if(i=i.containerInfo,Qp=nf,i=fv(i),wg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,L=-1,Y=-1,le=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(L=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Y=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(L=A),ce===_&&++fe===h&&(Y=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=L===-1||Y===-1?null:{start:L,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wp={focusedElem:i,selectionRange:l},nf=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Te=ro(l.type,p);i=h.getSnapshotBeforeUpdate(Te,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){vt(l,l.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Zp(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Zp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function n1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&su(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){vt(l,l.return,A)}else{var p=ro(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){vt(l,l.return,A)}}h&64&&Wb(l),h&512&&au(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{zv(i,a)}catch(A){vt(l,l.return,A)}}break;case 27:a===null&&h&4&&e1(l);case 26:case 5:ss(i,l),a===null&&h&4&&Jb(l),h&512&&au(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&s1(i,l);break;case 13:ss(i,l),h&4&&a1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=fC.bind(null,l),OC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||an,p=rs;var _=an;rs=h,(an=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,an=_}break;case 30:break;default:ss(i,l)}}function r1(i){var a=i.alternate;a!==null&&(i.alternate=null,r1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Wo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,Jn=!1;function is(i,a,l){for(l=l.child;l!==null;)i1(i,a,l),l=l.sibling}function i1(i,a,l){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Gt,l)}catch{}switch(l.tag){case 26:an||xi(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:an||xi(l,a);var h=Pt,p=Jn;Zs(l.type)&&(Pt=l.stateNode,Jn=!1),is(i,a,l),gu(l.stateNode),Pt=h,Jn=p;break;case 5:an||xi(l,a);case 6:if(h=Pt,p=Jn,Pt=null,is(i,a,l),Pt=h,Jn=p,Pt!==null)if(Jn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(l.stateNode)}catch(_){vt(l,a,_)}else try{Pt.removeChild(l.stateNode)}catch(_){vt(l,a,_)}break;case 18:Pt!==null&&(Jn?(i=Pt,W1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Ml(i)):W1(Pt,l.stateNode));break;case 4:h=Pt,p=Jn,Pt=l.stateNode.containerInfo,Jn=!0,is(i,a,l),Pt=h,Jn=p;break;case 0:case 11:case 14:case 15:Gs(2,l,a),an||Gs(4,l,a),is(i,a,l);break;case 1:an||(xi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Xb(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:an=(h=an)||l.memoizedState!==null,is(i,a,l),an=h;break;default:is(i,a,l)}}function s1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ml(i)}catch(l){vt(a,a.return,l)}}}function a1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ml(i)}catch(l){vt(a,a.return,l)}}function sC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new t1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new t1),a;default:throw Error(n(435,i.tag))}}function jd(i,a){var l=sC(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=mC.bind(null,i,h);h.then(p,p)}})}function Zn(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Zs(L.type)){Pt=L.stateNode,Jn=!1;break e}break;case 5:Pt=L.stateNode,Jn=!1;break e;case 3:case 4:Pt=L.stateNode.containerInfo,Jn=!0;break e}L=L.return}if(Pt===null)throw Error(n(160));i1(_,A,p),Pt=null,Jn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)o1(a,i),a=a.sibling}var Yr=null;function o1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),er(i),h&4&&(Gs(3,i,i.return),su(3,i),Gs(5,i,i.return));break;case 1:Zn(a,i),er(i),h&512&&(an||l===null||xi(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Yr;if(Zn(a,i),er(i),h&512&&(an||l===null||xi(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[li]||_[Zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[Zt]=i,en(_),h=_;break e;case"link":var A=ow("link","href",p).get(h+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(_=A[L],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=ow("meta","content",p).get(h+(l.content||""))){for(L=0;L<A.length;L++)if(_=A[L],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[Zt]=i,en(_),h=_}i.stateNode=h}else lw(p,i.type,i.stateNode);else i.stateNode=aw(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?lw(p,i.type,i.stateNode):aw(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Sp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Zn(a,i),er(i),h&512&&(an||l===null||xi(l,l.return)),l!==null&&h&4&&Sp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Zn(a,i),er(i),h&512&&(an||l===null||xi(l,l.return)),i.flags&32){p=i.stateNode;try{Xn(p,"")}catch(Te){vt(i,i.return,Te)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,Sp(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Rp=!0);break;case 6:if(Zn(a,i),er(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Te){vt(i,i.return,Te)}}break;case 3:if(Jd=null,p=Yr,Yr=Wd(a.containerInfo),Zn(a,i),Yr=p,er(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ml(a.containerInfo)}catch(Te){vt(i,i.return,Te)}Rp&&(Rp=!1,l1(i));break;case 4:h=Yr,Yr=Wd(i.stateNode.containerInfo),Zn(a,i),er(i),Yr=h;break;case 12:Zn(a,i),er(i);break;case 31:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jd(i,h)));break;case 13:Zn(a,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ld=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jd(i,h)));break;case 22:p=i.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,le=rs,fe=an;if(rs=le||p,an=fe||Y,Zn(a,i),an=fe,rs=le,er(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Y||rs||an||io(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Y=l=a;try{if(_=Y.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=Y.stateNode;var ge=Y.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Te){vt(Y,Y.return,Te)}}}else if(a.tag===6){if(l===null){Y=a;try{Y.stateNode.nodeValue=p?"":Y.memoizedProps}catch(Te){vt(Y,Y.return,Te)}}}else if(a.tag===18){if(l===null){Y=a;try{var he=Y.stateNode;p?X1(he,!0):X1(Y.stateNode,!1)}catch(Te){vt(Y,Y.return,Te)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,jd(i,l))));break;case 19:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jd(i,h)));break;case 30:break;case 21:break;default:Zn(a,i),er(i)}}function er(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Zb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Ap(i);Pd(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Xn(A,""),l.flags&=-33);var L=Ap(i);Pd(i,L,A);break;case 3:case 4:var Y=l.stateNode.containerInfo,le=Ap(i);Ip(i,le,Y);break;default:throw Error(n(161))}}catch(fe){vt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function l1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;l1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)n1(i,a.alternate,a),a=a.sibling}function io(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Gs(4,a,a.return),io(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Xb(a,a.return,l),io(a);break;case 27:gu(a.stateNode);case 26:case 5:xi(a,a.return),io(a);break;case 22:a.memoizedState===null&&io(a);break;case 30:io(a);break;default:io(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),su(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){vt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var L=h.stateNode;try{var Y=p.shared.hiddenCallbacks;if(Y!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Y.length;p++)Uv(Y[p],L)}catch(le){vt(h,h.return,le)}}l&&A&64&&Wb(_),au(_,_.return);break;case 27:e1(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&Jb(_),au(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&s1(p,_);break;case 13:as(p,_,l),l&&A&4&&a1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),au(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function Cp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Gc(l))}function Np(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Gc(i))}function Qr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)c1(i,a,l,h),a=a.sibling}function c1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(i,a,l,h),p&2048&&su(9,a);break;case 1:Qr(i,a,l,h);break;case 3:Qr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Gc(i)));break;case 12:if(p&2048){Qr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,L=_.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){vt(a,a.return,Y)}}else Qr(i,a,l,h);break;case 31:Qr(i,a,l,h);break;case 13:Qr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Qr(i,a,l,h):ou(i,a):_._visibility&2?Qr(i,a,l,h):(_._visibility|=2,El(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Cp(A,a);break;case 24:Qr(i,a,l,h),p&2048&&Np(a.alternate,a);break;default:Qr(i,a,l,h)}}function El(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,L=l,Y=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:El(_,A,L,Y,p),su(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?El(_,A,L,Y,p):ou(_,A):(fe._visibility|=2,El(_,A,L,Y,p)),p&&le&2048&&Cp(A.alternate,A);break;case 24:El(_,A,L,Y,p),p&&le&2048&&Np(A.alternate,A);break;default:El(_,A,L,Y,p)}a=a.sibling}}function ou(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:ou(l,h),p&2048&&Cp(h.alternate,h);break;case 24:ou(l,h),p&2048&&Np(h.alternate,h);break;default:ou(l,h)}a=a.sibling}}var lu=8192;function Tl(i,a,l){if(i.subtreeFlags&lu)for(i=i.child;i!==null;)u1(i,a,l),i=i.sibling}function u1(i,a,l){switch(i.tag){case 26:Tl(i,a,l),i.flags&lu&&i.memoizedState!==null&&$C(l,Yr,i.memoizedState,i.memoizedProps);break;case 5:Tl(i,a,l);break;case 3:case 4:var h=Yr;Yr=Wd(i.stateNode.containerInfo),Tl(i,a,l),Yr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=lu,lu=16777216,Tl(i,a,l),lu=h):Tl(i,a,l));break;default:Tl(i,a,l)}}function h1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function cu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)d1(i),i=i.sibling}function d1(i){switch(i.tag){case 0:case 11:case 15:cu(i),i.flags&2048&&Gs(9,i,i.return);break;case 3:cu(i);break;case 12:cu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Vd(i)):cu(i);break;default:cu(i)}}function Vd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Gs(8,a,a.return),Vd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Vd(a));break;default:Vd(a)}i=i.sibling}}function f1(i,a){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:Gs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Gc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,vn=h;else e:for(l=i;vn!==null;){h=vn;var p=h.sibling,_=h.return;if(r1(h),h===l){vn=null;break e}if(p!==null){p.return=_,vn=p;break e}vn=_}}}var aC={getCacheForType:function(i){var a=An(nn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(nn).controller.signal}},oC=typeof WeakMap=="function"?WeakMap:Map,dt=0,Nt=null,Ke=null,Qe=0,_t=0,dr=null,Ks=!1,Sl=!1,kp=!1,os=0,Ht=0,Ys=0,so=0,Dp=0,fr=0,Al=0,uu=null,tr=null,Op=!1,Ld=0,m1=0,Ud=1/0,zd=null,Qs=null,dn=0,Ws=null,Il=null,ls=0,Mp=0,Pp=null,g1=null,hu=0,jp=null;function mr(){return(dt&2)!==0&&Qe!==0?Qe&-Qe:P.T!==null?Fp():Bh()}function p1(){if(fr===0)if((Qe&536870912)===0||nt){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),fr=i}else fr=536870912;return i=ur.current,i!==null&&(i.flags|=32),fr}function nr(i,a,l){(i===Nt&&(_t===2||_t===9)||i.cancelPendingCommit!==null)&&(Rl(i,0),Xs(i,Qe,fr,!1)),Oa(i,l),((dt&2)===0||i!==Nt)&&(i===Nt&&((dt&2)===0&&(so|=l),Ht===4&&Xs(i,Qe,fr,!1)),Ei(i))}function y1(i,a,l){if((dt&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?uC(i,a):Lp(i,a,!0),_=h;do{if(p===0){Sl&&!h&&Xs(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!lC(l)){p=Lp(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=i;p=uu;var Y=L.current.memoizedState.isDehydrated;if(Y&&(Rl(L,A).flags|=256),A=Lp(L,A,!1),A!==2){if(kp&&!Y){L.errorRecoveryDisabledLanes|=_,so|=_,p=4;break e}_=tr,tr=p,_!==null&&(tr===null?tr=_:tr.push.apply(tr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Rl(i,0),Xs(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Xs(h,a,fr,!Ks);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=Ld+300-xe(),10<p)){if(Xs(h,a,fr,!Ks),xn(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=Y1(_1.bind(null,h,l,tr,zd,Op,a,fr,so,Al,Ks,_,"Throttled",-0,0),p);break e}_1(h,l,tr,zd,Op,a,fr,so,Al,Ks,_,null,-0,0)}}break}while(!0);Ei(i)}function _1(i,a,l,h,p,_,A,L,Y,le,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},u1(a,_,ge);var Te=(_&62914560)===_?Ld-xe():(_&4194048)===_?m1-xe():0;if(Te=GC(ge,Te),Te!==null){ls=_,i.cancelPendingCommit=Te(A1.bind(null,i,a,_,l,h,p,A,L,Y,fe,ge,null,ce,he)),Xs(i,_,A,!le);return}}A1(i,a,_,l,h,p,A,L,Y)}function lC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!lr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xs(i,a,l,h){a&=~Dp,a&=~so,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-kt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&Ma(i,l,a)}function Bd(){return(dt&6)===0?(du(0),!1):!0}function Vp(){if(Ke!==null){if(_t===0)var i=Ke.return;else i=Ke,Xi=Wa=null,Zg(i),_l=null,Yc=0,i=Ke;for(;i!==null;)Qb(i.alternate,i),i=i.return;Ke=null}}function Rl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,RC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,Vp(),Nt=i,Ke=l=Qi(i.current,null),Qe=a,_t=0,dr=null,Ks=!1,Sl=En(i,a),kp=!1,Al=fr=Dp=so=Ys=Ht=0,tr=uu=null,Op=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-kt(h),_=1<<p;a|=i[p],h&=~_}return os=a,ld(),l}function v1(i,a){He=null,P.H=nu,a===yl||a===pd?(a=Pv(),_t=3):a===Bg?(a=Pv(),_t=4):_t=a===gp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,dr=a,Ke===null&&(Ht=1,Nd(i,Ar(a,i.current)))}function b1(){var i=ur.current;return i===null?!0:(Qe&4194048)===Qe?Nr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?i===Nr:!1}function w1(){var i=P.H;return P.H=nu,i===null?nu:i}function x1(){var i=P.A;return P.A=aC,i}function Fd(){Ht=4,Ks||(Qe&4194048)!==Qe&&ur.current!==null||(Sl=!0),(Ys&134217727)===0&&(so&134217727)===0||Nt===null||Xs(Nt,Qe,fr,!1)}function Lp(i,a,l){var h=dt;dt|=2;var p=w1(),_=x1();(Nt!==i||Qe!==a)&&(zd=null,Rl(i,a)),a=!1;var A=Ht;e:do try{if(_t!==0&&Ke!==null){var L=Ke,Y=dr;switch(_t){case 8:Vp(),A=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(a=!0);var le=_t;if(_t=0,dr=null,Cl(i,L,Y,le),l&&Sl){A=0;break e}break;default:le=_t,_t=0,dr=null,Cl(i,L,Y,le)}}cC(),A=Ht;break}catch(fe){v1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Wa=null,dt=h,P.H=p,P.A=_,Ke===null&&(Nt=null,Qe=0,ld()),A}function cC(){for(;Ke!==null;)E1(Ke)}function uC(i,a){var l=dt;dt|=2;var h=w1(),p=x1();Nt!==i||Qe!==a?(zd=null,Ud=xe()+500,Rl(i,a)):Sl=En(i,a);e:do try{if(_t!==0&&Ke!==null){a=Ke;var _=dr;t:switch(_t){case 1:_t=0,dr=null,Cl(i,a,_,1);break;case 2:case 9:if(Ov(_)){_t=0,dr=null,T1(a);break}a=function(){_t!==2&&_t!==9||Nt!==i||(_t=7),Ei(i)},_.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Ov(_)?(_t=0,dr=null,T1(a)):(_t=0,dr=null,Cl(i,a,_,7));break;case 5:var A=null;switch(Ke.tag){case 26:A=Ke.memoizedState;case 5:case 27:var L=Ke;if(A?cw(A):L.stateNode.complete){_t=0,dr=null;var Y=L.sibling;if(Y!==null)Ke=Y;else{var le=L.return;le!==null?(Ke=le,Hd(le)):Ke=null}break t}}_t=0,dr=null,Cl(i,a,_,5);break;case 6:_t=0,dr=null,Cl(i,a,_,6);break;case 8:Vp(),Ht=6;break e;default:throw Error(n(462))}}hC();break}catch(fe){v1(i,fe)}while(!0);return Xi=Wa=null,P.H=h,P.A=p,dt=l,Ke!==null?0:(Nt=null,Qe=0,ld(),Ht)}function hC(){for(;Ke!==null&&!Be();)E1(Ke)}function E1(i){var a=Kb(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?Hd(i):Ke=a}function T1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Bb(l,a,a.pendingProps,a.type,void 0,Qe);break;case 11:a=Bb(l,a,a.pendingProps,a.type.render,a.ref,Qe);break;case 5:Zg(a);default:Qb(l,a),a=Ke=xv(a,os),a=Kb(l,a,os)}i.memoizedProps=i.pendingProps,a===null?Hd(i):Ke=a}function Cl(i,a,l,h){Xi=Wa=null,Zg(a),_l=null,Yc=0;var p=a.return;try{if(ZR(i,p,a,l,Qe)){Ht=1,Nd(i,Ar(l,i.current)),Ke=null;return}}catch(_){if(p!==null)throw Ke=p,_;Ht=1,Nd(i,Ar(l,i.current)),Ke=null;return}a.flags&32768?(nt||h===1?i=!0:Sl||(Qe&536870912)!==0?i=!1:(Ks=i=!0,(h===2||h===9||h===3||h===6)&&(h=ur.current,h!==null&&h.tag===13&&(h.flags|=16384))),S1(a,i)):Hd(a)}function Hd(i){var a=i;do{if((a.flags&32768)!==0){S1(a,Ks);return}i=a.return;var l=nC(a.alternate,a,os);if(l!==null){Ke=l;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=i}while(a!==null);Ht===0&&(Ht=5)}function S1(i,a){do{var l=rC(i.alternate,i);if(l!==null){l.flags&=32767,Ke=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=l}while(i!==null);Ht=6,Ke=null}function A1(i,a,l,h,p,_,A,L,Y){i.cancelPendingCommit=null;do qd();while(dn!==0);if((dt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=Ag,yg(i,l,_,A,L,Y),i===Nt&&(Ke=Nt=null,Qe=0),Il=a,Ws=i,ls=l,Mp=_,Pp=p,g1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,gC(ut,function(){return k1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=O.p,O.p=2,A=dt,dt|=4;try{iC(i,a,l)}finally{dt=A,O.p=p,P.T=h}}dn=1,I1(),R1(),C1()}}function I1(){if(dn===1){dn=0;var i=Ws,a=Il,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=O.p;O.p=2;var p=dt;dt|=4;try{o1(a,i);var _=Wp,A=fv(i.containerInfo),L=_.focusedElem,Y=_.selectionRange;if(A!==L&&L&&L.ownerDocument&&dv(L.ownerDocument.documentElement,L)){if(Y!==null&&wg(L)){var le=Y.start,fe=Y.end;if(fe===void 0&&(fe=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(fe,L.value.length);else{var ge=L.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Te=L.textContent.length,Oe=Math.min(Y.start,Te),It=Y.end===void 0?Oe:Math.min(Y.end,Te);!he.extend&&Oe>It&&(A=It,It=Oe,Oe=A);var te=hv(L,Oe),X=hv(L,It);if(te&&X&&(he.rangeCount!==1||he.anchorNode!==te.node||he.anchorOffset!==te.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(te.node,te.offset),he.removeAllRanges(),Oe>It?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=L;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ge.length;L++){var me=ge[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}nf=!!Qp,Wp=Qp=null}finally{dt=p,O.p=h,P.T=l}}i.current=a,dn=2}}function R1(){if(dn===2){dn=0;var i=Ws,a=Il,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=O.p;O.p=2;var p=dt;dt|=4;try{n1(i,a.alternate,a)}finally{dt=p,O.p=h,P.T=l}}dn=3}}function C1(){if(dn===4||dn===3){dn=0,De();var i=Ws,a=Il,l=ls,h=g1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Il=Ws=null,N1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Qs=null),$i(l),a=a.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Gt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=O.p,O.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var L=h[A];_(L.value,{componentStack:L.stack})}}finally{P.T=a,O.p=p}}(ls&3)!==0&&qd(),Ei(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===jp?hu++:(hu=0,jp=i):hu=0,du(0)}}function N1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Gc(a)))}function qd(){return I1(),R1(),C1(),k1()}function k1(){if(dn!==5)return!1;var i=Ws,a=Mp;Mp=0;var l=$i(ls),h=P.T,p=O.p;try{O.p=32>l?32:l,P.T=null,l=Pp,Pp=null;var _=Ws,A=ls;if(dn=0,Il=Ws=null,ls=0,(dt&6)!==0)throw Error(n(331));var L=dt;if(dt|=4,d1(_.current),c1(_,_.current,A,l),dt=L,du(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Gt,_)}catch{}return!0}finally{O.p=p,P.T=h,N1(i,a)}}function D1(i,a,l){a=Ar(l,a),a=mp(i.stateNode,a,2),i=Hs(i,a,2),i!==null&&(Oa(i,2),Ei(i))}function vt(i,a,l){if(i.tag===3)D1(i,i,l);else for(;a!==null;){if(a.tag===3){D1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Qs===null||!Qs.has(h))){i=Ar(l,i),l=Ob(2),h=Hs(a,l,2),h!==null&&(Mb(l,h,a,i),Oa(h,2),Ei(h));break}}a=a.return}}function Up(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new oC;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(kp=!0,p.add(l),i=dC.bind(null,i,a,l),a.then(i,i))}function dC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(Qe&l)===l&&(Ht===4||Ht===3&&(Qe&62914560)===Qe&&300>xe()-Ld?(dt&2)===0&&Rl(i,0):Dp|=l,Al===Qe&&(Al=0)),Ei(i)}function O1(i,a){a===0&&(a=br()),i=Ka(i,a),i!==null&&(Oa(i,a),Ei(i))}function fC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),O1(i,l)}function mC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),O1(i,l)}function gC(i,a){return pe(i,a)}var $d=null,Nl=null,zp=!1,Gd=!1,Bp=!1,Js=0;function Ei(i){i!==Nl&&i.next===null&&(Nl===null?$d=Nl=i:Nl=Nl.next=i),Gd=!0,zp||(zp=!0,yC())}function du(i,a){if(!Bp&&Gd){Bp=!0;do for(var l=!1,h=$d;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,L=h.pingedLanes;_=(1<<31-kt(42|i)+1)-1,_&=p&~(A&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,V1(h,_))}else _=Qe,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,V1(h,_));h=h.next}while(l);Bp=!1}}function pC(){M1()}function M1(){Gd=zp=!1;var i=0;Js!==0&&IC()&&(i=Js);for(var a=xe(),l=null,h=$d;h!==null;){var p=h.next,_=P1(h,a);_===0?(h.next=null,l===null?$d=p:l.next=p,p===null&&(Nl=l)):(l=h,(i!==0||(_&3)!==0)&&(Gd=!0)),h=p}dn!==0&&dn!==5||du(i),Js!==0&&(Js=0)}function P1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-kt(_),L=1<<A,Y=p[A];Y===-1?((L&l)===0||(L&h)!==0)&&(p[A]=Yo(L,a)):Y<=a&&(i.expiredLanes|=L),_&=~L}if(a=Nt,l=Qe,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(_t===2||_t===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),$i(l)){case 2:case 8:l=Bn;break;case 32:l=ut;break;case 268435456:l=Bt;break;default:l=ut}return h=j1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function j1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(qd()&&i.callbackNode!==l)return null;var h=Qe;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(y1(i,h,a),P1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?j1.bind(null,i):null)}function V1(i,a){if(qd())return null;y1(i,a,!0)}function yC(){CC(function(){(dt&6)!==0?pe(gt,pC):M1()})}function Fp(){if(Js===0){var i=gl;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Js=i}return Js}function L1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:el(""+i)}function U1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function _C(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=L1((p[yn]||null).action),A=h.submitter;A&&(a=(a=A[yn]||null)?L1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var L=new pi("action","action",null,h,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Js!==0){var Y=A?U1(p,A):new FormData(p);lp(l,{pending:!0,data:Y,method:p.method,action:_},null,Y)}}else typeof _=="function"&&(L.preventDefault(),Y=A?U1(p,A):new FormData(p),lp(l,{pending:!0,data:Y,method:p.method,action:_},_,Y))},currentTarget:p}]})}}for(var Hp=0;Hp<Sg.length;Hp++){var qp=Sg[Hp],vC=qp.toLowerCase(),bC=qp[0].toUpperCase()+qp.slice(1);Kr(vC,"on"+bC)}Kr(pv,"onAnimationEnd"),Kr(yv,"onAnimationIteration"),Kr(_v,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(jR,"onTransitionRun"),Kr(VR,"onTransitionStart"),Kr(LR,"onTransitionCancel"),Kr(vv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function z1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var L=h[A],Y=L.instance,le=L.currentTarget;if(L=L.listener,Y!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){od(fe)}p.currentTarget=null,_=Y}else for(A=0;A<h.length;A++){if(L=h[A],Y=L.instance,le=L.currentTarget,L=L.listener,Y!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){od(fe)}p.currentTarget=null,_=Y}}}}function Ye(i,a){var l=a[Qo];l===void 0&&(l=a[Qo]=new Set);var h=i+"__bubble";l.has(h)||(B1(a,i,2,!1),l.add(h))}function $p(i,a,l){var h=0;a&&(h|=4),B1(l,i,h,a)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Gp(i){if(!i[Kd]){i[Kd]=!0,Sc.forEach(function(l){l!=="selectionchange"&&(wC.has(l)||$p(l,!1,i),$p(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Kd]||(a[Kd]=!0,$p("selectionchange",!1,a))}}function B1(i,a,l,h){switch(pw(a)){case 2:var p=QC;break;case 8:p=WC;break;default:p=oy}l=p.bind(null,a,l,i),p=void 0,!Ua||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Kp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var L=h.stateNode.containerInfo;if(L===p)break;if(A===4)for(A=h.return;A!==null;){var Y=A.tag;if((Y===3||Y===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;L!==null;){if(A=ci(L),A===null)return;if(Y=A.tag,Y===5||Y===6||Y===26||Y===27){h=_=A;continue e}L=L.parentNode}}h=h.return}Os(function(){var le=_,fe=xr(l),ge=[];e:{var ce=bv.get(i);if(ce!==void 0){var he=pi,Te=i;switch(i){case"keypress":if(Ba(l)===0)break e;case"keydown":case"keyup":he=id;break;case"focusin":Te="focus",he=Ha;break;case"focusout":Te="blur",he=Ha;break;case"beforeblur":case"afterblur":he=Ha;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=x;break;case pv:case yv:case _v:he=Xh;break;case vv:he=B;break;case"scroll":case"scrollend":he=Vc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=Jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=Fe}var Oe=(a&4)!==0,It=!Oe&&(i==="scroll"||i==="scrollend"),te=Oe?ce!==null?ce+"Capture":null:ce;Oe=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||te===null||(me=Hr(X,te),me!=null&&Oe.push(mu(X,me,oe))),It)break;X=X.return}0<Oe.length&&(ce=new he(ce,Te,null,l,fe),ge.push({event:ce,listeners:Oe}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Mc&&(Te=l.relatedTarget||l.fromElement)&&(ci(Te)||Te[oi]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Te=l.relatedTarget||l.toElement,he=le,Te=Te?ci(Te):null,Te!==null&&(It=o(Te),Oe=Te.tag,Te!==It||Oe!==5&&Oe!==27&&Oe!==6)&&(Te=null)):(he=null,Te=le),he!==Te)){if(Oe=Lc,me="onMouseLeave",te="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=Yi,me="onPointerLeave",te="onPointerEnter",X="pointer"),It=he==null?ce:ar(he),oe=Te==null?ce:ar(Te),ce=new Oe(me,X+"leave",he,l,fe),ce.target=It,ce.relatedTarget=oe,me=null,ci(fe)===le&&(Oe=new Oe(te,X+"enter",Te,l,fe),Oe.target=oe,Oe.relatedTarget=It,me=Oe),It=me,he&&Te)t:{for(Oe=xC,te=he,X=Te,oe=0,me=te;me;me=Oe(me))oe++;me=0;for(var Ne=X;Ne;Ne=Oe(Ne))me++;for(;0<oe-me;)te=Oe(te),oe--;for(;0<me-oe;)X=Oe(X),me--;for(;oe--;){if(te===X||X!==null&&te===X.alternate){Oe=te;break t}te=Oe(te),X=Oe(X)}Oe=null}else Oe=null;he!==null&&F1(ge,ce,he,Oe,!1),Te!==null&&It!==null&&F1(ge,It,Te,Oe,!0)}}e:{if(ce=le?ar(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var lt=sv;else if(rv(ce))if(av)lt=OR;else{lt=kR;var Ie=NR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Zo(le.elementType)&&(lt=sv):lt=DR;if(lt&&(lt=lt(i,le))){iv(ge,lt,l,fe);break e}Ie&&Ie(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&kc(ce,"number",ce.value)}switch(Ie=le?ar(le):window,i){case"focusin":(rv(Ie)||Ie.contentEditable==="true")&&(ol=Ie,xg=le,Hc=null);break;case"focusout":Hc=xg=ol=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,mv(ge,l,fe);break;case"selectionchange":if(PR)break;case"keydown":case"keyup":mv(ge,l,fe)}var $e;if(ht)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else al?qa(i,l)&&(We="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(vi&&l.locale!=="ko"&&(al||We!=="onCompositionStart"?We==="onCompositionEnd"&&al&&($e=jc()):(gi=fe,Pc="value"in gi?gi.value:gi.textContent,al=!0)),Ie=Yd(le,We),0<Ie.length&&(We=new _i(We,i,null,l,fe),ge.push({event:We,listeners:Ie}),$e?We.data=$e:($e=sl(l),$e!==null&&(We.data=$e)))),($e=Tr?AR(i,l):IR(i,l))&&(We=Yd(le,"onBeforeInput"),0<We.length&&(Ie=new _i("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Ie,listeners:We}),Ie.data=$e)),_C(ge,i,le,l,fe)}z1(ge,a)})}function mu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Yd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Hr(i,l),p!=null&&h.unshift(mu(i,p,_)),p=Hr(i,a),p!=null&&h.push(mu(i,p,_))),i.tag===3)return h;i=i.return}return[]}function xC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function F1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var L=l,Y=L.alternate,le=L.stateNode;if(L=L.tag,Y!==null&&Y===h)break;L!==5&&L!==26&&L!==27||le===null||(Y=le,p?(le=Hr(l,_),le!=null&&A.unshift(mu(l,le,Y))):p||(le=Hr(l,_),le!=null&&A.push(mu(l,le,Y)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var EC=/\r\n?/g,TC=/\u0000|\uFFFD/g;function H1(i){return(typeof i=="string"?i:""+i).replace(EC,`
`).replace(TC,"")}function q1(i,a){return a=H1(a),H1(i)===a}function At(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Xn(i,""+h);break;case"className":or(i,"class",h);break;case"tabIndex":or(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":or(i,l,h);break;case"style":Oc(i,h,_);break;case"data":if(a!=="object"){or(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=el(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&At(i,a,"name",p.name,p,null),At(i,a,"formEncType",p.formEncType,p,null),At(i,a,"formMethod",p.formMethod,p,null),At(i,a,"formTarget",p.formTarget,p,null)):(At(i,a,"encType",p.encType,p,null),At(i,a,"method",p.method,p,null),At(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=el(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=el(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Xo(i,"popover",h);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Xo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Yh.get(l)||l,Xo(i,l,h))}}function Yp(i,a,l,h,p,_){switch(l){case"style":Oc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&Xn(i,""+h);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ac.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[yn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Xo(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,_,A,l,null)}}p&&At(i,a,"srcSet",l.srcSet,l,null),h&&At(i,a,"src",l.src,l,null);return;case"input":Ye("invalid",i);var L=_=A=p=null,Y=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":p=fe;break;case"type":A=fe;break;case"checked":Y=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":L=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,a));break;default:At(i,a,h,fe,l,null)}}$h(i,_,L,Y,le,A,p,!1);return;case"select":Ye("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(L=l[p],L!=null))switch(p){case"value":_=L;break;case"defaultValue":A=L;break;case"multiple":h=L;default:At(i,a,p,L,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Cs(i,!!h,a,!1):l!=null&&Cs(i,!!h,l,!0);return;case"textarea":Ye("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":h=L;break;case"defaultValue":p=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:At(i,a,A,L,l,null)}Ns(i,h,p,_);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:At(i,a,Y,h,l,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(h=0;h<fu.length;h++)Ye(fu[h],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:At(i,a,le,h,l,null)}return;default:if(Zo(a)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&Yp(i,a,fe,h,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(h=l[L],h!=null&&At(i,a,L,h,l,null))}function SC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,L=null,Y=null,le=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Y=ge;default:h.hasOwnProperty(he)||At(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":fe=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&At(i,a,ce,he,h,ge)}}Jo(i,A,L,Y,le,fe,_,p);return;case"select":he=A=L=ce=null;for(_ in l)if(Y=l[_],l.hasOwnProperty(_)&&Y!=null)switch(_){case"value":break;case"multiple":he=Y;default:h.hasOwnProperty(_)||At(i,a,_,null,h,Y)}for(p in h)if(_=h[p],Y=l[p],h.hasOwnProperty(p)&&(_!=null||Y!=null))switch(p){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":A=_;default:_!==Y&&At(i,a,p,_,h,Y)}a=L,l=A,h=he,ce!=null?Cs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Cs(i,!!l,a,!0):Cs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(L in l)if(p=l[L],l.hasOwnProperty(L)&&p!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:At(i,a,L,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&At(i,a,A,p,h,_)}Gh(i,ce,he);return;case"option":for(var Te in l)if(ce=l[Te],l.hasOwnProperty(Te)&&ce!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:At(i,a,Te,null,h,ce)}for(Y in h)if(ce=h[Y],he=l[Y],h.hasOwnProperty(Y)&&ce!==he&&(ce!=null||he!=null))switch(Y){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:At(i,a,Y,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)ce=l[Oe],l.hasOwnProperty(Oe)&&ce!=null&&!h.hasOwnProperty(Oe)&&At(i,a,Oe,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:At(i,a,le,ce,h,he)}return;default:if(Zo(a)){for(var It in l)ce=l[It],l.hasOwnProperty(It)&&ce!==void 0&&!h.hasOwnProperty(It)&&Yp(i,a,It,void 0,h,ce);for(fe in h)ce=h[fe],he=l[fe],!h.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Yp(i,a,fe,ce,h,he);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!h.hasOwnProperty(te)&&At(i,a,te,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||At(i,a,ge,ce,h,he)}function $1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,L=p.duration;if(_&&L&&$1(A)){for(A=0,L=p.responseEnd,h+=1;h<l.length;h++){var Y=l[h],le=Y.startTime;if(le>L)break;var fe=Y.transferSize,ge=Y.initiatorType;fe&&$1(ge)&&(Y=Y.responseEnd,A+=fe*(Y<L?1:(L-le)/(Y-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Qp=null,Wp=null;function Qd(i){return i.nodeType===9?i:i.ownerDocument}function G1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Xp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jp=null;function IC(){var i=window.event;return i&&i.type==="popstate"?i===Jp?!1:(Jp=i,!0):(Jp=null,!1)}var Y1=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,CC=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(i){return Q1.resolve(null).then(i).catch(NC)}:Y1;function NC(i){setTimeout(function(){throw i})}function Zs(i){return i==="head"}function W1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Ml(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")gu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,gu(l);for(var _=l.firstChild;_;){var A=_.nextSibling,L=_.nodeName;_[li]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&gu(i.ownerDocument.body);l=p}while(l);Ml(a)}function X1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function Zp(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zp(l),Wo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function kC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[li])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=kr(i.nextSibling),i===null)break}return null}function DC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=kr(i.nextSibling),i===null))return null;return i}function J1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=kr(i.nextSibling),i===null))return null;return i}function ey(i){return i.data==="$?"||i.data==="$~"}function ty(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function OC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function kr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var ny=null;function Z1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return kr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function ew(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function tw(i,a,l){switch(a=Qd(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function gu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Wo(i)}var Dr=new Map,nw=new Set;function Wd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=O.d;O.d={f:MC,r:PC,D:jC,C:VC,L:LC,m:UC,X:BC,S:zC,M:FC};function MC(){var i=cs.f(),a=Bd();return i||a}function PC(i){var a=wr(i);a!==null&&a.tag===5&&a.type==="form"?vb(a):cs.r(i)}var kl=typeof document>"u"?null:document;function rw(i,a,l){var h=kl;if(h&&typeof a=="string"&&a){var p=Wn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),nw.has(p)||(nw.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),en(a),h.head.appendChild(a)))}}function jC(i){cs.D(i),rw("dns-prefetch",i,null)}function VC(i,a){cs.C(i,a),rw("preconnect",i,a)}function LC(i,a,l){cs.L(i,a,l);var h=kl;if(h&&i&&a){var p='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Wn(l.imageSizes)+'"]')):p+='[href="'+Wn(i)+'"]';var _=p;switch(a){case"style":_=Dl(i);break;case"script":_=Ol(i)}Dr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Dr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(pu(_))||a==="script"&&h.querySelector(yu(_))||(a=h.createElement("link"),Rn(a,"link",i),en(a),h.head.appendChild(a)))}}function UC(i,a){cs.m(i,a);var l=kl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ol(i)}if(!Dr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Dr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(yu(_)))return}h=l.createElement("link"),Rn(h,"link",i),en(h),l.head.appendChild(h)}}}function zC(i,a,l){cs.S(i,a,l);var h=kl;if(h&&i){var p=ui(h).hoistableStyles,_=Dl(i);a=a||"default";var A=p.get(_);if(!A){var L={loading:0,preload:null};if(A=h.querySelector(pu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Dr.get(_))&&ry(i,l);var Y=A=h.createElement("link");en(Y),Rn(Y,"link",i),Y._p=new Promise(function(le,fe){Y.onload=le,Y.onerror=fe}),Y.addEventListener("load",function(){L.loading|=1}),Y.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Xd(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:L},p.set(_,A)}}}function BC(i,a){cs.X(i,a);var l=kl;if(l&&i){var h=ui(l).hoistableScripts,p=Ol(i),_=h.get(p);_||(_=l.querySelector(yu(p)),_||(i=y({src:i,async:!0},a),(a=Dr.get(p))&&iy(i,a),_=l.createElement("script"),en(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function FC(i,a){cs.M(i,a);var l=kl;if(l&&i){var h=ui(l).hoistableScripts,p=Ol(i),_=h.get(p);_||(_=l.querySelector(yu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Dr.get(p))&&iy(i,a),_=l.createElement("script"),en(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function iw(i,a,l,h){var p=(p=_e.current)?Wd(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Dl(l.href),l=ui(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Dl(l.href);var _=ui(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(pu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Dr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Dr.set(i,l),_||HC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ol(l),l=ui(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Dl(i){return'href="'+Wn(i)+'"'}function pu(i){return'link[rel="stylesheet"]['+i+"]"}function sw(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function HC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),en(a),i.head.appendChild(a))}function Ol(i){return'[src="'+Wn(i)+'"]'}function yu(i){return"script[async]"+i}function aw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Wn(l.href)+'"]');if(h)return a.instance=h,en(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),en(h),Rn(h,"style",p),Xd(h,l.precedence,i),a.instance=h;case"stylesheet":p=Dl(l.href);var _=i.querySelector(pu(p));if(_)return a.state.loading|=4,a.instance=_,en(_),_;h=sw(l),(p=Dr.get(p))&&ry(h,p),_=(i.ownerDocument||i).createElement("link"),en(_);var A=_;return A._p=new Promise(function(L,Y){A.onload=L,A.onerror=Y}),Rn(_,"link",h),a.state.loading|=4,Xd(_,l.precedence,i),a.instance=_;case"script":return _=Ol(l.src),(p=i.querySelector(yu(_)))?(a.instance=p,en(p),p):(h=l,(p=Dr.get(_))&&(h=y({},l),iy(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),en(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Xd(h,l.precedence,i));return a.instance}function Xd(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var L=h[A];if(L.dataset.precedence===a)_=L;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function ry(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function iy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Jd=null;function ow(i,a,l){if(Jd===null){var h=new Map,p=Jd=new Map;p.set(l,h)}else p=Jd,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[li]||_[Zt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var L=h.get(A);L?L.push(_):h.set(A,[_])}}return h}function lw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function qC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $C(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Dl(h.href),_=a.querySelector(pu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Zd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,en(_);return}_=a.ownerDocument||a,h=sw(h),(p=Dr.get(p))&&ry(h,p),_=_.createElement("link"),en(_);var A=_;A._p=new Promise(function(L,Y){A.onload=L,A.onerror=Y}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Zd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var sy=0;function GC(i,a){return i.stylesheets&&i.count===0&&tf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&tf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&sy===0&&(sy=62500*AC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&tf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>sy?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Zd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ef=null;function tf(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ef=new Map,a.forEach(KC,i),ef=null,Zd.call(i))}function KC(i,a){if(!(a.state.loading&4)){var l=ef.get(i);if(l)var h=l.get(null);else{l=new Map,ef.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=Zd.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var _u={$$typeof:U,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function YC(i,a,l,h,p,_,A,L,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function uw(i,a,l,h,p,_,A,L,Y,le,fe,ge){return i=new YC(i,a,l,A,Y,le,fe,ge,L),a=1,_===!0&&(a|=24),_=cr(3,null,null,a),i.current=_,_.stateNode=i,a=Lg(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Fg(_),i}function hw(i){return i?(i=ul,i):ul}function dw(i,a,l,h,p,_){p=hw(p),h.context===null?h.context=p:h.pendingContext=p,h=Fs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Hs(i,h,a),l!==null&&(nr(l,i,a),Wc(l,i,a))}function fw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function ay(i,a){fw(i,a),(i=i.alternate)&&fw(i,a)}function mw(i){if(i.tag===13||i.tag===31){var a=Ka(i,67108864);a!==null&&nr(a,i,67108864),ay(i,67108864)}}function gw(i){if(i.tag===13||i.tag===31){var a=mr();a=Pa(a);var l=Ka(i,a);l!==null&&nr(l,i,a),ay(i,a)}}var nf=!0;function QC(i,a,l,h){var p=P.T;P.T=null;var _=O.p;try{O.p=2,oy(i,a,l,h)}finally{O.p=_,P.T=p}}function WC(i,a,l,h){var p=P.T;P.T=null;var _=O.p;try{O.p=8,oy(i,a,l,h)}finally{O.p=_,P.T=p}}function oy(i,a,l,h){if(nf){var p=ly(h);if(p===null)Kp(i,a,h,rf,l),yw(i,h);else if(JC(p,i,a,l,h))h.stopPropagation();else if(yw(i,h),a&4&&-1<XC.indexOf(i)){for(;p!==null;){var _=wr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var Y=1<<31-kt(A);L.entanglements[1]|=Y,A&=~Y}Ei(_),(dt&6)===0&&(Ud=xe()+500,du(0))}}break;case 31:case 13:L=Ka(_,2),L!==null&&nr(L,_,2),Bd(),ay(_,2)}if(_=ly(h),_===null&&Kp(i,a,h,rf,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Kp(i,a,h,null,l)}}function ly(i){return i=xr(i),cy(i)}var rf=null;function cy(i){if(rf=null,i=ci(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return rf=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case gt:return 2;case Bn:return 8;case ut:case Fn:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var uy=!1,ea=null,ta=null,na=null,vu=new Map,bu=new Map,ra=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(i,a){switch(i){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":vu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(a.pointerId)}}function wu(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=wr(a),a!==null&&mw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function JC(i,a,l,h,p){switch(a){case"focusin":return ea=wu(ea,i,a,l,h,p),!0;case"dragenter":return ta=wu(ta,i,a,l,h,p),!0;case"mouseover":return na=wu(na,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return vu.set(_,wu(vu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,bu.set(_,wu(bu.get(_)||null,i,a,l,h,p)),!0}return!1}function _w(i){var a=ci(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,zr(i.priority,function(){gw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,zr(i.priority,function(){gw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ly(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Mc=h,l.target.dispatchEvent(h),Mc=null}else return a=wr(l),a!==null&&mw(a),i.blockedOn=l,!1;a.shift()}return!0}function vw(i,a,l){sf(i)&&l.delete(a)}function ZC(){uy=!1,ea!==null&&sf(ea)&&(ea=null),ta!==null&&sf(ta)&&(ta=null),na!==null&&sf(na)&&(na=null),vu.forEach(vw),bu.forEach(vw)}function af(i,a){i.blockedOn===a&&(i.blockedOn=null,uy||(uy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ZC)))}var of=null;function bw(i){of!==i&&(of=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){of===i&&(of=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(cy(h||l)===null)continue;break}var _=wr(l);_!==null&&(i.splice(a,3),a-=3,lp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Ml(i){function a(Y){return af(Y,i)}ea!==null&&af(ea,i),ta!==null&&af(ta,i),na!==null&&af(na,i),vu.forEach(a),bu.forEach(a);for(var l=0;l<ra.length;l++){var h=ra[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ra.length&&(l=ra[0],l.blockedOn===null);)_w(l),l.blockedOn===null&&ra.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[yn]||null;if(typeof _=="function")A||bw(l);else if(A){var L=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[yn]||null)L=A.formAction;else if(cy(p)!==null)continue}else L=A.action;typeof L=="function"?l[h+1]=L:(l.splice(h,3),h-=3),bw(l)}}}function ww(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function hy(i){this._internalRoot=i}lf.prototype.render=hy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=mr();dw(l,h,i,a,null,null)},lf.prototype.unmount=hy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;dw(i.current,2,null,i,null,null),Bd(),a[oi]=null}};function lf(i){this._internalRoot=i}lf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Bh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ra.length&&a!==0&&a<ra[l].priority;l++);ra.splice(l,0,i),l===0&&_w(i)}};var xw=e.version;if(xw!=="19.2.3")throw Error(n(527,xw,"19.2.3"));O.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var eN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Gt=cf.inject(eN),Et=cf}catch{}}return Eu.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=Cb,_=Nb,A=kb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=uw(i,1,!1,null,null,l,h,null,p,_,A,ww),i[oi]=a.current,Gp(i),new hy(a)},Eu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=Cb,A=Nb,L=kb,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),a=uw(i,1,!0,a,l??null,h,p,Y,_,A,L,ww),a.context=hw(null),l=a.current,h=mr(),h=Pa(h),p=Fs(h),p.callback=null,Hs(l,p,h),l=h,a.current.lanes=l,Oa(a,l),Ei(a),i[oi]=a.current,Gp(i),new lf(a)},Eu.version="19.2.3",Eu}var Dw;function dN(){if(Dw)return my.exports;Dw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),my.exports=hN(),my.exports}var fN=dN();var Ow="popstate";function mN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Uo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),By("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:Xu(o))}function n(s,o){Lr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return pN(e,t,n,r)}function zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Lr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gN(){return Math.random().toString(36).substring(2,10)}function Mw(r,e){return{usr:r.state,key:r.key,idx:e}}function By(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Uo(e):e,state:t,key:e&&e.key||n||gN()}}function Xu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Uo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function pN(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let M=g(),V=M==null?null:M-f;f=M,d&&d({action:u,location:k.location,delta:V})}function v(M,V){u="PUSH";let H=By(k.location,M,V);t&&t(H,M),f=g()+1;let U=Mw(H,f),F=k.createHref(H);try{c.pushState(U,"",F)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(F)}o&&d&&d({action:u,location:k.location,delta:1})}function w(M,V){u="REPLACE";let H=By(k.location,M,V);t&&t(H,M),f=g();let U=Mw(H,f),F=k.createHref(H);c.replaceState(U,"",F),o&&d&&d({action:u,location:k.location,delta:0})}function E(M){return yN(M)}let k={get action(){return u},get location(){return r(s,c)},listen(M){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,y),d=M,()=>{s.removeEventListener(Ow,y),d=null}},createHref(M){return e(s,M)},createURL:E,encodeLocation(M){let V=E(M);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(M){return c.go(M)}};return k}function yN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Xu(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function FT(r,e,t="/"){return _N(r,e,t,!1)}function _N(r,e,t,n){let s=typeof e=="string"?Uo(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=HT(r);vN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=NN(o);u=RN(c[d],f,n)}return u}function HT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;zt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(zt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),HT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:AN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of qT(c.path))o(c,u,!0,d)}),e}function qT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=qT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function vN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:IN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var bN=/^:[\w-]+$/,wN=3,xN=2,EN=1,TN=10,SN=-2,Pw=r=>r==="*";function AN(r,e){let t=r.split("/"),n=t.length;return t.some(Pw)&&(n+=SN),e&&(n+=xN),t.filter(s=>!Pw(s)).reduce((s,o)=>s+(bN.test(o)?wN:o===""?EN:TN),n)}function IN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function RN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=$f({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=$f({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:PN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function $f(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=CN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let E=u[v]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function CN(r,e=!1,t=!0){Lr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function NN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var kN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DN=r=>kN.test(r);function ON(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Uo(r):r,o;if(t)if(DN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Lr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=jw(t.substring(1),"/"):o=jw(t,e)}else o=e;return{pathname:o,search:jN(n),hash:VN(s)}}function jw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function _y(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $T(r){let e=MN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function GT(r,e,t,n=!1){let s;typeof r=="string"?s=Uo(r):(s={...r},zt(!s.pathname||!s.pathname.includes("?"),_y("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),_y("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),_y("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=ON(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),PN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,VN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function LN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function UN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KT=["POST","PUT","PATCH","DELETE"];new Set(KT);var zN=["GET",...KT];new Set(zN);var pc=$.createContext(null);pc.displayName="DataRouter";var Nm=$.createContext(null);Nm.displayName="DataRouterState";$.createContext(!1);var YT=$.createContext({isTransitioning:!1});YT.displayName="ViewTransition";var BN=$.createContext(new Map);BN.displayName="Fetchers";var FN=$.createContext(null);FN.displayName="Await";var ri=$.createContext(null);ri.displayName="Navigation";var bh=$.createContext(null);bh.displayName="Location";var ii=$.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var O0=$.createContext(null);O0.displayName="RouteError";function HN(r,{relative:e}={}){zt(wh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ri),{hash:s,pathname:o,search:c}=xh(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function wh(){return $.useContext(bh)!=null}function vr(){return zt(wh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(bh).location}var QT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WT(r){$.useContext(ri).static||$.useLayoutEffect(r)}function Es(){let{isDataRoute:r}=$.useContext(ii);return r?ik():qN()}function qN(){zt(wh(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(pc),{basename:e,navigator:t}=$.useContext(ri),{matches:n}=$.useContext(ii),{pathname:s}=vr(),o=JSON.stringify($T(n)),c=$.useRef(!1);return WT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Lr(c.current,QT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=GT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var $N=$.createContext(null);function GN(r){let e=$.useContext(ii).outlet;return $.useMemo(()=>e&&$.createElement($N.Provider,{value:r},e),[e,r])}function XT(){let{matches:r}=$.useContext(ii),e=r[r.length-1];return e?e.params:{}}function xh(r,{relative:e}={}){let{matches:t}=$.useContext(ii),{pathname:n}=vr(),s=JSON.stringify($T(t));return $.useMemo(()=>GT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function KN(r,e){return JT(r,e)}function JT(r,e,t,n,s){zt(wh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ri),{matches:c}=$.useContext(ii),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let H=y&&y.path||"";ZT(f,!y||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let v=vr(),w;if(e){let H=typeof e=="string"?Uo(e):e;zt(g==="/"||H.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),w=H}else w=v;let E=w.pathname||"/",k=E;if(g!=="/"){let H=g.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(H.length).join("/")}let M=FT(r,{pathname:k});Lr(y||M!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Lr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=JN(M&&M.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(bh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function YN(){let r=rk(),e=LN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var QN=$.createElement(YN,null),WN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(ii.Provider,{value:this.props.routeContext},$.createElement(O0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XN({routeContext:r,match:e,children:t}){let n=$.useContext(pc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ii.Provider,{value:r},t)}function JN(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);zt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:UN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,E=!1,k=null,M=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||QN,u&&(d<0&&v===0?(ZT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,M=null):d===v&&(E=!0,M=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),H=()=>{let U;return w?U=k:E?U=M:y.route.Component?U=$.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=g,$.createElement(XN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:U})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(WN,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:H(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):H()},null)}function M0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(r){let e=$.useContext(pc);return zt(e,M0(r)),e}function ek(r){let e=$.useContext(Nm);return zt(e,M0(r)),e}function tk(r){let e=$.useContext(ii);return zt(e,M0(r)),e}function P0(r){let e=tk(r),t=e.matches[e.matches.length-1];return zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function nk(){return P0("useRouteId")}function rk(){let r=$.useContext(O0),e=ek("useRouteError"),t=P0("useRouteError");return r!==void 0?r:e.errors?.[t]}function ik(){let{router:r}=ZN("useNavigate"),e=P0("useNavigate"),t=$.useRef(!1);return WT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Lr(t.current,QT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Vw={};function ZT(r,e,t){!e&&!Vw[r]&&(Vw[r]=!0,Lr(!1,t))}$.memo(sk);function sk({routes:r,future:e,state:t,unstable_onError:n}){return JT(r,void 0,t,n,e)}function ak(r){return GN(r.context)}function Wr(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ok({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){zt(!wh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Uo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,E=$.useMemo(()=>{let k=ps(f,u);return k==null?null:{location:{pathname:k,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Lr(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:$.createElement(ri.Provider,{value:d},$.createElement(bh.Provider,{children:e,value:E}))}function lk({children:r,location:e}){return KN(Fy(r),e)}function Fy(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,Fy(n.props.children,o));return}zt(n.type===Wr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Fy(n.props.children,o)),t.push(c)}),t}var Ef="get",Tf="application/x-www-form-urlencoded";function km(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function ck(r){return km(r)&&r.tagName.toLowerCase()==="button"}function uk(r){return km(r)&&r.tagName.toLowerCase()==="form"}function hk(r){return km(r)&&r.tagName.toLowerCase()==="input"}function dk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function fk(r,e){return r.button===0&&(!e||e==="_self")&&!dk(r)}var uf=null;function mk(){if(uf===null)try{new FormData(document.createElement("form"),0),uf=!1}catch{uf=!0}return uf}var gk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vy(r){return r!=null&&!gk.has(r)?(Lr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tf}"`),null):r}function pk(r,e){let t,n,s,o,c;if(uk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||Ef,s=vy(r.getAttribute("enctype"))||Tf,o=new FormData(r)}else if(ck(r)||hk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Ef,s=vy(r.getAttribute("formenctype"))||vy(u.getAttribute("enctype"))||Tf,o=new FormData(u,r),!mk()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(km(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ef,n=null,s=Tf,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function j0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function yk(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function _k(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function bk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await _k(o,t);return c.links?c.links():[]}return[]}));return Tk(n.flat(1).filter(vk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Lw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function wk(r,e,{includeHydrateFallback:t}={}){return xk(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function xk(r){return[...new Set(r)]}function Ek(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Tk(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(Ek(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function eS(){let r=$.useContext(pc);return j0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Sk(){let r=$.useContext(Nm);return j0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var V0=$.createContext(void 0);V0.displayName="FrameworkContext";function tS(){let r=$.useContext(V0);return j0(r,"You must render this element inside a <HydratedRouter> element"),r}function Ak(r,e){let t=$.useContext(V0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let k=V=>{V.forEach(H=>{c(H.isIntersecting)})},M=new IntersectionObserver(k,{threshold:.5});return v.current&&M.observe(v.current),()=>{M.disconnect()}}},[r]),$.useEffect(()=>{if(n){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[n]);let w=()=>{s(!0)},E=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Tu(u,w),onBlur:Tu(d,E),onMouseEnter:Tu(f,w),onMouseLeave:Tu(g,E),onTouchStart:Tu(y,w)}]:[!1,v,{}]}function Tu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Ik({page:r,...e}){let{router:t}=eS(),n=$.useMemo(()=>FT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(Ck,{page:r,matches:n,...e}):null}function Rk(r){let{manifest:e,routeModules:t}=tS(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return bk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function Ck({page:r,matches:e,...t}){let n=vr(),{manifest:s,routeModules:o}=tS(),{basename:c}=eS(),{loaderData:u,matches:d}=Sk(),f=$.useMemo(()=>Lw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>Lw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let E=new Set,k=!1;if(e.forEach(V=>{let H=s.routes[V.route.id];!H||!H.hasLoader||(!f.some(U=>U.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||H.hasClientLoader?k=!0:E.add(V.route.id))}),E.size===0)return[];let M=yk(r,c,"data");return k&&E.size>0&&M.searchParams.set("_routes",e.filter(V=>E.has(V.route.id)).map(V=>V.route.id).join(",")),[M.pathname+M.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>wk(g,s),[g,s]),w=Rk(g);return $.createElement($.Fragment,null,y.map(E=>$.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>$.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:k})=>$.createElement("link",{key:E,nonce:t.nonce,...k})))}function Nk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nS&&(window.__reactRouterVersion="7.10.1")}catch{}function kk({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=mN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(ok,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var rS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:E,unstable_useTransitions:k}=$.useContext(ri),M=typeof f=="string"&&rS.test(f),V,H=!1;if(typeof f=="string"&&M&&(V=f,nS))try{let I=new URL(window.location.href),N=f.startsWith("//")?new URL(I.protocol+f):new URL(f),j=ps(N.pathname,E);N.origin===I.origin&&j!=null?f=j+N.search+N.hash:H=!0}catch{Lr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=HN(f,{relative:s}),[F,K,z]=Ak(n,v),D=Pk(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:k});function S(I){e&&e(I),I.defaultPrevented||D(I)}let T=$.createElement("a",{...v,...z,href:V||U,onClick:H||o?e:S,ref:Nk(w,K),target:d,"data-discover":!M&&t==="render"?"true":void 0});return F&&!M?$.createElement($.Fragment,null,T,$.createElement(Ik,{page:U})):T});Zr.displayName="Link";var Dk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=xh(c,{relative:f.relative}),v=vr(),w=$.useContext(Nm),{navigator:E,basename:k}=$.useContext(ri),M=w!=null&&zk(y)&&u===!0,V=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,H=v.pathname,U=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),U=U?U.toLowerCase():null,V=V.toLowerCase()),U&&k&&(U=ps(U,k)||U);const F=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let K=H===V||!s&&H.startsWith(V)&&H.charAt(F)==="/",z=U!=null&&(U===V||!s&&U.startsWith(V)&&U.charAt(V.length)==="/"),D={isActive:K,isPending:z,isTransitioning:M},S=K?e:void 0,T;typeof n=="function"?T=n(D):T=[n,K?"active":null,z?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(D):o;return $.createElement(Zr,{...f,"aria-current":S,className:T,ref:g,style:I,to:c,viewTransition:u},typeof d=="function"?d(D):d)});Dk.displayName="NavLink";var Ok=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=Ef,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:E}=$.useContext(ri),k=Lk(),M=Uk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",H=typeof u=="string"&&rS.test(u),U=F=>{if(d&&d(F),F.defaultPrevented)return;F.preventDefault();let K=F.nativeEvent.submitter,z=K?.getAttribute("formmethod")||c,D=()=>k(K||F.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});E&&t!==!1?$.startTransition(()=>D()):D()};return $.createElement("form",{ref:w,method:V,action:M,onSubmit:n?d:U,...v,"data-discover":!H&&r==="render"?"true":void 0})});Ok.displayName="Form";function Mk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iS(r){let e=$.useContext(pc);return zt(e,Mk(r)),e}function Pk(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Es(),f=vr(),g=xh(r,{relative:o});return $.useCallback(y=>{if(fk(y,e)){y.preventDefault();let v=t!==void 0?t:Xu(f)===Xu(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var jk=0,Vk=()=>`__${String(++jk)}__`;function Lk(){let{router:r}=iS("useSubmit"),{basename:e}=$.useContext(ri),t=nk(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=pk(o,e);if(c.navigate===!1){let v=c.fetcherKey||Vk();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function Uk(r,{relative:e}={}){let{basename:t}=$.useContext(ri),n=$.useContext(ii);zt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...xh(r||".",{relative:e})},c=vr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),Xu(o)}function zk(r,{relative:e}={}){let t=$.useContext(YT);zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=iS("useViewTransitionState"),s=xh(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return $f(s.pathname,c)!=null||$f(s.pathname,o)!=null}const Ve=r=>typeof r=="string",Su=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Uw=r=>r==null?"":""+r,Bk=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},Fk=/###/g,zw=r=>r&&r.indexOf("###")>-1?r.replace(Fk,"."):r,Bw=r=>!r||Ve(r),Lu=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Bw(r))return{};const o=zw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Bw(r)?{}:{obj:r,k:zw(n[s])}},Fw=(r,e,t)=>{const{obj:n,k:s}=Lu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Lu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Lu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},Hk=(r,e,t,n)=>{const{obj:s,k:o}=Lu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Gf=(r,e)=>{const{obj:t,k:n}=Lu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},qk=(r,e,t)=>{const n=Gf(r,t);return n!==void 0?n:Gf(e,t)},sS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):sS(r[n],e[n],t):r[n]=e[n]);return r},Pl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Gk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>$k[e]):r;class Kk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Yk=[" ",",","?","!",";"],Qk=new Kk(20),Wk=(r,e,t)=>{e=e||"",t=t||"";const n=Yk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Qk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},Hy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},Ju=r=>r?.replace("_","-"),Xk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let Jk=class qy{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Xk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new qy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new qy(this.logger,e)}};var Ri=new Jk;class Dm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Hw extends Dm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Gf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:Hy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),Fw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Gf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?sS(d,n,o):d={...d,...n},Fw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var aS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const oS=Symbol("i18next/PATH_KEY");function Zk(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===oS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function $y(r,e){const{[oS]:t}=r(Zk());return t.join(e?.keySeparator??".")}const qw={},by=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Kf extends Dm{constructor(e,t={}){super(),Bk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=by(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Wk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=$y(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let E=w?.res;const k=w?.usedKey||u,M=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],H=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,U=!this.i18nFormat||this.i18nFormat.handleAsObject,F=s.count!==void 0&&!Ve(s.count),K=Kf.hasDefaultValue(s),z=F?this.pluralResolver.getSuffix(y,s.count,s):"",D=s.ordinal&&F?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",S=F&&!s.ordinal&&s.count===0,T=S&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${D}`]||s.defaultValue;let I=E;U&&!E&&K&&(I=T);const N=by(I),j=Object.prototype.toString.apply(I);if(U&&I&&N&&V.indexOf(j)<0&&!(Ve(H)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=C,w.usedParams=this.getUsedParamsDetails(s),w):C}if(c){const C=Array.isArray(I),G=C?[]:{},J=C?M:k;for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)){const O=`${J}${c}${P}`;K&&!E?G[P]=this.translate(O,{...s,defaultValue:by(T)?T[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(O,{...s,joinArrays:!1,ns:d}),G[P]===O&&(G[P]=I[P])}E=G}}else if(U&&Ve(H)&&Array.isArray(E))E=E.join(H),E&&(E=this.extendTranslation(E,e,s,n));else{let C=!1,G=!1;!this.isValidLookup(E)&&K&&(C=!0,E=T),this.isValidLookup(E)||(G=!0,E=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:E,O=K&&T!==E&&this.options.updateMissing;if(G||C||O){if(this.logger.log(O?"updateKey":"missingKey",y,f,u,O?T:E),c){const q=this.resolve(u,{...s,keySeparator:!1});q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ee=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let q=0;q<W.length;q++)ee.push(W[q]);else this.options.saveMissingTo==="all"?ee=this.languageUtils.toResolveHierarchy(s.lng||this.language):ee.push(s.lng||this.language);const Z=(q,Q,ie)=>{const se=K&&ie!==E?ie:P;this.options.missingKeyHandler?this.options.missingKeyHandler(q,f,Q,se,O,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(q,f,Q,se,O,s),this.emit("missingKey",q,f,Q,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?ee.forEach(q=>{const Q=this.pluralResolver.getSuffixes(q,s);S&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Q.indexOf(`${this.options.pluralSeparator}zero`)<0&&Q.push(`${this.options.pluralSeparator}zero`),Q.forEach(ie=>{Z([q],u+ie,s[`defaultValue${ie}`]||T)})}):Z(ee,u,T))}E=this.extendTranslation(E,e,s,w,n),G&&E===u&&this.options.appendNamespaceToMissingKey&&(E=`${f}${g}${u}`),(G||C)&&this.options.parseMissingKeyHandler&&(E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,C?E:void 0,s))}return o?(w.res=E,w.usedParams=this.getUsedParamsDetails(s),w):E}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=aS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,E=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",k=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(M=>{this.isValidLookup(n)||(u=M,!qw[`${k[0]}-${M}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(qw[`${k[0]}-${M}`]=!0,this.logger.warn(`key "${s}" for languages "${k.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(V=>{if(this.isValidLookup(n))return;c=V;const H=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(H,g,V,M,t);else{let F;v&&(F=this.pluralResolver.getSuffix(V,t.count,t));const K=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&F.indexOf(z)===0&&H.push(g+F.replace(z,this.options.pluralSeparator)),H.push(g+F),w&&H.push(g+K)),E){const D=`${g}${this.options.contextSeparator||"_"}${t.context}`;H.push(D),v&&(t.ordinal&&F.indexOf(z)===0&&H.push(D+F.replace(z,this.options.pluralSeparator)),H.push(D+F),w&&H.push(D+K))}}let U;for(;U=H.pop();)this.isValidLookup(n)||(o=U,n=this.getResource(V,M,U,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class $w{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(e){if(e=Ju(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ju(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const Gw={zero:0,one:1,two:2,few:3,many:4,other:5},Kw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class eD{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=Ju(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Kw;if(!e.match(/-|_/))return Kw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Gw[s]-Gw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Yw=(r,e,t,n=".",s=!0)=>{let o=qk(r,e,t);return!o&&s&&Ve(t)&&(o=Hy(r,t,n),o===void 0&&(o=Hy(e,t,n))),o},wy=r=>r.replace(/\$/g,"$$$$");class Qw{constructor(e={}){this.logger=Ri.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:E,nestingSuffixEscaped:k,nestingOptionsSeparator:M,maxReplaces:V,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:Gk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Pl(o):c||"{{",this.suffix=u?Pl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Pl(v):w||Pl("$t("),this.nestingSuffix=E?Pl(E):k||Pl(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=V||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Yw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const E=w.split(this.formatSeparator),k=E.shift().trim(),M=E.join(this.formatSeparator).trim();return this.format(Yw(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure),M,n,{...s,...t,interpolationkey:k})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>wy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?wy(this.escape(w)):wy(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const E=o[1].trim();if(c=f(E),c===void 0)if(typeof g=="function"){const M=g(e,o,s);c=Ve(M)?M:""}else if(s&&Object.prototype.hasOwnProperty.call(s,E))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${E} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Uw(c));const k=w.safeValue(c);if(e=e.replace(o[0],k),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),E=v.match(/"/g);((w?.length??0)%2===0&&!E||E.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,k),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Uw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const tD=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Ww=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(Ju(n),s),e[c]=u),u(t)}},nD=r=>(e,t,n)=>r(Ju(t),n)(e);class rD{constructor(e={}){this.logger=Ri.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Ww:nD;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Ww(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=tD(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const iD=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class sD extends Dm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{Hk(d.loaded,[o],c),iD(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Xw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Jw=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),hf=()=>{},aD=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Uu extends Dm{constructor(e={},t){if(super(),this.options=Jw(e),this.services={},this.logger=Ri,this.modules={external:[]},aD(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Xw();this.options={...n,...this.options,...Jw(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=rD;const g=new $w(this.options);this.store=new Hw(this.options.resources,this.options);const y=this.services;y.logger=Ri,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new eD(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Qw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new sD(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Kf(this.services,this.options),this.translator.on("*",(w,...E)=>{this.emit(w,...E)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=hf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Su(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=hf){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Su();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=hf),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&aS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Su();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=$y(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=$y(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Su();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Su();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new $w(Xw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new Uu(e,t);return n.createInstance=Uu.createInstance,n}cloneInstance(e={},t=hf){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Uu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new Hw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Qw(s)),o.translator=new Kf(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=Uu.createInstance();Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const oD=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);To(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Zw={},lS=(r,e,t,n)=>{To(t)&&Zw[t]||(To(t)&&(Zw[t]=new Date),oD(r,e,t,n))},cS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Gy=(r,e,t)=>{r.loadNamespaces(e,cS(r,t))},ex=(r,e,t,n)=>{if(To(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Gy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,cS(r,n))},lD=(r,e,t={})=>!e.languages||!e.languages.length?(lS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),To=r=>typeof r=="string",cD=r=>typeof r=="object"&&r!==null,uD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,hD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},dD=r=>hD[r],fD=r=>r.replace(uD,dD);let Ky={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:fD,transDefaultProps:void 0};const mD=(r={})=>{Ky={...Ky,...r}},gD=()=>Ky;let uS;const pD=r=>{uS=r},yD=()=>uS,_D={type:"3rdParty",init(r){mD(r.options.react),pD(r)}},vD=$.createContext();class bD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var xy={exports:{}},Ey={};var tx;function wD(){if(tx)return Ey;tx=1;var r=Cm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),E=n({inst:{value:w,getSnapshot:v}}),k=E[0].inst,M=E[1];return o(function(){k.value=w,k.getSnapshot=v,d(k)&&M({inst:k})},[y,w,v]),s(function(){return d(k)&&M({inst:k}),y(function(){d(k)&&M({inst:k})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ey.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ey}var nx;function xD(){return nx||(nx=1,xy.exports=wD()),xy.exports}var ED=xD();const TD=(r,e)=>To(e)?e:cD(e)&&To(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,SD={t:TD,ready:!1},AD=()=>()=>{},zn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(vD)||{},o=t||n||yD();o&&!o.reportNamespaces&&(o.reportNamespaces=new bD),o||lS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...gD(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=To(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(T=>{if(!o)return AD;const{bindI18n:I,bindI18nStore:N}=c,j=()=>{v.current+=1,T()};return I&&o.on(I,j),N&&o.store.on(N,j),()=>{I&&I.split(" ").forEach(C=>o.off(C,j)),N&&N.split(" ").forEach(C=>o.store.off(C,j))}},[o,c]),E=$.useRef(),k=$.useCallback(()=>{if(!o)return SD;const T=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(J=>lD(J,o,c)),I=e.lng||o.language,N=v.current,j=E.current;if(j&&j.ready===T&&j.lng===I&&j.keyPrefix===d&&j.revision===N)return j;const G={t:o.getFixedT(I,c.nsMode==="fallback"?y:y[0],d),ready:T,lng:I,keyPrefix:d,revision:N};return E.current=G,G},[o,y,d,c,e.lng]),[M,V]=$.useState(0),{t:H,ready:U}=ED.useSyncExternalStore(w,k,k);$.useEffect(()=>{if(o&&!U&&!u){const T=()=>V(I=>I+1);e.lng?ex(o,e.lng,y,T):Gy(o,y,T)}},[o,e.lng,y,U,u,M]);const F=o||{},K=$.useRef(null),z=$.useRef(),D=T=>{const I=Object.getOwnPropertyDescriptors(T);I.__original&&delete I.__original;const N=Object.create(Object.getPrototypeOf(T),I);if(!Object.prototype.hasOwnProperty.call(N,"__original"))try{Object.defineProperty(N,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return N},S=$.useMemo(()=>{const T=F,I=T?.language;let N=T;T&&(K.current&&K.current.__original===T?z.current!==I?(N=D(T),K.current=N,z.current=I):N=K.current:(N=D(T),K.current=N,z.current=I));const j=[H,N,U];return j.t=H,j.i18n=N,j.ready=U,j},[H,F,U,F.resolvedLanguage,F.language,F.languages]);if(o&&u&&!U)throw new Promise(T=>{const I=()=>T();e.lng?ex(o,e.lng,y,I):Gy(o,y,I)});return S},ID=()=>{};var rx={};const hS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},RD=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(hS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):RD(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new CD;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const E=f<<6&192|y;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class CD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ND=function(r){const e=hS(r);return dS.encodeByteArray(e,!0)},Yf=function(r){return ND(r).replace(/\./g,"")},fS=function(r){try{return dS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kD=()=>mS().__FIREBASE_DEFAULTS__,DD=()=>{if(typeof process>"u"||typeof rx>"u")return;const r=rx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OD=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&fS(r[1]);return e&&JSON.parse(e)},Om=()=>{try{return ID()||kD()||DD()||OD()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gS=r=>Om()?.emulatorHosts?.[r],pS=r=>{const e=gS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},yS=()=>Om()?.config,_S=r=>Om()?.[`_${r}`];class MD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L0(r){return(await fetch(r,{credentials:"include"})).ok}function vS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yf(JSON.stringify(t)),Yf(JSON.stringify(c)),""].join(".")}const zu={};function PD(){const r={prod:[],emulator:[]};for(const e of Object.keys(zu))zu[e]?r.emulator.push(e):r.prod.push(e);return r}function jD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ix=!1;function U0(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||zu[r]===e||zu[r]||ix)return;zu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=PD().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ix=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=jD(n),w=t("text"),E=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),M=document.getElementById(k)||document.createElement("a"),V=t("preprendIcon"),H=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;u(U),g(M,k);const F=f();d(H,V),U.append(H,E,M,F),document.body.appendChild(U)}o?(E.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function bS(){const r=Om()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function zD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BD(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){return!bS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function FD(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const HD="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=HD,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eh.prototype.create)}}class Eh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?qD(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function qD(r,e){return r.replace($D,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const $D=/\{\$([^}]+)}/g;function GD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(sx(o)&&sx(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function sx(r){return r!==null&&typeof r=="object"}function Th(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ku(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Du(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function KD(r,e){const t=new YD(r,e);return t.subscribe.bind(t)}class YD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");QD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Ty),s.error===void 0&&(s.error=Ty),s.complete===void 0&&(s.complete=Ty);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ty(){}function Xt(r){return r&&r._delegate?r._delegate:r}class Ea{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oo="[DEFAULT]";class WD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new MD;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JD(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:XD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XD(r){return r===oo?void 0:r}function JD(r){return r.instantiationMode==="EAGER"}class ZD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const e4={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},t4=Xe.INFO,n4={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},r4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=n4[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z0{constructor(e){this.name=e,this._logLevel=t4,this._logHandler=r4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const i4=(r,e)=>e.some(t=>r instanceof t);let ax,ox;function s4(){return ax||(ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a4(){return ox||(ox=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,Yy=new WeakMap,SS=new WeakMap,Sy=new WeakMap,B0=new WeakMap;function o4(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(pa(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&TS.set(t,r)}).catch(()=>{}),B0.set(e,r),e}function l4(r){if(Yy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Yy.set(r,e)}let Qy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Yy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||SS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function c4(r){Qy=r(Qy)}function u4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Ay(this),e,...t);return SS.set(n,e.sort?e.sort():[e]),pa(n)}:a4().includes(r)?function(...e){return r.apply(Ay(this),e),pa(TS.get(this))}:function(...e){return pa(r.apply(Ay(this),e))}}function h4(r){return typeof r=="function"?u4(r):(r instanceof IDBTransaction&&l4(r),i4(r,s4())?new Proxy(r,Qy):r)}function pa(r){if(r instanceof IDBRequest)return o4(r);if(Sy.has(r))return Sy.get(r);const e=h4(r);return e!==r&&(Sy.set(r,e),B0.set(e,r)),e}const Ay=r=>B0.get(r);function d4(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=pa(c);return n&&c.addEventListener("upgradeneeded",d=>{n(pa(c.result),d.oldVersion,d.newVersion,pa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const f4=["get","getKey","getAll","getAllKeys","count"],m4=["put","add","delete","clear"],Iy=new Map;function lx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Iy.get(e))return Iy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=m4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||f4.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Iy.set(e,o),o}c4(r=>({...r,get:(e,t,n)=>lx(e,t)||r.get(e,t,n),has:(e,t)=>!!lx(e,t)||r.has(e,t)}));class g4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(p4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function p4(r){return r.getComponent()?.type==="VERSION"}const Wy="@firebase/app",cx="0.14.6";const _s=new z0("@firebase/app"),y4="@firebase/app-compat",_4="@firebase/analytics-compat",v4="@firebase/analytics",b4="@firebase/app-check-compat",w4="@firebase/app-check",x4="@firebase/auth",E4="@firebase/auth-compat",T4="@firebase/database",S4="@firebase/data-connect",A4="@firebase/database-compat",I4="@firebase/functions",R4="@firebase/functions-compat",C4="@firebase/installations",N4="@firebase/installations-compat",k4="@firebase/messaging",D4="@firebase/messaging-compat",O4="@firebase/performance",M4="@firebase/performance-compat",P4="@firebase/remote-config",j4="@firebase/remote-config-compat",V4="@firebase/storage",L4="@firebase/storage-compat",U4="@firebase/firestore",z4="@firebase/ai",B4="@firebase/firestore-compat",F4="firebase",H4="12.6.0";const Xy="[DEFAULT]",q4={[Wy]:"fire-core",[y4]:"fire-core-compat",[v4]:"fire-analytics",[_4]:"fire-analytics-compat",[w4]:"fire-app-check",[b4]:"fire-app-check-compat",[x4]:"fire-auth",[E4]:"fire-auth-compat",[T4]:"fire-rtdb",[S4]:"fire-data-connect",[A4]:"fire-rtdb-compat",[I4]:"fire-fn",[R4]:"fire-fn-compat",[C4]:"fire-iid",[N4]:"fire-iid-compat",[k4]:"fire-fcm",[D4]:"fire-fcm-compat",[O4]:"fire-perf",[M4]:"fire-perf-compat",[P4]:"fire-rc",[j4]:"fire-rc-compat",[V4]:"fire-gcs",[L4]:"fire-gcs-compat",[U4]:"fire-fst",[B4]:"fire-fst-compat",[z4]:"fire-vertex","fire-js":"fire-js",[F4]:"fire-js-all"};const Qf=new Map,$4=new Map,Jy=new Map;function ux(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function So(r){const e=r.name;if(Jy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Jy.set(e,r);for(const t of Qf.values())ux(t,r);for(const t of $4.values())ux(t,r);return!0}function Mm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function pr(r){return r==null?!1:r.settings!==void 0}const G4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new Eh("app","Firebase",G4);class K4{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const Bo=H4;function AS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Xy,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw ya.create("bad-app-name",{appName:String(s)});if(t||(t=yS()),!t)throw ya.create("no-options");const o=Qf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw ya.create("duplicate-app",{appName:s})}const c=new ZD(s);for(const d of Jy.values())c.addComponent(d);const u=new K4(t,n,c);return Qf.set(s,u),u}function F0(r=Xy){const e=Qf.get(r);if(!e&&r===Xy&&yS())return AS();if(!e)throw ya.create("no-app",{appName:r});return e}function ki(r,e,t){let n=q4[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}So(new Ea(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const Y4="firebase-heartbeat-database",Q4=1,Zu="firebase-heartbeat-store";let Ry=null;function IS(){return Ry||(Ry=d4(Y4,Q4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Zu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ya.create("idb-open",{originalErrorMessage:r.message})})),Ry}async function W4(r){try{const t=(await IS()).transaction(Zu),n=await t.objectStore(Zu).get(RS(r));return await t.done,n}catch(e){if(e instanceof Bi)_s.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function hx(r,e){try{const n=(await IS()).transaction(Zu,"readwrite");await n.objectStore(Zu).put(e,RS(r)),await n.done}catch(t){if(t instanceof Bi)_s.warn(t.message);else{const n=ya.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function RS(r){return`${r.name}!${r.options.appId}`}const X4=1024,J4=30;class Z4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=dx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>J4){const s=nO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dx(),{heartbeatsToSend:t,unsentEntries:n}=eO(this._heartbeatsCache.heartbeats),s=Yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function dx(){return new Date().toISOString().substring(0,10)}function eO(r,e=X4){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),fx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),fx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class tO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?FD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function fx(r){return Yf(JSON.stringify({version:2,heartbeats:r})).length}function nO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function rO(r){So(new Ea("platform-logger",e=>new g4(e),"PRIVATE")),So(new Ea("heartbeat",e=>new Z4(e),"PRIVATE")),ki(Wy,cx,r),ki(Wy,cx,"esm2020"),ki("fire-js","")}rO("");var iO="firebase",sO="12.6.0";ki(iO,sO,"app");function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aO=CS,NS=new Eh("auth","Firebase",CS());const Wf=new z0("@firebase/auth");function oO(r,...e){Wf.logLevel<=Xe.WARN&&Wf.warn(`Auth (${Bo}): ${r}`,...e)}function Sf(r,...e){Wf.logLevel<=Xe.ERROR&&Wf.error(`Auth (${Bo}): ${r}`,...e)}function ni(r,...e){throw H0(r,...e)}function Di(r,...e){return H0(r,...e)}function kS(r,e,t){const n={...aO(),[e]:t};return new Eh("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return kS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return NS.create(r,...e)}function je(r,e,...t){if(!r)throw H0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Sf(e),new Error(e)}function vs(r,e){r||hs(e)}function Zy(){return typeof self<"u"&&self.location?.href||""}function lO(){return mx()==="http:"||mx()==="https:"}function mx(){return typeof self<"u"&&self.location?.protocol||null}function cO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lO()||UD()||"connection"in navigator)?navigator.onLine:!0}function uO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Sh{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=VD()||zD()}get(){return cO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class DS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fO=new Sh(3e4,6e4);function Ts(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return OS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=Th({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return LD()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(f.credentials="include"),DS.fetch()(await MS(r,r.config.apiHost,t,u),f)})}async function OS(r,e,t){r._canInitEmulator=!1;const n={...hO,...e};try{const s=new gO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw df(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw df(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw df(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw kS(r,g,f);ni(r,g)}}catch(s){if(s instanceof Bi)throw s;ni(r,"network-request-failed",{message:String(s)})}}async function Ah(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ni(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function MS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?q0(r.config,s):`${r.config.apiScheme}://${s}`;return dO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function mO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Di(this.auth,"network-request-failed")),fO.get())})}}function df(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Di(r,e,n);return s.customData._tokenResponse=t,s}function gx(r){return r!==void 0&&r.enterprise!==void 0}class pO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yO(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Ts(r,e))}async function _O(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function Xf(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function Bu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vO(r,e=!1){const t=Xt(r),n=await t.getIdToken(e),s=$0(n);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:Bu(Cy(s.auth_time)),issuedAtTime:Bu(Cy(s.iat)),expirationTime:Bu(Cy(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Cy(r){return Number(r)*1e3}function $0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const s=fS(t);return s?JSON.parse(s):(Sf("Failed to decode base64 JWT payload"),null)}catch(s){return Sf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function px(r){const e=$0(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&bO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function bO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class wO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class e0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Jf(r){const e=r.auth,t=await r.getIdToken(),n=await nc(r,Xf(e,{idToken:t}));je(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?PS(s.providerUserInfo):[],c=EO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new e0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function xO(r){const e=Xt(r);await Jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function PS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function TO(r,e){const t=await OS(r,{},async()=>{const n=Th({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await MS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(d.credentials="include"),DS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Ts(r,e))}class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=px(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await TO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Wl;return n&&(je(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function sa(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new wO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new e0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await nc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vO(this,e)}reload(){return xO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await nc(this,_O(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:k}=t;je(y&&k,e,"internal-error");const M=Wl.fromJSON(this.name,k);je(typeof y=="string",e,"internal-error"),sa(n,e.name),sa(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),sa(o,e.name),sa(c,e.name),sa(u,e.name),sa(d,e.name),sa(f,e.name),sa(g,e.name);const V=new ei({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:M,createdAt:f,lastLoginAt:g});return E&&Array.isArray(E)&&(V.providerData=E.map(H=>({...H}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Wl;s.updateFromServerResponse(t);const o=new ei({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Jf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?PS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Wl;u.updateFromIdToken(n);const d=new ei({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new e0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const yx=new Map;function ds(r){vs(r instanceof Function,"Expected a class definition");let e=yx.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,yx.set(r,e),e)}class jS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jS.type="NONE";const _x=jS;function Af(r,e,t){return`firebase:${r}:${e}:${t}`}class Xl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Af(this.userKey,s.apiKey,o),this.fullPersistenceKey=Af("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xf(this.auth,{idToken:e}).catch(()=>{});return t?ei._fromGetAccountInfoResponse(this.auth,t,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xl(ds(_x),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(_x);const c=Af(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Xf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ei._fromGetAccountInfoResponse(e,v,g)}else y=ei._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Xl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Xl(o,e,n))}}function vx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FS(e))return"Blackberry";if(HS(e))return"Webos";if(LS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function VS(r=mn()){return/firefox\//i.test(r)}function LS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(r=mn()){return/crios\//i.test(r)}function zS(r=mn()){return/iemobile/i.test(r)}function BS(r=mn()){return/android/i.test(r)}function FS(r=mn()){return/blackberry/i.test(r)}function HS(r=mn()){return/webos/i.test(r)}function G0(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function AO(r=mn()){return G0(r)&&!!window.navigator?.standalone}function IO(){return BD()&&document.documentMode===10}function qS(r=mn()){return G0(r)||BS(r)||HS(r)||FS(r)||/windows phone/i.test(r)||zS(r)}function $S(r,e=[]){let t;switch(r){case"Browser":t=vx(mn());break;case"Worker":t=`${vx(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${n}`}class RO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function CO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Ts(r,e))}const NO=6;class kO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??NO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class DO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new RO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xf(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(gs(this));const t=e?Xt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CO(this),t=new kO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await SO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&oO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fo(r){return Xt(r)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=KD(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OO(r){Pm=r}function GS(r){return Pm.loadJS(r)}function MO(){return Pm.recaptchaEnterpriseScript}function PO(){return Pm.gapiScript}function jO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class VO{constructor(){this.enterprise=new LO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const UO="recaptcha-enterprise",KS="NO_RECAPTCHA";class zO{constructor(e){this.type=UO,this.auth=Fo(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{yO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new pO(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;gx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(KS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&gx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=MO();d.length!==0&&(d+=u),GS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function wx(r,e,t,n=!1,s=!1){const o=new zO(r);let c;if(s)c=KS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function t0(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await wx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function BO(r,e){const t=Mm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ni(s,"already-initialized")}return t.initialize({options:e})}function FO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function HO(r,e,t){const n=Fo(r);je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=YS(e),{host:c,port:u}=qO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),je(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,zo(c)?(L0(`${o}//${c}${d}`),U0("Auth",!0)):$O()}function YS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function qO(r){const e=YS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:xx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:xx(c)}}}function xx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function $O(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class K0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function GO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function KO(r,e){return Ah(r,"POST","/v1/accounts:signInWithPassword",Ts(r,e))}async function YO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Ts(r,e))}async function QO(r,e){return YO(r,e)}async function WO(r,e){return Ah(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}async function XO(r,e){return Ah(r,"POST","/v1/accounts:signInWithEmailLink",Ts(r,e))}class eh extends K0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new eh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new eh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t0(e,t,"signInWithPassword",KO);case"emailLink":return WO(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return t0(e,n,"signUpPassword",GO);case"emailLink":return XO(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jl(r,e){return Ah(r,"POST","/v1/accounts:signInWithIdp",Ts(r,e))}const JO="http://localhost";class Ao extends K0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new Ao(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jl(e,t)}buildRequest(){const e={requestUri:JO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Th(t)}return e}}function ZO(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e5(r){const e=ku(Du(r)).link,t=e?ku(Du(e)).deep_link_id:null,n=ku(Du(r)).deep_link_id;return(n?ku(Du(n)).link:null)||n||t||e||r}class Y0{constructor(e){const t=ku(Du(e)),n=t.apiKey??null,s=t.oobCode??null,o=ZO(t.mode??null);je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=e5(e);try{return new Y0(t)}catch{return null}}}class yc{constructor(){this.providerId=yc.PROVIDER_ID}static credential(e,t){return eh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Y0.parseLink(t);return je(n,"argument-error"),eh._fromEmailAndCode(e,n.code,n.tenantId)}}yc.PROVIDER_ID="password";yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ih extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends Ih{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";class us extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ao._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class da extends Ih{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";class fa extends Ih{constructor(){super("twitter.com")}static credential(e,t){return Ao._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return fa.credential(t,n)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";async function t5(r,e){return Ah(r,"POST","/v1/accounts:signUp",Ts(r,e))}class Io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ei._fromIdTokenResponse(e,n,s),c=Ex(n);return new Io({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Ex(n);return new Io({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Ex(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Zf extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Zf(e,t,n,s)}}function WS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zf._fromErrorAndOperation(r,o,e,n):o})}async function n5(r,e,t=!1){const n=await nc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Io._forOperation(r,"link",n)}async function r5(r,e,t=!1){const{auth:n}=r;if(pr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await nc(r,WS(n,s,e,r),t);je(o.idToken,n,"internal-error");const c=$0(o.idToken);je(c,n,"internal-error");const{sub:u}=c;return je(r.uid===u,n,"user-mismatch"),Io._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ni(n,"user-mismatch"),o}}async function XS(r,e,t=!1){if(pr(r.app))return Promise.reject(gs(r));const n="signIn",s=await WS(r,n,e),o=await Io._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function i5(r,e){return XS(Fo(r),e)}async function JS(r){const e=Fo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s5(r,e,t){if(pr(r.app))return Promise.reject(gs(r));const n=Fo(r),c=await t0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t5).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&JS(r),d}),u=await Io._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function Tx(r,e,t){return pr(r.app)?Promise.reject(gs(r)):i5(Xt(r),yc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JS(r),n})}async function ZS(r,e){const t=Xt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await QO(t.auth,s);o!==r.email&&await r.reload()}async function a5(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function n0(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Xt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await nc(n,a5(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function o5(r,e,t,n){return Xt(r).onIdTokenChanged(e,t,n)}function l5(r,e,t){return Xt(r).beforeAuthStateChanged(e,t)}function c5(r,e,t,n){return Xt(r).onAuthStateChanged(e,t,n)}const em="__sak";class eA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(em,"1"),this.storage.removeItem(em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const u5=1e3,h5=10;class tA extends eA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);IO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,h5):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},u5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tA.type="LOCAL";const d5=tA;class nA extends eA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nA.type="SESSION";const rA=nA;function f5(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class jm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new jm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await f5(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jm.receivers=[];function Q0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class m5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=Q0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function g5(r){Oi().location.href=r}function iA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function p5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y5(){return navigator?.serviceWorker?.controller||null}function _5(){return iA()?self:null}const sA="firebaseLocalStorageDb",v5=1,tm="firebaseLocalStorage",aA="fbase_key";class Rh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vm(r,e){return r.transaction([tm],e?"readwrite":"readonly").objectStore(tm)}function b5(){const r=indexedDB.deleteDatabase(sA);return new Rh(r).toPromise()}function r0(){const r=indexedDB.open(sA,v5);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(tm,{keyPath:aA})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(tm)?e(n):(n.close(),await b5(),e(await r0()))})})}async function Sx(r,e,t){const n=Vm(r,!0).put({[aA]:e,value:t});return new Rh(n).toPromise()}async function w5(r,e){const t=Vm(r,!1).get(e),n=await new Rh(t).toPromise();return n===void 0?null:n.value}function Ax(r,e){const t=Vm(r,!0).delete(e);return new Rh(t).toPromise()}const x5=800,E5=3;class oA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await r0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>E5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jm._getInstance(_5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await p5(),!this.activeServiceWorker)return;this.sender=new m5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await r0();return await Sx(e,em,"1"),await Ax(e,em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>w5(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ax(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Vm(s,!1).getAll();return new Rh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oA.type="LOCAL";const T5=oA;new Sh(3e4,6e4);function S5(r,e){return e?ds(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class W0 extends K0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function A5(r){return XS(r.auth,new W0(r),r.bypassAuthState)}function I5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),r5(t,new W0(r),r.bypassAuthState)}async function R5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),n5(t,new W0(r),r.bypassAuthState)}class lA{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A5;case"linkViaPopup":case"linkViaRedirect":return R5;case"reauthViaPopup":case"reauthViaRedirect":return I5;default:ni(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const C5=new Sh(2e3,1e4);class Yl extends lA{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Q0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C5.get())};e()}}Yl.currentPopupAction=null;const N5="pendingRedirect",If=new Map;class k5 extends lA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=If.get(this.auth._key());if(!e){try{const n=await D5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}If.set(this.auth._key(),e)}return this.bypassAuthState||If.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D5(r,e){const t=P5(e),n=M5(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function O5(r,e){If.set(r._key(),e)}function M5(r){return ds(r._redirectPersistence)}function P5(r){return Af(N5,r.config.apiKey,r.name)}async function j5(r,e,t=!1){if(pr(r.app))return Promise.reject(gs(r));const n=Fo(r),s=S5(n,e),c=await new k5(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const V5=600*1e3;class L5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!cA(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Di(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ix(e))}saveEventToCache(e){this.cachedEventUids.add(Ix(e)),this.lastProcessedEventTime=Date.now()}}function Ix(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function cA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function U5(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cA(r);default:return!1}}async function z5(r,e={}){return Fi(r,"GET","/v1/projects",e)}const B5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F5=/^https?/;async function H5(r){if(r.config.emulator)return;const{authorizedDomains:e}=await z5(r);for(const t of e)try{if(q5(t))return}catch{}ni(r,"unauthorized-domain")}function q5(r){const e=Zy(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!F5.test(t))return!1;if(B5.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const $5=new Sh(3e4,6e4);function Rx(){const r=Oi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function G5(r){return new Promise((e,t)=>{function n(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),t(Di(r,"network-request-failed"))},timeout:$5.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)n();else{const s=jO("iframefcb");return Oi()[s]=()=>{gapi.load?n():t(Di(r,"network-request-failed"))},GS(`${PO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Rf=null,e})}let Rf=null;function K5(r){return Rf=Rf||G5(r),Rf}const Y5=new Sh(5e3,15e3),Q5="__/auth/iframe",W5="emulator/auth/iframe",X5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z5(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?q0(e,W5):`https://${r.config.authDomain}/${Q5}`,n={apiKey:e.apiKey,appName:r.name,v:Bo},s=J5.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Th(n).slice(1)}`}async function eM(r){const e=await K5(r),t=Oi().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:Z5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X5,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Di(r,"network-request-failed"),u=Oi().setTimeout(()=>{o(c)},Y5.get());function d(){Oi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const tM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nM=500,rM=600,iM="_blank",sM="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aM(r,e,t,n=nM,s=rM){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...tM,width:n.toString(),height:s.toString(),top:o,left:c},f=mn().toLowerCase();t&&(u=US(f)?iM:t),VS(f)&&(e=e||sM,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,E])=>`${v}${w}=${E},`,"");if(AO(f)&&u!=="_self")return oM(e||"",u),new Cx(null);const y=window.open(e||"",u,g);je(y,r,"popup-blocked");try{y.focus()}catch{}return new Cx(y)}function oM(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const lM="__/auth/handler",cM="emulator/auth/handler",uM=encodeURIComponent("fac");async function Nx(r,e,t,n,s,o){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Bo,eventId:s};if(e instanceof QS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",GD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Ih){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${uM}=${encodeURIComponent(d)}`:"";return`${hM(r)}?${Th(u).slice(1)}${f}`}function hM({config:r}){return r.emulator?q0(r,cM):`https://${r.authDomain}/${lM}`}const Ny="webStorageSupport";class dM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rA,this._completeRedirectFn=j5,this._overrideRedirectResult=O5}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Nx(e,t,n,Zy(),s);return aM(e,o,Q0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Nx(e,t,n,Zy(),s);return g5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await eM(e),n=new L5(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ny,{type:Ny},s=>{const o=s?.[0]?.[Ny];o!==void 0&&t(!!o),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qS()||LS()||G0()}}const fM=dM;var kx="@firebase/auth",Dx="1.11.1";class mM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gM(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pM(r){So(new Ea("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(r)},f=new DO(n,s,o,d);return FO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),So(new Ea("auth-internal",e=>{const t=Fo(e.getProvider("auth").getImmediate());return(n=>new mM(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(kx,Dx,gM(r)),ki(kx,Dx,"esm2020")}const yM=300,_M=_S("authIdTokenMaxAge")||yM;let Ox=null;const vM=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>_M)return;const s=t?.token;Ox!==s&&(Ox=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bM(r=F0()){const e=Mm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=BO(r,{popupRedirectResolver:fM,persistence:[T5,d5,rA]}),n=_S("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=vM(o.toString());l5(t,c,()=>c(t.currentUser)),o5(t,u=>c(u))}}const s=gS("auth");return s&&HO(t,`http://${s}`),t}function wM(){return document.getElementsByTagName("head")?.[0]??document}OO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",wM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pM("Browser");var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _a,uA;(function(){var r;function e(D,S){function T(){}T.prototype=S.prototype,D.F=S.prototype,D.prototype=new T,D.prototype.constructor=D,D.D=function(I,N,j){for(var C=Array(arguments.length-2),G=2;G<arguments.length;G++)C[G-2]=arguments[G];return S.prototype[N].apply(I,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,S,T){T||(T=0);const I=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)I[N]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(N=0;N<16;++N)I[N]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=D.g[0],T=D.g[1],N=D.g[2];let j=D.g[3],C;C=S+(j^T&(N^j))+I[0]+3614090360&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+I[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+I[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+I[3]+3250441966&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+I[4]+4118548399&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+I[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+I[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+I[7]+4249261313&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+I[8]+1770035416&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+I[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+I[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+I[11]+2304563134&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(j^T&(N^j))+I[12]+1804603682&4294967295,S=T+(C<<7&4294967295|C>>>25),C=j+(N^S&(T^N))+I[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(T^j&(S^T))+I[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=T+(S^N&(j^S))+I[15]+1236535329&4294967295,T=N+(C<<22&4294967295|C>>>10),C=S+(N^j&(T^N))+I[1]+4129170786&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+I[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+I[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+I[0]+3921069994&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+I[5]+3593408605&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+I[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+I[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+I[4]+3889429448&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+I[9]+568446438&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+I[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+I[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+I[8]+1163531501&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(T^N))+I[13]+2850285829&4294967295,S=T+(C<<5&4294967295|C>>>27),C=j+(T^N&(S^T))+I[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^T&(j^S))+I[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=T+(j^S&(N^j))+I[12]+2368359562&4294967295,T=N+(C<<20&4294967295|C>>>12),C=S+(T^N^j)+I[5]+4294588738&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+I[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+I[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+I[14]+4259657740&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+I[1]+2763975236&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+I[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+I[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+I[10]+3200236656&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+I[13]+681279174&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+I[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+I[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+I[6]+76029189&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(T^N^j)+I[9]+3654602809&4294967295,S=T+(C<<4&4294967295|C>>>28),C=j+(S^T^N)+I[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^T)+I[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=T+(N^j^S)+I[2]+3299628645&4294967295,T=N+(C<<23&4294967295|C>>>9),C=S+(N^(T|~j))+I[0]+4096336452&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+I[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+I[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+I[5]+4237533241&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+I[12]+1700485571&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+I[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+I[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+I[1]+2240044497&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+I[8]+1873313359&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+I[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+I[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+I[13]+1309151649&4294967295,T=N+(C<<21&4294967295|C>>>11),C=S+(N^(T|~j))+I[4]+4149444226&4294967295,S=T+(C<<6&4294967295|C>>>26),C=j+(T^(S|~N))+I[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~T))+I[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=T+(j^(N|~S))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+j&4294967295}n.prototype.v=function(D,S){S===void 0&&(S=D.length);const T=S-this.blockSize,I=this.C;let N=this.h,j=0;for(;j<S;){if(N==0)for(;j<=T;)s(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<S;)if(I[N++]=D.charCodeAt(j++),N==this.blockSize){s(this,I),N=0;break}}else for(;j<S;)if(I[N++]=D[j++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=S},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var T=D.length-8;T<D.length;++T)D[T]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)D[S++]=this.g[T]>>>I&255;return D};function o(D,S){var T=u;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=S(D)}function c(D,S){this.h=S;const T=[];let I=!0;for(let N=D.length-1;N>=0;N--){const j=D[N]|0;I&&j==S||(T[N]=j,I=!1)}this.g=T}var u={};function d(D){return-128<=D&&D<128?o(D,function(S){return new c([S|0],S<0?-1:0)}):new c([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(D<0)return M(f(-D));const S=[];let T=1;for(let I=0;D>=T;I++)S[I]=D/T|0,T*=4294967296;return new c(S,0)}function g(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return M(g(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(S,8));let I=y;for(let j=0;j<D.length;j+=8){var N=Math.min(8,D.length-j);const C=parseInt(D.substring(j,j+N),S);N<8?(N=f(Math.pow(S,N)),I=I.j(N).add(f(C))):(I=I.j(T),I=I.add(f(C)))}return I}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(k(this))return-M(this).m();let D=0,S=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);D+=(I>=0?I:4294967296+I)*S,S*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(k(this))return"-"+M(this).toString(D);const S=f(Math.pow(D,6));var T=this;let I="";for(;;){const N=F(T,S).g;T=V(T,N.j(S));let j=((T.g.length>0?T.g[0]:T.h)>>>0).toString(D);if(T=N,E(T))return j+I;for(;j.length<6;)j="0"+j;I=j+I}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function k(D){return D.h==-1}r.l=function(D){return D=V(this,D),k(D)?-1:E(D)?0:1};function M(D){const S=D.g.length,T=[];for(let I=0;I<S;I++)T[I]=~D.g[I];return new c(T,~D.h).add(v)}r.abs=function(){return k(this)?M(this):this},r.add=function(D){const S=Math.max(this.g.length,D.g.length),T=[];let I=0;for(let N=0;N<=S;N++){let j=I+(this.i(N)&65535)+(D.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);I=C>>>16,j&=65535,C&=65535,T[N]=C<<16|j}return new c(T,T[T.length-1]&-2147483648?-1:0)};function V(D,S){return D.add(M(S))}r.j=function(D){if(E(this)||E(D))return y;if(k(this))return k(D)?M(this).j(M(D)):M(M(this).j(D));if(k(D))return M(this.j(M(D)));if(this.l(w)<0&&D.l(w)<0)return f(this.m()*D.m());const S=this.g.length+D.g.length,T=[];for(var I=0;I<2*S;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<D.g.length;N++){const j=this.i(I)>>>16,C=this.i(I)&65535,G=D.i(N)>>>16,J=D.i(N)&65535;T[2*I+2*N]+=C*J,H(T,2*I+2*N),T[2*I+2*N+1]+=j*J,H(T,2*I+2*N+1),T[2*I+2*N+1]+=C*G,H(T,2*I+2*N+1),T[2*I+2*N+2]+=j*G,H(T,2*I+2*N+2)}for(D=0;D<S;D++)T[D]=T[2*D+1]<<16|T[2*D];for(D=S;D<2*S;D++)T[D]=0;return new c(T,0)};function H(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function U(D,S){this.g=D,this.h=S}function F(D,S){if(E(S))throw Error("division by zero");if(E(D))return new U(y,y);if(k(D))return S=F(M(D),S),new U(M(S.g),M(S.h));if(k(S))return S=F(D,M(S)),new U(M(S.g),S.h);if(D.g.length>30){if(k(D)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var T=v,I=S;I.l(D)<=0;)T=K(T),I=K(I);var N=z(T,1),j=z(I,1);for(I=z(I,2),T=z(T,2);!E(I);){var C=j.add(I);C.l(D)<=0&&(N=N.add(T),j=C),I=z(I,1),T=z(T,1)}return S=V(D,N.j(S)),new U(N,S)}for(N=y;D.l(S)>=0;){for(T=Math.max(1,Math.floor(D.m()/S.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),j=f(T),C=j.j(S);k(C)||C.l(D)>0;)T-=I,j=f(T),C=j.j(S);E(j)&&(j=v),N=N.add(j),D=V(D,C)}return new U(N,D)}r.B=function(D){return F(this,D).h},r.and=function(D){const S=Math.max(this.g.length,D.g.length),T=[];for(let I=0;I<S;I++)T[I]=this.i(I)&D.i(I);return new c(T,this.h&D.h)},r.or=function(D){const S=Math.max(this.g.length,D.g.length),T=[];for(let I=0;I<S;I++)T[I]=this.i(I)|D.i(I);return new c(T,this.h|D.h)},r.xor=function(D){const S=Math.max(this.g.length,D.g.length),T=[];for(let I=0;I<S;I++)T[I]=this.i(I)^D.i(I);return new c(T,this.h^D.h)};function K(D){const S=D.g.length+1,T=[];for(let I=0;I<S;I++)T[I]=D.i(I)<<1|D.i(I-1)>>>31;return new c(T,D.h)}function z(D,S){const T=S>>5;S%=32;const I=D.g.length-T,N=[];for(let j=0;j<I;j++)N[j]=S>0?D.i(j+T)>>>S|D.i(j+T+1)<<32-S:D.i(j+T);return new c(N,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,uA=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,_a=c}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hA,Ou,dA,Cf,i0,fA,mA,gA;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var x=0;x<m.length;++x){var R=m[x];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=t(this);function s(m,x){if(x)e:{var R=n;m=m.split(".");for(var B=0;B<m.length-1;B++){var ae=m[B];if(!(ae in R))break e;R=R[ae]}m=m[m.length-1],B=R[m],x=x(B),x!=B&&x!=null&&e(R,m,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(x){var R=[],B;for(B in x)Object.prototype.hasOwnProperty.call(x,B)&&R.push([B,x[B]]);return R}});var o=o||{},c=this||self;function u(m){var x=typeof m;return x=="object"&&m!=null||x=="function"}function d(m,x,R){return m.call.apply(m.bind,arguments)}function f(m,x,R){return f=d,f.apply(null,arguments)}function g(m,x){var R=Array.prototype.slice.call(arguments,1);return function(){var B=R.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function y(m,x){function R(){}R.prototype=x.prototype,m.Z=x.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(B,ae,ue){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return x.prototype[ae].apply(B,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const x=m.length;if(x>0){const R=Array(x);for(let B=0;B<x;B++)R[B]=m[B];return R}return[]}function E(m,x){for(let B=1;B<arguments.length;B++){const ae=arguments[B];var R=typeof ae;if(R=R!="object"?R:ae?Array.isArray(ae)?"array":R:"null",R=="array"||R=="object"&&typeof ae.length=="number"){R=m.length||0;const ue=ae.length||0;m.length=R+ue;for(let be=0;be<ue;be++)m[R+be]=ae[be]}else m.push(ae)}}class k{constructor(x,R){this.i=x,this.j=R,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function M(m){c.setTimeout(()=>{throw m},0)}function V(){var m=D;let x=null;return m.g&&(x=m.g,m.g=m.g.next,m.g||(m.h=null),x.next=null),x}class H{constructor(){this.h=this.g=null}add(x,R){const B=U.get();B.set(x,R),this.h?this.h.next=B:this.g=B,this.h=B}}var U=new k(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(x,R){this.h=x,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,D=new H,S=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(T)}};function T(){for(var m;m=V();){try{m.h.call(m.g)}catch(R){M(R)}var x=U;x.j(m),x.h<100&&(x.h++,m.next=x.g,x.g=m)}z=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,x){this.type=m,this.g=this.target=x,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,x=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};c.addEventListener("test",R,x),c.removeEventListener("test",R,x)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function G(m,x){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,x)}y(G,N),G.prototype.init=function(m,x){const R=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=x,x=m.relatedTarget,x||(R=="mouseover"?x=m.fromElement:R=="mouseout"&&(x=m.toElement)),this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),P=0;function O(m,x,R,B,ae){this.listener=m,this.proxy=null,this.src=x,this.type=R,this.capture=!!B,this.ha=ae,this.key=++P,this.da=this.fa=!1}function ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,x,R){for(const B in m)x.call(R,m[B],B,m)}function Z(m,x){for(const R in m)x.call(void 0,m[R],R,m)}function q(m){const x={};for(const R in m)x[R]=m[R];return x}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,x){let R,B;for(let ae=1;ae<arguments.length;ae++){B=arguments[ae];for(R in B)m[R]=B[R];for(let ue=0;ue<Q.length;ue++)R=Q[ue],Object.prototype.hasOwnProperty.call(B,R)&&(m[R]=B[R])}}function se(m){this.src=m,this.g={},this.h=0}se.prototype.add=function(m,x,R,B,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const be=_e(m,x,B,ae);return be>-1?(x=m[be],R||(x.fa=!1)):(x=new O(x,this.src,ue,!!B,ae),x.fa=R,m.push(x)),x};function ne(m,x){const R=x.type;if(R in m.g){var B=m.g[R],ae=Array.prototype.indexOf.call(B,x,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(B,ae,1),ue&&(ee(x),m.g[R].length==0&&(delete m.g[R],m.h--))}}function _e(m,x,R,B){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==x&&ue.capture==!!R&&ue.ha==B)return ae}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ce(m,x,R,B,ae){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Ce(m,x[ue],R,B,ae);return null}return R=st(R),m&&m[J]?m.J(x,R,u(B)?!!B.capture:!1,ae):et(m,x,R,!1,B,ae)}function et(m,x,R,B,ae,ue){if(!x)throw Error("Invalid event type");const be=u(ae)?!!ae.capture:!!ae;let Fe=Ct(m);if(Fe||(m[Ae]=Fe=new se(m)),R=Fe.add(x,R,B,be,ue),R.proxy)return R;if(B=at(),R.proxy=B,B.src=m,B.listener=R,m.addEventListener)j||(ae=be),ae===void 0&&(ae=!1),m.addEventListener(x.toString(),B,ae);else if(m.attachEvent)m.attachEvent(Rt(x.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return R}function at(){function m(R){return x.call(m.src,m.listener,R)}const x=mt;return m}function ot(m,x,R,B,ae){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)ot(m,x[ue],R,B,ae);else B=u(B)?!!B.capture:!!B,R=st(R),m&&m[J]?(m=m.i,ue=String(x).toString(),ue in m.g&&(x=m.g[ue],R=_e(x,R,B,ae),R>-1&&(ee(x[R]),Array.prototype.splice.call(x,R,1),x.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(x=m.g[x.toString()],m=-1,x&&(m=_e(x,R,B,ae)),(R=m>-1?x[m]:null)&&un(R))}function un(m){if(typeof m!="number"&&m&&!m.da){var x=m.src;if(x&&x[J])ne(x.i,m);else{var R=m.type,B=m.proxy;x.removeEventListener?x.removeEventListener(R,B,m.capture):x.detachEvent?x.detachEvent(Rt(R),B):x.addListener&&x.removeListener&&x.removeListener(B),(R=Ct(x))?(ne(R,m),R.h==0&&(R.src=null,x[Ae]=null)):ee(m)}}}function Rt(m){return m in Pe?Pe[m]:Pe[m]="on"+m}function mt(m,x){if(m.da)m=!0;else{x=new G(x,this);const R=m.listener,B=m.ha||m.src;m.fa&&un(m),m=R.call(B,x)}return m}function Ct(m){return m=m[Ae],m instanceof se?m:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function st(m){return typeof m=="function"?m:(m[it]||(m[it]=function(x){return m.handleEvent(x)}),m[it])}function qe(){I.call(this),this.i=new se(this),this.M=this,this.G=null}y(qe,I),qe.prototype[J]=!0,qe.prototype.removeEventListener=function(m,x,R,B){ot(this,m,x,R,B)};function pe(m,x){var R,B=m.G;if(B)for(R=[];B;B=B.G)R.push(B);if(m=m.M,B=x.type||x,typeof x=="string")x=new N(x,m);else if(x instanceof N)x.target=x.target||m;else{var ae=x;x=new N(B,m),ie(x,ae)}ae=!0;let ue,be;if(R)for(be=R.length-1;be>=0;be--)ue=x.g=R[be],ae=Ee(ue,B,!0,x)&&ae;if(ue=x.g=m,ae=Ee(ue,B,!0,x)&&ae,ae=Ee(ue,B,!1,x)&&ae,R)for(be=0;be<R.length;be++)ue=x.g=R[be],ae=Ee(ue,B,!1,x)&&ae}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const x in m.g){const R=m.g[x];for(let B=0;B<R.length;B++)ee(R[B]);delete m.g[x],m.h--}}this.G=null},qe.prototype.J=function(m,x,R,B){return this.i.add(String(m),x,!1,R,B)},qe.prototype.K=function(m,x,R,B){return this.i.add(String(m),x,!0,R,B)};function Ee(m,x,R,B){if(x=m.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let ue=0;ue<x.length;++ue){const be=x[ue];if(be&&!be.da&&be.capture==R){const Fe=be.listener,Kt=be.ha||be.src;be.fa&&ne(m.i,be),ae=Fe.call(Kt,B)!==!1&&ae}}return ae&&!B.defaultPrevented}function Be(m,x){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(m,x||0)}function De(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,De(m))},m.l);const x=m.h;m.h=null,m.m.apply(null,x)}class xe extends I{constructor(x,R){super(),this.m=x,this.l=R,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tt(m){I.call(this),this.h=m,this.g={}}y(tt,I);var gt=[];function Bn(m){W(m.g,function(x,R){this.g.hasOwnProperty(R)&&un(x)},m),m.g={}}tt.prototype.N=function(){tt.Z.N.call(this),Bn(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=c.JSON.stringify,Fn=c.JSON.parse,Bt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Et(){N.call(this,"d")}y(Et,N);function Jt(){N.call(this,"c")}y(Jt,N);var kt={},Ko=null;function ai(){return Ko=Ko||new qe}kt.Ia="serverreachability";function Da(m){N.call(this,kt.Ia,m)}y(Da,N);function Dn(m){const x=ai();pe(x,new Da(x))}kt.STAT_EVENT="statevent";function qi(m,x){N.call(this,kt.STAT_EVENT,m),this.stat=x}y(qi,N);function pt(m){const x=ai();pe(x,new qi(x,m))}kt.Ja="timingevent";function hn(m,x){N.call(this,kt.Ja,m),this.size=x}y(hn,N);function xn(m,x){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},x)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Yo(m,x,R,B,ae,ue){m.info(function(){if(m.g)if(ue){var be="",Fe=ue.split("&");for(let ht=0;ht<Fe.length;ht++){var Kt=Fe[ht].split("=");if(Kt.length>1){const Mt=Kt[0];Kt=Kt[1];const Tr=Mt.split("_");be=Tr.length>=2&&Tr[1]=="type"?be+(Mt+"="+Kt+"&"):be+(Mt+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+B+") [attempt "+ae+"]: "+x+`
`+R+`
`+be})}function br(m,x,R,B,ae,ue,be){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+ae+"]: "+x+`
`+R+`
`+ue+" "+be})}function pn(m,x,R,B){m.info(function(){return"XMLHTTP TEXT ("+x+"): "+yg(m,R)+(B?" "+B:"")})}function Oa(m,x){m.info(function(){return"TIMEOUT: "+x})}En.prototype.info=function(){};function yg(m,x){if(!m.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var R=ue[m];if(!(R.length<2)){var B=R[1];if(Array.isArray(B)&&!(B.length<1)){var ae=B[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<B.length;be++)B[be]=""}}}}return ut(ue)}catch{return x}}var Ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ec={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tc;function Pa(){}y(Pa,kn),Pa.prototype.g=function(){return new XMLHttpRequest},Tc=new Pa;function $i(m){return encodeURIComponent(String(m))}function Bh(m){var x=1;m=m.split(":");const R=[];for(;x>0&&m.length;)R.push(m.shift()),x--;return m.length&&R.push(m.join(":")),R}function zr(m,x,R,B){this.j=m,this.i=x,this.l=R,this.S=B||1,this.V=new tt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var Zt={},yn={};function oi(m,x,R){m.M=1,m.A=ja(tn(x)),m.u=R,m.R=!0,Qo(m,null)}function Qo(m,x){m.F=Date.now(),li(m),m.B=tn(m.A);var R=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),Zo(R.i,"t",B),m.C=0,R=m.j.L,m.h=new Br,m.g=nd(m.j,R?x:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),x=m.V,R=m.g,B=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(gt[0]=ae.toString()),ae=gt);for(let ue=0;ue<ae.length;ue++){const be=Ce(R,ae[ue],B||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,x)):(m.v="GET",m.g.ea(m.B,m.v,null,x)),Dn(),Yo(m.i,m.v,m.B,m.l,m.S,m.u)}zr.prototype.ba=function(m){m=m.target;const x=this.O;x&&qr(m)==3?x.j():this.Y(m)},zr.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=qr(this.g),Kt=this.g.ya(),ht=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Kt==7||(Kt==8||ht<=0?Dn(3):Dn(2)),ci(this);var x=this.g.ca();this.X=x;var R=_g(this);if(this.o=x==200,br(this.i,this.v,this.B,this.l,this.S,Fe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var B,ae=this.g;if((B=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(B)){var ue=B;break t}}ue=null}if(m=ue)pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,m);else{this.o=!1,this.m=3,pt(12),ar(this),wr(this);break e}}if(this.R){m=!0;let Mt;for(;!this.K&&this.C<R.length;)if(Mt=Hh(this,R),Mt==yn){Fe==4&&(this.m=4,pt(14),m=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Zt){this.m=4,pt(15),pn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else pn(this.i,this.l,Mt,null),ui(this,Mt);if(Fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||R.length!=0||this.h.h||(this.m=1,pt(16),m=!1),this.o=this.o&&m,!m)pn(this.i,this.l,R,"[Invalid Chunked Response]"),ar(this),wr(this);else if(R.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Uc(be),be.P=!0,pt(11))}}else pn(this.i,this.l,R,null),ui(this,R);Fe==4&&ar(this),this.o&&!this.K&&(Fe==4?Jh(this.j,this):(this.o=!1,li(this)))}else Ki(this.g),x==400&&R.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),ar(this),wr(this)}}}catch{}finally{}};function _g(m){if(!Fh(m))return m.g.la();const x=Tn(m.g);if(x==="")return"";let R="";const B=x.length,ae=qr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ar(m),wr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<B;ue++)m.h.h=!0,R+=m.h.i.decode(x[ue],{stream:!(ae&&ue==B-1)});return x.length=0,m.h.g+=R,m.C=0,m.h.g}function Fh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Hh(m,x){var R=m.C,B=x.indexOf(`
`,R);return B==-1?yn:(R=Number(x.substring(R,B)),isNaN(R)?Zt:(B+=1,B+R>x.length?yn:(x=x.slice(B,B+R),m.C=B+R,x)))}zr.prototype.cancel=function(){this.K=!0,ar(this)};function li(m){m.T=Date.now()+m.H,Wo(m,m.H)}function Wo(m,x){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),x)}function ci(m){m.D&&(c.clearTimeout(m.D),m.D=null)}zr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Oa(this.i,this.B),this.M!=2&&(Dn(),pt(17)),ar(this),this.m=2,wr(this)):Wo(this,this.T-m)};function wr(m){m.j.I==0||m.K||Jh(m.j,m)}function ar(m){ci(m);var x=m.O;x&&typeof x.dispose=="function"&&x.dispose(),m.O=null,Bn(m.V),m.g&&(x=m.g,m.g=null,x.abort(),x.dispose())}function ui(m,x){try{var R=m.j;if(R.I!=0&&(R.g==m||di(R.h,m))){if(!m.L&&di(R.h,m)&&R.I==3){try{var B=R.Ba.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var ae=B;if(ae[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)il(R),Ps(R);else break e;Ha(R),pt(18)}}else R.xa=ae[1],0<R.xa-R.K&&ae[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=xn(f(R.Va,R),6e3));hi(R.h)<=1&&R.ta&&(R.ta=void 0)}else _i(R,11)}else if((m.L||R.g==m)&&il(R),!C(x))for(ae=R.Ba.g.parse(x),x=0;x<ae.length;x++){let ht=ae[x];const Mt=ht[0];if(!(Mt<=R.K))if(R.K=Mt,ht=ht[1],R.I==2)if(ht[0]=="c"){R.M=ht[1],R.ba=ht[2];const Tr=ht[3];Tr!=null&&(R.ka=Tr,R.j.info("VER="+R.ka));const vi=ht[4];vi!=null&&(R.za=vi,R.j.info("SVER="+R.za));const $r=ht[5];$r!=null&&typeof $r=="number"&&$r>0&&(B=1.5*$r,R.O=B,R.j.info("backChannelRequestTimeoutMs_="+B)),B=R;const Gr=m.g;if(Gr){const qa=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qa){var ue=B.h;ue.g||qa.indexOf("spdy")==-1&&qa.indexOf("quic")==-1&&qa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Ic(ue,ue.h),ue.h=null))}if(B.G){const sl=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(B.wa=sl,yt(B.J,B.G,sl))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),B=R;var be=m;if(B.na=td(B,B.L?B.ba:null,B.W),be.L){Rc(B.h,be);var Fe=be,Kt=B.O;Kt&&(Fe.H=Kt),Fe.D&&(ci(Fe),li(Fe)),B.g=be}else Wh(B);R.i.length>0&&yi(R)}else ht[0]!="stop"&&ht[0]!="close"||_i(R,7);else R.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?_i(R,7):Vc(R):ht[0]!="noop"&&R.l&&R.l.qa(ht),R.A=0)}}Dn(4)}catch{}}var en=class{constructor(m,x){this.g=m,this.map=x}};function Sc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ac(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hi(m){return m.h?1:m.g?m.g.size:0}function di(m,x){return m.h?m.h==x:m.g?m.g.has(x):!1}function Ic(m,x){m.g?m.g.add(x):m.h=x}function Rc(m,x){m.h&&m.h==x?m.h=null:m.g&&m.g.has(x)&&m.g.delete(x)}Sc.prototype.cancel=function(){if(this.i=Cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Cc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let x=m.i;for(const R of m.g.values())x=x.concat(R.G);return x}return w(m.i)}var qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xo(m,x){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const B=m[R].indexOf("=");let ae,ue=null;B>=0?(ae=m[R].substring(0,B),ue=m[R].substring(B+1)):ae=m[R],x(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function or(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;m instanceof or?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,Rs(this,m.u),this.h=m.h,Nc(this,Yh(m.i)),this.m=m.m):m&&(x=String(m).match(qh))?(this.l=!1,_n(this,x[1]||"",!0),this.o=fi(x[2]||""),this.g=fi(x[3]||"",!0),Rs(this,x[4]),this.h=fi(x[5]||"",!0),Nc(this,x[6]||"",!0),this.m=fi(x[7]||"")):(this.l=!1,this.i=new Ns(null,this.l))}or.prototype.toString=function(){const m=[];var x=this.j;x&&m.push(Va(x,Jo,!0),":");var R=this.g;return(R||x=="file")&&(m.push("//"),(x=this.o)&&m.push(Va(x,Jo,!0),"@"),m.push($i(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Va(R,R.charAt(0)=="/"?kc:$h,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Va(R,Gh)),m.join("")},or.prototype.resolve=function(m){const x=tn(this);let R=!!m.j;R?_n(x,m.j):R=!!m.o,R?x.o=m.o:R=!!m.g,R?x.g=m.g:R=m.u!=null;var B=m.h;if(R)Rs(x,m.u);else if(R=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(B=x.h.slice(0,ae+1)+B)}if(ae=B,ae==".."||ae==".")B="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){B=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const Fe=ae[be++];Fe=="."?B&&be==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),B&&be==ae.length&&ue.push("")):(ue.push(Fe),B=!0)}B=ue.join("/")}else B=ae}return R?x.h=B:R=m.i.toString()!=="",R?Nc(x,Yh(m.i)):R=!!m.m,R&&(x.m=m.m),x};function tn(m){return new or(m)}function _n(m,x,R){m.j=R?fi(x,!0):x,m.j&&(m.j=m.j.replace(/:$/,""))}function Rs(m,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);m.u=x}else m.u=null}function Nc(m,x,R){x instanceof Ns?(m.i=x,el(m.i,m.l)):(R||(x=Va(x,Cs)),m.i=new Ns(x,m.l))}function yt(m,x,R){m.i.set(x,R)}function ja(m){return yt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fi(m,x){return m?x?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Va(m,x,R){return typeof m=="string"?(m=encodeURI(m).replace(x,Wn),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Jo=/[#\/\?@]/g,$h=/[#\?:]/g,kc=/[#\?]/g,Cs=/[#\?@]/g,Gh=/#/g;function Ns(m,x){this.h=this.g=null,this.i=m||null,this.j=!!x}function Xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Xo(m.i,function(x,R){m.add(decodeURIComponent(x.replace(/\+/g," ")),R)}))}r=Ns.prototype,r.add=function(m,x){Xn(this),this.i=null,m=ks(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(x),this.h+=1,this};function Kh(m,x){Xn(m),x=ks(m,x),m.g.has(x)&&(m.i=null,m.h-=m.g.get(x).length,m.g.delete(x))}function Dc(m,x){return Xn(m),x=ks(m,x),m.g.has(x)}r.forEach=function(m,x){Xn(this),this.g.forEach(function(R,B){R.forEach(function(ae){m.call(x,ae,B,this)},this)},this)};function Oc(m,x){Xn(m);let R=[];if(typeof x=="string")Dc(m,x)&&(R=R.concat(m.g.get(ks(m,x))));else for(m=Array.from(m.g.values()),x=0;x<m.length;x++)R=R.concat(m[x]);return R}r.set=function(m,x){return Xn(this),this.i=null,m=ks(this,m),Dc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[x]),this.h+=1,this},r.get=function(m,x){return m?(m=Oc(this,m),m.length>0?String(m[0]):x):x};function Zo(m,x,R){Kh(m,x),R.length>0&&(m.i=null,m.g.set(ks(m,x),w(R)),m.h+=R.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],x=Array.from(this.g.keys());for(let B=0;B<x.length;B++){var R=x[B];const ae=$i(R);R=Oc(this,R);for(let ue=0;ue<R.length;ue++){let be=ae;R[ue]!==""&&(be+="="+$i(R[ue])),m.push(be)}}return this.i=m.join("&")};function Yh(m){const x=new Ns;return x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),x}function ks(m,x){return x=String(x),m.j&&(x=x.toLowerCase()),x}function el(m,x){x&&!m.j&&(Xn(m),m.i=null,m.g.forEach(function(R,B){const ae=B.toLowerCase();B!=ae&&(Kh(this,B),Zo(this,ae,R))},m)),m.j=x}function Fr(m,x){const R=new En;if(c.Image){const B=new Image;B.onload=g(xr,R,"TestLoadImage: loaded",!0,x,B),B.onerror=g(xr,R,"TestLoadImage: error",!1,x,B),B.onabort=g(xr,R,"TestLoadImage: abort",!1,x,B),B.ontimeout=g(xr,R,"TestLoadImage: timeout",!1,x,B),c.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else x(!1)}function Mc(m,x){const R=new En,B=new AbortController,ae=setTimeout(()=>{B.abort(),xr(R,"TestPingServer: timeout",!1,x)},1e4);fetch(m,{signal:B.signal}).then(ue=>{clearTimeout(ae),ue.ok?xr(R,"TestPingServer: ok",!0,x):xr(R,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),xr(R,"TestPingServer: error",!1,x)})}function xr(m,x,R,B,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),B(R)}catch{}}function Ds(){this.g=new Bt}function mi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(mi,kn),mi.prototype.g=function(){return new La(this.i,this.h)};function La(m,x){qe.call(this),this.H=m,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(La,qe),r=La.prototype,r.open=function(m,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=x,this.readyState=1,Hr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(x.body=m),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function tl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var x=m.value?m.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!m.done}))&&(this.response=this.responseText+=x)}m.done?Os(this):Hr(this),this.readyState==3&&tl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Os(this))},r.Na=function(m){this.g&&(this.response=m,Os(this))},r.ga=function(){this.g&&Os(this)};function Os(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Hr(m)}r.setRequestHeader=function(m,x){this.A.append(m,x)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],x=this.h.entries();for(var R=x.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=x.next();return m.join(`\r
`)};function Hr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Er(m){let x="";return W(m,function(R,B){x+=B,x+=":",x+=R,x+=`\r
`}),x}function Ua(m,x,R){e:{for(B in R){var B=!1;break e}B=!0}B||(R=Er(R),typeof m=="string"?R!=null&&$i(R):yt(m,x,R))}function Tt(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Tt,qe);var gi=/^https?$/i,Pc=["POST","PUT"];r=Tt.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,x,R,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);x=x?x.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(x,String(m),!0),this.B=!1}catch(ue){za(this,ue);return}if(m=R||"",R=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var ae in B)R.set(ae,B[ae]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())R.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Pc,x,void 0)>=0)||B||ae||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of R)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){za(this,ue)}};function za(m,x){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=x,m.o=5,jc(m),Gi(m)}function jc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},r.Xa=function(){Ba(this)};function Ba(m){if(m.h&&typeof o<"u"){if(m.v&&qr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),qr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var R;if(!(R=x)){var B;if(B=ue===0){let be=String(m.D).match(qh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),B=!gi.test(be?be.toLowerCase():"")}R=B}if(R)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=qr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",jc(m)}}finally{Gi(m)}}}}function Gi(m,x){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,x||pe(m,"ready");try{R.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qr(m){return m.g?m.g.readyState:0}r.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var x=this.g.responseText;return m&&x.indexOf(m)==0&&(x=x.substring(m.length)),Fn(x)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const x={};m=(m.g&&qr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(C(m[B]))continue;var R=Bh(m[B]);const ae=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=x[ae]||[];x[ae]=ue,ue.push(R)}Z(x,function(B){return B.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(m,x,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||x}function Ms(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,m),this.Za=pi("retryDelaySeedMs",1e4,m),this.Ta=pi("forwardChannelMaxRetries",2,m),this.va=pi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Sc(m&&m.concurrentRequestLimit),this.Ba=new Ds,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ms.prototype,r.ka=8,r.I=1,r.connect=function(m,x,R,B){pt(0),this.W=m,this.H=x||{},R&&B!==void 0&&(this.H.OSID=R,this.H.OAID=B),this.F=this.X,this.J=td(this,null,this.W),yi(this)};function Vc(m){if(nl(m),m.I==3){var x=m.V++,R=tn(m.J);if(yt(R,"SID",m.M),yt(R,"RID",x),yt(R,"TYPE","terminate"),Fa(m,R),x=new zr(m,m.j,x),x.M=2,x.A=ja(tn(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=x.A,R=!0),R||(x.g=nd(x.j,null),x.g.ea(x.A)),x.F=Date.now(),li(x)}ed(m)}function Ps(m){m.g&&(Uc(m),m.g.cancel(),m.g=null)}function nl(m){Ps(m),m.v&&(c.clearTimeout(m.v),m.v=null),il(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function yi(m){if(!Ac(m.h)&&!m.m){m.m=!0;var x=m.Ea;K||S(),z||(K(),z=!0),D.add(x,m),m.D=0}}function rl(m,x){return hi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=x.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,x),Zh(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new zr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=q(ue),ie(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var x=0,R=0;R<this.i.length;R++){t:{var B=this.i[R];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,x>4096){x=R;break e}if(x===4096||R===this.i.length-1){x=R+1;break e}}x=1e3}else x=1e3;x=Qh(this,ae,x),R=tn(this.J),yt(R,"RID",m),yt(R,"CVER",22),this.G&&yt(R,"X-HTTP-Session-Id",this.G),Fa(this,R),ue&&(this.R?x="headers="+$i(Er(ue))+"&"+x:this.u&&Ua(R,this.u,ue)),Ic(this.h,ae),this.Ra&&yt(R,"TYPE","init"),this.S?(yt(R,"$req",x),yt(R,"SID","null"),ae.U=!0,oi(ae,R,null)):oi(ae,R,x),this.I=2}}else this.I==3&&(m?Lc(this,m):this.i.length==0||Ac(this.h)||Lc(this))};function Lc(m,x){var R;x?R=x.l:R=m.V++;const B=tn(m.J);yt(B,"SID",m.M),yt(B,"RID",R),yt(B,"AID",m.K),Fa(m,B),m.u&&m.o&&Ua(B,m.u,m.o),R=new zr(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),x&&(m.i=x.G.concat(m.i)),x=Qh(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ic(m.h,R),oi(R,B,x)}function Fa(m,x){m.H&&W(m.H,function(R,B){yt(x,B,R)}),m.l&&W({},function(R,B){yt(x,B,R)})}function Qh(m,x,R){R=Math.min(m.i.length,R);const B=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Kt=["count="+R];Fe==-1?R>0?(Fe=ae[0].g,Kt.push("ofs="+Fe)):Fe=0:Kt.push("ofs="+Fe);let ht=!0;for(let Mt=0;Mt<R;Mt++){var ue=ae[Mt].g;const Tr=ae[Mt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Mt].g-100),ht=!1;else try{ue="req"+ue+"_"||"";try{var be=Tr instanceof Map?Tr:Object.entries(Tr);for(const[vi,$r]of be){let Gr=$r;u($r)&&(Gr=ut($r)),Kt.push(ue+vi+"="+encodeURIComponent(Gr))}}catch(vi){throw Kt.push(ue+"type="+encodeURIComponent("_badmap")),vi}}catch{B&&B(Tr)}}if(ht){be=Kt.join("&");break e}}be=void 0}return m=m.i.splice(0,R),x.G=m,be}function Wh(m){if(!m.g&&!m.v){m.Y=1;var x=m.Da;K||S(),z||(K(),z=!0),D.add(x,m),m.A=0}}function Ha(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),Zh(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,Xh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Ps(this),Xh(this))};function Uc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Xh(m){m.g=new zr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var x=tn(m.na);yt(x,"RID","rpc"),yt(x,"SID",m.M),yt(x,"AID",m.K),yt(x,"CI",m.F?"0":"1"),!m.F&&m.ia&&yt(x,"TO",m.ia),yt(x,"TYPE","xmlhttp"),Fa(m,x),m.u&&m.o&&Ua(x,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=ja(tn(x)),R.u=null,R.R=!0,Qo(R,m)}r.Va=function(){this.C!=null&&(this.C=null,Ps(this),Ha(this),pt(19))};function il(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Jh(m,x){var R=null;if(m.g==x){il(m),Uc(m),m.g=null;var B=2}else if(di(m.h,x))R=x.G,Rc(m.h,x),B=1;else return;if(m.I!=0){if(x.o)if(B==1){R=x.u?x.u.length:0,x=Date.now()-x.F;var ae=m.D;B=ai(),pe(B,new hn(B,R)),yi(m)}else Wh(m);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(B==1&&rl(m,x)||B==2&&Ha(m)))switch(R&&R.length>0&&(x=m.h,x.i=x.i.concat(R)),ae){case 1:_i(m,5);break;case 4:_i(m,10);break;case 3:_i(m,6);break;default:_i(m,2)}}}function Zh(m,x){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*x}function _i(m,x){if(m.j.info("Error code "+x),x==2){var R=f(m.bb,m),B=m.Ua;const ae=!B;B=new or(B||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_n(B,"https"),ja(B),ae?Fr(B.toString(),R):Mc(B.toString(),R)}else pt(2);m.I=0,m.l&&m.l.pa(x),ed(m),nl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ed(m){if(m.I=0,m.ja=[],m.l){const x=Cc(m.h);(x.length!=0||m.i.length!=0)&&(E(m.ja,x),E(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function td(m,x,R){var B=R instanceof or?tn(R):new or(R);if(B.g!="")x&&(B.g=x+"."+B.g),Rs(B,B.u);else{var ae=c.location;B=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new or(null);B&&_n(ue,B),x&&(ue.g=x),ae&&Rs(ue,ae),R&&(ue.h=R),B=ue}return R=m.G,x=m.wa,R&&x&&yt(B,R,x),yt(B,"VER",m.ka),Fa(m,B),B}function nd(m,x,R){if(x&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=m.Aa&&!m.ma?new Tt(new mi({ab:R})):new Tt(m.ma),x.Fa(m.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function rd(){}r=rd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function js(){}js.prototype.g=function(m,x){return new Hn(m,x)};function Hn(m,x){qe.call(this),this.g=new Ms(x),this.l=m,this.h=x&&x.messageUrlParams||null,m=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(m?m["X-WebChannel-Content-Type"]=x.messageContentType:m={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(m?m["X-WebChannel-Client-Profile"]=x.sa:m={"X-WebChannel-Client-Profile":x.sa}),this.g.U=m,(m=x&&x.Qb)&&!C(m)&&(this.g.u=m),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,m=this.h,m!==null&&x in m&&(m=this.h,x in m&&delete m[x])),this.j=new Yi(this)}y(Hn,qe),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Vc(this.g)},Hn.prototype.o=function(m){var x=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=ut(m),m=R);x.i.push(new en(x.Ya++,m)),x.I==3&&yi(x)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,Hn.Z.N.call(this)};function id(m){Et.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var x=m.__sm__;if(x){e:{for(const R in x){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,x=x!==null&&m in x?x[m]:void 0),this.data=x}else this.data=m}y(id,Et);function sd(){Jt.call(this),this.status=1}y(sd,Jt);function Yi(m){this.g=m}y(Yi,rd),Yi.prototype.ra=function(){pe(this.g,"a")},Yi.prototype.qa=function(m){pe(this.g,new id(m))},Yi.prototype.pa=function(m){pe(this.g,new sd)},Yi.prototype.oa=function(){pe(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,gA=function(){return new js},mA=function(){return ai()},fA=kt,i0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,Cf=Ma,Ec.COMPLETE="complete",dA=Ec,wn.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Ou=wn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,hA=Tt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const Px="@firebase/firestore",jx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let _c="12.3.0";const Ro=new z0("@firebase/firestore");function Hl(){return Ro.logLevel}function ye(r,...e){if(Ro.logLevel<=Xe.DEBUG){const t=e.map(X0);Ro.debug(`Firestore (${_c}): ${r}`,...t)}}function Gn(r,...e){if(Ro.logLevel<=Xe.ERROR){const t=e.map(X0);Ro.error(`Firestore (${_c}): ${r}`,...t)}}function Co(r,...e){if(Ro.logLevel<=Xe.WARN){const t=e.map(X0);Ro.warn(`Firestore (${_c}): ${r}`,...t)}}function X0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,pA(r,n,t)}function pA(r,e,t){let n=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Gn(n),new Error(n)}function Re(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||pA(e,s,n)}function Ue(r,e){return r}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class yA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class EM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TM{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Re(typeof n.accessToken=="string",31837,{l:n}),new yA(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class SM{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AM{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new SM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const n=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function RM(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class J0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=RM(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function s0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return ky(s)===ky(o)?Le(s,o):ky(s)?1:-1}return Le(r.length,e.length)}const CM=55296,NM=57343;function ky(r){const e=r.charCodeAt(0);return e>=CM&&e<=NM}function rc(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function _A(r){return r+"\0"}const Lx="__name__";class Ti{constructor(e,t,n){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Se(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const n=Ti.isNumericId(e),s=Ti.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):s0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _a.fromString(e.substring(4,e.length-2))}}class ft extends Ti{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const kM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Ti{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return kM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lx}static keyField(){return new Ut([Lx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ft.fromString(e))}static fromName(e){return new we(ft.fromString(e).popFirst(5))}static empty(){return new we(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ft(e.slice()))}}function vA(r,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DM(r,e,t,n){if(e===!0&&n===!0)throw new ve(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ux(r){if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zx(r){if(we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Lm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lm(r);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function OM(r,e){if(e<=0)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function ln(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ch(r,e){if(!bA(r))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Bx=-62135596800,Fx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fx);return new bt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bx)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fx}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ch(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:ln("string",bt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new bt(0,0))}static max(){return new ke(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const th=-1;class nm{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function a0(r){return r.fields.find((e=>e.kind===2))}function lo(r){return r.fields.filter((e=>e.kind!==2))}nm.UNKNOWN_ID=-1;class Nf{constructor(e,t){this.fieldPath=e,this.kind=t}}class nh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nh(0,_r.min())}}function MM(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(n===1e9?new bt(t+1,0):new bt(t,n));return new _r(s,we.empty(),e)}function wA(r){return new _r(r.readTime,r.key,th)}class _r{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _r(ke.min(),we.empty(),th)}static max(){return new _r(ke.max(),we.empty(),th)}}function Z0(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const xA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ho(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==xA)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,n)=>{t(e)}))}static reject(e){return new re(((t,n)=>{n(e)}))}static waitFor(e){return new re(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=re.resolve(!1);for(const n of e)t=t.next((s=>s?re.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new re(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new re(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const gr="SimpleDb";class Um{static open(e,t,n,s){try{return new Um(t,e.transaction(s,n))}catch(o){throw new Fu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Fu(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=e_(n.target.error);this.S.reject(new Fu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ye(gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jM(t)}}class va{static delete(e){return ye(gr,"Removing database:",e),uo(mS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ES())return!1;if(va.F())return!0;const e=mn(),t=va.M(e),n=0<t&&t<10,s=TA(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,va.M(mn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ye(gr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new Fu(e,c))},s.onupgradeneeded=o=>{ye(gr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{ye(gr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Um.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),re.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(ye(gr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function TA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class PM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return uo(this.U.delete())}}class Fu extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(r){return r.name==="IndexedDbTransactionError"}class jM{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(ye(gr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(ye(gr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uo(n)}add(e){return ye(gr,"ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ye(gr,"GET",this.store.name,e,t),t)))}delete(e){return ye(gr,"DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return ye(gr,"COUNT",this.store.name),uo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new re(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new re(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){ye(gr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new re(((n,s)=>{t.onerror=o=>{const c=e_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new re(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new PM(u),f=t(u.primaryKey,u.value,d);if(f instanceof re){const g=f.catch((y=>(d.done(),re.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>re.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uo(r){return new re(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=e_(n.target.error);t(s)}}))}let Hx=!1;function e_(r){const e=va.M(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hx||(Hx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Hu="IndexBackfiller";class VM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ye(Hu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ye(Hu,`Documents written: ${t}`)}catch(t){Na(t)?ye(Hu,"Ignoring IndexedDB error during index backfill: ",t):await Ho(t)}await this.re(6e4)}))}}class LM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return re.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return ye(Hu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(ye(Hu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=wA(o);Z0(c,n)>0&&(n=c)})),new _r(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Mr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mr.ce=-1;const _o=-1;function zm(r){return r==null}function rh(r){return r===0&&1/r==-1/0}function UM(r){return typeof r=="number"&&Number.isInteger(r)&&!rh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const rm="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=qx(e)),e=zM(r.get(t),e);return qx(e)}function zM(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case rm:t+="";break;default:t+=o}}return t}function qx(r){return r+rm+""}function Ci(r){const e=r.length;if(Re(e>=2,64408,{path:r}),e===2)return Re(r.charAt(0)===rm&&r.charAt(1)==="",56145,{path:r}),ft.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(rm,o);switch((c<0||c>t)&&Se(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Se(61167,{path:r})}o=c+2}return new ft(n)}const co="remoteDocuments",Nh="owner",jl="owner",ih="mutationQueues",BM="userId",Jr="mutations",$x="batchId",po="userMutationsIndex",Gx=["userId","batchId"];function kf(r,e){return[r,Un(e)]}function SA(r,e,t){return[r,Un(e),t]}const FM={},ic="documentMutations",im="remoteDocumentsV14",HM=["prefixPath","collectionGroup","readTime","documentId"],Df="documentKeyIndex",qM=["prefixPath","collectionGroup","documentId"],AA="collectionGroupIndex",$M=["collectionGroup","readTime","prefixPath","documentId"],sh="remoteDocumentGlobal",o0="remoteDocumentGlobalKey",sc="targets",IA="queryTargetsIndex",GM=["canonicalId","targetId"],ac="targetDocuments",KM=["targetId","path"],t_="documentTargetsIndex",YM=["path","targetId"],sm="targetGlobalKey",vo="targetGlobal",ah="collectionParents",QM=["collectionId","parent"],oc="clientMetadata",WM="clientId",Bm="bundles",XM="bundleId",Fm="namedQueries",JM="name",n_="indexConfiguration",ZM="indexId",l0="collectionGroupIndex",e3="collectionGroup",qu="indexState",t3=["indexId","uid"],RA="sequenceNumberIndex",n3=["uid","sequenceNumber"],$u="indexEntries",r3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CA="documentKeyIndex",i3=["indexId","uid","orderedDocumentKey"],Hm="documentOverlays",s3=["userId","collectionPath","documentId"],c0="collectionPathOverlayIndex",a3=["userId","collectionPath","largestBatchId"],NA="collectionGroupOverlayIndex",o3=["userId","collectionGroup","largestBatchId"],r_="globals",l3="name",kA=[ih,Jr,ic,co,sc,Nh,vo,ac,oc,sh,ah,Bm,Fm],c3=[...kA,Hm],DA=[ih,Jr,ic,im,sc,Nh,vo,ac,oc,sh,ah,Bm,Fm,Hm],OA=DA,i_=[...OA,n_,qu,$u],u3=i_,MA=[...i_,r_],h3=MA;class u0 extends EA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ue(r);return va.O(t.le,e)}function Kx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ka(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function PA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(r){return r.hasNext()?r.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new sr([])}unionWith(e){let t=new xt(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class jA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jA("Invalid base64 string: "+o):o}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const d3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Re(!!r,39018),typeof r=="string"){let e=0;const t=d3.exec(r);if(Re(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?cn.fromBase64String(r):cn.fromUint8Array(r)}const VA="server_timestamp",LA="__type__",UA="__previous_value__",zA="__local_write_time__";function s_(r){return(r?.mapValue?.fields||{})[LA]?.stringValue===VA}function qm(r){const e=r.mapValue.fields[UA];return s_(e)?qm(e):e}function oh(r){const e=bs(r.mapValue.fields[zA].timestampValue);return new bt(e.seconds,e.nanos)}class f3{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const am="(default)";class No{constructor(e,t){this.projectId=e,this.database=t||am}static empty(){return new No("","")}get isDefaultDatabase(){return this.database===am}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}const a_="__type__",BA="__max__",ga={mapValue:{fields:{__type__:{stringValue:BA}}}},o_="__vector__",lc="value",Of={nullValue:"NULL_VALUE"};function Ta(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?s_(r)?4:FA(r)?9007199254740991:$m(r)?10:11:Se(28295,{value:r})}function Vi(r,e){if(r===e)return!0;const t=Ta(r);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return oh(r).isEqual(oh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return jt(s.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return jt(s.integerValue)===jt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=jt(s.doubleValue),u=jt(o.doubleValue);return c===u?rh(c)===rh(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return rc(r.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Kx(c)!==Kx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Vi(c[d],u[d])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function lh(r,e){return(r.values||[]).find((t=>Vi(t,e)))!==void 0}function Sa(r,e){if(r===e)return 0;const t=Ta(r),n=Ta(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=jt(o.integerValue||o.doubleValue),d=jt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Qx(r.timestampValue,e.timestampValue);case 4:return Qx(oh(r),oh(e));case 5:return s0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Le(jt(o.latitude),jt(c.latitude));return u!==0?u:Le(jt(o.longitude),jt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Wx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[lc]?.arrayValue,g=d[lc]?.arrayValue,y=Le(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Wx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ga.mapValue&&c===ga.mapValue)return 0;if(o===ga.mapValue)return 1;if(c===ga.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=s0(d[y],g[y]);if(v!==0)return v;const w=Sa(u[d[y]],f[g[y]]);if(w!==0)return w}return Le(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Qx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=bs(r),n=bs(e),s=Le(t.seconds,n.seconds);return s!==0?s:Le(t.nanos,n.nanos)}function Wx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Sa(t[s],n[s]);if(o)return o}return Le(t.length,n.length)}function cc(r){return h0(r)}function h0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=h0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${h0(t.fields[c])}`;return s+"}"})(r.mapValue):Se(61005,{value:r})}function Mf(r){switch(Ta(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qm(r);return e?16+Mf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Mf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return ka(n.fields,((o,c)=>{s+=o.length+Mf(c)})),s})(r.mapValue);default:throw Se(13486,{value:r})}}function ch(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function d0(r){return!!r&&"integerValue"in r}function uh(r){return!!r&&"arrayValue"in r}function Xx(r){return!!r&&"nullValue"in r}function Jx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pf(r){return!!r&&"mapValue"in r}function $m(r){return(r?.mapValue?.fields||{})[a_]?.stringValue===o_}function Gu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ka(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Gu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(r.arrayValue.values[t]);return e}return{...r}}function FA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===BA}const HA={mapValue:{fields:{[a_]:{stringValue:o_},[lc]:{arrayValue:{}}}}};function m3(r){return"nullValue"in r?Of:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ch(No.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?$m(r)?HA:{mapValue:{}}:Se(35942,{value:r})}function g3(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ch(No.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?HA:"mapValue"in r?$m(r)?{mapValue:{}}:ga:Se(61959,{value:r})}function Zx(r,e){const t=Sa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function eE(r,e){const t=Sa(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=Ut.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Gu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Pf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){ka(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new jn(Gu(this.value))}}function qA(r){const e=[];return ka(r.fields,((t,n)=>{const s=new Ut([t]);if(Pf(n)){const o=qA(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new sr(e)}class qt{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,ke.min(),ke.min(),ke.min(),jn.empty(),0)}static newFoundDocument(e,t,n,s){return new qt(e,1,t,ke.min(),n,s,0)}static newNoDocument(e,t){return new qt(e,2,t,ke.min(),ke.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,ke.min(),ke.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uc{constructor(e,t){this.position=e,this.inclusive=t}}function tE(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Sa(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function nE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Vi(r.position[t],e.position[t]))return!1;return!0}class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function p3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class $A{}class Ze extends $A{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new y3(e,t,n):t==="array-contains"?new b3(e,n):t==="in"?new XA(e,n):t==="not-in"?new w3(e,n):t==="array-contains-any"?new x3(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new _3(e,n):new v3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sa(t,this.value)):t!==null&&Ta(this.value)===Ta(t)&&this.matchesComparison(Sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends $A{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return hc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hc(r){return r.op==="and"}function f0(r){return r.op==="or"}function l_(r){return GA(r)&&hc(r)}function GA(r){for(const e of r.filters)if(e instanceof wt)return!1;return!0}function m0(r){if(r instanceof Ze)return r.field.canonicalString()+r.op.toString()+cc(r.value);if(l_(r))return r.filters.map((e=>m0(e))).join(",");{const e=r.filters.map((t=>m0(t))).join(",");return`${r.op}(${e})`}}function KA(r,e){return r instanceof Ze?(function(n,s){return s instanceof Ze&&n.op===s.op&&n.field.isEqual(s.field)&&Vi(n.value,s.value)})(r,e):r instanceof wt?(function(n,s){return s instanceof wt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&KA(c,s.filters[u])),!0):!1})(r,e):void Se(19439)}function YA(r,e){const t=r.filters.concat(e);return wt.create(t,r.op)}function QA(r){return r instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`})(r):r instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(QA).join(" ,")+"}"})(r):"Filter"}class y3 extends Ze{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class _3 extends Ze{constructor(e,t){super(e,"in",t),this.keys=WA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class v3 extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=WA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function WA(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class b3 extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uh(t)&&lh(t.arrayValue,this.value)}}class XA extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lh(this.value.arrayValue,t)}}class w3 extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lh(this.value.arrayValue,t)}}class x3 extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>lh(this.value.arrayValue,n)))}}class E3{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function g0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new E3(r,e,t,n,s,o,c)}function ko(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>m0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),zm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>cc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>cc(n))).join(",")),e.Te=t}return e.Te}function kh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!p3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!KA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!nE(r.startAt,e.startAt)&&nE(r.endAt,e.endAt)}function om(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function lm(r,e){return r.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function rE(r,e,t){let n=Of,s=!0;for(const o of lm(r,e)){let c=Of,u=!0;switch(o.op){case"<":case"<=":c=m3(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Of}Zx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Zx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function iE(r,e,t){let n=ga,s=!0;for(const o of lm(r,e)){let c=ga,u=!0;switch(o.op){case">=":case">":c=g3(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ga}eE({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];eE({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class vc{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function T3(r,e,t,n,s,o,c,u){return new vc(r,e,t,n,s,o,c,u)}function Dh(r){return new vc(r)}function sE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function JA(r){return r.collectionGroup!==null}function Ku(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new xt(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new hh(o,n))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new hh(Ut.keyField(),n))}return e.Ie}function Pr(r){const e=Ue(r);return e.Ee||(e.Ee=S3(e,Ku(r))),e.Ee}function S3(r,e){if(r.limitType==="F")return g0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new hh(s.field,o)}));const t=r.endAt?new uc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new uc(r.startAt.position,r.startAt.inclusive):null;return g0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function p0(r,e){const t=r.filters.concat([e]);return new vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function cm(r,e,t){return new vc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Gm(r,e){return kh(Pr(r),Pr(e))&&r.limitType===e.limitType}function ZA(r){return`${ko(Pr(r))}|lt:${r.limitType}`}function ql(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>QA(s))).join(", ")}]`),zm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>cc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>cc(s))).join(",")),`Target(${n})`})(Pr(r))}; limitType=${r.limitType})`}function Oh(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of Ku(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,Ku(n),s)||n.endAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,Ku(n),s))})(r,e)}function A3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function e2(r){return(e,t)=>{let n=!1;for(const s of Ku(r)){const o=I3(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function I3(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Sa(d,f):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Se(19790,{direction:r.dir})}}class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return PA(this.inner)}size(){return this.innerSize}}const R3=new Lt(we.comparator);function yr(){return R3}const t2=new Lt(we.comparator);function Mu(...r){let e=t2;for(const t of r)e=e.insert(t.key,t);return e}function n2(r){let e=t2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ni(){return Yu()}function r2(){return Yu()}function Yu(){return new Ss((r=>r.toString()),((r,e)=>r.isEqual(e)))}const C3=new Lt(we.comparator),N3=new xt(we.comparator);function Ge(...r){let e=N3;for(const t of r)e=e.add(t);return e}const k3=new xt(Le);function D3(){return k3}function c_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function i2(r){return{integerValue:""+r}}function O3(r,e){return UM(e)?i2(e):c_(r,e)}class Km{constructor(){this._=void 0}}function M3(r,e,t){return r instanceof dc?(function(s,o){const c={fields:{[LA]:{stringValue:VA},[zA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&s_(o)&&(o=qm(o)),o&&(c.fields[UA]=o),{mapValue:c}})(t,e):r instanceof Do?a2(r,e):r instanceof Oo?o2(r,e):(function(s,o){const c=s2(s,o),u=aE(c)+aE(s.Ae);return d0(c)&&d0(s.Ae)?i2(u):c_(s.serializer,u)})(r,e)}function P3(r,e,t){return r instanceof Do?a2(r,e):r instanceof Oo?o2(r,e):t}function s2(r,e){return r instanceof dh?(function(n){return d0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class dc extends Km{}class Do extends Km{constructor(e){super(),this.elements=e}}function a2(r,e){const t=l2(e);for(const n of r.elements)t.some((s=>Vi(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Oo extends Km{constructor(e){super(),this.elements=e}}function o2(r,e){let t=l2(e);for(const n of r.elements)t=t.filter((s=>!Vi(s,n)));return{arrayValue:{values:t}}}class dh extends Km{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aE(r){return jt(r.integerValue||r.doubleValue)}function l2(r){return uh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Ym{constructor(e,t){this.field=e,this.transform=t}}function j3(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Do&&s instanceof Do||n instanceof Oo&&s instanceof Oo?rc(n.elements,s.elements,Vi):n instanceof dh&&s instanceof dh?Vi(n.Ae,s.Ae):n instanceof dc&&s instanceof dc})(r.transform,e.transform)}class V3{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qm{}function c2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wm(r.key,Ln.none()):new bc(r.key,r.data,Ln.none());{const t=r.data,n=jn.empty();let s=new xt(Ut.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new As(r.key,n,new sr(s.toArray()),Ln.none())}}function L3(r,e,t){r instanceof bc?(function(s,o,c){const u=s.value.clone(),d=lE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof As?(function(s,o,c){if(!jf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=lE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(u2(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(r,e,t,n){return r instanceof bc?(function(o,c,u,d){if(!jf(o.precondition,c))return u;const f=o.value.clone(),g=cE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof As?(function(o,c,u,d){if(!jf(o.precondition,c))return u;const f=cE(o.fieldTransforms,d,c),g=c.data;return g.setAll(u2(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return jf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function U3(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=s2(n.transform,s||null);o!=null&&(t===null&&(t=jn.empty()),t.set(n.field,o))}return t||null}function oE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&rc(n,s,((o,c)=>j3(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bc extends Qm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Qm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function u2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function lE(r,e,t){const n=new Map;Re(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,P3(c,u,t[s]))}return n}function cE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,M3(o,c,e))}return n}class Wm extends Qm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends Qm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&L3(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=r2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=c2(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(ke.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,((t,n)=>oE(t,n)))&&rc(this.baseMutations,e.baseMutations,((t,n)=>oE(t,n)))}}class h_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Re(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return C3})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new h_(e,t,n,s)}}class d_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class z3{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,rt;function B3(r){switch(r){case de.OK:return Se(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function d2(r){if(r===void 0)return Gn("GRPC error has no .code"),de.UNKNOWN;switch(r){case on.OK:return de.OK;case on.CANCELLED:return de.CANCELLED;case on.UNKNOWN:return de.UNKNOWN;case on.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case on.INTERNAL:return de.INTERNAL;case on.UNAVAILABLE:return de.UNAVAILABLE;case on.UNAUTHENTICATED:return de.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case on.NOT_FOUND:return de.NOT_FOUND;case on.ALREADY_EXISTS:return de.ALREADY_EXISTS;case on.PERMISSION_DENIED:return de.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case on.ABORTED:return de.ABORTED;case on.OUT_OF_RANGE:return de.OUT_OF_RANGE;case on.UNIMPLEMENTED:return de.UNIMPLEMENTED;case on.DATA_LOSS:return de.DATA_LOSS;default:return Se(39323,{code:r})}}(rt=on||(on={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";function F3(){return new TextEncoder}const H3=new _a([4294967295,4294967295],0);function uE(r){const e=F3().encode(r),t=new uA;return t.update(e),new Uint8Array(t.digest())}function hE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _a([t,n],0),new _a([s,o],0)]}class f_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(n<0)throw new Pu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_a.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(_a.fromNumber(n)));return s.compare(H3)===1&&(s=new _a([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new f_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xm{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xm(ke.min(),s,new Lt(Le),yr(),Ge())}}class Mh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Mh(n,t,Ge(),Ge(),Ge())}}class Vf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class f2{constructor(e,t){this.targetId=e,this.Ce=t}}class m2{constructor(e,t,n=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class dE{constructor(){this.ve=0,this.Fe=fE(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),n=Ge();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Se(38017,{changeType:o})}})),new Mh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=fE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class q3{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=gf(),this.He=gf(),this.Ye=new Lt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(om(o))if(n===0){const c=new we(o.path);this.et(t,c,qt.newNoDocument(c,ke.min()))}else Re(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof jA)return Co("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new f_(c,s,o)}catch(d){return Co(d instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&om(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,qt.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ge();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Xm(e,t,this.Ye,this.je,n);return this.je=yr(),this.Je=gf(),this.He=gf(),this.Ye=new Lt(Le),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gf(){return new Lt(we.comparator)}function fE(){return new Lt(we.comparator)}const $3={asc:"ASCENDING",desc:"DESCENDING"},G3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K3={and:"AND",or:"OR"};class Y3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y0(r,e){return r.useProto3Json||zm(e)?e:{value:e}}function fc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Q3(r,e){return fc(r,e.toTimestamp())}function Yn(r){return Re(!!r,49232),ke.fromTimestamp((function(t){const n=bs(t);return new bt(n.seconds,n.nanos)})(r))}function m_(r,e){return _0(r,e).canonicalString()}function _0(r,e){const t=(function(s){return new ft(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function p2(r){const e=ft.fromString(r);return Re(S2(e),10190,{key:e.toString()}),e}function um(r,e){return m_(r.databaseId,e.path)}function bo(r,e){const t=p2(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(v2(t))}function y2(r,e){return m_(r.databaseId,e)}function _2(r){const e=p2(r);return e.length===4?ft.emptyPath():v2(e)}function v0(r){return new ft(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function v2(r){return Re(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function mE(r,e,t){return{name:um(r,e),fields:t.value.mapValue.fields}}function W3(r,e,t){const n=bo(r,e.name),s=Yn(e.updateTime),o=e.createTime?Yn(e.createTime):ke.min(),c=new jn({mapValue:{fields:e.fields}}),u=qt.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function X3(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Se(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Re(g===void 0||typeof g=="string",58123),cn.fromBase64String(g||"")):(Re(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),cn.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?de.UNKNOWN:d2(f.code);return new ve(g,f.message||"")})(c);t=new m2(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=bo(r,n.document.name),o=Yn(n.document.updateTime),c=n.document.createTime?Yn(n.document.createTime):ke.min(),u=new jn({mapValue:{fields:n.document.fields}}),d=qt.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Vf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=bo(r,n.document),o=n.readTime?Yn(n.readTime):ke.min(),c=qt.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Vf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=bo(r,n.document),o=n.removedTargetIds||[];t=new Vf([],o,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new z3(s,o),u=n.targetId;t=new f2(u,c)}}return t}function hm(r,e){let t;if(e instanceof bc)t={update:mE(r,e.key,e.value)};else if(e instanceof Wm)t={delete:um(r,e.key)};else if(e instanceof As)t={update:mE(r,e.key,e.data),updateMask:rP(e.fieldMask)};else{if(!(e instanceof h2))return Se(16599,{Vt:e.type});t={verify:um(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof dc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Do)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Oo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof dh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Se(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:Q3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se(27497)})(r,e.precondition)),t}function b0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ln.updateTime(Yn(o.updateTime)):o.exists!==void 0?Ln.exists(o.exists):Ln.none()})(e.currentDocument):Ln.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Re(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new dc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new Do(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new Oo(g)}else"increment"in u?d=new dh(c,u.increment):Se(16584,{proto:u});const f=Ut.fromServerFormat(u.fieldPath);return new Ym(f,d)})(r,s))):[];if(e.update){e.update.name;const s=bo(r,e.update.name),o=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new sr(f.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new As(s,o,c,t,n)}return new bc(s,o,t,n)}if(e.delete){const s=bo(r,e.delete);return new Wm(s,t)}if(e.verify){const s=bo(r,e.verify);return new h2(s,t)}return Se(1463,{proto:e})}function J3(r,e){return r&&r.length>0?(Re(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Yn(s.updateTime):Yn(o);return c.isEqual(ke.min())&&(c=Yn(o)),new V3(c,s.transformResults||[])})(t,e)))):[]}function b2(r,e){return{documents:[y2(r,e.path)]}}function w2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=y2(r,s);const o=(function(f){if(f.length!==0)return T2(wt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:$l(v.field),direction:eP(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=y0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function x2(r){let e=_2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Re(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=E2(y);return v instanceof wt&&l_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(E){return new hh(Gl(E.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,zm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new uc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new uc(w,v)})(t.endAt)),T3(e,s,c,o,u,"F",d,f)}function Z3(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function E2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Gl(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Gl(t.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gl(t.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gl(t.unaryFilter.field);return Ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ze.create(Gl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((n=>E2(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function eP(r){return $3[r]}function tP(r){return G3[r]}function nP(r){return K3[r]}function $l(r){return{fieldPath:r.canonicalString()}}function Gl(r){return Ut.fromServerFormat(r.fieldPath)}function T2(r){return r instanceof Ze?(function(t){if(t.op==="=="){if(Jx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NAN"}};if(Xx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NAN"}};if(Xx(t.value))return{unaryFilter:{field:$l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(t.field),op:tP(t.op),value:t.value}}})(r):r instanceof wt?(function(t){const n=t.getFilters().map((s=>T2(s)));return n.length===1?n[0]:{compositeFilter:{op:nP(t.op),filters:n}}})(r):Se(54877,{filter:r})}function rP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function S2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=ke.min(),c=ke.min(),u=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class A2{constructor(e){this.yt=e}}function iP(r,e){let t;if(e.document)t=W3(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=Po(e.noDocument.readTime);t=qt.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const n=we.fromSegments(e.unknownDocument.path),s=Po(e.unknownDocument.version);t=qt.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new bt(s[0],s[1]);return ke.fromTimestamp(o)})(e.readTime)),t}function gE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:um(o,c.key),fields:c.data.value.mapValue.fields,updateTime:fc(o,c.version.toTimestamp()),createTime:fc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Mo(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Mo(e.version)}}return n}function dm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Mo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Po(r){const e=new bt(r.seconds,r.nanoseconds);return ke.fromTimestamp(e)}function ho(r,e){const t=(e.baseMutations||[]).map((o=>b0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>b0(r.yt,o))),s=bt.fromMillis(e.localWriteTimeMs);return new u_(e.batchId,s,t,n)}function ju(r){const e=Po(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Po(r.lastLimboFreeSnapshotVersion):ke.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Re(c===1,1966,{count:c}),Pr(Dh(_2(o.documents[0])))})(r.query):(function(o){return Pr(x2(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,cn.fromBase64String(r.resumeToken))}function I2(r,e){const t=Mo(e.snapshotVersion),n=Mo(e.lastLimboFreeSnapshotVersion);let s;s=om(e.target)?b2(r.yt,e.target):w2(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function R2(r){const e=x2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cm(e,e.limit,"L"):e}function Dy(r,e){return new d_(e.largestBatchId,b0(r.yt,e.overlayMutation))}function pE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function yE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Mo(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class sP{getBundleMetadata(e,t){return _E(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Po(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return _E(e).put((function(s){return{bundleId:s.id,createTime:Mo(Yn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return vE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:R2(o.bundledQuery),readTime:Po(o.readTime)}})(n)}))}saveNamedQuery(e,t){return vE(e).put((function(s){return{name:s.name,readTime:Mo(Yn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function _E(r){return gn(r,Bm)}function vE(r){return gn(r,Fm)}class Jm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Jm(e,n)}getOverlay(e,t){return Au(e).get(pE(this.userId,t)).next((n=>n?Dy(this.serializer,n):null))}getOverlays(e,t){const n=Ni();return re.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new d_(t,c);s.push(this.St(e,u))})),re.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Au(e).Z(c0,u))})),re.waitFor(o)}getOverlaysForCollection(e,t,n){const s=Ni(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Au(e).J(c0,c).next((u=>{for(const d of u){const f=Dy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=Ni();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:NA,range:u},((d,f,g)=>{const y=Dy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Au(e).put((function(s,o,c){const[u,d,f]=pE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:hm(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(r){return gn(r,Hm)}class aP{bt(e){return gn(e,r_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?cn.fromUint8Array(n):cn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const n=jt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),rh(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?FA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):$m(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=lc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fo.Kt=new fo;const Ll=255;function oP(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function bE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=oP(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class lP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ll),this.sn(255)}_n(){this.an(Ll),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ll?(this.sn(Ll),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ll?(this.an(Ll),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class cP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class uP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Iu{constructor(){this.cn=new lP,this.ln=new cP(this.cn),this.hn=new uP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class mo{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new mo(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Lf(this.En),directionalValue:Lf(this.dn),orderedDocumentKey:Lf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function aa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=wE(r.En,e.En),t!==0?t:(t=wE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function wE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Lf(r){return xS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function xE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class EE{constructor(e){this.mn=new xt(((t,n)=>Ut.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=a0(e);if(t!==void 0&&!this.wn(t))return!1;const n=lo(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Ut.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Nf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Nf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Nf(n.field,n.dir==="asc"?0:1)));return new nm(nm.UNKNOWN_ID,this.collectionId,t,nh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function C2(r){if(Re(r instanceof Ze||r instanceof wt,20012),r instanceof Ze){if(r instanceof XA){const t=r.value.arrayValue?.values?.map((n=>Ze.create(r.field,"==",n)))||[];return wt.create(t,"or")}return r}const e=r.filters.map((t=>C2(t)));return wt.create(e,r.op)}function hP(r){if(r.getFilters().length===0)return[];const e=E0(C2(r));return Re(N2(e),7391),w0(e)||x0(e)?[e]:e.getFilters()}function w0(r){return r instanceof Ze}function x0(r){return r instanceof wt&&l_(r)}function N2(r){return w0(r)||x0(r)||(function(t){if(t instanceof wt&&f0(t)){for(const n of t.getFilters())if(!w0(n)&&!x0(n))return!1;return!0}return!1})(r)}function E0(r){if(Re(r instanceof Ze||r instanceof wt,34018),r instanceof Ze)return r;if(r.filters.length===1)return E0(r.filters[0]);const e=r.filters.map((n=>E0(n)));let t=wt.create(e,r.op);return t=fm(t),N2(t)?t:(Re(t instanceof wt,64498),Re(hc(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((n,s)=>g_(n,s))))}function g_(r,e){let t;return Re(r instanceof Ze||r instanceof wt,38388),Re(e instanceof Ze||e instanceof wt,25473),t=r instanceof Ze?e instanceof Ze?(function(s,o){return wt.create([s,o],"and")})(r,e):TE(r,e):e instanceof Ze?TE(e,r):(function(s,o){if(Re(s.filters.length>0&&o.filters.length>0,48005),hc(s)&&hc(o))return YA(s,o.getFilters());const c=f0(s)?s:o,u=f0(s)?o:s,d=c.filters.map((f=>g_(f,u)));return wt.create(d,"or")})(r,e),fm(t)}function TE(r,e){if(hc(e))return YA(e,r.getFilters());{const t=e.filters.map((n=>g_(r,n)));return wt.create(t,"or")}}function fm(r){if(Re(r instanceof Ze||r instanceof wt,11850),r instanceof Ze)return r;const e=r.getFilters();if(e.length===1)return fm(e[0]);if(GA(r))return r;const t=e.map((s=>fm(s))),n=[];return t.forEach((s=>{s instanceof Ze?n.push(s):s instanceof wt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:wt.create(n,r.op)}class dP{constructor(){this.Cn=new p_}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(_r.min())}updateCollectionGroup(e,t,n){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class p_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new xt(ft.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new xt(ft.comparator)).toArray()}}const SE="IndexedDbIndexManager",pf=new Uint8Array(0);class fP{constructor(e,t){this.databaseId=t,this.vn=new p_,this.Fn=new Ss((n=>ko(n)),((n,s)=>kh(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return AE(e).put(o)}return re.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[_A(t),""],!1,!0);return AE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ci(c.parent))}return n}))}addFieldIndex(e,t){const n=Ru(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=zl(e);return o.next((u=>{c.put(yE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Ru(e),s=zl(e),o=Ul(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ru(e),n=Ul(e),s=zl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return re.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new EE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=Ul(e);let s=!0;const o=new Map;return re.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ge();const u=[];return re.forEach(o,((d,f)=>{ye(SE,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(d)} to execute ${ko(t)}`);const g=(function(U,F){const K=a0(F);if(K===void 0)return null;for(const z of lm(U,K.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(U,F){const K=new Map;for(const z of lo(F))for(const D of lm(U,z.fieldPath))switch(D.op){case"==":case"in":K.set(z.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return K.set(z.fieldPath.canonicalString(),D.value),Array.from(K.values())}return null})(f,d),v=(function(U,F){const K=[];let z=!0;for(const D of lo(F)){const S=D.kind===0?rE(U,D.fieldPath,U.startAt):iE(U,D.fieldPath,U.startAt);K.push(S.value),z&&(z=S.inclusive)}return new uc(K,z)})(f,d),w=(function(U,F){const K=[];let z=!0;for(const D of lo(F)){const S=D.kind===0?iE(U,D.fieldPath,U.endAt):rE(U,D.fieldPath,U.endAt);K.push(S.value),z&&(z=S.inclusive)}return new uc(K,z)})(f,d),E=this.On(d,f,v),k=this.On(d,f,w),M=this.Nn(d,f,y),V=this.Bn(d.indexId,g,E,v.inclusive,k,w.inclusive,M);return re.forEach(V,(H=>n.Y(H,t.limit).next((U=>{U.forEach((F=>{const K=we.fromSegments(F.documentKey);c.has(K)||(c=c.add(K),u.push(K))}))}))))})).next((()=>u))}return re.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=hP(wt.create(e.filters,"and")).map((n=>g0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):pf,w=this.kn(e,v,n[y%f],s),E=this.qn(e,v,o[y%f],c),k=u.map((M=>this.kn(e,v,M,!0)));g.push(...this.createRange(w,E,k))}return g}kn(e,t,n,s){const o=new mo(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new mo(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new EE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return re.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new xt(Ut.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Iu;for(const s of lo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);fo.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Iu;return fo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Iu;return fo.Kt.Dt(ch(this.databaseId,t),n.Pn((function(o){const c=lo(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Iu);let o=0;for(const c of lo(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&uh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);fo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Iu;d.seed(u.un()),fo.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof Ze&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Ru(e),s=zl(e);return(t?n.J(l0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return re.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new nh(y.sequenceNumber,new _r(Po(y.readTime),new we(Ci(y.documentKey)),y.largestBatchId)):nh.empty(),w=g.fields.map((([E,k])=>new Nf(Ut.fromServerFormat(E),k)));return new nm(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=Ru(e),o=zl(e);return this.Gn(e).next((c=>s.J(l0,IDBKeyRange.bound(t,t)).next((u=>re.forEach(u,(d=>o.put(yE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return re.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),re.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?re.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return Ul(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return Ul(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=Ul(e);let o=new xt(aa);return s.ee({index:CA,range:IDBKeyRange.only([n.indexId,this.uid,Lf(this.$n(n,t))])},((c,u)=>{o=o.add(new mo(n.indexId,t,xE(u.arrayValue),xE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new xt(aa);const s=this.Qn(t,e);if(s==null)return n;const o=a0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(uh(c))for(const u of c.arrayValue.values||[])n=n.add(new mo(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new mo(t.indexId,e.key,pf,s));return n}Jn(e,t,n,s,o){ye(SE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),E=f.getIterator();let k=Vl(w),M=Vl(E);for(;k||M;){let V=!1,H=!1;if(k&&M){const U=g(k,M);U<0?H=!0:U>0&&(V=!0)}else k!=null?H=!0:V=!0;V?(y(M),M=Vl(E)):H?(v(k),k=Vl(w)):(k=Vl(w),M=Vl(E))}})(s,o,aa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),re.waitFor(c)}Gn(e){let t=1;return zl(e).ee({index:RA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>aa(c,u))).filter(((c,u,d)=>!u||aa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=aa(c,e),d=aa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,pf,we.empty()),d=s[c+1].Vn(this.uid,pf,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IE)}getMinOffset(e,t){return re.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Se(44426))))).next(IE)}}function AE(r){return gn(r,ah)}function Ul(r){return gn(r,$u)}function Ru(r){return gn(r,n_)}function zl(r){return gn(r,qu)}function IE(r){Re(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;Z0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new _r(e.readTime,e.documentKey,t)}const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k2=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function D2(r,e,t){const n=r.store(Jr),s=r.store(ic),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Re(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=SA(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return re.waitFor(o).next((()=>f))}function mm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Se(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(k2,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Zm{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Re(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Zm(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).ee({index:po,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Kl(e),c=oa(e);return c.add({}).next((u=>{Re(typeof u=="number",49019);const d=new u_(u,t,n,s),f=(function(w,E,k){const M=k.baseMutations.map((H=>hm(w.yt,H))),V=k.mutations.map((H=>hm(w.yt,H)));return{userId:E,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:M,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new xt(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=SA(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,FM))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),re.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return oa(e).get(t).next((n=>n?(Re(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),ho(this.serializer,n)):null))}er(e,t){return this.Xn[t]?re.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return oa(e).ee({index:po,range:s},((c,u,d)=>{u.userId===this.userId&&(Re(u.batchId>=n,47524,{tr:n}),o=ho(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=_o;return oa(e).ee({index:po,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,_o],[this.userId,Number.POSITIVE_INFINITY]);return oa(e).J(po,t).next((n=>n.map((s=>ho(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=kf(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Kl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ci(g);if(f===this.userId&&t.path.isEqual(v))return oa(e).get(y).next((w=>{if(!w)throw Se(61480,{nr:c,batchId:y});Re(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(ho(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);const s=[];return t.forEach((o=>{const c=kf(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Kl(e).ee({range:u},((f,g,y)=>{const[v,w,E]=f,k=Ci(w);v===this.userId&&o.path.isEqual(k)?n=n.add(E):y.done()}));s.push(d)})),re.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=kf(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new xt(Le);return Kl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,E=Ci(v);y===this.userId&&n.isPrefixOf(E)?E.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(oa(e).get(o).next((c=>{if(c===null)throw Se(35274,{batchId:o});Re(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(ho(this.serializer,c))})))})),re.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return D2(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),re.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return re.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Kl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ci(o[1]);s.push(d)}else u.done()})).next((()=>{Re(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return O2(e,this.userId,t)}_r(e){return M2(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:_o,lastStreamToken:""}))}}function O2(r,e,t){const n=kf(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Kl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function oa(r){return gn(r,Jr)}function Kl(r){return gn(r,ic)}function M2(r){return gn(r,ih)}class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}class mP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new jo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ke.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Re(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Bl(e).ee(((c,u)=>{const d=ju(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>re.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Bl(e).ee(((n,s)=>{const o=ju(s);t(o)}))}lr(e){return CE(e).get(sm).next((t=>(Re(t!==null,2888),t)))}hr(e,t){return CE(e).put(sm,t)}Pr(e,t){return Bl(e).put(I2(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=ko(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Bl(e).ee({range:s,index:IA},((c,u,d)=>{const f=ju(u);kh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=ma(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),re.waitFor(s)}removeMatchingKeys(e,t,n){const s=ma(e);return re.forEach(t,(o=>{const c=Un(o.path);return re.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=ma(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=ma(e);let o=Ge();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ci(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[_A(n)],!1,!0);let o=0;return ma(e).ee({index:t_,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Bl(e).get(t).next((n=>n?ju(n):null))}}function Bl(r){return gn(r,sc)}function CE(r){return gn(r,vo)}function ma(r){return gn(r,ac)}const NE="LruGarbageCollector",gP=1048576;function kE([r,e],[t,n]){const s=Le(r,t);return s===0?Le(e,n):s}class pP{constructor(e){this.Ir=e,this.buffer=new xt(kE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();kE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(NE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?ye(NE,"Ignoring IndexedDB error during garbage collection: ",t):await Ho(t)}await this.Vr(3e5)}))}}class yP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Mr.ce);const n=new pP(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(RE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),Hl()<=Xe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function j2(r,e){return new yP(r,e)}class _P{constructor(e,t){this.db=e,this.garbageCollector=j2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return yf(e,n)}removeReference(e,t,n){return yf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return yf(e,t)}br(e,t){return(function(s,o){let c=!1;return M2(s).te((u=>O2(s,u,o).next((d=>(d&&(c=!0),re.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,ke.min()),ma(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>re.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return yf(e,t)}Sr(e,t){const n=ma(e);let s,o=Mr.ce;return n.ee({index:t_},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Mr.ce&&t(new we(Ci(s)),o),o=f,s=d):o=Mr.ce})).next((()=>{o!==Mr.ce&&t(new we(Ci(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yf(r,e){return ma(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class V2{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ao(e).put(n)}removeEntry(e,t,n){return ao(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],dm(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=qt.newInvalidDocument(t);return ao(e).ee({index:Df,range:IDBKeyRange.only(Cu(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:qt.newInvalidDocument(t)};return ao(e).ee({index:Df,range:IDBKeyRange.only(Cu(t))},((s,o)=>{n={document:this.Cr(t,o),size:mm(o)}})).next((()=>n))}getEntries(e,t){let n=yr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=yr(),s=new Lt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,mm(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return re.resolve();let s=new xt(ME);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Cu(s.first()),Cu(s.last())),c=s.getIterator();let u=c.getNext();return ao(e).ee({index:Df,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&ME(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Cu(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),dm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=yr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Oh(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=yr();const c=OE(t,n),u=OE(t,_r.max());return ao(e).ee({index:AA,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new bP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return DE(e).get(o0).next((t=>(Re(!!t,20021),t)))}Dr(e,t){return DE(e).put(o0,t)}Cr(e,t){if(t){const n=iP(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ke.min())))return n}return qt.newInvalidDocument(e)}}function L2(r){return new vP(r)}class bP extends V2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ss((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new xt(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=gE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=mm(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=gE(this.Nr.serializer,c.convertToNoDocument(ke.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),re.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function DE(r){return gn(r,sh)}function ao(r){return gn(r,im)}function Cu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OE(r,e){const t=e.documentKey.path.toArray();return[r,dm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ME(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=Le(t[o],n[o]),s)return s;return s=Le(t.length,n.length),s||(s=Le(t[t.length-2],n[n.length-2]),s||Le(t[t.length-1],n[n.length-1]))}class wP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class U2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Qu(n.mutation,s,sr.empty(),bt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ge()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ge()){const s=Ni();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=Mu();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Ni();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ge())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=yr();const c=Yu(),u=(function(){return Yu()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof As)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Qu(g.mutation,f,g.mutation.getFieldMask(),bt.now())):c.set(f.key,sr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new wP(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Yu();let s=new Lt(((c,u)=>c-u)),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||sr.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ge()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=r2();g.forEach((v=>{if(!o.has(v)){const w=c2(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return re.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):re.resolve(Ni());let u=th,d=o;return c.next((f=>re.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ge()))).next((g=>({batchId:u,changes:n2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=Mu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=Mu();return this.indexManager.getCollectionParents(e,o).next((u=>re.forEach(u,(d=>{const f=(function(y,v){return new vc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,qt.newInvalidDocument(g)))}));let u=Mu();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Qu(g.mutation,f,sr.empty(),bt.now()),Oh(t,f)&&(u=u.insert(d,f))})),u}))}}class xP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:R2(s.bundledQuery),readTime:Yn(s.readTime)}})(t)),re.resolve()}}class EP{constructor(){this.overlays=new Lt(we.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ni();return re.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),re.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),re.resolve()}getOverlaysForCollection(e,t,n){const s=Ni(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Lt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=Ni(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ni(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return re.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new d_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ge(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class TP{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}class y_{constructor(){this.Qr=new xt(bn.$r),this.Ur=new xt(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new ft([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ge();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class SP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(bn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new u_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?_o:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xt(Le);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),re.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new xt(Le);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),re.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return re.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AP{constructor(e){this.ri=e,this.docs=(function(){return new Lt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return re.resolve(n?n.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let n=yr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():qt.newInvalidDocument(s))})),re.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=yr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||Z0(wA(g),n)<=0||(s.has(g.key)||Oh(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Se(9500)}ii(e,t){return re.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new IP(this)}getSize(e){return re.resolve(this.size)}}class IP extends V2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class RP{constructor(e){this.persistence=e,this.si=new Ss((t=>ko(t)),kh),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new y_,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),re.waitFor(o).next((()=>s))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return re.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),re.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return re.resolve(n)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}class __{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mr(0),this.li=!1,this.li=!0,this.hi=new TP,this.referenceDelegate=e(this),this.Pi=new RP(this),this.indexManager=new dP,this.remoteDocumentCache=(function(s){return new AP(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new A2(t),this.Ii=new xP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new SP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye("MemoryPersistence","Starting transaction:",e);const s=new CP(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return re.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class CP extends EA{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Ri=new y_,this.Vi=null}static mi(e){return new eg(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),re.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gm{constructor(e,t){this.persistence=e,this.pi=new Ss((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=j2(this,t)}static mi(e,t){return new gm(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?re.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,ke.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mf(e.data.value)),t}br(e,t,n){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return re.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class NP{constructor(e){this.serializer=e}k(e,t,n,s){const o=new Um("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Nh)})(e),(function(d){d.createObjectStore(ih,{keyPath:BM}),d.createObjectStore(Jr,{keyPath:$x,autoIncrement:!0}).createIndex(po,Gx,{unique:!0}),d.createObjectStore(ic)})(e),PE(e),(function(d){d.createObjectStore(co)})(e));let c=re.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(ac),d.deleteObjectStore(sc),d.deleteObjectStore(vo)})(e),PE(e)),c=c.next((()=>(function(d){const f=d.store(vo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return f.put(sm,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Jr).J().next((y=>{d.deleteObjectStore(Jr),d.createObjectStore(Jr,{keyPath:$x,autoIncrement:!0}).createIndex(po,Gx,{unique:!0});const v=f.store(Jr),w=y.map((E=>v.put(E)));return re.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(oc,{keyPath:WM})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(sh)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Bm,{keyPath:XM})})(e),(function(d){d.createObjectStore(Fm,{keyPath:JM})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore(Hm,{keyPath:s3});f.createIndex(c0,a3,{unique:!1}),f.createIndex(NA,o3,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(im,{keyPath:HM});f.createIndex(Df,qM),f.createIndex(AA,$M)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(co)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(n_,{keyPath:ZM,autoIncrement:!0}).createIndex(l0,e3,{unique:!1}),d.createObjectStore(qu,{keyPath:t3}).createIndex(RA,n3,{unique:!1}),d.createObjectStore($u,{keyPath:r3}).createIndex(CA,i3,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore($u).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(r_,{keyPath:l3})})(e)}))),n<18&&s>=18&&xS()&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore($u).clear()}))),c}wi(e){let t=0;return e.store(co).ee(((n,s)=>{t+=mm(s)})).next((()=>{const n={byteSize:t};return e.store(sh).put(o0,n)}))}yi(e){const t=e.store(ih),n=e.store(Jr);return t.J().next((s=>re.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,_o],[o.userId,o.lastAcknowledgedBatchId]);return n.J(po,c).next((u=>re.forEach(u,(d=>{Re(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=ho(this.serializer,d);return D2(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(ac),n=e.store(co);return e.store(vo).get(sm).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new ft(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?re.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>re.waitFor(o)))}))}bi(e,t){e.createObjectStore(ah,{keyPath:QM});const n=t.store(ah),s=new p_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(co).ee({X:!0},((c,u)=>{const d=new ft(c);return o(d.popLast())})).next((()=>t.store(ic).ee({X:!0},(([c,u,d],f)=>{const g=Ci(u);return o(g.popLast())}))))}Di(e){const t=e.store(sc);return t.ee(((n,s)=>{const o=ju(s),c=I2(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(co),s=[];return n.ee(((o,c)=>{const u=t.store(im),d=(function(y){return y.document?new we(ft.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Se(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>re.waitFor(s)))}Fi(e,t){const n=t.store(Jr),s=L2(this.serializer),o=new __(eg.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ge();ho(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),re.forEach(u,((d,f)=>{const g=new Cn(f),y=Jm.wt(this.serializer,g),v=o.getIndexManager(g),w=Zm.wt(g,this.serializer,v,o.referenceDelegate);return new U2(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new u0(t,Mr.ce),d).next()}))}))}}function PE(r){r.createObjectStore(ac,{keyPath:KM}).createIndex(t_,YM,{unique:!0}),r.createObjectStore(sc,{keyPath:"targetId"}).createIndex(IA,GM,{unique:!0}),r.createObjectStore(vo)}const la="IndexedDbPersistence",Oy=18e5,My=5e3,Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kP="main";class v_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!v_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _P(this,s),this.$i=t+kP,this.serializer=new A2(d),this.Ui=new va(this.$i,this.Ni,new NP(this.serializer)),this.hi=new aP,this.Pi=new mP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L2(this.serializer),this.Ii=new sP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Gn(la,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Py);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Mr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>_f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Na(e))return ye(la,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye(la,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Nu(e).get(jl).next((t=>re.resolve(this.es(t))))}ts(e){return _f(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Oy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,oc);return n.J().next((s=>{const o=this.ss(s,Oy),c=s.filter((u=>o.indexOf(u)===-1));return re.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?re.resolve(!0):Nu(e).get(jl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,My)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Py);return!1}}return!(!this.networkEnabled||!this.inForeground)||_f(e).J().next((n=>this.ss(n,My).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ye(la,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Nh,oc],(e=>{const t=new u0(e,Mr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>_f(e).J().next((t=>this.ss(t,Oy).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Zm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){ye(la,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?h3:d===17?MA:d===16?u3:d===15?i_:d===14?OA:d===13?DA:d===12?c3:d===11?kA:void Se(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new u0(u,this.ci?this.ci.next():Mr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,xA);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Nu(e).get(jl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,My)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,Py)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(jl,t)}static v(){return va.v()}Zi(e){const t=Nu(e);return t.get(jl).next((n=>this.es(n)?(ye(la,"Releasing primary lease."),t.delete(jl)):re.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;wS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ye(la,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gn(la,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(r){return gn(r,Nh)}function _f(r){return gn(r,oc)}function DP(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class b_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ge(),s=Ge();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new b_(e,t.fromCache,n,s)}}class OP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wS()?8:TA(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new OP;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(Hl()<=Xe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Hl()<=Xe.DEBUG&&ye("QueryEngine","Query:",ql(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(Hl()<=Xe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):re.resolve())}ys(e,t){if(sE(t))return re.resolve(null);let n=Pr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=cm(t,null,"F"),n=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ge(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,cm(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return sE(t)||s.isEqual(ke.min())?re.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?re.resolve(null):(Hl()<=Xe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ql(t)),this.vs(e,c,t,MM(s,th)).next((u=>u)))}))}Ds(e,t){let n=new xt(e2(e));return t.forEach(((s,o)=>{Oh(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return Hl()<=Xe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ql(t)),this.ps.getDocumentsMatchingQuery(e,t,_r.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const w_="LocalStore",MP=3e8;class PP{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Lt(Le),this.xs=new Ss((o=>ko(o)),kh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function B2(r,e,t,n){return new PP(r,e,t,n)}async function F2(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ge();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function jP(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=re.resolve();return v.forEach((E=>{w=w.next((()=>g.getEntry(d,E))).next((k=>{const M=f.docVersions.get(E);Re(M!==null,48541),k.version.compareTo(M)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ge();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function H2(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function VP(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(cn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(k,M,V){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=MP?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=yr(),f=Ge();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(LP(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(ke.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return re.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function LP(r,e,t){let n=Ge(),s=Ge();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=yr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ke.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):ye(w_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function UP(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=_o),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function zP(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,re.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function T0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Na(c))throw c;ye(w_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function jE(r,e,t){const n=Ue(r);let s=ke.min(),o=Ge();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?re.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,Pr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:ke.min(),t?o:Ge()))).next((u=>(BP(n,A3(e),u),{documents:u,Qs:o})))))}function BP(r,e,t){let n=r.Os.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class VE{constructor(){this.activeTargetIds=D3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q2{constructor(){this.Mo=new VE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new VE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FP{Oo(e){}shutdown(){}}const LE="ConnectivityMonitor";class UE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(LE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(LE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vf=null;function S0(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}const jy="RestConnection",HP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===am?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=S0(),u=this.zo(e,t.toUriEncodedString());ye(jy,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=zo(f);return this.Jo(e,u,d,n,g).then((y=>(ye(jy,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Co(jy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_c})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=HP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class $P{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class GP extends qP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=S0();return new Promise(((u,d)=>{const f=new hA;f.setWithCredentials(!0),f.listenOnce(dA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Cf.NO_ERROR:const y=f.getResponseJson();ye(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Cf.TIMEOUT:ye(Mn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const v=f.getStatus();if(ye(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w?.error;if(E&&E.status&&E.message){const k=(function(V){const H=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(H)>=0?H:de.UNKNOWN})(E.status);d(new ve(k,E.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ye(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);ye(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=S0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=gA(),u=mA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");ye(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const E=new $P({Yo:M=>{w?ye(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(v||(ye(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ye(Mn,`RPC '${e}' stream ${s} sending:`,M),y.send(M))},Zo:()=>y.close()}),k=(M,V,H)=>{M.listen(V,(U=>{try{H(U)}catch(F){setTimeout((()=>{throw F}),0)}}))};return k(y,Ou.EventType.OPEN,(()=>{w||(ye(Mn,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),k(y,Ou.EventType.CLOSE,(()=>{w||(w=!0,ye(Mn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(y))})),k(y,Ou.EventType.ERROR,(M=>{w||(w=!0,Co(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),E.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),k(y,Ou.EventType.MESSAGE,(M=>{if(!w){const V=M.data[0];Re(!!V,16349);const H=V,U=H?.error||H[0]?.error;if(U){ye(Mn,`RPC '${e}' stream ${s} received error:`,U);const F=U.status;let K=(function(S){const T=on[S];if(T!==void 0)return d2(T)})(F),z=U.message;K===void 0&&(K=de.INTERNAL,z="Unknown error status: "+F+" with message "+U.message),w=!0,E.a_(new ve(K,z)),y.close()}else ye(Mn,`RPC '${e}' stream ${s} received:`,V),E.u_(V)}})),k(u,fA.STAT_EVENT,(M=>{M.stat===i0.PROXY?ye(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===i0.NOPROXY&&ye(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function KP(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}function tg(r){return new Y3(r,!0)}class $2{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const zE="PersistentStream";class G2{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(zE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(zE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YP extends G2{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=X3(this.serializer,e),n=(function(o){if(!("targetChange"in o))return ke.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Yn(c.readTime):ke.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=v0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=om(d)?{documents:b2(o,d)}:{query:w2(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=g2(o,c.resumeToken);const f=y0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ke.min())>0){u.readTime=fc(o,c.snapshotVersion.toTimestamp());const f=y0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=Z3(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=v0(this.serializer),t.removeTarget=e,this.q_(t)}}class QP extends G2{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=J3(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=v0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>hm(this.serializer,n)))};this.q_(t)}}class WP{}class XP extends WP{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,_0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,_0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class JP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vo="RemoteStore";class ZP{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{qo(this)&&(ye(Vo,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Ph(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ng(f)})(this))}))})),this.Ra=new JP(n,s)}}async function ng(r){if(qo(r))for(const e of r.da)await e(!0)}async function Ph(r){for(const e of r.da)await e(!1)}function K2(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),S_(t)?T_(t):wc(t).O_()&&E_(t,e))}function x_(r,e){const t=Ue(r),n=wc(t);t.Ia.delete(e),n.O_()&&Y2(t,e),t.Ia.size===0&&(n.O_()?n.L_():qo(t)&&t.Ra.set("Unknown"))}function E_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wc(r).Y_(e)}function Y2(r,e){r.Va.Ue(e),wc(r).Z_(e)}function T_(r){r.Va=new q3({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),wc(r).start(),r.Ra.ua()}function S_(r){return qo(r)&&!wc(r).x_()&&r.Ia.size>0}function qo(r){return Ue(r).Ea.size===0}function Q2(r){r.Va=void 0}async function e6(r){r.Ra.set("Online")}async function t6(r){r.Ia.forEach(((e,t)=>{E_(r,e)}))}async function n6(r,e){Q2(r),S_(r)?(r.Ra.ha(e),T_(r)):r.Ra.set("Unknown")}async function r6(r,e,t){if(r.Ra.set("Online"),e instanceof m2&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){ye(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await pm(r,n)}else if(e instanceof Vf?r.Va.Ze(e):e instanceof f2?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const n=await H2(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(cn.EMPTY_BYTE_STRING,g.snapshotVersion)),Y2(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);E_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ye(Vo,"Failed to raise snapshot:",n),await pm(r,n)}}async function pm(r,e,t){if(!Na(e))throw e;r.Ea.add(1),await Ph(r),r.Ra.set("Offline"),t||(t=()=>H2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Vo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ng(r)}))}function W2(r,e){return e().catch((t=>pm(r,t,e)))}async function jh(r){const e=Ue(r),t=Aa(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_o;for(;i6(e);)try{const s=await UP(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,s6(e,s)}catch(s){await pm(e,s)}X2(e)&&J2(e)}function i6(r){return qo(r)&&r.Ta.length<10}function s6(r,e){r.Ta.push(e);const t=Aa(r);t.O_()&&t.X_&&t.ea(e.mutations)}function X2(r){return qo(r)&&!Aa(r).x_()&&r.Ta.length>0}function J2(r){Aa(r).start()}async function a6(r){Aa(r).ra()}async function o6(r){const e=Aa(r);for(const t of r.Ta)e.ea(t.mutations)}async function l6(r,e,t){const n=r.Ta.shift(),s=h_.from(n,e,t);await W2(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await jh(r)}async function c6(r,e){e&&Aa(r).X_&&await(async function(n,s){if((function(c){return B3(c)&&c!==de.ABORTED})(s.code)){const o=n.Ta.shift();Aa(n).B_(),await W2(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await jh(n)}})(r,e),X2(r)&&J2(r)}async function BE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),ye(Vo,"RemoteStore received new credentials");const n=qo(t);t.Ea.add(3),await Ph(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ng(t)}async function u6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await ng(t)):e||(t.Ea.add(2),await Ph(t),t.Ra.set("Unknown"))}function wc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new YP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:e6.bind(null,r),t_:t6.bind(null,r),r_:n6.bind(null,r),H_:r6.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),S_(r)?T_(r):r.Ra.set("Unknown")):(await r.ma.stop(),Q2(r))}))),r.ma}function Aa(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new QP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:a6.bind(null,r),r_:c6.bind(null,r),ta:o6.bind(null,r),na:l6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await jh(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Vo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class A_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new A_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(r,e){if(Gn("AsyncQueue",`${e}: ${r}`),Na(r))return new ve(de.UNAVAILABLE,`${e}: ${r}`);throw r}class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=Mu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Zl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class FE{constructor(){this.ga=new Lt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class mc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new mc(e,t,Zl.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class h6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d6{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=HE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function HE(){return new Ss((r=>ZA(r)),Gm)}async function R_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new h6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=I_(c,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&N_(t)}async function C_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function f6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&N_(t)}function m6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function N_(r){r.Ca.forEach((e=>{e.next()}))}var A0,qE;(qE=A0||(A0={})).Ma="default",qE.Cache="cache";class k_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new mc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==A0.Cache}}class Z2{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class g6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=e2(e),this.tu=new Zl(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new FE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Oh(this.query,y)?y:null,E=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?E!==k&&(n.track({type:3,doc:w}),M=!0):this.su(v,w)||(n.track({type:2,doc:w}),M=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),M=!0):v&&!w&&(n.track({type:1,doc:v}),M=!0,(d||f)&&(u=!0)),M&&(w?(c=c.add(w),o=k?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,E){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:M})}};return k(w)-k(E)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new mc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new eI(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Z2(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const D_="SyncEngine";class p6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class y6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ss((u=>ZA(u)),Gm),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(we.comparator),this.Au=new Map,this.Ru=new y_,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function v6(r,e,t=!0){const n=aI(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await tI(n,e,t,!0),s}async function b6(r,e){const t=aI(r);await tI(t,e,!0,!1)}async function tI(r,e,t,n){const s=await zP(r.localStore,Pr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await w6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&K2(r.remoteStore,s),u}async function w6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(k,M,V,H){let U=M.view.ru(V);U.Cs&&(U=await jE(k.localStore,M.query,!1).then((({documents:D})=>M.view.ru(D,U))));const F=H&&H.targetChanges.get(M.targetId),K=H&&H.targetMismatches.get(M.targetId)!=null,z=M.view.applyChanges(U,k.isPrimaryClient,F,K);return GE(k,M.targetId,z.au),z.snapshot})(r,y,v,w);const o=await jE(r.localStore,e,!0),c=new g6(e,o.Qs),u=c.ru(o.documents),d=Mh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);GE(r,t,f.au);const g=new p6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function x6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Gm(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await T0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&x_(n.remoteStore,s.targetId),I0(n,s.targetId)})).catch(Ho)):(I0(n,s.targetId),await T0(n.localStore,s.targetId,!0))}async function E6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),x_(t.remoteStore,n.targetId))}async function T6(r,e,t){const n=oI(r);try{const s=await(function(c,u){const d=Ue(c),f=bt.now(),g=u.reduce(((w,E)=>w.add(E.key)),Ge());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=yr(),k=Ge();return d.Ns.getEntries(w,g).next((M=>{E=M,E.forEach(((V,H)=>{H.isValidDocument()||(k=k.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,E))).next((M=>{y=M;const V=[];for(const H of u){const U=U3(H,y.get(H.key).overlayedDocument);U!=null&&V.push(new As(H.key,U,qA(U.value.mapValue),Ln.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((M=>{v=M;const V=M.applyToLocalDocumentSet(y,k);return d.documentOverlayCache.saveOverlays(w,M.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:n2(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Lt(Le)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await Vh(n,s.changes),await jh(n.remoteStore)}catch(s){const o=I_(s,"Failed to persist write");t.reject(o)}}async function nI(r,e){const t=Ue(r);try{const n=await VP(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Re(c.hu,14607):s.removedDocuments.size>0&&(Re(c.hu,42227),c.hu=!1))})),await Vh(t,n,e)}catch(n){await Ho(n)}}function $E(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&N_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function S6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Lt(we.comparator);c=c.insert(o,qt.newNoDocument(o,ke.min()));const u=Ge().add(o),d=new Xm(ke.min(),new Map,new Lt(Le),c,u);await nI(n,d),n.du=n.du.remove(o),n.Au.delete(e),O_(n)}else await T0(n.localStore,e,!1).then((()=>I0(n,e,t))).catch(Ho)}async function A6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await jP(t.localStore,e);iI(t,n,null),rI(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Vh(t,s)}catch(s){await Ho(s)}}async function I6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Re(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);iI(n,e,t),rI(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Vh(n,s)}catch(s){await Ho(s)}}function rI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function iI(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function I0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||sI(r,n)}))}function sI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(x_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),O_(r))}function GE(r,e,t){for(const n of t)n instanceof Z2?(r.Ru.addReference(n.key,e),R6(r,n)):n instanceof eI?(ye(D_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||sI(r,n.key)):Se(19791,{wu:n})}function R6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ye(D_,"New document in limbo: "+t),r.Eu.add(n),O_(r))}function O_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(ft.fromString(e)),n=r.fu.next();r.Au.set(n,new y6(t)),r.du=r.du.insert(t,n),K2(r.remoteStore,new fs(Pr(Dh(t.path)),n,"TargetPurposeLimboResolution",Mr.ce))}}async function Vh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=b_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>re.forEach(f,(v=>re.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>re.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Na(y))throw y;ye(w_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),E=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(E);g.Ms=g.Ms.insert(v,k)}}})(n.localStore,o))}async function C6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){ye(D_,"User change. New user:",e.toKey());const n=await F2(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Vh(t,n.Ls)}}function N6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ge().add(n.key);{let s=Ge();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function aI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S6.bind(null,e),e.Pu.H_=f6.bind(null,e.eventManager),e.Pu.yu=m6.bind(null,e.eventManager),e}function oI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I6.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return B2(this.persistence,new z2,e.initialUser,this.serializer)}Cu(e){return new __(eg.mi,this.serializer)}Du(e){return new q2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class k6 extends fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof gm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new P2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new __((n=>gm.mi(n,t)),this.serializer)}}class D6 extends fh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await oI(this.xu.syncEngine),await jh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return B2(this.persistence,new z2,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new P2(n,e.asyncQueue,t)}Mu(e,t){const n=new LM(t,this.persistence);return new VM(e.asyncQueue,n)}Cu(e){const t=DP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new v_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,KP(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new q2}}class ym{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>$E(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=C6.bind(null,this.syncEngine),await u6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d6})()}createDatastore(e){const t=tg(e.databaseInfo.databaseId),n=(function(o){return new GP(o)})(e.databaseInfo);return(function(o,c,u,d){return new XP(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new ZP(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>$E(this.syncEngine,t,0)),(function(){return UE.v()?new UE:new FP})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new _6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);ye(Vo,"RemoteStore shutting down."),n.Ea.add(5),await Ph(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ym.provider={build:()=>new ym};class M_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ia="FirestoreClient";class O6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=J0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ye(Ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ye(Ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=I_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Vy(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Ia,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await F2(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function KE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await M6(r);ye(Ia,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>BE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>BE(e.remoteStore,s))),r._onlineComponents=e}async function M6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Ia,"Using user provided OfflineComponentProvider");try{await Vy(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),await Vy(r,new fh)}}else ye(Ia,"Using default OfflineComponentProvider"),await Vy(r,new k6(void 0));return r._offlineComponents}async function lI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Ia,"Using user provided OnlineComponentProvider"),await KE(r,r._uninitializedComponentsProvider._online)):(ye(Ia,"Using default OnlineComponentProvider"),await KE(r,new ym))),r._onlineComponents}function P6(r){return lI(r).then((e=>e.syncEngine))}async function _m(r){const e=await lI(r),t=e.eventManager;return t.onListen=v6.bind(null,e.syncEngine),t.onUnlisten=x6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=b6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E6.bind(null,e.syncEngine),t}function j6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new M_({next:v=>{g.Nu(),c.enqueueAndForget((()=>C_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new k_(Dh(u.path),g,{includeMetadataChanges:!0,qa:!0});return R_(o,y)})(await _m(r),r.asyncQueue,e,t,n))),n.promise}function V6(r,e,t={}){const n=new Mi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new M_({next:v=>{g.Nu(),c.enqueueAndForget((()=>C_(o,y))),v.fromCache&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new k_(u,g,{includeMetadataChanges:!0,qa:!0});return R_(o,y)})(await _m(r),r.asyncQueue,e,t,n))),n.promise}function cI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const YE=new Map;const uI="firestore.googleapis.com",QE=!0;class WE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uI,this.ssl=QE}else this.host=e.host,this.ssl=e.ssl??QE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gP)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rg{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new xM;switch(n.type){case"firstParty":return new AM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=YE.get(t);n&&(ye("ComponentProvider","Removing Datastore"),YE.delete(t),n.terminate())})(this),Promise.resolve()}}function L6(r,e,t,n={}){r=Kn(r,rg);const s=zo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(L0(`https://${u}`),U0("Firestore",!0)),o.host!==uI&&o.host!==u&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=vS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new EM(new yA(f,g))}}class Is{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class $t{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ch(t,$t._jsonSchema))return new $t(e,n||null,new we(ft.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class ba extends Is{constructor(e,t,n){super(e,t,Dh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function jr(r,e,...t){if(r=Xt(r),vA("collection","path",e),r instanceof rg){const n=ft.fromString(e,...t);return zx(n),new ba(r,null,n)}{if(!(r instanceof $t||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return zx(n),new ba(r.firestore,null,n)}}function Vt(r,e,...t){if(r=Xt(r),arguments.length===1&&(e=J0.newId()),vA("doc","path",e),r instanceof rg){const n=ft.fromString(e,...t);return Ux(n),new $t(r,null,new we(n))}{if(!(r instanceof $t||r instanceof ba))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(ft.fromString(e,...t));return Ux(n),new $t(r.firestore,r instanceof ba?r.converter:null,new we(n))}}const XE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $2(this,"async_queue_retry"),this._c=()=>{const n=Uf();n&&ye(XE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;ye(XE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",ZE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=A_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function eT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Li extends rg{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new JE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function U6(r,e){const t=typeof r=="object"?r:F0(),n=typeof r=="string"?r:am,s=Mm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=pS("firestore");o&&L6(s,...o)}return s}function ig(r){if(r._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hI(r),r._firestoreClient}function hI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new f3(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,cI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new O6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function z6(r,e){Co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return B6(r,ym.provider,{build:n=>new D6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function B6(r,e,t){if((r=Kn(r,Li))._firestoreClient||r._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},hI(r)}class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(cn.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Or(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ch(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:ln("string",Or._jsonSchemaVersion),bytes:ln("string")};class sg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xc{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Ch(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:ln("string",Pi._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ch(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ji(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:ln("string",ji._jsonSchemaVersion),vectorValues:ln("object")};const F6=/^__.*__$/;class H6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}class dI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class ag{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fI(this.Ac)&&F6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||tg(e)}Cc(e,t,n,s=!1){return new ag({Ac:e,methodName:t,Dc:n,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(r){const e=r._freezeSettings(),t=tg(r._databaseId);return new q6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);L_("Data must be an object, but it was:",c,n);const u=pI(n,c);let d,f;if(o.merge)d=new sr(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=R0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_I(g,v)||g.push(v)}d=new sr(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new H6(new jn(u),d,f)}class lg extends xc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lg}}function gI(r,e,t){return new ag({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P_ extends xc{_toFieldTransform(e){return new Ym(e.path,new dc)}isEqual(e){return e instanceof P_}}class j_ extends xc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=gI(this,e,!0),n=this.vc.map((o=>$o(o,t))),s=new Do(n);return new Ym(e.path,s)}isEqual(e){return e instanceof j_&&ys(this.vc,e.vc)}}class V_ extends xc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=gI(this,e,!0),n=this.vc.map((o=>$o(o,t))),s=new Oo(n);return new Ym(e.path,s)}isEqual(e){return e instanceof V_&&ys(this.vc,e.vc)}}function $6(r,e,t,n){const s=r.Cc(1,e,t);L_("Data must be an object, but it was:",s,n);const o=[],c=jn.empty();ka(n,((d,f)=>{const g=U_(e,d,t);f=Xt(f);const y=s.yc(g);if(f instanceof lg)o.push(g);else{const v=$o(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new sr(o);return new dI(c,u,s.fieldTransforms)}function G6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[R0(e,n,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(R0(e,o[v])),d.push(o[v+1]);const f=[],g=jn.empty();for(let v=u.length-1;v>=0;--v)if(!_I(f,u[v])){const w=u[v];let E=d[v];E=Xt(E);const k=c.yc(w);if(E instanceof lg)f.push(w);else{const M=$o(E,k);M!=null&&(f.push(w),g.set(w,M))}}const y=new sr(f);return new dI(g,y,c.fieldTransforms)}function K6(r,e,t,n=!1){return $o(t,r.Cc(n?4:3,e))}function $o(r,e){if(yI(r=Xt(r)))return L_("Unsupported field value:",e,r),pI(r,e);if(r instanceof xc)return(function(n,s){if(!fI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=$o(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return O3(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=bt.fromDate(n);return{timestampValue:fc(s.serializer,o)}}if(n instanceof bt){const o=new bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fc(s.serializer,o)}}if(n instanceof Pi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Or)return{bytesValue:g2(s.serializer,n._byteString)};if(n instanceof $t){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:m_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ji)return(function(c,u){return{mapValue:{fields:{[a_]:{stringValue:o_},[lc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return c_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Lm(n)}`)})(r,e)}function pI(r,e){const t={};return PA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(r,((n,s)=>{const o=$o(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function yI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof bt||r instanceof Pi||r instanceof Or||r instanceof $t||r instanceof xc||r instanceof ji)}function L_(r,e,t){if(!yI(t)||!bA(t)){const n=Lm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function R0(r,e,t){if((e=Xt(e))instanceof sg)return e._internalPath;if(typeof e=="string")return U_(r,e);throw vm("Field path arguments must be of type string or ",r,!1,void 0,t)}const Y6=new RegExp("[~\\*/\\[\\]]");function U_(r,e,t){if(e.search(Y6)>=0)throw vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new sg(...e.split("."))._internalPath}catch{throw vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,u+r+d)}function _I(r,e){return r.some((t=>t.isEqual(e)))}class vI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Q6 extends vI{data(){return super.data()}}function cg(r,e){return typeof e=="string"?U_(r,e):e instanceof sg?e._internalPath:e._delegate._internalPath}function bI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z_{}class B_ extends z_{}function gc(r,e,...t){let n=[];e instanceof z_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof F_)).length,u=o.filter((d=>d instanceof ug)).length;if(c>1||c>0&&u>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class ug extends B_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ug(e,t,n)}_apply(e){const t=this._parse(e);return wI(e._query,t),new Is(e.firestore,e.converter,p0(e._query,t))}_parse(e){const t=og(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){rT(y,g);const E=[];for(const k of y)E.push(nT(d,o,k));v={arrayValue:{values:E}}}else v=nT(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||rT(y,g),v=K6(u,c,y,g==="in"||g==="not-in");return Ze.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Lh(r,e,t){const n=e,s=cg("where",r);return ug._create(s,n,t)}class F_ extends z_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new F_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)wI(c,d),c=p0(c,d)})(e._query,t),new Is(e.firestore,e.converter,p0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class H_ extends B_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new H_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(o,c)})(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new vc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function W6(r,e="asc"){const t=e,n=cg("orderBy",r);return H_._create(n,t)}class q_ extends B_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new q_(e,t,n)}_apply(e){return new Is(e.firestore,e.converter,cm(e._query,this._limit,this._limitType))}}function tT(r){return OM("limit",r),q_._create("limit",r,"F")}function nT(r,e,t){if(typeof(t=Xt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JA(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ch(r,new we(n))}if(t instanceof $t)return ch(r,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lm(t)}.`)}function rT(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class X6{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ka(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[lc].arrayValue?.values?.map((n=>jt(n.doubleValue)));return new ji(t)}convertGeoPoint(e){return new Pi(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=qm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);Re(S2(n),9688,{name:e});const s=new No(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function xI(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wo extends vI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(cg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",wo._jsonSchema={type:ln("string",wo._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class zf extends wo{data(e={}){return super.data(e)}}class xo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new zf(this._firestore,this._userDataWriter,n.key,n,new Vu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new zf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new zf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:J6(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=J0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function J6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}function Ra(r){r=Kn(r,$t);const e=Kn(r.firestore,Li);return j6(ig(e),r._key).then((t=>TI(e,r,t)))}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:ln("string",xo._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class $_ extends X6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function hg(r){r=Kn(r,Is);const e=Kn(r.firestore,Li),t=ig(e),n=new $_(e);return bI(r._query),V6(t,r._query).then((s=>new xo(e,n,r,s)))}function mh(r,e,t){r=Kn(r,$t);const n=Kn(r.firestore,Li),s=xI(r.converter,e,t);return fg(n,[mI(og(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Ln.none())])}function Ur(r,e,t,...n){r=Kn(r,$t);const s=Kn(r.firestore,Li),o=og(s);let c;return c=typeof(e=Xt(e))=="string"||e instanceof sg?G6(o,"updateDoc",r._key,e,t,n):$6(o,"updateDoc",r._key,e),fg(s,[c.toMutation(r._key,Ln.exists(!0))])}function EI(r){return fg(Kn(r.firestore,Li),[new Wm(r._key,Ln.none())])}function dg(r,e){const t=Kn(r.firestore,Li),n=Vt(r),s=xI(r.converter,e);return fg(t,[mI(og(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Ln.exists(!1))]).then((()=>n))}function ec(r,...e){r=Xt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||eT(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eT(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof $t)c=Kn(r.firestore,Li),u=Dh(r._key.path),o={next:d=>{e[n]&&e[n](TI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Kn(r,Is);c=Kn(d.firestore,Li),u=d._query;const f=new $_(c);o={next:g=>{e[n]&&e[n](new xo(c,f,d,g))},error:e[n+1],complete:e[n+2]},bI(r._query)}return(function(f,g,y,v){const w=new M_(v),E=new k_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>R_(await _m(f),E))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>C_(await _m(f),E)))}})(ig(c),u,s,o)}function fg(r,e){return(function(n,s){const o=new Mi;return n.asyncQueue.enqueueAndForget((async()=>T6(await P6(n),s,o))),o.promise})(ig(r),e)}function TI(r,e,t){const n=t.docs.get(e._key),s=new $_(r);return new wo(r,s,e._key,n,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}function Vr(){return new P_("serverTimestamp")}function G_(...r){return new j_("arrayUnion",r)}function SI(...r){return new V_("arrayRemove",r)}(function(e,t=!0){(function(s){_c=s})(Bo),So(new Ea("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new Li(new TM(n.getProvider("auth-internal")),new IM(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),ki(Px,jx,e),ki(Px,jx,"esm2020")})();const AI="firebasestorage.googleapis.com",Z6="storageBucket",ej=120*1e3,tj=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(Ly(e),`Firebase Storage: ${t} (${Ly(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ly(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function Ly(r){return"storage/"+r}function nj(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(Ui.UNKNOWN,r)}function rj(){return new Hi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ij(){return new Hi(Ui.CANCELED,"User canceled the upload/download.")}function sj(r){return new Hi(Ui.INVALID_URL,"Invalid URL '"+r+"'.")}function aj(r){return new Hi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function iT(r){return new Hi(Ui.INVALID_ARGUMENT,r)}function II(){return new Hi(Ui.APP_DELETED,"The Firebase app was deleted.")}function oj(r){return new Hi(Ui.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ti.makeFromUrl(e,t)}catch{return new ti(e,"")}if(n.path==="")return n;throw aj(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),E={bucket:1,path:3},k=t===AI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",V=new RegExp(`^https?://${k}/${s}/${M}`,"i"),U=[{regex:u,indices:d,postModify:o},{regex:w,indices:E,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<U.length;F++){const K=U[F],z=K.regex.exec(e);if(z){const D=z[K.indices.bucket];let S=z[K.indices.path];S||(S=""),n=new ti(D,S),K.postModify(n);break}}if(n==null)throw sj(e);return n}}class lj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cj(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...M){f||(f=!0,e.apply(null,M))}function y(M){s=setTimeout(()=>{s=null,r(w,d())},M)}function v(){o&&clearTimeout(o)}function w(M,...V){if(f){v();return}if(M){v(),g.call(null,M,...V);return}if(d()||c){v(),g.call(null,M,...V);return}n<64&&(n*=2);let U;u===1?(u=2,U=0):U=(n+Math.random())*1e3,y(U)}let E=!1;function k(M){E||(E=!0,v(),!f&&(s!==null?(M||(u=2),clearTimeout(s),y(0)):M||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function uj(r){r(!1)}function hj(r){return r!==void 0}function sT(r,e,t,n){if(n<e)throw iT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw iT(`Invalid value for '${r}'. Expected ${t} or less.`)}function dj(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var bm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(bm||(bm={}));function fj(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class mj{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new bf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===bm.NO_ERROR,d=o.getStatus();if(!u||fj(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===bm.ABORT;n(!1,new bf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new bf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());hj(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=nj();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?II():ij();c(d)}else{const d=rj();c(d)}};this.canceled_?t(!1,new bf(!1,null,!0)):this.backoffId_=cj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function gj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function pj(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function _j(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function vj(r,e,t,n,s,o,c=!0,u=!1){const d=dj(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return yj(g,e),gj(g,t),pj(g,o),_j(g,n),new mj(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function bj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function wj(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class wm{constructor(e,t){this._service=e,t instanceof ti?this._location=t:this._location=ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wm(e,t)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wj(this._location.path)}get storage(){return this._service}get parent(){const e=bj(this._location.path);if(e===null)return null;const t=new ti(this._location.bucket,e);return new wm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oj(e)}}function aT(r,e){const t=e?.[Z6];return t==null?null:ti.makeFromBucketSpec(t,r)}function xj(r,e,t,n={}){r.host=`${e}:${t}`;const s=zo(e);s&&(L0(`https://${r.host}/b`),U0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:vS(o,r.app.options.projectId))}class Ej{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=AI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ej,this._maxUploadRetryTime=tj,this._requests=new Set,s!=null?this._bucket=ti.makeFromBucketSpec(s,this._host):this._bucket=aT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=aT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wm(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new lj(II());{const c=vj(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const oT="@firebase/storage",lT="0.14.0";const RI="storage";function Tj(r=F0(),e){r=Xt(r);const n=Mm(r,RI).getImmediate({identifier:e}),s=pS("storage");return s&&Sj(n,...s),n}function Sj(r,e,t,n={}){xj(r,e,t,n)}function Aj(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new Ej(t,n,s,e,Bo)}function Ij(){So(new Ea(RI,Aj,"PUBLIC").setMultipleInstances(!0)),ki(oT,lT,""),ki(oT,lT,"esm2020")}Ij();const Rj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},K_=AS(Rj),ir=bM(K_),Je=U6(K_);Tj(K_);new us;try{z6(Je).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const CI=$.createContext();function si(){return $.useContext(CI)}function NI({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>c5(ir,async f=>{if(f){t(f);try{const g=Vt(Je,"users",f.uid),y=await Ra(g);if(y.exists())t(v=>({...v,...y.data()}));else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await mh(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await ir.signOut(),t(null)},refreshUser:async()=>{if(ir.currentUser){await ir.currentUser.reload();const d=ir.currentUser;let f={};try{const g=await Ra(Vt(Je,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(CI.Provider,{value:u,children:!n&&r})}const Cj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nj=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),cT=r=>{const e=Nj(r);return e.charAt(0).toUpperCase()+e.slice(1)},kI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),kj=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Dj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Oj=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...Dj,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:kI("lucide",s),...!o&&!kj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Me=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(Oj,{ref:o,iconNode:e,className:kI(`lucide-${Cj(cT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=cT(r),t};const Mj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xm=Me("activity",Mj);const Pj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jj=Me("arrow-left",Pj);const Vj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DI=Me("arrow-right",Vj);const Lj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Uj=Me("brain",Lj);const zj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Bj=Me("calendar-check",zj);const Fj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Eo=Me("camera",Fj);const Hj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Y_=Me("chevron-down",Hj);const qj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$j=Me("chevron-right",qj);const Gj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],OI=Me("circle-alert",Gj);const Kj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mg=Me("circle-check-big",Kj);const Yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qj=Me("circle-check",Yj);const Wj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MI=Me("clock",Wj);const Xj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jj=Me("file-text",Xj);const Zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],eV=Me("globe",Zj);const tV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],nV=Me("grid-3x3",tV);const rV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],iV=Me("heart",rV);const sV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],PI=Me("house",sV);const aV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jI=Me("image",aV);const oV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VI=Me("info",oV);const lV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],cV=Me("leaf",lV);const uV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wa=Me("loader-circle",uV);const hV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],uT=Me("log-in",hV);const dV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LI=Me("log-out",dV);const fV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mV=Me("mail",fV);const gV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gh=Me("message-circle",gV);const pV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],yV=Me("mic",pV);const _V=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],UI=Me("moon",_V);const vV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],hT=Me("paperclip",vV);const bV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],wV=Me("pause",bV);const xV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zI=Me("pen",xV);const EV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],TV=Me("play",EV);const SV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],AV=Me("plus",SV);const IV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BI=Me("refresh-cw",IV);const RV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FI=Me("save",RV);const CV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],dT=Me("scan-line",CV);const NV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],HI=Me("search",NV);const kV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ph=Me("send",kV);const DV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],C0=Me("share-2",DV);const OV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MV=Me("shield-check",OV);const PV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jV=Me("sparkles",PV);const VV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zi=Me("sprout",VV);const LV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],fT=Me("stethoscope",LV);const UV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],qI=Me("sun",UV);const zV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Em=Me("trash-2",zV);const BV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],N0=Me("triangle-alert",BV);const FV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],HV=Me("user-plus",FV);const qV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tm=Me("user",qV);const $V=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],GV=Me("users",$V);const KV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],YV=Me("wand-sparkles",KV);const QV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xs=Me("x",QV);const WV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],XV=Me("zap",WV),$I=$.createContext(null),Go=()=>$.useContext($I),JV=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs($I.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(mg,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(OI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(VI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(xs,{className:"w-4 h-4"})})]},o.id))})]})};class GI extends aN.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(N0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(BI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(PI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function ZV(){const{currentUser:r,logout:e}=si(),{t,i18n:n}=zn(),s=vr(),o=Es(),{addToast:c}=Go(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(E=>E==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const E=async()=>{try{await Ur(Vt(Je,"users",r.uid),{lastSeen:Vr()})}catch(M){console.error("Presence update failed",M)}};E();const k=setInterval(E,60*1e3);return()=>clearInterval(k)},[r]),$.useEffect(()=>{if(!r)return;const E=gc(jr(Je,"chats"),Lh("participants","array-contains",r.uid)),k=ec(E,M=>{M.docChanges().forEach(V=>{if(V.type==="modified"){const H=V.doc.data(),U=H.updatedAt?.seconds*1e3;if(Date.now()-U>5e3)return;const F=H.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&F){const z=H.participantData?.[F]||{name:"Someone"};g.play().catch(D=>console.log("Audio play failed",D)),c(`New message from ${z.name}: ${H.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>k()},[r,s.pathname,c,g]);const w=[{path:"/",icon:PI,label:t("app_name"),public:!0},{path:"/community",icon:GV,label:t("community"),public:!0},{path:"/analyses",icon:MI,label:t("analyses"),public:!1},{path:"/messages",icon:gh,label:t("messages"),public:!1},{path:"/profile",icon:Tm,label:t("profile"),public:!1},{path:"/about",icon:VI,label:t("about"),public:!0}].filter(E=>E.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(E=>{const k=E.icon,M=s.pathname===E.path;return b.jsxs(Zr,{to:E.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${M?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(k,{className:"w-5 h-5"}),b.jsx("span",{children:E.label})]},E.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(qI,{className:"w-5 h-5"}):b.jsx(UI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(LI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(Zr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(uT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(Zr,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zi,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(GI,{children:b.jsx(ak,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(E=>{const k=E.icon,M=s.pathname===E.path;return b.jsxs(Zr,{to:E.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${M?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(k,{className:`w-6 h-6 ${M?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:E.label})]},E.path)}),!r&&b.jsxs(Zr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(uT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function eL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=Es(),w=vr(),{t:E}=zn(),{currentUser:k}=si(),{addToast:M}=Go();if(k?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const U=await Tx(ir,r,t);await ZS(U.user),await ir.signOut(),M(E("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(U){console.error("Resend error:",U),U.code==="auth/too-many-requests"?M(E("too_many_requests")||"Too many attempts. Please wait.","error"):M(E("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},H=async U=>{U.preventDefault(),o(""),f(!1),u(!0);try{if(!(await Tx(ir,r,t)).user.emailVerified){await ir.signOut(),f(!0);return}}catch(F){console.error(F);let K=E("login_failed")||"Failed to login.";F.code==="auth/user-not-found"||F.code==="auth/wrong-password"||F.code==="auth/invalid-credential"?K=E("invalid_credentials")||"Invalid email or password.":F.code==="auth/too-many-requests"?K=E("too_many_requests")||"Too many attempts. Try again later.":F.code==="auth/user-disabled"?K="Account disabled. Contact support.":F.code==="auth/network-request-failed"&&(K="Network error. Check your connection."),o(K)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:E("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:E("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(zi,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:E("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:E("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":E("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:H,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":E("login"),!c&&b.jsx(DI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(Zr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:E("register")})]})]})})})}function tL({user:r,onClose:e,onVerified:t}){const{t:n}=zn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(mV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(BI,{className:"w-5 h-5 animate-spin"}):b.jsx(mg,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function nL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),E=Es(),k=vr(),{t:M}=zn(),V=async U=>{U.preventDefault(),u(""),f(!0);try{const F=await s5(ir,r,t);await n0(F.user,{displayName:s}),await mh(Vt(Je,"users",F.user.uid),{uid:F.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:Vr(),lastSeen:Vr(),bio:""}),await ZS(F.user),w(F.user),y(!0),f(!1)}catch(F){u(F.message),console.error(F),f(!1)}},H=async()=>{ir.currentUser&&await ir.currentUser.reload(),y(!1),k.state?.returnUrl&&k.state?.pendingResult?E(k.state.returnUrl,{replace:!0,state:{restoredResult:k.state.pendingResult,restoredImages:k.state.pendingImages,restoredPlantType:k.state.pendingPlantType}}):E("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(tL,{user:v,onClose:()=>y(!1),onVerified:H}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zi,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:M("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:M("create_account_desc")||M("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:U=>o(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:U=>e(U.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:M("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:U=>n(U.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?M("creating_account")||"Creating Account...":M("register"),!d&&b.jsx(HV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[M("already_have_account")||"Already have an account?"," "," ",b.jsx(Zr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:M("login")})]})]})]})})}var mT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(mT||(mT={}));var gT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(gT||(gT={}));var pT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(pT||(pT={}));const yT=["user","model","function","system"];var _T;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_T||(_T={}));var vT;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(vT||(vT={}));var bT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(bT||(bT={}));var wT;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(wT||(wT={}));var Wu;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Wu||(Wu={}));var xT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(xT||(xT={}));var ET;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(ET||(ET={}));var TT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(TT||(TT={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Fl extends Vn{constructor(e,t){super(e),this.response=t}}class KI extends Vn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class xa extends Vn{}class YI extends Vn{}const rL="https://generativelanguage.googleapis.com",iL="v1beta",sL="0.24.1",aL="genai-js";var Lo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Lo||(Lo={}));class oL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||iL;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||rL}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function lL(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${aL}/${sL}`),e.join(" ")}async function cL(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",lL(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new xa(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new xa(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new xa(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function uL(r,e,t,n,s,o){const c=new oL(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},mL(o)),{method:"POST",headers:await cL(c),body:s})}}async function Uh(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await uL(r,e,t,n,s,o);return hL(u,d,c)}async function hL(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){dL(s,r)}return n.ok||await fL(n,r),n}function dL(r,e){let t=r;throw t.name==="AbortError"?(t=new YI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof KI||r instanceof xa||(t=new Vn(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function fL(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new KI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function mL(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Q_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Bf(r.candidates[0]))throw new Fl(`${ca(r)}`,r);return gL(r)}else if(r.promptFeedback)throw new Fl(`Text not available. ${ca(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Bf(r.candidates[0]))throw new Fl(`${ca(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ST(r)[0]}else if(r.promptFeedback)throw new Fl(`Function call not available. ${ca(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Bf(r.candidates[0]))throw new Fl(`${ca(r)}`,r);return ST(r)}else if(r.promptFeedback)throw new Fl(`Function call not available. ${ca(r)}`,r)},r}function gL(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function ST(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const pL=[Wu.RECITATION,Wu.SAFETY,Wu.LANGUAGE];function Bf(r){return!!r.finishReason&&pL.includes(r.finishReason)}function ca(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];Bf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function yh(r){return this instanceof yh?(this.v=r,this):new yh(r)}function yL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(E,k){o.push([v,w,E,k])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(E){y(o[0][3],E)}}function d(v){v.value instanceof yh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const AT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function _L(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=wL(e),[n,s]=t.tee();return{stream:bL(n),response:vL(s)}}async function vL(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return Q_(xL(e));e.push(s)}}function bL(r){return yL(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield yh(t.read());if(s)break;yield yield yh(Q_(n))}})}function wL(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Vn("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(AT),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Vn(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(AT)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new YI("Request aborted when reading from the stream"):u=new Vn("Error reading from the stream"),u})}}})}function xL(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function QI(r,e,t,n){const s=await Uh(e,Lo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return _L(s)}async function WI(r,e,t,n){const o=await(await Uh(e,Lo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:Q_(o)}}function XI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function _h(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return EL(e)}function EL(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Vn("No content is provided for sending chat message.");return n?e:t}function TL(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new xa("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=_h(r);n.contents=[o]}return{generateContentRequest:n}}function IT(r){let e;return r.contents?e=r:e={contents:[_h(r)]},r.systemInstruction&&(e.systemInstruction=XI(r.systemInstruction)),e}function SL(r){return typeof r=="string"||Array.isArray(r)?{content:_h(r)}:r}const RT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],AL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function IL(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Vn(`First content should be with role 'user', got ${n}`);if(!yT.includes(n))throw new Vn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(yT)}`);if(!Array.isArray(s))throw new Vn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of RT)d in u&&(o[d]+=1);const c=AL[n];for(const u of RT)if(!c.includes(u)&&o[u]>0)throw new Vn(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function CT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const NT="SILENT_ERROR";class RL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(IL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=_h(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>WI(this._apiKey,this.model,g,y)).then(w=>{var E;if(CT(w.response)){this._history.push(f);const k=Object.assign({parts:[],role:"model"},(E=w.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(k)}else{const k=ca(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=_h(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=QI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(NT)}).then(w=>w.response).then(w=>{if(CT(w)){this._history.push(f);const E=Object.assign({},w.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=ca(w);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(w=>{w.message!==NT&&console.error(w)}),v}}async function CL(r,e,t,n){return(await Uh(e,Lo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function NL(r,e,t,n){return(await Uh(e,Lo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function kL(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Uh(e,Lo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class kT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=XI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=IT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return WI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=IT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return QI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new RL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=TL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return CL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=SL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return NL(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return kL(this.apiKey,this.model,e,n)}}class DL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new kT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new xa("Cached content must contain a `name` field.");if(!e.model)throw new xa("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new xa(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new kT(this.apiKey,o,n)}}async function JI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await OL(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function OL(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new DL(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const H=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:H,mimeType:"image/jpeg"}})});const M=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(M)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const ZI="analyses";async function eR(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await dg(jr(Je,ZI),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:Vr(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function tR(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=dg(jr(Je,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:Vr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function nR(r,e,t,n=null){try{return await dg(jr(Je,ZI,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:Vr()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function rR(r){try{const e=Vt(Je,"posts",r),t=await Ra(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=Vt(Je,"analyses",n.relatedAnalysisId);await Ur(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await EI(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function iR(r,e){try{const t=Vt(Je,"posts",r),n=await Ra(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await Ur(t,{likes:SI(e)}):await Ur(t,{likes:G_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function sR(r,e,t,n){try{const s=Vt(Je,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await Ur(s,{comments:G_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function aR(r,e){try{const t=Vt(Je,"posts",r);return await Ur(t,{...e,updatedAt:Vr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function k0(r,e,t){try{const n=gc(jr(Je,"posts"),Lh("userId","==",r)),o=(await hg(n)).docs.map(c=>Ur(c.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(n){return console.error("Error syncing user profile to posts:",n),!1}}async function ML(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=Vt(Je,"chats",o);return(await Ra(c)).exists()?await Ur(c,{[`participantData.${r}`]:n}):await mh(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:Vr(),updatedAt:Vr(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function oR(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const PL=Object.freeze(Object.defineProperty({__proto__:null,addComment:sR,addFeedbackUpdate:nR,analyzePlantProgress:oR,createPost:tR,deletePost:rR,saveAnalysis:eR,startChat:ML,toggleLike:iR,updatePost:aR,updateUserPostsName:k0},Symbol.toStringTag,{value:"Module"}));function jL({result:r,onReset:e}){const{t}=zn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(N0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(xm,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(zi,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(N0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(mg,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function VL({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=zn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,E=s.current;E.width=w.videoWidth,E.height=w.videoHeight,E.getContext("2d").drawImage(w,0,0,E.width,E.height);const M=E.toDataURL("image/jpeg",.9);t(M),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(xs,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(OI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function LL(){const{t:r,i18n:e}=zn(),{currentUser:t}=si(),n=Es(),s=vr(),{addToast:o}=Go(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,E]=$.useState(!1),[k,M]=$.useState(null),[V,H]=$.useState(!1),[U,F]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(M(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const K=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},D=()=>{c.current&&(c.current.value="",c.current.click())},S=Z=>{Z&&I(Z),F(!1)},T=async Z=>{const q=Z.target.files?.[0];if(!q)return;const Q=new FileReader;Q.onloadend=()=>{const ie=Q.result;I(ie)},Q.readAsDataURL(q)},I=async Z=>{u==="capture_main"?(v(q=>({...q,main:Z})),await N(Z)):u==="capture_macro"&&(v(q=>({...q,macro:Z})),await N([y.main,Z]))},N=async(Z,q)=>{E(!0),d("analyzing"),H(!1);try{const Q=await JI(Z,e.language,f);if(Q.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Q.status==="error")throw new Error(Q.error);M(Q),d("result")}}catch(Q){console.error(Q);let ie=Q.message||r("error_diagnosis_failed")||"Diagnosis failed.";ie.includes("NOT_PLANT")?ie=r("error_not_plant"):(ie.includes("503")||ie.includes("overloaded"))&&(ie=r("error_server_busy")),o(ie,"error"),d("capture_main")}finally{E(!1)}},j=async()=>{if(t&&!V)try{const Z=await eR(t.uid,f,y,k);H(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:Z}})},500)}catch(Z){console.error("Manual save failed:",Z),o((r("save_fail")||"Failed to save analysis:")+" "+Z.message,"error")}},C=()=>{n("/login",{state:{pendingResult:k,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),M(null),H(!1),d("input_type"),c.current&&(c.current.value="")},J=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(jV,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(Eo,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:XV,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:Uj,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:MV,color:"from-green-400 to-emerald-500"}].map((Z,q)=>{const Q=Z.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${Z.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Q,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:Z.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:Z.desc})]},q)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(xm,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(dT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:Z=>{Z.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(zi,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(zi,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:Z=>g(Z.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:K,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(DI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),O=Z=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:Z?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>F(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(Eo,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:D,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(jI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),ee=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(wa,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:j,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(mg,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(FI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:k?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(jL,{result:k,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(dT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:C,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:T,className:"hidden"}),b.jsx(VL,{isOpen:U,onClose:()=>F(!1),onCapture:S}),u==="landing"?J():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&O(!1),u==="capture_macro"&&O(!0),u==="analyzing"&&ee(),u==="result"&&W()]})]})}const wf=43200,DT=1440,OT=Symbol.for("constructDateFrom");function W_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&OT in r?r[OT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Ca(r,e){return W_(r,r)}let UL={};function zL(){return UL}function MT(r){const e=Ca(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function X_(r,...e){const t=W_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function Ff(r,e){const t=+Ca(r)-+Ca(e);return t<0?-1:t>0?1:t}function BL(r){return W_(r,Date.now())}function FL(r,e,t){const[n,s]=X_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function HL(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function qL(r,e){return+Ca(r)-+Ca(e)}function $L(r,e){const t=Ca(r);return t.setHours(23,59,59,999),t}function GL(r,e){const t=Ca(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function KL(r,e){const t=Ca(r);return+$L(t)==+GL(t)}function YL(r,e,t){const[n,s,o]=X_(t?.in,r,r,e),c=Ff(s,o),u=Math.abs(FL(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=Ff(s,o)===-c;KL(n)&&u===1&&Ff(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function QL(r,e,t){const n=qL(r,e)/1e3;return HL(t?.roundingMethod)(n)}const WL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},XL=(r,e,t)=>{let n;const s=WL[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function tc(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const JL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tU={date:tc({formats:JL,defaultWidth:"full"}),time:tc({formats:ZL,defaultWidth:"full"}),dateTime:tc({formats:eU,defaultWidth:"full"})},nU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rU=(r,e,t,n)=>nU[r];function Ai(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const iU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},hU={ordinalNumber:uU,era:Ai({values:iU,defaultWidth:"wide"}),quarter:Ai({values:sU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ai({values:aU,defaultWidth:"wide"}),day:Ai({values:oU,defaultWidth:"wide"}),dayPeriod:Ai({values:lU,defaultWidth:"wide",formattingValues:cU,defaultFormattingWidth:"wide"})};function Ii(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?fU(u,y=>y.test(c)):dU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function dU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function fU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function lR(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const mU=/^(\d+)(th|st|nd|rd)?/i,gU=/\d+/i,pU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yU={any:[/^b/i,/^(a|c)/i]},_U={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vU={any:[/1/i,/2/i,/3/i,/4/i]},bU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},EU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},TU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},SU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AU={ordinalNumber:lR({matchPattern:mU,parsePattern:gU,valueCallback:r=>parseInt(r,10)}),era:Ii({matchPatterns:pU,defaultMatchWidth:"wide",parsePatterns:yU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:_U,defaultMatchWidth:"wide",parsePatterns:vU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:wU,defaultParseWidth:"any"}),day:Ii({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:EU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:TU,defaultMatchWidth:"any",parsePatterns:SU,defaultParseWidth:"any"})},gg={code:"en-US",formatDistance:XL,formatLong:tU,formatRelative:rU,localize:hU,match:AU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IU(r,e,t){const n=zL(),s=t?.locale??n.locale??gg,o=2520,c=Ff(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=X_(t?.in,...c>0?[e,r]:[r,e]),g=QL(f,d),y=(MT(f)-MT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<DT){const E=Math.round(v/60);return s.formatDistance("aboutXHours",E,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<wf){const E=Math.round(v/DT);return s.formatDistance("xDays",E,u)}else if(v<wf*2)return w=Math.round(v/wf),s.formatDistance("aboutXMonths",w,u)}if(w=YL(f,d),w<12){const E=Math.round(v/wf);return s.formatDistance("xMonths",E,u)}else{const E=w%12,k=Math.trunc(w/12);return E<3?s.formatDistance("aboutXYears",k,u):E<9?s.formatDistance("overXYears",k,u):s.formatDistance("almostXYears",k+1,u)}}function J_(r,e){return IU(r,BL(r),e)}const RU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},CU=(r,e,t)=>{let n;const s=RU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},NU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},kU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},DU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OU={date:tc({formats:NU,defaultWidth:"full"}),time:tc({formats:kU,defaultWidth:"full"}),dateTime:tc({formats:DU,defaultWidth:"full"})},MU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},PU=(r,e,t,n)=>MU[r],jU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},VU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},LU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},UU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},zU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},BU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},FU=(r,e)=>Number(r)+".",HU={ordinalNumber:FU,era:Ai({values:jU,defaultWidth:"wide"}),quarter:Ai({values:VU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ai({values:LU,defaultWidth:"wide"}),day:Ai({values:UU,defaultWidth:"wide"}),dayPeriod:Ai({values:zU,defaultWidth:"wide",formattingValues:BU,defaultFormattingWidth:"wide"})},qU=/^(\d+)(\.)?/i,$U=/\d+/i,GU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},KU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},YU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},QU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},WU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},XU={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},JU={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},ZU={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},e9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},t9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},n9={ordinalNumber:lR({matchPattern:qU,parsePattern:$U,valueCallback:function(r){return parseInt(r,10)}}),era:Ii({matchPatterns:GU,defaultMatchWidth:"wide",parsePatterns:KU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:YU,defaultMatchWidth:"wide",parsePatterns:QU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ii({matchPatterns:WU,defaultMatchWidth:"wide",parsePatterns:XU,defaultParseWidth:"any"}),day:Ii({matchPatterns:JU,defaultMatchWidth:"wide",parsePatterns:ZU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:e9,defaultMatchWidth:"any",parsePatterns:t9,defaultParseWidth:"any"})},Z_={code:"tr",formatDistance:CU,formatLong:OU,formatRelative:PU,localize:HU,match:n9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function cR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=zn(),{currentUser:o}=si(),c=s.language==="tr"?Z_:gg,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,E]=$.useState(!1),[k,M]=$.useState(r?.content||""),V=async()=>{try{await aR(r.id,{content:k}),E(!1)}catch{alert("Failed to update post")}};if(!r)return null;const H=o?.uid===r.userId,U=r.likes&&o&&r.likes.includes(o.uid),F=r.likes?r.likes.length:0,K=r.comments?r.comments.length:0,[z,D]=$.useState("");$.useEffect(()=>{const C=()=>{if(!r.createdAt?.seconds){D(n("just_now")||"Just now");return}const J=new Date(r.createdAt.seconds*1e3);(new Date-J)/(1e3*60*60)>24?D(J.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):D(J_(J,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const G=setInterval(C,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const S=async()=>{if(!(!o||y)){v(!0);try{await iR(r.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},T=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await rR(r.id)}catch{alert("Failed to delete post")}},I=async C=>{if(C.preventDefault(),!(!u.trim()||!o))try{await sR(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},N=async()=>{const C={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(C)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},j=C=>!C||C==="Unknown"?null:C.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${C.toLowerCase()}`)||n(C)||C;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[H&&b.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(Em,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:H&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:z})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:j(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(gh,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 transition-colors ${U?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(iV,{className:`w-5 h-5 ${U?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:F||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(gh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:K||n("comment")})]}),H&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>E(!0),children:[b.jsx(zI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:N,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(C0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:k,onChange:C=>M(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((C,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(ph,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const Hf=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function r9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function uR(r,e){return new Promise((function(t,n){let s;return i9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const i9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Sm={},s9={get exports(){return Sm},set exports(r){Sm=r}};(function(r){var e,t,n={};s9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),E=u(g,d+=4);d+=4,d=E;for(var k=0;k<v;k++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var M=u(g,d+=4),V=c(g,d+=4),H=c(g,d+2),U=c(g,d+4);d+=6;var F=u(g,d+=8);d+=4,d+=V+H+U,n._readLocal(g,F,f,w,M,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),E=g(s,o+=2);o+=2;var k=n.bin.readUTF8(s,o,w);if(o+=w,o+=E,f)c[k]={size:d,csize:u};else{var M=new Uint8Array(s.buffer,o);if(v==0)c[k]=new Uint8Array(M.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(M,V),c[k]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var E=new Uint8Array(c),k=0,M=[];for(var g in f){var V=f[g];M.push(k),k=n._writeHeader(E,k,g,V,0)}var H=0,U=k;for(var g in f)V=f[g],M.push(k),k=n._writeHeader(E,k,g,V,1,M[H++]);var F=k-U;return u(E,k,101010256),k+=4,d(E,k+=4,H),d(E,k+=2,H),u(E,k+=2,F),u(E,k+=4,U),k+=4,k+=2,E.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,E=0,k=s.length;if(u==0){for(;v<k;)y(o,w,v+(N=Math.min(65535,k-v))==k?1:0),w=n.F._copyExact(s,v,N,o,w+8),v+=N;return w>>>3}var M=f.lits,V=f.strt,H=f.prev,U=0,F=0,K=0,z=0,D=0,S=0;for(k>2&&(V[S=n.F._hash(s,0)]=0),v=0;v<k;v++){if(D=S,v+1<k-2){S=n.F._hash(s,v+1);var T=v+1&32767;H[T]=V[S],V[S]=T}if(E<=v){(U>14e3||F>26697)&&k-v>100&&(E<v&&(M[U]=v-E,U+=2,E=v),w=n.F._writeBlock(v==k-1||E==k?1:0,M,U,z,s,K,v-K,o,w),U=F=z=0,K=v);var I=0;v<k-2&&(I=n.F._bestMatch(s,v,H,D,Math.min(d[2],k-v),d[3]));var N=I>>>16,j=65535&I;if(I!=0){j=65535&I;var C=g(N=I>>>16,f.of0);f.lhst[257+C]++;var G=g(j,f.df0);f.dhst[G]++,z+=f.exb[C]+f.dxb[G],M[U]=N<<23|v-E,M[U+1]=j<<16|C<<8|G,U+=2,E=v+N}else f.lhst[s[v]]++;F++}}for(K==v&&s.length!=0||(E<v&&(M[U]=v-E,U+=2,E=v),w=n.F._writeBlock(1,M,U,z,s,K,v-K,o,w),U=0,F=0,U=F=z=0,K=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,E=0,k=Math.min(32767,o);v<=k&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var M=n.F._howLong(s,o,v);if(M>w){if(E=v,(w=M)>=d)break;v+2<M&&(M=v+2);for(var V=0,H=0;H<M-2;H++){var U=o-v+H+32768&32767,F=U-c[U]+32768&32767;F>V&&(V=F,y=U)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|E},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,E,k,M,V,H,U,F,K,z=n.F.U,D=n.F._putsF,S=n.F._putsE;z.lhst[256]++,E=(w=n.F.getTrees())[0],k=w[1],M=w[2],V=w[3],H=w[4],U=w[5],F=w[6],K=w[7];var T=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),I=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),N=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);N+=14+3*U+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var j=0;j<286;j++)z.lhst[j]=0;for(j=0;j<30;j++)z.dhst[j]=0;for(j=0;j<19;j++)z.ihst[j]=0;var C=T<I&&T<N?0:I<N?1:2;if(D(y,v,s),D(y,v+1,C),v+=3,C==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,J;if(C==1&&(G=z.fltree,J=z.fdtree),C==2){n.F.makeCodes(z.ltree,E),n.F.revCodes(z.ltree,E),n.F.makeCodes(z.dtree,k),n.F.revCodes(z.dtree,k),n.F.makeCodes(z.itree,M),n.F.revCodes(z.itree,M),G=z.ltree,J=z.dtree,S(y,v,V-257),S(y,v+=5,H-1),S(y,v+=5,U-4),v+=4;for(var P=0;P<U;P++)S(y,v+3*P,z.itree[1+(z.ordr[P]<<1)]);v+=3*U,v=n.F._codeTiny(F,z.itree,y,v),v=n.F._codeTiny(K,z.itree,y,v)}for(var O=f,ee=0;ee<c;ee+=2){for(var W=o[ee],Z=W>>>23,q=O+(8388607&W);O<q;)v=n.F._writeLit(d[O++],G,y,v);if(Z!=0){var Q=o[ee+1],ie=Q>>16,se=Q>>8&255,ne=255&Q;S(y,v=n.F._writeLit(257+se,G,y,v),Z-z.of0[se]),v+=z.exb[se],D(y,v=n.F._writeLit(ne,J,y,v),ie-z.df0[ne]),v+=z.dxb[ne],O+=Z}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(F,K){return F.f-K.f}));var E=u[0],k=u[1],M=0,V=1,H=2;for(u[0]={lit:-1,f:E.f+k.f,l:E,r:k,d:0};V!=y-1;)E=M!=V&&(H==y||u[M].f<u[H].f)?u[M++]:u[H++],k=M!=V&&(H==y||u[M].f<u[H].f)?u[M++]:u[H++],u[V++]={lit:-1,f:E.f+k.f,l:E,r:k};var U=n.F.setDepth(u[V-1],0);for(U>c&&(n.F.restrictDepth(v,c,U),U=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return U},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,E=u.U,k=o==null;k&&(o=new c(s.length>>>2<<3));for(var M,V,H=0,U=0,F=0,K=0,z=0,D=0,S=0,T=0,I=0;H==0;)if(H=d(s,I,1),U=d(s,I+1,2),I+=3,U!=0){if(k&&(o=n.F._check(o,T+(1<<17))),U==1&&(M=E.flmap,V=E.fdmap,D=511,S=31),U==2){F=f(s,I,5)+257,K=f(s,I+5,5)+1,z=f(s,I+10,4)+4,I+=14;for(var N=0;N<38;N+=2)E.itree[N]=0,E.itree[N+1]=0;var j=1;for(N=0;N<z;N++){var C=f(s,I+3*N,3);E.itree[1+(E.ordr[N]<<1)]=C,C>j&&(j=C)}I+=3*z,y(E.itree,j),v(E.itree,j,E.imap),M=E.lmap,V=E.dmap,I=g(E.imap,(1<<j)-1,F+K,s,I,E.ttree);var G=u._copyOut(E.ttree,0,F,E.ltree);D=(1<<G)-1;var J=u._copyOut(E.ttree,F,K,E.dtree);S=(1<<J)-1,y(E.ltree,G),v(E.ltree,G,M),y(E.dtree,J),v(E.dtree,J,V)}for(;;){var P=M[w(s,I)&D];I+=15&P;var O=P>>>4;if(!(O>>>8))o[T++]=O;else{if(O==256)break;var ee=T+O-254;if(O>264){var W=E.ldef[O-257];ee=T+(W>>>3)+f(s,I,7&W),I+=7&W}var Z=V[w(s,I)&S];I+=15&Z;var q=Z>>>4,Q=E.ddef[q],ie=(Q>>>4)+d(s,I,15&Q);for(I+=15&Q,k&&(o=n.F._check(o,T+(1<<17)));T<ee;)o[T]=o[T++-ie],o[T]=o[T++-ie],o[T]=o[T++-ie],o[T]=o[T++-ie];T=ee}}}else{(7&I)!=0&&(I+=8-(7&I));var se=4+(I>>>3),ne=s[se-4]|s[se-3]<<8;k&&(o=n.F._check(o,T+ne)),o.set(new c(s.buffer,s.byteOffset+se,ne),T),I=se+ne<<3,T+=ne}return o.length==T?o:o.slice(0,T)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var E=w>>>4;if(E<=15)f[v]=E,v++;else{var k=0,M=0;E==16?(M=3+g(u,d,2),d+=2,k=f[v-1]):E==17?(M=3+g(u,d,3),d+=3):E==18&&(M=11+g(u,d,7),d+=7);for(var V=v+M;v<V;)f[v]=k,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var E=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,E[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=E[f],E[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,E=s[f]<<w,k=E+(1<<w);E!=k;)c[d[E]>>>15-o]=v,E++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var a9=r9({__proto__:null,default:Sm},[Sm]);const Xr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let E=0;E<v;E++)w+=String.fromCharCode(g[y+E]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let E=0;E<v;E++)w.push(g[y+E]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,E="";for(let k=0;k<v;k++)E+=`%${r.pad(g[y+k].toString(16))}`;try{w=decodeURIComponent(E)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const E=y*v,k=o(w),M=Math.ceil(y*k/8),V=new Uint8Array(4*E),H=new Uint32Array(V.buffer),{ctype:U}=w,{depth:F}=w,K=r.readUshort;if(U==6){const W=E<<2;if(F==8)for(var z=0;z<W;z+=4)V[z]=g[z],V[z+1]=g[z+1],V[z+2]=g[z+2],V[z+3]=g[z+3];if(F==16)for(z=0;z<W;z++)V[z]=g[z<<1]}else if(U==2){const W=w.tabs.tRNS;if(W==null){if(F==8)for(z=0;z<E;z++){var D=3*z;H[z]=255<<24|g[D+2]<<16|g[D+1]<<8|g[D]}if(F==16)for(z=0;z<E;z++)D=6*z,H[z]=255<<24|g[D+4]<<16|g[D+2]<<8|g[D]}else{var S=W[0];const Z=W[1],q=W[2];if(F==8)for(z=0;z<E;z++){var T=z<<2;D=3*z,H[z]=255<<24|g[D+2]<<16|g[D+1]<<8|g[D],g[D]==S&&g[D+1]==Z&&g[D+2]==q&&(V[T+3]=0)}if(F==16)for(z=0;z<E;z++)T=z<<2,D=6*z,H[z]=255<<24|g[D+4]<<16|g[D+2]<<8|g[D],K(g,D)==S&&K(g,D+2)==Z&&K(g,D+4)==q&&(V[T+3]=0)}}else if(U==3){const W=w.tabs.PLTE,Z=w.tabs.tRNS,q=Z?Z.length:0;if(F==1)for(var I=0;I<v;I++){var N=I*M,j=I*y;for(z=0;z<y;z++){T=j+z<<2;var C=3*(G=g[N+(z>>3)]>>7-((7&z)<<0)&1);V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<q?Z[G]:255}}if(F==2)for(I=0;I<v;I++)for(N=I*M,j=I*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[N+(z>>2)]>>6-((3&z)<<1)&3),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<q?Z[G]:255;if(F==4)for(I=0;I<v;I++)for(N=I*M,j=I*y,z=0;z<y;z++)T=j+z<<2,C=3*(G=g[N+(z>>1)]>>4-((1&z)<<2)&15),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<q?Z[G]:255;if(F==8)for(z=0;z<E;z++){var G;T=z<<2,C=3*(G=g[z]),V[T]=W[C],V[T+1]=W[C+1],V[T+2]=W[C+2],V[T+3]=G<q?Z[G]:255}}else if(U==4){if(F==8)for(z=0;z<E;z++){T=z<<2;var J=g[P=z<<1];V[T]=J,V[T+1]=J,V[T+2]=J,V[T+3]=g[P+1]}if(F==16)for(z=0;z<E;z++){var P;T=z<<2,J=g[P=z<<2],V[T]=J,V[T+1]=J,V[T+2]=J,V[T+3]=g[P+2]}}else if(U==0)for(S=w.tabs.tRNS?w.tabs.tRNS:-1,I=0;I<v;I++){const W=I*M,Z=I*y;if(F==1)for(var O=0;O<y;O++){var ee=(J=255*(g[W+(O>>>3)]>>>7-(7&O)&1))==255*S?0:255;H[Z+O]=ee<<24|J<<16|J<<8|J}else if(F==2)for(O=0;O<y;O++)ee=(J=85*(g[W+(O>>>2)]>>>6-((3&O)<<1)&3))==85*S?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(F==4)for(O=0;O<y;O++)ee=(J=17*(g[W+(O>>>1)]>>>4-((1&O)<<2)&15))==17*S?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(F==8)for(O=0;O<y;O++)ee=(J=g[W+O])==S?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J;else if(F==16)for(O=0;O<y;O++)J=g[W+(O<<1)],ee=K(g,W+(O<<1))==S?0:255,H[Z+O]=ee<<24|J<<16|J<<8|J}return V}function t(g,y,v,w){const E=o(g),k=Math.ceil(v*E/8),M=new Uint8Array((k+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,M):n(y,M),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(H,U){const F=U.width,K=U.height,z=o(U),D=z>>3,S=Math.ceil(F*z/8),T=new Uint8Array(K*S);let I=0;const N=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const O=C[J],ee=G[J];let W=0,Z=0,q=N[J];for(;q<K;)q+=O,Z++;let Q=j[J];for(;Q<F;)Q+=ee,W++;const ie=Math.ceil(W*z/8);c(H,U,I,W,Z);let se=0,ne=N[J];for(;ne<K;){let _e=j[J],Ae=I+se*ie<<3;for(;_e<F;){var P;if(z==1&&(P=(P=H[Ae>>3])>>7-(7&Ae)&1,T[ne*S+(_e>>3)]|=P<<7-((7&_e)<<0)),z==2&&(P=(P=H[Ae>>3])>>6-(7&Ae)&3,T[ne*S+(_e>>2)]|=P<<6-((3&_e)<<1)),z==4&&(P=(P=H[Ae>>3])>>4-(7&Ae)&15,T[ne*S+(_e>>1)]|=P<<4-((1&_e)<<2)),z>=8){const Pe=ne*S+_e*D;for(let Ce=0;Ce<D;Ce++)T[Pe+Ce]=H[(Ae>>3)+Ce]}Ae+=z,_e+=ee}se++,ne+=O}W*Z!=0&&(I+=Z*(1+ie)),J+=1}return T})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let E,k,M=0,V=0,H=0,U=0,F=0,K=0,z=0,D=0,S=0;if(y[0]==3&&y[1]==0)return v||new w(0);const T=g.H,I=T.b,N=T.e,j=T.R,C=T.n,G=T.A,J=T.Z,P=T.m,O=v==null;for(O&&(v=new w(y.length>>>2<<5));M==0;)if(M=I(y,S,1),V=I(y,S+1,2),S+=3,V!=0){if(O&&(v=g.H.W(v,D+(1<<17))),V==1&&(E=P.J,k=P.h,K=511,z=31),V==2){H=N(y,S,5)+257,U=N(y,S+5,5)+1,F=N(y,S+10,4)+4,S+=14;let W=1;for(var ee=0;ee<38;ee+=2)P.Q[ee]=0,P.Q[ee+1]=0;for(ee=0;ee<F;ee++){const Q=N(y,S+3*ee,3);P.Q[1+(P.X[ee]<<1)]=Q,Q>W&&(W=Q)}S+=3*F,C(P.Q,W),G(P.Q,W,P.u),E=P.w,k=P.d,S=j(P.u,(1<<W)-1,H+U,y,S,P.v);const Z=T.V(P.v,0,H,P.C);K=(1<<Z)-1;const q=T.V(P.v,H,U,P.D);z=(1<<q)-1,C(P.C,Z),G(P.C,Z,E),C(P.D,q),G(P.D,q,k)}for(;;){const W=E[J(y,S)&K];S+=15&W;const Z=W>>>4;if(!(Z>>>8))v[D++]=Z;else{if(Z==256)break;{let q=D+Z-254;if(Z>264){const _e=P.q[Z-257];q=D+(_e>>>3)+N(y,S,7&_e),S+=7&_e}const Q=k[J(y,S)&z];S+=15&Q;const ie=Q>>>4,se=P.c[ie],ne=(se>>>4)+I(y,S,15&se);for(S+=15&se;D<q;)v[D]=v[D++-ne],v[D]=v[D++-ne],v[D]=v[D++-ne],v[D]=v[D++-ne];D=q}}}}else{(7&S)!=0&&(S+=8-(7&S));const W=4+(S>>>3),Z=y[W-4]|y[W-3]<<8;O&&(v=g.H.W(v,D+Z)),v.set(new w(y.buffer,y.byteOffset+W,Z),D),S=W+Z<<3,D+=Z}return v.length==D?v:v.slice(0,D)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const E=new Uint8Array(w<<1);return E.set(y,0),E},g.H.R=function(y,v,w,E,k,M){const V=g.H.e,H=g.H.Z;let U=0;for(;U<w;){const F=y[H(E,k)&v];k+=15&F;const K=F>>>4;if(K<=15)M[U]=K,U++;else{let z=0,D=0;K==16?(D=3+V(E,k,2),k+=2,z=M[U-1]):K==17?(D=3+V(E,k,3),k+=3):K==18&&(D=11+V(E,k,7),k+=7);const S=U+D;for(;U<S;)M[U]=z,U++}}return k},g.H.V=function(y,v,w,E){let k=0,M=0;const V=E.length>>>1;for(;M<w;){const H=y[M+v];E[M<<1]=0,E[1+(M<<1)]=H,H>k&&(k=H),M++}for(;M<V;)E[M<<1]=0,E[1+(M<<1)]=0,M++;return k},g.H.n=function(y,v){const w=g.H.m,E=y.length;let k,M,V,H;const U=w.j;for(var F=0;F<=v;F++)U[F]=0;for(F=1;F<E;F+=2)U[y[F]]++;const K=w.K;for(k=0,U[0]=0,M=1;M<=v;M++)k=k+U[M-1]<<1,K[M]=k;for(V=0;V<E;V+=2)H=y[V+1],H!=0&&(y[V]=K[H],K[H]++)},g.H.A=function(y,v,w){const E=y.length,k=g.H.m.r;for(let M=0;M<E;M+=2)if(y[M+1]!=0){const V=M>>1,H=y[M+1],U=V<<4|H,F=v-H;let K=y[M]<<F;const z=K+(1<<F);for(;K!=z;)w[k[K]>>>15-v]=U,K++}},g.H.l=function(y,v){const w=g.H.m.r,E=15-v;for(let k=0;k<y.length;k+=2){const M=y[k]<<v-y[k+1];y[k]=w[M]>>>E}},g.H.M=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const E=v>>>3;y[E]|=w,y[E+1]|=w>>>8,y[E+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let E=v;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,y.r[v]=(E>>>16|E<<16)>>>17}function w(E,k,M){for(;k--!=0;)E.push(0,M)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,E){let k=o(y);const M=Math.ceil(w*k/8);let V,H;k=Math.ceil(k/8);let U=g[v],F=0;if(U>1&&(g[v]=[0,0,1][U-2]),U==3)for(F=k;F<M;F++)g[F+1]=g[F+1]+(g[F+1-k]>>>1)&255;for(let K=0;K<E;K++)if(V=v+K*M,H=V+K+1,U=g[H-1],F=0,U==0)for(;F<M;F++)g[V+F]=g[H+F];else if(U==1){for(;F<k;F++)g[V+F]=g[H+F];for(;F<M;F++)g[V+F]=g[H+F]+g[V+F-k]}else if(U==2)for(;F<M;F++)g[V+F]=g[H+F]+g[V+F-M];else if(U==3){for(;F<k;F++)g[V+F]=g[H+F]+(g[V+F-M]>>>1);for(;F<M;F++)g[V+F]=g[H+F]+(g[V+F-M]+g[V+F-k]>>>1)}else{for(;F<k;F++)g[V+F]=g[H+F]+u(0,g[V+F-M],0);for(;F<M;F++)g[V+F]=g[H+F]+u(g[V+F-k],g[V+F-M],g[V+F-k-M])}return g}function u(g,y,v){const w=g+y-v,E=w-g,k=w-y,M=w-v;return E*E<=k*k&&E*E<=M*M?g:k*k<=M*M?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,E,k,M,V,H){const U=Math.min(y,E),F=Math.min(v,k);let K=0,z=0;for(let J=0;J<F;J++)for(let P=0;P<U;P++)if(M>=0&&V>=0?(K=J*y+P<<2,z=(V+J)*E+M+P<<2):(K=(-V+J)*y-M+P<<2,z=J*E+P<<2),H==0)w[z]=g[K],w[z+1]=g[K+1],w[z+2]=g[K+2],w[z+3]=g[K+3];else if(H==1){var D=g[K+3]*.00392156862745098,S=g[K]*D,T=g[K+1]*D,I=g[K+2]*D,N=w[z+3]*(1/255),j=w[z]*N,C=w[z+1]*N,G=w[z+2]*N;const O=1-D,ee=D+N*O,W=ee==0?0:1/ee;w[z+3]=255*ee,w[z+0]=(S+j*O)*W,w[z+1]=(T+C*O)*W,w[z+2]=(I+G*O)*W}else if(H==2)D=g[K+3],S=g[K],T=g[K+1],I=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],D==N&&S==j&&T==C&&I==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=S,w[z+1]=T,w[z+2]=I,w[z+3]=D);else if(H==3){if(D=g[K+3],S=g[K],T=g[K+1],I=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],D==N&&S==j&&T==C&&I==G)continue;if(D<220&&N>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const E=r,k=E.readUshort,M=E.readUint,V={tabs:{},frames:[]},H=new Uint8Array(v.length);let U,F=0,K=0;const z=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(v[D]!=z[D])throw"The input is not a PNG file!";for(;w<v.length;){const J=E.readUint(v,w);w+=4;const P=E.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,V);else if(P=="iCCP"){for(var S=w;v[S]!=0;)S++;E.readASCII(v,w,S-w),v[S+1];const O=v.slice(S+2,w+J);let ee=null;try{ee=n(O)}catch{ee=s(O)}V.tabs[P]=ee}else if(P=="CgBI")V.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(D=0;D<J;D++)H[F+D]=v[w+D];F+=J}else if(P=="acTL")V.tabs[P]={num_frames:M(v,w),num_plays:M(v,w+4)},U=new Uint8Array(v.length);else if(P=="fcTL"){K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height),K=0);const O={x:M(v,w+12),y:M(v,w+16),width:M(v,w+4),height:M(v,w+8)};let ee=k(v,w+22);ee=k(v,w+20)/(ee==0?100:ee);const W={rect:O,delay:Math.round(1e3*ee),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(P=="fdAT"){for(D=0;D<J-4;D++)U[K+D]=v[w+D+4];K+=J-4}else if(P=="pHYs")V.tabs[P]=[E.readUint(v,w),E.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(V.tabs[P]=[],D=0;D<8;D++)V.tabs[P].push(E.readUint(v,w+4*D));else if(P=="tEXt"||P=="zTXt"){V.tabs[P]==null&&(V.tabs[P]={});var T=E.nextZero(v,w),I=E.readASCII(v,w,T-w),N=w+J-T-1;if(P=="tEXt")C=E.readASCII(v,T+1,N);else{var j=n(v.slice(T+2,T+2+N));C=E.readUTF8(j,0,j.length)}V.tabs[P][I]=C}else if(P=="iTXt"){V.tabs[P]==null&&(V.tabs[P]={}),T=0,S=w,T=E.nextZero(v,S),I=E.readASCII(v,S,T-S);const O=v[S=T+1];var C;v[S+1],S+=2,T=E.nextZero(v,S),E.readASCII(v,S,T-S),S=T+1,T=E.nextZero(v,S),E.readUTF8(v,S,T-S),N=J-((S=T+1)-w),O==0?C=E.readUTF8(v,S,N):(j=n(v.slice(S,S+N)),C=E.readUTF8(j,0,j.length)),V.tabs[P][I]=C}else if(P=="PLTE")V.tabs[P]=E.readBytes(v,w,J);else if(P=="hIST"){const O=V.tabs.PLTE.length/3;for(V.tabs[P]=[],D=0;D<O;D++)V.tabs[P].push(k(v,w+2*D))}else if(P=="tRNS")V.ctype==3?V.tabs[P]=E.readBytes(v,w,J):V.ctype==0?V.tabs[P]=k(v,w):V.ctype==2&&(V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]);else if(P=="gAMA")V.tabs[P]=E.readUint(v,w)/1e5;else if(P=="sRGB")V.tabs[P]=v[w];else if(P=="bKGD")V.ctype==0||V.ctype==4?V.tabs[P]=[k(v,w)]:V.ctype==2||V.ctype==6?V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]:V.ctype==3&&(V.tabs[P]=v[w]);else if(P=="IEND")break;w+=J,E.readUint(v,w),w+=4}var G;return K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,U.slice(0,K),G.rect.width,G.rect.height)),V.data=t(V,H,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const E=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const k=v*w*4,M=new Uint8Array(k),V=new Uint8Array(k),H=new Uint8Array(k);for(let F=0;F<y.frames.length;F++){const K=y.frames[F],z=K.rect.x,D=K.rect.y,S=K.rect.width,T=K.rect.height,I=e(K.data,S,T,y);if(F!=0)for(var U=0;U<k;U++)H[U]=M[U];if(K.blend==0?f(I,S,T,M,v,w,z,D,0):K.blend==1&&f(I,S,T,M,v,w,z,D,1),E.push(M.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)f(V,S,T,M,v,w,z,D,0);else if(K.dispose==2)for(U=0;U<k;U++)M[U]=H[U]}}return E},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Xr,{_bin:e}=Xr,t=Xr._paeth;var n={table:(function(){const S=new Uint32Array(256);for(let T=0;T<256;T++){let I=T;for(let N=0;N<8;N++)1&I?I=3988292384^I>>>1:I>>>=1;S[T]=I}return S})(),update(S,T,I,N){for(let j=0;j<N;j++)S=n.table[255&(S^T[I+j])]^S>>>8;return S},crc:(S,T,I)=>4294967295^n.update(4294967295,S,T,I)};function s(S,T,I,N){T[I]+=S[0]*N>>4,T[I+1]+=S[1]*N>>4,T[I+2]+=S[2]*N>>4,T[I+3]+=S[3]*N>>4}function o(S){return Math.max(0,Math.min(255,S))}function c(S,T){const I=S[0]-T[0],N=S[1]-T[1],j=S[2]-T[2],C=S[3]-T[3];return I*I+N*N+j*j+C*C}function u(S,T,I,N,j,C,G){G==null&&(G=1);const J=N.length,P=[];for(var O=0;O<J;O++){const ne=N[O];P.push([ne>>>0&255,ne>>>8&255,ne>>>16&255,ne>>>24&255])}for(O=0;O<J;O++){let ne=4294967295;for(var ee=0,W=0;W<J;W++){var Z=c(P[O],P[W]);W!=O&&Z<ne&&(ne=Z,ee=W)}}const q=new Uint32Array(j.buffer),Q=new Int16Array(T*I*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<ie.length;O++)ie[O]=255*((ie[O]+.5)/16-.5);for(let ne=0;ne<I;ne++)for(let _e=0;_e<T;_e++){var se;O=4*(ne*T+_e),G!=2?se=[o(S[O]+Q[O]),o(S[O+1]+Q[O+1]),o(S[O+2]+Q[O+2]),o(S[O+3]+Q[O+3])]:(Z=ie[4*(3&ne)+(3&_e)],se=[o(S[O]+Z),o(S[O+1]+Z),o(S[O+2]+Z),o(S[O+3]+Z)]),ee=0;let Ae=16777215;for(W=0;W<J;W++){const et=c(se,P[W]);et<Ae&&(Ae=et,ee=W)}const Pe=P[ee],Ce=[se[0]-Pe[0],se[1]-Pe[1],se[2]-Pe[2],se[3]-Pe[3]];G==1&&(_e!=T-1&&s(Ce,Q,O+4,7),ne!=I-1&&(_e!=0&&s(Ce,Q,O+4*T-4,3),s(Ce,Q,O+4*T,5),_e!=T-1&&s(Ce,Q,O+4*T+4,1))),C[O>>2]=ee,q[O>>2]=N[ee]}}function d(S,T,I,N,j){j==null&&(j={});const{crc:C}=n,G=e.writeUint,J=e.writeUshort,P=e.writeASCII;let O=8;const ee=S.frames.length>1;let W,Z=!1,q=33+(ee?20:0);if(j.sRGB!=null&&(q+=13),j.pHYs!=null&&(q+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),q+=21+W.length+4),S.ctype==3){for(var Q=S.plte.length,ie=0;ie<Q;ie++)S.plte[ie]>>>24!=255&&(Z=!0);q+=8+3*Q+4+(Z?8+1*Q+4:0)}for(var se=0;se<S.frames.length;se++)ee&&(q+=38),q+=(Pe=S.frames[se]).cimg.length+12,se!=0&&(q+=4);q+=12;const ne=new Uint8Array(q),_e=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)ne[ie]=_e[ie];if(G(ne,O,13),O+=4,P(ne,O,"IHDR"),O+=4,G(ne,O,T),O+=4,G(ne,O,I),O+=4,ne[O]=S.depth,O++,ne[O]=S.ctype,O++,ne[O]=0,O++,ne[O]=0,O++,ne[O]=0,O++,G(ne,O,C(ne,O-17,17)),O+=4,j.sRGB!=null&&(G(ne,O,1),O+=4,P(ne,O,"sRGB"),O+=4,ne[O]=j.sRGB,O++,G(ne,O,C(ne,O-5,5)),O+=4),j.iCCP!=null){const Ce=13+W.length;G(ne,O,Ce),O+=4,P(ne,O,"iCCP"),O+=4,P(ne,O,"ICC profile"),O+=11,O+=2,ne.set(W,O),O+=W.length,G(ne,O,C(ne,O-(Ce+4),Ce+4)),O+=4}if(j.pHYs!=null&&(G(ne,O,9),O+=4,P(ne,O,"pHYs"),O+=4,G(ne,O,j.pHYs[0]),O+=4,G(ne,O,j.pHYs[1]),O+=4,ne[O]=j.pHYs[2],O++,G(ne,O,C(ne,O-13,13)),O+=4),ee&&(G(ne,O,8),O+=4,P(ne,O,"acTL"),O+=4,G(ne,O,S.frames.length),O+=4,G(ne,O,j.loop!=null?j.loop:0),O+=4,G(ne,O,C(ne,O-12,12)),O+=4),S.ctype==3){for(G(ne,O,3*(Q=S.plte.length)),O+=4,P(ne,O,"PLTE"),O+=4,ie=0;ie<Q;ie++){const Ce=3*ie,et=S.plte[ie],at=255&et,ot=et>>>8&255,un=et>>>16&255;ne[O+Ce+0]=at,ne[O+Ce+1]=ot,ne[O+Ce+2]=un}if(O+=3*Q,G(ne,O,C(ne,O-3*Q-4,3*Q+4)),O+=4,Z){for(G(ne,O,Q),O+=4,P(ne,O,"tRNS"),O+=4,ie=0;ie<Q;ie++)ne[O+ie]=S.plte[ie]>>>24&255;O+=Q,G(ne,O,C(ne,O-Q-4,Q+4)),O+=4}}let Ae=0;for(se=0;se<S.frames.length;se++){var Pe=S.frames[se];ee&&(G(ne,O,26),O+=4,P(ne,O,"fcTL"),O+=4,G(ne,O,Ae++),O+=4,G(ne,O,Pe.rect.width),O+=4,G(ne,O,Pe.rect.height),O+=4,G(ne,O,Pe.rect.x),O+=4,G(ne,O,Pe.rect.y),O+=4,J(ne,O,N[se]),O+=2,J(ne,O,1e3),O+=2,ne[O]=Pe.dispose,O++,ne[O]=Pe.blend,O++,G(ne,O,C(ne,O-30,30)),O+=4);const Ce=Pe.cimg;G(ne,O,(Q=Ce.length)+(se==0?0:4)),O+=4;const et=O;P(ne,O,se==0?"IDAT":"fdAT"),O+=4,se!=0&&(G(ne,O,Ae++),O+=4),ne.set(Ce,O),O+=Q,G(ne,O,C(ne,et,O-et)),O+=4}return G(ne,O,0),O+=4,P(ne,O,"IEND"),O+=4,G(ne,O,C(ne,O-4,4)),O+=4,ne.buffer}function f(S,T,I){for(let N=0;N<S.frames.length;N++){const j=S.frames[N];j.rect.width;const C=j.rect.height,G=new Uint8Array(C*j.bpl+C);j.cimg=w(j.img,C,j.bpp,j.bpl,G,T,I)}}function g(S,T,I,N,j){const C=j[0],G=j[1],J=j[2],P=j[3],O=j[4],ee=j[5];let W=6,Z=8,q=255;for(var Q=0;Q<S.length;Q++){const Ct=new Uint8Array(S[Q]);for(var ie=Ct.length,se=0;se<ie;se+=4)q&=Ct[se+3]}const ne=q!=255,_e=(function(it,st,qe,pe,Ee,Be){const De=[];for(var xe=0;xe<it.length;xe++){const Bt=new Uint8Array(it[xe]),kn=new Uint32Array(Bt.buffer);var tt;let wn=0,Gt=0,Et=st,Jt=qe,kt=pe?1:0;if(xe!=0){const Ko=Be||pe||xe==1||De[xe-2].dispose!=0?1:2;let ai=0,Da=1e9;for(let Dn=0;Dn<Ko;Dn++){var gt=new Uint8Array(it[xe-1-Dn]);const qi=new Uint32Array(it[xe-1-Dn]);let pt=st,hn=qe,xn=-1,En=-1;for(let br=0;br<qe;br++)for(let pn=0;pn<st;pn++)kn[ut=br*st+pn]!=qi[ut]&&(pn<pt&&(pt=pn),pn>xn&&(xn=pn),br<hn&&(hn=br),br>En&&(En=br));xn==-1&&(pt=hn=xn=En=0),Ee&&((1&pt)==1&&pt--,(1&hn)==1&&hn--);const Yo=(xn-pt+1)*(En-hn+1);Yo<Da&&(Da=Yo,ai=Dn,wn=pt,Gt=hn,Et=xn-pt+1,Jt=En-hn+1)}gt=new Uint8Array(it[xe-1-ai]),ai==1&&(De[xe-1].dispose=2),tt=new Uint8Array(Et*Jt*4),r(gt,st,qe,tt,Et,Jt,-wn,-Gt,0),kt=r(Bt,st,qe,tt,Et,Jt,-wn,-Gt,3)?1:0,kt==1?v(Bt,st,qe,tt,{x:wn,y:Gt,width:Et,height:Jt}):r(Bt,st,qe,tt,Et,Jt,-wn,-Gt,0)}else tt=Bt.slice(0);De.push({rect:{x:wn,y:Gt,width:Et,height:Jt},img:tt,blend:kt,dispose:0})}if(pe)for(xe=0;xe<De.length;xe++){if((Fn=De[xe]).blend==1)continue;const Bt=Fn.rect,kn=De[xe-1].rect,wn=Math.min(Bt.x,kn.x),Gt=Math.min(Bt.y,kn.y),Et={x:wn,y:Gt,width:Math.max(Bt.x+Bt.width,kn.x+kn.width)-wn,height:Math.max(Bt.y+Bt.height,kn.y+kn.height)-Gt};De[xe-1].dispose=1,xe-1!=0&&y(it,st,qe,De,xe-1,Et,Ee),y(it,st,qe,De,xe,Et,Ee)}let Bn=0;if(it.length!=1)for(var ut=0;ut<De.length;ut++){var Fn;Bn+=(Fn=De[ut]).rect.width*Fn.rect.height}return De})(S,T,I,C,G,J),Ae={},Pe=[],Ce=[];if(N!=0){const Ct=[];for(se=0;se<_e.length;se++)Ct.push(_e[se].img.buffer);const it=(function(Ee){let Be=0;for(var De=0;De<Ee.length;De++)Be+=Ee[De].byteLength;const xe=new Uint8Array(Be);let tt=0;for(De=0;De<Ee.length;De++){const gt=new Uint8Array(Ee[De]),Bn=gt.length;for(let ut=0;ut<Bn;ut+=4){let Fn=gt[ut],Bt=gt[ut+1],kn=gt[ut+2];const wn=gt[ut+3];wn==0&&(Fn=Bt=kn=0),xe[tt+ut]=Fn,xe[tt+ut+1]=Bt,xe[tt+ut+2]=kn,xe[tt+ut+3]=wn}tt+=Bn}return xe.buffer})(Ct),st=k(it,N);for(se=0;se<st.plte.length;se++)Pe.push(st.plte[se].est.rgba);let qe=0;for(se=0;se<_e.length;se++){const pe=(at=_e[se]).img.length;var et=new Uint8Array(st.inds.buffer,qe>>2,pe>>2);Ce.push(et);const Ee=new Uint8Array(st.abuf,qe,pe);ee&&u(at.img,at.rect.width,at.rect.height,Pe,Ee,et),at.img.set(Ee),qe+=pe}}else for(Q=0;Q<_e.length;Q++){var at=_e[Q];const Ct=new Uint32Array(at.img.buffer);var ot=at.rect.width;for(ie=Ct.length,et=new Uint8Array(ie),Ce.push(et),se=0;se<ie;se++){const it=Ct[se];if(se!=0&&it==Ct[se-1])et[se]=et[se-1];else if(se>ot&&it==Ct[se-ot])et[se]=et[se-ot];else{let st=Ae[it];if(st==null&&(Ae[it]=st=Pe.length,Pe.push(it),Pe.length>=300))break;et[se]=st}}}const un=Pe.length;for(un<=256&&O==0&&(Z=un<=2?1:un<=4?2:un<=16?4:8,Z=Math.max(Z,P)),Q=0;Q<_e.length;Q++){(at=_e[Q]).rect.x,at.rect.y,ot=at.rect.width;const Ct=at.rect.height;let it=at.img;new Uint32Array(it.buffer);let st=4*ot,qe=4;if(un<=256&&O==0){st=Math.ceil(Z*ot/8);var Rt=new Uint8Array(st*Ct);const pe=Ce[Q];for(let Ee=0;Ee<Ct;Ee++){se=Ee*st;const Be=Ee*ot;if(Z==8)for(var mt=0;mt<ot;mt++)Rt[se+mt]=pe[Be+mt];else if(Z==4)for(mt=0;mt<ot;mt++)Rt[se+(mt>>1)]|=pe[Be+mt]<<4-4*(1&mt);else if(Z==2)for(mt=0;mt<ot;mt++)Rt[se+(mt>>2)]|=pe[Be+mt]<<6-2*(3&mt);else if(Z==1)for(mt=0;mt<ot;mt++)Rt[se+(mt>>3)]|=pe[Be+mt]<<7-1*(7&mt)}it=Rt,W=3,qe=1}else if(ne==0&&_e.length==1){Rt=new Uint8Array(ot*Ct*3);const pe=ot*Ct;for(se=0;se<pe;se++){const Ee=3*se,Be=4*se;Rt[Ee]=it[Be],Rt[Ee+1]=it[Be+1],Rt[Ee+2]=it[Be+2]}it=Rt,W=2,qe=3,st=3*ot}at.img=it,at.bpl=st,at.bpp=qe}return{ctype:W,depth:Z,plte:Pe,frames:_e}}function y(S,T,I,N,j,C,G){const J=Uint8Array,P=Uint32Array,O=new J(S[j-1]),ee=new P(S[j-1]),W=j+1<S.length?new J(S[j+1]):null,Z=new J(S[j]),q=new P(Z.buffer);let Q=T,ie=I,se=-1,ne=-1;for(let Ae=0;Ae<C.height;Ae++)for(let Pe=0;Pe<C.width;Pe++){const Ce=C.x+Pe,et=C.y+Ae,at=et*T+Ce,ot=q[at];ot==0||N[j-1].dispose==0&&ee[at]==ot&&(W==null||W[4*at+3]!=0)||(Ce<Q&&(Q=Ce),Ce>se&&(se=Ce),et<ie&&(ie=et),et>ne&&(ne=et))}se==-1&&(Q=ie=se=ne=0),G&&((1&Q)==1&&Q--,(1&ie)==1&&ie--),C={x:Q,y:ie,width:se-Q+1,height:ne-ie+1};const _e=N[j];_e.rect=C,_e.blend=1,_e.img=new Uint8Array(C.width*C.height*4),N[j-1].dispose==0?(r(O,T,I,_e.img,C.width,C.height,-C.x,-C.y,0),v(Z,T,I,_e.img,C)):r(Z,T,I,_e.img,C.width,C.height,-C.x,-C.y,0)}function v(S,T,I,N,j){r(S,T,I,N,j.width,j.height,-j.x,-j.y,2)}function w(S,T,I,N,j,C,G){const J=[];let P,O=[0,1,2,3,4];C!=-1?O=[C]:(T*N>5e5||I==1)&&(O=[0]),G&&(P={level:0});const ee=a9;for(var W=0;W<O.length;W++){for(let Q=0;Q<T;Q++)E(j,S,Q,N,I,O[W]);J.push(ee.deflate(j,P))}let Z,q=1e9;for(W=0;W<J.length;W++)J[W].length<q&&(Z=W,q=J[W].length);return J[Z]}function E(S,T,I,N,j,C){const G=I*N;let J=G+I;if(S[J]=C,J++,C==0)if(N<500)for(var P=0;P<N;P++)S[J+P]=T[G+P];else S.set(new Uint8Array(T.buffer,G,N),J);else if(C==1){for(P=0;P<j;P++)S[J+P]=T[G+P];for(P=j;P<N;P++)S[J+P]=T[G+P]-T[G+P-j]+256&255}else if(I==0){for(P=0;P<j;P++)S[J+P]=T[G+P];if(C==2)for(P=j;P<N;P++)S[J+P]=T[G+P];if(C==3)for(P=j;P<N;P++)S[J+P]=T[G+P]-(T[G+P-j]>>1)+256&255;if(C==4)for(P=j;P<N;P++)S[J+P]=T[G+P]-t(T[G+P-j],0,0)+256&255}else{if(C==2)for(P=0;P<N;P++)S[J+P]=T[G+P]+256-T[G+P-N]&255;if(C==3){for(P=0;P<j;P++)S[J+P]=T[G+P]+256-(T[G+P-N]>>1)&255;for(P=j;P<N;P++)S[J+P]=T[G+P]+256-(T[G+P-N]+T[G+P-j]>>1)&255}if(C==4){for(P=0;P<j;P++)S[J+P]=T[G+P]+256-t(0,T[G+P-N],0)&255;for(P=j;P<N;P++)S[J+P]=T[G+P]+256-t(T[G+P-j],T[G+P-N],T[G+P-j-N])&255}}}function k(S,T){const I=new Uint8Array(S),N=I.slice(0),j=new Uint32Array(N.buffer),C=M(N,T),G=C[0],J=C[1],P=I.length,O=new Uint8Array(P>>2);let ee;if(I.length<2e7)for(var W=0;W<P;W+=4)ee=V(G,Z=I[W]*(1/255),q=I[W+1]*(1/255),Q=I[W+2]*(1/255),ie=I[W+3]*(1/255)),O[W>>2]=ee.ind,j[W>>2]=ee.est.rgba;else for(W=0;W<P;W+=4){var Z=I[W]*.00392156862745098,q=I[W+1]*(1/255),Q=I[W+2]*(1/255),ie=I[W+3]*(1/255);for(ee=G;ee.left;)ee=H(ee.est,Z,q,Q,ie)<=0?ee.left:ee.right;O[W>>2]=ee.ind,j[W>>2]=ee.est.rgba}return{abuf:N.buffer,inds:O,plte:J}}function M(S,T,I){I==null&&(I=1e-4);const N=new Uint32Array(S.buffer),j={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=K(S,j.i0,j.i1),j.est=z(j.bst);const C=[j];for(;C.length<T;){let J=0,P=0;for(var G=0;G<C.length;G++)C[G].est.L>J&&(J=C[G].est.L,P=G);if(J<I)break;const O=C[P],ee=U(S,N,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=ee||O.i1<=ee){O.est.L=0;continue}const W={i0:O.i0,i1:ee,bst:null,est:null,tdst:0,left:null,right:null};W.bst=K(S,W.i0,W.i1),W.est=z(W.bst);const Z={i0:ee,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Z.bst={R:[],m:[],N:O.bst.N-W.bst.N},G=0;G<16;G++)Z.bst.R[G]=O.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)Z.bst.m[G]=O.bst.m[G]-W.bst.m[G];Z.est=z(Z.bst),O.left=W,O.right=Z,C[P]=W,C.push(Z)}for(C.sort(((J,P)=>P.bst.N-J.bst.N)),G=0;G<C.length;G++)C[G].ind=G;return[j,C]}function V(S,T,I,N,j){if(S.left==null)return S.tdst=(function(W,Z,q,Q,ie){const se=Z-W[0],ne=q-W[1],_e=Q-W[2],Ae=ie-W[3];return se*se+ne*ne+_e*_e+Ae*Ae})(S.est.q,T,I,N,j),S;const C=H(S.est,T,I,N,j);let G=S.left,J=S.right;C>0&&(G=S.right,J=S.left);const P=V(G,T,I,N,j);if(P.tdst<=C*C)return P;const O=V(J,T,I,N,j);return O.tdst<P.tdst?O:P}function H(S,T,I,N,j){const{e:C}=S;return C[0]*T+C[1]*I+C[2]*N+C[3]*j-S.eMq}function U(S,T,I,N,j,C){for(N-=4;I<N;){for(;F(S,I,j)<=C;)I+=4;for(;F(S,N,j)>C;)N-=4;if(I>=N)break;const G=T[I>>2];T[I>>2]=T[N>>2],T[N>>2]=G,I+=4,N-=4}for(;F(S,I,j)>C;)I-=4;return I+4}function F(S,T,I){return S[T]*I[0]+S[T+1]*I[1]+S[T+2]*I[2]+S[T+3]*I[3]}function K(S,T,I){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],C=I-T>>2;for(let G=T;G<I;G+=4){const J=S[G]*.00392156862745098,P=S[G+1]*(1/255),O=S[G+2]*(1/255),ee=S[G+3]*(1/255);j[0]+=J,j[1]+=P,j[2]+=O,j[3]+=ee,N[0]+=J*J,N[1]+=J*P,N[2]+=J*O,N[3]+=J*ee,N[5]+=P*P,N[6]+=P*O,N[7]+=P*ee,N[10]+=O*O,N[11]+=O*ee,N[15]+=ee*ee}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:j,N:C}}function z(S){const{R:T}=S,{m:I}=S,{N}=S,j=I[0],C=I[1],G=I[2],J=I[3],P=N==0?0:1/N,O=[T[0]-j*j*P,T[1]-j*C*P,T[2]-j*G*P,T[3]-j*J*P,T[4]-C*j*P,T[5]-C*C*P,T[6]-C*G*P,T[7]-C*J*P,T[8]-G*j*P,T[9]-G*C*P,T[10]-G*G*P,T[11]-G*J*P,T[12]-J*j*P,T[13]-J*C*P,T[14]-J*G*P,T[15]-J*J*P],ee=O,W=D;let Z=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,Q=0;if(N!=0)for(let se=0;se<16&&(Z=W.multVec(ee,Z),Q=Math.sqrt(W.dot(Z,Z)),Z=W.sml(1/Q,Z),!(se!=0&&Math.abs(Q-q)<1e-9));se++)q=Q;const ie=[j*P,C*P,G*P,J*P];return{Cov:O,q:ie,e:Z,L:q,eMq255:W.dot(W.sml(255,ie),Z),eMq:W.dot(Z,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var D={multVec:(S,T)=>[S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],S[4]*T[0]+S[5]*T[1]+S[6]*T[2]+S[7]*T[3],S[8]*T[0]+S[9]*T[1]+S[10]*T[2]+S[11]*T[3],S[12]*T[0]+S[13]*T[1]+S[14]*T[2]+S[15]*T[3]],dot:(S,T)=>S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],sml:(S,T)=>[S*T[0],S*T[1],S*T[2],S*T[3]]};Xr.encode=function(T,I,N,j,C,G,J){j==null&&(j=0),J==null&&(J=!1);const P=g(T,I,N,j,[!1,!1,!1,0,J,!1]);return f(P,-1),d(P,I,N,C,G)},Xr.encodeLL=function(T,I,N,j,C,G,J,P){const O={ctype:0+(j==1?0:2)+(C==0?0:4),depth:G,frames:[]},ee=(j+C)*G,W=ee*I;for(let Z=0;Z<T.length;Z++)O.frames.push({rect:{x:0,y:0,width:I,height:N},img:new Uint8Array(T[Z]),blend:0,dispose:1,bpp:Math.ceil(ee/8),bpl:Math.ceil(W/8)});return f(O,0,!0),d(O,I,N,J,P)},Xr.encode.compress=g,Xr.encode.dither=u,Xr.quantize=k,Xr.quantize.getKDtree=M,Xr.quantize.getNearest=V})();const hR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,E,k,M,V=v,H=0,U=0,F=0;function K(S){y.setUint16(U,S,!0),U+=2}function z(S){y.setUint32(U,S,!0),U+=4}function D(S){U+=S}K(19778),z(f),D(4),z(122),z(108),z(t),z(-n>>>0),K(1),K(32),z(3),z(d),z(2835),z(2835),D(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function S(){for(;H<n&&V>0;){for(M=122+H*u,w=0;w<s;)V--,E=c[F++],k=E>>>24,y.setUint32(M+w,E<<8|k),w+=4;H++}F<c.length?(V=v,setTimeout(S,hR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var rr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},o9={[rr.CHROME]:16384,[rr.FIREFOX]:11180,[rr.DESKTOP_SAFARI]:16384,[rr.IE]:8192,[rr.IOS]:4096,[rr.ETC]:8192};const ev=typeof window<"u",dR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Am=ev&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),l9=(ev||dR)&&(Am&&Am.getOriginalSymbol(window,"File")||typeof File<"u"&&File),fR=(ev||dR)&&(Am&&Am.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function tv(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function mR(r){return new Promise(((e,t)=>{const n=new fR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function gR(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function yo(){if(yo.cachedResult!==void 0)return yo.cachedResult;let r=rr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=rr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=rr.IOS:/Safari/i.test(e)?r=rr.DESKTOP_SAFARI:/Firefox/i.test(e)?r=rr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=rr.IE),yo.cachedResult=r,yo.cachedResult}function pR(r,e){const t=yo(),n=o9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function pg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function yR(r,e){const{width:t,height:n}=pR(r.width,r.height),[s,o]=pg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function qf(){return qf.cachedResult!==void 0||(qf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qf.cachedResult}function Im(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=yR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return mR(r).then((function(y){try{return g=y,gR(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if(qf()||[rr.DESKTOP_SAFARI,rr.MOBILE_SAFARI].includes(yo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Rm(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Xr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>hR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(E){return c(E)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),tv(w,t,n).then((function(E){try{return u=E,v.call(this)}catch(k){return c(k)}}).bind(this),c)}}}function d(){return o(u)}}))}function Si(r){r.width=0,r.height=0}function Ql(){return new Promise((function(r,e){let t,n,s,o;return Ql.cachedResult!==void 0?r(Ql.cachedResult):tv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Im(t).then((function(u){try{return n=u[1],Rm(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Si(n),Im(s).then((function(f){try{return o=f[0],Ql.cachedResult=o.width===1&&o.height===2,r(Ql.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function _R(r){return new Promise(((e,t)=>{const n=new fR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function vR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=pg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Si(r)),c}function bR(r,e){const{width:t}=r,{height:n}=r,[s,o]=pg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Si(r),s}function PT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,E,k,M,V,H,U,F,K,z,D,S;function T(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=N,e.onProgress(Math.min(o,100))}function I(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(N,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,T(),Im(r,e).then((function(N){try{return[,d]=N,T(),f=vR(d,e),T(),new Promise((function(j,C){var G;if(!(G=e.exifOrientation))return _R(r).then((function(P){try{return G=P,J.call(this)}catch(O){return C(O)}}).bind(this),C);function J(){return j(G)}return J.call(this)})).then((function(j){try{return g=j,T(),Ql().then((function(C){try{return y=C?f:bR(f,g),T(),v=e.initialQuality||1,w=e.fileType||r.type,Rm(y,w,r.name,r.lastModified,v).then((function(G){try{{let ee=function(){if(c--&&(U>u||U>V)){let Z,q;return Z=S?.95*D.width:D.width,q=S?.95*D.height:D.height,[K,z]=pg(Z,q),z.drawImage(D,0,0,Z,q),v*=w==="image/png"?.85:.95,Rm(K,w,r.name,r.lastModified,v).then((function(Q){try{return F=Q,Si(D),D=K,U=F.size,I(Math.min(99,Math.floor((H-U)/(H-u)*100))),ee}catch(ie){return s(ie)}}),s)}return[1]},W=function(){return Si(D),Si(K),Si(f),Si(y),Si(d),I(100),n(F)};var P=ee,O=W;if(E=G,T(),k=E.size>u,M=E.size>r.size,!k&&!M)return I(100),n(E);var J;return V=r.size,H=E.size,U=H,D=y,S=!e.alwaysKeepResolution&&k,(J=(function(Z){for(;Z;){if(Z.then)return void Z.then(J,s);try{if(Z.pop){if(Z.length)return Z.pop()?W.call(this):Z;Z=ee}else Z=Z.call(this)}catch(q){return s(q)}}}).bind(this))(ee)}}catch(ee){return s(ee)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const c9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Uy;function u9(r,e){return new Promise(((t,n)=>{Uy||(Uy=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(c9));const s=new Worker(Uy);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function fn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof l9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return PT(r,s).then((function(w){try{return o=w,v.call(this)}catch(E){return n(E)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return PT(r,s).then((function(E){try{return o=E,g()}catch(k){return n(k)}}),n)}catch(E){return n(E)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",u9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=uR(r,o))}catch{}return t(o)}}))}fn.getDataUrlFromFile=mR,fn.getFilefromDataUrl=tv,fn.loadImage=gR,fn.drawImageInCanvas=yR,fn.drawFileInCanvas=Im,fn.canvasToFile=Rm,fn.getExifOrientation=_R,fn.handleMaxWidthOrHeight=vR,fn.followExifOrientation=bR,fn.cleanupCanvasMemory=Si,fn.isAutoOrientationInBrowser=Ql,fn.approximateBelowMaximumCanvasSizeOfBrowser=pR,fn.copyExifWithoutOrientation=uR,fn.getBrowserName=yo,fn.version="2.0.2";const h9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function d9(r){if(!r)return!0;const e=r.toLowerCase();return!h9.some(t=>e.includes(t))}async function f9(r,e){try{const t=Vt(Je,"users",r);return await Ur(t,{blockedUsers:G_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function m9(r,e){try{const t=Vt(Je,"users",r);return await Ur(t,{blockedUsers:SI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function g9(r,e){try{const t=Vt(Je,"users",r),n=await Ra(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function p9({onClose:r,onPostCreated:e}){const{t}=zn(),{currentUser:n}=si(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,E]=$.useState("none"),[k,M]=$.useState(null),[V,H]=$.useState(null),[U,F]=$.useState(!1),[K,z]=$.useState(!1),[D,S]=$.useState(""),[T,I]=$.useState(""),[N,j]=$.useState(0);$.useEffect(()=>{if(u){const O=Hf.find(ee=>ee.value===u);O&&g(t(O.labelKey))}},[u,t]);const C=async O=>{const ee=O.target.files[0];if(ee){const W=new FileReader;W.onloadend=()=>H(W.result),W.readAsDataURL(ee),M(ee)}},G=async()=>{if(k){z(!0);try{let O=k;try{O=await fn(k,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const ee=new FileReader;ee.readAsDataURL(O),ee.onloadend=async()=>{const W=ee.result,Z=await JI(W,"en"),q=(Z.plant_name+" "+Z.disease_name).toLowerCase();let Q=null;for(const ie of Hf)if(q.includes(ie.value)){Q=ie;break}Q?(d(Q.value),g(t(Q.labelKey)),I(`${t("auto_detect")}: ${t(Q.labelKey)}`)):I("Plant detected but not in our list yet."),setTimeout(()=>I(""),3e3),z(!1)}}catch(O){console.error("Auto detect failed",O),S(t("error_diagnosis_failed")),z(!1)}}},J=async O=>{if(O.preventDefault(),!!o.trim()){if(!d9(o)){S(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}F(!0),S(""),j(0);try{let ee=null;if(k)try{console.log("Compressing for Base64 storage...");const Z=await fn(k,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});ee=await new Promise((q,Q)=>{const ie=new FileReader;ie.readAsDataURL(Z),ie.onload=()=>q(ie.result),ie.onerror=se=>Q(se)}),console.log("Base64 string ready, length:",ee.length)}catch(W){console.error("Compression failed:",W),S("Image is too large and could not be compressed."),F(!1);return}await tR(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:ee}),e(),r()}catch(ee){console.error("FULL POST ERROR:",ee),S(ee.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{F(!1)}}},P=Hf.filter(O=>t(O.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(xs,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[D&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:D}),T&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:T}),b.jsxs("form",{onSubmit:J,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:O=>c(O.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(HI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:O=>{g(O.target.value),v(!0),O.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(Y_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(O=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(O.value),g(t(O.labelKey)),v(!1)},children:t(O.labelKey)},O.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{M(null),H(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:U,children:b.jsx(xs,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?b.jsx(wa,{className:"w-3 h-3 animate-spin"}):b.jsx(YV,{className:"w-3 h-3"}),t(K?"detecting":"auto_detect")]})]}),U&&N>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${N}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(N),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:U,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(jI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:C,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:U||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[U?b.jsx(wa,{className:"w-4 h-4 animate-spin"}):b.jsx(ph,{className:"w-4 h-4"}),U?"...":t("ask_question")]})]})]})]})]})})}function y9({user:r,onClose:e}){const{currentUser:t}=si(),n=Es(),[s,o]=$.useState(!1),{t:c}=zn(),{addToast:u}=Go(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const M=r.uid||r.id;if(!M)return;const V=ec(Vt(Je,"users",M),H=>{H.exists()&&f({uid:H.id,...H.data()})},H=>{console.error("User listener error",H)});return()=>V()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&g9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await m9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await f9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(M){console.error(M),u("Action failed","error")}},E=M=>!M?.lastSeen||!M.lastSeen.seconds?!1:Date.now()-M.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const k=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const M={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:M}})}catch(M){console.error(M),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:M=>M.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(xs,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${E(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${E(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),E(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(Tm,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(Tm,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:k,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(gh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function nv(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(zi,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function _9({analysisId:r,onClose:e}){const[t,n]=$.useState(null),[s,o]=$.useState(!0);return $.useEffect(()=>{async function c(){try{const u=await Ra(Vt(Je,"analyses",r));if(u.exists()){const d=u.data();let f=[];try{f=(await hg(jr(Je,"analyses",r,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(g){console.warn("Could not fetch updates for modal",g)}n({...d,updates:f})}}catch(u){console.error(u)}finally{o(!1)}}c()},[r]),$.useEffect(()=>{const c=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e]),s?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:b.jsx(wa,{className:"animate-spin text-white w-8 h-8"})}):t?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:c=>c.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:b.jsx(xs,{className:"w-5 h-5 text-gray-500"})}),b.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:b.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[b.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&b.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[b.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),b.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:b.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),b.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[b.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&b.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),b.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((c,u)=>b.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:u+1}),b.jsx("span",{children:c})]},u))})]}),t.updates&&t.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((c,u)=>b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.imageUrl&&b.jsx("img",{src:c.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString():""}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:c.note})]},u))})]})]})]})}):null}function v9(){const{t:r}=zn(),{currentUser:e}=si(),[t,n]=$.useState([]),[s,o]=$.useState(!0),[c,u]=$.useState(!1),[d,f]=$.useState(null),[g,y]=$.useState(null),[v,w]=$.useState("All"),[E,k]=$.useState(!1),[M,V]=$.useState(""),H=10,[U,F]=$.useState(!0),z=[{value:"All",labelKey:"community"},...Hf].filter(D=>(D.value==="All"?r("community")+" (All)":r(D.labelKey)).toLowerCase().includes(M.toLowerCase()));return $.useEffect(()=>{o(!0);let D;v==="All"?D=gc(jr(Je,"posts"),W6("createdAt","desc"),tT(H)):D=gc(jr(Je,"posts"),Lh("plantType","==",v),tT(50));const S=ec(D,T=>{const I=T.docs.map(N=>({id:N.id,...N.data()}));I.sort((N,j)=>{const C=N.createdAt?.seconds||0;return(j.createdAt?.seconds||0)-C}),n(I),o(!1),F(T.docs.length>=H)},T=>{console.error("Error fetching posts:",T),o(!1)});return()=>S()},[v]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[b.jsxs("div",{className:"relative w-full sm:w-64",children:[b.jsxs("div",{className:"relative",children:[b.jsx(HI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:r("select_plant"),value:M,onFocus:()=>k(!0),onChange:D=>{V(D.target.value),k(!0)}}),v!=="All"?b.jsx("button",{onClick:()=>{w("All"),V("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:b.jsx(xs,{className:"w-4 h-4 text-gray-500"})}):b.jsx(Y_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),E&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(!1)}),b.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[z.map(D=>b.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{w(D.value),V(D.value==="All"?"":r(D.labelKey)),k(!1)},children:[b.jsx("span",{children:D.value==="All"?r("community"):r(D.labelKey)}),v===D.value&&b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},D.value)),z.length===0&&b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:r("no_results")||"No results"})]})]})]}),b.jsxs("button",{onClick:()=>{if(!e){alert(r("login_to_post")||"Please login to post.");return}u(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(AV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})]})]}),s?b.jsx(nv,{}):t.length>0?b.jsx("div",{className:"space-y-6",children:t.map(D=>b.jsx(cR,{post:D,onViewAnalysis:S=>y(S),onUserClick:S=>{f({id:S,name:D.authorName||"Gardener",avatar:D.userAvatar})}},D.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),c&&b.jsx(p9,{onClose:()=>u(!1),onPostCreated:()=>{}}),g&&b.jsx(_9,{analysisId:g,onClose:()=>y(null)}),d&&b.jsx(y9,{user:d,onClose:()=>f(null)})]})}const b9="modulepreload",w9=function(r){return"/"+r},jT={},x9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=w9(g),g in jT)return;jT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":b9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((E,k)=>{w.addEventListener("load",E),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function $n(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class zh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const xf={decode:function(r,e){return $n(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function wR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(wR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function VT(r,e,t){const n=wR(r,e||{});return t?.appendChild(n),n}var E9=Object.freeze({__proto__:null,createElement:VT,default:VT});const T9={fetchBlob:function(r,e,t){return $n(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){$n(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Wt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function go(r,e){const t=Wt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ua(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class S9 extends zh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Wt(!1),this._currentTime=Wt(0),this._duration=Wt(0),this._volume=Wt(this.media.volume),this._muted=Wt(this.media.muted),this._playbackRate=Wt(this.media.playbackRate||1),this._seeking=Wt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return $n(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function A9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function I9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function LT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function xR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function UT(r,e){if(!xR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function zT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function ER(r){const e=r._cleanup;typeof e=="function"&&e()}function R9(r){const e=Wt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=go((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=go((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),ER(e)}}}class C9 extends zh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=LT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=LT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=R9(this.scrollContainer);const e=ua((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Wt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,E=v.clientY,k=!1;const M=Date.now(),V=t.getBoundingClientRect(),{left:H,top:U}=V,F=T=>{if(T.defaultPrevented||d.size>1||f&&Date.now()-M<c)return;const I=T.clientX,N=T.clientY,j=I-w,C=N-E;(k||Math.abs(j)>s||Math.abs(C)>s)&&(T.preventDefault(),T.stopPropagation(),k||(u.set({type:"start",x:w-H,y:E-U}),k=!0),u.set({type:"move",x:I-H,y:N-U,deltaX:j,deltaY:C}),w=I,E=N)},K=T=>{if(d.delete(T.pointerId),k){const I=T.clientX,N=T.clientY;u.set({type:"end",x:I-H,y:N-U})}g()},z=T=>{d.delete(T.pointerId),T.relatedTarget&&T.relatedTarget!==document.documentElement||K(T)},D=T=>{k&&(T.stopPropagation(),T.preventDefault())},S=T=>{T.defaultPrevented||d.size>1||k&&T.preventDefault()};document.addEventListener("pointermove",F),document.addEventListener("pointerup",K),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("click",D,{capture:!0}),g=()=>{document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",S),setTimeout((()=>{document.removeEventListener("click",D,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),ER(u)}}})(this.wrapper);const e=ua((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:E,height:k,length:M,options:V,pixelRatio:H}){const U=k/2,F=V.barWidth?V.barWidth*H:1,K=V.barGap?V.barGap*H:V.barWidth?F/2:0,z=F+K||1;return{halfHeight:U,barWidth:F,barGap:K,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*H:0,barIndexScale:M>0?E/z/M:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:E,barIndexScale:k,barSpacing:M,barWidth:V,halfHeight:H,vScale:U,canvasHeight:F,barAlign:K,barMinHeight:z}){const D=E[0]||[],S=E[1]||D,T=D.length,I=[];let N=0,j=0,C=0;for(let G=0;G<=T;G++){const J=Math.round(G*k);if(J>N){const{topHeight:ee,totalHeight:W}=A9({maxTop:j,maxBottom:C,halfHeight:H,vScale:U,barMinHeight:z,barAlign:K}),Z=I9({barAlign:K,halfHeight:H,topHeight:ee,totalHeight:W,canvasHeight:F});I.push({x:N*M,y:Z,width:V,height:W}),N=J,j=0,C=0}const P=Math.abs(D[G]||0),O=Math.abs(S[G]||0);P>j&&(j=P),O>C&&(C=O)}return I})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const E of w)f&&"roundRect"in n?n.roundRect(E.x,E.y,E.width,E.height,f):n.rect(E.x,E.y,E.width,E.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((E,k)=>{const M=E.length,V=M?f/M:0,H=v,U=k===0?-1:1,F=[{x:0,y:H}];let K=0,z=0;for(let D=0;D<=M;D++){const S=Math.round(D*V);if(S>K){const I=H+(Math.round(z*v*y)||1)*U;F.push({x:K,y:I}),K=S,z=0}const T=Math.abs(E[D]||0);T>z&&(z=T)}return F.push({x:K,y:H}),F}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const E=(f=y[w])!==null&&f!==void 0?f:0,k=Math.abs(E);k>v&&(v=k)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});xR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:E,totalWidth:k,options:M}){return UT(Math.min(8e3,E,k),M)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=E=>{if(E<0||E>=w||y[E])return;y[E]=!0;const k=E*g;let M=Math.min(f-k,g);if(M=UT(M,t),M<=0)return;const V=(function({channelData:H,offset:U,clampedWidth:F,totalWidth:K}){return H.map((z=>{const D=Math.floor(U/K*z.length),S=Math.floor((U+F)/K*z.length);return z.slice(D,S)}))})({channelData:e,offset:k,clampedWidth:M,totalWidth:f});this.renderSingleCanvas(V,t,M,s,k,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let E=0;E<w;E++)v(E);return}if(zT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((E=>v(E))),w>1){const E=this.on("scroll",(()=>{const{scrollLeft:k}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),zT({scrollLeft:k,totalWidth:f,numCanvases:w}).forEach((M=>v(M)))}));this.unsubscribeOnScroll.push(E)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(w=Object.getOwnPropertySymbols(g);E<w.length;E++)y.indexOf(w[E])<0&&Object.prototype.propertyIsEnumerable.call(g,w[E])&&(v[w[E]]=g[w[E]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return $n(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const E=Math.ceil(f*g),k=E>y,M=!!(v&&!k);return{scrollWidth:E,isScrollable:k,useParentWidth:M,width:(M?y:E)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $n(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class N9 extends zh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class zy extends zh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $n(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $n(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $n(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const k9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class vh extends S9{static create(e){return new vh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new zy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},k9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const E=(d=u?.currentTime)!==null&&d!==void 0?d:Wt(0),k=(f=u?.duration)!==null&&f!==void 0?f:Wt(0),M=(g=u?.isPlaying)!==null&&g!==void 0?g:Wt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Wt(!1),H=(v=u?.volume)!==null&&v!==void 0?v:Wt(1),U=(w=u?.playbackRate)!==null&&w!==void 0?w:Wt(1),F=Wt(null),K=Wt(null),z=Wt(""),D=Wt(0),S=Wt(0),T=go((()=>!M.value),[M]),I=go((()=>F.value!==null),[F]),N=go((()=>I.value&&k.value>0),[I,k]),j=go((()=>E.value),[E]),C=go((()=>k.value>0?E.value/k.value:0),[E,k]);return{state:{currentTime:E,duration:k,isPlaying:M,isPaused:T,isSeeking:V,volume:H,playbackRate:U,audioBuffer:F,peaks:K,url:z,zoom:D,scrollPosition:S,canPlay:I,isReady:N,progress:j,progressPercent:C},actions:{setCurrentTime:G=>{const J=Math.max(0,Math.min(k.value||1/0,G));E.set(J)},setDuration:G=>{k.set(Math.max(0,G))},setPlaying:G=>{M.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const J=Math.max(0,Math.min(1,G));H.set(J)},setPlaybackRate:G=>{const J=Math.max(.1,Math.min(16,G));U.set(J)},setAudioBuffer:G=>{F.set(G),G&&k.set(G.duration)},setPeaks:G=>{K.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{D.set(Math.max(0,G))},setScrollPosition:G=>{S.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new N9;const o=t?void 0:this.getMediaElement();this.renderer=new C9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ua((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ua((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ua((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ua((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ua((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ua((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=xf.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=xf.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return $n(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield T9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof zy&&(u.duration=c)}if(n)this.decodedData=xf.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield xf.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const E=y[w];Math.abs(E)>Math.abs(v)&&(v=E)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return $n(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof zy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return $n(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $n(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}vh.BasePlugin=class extends zh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},vh.dom=E9;const D9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),O9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=vh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const E=Math.floor(w/60),k=Math.floor(w%60);return`${E}:${k<10?"0":""}${k}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(wV,{className:"w-5 h-5 fill-current"}):b.jsx(TV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function M9(){const{chatId:r}=XT(),{currentUser:e}=si(),{t,i18n:n}=zn(),s=Es(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Go();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[E,k]=$.useState(null),[M,V]=$.useState(null),[H,U]=$.useState(null),[F,K]=$.useState(!1),[z,D]=$.useState(null),[S,T]=$.useState(0),[I,N]=$.useState(null),[j,C]=$.useState(!1),[G,J]=$.useState(null),P=vr(),[O,ee]=$.useState(P.state?.targetUser||null),[W,Z]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&Z(r)},[r]),$.useEffect(()=>{r==="new"&&O&&e&&(async()=>{try{k(O);const Ee=gc(jr(Je,"chats"),Lh("participants","array-contains",e.uid)),De=(await hg(Ee)).docs.find(xe=>xe.data().participants.includes(O.uid));De?(Z(De.id),s(`/messages/${De.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,O,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=ec(Vt(Je,"chats",W),Be=>{if(Be.exists()){const De=Be.data(),xe=De.participants.find(tt=>tt!==e.uid);if(xe){if(De.participantData?.[xe]){const tt=De.participantData[xe];k(gt=>gt?.id===xe?gt:{...tt,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Ee=ec(jr(Je,"chats",W,"messages"),Be=>{const De=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,tt)=>(xe.createdAt?.seconds||0)-(tt.createdAt?.seconds||0));f(De),w(!1),H||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,H,r,s]),$.useEffect(()=>{if(!M)return;const pe=ec(Vt(Je,"users",M),Ee=>{if(Ee.exists()){const Be=Ee.data();k(De=>({...De,...Be}))}});return()=>pe()},[M]);const q=async(pe,Ee=null,Be=null,De="text")=>{C(!0);try{let xe=W;if(!xe&&r==="new"){if(!O)throw new Error("Target user missing");const{startChat:ut}=await x9(async()=>{const{startChat:Fn}=await Promise.resolve().then(()=>PL);return{startChat:Fn}},[]);xe=await ut(e.uid,O.uid,{name:O.name,avatar:O.photoURL},{name:e.displayName,avatar:e.photoURL}),Z(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let tt=null,gt=De,Bn=Be;if(Ee||I){let ut=Ee||I.file;if(gt==="image"||I?.type==="image"){gt="image",Bn=Bn||I?.file.name;const Fn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{ut=await fn(ut,Fn)}catch(Bt){console.warn("Compression failed, using original",Bt)}}else I&&(gt=I.type,Bn=I.file.name);if(tt=await D9(ut),tt.length>95e4)throw new Error("File is too large for database storage even after compression.")}H?(await Ur(Vt(Je,"chats",xe,"messages",H),{text:pe,editedAt:Vr()}),U(null)):(await dg(jr(Je,"chats",xe,"messages"),{text:pe||"",type:gt,fileUrl:tt,fileName:Bn,senderId:e.uid,createdAt:Vr()}),await Ur(Vt(Je,"chats",xe),{lastMessage:gt==="audio"?" Voice Message":gt==="image"?" Photo":pe||" File",updatedAt:Vr()})),y(""),N(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{C(!1)}},Q=async pe=>{pe.preventDefault(),!(!g.trim()&&!I)&&await q(g)},ie=async pe=>{if(window.confirm("Delete this message?"))try{await EI(Vt(Je,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},se=n.language==="tr"?Z_:gg,ne=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${J_(new Date(Ee),{addSuffix:!0,locale:se})}`},_e=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Ae=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Pe=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",De=Be==="image"?URL.createObjectURL(Ee):null;N({file:Ee,type:Be,previewUrl:De})},Ce=pe=>{y(pe.text||""),U(pe.id),N(null),c.current&&(c.current.value="")},et=()=>{U(null),y(""),N(null)},at=$.useRef("cancel"),ot=$.useRef(null),un=$.useRef(null),Rt=$.useRef(null),[mt,Ct]=$.useState(0);$.useEffect(()=>{let pe;return F?(T(0),pe=setInterval(()=>T(Ee=>Ee+1),1e3)):(T(0),Ct(0)),()=>{clearInterval(pe),Rt.current&&cancelAnimationFrame(Rt.current),ot.current&&ot.current.close()}},[F]);const it=()=>{if(!un.current)return;const pe=new Uint8Array(un.current.fftSize);un.current.getByteTimeDomainData(pe);let Ee=0;for(let De=0;De<pe.length;De++)Ee+=Math.abs(pe[De]-128);const Be=Ee/pe.length;Ct(Be*10),Rt.current=requestAnimationFrame(it)},st=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext);await Ee.resume();const Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,ot.current=Ee,un.current=Be,it();const xe=new MediaRecorder(pe),tt=[];xe.ondataavailable=gt=>tt.push(gt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(gt=>gt.stop()),ot.current&&ot.current.close(),Rt.current&&cancelAnimationFrame(Rt.current),at.current==="send"){const gt=new Blob(tt,{type:"audio/webm"});await q(null,gt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),D(xe),K(!0),at.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},qe=pe=>{!z||z.state==="inactive"||(at.current=pe,z.stop(),K(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(jj,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),E?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:E.photoURL||E.avatar||`https://ui-avatars.com/api/?name=${E.name||"User"}`,alt:E.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:E.name||E.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${_e(E)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:ne(E)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",De=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[De&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(O9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(hT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Ae(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ce(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(zI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>ie(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(Em,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Ae(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),H&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:et,children:b.jsx(xs,{className:"w-4 h-4"})})]}),I&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[I.type==="image"?b.jsx("img",{src:I.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(Jj,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:I.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(xs,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:F?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>qe("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(Em,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(S*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.max(0,mt-5),De=Math.min(1,Be/40),xe=Math.sin(Ee*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,De*36*xe)}px`,opacity:.5+De*.5}},Ee)})})]}),b.jsx("button",{onClick:()=>qe("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(ph,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Pe,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:H,children:b.jsx(hT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:H?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||I?b.jsx("button",{onClick:Q,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(ph,{className:"w-5 h-5"})}):b.jsx("button",{onClick:st,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(yV,{className:"w-5 h-5"})})]})})]})}function P9(){const{t:r,i18n:e}=zn(),t=Es(),{currentUser:n,refreshUser:s}=si(),{addToast:o}=Go(),{userId:c}=XT(),[u,d]=$.useState(null),[f,g]=$.useState(""),[y,v]=$.useState(""),[w,E]=$.useState(!1),[k,M]=$.useState([]),[V,H]=$.useState(!0),U=$.useRef(null),F=!c||n&&c===n.uid,K=c||n?.uid;$.useEffect(()=>{(async()=>{if(K){H(!0);try{const N=Vt(Je,"users",K),j=await Ra(N);let C=null;j.exists()?C={uid:j.id,...j.data()}:(C={uid:K},F&&n&&(C={...C,...n})),C&&(d(C),F?(g(C.name||C.displayName||n.displayName||""),v(C.avatar||C.photoURL||n.photoURL||"")):(g(C.name||C.displayName||"Gardener"),v(C.avatar||C.photoURL||"")));const G=gc(jr(Je,"posts"),Lh("userId","==",String(K)));let P=(await hg(G)).docs.map(O=>({id:O.id,...O.data()}));P.sort((O,ee)=>{const W=O.createdAt?.seconds||0;return(ee.createdAt?.seconds||0)-W}),M(P)}catch(N){console.error("Failed to load profile data",N)}finally{H(!1)}}})()},[K,F,n]);const z=async I=>{if(!F)return;const N=I.target.files[0];if(N){E(!0);try{const C=await fn(N,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),G=await new Promise(J=>{const P=new FileReader;P.readAsDataURL(C),P.onload=O=>J(O.target.result)});v(G),await mh(Vt(Je,"users",n.uid),{avatar:G,email:n.email,name:f||n.displayName,updatedAt:new Date},{merge:!0});try{await n0(ir.currentUser,{photoURL:G})}catch{}k0(n.uid,f,G),await s(),o(r("profile_updated")||"Profile updated!","success")}catch(j){console.error(j),o("Error updating avatar.","error")}finally{E(!1)}}},D=async I=>{if(I.preventDefault(),!!F&&f.trim()){E(!0);try{await n0(ir.currentUser,{displayName:f}),await mh(Vt(Je,"users",n.uid),{name:f,updatedAt:new Date},{merge:!0}),k0(n.uid,f,y),await s(),o(r("profile_updated")||"Profile updated!","success")}catch{o("Failed to update profile.","error")}finally{E(!1)}}};if(!K)return b.jsx("div",{className:"p-10 text-center",children:r("login_required")});if(V&&!u)return b.jsx(nv,{});const S=I=>!I?.lastSeen||!I.lastSeen.seconds?!1:Date.now()-I.lastSeen.seconds*1e3<180*1e3,T=I=>I?.lastSeen?J_(new Date(I.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?Z_:gg}):"Offline";return b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${F?"group cursor-pointer":""} mt-2`,onClick:()=>F&&U.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(F?y:u?.avatar||u?.photoURL)?b.jsx("img",{src:F?y:u?.avatar||u?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${F?f||"Gardener":u?.name||u?.displayName||k.length>0&&k[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!F&&u&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${S(u)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${S(u)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),S(u)?"Online":T(u)]}),F&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(Eo,{className:"w-8 h-8 text-white"})}),w&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(wa,{className:"animate-spin text-green-600"})})]}),F&&b.jsx("input",{type:"file",ref:U,onChange:z,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:F?f||r("gardener")||"Bahvan":u?.name||u?.displayName||k.length>0&&k[0].authorName||r("gardener")||"Bahvan"}),F&&b.jsx("p",{className:"text-sm text-gray-500",children:n.email})]}),F?b.jsxs("form",{onSubmit:D,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:r("display_name")}),b.jsx("input",{type:"text",value:f,onChange:I=>g(I.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[w?b.jsx(wa,{className:"animate-spin w-4 h-4"}):b.jsx(FI,{className:"w-4 h-4"}),b.jsx("span",{children:r("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[r("joined")||"Katlma Tarihi",": ",u?.createdAt?.seconds?new Date(u.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):r("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!n){o(r("login_to_message")||"Please login to send messages","info"),t("/login");return}const I={uid:u.uid||K,name:u.name||u.displayName||k.length>0&&k[0].authorName||"Gardener",photoURL:u.photoURL||u.avatar||null};t("/messages/new",{state:{targetUser:I}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(gh,{className:"w-5 h-5"}),b.jsx("span",{children:r("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:r("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.reduce((I,N)=>I+(N.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:r("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(nV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:F?r("my_posts")||"Gnderilerim":r("user_posts_title",{name:u?.name||"Kullanc"})||`${u?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(wa,{className:"w-8 h-8 animate-spin text-gray-300"})}):k.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:k.map(I=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(cR,{post:{...I,hideAuthor:F},onViewAnalysis:()=>{}})},I.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(cV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:r("no_posts_yet")})]})]})]})})}function j9(){const{t:r}=zn(),{currentUser:e}=si(),{addToast:t}=Go();Es(),vr();const[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(null),[f,g]=$.useState(!1),[y,v]=$.useState(null),[w,E]=$.useState(""),[k,M]=$.useState(!1),V=$.useRef(null),H=async U=>{if(!w.trim()&&!V.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}M(!0);try{let F=null,K=null;if(V.current?.files?.[0]){const z=V.current.files[0];F=await new Promise(D=>{const S=new FileReader;S.onload=T=>D(T.target.result),S.readAsDataURL(z)});try{K=await oR(U.mainImage,F,U.result.disease_name)}catch(D){console.error("AI Progress Check Failed:",D)}}await nR(U.id,F,w,K),v(null),E(""),V.current&&(V.current.value=""),t("Durum gncellemesi kaydedildi!","success"),loadAnalyses()}catch(F){console.error("Feedback failed",F),t("Gncelleme kaydedilemedi.","error")}finally{M(!1)}};return o?b.jsx(nv,{}):n.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(zi,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(Zr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(Eo,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(xm,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[n.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:n.map(U=>{const F=U.nextCheckup?.seconds?new Date>new Date(U.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===U.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":F?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:K=>handleDelete(K,U.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(Em,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>toggleExpand(U.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:U.mainImage,alt:U.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),F&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:U.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:U.plantType||U.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:U.result.latin_name})]}):U.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(MI,{className:"w-3 h-3"}),U.createdAt?.seconds?new Date(U.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),U.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:U.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(Bj,{className:"w-4 h-4"}),b.jsxs("span",{children:[U.treatmentDuration||"1 Hafta"," Plan"]})]}),U.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(C0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(Y_,{className:`w-6 h-6 text-gray-300 transition-transform ${u===U.id?"rotate-180":""}`})})]}),u===U.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:U.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(fT,{className:"w-5 h-5 text-green-600"}),U.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),U.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(U.result.is_treatable===!1?U.result.preventive_measures:U.result.treatment_steps)?.map((K,z)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${U.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:z+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:K})]},z))})]}),U.updates&&U.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:U.updates.map((K,z)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${K.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":K.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[K.imageUrl&&b.jsx("img",{src:K.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(K.createdAt?.seconds*1e3).toLocaleDateString()}),K.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${K.aiAnalysis.status==="better"?"bg-green-200 text-green-800":K.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:K.aiAnalysis.status==="better"?"YLEYOR":K.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:K.note}),K.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:K.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:K.aiAnalysis.advice})]})]},z))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[U.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===U.id?null:U.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(Eo,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:K=>handleShare(K,U),disabled:U.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${U.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(C0,{className:"w-5 h-5"}),U.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),y===U.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[k&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(wa,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(xm,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:w,onChange:K=>E(K.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:V,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>H(U),disabled:k,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(ph,{className:"w-3 h-3"})]})]})]})]})]},U.id)})}),f&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(Qj,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(fT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(Eo,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function V9(){const{t:r}=zn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(Eo,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function L9(){const{t:r,i18n:e}=zn(),{logout:t,currentUser:n}=si(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(UI,{className:"w-5 h-5"}):b.jsx(qI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(eV,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx($j,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(Tm,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(LI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const U9=$.createContext(),z9=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(U9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var BT={},B9="@vercel/analytics",F9="1.6.1",H9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function TR(){return typeof window<"u"}function SR(){try{const r="production"}catch{}return"production"}function q9(r="auto"){if(r==="auto"){window.vam=SR();return}window.vam=r}function $9(){return(TR()?window.vam:SR())||"production"}function D0(){return $9()==="development"}function G9(r){return r.scriptSrc?r.scriptSrc:D0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function K9(r={debug:!0}){var e;if(!TR())return;q9(r.mode),H9(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=G9(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=B9+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=F9,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=D0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},D0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function Y9({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function Q9(){if(!(typeof process>"u"||typeof BT>"u"))return BT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function W9(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{K9({framework:r.framework||"react",basePath:r.basePath??Q9(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&Y9({route:r.route,path:r.path})},[r.route,r.path]),null}function X9(){return b.jsx(Router,{children:b.jsx(NI,{children:b.jsx(z9,{children:b.jsxs(JV,{children:[b.jsxs(lk,{children:[b.jsx(Wr,{path:"/login",element:b.jsx(eL,{})}),b.jsx(Wr,{path:"/register",element:b.jsx(nL,{})}),b.jsxs(Wr,{path:"/",element:b.jsx(ZV,{}),children:[b.jsx(Wr,{index:!0,element:b.jsx(LL,{})}),b.jsx(Wr,{path:"scan",element:b.jsx(V9,{})}),b.jsx(Wr,{path:"analyses",element:b.jsx(j9,{})}),b.jsx(Wr,{path:"community",element:b.jsx(v9,{})}),b.jsx(Wr,{path:"chat",element:b.jsx(M9,{})}),b.jsx(Wr,{path:"profile",element:b.jsx(P9,{})}),b.jsx(Wr,{path:"settings",element:b.jsx(L9,{})})]})]}),b.jsx(W9,{})," "]})})})})}const J9="Plant AI",Z9="Welcome to Plant AI",e8="Plant Diagnosis",t8="Community",n8="Profile",r8="Login",i8="Messages",s8="Language",a8="Logout",o8="Dark Mode",l8="Light Mode",c8="My Analyses",u8="Register",h8="Upload Photo",d8="Take Photo",f8="Analyzing...",m8="Diagnosis Results",g8="Treatment",p8="Confidence",y8="Save Changes",_8="Saving...",v8="Display Name",b8="Email",w8="Tap to change avatar",x8="Profile updated successfully!",E8="About Project",T8="Do you know the name of this plant?",S8="e.g., Rose, Tomato, Unknown...",A8="1. Plant Name",I8="2. Capture Photo",R8="Next",C8="I don't know",N8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",k8="Take Close-up Photo",D8="Login to view detailed diagnosis and treatment plan.",O8="Login to View Results",M8="Detailed analysis is available for members only.",P8="AI Powered Plant Doctor",j8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',V8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",L8="Start Diagnosis",U8="Identify",z8="Tell us the plant name or type.",B8="Analyze",F8="Upload photos of the affected area.",H8="Heal",q8="Get instant treatment plan.",$8="Welcome, ",G8="Diagnosis failed. Please try again.",K8="Back",Y8="Plant",Q8="Tomato",W8="Pepper",X8="Cucumber",J8="Rose",Z8="Succulent",ez="Orchid",tz="Lemon",nz="Strawberry",rz="Mint",iz="Other",sz="Healthy / No Issue",az="Yellowing Leaves",oz="Leaf Spots",lz="Wilting",cz="Pests / Bugs",uz="Root/Stem Rot",hz="Mold / Fungus",dz="Unknown / Help Needed",fz="Auto-Detect from Image",mz="Detecting...",gz="Ask Question",pz="Please login to post.",yz="Login Required",_z="Are you sure you want to delete this post?",vz="Just now",bz="Failed to delete post",wz="Failed to post comment",xz="Failed to update post",Ez="Add a comment...",Tz="Please login to comment.",Sz="No comments yet. Be the first!",Az="Edit Post",Iz="Cancel",Rz="Save",Cz="Gardener",Nz="Community Member",kz="Send Message",Dz="Starting...",Oz="Please login to message users.",Mz="You cannot message yourself.",Pz="Failed to start chat.",jz=" No posts yet",Vz="Be the first to share your garden!",Lz="No results",Uz="Like",zz="Comment",Bz="Edit",Fz="Joined",Hz="Unknown Date",qz="View Profile",$z="Block User",Gz="Unblock User",Kz="Posts",Yz="Likes",Qz="My Posts",Wz="{{name}}'s Posts",Xz="New Chat",Jz="View Analysis Report",Zz="Type a message...",e7="POWERED BY GEMINI AI",t7="Heal your plants with",n7="AI Precision",r7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",i7="Instant Analysis",s7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",a7="Smart Interactions",o7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",l7="Verified Treatments",c7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",u7="Your Personal Pocket Botanist",h7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",d7="Open Camera",f7="Select from Gallery",m7="No plant detected. Please ensure the subject is a clear plant or leaf.",g7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",p7="Retry",y7="Camera access denied. Please check your browser permissions.",_7="Last seen",v7="Prevention Tips",b7="This plant may not fully recover, but follow these steps to prevent spread.",w7="Description",x7="Urgency",E7="Spread Risk",T7="New Scan",S7={app_name:J9,welcome:Z9,plant_diagnosis:e8,community:t8,profile:n8,login:r8,messages:i8,language:s8,logout:a8,dark_mode:o8,light_mode:l8,analyses:c8,register:u8,upload_photo:h8,take_photo:d8,analyzing:f8,results:m8,treatment:g8,confidence:p8,save_changes:y8,saving:_8,display_name:v8,email:b8,change_avatar:w8,profile_updated:x8,about:E8,what_plant_question:T8,what_plant_placeholder:S8,scan_step_1:A8,scan_step_2:I8,next_step:R8,skip:C8,need_macro_photo:N8,take_macro_photo:k8,login_blur_text:D8,login_to_view:O8,guest_limited:M8,hero_badge:P8,hero_title:j8,hero_desc:V8,start_diagnosis:L8,step_1_title:U8,step_1_desc:z8,step_2_title:B8,step_2_desc:F8,step_3_title:H8,step_3_desc:q8,welcome_user:$8,error_diagnosis_failed:G8,back:K8,plant:Y8,plant_tomato:Q8,plant_pepper:W8,plant_cucumber:X8,plant_rose:J8,plant_succulent:Z8,plant_orchid:ez,plant_lemon:tz,plant_strawberry:nz,plant_mint:rz,plant_other:iz,disease_none:sz,disease_yellowing:az,disease_spots:oz,disease_wilting:lz,disease_bugs:cz,disease_rot:uz,disease_mold:hz,disease_unknown:dz,auto_detect:fz,detecting:mz,ask_question:gz,login_to_post:pz,login_required:yz,confirm_delete_post:_z,just_now:vz,failed_delete_post:bz,failed_post_comment:wz,failed_update_post:xz,add_comment_placeholder:Ez,login_to_comment:Tz,no_comments_yet:Sz,edit_post:Az,cancel:Iz,save:Rz,gardener:Cz,community_member:Nz,send_message:kz,starting_chat:Dz,login_to_message:Oz,cannot_message_self:Mz,failed_start_chat:Pz,no_posts_yet:jz,be_the_first:Vz,no_results:Lz,like:Uz,comment:zz,edit:Bz,delete:"Delete",joined:Fz,unknown_date:Hz,view_profile:qz,block_user:$z,unblock_user:Gz,posts:Kz,likes:Yz,my_posts:Qz,user_posts_title:Wz,new_conversation:Xz,view_analysis_report:Jz,type_message:Zz,ai_powered_v2:e7,hero_title_1:t7,hero_title_highlight:n7,hero_desc_v2:r7,feature_1_title:i7,feature_1_desc:s7,feature_2_title:a7,feature_2_desc:o7,feature_3_title:l7,feature_3_desc:c7,summary_title:u7,summary_desc:h7,open_camera:d7,upload_gallery:f7,error_not_plant:m7,error_server_busy:g7,retry:p7,camera_permission_denied:y7,last_seen:_7,prevention_tips:v7,plant_not_recoverable:b7,description:w7,urgency:x7,spread_risk:E7,new_scan:T7},A7="Bitki AI",I7="Bitki AI'ye Hogeldiniz",R7="Bitki Tehisi",C7="Topluluk",N7="Profil",k7="Giri Yap",D7="Mesajlar",O7="Dil",M7="k Yap",P7="Koyu Tema",j7="Aydnlk Tema",V7="Analizlerim",L7="Kayt Ol",U7="Fotoraf Ykle",z7="Fotoraf ek",B7="Analiz ediliyor...",F7="Bitki",H7="Domates",q7="Biber",$7="Salatalk",G7="Patlcan",K7="Patates",Y7="Soan",Q7="Sarmsak",W7="Marul",X7="Ispanak",J7="Havu",Z7="Fasulye",eB="Msr",tB="Kabak",nB="ilek",rB="Limon",iB="Portakal",sB="Elma",aB="zm",oB="Karpuz",lB="Kavun",cB="Kiraz",uB="eftali",hB="Gl",dB="Orkide",fB="Sukulent",mB="Lale",gB="Ayiei",pB="Papatya",yB="Lavanta",_B="Kakts",vB="Zeytin",bB="am",wB="Palmiye",xB="Nane",EB="Fesleen",TB="Biberiye",SB="Maydanoz",AB="Dier",IB="Salkl / Sorun Yok",RB="Yaprak Sararmas",CB="Yaprak Lekeleri",NB="Solma",kB="Bcek / Haere",DB="Kk/Gvde rmesi",OB="Kf / Mantar",MB="Mildiy",PB="Besin Eksiklii",jB="Bilinmiyor / Yardm Lazm",VB="Fotoraftan Bul",LB="Taranyor...",UB="Bitki Se...",zB="Tehis Sonular",BB="Tedavi",FB="Gven Oran",HB="Deiiklikleri Kaydet",qB="Analizi Kaydet",$B="Kaydedildi",GB="Analiz baaryla kaydedildi!",KB="Bu analiz zaten toplulukla paylald.",YB="Bu analizi toplulukla paylamak istiyor musunuz?",QB="Baaryla paylald!",WB="Analizlerim",XB="Kaydediliyor...",JB="Grnen sim",ZB="E-posta",eF="Fotoraf deitirmek iin dokunun",tF="Profil baaryla gncellendi!",nF="Proje Hakknda",rF="Bu bitkinin adn biliyor musunuz?",iF="rn. Gl, Domates, Bilmiyorum...",sF="1. Bitki Ad",aF="2. Fotoraf ek",oF="Devam Et",lF="Bilmiyorum",cF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",uF="Yakndan ek",hF="Detayl tehis ve tedavi plann grmek iin giri yapn.",dF="Sonucu Grmek in Giri Yap",fF="Detayl analiz sadece yelere zeldir.",mF="Yapay Zeka Destekli Bitki Doktoru",gF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',pF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",yF="Tehise Bala",_F="Tanmla",vF="Bitkinin adn veya trn belirtin.",bF="Analiz Et",wF="Etkilenen blgenin fotorafn ykleyin.",xF="yiletir",EF="Annda tedavi planna kavuun.",TF="Hogeldin, ",SF="Tehis baarsz oldu. Ltfen tekrar deneyin.",AF="Geri",IF="Az nce",RF="Bu gnderiyi silmek istediinize emin misiniz?",CF="Gnderi silinemedi",NF="Yorum gnderilemedi",kF="Gnderi gncellenemedi",DF="Yorum yaz...",OF="Yorum yapmak iin giri yapn.",MF="Henz yorum yok. lk yorumu sen yap!",PF="Gnderiyi Dzenle",jF="ptal",VF="Kaydet",LF="Bahvan",UF="Topluluk yesi",zF="Mesaj Gnder",BF="Balatlyor...",FF="Mesaj gndermek iin giri yapn.",HF="Kendinize mesaj atamazsnz.",qF="Sohbet balatlamad.",$F=" Henz gnderi yok",GF="Baheni paylaan ilk kii ol!",KF="Sonu yok",YF="Been",QF="Yorum",WF="Dzenle",XF="Ad Soyad",JF="ifre",ZF="Toplulua katlmak iin hesap oluturun.",eH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",tH="E-postanz Dorulayn",nH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",rH="E-posta Uygulamasn A",iH="Doruladm, Giri Yap",sH="Zaten hesabnz var m?",aH="Katlma Tarihi",oH="Bilinmiyor",lH="Profili Gr",cH="Kullancy Engelle",uH="Engeli Kaldr",hH="Gnderi",dH="Beeni",fH="Gnderilerim",mH="{{name}} Gnderileri",gH="Yeni Sohbet",pH="Analiz Raporunu Gr",yH="Mesaj yazn...",_H="GEMINI AI DESTEKL",vH="Bitkilerinizi yiletirin",bH="Yapay Zeka Hassasiyeti",wH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",xH="Annda Analiz",EH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",TH="Akll Etkileimler",SH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",AH="Dorulanm Tedaviler",IH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",RH="Kiisel Cep Botanikiniz",CH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",NH="Kameray A",kH="Galeriden Se",DH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",OH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",MH="Tekrar Dene",PH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",jH="Yakn ekim Fotoraf",VH="Bitki AI Dnyor...",LH="Analiz kaydedilemedi:",UH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",zH="Bu cihazda mikrofon bulunamad.",BH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",FH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",HH="Kaydediliyor...",qH="Mesaj dzenleniyor...",$H="Mesajnz dzenleyin...",GH="Tedavi sreci balatld!",KH="Bilgiyi Kaydet",YH="Tedaviye Bala",QH="Henz Bir Analiz Yok",WH="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",XH="Tedavi & Takip",JH="Kayt",ZH="Bu analizi silmek istediinizden emin misiniz?",eq="Gelime Ekle",tq="Paylald",nq="Payla",rq="Toplulukla paylaarak bakalarna yardmc ol!",iq="Soru Sor",sq="Fotoraf",aq="Sesli Mesaj",oq="Son grlme {{days}} gn nce",lq="Son grlme {{hours}} saat nce",cq="Son grlme {{minutes}} dakika nce",uq="Az nce grld",hq="Dzenlendi",dq="Payla",fq="Balanty Kopyala",mq="Balant kopyaland!",gq="Sosyal Medyada Payla",pq="Son grlme",yq="Koruyucu nlemler",_q="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",vq="Aklama",bq="Aciliyet",wq="Yaylma Riski",xq="Yeni Tarama",Eq={app_name:A7,welcome:I7,plant_diagnosis:R7,community:C7,profile:N7,login:k7,messages:D7,language:O7,logout:M7,dark_mode:P7,light_mode:j7,analyses:V7,register:L7,upload_photo:U7,take_photo:z7,analyzing:B7,plant:F7,plant_tomato:H7,plant_pepper:q7,plant_cucumber:$7,plant_eggplant:G7,plant_potato:K7,plant_onion:Y7,plant_garlic:Q7,plant_lettuce:W7,plant_spinach:X7,plant_carrot:J7,plant_bean:Z7,plant_corn:eB,plant_zucchini:tB,plant_strawberry:nB,plant_lemon:rB,plant_orange:iB,plant_apple:sB,plant_grape:aB,plant_watermelon:oB,plant_melon:lB,plant_cherry:cB,plant_peach:uB,plant_rose:hB,plant_orchid:dB,plant_succulent:fB,plant_tulip:mB,plant_sunflower:gB,plant_daisy:pB,plant_lavender:yB,plant_cactus:_B,plant_olive:vB,plant_pine:bB,plant_palm:wB,plant_mint:xB,plant_basil:EB,plant_rosemary:TB,plant_parsley:SB,plant_other:AB,disease_none:IB,disease_yellowing:RB,disease_spots:CB,disease_wilting:NB,disease_bugs:kB,disease_rot:DB,disease_mold:OB,disease_mildew:MB,disease_nutrient:PB,disease_unknown:jB,auto_detect:VB,detecting:LB,select_plant:UB,results:zB,treatment:BB,confidence:FB,save_changes:HB,save_analysis:qB,saved:$B,save_success:GB,already_shared:KB,confirm_share:YB,share_success:QB,my_analyses:WB,saving:XB,display_name:JB,email:ZB,change_avatar:eF,profile_updated:tF,about:nF,what_plant_question:rF,what_plant_placeholder:iF,scan_step_1:sF,scan_step_2:aF,next_step:oF,skip:lF,need_macro_photo:cF,take_macro_photo:uF,login_blur_text:hF,login_to_view:dF,guest_limited:fF,hero_badge:mF,hero_title:gF,hero_desc:pF,start_diagnosis:yF,step_1_title:_F,step_1_desc:vF,step_2_title:bF,step_2_desc:wF,step_3_title:xF,step_3_desc:EF,welcome_user:TF,error_diagnosis_failed:SF,back:AF,just_now:IF,confirm_delete_post:RF,failed_delete_post:CF,failed_post_comment:NF,failed_update_post:kF,add_comment_placeholder:DF,login_to_comment:OF,no_comments_yet:MF,edit_post:PF,cancel:jF,save:VF,gardener:LF,community_member:UF,send_message:zF,starting_chat:BF,login_to_message:FF,cannot_message_self:HF,failed_start_chat:qF,no_posts_yet:$F,be_the_first:GF,no_results:KF,like:YF,comment:QF,edit:WF,delete:"Sil",full_name:XF,password:JF,create_account_desc:ZF,verification_email_sent:eH,verify_email_title:tH,verify_email_desc:nH,open_email_app:rH,i_verified_it:iH,already_have_account:sH,joined:aH,unknown_date:oH,view_profile:lH,block_user:cH,unblock_user:uH,posts:hH,likes:dH,my_posts:fH,user_posts_title:mH,new_conversation:gH,view_analysis_report:pH,type_message:yH,ai_powered_v2:_H,hero_title_1:vH,hero_title_highlight:bH,hero_desc_v2:wH,feature_1_title:xH,feature_1_desc:EH,feature_2_title:TH,feature_2_desc:SH,feature_3_title:AH,feature_3_desc:IH,summary_title:RH,summary_desc:CH,open_camera:NH,upload_gallery:kH,error_not_plant:DH,error_server_busy:OH,retry:MH,camera_permission_denied:PH,close_up_photo:jH,ai_thinking:VH,save_fail:LH,mic_access_denied:UH,mic_not_found:zH,mic_unavailable:BH,mic_generic_error:FH,recording:HH,editing_message:qH,edit_message_placeholder:$H,treatment_started:GH,save_info:KH,start_treatment:YH,no_analyses_title:QH,no_analyses_desc:WH,treatment_updates:XH,records:JH,confirm_delete:ZH,add_update:eq,shared:tq,share:nq,share_help_others:rq,ask_question:iq,photo:sq,voice_message:aq,last_seen_day:oq,last_seen_hour:lq,last_seen_min:cq,last_seen_just_now:uq,edited:hq,share_title:dq,copy_link:fq,link_copied:mq,social_share:gq,last_seen:pq,prevention_tips:yq,plant_not_recoverable:_q,description:vq,urgency:bq,spread_risk:wq,new_scan:xq};Qn.use(_D).init({resources:{en:{translation:S7},tr:{translation:Eq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});fN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(GI,{children:b.jsx(kk,{children:b.jsx(NI,{children:b.jsx(X9,{})})})})}));
