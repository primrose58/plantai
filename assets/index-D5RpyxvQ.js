(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function MN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ay={exports:{}},Nu={};var Bw;function PN(){if(Bw)return Nu;Bw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var qw;function jN(){return qw||(qw=1,Ay.exports=PN()),Ay.exports}var _=jN(),ky={exports:{}},qe={};var $w;function LN(){if($w)return qe;$w=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=v&&$[v]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function L($,K,te){this.props=$,this.context=K,this.refs=O,this.updater=te||x}L.prototype.isReactComponent={},L.prototype.setState=function($,K){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,K,"setState")},L.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function H(){}H.prototype=L.prototype;function B($,K,te){this.props=$,this.context=K,this.refs=O,this.updater=te||x}var q=B.prototype=new H;q.constructor=B,N(q,L.prototype),q.isPureReactComponent=!0;var Y=Array.isArray;function V(){}var R={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function T($,K,te){var ne=te.ref;return{$$typeof:n,type:$,key:K,ref:ne!==void 0?ne:null,props:te}}function k($,K){return T($.type,K,$.props)}function C($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function j($){var K={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(te){return K[te]})}var D=/\/+/g;function G($,K){return typeof $=="object"&&$!==null&&$.key!=null?j(""+$.key):K.toString(36)}function Z($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(V,V):($.status="pending",$.then(function(K){$.status==="pending"&&($.status="fulfilled",$.value=K)},function(K){$.status==="pending"&&($.status="rejected",$.reason=K)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function P($,K,te,ne,re){var ye=typeof $;(ye==="undefined"||ye==="boolean")&&($=null);var ke=!1;if($===null)ke=!0;else switch(ye){case"bigint":case"string":case"number":ke=!0;break;case"object":switch($.$$typeof){case n:case e:ke=!0;break;case g:return ke=$._init,P(ke($._payload),K,te,ne,re)}}if(ke)return re=re($),ke=ne===""?"."+G($,0):ne,Y(re)?(te="",ke!=null&&(te=ke.replace(D,"$&/")+"/"),P(re,K,te,"",function(Te){return Te})):re!=null&&(C(re)&&(re=k(re,te+(re.key==null||$&&$.key===re.key?"":(""+re.key).replace(D,"$&/")+"/")+ke)),K.push(re)),1;ke=0;var je=ne===""?".":ne+":";if(Y($))for(var ve=0;ve<$.length;ve++)ne=$[ve],ye=je+G(ne,ve),ke+=P(ne,K,te,ye,re);else if(ve=w($),typeof ve=="function")for($=ve.call($),ve=0;!(ne=$.next()).done;)ne=ne.value,ye=je+G(ne,ve++),ke+=P(ne,K,te,ye,re);else if(ye==="object"){if(typeof $.then=="function")return P(Z($),K,te,ne,re);throw K=String($),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ke}function M($,K,te){if($==null)return $;var ne=[],re=0;return P($,ne,"","",function(ye){return K.call(te,ye,re++)}),ne}function ee($){if($._status===-1){var K=$._result;K=K(),K.then(function(te){($._status===0||$._status===-1)&&($._status=1,$._result=te)},function(te){($._status===0||$._status===-1)&&($._status=2,$._result=te)}),$._status===-1&&($._status=0,$._result=K)}if($._status===1)return $._result.default;throw $._result}var Q=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},X={map:M,forEach:function($,K,te){M($,function(){K.apply(this,arguments)},te)},count:function($){var K=0;return M($,function(){K++}),K},toArray:function($){return M($,function(K){return K})||[]},only:function($){if(!C($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return qe.Activity=y,qe.Children=X,qe.Component=L,qe.Fragment=t,qe.Profiler=i,qe.PureComponent=B,qe.StrictMode=r,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qe.__COMPILER_RUNTIME={__proto__:null,c:function($){return R.H.useMemoCache($)}},qe.cache=function($){return function(){return $.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function($,K,te){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var ne=N({},$.props),re=$.key;if(K!=null)for(ye in K.key!==void 0&&(re=""+K.key),K)!E.call(K,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&K.ref===void 0||(ne[ye]=K[ye]);var ye=arguments.length-2;if(ye===1)ne.children=te;else if(1<ye){for(var ke=Array(ye),je=0;je<ye;je++)ke[je]=arguments[je+2];ne.children=ke}return T($.type,re,ne)},qe.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},qe.createElement=function($,K,te){var ne,re={},ye=null;if(K!=null)for(ne in K.key!==void 0&&(ye=""+K.key),K)E.call(K,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(re[ne]=K[ne]);var ke=arguments.length-2;if(ke===1)re.children=te;else if(1<ke){for(var je=Array(ke),ve=0;ve<ke;ve++)je[ve]=arguments[ve+2];re.children=je}if($&&$.defaultProps)for(ne in ke=$.defaultProps,ke)re[ne]===void 0&&(re[ne]=ke[ne]);return T($,ye,re)},qe.createRef=function(){return{current:null}},qe.forwardRef=function($){return{$$typeof:u,render:$}},qe.isValidElement=C,qe.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:ee}},qe.memo=function($,K){return{$$typeof:f,type:$,compare:K===void 0?null:K}},qe.startTransition=function($){var K=R.T,te={};R.T=te;try{var ne=$(),re=R.S;re!==null&&re(te,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(V,Q)}catch(ye){Q(ye)}finally{K!==null&&te.types!==null&&(K.types=te.types),R.T=K}},qe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qe.use=function($){return R.H.use($)},qe.useActionState=function($,K,te){return R.H.useActionState($,K,te)},qe.useCallback=function($,K){return R.H.useCallback($,K)},qe.useContext=function($){return R.H.useContext($)},qe.useDebugValue=function(){},qe.useDeferredValue=function($,K){return R.H.useDeferredValue($,K)},qe.useEffect=function($,K){return R.H.useEffect($,K)},qe.useEffectEvent=function($){return R.H.useEffectEvent($)},qe.useId=function(){return R.H.useId()},qe.useImperativeHandle=function($,K,te){return R.H.useImperativeHandle($,K,te)},qe.useInsertionEffect=function($,K){return R.H.useInsertionEffect($,K)},qe.useLayoutEffect=function($,K){return R.H.useLayoutEffect($,K)},qe.useMemo=function($,K){return R.H.useMemo($,K)},qe.useOptimistic=function($,K){return R.H.useOptimistic($,K)},qe.useReducer=function($,K,te){return R.H.useReducer($,K,te)},qe.useRef=function($){return R.H.useRef($)},qe.useState=function($){return R.H.useState($)},qe.useSyncExternalStore=function($,K,te){return R.H.useSyncExternalStore($,K,te)},qe.useTransition=function(){return R.H.useTransition()},qe.version="19.2.3",qe}var Hw;function Bm(){return Hw||(Hw=1,ky.exports=LN()),ky.exports}var z=Bm();const VN=MN(z);var Ry={exports:{}},Cu={},Iy={exports:{}},Ny={};var Gw;function UN(){return Gw||(Gw=1,(function(n){function e(P,M){var ee=P.length;P.push(M);e:for(;0<ee;){var Q=ee-1>>>1,X=P[Q];if(0<i(X,M))P[Q]=M,P[ee]=X,ee=Q;else break e}}function t(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var M=P[0],ee=P.pop();if(ee!==M){P[0]=ee;e:for(var Q=0,X=P.length,$=X>>>1;Q<$;){var K=2*(Q+1)-1,te=P[K],ne=K+1,re=P[ne];if(0>i(te,ee))ne<X&&0>i(re,te)?(P[Q]=re,P[ne]=ee,Q=ne):(P[Q]=te,P[K]=ee,Q=K);else if(ne<X&&0>i(re,ee))P[Q]=re,P[ne]=ee,Q=ne;else break e}}return M}function i(P,M){var ee=P.sortIndex-M.sortIndex;return ee!==0?ee:P.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,v=3,w=!1,x=!1,N=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(P){for(var M=t(f);M!==null;){if(M.callback===null)r(f);else if(M.startTime<=P)r(f),M.sortIndex=M.expirationTime,e(h,M);else break;M=t(f)}}function Y(P){if(N=!1,q(P),!x)if(t(h)!==null)x=!0,V||(V=!0,j());else{var M=t(f);M!==null&&Z(Y,M.startTime-P)}}var V=!1,R=-1,E=5,T=-1;function k(){return O?!0:!(n.unstable_now()-T<E)}function C(){if(O=!1,V){var P=n.unstable_now();T=P;var M=!0;try{e:{x=!1,N&&(N=!1,H(R),R=-1),w=!0;var ee=v;try{t:{for(q(P),y=t(h);y!==null&&!(y.expirationTime>P&&k());){var Q=y.callback;if(typeof Q=="function"){y.callback=null,v=y.priorityLevel;var X=Q(y.expirationTime<=P);if(P=n.unstable_now(),typeof X=="function"){y.callback=X,q(P),M=!0;break t}y===t(h)&&r(h),q(P)}else r(h);y=t(h)}if(y!==null)M=!0;else{var $=t(f);$!==null&&Z(Y,$.startTime-P),M=!1}}break e}finally{y=null,v=ee,w=!1}M=void 0}}finally{M?j():V=!1}}}var j;if(typeof B=="function")j=function(){B(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,G=D.port2;D.port1.onmessage=C,j=function(){G.postMessage(null)}}else j=function(){L(C,0)};function Z(P,M){R=L(function(){P(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(P){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var ee=v;v=M;try{return P()}finally{v=ee}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=v;v=P;try{return M()}finally{v=ee}},n.unstable_scheduleCallback=function(P,M,ee){var Q=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Q+ee:Q):ee=Q,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ee+X,P={id:g++,callback:M,priorityLevel:P,startTime:ee,expirationTime:X,sortIndex:-1},ee>Q?(P.sortIndex=ee,e(f,P),t(h)===null&&P===t(f)&&(N?(H(R),R=-1):N=!0,Z(Y,ee-Q))):(P.sortIndex=X,e(h,P),x||w||(x=!0,V||(V=!0,j()))),P},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(P){var M=v;return function(){var ee=v;v=M;try{return P.apply(this,arguments)}finally{v=ee}}}})(Ny)),Ny}var Kw;function zN(){return Kw||(Kw=1,Iy.exports=UN()),Iy.exports}var Cy={exports:{}},Ln={};var Yw;function FN(){if(Yw)return Ln;Yw=1;var n=Bm();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ln.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},Ln.flushSync=function(h){var f=l.T,g=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=f,r.p=g,r.d.f()}},Ln.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ln.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ln.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ln.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ln.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ln.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ln.requestFormReset=function(h){r.d.r(h)},Ln.unstable_batchedUpdates=function(h,f){return h(f)},Ln.useFormState=function(h,f,g){return l.H.useFormState(h,f,g)},Ln.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ln.version="19.2.3",Ln}var Qw;function BN(){if(Qw)return Cy.exports;Qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cy.exports=FN(),Cy.exports}var Ww;function qN(){if(Ww)return Cu;Ww=1;var n=zN(),e=Bm(),t=BN();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,d=a;;){var p=c.return;if(p===null)break;var b=p.alternate;if(b===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===c)return h(p),s;if(b===d)return h(p),a;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=p,d=b;else{for(var A=!1,U=p.child;U;){if(U===c){A=!0,c=p,d=b;break}if(U===d){A=!0,d=p,c=b;break}U=U.sibling}if(!A){for(U=b.child;U;){if(U===c){A=!0,c=b,d=p;break}if(U===d){A=!0,d=b,c=p;break}U=U.sibling}if(!A)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function G(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case L:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case V:return"SuspenseList";case T:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case B:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case q:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:G(s.type)||"Memo";case E:a=s._payload,s=s._init;try{return G(s(a))}catch{}}return null}var Z=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Q=[],X=-1;function $(s){return{current:s}}function K(s){0>X||(s.current=Q[X],Q[X]=null,X--)}function te(s,a){X++,Q[X]=s.current,s.current=a}var ne=$(null),re=$(null),ye=$(null),ke=$(null);function je(s,a){switch(te(ye,a),te(re,s),te(ne,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?dw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=dw(a),s=hw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(ne),te(ne,s)}function ve(){K(ne),K(re),K(ye)}function Te(s){s.memoizedState!==null&&te(ke,s);var a=ne.current,c=hw(a,s.type);a!==c&&(te(re,s),te(ne,c))}function $e(s){re.current===s&&(K(ne),K(re)),ke.current===s&&(K(ke),Au._currentValue=ee)}var Ze,At;function Ye(s){if(Ze===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Ze=a&&a[1]||"",At=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ze+s+At}var Qe=!1;function ut(s,a){if(!s||Qe)return"";Qe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(de){var ce=de}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(de){ce=de}s.call(ge.prototype)}}else{try{throw Error()}catch(de){ce=de}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],U=b[1];if(A&&U){var W=A.split(`
`),le=U.split(`
`);for(p=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(d===W.length||p===le.length)for(d=W.length-1,p=le.length-1;1<=d&&0<=p&&W[d]!==le[p];)p--;for(;1<=d&&0<=p;d--,p--)if(W[d]!==le[p]){if(d!==1||p!==1)do if(d--,p--,0>p||W[d]!==le[p]){var fe=`
`+W[d].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=d&&0<=p);break}}}finally{Qe=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ye(c):""}function lt(s,a){switch(s.tag){case 26:case 27:case 5:return Ye(s.type);case 16:return Ye("Lazy");case 13:return s.child!==a&&a!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return ut(s.type,!1);case 11:return ut(s.type.render,!1);case 1:return ut(s.type,!0);case 31:return Ye("Activity");default:return""}}function dt(s){try{var a="",c=null;do a+=lt(s,c),c=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var We=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,Se=n.unstable_cancelCallback,He=n.unstable_shouldYield,Le=n.unstable_requestPaint,Ee=n.unstable_now,at=n.unstable_getCurrentPriorityLevel,_t=n.unstable_ImmediatePriority,Gn=n.unstable_UserBlockingPriority,mt=n.unstable_NormalPriority,Kn=n.unstable_LowPriority,qt=n.unstable_IdlePriority,Pn=n.log,Tn=n.unstable_setDisableYieldValue,Yt=null,kt=null;function tn(s){if(typeof Pn=="function"&&Tn(s),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Yt,s)}catch{}}var Ot=Math.clz32?Math.clz32:Ua,Zo=Math.log,ds=Math.LN2;function Ua(s){return s>>>=0,s===0?32:31-(Zo(s)/ds|0)|0}var jn=256,Js=262144,vt=4194304;function mn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Sn(s,a,c){var d=s.pendingLanes;if(d===0)return 0;var p=0,b=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var U=d&134217727;return U!==0?(d=U&~b,d!==0?p=mn(d):(A&=U,A!==0?p=mn(A):c||(c=U&~s,c!==0&&(p=mn(c))))):(U=d&~b,U!==0?p=mn(U):A!==0?p=mn(A):c||(c=d&~s,c!==0&&(p=mn(c)))),p===0?0:a!==0&&a!==p&&(a&b)===0&&(b=p&-p,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:p}function An(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function el(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(){var s=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),s}function _n(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function za(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Cg(s,a,c,d,p,b){var A=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var U=s.entanglements,W=s.expirationTimes,le=s.hiddenUpdates;for(c=A&~c;0<c;){var fe=31-Ot(c),ge=1<<fe;U[fe]=0,W[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var de=ce[fe];de!==null&&(de.lane&=-536870913)}c&=~ge}d!==0&&Fa(s,d,0),b!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=b&~(A&~a))}function Fa(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-Ot(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|c&261930}function Cc(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-Ot(c),p=1<<d;p&a|s[d]&a&&(s[d]|=a),c&=~p}}function Dc(s,a){var c=a&-a;return c=(c&42)!==0?1:Ba(c),(c&(s.suspendedLanes|a))!==0?0:c}function Ba(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Zs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Xd(){var s=M.p;return s!==0?s:(s=window.event,s===void 0?32:Pw(s.type))}function Yr(s,a){var c=M.p;try{return M.p=s,a()}finally{M.p=c}}var Qr=Math.random().toString(36).slice(2),nn="__reactFiber$"+Qr,vn="__reactProps$"+Qr,hs="__reactContainer$"+Qr,tl="__reactEvents$"+Qr,Dg="__reactListeners$"+Qr,Jd="__reactHandles$"+Qr,Zd="__reactResources$"+Qr,fs="__reactMarker$"+Qr;function nl(s){delete s[nn],delete s[vn],delete s[tl],delete s[Dg],delete s[Jd]}function ms(s){var a=s[nn];if(a)return a;for(var c=s.parentNode;c;){if(a=c[hs]||c[nn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=vw(s);s!==null;){if(c=s[nn])return c;s=vw(s)}return a}s=c,c=s.parentNode}return null}function Nr(s){if(s=s[nn]||s[hs]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function hr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function gs(s){var a=s[Zd];return a||(a=s[Zd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rn(s){s[fs]=!0}var Oc=new Set,Mc={};function ps(s,a){ys(s,a),ys(s+"Capture",a)}function ys(s,a){for(Mc[s]=a,s=0;s<a.length;s++)Oc.add(a[s])}var Pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},Lc={};function eh(s){return We.call(Lc,s)?!0:We.call(jc,s)?!1:Pc.test(s)?Lc[s]=!0:(jc[s]=!0,!1)}function rl(s,a,c){if(eh(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function fr(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function sn(s,a,c,d){if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+d)}}function bn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Pi(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Vc(s,a,c){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,b=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){c=""+A,b.call(this,A)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function bt(s){if(!s._valueTracker){var a=Pi(s)?"checked":"value";s._valueTracker=Vc(s,a,""+s[a])}}function qa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=Pi(s)?s.checked?"true":"false":s.value),s=d,s!==c?(a.setValue(s),!0):!1}function _s(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var $a=/[\n"\\]/g;function nr(s){return s.replace($a,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sl(s,a,c,d,p,b,A,U){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+bn(a)):s.value!==""+bn(a)&&(s.value=""+bn(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?Uc(s,A,bn(a)):c!=null?Uc(s,A,bn(c)):d!=null&&s.removeAttribute("value"),p==null&&b!=null&&(s.defaultChecked=!!b),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+bn(U):s.removeAttribute("name")}function th(s,a,c,d,p,b,A,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){bt(s);return}c=c!=null?""+bn(c):"",a=a!=null?""+bn(a):c,U||a===s.value||(s.value=a),s.defaultValue=a}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=U?s.checked:!!d,s.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),bt(s)}function Uc(s,a,c){a==="number"&&_s(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function ji(s,a,c,d){if(s=s.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<s.length;c++)p=a.hasOwnProperty("$"+s[c].value),s[c].selected!==p&&(s[c].selected=p),p&&d&&(s[c].defaultSelected=!0)}else{for(c=""+bn(c),a=null,p=0;p<s.length;p++){if(s[p].value===c){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function nh(s,a,c){if(a!=null&&(a=""+bn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+bn(c):""}function Li(s,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(r(92));if(Z(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=bn(a),s.defaultValue=c,d=s.textContent,d===c&&d!==""&&d!==null&&(s.value=d),bt(s)}function rr(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var rh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(s,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,c):typeof c!="number"||c===0||rh.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Fc(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var p in a)d=a[p],a.hasOwnProperty(p)&&c[p]!==d&&zc(s,p,d)}else for(var b in a)a.hasOwnProperty(b)&&zc(s,b,a[b])}function il(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(s){return Vi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Wr(){}var Bc=null;function Cr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ui=null,vs=null;function Ha(s){var a=Nr(s);if(a&&(s=a.stateNode)){var c=s[vn]||null;e:switch(s=a.stateNode,a.type){case"input":if(sl(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+nr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var p=d[vn]||null;if(!p)throw Error(r(90));sl(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===s.form&&qa(d)}break e;case"textarea":nh(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&ji(s,!!c.multiple,a,!1)}}}var ol=!1;function zi(s,a,c){if(ol)return s(a,c);ol=!0;try{var d=s(a);return d}finally{if(ol=!1,(Ui!==null||vs!==null)&&(Xh(),Ui&&(a=Ui,s=vs,vs=Ui=null,Ha(a),s)))for(a=0;a<s.length;a++)Ha(s[a])}}function Xr(s,a){var c=s.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(Dr)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Ga=!1}var bs=null,qc=null,Ka=null;function $c(){if(Ka)return Ka;var s,a=qc,c=a.length,d,p="value"in bs?bs.value:bs.textContent,b=p.length;for(s=0;s<c&&a[s]===p[s];s++);var A=c-s;for(d=1;d<=A&&a[c-d]===p[b-d];d++);return Ka=p.slice(s,1<d?1-d:void 0)}function Ya(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ei(){return!0}function Jr(){return!1}function kn(s){function a(c,d,p,b,A){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(c=s[U],this[U]=c?c(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ei:Jr,this.isPropagationStopped=Jr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),a}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=kn(ti),Fi=y({},ti,{view:0,detail:0}),Hc=kn(Fi),Bi,ll,xs,cl=y({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xs&&(xs&&s.type==="mousemove"?(Bi=s.screenX-xs.screenX,ll=s.screenY-xs.screenY):ll=Bi=0,xs=s),Bi)},movementY:function(s){return"movementY"in s?s.movementY:ll}}),Gc=kn(cl),Qa=y({},cl,{dataTransfer:0}),ih=kn(Qa),ah=y({},Fi,{relatedTarget:0}),Wa=kn(ah),Kc=y({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=kn(Kc),ul=y({},ti,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lh=kn(ul),ch=y({},ti,{data:0}),Es=kn(ch),uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=hh[s])?!!a[s]:!1}function qi(){return fh}var Yn=y({},Fi,{key:function(s){if(s.key){var a=uh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(s){return s.type==="keypress"?Ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mh=kn(Yn),gh=y({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ni=kn(gh),m=y({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),S=kn(m),I=y({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=kn(I),ae=y({},cl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=kn(ae),we=y({},ti,{newState:0,oldState:0}),Ge=kn(we),Qt=[9,13,27,32],gt=Dr&&"CompositionEvent"in window,jt=null;Dr&&"documentMode"in document&&(jt=document.documentMode);var Or=Dr&&"TextEvent"in window&&!jt,Ts=Dr&&(!gt||jt&&8<jt&&11>=jt),Zr=" ",es=!1;function Xa(s,a){switch(s){case"keyup":return Qt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var hl=!1;function sI(s,a){switch(s){case"compositionend":return dl(a);case"keypress":return a.which!==32?null:(es=!0,Zr);case"textInput":return s=a.data,s===Zr&&es?null:s;default:return null}}function iI(s,a){if(hl)return s==="compositionend"||!gt&&Xa(s,a)?(s=$c(),Ka=qc=bs=null,hl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ts&&a.locale!=="ko"?null:a.data;default:return null}}var aI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!aI[s.type]:a==="textarea"}function Ev(s,a,c,d){Ui?vs?vs.push(d):vs=[d]:Ui=d,a=sf(a,"onChange"),0<a.length&&(c=new ws("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var Yc=null,Qc=null;function oI(s){iw(s,0)}function ph(s){var a=hr(s);if(qa(a))return s}function Tv(s,a){if(s==="change")return a}var Sv=!1;if(Dr){var Og;if(Dr){var Mg="oninput"in document;if(!Mg){var Av=document.createElement("div");Av.setAttribute("oninput","return;"),Mg=typeof Av.oninput=="function"}Og=Mg}else Og=!1;Sv=Og&&(!document.documentMode||9<document.documentMode)}function kv(){Yc&&(Yc.detachEvent("onpropertychange",Rv),Qc=Yc=null)}function Rv(s){if(s.propertyName==="value"&&ph(Qc)){var a=[];Ev(a,Qc,s,Cr(s)),zi(oI,a)}}function lI(s,a,c){s==="focusin"?(kv(),Yc=a,Qc=c,Yc.attachEvent("onpropertychange",Rv)):s==="focusout"&&kv()}function cI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ph(Qc)}function uI(s,a){if(s==="click")return ph(a)}function dI(s,a){if(s==="input"||s==="change")return ph(a)}function hI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var mr=typeof Object.is=="function"?Object.is:hI;function Wc(s,a){if(mr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!We.call(a,p)||!mr(s[p],a[p]))return!1}return!0}function Iv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Nv(s,a){var c=Iv(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Iv(c)}}function Cv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Cv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Dv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=_s(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=_s(s.document)}return a}function Pg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var fI=Dr&&"documentMode"in document&&11>=document.documentMode,fl=null,jg=null,Xc=null,Lg=!1;function Ov(s,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Lg||fl==null||fl!==_s(d)||(d=fl,"selectionStart"in d&&Pg(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Xc&&Wc(Xc,d)||(Xc=d,d=sf(jg,"onSelect"),0<d.length&&(a=new ws("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=fl)))}function Ja(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var ml={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Vg={},Mv={};Dr&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Za(s){if(Vg[s])return Vg[s];if(!ml[s])return s;var a=ml[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Mv)return Vg[s]=a[c];return s}var Pv=Za("animationend"),jv=Za("animationiteration"),Lv=Za("animationstart"),mI=Za("transitionrun"),gI=Za("transitionstart"),pI=Za("transitioncancel"),Vv=Za("transitionend"),Uv=new Map,Ug="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ug.push("scrollEnd");function ts(s,a){Uv.set(s,a),ps(a,[s])}var yh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Mr=[],gl=0,zg=0;function _h(){for(var s=gl,a=zg=gl=0;a<s;){var c=Mr[a];Mr[a++]=null;var d=Mr[a];Mr[a++]=null;var p=Mr[a];Mr[a++]=null;var b=Mr[a];if(Mr[a++]=null,d!==null&&p!==null){var A=d.pending;A===null?p.next=p:(p.next=A.next,A.next=p),d.pending=p}b!==0&&zv(c,p,b)}}function vh(s,a,c,d){Mr[gl++]=s,Mr[gl++]=a,Mr[gl++]=c,Mr[gl++]=d,zg|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Fg(s,a,c,d){return vh(s,a,c,d),bh(s)}function eo(s,a){return vh(s,null,null,a),bh(s)}function zv(s,a,c){s.lanes|=c;var d=s.alternate;d!==null&&(d.lanes|=c);for(var p=!1,b=s.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(p=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,p&&a!==null&&(p=31-Ot(c),s=b.hiddenUpdates,d=s[p],d===null?s[p]=[a]:d.push(a),a.lane=c|536870912),b):null}function bh(s){if(50<vu)throw vu=0,Wp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var pl={};function yI(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(s,a,c,d){return new yI(s,a,c,d)}function Bg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ri(s,a){var c=s.alternate;return c===null?(c=gr(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Fv(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function wh(s,a,c,d,p,b){var A=0;if(d=s,typeof s=="function")Bg(s)&&(A=1);else if(typeof s=="string")A=xN(s,c,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case T:return s=gr(31,c,a,p),s.elementType=T,s.lanes=b,s;case N:return to(c.children,p,b,a);case O:A=8,p|=24;break;case L:return s=gr(12,c,a,p|2),s.elementType=L,s.lanes=b,s;case Y:return s=gr(13,c,a,p),s.elementType=Y,s.lanes=b,s;case V:return s=gr(19,c,a,p),s.elementType=V,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case B:A=10;break e;case H:A=9;break e;case q:A=11;break e;case R:A=14;break e;case E:A=16,d=null;break e}A=29,c=Error(r(130,s===null?"null":typeof s,"")),d=null}return a=gr(A,c,a,p),a.elementType=s,a.type=d,a.lanes=b,a}function to(s,a,c,d){return s=gr(7,s,d,a),s.lanes=c,s}function qg(s,a,c){return s=gr(6,s,null,a),s.lanes=c,s}function Bv(s){var a=gr(18,null,null,0);return a.stateNode=s,a}function $g(s,a,c){return a=gr(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var qv=new WeakMap;function Pr(s,a){if(typeof s=="object"&&s!==null){var c=qv.get(s);return c!==void 0?c:(a={value:s,source:a,stack:dt(a)},qv.set(s,a),a)}return{value:s,source:a,stack:dt(a)}}var yl=[],_l=0,xh=null,Jc=0,jr=[],Lr=0,$i=null,Ss=1,As="";function si(s,a){yl[_l++]=Jc,yl[_l++]=xh,xh=s,Jc=a}function $v(s,a,c){jr[Lr++]=Ss,jr[Lr++]=As,jr[Lr++]=$i,$i=s;var d=Ss;s=As;var p=32-Ot(d)-1;d&=~(1<<p),c+=1;var b=32-Ot(a)+p;if(30<b){var A=p-p%5;b=(d&(1<<A)-1).toString(32),d>>=A,p-=A,Ss=1<<32-Ot(a)+p|c<<p|d,As=b+s}else Ss=1<<b|c<<p|d,As=s}function Hg(s){s.return!==null&&(si(s,1),$v(s,1,0))}function Gg(s){for(;s===xh;)xh=yl[--_l],yl[_l]=null,Jc=yl[--_l],yl[_l]=null;for(;s===$i;)$i=jr[--Lr],jr[Lr]=null,As=jr[--Lr],jr[Lr]=null,Ss=jr[--Lr],jr[Lr]=null}function Hv(s,a){jr[Lr++]=Ss,jr[Lr++]=As,jr[Lr++]=$i,Ss=a.id,As=a.overflow,$i=s}var Rn=null,Mt=null,ot=!1,Hi=null,Vr=!1,Kg=Error(r(519));function Gi(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zc(Pr(a,s)),Kg}function Gv(s){var a=s.stateNode,c=s.type,d=s.memoizedProps;switch(a[nn]=s,a[vn]=d,c){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(c=0;c<wu.length;c++)tt(wu[c],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),th(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),Li(a,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||cw(a.textContent,c)?(d.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),d.onScroll!=null&&tt("scroll",a),d.onScrollEnd!=null&&tt("scrollend",a),d.onClick!=null&&(a.onclick=Wr),a=!0):a=!1,a||Gi(s,!0)}function Kv(s){for(Rn=s.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Rn=Rn.return}}function vl(s){if(s!==Rn)return!1;if(!ot)return Kv(s),ot=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||dy(s.type,s.memoizedProps)),c=!c),c&&Mt&&Gi(s),Kv(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=_w(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Mt=_w(s)}else a===27?(a=Mt,aa(s.type)?(s=py,py=null,Mt=s):Mt=a):Mt=Rn?zr(s.stateNode.nextSibling):null;return!0}function no(){Mt=Rn=null,ot=!1}function Yg(){var s=Hi;return s!==null&&(or===null?or=s:or.push.apply(or,s),Hi=null),s}function Zc(s){Hi===null?Hi=[s]:Hi.push(s)}var Qg=$(null),ro=null,ii=null;function Ki(s,a,c){te(Qg,a._currentValue),a._currentValue=c}function ai(s){s._currentValue=Qg.current,K(Qg)}function Wg(s,a,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function Xg(s,a,c,d){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var b=p.dependencies;if(b!==null){var A=p.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=p;for(var W=0;W<a.length;W++)if(U.context===a[W]){b.lanes|=c,U=b.alternate,U!==null&&(U.lanes|=c),Wg(b.return,c,s),d||(A=null);break e}b=U.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(r(341));A.lanes|=c,b=A.alternate,b!==null&&(b.lanes|=c),Wg(A,c,s),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===s){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function bl(s,a,c,d){s=null;for(var p=a,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var U=p.type;mr(p.pendingProps.value,A.value)||(s!==null?s.push(U):s=[U])}}else if(p===ke.current){if(A=p.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Au):s=[Au])}p=p.return}s!==null&&Xg(a,s,c,d),a.flags|=262144}function Eh(s){for(s=s.firstContext;s!==null;){if(!mr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function so(s){ro=s,ii=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function In(s){return Yv(ro,s)}function Th(s,a){return ro===null&&so(s),Yv(s,a)}function Yv(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},ii===null){if(s===null)throw Error(r(308));ii=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ii=ii.next=a;return c}var _I=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},vI=n.unstable_scheduleCallback,bI=n.unstable_NormalPriority,an={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jg(){return{controller:new _I,data:new Map,refCount:0}}function eu(s){s.refCount--,s.refCount===0&&vI(bI,function(){s.controller.abort()})}var tu=null,Zg=0,wl=0,xl=null;function wI(s,a){if(tu===null){var c=tu=[];Zg=0,wl=ny(),xl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Zg++,a.then(Qv,Qv),a}function Qv(){if(--Zg===0&&tu!==null){xl!==null&&(xl.status="fulfilled");var s=tu;tu=null,wl=0,xl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function xI(s,a){var c=[],d={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(d.status="rejected",d.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),d}var Wv=P.S;P.S=function(s,a){O1=Ee(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&wI(s,a),Wv!==null&&Wv(s,a)};var io=$(null);function ep(){var s=io.current;return s!==null?s:Dt.pooledCache}function Sh(s,a){a===null?te(io,io.current):te(io,a.pool)}function Xv(){var s=ep();return s===null?null:{parent:an._currentValue,pool:s}}var El=Error(r(460)),tp=Error(r(474)),Ah=Error(r(542)),kh={then:function(){}};function Jv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Zv(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Wr,Wr),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,tb(s),s;default:if(typeof a.status=="string")a.then(Wr,Wr);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=d}},function(d){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,tb(s),s}throw oo=a,El}}function ao(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(oo=c,El):c}}var oo=null;function eb(){if(oo===null)throw Error(r(459));var s=oo;return oo=null,s}function tb(s){if(s===El||s===Ah)throw Error(r(483))}var Tl=null,nu=0;function Rh(s){var a=nu;return nu+=1,Tl===null&&(Tl=[]),Zv(Tl,s,a)}function ru(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Ih(s,a){throw a.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function nb(s){function a(se,J){if(s){var oe=se.deletions;oe===null?(se.deletions=[J],se.flags|=16):oe.push(J)}}function c(se,J){if(!s)return null;for(;J!==null;)a(se,J),J=J.sibling;return null}function d(se){for(var J=new Map;se!==null;)se.key!==null?J.set(se.key,se):J.set(se.index,se),se=se.sibling;return J}function p(se,J){return se=ri(se,J),se.index=0,se.sibling=null,se}function b(se,J,oe){return se.index=oe,s?(oe=se.alternate,oe!==null?(oe=oe.index,oe<J?(se.flags|=67108866,J):oe):(se.flags|=67108866,J)):(se.flags|=1048576,J)}function A(se){return s&&se.alternate===null&&(se.flags|=67108866),se}function U(se,J,oe,me){return J===null||J.tag!==6?(J=qg(oe,se.mode,me),J.return=se,J):(J=p(J,oe),J.return=se,J)}function W(se,J,oe,me){var Oe=oe.type;return Oe===N?fe(se,J,oe.props.children,me,oe.key):J!==null&&(J.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&ao(Oe)===J.type)?(J=p(J,oe.props),ru(J,oe),J.return=se,J):(J=wh(oe.type,oe.key,oe.props,null,se.mode,me),ru(J,oe),J.return=se,J)}function le(se,J,oe,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=$g(oe,se.mode,me),J.return=se,J):(J=p(J,oe.children||[]),J.return=se,J)}function fe(se,J,oe,me,Oe){return J===null||J.tag!==7?(J=to(oe,se.mode,me,Oe),J.return=se,J):(J=p(J,oe),J.return=se,J)}function ge(se,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=qg(""+J,se.mode,oe),J.return=se,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return oe=wh(J.type,J.key,J.props,null,se.mode,oe),ru(oe,J),oe.return=se,oe;case x:return J=$g(J,se.mode,oe),J.return=se,J;case E:return J=ao(J),ge(se,J,oe)}if(Z(J)||j(J))return J=to(J,se.mode,oe,null),J.return=se,J;if(typeof J.then=="function")return ge(se,Rh(J),oe);if(J.$$typeof===B)return ge(se,Th(se,J),oe);Ih(se,J)}return null}function ce(se,J,oe,me){var Oe=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Oe!==null?null:U(se,J,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Oe?W(se,J,oe,me):null;case x:return oe.key===Oe?le(se,J,oe,me):null;case E:return oe=ao(oe),ce(se,J,oe,me)}if(Z(oe)||j(oe))return Oe!==null?null:fe(se,J,oe,me,null);if(typeof oe.then=="function")return ce(se,J,Rh(oe),me);if(oe.$$typeof===B)return ce(se,J,Th(se,oe),me);Ih(se,oe)}return null}function de(se,J,oe,me,Oe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return se=se.get(oe)||null,U(J,se,""+me,Oe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return se=se.get(me.key===null?oe:me.key)||null,W(J,se,me,Oe);case x:return se=se.get(me.key===null?oe:me.key)||null,le(J,se,me,Oe);case E:return me=ao(me),de(se,J,oe,me,Oe)}if(Z(me)||j(me))return se=se.get(oe)||null,fe(J,se,me,Oe,null);if(typeof me.then=="function")return de(se,J,oe,Rh(me),Oe);if(me.$$typeof===B)return de(se,J,oe,Th(J,me),Oe);Ih(J,me)}return null}function Re(se,J,oe,me){for(var Oe=null,ht=null,Ne=J,Xe=J=0,rt=null;Ne!==null&&Xe<oe.length;Xe++){Ne.index>Xe?(rt=Ne,Ne=null):rt=Ne.sibling;var ft=ce(se,Ne,oe[Xe],me);if(ft===null){Ne===null&&(Ne=rt);break}s&&Ne&&ft.alternate===null&&a(se,Ne),J=b(ft,J,Xe),ht===null?Oe=ft:ht.sibling=ft,ht=ft,Ne=rt}if(Xe===oe.length)return c(se,Ne),ot&&si(se,Xe),Oe;if(Ne===null){for(;Xe<oe.length;Xe++)Ne=ge(se,oe[Xe],me),Ne!==null&&(J=b(Ne,J,Xe),ht===null?Oe=Ne:ht.sibling=Ne,ht=Ne);return ot&&si(se,Xe),Oe}for(Ne=d(Ne);Xe<oe.length;Xe++)rt=de(Ne,se,Xe,oe[Xe],me),rt!==null&&(s&&rt.alternate!==null&&Ne.delete(rt.key===null?Xe:rt.key),J=b(rt,J,Xe),ht===null?Oe=rt:ht.sibling=rt,ht=rt);return s&&Ne.forEach(function(da){return a(se,da)}),ot&&si(se,Xe),Oe}function Ve(se,J,oe,me){if(oe==null)throw Error(r(151));for(var Oe=null,ht=null,Ne=J,Xe=J=0,rt=null,ft=oe.next();Ne!==null&&!ft.done;Xe++,ft=oe.next()){Ne.index>Xe?(rt=Ne,Ne=null):rt=Ne.sibling;var da=ce(se,Ne,ft.value,me);if(da===null){Ne===null&&(Ne=rt);break}s&&Ne&&da.alternate===null&&a(se,Ne),J=b(da,J,Xe),ht===null?Oe=da:ht.sibling=da,ht=da,Ne=rt}if(ft.done)return c(se,Ne),ot&&si(se,Xe),Oe;if(Ne===null){for(;!ft.done;Xe++,ft=oe.next())ft=ge(se,ft.value,me),ft!==null&&(J=b(ft,J,Xe),ht===null?Oe=ft:ht.sibling=ft,ht=ft);return ot&&si(se,Xe),Oe}for(Ne=d(Ne);!ft.done;Xe++,ft=oe.next())ft=de(Ne,se,Xe,ft.value,me),ft!==null&&(s&&ft.alternate!==null&&Ne.delete(ft.key===null?Xe:ft.key),J=b(ft,J,Xe),ht===null?Oe=ft:ht.sibling=ft,ht=ft);return s&&Ne.forEach(function(ON){return a(se,ON)}),ot&&si(se,Xe),Oe}function Ct(se,J,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===N&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Oe=oe.key;J!==null;){if(J.key===Oe){if(Oe=oe.type,Oe===N){if(J.tag===7){c(se,J.sibling),me=p(J,oe.props.children),me.return=se,se=me;break e}}else if(J.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&ao(Oe)===J.type){c(se,J.sibling),me=p(J,oe.props),ru(me,oe),me.return=se,se=me;break e}c(se,J);break}else a(se,J);J=J.sibling}oe.type===N?(me=to(oe.props.children,se.mode,me,oe.key),me.return=se,se=me):(me=wh(oe.type,oe.key,oe.props,null,se.mode,me),ru(me,oe),me.return=se,se=me)}return A(se);case x:e:{for(Oe=oe.key;J!==null;){if(J.key===Oe)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){c(se,J.sibling),me=p(J,oe.children||[]),me.return=se,se=me;break e}else{c(se,J);break}else a(se,J);J=J.sibling}me=$g(oe,se.mode,me),me.return=se,se=me}return A(se);case E:return oe=ao(oe),Ct(se,J,oe,me)}if(Z(oe))return Re(se,J,oe,me);if(j(oe)){if(Oe=j(oe),typeof Oe!="function")throw Error(r(150));return oe=Oe.call(oe),Ve(se,J,oe,me)}if(typeof oe.then=="function")return Ct(se,J,Rh(oe),me);if(oe.$$typeof===B)return Ct(se,J,Th(se,oe),me);Ih(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,J!==null&&J.tag===6?(c(se,J.sibling),me=p(J,oe),me.return=se,se=me):(c(se,J),me=qg(oe,se.mode,me),me.return=se,se=me),A(se)):c(se,J)}return function(se,J,oe,me){try{nu=0;var Oe=Ct(se,J,oe,me);return Tl=null,Oe}catch(Ne){if(Ne===El||Ne===Ah)throw Ne;var ht=gr(29,Ne,null,se.mode);return ht.lanes=me,ht.return=se,ht}finally{}}}var lo=nb(!0),rb=nb(!1),Yi=!1;function np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Wi(s,a,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(pt&2)!==0){var p=d.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),d.pending=a,a=bh(s),zv(s,null,c),a}return vh(s,d,a,c),bh(s)}function su(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Cc(s,c)}}function sp(s,a){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?p=b=A:b=b.next=A,c=c.next}while(c!==null);b===null?p=b=a:b=b.next=a}else p=b=a;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var ip=!1;function iu(){if(ip){var s=xl;if(s!==null)throw s}}function au(s,a,c,d){ip=!1;var p=s.updateQueue;Yi=!1;var b=p.firstBaseUpdate,A=p.lastBaseUpdate,U=p.shared.pending;if(U!==null){p.shared.pending=null;var W=U,le=W.next;W.next=null,A===null?b=le:A.next=le,A=W;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,U=fe.lastBaseUpdate,U!==A&&(U===null?fe.firstBaseUpdate=le:U.next=le,fe.lastBaseUpdate=W))}if(b!==null){var ge=p.baseState;A=0,fe=le=W=null,U=b;do{var ce=U.lane&-536870913,de=ce!==U.lane;if(de?(nt&ce)===ce:(d&ce)===ce){ce!==0&&ce===wl&&(ip=!0),fe!==null&&(fe=fe.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Re=s,Ve=U;ce=a;var Ct=c;switch(Ve.tag){case 1:if(Re=Ve.payload,typeof Re=="function"){ge=Re.call(Ct,ge,ce);break e}ge=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ve.payload,ce=typeof Re=="function"?Re.call(Ct,ge,ce):Re,ce==null)break e;ge=y({},ge,ce);break e;case 2:Yi=!0}}ce=U.callback,ce!==null&&(s.flags|=64,de&&(s.flags|=8192),de=p.callbacks,de===null?p.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:U.tag,payload:U.payload,callback:U.callback,next:null},fe===null?(le=fe=de,W=ge):fe=fe.next=de,A|=ce;if(U=U.next,U===null){if(U=p.shared.pending,U===null)break;de=U,U=de.next,de.next=null,p.lastBaseUpdate=de,p.shared.pending=null}}while(!0);fe===null&&(W=ge),p.baseState=W,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,b===null&&(p.shared.lanes=0),ta|=A,s.lanes=A,s.memoizedState=ge}}function sb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function ib(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)sb(c[s],a)}var Sl=$(null),Nh=$(0);function ab(s,a){s=gi,te(Nh,s),te(Sl,a),gi=s|a.baseLanes}function ap(){te(Nh,gi),te(Sl,Sl.current)}function op(){gi=Nh.current,K(Sl),K(Nh)}var pr=$(null),Ur=null;function Xi(s){var a=s.alternate;te(Wt,Wt.current&1),te(pr,s),Ur===null&&(a===null||Sl.current!==null||a.memoizedState!==null)&&(Ur=s)}function lp(s){te(Wt,Wt.current),te(pr,s),Ur===null&&(Ur=s)}function ob(s){s.tag===22?(te(Wt,Wt.current),te(pr,s),Ur===null&&(Ur=s)):Ji()}function Ji(){te(Wt,Wt.current),te(pr,pr.current)}function yr(s){K(pr),Ur===s&&(Ur=null),K(Wt)}var Wt=$(0);function Ch(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||my(c)||gy(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var oi=0,Ke=null,It=null,on=null,Dh=!1,Al=!1,co=!1,Oh=0,ou=0,kl=null,EI=0;function $t(){throw Error(r(321))}function cp(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!mr(s[c],a[c]))return!1;return!0}function up(s,a,c,d,p,b){return oi=b,Ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=s===null||s.memoizedState===null?$b:Sp,co=!1,b=c(d,p),co=!1,Al&&(b=cb(a,c,d,p)),lb(s),b}function lb(s){P.H=uu;var a=It!==null&&It.next!==null;if(oi=0,on=It=Ke=null,Dh=!1,ou=0,kl=null,a)throw Error(r(300));s===null||ln||(s=s.dependencies,s!==null&&Eh(s)&&(ln=!0))}function cb(s,a,c,d){Ke=s;var p=0;do{if(Al&&(kl=null),ou=0,Al=!1,25<=p)throw Error(r(301));if(p+=1,on=It=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=Hb,b=a(c,d)}while(Al);return b}function TI(){var s=P.H,a=s.useState()[0];return a=typeof a.then=="function"?lu(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&(Ke.flags|=1024),a}function dp(){var s=Oh!==0;return Oh=0,s}function hp(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function fp(s){if(Dh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Dh=!1}oi=0,on=It=Ke=null,Al=!1,ou=Oh=0,kl=null}function Qn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Ke.memoizedState=on=s:on=on.next=s,on}function Xt(){if(It===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=on===null?Ke.memoizedState:on.next;if(a!==null)on=a,It=s;else{if(s===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},on===null?Ke.memoizedState=on=s:on=on.next=s}return on}function Mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(s){var a=ou;return ou+=1,kl===null&&(kl=[]),s=Zv(kl,s,a),a=Ke,(on===null?a.memoizedState:on.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?$b:Sp),s}function Ph(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lu(s);if(s.$$typeof===B)return In(s)}throw Error(r(438,String(s)))}function mp(s){var a=null,c=Ke.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=Ke.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Mh(),Ke.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),d=0;d<s;d++)c[d]=k;return a.index++,c}function li(s,a){return typeof a=="function"?a(s):a}function jh(s){var a=Xt();return gp(a,It,s)}function gp(s,a,c){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var p=s.baseQueue,b=d.pending;if(b!==null){if(p!==null){var A=p.next;p.next=b.next,b.next=A}a.baseQueue=p=b,d.pending=null}if(b=s.baseState,p===null)s.memoizedState=b;else{a=p.next;var U=A=null,W=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(nt&ge)===ge:(oi&ge)===ge){var ce=le.revertLane;if(ce===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===wl&&(fe=!0);else if((oi&ce)===ce){le=le.next,ce===wl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},W===null?(U=W=ge,A=b):W=W.next=ge,Ke.lanes|=ce,ta|=ce;ge=le.action,co&&c(b,ge),b=le.hasEagerState?le.eagerState:c(b,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},W===null?(U=W=ce,A=b):W=W.next=ce,Ke.lanes|=ge,ta|=ge;le=le.next}while(le!==null&&le!==a);if(W===null?A=b:W.next=U,!mr(b,s.memoizedState)&&(ln=!0,fe&&(c=xl,c!==null)))throw c;s.memoizedState=b,s.baseState=A,s.baseQueue=W,d.lastRenderedState=b}return p===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function pp(s){var a=Xt(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var d=c.dispatch,p=c.pending,b=a.memoizedState;if(p!==null){c.pending=null;var A=p=p.next;do b=s(b,A.action),A=A.next;while(A!==p);mr(b,a.memoizedState)||(ln=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,d]}function ub(s,a,c){var d=Ke,p=Xt(),b=ot;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=a();var A=!mr((It||p).memoizedState,c);if(A&&(p.memoizedState=c,ln=!0),p=p.queue,vp(fb.bind(null,d,p,s),[s]),p.getSnapshot!==a||A||on!==null&&on.memoizedState.tag&1){if(d.flags|=2048,Rl(9,{destroy:void 0},hb.bind(null,d,p,c,a),null),Dt===null)throw Error(r(349));b||(oi&127)!==0||db(d,a,c)}return c}function db(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Ke.updateQueue,a===null?(a=Mh(),Ke.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function hb(s,a,c,d){a.value=c,a.getSnapshot=d,mb(a)&&gb(s)}function fb(s,a,c){return c(function(){mb(a)&&gb(s)})}function mb(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!mr(s,c)}catch{return!0}}function gb(s){var a=eo(s,2);a!==null&&lr(a,s,2)}function yp(s){var a=Qn();if(typeof s=="function"){var c=s;if(s=c(),co){tn(!0);try{c()}finally{tn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:s},a}function pb(s,a,c,d){return s.baseState=c,gp(s,It,typeof d=="function"?d:li)}function SI(s,a,c,d,p){if(Uh(s))throw Error(r(485));if(s=a.action,s!==null){var b={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};P.T!==null?c(!0):b.isTransition=!1,d(b),c=a.pending,c===null?(b.next=a.pending=b,yb(a,b)):(b.next=c.next,a.pending=c.next=b)}}function yb(s,a){var c=a.action,d=a.payload,p=s.state;if(a.isTransition){var b=P.T,A={};P.T=A;try{var U=c(p,d),W=P.S;W!==null&&W(A,U),_b(s,a,U)}catch(le){_p(s,a,le)}finally{b!==null&&A.types!==null&&(b.types=A.types),P.T=b}}else try{b=c(p,d),_b(s,a,b)}catch(le){_p(s,a,le)}}function _b(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){vb(s,a,d)},function(d){return _p(s,a,d)}):vb(s,a,c)}function vb(s,a,c){a.status="fulfilled",a.value=c,bb(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,yb(s,c)))}function _p(s,a,c){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,bb(a),a=a.next;while(a!==d)}s.action=null}function bb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function wb(s,a){return a}function xb(s,a){if(ot){var c=Dt.formState;if(c!==null){e:{var d=Ke;if(ot){if(Mt){t:{for(var p=Mt,b=Vr;p.nodeType!==8;){if(!b){p=null;break t}if(p=zr(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){Mt=zr(p.nextSibling),d=p.data==="F!";break e}}Gi(d)}d=!1}d&&(a=c[0])}}return c=Qn(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:a},c.queue=d,c=Fb.bind(null,Ke,d),d.dispatch=c,d=yp(!1),b=Tp.bind(null,Ke,!1,d.queue),d=Qn(),p={state:a,dispatch:null,action:s,pending:null},d.queue=p,c=SI.bind(null,Ke,p,b,c),p.dispatch=c,d.memoizedState=s,[a,c,!1]}function Eb(s){var a=Xt();return Tb(a,It,s)}function Tb(s,a,c){if(a=gp(s,a,wb)[0],s=jh(li)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=lu(a)}catch(A){throw A===El?Ah:A}else d=a;a=Xt();var p=a.queue,b=p.dispatch;return c!==a.memoizedState&&(Ke.flags|=2048,Rl(9,{destroy:void 0},AI.bind(null,p,c),null)),[d,b,s]}function AI(s,a){s.action=a}function Sb(s){var a=Xt(),c=It;if(c!==null)return Tb(a,c,s);Xt(),a=a.memoizedState,c=Xt();var d=c.queue.dispatch;return c.memoizedState=s,[a,d,!1]}function Rl(s,a,c,d){return s={tag:s,create:c,deps:d,inst:a,next:null},a=Ke.updateQueue,a===null&&(a=Mh(),Ke.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function Ab(){return Xt().memoizedState}function Lh(s,a,c,d){var p=Qn();Ke.flags|=s,p.memoizedState=Rl(1|a,{destroy:void 0},c,d===void 0?null:d)}function Vh(s,a,c,d){var p=Xt();d=d===void 0?null:d;var b=p.memoizedState.inst;It!==null&&d!==null&&cp(d,It.memoizedState.deps)?p.memoizedState=Rl(a,b,c,d):(Ke.flags|=s,p.memoizedState=Rl(1|a,b,c,d))}function kb(s,a){Lh(8390656,8,s,a)}function vp(s,a){Vh(2048,8,s,a)}function kI(s){Ke.flags|=4;var a=Ke.updateQueue;if(a===null)a=Mh(),Ke.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function Rb(s){var a=Xt().memoizedState;return kI({ref:a,nextImpl:s}),function(){if((pt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function Ib(s,a){return Vh(4,2,s,a)}function Nb(s,a){return Vh(4,4,s,a)}function Cb(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Db(s,a,c){c=c!=null?c.concat([s]):null,Vh(4,4,Cb.bind(null,a,s),c)}function bp(){}function Ob(s,a){var c=Xt();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&cp(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function Mb(s,a){var c=Xt();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&cp(a,d[1]))return d[0];if(d=s(),co){tn(!0);try{s()}finally{tn(!1)}}return c.memoizedState=[d,a],d}function wp(s,a,c){return c===void 0||(oi&1073741824)!==0&&(nt&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=P1(),Ke.lanes|=s,ta|=s,c)}function Pb(s,a,c,d){return mr(c,a)?c:Sl.current!==null?(s=wp(s,c,d),mr(s,a)||(ln=!0),s):(oi&42)===0||(oi&1073741824)!==0&&(nt&261930)===0?(ln=!0,s.memoizedState=c):(s=P1(),Ke.lanes|=s,ta|=s,a)}function jb(s,a,c,d,p){var b=M.p;M.p=b!==0&&8>b?b:8;var A=P.T,U={};P.T=U,Tp(s,!1,a,c);try{var W=p(),le=P.S;if(le!==null&&le(U,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var fe=xI(W,d);cu(s,a,fe,br(s))}else cu(s,a,d,br(s))}catch(ge){cu(s,a,{then:function(){},status:"rejected",reason:ge},br())}finally{M.p=b,A!==null&&U.types!==null&&(A.types=U.types),P.T=A}}function RI(){}function xp(s,a,c,d){if(s.tag!==5)throw Error(r(476));var p=Lb(s).queue;jb(s,p,a,ee,c===null?RI:function(){return Vb(s),c(d)})}function Lb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:ee},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Vb(s){var a=Lb(s);a.next===null&&(a=s.alternate.memoizedState),cu(s,a.next.queue,{},br())}function Ep(){return In(Au)}function Ub(){return Xt().memoizedState}function zb(){return Xt().memoizedState}function II(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=br();s=Qi(c);var d=Wi(a,s,c);d!==null&&(lr(d,a,c),su(d,a,c)),a={cache:Jg()},s.payload=a;return}a=a.return}}function NI(s,a,c){var d=br();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Uh(s)?Bb(a,c):(c=Fg(s,a,c,d),c!==null&&(lr(c,s,d),qb(c,a,d)))}function Fb(s,a,c){var d=br();cu(s,a,c,d)}function cu(s,a,c,d){var p={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Uh(s))Bb(a,p);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var A=a.lastRenderedState,U=b(A,c);if(p.hasEagerState=!0,p.eagerState=U,mr(U,A))return vh(s,a,p,0),Dt===null&&_h(),!1}catch{}finally{}if(c=Fg(s,a,p,d),c!==null)return lr(c,s,d),qb(c,a,d),!0}return!1}function Tp(s,a,c,d){if(d={lane:2,revertLane:ny(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Uh(s)){if(a)throw Error(r(479))}else a=Fg(s,c,d,2),a!==null&&lr(a,s,2)}function Uh(s){var a=s.alternate;return s===Ke||a!==null&&a===Ke}function Bb(s,a){Al=Dh=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function qb(s,a,c){if((c&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Cc(s,c)}}var uu={readContext:In,use:Ph,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};uu.useEffectEvent=$t;var $b={readContext:In,use:Ph,useCallback:function(s,a){return Qn().memoizedState=[s,a===void 0?null:a],s},useContext:In,useEffect:kb,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Lh(4194308,4,Cb.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Lh(4194308,4,s,a)},useInsertionEffect:function(s,a){Lh(4,2,s,a)},useMemo:function(s,a){var c=Qn();a=a===void 0?null:a;var d=s();if(co){tn(!0);try{s()}finally{tn(!1)}}return c.memoizedState=[d,a],d},useReducer:function(s,a,c){var d=Qn();if(c!==void 0){var p=c(a);if(co){tn(!0);try{c(a)}finally{tn(!1)}}}else p=a;return d.memoizedState=d.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},d.queue=s,s=s.dispatch=NI.bind(null,Ke,s),[d.memoizedState,s]},useRef:function(s){var a=Qn();return s={current:s},a.memoizedState=s},useState:function(s){s=yp(s);var a=s.queue,c=Fb.bind(null,Ke,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:bp,useDeferredValue:function(s,a){var c=Qn();return wp(c,s,a)},useTransition:function(){var s=yp(!1);return s=jb.bind(null,Ke,s.queue,!0,!1),Qn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var d=Ke,p=Qn();if(ot){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Dt===null)throw Error(r(349));(nt&127)!==0||db(d,a,c)}p.memoizedState=c;var b={value:c,getSnapshot:a};return p.queue=b,kb(fb.bind(null,d,b,s),[s]),d.flags|=2048,Rl(9,{destroy:void 0},hb.bind(null,d,b,c,a),null),c},useId:function(){var s=Qn(),a=Dt.identifierPrefix;if(ot){var c=As,d=Ss;c=(d&~(1<<32-Ot(d)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Oh++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=EI++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Ep,useFormState:xb,useActionState:xb,useOptimistic:function(s){var a=Qn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Tp.bind(null,Ke,!0,c),c.dispatch=a,[s,a]},useMemoCache:mp,useCacheRefresh:function(){return Qn().memoizedState=II.bind(null,Ke)},useEffectEvent:function(s){var a=Qn(),c={impl:s};return a.memoizedState=c,function(){if((pt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Sp={readContext:In,use:Ph,useCallback:Ob,useContext:In,useEffect:vp,useImperativeHandle:Db,useInsertionEffect:Ib,useLayoutEffect:Nb,useMemo:Mb,useReducer:jh,useRef:Ab,useState:function(){return jh(li)},useDebugValue:bp,useDeferredValue:function(s,a){var c=Xt();return Pb(c,It.memoizedState,s,a)},useTransition:function(){var s=jh(li)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:lu(s),a]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Ep,useFormState:Eb,useActionState:Eb,useOptimistic:function(s,a){var c=Xt();return pb(c,It,s,a)},useMemoCache:mp,useCacheRefresh:zb};Sp.useEffectEvent=Rb;var Hb={readContext:In,use:Ph,useCallback:Ob,useContext:In,useEffect:vp,useImperativeHandle:Db,useInsertionEffect:Ib,useLayoutEffect:Nb,useMemo:Mb,useReducer:pp,useRef:Ab,useState:function(){return pp(li)},useDebugValue:bp,useDeferredValue:function(s,a){var c=Xt();return It===null?wp(c,s,a):Pb(c,It.memoizedState,s,a)},useTransition:function(){var s=pp(li)[0],a=Xt().memoizedState;return[typeof s=="boolean"?s:lu(s),a]},useSyncExternalStore:ub,useId:Ub,useHostTransitionStatus:Ep,useFormState:Sb,useActionState:Sb,useOptimistic:function(s,a){var c=Xt();return It!==null?pb(c,It,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:mp,useCacheRefresh:zb};Hb.useEffectEvent=Rb;function Ap(s,a,c,d){a=s.memoizedState,c=c(d,a),c=c==null?a:y({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var kp={enqueueSetState:function(s,a,c){s=s._reactInternals;var d=br(),p=Qi(d);p.payload=a,c!=null&&(p.callback=c),a=Wi(s,p,d),a!==null&&(lr(a,s,d),su(a,s,d))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=br(),p=Qi(d);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=Wi(s,p,d),a!==null&&(lr(a,s,d),su(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=br(),d=Qi(c);d.tag=2,a!=null&&(d.callback=a),a=Wi(s,d,c),a!==null&&(lr(a,s,c),su(a,s,c))}};function Gb(s,a,c,d,p,b,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,A):a.prototype&&a.prototype.isPureReactComponent?!Wc(c,d)||!Wc(p,b):!0}function Kb(s,a,c,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&kp.enqueueReplaceState(a,a.state,null)}function uo(s,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(s=s.defaultProps){c===a&&(c=y({},c));for(var p in s)c[p]===void 0&&(c[p]=s[p])}return c}function Yb(s){yh(s)}function Qb(s){console.error(s)}function Wb(s){yh(s)}function zh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Xb(s,a,c){try{var d=s.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Rp(s,a,c){return c=Qi(c),c.tag=3,c.payload={element:null},c.callback=function(){zh(s,a)},c}function Jb(s){return s=Qi(s),s.tag=3,s}function Zb(s,a,c,d){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var b=d.value;s.payload=function(){return p(b)},s.callback=function(){Xb(a,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Xb(a,c,d),typeof p!="function"&&(na===null?na=new Set([this]):na.add(this));var U=d.stack;this.componentDidCatch(d.value,{componentStack:U!==null?U:""})})}function CI(s,a,c,d,p){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&bl(a,c,p,!0),c=pr.current,c!==null){switch(c.tag){case 31:case 13:return Ur===null?Jh():c.alternate===null&&Ht===0&&(Ht=3),c.flags&=-257,c.flags|=65536,c.lanes=p,d===kh?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),Zp(s,d,p)),!1;case 22:return c.flags|=65536,d===kh?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),Zp(s,d,p)),!1}throw Error(r(435,c.tag))}return Zp(s,d,p),Jh(),!1}if(ot)return a=pr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,d!==Kg&&(s=Error(r(422),{cause:d}),Zc(Pr(s,c)))):(d!==Kg&&(a=Error(r(423),{cause:d}),Zc(Pr(a,c))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,d=Pr(d,c),p=Rp(s.stateNode,d,p),sp(s,p),Ht!==4&&(Ht=2)),!1;var b=Error(r(520),{cause:d});if(b=Pr(b,c),_u===null?_u=[b]:_u.push(b),Ht!==4&&(Ht=2),a===null)return!0;d=Pr(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=p&-p,c.lanes|=s,s=Rp(c.stateNode,d,s),sp(c,s),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(na===null||!na.has(b))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Jb(p),Zb(p,s,c,d),sp(c,p),!1}c=c.return}while(c!==null);return!1}var Ip=Error(r(461)),ln=!1;function Nn(s,a,c,d){a.child=s===null?rb(a,null,c,d):lo(a,s.child,c,d)}function e1(s,a,c,d,p){c=c.render;var b=a.ref;if("ref"in d){var A={};for(var U in d)U!=="ref"&&(A[U]=d[U])}else A=d;return so(a),d=up(s,a,c,A,b,p),U=dp(),s!==null&&!ln?(hp(s,a,p),ci(s,a,p)):(ot&&U&&Hg(a),a.flags|=1,Nn(s,a,d,p),a.child)}function t1(s,a,c,d,p){if(s===null){var b=c.type;return typeof b=="function"&&!Bg(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,n1(s,a,b,d,p)):(s=wh(c.type,null,d,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Lp(s,p)){var A=b.memoizedProps;if(c=c.compare,c=c!==null?c:Wc,c(A,d)&&s.ref===a.ref)return ci(s,a,p)}return a.flags|=1,s=ri(b,d),s.ref=a.ref,s.return=a,a.child=s}function n1(s,a,c,d,p){if(s!==null){var b=s.memoizedProps;if(Wc(b,d)&&s.ref===a.ref)if(ln=!1,a.pendingProps=d=b,Lp(s,p))(s.flags&131072)!==0&&(ln=!0);else return a.lanes=s.lanes,ci(s,a,p)}return Np(s,a,c,d,p)}function r1(s,a,c,d){var p=d.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,s!==null){for(d=a.child=s.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;d=p&~b}else d=0,a.child=null;return s1(s,a,b,c,d)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Sh(a,b!==null?b.cachePool:null),b!==null?ab(a,b):ap(),ob(a);else return d=a.lanes=536870912,s1(s,a,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Sh(a,b.cachePool),ab(a,b),Ji(),a.memoizedState=null):(s!==null&&Sh(a,null),ap(),Ji());return Nn(s,a,p,c),a.child}function du(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function s1(s,a,c,d,p){var b=ep();return b=b===null?null:{parent:an._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},s!==null&&Sh(a,null),ap(),ob(a),s!==null&&bl(s,a,d,!0),a.childLanes=p,null}function Fh(s,a){return a=qh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function i1(s,a,c){return lo(a,s.child,null,c),s=Fh(a,a.pendingProps),s.flags|=2,yr(a),a.memoizedState=null,s}function DI(s,a,c){var d=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ot){if(d.mode==="hidden")return s=Fh(a,d),a.lanes=536870912,du(null,s);if(lp(a),(s=Mt)?(s=yw(s,Vr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$i!==null?{id:Ss,overflow:As}:null,retryLane:536870912,hydrationErrors:null},c=Bv(s),c.return=a,a.child=c,Rn=a,Mt=null)):s=null,s===null)throw Gi(a);return a.lanes=536870912,null}return Fh(a,d)}var b=s.memoizedState;if(b!==null){var A=b.dehydrated;if(lp(a),p)if(a.flags&256)a.flags&=-257,a=i1(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(ln||bl(s,a,c,!1),p=(c&s.childLanes)!==0,ln||p){if(d=Dt,d!==null&&(A=Dc(d,c),A!==0&&A!==b.retryLane))throw b.retryLane=A,eo(s,A),lr(d,s,A),Ip;Jh(),a=i1(s,a,c)}else s=b.treeContext,Mt=zr(A.nextSibling),Rn=a,ot=!0,Hi=null,Vr=!1,s!==null&&Hv(a,s),a=Fh(a,d),a.flags|=4096;return a}return s=ri(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Bh(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function Np(s,a,c,d,p){return so(a),c=up(s,a,c,d,void 0,p),d=dp(),s!==null&&!ln?(hp(s,a,p),ci(s,a,p)):(ot&&d&&Hg(a),a.flags|=1,Nn(s,a,c,p),a.child)}function a1(s,a,c,d,p,b){return so(a),a.updateQueue=null,c=cb(a,d,c,p),lb(s),d=dp(),s!==null&&!ln?(hp(s,a,b),ci(s,a,b)):(ot&&d&&Hg(a),a.flags|=1,Nn(s,a,c,b),a.child)}function o1(s,a,c,d,p){if(so(a),a.stateNode===null){var b=pl,A=c.contextType;typeof A=="object"&&A!==null&&(b=In(A)),b=new c(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=kp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},np(a),A=c.contextType,b.context=typeof A=="object"&&A!==null?In(A):pl,b.state=a.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(Ap(a,c,A,d),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&kp.enqueueReplaceState(b,b.state,null),au(a,d,b,p),iu(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){b=a.stateNode;var U=a.memoizedProps,W=uo(c,U);b.props=W;var le=b.context,fe=c.contextType;A=pl,typeof fe=="object"&&fe!==null&&(A=In(fe));var ge=c.getDerivedStateFromProps;fe=typeof ge=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,fe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||le!==A)&&Kb(a,b,d,A),Yi=!1;var ce=a.memoizedState;b.state=ce,au(a,d,b,p),iu(),le=a.memoizedState,U||ce!==le||Yi?(typeof ge=="function"&&(Ap(a,c,ge,d),le=a.memoizedState),(W=Yi||Gb(a,c,W,d,ce,le,A))?(fe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=le),b.props=d,b.state=le,b.context=A,d=W):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,rp(s,a),A=a.memoizedProps,fe=uo(c,A),b.props=fe,ge=a.pendingProps,ce=b.context,le=c.contextType,W=pl,typeof le=="object"&&le!==null&&(W=In(le)),U=c.getDerivedStateFromProps,(le=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==ge||ce!==W)&&Kb(a,b,d,W),Yi=!1,ce=a.memoizedState,b.state=ce,au(a,d,b,p),iu();var de=a.memoizedState;A!==ge||ce!==de||Yi||s!==null&&s.dependencies!==null&&Eh(s.dependencies)?(typeof U=="function"&&(Ap(a,c,U,d),de=a.memoizedState),(fe=Yi||Gb(a,c,fe,d,ce,de,W)||s!==null&&s.dependencies!==null&&Eh(s.dependencies))?(le||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,de,W),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,de,W)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=de),b.props=d,b.state=de,b.context=W,d=fe):(typeof b.componentDidUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ce===s.memoizedState||(a.flags|=1024),d=!1)}return b=d,Bh(s,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&d?(a.child=lo(a,s.child,null,p),a.child=lo(a,null,c,p)):Nn(s,a,c,p),a.memoizedState=b.state,s=a.child):s=ci(s,a,p),s}function l1(s,a,c,d){return no(),a.flags|=256,Nn(s,a,c,d),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dp(s){return{baseLanes:s,cachePool:Xv()}}function Op(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=vr),s}function c1(s,a,c){var d=a.pendingProps,p=!1,b=(a.flags&128)!==0,A;if((A=b)||(A=s!==null&&s.memoizedState===null?!1:(Wt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(ot){if(p?Xi(a):Ji(),(s=Mt)?(s=yw(s,Vr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$i!==null?{id:Ss,overflow:As}:null,retryLane:536870912,hydrationErrors:null},c=Bv(s),c.return=a,a.child=c,Rn=a,Mt=null)):s=null,s===null)throw Gi(a);return gy(s)?a.lanes=32:a.lanes=536870912,null}var U=d.children;return d=d.fallback,p?(Ji(),p=a.mode,U=qh({mode:"hidden",children:U},p),d=to(d,p,c,null),U.return=a,d.return=a,U.sibling=d,a.child=U,d=a.child,d.memoizedState=Dp(c),d.childLanes=Op(s,A,c),a.memoizedState=Cp,du(null,d)):(Xi(a),Mp(a,U))}var W=s.memoizedState;if(W!==null&&(U=W.dehydrated,U!==null)){if(b)a.flags&256?(Xi(a),a.flags&=-257,a=Pp(s,a,c)):a.memoizedState!==null?(Ji(),a.child=s.child,a.flags|=128,a=null):(Ji(),U=d.fallback,p=a.mode,d=qh({mode:"visible",children:d.children},p),U=to(U,p,c,null),U.flags|=2,d.return=a,U.return=a,d.sibling=U,a.child=d,lo(a,s.child,null,c),d=a.child,d.memoizedState=Dp(c),d.childLanes=Op(s,A,c),a.memoizedState=Cp,a=du(null,d));else if(Xi(a),gy(U)){if(A=U.nextSibling&&U.nextSibling.dataset,A)var le=A.dgst;A=le,d=Error(r(419)),d.stack="",d.digest=A,Zc({value:d,source:null,stack:null}),a=Pp(s,a,c)}else if(ln||bl(s,a,c,!1),A=(c&s.childLanes)!==0,ln||A){if(A=Dt,A!==null&&(d=Dc(A,c),d!==0&&d!==W.retryLane))throw W.retryLane=d,eo(s,d),lr(A,s,d),Ip;my(U)||Jh(),a=Pp(s,a,c)}else my(U)?(a.flags|=192,a.child=s.child,a=null):(s=W.treeContext,Mt=zr(U.nextSibling),Rn=a,ot=!0,Hi=null,Vr=!1,s!==null&&Hv(a,s),a=Mp(a,d.children),a.flags|=4096);return a}return p?(Ji(),U=d.fallback,p=a.mode,W=s.child,le=W.sibling,d=ri(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,le!==null?U=ri(le,U):(U=to(U,p,c,null),U.flags|=2),U.return=a,d.return=a,d.sibling=U,a.child=d,du(null,d),d=a.child,U=s.child.memoizedState,U===null?U=Dp(c):(p=U.cachePool,p!==null?(W=an._currentValue,p=p.parent!==W?{parent:W,pool:W}:p):p=Xv(),U={baseLanes:U.baseLanes|c,cachePool:p}),d.memoizedState=U,d.childLanes=Op(s,A,c),a.memoizedState=Cp,du(s.child,d)):(Xi(a),c=s.child,s=c.sibling,c=ri(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=c,a.memoizedState=null,c)}function Mp(s,a){return a=qh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function qh(s,a){return s=gr(22,s,null,a),s.lanes=0,s}function Pp(s,a,c){return lo(a,s.child,null,c),s=Mp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function u1(s,a,c){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Wg(s.return,a,c)}function jp(s,a,c,d,p,b){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p,treeForkCount:b}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=p,A.treeForkCount=b)}function d1(s,a,c){var d=a.pendingProps,p=d.revealOrder,b=d.tail;d=d.children;var A=Wt.current,U=(A&2)!==0;if(U?(A=A&1|2,a.flags|=128):A&=1,te(Wt,A),Nn(s,a,d,c),d=ot?Jc:0,!U&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&u1(s,c,a);else if(s.tag===19)u1(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(c=a.child,p=null;c!==null;)s=c.alternate,s!==null&&Ch(s)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),jp(a,!1,p,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&Ch(s)===null){a.child=p;break}s=p.sibling,p.sibling=c,c=p,p=s}jp(a,!0,c,null,b,d);break;case"together":jp(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ci(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),ta|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(bl(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=ri(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=ri(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function Lp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Eh(s)))}function OI(s,a,c){switch(a.tag){case 3:je(a,a.stateNode.containerInfo),Ki(a,an,s.memoizedState.cache),no();break;case 27:case 5:Te(a);break;case 4:je(a,a.stateNode.containerInfo);break;case 10:Ki(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,lp(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Xi(a),a.flags|=128,null):(c&a.child.childLanes)!==0?c1(s,a,c):(Xi(a),s=ci(s,a,c),s!==null?s.sibling:null);Xi(a);break;case 19:var p=(s.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(bl(s,a,c,!1),d=(c&a.childLanes)!==0),p){if(d)return d1(s,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),te(Wt,Wt.current),d)break;return null;case 22:return a.lanes=0,r1(s,a,c,a.pendingProps);case 24:Ki(a,an,s.memoizedState.cache)}return ci(s,a,c)}function h1(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)ln=!0;else{if(!Lp(s,c)&&(a.flags&128)===0)return ln=!1,OI(s,a,c);ln=(s.flags&131072)!==0}else ln=!1,ot&&(a.flags&1048576)!==0&&$v(a,Jc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=ao(a.elementType),a.type=s,typeof s=="function")Bg(s)?(d=uo(s,d),a.tag=1,a=o1(null,a,s,d,c)):(a.tag=0,a=Np(null,a,s,d,c));else{if(s!=null){var p=s.$$typeof;if(p===q){a.tag=11,a=e1(null,a,s,d,c);break e}else if(p===R){a.tag=14,a=t1(null,a,s,d,c);break e}}throw a=G(s)||s,Error(r(306,a,""))}}return a;case 0:return Np(s,a,a.type,a.pendingProps,c);case 1:return d=a.type,p=uo(d,a.pendingProps),o1(s,a,d,p,c);case 3:e:{if(je(a,a.stateNode.containerInfo),s===null)throw Error(r(387));d=a.pendingProps;var b=a.memoizedState;p=b.element,rp(s,a),au(a,d,null,c);var A=a.memoizedState;if(d=A.cache,Ki(a,an,d),d!==b.cache&&Xg(a,[an],c,!0),iu(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=l1(s,a,d,c);break e}else if(d!==p){p=Pr(Error(r(424)),a),Zc(p),a=l1(s,a,d,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=zr(s.firstChild),Rn=a,ot=!0,Hi=null,Vr=!0,c=rb(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(no(),d===p){a=ci(s,a,c);break e}Nn(s,a,d,c)}a=a.child}return a;case 26:return Bh(s,a),s===null?(c=Ew(a.type,null,a.pendingProps,null))?a.memoizedState=c:ot||(c=a.type,s=a.pendingProps,d=af(ye.current).createElement(c),d[nn]=a,d[vn]=s,Cn(d,c,s),rn(d),a.stateNode=d):a.memoizedState=Ew(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Te(a),s===null&&ot&&(d=a.stateNode=bw(a.type,a.pendingProps,ye.current),Rn=a,Vr=!0,p=Mt,aa(a.type)?(py=p,Mt=zr(d.firstChild)):Mt=p),Nn(s,a,a.pendingProps.children,c),Bh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ot&&((p=d=Mt)&&(d=cN(d,a.type,a.pendingProps,Vr),d!==null?(a.stateNode=d,Rn=a,Mt=zr(d.firstChild),Vr=!1,p=!0):p=!1),p||Gi(a)),Te(a),p=a.type,b=a.pendingProps,A=s!==null?s.memoizedProps:null,d=b.children,dy(p,b)?d=null:A!==null&&dy(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=up(s,a,TI,null,null,c),Au._currentValue=p),Bh(s,a),Nn(s,a,d,c),a.child;case 6:return s===null&&ot&&((s=c=Mt)&&(c=uN(c,a.pendingProps,Vr),c!==null?(a.stateNode=c,Rn=a,Mt=null,s=!0):s=!1),s||Gi(a)),null;case 13:return c1(s,a,c);case 4:return je(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=lo(a,null,d,c):Nn(s,a,d,c),a.child;case 11:return e1(s,a,a.type,a.pendingProps,c);case 7:return Nn(s,a,a.pendingProps,c),a.child;case 8:return Nn(s,a,a.pendingProps.children,c),a.child;case 12:return Nn(s,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,Ki(a,a.type,d.value),Nn(s,a,d.children,c),a.child;case 9:return p=a.type._context,d=a.pendingProps.children,so(a),p=In(p),d=d(p),a.flags|=1,Nn(s,a,d,c),a.child;case 14:return t1(s,a,a.type,a.pendingProps,c);case 15:return n1(s,a,a.type,a.pendingProps,c);case 19:return d1(s,a,c);case 31:return DI(s,a,c);case 22:return r1(s,a,c,a.pendingProps);case 24:return so(a),d=In(an),s===null?(p=ep(),p===null&&(p=Dt,b=Jg(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=c),p=b),a.memoizedState={parent:d,cache:p},np(a),Ki(a,an,p)):((s.lanes&c)!==0&&(rp(s,a),au(a,null,null,c),iu()),p=s.memoizedState,b=a.memoizedState,p.parent!==d?(p={parent:d,cache:d},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Ki(a,an,d)):(d=b.cache,Ki(a,an,d),d!==p.cache&&Xg(a,[an],c,!0))),Nn(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ui(s){s.flags|=4}function Vp(s,a,c,d,p){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(U1())s.flags|=8192;else throw oo=kh,tp}else s.flags&=-16777217}function f1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Rw(a))if(U1())s.flags|=8192;else throw oo=kh,tp}function $h(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ir():536870912,s.lanes|=a,Dl|=a)}function hu(s,a){if(!ot)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Pt(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(a)for(var p=s.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function MI(s,a,c){var d=a.pendingProps;switch(Gg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return c=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ai(an),ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(vl(a)?ui(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yg())),Pt(a),null;case 26:var p=a.type,b=a.memoizedState;return s===null?(ui(a),b!==null?(Pt(a),f1(a,b)):(Pt(a),Vp(a,p,null,d,c))):b?b!==s.memoizedState?(ui(a),Pt(a),f1(a,b)):(Pt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&ui(a),Pt(a),Vp(a,p,s,d,c)),null;case 27:if($e(a),c=ye.current,p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}s=ne.current,vl(a)?Gv(a):(s=bw(p,d,c),a.stateNode=s,ui(a))}return Pt(a),null;case 5:if($e(a),p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Pt(a),null}if(b=ne.current,vl(a))Gv(a);else{var A=af(ye.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?A.createElement(p,{is:d.is}):A.createElement(p)}}b[nn]=a,b[vn]=d;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=b;e:switch(Cn(b,p,d),p){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ui(a)}}return Pt(a),Vp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&ui(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(s=ye.current,vl(a)){if(s=a.stateNode,c=a.memoizedProps,d=null,p=Rn,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}s[nn]=a,s=!!(s.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||cw(s.nodeValue,c)),s||Gi(a,!0)}else s=af(s).createTextNode(d),s[nn]=a,a.stateNode=s}return Pt(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(d=vl(a),c!==null){if(s===null){if(!d)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[nn]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),s=!1}else c=Yg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(yr(a),a):(yr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Pt(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=vl(a),d!==null&&d.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[nn]=a}else no(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),p=!1}else p=Yg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(yr(a),a):(yr(a),null)}return yr(a),(a.flags&128)!==0?(a.lanes=c,a):(c=d!==null,s=s!==null&&s.memoizedState!==null,c&&(d=a.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),$h(a,a.updateQueue),Pt(a),null);case 4:return ve(),s===null&&ay(a.stateNode.containerInfo),Pt(a),null;case 10:return ai(a.type),Pt(a),null;case 19:if(K(Wt),d=a.memoizedState,d===null)return Pt(a),null;if(p=(a.flags&128)!==0,b=d.rendering,b===null)if(p)hu(d,!1);else{if(Ht!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Ch(s),b!==null){for(a.flags|=128,hu(d,!1),s=b.updateQueue,a.updateQueue=s,$h(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)Fv(c,s),c=c.sibling;return te(Wt,Wt.current&1|2),ot&&si(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&Ee()>Qh&&(a.flags|=128,p=!0,hu(d,!1),a.lanes=4194304)}else{if(!p)if(s=Ch(b),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,$h(a,s),hu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ot)return Pt(a),null}else 2*Ee()-d.renderingStartTime>Qh&&c!==536870912&&(a.flags|=128,p=!0,hu(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(s=d.last,s!==null?s.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ee(),s.sibling=null,c=Wt.current,te(Wt,p?c&1|2:c&1),ot&&si(a,d.treeForkCount),s):(Pt(a),null);case 22:case 23:return yr(a),op(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),c=a.updateQueue,c!==null&&$h(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),s!==null&&K(io),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ai(an),Pt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function PI(s,a){switch(Gg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ai(an),ve(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return $e(a),null;case 31:if(a.memoizedState!==null){if(yr(a),a.alternate===null)throw Error(r(340));no()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(yr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));no()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return K(Wt),null;case 4:return ve(),null;case 10:return ai(a.type),null;case 22:case 23:return yr(a),op(),s!==null&&K(io),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ai(an),null;case 25:return null;default:return null}}function m1(s,a){switch(Gg(a),a.tag){case 3:ai(an),ve();break;case 26:case 27:case 5:$e(a);break;case 4:ve();break;case 31:a.memoizedState!==null&&yr(a);break;case 13:yr(a);break;case 19:K(Wt);break;case 10:ai(a.type);break;case 22:case 23:yr(a),op(),s!==null&&K(io);break;case 24:ai(an)}}function fu(s,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var p=d.next;c=p;do{if((c.tag&s)===s){d=void 0;var b=c.create,A=c.inst;d=b(),A.destroy=d}c=c.next}while(c!==p)}}catch(U){xt(a,a.return,U)}}function Zi(s,a,c){try{var d=a.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&s)===s){var A=d.inst,U=A.destroy;if(U!==void 0){A.destroy=void 0,p=a;var W=c,le=U;try{le()}catch(fe){xt(p,W,fe)}}}d=d.next}while(d!==b)}}catch(fe){xt(a,a.return,fe)}}function g1(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{ib(a,c)}catch(d){xt(s,s.return,d)}}}function p1(s,a,c){c.props=uo(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(d){xt(s,a,d)}}function mu(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof c=="function"?s.refCleanup=c(d):c.current=d}}catch(p){xt(s,a,p)}}function ks(s,a){var c=s.ref,d=s.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(p){xt(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){xt(s,a,p)}else c.current=null}function y1(s){var a=s.type,c=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(p){xt(s,s.return,p)}}function Up(s,a,c){try{var d=s.stateNode;rN(d,s.type,c,a),d[vn]=a}catch(p){xt(s,s.return,p)}}function _1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&aa(s.type)||s.tag===4}function zp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||_1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&aa(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fp(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Wr));else if(d!==4&&(d===27&&aa(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(Fp(s,a,c),s=s.sibling;s!==null;)Fp(s,a,c),s=s.sibling}function Hh(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(d!==4&&(d===27&&aa(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Hh(s,a,c),s=s.sibling;s!==null;)Hh(s,a,c),s=s.sibling}function v1(s){var a=s.stateNode,c=s.memoizedProps;try{for(var d=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Cn(a,d,c),a[nn]=s,a[vn]=c}catch(b){xt(s,s.return,b)}}var di=!1,cn=!1,Bp=!1,b1=typeof WeakSet=="function"?WeakSet:Set,wn=null;function jI(s,a){if(s=s.containerInfo,cy=ff,s=Dv(s),Pg(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var A=0,U=-1,W=-1,le=0,fe=0,ge=s,ce=null;t:for(;;){for(var de;ge!==c||p!==0&&ge.nodeType!==3||(U=A+p),ge!==b||d!==0&&ge.nodeType!==3||(W=A+d),ge.nodeType===3&&(A+=ge.nodeValue.length),(de=ge.firstChild)!==null;)ce=ge,ge=de;for(;;){if(ge===s)break t;if(ce===c&&++le===p&&(U=A),ce===b&&++fe===d&&(W=A),(de=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=de}c=U===-1||W===-1?null:{start:U,end:W}}else c=null}c=c||{start:0,end:0}}else c=null;for(uy={focusedElem:s,selectionRange:c},ff=!1,wn=a;wn!==null;)if(a=wn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,wn=s;else for(;wn!==null;){switch(a=wn,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)p=s[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=a,p=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Re=uo(c.type,p);s=d.getSnapshotBeforeUpdate(Re,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){xt(c,c.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)fy(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,wn=s;break}wn=a.return}}function w1(s,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:fi(s,c),d&4&&fu(5,c);break;case 1:if(fi(s,c),d&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(A){xt(c,c.return,A)}else{var p=uo(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(c,c.return,A)}}d&64&&g1(c),d&512&&mu(c,c.return);break;case 3:if(fi(s,c),d&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{ib(s,a)}catch(A){xt(c,c.return,A)}}break;case 27:a===null&&d&4&&v1(c);case 26:case 5:fi(s,c),a===null&&d&4&&y1(c),d&512&&mu(c,c.return);break;case 12:fi(s,c);break;case 31:fi(s,c),d&4&&T1(s,c);break;case 13:fi(s,c),d&4&&S1(s,c),d&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=HI.bind(null,c),dN(s,c))));break;case 22:if(d=c.memoizedState!==null||di,!d){a=a!==null&&a.memoizedState!==null||cn,p=di;var b=cn;di=d,(cn=a)&&!b?mi(s,c,(c.subtreeFlags&8772)!==0):fi(s,c),di=p,cn=b}break;case 30:break;default:fi(s,c)}}function x1(s){var a=s.alternate;a!==null&&(s.alternate=null,x1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&nl(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Lt=null,sr=!1;function hi(s,a,c){for(c=c.child;c!==null;)E1(s,a,c),c=c.sibling}function E1(s,a,c){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Yt,c)}catch{}switch(c.tag){case 26:cn||ks(c,a),hi(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:cn||ks(c,a);var d=Lt,p=sr;aa(c.type)&&(Lt=c.stateNode,sr=!1),hi(s,a,c),Eu(c.stateNode),Lt=d,sr=p;break;case 5:cn||ks(c,a);case 6:if(d=Lt,p=sr,Lt=null,hi(s,a,c),Lt=d,sr=p,Lt!==null)if(sr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(c.stateNode)}catch(b){xt(c,a,b)}else try{Lt.removeChild(c.stateNode)}catch(b){xt(c,a,b)}break;case 18:Lt!==null&&(sr?(s=Lt,gw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),zl(s)):gw(Lt,c.stateNode));break;case 4:d=Lt,p=sr,Lt=c.stateNode.containerInfo,sr=!0,hi(s,a,c),Lt=d,sr=p;break;case 0:case 11:case 14:case 15:Zi(2,c,a),cn||Zi(4,c,a),hi(s,a,c);break;case 1:cn||(ks(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&p1(c,a,d)),hi(s,a,c);break;case 21:hi(s,a,c);break;case 22:cn=(d=cn)||c.memoizedState!==null,hi(s,a,c),cn=d;break;default:hi(s,a,c)}}function T1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{zl(s)}catch(c){xt(a,a.return,c)}}}function S1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zl(s)}catch(c){xt(a,a.return,c)}}function LI(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new b1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new b1),a;default:throw Error(r(435,s.tag))}}function Gh(s,a){var c=LI(s);a.forEach(function(d){if(!c.has(d)){c.add(d);var p=GI.bind(null,s,d);d.then(p,p)}})}function ir(s,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d],b=s,A=a,U=A;e:for(;U!==null;){switch(U.tag){case 27:if(aa(U.type)){Lt=U.stateNode,sr=!1;break e}break;case 5:Lt=U.stateNode,sr=!1;break e;case 3:case 4:Lt=U.stateNode.containerInfo,sr=!0;break e}U=U.return}if(Lt===null)throw Error(r(160));E1(b,A,p),Lt=null,sr=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)A1(a,s),a=a.sibling}var ns=null;function A1(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ir(a,s),ar(s),d&4&&(Zi(3,s,s.return),fu(3,s),Zi(5,s,s.return));break;case 1:ir(a,s),ar(s),d&512&&(cn||c===null||ks(c,c.return)),d&64&&di&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var p=ns;if(ir(a,s),ar(s),d&512&&(cn||c===null||ks(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=s.memoizedState,c===null)if(d===null)if(s.stateNode===null){e:{d=s.type,c=s.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":b=p.getElementsByTagName("title")[0],(!b||b[fs]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(d),p.head.insertBefore(b,p.querySelector("head > title"))),Cn(b,d,c),b[nn]=s,rn(b),d=b;break e;case"link":var A=Aw("link","href",p).get(d+(c.href||""));if(A){for(var U=0;U<A.length;U++)if(b=A[U],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(U,1);break t}}b=p.createElement(d),Cn(b,d,c),p.head.appendChild(b);break;case"meta":if(A=Aw("meta","content",p).get(d+(c.content||""))){for(U=0;U<A.length;U++)if(b=A[U],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(U,1);break t}}b=p.createElement(d),Cn(b,d,c),p.head.appendChild(b);break;default:throw Error(r(468,d))}b[nn]=s,rn(b),d=b}s.stateNode=d}else kw(p,s.type,s.stateNode);else s.stateNode=Sw(p,d,s.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?kw(p,s.type,s.stateNode):Sw(p,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Up(s,s.memoizedProps,c.memoizedProps)}break;case 27:ir(a,s),ar(s),d&512&&(cn||c===null||ks(c,c.return)),c!==null&&d&4&&Up(s,s.memoizedProps,c.memoizedProps);break;case 5:if(ir(a,s),ar(s),d&512&&(cn||c===null||ks(c,c.return)),s.flags&32){p=s.stateNode;try{rr(p,"")}catch(Re){xt(s,s.return,Re)}}d&4&&s.stateNode!=null&&(p=s.memoizedProps,Up(s,p,c!==null?c.memoizedProps:p)),d&1024&&(Bp=!0);break;case 6:if(ir(a,s),ar(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,c=s.stateNode;try{c.nodeValue=d}catch(Re){xt(s,s.return,Re)}}break;case 3:if(cf=null,p=ns,ns=of(a.containerInfo),ir(a,s),ns=p,ar(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{zl(a.containerInfo)}catch(Re){xt(s,s.return,Re)}Bp&&(Bp=!1,k1(s));break;case 4:d=ns,ns=of(s.stateNode.containerInfo),ir(a,s),ar(s),ns=d;break;case 12:ir(a,s),ar(s);break;case 31:ir(a,s),ar(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 13:ir(a,s),ar(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yh=Ee()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 22:p=s.memoizedState!==null;var W=c!==null&&c.memoizedState!==null,le=di,fe=cn;if(di=le||p,cn=fe||W,ir(a,s),cn=fe,di=le,ar(s),d&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||W||di||cn||ho(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){W=c=a;try{if(b=W.stateNode,p)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{U=W.stateNode;var ge=W.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;U.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Re){xt(W,W.return,Re)}}}else if(a.tag===6){if(c===null){W=a;try{W.stateNode.nodeValue=p?"":W.memoizedProps}catch(Re){xt(W,W.return,Re)}}}else if(a.tag===18){if(c===null){W=a;try{var de=W.stateNode;p?pw(de,!0):pw(W.stateNode,!1)}catch(Re){xt(W,W.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Gh(s,c))));break;case 19:ir(a,s),ar(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 30:break;case 21:break;default:ir(a,s),ar(s)}}function ar(s){var a=s.flags;if(a&2){try{for(var c,d=s.return;d!==null;){if(_1(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var p=c.stateNode,b=zp(s);Hh(s,b,p);break;case 5:var A=c.stateNode;c.flags&32&&(rr(A,""),c.flags&=-33);var U=zp(s);Hh(s,U,A);break;case 3:case 4:var W=c.stateNode.containerInfo,le=zp(s);Fp(s,le,W);break;default:throw Error(r(161))}}catch(fe){xt(s,s.return,fe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function k1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;k1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function fi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)w1(s,a.alternate,a),a=a.sibling}function ho(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Zi(4,a,a.return),ho(a);break;case 1:ks(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&p1(a,a.return,c),ho(a);break;case 27:Eu(a.stateNode);case 26:case 5:ks(a,a.return),ho(a);break;case 22:a.memoizedState===null&&ho(a);break;case 30:ho(a);break;default:ho(a)}s=s.sibling}}function mi(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,p=s,b=a,A=b.flags;switch(b.tag){case 0:case 11:case 15:mi(p,b,c),fu(4,b);break;case 1:if(mi(p,b,c),d=b,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){xt(d,d.return,le)}if(d=b,p=d.updateQueue,p!==null){var U=d.stateNode;try{var W=p.shared.hiddenCallbacks;if(W!==null)for(p.shared.hiddenCallbacks=null,p=0;p<W.length;p++)sb(W[p],U)}catch(le){xt(d,d.return,le)}}c&&A&64&&g1(b),mu(b,b.return);break;case 27:v1(b);case 26:case 5:mi(p,b,c),c&&d===null&&A&4&&y1(b),mu(b,b.return);break;case 12:mi(p,b,c);break;case 31:mi(p,b,c),c&&A&4&&T1(p,b);break;case 13:mi(p,b,c),c&&A&4&&S1(p,b);break;case 22:b.memoizedState===null&&mi(p,b,c),mu(b,b.return);break;case 30:break;default:mi(p,b,c)}a=a.sibling}}function qp(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&eu(c))}function $p(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&eu(s))}function rs(s,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)R1(s,a,c,d),a=a.sibling}function R1(s,a,c,d){var p=a.flags;switch(a.tag){case 0:case 11:case 15:rs(s,a,c,d),p&2048&&fu(9,a);break;case 1:rs(s,a,c,d);break;case 3:rs(s,a,c,d),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&eu(s)));break;case 12:if(p&2048){rs(s,a,c,d),s=a.stateNode;try{var b=a.memoizedProps,A=b.id,U=b.onPostCommit;typeof U=="function"&&U(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){xt(a,a.return,W)}}else rs(s,a,c,d);break;case 31:rs(s,a,c,d);break;case 13:rs(s,a,c,d);break;case 23:break;case 22:b=a.stateNode,A=a.alternate,a.memoizedState!==null?b._visibility&2?rs(s,a,c,d):gu(s,a):b._visibility&2?rs(s,a,c,d):(b._visibility|=2,Il(s,a,c,d,(a.subtreeFlags&10256)!==0||!1)),p&2048&&qp(A,a);break;case 24:rs(s,a,c,d),p&2048&&$p(a.alternate,a);break;default:rs(s,a,c,d)}}function Il(s,a,c,d,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,A=a,U=c,W=d,le=A.flags;switch(A.tag){case 0:case 11:case 15:Il(b,A,U,W,p),fu(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Il(b,A,U,W,p):gu(b,A):(fe._visibility|=2,Il(b,A,U,W,p)),p&&le&2048&&qp(A.alternate,A);break;case 24:Il(b,A,U,W,p),p&&le&2048&&$p(A.alternate,A);break;default:Il(b,A,U,W,p)}a=a.sibling}}function gu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,d=a,p=d.flags;switch(d.tag){case 22:gu(c,d),p&2048&&qp(d.alternate,d);break;case 24:gu(c,d),p&2048&&$p(d.alternate,d);break;default:gu(c,d)}a=a.sibling}}var pu=8192;function Nl(s,a,c){if(s.subtreeFlags&pu)for(s=s.child;s!==null;)I1(s,a,c),s=s.sibling}function I1(s,a,c){switch(s.tag){case 26:Nl(s,a,c),s.flags&pu&&s.memoizedState!==null&&EN(c,ns,s.memoizedState,s.memoizedProps);break;case 5:Nl(s,a,c);break;case 3:case 4:var d=ns;ns=of(s.stateNode.containerInfo),Nl(s,a,c),ns=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=pu,pu=16777216,Nl(s,a,c),pu=d):Nl(s,a,c));break;default:Nl(s,a,c)}}function N1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function yu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];wn=d,D1(d,s)}N1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C1(s),s=s.sibling}function C1(s){switch(s.tag){case 0:case 11:case 15:yu(s),s.flags&2048&&Zi(9,s,s.return);break;case 3:yu(s);break;case 12:yu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Kh(s)):yu(s);break;default:yu(s)}}function Kh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];wn=d,D1(d,s)}N1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Zi(8,a,a.return),Kh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Kh(a));break;default:Kh(a)}s=s.sibling}}function D1(s,a){for(;wn!==null;){var c=wn;switch(c.tag){case 0:case 11:case 15:Zi(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:eu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,wn=d;else e:for(c=s;wn!==null;){d=wn;var p=d.sibling,b=d.return;if(x1(d),d===c){wn=null;break e}if(p!==null){p.return=b,wn=p;break e}wn=b}}}var VI={getCacheForType:function(s){var a=In(an),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return In(an).controller.signal}},UI=typeof WeakMap=="function"?WeakMap:Map,pt=0,Dt=null,et=null,nt=0,wt=0,_r=null,ea=!1,Cl=!1,Hp=!1,gi=0,Ht=0,ta=0,fo=0,Gp=0,vr=0,Dl=0,_u=null,or=null,Kp=!1,Yh=0,O1=0,Qh=1/0,Wh=null,na=null,gn=0,ra=null,Ol=null,pi=0,Yp=0,Qp=null,M1=null,vu=0,Wp=null;function br(){return(pt&2)!==0&&nt!==0?nt&-nt:P.T!==null?ny():Xd()}function P1(){if(vr===0)if((nt&536870912)===0||ot){var s=Js;Js<<=1,(Js&3932160)===0&&(Js=262144),vr=s}else vr=536870912;return s=pr.current,s!==null&&(s.flags|=32),vr}function lr(s,a,c){(s===Dt&&(wt===2||wt===9)||s.cancelPendingCommit!==null)&&(Ml(s,0),sa(s,nt,vr,!1)),za(s,c),((pt&2)===0||s!==Dt)&&(s===Dt&&((pt&2)===0&&(fo|=c),Ht===4&&sa(s,nt,vr,!1)),Rs(s))}function j1(s,a,c){if((pt&6)!==0)throw Error(r(327));var d=!c&&(a&127)===0&&(a&s.expiredLanes)===0||An(s,a),p=d?BI(s,a):Jp(s,a,!0),b=d;do{if(p===0){Cl&&!d&&sa(s,a,0,!1);break}else{if(c=s.current.alternate,b&&!zI(c)){p=Jp(s,a,!1),b=!1;continue}if(p===2){if(b=a,s.errorRecoveryDisabledLanes&b)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var U=s;p=_u;var W=U.current.memoizedState.isDehydrated;if(W&&(Ml(U,A).flags|=256),A=Jp(U,A,!1),A!==2){if(Hp&&!W){U.errorRecoveryDisabledLanes|=b,fo|=b,p=4;break e}b=or,or=p,b!==null&&(or===null?or=b:or.push.apply(or,b))}p=A}if(b=!1,p!==2)continue}}if(p===1){Ml(s,0),sa(s,a,0,!0);break}e:{switch(d=s,b=p,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:sa(d,a,vr,!ea);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Yh+300-Ee(),10<p)){if(sa(d,a,vr,!ea),Sn(d,0,!0)!==0)break e;pi=a,d.timeoutHandle=fw(L1.bind(null,d,c,or,Wh,Kp,a,vr,fo,Dl,ea,b,"Throttled",-0,0),p);break e}L1(d,c,or,Wh,Kp,a,vr,fo,Dl,ea,b,null,-0,0)}}break}while(!0);Rs(s)}function L1(s,a,c,d,p,b,A,U,W,le,fe,ge,ce,de){if(s.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wr},I1(a,b,ge);var Re=(b&62914560)===b?Yh-Ee():(b&4194048)===b?O1-Ee():0;if(Re=TN(ge,Re),Re!==null){pi=b,s.cancelPendingCommit=Re(H1.bind(null,s,a,b,c,d,p,A,U,W,fe,ge,null,ce,de)),sa(s,b,A,!le);return}}H1(s,a,b,c,d,p,A,U,W)}function zI(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var p=c[d],b=p.getSnapshot;p=p.value;try{if(!mr(b(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function sa(s,a,c,d){a&=~Gp,a&=~fo,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var p=a;0<p;){var b=31-Ot(p),A=1<<b;d[b]=-1,p&=~A}c!==0&&Fa(s,c,a)}function Xh(){return(pt&6)===0?(bu(0),!1):!0}function Xp(){if(et!==null){if(wt===0)var s=et.return;else s=et,ii=ro=null,fp(s),Tl=null,nu=0,s=et;for(;s!==null;)m1(s.alternate,s),s=s.return;et=null}}function Ml(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,aN(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),pi=0,Xp(),Dt=s,et=c=ri(s.current,null),nt=a,wt=0,_r=null,ea=!1,Cl=An(s,a),Hp=!1,Dl=vr=Gp=fo=ta=Ht=0,or=_u=null,Kp=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var p=31-Ot(d),b=1<<p;a|=s[p],d&=~b}return gi=a,_h(),c}function V1(s,a){Ke=null,P.H=uu,a===El||a===Ah?(a=eb(),wt=3):a===tp?(a=eb(),wt=4):wt=a===Ip?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,_r=a,et===null&&(Ht=1,zh(s,Pr(a,s.current)))}function U1(){var s=pr.current;return s===null?!0:(nt&4194048)===nt?Ur===null:(nt&62914560)===nt||(nt&536870912)!==0?s===Ur:!1}function z1(){var s=P.H;return P.H=uu,s===null?uu:s}function F1(){var s=P.A;return P.A=VI,s}function Jh(){Ht=4,ea||(nt&4194048)!==nt&&pr.current!==null||(Cl=!0),(ta&134217727)===0&&(fo&134217727)===0||Dt===null||sa(Dt,nt,vr,!1)}function Jp(s,a,c){var d=pt;pt|=2;var p=z1(),b=F1();(Dt!==s||nt!==a)&&(Wh=null,Ml(s,a)),a=!1;var A=Ht;e:do try{if(wt!==0&&et!==null){var U=et,W=_r;switch(wt){case 8:Xp(),A=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(a=!0);var le=wt;if(wt=0,_r=null,Pl(s,U,W,le),c&&Cl){A=0;break e}break;default:le=wt,wt=0,_r=null,Pl(s,U,W,le)}}FI(),A=Ht;break}catch(fe){V1(s,fe)}while(!0);return a&&s.shellSuspendCounter++,ii=ro=null,pt=d,P.H=p,P.A=b,et===null&&(Dt=null,nt=0,_h()),A}function FI(){for(;et!==null;)B1(et)}function BI(s,a){var c=pt;pt|=2;var d=z1(),p=F1();Dt!==s||nt!==a?(Wh=null,Qh=Ee()+500,Ml(s,a)):Cl=An(s,a);e:do try{if(wt!==0&&et!==null){a=et;var b=_r;t:switch(wt){case 1:wt=0,_r=null,Pl(s,a,b,1);break;case 2:case 9:if(Jv(b)){wt=0,_r=null,q1(a);break}a=function(){wt!==2&&wt!==9||Dt!==s||(wt=7),Rs(s)},b.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Jv(b)?(wt=0,_r=null,q1(a)):(wt=0,_r=null,Pl(s,a,b,7));break;case 5:var A=null;switch(et.tag){case 26:A=et.memoizedState;case 5:case 27:var U=et;if(A?Rw(A):U.stateNode.complete){wt=0,_r=null;var W=U.sibling;if(W!==null)et=W;else{var le=U.return;le!==null?(et=le,Zh(le)):et=null}break t}}wt=0,_r=null,Pl(s,a,b,5);break;case 6:wt=0,_r=null,Pl(s,a,b,6);break;case 8:Xp(),Ht=6;break e;default:throw Error(r(462))}}qI();break}catch(fe){V1(s,fe)}while(!0);return ii=ro=null,P.H=d,P.A=p,pt=c,et!==null?0:(Dt=null,nt=0,_h(),Ht)}function qI(){for(;et!==null&&!He();)B1(et)}function B1(s){var a=h1(s.alternate,s,gi);s.memoizedProps=s.pendingProps,a===null?Zh(s):et=a}function q1(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=a1(c,a,a.pendingProps,a.type,void 0,nt);break;case 11:a=a1(c,a,a.pendingProps,a.type.render,a.ref,nt);break;case 5:fp(a);default:m1(c,a),a=et=Fv(a,gi),a=h1(c,a,gi)}s.memoizedProps=s.pendingProps,a===null?Zh(s):et=a}function Pl(s,a,c,d){ii=ro=null,fp(a),Tl=null,nu=0;var p=a.return;try{if(CI(s,p,a,c,nt)){Ht=1,zh(s,Pr(c,s.current)),et=null;return}}catch(b){if(p!==null)throw et=p,b;Ht=1,zh(s,Pr(c,s.current)),et=null;return}a.flags&32768?(ot||d===1?s=!0:Cl||(nt&536870912)!==0?s=!1:(ea=s=!0,(d===2||d===9||d===3||d===6)&&(d=pr.current,d!==null&&d.tag===13&&(d.flags|=16384))),$1(a,s)):Zh(a)}function Zh(s){var a=s;do{if((a.flags&32768)!==0){$1(a,ea);return}s=a.return;var c=MI(a.alternate,a,gi);if(c!==null){et=c;return}if(a=a.sibling,a!==null){et=a;return}et=a=s}while(a!==null);Ht===0&&(Ht=5)}function $1(s,a){do{var c=PI(s.alternate,s);if(c!==null){c.flags&=32767,et=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){et=s;return}et=s=c}while(s!==null);Ht=6,et=null}function H1(s,a,c,d,p,b,A,U,W){s.cancelPendingCommit=null;do ef();while(gn!==0);if((pt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=zg,Cg(s,c,b,A,U,W),s===Dt&&(et=Dt=null,nt=0),Ol=a,ra=s,pi=c,Yp=b,Qp=p,M1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,KI(mt,function(){return W1(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,p=M.p,M.p=2,A=pt,pt|=4;try{jI(s,a,c)}finally{pt=A,M.p=p,P.T=d}}gn=1,G1(),K1(),Y1()}}function G1(){if(gn===1){gn=0;var s=ra,a=Ol,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=M.p;M.p=2;var p=pt;pt|=4;try{A1(a,s);var b=uy,A=Dv(s.containerInfo),U=b.focusedElem,W=b.selectionRange;if(A!==U&&U&&U.ownerDocument&&Cv(U.ownerDocument.documentElement,U)){if(W!==null&&Pg(U)){var le=W.start,fe=W.end;if(fe===void 0&&(fe=le),"selectionStart"in U)U.selectionStart=le,U.selectionEnd=Math.min(fe,U.value.length);else{var ge=U.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Re=U.textContent.length,Ve=Math.min(W.start,Re),Ct=W.end===void 0?Ve:Math.min(W.end,Re);!de.extend&&Ve>Ct&&(A=Ct,Ct=Ve,Ve=A);var se=Nv(U,Ve),J=Nv(U,Ct);if(se&&J&&(de.rangeCount!==1||de.anchorNode!==se.node||de.anchorOffset!==se.offset||de.focusNode!==J.node||de.focusOffset!==J.offset)){var oe=ge.createRange();oe.setStart(se.node,se.offset),de.removeAllRanges(),Ve>Ct?(de.addRange(oe),de.extend(J.node,J.offset)):(oe.setEnd(J.node,J.offset),de.addRange(oe))}}}}for(ge=[],de=U;de=de.parentNode;)de.nodeType===1&&ge.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ge.length;U++){var me=ge[U];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ff=!!cy,uy=cy=null}finally{pt=p,M.p=d,P.T=c}}s.current=a,gn=2}}function K1(){if(gn===2){gn=0;var s=ra,a=Ol,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=M.p;M.p=2;var p=pt;pt|=4;try{w1(s,a.alternate,a)}finally{pt=p,M.p=d,P.T=c}}gn=3}}function Y1(){if(gn===4||gn===3){gn=0,Le();var s=ra,a=Ol,c=pi,d=M1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?gn=5:(gn=0,Ol=ra=null,Q1(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(na=null),Zs(c),a=a.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=P.T,p=M.p,M.p=2,P.T=null;try{for(var b=s.onRecoverableError,A=0;A<d.length;A++){var U=d[A];b(U.value,{componentStack:U.stack})}}finally{P.T=a,M.p=p}}(pi&3)!==0&&ef(),Rs(s),p=s.pendingLanes,(c&261930)!==0&&(p&42)!==0?s===Wp?vu++:(vu=0,Wp=s):vu=0,bu(0)}}function Q1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,eu(a)))}function ef(){return G1(),K1(),Y1(),W1()}function W1(){if(gn!==5)return!1;var s=ra,a=Yp;Yp=0;var c=Zs(pi),d=P.T,p=M.p;try{M.p=32>c?32:c,P.T=null,c=Qp,Qp=null;var b=ra,A=pi;if(gn=0,Ol=ra=null,pi=0,(pt&6)!==0)throw Error(r(331));var U=pt;if(pt|=4,C1(b.current),R1(b,b.current,A,c),pt=U,bu(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{M.p=p,P.T=d,Q1(s,a)}}function X1(s,a,c){a=Pr(c,a),a=Rp(s.stateNode,a,2),s=Wi(s,a,2),s!==null&&(za(s,2),Rs(s))}function xt(s,a,c){if(s.tag===3)X1(s,s,c);else for(;a!==null;){if(a.tag===3){X1(a,s,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(na===null||!na.has(d))){s=Pr(c,s),c=Jb(2),d=Wi(a,c,2),d!==null&&(Zb(c,d,a,s),za(d,2),Rs(d));break}}a=a.return}}function Zp(s,a,c){var d=s.pingCache;if(d===null){d=s.pingCache=new UI;var p=new Set;d.set(a,p)}else p=d.get(a),p===void 0&&(p=new Set,d.set(a,p));p.has(c)||(Hp=!0,p.add(c),s=$I.bind(null,s,a,c),a.then(s,s))}function $I(s,a,c){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Dt===s&&(nt&c)===c&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>Ee()-Yh?(pt&2)===0&&Ml(s,0):Gp|=c,Dl===nt&&(Dl=0)),Rs(s)}function J1(s,a){a===0&&(a=Ir()),s=eo(s,a),s!==null&&(za(s,a),Rs(s))}function HI(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),J1(s,c)}function GI(s,a){var c=0;switch(s.tag){case 31:case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),J1(s,c)}function KI(s,a){return pe(s,a)}var tf=null,jl=null,ey=!1,nf=!1,ty=!1,ia=0;function Rs(s){s!==jl&&s.next===null&&(jl===null?tf=jl=s:jl=jl.next=s),nf=!0,ey||(ey=!0,QI())}function bu(s,a){if(!ty&&nf){ty=!0;do for(var c=!1,d=tf;d!==null;){if(s!==0){var p=d.pendingLanes;if(p===0)var b=0;else{var A=d.suspendedLanes,U=d.pingedLanes;b=(1<<31-Ot(42|s)+1)-1,b&=p&~(A&~U),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,nw(d,b))}else b=nt,b=Sn(d,d===Dt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||An(d,b)||(c=!0,nw(d,b));d=d.next}while(c);ty=!1}}function YI(){Z1()}function Z1(){nf=ey=!1;var s=0;ia!==0&&iN()&&(s=ia);for(var a=Ee(),c=null,d=tf;d!==null;){var p=d.next,b=ew(d,a);b===0?(d.next=null,c===null?tf=p:c.next=p,p===null&&(jl=c)):(c=d,(s!==0||(b&3)!==0)&&(nf=!0)),d=p}gn!==0&&gn!==5||bu(s),ia!==0&&(ia=0)}function ew(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var A=31-Ot(b),U=1<<A,W=p[A];W===-1?((U&c)===0||(U&d)!==0)&&(p[A]=el(U,a)):W<=a&&(s.expiredLanes|=U),b&=~U}if(a=Dt,c=nt,c=Sn(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,c===0||s===a&&(wt===2||wt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Se(d),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||An(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(d!==null&&Se(d),Zs(c)){case 2:case 8:c=Gn;break;case 32:c=mt;break;case 268435456:c=qt;break;default:c=mt}return d=tw.bind(null,s),c=pe(c,d),s.callbackPriority=a,s.callbackNode=c,a}return d!==null&&d!==null&&Se(d),s.callbackPriority=2,s.callbackNode=null,2}function tw(s,a){if(gn!==0&&gn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(ef()&&s.callbackNode!==c)return null;var d=nt;return d=Sn(s,s===Dt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(j1(s,d,a),ew(s,Ee()),s.callbackNode!=null&&s.callbackNode===c?tw.bind(null,s):null)}function nw(s,a){if(ef())return null;j1(s,a,!0)}function QI(){oN(function(){(pt&6)!==0?pe(_t,YI):Z1()})}function ny(){if(ia===0){var s=wl;s===0&&(s=jn,jn<<=1,(jn&261888)===0&&(jn=256)),ia=s}return ia}function rw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:al(""+s)}function sw(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function WI(s,a,c,d,p){if(a==="submit"&&c&&c.stateNode===p){var b=rw((p[vn]||null).action),A=d.submitter;A&&(a=(a=A[vn]||null)?rw(a.formAction):A.getAttribute("formAction"),a!==null&&(b=a,A=null));var U=new ws("action","action",null,d,p);s.push({event:U,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ia!==0){var W=A?sw(p,A):new FormData(p);xp(c,{pending:!0,data:W,method:p.method,action:b},null,W)}}else typeof b=="function"&&(U.preventDefault(),W=A?sw(p,A):new FormData(p),xp(c,{pending:!0,data:W,method:p.method,action:b},b,W))},currentTarget:p}]})}}for(var ry=0;ry<Ug.length;ry++){var sy=Ug[ry],XI=sy.toLowerCase(),JI=sy[0].toUpperCase()+sy.slice(1);ts(XI,"on"+JI)}ts(Pv,"onAnimationEnd"),ts(jv,"onAnimationIteration"),ts(Lv,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(mI,"onTransitionRun"),ts(gI,"onTransitionStart"),ts(pI,"onTransitionCancel"),ts(Vv,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function iw(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],p=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var A=d.length-1;0<=A;A--){var U=d[A],W=U.instance,le=U.currentTarget;if(U=U.listener,W!==b&&p.isPropagationStopped())break e;b=U,p.currentTarget=le;try{b(p)}catch(fe){yh(fe)}p.currentTarget=null,b=W}else for(A=0;A<d.length;A++){if(U=d[A],W=U.instance,le=U.currentTarget,U=U.listener,W!==b&&p.isPropagationStopped())break e;b=U,p.currentTarget=le;try{b(p)}catch(fe){yh(fe)}p.currentTarget=null,b=W}}}}function tt(s,a){var c=a[tl];c===void 0&&(c=a[tl]=new Set);var d=s+"__bubble";c.has(d)||(aw(a,s,2,!1),c.add(d))}function iy(s,a,c){var d=0;a&&(d|=4),aw(c,s,d,a)}var rf="_reactListening"+Math.random().toString(36).slice(2);function ay(s){if(!s[rf]){s[rf]=!0,Oc.forEach(function(c){c!=="selectionchange"&&(ZI.has(c)||iy(c,!1,s),iy(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[rf]||(a[rf]=!0,iy("selectionchange",!1,a))}}function aw(s,a,c,d){switch(Pw(a)){case 2:var p=kN;break;case 8:p=RN;break;default:p=wy}c=p.bind(null,a,c,s),p=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(a,c,{capture:!0,passive:p}):s.addEventListener(a,c,!0):p!==void 0?s.addEventListener(a,c,{passive:p}):s.addEventListener(a,c,!1)}function oy(s,a,c,d,p){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var U=d.stateNode.containerInfo;if(U===p)break;if(A===4)for(A=d.return;A!==null;){var W=A.tag;if((W===3||W===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;U!==null;){if(A=ms(U),A===null)return;if(W=A.tag,W===5||W===6||W===26||W===27){d=b=A;continue e}U=U.parentNode}}d=d.return}zi(function(){var le=b,fe=Cr(c),ge=[];e:{var ce=Uv.get(s);if(ce!==void 0){var de=ws,Re=s;switch(s){case"keypress":if(Ya(c)===0)break e;case"keydown":case"keyup":de=mh;break;case"focusin":Re="focus",de=Wa;break;case"focusout":Re="blur",de=Wa;break;case"beforeblur":case"afterblur":de=Wa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=S;break;case Pv:case jv:case Lv:de=oh;break;case Vv:de=F;break;case"scroll":case"scrollend":de=Hc;break;case"wheel":de=ue;break;case"copy":case"cut":case"paste":de=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=ni;break;case"toggle":case"beforetoggle":de=Ge}var Ve=(a&4)!==0,Ct=!Ve&&(s==="scroll"||s==="scrollend"),se=Ve?ce!==null?ce+"Capture":null:ce;Ve=[];for(var J=le,oe;J!==null;){var me=J;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||se===null||(me=Xr(J,se),me!=null&&Ve.push(xu(J,me,oe))),Ct)break;J=J.return}0<Ve.length&&(ce=new de(ce,Re,null,c,fe),ge.push({event:ce,listeners:Ve}))}}if((a&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",ce&&c!==Bc&&(Re=c.relatedTarget||c.fromElement)&&(ms(Re)||Re[hs]))break e;if((de||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Re=c.relatedTarget||c.toElement,de=le,Re=Re?ms(Re):null,Re!==null&&(Ct=o(Re),Ve=Re.tag,Re!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Re=null)):(de=null,Re=le),de!==Re)){if(Ve=Gc,me="onMouseLeave",se="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=ni,me="onPointerLeave",se="onPointerEnter",J="pointer"),Ct=de==null?ce:hr(de),oe=Re==null?ce:hr(Re),ce=new Ve(me,J+"leave",de,c,fe),ce.target=Ct,ce.relatedTarget=oe,me=null,ms(fe)===le&&(Ve=new Ve(se,J+"enter",Re,c,fe),Ve.target=oe,Ve.relatedTarget=Ct,me=Ve),Ct=me,de&&Re)t:{for(Ve=eN,se=de,J=Re,oe=0,me=se;me;me=Ve(me))oe++;me=0;for(var Oe=J;Oe;Oe=Ve(Oe))me++;for(;0<oe-me;)se=Ve(se),oe--;for(;0<me-oe;)J=Ve(J),me--;for(;oe--;){if(se===J||J!==null&&se===J.alternate){Ve=se;break t}se=Ve(se),J=Ve(J)}Ve=null}else Ve=null;de!==null&&ow(ge,ce,de,Ve,!1),Re!==null&&Ct!==null&&ow(ge,Ct,Re,Ve,!0)}}e:{if(ce=le?hr(le):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var ht=Tv;else if(xv(ce))if(Sv)ht=dI;else{ht=cI;var Ne=lI}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&il(le.elementType)&&(ht=Tv):ht=uI;if(ht&&(ht=ht(s,le))){Ev(ge,ht,c,fe);break e}Ne&&Ne(s,ce,le),s==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Uc(ce,"number",ce.value)}switch(Ne=le?hr(le):window,s){case"focusin":(xv(Ne)||Ne.contentEditable==="true")&&(fl=Ne,jg=le,Xc=null);break;case"focusout":Xc=jg=fl=null;break;case"mousedown":Lg=!0;break;case"contextmenu":case"mouseup":case"dragend":Lg=!1,Ov(ge,c,fe);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Ov(ge,c,fe)}var Xe;if(gt)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else hl?Xa(s,c)&&(rt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(rt="onCompositionStart");rt&&(Ts&&c.locale!=="ko"&&(hl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&hl&&(Xe=$c()):(bs=fe,qc="value"in bs?bs.value:bs.textContent,hl=!0)),Ne=sf(le,rt),0<Ne.length&&(rt=new Es(rt,s,null,c,fe),ge.push({event:rt,listeners:Ne}),Xe?rt.data=Xe:(Xe=dl(c),Xe!==null&&(rt.data=Xe)))),(Xe=Or?sI(s,c):iI(s,c))&&(rt=sf(le,"onBeforeInput"),0<rt.length&&(Ne=new Es("onBeforeInput","beforeinput",null,c,fe),ge.push({event:Ne,listeners:rt}),Ne.data=Xe)),WI(ge,s,le,c,fe)}iw(ge,a)})}function xu(s,a,c){return{instance:s,listener:a,currentTarget:c}}function sf(s,a){for(var c=a+"Capture",d=[];s!==null;){var p=s,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=Xr(s,c),p!=null&&d.unshift(xu(s,p,b)),p=Xr(s,a),p!=null&&d.push(xu(s,p,b))),s.tag===3)return d;s=s.return}return[]}function eN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ow(s,a,c,d,p){for(var b=a._reactName,A=[];c!==null&&c!==d;){var U=c,W=U.alternate,le=U.stateNode;if(U=U.tag,W!==null&&W===d)break;U!==5&&U!==26&&U!==27||le===null||(W=le,p?(le=Xr(c,b),le!=null&&A.unshift(xu(c,le,W))):p||(le=Xr(c,b),le!=null&&A.push(xu(c,le,W)))),c=c.return}A.length!==0&&s.push({event:a,listeners:A})}var tN=/\r\n?/g,nN=/\u0000|\uFFFD/g;function lw(s){return(typeof s=="string"?s:""+s).replace(tN,`
`).replace(nN,"")}function cw(s,a){return a=lw(a),lw(s)===a}function Nt(s,a,c,d,p,b){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||rr(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&rr(s,""+d);break;case"className":fr(s,"class",d);break;case"tabIndex":fr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(s,c,d);break;case"style":Fc(s,d,b);break;case"data":if(a!=="object"){fr(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=al(""+d),s.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&Nt(s,a,"name",p.name,p,null),Nt(s,a,"formEncType",p.formEncType,p,null),Nt(s,a,"formMethod",p.formMethod,p,null),Nt(s,a,"formTarget",p.formTarget,p,null)):(Nt(s,a,"encType",p.encType,p,null),Nt(s,a,"method",p.method,p,null),Nt(s,a,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=al(""+d),s.setAttribute(c,d);break;case"onClick":d!=null&&(s.onclick=Wr);break;case"onScroll":d!=null&&tt("scroll",s);break;case"onScrollEnd":d!=null&&tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}c=al(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""+d):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":d===!0?s.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,d):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(c,d):s.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(c):s.setAttribute(c,d);break;case"popover":tt("beforetoggle",s),tt("toggle",s),rl(s,"popover",d);break;case"xlinkActuate":sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":rl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=sh.get(c)||c,rl(s,c,d))}}function ly(s,a,c,d,p,b){switch(c){case"style":Fc(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof d=="string"?rr(s,d):(typeof d=="number"||typeof d=="bigint")&&rr(s,""+d);break;case"onScroll":d!=null&&tt("scroll",s);break;case"onScrollEnd":d!=null&&tt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),b=s[vn]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(a,b,p),typeof d=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,d,p);break e}c in s?s[c]=d:d===!0?s.setAttribute(c,""):rl(s,c,d)}}}function Cn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",s),tt("load",s);var d=!1,p=!1,b;for(b in c)if(c.hasOwnProperty(b)){var A=c[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(s,a,b,A,c,null)}}p&&Nt(s,a,"srcSet",c.srcSet,c,null),d&&Nt(s,a,"src",c.src,c,null);return;case"input":tt("invalid",s);var U=b=A=p=null,W=null,le=null;for(d in c)if(c.hasOwnProperty(d)){var fe=c[d];if(fe!=null)switch(d){case"name":p=fe;break;case"type":A=fe;break;case"checked":W=fe;break;case"defaultChecked":le=fe;break;case"value":b=fe;break;case"defaultValue":U=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Nt(s,a,d,fe,c,null)}}th(s,b,U,W,le,A,p,!1);return;case"select":tt("invalid",s),d=A=b=null;for(p in c)if(c.hasOwnProperty(p)&&(U=c[p],U!=null))switch(p){case"value":b=U;break;case"defaultValue":A=U;break;case"multiple":d=U;default:Nt(s,a,p,U,c,null)}a=b,c=A,s.multiple=!!d,a!=null?ji(s,!!d,a,!1):c!=null&&ji(s,!!d,c,!0);return;case"textarea":tt("invalid",s),b=p=d=null;for(A in c)if(c.hasOwnProperty(A)&&(U=c[A],U!=null))switch(A){case"value":d=U;break;case"defaultValue":p=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Nt(s,a,A,U,c,null)}Li(s,d,p,b);return;case"option":for(W in c)if(c.hasOwnProperty(W)&&(d=c[W],d!=null))switch(W){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Nt(s,a,W,d,c,null)}return;case"dialog":tt("beforetoggle",s),tt("toggle",s),tt("cancel",s),tt("close",s);break;case"iframe":case"object":tt("load",s);break;case"video":case"audio":for(d=0;d<wu.length;d++)tt(wu[d],s);break;case"image":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"embed":case"source":case"link":tt("error",s),tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in c)if(c.hasOwnProperty(le)&&(d=c[le],d!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(s,a,le,d,c,null)}return;default:if(il(a)){for(fe in c)c.hasOwnProperty(fe)&&(d=c[fe],d!==void 0&&ly(s,a,fe,d,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(d=c[U],d!=null&&Nt(s,a,U,d,c,null))}function rN(s,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,A=null,U=null,W=null,le=null,fe=null;for(de in c){var ge=c[de];if(c.hasOwnProperty(de)&&ge!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":W=ge;default:d.hasOwnProperty(de)||Nt(s,a,de,null,d,ge)}}for(var ce in d){var de=d[ce];if(ge=c[ce],d.hasOwnProperty(ce)&&(de!=null||ge!=null))switch(ce){case"type":b=de;break;case"name":p=de;break;case"checked":le=de;break;case"defaultChecked":fe=de;break;case"value":A=de;break;case"defaultValue":U=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:de!==ge&&Nt(s,a,ce,de,d,ge)}}sl(s,A,U,W,le,fe,b,p);return;case"select":de=A=U=ce=null;for(b in c)if(W=c[b],c.hasOwnProperty(b)&&W!=null)switch(b){case"value":break;case"multiple":de=W;default:d.hasOwnProperty(b)||Nt(s,a,b,null,d,W)}for(p in d)if(b=d[p],W=c[p],d.hasOwnProperty(p)&&(b!=null||W!=null))switch(p){case"value":ce=b;break;case"defaultValue":U=b;break;case"multiple":A=b;default:b!==W&&Nt(s,a,p,b,d,W)}a=U,c=A,d=de,ce!=null?ji(s,!!c,ce,!1):!!d!=!!c&&(a!=null?ji(s,!!c,a,!0):ji(s,!!c,c?[]:"",!1));return;case"textarea":de=ce=null;for(U in c)if(p=c[U],c.hasOwnProperty(U)&&p!=null&&!d.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Nt(s,a,U,null,d,p)}for(A in d)if(p=d[A],b=c[A],d.hasOwnProperty(A)&&(p!=null||b!=null))switch(A){case"value":ce=p;break;case"defaultValue":de=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==b&&Nt(s,a,A,p,d,b)}nh(s,ce,de);return;case"option":for(var Re in c)if(ce=c[Re],c.hasOwnProperty(Re)&&ce!=null&&!d.hasOwnProperty(Re))switch(Re){case"selected":s.selected=!1;break;default:Nt(s,a,Re,null,d,ce)}for(W in d)if(ce=d[W],de=c[W],d.hasOwnProperty(W)&&ce!==de&&(ce!=null||de!=null))switch(W){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Nt(s,a,W,ce,d,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in c)ce=c[Ve],c.hasOwnProperty(Ve)&&ce!=null&&!d.hasOwnProperty(Ve)&&Nt(s,a,Ve,null,d,ce);for(le in d)if(ce=d[le],de=c[le],d.hasOwnProperty(le)&&ce!==de&&(ce!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:Nt(s,a,le,ce,d,de)}return;default:if(il(a)){for(var Ct in c)ce=c[Ct],c.hasOwnProperty(Ct)&&ce!==void 0&&!d.hasOwnProperty(Ct)&&ly(s,a,Ct,void 0,d,ce);for(fe in d)ce=d[fe],de=c[fe],!d.hasOwnProperty(fe)||ce===de||ce===void 0&&de===void 0||ly(s,a,fe,ce,d,de);return}}for(var se in c)ce=c[se],c.hasOwnProperty(se)&&ce!=null&&!d.hasOwnProperty(se)&&Nt(s,a,se,null,d,ce);for(ge in d)ce=d[ge],de=c[ge],!d.hasOwnProperty(ge)||ce===de||ce==null&&de==null||Nt(s,a,ge,ce,d,de)}function uw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var p=c[d],b=p.transferSize,A=p.initiatorType,U=p.duration;if(b&&U&&uw(A)){for(A=0,U=p.responseEnd,d+=1;d<c.length;d++){var W=c[d],le=W.startTime;if(le>U)break;var fe=W.transferSize,ge=W.initiatorType;fe&&uw(ge)&&(W=W.responseEnd,A+=fe*(W<U?1:(U-le)/(W-le)))}if(--d,a+=8*(b+A)/(p.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cy=null,uy=null;function af(s){return s.nodeType===9?s:s.ownerDocument}function dw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function dy(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hy=null;function iN(){var s=window.event;return s&&s.type==="popstate"?s===hy?!1:(hy=s,!0):(hy=null,!1)}var fw=typeof setTimeout=="function"?setTimeout:void 0,aN=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,oN=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(s){return mw.resolve(null).then(s).catch(lN)}:fw;function lN(s){setTimeout(function(){throw s})}function aa(s){return s==="head"}function gw(s,a){var c=a,d=0;do{var p=c.nextSibling;if(s.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(d===0){s.removeChild(p),zl(a);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Eu(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Eu(c);for(var b=c.firstChild;b;){var A=b.nextSibling,U=b.nodeName;b[fs]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=A}}else c==="body"&&Eu(s.ownerDocument.body);c=p}while(c);zl(a)}function pw(s,a){var c=s;s=0;do{var d=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=d}while(c)}function fy(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":fy(c),nl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function cN(s,a,c,d){for(;s.nodeType===1;){var p=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[fs])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=zr(s.nextSibling),s===null)break}return null}function uN(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=zr(s.nextSibling),s===null))return null;return s}function yw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=zr(s.nextSibling),s===null))return null;return s}function my(s){return s.data==="$?"||s.data==="$~"}function gy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function dN(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function zr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var py=null;function _w(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return zr(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function vw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function bw(s,a,c){switch(a=af(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Eu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);nl(s)}var Fr=new Map,ww=new Set;function of(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var yi=M.d;M.d={f:hN,r:fN,D:mN,C:gN,L:pN,m:yN,X:vN,S:_N,M:bN};function hN(){var s=yi.f(),a=Xh();return s||a}function fN(s){var a=Nr(s);a!==null&&a.tag===5&&a.type==="form"?Vb(a):yi.r(s)}var Ll=typeof document>"u"?null:document;function xw(s,a,c){var d=Ll;if(d&&typeof a=="string"&&a){var p=nr(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),ww.has(p)||(ww.add(p),s={rel:s,crossOrigin:c,href:a},d.querySelector(p)===null&&(a=d.createElement("link"),Cn(a,"link",s),rn(a),d.head.appendChild(a)))}}function mN(s){yi.D(s),xw("dns-prefetch",s,null)}function gN(s,a){yi.C(s,a),xw("preconnect",s,a)}function pN(s,a,c){yi.L(s,a,c);var d=Ll;if(d&&s&&a){var p='link[rel="preload"][as="'+nr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+nr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+nr(c.imageSizes)+'"]')):p+='[href="'+nr(s)+'"]';var b=p;switch(a){case"style":b=Vl(s);break;case"script":b=Ul(s)}Fr.has(b)||(s=y({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Fr.set(b,s),d.querySelector(p)!==null||a==="style"&&d.querySelector(Tu(b))||a==="script"&&d.querySelector(Su(b))||(a=d.createElement("link"),Cn(a,"link",s),rn(a),d.head.appendChild(a)))}}function yN(s,a){yi.m(s,a);var c=Ll;if(c&&s){var d=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+nr(d)+'"][href="'+nr(s)+'"]',b=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ul(s)}if(!Fr.has(b)&&(s=y({rel:"modulepreload",href:s},a),Fr.set(b,s),c.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Su(b)))return}d=c.createElement("link"),Cn(d,"link",s),rn(d),c.head.appendChild(d)}}}function _N(s,a,c){yi.S(s,a,c);var d=Ll;if(d&&s){var p=gs(d).hoistableStyles,b=Vl(s);a=a||"default";var A=p.get(b);if(!A){var U={loading:0,preload:null};if(A=d.querySelector(Tu(b)))U.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Fr.get(b))&&yy(s,c);var W=A=d.createElement("link");rn(W),Cn(W,"link",s),W._p=new Promise(function(le,fe){W.onload=le,W.onerror=fe}),W.addEventListener("load",function(){U.loading|=1}),W.addEventListener("error",function(){U.loading|=2}),U.loading|=4,lf(A,a,d)}A={type:"stylesheet",instance:A,count:1,state:U},p.set(b,A)}}}function vN(s,a){yi.X(s,a);var c=Ll;if(c&&s){var d=gs(c).hoistableScripts,p=Ul(s),b=d.get(p);b||(b=c.querySelector(Su(p)),b||(s=y({src:s,async:!0},a),(a=Fr.get(p))&&_y(s,a),b=c.createElement("script"),rn(b),Cn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(p,b))}}function bN(s,a){yi.M(s,a);var c=Ll;if(c&&s){var d=gs(c).hoistableScripts,p=Ul(s),b=d.get(p);b||(b=c.querySelector(Su(p)),b||(s=y({src:s,async:!0,type:"module"},a),(a=Fr.get(p))&&_y(s,a),b=c.createElement("script"),rn(b),Cn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(p,b))}}function Ew(s,a,c,d){var p=(p=ye.current)?of(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Vl(c.href),c=gs(p).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Vl(c.href);var b=gs(p).hoistableStyles,A=b.get(s);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,A),(b=p.querySelector(Tu(s)))&&!b._p&&(A.instance=b,A.state.loading=5),Fr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Fr.set(s,c),b||wN(p,s,c,A.state))),a&&d===null)throw Error(r(528,""));return A}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ul(c),c=gs(p).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Vl(s){return'href="'+nr(s)+'"'}function Tu(s){return'link[rel="stylesheet"]['+s+"]"}function Tw(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function wN(s,a,c,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Cn(a,"link",c),rn(a),s.head.appendChild(a))}function Ul(s){return'[src="'+nr(s)+'"]'}function Su(s){return"script[async]"+s}function Sw(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+nr(c.href)+'"]');if(d)return a.instance=d,rn(d),d;var p=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),rn(d),Cn(d,"style",p),lf(d,c.precedence,s),a.instance=d;case"stylesheet":p=Vl(c.href);var b=s.querySelector(Tu(p));if(b)return a.state.loading|=4,a.instance=b,rn(b),b;d=Tw(c),(p=Fr.get(p))&&yy(d,p),b=(s.ownerDocument||s).createElement("link"),rn(b);var A=b;return A._p=new Promise(function(U,W){A.onload=U,A.onerror=W}),Cn(b,"link",d),a.state.loading|=4,lf(b,c.precedence,s),a.instance=b;case"script":return b=Ul(c.src),(p=s.querySelector(Su(b)))?(a.instance=p,rn(p),p):(d=c,(p=Fr.get(b))&&(d=y({},c),_y(d,p)),s=s.ownerDocument||s,p=s.createElement("script"),rn(p),Cn(p,"link",d),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,lf(d,c.precedence,s));return a.instance}function lf(s,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,b=p,A=0;A<d.length;A++){var U=d[A];if(U.dataset.precedence===a)b=U;else if(b!==p)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function yy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function _y(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var cf=null;function Aw(s,a,c){if(cf===null){var d=new Map,p=cf=new Map;p.set(c,d)}else p=cf,d=p.get(c),d||(d=new Map,p.set(c,d));if(d.has(s))return d;for(d.set(s,null),c=c.getElementsByTagName(s),p=0;p<c.length;p++){var b=c[p];if(!(b[fs]||b[nn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(a)||"";A=s+A;var U=d.get(A);U?U.push(b):d.set(A,[b])}}return d}function kw(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function xN(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function EN(s,a,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=Vl(d.href),b=a.querySelector(Tu(p));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=uf.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=b,rn(b);return}b=a.ownerDocument||a,d=Tw(d),(p=Fr.get(p))&&yy(d,p),b=b.createElement("link"),rn(b);var A=b;A._p=new Promise(function(U,W){A.onload=U,A.onerror=W}),Cn(b,"link",d),c.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=uf.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var vy=0;function TN(s,a){return s.stylesheets&&s.count===0&&hf(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var d=setTimeout(function(){if(s.stylesheets&&hf(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&vy===0&&(vy=62500*sN());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hf(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>vy?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(p)}}:null}function uf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var df=null;function hf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,df=new Map,a.forEach(SN,s),df=null,uf.call(s))}function SN(s,a){if(!(a.state.loading&4)){var c=df.get(s);if(c)var d=c.get(null);else{c=new Map,df.set(s,c);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var A=p[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}p=a.instance,A=p.getAttribute("data-precedence"),b=c.get(A)||d,b===d&&c.set(null,p),c.set(A,p),this.count++,d=uf.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),b?b.parentNode.insertBefore(p,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var Au={$$typeof:B,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function AN(s,a,c,d,p,b,A,U,W){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.hiddenUpdates=_n(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function Iw(s,a,c,d,p,b,A,U,W,le,fe,ge){return s=new AN(s,a,c,A,W,le,fe,ge,U),a=1,b===!0&&(a|=24),b=gr(3,null,null,a),s.current=b,b.stateNode=s,a=Jg(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:a},np(b),s}function Nw(s){return s?(s=pl,s):pl}function Cw(s,a,c,d,p,b){p=Nw(p),d.context===null?d.context=p:d.pendingContext=p,d=Qi(a),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Wi(s,d,a),c!==null&&(lr(c,s,a),su(c,s,a))}function Dw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function by(s,a){Dw(s,a),(s=s.alternate)&&Dw(s,a)}function Ow(s){if(s.tag===13||s.tag===31){var a=eo(s,67108864);a!==null&&lr(a,s,67108864),by(s,67108864)}}function Mw(s){if(s.tag===13||s.tag===31){var a=br();a=Ba(a);var c=eo(s,a);c!==null&&lr(c,s,a),by(s,a)}}var ff=!0;function kN(s,a,c,d){var p=P.T;P.T=null;var b=M.p;try{M.p=2,wy(s,a,c,d)}finally{M.p=b,P.T=p}}function RN(s,a,c,d){var p=P.T;P.T=null;var b=M.p;try{M.p=8,wy(s,a,c,d)}finally{M.p=b,P.T=p}}function wy(s,a,c,d){if(ff){var p=xy(d);if(p===null)oy(s,a,d,mf,c),jw(s,d);else if(NN(p,s,a,c,d))d.stopPropagation();else if(jw(s,d),a&4&&-1<IN.indexOf(s)){for(;p!==null;){var b=Nr(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=mn(b.pendingLanes);if(A!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;A;){var W=1<<31-Ot(A);U.entanglements[1]|=W,A&=~W}Rs(b),(pt&6)===0&&(Qh=Ee()+500,bu(0))}}break;case 31:case 13:U=eo(b,2),U!==null&&lr(U,b,2),Xh(),by(b,2)}if(b=xy(d),b===null&&oy(s,a,d,mf,c),b===p)break;p=b}p!==null&&d.stopPropagation()}else oy(s,a,d,null,c)}}function xy(s){return s=Cr(s),Ey(s)}var mf=null;function Ey(s){if(mf=null,s=ms(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return mf=s,null}function Pw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case _t:return 2;case Gn:return 8;case mt:case Kn:return 32;case qt:return 268435456;default:return 32}default:return 32}}var Ty=!1,oa=null,la=null,ca=null,ku=new Map,Ru=new Map,ua=[],IN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jw(s,a){switch(s){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":ku.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(a.pointerId)}}function Iu(s,a,c,d,p,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[p]},a!==null&&(a=Nr(a),a!==null&&Ow(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function NN(s,a,c,d,p){switch(a){case"focusin":return oa=Iu(oa,s,a,c,d,p),!0;case"dragenter":return la=Iu(la,s,a,c,d,p),!0;case"mouseover":return ca=Iu(ca,s,a,c,d,p),!0;case"pointerover":var b=p.pointerId;return ku.set(b,Iu(ku.get(b)||null,s,a,c,d,p)),!0;case"gotpointercapture":return b=p.pointerId,Ru.set(b,Iu(Ru.get(b)||null,s,a,c,d,p)),!0}return!1}function Lw(s){var a=ms(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,Yr(s.priority,function(){Mw(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,Yr(s.priority,function(){Mw(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function gf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=xy(s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);Bc=d,c.target.dispatchEvent(d),Bc=null}else return a=Nr(c),a!==null&&Ow(a),s.blockedOn=c,!1;a.shift()}return!0}function Vw(s,a,c){gf(s)&&c.delete(a)}function CN(){Ty=!1,oa!==null&&gf(oa)&&(oa=null),la!==null&&gf(la)&&(la=null),ca!==null&&gf(ca)&&(ca=null),ku.forEach(Vw),Ru.forEach(Vw)}function pf(s,a){s.blockedOn===a&&(s.blockedOn=null,Ty||(Ty=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,CN)))}var yf=null;function Uw(s){yf!==s&&(yf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yf===s&&(yf=null);for(var a=0;a<s.length;a+=3){var c=s[a],d=s[a+1],p=s[a+2];if(typeof d!="function"){if(Ey(d||c)===null)continue;break}var b=Nr(c);b!==null&&(s.splice(a,3),a-=3,xp(b,{pending:!0,data:p,method:c.method,action:d},d,p))}}))}function zl(s){function a(W){return pf(W,s)}oa!==null&&pf(oa,s),la!==null&&pf(la,s),ca!==null&&pf(ca,s),ku.forEach(a),Ru.forEach(a);for(var c=0;c<ua.length;c++){var d=ua[c];d.blockedOn===s&&(d.blockedOn=null)}for(;0<ua.length&&(c=ua[0],c.blockedOn===null);)Lw(c),c.blockedOn===null&&ua.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var p=c[d],b=c[d+1],A=p[vn]||null;if(typeof b=="function")A||Uw(c);else if(A){var U=null;if(b&&b.hasAttribute("formAction")){if(p=b,A=b[vn]||null)U=A.formAction;else if(Ey(p)!==null)continue}else U=A.action;typeof U=="function"?c[d+1]=U:(c.splice(d,3),d-=3),Uw(c)}}}function zw(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function Sy(s){this._internalRoot=s}_f.prototype.render=Sy.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,d=br();Cw(c,d,s,a,null,null)},_f.prototype.unmount=Sy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Cw(s.current,2,null,s,null,null),Xh(),a[hs]=null}};function _f(s){this._internalRoot=s}_f.prototype.unstable_scheduleHydration=function(s){if(s){var a=Xd();s={blockedOn:null,target:s,priority:a};for(var c=0;c<ua.length&&a!==0&&a<ua[c].priority;c++);ua.splice(c,0,s),c===0&&Lw(s)}};var Fw=e.version;if(Fw!=="19.2.3")throw Error(r(527,Fw,"19.2.3"));M.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var DN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{Yt=vf.inject(DN),kt=vf}catch{}}return Cu.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,d="",p=Yb,b=Qb,A=Wb;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Iw(s,1,!1,null,null,c,d,null,p,b,A,zw),s[hs]=a.current,ay(s),new Sy(a)},Cu.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var d=!1,p="",b=Yb,A=Qb,U=Wb,W=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(W=c.formState)),a=Iw(s,1,!0,a,c??null,d,p,W,b,A,U,zw),a.context=Nw(null),c=a.current,d=br(),d=Ba(d),p=Qi(d),p.callback=null,Wi(c,p,d),c=d,a.current.lanes=c,za(a,c),Rs(a),s[hs]=a.current,ay(s),new _f(a)},Cu.version="19.2.3",Cu}var Xw;function $N(){if(Xw)return Ry.exports;Xw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ry.exports=qN(),Ry.exports}var HN=$N();var Jw="popstate";function GN(n={}){function e(i,o){let{pathname:l="/",search:u="",hash:h=""}=Ho(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),t0("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let h=i.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:id(o))}function r(i,o){Gr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return YN(e,t,r,n)}function Bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KN(){return Math.random().toString(36).substring(2,10)}function Zw(n,e){return{usr:n.state,key:n.key,idx:e}}function t0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:t,key:e&&e.key||r||KN()}}function id({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ho(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function YN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u="POP",h=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let O=g(),L=O==null?null:O-f;f=O,h&&h({action:u,location:N.location,delta:L})}function v(O,L){u="PUSH";let H=t0(N.location,O,L);t&&t(H,O),f=g()+1;let B=Zw(H,f),q=N.createHref(H);try{l.pushState(B,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(q)}o&&h&&h({action:u,location:N.location,delta:1})}function w(O,L){u="REPLACE";let H=t0(N.location,O,L);t&&t(H,O),f=g();let B=Zw(H,f),q=N.createHref(H);l.replaceState(B,"",q),o&&h&&h({action:u,location:N.location,delta:0})}function x(O){return QN(O)}let N={get action(){return u},get location(){return n(i,l)},listen(O){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Jw,y),h=O,()=>{i.removeEventListener(Jw,y),h=null}},createHref(O){return e(i,O)},createURL:x,encodeLocation(O){let L=x(O);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:w,go(O){return l.go(O)}};return N}function QN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:id(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function mS(n,e,t="/"){return WN(n,e,t,!1)}function WN(n,e,t,r){let i=typeof e=="string"?Ho(e):e,o=Ti(i.pathname||"/",t);if(o==null)return null;let l=gS(n);XN(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=lC(o);u=aC(l[h],f,r)}return u}function gS(n,e=[],t=[],r="",i=!1){let o=(l,u,h=i,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&h)return;Bt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=xi([r,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(Bt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),gS(l.children,e,v,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:sC(y,l.index),routesMeta:v})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let h of pS(l.path))o(l,u,!0,h)}),e}function pS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=pS(r.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function XN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:iC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var JN=/^:[\w-]+$/,ZN=3,eC=2,tC=1,nC=10,rC=-2,ex=n=>n==="*";function sC(n,e){let t=n.split("/"),r=t.length;return t.some(ex)&&(r+=rC),e&&(r+=eC),t.filter(i=>!ex(i)).reduce((i,o)=>i+(JN.test(o)?ZN:o===""?tC:nC),r)}function iC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function aC(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=nm({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=nm({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:xi([o,y.pathname]),pathnameBase:fC(xi([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=xi([o,y.pathnameBase]))}return l}function nm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oC(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let x=u[v]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function oC(n,e=!1,t=!0){Gr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ti(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var cC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uC=n=>cC.test(n);function dC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ho(n):n,o;if(t)if(uC(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Gr(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=tx(t.substring(1),"/"):o=tx(t,e)}else o=e;return{pathname:o,search:mC(r),hash:gC(i)}}function tx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Dy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yS(n){let e=hC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function _S(n,e,t,r=!1){let i;typeof n=="string"?i=Ho(n):(i={...n},Bt(!i.pathname||!i.pathname.includes("?"),Dy("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),Dy("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),Dy("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=dC(i,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var xi=n=>n.join("/").replace(/\/\/+/g,"/"),fC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function pC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function yC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vS=["POST","PUT","PATCH","DELETE"];new Set(vS);var _C=["GET",...vS];new Set(_C);var Sc=z.createContext(null);Sc.displayName="DataRouter";var qm=z.createContext(null);qm.displayName="DataRouterState";z.createContext(!1);var bS=z.createContext({isTransitioning:!1});bS.displayName="ViewTransition";var vC=z.createContext(new Map);vC.displayName="Fetchers";var bC=z.createContext(null);bC.displayName="Await";var cs=z.createContext(null);cs.displayName="Navigation";var Rd=z.createContext(null);Rd.displayName="Location";var us=z.createContext({outlet:null,matches:[],isDataRoute:!1});us.displayName="Route";var Y0=z.createContext(null);Y0.displayName="RouteError";function wC(n,{relative:e}={}){Bt(Id(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(cs),{hash:i,pathname:o,search:l}=Nd(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:xi([t,o])),r.createHref({pathname:u,search:l,hash:i})}function Id(){return z.useContext(Rd)!=null}function er(){return Bt(Id(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Rd).location}var wS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xS(n){z.useContext(cs).static||z.useLayoutEffect(n)}function kr(){let{isDataRoute:n}=z.useContext(us);return n?jC():xC()}function xC(){Bt(Id(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Sc),{basename:e,navigator:t}=z.useContext(cs),{matches:r}=z.useContext(us),{pathname:i}=er(),o=JSON.stringify(yS(r)),l=z.useRef(!1);return xS(()=>{l.current=!0}),z.useCallback((h,f={})=>{if(Gr(l.current,wS),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=_S(h,JSON.parse(o),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:xi([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,i,n])}var EC=z.createContext(null);function TC(n){let e=z.useContext(us).outlet;return z.useMemo(()=>e&&z.createElement(EC.Provider,{value:n},e),[e,n])}function Q0(){let{matches:n}=z.useContext(us),e=n[n.length-1];return e?e.params:{}}function Nd(n,{relative:e}={}){let{matches:t}=z.useContext(us),{pathname:r}=er(),i=JSON.stringify(yS(t));return z.useMemo(()=>_S(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function SC(n,e){return ES(n,e)}function ES(n,e,t,r,i){Bt(Id(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=z.useContext(cs),{matches:l}=z.useContext(us),u=l[l.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let H=y&&y.path||"";TS(f,!y||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let v=er(),w;if(e){let H=typeof e=="string"?Ho(e):e;Bt(g==="/"||H.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),w=H}else w=v;let x=w.pathname||"/",N=x;if(g!=="/"){let H=g.replace(/^\//,"").split("/");N="/"+x.replace(/^\//,"").split("/").slice(H.length).join("/")}let O=mS(n,{pathname:N});Gr(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Gr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=NC(O&&O.map(H=>Object.assign({},H,{params:Object.assign({},h,H.params),pathname:xi([g,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:xi([g,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),l,t,r,i);return e&&L?z.createElement(Rd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function AC(){let n=PC(),e=pC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,l)}var kC=z.createElement(AC,null),RC=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?z.createElement(us.Provider,{value:this.props.routeContext},z.createElement(Y0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IC({routeContext:n,match:e,children:t}){let r=z.useContext(Sc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(us.Provider,{value:n},t)}function NC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);Bt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,h=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:v,errors:w}=t,x=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||x){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=t&&r?(g,y)=>{r(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:yC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,x=!1,N=null,O=null;t&&(w=l&&y.route.id?l[y.route.id]:void 0,N=y.route.errorElement||kC,u&&(h<0&&v===0?(TS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,O=null):h===v&&(x=!0,O=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),H=()=>{let B;return w?B=N:x?B=O:y.route.Component?B=z.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=g,z.createElement(IC,{match:y,routeContext:{outlet:g,matches:L,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?z.createElement(RC,{location:t.location,revalidation:t.revalidation,component:N,error:w,children:H(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:f}):H()},null)}function W0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CC(n){let e=z.useContext(Sc);return Bt(e,W0(n)),e}function DC(n){let e=z.useContext(qm);return Bt(e,W0(n)),e}function OC(n){let e=z.useContext(us);return Bt(e,W0(n)),e}function X0(n){let e=OC(n),t=e.matches[e.matches.length-1];return Bt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MC(){return X0("useRouteId")}function PC(){let n=z.useContext(Y0),e=DC("useRouteError"),t=X0("useRouteError");return n!==void 0?n:e.errors?.[t]}function jC(){let{router:n}=CC("useNavigate"),e=X0("useNavigate"),t=z.useRef(!1);return xS(()=>{t.current=!0}),z.useCallback(async(i,o={})=>{Gr(t.current,wS),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var nx={};function TS(n,e,t){!e&&!nx[n]&&(nx[n]=!0,Gr(!1,t))}z.memo(LC);function LC({routes:n,future:e,state:t,unstable_onError:r}){return ES(n,void 0,t,r,e)}function VC(n){return TC(n.context)}function wr(n){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){Bt(!Id(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[u,i,o,l]);typeof t=="string"&&(t=Ho(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,x=z.useMemo(()=>{let N=Ti(f,u);return N==null?null:{location:{pathname:N,search:g,hash:y,state:v,key:w},navigationType:r}},[u,f,g,y,v,w,r]);return Gr(x!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:z.createElement(cs.Provider,{value:h},z.createElement(Rd.Provider,{children:e,value:x}))}function zC({children:n,location:e}){return SC(n0(n),e)}function n0(n,e=[]){let t=[];return z.Children.forEach(n,(r,i)=>{if(!z.isValidElement(r))return;let o=[...e,i];if(r.type===z.Fragment){t.push.apply(t,n0(r.props.children,o));return}Bt(r.type===wr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=n0(r.props.children,o)),t.push(l)}),t}var Of="get",Mf="application/x-www-form-urlencoded";function $m(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function FC(n){return $m(n)&&n.tagName.toLowerCase()==="button"}function BC(n){return $m(n)&&n.tagName.toLowerCase()==="form"}function qC(n){return $m(n)&&n.tagName.toLowerCase()==="input"}function $C(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HC(n,e){return n.button===0&&(!e||e==="_self")&&!$C(n)}var bf=null;function GC(){if(bf===null)try{new FormData(document.createElement("form"),0),bf=!1}catch{bf=!0}return bf}var KC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oy(n){return n!=null&&!KC.has(n)?(Gr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mf}"`),null):n}function YC(n,e){let t,r,i,o,l;if(BC(n)){let u=n.getAttribute("action");r=u?Ti(u,e):null,t=n.getAttribute("method")||Of,i=Oy(n.getAttribute("enctype"))||Mf,o=new FormData(n)}else if(FC(n)||qC(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(r=h?Ti(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Of,i=Oy(n.getAttribute("formenctype"))||Oy(u.getAttribute("enctype"))||Mf,o=new FormData(u,n),!GC()){let{name:f,type:g,value:y}=n;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if($m(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Of,r=null,i=Mf,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function QC(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ti(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function WC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function JC(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await WC(o,t);return l.links?l.links():[]}return[]}));return n4(r.flat(1).filter(XC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rx(n,e,t,r,i,o){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>l(h,f)||u(h,f)):o==="data"?e.filter((h,f)=>{let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ZC(n,e,{includeHydrateFallback:t}={}){return e4(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function e4(n){return[...new Set(n)]}function t4(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function n4(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(t4(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function SS(){let n=z.useContext(Sc);return J0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r4(){let n=z.useContext(qm);return J0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Z0=z.createContext(void 0);Z0.displayName="FrameworkContext";function AS(){let n=z.useContext(Z0);return J0(n,"You must render this element inside a <HydratedRouter> element"),n}function s4(n,e){let t=z.useContext(Z0),[r,i]=z.useState(!1),[o,l]=z.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=z.useRef(null);z.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=L=>{L.forEach(H=>{l(H.isIntersecting)})},O=new IntersectionObserver(N,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[n]),z.useEffect(()=>{if(r){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[r]);let w=()=>{i(!0)},x=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Du(u,w),onBlur:Du(h,x),onMouseEnter:Du(f,w),onMouseLeave:Du(g,x),onTouchStart:Du(y,w)}]:[!1,v,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function i4({page:n,...e}){let{router:t}=SS(),r=z.useMemo(()=>mS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(o4,{page:n,matches:r,...e}):null}function a4(n){let{manifest:e,routeModules:t}=AS(),[r,i]=z.useState([]);return z.useEffect(()=>{let o=!1;return JC(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function o4({page:n,matches:e,...t}){let r=er(),{manifest:i,routeModules:o}=AS(),{basename:l}=SS(),{loaderData:u,matches:h}=r4(),f=z.useMemo(()=>rx(n,e,h,i,r,"data"),[n,e,h,i,r]),g=z.useMemo(()=>rx(n,e,h,i,r,"assets"),[n,e,h,i,r]),y=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,N=!1;if(e.forEach(L=>{let H=i.routes[L.route.id];!H||!H.hasLoader||(!f.some(B=>B.route.id===L.route.id)&&L.route.id in u&&o[L.route.id]?.shouldRevalidate||H.hasClientLoader?N=!0:x.add(L.route.id))}),x.size===0)return[];let O=QC(n,l,"data");return N&&x.size>0&&O.searchParams.set("_routes",e.filter(L=>x.has(L.route.id)).map(L=>L.route.id).join(",")),[O.pathname+O.search]},[l,u,r,i,f,e,n,o]),v=z.useMemo(()=>ZC(g,i),[g,i]),w=a4(g);return z.createElement(z.Fragment,null,y.map(x=>z.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>z.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),w.map(({key:x,link:N})=>z.createElement("link",{key:x,nonce:t.nonce,...N})))}function l4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kS&&(window.__reactRouterVersion="7.10.1")}catch{}function c4({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=z.useRef();i.current==null&&(i.current=GN({window:r,v5Compat:!0}));let o=i.current,[l,u]=z.useState({action:o.action,location:o.location}),h=z.useCallback(f=>{t===!1?u(f):z.startTransition(()=>u(f))},[t]);return z.useLayoutEffect(()=>o.listen(h),[o,h]),z.createElement(UC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t===!0})}var RS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:x,unstable_useTransitions:N}=z.useContext(cs),O=typeof f=="string"&&RS.test(f),L,H=!1;if(typeof f=="string"&&O&&(L=f,kS))try{let k=new URL(window.location.href),C=f.startsWith("//")?new URL(k.protocol+f):new URL(f),j=Ti(C.pathname,x);C.origin===k.origin&&j!=null?f=j+C.search+C.hash:H=!0}catch{Gr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=wC(f,{relative:i}),[q,Y,V]=s4(r,v),R=f4(f,{replace:l,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:y,unstable_useTransitions:N});function E(k){e&&e(k),k.defaultPrevented||R(k)}let T=z.createElement("a",{...v,...V,href:L||B,onClick:H||o?e:E,ref:l4(w,Y),target:h,"data-discover":!O&&t==="render"?"true":void 0});return q&&!O?z.createElement(z.Fragment,null,T,z.createElement(i4,{page:B})):T});Os.displayName="Link";var u4=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:u,children:h,...f},g){let y=Nd(l,{relative:f.relative}),v=er(),w=z.useContext(qm),{navigator:x,basename:N}=z.useContext(cs),O=w!=null&&_4(y)&&u===!0,L=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,H=v.pathname,B=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&N&&(B=Ti(B,N)||B);const q=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Y=H===L||!i&&H.startsWith(L)&&H.charAt(q)==="/",V=B!=null&&(B===L||!i&&B.startsWith(L)&&B.charAt(L.length)==="/"),R={isActive:Y,isPending:V,isTransitioning:O},E=Y?e:void 0,T;typeof r=="function"?T=r(R):T=[r,Y?"active":null,V?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(R):o;return z.createElement(Os,{...f,"aria-current":E,className:T,ref:g,style:k,to:l,viewTransition:u},typeof h=="function"?h(R):h)});u4.displayName="NavLink";var d4=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=Of,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:x}=z.useContext(cs),N=p4(),O=y4(u,{relative:f}),L=l.toLowerCase()==="get"?"get":"post",H=typeof u=="string"&&RS.test(u),B=q=>{if(h&&h(q),q.defaultPrevented)return;q.preventDefault();let Y=q.nativeEvent.submitter,V=Y?.getAttribute("formmethod")||l,R=()=>N(Y||q.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:o,relative:f,preventScrollReset:g,viewTransition:y});x&&t!==!1?z.startTransition(()=>R()):R()};return z.createElement("form",{ref:w,method:L,action:O,onSubmit:r?h:B,...v,"data-discover":!H&&n==="render"?"true":void 0})});d4.displayName="Form";function h4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IS(n){let e=z.useContext(Sc);return Bt(e,h4(n)),e}function f4(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_useTransitions:u}={}){let h=kr(),f=er(),g=Nd(n,{relative:o});return z.useCallback(y=>{if(HC(y,e)){y.preventDefault();let v=t!==void 0?t:id(f)===id(g),w=()=>h(n,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:l});u?z.startTransition(()=>w()):w()}},[f,h,g,t,r,e,n,i,o,l,u])}var m4=0,g4=()=>`__${String(++m4)}__`;function p4(){let{router:n}=IS("useSubmit"),{basename:e}=z.useContext(cs),t=MC(),r=n.fetch,i=n.navigate;return z.useCallback(async(o,l={})=>{let{action:u,method:h,encType:f,formData:g,body:y}=YC(o,e);if(l.navigate===!1){let v=l.fetcherKey||g4();await r(v,t,l.action||u,{preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await i(l.action||u,{preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,t])}function y4(n,{relative:e}={}){let{basename:t}=z.useContext(cs),r=z.useContext(us);Bt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Nd(n||".",{relative:e})},l=er();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:xi([t,o.pathname])),id(o)}function _4(n,{relative:e}={}){let t=z.useContext(bS);Bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=IS("useViewTransitionState"),i=Nd(n,{relative:e});if(!t.isTransitioning)return!1;let o=Ti(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ti(t.nextLocation.pathname,r)||t.nextLocation.pathname;return nm(i.pathname,l)!=null||nm(i.pathname,o)!=null}const ze=n=>typeof n=="string",Ou=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},sx=n=>n==null?"":""+n,v4=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},b4=/###/g,ix=n=>n&&n.indexOf("###")>-1?n.replace(b4,"."):n,ax=n=>!n||ze(n),Gu=(n,e,t)=>{const r=ze(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(ax(n))return{};const o=ix(r[i]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++i}return ax(n)?{}:{obj:n,k:ix(r[i])}},ox=(n,e,t)=>{const{obj:r,k:i}=Gu(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let o=e[e.length-1],l=e.slice(0,e.length-1),u=Gu(n,l,Object);for(;u.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),u=Gu(n,l,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},w4=(n,e,t,r)=>{const{obj:i,k:o}=Gu(n,e,Object);i[o]=i[o]||[],i[o].push(t)},rm=(n,e)=>{const{obj:t,k:r}=Gu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},x4=(n,e,t)=>{const r=rm(n,t);return r!==void 0?r:rm(e,t)},NS=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?ze(n[r])||n[r]instanceof String||ze(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):NS(n[r],e[r],t):n[r]=e[r]);return n},Fl=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var E4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const T4=n=>ze(n)?n.replace(/[&<>"'\/]/g,e=>E4[e]):n;class S4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const A4=[" ",",","?","!",";"],k4=new S4(20),R4=(n,e,t)=>{e=e||"",t=t||"";const r=A4.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=k4.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!i.test(n);if(!o){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(o=!0)}return o},r0=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let l,u="";for(let h=o;h<r.length;++h)if(h!==o&&(u+=t),u+=r[h],l=i[u],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&h<r.length-1)continue;o+=h-o+1;break}i=l}return i},ad=n=>n?.replace("_","-"),I4={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};let N4=class s0{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||I4,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(ze(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new s0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new s0(this.logger,e)}};var Ms=new N4;class Hm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let l=0;l<o;l++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let l=0;l<o;l++)i.apply(i,[e,...t])})}}class lx extends Hm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],r&&(Array.isArray(r)?u.push(...r):ze(r)&&o?u.push(...r.split(o)):u.push(r)));const h=rm(this.data,u);return!h&&!t&&!r&&e.indexOf(".")>-1&&(e=u[0],t=u[1],r=u.slice(2).join(".")),h||!l||!ze(r)?h:r0(this.data?.[e]?.[t],r,o)}addResource(e,t,r,i,o={silent:!1}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];r&&(u=u.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(u=e.split("."),i=t,t=u[1]),this.addNamespaces(t),ox(this.data,u,i),o.silent||this.emit("added",e,t,r,i)}addResources(e,t,r,i={silent:!1}){for(const o in r)(ze(r[o])||Array.isArray(r[o]))&&this.addResource(e,t,o,r[o],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,o,l={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),i=r,r=t,t=u[1]),this.addNamespaces(t);let h=rm(this.data,u)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?NS(h,r,o):h={...h,...r},ox(this.data,u,h),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var CS={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(o=>{e=this.processors[o]?.process(e,t,r,i)??e}),e}};const DS=Symbol("i18next/PATH_KEY");function C4(){const n=[],e=Object.create(null);let t;return e.get=(r,i)=>(t?.revoke?.(),i===DS?n:(n.push(i),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function i0(n,e){const{[DS]:t}=n(C4());return t.join(e?.keySeparator??".")}const cx={},My=n=>!ze(n)&&typeof n!="boolean"&&typeof n!="number";class sm extends Hm{constructor(e,t={}){super(),v4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ms.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const o=My(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!R4(e,r,i);if(l&&!u){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:ze(o)?[o]:o};const f=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(i)}return{key:e,namespaces:ze(o)?[o]:o}}translate(e,t,r){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=i0(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:u,namespaces:h}=this.extractFromKey(e[e.length-1],i),f=h[h.length-1];let g=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(i)}:u;const w=this.resolve(e,i);let x=w?.res;const N=w?.usedKey||u,O=w?.exactUsedKey||u,L=["[object Number]","[object Function]","[object RegExp]"],H=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,q=i.count!==void 0&&!ze(i.count),Y=sm.hasDefaultValue(i),V=q?this.pluralResolver.getSuffix(y,i.count,i):"",R=i.ordinal&&q?this.pluralResolver.getSuffix(y,i.count,{ordinal:!1}):"",E=q&&!i.ordinal&&i.count===0,T=E&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${V}`]||i[`defaultValue${R}`]||i.defaultValue;let k=x;B&&!x&&Y&&(k=T);const C=My(k),j=Object.prototype.toString.apply(k);if(B&&k&&C&&L.indexOf(j)<0&&!(ze(H)&&Array.isArray(k))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,k,{...i,ns:h}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=D,w.usedParams=this.getUsedParamsDetails(i),w):D}if(l){const D=Array.isArray(k),G=D?[]:{},Z=D?O:N;for(const P in k)if(Object.prototype.hasOwnProperty.call(k,P)){const M=`${Z}${l}${P}`;Y&&!x?G[P]=this.translate(M,{...i,defaultValue:My(T)?T[P]:void 0,joinArrays:!1,ns:h}):G[P]=this.translate(M,{...i,joinArrays:!1,ns:h}),G[P]===M&&(G[P]=k[P])}x=G}}else if(B&&ze(H)&&Array.isArray(x))x=x.join(H),x&&(x=this.extendTranslation(x,e,i,r));else{let D=!1,G=!1;!this.isValidLookup(x)&&Y&&(D=!0,x=T),this.isValidLookup(x)||(G=!0,x=u);const P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:x,M=Y&&T!==x&&this.options.updateMissing;if(G||D||M){if(this.logger.log(M?"updateKey":"missingKey",y,f,u,M?T:x),l){const $=this.resolve(u,{...i,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ee=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let $=0;$<Q.length;$++)ee.push(Q[$]);else this.options.saveMissingTo==="all"?ee=this.languageUtils.toResolveHierarchy(i.lng||this.language):ee.push(i.lng||this.language);const X=($,K,te)=>{const ne=Y&&te!==x?te:P;this.options.missingKeyHandler?this.options.missingKeyHandler($,f,K,ne,M,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing($,f,K,ne,M,i),this.emit("missingKey",$,f,K,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&q?ee.forEach($=>{const K=this.pluralResolver.getSuffixes($,i);E&&i[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(te=>{X([$],u+te,i[`defaultValue${te}`]||T)})}):X(ee,u,T))}x=this.extendTranslation(x,e,i,w,r),G&&x===u&&this.options.appendNamespaceToMissingKey&&(x=`${f}${g}${u}`),(G||D)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,D?x:void 0,i))}return o?(w.res=x,w.usedParams=this.getUsedParamsDetails(i),w):x}extendTranslation(e,t,r,i,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=ze(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=r.replace&&!ze(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||i.usedLng,r),h){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,u=ze(l)?[l]:l;return e!=null&&u?.length&&r.applyPostProcessor!==!1&&(e=CS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,i,o,l,u;return ze(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(h,t),g=f.key;i=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!ze(t.count),w=v&&!t.ordinal&&t.count===0,x=t.context!==void 0&&(ze(t.context)||typeof t.context=="number")&&t.context!=="",N=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(O=>{this.isValidLookup(r)||(u=O,!cx[`${N[0]}-${O}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(cx[`${N[0]}-${O}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(L=>{if(this.isValidLookup(r))return;l=L;const H=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(H,g,L,O,t);else{let q;v&&(q=this.pluralResolver.getSuffix(L,t.count,t));const Y=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&q.indexOf(V)===0&&H.push(g+q.replace(V,this.options.pluralSeparator)),H.push(g+q),w&&H.push(g+Y)),x){const R=`${g}${this.options.contextSeparator||"_"}${t.context}`;H.push(R),v&&(t.ordinal&&q.indexOf(V)===0&&H.push(R+q.replace(V,this.options.pluralSeparator)),H.push(R+q),w&&H.push(R+Y))}}let B;for(;B=H.pop();)this.isValidLookup(r)||(o=B,r=this.getResource(L,O,B,t))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:l,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ze(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of t)delete i[o]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class ux{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ms.create("languageUtils")}getScriptPartFromCode(e){if(e=ad(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=ad(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ze(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return t=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(l=>{if(l===o)return l;if(!(l.indexOf("-")<0&&o.indexOf("-")<0)&&(l.indexOf("-")>0&&o.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===o||l.indexOf(o)===0&&o.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ze(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],o=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ze(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ze(e)&&o(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&o(this.formatLanguageCode(l))}),i}}const dx={zero:0,one:1,two:2,few:3,many:4,other:5},hx={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class D4{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ms.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=ad(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),hx;if(!e.match(/-|_/))return hx;const h=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(h,t)}return this.pluralRulesCache[o]=l,l}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>dx[i]-dx[o]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const fx=(n,e,t,r=".",i=!0)=>{let o=x4(n,e,t);return!o&&i&&ze(t)&&(o=r0(n,t,r),o===void 0&&(o=r0(e,t,r))),o},Py=n=>n.replace(/\$/g,"$$$$");class mx{constructor(e={}){this.logger=Ms.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:l,suffix:u,suffixEscaped:h,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:N,nestingOptionsSeparator:O,maxReplaces:L,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:T4,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Fl(o):l||"{{",this.suffix=u?Fl(u):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Fl(v):w||Fl("$t("),this.nestingSuffix=x?Fl(x):N||Fl(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=L||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let o,l,u;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const L=fx(t,h,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...t,interpolationkey:w}):L}const x=w.split(this.formatSeparator),N=x.shift().trim(),O=x.join(this.formatSeparator).trim();return this.format(fx(t,h,N,this.options.keySeparator,this.options.ignoreJSONStructure),O,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const g=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>Py(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?Py(this.escape(w)):Py(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const x=o[1].trim();if(l=f(x),l===void 0)if(typeof g=="function"){const O=g(e,o,i);l=ze(O)?O:""}else if(i&&Object.prototype.hasOwnProperty.call(i,x))l="";else if(y){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),l="";else!ze(l)&&!this.useRawValueToEscape&&(l=sx(l));const N=w.safeValue(l);if(e=e.replace(o[0],N),y?(w.regex.lastIndex+=l.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,r={}){let i,o,l;const u=(h,f)=>{const g=this.nestingOptionsSeparator;if(h.indexOf(g)<0)return h;const y=h.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;h=y[0],v=this.interpolate(v,l);const w=v.match(/'/g),x=v.match(/"/g);((w?.length??0)%2===0&&!x||x.length%2!==0)&&(v=v.replace(/'/g,'"'));try{l=JSON.parse(v),f&&(l={...f,...l})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,N),`${h}${g}${v}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,h};for(;i=this.nestingRegexp.exec(e);){let h=[];l={...r},l=l.replace&&!ze(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const f=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(f!==-1&&(h=i[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),i[1]=i[1].slice(0,f)),o=t(u.call(this,i[1].trim(),l),l),o&&i[0]===e&&!ze(o))return o;ze(o)||(o=sx(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),h.length&&(o=h.reduce((g,y)=>this.format(g,y,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const O4=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[u,...h]=l.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},gx=n=>{const e={};return(t,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const l=r+JSON.stringify(o);let u=e[l];return u||(u=n(ad(r),i),e[l]=u),u(t)}},M4=n=>(e,t,r)=>n(ad(t),r)(e);class P4{constructor(e={}){this.logger=Ms.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?gx:M4;this.formats={number:r((i,o)=>{const l=new Intl.NumberFormat(i,{...o});return u=>l.format(u)}),currency:r((i,o)=>{const l=new Intl.NumberFormat(i,{...o,style:"currency"});return u=>l.format(u)}),datetime:r((i,o)=>{const l=new Intl.DateTimeFormat(i,{...o});return u=>l.format(u)}),relativetime:r((i,o)=>{const l=new Intl.RelativeTimeFormat(i,{...o});return u=>l.format(u,o.range||"day")}),list:r((i,o)=>{const l=new Intl.ListFormat(i,{...o});return u=>l.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=gx(t)}format(e,t,r,i={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(h=>h.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,h)=>{const{formatName:f,formatOptions:g}=O4(h);if(this.formats[f]){let y=u;try{const v=i?.formatParams?.[i.interpolationkey]||{},w=v.locale||v.lng||i.locale||i.lng||r;y=this.formats[f](u,w,{...g,...i,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const j4=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class L4 extends Hm{constructor(e,t,r,i={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Ms.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,t,r,i){const o={},l={},u={},h={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!r.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?l[v]===void 0&&(l[v]=!0):(this.state[v]=1,g=!1,l[v]===void 0&&(l[v]=!0),o[v]===void 0&&(o[v]=!0),h[y]===void 0&&(h[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(h)}}loaded(e,t,r){const i=e.split("|"),o=i[0],l=i[1];t&&this.emit("failedLoading",o,l,t),!t&&r&&this.store.addResourceBundle(o,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const u={};this.queue.forEach(h=>{w4(h.loaded,[o],l),j4(h,e),t&&h.errors.push(t),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{u[f]||(u[f]={});const g=h.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(h=>!h.done)}read(e,t,r,i=0,o=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:o,callback:l});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,o*2,l)},o);return}l(f,g)},h=this.backend[r].bind(this.backend);if(h.length===2){try{const f=h(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return h(e,t,u)}prepareLoading(e,t,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ze(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ze(t)&&(t=[t]);const o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(l,u)=>{l&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,l),!l&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,u),this.loaded(e,l,u)})}saveMissing(e,t,r,i,o,l={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const h={...l,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,r,i,h):g=f(e,t,r,i),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,r,i,u,h)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const px=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),ze(n[1])&&(e.defaultValue=n[1]),ze(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),yx=n=>(ze(n.ns)&&(n.ns=[n.ns]),ze(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),ze(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),wf=()=>{},V4=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Ku extends Hm{constructor(e={},t){if(super(),this.options=yx(e),this.services={},this.logger=Ms,this.modules={external:[]},V4(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(ze(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=px();this.options={...r,...this.options,...yx(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ms.init(i(this.modules.logger),this.options):Ms.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=P4;const g=new ux(this.options);this.store=new lx(this.options.resources,this.options);const y=this.services;y.logger=Ms,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new D4(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(y.formatter=i(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new mx(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new L4(i(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.languageDetector&&(y.languageDetector=i(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=i(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new sm(this.services,this.options),this.translator.on("*",(w,...x)=>{this.emit(w,...x)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=wf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Ou(),h=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),u}loadResources(e,t=wf){let r=t;const i=ze(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),this.options.preload?.forEach?.(u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,t,r){const i=Ou();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=wf),this.services.backendConnector.reload(e,t,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&CS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Ou();this.emit("languageChanging",e);const i=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,h)=>{h?this.isLanguageChangingTo===e&&(i(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,r.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},l=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const h=ze(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(h)?h:this.services.languageUtils.getBestMatchFromCodes(ze(u)?[u]:u);f&&(this.language||i(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,t,r){const i=(o,l,...u)=>{let h;typeof l!="object"?h=this.options.overloadTranslationOptionHandler([o,l].concat(u)):h={...l},h.lng=h.lng||i.lng,h.lngs=h.lngs||i.lngs,h.ns=h.ns||i.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||r||i.keyPrefix);const f=this.options.keySeparator||".";let g;return h.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=i0(y,{...this.options,...l})),`${h.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=i0(o,{...this.options,...l})),g=h.keyPrefix?`${h.keyPrefix}${f}${o}`:o),this.t(g,h)};return ze(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(u,h)=>{const f=this.services.backendConnector.state[`${u}|${h}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,l);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(o,e)))}loadNamespaces(e,t){const r=Ou();return this.options.ns?(ze(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Ou();ze(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=i.concat(o),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new ux(px());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const r=new Ku(e,t);return r.createInstance=Ku.createInstance,r}cloneInstance(e={},t=wf){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Ku(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const u=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},h[f]=Object.keys(h[f]).reduce((g,y)=>(g[y]={...h[f][y]},g),h[f]),h),{});o.store=new lx(u,i),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new mx(i)),o.translator=new sm(o.services,i),o.translator.on("*",(u,...h)=>{o.emit(u,...h)}),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const tr=Ku.createInstance();tr.createInstance;tr.dir;tr.init;tr.loadResources;tr.reloadResources;tr.use;tr.changeLanguage;tr.getFixedT;tr.t;tr.exists;tr.setDefaultNamespace;tr.hasLoadedNamespace;tr.loadNamespaces;tr.loadLanguages;const U4=(n,e,t,r)=>{const i=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);No(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},_x={},OS=(n,e,t,r)=>{No(t)&&_x[t]||(No(t)&&(_x[t]=new Date),U4(n,e,t,r))},MS=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},a0=(n,e,t)=>{n.loadNamespaces(e,MS(n,t))},vx=(n,e,t,r)=>{if(No(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return a0(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,MS(n,r))},z4=(n,e,t={})=>!e.languages||!e.languages.length?(OS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),No=n=>typeof n=="string",F4=n=>typeof n=="object"&&n!==null,B4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,q4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},$4=n=>q4[n],H4=n=>n.replace(B4,$4);let o0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:H4,transDefaultProps:void 0};const G4=(n={})=>{o0={...o0,...n}},K4=()=>o0;let PS;const Y4=n=>{PS=n},Q4=()=>PS,W4={type:"3rdParty",init(n){G4(n.options.react),Y4(n)}},X4=z.createContext();class J4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var jy={exports:{}},Ly={};var bx;function Z4(){if(bx)return Ly;bx=1;var n=Bm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,v){var w=v(),x=r({inst:{value:w,getSnapshot:v}}),N=x[0].inst,O=x[1];return o(function(){N.value=w,N.getSnapshot=v,h(N)&&O({inst:N})},[y,w,v]),i(function(){return h(N)&&O({inst:N}),y(function(){h(N)&&O({inst:N})})},[y]),l(w),w}function h(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ly.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Ly}var wx;function eD(){return wx||(wx=1,jy.exports=Z4()),jy.exports}var tD=eD();const nD=(n,e)=>No(e)?e:F4(e)&&No(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,rD={t:nD,ready:!1},sD=()=>()=>{},Ut=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:i}=z.useContext(X4)||{},o=t||r||Q4();o&&!o.reportNamespaces&&(o.reportNamespaces=new J4),o||OS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=z.useMemo(()=>({...K4(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:h}=l,f=i||o?.options?.defaultNS,g=No(f)?[f]:f||["translation"],y=z.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=z.useRef(0),w=z.useCallback(T=>{if(!o)return sD;const{bindI18n:k,bindI18nStore:C}=l,j=()=>{v.current+=1,T()};return k&&o.on(k,j),C&&o.store.on(C,j),()=>{k&&k.split(" ").forEach(D=>o.off(D,j)),C&&C.split(" ").forEach(D=>o.store.off(D,j))}},[o,l]),x=z.useRef(),N=z.useCallback(()=>{if(!o)return rD;const T=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(Z=>z4(Z,o,l)),k=e.lng||o.language,C=v.current,j=x.current;if(j&&j.ready===T&&j.lng===k&&j.keyPrefix===h&&j.revision===C)return j;const G={t:o.getFixedT(k,l.nsMode==="fallback"?y:y[0],h),ready:T,lng:k,keyPrefix:h,revision:C};return x.current=G,G},[o,y,h,l,e.lng]),[O,L]=z.useState(0),{t:H,ready:B}=tD.useSyncExternalStore(w,N,N);z.useEffect(()=>{if(o&&!B&&!u){const T=()=>L(k=>k+1);e.lng?vx(o,e.lng,y,T):a0(o,y,T)}},[o,e.lng,y,B,u,O]);const q=o||{},Y=z.useRef(null),V=z.useRef(),R=T=>{const k=Object.getOwnPropertyDescriptors(T);k.__original&&delete k.__original;const C=Object.create(Object.getPrototypeOf(T),k);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},E=z.useMemo(()=>{const T=q,k=T?.language;let C=T;T&&(Y.current&&Y.current.__original===T?V.current!==k?(C=R(T),Y.current=C,V.current=k):C=Y.current:(C=R(T),Y.current=C,V.current=k));const j=[H,C,B];return j.t=H,j.i18n=C,j.ready=B,j},[H,q,B,q.resolvedLanguage,q.language,q.languages]);if(o&&u&&!B)throw new Promise(T=>{const k=()=>T();e.lng?vx(o,e.lng,y,k):a0(o,y,k)});return E},iD=()=>{};var xx={};const jS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,u=l?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,l||(v=64)),r.push(t[g],t[y],t[v],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new oD;const v=o<<2|u>>4;if(r.push(v),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const x=f<<6&192|y;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class oD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lD=function(n){const e=jS(n);return LS.encodeByteArray(e,!0)},im=function(n){return lD(n).replace(/\./g,"")},VS=function(n){try{return LS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function US(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cD=()=>US().__FIREBASE_DEFAULTS__,uD=()=>{if(typeof process>"u"||typeof xx>"u")return;const n=xx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VS(n[1]);return e&&JSON.parse(e)},Gm=()=>{try{return iD()||cD()||uD()||dD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},zS=n=>Gm()?.emulatorHosts?.[n],FS=n=>{const e=zS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},BS=()=>Gm()?.config,qS=n=>Gm()?.[`_${n}`];class hD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Go(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e_(n){return(await fetch(n,{credentials:"include"})).ok}function $S(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[im(JSON.stringify(t)),im(JSON.stringify(l)),""].join(".")}const Yu={};function fD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yu))Yu[e]?n.emulator.push(e):n.prod.push(e);return n}function mD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ex=!1;function t_(n,e){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||Yu[n]===e||Yu[n]||Ex)return;Yu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=fD().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Ex=!0,l()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=mD(r),w=t("text"),x=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),O=document.getElementById(N)||document.createElement("a"),L=t("preprendIcon"),H=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const B=v.element;u(B),g(O,N);const q=f();h(H,L),B.append(H,x,O,q),document.body.appendChild(B)}o?(x.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function HS(){const n=Gm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _D(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vD(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GS(){return!HS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KS(){return!HS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function YS(){try{return typeof indexedDB=="object"}catch{return!1}}function bD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const wD="FirebaseError";class Qs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wD,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cd.prototype.create)}}class Cd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?xD(o,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Qs(i,u,r)}}function xD(n,e){return n.replace(ED,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ED=/\{\$([^}]+)}/g;function TD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Si(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(Tx(o)&&Tx(l)){if(!Si(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Tx(n){return n!==null&&typeof n=="object"}function Dd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function zu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SD(n,e){const t=new AD(n,e);return t.subscribe.bind(t)}class AD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");kD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vy),i.error===void 0&&(i.error=Vy),i.complete===void 0&&(i.complete=Vy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vy(){}function en(n){return n&&n._delegate?n._delegate:n}class Ia{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class RD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new hD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ND(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ID(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ID(n){return n===go?void 0:n}function ND(n){return n.instantiationMode==="EAGER"}class CD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const DD={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},OD=st.INFO,MD={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},PD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=MD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class n_{constructor(e){this.name=e,this._logLevel=OD,this._logHandler=PD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const jD=(n,e)=>e.some(t=>n instanceof t);let Sx,Ax;function LD(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VD(){return Ax||(Ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QS=new WeakMap,l0=new WeakMap,WS=new WeakMap,Uy=new WeakMap,r_=new WeakMap;function UD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ea(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&QS.set(t,n)}).catch(()=>{}),r_.set(e,n),e}function zD(n){if(l0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});l0.set(n,e)}let c0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return l0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FD(n){c0=n(c0)}function BD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zy(this),e,...t);return WS.set(r,e.sort?e.sort():[e]),Ea(r)}:VD().includes(n)?function(...e){return n.apply(zy(this),e),Ea(QS.get(this))}:function(...e){return Ea(n.apply(zy(this),e))}}function qD(n){return typeof n=="function"?BD(n):(n instanceof IDBTransaction&&zD(n),jD(n,LD())?new Proxy(n,c0):n)}function Ea(n){if(n instanceof IDBRequest)return UD(n);if(Uy.has(n))return Uy.get(n);const e=qD(n);return e!==n&&(Uy.set(n,e),r_.set(e,n)),e}const zy=n=>r_.get(n);function $D(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),u=Ea(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Ea(l.result),h.oldVersion,h.newVersion,Ea(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const HD=["get","getKey","getAll","getAllKeys","count"],GD=["put","add","delete","clear"],Fy=new Map;function kx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=GD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HD.includes(t)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return Fy.set(e,o),o}FD(n=>({...n,get:(e,t,r)=>kx(e,t)||n.get(e,t,r),has:(e,t)=>!!kx(e,t)||n.has(e,t)}));class KD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function YD(n){return n.getComponent()?.type==="VERSION"}const u0="@firebase/app",Rx="0.14.6";const Ai=new n_("@firebase/app"),QD="@firebase/app-compat",WD="@firebase/analytics-compat",XD="@firebase/analytics",JD="@firebase/app-check-compat",ZD="@firebase/app-check",e5="@firebase/auth",t5="@firebase/auth-compat",n5="@firebase/database",r5="@firebase/data-connect",s5="@firebase/database-compat",i5="@firebase/functions",a5="@firebase/functions-compat",o5="@firebase/installations",l5="@firebase/installations-compat",c5="@firebase/messaging",u5="@firebase/messaging-compat",d5="@firebase/performance",h5="@firebase/performance-compat",f5="@firebase/remote-config",m5="@firebase/remote-config-compat",g5="@firebase/storage",p5="@firebase/storage-compat",y5="@firebase/firestore",_5="@firebase/ai",v5="@firebase/firestore-compat",b5="firebase",w5="12.6.0";const d0="[DEFAULT]",x5={[u0]:"fire-core",[QD]:"fire-core-compat",[XD]:"fire-analytics",[WD]:"fire-analytics-compat",[ZD]:"fire-app-check",[JD]:"fire-app-check-compat",[e5]:"fire-auth",[t5]:"fire-auth-compat",[n5]:"fire-rtdb",[r5]:"fire-data-connect",[s5]:"fire-rtdb-compat",[i5]:"fire-fn",[a5]:"fire-fn-compat",[o5]:"fire-iid",[l5]:"fire-iid-compat",[c5]:"fire-fcm",[u5]:"fire-fcm-compat",[d5]:"fire-perf",[h5]:"fire-perf-compat",[f5]:"fire-rc",[m5]:"fire-rc-compat",[g5]:"fire-gcs",[p5]:"fire-gcs-compat",[y5]:"fire-fst",[v5]:"fire-fst-compat",[_5]:"fire-vertex","fire-js":"fire-js",[b5]:"fire-js-all"};const am=new Map,E5=new Map,h0=new Map;function Ix(n,e){try{n.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Co(n){const e=n.name;if(h0.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;h0.set(e,n);for(const t of am.values())Ix(t,n);for(const t of E5.values())Ix(t,n);return!0}function Km(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Er(n){return n==null?!1:n.settings!==void 0}const T5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ta=new Cd("app","Firebase",T5);class S5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ta.create("app-deleted",{appName:this._name})}}const Ko=w5;function XS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:d0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ta.create("bad-app-name",{appName:String(i)});if(t||(t=BS()),!t)throw Ta.create("no-options");const o=am.get(i);if(o){if(Si(t,o.options)&&Si(r,o.config))return o;throw Ta.create("duplicate-app",{appName:i})}const l=new CD(i);for(const h of h0.values())l.addComponent(h);const u=new S5(t,r,l);return am.set(i,u),u}function s_(n=d0){const e=am.get(n);if(!e&&n===d0&&BS())return XS();if(!e)throw Ta.create("no-app",{appName:n});return e}function Ls(n,e,t){let r=x5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(l.join(" "));return}Co(new Ia(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const A5="firebase-heartbeat-database",k5=1,od="firebase-heartbeat-store";let By=null;function JS(){return By||(By=$D(A5,k5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(od)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ta.create("idb-open",{originalErrorMessage:n.message})})),By}async function R5(n){try{const t=(await JS()).transaction(od),r=await t.objectStore(od).get(ZS(n));return await t.done,r}catch(e){if(e instanceof Qs)Ai.warn(e.message);else{const t=Ta.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function Nx(n,e){try{const r=(await JS()).transaction(od,"readwrite");await r.objectStore(od).put(e,ZS(n)),await r.done}catch(t){if(t instanceof Qs)Ai.warn(t.message);else{const r=Ta.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function ZS(n){return`${n.name}!${n.options.appId}`}const I5=1024,N5=30;class C5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new O5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>N5){const i=M5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Cx(),{heartbeatsToSend:t,unsentEntries:r}=D5(this._heartbeatsCache.heartbeats),i=im(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ai.warn(e),""}}}function Cx(){return new Date().toISOString().substring(0,10)}function D5(n,e=I5){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Dx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Dx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class O5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YS()?bD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dx(n){return im(JSON.stringify({version:2,heartbeats:n})).length}function M5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function P5(n){Co(new Ia("platform-logger",e=>new KD(e),"PRIVATE")),Co(new Ia("heartbeat",e=>new C5(e),"PRIVATE")),Ls(u0,Rx,n),Ls(u0,Rx,"esm2020"),Ls("fire-js","")}P5("");var j5="firebase",L5="12.6.0";Ls(j5,L5,"app");function e2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V5=e2,t2=new Cd("auth","Firebase",e2());const om=new n_("@firebase/auth");function U5(n,...e){om.logLevel<=st.WARN&&om.warn(`Auth (${Ko}): ${n}`,...e)}function Pf(n,...e){om.logLevel<=st.ERROR&&om.error(`Auth (${Ko}): ${n}`,...e)}function ls(n,...e){throw i_(n,...e)}function Vs(n,...e){return i_(n,...e)}function n2(n,e,t){const r={...V5(),[e]:t};return new Cd("auth","Firebase",r).create(e,{appName:n.name})}function Ei(n){return n2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return t2.create(n,...e)}function Pe(n,e,...t){if(!n)throw i_(e,...t)}function vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function ki(n,e){n||vi(e)}function f0(){return typeof self<"u"&&self.location?.href||""}function z5(){return Ox()==="http:"||Ox()==="https:"}function Ox(){return typeof self<"u"&&self.location?.protocol||null}function F5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z5()||yD()||"connection"in navigator)?navigator.onLine:!0}function B5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Od{constructor(e,t){this.shortDelay=e,this.longDelay=t,ki(t>e,"Short delay should be less than long delay!"),this.isMobile=gD()||_D()}get(){return F5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function a_(n,e){ki(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class r2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const q5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H5=new Od(3e4,6e4);function Ci(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ws(n,e,t,r,i={}){return s2(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Dd({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return pD()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Go(n.emulatorConfig.host)&&(f.credentials="include"),r2.fetch()(await i2(n,n.config.apiHost,t,u),f)})}async function s2(n,e,t){n._canInitEmulator=!1;const r={...q5,...e};try{const i=new K5(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw xf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw xf(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw xf(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw xf(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw n2(n,g,f);ls(n,g)}}catch(i){if(i instanceof Qs)throw i;ls(n,"network-request-failed",{message:String(i)})}}async function Md(n,e,t,r,i={}){const o=await Ws(n,e,t,r,i);return"mfaPendingCredential"in o&&ls(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function i2(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?a_(n.config,i):`${n.config.apiScheme}://${i}`;return $5.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function G5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class K5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),H5.get())})}}function xf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Vs(n,e,r);return i.customData._tokenResponse=t,i}function Mx(n){return n!==void 0&&n.enterprise!==void 0}class Y5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return G5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q5(n,e){return Ws(n,"GET","/v2/recaptchaConfig",Ci(n,e))}async function W5(n,e){return Ws(n,"POST","/v1/accounts:delete",e)}async function lm(n,e){return Ws(n,"POST","/v1/accounts:lookup",e)}function Qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function X5(n,e=!1){const t=en(n),r=await t.getIdToken(e),i=o_(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Qu(qy(i.auth_time)),issuedAtTime:Qu(qy(i.iat)),expirationTime:Qu(qy(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function qy(n){return Number(n)*1e3}function o_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const i=VS(t);return i?JSON.parse(i):(Pf("Failed to decode base64 JWT payload"),null)}catch(i){return Pf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Px(n){const e=o_(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function uc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qs&&J5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function J5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Z5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class m0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cm(n){const e=n.auth,t=await n.getIdToken(),r=await uc(n,lm(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?a2(i.providerUserInfo):[],l=tO(n.providerData,o),u=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!l?.length,f=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new m0(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function eO(n){const e=en(n);await cm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a2(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function nO(n,e){const t=await s2(n,{},async()=>{const r=Dd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await i2(n,i,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Go(n.emulatorConfig.host)&&(h.credentials="include"),r2.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rO(n,e){return Ws(n,"POST","/v2/accounts:revokeToken",Ci(n,e))}class sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Px(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await nO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new sc;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sc,this.toJSON())}_performRefresh(){return vi("not implemented")}}function ha(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class as{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Z5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new m0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await uc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return X5(this,e)}reload(){return eO(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new as({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await cm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await uc(this,W5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:x,stsTokenManager:N}=t;Pe(y&&N,e,"internal-error");const O=sc.fromJSON(this.name,N);Pe(typeof y=="string",e,"internal-error"),ha(r,e.name),ha(i,e.name),Pe(typeof v=="boolean",e,"internal-error"),Pe(typeof w=="boolean",e,"internal-error"),ha(o,e.name),ha(l,e.name),ha(u,e.name),ha(h,e.name),ha(f,e.name),ha(g,e.name);const L=new as({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:w,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:g});return x&&Array.isArray(x)&&(L.providerData=x.map(H=>({...H}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new sc;i.updateFromServerResponse(t);const o=new as({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?a2(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,u=new sc;u.updateFromIdToken(r);const h=new as({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new m0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const jx=new Map;function bi(n){ki(n instanceof Function,"Expected a class definition");let e=jx.get(n);return e?(ki(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jx.set(n,e),e)}class o2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o2.type="NONE";const Lx=o2;function jf(n,e,t){return`firebase:${n}:${e}:${t}`}class ic{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=jf(this.userKey,i.apiKey,o),this.fullPersistenceKey=jf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lm(this.auth,{idToken:e}).catch(()=>{});return t?as._fromGetAccountInfoResponse(this.auth,t,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ic(bi(Lx),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||bi(Lx);const l=jf(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(l);if(g){let y;if(typeof g=="string"){const v=await lm(e,{idToken:g}).catch(()=>{});if(!v)break;y=await as._fromGetAccountInfoResponse(e,v,g)}else y=as._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ic(o,e,r):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new ic(o,e,r))}}function Vx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f2(e))return"Blackberry";if(m2(e))return"Webos";if(c2(e))return"Safari";if((e.includes("chrome/")||u2(e))&&!e.includes("edge/"))return"Chrome";if(h2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function l2(n=pn()){return/firefox\//i.test(n)}function c2(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u2(n=pn()){return/crios\//i.test(n)}function d2(n=pn()){return/iemobile/i.test(n)}function h2(n=pn()){return/android/i.test(n)}function f2(n=pn()){return/blackberry/i.test(n)}function m2(n=pn()){return/webos/i.test(n)}function l_(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sO(n=pn()){return l_(n)&&!!window.navigator?.standalone}function iO(){return vD()&&document.documentMode===10}function g2(n=pn()){return l_(n)||h2(n)||m2(n)||f2(n)||/windows phone/i.test(n)||d2(n)}function p2(n,e=[]){let t;switch(n){case"Browser":t=Vx(pn());break;case"Worker":t=`${Vx(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ko}/${r}`}class aO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function oO(n,e={}){return Ws(n,"GET","/v2/passwordPolicy",Ci(n,e))}const lO=6;class cO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class uO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ux(this),this.idTokenSubscription=new Ux(this),this.beforeStateQueue=new aO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ic.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lm(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(Ei(this));const t=e?en(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oO(this),t=new cO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await rO(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await ic.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&U5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yo(n){return en(n)}class Ux{constructor(e){this.auth=e,this.observer=null,this.addObserver=SD(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dO(n){Ym=n}function y2(n){return Ym.loadJS(n)}function hO(){return Ym.recaptchaEnterpriseScript}function fO(){return Ym.gapiScript}function mO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class gO{constructor(){this.enterprise=new pO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yO="recaptcha-enterprise",_2="NO_RECAPTCHA";class _O{constructor(e){this.type=yO,this.auth=Yo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{Q5(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new Y5(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;Mx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(_2)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gO().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&Mx(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=hO();h.length!==0&&(h+=u),y2(h).then(()=>{i(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function zx(n,e,t,r=!1,i=!1){const o=new _O(n);let l;if(i)l=_2;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function g0(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await zx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await zx(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}function vO(n,e){const t=Km(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Si(o,e??{}))return i;ls(i,"already-initialized")}return t.initialize({options:e})}function bO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function wO(n,e,t){const r=Yo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=v2(e),{host:l,port:u}=xO(e),h=u===null?"":`:${u}`,f={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Si(f,r.config.emulator)&&Si(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Go(l)?(e_(`${o}//${l}${h}`),t_("Auth",!0)):EO()}function v2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function xO(n){const e=v2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Fx(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Fx(l)}}}function Fx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class c_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function TO(n,e){return Ws(n,"POST","/v1/accounts:signUp",e)}async function SO(n,e){return Md(n,"POST","/v1/accounts:signInWithPassword",Ci(n,e))}async function AO(n,e){return Ws(n,"POST","/v1/accounts:sendOobCode",Ci(n,e))}async function kO(n,e){return AO(n,e)}async function RO(n,e){return Md(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}async function IO(n,e){return Md(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}class ld extends c_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ld(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ld(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(e,t,"signInWithPassword",SO);case"emailLink":return RO(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(e,r,"signUpPassword",TO);case"emailLink":return IO(e,{idToken:t,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ac(n,e){return Md(n,"POST","/v1/accounts:signInWithIdp",Ci(n,e))}const NO="http://localhost";class Do extends c_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ls("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Do(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ac(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ac(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ac(e,t)}buildRequest(){const e={requestUri:NO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dd(t)}return e}}function CO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DO(n){const e=Uu(zu(n)).link,t=e?Uu(zu(e)).deep_link_id:null,r=Uu(zu(n)).deep_link_id;return(r?Uu(zu(r)).link:null)||r||t||e||n}class u_{constructor(e){const t=Uu(zu(e)),r=t.apiKey??null,i=t.oobCode??null,o=CO(t.mode??null);Pe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=DO(e);try{return new u_(t)}catch{return null}}}class Ac{constructor(){this.providerId=Ac.PROVIDER_ID}static credential(e,t){return ld._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=u_.parseLink(t);return Pe(r,"argument-error"),ld._fromEmailAndCode(e,r.code,r.tenantId)}}Ac.PROVIDER_ID="password";Ac.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ac.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class b2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pd extends b2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends Pd{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";class _i extends Pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _i.credential(t,r)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";class va extends Pd{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return va.credential(e.oauthAccessToken)}catch{return null}}}va.GITHUB_SIGN_IN_METHOD="github.com";va.PROVIDER_ID="github.com";class ba extends Pd{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ba.credential(t,r)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";async function OO(n,e){return Md(n,"POST","/v1/accounts:signUp",Ci(n,e))}class Oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await as._fromIdTokenResponse(e,r,i),l=Bx(r);return new Oo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Bx(r);return new Oo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Bx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class um extends Qs{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,um.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new um(e,t,r,i)}}function w2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?um._fromErrorAndOperation(n,o,e,r):o})}async function MO(n,e,t=!1){const r=await uc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Oo._forOperation(n,"link",r)}async function PO(n,e,t=!1){const{auth:r}=n;if(Er(r.app))return Promise.reject(Ei(r));const i="reauthenticate";try{const o=await uc(n,w2(r,i,e,n),t);Pe(o.idToken,r,"internal-error");const l=o_(o.idToken);Pe(l,r,"internal-error");const{sub:u}=l;return Pe(n.uid===u,r,"user-mismatch"),Oo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ls(r,"user-mismatch"),o}}async function x2(n,e,t=!1){if(Er(n.app))return Promise.reject(Ei(n));const r="signIn",i=await w2(n,r,e),o=await Oo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function jO(n,e){return x2(Yo(n),e)}function LO(n,e,t){Pe(t.url?.length>0,n,"invalid-continue-uri"),Pe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Pe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Pe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Pe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function E2(n){const e=Yo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T2(n,e,t){if(Er(n.app))return Promise.reject(Ei(n));const r=Yo(n),l=await g0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&E2(n),h}),u=await Oo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function p0(n,e,t){return Er(n.app)?Promise.reject(Ei(n)):jO(en(n),Ac.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E2(n),r})}async function S2(n,e){const t=en(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&LO(t.auth,i,e);const{email:o}=await kO(t.auth,i);o!==n.email&&await n.reload()}async function VO(n,e){return Ws(n,"POST","/v1/accounts:update",e)}async function dm(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=en(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await uc(r,VO(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function UO(n,e,t,r){return en(n).onIdTokenChanged(e,t,r)}function zO(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function FO(n,e,t,r){return en(n).onAuthStateChanged(e,t,r)}const hm="__sak";class A2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BO=1e3,qO=10;class k2 extends A2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);iO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k2.type="LOCAL";const $O=k2;class R2 extends A2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}R2.type="SESSION";const I2=R2;function HO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Qm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async f=>f(t.origin,o)),h=await HO(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qm.receivers=[];function d_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class GO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const f=d_("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Us(){return window}function KO(n){Us().location.href=n}function N2(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function YO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QO(){return navigator?.serviceWorker?.controller||null}function WO(){return N2()?self:null}const C2="firebaseLocalStorageDb",XO=1,fm="firebaseLocalStorage",D2="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wm(n,e){return n.transaction([fm],e?"readwrite":"readonly").objectStore(fm)}function JO(){const n=indexedDB.deleteDatabase(C2);return new jd(n).toPromise()}function y0(){const n=indexedDB.open(C2,XO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(fm,{keyPath:D2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(fm)?e(r):(r.close(),await JO(),e(await y0()))})})}async function qx(n,e,t){const r=Wm(n,!0).put({[D2]:e,value:t});return new jd(r).toPromise()}async function ZO(n,e){const t=Wm(n,!1).get(e),r=await new jd(t).toPromise();return r===void 0?null:r.value}function $x(n,e){const t=Wm(n,!0).delete(e);return new jd(t).toPromise()}const eM=800,tM=3;class O2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>tM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qm._getInstance(WO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YO(),!this.activeServiceWorker)return;this.sender=new GO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await y0();return await qx(e,hm,"1"),await $x(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$x(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Wm(i,!1).getAll();return new jd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O2.type="LOCAL";const nM=O2;new Od(3e4,6e4);function rM(n,e){return e?bi(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class h_ extends c_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ac(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ac(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sM(n){return x2(n.auth,new h_(n),n.bypassAuthState)}function iM(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),PO(t,new h_(n),n.bypassAuthState)}async function aM(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),MO(t,new h_(n),n.bypassAuthState)}class M2{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sM;case"linkViaPopup":case"linkViaRedirect":return aM;case"reauthViaPopup":case"reauthViaRedirect":return iM;default:ls(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oM=new Od(2e3,1e4);class nc extends M2{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,nc.currentPopupAction&&nc.currentPopupAction.cancel(),nc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=d_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oM.get())};e()}}nc.currentPopupAction=null;const lM="pendingRedirect",Lf=new Map;class cM extends M2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const r=await uM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uM(n,e){const t=fM(e),r=hM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function dM(n,e){Lf.set(n._key(),e)}function hM(n){return bi(n._redirectPersistence)}function fM(n){return jf(lM,n.config.apiKey,n.name)}async function mM(n,e,t=!1){if(Er(n.app))return Promise.reject(Ei(n));const r=Yo(n),i=rM(r,e),l=await new cM(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const gM=600*1e3;class pM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!P2(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Vs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hx(e))}saveEventToCache(e){this.cachedEventUids.add(Hx(e)),this.lastProcessedEventTime=Date.now()}}function Hx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function P2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function yM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P2(n);default:return!1}}async function _M(n,e={}){return Ws(n,"GET","/v1/projects",e)}const vM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bM=/^https?/;async function wM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _M(n);for(const t of e)try{if(xM(t))return}catch{}ls(n,"unauthorized-domain")}function xM(n){const e=f0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!bM.test(t))return!1;if(vM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const EM=new Od(3e4,6e4);function Gx(){const n=Us().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TM(n){return new Promise((e,t)=>{function r(){Gx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gx(),t(Vs(n,"network-request-failed"))},timeout:EM.get()})}if(Us().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Us().gapi?.load)r();else{const i=mO("iframefcb");return Us()[i]=()=>{gapi.load?r():t(Vs(n,"network-request-failed"))},y2(`${fO()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Vf=null,e})}let Vf=null;function SM(n){return Vf=Vf||TM(n),Vf}const AM=new Od(5e3,15e3),kM="__/auth/iframe",RM="emulator/auth/iframe",IM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CM(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?a_(e,RM):`https://${n.config.authDomain}/${kM}`,r={apiKey:e.apiKey,appName:n.name,v:Ko},i=NM.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Dd(r).slice(1)}`}async function DM(n){const e=await SM(n),t=Us().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:CM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Vs(n,"network-request-failed"),u=Us().setTimeout(()=>{o(l)},AM.get());function h(){Us().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(l)})}))}const OM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MM=500,PM=600,jM="_blank",LM="http://localhost";class Kx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VM(n,e,t,r=MM,i=PM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...OM,width:r.toString(),height:i.toString(),top:o,left:l},f=pn().toLowerCase();t&&(u=u2(f)?jM:t),l2(f)&&(e=e||LM,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[w,x])=>`${v}${w}=${x},`,"");if(sO(f)&&u!=="_self")return UM(e||"",u),new Kx(null);const y=window.open(e||"",u,g);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new Kx(y)}function UM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const zM="__/auth/handler",FM="emulator/auth/handler",BM=encodeURIComponent("fac");async function Yx(n,e,t,r,i,o){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ko,eventId:i};if(e instanceof b2){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",TD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof Pd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),f=h?`#${BM}=${encodeURIComponent(h)}`:"";return`${qM(n)}?${Dd(u).slice(1)}${f}`}function qM({config:n}){return n.emulator?a_(n,FM):`https://${n.authDomain}/${zM}`}const $y="webStorageSupport";class $M{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I2,this._completeRedirectFn=mM,this._overrideRedirectResult=dM}async _openPopup(e,t,r,i){ki(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Yx(e,t,r,f0(),i);return VM(e,o,d_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Yx(e,t,r,f0(),i);return KO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ki(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await DM(e),r=new pM(e);return t.register("authEvent",i=>(Pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($y,{type:$y},i=>{const o=i?.[0]?.[$y];o!==void 0&&t(!!o),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g2()||c2()||l_()}}const HM=$M;var Qx="@firebase/auth",Wx="1.11.1";class GM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YM(n){Co(new Ia("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p2(n)},f=new uO(r,i,o,h);return bO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Co(new Ia("auth-internal",e=>{const t=Yo(e.getProvider("auth").getImmediate());return(r=>new GM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Qx,Wx,KM(n)),Ls(Qx,Wx,"esm2020")}const QM=300,WM=qS("authIdTokenMaxAge")||QM;let Xx=null;const XM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>WM)return;const i=t?.token;Xx!==i&&(Xx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JM(n=s_()){const e=Km(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vO(n,{popupRedirectResolver:HM,persistence:[nM,$O,I2]}),r=qS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=XM(o.toString());zO(t,l,()=>l(t.currentUser)),UO(t,u=>l(u))}}const i=zS("auth");return i&&wO(t,`http://${i}`),t}function ZM(){return document.getElementsByTagName("head")?.[0]??document}dO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Vs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",ZM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YM("Browser");var Jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sa,j2;(function(){var n;function e(R,E){function T(){}T.prototype=E.prototype,R.F=E.prototype,R.prototype=new T,R.prototype.constructor=R,R.D=function(k,C,j){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return E.prototype[C].apply(k,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,E,T){T||(T=0);const k=Array(16);if(typeof E=="string")for(var C=0;C<16;++C)k[C]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(C=0;C<16;++C)k[C]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=R.g[0],T=R.g[1],C=R.g[2];let j=R.g[3],D;D=E+(j^T&(C^j))+k[0]+3614090360&4294967295,E=T+(D<<7&4294967295|D>>>25),D=j+(C^E&(T^C))+k[1]+3905402710&4294967295,j=E+(D<<12&4294967295|D>>>20),D=C+(T^j&(E^T))+k[2]+606105819&4294967295,C=j+(D<<17&4294967295|D>>>15),D=T+(E^C&(j^E))+k[3]+3250441966&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(j^T&(C^j))+k[4]+4118548399&4294967295,E=T+(D<<7&4294967295|D>>>25),D=j+(C^E&(T^C))+k[5]+1200080426&4294967295,j=E+(D<<12&4294967295|D>>>20),D=C+(T^j&(E^T))+k[6]+2821735955&4294967295,C=j+(D<<17&4294967295|D>>>15),D=T+(E^C&(j^E))+k[7]+4249261313&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(j^T&(C^j))+k[8]+1770035416&4294967295,E=T+(D<<7&4294967295|D>>>25),D=j+(C^E&(T^C))+k[9]+2336552879&4294967295,j=E+(D<<12&4294967295|D>>>20),D=C+(T^j&(E^T))+k[10]+4294925233&4294967295,C=j+(D<<17&4294967295|D>>>15),D=T+(E^C&(j^E))+k[11]+2304563134&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(j^T&(C^j))+k[12]+1804603682&4294967295,E=T+(D<<7&4294967295|D>>>25),D=j+(C^E&(T^C))+k[13]+4254626195&4294967295,j=E+(D<<12&4294967295|D>>>20),D=C+(T^j&(E^T))+k[14]+2792965006&4294967295,C=j+(D<<17&4294967295|D>>>15),D=T+(E^C&(j^E))+k[15]+1236535329&4294967295,T=C+(D<<22&4294967295|D>>>10),D=E+(C^j&(T^C))+k[1]+4129170786&4294967295,E=T+(D<<5&4294967295|D>>>27),D=j+(T^C&(E^T))+k[6]+3225465664&4294967295,j=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(j^E))+k[11]+643717713&4294967295,C=j+(D<<14&4294967295|D>>>18),D=T+(j^E&(C^j))+k[0]+3921069994&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^j&(T^C))+k[5]+3593408605&4294967295,E=T+(D<<5&4294967295|D>>>27),D=j+(T^C&(E^T))+k[10]+38016083&4294967295,j=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(j^E))+k[15]+3634488961&4294967295,C=j+(D<<14&4294967295|D>>>18),D=T+(j^E&(C^j))+k[4]+3889429448&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^j&(T^C))+k[9]+568446438&4294967295,E=T+(D<<5&4294967295|D>>>27),D=j+(T^C&(E^T))+k[14]+3275163606&4294967295,j=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(j^E))+k[3]+4107603335&4294967295,C=j+(D<<14&4294967295|D>>>18),D=T+(j^E&(C^j))+k[8]+1163531501&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(C^j&(T^C))+k[13]+2850285829&4294967295,E=T+(D<<5&4294967295|D>>>27),D=j+(T^C&(E^T))+k[2]+4243563512&4294967295,j=E+(D<<9&4294967295|D>>>23),D=C+(E^T&(j^E))+k[7]+1735328473&4294967295,C=j+(D<<14&4294967295|D>>>18),D=T+(j^E&(C^j))+k[12]+2368359562&4294967295,T=C+(D<<20&4294967295|D>>>12),D=E+(T^C^j)+k[5]+4294588738&4294967295,E=T+(D<<4&4294967295|D>>>28),D=j+(E^T^C)+k[8]+2272392833&4294967295,j=E+(D<<11&4294967295|D>>>21),D=C+(j^E^T)+k[11]+1839030562&4294967295,C=j+(D<<16&4294967295|D>>>16),D=T+(C^j^E)+k[14]+4259657740&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^j)+k[1]+2763975236&4294967295,E=T+(D<<4&4294967295|D>>>28),D=j+(E^T^C)+k[4]+1272893353&4294967295,j=E+(D<<11&4294967295|D>>>21),D=C+(j^E^T)+k[7]+4139469664&4294967295,C=j+(D<<16&4294967295|D>>>16),D=T+(C^j^E)+k[10]+3200236656&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^j)+k[13]+681279174&4294967295,E=T+(D<<4&4294967295|D>>>28),D=j+(E^T^C)+k[0]+3936430074&4294967295,j=E+(D<<11&4294967295|D>>>21),D=C+(j^E^T)+k[3]+3572445317&4294967295,C=j+(D<<16&4294967295|D>>>16),D=T+(C^j^E)+k[6]+76029189&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(T^C^j)+k[9]+3654602809&4294967295,E=T+(D<<4&4294967295|D>>>28),D=j+(E^T^C)+k[12]+3873151461&4294967295,j=E+(D<<11&4294967295|D>>>21),D=C+(j^E^T)+k[15]+530742520&4294967295,C=j+(D<<16&4294967295|D>>>16),D=T+(C^j^E)+k[2]+3299628645&4294967295,T=C+(D<<23&4294967295|D>>>9),D=E+(C^(T|~j))+k[0]+4096336452&4294967295,E=T+(D<<6&4294967295|D>>>26),D=j+(T^(E|~C))+k[7]+1126891415&4294967295,j=E+(D<<10&4294967295|D>>>22),D=C+(E^(j|~T))+k[14]+2878612391&4294967295,C=j+(D<<15&4294967295|D>>>17),D=T+(j^(C|~E))+k[5]+4237533241&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~j))+k[12]+1700485571&4294967295,E=T+(D<<6&4294967295|D>>>26),D=j+(T^(E|~C))+k[3]+2399980690&4294967295,j=E+(D<<10&4294967295|D>>>22),D=C+(E^(j|~T))+k[10]+4293915773&4294967295,C=j+(D<<15&4294967295|D>>>17),D=T+(j^(C|~E))+k[1]+2240044497&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~j))+k[8]+1873313359&4294967295,E=T+(D<<6&4294967295|D>>>26),D=j+(T^(E|~C))+k[15]+4264355552&4294967295,j=E+(D<<10&4294967295|D>>>22),D=C+(E^(j|~T))+k[6]+2734768916&4294967295,C=j+(D<<15&4294967295|D>>>17),D=T+(j^(C|~E))+k[13]+1309151649&4294967295,T=C+(D<<21&4294967295|D>>>11),D=E+(C^(T|~j))+k[4]+4149444226&4294967295,E=T+(D<<6&4294967295|D>>>26),D=j+(T^(E|~C))+k[11]+3174756917&4294967295,j=E+(D<<10&4294967295|D>>>22),D=C+(E^(j|~T))+k[2]+718787259&4294967295,C=j+(D<<15&4294967295|D>>>17),D=T+(j^(C|~E))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+j&4294967295}r.prototype.v=function(R,E){E===void 0&&(E=R.length);const T=E-this.blockSize,k=this.C;let C=this.h,j=0;for(;j<E;){if(C==0)for(;j<=T;)i(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<E;)if(k[C++]=R.charCodeAt(j++),C==this.blockSize){i(this,k),C=0;break}}else for(;j<E;)if(k[C++]=R[j++],C==this.blockSize){i(this,k),C=0;break}}this.h=C,this.o+=E},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;E=this.o*8;for(var T=R.length-8;T<R.length;++T)R[T]=E&255,E/=256;for(this.v(R),R=Array(16),E=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)R[E++]=this.g[T]>>>k&255;return R};function o(R,E){var T=u;return Object.prototype.hasOwnProperty.call(T,R)?T[R]:T[R]=E(R)}function l(R,E){this.h=E;const T=[];let k=!0;for(let C=R.length-1;C>=0;C--){const j=R[C]|0;k&&j==E||(T[C]=j,k=!1)}this.g=T}var u={};function h(R){return-128<=R&&R<128?o(R,function(E){return new l([E|0],E<0?-1:0)}):new l([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return O(f(-R));const E=[];let T=1;for(let k=0;R>=T;k++)E[k]=R/T|0,T*=4294967296;return new l(E,0)}function g(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return O(g(R.substring(1),E));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(E,8));let k=y;for(let j=0;j<R.length;j+=8){var C=Math.min(8,R.length-j);const D=parseInt(R.substring(j,j+C),E);C<8?(C=f(Math.pow(E,C)),k=k.j(C).add(f(D))):(k=k.j(T),k=k.add(f(D)))}return k}var y=h(0),v=h(1),w=h(16777216);n=l.prototype,n.m=function(){if(N(this))return-O(this).m();let R=0,E=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);R+=(k>=0?k:4294967296+k)*E,E*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(N(this))return"-"+O(this).toString(R);const E=f(Math.pow(R,6));var T=this;let k="";for(;;){const C=q(T,E).g;T=L(T,C.j(E));let j=((T.g.length>0?T.g[0]:T.h)>>>0).toString(R);if(T=C,x(T))return j+k;for(;j.length<6;)j="0"+j;k=j+k}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(let E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function N(R){return R.h==-1}n.l=function(R){return R=L(this,R),N(R)?-1:x(R)?0:1};function O(R){const E=R.g.length,T=[];for(let k=0;k<E;k++)T[k]=~R.g[k];return new l(T,~R.h).add(v)}n.abs=function(){return N(this)?O(this):this},n.add=function(R){const E=Math.max(this.g.length,R.g.length),T=[];let k=0;for(let C=0;C<=E;C++){let j=k+(this.i(C)&65535)+(R.i(C)&65535),D=(j>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);k=D>>>16,j&=65535,D&=65535,T[C]=D<<16|j}return new l(T,T[T.length-1]&-2147483648?-1:0)};function L(R,E){return R.add(O(E))}n.j=function(R){if(x(this)||x(R))return y;if(N(this))return N(R)?O(this).j(O(R)):O(O(this).j(R));if(N(R))return O(this.j(O(R)));if(this.l(w)<0&&R.l(w)<0)return f(this.m()*R.m());const E=this.g.length+R.g.length,T=[];for(var k=0;k<2*E;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let C=0;C<R.g.length;C++){const j=this.i(k)>>>16,D=this.i(k)&65535,G=R.i(C)>>>16,Z=R.i(C)&65535;T[2*k+2*C]+=D*Z,H(T,2*k+2*C),T[2*k+2*C+1]+=j*Z,H(T,2*k+2*C+1),T[2*k+2*C+1]+=D*G,H(T,2*k+2*C+1),T[2*k+2*C+2]+=j*G,H(T,2*k+2*C+2)}for(R=0;R<E;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=E;R<2*E;R++)T[R]=0;return new l(T,0)};function H(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function B(R,E){this.g=R,this.h=E}function q(R,E){if(x(E))throw Error("division by zero");if(x(R))return new B(y,y);if(N(R))return E=q(O(R),E),new B(O(E.g),O(E.h));if(N(E))return E=q(R,O(E)),new B(O(E.g),E.h);if(R.g.length>30){if(N(R)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var T=v,k=E;k.l(R)<=0;)T=Y(T),k=Y(k);var C=V(T,1),j=V(k,1);for(k=V(k,2),T=V(T,2);!x(k);){var D=j.add(k);D.l(R)<=0&&(C=C.add(T),j=D),k=V(k,1),T=V(T,1)}return E=L(R,C.j(E)),new B(C,E)}for(C=y;R.l(E)>=0;){for(T=Math.max(1,Math.floor(R.m()/E.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),j=f(T),D=j.j(E);N(D)||D.l(R)>0;)T-=k,j=f(T),D=j.j(E);x(j)&&(j=v),C=C.add(j),R=L(R,D)}return new B(C,R)}n.B=function(R){return q(this,R).h},n.and=function(R){const E=Math.max(this.g.length,R.g.length),T=[];for(let k=0;k<E;k++)T[k]=this.i(k)&R.i(k);return new l(T,this.h&R.h)},n.or=function(R){const E=Math.max(this.g.length,R.g.length),T=[];for(let k=0;k<E;k++)T[k]=this.i(k)|R.i(k);return new l(T,this.h|R.h)},n.xor=function(R){const E=Math.max(this.g.length,R.g.length),T=[];for(let k=0;k<E;k++)T[k]=this.i(k)^R.i(k);return new l(T,this.h^R.h)};function Y(R){const E=R.g.length+1,T=[];for(let k=0;k<E;k++)T[k]=R.i(k)<<1|R.i(k-1)>>>31;return new l(T,R.h)}function V(R,E){const T=E>>5;E%=32;const k=R.g.length-T,C=[];for(let j=0;j<k;j++)C[j]=E>0?R.i(j+T)>>>E|R.i(j+T+1)<<32-E:R.i(j+T);return new l(C,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,j2=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,Sa=l}).apply(typeof Jx<"u"?Jx:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var L2,Fu,V2,Uf,_0,U2,z2,F2;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var S=0;S<m.length;++S){var I=m[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=t(this);function i(m,S){if(S)e:{var I=r;m=m.split(".");for(var F=0;F<m.length-1;F++){var ae=m[F];if(!(ae in I))break e;I=I[ae]}m=m[m.length-1],F=I[m],S=S(F),S!=F&&S!=null&&e(I,m,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(S){var I=[],F;for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&I.push([F,S[F]]);return I}});var o=o||{},l=this||self;function u(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function h(m,S,I){return m.call.apply(m.bind,arguments)}function f(m,S,I){return f=h,f.apply(null,arguments)}function g(m,S){var I=Array.prototype.slice.call(arguments,1);return function(){var F=I.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function y(m,S){function I(){}I.prototype=S.prototype,m.Z=S.prototype,m.prototype=new I,m.prototype.constructor=m,m.Ob=function(F,ae,ue){for(var we=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)we[Ge-2]=arguments[Ge];return S.prototype[ae].apply(F,we)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const S=m.length;if(S>0){const I=Array(S);for(let F=0;F<S;F++)I[F]=m[F];return I}return[]}function x(m,S){for(let F=1;F<arguments.length;F++){const ae=arguments[F];var I=typeof ae;if(I=I!="object"?I:ae?Array.isArray(ae)?"array":I:"null",I=="array"||I=="object"&&typeof ae.length=="number"){I=m.length||0;const ue=ae.length||0;m.length=I+ue;for(let we=0;we<ue;we++)m[I+we]=ae[we]}else m.push(ae)}}class N{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function O(m){l.setTimeout(()=>{throw m},0)}function L(){var m=R;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,I){const F=B.get();F.set(S,I),this.h?this.h.next=F:this.g=F,this.h=F}}var B=new N(()=>new q,m=>m.reset());class q{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,V=!1,R=new H,E=()=>{const m=Promise.resolve(void 0);Y=()=>{m.then(T)}};function T(){for(var m;m=L();){try{m.h.call(m.g)}catch(I){O(I)}var S=B;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const I=()=>{};l.addEventListener("test",I,S),l.removeEventListener("test",I,S)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function G(m,S){C.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}y(G,C),G.prototype.init=function(m,S){const I=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(I=="mouseover"?S=m.fromElement:I=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),P=0;function M(m,S,I,F,ae){this.listener=m,this.proxy=null,this.src=S,this.type=I,this.capture=!!F,this.ha=ae,this.key=++P,this.da=this.fa=!1}function ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Q(m,S,I){for(const F in m)S.call(I,m[F],F,m)}function X(m,S){for(const I in m)S.call(void 0,m[I],I,m)}function $(m){const S={};for(const I in m)S[I]=m[I];return S}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(m,S){let I,F;for(let ae=1;ae<arguments.length;ae++){F=arguments[ae];for(I in F)m[I]=F[I];for(let ue=0;ue<K.length;ue++)I=K[ue],Object.prototype.hasOwnProperty.call(F,I)&&(m[I]=F[I])}}function ne(m){this.src=m,this.g={},this.h=0}ne.prototype.add=function(m,S,I,F,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const we=ye(m,S,F,ae);return we>-1?(S=m[we],I||(S.fa=!1)):(S=new M(S,this.src,ue,!!F,ae),S.fa=I,m.push(S)),S};function re(m,S){const I=S.type;if(I in m.g){var F=m.g[I],ae=Array.prototype.indexOf.call(F,S,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(F,ae,1),ue&&(ee(S),m.g[I].length==0&&(delete m.g[I],m.h--))}}function ye(m,S,I,F){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==S&&ue.capture==!!I&&ue.ha==F)return ae}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),je={};function ve(m,S,I,F,ae){if(Array.isArray(S)){for(let ue=0;ue<S.length;ue++)ve(m,S[ue],I,F,ae);return null}return I=dt(I),m&&m[Z]?m.J(S,I,u(F)?!!F.capture:!1,ae):Te(m,S,I,!1,F,ae)}function Te(m,S,I,F,ae,ue){if(!S)throw Error("Invalid event type");const we=u(ae)?!!ae.capture:!!ae;let Ge=ut(m);if(Ge||(m[ke]=Ge=new ne(m)),I=Ge.add(S,I,F,we,ue),I.proxy)return I;if(F=$e(),I.proxy=F,F.src=m,F.listener=I,m.addEventListener)j||(ae=we),ae===void 0&&(ae=!1),m.addEventListener(S.toString(),F,ae);else if(m.attachEvent)m.attachEvent(Ye(S.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return I}function $e(){function m(I){return S.call(m.src,m.listener,I)}const S=Qe;return m}function Ze(m,S,I,F,ae){if(Array.isArray(S))for(var ue=0;ue<S.length;ue++)Ze(m,S[ue],I,F,ae);else F=u(F)?!!F.capture:!!F,I=dt(I),m&&m[Z]?(m=m.i,ue=String(S).toString(),ue in m.g&&(S=m.g[ue],I=ye(S,I,F,ae),I>-1&&(ee(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete m.g[ue],m.h--)))):m&&(m=ut(m))&&(S=m.g[S.toString()],m=-1,S&&(m=ye(S,I,F,ae)),(I=m>-1?S[m]:null)&&At(I))}function At(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Z])re(S.i,m);else{var I=m.type,F=m.proxy;S.removeEventListener?S.removeEventListener(I,F,m.capture):S.detachEvent?S.detachEvent(Ye(I),F):S.addListener&&S.removeListener&&S.removeListener(F),(I=ut(S))?(re(I,m),I.h==0&&(I.src=null,S[ke]=null)):ee(m)}}}function Ye(m){return m in je?je[m]:je[m]="on"+m}function Qe(m,S){if(m.da)m=!0;else{S=new G(S,this);const I=m.listener,F=m.ha||m.src;m.fa&&At(m),m=I.call(F,S)}return m}function ut(m){return m=m[ke],m instanceof ne?m:null}var lt="__closure_events_fn_"+(Math.random()*1e9>>>0);function dt(m){return typeof m=="function"?m:(m[lt]||(m[lt]=function(S){return m.handleEvent(S)}),m[lt])}function We(){k.call(this),this.i=new ne(this),this.M=this,this.G=null}y(We,k),We.prototype[Z]=!0,We.prototype.removeEventListener=function(m,S,I,F){Ze(this,m,S,I,F)};function pe(m,S){var I,F=m.G;if(F)for(I=[];F;F=F.G)I.push(F);if(m=m.M,F=S.type||S,typeof S=="string")S=new C(S,m);else if(S instanceof C)S.target=S.target||m;else{var ae=S;S=new C(F,m),te(S,ae)}ae=!0;let ue,we;if(I)for(we=I.length-1;we>=0;we--)ue=S.g=I[we],ae=Se(ue,F,!0,S)&&ae;if(ue=S.g=m,ae=Se(ue,F,!0,S)&&ae,ae=Se(ue,F,!1,S)&&ae,I)for(we=0;we<I.length;we++)ue=S.g=I[we],ae=Se(ue,F,!1,S)&&ae}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const I=m.g[S];for(let F=0;F<I.length;F++)ee(I[F]);delete m.g[S],m.h--}}this.G=null},We.prototype.J=function(m,S,I,F){return this.i.add(String(m),S,!1,I,F)},We.prototype.K=function(m,S,I,F){return this.i.add(String(m),S,!0,I,F)};function Se(m,S,I,F){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let ae=!0;for(let ue=0;ue<S.length;++ue){const we=S[ue];if(we&&!we.da&&we.capture==I){const Ge=we.listener,Qt=we.ha||we.src;we.fa&&re(m.i,we),ae=Ge.call(Qt,F)!==!1&&ae}}return ae&&!F.defaultPrevented}function He(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:l.setTimeout(m,S||0)}function Le(m){m.g=He(()=>{m.g=null,m.i&&(m.i=!1,Le(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Ee extends k{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function at(m){k.call(this),this.h=m,this.g={}}y(at,k);var _t=[];function Gn(m){Q(m.g,function(S,I){this.g.hasOwnProperty(I)&&At(S)},m),m.g={}}at.prototype.N=function(){at.Z.N.call(this),Gn(this)},at.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mt=l.JSON.stringify,Kn=l.JSON.parse,qt=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Pn(){}function Tn(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){C.call(this,"d")}y(kt,C);function tn(){C.call(this,"c")}y(tn,C);var Ot={},Zo=null;function ds(){return Zo=Zo||new We}Ot.Ia="serverreachability";function Ua(m){C.call(this,Ot.Ia,m)}y(Ua,C);function jn(m){const S=ds();pe(S,new Ua(S))}Ot.STAT_EVENT="statevent";function Js(m,S){C.call(this,Ot.STAT_EVENT,m),this.stat=S}y(Js,C);function vt(m){const S=ds();pe(S,new Js(S,m))}Ot.Ja="timingevent";function mn(m,S){C.call(this,Ot.Ja,m),this.size=S}y(mn,C);function Sn(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},S)}function An(){this.g=!0}An.prototype.ua=function(){this.g=!1};function el(m,S,I,F,ae,ue){m.info(function(){if(m.g)if(ue){var we="",Ge=ue.split("&");for(let gt=0;gt<Ge.length;gt++){var Qt=Ge[gt].split("=");if(Qt.length>1){const jt=Qt[0];Qt=Qt[1];const Or=jt.split("_");we=Or.length>=2&&Or[1]=="type"?we+(jt+"="+Qt+"&"):we+(jt+"=redacted&")}}}else we=null;else we=ue;return"XMLHTTP REQ ("+F+") [attempt "+ae+"]: "+S+`
`+I+`
`+we})}function Ir(m,S,I,F,ae,ue,we){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ae+"]: "+S+`
`+I+`
`+ue+" "+we})}function _n(m,S,I,F){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Cg(m,I)+(F?" "+F:"")})}function za(m,S){m.info(function(){return"TIMEOUT: "+S})}An.prototype.info=function(){};function Cg(m,S){if(!m.g)return S;if(!S)return null;try{const ue=JSON.parse(S);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var I=ue[m];if(!(I.length<2)){var F=I[1];if(Array.isArray(F)&&!(F.length<1)){var ae=F[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let we=1;we<F.length;we++)F[we]=""}}}}return mt(ue)}catch{return S}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dc;function Ba(){}y(Ba,Pn),Ba.prototype.g=function(){return new XMLHttpRequest},Dc=new Ba;function Zs(m){return encodeURIComponent(String(m))}function Xd(m){var S=1;m=m.split(":");const I=[];for(;S>0&&m.length;)I.push(m.shift()),S--;return m.length&&I.push(m.join(":")),I}function Yr(m,S,I,F){this.j=m,this.i=S,this.l=I,this.S=F||1,this.V=new at(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}var nn={},vn={};function hs(m,S,I){m.M=1,m.A=qa(sn(S)),m.u=I,m.R=!0,tl(m,null)}function tl(m,S){m.F=Date.now(),fs(m),m.B=sn(m.A);var I=m.B,F=m.S;Array.isArray(F)||(F=[String(F)]),il(I.i,"t",F),m.C=0,I=m.j.L,m.h=new Qr,m.g=hh(m.j,I?S:null,!m.u),m.P>0&&(m.O=new Ee(f(m.Y,m,m.g),m.P)),S=m.V,I=m.g,F=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(_t[0]=ae.toString()),ae=_t);for(let ue=0;ue<ae.length;ue++){const we=ve(I,ae[ue],F||S.handleEvent,!1,S.h||S);if(!we)break;S.g[we.key]=we}S=m.J?$(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),jn(),el(m.i,m.v,m.B,m.l,m.S,m.u)}Yr.prototype.ba=function(m){m=m.target;const S=this.O;S&&Jr(m)==3?S.j():this.Y(m)},Yr.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=Jr(this.g),Qt=this.g.ya(),gt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||kn(this.g)))){this.K||Ge!=4||Qt==7||(Qt==8||gt<=0?jn(3):jn(2)),ms(this);var S=this.g.ca();this.X=S;var I=Dg(this);if(this.o=S==200,Ir(this.i,this.v,this.B,this.l,this.S,Ge,S),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ae=this.g;if((F=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(F)){var ue=F;break t}}ue=null}if(m=ue)_n(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gs(this,m);else{this.o=!1,this.m=3,vt(12),hr(this),Nr(this);break e}}if(this.R){m=!0;let jt;for(;!this.K&&this.C<I.length;)if(jt=Zd(this,I),jt==vn){Ge==4&&(this.m=4,vt(14),m=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==nn){this.m=4,vt(15),_n(this.i,this.l,I,"[Invalid Chunk]"),m=!1;break}else _n(this.i,this.l,jt,null),gs(this,jt);if(Jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||I.length!=0||this.h.h||(this.m=1,vt(16),m=!1),this.o=this.o&&m,!m)_n(this.i,this.l,I,"[Invalid Chunked Response]"),hr(this),Nr(this);else if(I.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Kc(we),we.P=!0,vt(11))}}else _n(this.i,this.l,I,null),gs(this,I);Ge==4&&hr(this),this.o&&!this.K&&(Ge==4?lh(this.j,this):(this.o=!1,fs(this)))}else ti(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),hr(this),Nr(this)}}}catch{}finally{}};function Dg(m){if(!Jd(m))return m.g.la();const S=kn(m.g);if(S==="")return"";let I="";const F=S.length,ae=Jr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return hr(m),Nr(m),"";m.h.i=new l.TextDecoder}for(let ue=0;ue<F;ue++)m.h.h=!0,I+=m.h.i.decode(S[ue],{stream:!(ae&&ue==F-1)});return S.length=0,m.h.g+=I,m.C=0,m.h.g}function Jd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Zd(m,S){var I=m.C,F=S.indexOf(`
`,I);return F==-1?vn:(I=Number(S.substring(I,F)),isNaN(I)?nn:(F+=1,F+I>S.length?vn:(S=S.slice(F,F+I),m.C=F+I,S)))}Yr.prototype.cancel=function(){this.K=!0,hr(this)};function fs(m){m.T=Date.now()+m.H,nl(m,m.H)}function nl(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Sn(f(m.aa,m),S)}function ms(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Yr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(za(this.i,this.B),this.M!=2&&(jn(),vt(17)),hr(this),this.m=2,Nr(this)):nl(this,this.T-m)};function Nr(m){m.j.I==0||m.K||lh(m.j,m)}function hr(m){ms(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,Gn(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function gs(m,S){try{var I=m.j;if(I.I!=0&&(I.g==m||ys(I.h,m))){if(!m.L&&ys(I.h,m)&&I.I==3){try{var F=I.Ba.g.parse(S)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ae=F;if(ae[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<m.F)ul(I),Bi(I);else break e;Wa(I),vt(18)}}else I.xa=ae[1],0<I.xa-I.K&&ae[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Sn(f(I.Va,I),6e3));ps(I.h)<=1&&I.ta&&(I.ta=void 0)}else Es(I,11)}else if((m.L||I.g==m)&&ul(I),!D(S))for(ae=I.Ba.g.parse(S),S=0;S<ae.length;S++){let gt=ae[S];const jt=gt[0];if(!(jt<=I.K))if(I.K=jt,gt=gt[1],I.I==2)if(gt[0]=="c"){I.M=gt[1],I.ba=gt[2];const Or=gt[3];Or!=null&&(I.ka=Or,I.j.info("VER="+I.ka));const Ts=gt[4];Ts!=null&&(I.za=Ts,I.j.info("SVER="+I.za));const Zr=gt[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(F=1.5*Zr,I.O=F,I.j.info("backChannelRequestTimeoutMs_="+F)),F=I;const es=m.g;if(es){const Xa=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var ue=F.h;ue.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Pc(ue,ue.h),ue.h=null))}if(F.G){const dl=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(F.wa=dl,bt(F.J,F.G,dl))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-m.F,I.j.info("Handshake RTT: "+I.T+"ms")),F=I;var we=m;if(F.na=dh(F,F.L?F.ba:null,F.W),we.L){jc(F.h,we);var Ge=we,Qt=F.O;Qt&&(Ge.H=Qt),Ge.D&&(ms(Ge),fs(Ge)),F.g=we}else ah(F);I.i.length>0&&xs(I)}else gt[0]!="stop"&&gt[0]!="close"||Es(I,7);else I.I==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Es(I,7):Hc(I):gt[0]!="noop"&&I.l&&I.l.qa(gt),I.A=0)}}jn(4)}catch{}}var rn=class{constructor(m,S){this.g=m,this.map=S}};function Oc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ps(m){return m.h?1:m.g?m.g.size:0}function ys(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Pc(m,S){m.g?m.g.add(S):m.h=S}function jc(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}Oc.prototype.cancel=function(){if(this.i=Lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Lc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const I of m.g.values())S=S.concat(I.G);return S}return w(m.i)}var eh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(m,S){if(m){m=m.split("&");for(let I=0;I<m.length;I++){const F=m[I].indexOf("=");let ae,ue=null;F>=0?(ae=m[I].substring(0,F),ue=m[I].substring(F+1)):ae=m[I],S(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function fr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof fr?(this.l=m.l,bn(this,m.j),this.o=m.o,this.g=m.g,Pi(this,m.u),this.h=m.h,Vc(this,sh(m.i)),this.m=m.m):m&&(S=String(m).match(eh))?(this.l=!1,bn(this,S[1]||"",!0),this.o=_s(S[2]||""),this.g=_s(S[3]||"",!0),Pi(this,S[4]),this.h=_s(S[5]||"",!0),Vc(this,S[6]||"",!0),this.m=_s(S[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}fr.prototype.toString=function(){const m=[];var S=this.j;S&&m.push($a(S,sl,!0),":");var I=this.g;return(I||S=="file")&&(m.push("//"),(S=this.o)&&m.push($a(S,sl,!0),"@"),m.push(Zs(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&m.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&m.push("/"),m.push($a(I,I.charAt(0)=="/"?Uc:th,!0))),(I=this.i.toString())&&m.push("?",I),(I=this.m)&&m.push("#",$a(I,nh)),m.join("")},fr.prototype.resolve=function(m){const S=sn(this);let I=!!m.j;I?bn(S,m.j):I=!!m.o,I?S.o=m.o:I=!!m.g,I?S.g=m.g:I=m.u!=null;var F=m.h;if(I)Pi(S,m.u);else if(I=!!m.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ae=S.h.lastIndexOf("/");ae!=-1&&(F=S.h.slice(0,ae+1)+F)}if(ae=F,ae==".."||ae==".")F="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){F=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let we=0;we<ae.length;){const Ge=ae[we++];Ge=="."?F&&we==ae.length&&ue.push(""):Ge==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),F&&we==ae.length&&ue.push("")):(ue.push(Ge),F=!0)}F=ue.join("/")}else F=ae}return I?S.h=F:I=m.i.toString()!=="",I?Vc(S,sh(m.i)):I=!!m.m,I&&(S.m=m.m),S};function sn(m){return new fr(m)}function bn(m,S,I){m.j=I?_s(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Pi(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function Vc(m,S,I){S instanceof Li?(m.i=S,al(m.i,m.l)):(I||(S=$a(S,ji)),m.i=new Li(S,m.l))}function bt(m,S,I){m.i.set(S,I)}function qa(m){return bt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function _s(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function $a(m,S,I){return typeof m=="string"?(m=encodeURI(m).replace(S,nr),I&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function nr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var sl=/[#\/\?@]/g,th=/[#\?:]/g,Uc=/[#\?]/g,ji=/[#\?@]/g,nh=/#/g;function Li(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function rr(m){m.g||(m.g=new Map,m.h=0,m.i&&rl(m.i,function(S,I){m.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=Li.prototype,n.add=function(m,S){rr(this),this.i=null,m=Vi(this,m);let I=this.g.get(m);return I||this.g.set(m,I=[]),I.push(S),this.h+=1,this};function rh(m,S){rr(m),S=Vi(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function zc(m,S){return rr(m),S=Vi(m,S),m.g.has(S)}n.forEach=function(m,S){rr(this),this.g.forEach(function(I,F){I.forEach(function(ae){m.call(S,ae,F,this)},this)},this)};function Fc(m,S){rr(m);let I=[];if(typeof S=="string")zc(m,S)&&(I=I.concat(m.g.get(Vi(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)I=I.concat(m[S]);return I}n.set=function(m,S){return rr(this),this.i=null,m=Vi(this,m),zc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=Fc(this,m),m.length>0?String(m[0]):S):S};function il(m,S,I){rh(m,S),I.length>0&&(m.i=null,m.g.set(Vi(m,S),w(I)),m.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let F=0;F<S.length;F++){var I=S[F];const ae=Zs(I);I=Fc(this,I);for(let ue=0;ue<I.length;ue++){let we=ae;I[ue]!==""&&(we+="="+Zs(I[ue])),m.push(we)}}return this.i=m.join("&")};function sh(m){const S=new Li;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Vi(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function al(m,S){S&&!m.j&&(rr(m),m.i=null,m.g.forEach(function(I,F){const ae=F.toLowerCase();F!=ae&&(rh(this,F),il(this,ae,I))},m)),m.j=S}function Wr(m,S){const I=new An;if(l.Image){const F=new Image;F.onload=g(Cr,I,"TestLoadImage: loaded",!0,S,F),F.onerror=g(Cr,I,"TestLoadImage: error",!1,S,F),F.onabort=g(Cr,I,"TestLoadImage: abort",!1,S,F),F.ontimeout=g(Cr,I,"TestLoadImage: timeout",!1,S,F),l.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else S(!1)}function Bc(m,S){const I=new An,F=new AbortController,ae=setTimeout(()=>{F.abort(),Cr(I,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:F.signal}).then(ue=>{clearTimeout(ae),ue.ok?Cr(I,"TestPingServer: ok",!0,S):Cr(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ae),Cr(I,"TestPingServer: error",!1,S)})}function Cr(m,S,I,F,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),F(I)}catch{}}function Ui(){this.g=new qt}function vs(m){this.i=m.Sb||null,this.h=m.ab||!1}y(vs,Pn),vs.prototype.g=function(){return new Ha(this.i,this.h)};function Ha(m,S){We.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ha,We),n=Ha.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,Xr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||l).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?zi(this):Xr(this),this.readyState==3&&ol(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,zi(this))},n.Na=function(m){this.g&&(this.response=m,zi(this))},n.ga=function(){this.g&&zi(this)};function zi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Xr(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,m.push(I[0]+": "+I[1]),I=S.next();return m.join(`\r
`)};function Xr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Dr(m){let S="";return Q(m,function(I,F){S+=F,S+=":",S+=I,S+=`\r
`}),S}function Ga(m,S,I){e:{for(F in I){var F=!1;break e}F=!0}F||(I=Dr(I),typeof m=="string"?I!=null&&Zs(I):bt(m,S,I))}function Rt(m){We.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Rt,We);var bs=/^https?$/i,qc=["POST","PUT"];n=Rt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,I,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ue){Ka(this,ue);return}if(m=I||"",I=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ae in F)I.set(ae,F[ae]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ue of F.keys())I.set(ue,F.get(ue));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(I.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(qc,S,void 0)>=0)||F||ae||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,we]of I)this.g.setRequestHeader(ue,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){Ka(this,ue)}};function Ka(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,$c(m),ei(m)}function $c(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),ei(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),Rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},n.Xa=function(){Ya(this)};function Ya(m){if(m.h&&typeof o<"u"){if(m.v&&Jr(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),Jr(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var F;if(F=ue===0){let we=String(m.D).match(eh)[1]||null;!we&&l.self&&l.self.location&&(we=l.self.location.protocol.slice(0,-1)),F=!bs.test(we?we.toLowerCase():"")}I=F}if(I)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=Jr(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",$c(m)}}finally{ei(m)}}}}function ei(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const I=m.g;m.g=null,S||pe(m,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Kn(S)}};function kn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ti(m){const S={};m=(m.g&&Jr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(D(m[F]))continue;var I=Xd(m[F]);const ae=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ue=S[ae]||[];S[ae]=ue,ue.push(I)}X(S,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(m,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[m]||S}function Fi(m){this.za=0,this.i=[],this.j=new An,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ws("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ws("baseRetryDelayMs",5e3,m),this.Za=ws("retryDelaySeedMs",1e4,m),this.Ta=ws("forwardChannelMaxRetries",2,m),this.va=ws("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Oc(m&&m.concurrentRequestLimit),this.Ba=new Ui,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fi.prototype,n.ka=8,n.I=1,n.connect=function(m,S,I,F){vt(0),this.W=m,this.H=S||{},I&&F!==void 0&&(this.H.OSID=I,this.H.OAID=F),this.F=this.X,this.J=dh(this,null,this.W),xs(this)};function Hc(m){if(ll(m),m.I==3){var S=m.V++,I=sn(m.J);if(bt(I,"SID",m.M),bt(I,"RID",S),bt(I,"TYPE","terminate"),Qa(m,I),S=new Yr(m,m.j,S),S.M=2,S.A=qa(sn(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&l.Image&&(new Image().src=S.A,I=!0),I||(S.g=hh(S.j,null),S.g.ea(S.A)),S.F=Date.now(),fs(S)}uh(m)}function Bi(m){m.g&&(Kc(m),m.g.cancel(),m.g=null)}function ll(m){Bi(m),m.v&&(l.clearTimeout(m.v),m.v=null),ul(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function xs(m){if(!Mc(m.h)&&!m.m){m.m=!0;var S=m.Ea;Y||E(),V||(Y(),V=!0),R.add(S,m),m.D=0}}function cl(m,S){return ps(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Sn(f(m.Ea,m,S),ch(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Yr(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=$(ue),te(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var F=this.i[I];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(S+=F,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=ih(this,ae,S),I=sn(this.J),bt(I,"RID",m),bt(I,"CVER",22),this.G&&bt(I,"X-HTTP-Session-Id",this.G),Qa(this,I),ue&&(this.R?S="headers="+Zs(Dr(ue))+"&"+S:this.u&&Ga(I,this.u,ue)),Pc(this.h,ae),this.Ra&&bt(I,"TYPE","init"),this.S?(bt(I,"$req",S),bt(I,"SID","null"),ae.U=!0,hs(ae,I,null)):hs(ae,I,S),this.I=2}}else this.I==3&&(m?Gc(this,m):this.i.length==0||Mc(this.h)||Gc(this))};function Gc(m,S){var I;S?I=S.l:I=m.V++;const F=sn(m.J);bt(F,"SID",m.M),bt(F,"RID",I),bt(F,"AID",m.K),Qa(m,F),m.u&&m.o&&Ga(F,m.u,m.o),I=new Yr(m,m.j,I,m.D+1),m.u===null&&(I.J=m.o),S&&(m.i=S.G.concat(m.i)),S=ih(m,I,1e3),I.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Pc(m.h,I),hs(I,F,S)}function Qa(m,S){m.H&&Q(m.H,function(I,F){bt(S,F,I)}),m.l&&Q({},function(I,F){bt(S,F,I)})}function ih(m,S,I){I=Math.min(m.i.length,I);const F=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Ge=-1;for(;;){const Qt=["count="+I];Ge==-1?I>0?(Ge=ae[0].g,Qt.push("ofs="+Ge)):Ge=0:Qt.push("ofs="+Ge);let gt=!0;for(let jt=0;jt<I;jt++){var ue=ae[jt].g;const Or=ae[jt].map;if(ue-=Ge,ue<0)Ge=Math.max(0,ae[jt].g-100),gt=!1;else try{ue="req"+ue+"_"||"";try{var we=Or instanceof Map?Or:Object.entries(Or);for(const[Ts,Zr]of we){let es=Zr;u(Zr)&&(es=mt(Zr)),Qt.push(ue+Ts+"="+encodeURIComponent(es))}}catch(Ts){throw Qt.push(ue+"type="+encodeURIComponent("_badmap")),Ts}}catch{F&&F(Or)}}if(gt){we=Qt.join("&");break e}}we=void 0}return m=m.i.splice(0,I),S.G=m,we}function ah(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;Y||E(),V||(Y(),V=!0),R.add(S,m),m.A=0}}function Wa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Sn(f(m.Da,m),ch(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,oh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Sn(f(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),Bi(this),oh(this))};function Kc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function oh(m){m.g=new Yr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=sn(m.na);bt(S,"RID","rpc"),bt(S,"SID",m.M),bt(S,"AID",m.K),bt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&bt(S,"TO",m.ia),bt(S,"TYPE","xmlhttp"),Qa(m,S),m.u&&m.o&&Ga(S,m.u,m.o),m.O&&(m.g.H=m.O);var I=m.g;m=m.ba,I.M=1,I.A=qa(sn(S)),I.u=null,I.R=!0,tl(I,m)}n.Va=function(){this.C!=null&&(this.C=null,Bi(this),Wa(this),vt(19))};function ul(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function lh(m,S){var I=null;if(m.g==S){ul(m),Kc(m),m.g=null;var F=2}else if(ys(m.h,S))I=S.G,jc(m.h,S),F=1;else return;if(m.I!=0){if(S.o)if(F==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var ae=m.D;F=ds(),pe(F,new mn(F,I)),xs(m)}else ah(m);else if(ae=S.m,ae==3||ae==0&&S.X>0||!(F==1&&cl(m,S)||F==2&&Wa(m)))switch(I&&I.length>0&&(S=m.h,S.i=S.i.concat(I)),ae){case 1:Es(m,5);break;case 4:Es(m,10);break;case 3:Es(m,6);break;default:Es(m,2)}}}function ch(m,S){let I=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(I*=2),I*S}function Es(m,S){if(m.j.info("Error code "+S),S==2){var I=f(m.bb,m),F=m.Ua;const ae=!F;F=new fr(F||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bn(F,"https"),qa(F),ae?Wr(F.toString(),I):Bc(F.toString(),I)}else vt(2);m.I=0,m.l&&m.l.pa(S),uh(m),ll(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function uh(m){if(m.I=0,m.ja=[],m.l){const S=Lc(m.h);(S.length!=0||m.i.length!=0)&&(x(m.ja,S),x(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function dh(m,S,I){var F=I instanceof fr?sn(I):new fr(I);if(F.g!="")S&&(F.g=S+"."+F.g),Pi(F,F.u);else{var ae=l.location;F=ae.protocol,S=S?S+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new fr(null);F&&bn(ue,F),S&&(ue.g=S),ae&&Pi(ue,ae),I&&(ue.h=I),F=ue}return I=m.G,S=m.wa,I&&S&&bt(F,I,S),bt(F,"VER",m.ka),Qa(m,F),F}function hh(m,S,I){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new Rt(new vs({ab:I})):new Rt(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}n=fh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qi(){}qi.prototype.g=function(m,S){return new Yn(m,S)};function Yn(m,S){We.call(this),this.g=new Fi(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!D(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new ni(this)}y(Yn,We),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Hc(this.g)},Yn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var I={};I.__data__=m,m=I}else this.v&&(I={},I.__data__=mt(m),m=I);S.i.push(new rn(S.Ya++,m)),S.I==3&&xs(S)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Hc(this.g),delete this.g,Yn.Z.N.call(this)};function mh(m){kt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const I in S){m=I;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}y(mh,kt);function gh(){tn.call(this),this.status=1}y(gh,tn);function ni(m){this.g=m}y(ni,fh),ni.prototype.ra=function(){pe(this.g,"a")},ni.prototype.qa=function(m){pe(this.g,new mh(m))},ni.prototype.pa=function(m){pe(this.g,new gh)},ni.prototype.oa=function(){pe(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,F2=function(){return new qi},z2=function(){return ds()},U2=Ot,_0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,Uf=Fa,Cc.COMPLETE="complete",V2=Cc,Tn.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",We.prototype.listen=We.prototype.J,Fu=Tn,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,L2=Rt}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});const Zx="@firebase/firestore",eE="4.9.2";let Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");let kc="12.3.0";const Mo=new n_("@firebase/firestore");function Xl(){return Mo.logLevel}function _e(n,...e){if(Mo.logLevel<=st.DEBUG){const t=e.map(f_);Mo.debug(`Firestore (${kc}): ${n}`,...t)}}function Xn(n,...e){if(Mo.logLevel<=st.ERROR){const t=e.map(f_);Mo.error(`Firestore (${kc}): ${n}`,...t)}}function Po(n,...e){if(Mo.logLevel<=st.WARN){const t=e.map(f_);Mo.warn(`Firestore (${kc}): ${n}`,...t)}}function f_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,B2(n,r,t)}function B2(n,e,t){let r=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xn(r),new Error(r)}function Ce(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||B2(e,i,r)}function Be(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class q2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class t3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class n3{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zs,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zs)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new q2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class r3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new r3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const r=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function a3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=a3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function v0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Hy(i)===Hy(o)?Fe(i,o):Hy(i)?1:-1}return Fe(n.length,e.length)}const o3=55296,l3=57343;function Hy(n){const e=n.charCodeAt(0);return e>=o3&&e<=l3}function dc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function $2(n){return n+"\0"}const nE="__name__";class Is{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Is.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Fe(e.length,t.length)}static compareSegments(e,t){const r=Is.isNumericId(e),i=Is.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Is.extractNumericId(e).compare(Is.extractNumericId(t)):v0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class yt extends Is{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const c3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Is{construct(e,t,r){return new Ft(e,t,r)}static isValidIdentifier(e){return c3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nE}static keyField(){return new Ft([nE])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new be(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(o(),i++)}if(o(),l)throw new be(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(yt.fromString(e))}static fromName(e){return new xe(yt.fromString(e).popFirst(5))}static empty(){return new xe(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new yt(e.slice()))}}function H2(n,e,t){if(!t)throw new be(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u3(n,e,t,r){if(e===!0&&r===!0)throw new be(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rE(n){if(!xe.isDocumentKey(n))throw new be(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sE(n){if(xe.isDocumentKey(n))throw new be(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function G2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xm(n);throw new be(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d3(n,e){if(e<=0)throw new be(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ld(n,e){if(!G2(n))throw new be(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new be(he.INVALID_ARGUMENT,t);return!0}const iE=-62135596800,aE=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*aE);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iE)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ld(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:hn("string",Et._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Et(0,0))}static max(){return new Me(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cd=-1;class mm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function b0(n){return n.fields.find((e=>e.kind===2))}function po(n){return n.fields.filter((e=>e.kind!==2))}mm.UNKNOWN_ID=-1;class zf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ud{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ud(0,Sr.min())}}function h3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new Sr(i,xe.empty(),e)}function K2(n){return new Sr(n.readTime,n.key,cd)}class Sr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sr(Me.min(),xe.empty(),cd)}static max(){return new Sr(Me.max(),xe.empty(),cd)}}function g_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qo(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Y2)throw n;_e("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let i=0,o=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++o,l&&o===i&&t()}),(h=>r(h)))})),l=!0,o===i&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((i=>i?ie.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((g=>{l[f]=g,++u,u===o&&r(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new ie(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}const xr="SimpleDb";class Jm{static open(e,t,r,i){try{return new Jm(t,e.transaction(i,r))}catch(o){throw new Wu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Wu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=p_(r.target.error);this.S.reject(new Wu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(_e(xr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new m3(t)}}class Aa{static delete(e){return _e(xr,"Removing database:",e),_o(US().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!YS())return!1;if(Aa.F())return!0;const e=pn(),t=Aa.M(e),r=0<t&&t<10,i=W2(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Aa.M(pn())===12.2&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(_e(xr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new Wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new be(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new be(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Wu(e,l))},i.onupgradeneeded=o=>{_e(xr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{_e(xr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=Jm.open(this.db,e,o?"readonly":"readwrite",r),h=i(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),ie.reject(f)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,f=h.name!=="FirebaseError"&&l<3;if(_e(xr,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function W2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class f3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _o(this.U.delete())}}class Wu extends be{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(n){return n.name==="IndexedDbTransactionError"}class m3{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(_e(xr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(_e(xr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_o(r)}add(e){return _e(xr,"ADD",this.store.name,e,e),_o(this.store.add(e))}get(e){return _o(this.store.get(e)).next((t=>(t===void 0&&(t=null),_e(xr,"GET",this.store.name,e,t),t)))}delete(e){return _e(xr,"DELETE",this.store.name,e),_o(this.store.delete(e))}count(){return _e(xr,"COUNT",this.store.name),_o(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ie(((l,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{l(h.target.result)}}))}{const o=this.cursor(r),l=[];return this.H(o,((u,h)=>{l.push(h)})).next((()=>l))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ie(((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){_e(xr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((o,l,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ie(((r,i)=>{t.onerror=o=>{const l=p_(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():r()})):r()}}))}H(e,t){const r=[];return new ie(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void i();const h=new f3(u),f=t(u.primaryKey,u.value,h);if(f instanceof ie){const g=f.catch((y=>(h.done(),ie.reject(y))));r.push(g)}h.isDone?i():h.G===null?u.continue():u.continue(h.G)}})).next((()=>ie.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _o(n){return new ie(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=p_(r.target.error);t(i)}}))}let oE=!1;function p_(n){const e=Aa.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oE||(oE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Xu="IndexBackfiller";class g3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){_e(Xu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();_e(Xu,`Documents written: ${t}`)}catch(t){Pa(t)?_e(Xu,"Ignoring IndexedDB error during index backfill: ",t):await Qo(t)}await this.re(6e4)}))}}class p3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,o=!0;return ie.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return _e(Xu,`Processing collection: ${l}`),this.oe(e,l,i).next((u=>{i-=u,r.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((u=>(_e(Xu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,o)=>{const l=K2(o);g_(l,r)>0&&(r=l)})),new Sr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class qr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qr.ce=-1;const So=-1;function Zm(n){return n==null}function dd(n){return n===0&&1/n==-1/0}function y3(n){return typeof n=="number"&&Number.isInteger(n)&&!dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const gm="";function $n(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lE(e)),e=_3(n.get(t),e);return lE(e)}function _3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case gm:t+="";break;default:t+=o}}return t}function lE(n){return n+gm+""}function Ps(n){const e=n.length;if(Ce(e>=2,64408,{path:n}),e===2)return Ce(n.charAt(0)===gm&&n.charAt(1)==="",56145,{path:n}),yt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf(gm,o);switch((l<0||l>t)&&Ie(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(o,l);let h;i.length===0?h=u:(i+=u,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:Ie(61167,{path:n})}o=l+2}return new yt(r)}const yo="remoteDocuments",Vd="owner",Bl="owner",hd="mutationQueues",v3="userId",is="mutations",cE="batchId",Eo="userMutationsIndex",uE=["userId","batchId"];function Ff(n,e){return[n,$n(e)]}function X2(n,e,t){return[n,$n(e),t]}const b3={},hc="documentMutations",pm="remoteDocumentsV14",w3=["prefixPath","collectionGroup","readTime","documentId"],Bf="documentKeyIndex",x3=["prefixPath","collectionGroup","documentId"],J2="collectionGroupIndex",E3=["collectionGroup","readTime","prefixPath","documentId"],fd="remoteDocumentGlobal",w0="remoteDocumentGlobalKey",fc="targets",Z2="queryTargetsIndex",T3=["canonicalId","targetId"],mc="targetDocuments",S3=["targetId","path"],y_="documentTargetsIndex",A3=["path","targetId"],ym="targetGlobalKey",Ao="targetGlobal",md="collectionParents",k3=["collectionId","parent"],gc="clientMetadata",R3="clientId",eg="bundles",I3="bundleId",tg="namedQueries",N3="name",__="indexConfiguration",C3="indexId",x0="collectionGroupIndex",D3="collectionGroup",Ju="indexState",O3=["indexId","uid"],eA="sequenceNumberIndex",M3=["uid","sequenceNumber"],Zu="indexEntries",P3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tA="documentKeyIndex",j3=["indexId","uid","orderedDocumentKey"],ng="documentOverlays",L3=["userId","collectionPath","documentId"],E0="collectionPathOverlayIndex",V3=["userId","collectionPath","largestBatchId"],nA="collectionGroupOverlayIndex",U3=["userId","collectionGroup","largestBatchId"],v_="globals",z3="name",rA=[hd,is,hc,yo,fc,Vd,Ao,mc,gc,fd,md,eg,tg],F3=[...rA,ng],sA=[hd,is,hc,pm,fc,Vd,Ao,mc,gc,fd,md,eg,tg,ng],iA=sA,b_=[...iA,__,Ju,Zu],B3=b_,aA=[...b_,v_],q3=aA;class T0 extends Q2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function yn(n,e){const t=Be(n);return Aa.O(t.le,e)}function dE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ja(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??On.RED,this.left=i??On.EMPTY,this.right=o??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new On(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class St{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hE(this.data.getIterator())}getIteratorFrom(e){return new hE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class hE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ql(n){return n.hasNext()?n.getNext():void 0}class ur{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new ur([])}unionWith(e){let t=new St(Ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class lA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lA("Invalid base64 string: "+o):o}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const $3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(n){if(Ce(!!n,39018),typeof n=="string"){let e=0;const t=$3.exec(n);if(Ce(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ii(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}const cA="server_timestamp",uA="__type__",dA="__previous_value__",hA="__local_write_time__";function w_(n){return(n?.mapValue?.fields||{})[uA]?.stringValue===cA}function rg(n){const e=n.mapValue.fields[dA];return w_(e)?rg(e):e}function gd(n){const e=Ri(n.mapValue.fields[hA].timestampValue);return new Et(e.seconds,e.nanos)}class H3{constructor(e,t,r,i,o,l,u,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const _m="(default)";class jo{constructor(e,t){this.projectId=e,this.database=t||_m}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database===_m}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}const x_="__type__",fA="__max__",xa={mapValue:{fields:{__type__:{stringValue:fA}}}},E_="__vector__",pc="value",qf={nullValue:"NULL_VALUE"};function Na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?w_(n)?4:mA(n)?9007199254740991:sg(n)?10:11:Ie(28295,{value:n})}function $s(n,e){if(n===e)return!0;const t=Na(n);if(t!==Na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gd(n).isEqual(gd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ri(i.timestampValue),u=Ri(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Ii(i.bytesValue).isEqual(Ii(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Vt(i.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Vt(i.integerValue)===Vt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Vt(i.doubleValue),u=Vt(o.doubleValue);return l===u?dd(l)===dd(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return dc(n.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(dE(l)!==dE(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!$s(l[h],u[h])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function pd(n,e){return(n.values||[]).find((t=>$s(t,e)))!==void 0}function Ca(n,e){if(n===e)return 0;const t=Na(n),r=Na(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Vt(o.integerValue||o.doubleValue),h=Vt(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return fE(n.timestampValue,e.timestampValue);case 4:return fE(gd(n),gd(e));case 5:return v0(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=Ii(o),h=Ii(l);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),h=l.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=Fe(u[f],h[f]);if(g!==0)return g}return Fe(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Fe(Vt(o.latitude),Vt(l.latitude));return u!==0?u:Fe(Vt(o.longitude),Vt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},h=l.fields||{},f=u[pc]?.arrayValue,g=h[pc]?.arrayValue,y=Fe(f?.values?.length||0,g?.values?.length||0);return y!==0?y:mE(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===xa.mapValue&&l===xa.mapValue)return 0;if(o===xa.mapValue)return 1;if(l===xa.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=l.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=v0(h[y],g[y]);if(v!==0)return v;const w=Ca(u[h[y]],f[g[y]]);if(w!==0)return w}return Fe(h.length,g.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function fE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Ri(n),r=Ri(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function mE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ca(t[i],r[i]);if(o)return o}return Fe(t.length,r.length)}function yc(n){return S0(n)}function S0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ri(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ii(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=S0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${S0(t.fields[l])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function $f(n){switch(Na(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rg(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return Ii(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+$f(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ja(r.fields,((o,l)=>{i+=o.length+$f(l)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function yd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function A0(n){return!!n&&"integerValue"in n}function _d(n){return!!n&&"arrayValue"in n}function gE(n){return!!n&&"nullValue"in n}function pE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hf(n){return!!n&&"mapValue"in n}function sg(n){return(n?.mapValue?.fields||{})[x_]?.stringValue===E_}function ed(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ja(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ed(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ed(n.arrayValue.values[t]);return e}return{...n}}function mA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fA}const gA={mapValue:{fields:{[x_]:{stringValue:E_},[pc]:{arrayValue:{}}}}};function G3(n){return"nullValue"in n?qf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yd(jo.empty(),xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?sg(n)?gA:{mapValue:{}}:Ie(35942,{value:n})}function K3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yd(jo.empty(),xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?gA:"mapValue"in n?sg(n)?{mapValue:{}}:xa:Ie(61959,{value:n})}function yE(n,e){const t=Ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _E(n,e){const t=Ca(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ed(t)}setAll(e){let t=Ft.emptyPath(),r={},i=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}l?r[u.lastSegment()]=ed(l):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ja(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new zn(ed(this.value))}}function pA(n){const e=[];return ja(n.fields,((t,r)=>{const i=new Ft([t]);if(Hf(r)){const o=pA(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new ur(e)}class Gt{constructor(e,t,r,i,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Gt(e,0,Me.min(),Me.min(),Me.min(),zn.empty(),0)}static newFoundDocument(e,t,r,i){return new Gt(e,1,t,Me.min(),r,i,0)}static newNoDocument(e,t){return new Gt(e,2,t,Me.min(),Me.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Me.min(),Me.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _c{constructor(e,t){this.position=e,this.inclusive=t}}function vE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=Ca(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$s(n.position[t],e.position[t]))return!1;return!0}class vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yA{}class it extends yA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Q3(e,t,r):t==="array-contains"?new J3(e,r):t==="in"?new EA(e,r):t==="not-in"?new Z3(e,r):t==="array-contains-any"?new eP(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new W3(e,r):new X3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&Na(this.value)===Na(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends yA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tt(e,t)}matches(e){return vc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vc(n){return n.op==="and"}function k0(n){return n.op==="or"}function T_(n){return _A(n)&&vc(n)}function _A(n){for(const e of n.filters)if(e instanceof Tt)return!1;return!0}function R0(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+yc(n.value);if(T_(n))return n.filters.map((e=>R0(e))).join(",");{const e=n.filters.map((t=>R0(t))).join(",");return`${n.op}(${e})`}}function vA(n,e){return n instanceof it?(function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&$s(r.value,i.value)})(n,e):n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,l,u)=>o&&vA(l,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function bA(n,e){const t=n.filters.concat(e);return Tt.create(t,n.op)}function wA(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${yc(t.value)}`})(n):n instanceof Tt?(function(t){return t.op.toString()+" {"+t.getFilters().map(wA).join(" ,")+"}"})(n):"Filter"}class Q3 extends it{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class W3 extends it{constructor(e,t){super(e,"in",t),this.keys=xA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class X3 extends it{constructor(e,t){super(e,"not-in",t),this.keys=xA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xA(n,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class J3 extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _d(t)&&pd(t.arrayValue,this.value)}}class EA extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pd(this.value.arrayValue,t)}}class Z3 extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pd(this.value.arrayValue,t)}}class eP extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_d(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>pd(this.value.arrayValue,r)))}}class tP{constructor(e,t=null,r=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function I0(n,e=null,t=[],r=[],i=null,o=null,l=null){return new tP(n,e,t,r,i,o,l)}function Lo(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>R0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Zm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>yc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>yc(r))).join(",")),e.Te=t}return e.Te}function Ud(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bE(n.startAt,e.startAt)&&bE(n.endAt,e.endAt)}function vm(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bm(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function wE(n,e,t){let r=qf,i=!0;for(const o of bm(n,e)){let l=qf,u=!0;switch(o.op){case"<":case"<=":l=G3(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=qf}yE({value:r,inclusive:i},{value:l,inclusive:u})<0&&(r=l,i=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];yE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function xE(n,e,t){let r=xa,i=!0;for(const o of bm(n,e)){let l=xa,u=!0;switch(o.op){case">=":case">":l=K3(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=xa}_E({value:r,inclusive:i},{value:l,inclusive:u})>0&&(r=l,i=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];_E({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}class Rc{constructor(e,t=null,r=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nP(n,e,t,r,i,o,l,u){return new Rc(n,e,t,r,i,o,l,u)}function zd(n){return new Rc(n)}function EE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TA(n){return n.collectionGroup!==null}function td(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new St(Ft.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new vd(o,r))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new vd(Ft.keyField(),r))}return e.Ie}function Hr(n){const e=Be(n);return e.Ee||(e.Ee=rP(e,td(n))),e.Ee}function rP(n,e){if(n.limitType==="F")return I0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new vd(i.field,o)}));const t=n.endAt?new _c(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _c(n.startAt.position,n.startAt.inclusive):null;return I0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function N0(n,e){const t=n.filters.concat([e]);return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wm(n,e,t){return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ig(n,e){return Ud(Hr(n),Hr(e))&&n.limitType===e.limitType}function SA(n){return`${Lo(Hr(n))}|lt:${n.limitType}`}function Jl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>wA(i))).join(", ")}]`),Zm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>yc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>yc(i))).join(",")),`Target(${r})`})(Hr(n))}; limitType=${n.limitType})`}function Fd(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of td(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,u,h){const f=vE(l,u,h);return l.inclusive?f<=0:f<0})(r.startAt,td(r),i)||r.endAt&&!(function(l,u,h){const f=vE(l,u,h);return l.inclusive?f>=0:f>0})(r.endAt,td(r),i))})(n,e)}function sP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AA(n){return(e,t)=>{let r=!1;for(const i of td(n)){const o=iP(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iP(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(o,l,u){const h=l.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Ca(h,f):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return oA(this.inner)}size(){return this.innerSize}}const aP=new zt(xe.comparator);function Tr(){return aP}const kA=new zt(xe.comparator);function Bu(...n){let e=kA;for(const t of n)e=e.insert(t.key,t);return e}function RA(n){let e=kA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function js(){return nd()}function IA(){return nd()}function nd(){return new Di((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oP=new zt(xe.comparator),lP=new St(xe.comparator);function Je(...n){let e=lP;for(const t of n)e=e.add(t);return e}const cP=new St(Fe);function uP(){return cP}function S_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function NA(n){return{integerValue:""+n}}function CA(n,e){return y3(e)?NA(e):S_(n,e)}class ag{constructor(){this._=void 0}}function dP(n,e,t){return n instanceof bc?(function(i,o){const l={fields:{[uA]:{stringValue:cA},[hA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&w_(o)&&(o=rg(o)),o&&(l.fields[dA]=o),{mapValue:l}})(t,e):n instanceof Vo?OA(n,e):n instanceof Uo?MA(n,e):(function(i,o){const l=DA(i,o),u=TE(l)+TE(i.Ae);return A0(l)&&A0(i.Ae)?NA(u):S_(i.serializer,u)})(n,e)}function hP(n,e,t){return n instanceof Vo?OA(n,e):n instanceof Uo?MA(n,e):t}function DA(n,e){return n instanceof wc?(function(r){return A0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class bc extends ag{}class Vo extends ag{constructor(e){super(),this.elements=e}}function OA(n,e){const t=PA(e);for(const r of n.elements)t.some((i=>$s(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Uo extends ag{constructor(e){super(),this.elements=e}}function MA(n,e){let t=PA(e);for(const r of n.elements)t=t.filter((i=>!$s(i,r)));return{arrayValue:{values:t}}}class wc extends ag{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function TE(n){return Vt(n.integerValue||n.doubleValue)}function PA(n){return _d(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Bd{constructor(e,t){this.field=e,this.transform=t}}function fP(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Vo&&i instanceof Vo||r instanceof Uo&&i instanceof Uo?dc(r.elements,i.elements,$s):r instanceof wc&&i instanceof wc?$s(r.Ae,i.Ae):r instanceof bc&&i instanceof bc})(n.transform,e.transform)}class mP{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class og{}function jA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lg(n.key,qn.none()):new Ic(n.key,n.data,qn.none());{const t=n.data,r=zn.empty();let i=new St(Ft.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Oi(n.key,r,new ur(i.toArray()),qn.none())}}function gP(n,e,t){n instanceof Ic?(function(i,o,l){const u=i.value.clone(),h=AE(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Oi?(function(i,o,l){if(!Gf(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=AE(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(LA(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function rd(n,e,t,r){return n instanceof Ic?(function(o,l,u,h){if(!Gf(o.precondition,l))return u;const f=o.value.clone(),g=kE(o.fieldTransforms,h,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Oi?(function(o,l,u,h){if(!Gf(o.precondition,l))return u;const f=kE(o.fieldTransforms,h,l),g=l.data;return g.setAll(LA(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,u){return Gf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function pP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=DA(r.transform,i||null);o!=null&&(t===null&&(t=zn.empty()),t.set(r.field,o))}return t||null}function SE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dc(r,i,((o,l)=>fP(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ic extends og{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oi extends og{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function AE(n,e,t){const r=new Map;Ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,u=e.data.field(o.field);r.set(o.field,hP(l,u,t[i]))}return r}function kE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,dP(o,l,e))}return r}class lg extends og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&gP(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IA();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=jA(l,u);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Me.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,((t,r)=>SE(t,r)))&&dc(this.baseMutations,e.baseMutations,((t,r)=>SE(t,r)))}}class k_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return oP})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new k_(e,t,r,i)}}class R_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yP{constructor(e,t){this.count=e,this.unchangedNames=t}}var un,ct;function _P(n){switch(n){case he.OK:return Ie(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function UA(n){if(n===void 0)return Xn("GRPC error has no .code"),he.UNKNOWN;switch(n){case un.OK:return he.OK;case un.CANCELLED:return he.CANCELLED;case un.UNKNOWN:return he.UNKNOWN;case un.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case un.INTERNAL:return he.INTERNAL;case un.UNAVAILABLE:return he.UNAVAILABLE;case un.UNAUTHENTICATED:return he.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case un.NOT_FOUND:return he.NOT_FOUND;case un.ALREADY_EXISTS:return he.ALREADY_EXISTS;case un.PERMISSION_DENIED:return he.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case un.ABORTED:return he.ABORTED;case un.OUT_OF_RANGE:return he.OUT_OF_RANGE;case un.UNIMPLEMENTED:return he.UNIMPLEMENTED;case un.DATA_LOSS:return he.DATA_LOSS;default:return Ie(39323,{code:n})}}(ct=un||(un={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";function vP(){return new TextEncoder}const bP=new Sa([4294967295,4294967295],0);function RE(n){const e=vP().encode(n),t=new j2;return t.update(e),new Uint8Array(t.digest())}function IE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sa([t,r],0),new Sa([i,o],0)]}class I_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qu(`Invalid padding: ${t}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sa.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Sa.fromNumber(r)));return i.compare(bP)===1&&(i=new Sa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=RE(e),[r,i]=IE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new I_(o,i,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=RE(e),[r,i]=IE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cg{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cg(Me.min(),i,new zt(Fe),Tr(),Je())}}class qd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qd(r,t,Je(),Je(),Je())}}class Kf{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class zA{constructor(e,t){this.targetId=e,this.Ce=t}}class FA{constructor(e,t,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class NE{constructor(){this.ve=0,this.Fe=CE(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:o})}})),new qd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=CE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tr(),this.Je=Sf(),this.He=Sf(),this.Ye=new zt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(vm(o))if(r===0){const l=new xe(o.path);this.et(t,l,Gt.newNoDocument(l,Me.min()))}else Ce(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=Ii(r).toUint8Array()}catch(h){if(h instanceof lA)return Po("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new I_(l,i,o)}catch(h){return Po(h instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&vm(u.target)){const h=new xe(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Gt.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new cg(e,t,this.Ye,this.je,r);return this.je=Tr(),this.Je=Sf(),this.He=Sf(),this.Ye=new zt(Fe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new NE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new zt(xe.comparator)}function CE(){return new zt(xe.comparator)}const xP={asc:"ASCENDING",desc:"DESCENDING"},EP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TP={and:"AND",or:"OR"};class SP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function C0(n,e){return n.useProto3Json||Zm(e)?e:{value:e}}function xc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AP(n,e){return xc(n,e.toTimestamp())}function Zn(n){return Ce(!!n,49232),Me.fromTimestamp((function(t){const r=Ri(t);return new Et(r.seconds,r.nanos)})(n))}function N_(n,e){return D0(n,e).canonicalString()}function D0(n,e){const t=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qA(n){const e=yt.fromString(n);return Ce(JA(e),10190,{key:e.toString()}),e}function xm(n,e){return N_(n.databaseId,e.path)}function ko(n,e){const t=qA(e);if(t.get(1)!==n.databaseId.projectId)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(GA(t))}function $A(n,e){return N_(n.databaseId,e)}function HA(n){const e=qA(n);return e.length===4?yt.emptyPath():GA(e)}function O0(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GA(n){return Ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function DE(n,e,t){return{name:xm(n,e),fields:t.value.mapValue.fields}}function kP(n,e,t){const r=ko(n,e.name),i=Zn(e.updateTime),o=e.createTime?Zn(e.createTime):Me.min(),l=new zn({mapValue:{fields:e.fields}}),u=Gt.newFoundDocument(r,i,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function RP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ie(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ce(g===void 0||typeof g=="string",58123),fn.fromBase64String(g||"")):(Ce(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),fn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const g=f.code===void 0?he.UNKNOWN:UA(f.code);return new be(g,f.message||"")})(l);t=new FA(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ko(n,r.document.name),o=Zn(r.document.updateTime),l=r.document.createTime?Zn(r.document.createTime):Me.min(),u=new zn({mapValue:{fields:r.document.fields}}),h=Gt.newFoundDocument(i,o,l,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new Kf(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ko(n,r.document),o=r.readTime?Zn(r.readTime):Me.min(),l=Gt.newNoDocument(i,o),u=r.removedTargetIds||[];t=new Kf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ko(n,r.document),o=r.removedTargetIds||[];t=new Kf([],o,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new yP(i,o),u=r.targetId;t=new zA(u,l)}}return t}function Em(n,e){let t;if(e instanceof Ic)t={update:DE(n,e.key,e.value)};else if(e instanceof lg)t={delete:xm(n,e.key)};else if(e instanceof Oi)t={update:DE(n,e.key,e.data),updateMask:MP(e.fieldMask)};else{if(!(e instanceof VA))return Ie(16599,{Vt:e.type});t={verify:xm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof bc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Vo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wc)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:AP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(n,e.precondition)),t}function M0(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?qn.updateTime(Zn(o.updateTime)):o.exists!==void 0?qn.exists(o.exists):qn.none()})(e.currentDocument):qn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,u){let h=null;if("setToServerValue"in u)Ce(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new bc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Vo(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Uo(g)}else"increment"in u?h=new wc(l,u.increment):Ie(16584,{proto:u});const f=Ft.fromServerFormat(u.fieldPath);return new Bd(f,h)})(n,i))):[];if(e.update){e.update.name;const i=ko(n,e.update.name),o=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const f=h.fieldPaths||[];return new ur(f.map((g=>Ft.fromServerFormat(g))))})(e.updateMask);return new Oi(i,o,l,t,r)}return new Ic(i,o,t,r)}if(e.delete){const i=ko(n,e.delete);return new lg(i,t)}if(e.verify){const i=ko(n,e.verify);return new VA(i,t)}return Ie(1463,{proto:e})}function IP(n,e){return n&&n.length>0?(Ce(e!==void 0,14353),n.map((t=>(function(i,o){let l=i.updateTime?Zn(i.updateTime):Zn(o);return l.isEqual(Me.min())&&(l=Zn(o)),new mP(l,i.transformResults||[])})(t,e)))):[]}function KA(n,e){return{documents:[$A(n,e.path)]}}function YA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$A(n,i);const o=(function(f){if(f.length!==0)return XA(Tt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Zl(v.field),direction:CP(v.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=C0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function QA(n){let e=HA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=WA(y);return v instanceof Tt&&T_(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((v=>(function(x){return new vd(ec(x.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Zm(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(y){const v=!!y.before,w=y.values||[];return new _c(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new _c(w,v)})(t.endAt)),nP(e,i,l,o,u,"F",h,f)}function NP(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ec(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ec(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ec(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ec(t.unaryFilter.field);return it.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(ec(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Tt.create(t.compositeFilter.filters.map((r=>WA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function CP(n){return xP[n]}function DP(n){return EP[n]}function OP(n){return TP[n]}function Zl(n){return{fieldPath:n.canonicalString()}}function ec(n){return Ft.fromServerFormat(n.fieldPath)}function XA(n){return n instanceof it?(function(t){if(t.op==="=="){if(pE(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NAN"}};if(gE(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pE(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NOT_NAN"}};if(gE(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(t.field),op:DP(t.op),value:t.value}}})(n):n instanceof Tt?(function(t){const r=t.getFilters().map((i=>XA(i)));return r.length===1?r[0]:{compositeFilter:{op:OP(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function MP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class wi{constructor(e,t,r,i,o=Me.min(),l=Me.min(),u=fn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZA{constructor(e){this.yt=e}}function PP(n,e){let t;if(e.document)t=kP(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=xe.fromSegments(e.noDocument.path),i=Fo(e.noDocument.readTime);t=Gt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=xe.fromSegments(e.unknownDocument.path),i=Fo(e.unknownDocument.version);t=Gt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const o=new Et(i[0],i[1]);return Me.fromTimestamp(o)})(e.readTime)),t}function OE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,l){return{name:xm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:xc(o,l.version.toTimestamp()),createTime:xc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zo(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:zo(e.version)}}return r}function Tm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fo(n){const e=new Et(n.seconds,n.nanoseconds);return Me.fromTimestamp(e)}function vo(n,e){const t=(e.baseMutations||[]).map((o=>M0(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>M0(n.yt,o))),i=Et.fromMillis(e.localWriteTimeMs);return new A_(e.batchId,i,t,r)}function $u(n){const e=Fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fo(n.lastLimboFreeSnapshotVersion):Me.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ce(l===1,1966,{count:l}),Hr(zd(HA(o.documents[0])))})(n.query):(function(o){return Hr(QA(o))})(n.query),new wi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,fn.fromBase64String(n.resumeToken))}function ek(n,e){const t=zo(e.snapshotVersion),r=zo(e.lastLimboFreeSnapshotVersion);let i;i=vm(e.target)?KA(n.yt,e.target):YA(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tk(n){const e=QA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wm(e,e.limit,"L"):e}function Gy(n,e){return new R_(e.largestBatchId,M0(n.yt,e.overlayMutation))}function ME(n,e){const t=e.path.lastSegment();return[n,$n(e.path.popLast()),t]}function PE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:zo(r.readTime),documentKey:$n(r.documentKey.path),largestBatchId:r.largestBatchId}}class jP{getBundleMetadata(e,t){return jE(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Fo(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return jE(e).put((function(i){return{bundleId:i.id,createTime:zo(Zn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return LE(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:tk(o.bundledQuery),readTime:Fo(o.readTime)}})(r)}))}saveNamedQuery(e,t){return LE(e).put((function(i){return{name:i.name,readTime:zo(Zn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function jE(n){return yn(n,eg)}function LE(n){return yn(n,tg)}class ug{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new ug(e,r)}getOverlay(e,t){return Mu(e).get(ME(this.userId,t)).next((r=>r?Gy(this.serializer,r):null))}getOverlays(e,t){const r=js();return ie.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((o,l)=>{const u=new R_(t,l);i.push(this.St(e,u))})),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add($n(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Mu(e).Z(E0,u))})),ie.waitFor(o)}getOverlaysForCollection(e,t,r){const i=js(),o=$n(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Mu(e).J(E0,l).next((u=>{for(const h of u){const f=Gy(this.serializer,h);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const o=js();let l;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mu(e).ee({index:nA,range:u},((h,f,g)=>{const y=Gy(this.serializer,f);o.size()<i||y.largestBatchId===l?(o.set(y.getKey(),y),l=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Mu(e).put((function(i,o,l){const[u,h,f]=ME(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Em(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Mu(n){return yn(n,ng)}class LP{bt(e){return yn(e,v_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?fn.fromUint8Array(r):fn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class bo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const r=Vt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),dd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ri(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ii(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?mA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=pc,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Vt(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),xe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}bo.Kt=new bo;const $l=255;function VP(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function VE(n){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const l=VP(255&r[o]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class UP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=VE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=VE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn($l),this.sn(255)}_n(){this.an($l),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===$l?(this.sn($l),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===$l?(this.an($l),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class FP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Pu{constructor(){this.cn=new UP,this.ln=new zP(this.cn),this.hn=new FP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class wo{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new wo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Yf(this.En),directionalValue:Yf(this.dn),orderedDocumentKey:Yf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function fa(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=UE(n.En,e.En),t!==0?t:(t=UE(n.dn,e.dn),t!==0?t:xe.comparator(n.In,e.In)))}function UE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Yf(n){return KS()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function zE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class FE{constructor(e){this.mn=new St(((t,r)=>Ft.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=b0(e);if(t!==void 0&&!this.wn(t))return!1;const r=po(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=r[o];if(!this.Sn(u,h)||!this.bn(this.fn[l++],h))return!1}++o}for(;o<r.length;++o){const u=r[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(Ft.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new zf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new zf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new zf(r.field,r.dir==="asc"?0:1)));return new mm(mm.UNKNOWN_ID,this.collectionId,t,ud.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function nk(n){if(Ce(n instanceof it||n instanceof Tt,20012),n instanceof it){if(n instanceof EA){const t=n.value.arrayValue?.values?.map((r=>it.create(n.field,"==",r)))||[];return Tt.create(t,"or")}return n}const e=n.filters.map((t=>nk(t)));return Tt.create(e,n.op)}function BP(n){if(n.getFilters().length===0)return[];const e=L0(nk(n));return Ce(rk(e),7391),P0(e)||j0(e)?[e]:e.getFilters()}function P0(n){return n instanceof it}function j0(n){return n instanceof Tt&&T_(n)}function rk(n){return P0(n)||j0(n)||(function(t){if(t instanceof Tt&&k0(t)){for(const r of t.getFilters())if(!P0(r)&&!j0(r))return!1;return!0}return!1})(n)}function L0(n){if(Ce(n instanceof it||n instanceof Tt,34018),n instanceof it)return n;if(n.filters.length===1)return L0(n.filters[0]);const e=n.filters.map((r=>L0(r)));let t=Tt.create(e,n.op);return t=Sm(t),rk(t)?t:(Ce(t instanceof Tt,64498),Ce(vc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((r,i)=>C_(r,i))))}function C_(n,e){let t;return Ce(n instanceof it||n instanceof Tt,38388),Ce(e instanceof it||e instanceof Tt,25473),t=n instanceof it?e instanceof it?(function(i,o){return Tt.create([i,o],"and")})(n,e):BE(n,e):e instanceof it?BE(e,n):(function(i,o){if(Ce(i.filters.length>0&&o.filters.length>0,48005),vc(i)&&vc(o))return bA(i,o.getFilters());const l=k0(i)?i:o,u=k0(i)?o:i,h=l.filters.map((f=>C_(f,u)));return Tt.create(h,"or")})(n,e),Sm(t)}function BE(n,e){if(vc(e))return bA(e,n.getFilters());{const t=e.filters.map((r=>C_(n,r)));return Tt.create(t,"or")}}function Sm(n){if(Ce(n instanceof it||n instanceof Tt,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return Sm(e[0]);if(_A(n))return n;const t=e.map((i=>Sm(i))),r=[];return t.forEach((i=>{i instanceof it?r.push(i):i instanceof Tt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Tt.create(r,n.op)}class qP{constructor(){this.Cn=new D_}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Sr.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class D_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new St(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(yt.comparator)).toArray()}}const qE="IndexedDbIndexManager",Af=new Uint8Array(0);class $P{constructor(e,t){this.databaseId=t,this.vn=new D_,this.Fn=new Di((r=>Lo(r)),((r,i)=>Ud(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:$n(i)};return $E(e).put(o)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$2(t),""],!1,!0);return $E(e).J(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ps(l.parent))}return r}))}addFieldIndex(e,t){const r=ju(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=Gl(e);return o.next((u=>{l.put(PE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=ju(e),i=Gl(e),o=Hl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ju(e),r=Hl(e),i=Gl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ie.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new FE(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=Hl(e);let i=!0;const o=new Map;return ie.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{i&&(i=!!u),o.set(l,u)})))).next((()=>{if(i){let l=Je();const u=[];return ie.forEach(o,((h,f)=>{_e(qE,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(h)} to execute ${Lo(t)}`);const g=(function(B,q){const Y=b0(q);if(Y===void 0)return null;for(const V of bm(B,Y.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null})(f,h),y=(function(B,q){const Y=new Map;for(const V of po(q))for(const R of bm(B,V.fieldPath))switch(R.op){case"==":case"in":Y.set(V.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Y.set(V.fieldPath.canonicalString(),R.value),Array.from(Y.values())}return null})(f,h),v=(function(B,q){const Y=[];let V=!0;for(const R of po(q)){const E=R.kind===0?wE(B,R.fieldPath,B.startAt):xE(B,R.fieldPath,B.startAt);Y.push(E.value),V&&(V=E.inclusive)}return new _c(Y,V)})(f,h),w=(function(B,q){const Y=[];let V=!0;for(const R of po(q)){const E=R.kind===0?xE(B,R.fieldPath,B.endAt):wE(B,R.fieldPath,B.endAt);Y.push(E.value),V&&(V=E.inclusive)}return new _c(Y,V)})(f,h),x=this.On(h,f,v),N=this.On(h,f,w),O=this.Nn(h,f,y),L=this.Bn(h.indexId,g,x,v.inclusive,N,w.inclusive,O);return ie.forEach(L,(H=>r.Y(H,t.limit).next((B=>{B.forEach((q=>{const Y=xe.fromSegments(q.documentKey);l.has(Y)||(l=l.add(Y),u.push(Y))}))}))))})).next((()=>u))}return ie.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=BP(Tt.create(e.filters,"and")).map((r=>I0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,l,u){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),f=h/(t!=null?t.length:1),g=[];for(let y=0;y<h;++y){const v=t?this.Ln(t[y/f]):Af,w=this.kn(e,v,r[y%f],i),x=this.qn(e,v,o[y%f],l),N=u.map((O=>this.kn(e,v,O,!0)));g.push(...this.createRange(w,x,N))}return g}kn(e,t,r,i){const o=new wo(e,xe.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new wo(e,xe.empty(),t,r);return i?o.An():o}xn(e,t){const r=new FE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const u of o)r.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ie.forEach(i,(o=>this.xn(e,o).next((l=>{l?r!==0&&l.fields.length<(function(h){let f=new St(Ft.comparator),g=!1;for(const y of h.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of h.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Pu;for(const i of po(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.Pn(i.kind);bo.Kt.Dt(o,l)}return r.un()}Ln(e){const t=new Pu;return bo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Pu;return bo.Kt.Dt(yd(this.databaseId,t),r.Pn((function(o){const l=po(o);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Pu);let o=0;for(const l of po(e)){const u=r[o++];for(const h of i)if(this.Un(t,l.fieldPath)&&_d(u))i=this.Kn(i,l,u);else{const f=h.Pn(l.kind);bo.Kt.Dt(u,f)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const u of i){const h=new Pu;h.seed(u.un()),bo.Kt.Dt(l,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=ju(e),i=Gl(e);return(t?r.J(x0,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const l=[];return ie.forEach(o,(u=>i.get([u.indexId,this.uid]).next((h=>{l.push((function(g,y){const v=y?new ud(y.sequenceNumber,new Sr(Fo(y.readTime),new xe(Ps(y.documentKey)),y.largestBatchId)):ud.empty(),w=g.fields.map((([x,N])=>new zf(Ft.fromServerFormat(x),N)));return new mm(g.indexId,g.collectionGroup,w,v)})(u,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Fe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=ju(e),o=Gl(e);return this.Gn(e).next((l=>i.J(x0,IDBKeyRange.bound(t,t)).next((u=>ie.forEach(u,(h=>o.put(PE(h.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,((i,o)=>{const l=r.get(i.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),ie.forEach(u,(h=>this.zn(e,i,h).next((f=>{const g=this.jn(o,h);return f.isEqual(g)?ie.resolve():this.Jn(e,o,h,f,g)})))))))}))}Hn(e,t,r,i){return Hl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Hl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Hl(e);let o=new St(fa);return i.ee({index:tA,range:IDBKeyRange.only([r.indexId,this.uid,Yf(this.$n(r,t))])},((l,u)=>{o=o.add(new wo(r.indexId,t,zE(u.arrayValue),zE(u.directionalValue)))})).next((()=>o))}jn(e,t){let r=new St(fa);const i=this.Qn(t,e);if(i==null)return r;const o=b0(t);if(o!=null){const l=e.data.field(o.fieldPath);if(_d(l))for(const u of l.arrayValue.values||[])r=r.add(new wo(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new wo(t.indexId,e.key,Af,i));return r}Jn(e,t,r,i,o){_e(qE,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,f,g,y,v){const w=h.getIterator(),x=f.getIterator();let N=ql(w),O=ql(x);for(;N||O;){let L=!1,H=!1;if(N&&O){const B=g(N,O);B<0?H=!0:B>0&&(L=!0)}else N!=null?H=!0:L=!0;L?(y(O),O=ql(x)):H?(v(N),N=ql(w)):(N=ql(w),O=ql(x))}})(i,o,fa,(u=>{l.push(this.Hn(e,t,r,u))}),(u=>{l.push(this.Yn(e,t,r,u))})),ie.waitFor(l)}Gn(e){let t=1;return Gl(e).ee({index:eA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,u)=>fa(l,u))).filter(((l,u,h)=>!u||fa(l,h[u-1])!==0));const i=[];i.push(e);for(const l of r){const u=fa(l,e),h=fa(l,t);if(u===0)i[0]=e.An();else if(u>0&&h<0)i.push(l),i.push(l.An());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const u=i[l].Vn(this.uid,Af,xe.empty()),h=i[l+1].Vn(this.uid,Af,xe.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return fa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HE)}getMinOffset(e,t){return ie.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(HE)}}function $E(n){return yn(n,md)}function Hl(n){return yn(n,Zu)}function ju(n){return yn(n,__)}function Gl(n){return yn(n,Ju)}function HE(n){Ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;g_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Sr(e.readTime,e.documentKey,t)}const GE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sk=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function ik(n,e,t){const r=n.store(is),i=n.store(hc),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const h=r.ee({range:l},((g,y,v)=>(u++,v.delete())));o.push(h.next((()=>{Ce(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=X2(e,g.key.path,t.batchId);o.push(i.delete(y)),f.push(g.key)}return ie.waitFor(o).next((()=>f))}function Am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(sk,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class dg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ce(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new dg(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).ee({index:Eo,range:r},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const o=tc(e),l=ma(e);return l.add({}).next((u=>{Ce(typeof u=="number",49019);const h=new A_(u,t,r,i),f=(function(w,x,N){const O=N.baseMutations.map((H=>Em(w.yt,H))),L=N.mutations.map((H=>Em(w.yt,H)));return{userId:x,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:L}})(this.serializer,this.userId,h),g=[];let y=new St(((v,w)=>Fe(v.canonicalString(),w.canonicalString())));for(const v of i){const w=X2(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(l.put(f)),g.push(o.put(w,b3))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),ie.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return ma(e).get(t).next((r=>r?(Ce(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),vo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ie.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ma(e).ee({index:Eo,range:i},((l,u,h)=>{u.userId===this.userId&&(Ce(u.batchId>=r,47524,{tr:r}),o=vo(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=So;return ma(e).ee({index:Eo,range:t,reverse:!0},((i,o,l)=>{r=o.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,So],[this.userId,Number.POSITIVE_INFINITY]);return ma(e).J(Eo,t).next((r=>r.map((i=>vo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ff(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return tc(e).ee({range:i},((l,u,h)=>{const[f,g,y]=l,v=Ps(g);if(f===this.userId&&t.path.isEqual(v))return ma(e).get(y).next((w=>{if(!w)throw Ie(61480,{nr:l,batchId:y});Ce(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(vo(this.serializer,w))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new St(Fe);const i=[];return t.forEach((o=>{const l=Ff(this.userId,o.path),u=IDBKeyRange.lowerBound(l),h=tc(e).ee({range:u},((f,g,y)=>{const[v,w,x]=f,N=Ps(w);v===this.userId&&o.path.isEqual(N)?r=r.add(x):y.done()}));i.push(h)})),ie.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Ff(this.userId,r),l=IDBKeyRange.lowerBound(o);let u=new St(Fe);return tc(e).ee({range:l},((h,f,g)=>{const[y,v,w]=h,x=Ps(v);y===this.userId&&r.isPrefixOf(x)?x.length===i&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((o=>{i.push(ma(e).get(o).next((l=>{if(l===null)throw Ie(35274,{batchId:o});Ce(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),r.push(vo(this.serializer,l))})))})),ie.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return ik(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return tc(e).ee({range:r},((o,l,u)=>{if(o[0]===this.userId){const h=Ps(o[1]);i.push(h)}else u.done()})).next((()=>{Ce(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return ak(e,this.userId,t)}_r(e){return ok(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:So,lastStreamToken:""}))}}function ak(n,e,t){const r=Ff(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return tc(n).ee({range:o,X:!0},((u,h,f)=>{const[g,y,v]=u;g===e&&y===i&&(l=!0),f.done()})).next((()=>l))}function ma(n){return yn(n,is)}function tc(n){return yn(n,hc)}function ok(n){return yn(n,hd)}class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}class HP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Bo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Me.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Kl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ce(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const o=[];return Kl(e).ee(((l,u)=>{const h=$u(u);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>ie.waitFor(o))).next((()=>i))}forEachTarget(e,t){return Kl(e).ee(((r,i)=>{const o=$u(i);t(o)}))}lr(e){return KE(e).get(ym).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return KE(e).put(ym,t)}Pr(e,t){return Kl(e).put(ek(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Lo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Kl(e).ee({range:i,index:Z2},((l,u,h)=>{const f=$u(u);Ud(t,f.target)&&(o=f,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const i=[],o=wa(e);return t.forEach((l=>{const u=$n(l.path);i.push(o.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,l))})),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=wa(e);return ie.forEach(t,(o=>{const l=$n(o.path);return ie.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=wa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wa(e);let o=Je();return i.ee({range:r,X:!0},((l,u,h)=>{const f=Ps(l[1]),g=new xe(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const r=$n(t.path),i=IDBKeyRange.bound([r],[$2(r)],!1,!0);let o=0;return wa(e).ee({index:y_,X:!0,range:i},(([l,u],h,f)=>{l!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Kl(e).get(t).next((r=>r?$u(r):null))}}function Kl(n){return yn(n,fc)}function KE(n){return yn(n,Ao)}function wa(n){return yn(n,mc)}const YE="LruGarbageCollector",GP=1048576;function QE([n,e],[t,r]){const i=Fe(n,t);return i===0?Fe(e,r):i}class KP{constructor(e){this.Ir=e,this.buffer=new St(QE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();QE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(YE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?_e(YE,"Ignoring IndexedDB error during garbage collection: ",t):await Qo(t)}await this.Vr(3e5)}))}}class YP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(qr.ce);const r=new KP(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(GE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Xl()<=st.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y}))))}}function ck(n,e){return new YP(n,e)}class QP{constructor(e,t){this.db=e,this.garbageCollector=ck(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return kf(e,r)}removeReference(e,t,r){return kf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return kf(e,t)}br(e,t){return(function(i,o){let l=!1;return ok(i).te((u=>ak(i,u,o).next((h=>(h&&(l=!0),ie.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const h=this.br(e,l).next((f=>{if(!f)return o++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Me.min()),wa(e).delete((function(y){return[0,$n(y.path)]})(l)))))}));i.push(h)}})).next((()=>ie.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return kf(e,t)}Sr(e,t){const r=wa(e);let i,o=qr.ce;return r.ee({index:y_},(([l,u],{path:h,sequenceNumber:f})=>{l===0?(o!==qr.ce&&t(new xe(Ps(i)),o),o=f,i=h):o=qr.ce})).next((()=>{o!==qr.ce&&t(new xe(Ps(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kf(n,e){return wa(n).put((function(r,i){return{targetId:0,path:$n(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class uk{constructor(){this.changes=new Di((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mo(e).put(r)}removeEntry(e,t,r){return mo(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Tm(l),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Gt.newInvalidDocument(t);return mo(e).ee({index:Bf,range:IDBKeyRange.only(Lu(t))},((i,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:Gt.newInvalidDocument(t)};return mo(e).ee({index:Bf,range:IDBKeyRange.only(Lu(t))},((i,o)=>{r={document:this.Cr(t,o),size:Am(o)}})).next((()=>r))}getEntries(e,t){let r=Tr();return this.Fr(e,t,((i,o)=>{const l=this.Cr(i,o);r=r.insert(i,l)})).next((()=>r))}Mr(e,t){let r=Tr(),i=new zt(xe.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);r=r.insert(o,u),i=i.insert(o,Am(l))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ie.resolve();let i=new St(JE);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(Lu(i.first()),Lu(i.last())),l=i.getIterator();let u=l.getNext();return mo(e).ee({index:Bf,range:o},((h,f,g)=>{const y=xe.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&JE(u,y)<0;)r(u,null),u=l.getNext();u&&u.isEqual(y)&&(r(u,f),u=l.hasNext()?l.getNext():null),u?g.j(Lu(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Tm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).J(IDBKeyRange.bound(u,h,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=Tr();for(const y of f){const v=this.Cr(xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Fd(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,r,i){let o=Tr();const l=XE(t,r),u=XE(t,Sr.max());return mo(e).ee({index:J2,range:IDBKeyRange.bound(l,u,!0)},((h,f,g)=>{const y=this.Cr(xe.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===i&&g.done()})).next((()=>o))}newChangeBuffer(e){return new XP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return WE(e).get(w0).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return WE(e).put(w0,t)}Cr(e,t){if(t){const r=PP(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Me.min())))return r}return Gt.newInvalidDocument(e)}}function dk(n){return new WP(n)}class XP extends uk{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Di((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new St(((o,l)=>Fe(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const h=OE(this.Nr.serializer,l);i=i.add(o.path.popLast());const f=Am(h);r+=f-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(r-=u.size,this.trackRemovals){const h=OE(this.Nr.serializer,l.convertToNoDocument(Me.min()));t.push(this.Nr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:r.get(o).readTime})})),r)))}}function WE(n){return yn(n,fd)}function mo(n){return yn(n,pm)}function Lu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XE(n,e){const t=e.documentKey.path.toArray();return[n,Tm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Fe(t[o],r[o]),i)return i;return i=Fe(t.length,r.length),i||(i=Fe(t[t.length-2],r[r.length-2]),i||Fe(t[t.length-1],r[r.length-1]))}class JP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&rd(r.mutation,i,ur.empty(),Et.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const i=js();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let l=Bu();return o.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=js();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,i){let o=Tr();const l=nd(),u=(function(){return nd()})();return t.forEach(((h,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Oi)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),rd(g.mutation,f,g.mutation.getFieldMask(),Et.now())):l.set(f.key,ur.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>u.set(f,new JP(g,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=nd();let i=new zt(((l,u)=>l-u)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||ur.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(i.get(u.batchId)||Je()).add(h);i=i.insert(u.batchId,y)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=IA();g.forEach((v=>{if(!o.has(v)){const w=jA(t.get(v),r.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return xe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(js());let u=cd,h=o;return l.next((f=>ie.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?ie.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{h=h.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Je()))).next((g=>({batchId:u,changes:RA(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let i=Bu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Bu();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(h=>{const f=(function(y,v){return new Rc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((g=>{g.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((l=>{o.forEach(((h,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Gt.newInvalidDocument(g)))}));let u=Bu();return l.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&rd(g.mutation,f,ur.empty(),Et.now()),Fd(t,f)&&(u=u.insert(h,f))})),u}))}}class ZP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:tk(i.bundledQuery),readTime:Zn(i.readTime)}})(t)),ie.resolve()}}class e6{constructor(){this.overlays=new zt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=js();return ie.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=js(),o=t.length+1,l=new xe(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new zt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=js(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=js(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=i)););return ie.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new R_(t,r));let o=this.qr.get(t);o===void 0&&(o=Je(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class t6{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class O_{constructor(){this.Qr=new St(xn.$r),this.Ur=new St(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new xe(new yt([])),r=new xn(t,e),i=new xn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new yt([])),r=new xn(t,e),i=new xn(t,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new xn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class n6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(xn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new A_(o,t,r,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new xn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?So:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),i=new xn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(l=>{const u=this.Xr(l.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new St(Fe);return t.forEach((i=>{const o=new xn(i,0),l=new xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const l=new xn(new xe(o),0);let u=new St(Fe);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Yr)),!0)}),l),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(i=>{const o=new xn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xn(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class r6{constructor(e){this.ri=e,this.docs=(function(){return new zt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=Tr();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gt.newInvalidDocument(i))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Tr();const l=t.path,u=new xe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||g_(K2(g),r)<=0||(i.has(g.key)||Fd(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new s6(this)}getSize(e){return ie.resolve(this.size)}}class s6 extends uk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class i6{constructor(e){this.persistence=e,this.si=new Di((t=>Lo(t)),Ud),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new O_,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ie.waitFor(o).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class M_{constructor(e,t){this.ui={},this.overlays={},this.ci=new qr(0),this.li=!1,this.li=!0,this.hi=new t6,this.referenceDelegate=e(this),this.Pi=new i6(this),this.indexManager=new qP,this.remoteDocumentCache=(function(i){return new r6(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ZA(t),this.Ii=new ZP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new n6(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new a6(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class a6 extends Q2{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new O_,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const i=xe.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class km{constructor(e,t){this.persistence=e,this.pi=new Di((r=>$n(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=ck(this,t)}static mi(e,t){return new km(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?ie.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((u=>{u||(r++,o.removeEntry(l,Me.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class o6{constructor(e){this.serializer=e}k(e,t,r,i){const o=new Jm("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore(Vd)})(e),(function(h){h.createObjectStore(hd,{keyPath:v3}),h.createObjectStore(is,{keyPath:cE,autoIncrement:!0}).createIndex(Eo,uE,{unique:!0}),h.createObjectStore(hc)})(e),ZE(e),(function(h){h.createObjectStore(yo)})(e));let l=ie.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore(mc),h.deleteObjectStore(fc),h.deleteObjectStore(Ao)})(e),ZE(e)),l=l.next((()=>(function(h){const f=h.store(Ao),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return f.put(ym,g)})(o)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(h,f){return f.store(is).J().next((y=>{h.deleteObjectStore(is),h.createObjectStore(is,{keyPath:cE,autoIncrement:!0}).createIndex(Eo,uE,{unique:!0});const v=f.store(is),w=y.map((x=>v.put(x)));return ie.waitFor(w)}))})(e,o)))),l=l.next((()=>{(function(h){h.createObjectStore(gc,{keyPath:R3})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.yi(o)))),r<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(fd)})(e),this.wi(o))))),r<7&&i>=7&&(l=l.next((()=>this.Si(o)))),r<8&&i>=8&&(l=l.next((()=>this.bi(e,o)))),r<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.Di(o)))),r<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(eg,{keyPath:I3})})(e),(function(h){h.createObjectStore(tg,{keyPath:N3})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(h){const f=h.createObjectStore(ng,{keyPath:L3});f.createIndex(E0,V3,{unique:!1}),f.createIndex(nA,U3,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(h){const f=h.createObjectStore(pm,{keyPath:w3});f.createIndex(Bf,x3),f.createIndex(J2,E3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(yo)))),r<14&&i>=14&&(l=l.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(__,{keyPath:C3,autoIncrement:!0}).createIndex(x0,D3,{unique:!1}),h.createObjectStore(Ju,{keyPath:O3}).createIndex(eA,M3,{unique:!1}),h.createObjectStore(Zu,{keyPath:P3}).createIndex(tA,j3,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(Ju).clear()})).next((()=>{t.objectStore(Zu).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(v_,{keyPath:z3})})(e)}))),r<18&&i>=18&&KS()&&(l=l.next((()=>{t.objectStore(Ju).clear()})).next((()=>{t.objectStore(Zu).clear()}))),l}wi(e){let t=0;return e.store(yo).ee(((r,i)=>{t+=Am(i)})).next((()=>{const r={byteSize:t};return e.store(fd).put(w0,r)}))}yi(e){const t=e.store(hd),r=e.store(is);return t.J().next((i=>ie.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,So],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Eo,l).next((u=>ie.forEach(u,(h=>{Ce(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=vo(this.serializer,h);return ik(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(mc),r=e.store(yo);return e.store(Ao).get(ym).next((i=>{const o=[];return r.ee(((l,u)=>{const h=new yt(l),f=(function(y){return[0,$n(y)]})(h);o.push(t.get(f).next((g=>g?ie.resolve():(y=>t.put({targetId:0,path:$n(y),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>ie.waitFor(o)))}))}bi(e,t){e.createObjectStore(md,{keyPath:k3});const r=t.store(md),i=new D_,o=l=>{if(i.add(l)){const u=l.lastSegment(),h=l.popLast();return r.put({collectionId:u,parent:$n(h)})}};return t.store(yo).ee({X:!0},((l,u)=>{const h=new yt(l);return o(h.popLast())})).next((()=>t.store(hc).ee({X:!0},(([l,u,h],f)=>{const g=Ps(u);return o(g.popLast())}))))}Di(e){const t=e.store(fc);return t.ee(((r,i)=>{const o=$u(i),l=ek(this.serializer,o);return t.put(l)}))}Ci(e,t){const r=t.store(yo),i=[];return r.ee(((o,l)=>{const u=t.store(pm),h=(function(y){return y.document?new xe(yt.fromString(y.document.name).popFirst(5)):y.noDocument?xe.fromSegments(y.noDocument.path):y.unknownDocument?xe.fromSegments(y.unknownDocument.path):Ie(36783)})(l).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(u.put(f))})).next((()=>ie.waitFor(i)))}Fi(e,t){const r=t.store(is),i=dk(this.serializer),o=new M_(hg.mi,this.serializer.yt);return r.J().next((l=>{const u=new Map;return l.forEach((h=>{let f=u.get(h.userId)??Je();vo(this.serializer,h).keys().forEach((g=>f=f.add(g))),u.set(h.userId,f)})),ie.forEach(u,((h,f)=>{const g=new Dn(f),y=ug.wt(this.serializer,g),v=o.getIndexManager(g),w=dg.wt(g,this.serializer,v,o.referenceDelegate);return new hk(i,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new T0(t,qr.ce),h).next()}))}))}}function ZE(n){n.createObjectStore(mc,{keyPath:S3}).createIndex(y_,A3,{unique:!0}),n.createObjectStore(fc,{keyPath:"targetId"}).createIndex(Z2,T3,{unique:!0}),n.createObjectStore(Ao)}const ga="IndexedDbPersistence",Ky=18e5,Yy=5e3,Qy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",l6="main";class P_{constructor(e,t,r,i,o,l,u,h,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=l,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!P_.v())throw new be(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QP(this,i),this.$i=t+l6,this.serializer=new ZA(h),this.Ui=new Aa(this.$i,this.Ni,new o6(this.serializer)),this.hi=new LP,this.Pi=new HP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dk(this.serializer),this.Ii=new jP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Xn(ga,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(he.FAILED_PRECONDITION,Qy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new qr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Pa(e))return _e(ga,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e(ga,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Vu(e).get(Bl).next((t=>ie.resolve(this.es(t))))}ts(e){return Rf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ky)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=yn(t,gc);return r.J().next((i=>{const o=this.ss(i,Ky),l=i.filter((u=>o.indexOf(u)===-1));return ie.forEach(l,(u=>r.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ie.resolve(!0):Vu(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new be(he.FAILED_PRECONDITION,Qy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rf(e).J().next((r=>this.ss(r,Yy).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&_e(ga,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Vd,gc],(e=>{const t=new T0(e,qr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Rf(e).J().next((t=>this.ss(t,Ky).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return dg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $P(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ug.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){_e(ga,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?q3:h===17?aA:h===16?B3:h===15?b_:h===14?iA:h===13?sA:h===12?F3:h===11?rA:void Ie(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,o,(u=>(l=new T0(u,this.ci?this.ci.next():qr.ce),t==="readwrite-primary"?this.Hi(l).next((h=>!!h||this.Yi(l))).next((h=>{if(!h)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new be(he.FAILED_PRECONDITION,Y2);return r(l)})).next((h=>this.Xi(l).next((()=>h)))):this.Is(l).next((()=>r(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Vu(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(he.FAILED_PRECONDITION,Qy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put(Bl,t)}static v(){return Aa.v()}Zi(e){const t=Vu(e);return t.get(Bl).next((r=>this.es(r)?(_e(ga,"Releasing primary lease."),t.delete(Bl)):ie.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Xn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;GS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return _e(ga,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Xn(ga,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(n){return yn(n,Vd)}function Rf(n){return yn(n,gc)}function c6(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class j_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Je(),i=Je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new j_(e,t.fromCache,r,i)}}class u6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GS()?8:W2(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new u6;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Xl()<=st.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Xl()<=st.DEBUG&&_e("QueryEngine","Query:",Jl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Xl()<=st.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):ie.resolve())}ys(e,t){if(EE(t))return ie.resolve(null);let r=Hr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=wm(t,null,"F"),r=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Je(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,u);return this.Cs(t,f,l,h.readTime)?this.ys(e,wm(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return EE(t)||i.isEqual(Me.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?ie.resolve(null):(Xl()<=st.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jl(t)),this.vs(e,l,t,h3(i,cd)).next((u=>u)))}))}Ds(e,t){let r=new St(AA(e));return t.forEach(((i,o)=>{Fd(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Xl()<=st.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Jl(t)),this.ps.getDocumentsMatchingQuery(e,t,Sr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const L_="LocalStore",d6=3e8;class h6{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new zt(Fe),this.xs=new Di((o=>Lo(o)),Ud),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mk(n,e,t,r){return new h6(n,e,t,r)}async function gk(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let h=Je();for(const f of i){l.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function f6(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,g){const y=f.batch,v=y.keys();let w=ie.resolve();return v.forEach((x=>{w=w.next((()=>g.getEntry(h,x))).next((N=>{const O=f.docVersions.get(x);Ce(O!==null,48541),N.version.compareTo(O)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Je();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function pk(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function m6(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=i.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(fn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(y,w),(function(N,O,L){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=d6?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let h=Tr(),f=Je();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(g6(o,l,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!r.isEqual(Me.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return ie.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function g6(n,e,t){let r=Je(),i=Je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=Tr();return t.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Me.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):_e(L_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{ks:l,qs:i}}))}function p6(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=So),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function y6(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,ie.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new wi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function V0(n,e,t){const r=Be(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Pa(l))throw l;_e(L_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function eT(n,e,t){const r=Be(n);let i=Me.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,g){const y=Be(h),v=y.xs.get(g);return v!==void 0?ie.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(r,l,Hr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Me.min(),t?o:Je()))).next((u=>(_6(r,sP(e),u),{documents:u,Qs:o})))))}function _6(n,e,t){let r=n.Os.get(e)||Me.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class tT{constructor(){this.activeTargetIds=uP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.Mo=new tT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class v6{Oo(e){}shutdown(){}}const nT="ConnectivityMonitor";class rT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(nT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(nT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let If=null;function U0(){return If===null?If=(function(){return 268435456+Math.round(2147483648*Math.random())})():If++,"0x"+If.toString(16)}const Wy="RestConnection",b6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_m?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=U0(),u=this.zo(e,t.toUriEncodedString());_e(Wy,`Sending RPC '${e}' ${l}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:f}=new URL(u),g=Go(f);return this.Jo(e,u,h,r,g).then((y=>(_e(Wy,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Po(Wy,`RPC '${e}' ${l} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=b6[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class x6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Vn="WebChannelConnection";class E6 extends w6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=U0();return new Promise(((u,h)=>{const f=new L2;f.setWithCredentials(!0),f.listenOnce(V2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Uf.NO_ERROR:const y=f.getResponseJson();_e(Vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case Uf.TIMEOUT:_e(Vn,`RPC '${e}' ${l} timed out`),h(new be(he.DEADLINE_EXCEEDED,"Request time out"));break;case Uf.HTTP_ERROR:const v=f.getStatus();if(_e(Vn,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w?.error;if(x&&x.status&&x.message){const N=(function(L){const H=L.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(H)>=0?H:he.UNKNOWN})(x.status);h(new be(N,x.message))}else h(new be(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(he.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Vn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);_e(Vn,`RPC '${e}' ${l} sending request:`,i),f.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=U0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=F2(),u=z2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");_e(Vn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const y=l.createWebChannel(g,h);this.I_(y);let v=!1,w=!1;const x=new x6({Yo:O=>{w?_e(Vn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(v||(_e(Vn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),_e(Vn,`RPC '${e}' stream ${i} sending:`,O),y.send(O))},Zo:()=>y.close()}),N=(O,L,H)=>{O.listen(L,(B=>{try{H(B)}catch(q){setTimeout((()=>{throw q}),0)}}))};return N(y,Fu.EventType.OPEN,(()=>{w||(_e(Vn,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),N(y,Fu.EventType.CLOSE,(()=>{w||(w=!0,_e(Vn,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(y))})),N(y,Fu.EventType.ERROR,(O=>{w||(w=!0,Po(Vn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),x.a_(new be(he.UNAVAILABLE,"The operation could not be completed")))})),N(y,Fu.EventType.MESSAGE,(O=>{if(!w){const L=O.data[0];Ce(!!L,16349);const H=L,B=H?.error||H[0]?.error;if(B){_e(Vn,`RPC '${e}' stream ${i} received error:`,B);const q=B.status;let Y=(function(E){const T=un[E];if(T!==void 0)return UA(T)})(q),V=B.message;Y===void 0&&(Y=he.INTERNAL,V="Unknown error status: "+q+" with message "+B.message),w=!0,x.a_(new be(Y,V)),y.close()}else _e(Vn,`RPC '${e}' stream ${i} received:`,L),x.u_(L)}})),N(u,U2.STAT_EVENT,(O=>{O.stat===_0.PROXY?_e(Vn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===_0.NOPROXY&&_e(Vn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function T6(){return typeof window<"u"?window:null}function Qf(){return typeof document<"u"?document:null}function fg(n){return new SP(n,!0)}class _k{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const sT="PersistentStream";class vk{constructor(e,t,r,i,o,l,u,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _k(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new be(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(sT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S6 extends vk{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RP(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Me.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Me.min():l.readTime?Zn(l.readTime):Me.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=O0(this.serializer),t.addTarget=(function(o,l){let u;const h=l.target;if(u=vm(h)?{documents:KA(o,h)}:{query:YA(o,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=BA(o,l.resumeToken);const f=C0(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Me.min())>0){u.readTime=xc(o,l.snapshotVersion.toTimestamp());const f=C0(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=NP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=O0(this.serializer),t.removeTarget=e,this.q_(t)}}class A6 extends vk{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IP(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=O0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Em(this.serializer,r)))};this.q_(t)}}class k6{}class R6 extends k6{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,D0(t,r),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(he.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,D0(t,r),i,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(he.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class I6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xn(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qo="RemoteStore";class N6{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Wo(this)&&(_e(qo,"Restarting streams for network reachability change."),await(async function(h){const f=Be(h);f.Ea.add(4),await $d(f),f.Ra.set("Unknown"),f.Ea.delete(4),await mg(f)})(this))}))})),this.Ra=new I6(r,i)}}async function mg(n){if(Wo(n))for(const e of n.da)await e(!0)}async function $d(n){for(const e of n.da)await e(!1)}function bk(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),F_(t)?z_(t):Nc(t).O_()&&U_(t,e))}function V_(n,e){const t=Be(n),r=Nc(t);t.Ia.delete(e),r.O_()&&wk(t,e),t.Ia.size===0&&(r.O_()?r.L_():Wo(t)&&t.Ra.set("Unknown"))}function U_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nc(n).Y_(e)}function wk(n,e){n.Va.Ue(e),Nc(n).Z_(e)}function z_(n){n.Va=new wP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Nc(n).start(),n.Ra.ua()}function F_(n){return Wo(n)&&!Nc(n).x_()&&n.Ia.size>0}function Wo(n){return Be(n).Ea.size===0}function xk(n){n.Va=void 0}async function C6(n){n.Ra.set("Online")}async function D6(n){n.Ia.forEach(((e,t)=>{U_(n,e)}))}async function O6(n,e){xk(n),F_(n)?(n.Ra.ha(e),z_(n)):n.Ra.set("Unknown")}async function M6(n,e,t){if(n.Ra.set("Online"),e instanceof FA&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){_e(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rm(n,r)}else if(e instanceof Kf?n.Va.Ze(e):e instanceof zA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const r=await pk(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(fn.EMPTY_BYTE_STRING,g.snapshotVersion)),wk(o,h);const y=new wi(g.target,h,f,g.sequenceNumber);U_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){_e(qo,"Failed to raise snapshot:",r),await Rm(n,r)}}async function Rm(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await $d(n),n.Ra.set("Offline"),t||(t=()=>pk(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{_e(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mg(n)}))}function Ek(n,e){return e().catch((t=>Rm(n,t,e)))}async function Hd(n){const e=Be(n),t=Da(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:So;for(;P6(e);)try{const i=await p6(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,j6(e,i)}catch(i){await Rm(e,i)}Tk(e)&&Sk(e)}function P6(n){return Wo(n)&&n.Ta.length<10}function j6(n,e){n.Ta.push(e);const t=Da(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Tk(n){return Wo(n)&&!Da(n).x_()&&n.Ta.length>0}function Sk(n){Da(n).start()}async function L6(n){Da(n).ra()}async function V6(n){const e=Da(n);for(const t of n.Ta)e.ea(t.mutations)}async function U6(n,e,t){const r=n.Ta.shift(),i=k_.from(r,e,t);await Ek(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Hd(n)}async function z6(n,e){e&&Da(n).X_&&await(async function(r,i){if((function(l){return _P(l)&&l!==he.ABORTED})(i.code)){const o=r.Ta.shift();Da(r).B_(),await Ek(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Hd(r)}})(n,e),Tk(n)&&Sk(n)}async function iT(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),_e(qo,"RemoteStore received new credentials");const r=Wo(t);t.Ea.add(3),await $d(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mg(t)}async function F6(n,e){const t=Be(n);e?(t.Ea.delete(2),await mg(t)):e||(t.Ea.add(2),await $d(t),t.Ra.set("Unknown"))}function Nc(n){return n.ma||(n.ma=(function(t,r,i){const o=Be(t);return o.sa(),new S6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:C6.bind(null,n),t_:D6.bind(null,n),r_:O6.bind(null,n),H_:M6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),F_(n)?z_(n):n.Ra.set("Unknown")):(await n.ma.stop(),xk(n))}))),n.ma}function Da(n){return n.fa||(n.fa=(function(t,r,i){const o=Be(t);return o.sa(),new A6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:L6.bind(null,n),r_:z6.bind(null,n),ta:V6.bind(null,n),na:U6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Hd(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class B_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,u=new B_(e,t,l,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q_(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),Pa(n))return new be(he.UNAVAILABLE,`${e}: ${n}`);throw n}class oc{static emptySet(e){return new oc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=Bu(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aT{constructor(){this.ga=new zt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ec{constructor(e,t,r,i,o,l,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Ec(e,t,oc.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class B6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class q6{constructor(){this.queries=oT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Be(t),o=i.queries;i.queries=oT(),o.forEach(((l,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new be(he.ABORTED,"Firestore shutting down"))}}function oT(){return new Di((n=>SA(n)),ig)}async function $_(n,e){const t=Be(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new B6,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=q_(l,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&G_(t)}async function H_(n,e){const t=Be(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $6(n,e){const t=Be(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(i)&&(r=!0);l.wa=i}}r&&G_(t)}function H6(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function G_(n){n.Ca.forEach((e=>{e.next()}))}var z0,lT;(lT=z0||(z0={})).Ma="default",lT.Cache="cache";class K_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==z0.Cache}}class Ak{constructor(e){this.key=e}}class kk{constructor(e){this.key=e}}class G6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=AA(e),this.tu=new oc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new aT,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,y)=>{const v=i.get(g),w=Fd(this.query,y)?y:null,x=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?x!==N&&(r.track({type:3,doc:w}),O=!0):this.su(v,w)||(r.track({type:2,doc:w}),O=!0,(h&&this.eu(w,h)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(r.track({type:0,doc:w}),O=!0):v&&!w&&(r.track({type:1,doc:v}),O=!0,(h||f)&&(u=!0)),O&&(w?(l=l.add(w),o=N?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,y)=>(function(w,x){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:O})}};return N(w)-N(x)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new Ec(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new kk(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Ak(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Y_="SyncEngine";class K6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Y6{constructor(e){this.key=e,this.hu=!1}}class Q6{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Di((u=>SA(u)),ig),this.Iu=new Map,this.Eu=new Set,this.du=new zt(xe.comparator),this.Au=new Map,this.Ru=new O_,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W6(n,e,t=!0){const r=Ok(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Rk(r,e,t,!0),i}async function X6(n,e){const t=Ok(n);await Rk(t,e,!0,!1)}async function Rk(n,e,t,r){const i=await y6(n.localStore,Hr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await J6(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&bk(n.remoteStore,i),u}async function J6(n,e,t,r,i){n.pu=(y,v,w)=>(async function(N,O,L,H){let B=O.view.ru(L);B.Cs&&(B=await eT(N.localStore,O.query,!1).then((({documents:R})=>O.view.ru(R,B))));const q=H&&H.targetChanges.get(O.targetId),Y=H&&H.targetMismatches.get(O.targetId)!=null,V=O.view.applyChanges(B,N.isPrimaryClient,q,Y);return uT(N,O.targetId,V.au),V.snapshot})(n,y,v,w);const o=await eT(n.localStore,e,!0),l=new G6(e,o.Qs),u=l.ru(o.documents),h=qd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=l.applyChanges(u,n.isPrimaryClient,h);uT(n,t,f.au);const g=new K6(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function Z6(n,e,t){const r=Be(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((l=>!ig(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await V0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&V_(r.remoteStore,i.targetId),F0(r,i.targetId)})).catch(Qo)):(F0(r,i.targetId),await V0(r.localStore,i.targetId,!0))}async function ej(n,e){const t=Be(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),V_(t.remoteStore,r.targetId))}async function tj(n,e,t){const r=Mk(n);try{const i=await(function(l,u){const h=Be(l),f=Et.now(),g=u.reduce(((w,x)=>w.add(x.key)),Je());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let x=Tr(),N=Je();return h.Ns.getEntries(w,g).next((O=>{x=O,x.forEach(((L,H)=>{H.isValidDocument()||(N=N.add(L))}))})).next((()=>h.localDocuments.getOverlayedDocuments(w,x))).next((O=>{y=O;const L=[];for(const H of u){const B=pP(H,y.get(H.key).overlayedDocument);B!=null&&L.push(new Oi(H.key,B,pA(B.value.mapValue),qn.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,L,u)})).next((O=>{v=O;const L=O.applyToLocalDocumentSet(y,N);return h.documentOverlayCache.saveOverlays(w,O.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:RA(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,u,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new zt(Fe)),f=f.insert(u,h),l.Vu[l.currentUser.toKey()]=f})(r,i.batchId,t),await Gd(r,i.changes),await Hd(r.remoteStore)}catch(i){const o=q_(i,"Failed to persist write");t.reject(o)}}async function Ik(n,e){const t=Be(n);try{const r=await m6(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ce(l.hu,14607):i.removedDocuments.size>0&&(Ce(l.hu,42227),l.hu=!1))})),await Gd(t,r,e)}catch(r){await Qo(r)}}function cT(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const h=Be(l);h.onlineState=u;let f=!1;h.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&G_(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nj(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new zt(xe.comparator);l=l.insert(o,Gt.newNoDocument(o,Me.min()));const u=Je().add(o),h=new cg(Me.min(),new Map,new zt(Fe),l,u);await Ik(r,h),r.du=r.du.remove(o),r.Au.delete(e),Q_(r)}else await V0(r.localStore,e,!1).then((()=>F0(r,e,t))).catch(Qo)}async function rj(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await f6(t.localStore,e);Ck(t,r,null),Nk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gd(t,i)}catch(i){await Qo(i)}}async function sj(n,e,t){const r=Be(n);try{const i=await(function(l,u){const h=Be(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ce(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);Ck(r,e,t),Nk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gd(r,i)}catch(i){await Qo(i)}}function Nk(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ck(n,e,t){const r=Be(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function F0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Dk(n,r)}))}function Dk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(V_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Q_(n))}function uT(n,e,t){for(const r of t)r instanceof Ak?(n.Ru.addReference(r.key,e),ij(n,r)):r instanceof kk?(_e(Y_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Dk(n,r.key)):Ie(19791,{wu:r})}function ij(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(_e(Y_,"New document in limbo: "+t),n.Eu.add(r),Q_(n))}function Q_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(yt.fromString(e)),r=n.fu.next();n.Au.set(r,new Y6(t)),n.du=n.du.insert(t,r),bk(n.remoteStore,new wi(Hr(zd(t.path)),r,"TargetPurposeLimboResolution",qr.ce))}}async function Gd(n,e,t){const r=Be(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{l.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){i.push(f);const g=j_.As(h.targetId,f);o.push(g)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(h,f){const g=Be(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ie.forEach(f,(v=>ie.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>ie.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Pa(y))throw y;_e(L_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),x=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(x);g.Ms=g.Ms.insert(v,N)}}})(r.localStore,o))}async function aj(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){_e(Y_,"User change. New user:",e.toKey());const r=await gk(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new be(he.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gd(t,r.Ls)}}function oj(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const u=t.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function Ok(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ik.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nj.bind(null,e),e.Pu.H_=$6.bind(null,e.eventManager),e.Pu.yu=H6.bind(null,e.eventManager),e}function Mk(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sj.bind(null,e),e}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mk(this.persistence,new fk,e.initialUser,this.serializer)}Cu(e){return new M_(hg.mi,this.serializer)}Du(e){return new yk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class lj extends bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof km,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new M_((r=>km.mi(r,t)),this.serializer)}}class cj extends bd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Mk(this.xu.syncEngine),await Hd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return mk(this.persistence,new fk,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new lk(r,e.asyncQueue,t)}Mu(e,t){const r=new p3(t,this.persistence);return new g3(e.asyncQueue,r)}Cu(e){const t=c6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new P_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,T6(),Qf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new yk}}class Im{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aj.bind(null,this.syncEngine),await F6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new q6})()}createDatastore(e){const t=fg(e.databaseInfo.databaseId),r=(function(o){return new E6(o)})(e.databaseInfo);return(function(o,l,u,h){return new R6(o,l,u,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,l,u){return new N6(r,i,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>cT(this.syncEngine,t,0)),(function(){return rT.v()?new rT:new v6})())}createSyncEngine(e,t){return(function(i,o,l,u,h,f,g){const y=new Q6(i,o,l,u,h,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);_e(qo,"RemoteStore shutting down."),r.Ea.add(5),await $d(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Im.provider={build:()=>new Im};class W_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Oa="FirestoreClient";class uj{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{_e(Oa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(_e(Oa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=q_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xy(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await gk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dj(n);_e(Oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>iT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>iT(e.remoteStore,i))),n._onlineComponents=e}async function dj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Oa,"Using user provided OfflineComponentProvider");try{await Xy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Xy(n,new bd)}}else _e(Oa,"Using default OfflineComponentProvider"),await Xy(n,new lj(void 0));return n._offlineComponents}async function Pk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Oa,"Using user provided OnlineComponentProvider"),await dT(n,n._uninitializedComponentsProvider._online)):(_e(Oa,"Using default OnlineComponentProvider"),await dT(n,new Im))),n._onlineComponents}function hj(n){return Pk(n).then((e=>e.syncEngine))}async function Nm(n){const e=await Pk(n),t=e.eventManager;return t.onListen=W6.bind(null,e.syncEngine),t.onUnlisten=Z6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=X6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ej.bind(null,e.syncEngine),t}function fj(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,f){const g=new W_({next:v=>{g.Nu(),l.enqueueAndForget((()=>H_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(he.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new be(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new K_(zd(u.path),g,{includeMetadataChanges:!0,qa:!0});return $_(o,y)})(await Nm(n),n.asyncQueue,e,t,r))),r.promise}function mj(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,f){const g=new W_({next:v=>{g.Nu(),l.enqueueAndForget((()=>H_(o,y))),v.fromCache&&h.source==="server"?f.reject(new be(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new K_(u,g,{includeMetadataChanges:!0,qa:!0});return $_(o,y)})(await Nm(n),n.asyncQueue,e,t,r))),r.promise}function jk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const hT=new Map;const Lk="firestore.googleapis.com",fT=!0;class mT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lk,this.ssl=fT}else this.host=e.host,this.ssl=e.ssl??fT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GP)throw new be(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(he.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new e3;switch(r.type){case"firstParty":return new s3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=hT.get(t);r&&(_e("ComponentProvider","Removing Datastore"),hT.delete(t),r.terminate())})(this),Promise.resolve()}}function gj(n,e,t,r={}){n=Jn(n,gg);const i=Go(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(e_(`https://${u}`),t_("Firestore",!0)),o.host!==Lk&&o.host!==u&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:r};if(!Si(h,l)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Dn.MOCK_USER;else{f=$S(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new be(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Dn(y)}n._authCredentials=new t3(new q2(f,g))}}class Mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ld(t,Kt._jsonSchema))return new Kt(e,r||null,new xe(yt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:hn("string",Kt._jsonSchemaVersion),referencePath:hn("string")};class ka extends Mi{constructor(e,t,r){super(e,t,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new xe(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=en(n),H2("collection","path",e),n instanceof gg){const r=yt.fromString(e,...t);return sE(r),new ka(n,null,r)}{if(!(n instanceof Kt||n instanceof ka))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return sE(r),new ka(n.firestore,null,r)}}function Ue(n,e,...t){if(n=en(n),arguments.length===1&&(e=m_.newId()),H2("doc","path",e),n instanceof gg){const r=yt.fromString(e,...t);return rE(r),new Kt(n,null,new xe(r))}{if(!(n instanceof Kt||n instanceof ka))throw new be(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return rE(r),new Kt(n.firestore,n instanceof ka?n.converter:null,new xe(r))}}const gT="AsyncQueue";class pT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _k(this,"async_queue_retry"),this._c=()=>{const r=Qf();r&&_e(gT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Qf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;_e(gT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Xn("INTERNAL UNHANDLED ERROR: ",yT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=B_.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:yT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function _T(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Hs extends gg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pT(e),this._firestoreClient=void 0,await e}}}function pj(n,e){const t=typeof n=="object"?n:s_(),r=typeof n=="string"?n:_m,i=Km(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=FS("firestore");o&&gj(i,...o)}return i}function pg(n){if(n._terminated)throw new be(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Vk(n),n._firestoreClient}function Vk(n){const e=n._freezeSettings(),t=(function(i,o,l,u){return new H3(i,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,jk(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new uj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}function yj(n,e){Po("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return _j(n,Im.provider,{build:r=>new cj(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function _j(n,e,t){if((n=Jn(n,Hs))._firestoreClient||n._terminated)throw new be(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new be(he.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Vk(n)}class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(fn.fromBase64String(e))}catch(t){throw new be(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Br(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ld(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:hn("string",Br._jsonSchemaVersion),bytes:hn("string")};class yg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xo{constructor(e){this._methodName=e}}class Fs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(e){if(Ld(e,Fs._jsonSchema))return new Fs(e.latitude,e.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:hn("string",Fs._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};class Bs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ld(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bs(e.vectorValues);throw new be(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:hn("string",Bs._jsonSchemaVersion),vectorValues:hn("object")};const vj=/^__.*__$/;class bj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}}class Uk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class _g{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zk(this.Ac)&&vj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fg(e)}Cc(e,t,r,i=!1){return new _g({Ac:e,methodName:t,Dc:r,path:Ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vg(n){const e=n._freezeSettings(),t=fg(n._databaseId);return new wj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fk(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);tv("Data must be an object, but it was:",l,r);const u=qk(r,l);let h,f;if(o.merge)h=new ur(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=B0(e,y,t);if(!l.contains(v))throw new be(he.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Hk(g,v)||g.push(v)}h=new ur(g),f=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=l.fieldTransforms;return new bj(new zn(u),h,f)}class bg extends Xo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bg}}function Bk(n,e,t){return new _g({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class X_ extends Xo{_toFieldTransform(e){return new Bd(e.path,new bc)}isEqual(e){return e instanceof X_}}class J_ extends Xo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Bk(this,e,!0),r=this.vc.map((o=>Jo(o,t))),i=new Vo(r);return new Bd(e.path,i)}isEqual(e){return e instanceof J_&&Si(this.vc,e.vc)}}class Z_ extends Xo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Bk(this,e,!0),r=this.vc.map((o=>Jo(o,t))),i=new Uo(r);return new Bd(e.path,i)}isEqual(e){return e instanceof Z_&&Si(this.vc,e.vc)}}class ev extends Xo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new wc(e.serializer,CA(e.serializer,this.Fc));return new Bd(e.path,t)}isEqual(e){return e instanceof ev&&this.Fc===e.Fc}}function xj(n,e,t,r){const i=n.Cc(1,e,t);tv("Data must be an object, but it was:",i,r);const o=[],l=zn.empty();ja(r,((h,f)=>{const g=nv(e,h,t);f=en(f);const y=i.yc(g);if(f instanceof bg)o.push(g);else{const v=Jo(f,y);v!=null&&(o.push(g),l.set(g,v))}}));const u=new ur(o);return new Uk(l,u,i.fieldTransforms)}function Ej(n,e,t,r,i,o){const l=n.Cc(1,e,t),u=[B0(e,r,t)],h=[i];if(o.length%2!=0)throw new be(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(B0(e,o[v])),h.push(o[v+1]);const f=[],g=zn.empty();for(let v=u.length-1;v>=0;--v)if(!Hk(f,u[v])){const w=u[v];let x=h[v];x=en(x);const N=l.yc(w);if(x instanceof bg)f.push(w);else{const O=Jo(x,N);O!=null&&(f.push(w),g.set(w,O))}}const y=new ur(f);return new Uk(g,y,l.fieldTransforms)}function Tj(n,e,t,r=!1){return Jo(t,n.Cc(r?4:3,e))}function Jo(n,e){if($k(n=en(n)))return tv("Unsupported field value:",e,n),qk(n,e);if(n instanceof Xo)return(function(r,i){if(!zk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let l=0;for(const u of r){let h=Jo(u,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Et.fromDate(r);return{timestampValue:xc(i.serializer,o)}}if(r instanceof Et){const o=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xc(i.serializer,o)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:BA(i.serializer,r._byteString)};if(r instanceof Kt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:N_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bs)return(function(l,u){return{mapValue:{fields:{[x_]:{stringValue:E_},[pc]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return S_(u.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Xm(r)}`)})(n,e)}function qk(n,e){const t={};return oA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(n,((r,i)=>{const o=Jo(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function $k(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Fs||n instanceof Br||n instanceof Kt||n instanceof Xo||n instanceof Bs)}function tv(n,e,t){if(!$k(t)||!G2(t)){const r=Xm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function B0(n,e,t){if((e=en(e))instanceof yg)return e._internalPath;if(typeof e=="string")return nv(n,e);throw Cm("Field path arguments must be of type string or ",n,!1,void 0,t)}const Sj=new RegExp("[~\\*/\\[\\]]");function nv(n,e,t){if(e.search(Sj)>=0)throw Cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yg(...e.split("."))._internalPath}catch{throw Cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cm(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new be(he.INVALID_ARGUMENT,u+n+h)}function Hk(n,e){return n.some((t=>t.isEqual(e)))}class Gk{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Aj extends Gk{data(){return super.data()}}function wg(n,e){return typeof e=="string"?nv(n,e):e instanceof yg?e._internalPath:e._delegate._internalPath}function Kk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rv{}class sv extends rv{}function Ar(n,e,...t){let r=[];e instanceof rv&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((h=>h instanceof iv)).length,u=o.filter((h=>h instanceof xg)).length;if(l>1||l>0&&u>0)throw new be(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class xg extends sv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xg(e,t,r)}_apply(e){const t=this._parse(e);return Yk(e._query,t),new Mi(e.firestore,e.converter,N0(e._query,t))}_parse(e){const t=vg(e.firestore);return(function(o,l,u,h,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bT(y,g);const x=[];for(const N of y)x.push(vT(h,o,N));v={arrayValue:{values:x}}}else v=vT(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bT(y,g),v=Tj(u,l,y,g==="in"||g==="not-in");return it.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function La(n,e,t){const r=e,i=wg("where",n);return xg._create(i,r,t)}class iv extends rv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)Yk(l,h),l=N0(l,h)})(e._query,t),new Mi(e.firestore,e.converter,N0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class av extends sv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new av(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new be(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(o,l)})(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,(function(i,o){const l=i.explicitOrderBy.concat([o]);return new Rc(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Eg(n,e="asc"){const t=e,r=wg("orderBy",n);return av._create(r,t)}class ov extends sv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ov(e,t,r)}_apply(e){return new Mi(e.firestore,e.converter,wm(e._query,this._limit,this._limitType))}}function Dm(n){return d3("limit",n),ov._create("limit",n,"F")}function vT(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new be(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TA(e)&&t.indexOf("/")!==-1)throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yt.fromString(t));if(!xe.isDocumentKey(r))throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yd(n,new xe(r))}if(t instanceof Kt)return yd(n,t._key);throw new be(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xm(t)}.`)}function bT(n,e){if(!Array.isArray(n)||n.length===0)throw new be(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yk(n,e){const t=(function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class kj{convertValue(e,t="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ja(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[pc].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new Bs(t)}convertGeoPoint(e){return new Fs(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const t=Ri(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);Ce(JA(r),9688,{name:e});const i=new jo(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return i.isEqual(t)||Xn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Qk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends Gk{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ro._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:hn("string",Ro._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Wf extends Ro{data(e={}){return super.data(e)}}class Io{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Wf(this._firestore,this._userDataWriter,r.key,r,new Hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const h=new Wf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Hu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new Wf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Hu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:Rj(u.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Rj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function Hn(n){n=Jn(n,Kt);const e=Jn(n.firestore,Hs);return fj(pg(e),n._key).then((t=>Wk(e,n,t)))}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:hn("string",Io._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class lv extends kj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function Ni(n){n=Jn(n,Mi);const e=Jn(n.firestore,Hs),t=pg(e),r=new lv(e);return Kk(n._query),mj(t,n._query).then((i=>new Io(e,r,n,i)))}function Gs(n,e,t){n=Jn(n,Kt);const r=Jn(n.firestore,Hs),i=Qk(n.converter,e,t);return Tg(r,[Fk(vg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qn.none())])}function Mn(n,e,t,...r){n=Jn(n,Kt);const i=Jn(n.firestore,Hs),o=vg(i);let l;return l=typeof(e=en(e))=="string"||e instanceof yg?Ej(o,"updateDoc",n._key,e,t,r):xj(o,"updateDoc",n._key,e),Tg(i,[l.toMutation(n._key,qn.exists(!0))])}function Ks(n){return Tg(Jn(n.firestore,Hs),[new lg(n._key,qn.none())])}function Kd(n,e){const t=Jn(n.firestore,Hs),r=Ue(n),i=Qk(n.converter,e);return Tg(t,[Fk(vg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then((()=>r))}function qs(n,...e){n=en(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_T(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(_T(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,l,u;if(n instanceof Kt)l=Jn(n.firestore,Hs),u=zd(n._key.path),o={next:h=>{e[r]&&e[r](Wk(l,n,h))},error:e[r+1],complete:e[r+2]};else{const h=Jn(n,Mi);l=Jn(h.firestore,Hs),u=h._query;const f=new lv(l);o={next:g=>{e[r]&&e[r](new Io(l,f,h,g))},error:e[r+1],complete:e[r+2]},Kk(n._query)}return(function(f,g,y,v){const w=new W_(v),x=new K_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>$_(await Nm(f),x))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>H_(await Nm(f),x)))}})(pg(l),u,i,o)}function Tg(n,e){return(function(r,i){const o=new zs;return r.asyncQueue.enqueueAndForget((async()=>tj(await hj(r),i,o))),o.promise})(pg(n),e)}function Wk(n,e,t){const r=t.docs.get(e._key),i=new lv(n);return new Ro(n,i,e._key,r,new Hu(t.hasPendingWrites,t.fromCache),e.converter)}function En(){return new X_("serverTimestamp")}function cv(...n){return new J_("arrayUnion",n)}function Xk(...n){return new Z_("arrayRemove",n)}function Om(n){return new ev("increment",n)}(function(e,t=!0){(function(i){kc=i})(Ko),Co(new Ia("firestore",((r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Hs(new n3(r.getProvider("auth-internal")),new i3(l,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(f.options.projectId,g)})(l,i),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Ls(Zx,eE,e),Ls(Zx,eE,"esm2020")})();const Jk="firebasestorage.googleapis.com",Ij="storageBucket",Nj=120*1e3,Cj=600*1e3;class Xs extends Qs{constructor(e,t,r=0){super(Jy(e),`Firebase Storage: ${t} (${Jy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ys;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ys||(Ys={}));function Jy(n){return"storage/"+n}function Dj(){const n="An unknown error occurred, please check the error payload for server response.";return new Xs(Ys.UNKNOWN,n)}function Oj(){return new Xs(Ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mj(){return new Xs(Ys.CANCELED,"User canceled the upload/download.")}function Pj(n){return new Xs(Ys.INVALID_URL,"Invalid URL '"+n+"'.")}function jj(n){return new Xs(Ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wT(n){return new Xs(Ys.INVALID_ARGUMENT,n)}function Zk(){return new Xs(Ys.APP_DELETED,"The Firebase app was deleted.")}function Lj(n){return new Xs(Ys.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class os{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=os.makeFromUrl(e,t)}catch{return new os(e,"")}if(r.path==="")return r;throw jj(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${i}/o${v}`,"i"),x={bucket:1,path:3},N=t===Jk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",L=new RegExp(`^https?://${N}/${i}/${O}`,"i"),B=[{regex:u,indices:h,postModify:o},{regex:w,indices:x,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<B.length;q++){const Y=B[q],V=Y.regex.exec(e);if(V){const R=V[Y.indices.bucket];let E=V[Y.indices.path];E||(E=""),r=new os(R,E),Y.postModify(r);break}}if(r==null)throw Pj(e);return r}}class Vj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Uj(n,e,t){let r=1,i=null,o=null,l=!1,u=0;function h(){return u===2}let f=!1;function g(...O){f||(f=!0,e.apply(null,O))}function y(O){i=setTimeout(()=>{i=null,n(w,h())},O)}function v(){o&&clearTimeout(o)}function w(O,...L){if(f){v();return}if(O){v(),g.call(null,O,...L);return}if(h()||l){v(),g.call(null,O,...L);return}r<64&&(r*=2);let B;u===1?(u=2,B=0):B=(r+Math.random())*1e3,y(B)}let x=!1;function N(O){x||(x=!0,v(),!f&&(i!==null?(O||(u=2),clearTimeout(i),y(0)):O||(u=1)))}return y(0),o=setTimeout(()=>{l=!0,N(!0)},t),N}function zj(n){n(!1)}function Fj(n){return n!==void 0}function xT(n,e,t,r){if(r<e)throw wT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wT(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Mm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Mm||(Mm={}));function qj(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}class $j{constructor(e,t,r,i,o,l,u,h,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Nf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Mm.NO_ERROR,h=o.getStatus();if(!u||qj(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Mm.ABORT;r(!1,new Nf(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Nf(f,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());Fj(h)?o(h):o()}catch(h){l(h)}else if(u!==null){const h=Dj();h.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,h)):l(h)}else if(i.canceled){const h=this.appDelete_?Zk():Mj();l(h)}else{const h=Oj();l(h)}};this.canceled_?t(!1,new Nf(!1,null,!0)):this.backoffId_=Uj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Hj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Gj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Kj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Yj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Qj(n,e,t,r,i,o,l=!0,u=!1){const h=Bj(n.urlParams),f=n.url+h,g=Object.assign({},n.headers);return Kj(g,e),Hj(g,t),Gj(g,o),Yj(g,r),new $j(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,u)}function Wj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Xj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Pm{constructor(e,t){this._service=e,t instanceof os?this._location=t:this._location=os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pm(e,t)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xj(this._location.path)}get storage(){return this._service}get parent(){const e=Wj(this._location.path);if(e===null)return null;const t=new os(this._location.bucket,e);return new Pm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Lj(e)}}function ET(n,e){const t=e?.[Ij];return t==null?null:os.makeFromBucketSpec(t,n)}function Jj(n,e,t,r={}){n.host=`${e}:${t}`;const i=Go(e);i&&(e_(`https://${n.host}/b`),t_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:$S(o,n.app.options.projectId))}class Zj{constructor(e,t,r,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=Jk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nj,this._maxUploadRetryTime=Cj,this._requests=new Set,i!=null?this._bucket=os.makeFromBucketSpec(i,this._host):this._bucket=ET(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=os.makeFromBucketSpec(this._url,e):this._bucket=ET(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Vj(Zk());{const l=Qj(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const TT="@firebase/storage",ST="0.14.0";const eR="storage";function eL(n=s_(),e){n=en(n);const r=Km(n,eR).getImmediate({identifier:e}),i=FS("storage");return i&&tL(r,...i),r}function tL(n,e,t,r={}){Jj(n,e,t,r)}function nL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Zj(t,r,i,e,Ko)}function rL(){Co(new Ia(eR,nL,"PUBLIC").setMultipleInstances(!0)),Ls(TT,ST,""),Ls(TT,ST,"esm2020")}rL();const sL={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},uv=XS(sL),Fn=JM(uv),Ae=pj(uv);eL(uv);new _i;try{yj(Ae).catch(n=>{n.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):n.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const tR=z.createContext();function Rr(){return z.useContext(tR)}function iL({children:n}){const[e,t]=z.useState(null),[r,i]=z.useState(!0);z.useEffect(()=>{const h=FO(Fn,async f=>{if(f){t(y=>({...y,...f}));const g=Ue(Ae,"users",f.uid);onSnapshot(g,async y=>{if(y.exists())t(v=>({...v,...v?.reloadUserInfo,...f,...y.data()}));else{console.warn("User document missing. Creating active sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await Gs(g,v,{merge:!0})}catch(w){console.error("Failed to auto-create user doc:",w)}}},y=>{console.error("Real-time profile sync error:",y)})}else t(null);i(!1)});return()=>{h()}},[]);const u={currentUser:e,loading:r,logout:async()=>{await Fn.signOut(),t(null)},refreshUser:async()=>{if(Fn.currentUser){await Fn.currentUser.reload();const h=Fn.currentUser;let f={};try{const g=await Hn(Ue(Ae,"users",h.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...h,...f})}}};return _.jsx(tR.Provider,{value:u,children:!r&&n})}const aL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),AT=n=>{const e=oL(n);return e.charAt(0).toUpperCase()+e.slice(1)},nR=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),lL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var cL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uL=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...u},h)=>z.createElement("svg",{ref:h,...cL,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:nR("lucide",i),...!o&&!lL(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,g])=>z.createElement(f,g)),...Array.isArray(o)?o:[o]]));const De=(n,e)=>{const t=z.forwardRef(({className:r,...i},o)=>z.createElement(uL,{ref:o,iconNode:e,className:nR(`lucide-${aL(AT(n))}`,`lucide-${n}`,r),...i}));return t.displayName=AT(n),t};const dL=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dv=De("activity",dL);const hL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],q0=De("arrow-left",hL);const fL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hv=De("arrow-right",fL);const mL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$0=De("bell",mL);const gL=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],pL=De("brain",gL);const yL=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],_L=De("bug",yL);const vL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],lc=De("camera",vL);const bL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wL=De("check",bL);const xL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fv=De("chevron-down",xL);const EL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rR=De("circle-alert",EL);const TL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sg=De("circle-check-big",TL);const SL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AL=De("circle-check",SL);const kL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ag=De("clock",kL);const RL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],IL=De("file-text",RL);const NL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jm=De("globe",NL);const CL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],sR=De("heart",CL);const DL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],iR=De("house",DL);const OL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],aR=De("image",OL);const ML=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oR=De("info",ML);const PL=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],lR=De("leaf",PL);const jL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],LL=De("lightbulb",jL);const VL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$r=De("loader-circle",VL);const UL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zL=De("lock",UL);const FL=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],kT=De("log-in",FL);const BL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],qL=De("log-out",BL);const $L=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cR=De("mail",$L);const HL=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],GL=De("menu",HL);const KL=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],wd=De("message-circle",KL);const YL=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],QL=De("mic",YL);const WL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],RT=De("moon",WL);const XL=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],IT=De("paperclip",XL);const JL=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ZL=De("pause",JL);const eV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uR=De("pen",eV);const tV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nV=De("play",tV);const rV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sV=De("plus",rV);const iV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dR=De("refresh-cw",iV);const aV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hR=De("save",aV);const oV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],NT=De("scan-line",oV);const lV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fR=De("search",lV);const cV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xd=De("send",cV);const uV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Lm=De("share-2",uV);const dV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hV=De("shield-check",dV);const fV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mV=De("sparkles",fV);const gV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],dr=De("sprout",gV);const pV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],CT=De("stethoscope",pV);const yV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],DT=De("sun",yV);const _V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],OT=De("target",_V);const vV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ed=De("trash-2",vV);const bV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],H0=De("triangle-alert",bV);const wV=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xV=De("user-check",wV);const EV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],TV=De("user-minus",EV);const SV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mv=De("user-plus",SV);const AV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Td=De("user",AV);const kV=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],RV=De("wand-sparkles",kV);const IV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kr=De("x",IV);const NV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],CV=De("zap",NV),mR=z.createContext();function Va(){return z.useContext(mR)}function DV({children:n}){const[e,t]=z.useState([]),r=z.useCallback((o,l="info",u=4e3)=>{const h=Date.now();t(f=>[...f,{id:h,message:o,type:l}]),setTimeout(()=>{i(h)},u)},[]),i=z.useCallback(o=>{t(l=>l.filter(u=>u.id!==o))},[]);return _.jsxs(mR.Provider,{value:{addToast:r,removeToast:i},children:[n,_.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>_.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&_.jsx(Sg,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0"}),o.type==="error"&&_.jsx(rR,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0"}),(o.type==="info"||o.type==="warning")&&_.jsx(oR,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),_.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}class gR extends VN.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[_.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:_.jsx(H0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),_.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[_.jsx(dR,{className:"w-5 h-5"}),"Reload"]}),_.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[_.jsx(iR,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}const OV=async(n,e,t,r)=>{try{if(!n||!t)throw new Error("Invalid user IDs");const i=Ue(Ae,"users",n,"following",t);await Gs(i,{...r,followedAt:En()});const o=Ue(Ae,"users",t,"followers",n);await Gs(o,{...e,followedAt:En()});const l=Ue(Ae,"users",n);await Mn(l,{followingCount:Om(1)});const u=Ue(Ae,"users",t);return await Mn(u,{followersCount:Om(1)}),!0}catch(i){throw console.error("Error following user:",i),i}},Xf=async(n,e)=>{try{if(!n||!e)throw new Error("Invalid user IDs");return await Ks(Ue(Ae,"users",n,"following",e)),await Ks(Ue(Ae,"users",e,"followers",n)),await Mn(Ue(Ae,"users",n),{followingCount:Om(-1)}),await Mn(Ue(Ae,"users",e),{followersCount:Om(-1)}),!0}catch(t){throw console.error("Error unfollowing user:",t),t}},pR=async(n,e)=>{try{if(!n||!e)return{isFollowing:!1,isRequested:!1};const t=Ue(Ae,"users",n,"following",e),i=(await Hn(t)).exists(),o=Ue(Ae,"users",e,"followRequests",n),u=(await Hn(o)).exists();return{isFollowing:i,isRequested:u}}catch(t){return console.error("Error checking follow status:",t),{isFollowing:!1,isRequested:!1}}},yR=async(n,e,t)=>{try{if(!n||!t)throw new Error("Invalid IDs");return await Gs(Ue(Ae,"users",t,"followRequests",n),{followerId:n,followerName:e.displayName||e.name||"User",followerPhoto:e.photoURL||e.avatar||null,createdAt:En(),status:"pending"}),!0}catch(r){throw console.error("Error sending follow request:",r),r}},_R=async(n,e)=>{try{return await Ks(Ue(Ae,"users",e,"followRequests",n)),!0}catch(t){throw console.error("Error cancelling request:",t),t}},MV=async(n,e,t,r,i)=>{try{return await OV(e,t,r,i),await Ks(Ue(Ae,"users",r,"followRequests",e)),!0}catch(o){throw console.error("Error accepting request:",o),o}},PV=async(n,e)=>{try{return await Ks(Ue(Ae,"users",n,"followRequests",e)),!0}catch(t){throw console.error("Error rejecting request:",t),t}},MT=async n=>{try{const e=await Hn(Ue(Ae,"users",n));if(e.exists()){const t=e.data();return{followersCount:t.followersCount||0,followingCount:t.followingCount||0}}return{followersCount:0,followingCount:0}}catch(e){return console.error("Error getting user stats:",e),{followersCount:0,followingCount:0}}},jV=async n=>{try{const e=Ar(Zt(Ae,"users",n,"followers"),Eg("followedAt","desc"),Dm(50)),t=await Ni(e);if(t.empty)return[];const r=t.docs.map(u=>u.id),i=[],o=r.map(u=>Hn(Ue(Ae,"users",u)));return(await Promise.all(o)).forEach(u=>{u.exists()&&i.push({id:u.id,...u.data()})}),i}catch(e){return console.error("Error fetching followers:",e),[]}},LV=async n=>{try{const e=Ar(Zt(Ae,"users",n,"following"),Eg("followedAt","desc"),Dm(50)),t=await Ni(e);if(t.empty)return[];const r=t.docs.map(u=>u.id),i=[],o=r.map(u=>Hn(Ue(Ae,"users",u)));return(await Promise.all(o)).forEach(u=>{u.exists()&&i.push({id:u.id,...u.data()})}),i}catch(e){return console.error("Error fetching following:",e),[]}};function VV({onClose:n}){const{t:e}=Ut(),{currentUser:t}=Rr(),{addToast:r}=Va(),i=kr(),[o,l]=z.useState([]),[u,h]=z.useState(!0),[f,g]=z.useState(null);z.useEffect(()=>{if(!t)return;const w=Ar(Zt(Ae,"users",t.uid,"followRequests"),Eg("createdAt","desc")),x=qs(w,N=>{const O=N.docs.map(L=>({id:L.id,...L.data()}));l(O),h(!1)},N=>{console.error("Error fetching requests:",N),h(!1)});return()=>x()},[t]);const y=async w=>{if(!f){g(w.id),l(x=>x.filter(N=>N.id!==w.id));try{await MV(w.id,w.id,{displayName:w.followerName,photoURL:w.followerPhoto},t.uid,{displayName:t.displayName,photoURL:t.photoURL}),r(e("request_accepted")||"Request Accepted","success")}catch(x){console.error(x),r(e("error_occurred")||"Error","error")}finally{g(null)}}},v=async w=>{if(!f){g(w),l(x=>x.filter(N=>N.id!==w));try{await PV(t.uid,w),r(e("request_rejected")||"Request Rejected","info")}catch(x){console.error(x),r("Error","error")}finally{g(null)}}};return _.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:n,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:w=>w.stopPropagation(),children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[_.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2",children:[_.jsx($0,{className:"w-5 h-5 text-green-600"}),e("notifications")||"Bildirimler"]}),_.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:u?_.jsx("div",{className:"flex justify-center py-8",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):o.length===0?_.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[_.jsx($0,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),_.jsx("p",{children:e("no_notifications")||"No new notifications"})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider px-1",children:e("follow_requests")||"Follow Requests"}),o.map(w=>_.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-2xl",children:[_.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>{n(),i(`/profile/${w.id}`)},children:[_.jsx("img",{src:w.followerPhoto||`https://ui-avatars.com/api/?name=${w.followerName||"User"}&background=random`,alt:w.followerName,className:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-gray-600"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm truncate",children:w.followerName||"User"}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("wants_to_follow")||"Wants to follow you"})]})]}),_.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[_.jsx("button",{onClick:()=>v(w.id),disabled:f===w.id,className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition-colors disabled:opacity-50",children:_.jsx(Kr,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>y(w),disabled:f===w.id,className:"p-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-xl transition-colors disabled:opacity-50",children:_.jsx(wL,{className:"w-4 h-4"})})]})]},w.id))]})})]})})}function UV(){const{currentUser:n,logout:e}=Rr(),{t,i18n:r}=Ut(),i=er(),o=kr(),{addToast:l}=Va(),[u,h]=z.useState(!0),[f,g]=z.useState(!1),[y,v]=z.useState(0),w=()=>{r.changeLanguage(r.language==="en"?"tr":"en")},[x,N]=z.useState(()=>{const V=localStorage.getItem("theme");return V||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});z.useEffect(()=>{document.documentElement.classList.remove("dark","oled"),x==="dark"?document.documentElement.classList.add("dark"):x==="oled"&&document.documentElement.classList.add("dark","oled"),localStorage.setItem("theme",x)},[x]);const[O]=z.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),L=V=>{N(V)},H=()=>{L(x==="light"?"dark":x==="dark"?"oled":"light")};z.useEffect(()=>{if(!n)return;const V=async()=>{try{await Mn(Ue(Ae,"users",n.uid),{lastSeen:En()})}catch(E){console.error("Presence update failed",E)}};V();const R=setInterval(V,60*1e3);return()=>clearInterval(R)},[n]),z.useEffect(()=>{if(!n)return;const V=Ar(Zt(Ae,"chats"),La("participants","array-contains",n.uid)),R=qs(V,E=>{E.docChanges().forEach(T=>{if(T.type==="modified"){const k=T.doc.data(),C=k.updatedAt?.seconds*1e3;if(Date.now()-C>5e3)return;const j=k.participants.find(G=>G!==n.uid);if(!(i.pathname===`/messages/${T.doc.id}`)&&j){const G=k.participantData?.[j]||{name:"Someone"};O.play().catch(Z=>console.log("Audio play failed",Z)),l(`New message from ${G.name}: ${k.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>R()},[n,i.pathname,l,O]),z.useEffect(()=>{if(!n)return;const V=Ar(Zt(Ae,"users",n.uid,"followRequests")),R=qs(V,E=>{v(E.size)});return()=>R()},[n]);const q=[{name:"home",path:"/",icon:iR,label:t("app_name"),public:!0},{name:"community",path:"/community",icon:jm,label:t("community"),public:!0},{name:"my_analyses",path:"/analyses",icon:Ag,label:t("analyses"),public:!1},{name:"messages",path:"/messages",icon:wd,label:t("messages"),public:!1},{name:"notifications",action:()=>g(!0),icon:$0,badge:y>0?y:null,label:t("notifications"),public:!1},{name:"profile",path:"/profile",icon:Td,label:t("profile"),public:!1},{name:"about",path:"/about",icon:oR,label:t("about"),public:!0}].filter(V=>V.public||n),Y=(V,R)=>{V.preventDefault(),i.pathname===R?R==="/"?o("/",{state:{refreshId:Date.now()},replace:!0}):(o(R,{state:{refreshId:Date.now()},replace:!0}),window.scrollTo(0,0)):(o(R,{state:{refreshId:Date.now()}}),window.scrollTo(0,0))};return _.jsxs("div",{className:"flex h-[100dvh] bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden transition-colors duration-300",children:[_.jsxs("aside",{className:`hidden md:flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out ${u?"w-64":"w-20"}`,children:[_.jsxs("div",{className:`p-4 flex items-center ${u?"justify-between":"justify-center"} h-20`,children:[u&&_.jsxs(Os,{to:"/",onClick:V=>{V.preventDefault(),o("/",{state:{refreshId:Date.now()},replace:i.pathname==="/"}),window.scrollTo(0,0)},className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[_.jsx(dr,{className:"w-8 h-8 text-green-600"}),_.jsxs("h1",{className:"text-2xl font-bold tracking-tight whitespace-nowrap",children:[_.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),_.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),_.jsx("button",{onClick:()=>h(!u),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Toggle Menu",children:_.jsx(GL,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"})}),!u&&_.jsx("div",{className:"hidden"})]}),_.jsx("nav",{className:"flex-1 px-3 space-y-2 mt-2",children:q.map(V=>{const R=V.icon,E=i.pathname===V.path,T=_.jsxs(_.Fragment,{children:[_.jsx(R,{className:`w-6 h-6 ${u?"":"mx-auto"}`}),u&&_.jsx("span",{className:"truncate",children:V.label}),V.badge&&(u?_.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[1.25rem] text-center",children:V.badge}):_.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"}))]}),k=`w-full flex items-center ${u?"gap-3 px-4":"justify-center px-2"} py-3 rounded-xl transition-all relative group ${E?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`;return V.action?_.jsx("button",{onClick:C=>{C.preventDefault(),V.action()},className:k,title:u?"":V.label,children:T},V.name):_.jsx("button",{onClick:C=>Y(C,V.path),className:k,title:u?"":V.label,children:T},V.path)})}),_.jsxs("div",{className:`p-4 border-t border-gray-200 dark:border-gray-700 space-y-4 ${u?"":"flex flex-col items-center"}`,children:[_.jsxs("button",{onClick:w,className:`flex items-center gap-3 w-full text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors ${u?"px-4 py-2":"p-2 justify-center"}`,title:t("language"),children:[_.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:r.language.toUpperCase()}),u&&_.jsx("span",{children:t("language")||"Language"})]}),u?_.jsxs("div",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-900 rounded-full p-1 relative w-full h-10 border border-gray-200 dark:border-gray-700",children:[_.jsx("div",{className:"absolute top-1 bottom-1 w-[calc(33.33%-4px)] bg-white dark:bg-gray-700 rounded-full shadow-sm transition-all duration-300 ease-out z-0",style:{left:x==="oled"?"4px":x==="dark"?"calc(33.33% + 2px)":"calc(66.66% + 0px)"}}),_.jsx("button",{onClick:()=>L("oled"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="oled"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"OLED Mode",children:_.jsx("span",{className:"text-[10px] font-bold",children:"OLED"})}),_.jsx("button",{onClick:()=>L("dark"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="dark"?"text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"Dark Mode",children:_.jsx(RT,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>L("light"),className:`flex-1 relative z-10 flex items-center justify-center transition-colors duration-200 ${x==="light"?"text-gray-900":"text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,title:"Light Mode",children:_.jsx(DT,{className:"w-4 h-4"})})]}):_.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl text-gray-600 dark:text-gray-400 transition-colors bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",title:`Theme: ${x.toUpperCase()} (Click to cycle)`,children:x==="oled"?_.jsx("span",{className:"text-[10px] font-bold",children:"OLED"}):x==="dark"?_.jsx(RT,{className:"w-5 h-5"}):_.jsx(DT,{className:"w-5 h-5"})}),n?_.jsxs("div",{className:`flex ${u?"flex-col gap-2":"flex-col gap-2 items-center"}`,children:[u?_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("img",{src:n.photoURL||n.avatar||`https://ui-avatars.com/api/?name=${n.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),_.jsxs("div",{className:"flex-1 overflow-hidden",children:[_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),_.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:n.displayName||n.email,children:n.displayName||n.email})]})]}):_.jsx("img",{src:n.photoURL||n.avatar||`https://ui-avatars.com/api/?name=${n.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600 mb-2 cursor-pointer",title:n.displayName||n.email}),_.jsxs("button",{onClick:async()=>{await e(),o("/")},className:`flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm ${u?"":"justify-center p-2"}`,title:t("logout"),children:[_.jsx(qL,{className:"w-5 h-5"}),u&&_.jsx("span",{children:t("logout")})]})]}):_.jsxs(Os,{to:"/login",className:`flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold ${u?"":"justify-center p-2"}`,title:t("login"),children:[_.jsx(kT,{className:"w-5 h-5"}),u&&_.jsx("span",{children:t("login")})]})]})]}),_.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[_.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[_.jsxs(Os,{to:"/",onClick:V=>Y(V,"/"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[_.jsx(dr,{className:"w-6 h-6 text-green-600"}),_.jsxs("span",{className:"font-bold text-lg",children:[_.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),_.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),_.jsx("button",{onClick:w,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:r.language.toUpperCase()})]}),_.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-32 md:pb-8 scroll-smooth relative",id:"main-scroll",children:_.jsx("div",{className:"w-full min-h-full flex flex-col",children:_.jsx(gR,{children:_.jsx(VC,{})})})}),_.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[q.map(V=>{const R=V.icon,E=i.pathname===V.path;return _.jsx("button",{onClick:T=>Y(T,V.path),className:`flex flex-col items-center justify-center p-3 rounded-lg transition-all ${E?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-gray-400 dark:text-gray-500"}`,children:_.jsx(R,{className:"w-7 h-7"})},V.path)}),!n&&_.jsx(Os,{to:"/login",className:"flex flex-col items-center justify-center p-3 text-gray-400",children:_.jsx(kT,{className:"w-7 h-7"})})]})]}),f&&_.jsx(VV,{onClose:()=>g(!1)})]})}function zV(){const[n,e]=z.useState(""),[t,r]=z.useState(""),[i,o]=z.useState(""),[l,u]=z.useState(!1),[h,f]=z.useState(!1),[g,y]=z.useState(!1),v=kr(),w=er(),{t:x}=Ut(),{currentUser:N}=Rr(),{addToast:O}=Va();if(N?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const L=async()=>{y(!0);try{const B=await p0(Fn,n,t),q={url:window.location.origin+"/login",handleCodeInApp:!0};await S2(B.user,q),await Fn.signOut(),O(x("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(B){console.error("Resend error:",B),B.code==="auth/too-many-requests"?O(x("too_many_requests")||"Too many attempts. Please wait.","error"):O(x("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},H=async B=>{B.preventDefault(),o(""),f(!1),u(!0);try{if(!(await p0(Fn,n,t)).user.emailVerified){await Fn.signOut(),f(!0);return}}catch(q){console.error(q);let Y=x("login_failed")||"Failed to login.";q.code==="auth/user-not-found"||q.code==="auth/wrong-password"||q.code==="auth/invalid-credential"?Y=x("invalid_credentials")||"Invalid email or password.":q.code==="auth/too-many-requests"?Y=x("too_many_requests")||"Too many attempts. Try again later.":q.code==="auth/user-disabled"?Y="Account disabled. Contact support.":q.code==="auth/network-request-failed"&&(Y="Network error. Check your connection."),o(Y)}finally{u(!1)}};return _.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:_.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:_.jsxs("div",{className:"p-8",children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:_.jsx(dr,{className:"w-16 h-16 text-white"})})}),_.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:x("welcome")}),_.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:x("login_prompt")}),i&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),h?_.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:_.jsx(dr,{className:"w-5 h-5"})}),_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x("verify_email_title")||"Verify your email"})]}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:x("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),_.jsx("button",{onClick:L,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":x("resend_verification")||"Resend Verification Email"})]}):_.jsxs("form",{onSubmit:H,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("email")}),_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:B=>e(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:x("password")}),_.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>r(B.target.value)})]}),_.jsxs("button",{type:"submit",disabled:l,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l?"Logging in...":x("login"),!l&&_.jsx(hv,{className:"w-4 h-4"})]})]}),_.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[x("no_account")," ",_.jsx(Os,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:x("register")})]})]})})})}function FV({user:n,onClose:e,onVerified:t}){const{t:r}=Ut(),[i,o]=z.useState(!1);z.useEffect(()=>{const u=setInterval(async()=>{if(n)try{await n.reload(),n.emailVerified&&(clearInterval(u),t())}catch(h){console.error("Verification check failed",h)}},3e3);return()=>clearInterval(u)},[n,t]);const l=async()=>{o(!0);try{await n.reload(),n.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[_.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),_.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),_.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:_.jsx(cR,{className:"w-10 h-10"})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r("verify_email_title")||"Verify Your Email"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:r("verify_email_desc")||`We sent a confirmation link to ${n?.email}. Please check your inbox and click the link to continue.`}),_.jsxs("div",{className:"space-y-4 w-full",children:[_.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:r("open_email_app")||"Open Email App"}),_.jsxs("button",{onClick:l,disabled:i,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[i?_.jsx(dR,{className:"w-5 h-5 animate-spin"}):_.jsx(Sg,{className:"w-5 h-5"}),r("i_verified_it")||"I Verified the Email"]}),_.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r("cancel")||"Cancel"})]})]})})}function BV(){const[n,e]=z.useState(""),[t,r]=z.useState(""),[i,o]=z.useState(""),[l,u]=z.useState(""),[h,f]=z.useState(!1),[g,y]=z.useState(!1),[v,w]=z.useState(null),x=kr(),N=er(),{t:O}=Ut(),L=async B=>{B.preventDefault(),u(""),f(!0);try{const q=await T2(Fn,n,t);await dm(q.user,{displayName:i}),await Gs(Ue(Ae,"users",q.user.uid),{uid:q.user.uid,name:i,displayName:i,email:n,photoURL:null,avatar:null,createdAt:En(),lastSeen:En(),bio:""},{merge:!0}),await S2(q.user),w(q.user),y(!0),f(!1)}catch(q){u(q.message),console.error(q),f(!1)}},H=async()=>{Fn.currentUser&&await Fn.currentUser.reload(),y(!1),N.state?.returnUrl&&N.state?.pendingResult?x(N.state.returnUrl,{replace:!0,state:{restoredResult:N.state.pendingResult,restoredImages:N.state.pendingImages,restoredPlantType:N.state.pendingPlantType}}):x("/")};return _.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:_.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&_.jsx(FV,{user:v,onClose:()=>y(!1),onVerified:H}),_.jsxs("div",{className:"p-8",children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:_.jsx(dr,{className:"w-16 h-16 text-white"})})}),_.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:O("register")}),_.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:O("create_account_desc")||O("join_community")||"Create an account to join the community"}),l&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:l}),_.jsxs("form",{onSubmit:L,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("full_name")||"Full Name"}),_.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:i,onChange:B=>o(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("email")}),_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:B=>e(B.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("password")}),_.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:B=>r(B.target.value)})]}),_.jsxs("button",{type:"submit",disabled:h||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h?O("creating_account")||"Creating Account...":O("register"),!h&&_.jsx(mv,{className:"w-4 h-4"})]})]}),_.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[O("already_have_account")||"Already have an account?"," "," ",_.jsx(Os,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:O("login")})]})]})]})})}var PT;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(PT||(PT={}));var jT;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(jT||(jT={}));var LT;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(LT||(LT={}));const VT=["user","model","function","system"];var UT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(UT||(UT={}));var zT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(zT||(zT={}));var FT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(FT||(FT={}));var BT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(BT||(BT={}));var sd;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(sd||(sd={}));var qT;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(qT||(qT={}));var $T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})($T||($T={}));var HT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(HT||(HT={}));class Bn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Yl extends Bn{constructor(e,t){super(e),this.response=t}}class vR extends Bn{constructor(e,t,r,i){super(e),this.status=t,this.statusText=r,this.errorDetails=i}}class Ra extends Bn{}class bR extends Bn{}const qV="https://generativelanguage.googleapis.com",$V="v1beta",HV="0.24.1",GV="genai-js";var $o;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})($o||($o={}));class KV{constructor(e,t,r,i,o){this.model=e,this.task=t,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||$V;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||qV}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function YV(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${GV}/${HV}`),e.join(" ")}async function QV(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",YV(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Ra(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,o]of r.entries()){if(i==="x-goog-api-key")throw new Ra(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Ra(`Header name ${i} can only be set using the apiClient field`);t.append(i,o)}}return t}async function WV(n,e,t,r,i,o){const l=new KV(n,e,t,r,o);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},eU(o)),{method:"POST",headers:await QV(l),body:i})}}async function Yd(n,e,t,r,i,o={},l=fetch){const{url:u,fetchOptions:h}=await WV(n,e,t,r,i,o);return XV(u,h,l)}async function XV(n,e,t=fetch){let r;try{r=await t(n,e)}catch(i){JV(i,n)}return r.ok||await ZV(r,n),r}function JV(n,e){let t=n;throw t.name==="AbortError"?(t=new bR(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof vR||n instanceof Ra||(t=new Bn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function ZV(n,e){let t="",r;try{const i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new vR(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function eU(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function gv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Jf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return tU(n)}else if(n.promptFeedback)throw new Yl(`Text not available. ${pa(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Jf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),GT(n)[0]}else if(n.promptFeedback)throw new Yl(`Function call not available. ${pa(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Jf(n.candidates[0]))throw new Yl(`${pa(n)}`,n);return GT(n)}else if(n.promptFeedback)throw new Yl(`Function call not available. ${pa(n)}`,n)},n}function tU(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)l.text&&o.push(l.text),l.executableCode&&o.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&o.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function GT(n){var e,t,r,i;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(i=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)l.functionCall&&o.push(l.functionCall);if(o.length>0)return o}const nU=[sd.RECITATION,sd.SAFETY,sd.LANGUAGE];function Jf(n){return!!n.finishReason&&nU.includes(n.finishReason)}function pa(n){var e,t,r;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Jf(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function Sd(n){return this instanceof Sd?(this.v=n,this):new Sd(n)}function rU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(v){r[v]&&(i[v]=function(w){return new Promise(function(x,N){o.push([v,w,x,N])>1||u(v,w)})})}function u(v,w){try{h(r[v](w))}catch(x){y(o[0][3],x)}}function h(v){v.value instanceof Sd?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const KT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function sU(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=oU(e),[r,i]=t.tee();return{stream:aU(r),response:iU(i)}}async function iU(n){const e=[],t=n.getReader();for(;;){const{done:r,value:i}=await t.read();if(r)return gv(lU(e));e.push(i)}}function aU(n){return rU(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:i}=yield Sd(t.read());if(i)break;yield yield Sd(gv(r))}})}function oU(n){const e=n.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:l,done:u})=>{if(u){if(i.trim()){r.error(new Bn("Failed to parse stream"));return}r.close();return}i+=l;let h=i.match(KT),f;for(;h;){try{f=JSON.parse(h[1])}catch{r.error(new Bn(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(f),i=i.substring(h[0].length),h=i.match(KT)}return o()}).catch(l=>{let u=l;throw u.stack=l.stack,u.name==="AbortError"?u=new bR("Request aborted when reading from the stream"):u=new Bn("Error reading from the stream"),u})}}})}function lU(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let i=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=o.citationMetadata,t.candidates[i].groundingMetadata=o.groundingMetadata,t.candidates[i].finishReason=o.finishReason,t.candidates[i].finishMessage=o.finishMessage,t.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[i].content||(t.candidates[i].content={role:o.content.role||"user",parts:[]});const l={};for(const u of o.content.parts)u.text&&(l.text=u.text),u.functionCall&&(l.functionCall=u.functionCall),u.executableCode&&(l.executableCode=u.executableCode),u.codeExecutionResult&&(l.codeExecutionResult=u.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),t.candidates[i].content.parts.push(l)}i++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function wR(n,e,t,r){const i=await Yd(e,$o.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return sU(i)}async function xR(n,e,t,r){const o=await(await Yd(e,$o.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:gv(o)}}function ER(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Ad(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return cU(e)}function cU(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,i=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new Bn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Bn("No content is provided for sending chat message.");return r?e:t}function uU(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=n.generateContentRequest!=null;if(n.contents){if(i)throw new Ra("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(i)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=Ad(n);r.contents=[o]}return{generateContentRequest:r}}function YT(n){let e;return n.contents?e=n:e={contents:[Ad(n)]},n.systemInstruction&&(e.systemInstruction=ER(n.systemInstruction)),e}function dU(n){return typeof n=="string"||Array.isArray(n)?{content:Ad(n)}:n}const QT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],hU={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function fU(n){let e=!1;for(const t of n){const{role:r,parts:i}=t;if(!e&&r!=="user")throw new Bn(`First content should be with role 'user', got ${r}`);if(!VT.includes(r))throw new Bn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(VT)}`);if(!Array.isArray(i))throw new Bn("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Bn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of i)for(const h of QT)h in u&&(o[h]+=1);const l=hU[r];for(const u of QT)if(!l.includes(u)&&o[u]>0)throw new Bn(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function WT(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const XT="SILENT_ERROR";class mU{constructor(e,t,r,i={}){this.model=t,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(fU(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,i,o,l,u,h;await this._sendPromise;const f=Ad(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>xR(this._apiKey,this.model,g,y)).then(w=>{var x;if(WT(w.response)){this._history.push(f);const N=Object.assign({parts:[],role:"model"},(x=w.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(N)}else{const N=pa(w.response);N&&console.warn(`sendMessage() was unsuccessful. ${N}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var r,i,o,l,u,h;await this._sendPromise;const f=Ad(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=wR(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(XT)}).then(w=>w.response).then(w=>{if(WT(w)){this._history.push(f);const x=Object.assign({},w.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=pa(w);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(w=>{w.message!==XT&&console.error(w)}),v}}async function gU(n,e,t,r){return(await Yd(e,$o.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function pU(n,e,t,r){return(await Yd(e,$o.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function yU(n,e,t,r){const i=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await Yd(e,$o.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),r)).json()}class JT{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=ER(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const i=YT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return xR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,t={}){var r;const i=YT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return wR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var t;return new mU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=uU(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return gU(this.apiKey,this.model,r,i)}async embedContent(e,t={}){const r=dU(e),i=Object.assign(Object.assign({},this._requestOptions),t);return pU(this.apiKey,this.model,r,i)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return yU(this.apiKey,this.model,e,r)}}class TR{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Bn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new Ra("Cached content must contain a `name` field.");if(!e.model)throw new Ra("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const l of i)if(t?.[l]&&e[l]&&t?.[l]!==e[l]){if(l==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===h)continue}throw new Ra(`Different value for "${l}" specified in modelParams (${t[l]}) and cachedContent (${e[l]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new JT(this.apiKey,o,r)}}async function SR(n,e="tr",t=null){const r=Array.isArray(n)?n:[n],i=3,o=2e3;let l;for(let u=0;u<=i;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${i+1}...`),await new Promise(h=>setTimeout(h,o))),await _U(r,e,t)}catch(h){if(l=h,!(h.message.includes("503")||h.message.includes("429")||h.message.includes("overloaded")||h.message.includes("Server Error")))throw h;console.warn(`Analysis attempt ${u+1} failed:`,h.message)}throw l}async function _U(n,e,t){let r="";t&&t.trim().length>0&&(r=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const i=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${r}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "plant_name": "Common Plant Name (e.g. Tomato, Rose)",
        "plant_latin_name": "Latin Name of the Plant (e.g. Solanum lycopersicum)",
        "disease_name": "Disease Name",
        "disease_latin_name": "Latin Name of the Disease/Pathogen (if applicable)",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:i}];n.forEach(u=>{if(!u)return;const h=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:h}})});const l={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const h=await u.json();if(h.error)throw new Error(h.error.message||"API Connection Error");if(h.plant_name||h.status)return h;if(h.candidates&&h.candidates[0].content){const g=h.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const h="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new TR(h).getGenerativeModel({model:"gemini-2.5-flash"}),v=[i];n.forEach(L=>{if(!L)return;const H=L.includes(",")?L.split(",")[1]:L;v.push({inlineData:{data:H,mimeType:"image/jpeg"}})});const O=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(O)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}async function vU(n="tr"){const e=["A common garden pest (e.g., aphids, spider mites)","A fascinating fungal disease (e.g., powdery mildew)","An interesting beneficial insect (e.g., ladybugs)","A weird or cool plant adaptation","A tip for organic gardening"],r=`
    Generate a short, engaging "Daily Plant Fact" for a community of gardeners.
    Topic: ${e[Math.floor(Math.random()*e.length)]}
    Language: ${n==="en"?"ENGLISH":"TURKISH"}

    The tone should be fun, educational, and slightly informal (like a friendly bot).
    
    Return a VALID JSON object with this structure:
    {
        "title": "Catchy Title",
        "content": "One or two short paragraphs of interesting info. No markdown.",
        "imageKeyword": "A precise English keyword to search for an image (e.g. 'ladybug leaf', 'powdery mildew rose')",
        "type": "tip" | "pest" | "disease" | "fun_fact"
    }
    
    Ensure the content is accurate but simple to read.
    Return ONLY valid raw JSON (no markdown block).
    `;try{const i="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE",g=(await(await new TR(i).getGenerativeModel({model:"gemini-2.5-flash"}).generateContent(r)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}catch(i){return console.error("Daily fact generation failed:",i),{title:n==="tr"?"Bitki Dostu pucu":"Plant Friendly Tip",content:n==="tr"?"Bitkilerinizi sabah erken saatlerde sulamak, suyun buharlamadan kklere ulamasn salar.":"Watering your plants early in the morning ensures water reaches the roots before evaporating.",imageKeyword:"watering plants",type:"tip"}}}const Tc="analyses";async function AR(n,e,t,r,i=!1){try{const o=t.main||null,l=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Kd(Zt(Ae,Tc),{userId:n,plantType:e,mainImage:o,macroImage:l,result:r,isPublic:i,status:"active",createdAt:En(),nextCheckup:new Date(Date.now()+10080*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function kR(n){try{const e=Ar(Zt(Ae,Tc),La("userId","==",n)),r=(await Ni(e)).docs.map(async o=>{const l=o.data();let u=[];try{u=(await Ni(Zt(Ae,Tc,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(h){console.log("No updates found or error",h)}return{id:o.id,...l,updates:u}});return(await Promise.all(r)).sort((o,l)=>{const u=o.createdAt?.seconds||0;return(l.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function RR(n){try{const e=Ar(Zt(Ae,"posts"),La("relatedAnalysisId","==",n)),t=await Ni(e);if(!t.empty){const r=t.docs.map(i=>Ks(i.ref));await Promise.all(r)}return await Ks(Ue(Ae,Tc,n)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function IR(n,e){try{const t=Ue(Ae,Tc,n);await Mn(t,{...e,updatedAt:En()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function NR(n,e,t){try{let r=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?r=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const i=Kd(Zt(Ae,"posts"),{userId:n,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:r,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:En()}),o=new Promise(l=>setTimeout(()=>l("timeout"),5e3));return await Promise.race([i,o]),!0}catch(r){throw console.error("Error creating post:",r),r}}async function CR(n,e,t,r="Gardener",i=null){try{const o=e.result.plant_latin_name||e.result.latin_name||"",l=e.result.disease_latin_name||(o?"":e.result.latin_name)||"",u=`${t}${o?` (${o})`:""}`;let h=`Analiz Sonucu: ${e.result.disease_name}${l&&l!==e.result.disease_name?` (${l})`:""}

${e.result.description}`;return e.result.is_treatable===!1?e.result.preventive_measures&&e.result.preventive_measures.length>0&&(h+=`

 Koruyucu nlemler:
`+e.result.preventive_measures.map(f=>` ${f}`).join(`
`)):e.result.treatment_steps&&e.result.treatment_steps.length>0&&(h+=`

 Tedavi Admlar:
`+e.result.treatment_steps.map(f=>` ${f}`).join(`
`)),await Kd(Zt(Ae,"posts"),{userId:e.userId,authorName:r,userAvatar:i,title:u,content:h,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:En(),relatedAnalysisId:n}),await IR(n,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function DR(n,e,t){try{return await Kd(Zt(Ae,Tc,n,"updates"),{imageUrl:e||null,note:t,createdAt:En()}),!0}catch(r){throw console.error("Error adding feedback:",r),r}}async function OR(n){try{const e=Ue(Ae,"posts",n),t=await Hn(e);if(!t.exists())return!1;const r=t.data();if(r.relatedAnalysisId)try{const i=Ue(Ae,"analyses",r.relatedAnalysisId);await Mn(i,{isPublic:!1})}catch(i){console.warn("Could not sync analysis status (might be deleted)",i)}return await Ks(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function MR(n,e){try{const t=Ue(Ae,"posts",n),r=await Hn(t);if(!r.exists())return;(r.data().likes||[]).includes(e)?await Mn(t,{likes:Xk(e)}):await Mn(t,{likes:cv(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function PR(n,e,t,r){try{const i=Ue(Ae,"posts",n),o={userId:e,userName:t,text:r,createdAt:Date.now()};return await Mn(i,{comments:cv(o)}),!0}catch(i){throw console.error("Error adding comment:",i),i}}async function jR(n,e){try{const t=Ue(Ae,"posts",n);return await Mn(t,{...e,updatedAt:En()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function G0(n,e,t){try{const r=Ar(Zt(Ae,"posts"),La("userId","==",n)),o=(await Ni(r)).docs.map(l=>Mn(l.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(r){return console.error("Error syncing user profile to posts:",r),!1}}async function bU(n,e,t,r){try{if(n===e)throw new Error("Cannot start chat with yourself.");const i=[n,e].sort(),o=`${i[0]}_${i[1]}`,l=Ue(Ae,"chats",o);return(await Hn(l)).exists()?await Mn(l,{[`participantData.${n}`]:r}):await Gs(l,{participants:[n,e],participantData:{[e]:t,[n]:r},createdAt:En(),updatedAt:En(),lastMessage:""}),o}catch(i){throw console.error("Error starting chat:",i),i}}const wU=Object.freeze(Object.defineProperty({__proto__:null,addComment:PR,addFeedbackUpdate:DR,createPost:NR,deleteAnalysis:RR,deletePost:OR,getUserAnalyses:kR,saveAnalysis:AR,shareAnalysisToCommunity:CR,startChat:bU,toggleLike:MR,updateAnalysisStatus:IR,updatePost:jR,updateUserPostsName:G0},Symbol.toStringTag,{value:"Module"}));function xU({result:n,onReset:e}){const{t}=Ut();return n?n.error==="NOT_PLANT"?_.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[_.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:_.jsx(H0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),_.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),_.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):_.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[_.jsx("div",{className:"bg-green-600 text-white p-6",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold",children:n.disease_name}),_.jsxs("div",{className:"flex flex-col",children:[n.plant_name&&_.jsx("span",{className:"text-lg font-medium opacity-90",children:n.plant_name}),_.jsx("span",{className:"opacity-75 italic text-sm",children:n.latin_name})]})]}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsxs("div",{className:"text-2xl font-bold",children:[n.confidence,"%"]}),_.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),_.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[_.jsx(dv,{className:"w-5 h-5"}),_.jsx("span",{children:t("urgency")})]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:_.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${n.urgency}%`}})})]}),_.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[_.jsx(dr,{className:"w-5 h-5"}),_.jsx("span",{children:t("spread_risk")})]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:_.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.spread_risk}%`}})})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),_.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n.description})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),n.is_treatable===!1&&_.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[_.jsx(H0,{className:"w-5 h-5 flex-shrink-0"}),_.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),_.jsx("ul",{className:"space-y-3",children:(n.is_treatable===!1?n.preventive_measures:n.treatment_steps)?.map((r,i)=>_.jsxs("li",{className:"flex gap-3",children:[_.jsx(Sg,{className:`w-6 h-6 flex-shrink-0 ${n.is_treatable===!1?"text-orange-500":"text-green-600"}`}),_.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:r})]},i))})]}),_.jsx("div",{className:"pt-4 flex gap-4",children:_.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function EU({isOpen:n,onClose:e,onCapture:t}){const r=z.useRef(null),i=z.useRef(null),[o,l]=z.useState(null),[u,h]=z.useState(""),{t:f}=Ut();z.useEffect(()=>(n?g():y(),()=>y()),[n]);const g=async()=>{h("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});l(w),r.current&&(r.current.srcObject=w)}catch(w){console.error("Camera Error:",w),h(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),l(null))},v=()=>{if(r.current&&i.current){const w=r.current,x=i.current;x.width=w.videoWidth,x.height=w.videoHeight,x.getContext("2d").drawImage(w,0,0,x.width,x.height);const O=x.toDataURL("image/jpeg",.9);t(O),e()}};return n?_.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:_.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[_.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[_.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),_.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:_.jsx(Kr,{className:"w-6 h-6"})})]}),_.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?_.jsxs("div",{className:"text-center p-6 text-red-400",children:[_.jsx(rR,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),_.jsx("p",{children:u}),_.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):_.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),_.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&_.jsx("button",{onClick:v,className:"group relative",children:_.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:_.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),_.jsx("canvas",{ref:i,className:"hidden"})]})}):null}function TU(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function LR(n,e){return new Promise((function(t,r){let i;return SU(n).then((function(o){try{return i=o,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(l){return r(l)}}),r)}))}const SU=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:i}})=>{const o=new DataView(i);let l=0;if(o.getUint16(l)!==65496)return t("not a valid JPEG");for(l+=2;;){const u=o.getUint16(l);if(u===65498)break;const h=o.getUint16(l+2);if(u===65505&&o.getUint32(l+4)===1165519206){const f=l+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(i.slice(l,l+2+h))}l+=2+h}return e(new Blob)})),r.readAsArrayBuffer(n)}));var Vm={},AU={get exports(){return Vm},set exports(n){Vm=n}};(function(n){var e,t,r={};AU.exports=r,r.parse=function(i,o){for(var l=r.bin.readUshort,u=r.bin.readUint,h=0,f={},g=new Uint8Array(i),y=g.length-4;u(g,y)!=101010256;)y--;h=y,h+=4;var v=l(g,h+=4);l(g,h+=2);var w=u(g,h+=2),x=u(g,h+=4);h+=4,h=x;for(var N=0;N<v;N++){u(g,h),h+=4,h+=4,h+=4,u(g,h+=4),w=u(g,h+=4);var O=u(g,h+=4),L=l(g,h+=4),H=l(g,h+2),B=l(g,h+4);h+=6;var q=u(g,h+=8);h+=4,h+=L+H+B,r._readLocal(g,q,f,w,O,o)}return f},r._readLocal=function(i,o,l,u,h,f){var g=r.bin.readUshort,y=r.bin.readUint;y(i,o),g(i,o+=4),g(i,o+=2);var v=g(i,o+=2);y(i,o+=2),y(i,o+=4),o+=4;var w=g(i,o+=8),x=g(i,o+=2);o+=2;var N=r.bin.readUTF8(i,o,w);if(o+=w,o+=x,f)l[N]={size:h,csize:u};else{var O=new Uint8Array(i.buffer,o);if(v==0)l[N]=new Uint8Array(O.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var L=new Uint8Array(h);r.inflateRaw(O,L),l[N]=L}}},r.inflateRaw=function(i,o){return r.F.inflate(i,o)},r.inflate=function(i,o){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},r.deflate=function(i,o){o==null&&(o={level:6});var l=0,u=new Uint8Array(50+Math.floor(1.1*i.length));u[l]=120,u[l+1]=156,l+=2,l=r.F.deflateRaw(i,u,l,o.level);var h=r.adler(i,0,i.length);return u[l+0]=h>>>24&255,u[l+1]=h>>>16&255,u[l+2]=h>>>8&255,u[l+3]=h>>>0&255,new Uint8Array(u.buffer,0,l+4)},r.deflateRaw=function(i,o){o==null&&(o={level:6});var l=new Uint8Array(50+Math.floor(1.1*i.length)),u=r.F.deflateRaw(i,l,u,o.level);return new Uint8Array(l.buffer,0,u)},r.encode=function(i,o){o==null&&(o=!1);var l=0,u=r.bin.writeUint,h=r.bin.writeUshort,f={};for(var g in i){var y=!r._noNeed(g)&&!o,v=i[g],w=r.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?r.deflateRaw(v):v}}for(var g in f)l+=f[g].file.length+30+46+2*r.bin.sizeUTF8(g);l+=22;var x=new Uint8Array(l),N=0,O=[];for(var g in f){var L=f[g];O.push(N),N=r._writeHeader(x,N,g,L,0)}var H=0,B=N;for(var g in f)L=f[g],O.push(N),N=r._writeHeader(x,N,g,L,1,O[H++]);var q=N-B;return u(x,N,101010256),N+=4,h(x,N+=4,H),h(x,N+=2,H),u(x,N+=2,q),u(x,N+=4,B),N+=4,N+=2,x.buffer},r._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(i,o,l,u,h,f){var g=r.bin.writeUint,y=r.bin.writeUshort,v=u.file;return g(i,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),y(i,o,20),y(i,o+=2,0),y(i,o+=2,u.cpr?8:0),g(i,o+=2,0),g(i,o+=4,u.crc),g(i,o+=4,v.length),g(i,o+=4,u.usize),y(i,o+=4,r.bin.sizeUTF8(l)),y(i,o+=2,0),o+=2,h==1&&(o+=2,o+=2,g(i,o+=6,f),o+=4),o+=r.bin.writeUTF8(i,o,l),h==0&&(i.set(v,o),o+=v.length),o},r.crc={table:(function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var l=o,u=0;u<8;u++)1&l?l=3988292384^l>>>1:l>>>=1;i[o]=l}return i})(),update:function(i,o,l,u){for(var h=0;h<u;h++)i=r.crc.table[255&(i^o[l+h])]^i>>>8;return i},crc:function(i,o,l){return 4294967295^r.crc.update(4294967295,i,o,l)}},r.adler=function(i,o,l){for(var u=1,h=0,f=o,g=o+l;f<g;){for(var y=Math.min(f+5552,g);f<y;)h+=u+=i[f++];u%=65521,h%=65521}return h<<16|u},r.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,l){i[o]=255&l,i[o+1]=l>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,l){i[o]=255&l,i[o+1]=l>>8&255,i[o+2]=l>>16&255,i[o+3]=l>>24&255},readASCII:function(i,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(i[o+h]);return u},writeASCII:function(i,o,l){for(var u=0;u<l.length;u++)i[o+u]=l.charCodeAt(u)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,l){for(var u,h="",f=0;f<l;f++)h+="%"+r.bin.pad(i[o+f].toString(16));try{u=decodeURIComponent(h)}catch{return r.bin.readASCII(i,o,l)}return u},writeUTF8:function(i,o,l){for(var u=l.length,h=0,f=0;f<u;f++){var g=l.charCodeAt(f);if((4294967168&g)==0)i[o+h]=g,h++;else if((4294965248&g)==0)i[o+h]=192|g>>6,i[o+h+1]=128|g>>0&63,h+=2;else if((4294901760&g)==0)i[o+h]=224|g>>12,i[o+h+1]=128|g>>6&63,i[o+h+2]=128|g>>0&63,h+=3;else{if((4292870144&g)!=0)throw"e";i[o+h]=240|g>>18,i[o+h+1]=128|g>>12&63,i[o+h+2]=128|g>>6&63,i[o+h+3]=128|g>>0&63,h+=4}}return h},sizeUTF8:function(i){for(var o=i.length,l=0,u=0;u<o;u++){var h=i.charCodeAt(u);if((4294967168&h)==0)l++;else if((4294965248&h)==0)l+=2;else if((4294901760&h)==0)l+=3;else{if((4292870144&h)!=0)throw"e";l+=4}}return l}},r.F={},r.F.deflateRaw=function(i,o,l,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=r.F.U,g=r.F._goodIndex;r.F._hash;var y=r.F._putsE,v=0,w=l<<3,x=0,N=i.length;if(u==0){for(;v<N;)y(o,w,v+(C=Math.min(65535,N-v))==N?1:0),w=r.F._copyExact(i,v,C,o,w+8),v+=C;return w>>>3}var O=f.lits,L=f.strt,H=f.prev,B=0,q=0,Y=0,V=0,R=0,E=0;for(N>2&&(L[E=r.F._hash(i,0)]=0),v=0;v<N;v++){if(R=E,v+1<N-2){E=r.F._hash(i,v+1);var T=v+1&32767;H[T]=L[E],L[E]=T}if(x<=v){(B>14e3||q>26697)&&N-v>100&&(x<v&&(O[B]=v-x,B+=2,x=v),w=r.F._writeBlock(v==N-1||x==N?1:0,O,B,V,i,Y,v-Y,o,w),B=q=V=0,Y=v);var k=0;v<N-2&&(k=r.F._bestMatch(i,v,H,R,Math.min(h[2],N-v),h[3]));var C=k>>>16,j=65535&k;if(k!=0){j=65535&k;var D=g(C=k>>>16,f.of0);f.lhst[257+D]++;var G=g(j,f.df0);f.dhst[G]++,V+=f.exb[D]+f.dxb[G],O[B]=C<<23|v-x,O[B+1]=j<<16|D<<8|G,B+=2,x=v+C}else f.lhst[i[v]]++;q++}}for(Y==v&&i.length!=0||(x<v&&(O[B]=v-x,B+=2,x=v),w=r.F._writeBlock(1,O,B,V,i,Y,v-Y,o,w),B=0,q=0,B=q=V=0,Y=v);(7&w)!=0;)w++;return w>>>3},r.F._bestMatch=function(i,o,l,u,h,f){var g=32767&o,y=l[g],v=g-y+32768&32767;if(y==g||u!=r.F._hash(i,o-v))return 0;for(var w=0,x=0,N=Math.min(32767,o);v<=N&&--f!=0&&y!=g;){if(w==0||i[o+w]==i[o+w-v]){var O=r.F._howLong(i,o,v);if(O>w){if(x=v,(w=O)>=h)break;v+2<O&&(O=v+2);for(var L=0,H=0;H<O-2;H++){var B=o-v+H+32768&32767,q=B-l[B]+32768&32767;q>L&&(L=q,y=B)}}}v+=(g=y)-(y=l[g])+32768&32767}return w<<16|x},r.F._howLong=function(i,o,l){if(i[o]!=i[o-l]||i[o+1]!=i[o+1-l]||i[o+2]!=i[o+2-l])return 0;var u=o,h=Math.min(i.length,o+258);for(o+=3;o<h&&i[o]==i[o-l];)o++;return o-u},r.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,o,l,u,h,f,g,y,v){var w,x,N,O,L,H,B,q,Y,V=r.F.U,R=r.F._putsF,E=r.F._putsE;V.lhst[256]++,x=(w=r.F.getTrees())[0],N=w[1],O=w[2],L=w[3],H=w[4],B=w[5],q=w[6],Y=w[7];var T=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),k=u+r.F.contSize(V.fltree,V.lhst)+r.F.contSize(V.fdtree,V.dhst),C=u+r.F.contSize(V.ltree,V.lhst)+r.F.contSize(V.dtree,V.dhst);C+=14+3*B+r.F.contSize(V.itree,V.ihst)+(2*V.ihst[16]+3*V.ihst[17]+7*V.ihst[18]);for(var j=0;j<286;j++)V.lhst[j]=0;for(j=0;j<30;j++)V.dhst[j]=0;for(j=0;j<19;j++)V.ihst[j]=0;var D=T<k&&T<C?0:k<C?1:2;if(R(y,v,i),R(y,v+1,D),v+=3,D==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(h,f,g,y,v)}else{var G,Z;if(D==1&&(G=V.fltree,Z=V.fdtree),D==2){r.F.makeCodes(V.ltree,x),r.F.revCodes(V.ltree,x),r.F.makeCodes(V.dtree,N),r.F.revCodes(V.dtree,N),r.F.makeCodes(V.itree,O),r.F.revCodes(V.itree,O),G=V.ltree,Z=V.dtree,E(y,v,L-257),E(y,v+=5,H-1),E(y,v+=5,B-4),v+=4;for(var P=0;P<B;P++)E(y,v+3*P,V.itree[1+(V.ordr[P]<<1)]);v+=3*B,v=r.F._codeTiny(q,V.itree,y,v),v=r.F._codeTiny(Y,V.itree,y,v)}for(var M=f,ee=0;ee<l;ee+=2){for(var Q=o[ee],X=Q>>>23,$=M+(8388607&Q);M<$;)v=r.F._writeLit(h[M++],G,y,v);if(X!=0){var K=o[ee+1],te=K>>16,ne=K>>8&255,re=255&K;E(y,v=r.F._writeLit(257+ne,G,y,v),X-V.of0[ne]),v+=V.exb[ne],R(y,v=r.F._writeLit(re,Z,y,v),te-V.df0[re]),v+=V.dxb[re],M+=X}}v=r.F._writeLit(256,G,y,v)}return v},r.F._copyExact=function(i,o,l,u,h){var f=h>>>3;return u[f]=l,u[f+1]=l>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(i.buffer,o,l),f),h+(l+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,o=r.F._hufTree(i.lhst,i.ltree,15),l=r.F._hufTree(i.dhst,i.dtree,15),u=[],h=r.F._lenCodes(i.ltree,u),f=[],g=r.F._lenCodes(i.dtree,f),y=0;y<u.length;y+=2)i.ihst[u[y]]++;for(y=0;y<f.length;y+=2)i.ihst[f[y]]++;for(var v=r.F._hufTree(i.ihst,i.itree,7),w=19;w>4&&i.itree[1+(i.ordr[w-1]<<1)]==0;)w--;return[o,l,v,h,g,w,u,f]},r.F.getSecond=function(i){for(var o=[],l=0;l<i.length;l+=2)o.push(i[l+1]);return o},r.F.nonZero=function(i){for(var o="",l=0;l<i.length;l+=2)i[l+1]!=0&&(o+=(l>>1)+",");return o},r.F.contSize=function(i,o){for(var l=0,u=0;u<o.length;u++)l+=o[u]*i[1+(u<<1)];return l},r.F._codeTiny=function(i,o,l,u){for(var h=0;h<i.length;h+=2){var f=i[h],g=i[h+1];u=r.F._writeLit(f,o,l,u);var y=f==16?2:f==17?3:7;f>15&&(r.F._putsE(l,u,g,y),u+=y)}return u},r.F._lenCodes=function(i,o){for(var l=i.length;l!=2&&i[l-1]==0;)l-=2;for(var u=0;u<l;u+=2){var h=i[u+1],f=u+3<l?i[u+3]:-1,g=u+5<l?i[u+5]:-1,y=u==0?-1:i[u-1];if(h==0&&f==h&&g==h){for(var v=u+5;v+2<l&&i[v+2]==h;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(h==y&&f==h&&g==h){for(v=u+5;v+2<l&&i[v+2]==h;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(h,0)}return l>>>1},r.F._hufTree=function(i,o,l){var u=[],h=i.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<h;g++)i[g]!=0&&u.push({lit:g,f:i[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(q,Y){return q.f-Y.f}));var x=u[0],N=u[1],O=0,L=1,H=2;for(u[0]={lit:-1,f:x.f+N.f,l:x,r:N,d:0};L!=y-1;)x=O!=L&&(H==y||u[O].f<u[H].f)?u[O++]:u[H++],N=O!=L&&(H==y||u[O].f<u[H].f)?u[O++]:u[H++],u[L++]={lit:-1,f:x.f+N.f,l:x,r:N};var B=r.F.setDepth(u[L-1],0);for(B>l&&(r.F.restrictDepth(v,l,B),B=l),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return B},r.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(r.F.setDepth(i.l,o+1),r.F.setDepth(i.r,o+1))},r.F.restrictDepth=function(i,o,l){var u=0,h=1<<l-o,f=0;for(i.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<i.length&&i[u].d>o;u++){var g=i[u].d;i[u].d=o,f+=h-(1<<l-g)}for(f>>>=l-o;f>0;)(g=i[u].d)<o?(i[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)i[u].d==o&&f<0&&(i[u].d--,f++);f!=0&&console.log("debt left")},r.F._goodIndex=function(i,o){var l=0;return o[16|l]<=i&&(l|=16),o[8|l]<=i&&(l|=8),o[4|l]<=i&&(l|=4),o[2|l]<=i&&(l|=2),o[1|l]<=i&&(l|=1),l},r.F._writeLit=function(i,o,l,u){return r.F._putsF(l,u,o[i<<1]),u+o[1+(i<<1)]},r.F.inflate=function(i,o){var l=Uint8Array;if(i[0]==3&&i[1]==0)return o||new l(0);var u=r.F,h=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,x=u.U,N=o==null;N&&(o=new l(i.length>>>2<<3));for(var O,L,H=0,B=0,q=0,Y=0,V=0,R=0,E=0,T=0,k=0;H==0;)if(H=h(i,k,1),B=h(i,k+1,2),k+=3,B!=0){if(N&&(o=r.F._check(o,T+(1<<17))),B==1&&(O=x.flmap,L=x.fdmap,R=511,E=31),B==2){q=f(i,k,5)+257,Y=f(i,k+5,5)+1,V=f(i,k+10,4)+4,k+=14;for(var C=0;C<38;C+=2)x.itree[C]=0,x.itree[C+1]=0;var j=1;for(C=0;C<V;C++){var D=f(i,k+3*C,3);x.itree[1+(x.ordr[C]<<1)]=D,D>j&&(j=D)}k+=3*V,y(x.itree,j),v(x.itree,j,x.imap),O=x.lmap,L=x.dmap,k=g(x.imap,(1<<j)-1,q+Y,i,k,x.ttree);var G=u._copyOut(x.ttree,0,q,x.ltree);R=(1<<G)-1;var Z=u._copyOut(x.ttree,q,Y,x.dtree);E=(1<<Z)-1,y(x.ltree,G),v(x.ltree,G,O),y(x.dtree,Z),v(x.dtree,Z,L)}for(;;){var P=O[w(i,k)&R];k+=15&P;var M=P>>>4;if(!(M>>>8))o[T++]=M;else{if(M==256)break;var ee=T+M-254;if(M>264){var Q=x.ldef[M-257];ee=T+(Q>>>3)+f(i,k,7&Q),k+=7&Q}var X=L[w(i,k)&E];k+=15&X;var $=X>>>4,K=x.ddef[$],te=(K>>>4)+h(i,k,15&K);for(k+=15&K,N&&(o=r.F._check(o,T+(1<<17)));T<ee;)o[T]=o[T++-te],o[T]=o[T++-te],o[T]=o[T++-te],o[T]=o[T++-te];T=ee}}}else{(7&k)!=0&&(k+=8-(7&k));var ne=4+(k>>>3),re=i[ne-4]|i[ne-3]<<8;N&&(o=r.F._check(o,T+re)),o.set(new l(i.buffer,i.byteOffset+ne,re),T),k=ne+re<<3,T+=re}return o.length==T?o:o.slice(0,T)},r.F._check=function(i,o){var l=i.length;if(o<=l)return i;var u=new Uint8Array(Math.max(l<<1,o));return u.set(i,0),u},r.F._decodeTiny=function(i,o,l,u,h,f){for(var g=r.F._bitsE,y=r.F._get17,v=0;v<l;){var w=i[y(u,h)&o];h+=15&w;var x=w>>>4;if(x<=15)f[v]=x,v++;else{var N=0,O=0;x==16?(O=3+g(u,h,2),h+=2,N=f[v-1]):x==17?(O=3+g(u,h,3),h+=3):x==18&&(O=11+g(u,h,7),h+=7);for(var L=v+O;v<L;)f[v]=N,v++}}return h},r.F._copyOut=function(i,o,l,u){for(var h=0,f=0,g=u.length>>>1;f<l;){var y=i[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>h&&(h=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return h},r.F.makeCodes=function(i,o){for(var l,u,h,f,g=r.F.U,y=i.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[i[w]]++;var x=g.next_code;for(l=0,v[0]=0,u=1;u<=o;u++)l=l+v[u-1]<<1,x[u]=l;for(h=0;h<y;h+=2)(f=i[h+1])!=0&&(i[h]=x[f],x[f]++)},r.F.codes2map=function(i,o,l){for(var u=i.length,h=r.F.U.rev15,f=0;f<u;f+=2)if(i[f+1]!=0)for(var g=f>>1,y=i[f+1],v=g<<4|y,w=o-y,x=i[f]<<w,N=x+(1<<w);x!=N;)l[h[x]>>>15-o]=v,x++},r.F.revCodes=function(i,o){for(var l=r.F.U.rev15,u=15-o,h=0;h<i.length;h+=2){var f=i[h]<<o-i[h+1];i[h]=l[f]>>>u}},r.F._putsE=function(i,o,l){l<<=7&o;var u=o>>>3;i[u]|=l,i[u+1]|=l>>>8},r.F._putsF=function(i,o,l){l<<=7&o;var u=o>>>3;i[u]|=l,i[u+1]|=l>>>8,i[u+2]|=l>>>16},r.F._bitsE=function(i,o,l){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<l)-1},r.F._bitsF=function(i,o,l){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<l)-1},r.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=r.F.U,o=0;o<32768;o++){var l=o;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,i.rev15[o]=(l>>>16|l<<16)>>>17}function u(h,f,g){for(;f--!=0;)h.push(0,g)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];u(i.fltree,144,8),u(i.fltree,112,9),u(i.fltree,24,7),u(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),u(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),u(i.itree,19,0),u(i.ltree,286,0),u(i.dtree,30,0),u(i.ttree,320,0)})()})();var kU=TU({__proto__:null,default:Vm},[Vm]);const ss=(function(){var n={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let x=0;x<v;x++)w+=String.fromCharCode(g[y+x]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let x=0;x<v;x++)w.push(g[y+x]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,x="";for(let N=0;N<v;N++)x+=`%${n.pad(g[y+N].toString(16))}`;try{w=decodeURIComponent(x)}catch{return n.readASCII(g,y,v)}return w}};function e(g,y,v,w){const x=y*v,N=o(w),O=Math.ceil(y*N/8),L=new Uint8Array(4*x),H=new Uint32Array(L.buffer),{ctype:B}=w,{depth:q}=w,Y=n.readUshort;if(B==6){const Q=x<<2;if(q==8)for(var V=0;V<Q;V+=4)L[V]=g[V],L[V+1]=g[V+1],L[V+2]=g[V+2],L[V+3]=g[V+3];if(q==16)for(V=0;V<Q;V++)L[V]=g[V<<1]}else if(B==2){const Q=w.tabs.tRNS;if(Q==null){if(q==8)for(V=0;V<x;V++){var R=3*V;H[V]=255<<24|g[R+2]<<16|g[R+1]<<8|g[R]}if(q==16)for(V=0;V<x;V++)R=6*V,H[V]=255<<24|g[R+4]<<16|g[R+2]<<8|g[R]}else{var E=Q[0];const X=Q[1],$=Q[2];if(q==8)for(V=0;V<x;V++){var T=V<<2;R=3*V,H[V]=255<<24|g[R+2]<<16|g[R+1]<<8|g[R],g[R]==E&&g[R+1]==X&&g[R+2]==$&&(L[T+3]=0)}if(q==16)for(V=0;V<x;V++)T=V<<2,R=6*V,H[V]=255<<24|g[R+4]<<16|g[R+2]<<8|g[R],Y(g,R)==E&&Y(g,R+2)==X&&Y(g,R+4)==$&&(L[T+3]=0)}}else if(B==3){const Q=w.tabs.PLTE,X=w.tabs.tRNS,$=X?X.length:0;if(q==1)for(var k=0;k<v;k++){var C=k*O,j=k*y;for(V=0;V<y;V++){T=j+V<<2;var D=3*(G=g[C+(V>>3)]>>7-((7&V)<<0)&1);L[T]=Q[D],L[T+1]=Q[D+1],L[T+2]=Q[D+2],L[T+3]=G<$?X[G]:255}}if(q==2)for(k=0;k<v;k++)for(C=k*O,j=k*y,V=0;V<y;V++)T=j+V<<2,D=3*(G=g[C+(V>>2)]>>6-((3&V)<<1)&3),L[T]=Q[D],L[T+1]=Q[D+1],L[T+2]=Q[D+2],L[T+3]=G<$?X[G]:255;if(q==4)for(k=0;k<v;k++)for(C=k*O,j=k*y,V=0;V<y;V++)T=j+V<<2,D=3*(G=g[C+(V>>1)]>>4-((1&V)<<2)&15),L[T]=Q[D],L[T+1]=Q[D+1],L[T+2]=Q[D+2],L[T+3]=G<$?X[G]:255;if(q==8)for(V=0;V<x;V++){var G;T=V<<2,D=3*(G=g[V]),L[T]=Q[D],L[T+1]=Q[D+1],L[T+2]=Q[D+2],L[T+3]=G<$?X[G]:255}}else if(B==4){if(q==8)for(V=0;V<x;V++){T=V<<2;var Z=g[P=V<<1];L[T]=Z,L[T+1]=Z,L[T+2]=Z,L[T+3]=g[P+1]}if(q==16)for(V=0;V<x;V++){var P;T=V<<2,Z=g[P=V<<2],L[T]=Z,L[T+1]=Z,L[T+2]=Z,L[T+3]=g[P+2]}}else if(B==0)for(E=w.tabs.tRNS?w.tabs.tRNS:-1,k=0;k<v;k++){const Q=k*O,X=k*y;if(q==1)for(var M=0;M<y;M++){var ee=(Z=255*(g[Q+(M>>>3)]>>>7-(7&M)&1))==255*E?0:255;H[X+M]=ee<<24|Z<<16|Z<<8|Z}else if(q==2)for(M=0;M<y;M++)ee=(Z=85*(g[Q+(M>>>2)]>>>6-((3&M)<<1)&3))==85*E?0:255,H[X+M]=ee<<24|Z<<16|Z<<8|Z;else if(q==4)for(M=0;M<y;M++)ee=(Z=17*(g[Q+(M>>>1)]>>>4-((1&M)<<2)&15))==17*E?0:255,H[X+M]=ee<<24|Z<<16|Z<<8|Z;else if(q==8)for(M=0;M<y;M++)ee=(Z=g[Q+M])==E?0:255,H[X+M]=ee<<24|Z<<16|Z<<8|Z;else if(q==16)for(M=0;M<y;M++)Z=g[Q+(M<<1)],ee=Y(g,Q+(M<<1))==E?0:255,H[X+M]=ee<<24|Z<<16|Z<<8|Z}return L}function t(g,y,v,w){const x=o(g),N=Math.ceil(v*x/8),O=new Uint8Array((N+1+g.interlace)*w);return y=g.tabs.CgBI?i(y,O):r(y,O),g.interlace==0?y=l(y,g,0,v,w):g.interlace==1&&(y=(function(H,B){const q=B.width,Y=B.height,V=o(B),R=V>>3,E=Math.ceil(q*V/8),T=new Uint8Array(Y*E);let k=0;const C=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const M=D[Z],ee=G[Z];let Q=0,X=0,$=C[Z];for(;$<Y;)$+=M,X++;let K=j[Z];for(;K<q;)K+=ee,Q++;const te=Math.ceil(Q*V/8);l(H,B,k,Q,X);let ne=0,re=C[Z];for(;re<Y;){let ye=j[Z],ke=k+ne*te<<3;for(;ye<q;){var P;if(V==1&&(P=(P=H[ke>>3])>>7-(7&ke)&1,T[re*E+(ye>>3)]|=P<<7-((7&ye)<<0)),V==2&&(P=(P=H[ke>>3])>>6-(7&ke)&3,T[re*E+(ye>>2)]|=P<<6-((3&ye)<<1)),V==4&&(P=(P=H[ke>>3])>>4-(7&ke)&15,T[re*E+(ye>>1)]|=P<<4-((1&ye)<<2)),V>=8){const je=re*E+ye*R;for(let ve=0;ve<R;ve++)T[je+ve]=H[(ke>>3)+ve]}ke+=V,ye+=ee}ne++,re+=M}Q*X!=0&&(k+=X*(1+te)),Z+=1}return T})(y,g)),y}function r(g,y){return i(new Uint8Array(g.buffer,2,g.length-6),y)}var i=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let x,N,O=0,L=0,H=0,B=0,q=0,Y=0,V=0,R=0,E=0;if(y[0]==3&&y[1]==0)return v||new w(0);const T=g.H,k=T.b,C=T.e,j=T.R,D=T.n,G=T.A,Z=T.Z,P=T.m,M=v==null;for(M&&(v=new w(y.length>>>2<<5));O==0;)if(O=k(y,E,1),L=k(y,E+1,2),E+=3,L!=0){if(M&&(v=g.H.W(v,R+(1<<17))),L==1&&(x=P.J,N=P.h,Y=511,V=31),L==2){H=C(y,E,5)+257,B=C(y,E+5,5)+1,q=C(y,E+10,4)+4,E+=14;let Q=1;for(var ee=0;ee<38;ee+=2)P.Q[ee]=0,P.Q[ee+1]=0;for(ee=0;ee<q;ee++){const K=C(y,E+3*ee,3);P.Q[1+(P.X[ee]<<1)]=K,K>Q&&(Q=K)}E+=3*q,D(P.Q,Q),G(P.Q,Q,P.u),x=P.w,N=P.d,E=j(P.u,(1<<Q)-1,H+B,y,E,P.v);const X=T.V(P.v,0,H,P.C);Y=(1<<X)-1;const $=T.V(P.v,H,B,P.D);V=(1<<$)-1,D(P.C,X),G(P.C,X,x),D(P.D,$),G(P.D,$,N)}for(;;){const Q=x[Z(y,E)&Y];E+=15&Q;const X=Q>>>4;if(!(X>>>8))v[R++]=X;else{if(X==256)break;{let $=R+X-254;if(X>264){const ye=P.q[X-257];$=R+(ye>>>3)+C(y,E,7&ye),E+=7&ye}const K=N[Z(y,E)&V];E+=15&K;const te=K>>>4,ne=P.c[te],re=(ne>>>4)+k(y,E,15&ne);for(E+=15&ne;R<$;)v[R]=v[R++-re],v[R]=v[R++-re],v[R]=v[R++-re],v[R]=v[R++-re];R=$}}}}else{(7&E)!=0&&(E+=8-(7&E));const Q=4+(E>>>3),X=y[Q-4]|y[Q-3]<<8;M&&(v=g.H.W(v,R+X)),v.set(new w(y.buffer,y.byteOffset+Q,X),R),E=Q+X<<3,R+=X}return v.length==R?v:v.slice(0,R)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const x=new Uint8Array(w<<1);return x.set(y,0),x},g.H.R=function(y,v,w,x,N,O){const L=g.H.e,H=g.H.Z;let B=0;for(;B<w;){const q=y[H(x,N)&v];N+=15&q;const Y=q>>>4;if(Y<=15)O[B]=Y,B++;else{let V=0,R=0;Y==16?(R=3+L(x,N,2),N+=2,V=O[B-1]):Y==17?(R=3+L(x,N,3),N+=3):Y==18&&(R=11+L(x,N,7),N+=7);const E=B+R;for(;B<E;)O[B]=V,B++}}return N},g.H.V=function(y,v,w,x){let N=0,O=0;const L=x.length>>>1;for(;O<w;){const H=y[O+v];x[O<<1]=0,x[1+(O<<1)]=H,H>N&&(N=H),O++}for(;O<L;)x[O<<1]=0,x[1+(O<<1)]=0,O++;return N},g.H.n=function(y,v){const w=g.H.m,x=y.length;let N,O,L,H;const B=w.j;for(var q=0;q<=v;q++)B[q]=0;for(q=1;q<x;q+=2)B[y[q]]++;const Y=w.K;for(N=0,B[0]=0,O=1;O<=v;O++)N=N+B[O-1]<<1,Y[O]=N;for(L=0;L<x;L+=2)H=y[L+1],H!=0&&(y[L]=Y[H],Y[H]++)},g.H.A=function(y,v,w){const x=y.length,N=g.H.m.r;for(let O=0;O<x;O+=2)if(y[O+1]!=0){const L=O>>1,H=y[O+1],B=L<<4|H,q=v-H;let Y=y[O]<<q;const V=Y+(1<<q);for(;Y!=V;)w[N[Y]>>>15-v]=B,Y++}},g.H.l=function(y,v){const w=g.H.m.r,x=15-v;for(let N=0;N<y.length;N+=2){const O=y[N]<<v-y[N+1];y[N]=w[O]>>>x}},g.H.M=function(y,v,w){w<<=7&v;const x=v>>>3;y[x]|=w,y[x+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const x=v>>>3;y[x]|=w,y[x+1]|=w>>>8,y[x+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let x=v;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,y.r[v]=(x>>>16|x<<16)>>>17}function w(x,N,O){for(;N--!=0;)x.push(0,O)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function l(g,y,v,w,x){let N=o(y);const O=Math.ceil(w*N/8);let L,H;N=Math.ceil(N/8);let B=g[v],q=0;if(B>1&&(g[v]=[0,0,1][B-2]),B==3)for(q=N;q<O;q++)g[q+1]=g[q+1]+(g[q+1-N]>>>1)&255;for(let Y=0;Y<x;Y++)if(L=v+Y*O,H=L+Y+1,B=g[H-1],q=0,B==0)for(;q<O;q++)g[L+q]=g[H+q];else if(B==1){for(;q<N;q++)g[L+q]=g[H+q];for(;q<O;q++)g[L+q]=g[H+q]+g[L+q-N]}else if(B==2)for(;q<O;q++)g[L+q]=g[H+q]+g[L+q-O];else if(B==3){for(;q<N;q++)g[L+q]=g[H+q]+(g[L+q-O]>>>1);for(;q<O;q++)g[L+q]=g[H+q]+(g[L+q-O]+g[L+q-N]>>>1)}else{for(;q<N;q++)g[L+q]=g[H+q]+u(0,g[L+q-O],0);for(;q<O;q++)g[L+q]=g[H+q]+u(g[L+q-N],g[L+q-O],g[L+q-N-O])}return g}function u(g,y,v){const w=g+y-v,x=w-g,N=w-y,O=w-v;return x*x<=N*N&&x*x<=O*O?g:N*N<=O*O?y:v}function h(g,y,v){v.width=n.readUint(g,y),y+=4,v.height=n.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,x,N,O,L,H){const B=Math.min(y,x),q=Math.min(v,N);let Y=0,V=0;for(let Z=0;Z<q;Z++)for(let P=0;P<B;P++)if(O>=0&&L>=0?(Y=Z*y+P<<2,V=(L+Z)*x+O+P<<2):(Y=(-L+Z)*y-O+P<<2,V=Z*x+P<<2),H==0)w[V]=g[Y],w[V+1]=g[Y+1],w[V+2]=g[Y+2],w[V+3]=g[Y+3];else if(H==1){var R=g[Y+3]*.00392156862745098,E=g[Y]*R,T=g[Y+1]*R,k=g[Y+2]*R,C=w[V+3]*(1/255),j=w[V]*C,D=w[V+1]*C,G=w[V+2]*C;const M=1-R,ee=R+C*M,Q=ee==0?0:1/ee;w[V+3]=255*ee,w[V+0]=(E+j*M)*Q,w[V+1]=(T+D*M)*Q,w[V+2]=(k+G*M)*Q}else if(H==2)R=g[Y+3],E=g[Y],T=g[Y+1],k=g[Y+2],C=w[V+3],j=w[V],D=w[V+1],G=w[V+2],R==C&&E==j&&T==D&&k==G?(w[V]=0,w[V+1]=0,w[V+2]=0,w[V+3]=0):(w[V]=E,w[V+1]=T,w[V+2]=k,w[V+3]=R);else if(H==3){if(R=g[Y+3],E=g[Y],T=g[Y+1],k=g[Y+2],C=w[V+3],j=w[V],D=w[V+1],G=w[V+2],R==C&&E==j&&T==D&&k==G)continue;if(R<220&&C>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const x=n,N=x.readUshort,O=x.readUint,L={tabs:{},frames:[]},H=new Uint8Array(v.length);let B,q=0,Y=0;const V=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(v[R]!=V[R])throw"The input is not a PNG file!";for(;w<v.length;){const Z=x.readUint(v,w);w+=4;const P=x.readASCII(v,w,4);if(w+=4,P=="IHDR")h(v,w,L);else if(P=="iCCP"){for(var E=w;v[E]!=0;)E++;x.readASCII(v,w,E-w),v[E+1];const M=v.slice(E+2,w+Z);let ee=null;try{ee=r(M)}catch{ee=i(M)}L.tabs[P]=ee}else if(P=="CgBI")L.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(R=0;R<Z;R++)H[q+R]=v[w+R];q+=Z}else if(P=="acTL")L.tabs[P]={num_frames:O(v,w),num_plays:O(v,w+4)},B=new Uint8Array(v.length);else if(P=="fcTL"){Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,B.slice(0,Y),G.rect.width,G.rect.height),Y=0);const M={x:O(v,w+12),y:O(v,w+16),width:O(v,w+4),height:O(v,w+8)};let ee=N(v,w+22);ee=N(v,w+20)/(ee==0?100:ee);const Q={rect:M,delay:Math.round(1e3*ee),dispose:v[w+24],blend:v[w+25]};L.frames.push(Q)}else if(P=="fdAT"){for(R=0;R<Z-4;R++)B[Y+R]=v[w+R+4];Y+=Z-4}else if(P=="pHYs")L.tabs[P]=[x.readUint(v,w),x.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(L.tabs[P]=[],R=0;R<8;R++)L.tabs[P].push(x.readUint(v,w+4*R));else if(P=="tEXt"||P=="zTXt"){L.tabs[P]==null&&(L.tabs[P]={});var T=x.nextZero(v,w),k=x.readASCII(v,w,T-w),C=w+Z-T-1;if(P=="tEXt")D=x.readASCII(v,T+1,C);else{var j=r(v.slice(T+2,T+2+C));D=x.readUTF8(j,0,j.length)}L.tabs[P][k]=D}else if(P=="iTXt"){L.tabs[P]==null&&(L.tabs[P]={}),T=0,E=w,T=x.nextZero(v,E),k=x.readASCII(v,E,T-E);const M=v[E=T+1];var D;v[E+1],E+=2,T=x.nextZero(v,E),x.readASCII(v,E,T-E),E=T+1,T=x.nextZero(v,E),x.readUTF8(v,E,T-E),C=Z-((E=T+1)-w),M==0?D=x.readUTF8(v,E,C):(j=r(v.slice(E,E+C)),D=x.readUTF8(j,0,j.length)),L.tabs[P][k]=D}else if(P=="PLTE")L.tabs[P]=x.readBytes(v,w,Z);else if(P=="hIST"){const M=L.tabs.PLTE.length/3;for(L.tabs[P]=[],R=0;R<M;R++)L.tabs[P].push(N(v,w+2*R))}else if(P=="tRNS")L.ctype==3?L.tabs[P]=x.readBytes(v,w,Z):L.ctype==0?L.tabs[P]=N(v,w):L.ctype==2&&(L.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]);else if(P=="gAMA")L.tabs[P]=x.readUint(v,w)/1e5;else if(P=="sRGB")L.tabs[P]=v[w];else if(P=="bKGD")L.ctype==0||L.ctype==4?L.tabs[P]=[N(v,w)]:L.ctype==2||L.ctype==6?L.tabs[P]=[N(v,w),N(v,w+2),N(v,w+4)]:L.ctype==3&&(L.tabs[P]=v[w]);else if(P=="IEND")break;w+=Z,x.readUint(v,w),w+=4}var G;return Y!=0&&((G=L.frames[L.frames.length-1]).data=t(L,B.slice(0,Y),G.rect.width,G.rect.height)),L.data=t(L,H,L.width,L.height),delete L.compress,delete L.interlace,delete L.filter,L},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const x=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const N=v*w*4,O=new Uint8Array(N),L=new Uint8Array(N),H=new Uint8Array(N);for(let q=0;q<y.frames.length;q++){const Y=y.frames[q],V=Y.rect.x,R=Y.rect.y,E=Y.rect.width,T=Y.rect.height,k=e(Y.data,E,T,y);if(q!=0)for(var B=0;B<N;B++)H[B]=O[B];if(Y.blend==0?f(k,E,T,O,v,w,V,R,0):Y.blend==1&&f(k,E,T,O,v,w,V,R,1),x.push(O.buffer.slice(0)),Y.dispose!=0){if(Y.dispose==1)f(L,E,T,O,v,w,V,R,0);else if(Y.dispose==2)for(B=0;B<N;B++)O[B]=H[B]}}return x},_paeth:u,_copyTile:f,_bin:n}})();(function(){const{_copyTile:n}=ss,{_bin:e}=ss,t=ss._paeth;var r={table:(function(){const E=new Uint32Array(256);for(let T=0;T<256;T++){let k=T;for(let C=0;C<8;C++)1&k?k=3988292384^k>>>1:k>>>=1;E[T]=k}return E})(),update(E,T,k,C){for(let j=0;j<C;j++)E=r.table[255&(E^T[k+j])]^E>>>8;return E},crc:(E,T,k)=>4294967295^r.update(4294967295,E,T,k)};function i(E,T,k,C){T[k]+=E[0]*C>>4,T[k+1]+=E[1]*C>>4,T[k+2]+=E[2]*C>>4,T[k+3]+=E[3]*C>>4}function o(E){return Math.max(0,Math.min(255,E))}function l(E,T){const k=E[0]-T[0],C=E[1]-T[1],j=E[2]-T[2],D=E[3]-T[3];return k*k+C*C+j*j+D*D}function u(E,T,k,C,j,D,G){G==null&&(G=1);const Z=C.length,P=[];for(var M=0;M<Z;M++){const re=C[M];P.push([re>>>0&255,re>>>8&255,re>>>16&255,re>>>24&255])}for(M=0;M<Z;M++){let re=4294967295;for(var ee=0,Q=0;Q<Z;Q++){var X=l(P[M],P[Q]);Q!=M&&X<re&&(re=X,ee=Q)}}const $=new Uint32Array(j.buffer),K=new Int16Array(T*k*4),te=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<te.length;M++)te[M]=255*((te[M]+.5)/16-.5);for(let re=0;re<k;re++)for(let ye=0;ye<T;ye++){var ne;M=4*(re*T+ye),G!=2?ne=[o(E[M]+K[M]),o(E[M+1]+K[M+1]),o(E[M+2]+K[M+2]),o(E[M+3]+K[M+3])]:(X=te[4*(3&re)+(3&ye)],ne=[o(E[M]+X),o(E[M+1]+X),o(E[M+2]+X),o(E[M+3]+X)]),ee=0;let ke=16777215;for(Q=0;Q<Z;Q++){const Te=l(ne,P[Q]);Te<ke&&(ke=Te,ee=Q)}const je=P[ee],ve=[ne[0]-je[0],ne[1]-je[1],ne[2]-je[2],ne[3]-je[3]];G==1&&(ye!=T-1&&i(ve,K,M+4,7),re!=k-1&&(ye!=0&&i(ve,K,M+4*T-4,3),i(ve,K,M+4*T,5),ye!=T-1&&i(ve,K,M+4*T+4,1))),D[M>>2]=ee,$[M>>2]=C[ee]}}function h(E,T,k,C,j){j==null&&(j={});const{crc:D}=r,G=e.writeUint,Z=e.writeUshort,P=e.writeASCII;let M=8;const ee=E.frames.length>1;let Q,X=!1,$=33+(ee?20:0);if(j.sRGB!=null&&($+=13),j.pHYs!=null&&($+=21),j.iCCP!=null&&(Q=pako.deflate(j.iCCP),$+=21+Q.length+4),E.ctype==3){for(var K=E.plte.length,te=0;te<K;te++)E.plte[te]>>>24!=255&&(X=!0);$+=8+3*K+4+(X?8+1*K+4:0)}for(var ne=0;ne<E.frames.length;ne++)ee&&($+=38),$+=(je=E.frames[ne]).cimg.length+12,ne!=0&&($+=4);$+=12;const re=new Uint8Array($),ye=[137,80,78,71,13,10,26,10];for(te=0;te<8;te++)re[te]=ye[te];if(G(re,M,13),M+=4,P(re,M,"IHDR"),M+=4,G(re,M,T),M+=4,G(re,M,k),M+=4,re[M]=E.depth,M++,re[M]=E.ctype,M++,re[M]=0,M++,re[M]=0,M++,re[M]=0,M++,G(re,M,D(re,M-17,17)),M+=4,j.sRGB!=null&&(G(re,M,1),M+=4,P(re,M,"sRGB"),M+=4,re[M]=j.sRGB,M++,G(re,M,D(re,M-5,5)),M+=4),j.iCCP!=null){const ve=13+Q.length;G(re,M,ve),M+=4,P(re,M,"iCCP"),M+=4,P(re,M,"ICC profile"),M+=11,M+=2,re.set(Q,M),M+=Q.length,G(re,M,D(re,M-(ve+4),ve+4)),M+=4}if(j.pHYs!=null&&(G(re,M,9),M+=4,P(re,M,"pHYs"),M+=4,G(re,M,j.pHYs[0]),M+=4,G(re,M,j.pHYs[1]),M+=4,re[M]=j.pHYs[2],M++,G(re,M,D(re,M-13,13)),M+=4),ee&&(G(re,M,8),M+=4,P(re,M,"acTL"),M+=4,G(re,M,E.frames.length),M+=4,G(re,M,j.loop!=null?j.loop:0),M+=4,G(re,M,D(re,M-12,12)),M+=4),E.ctype==3){for(G(re,M,3*(K=E.plte.length)),M+=4,P(re,M,"PLTE"),M+=4,te=0;te<K;te++){const ve=3*te,Te=E.plte[te],$e=255&Te,Ze=Te>>>8&255,At=Te>>>16&255;re[M+ve+0]=$e,re[M+ve+1]=Ze,re[M+ve+2]=At}if(M+=3*K,G(re,M,D(re,M-3*K-4,3*K+4)),M+=4,X){for(G(re,M,K),M+=4,P(re,M,"tRNS"),M+=4,te=0;te<K;te++)re[M+te]=E.plte[te]>>>24&255;M+=K,G(re,M,D(re,M-K-4,K+4)),M+=4}}let ke=0;for(ne=0;ne<E.frames.length;ne++){var je=E.frames[ne];ee&&(G(re,M,26),M+=4,P(re,M,"fcTL"),M+=4,G(re,M,ke++),M+=4,G(re,M,je.rect.width),M+=4,G(re,M,je.rect.height),M+=4,G(re,M,je.rect.x),M+=4,G(re,M,je.rect.y),M+=4,Z(re,M,C[ne]),M+=2,Z(re,M,1e3),M+=2,re[M]=je.dispose,M++,re[M]=je.blend,M++,G(re,M,D(re,M-30,30)),M+=4);const ve=je.cimg;G(re,M,(K=ve.length)+(ne==0?0:4)),M+=4;const Te=M;P(re,M,ne==0?"IDAT":"fdAT"),M+=4,ne!=0&&(G(re,M,ke++),M+=4),re.set(ve,M),M+=K,G(re,M,D(re,Te,M-Te)),M+=4}return G(re,M,0),M+=4,P(re,M,"IEND"),M+=4,G(re,M,D(re,M-4,4)),M+=4,re.buffer}function f(E,T,k){for(let C=0;C<E.frames.length;C++){const j=E.frames[C];j.rect.width;const D=j.rect.height,G=new Uint8Array(D*j.bpl+D);j.cimg=w(j.img,D,j.bpp,j.bpl,G,T,k)}}function g(E,T,k,C,j){const D=j[0],G=j[1],Z=j[2],P=j[3],M=j[4],ee=j[5];let Q=6,X=8,$=255;for(var K=0;K<E.length;K++){const ut=new Uint8Array(E[K]);for(var te=ut.length,ne=0;ne<te;ne+=4)$&=ut[ne+3]}const re=$!=255,ye=(function(lt,dt,We,pe,Se,He){const Le=[];for(var Ee=0;Ee<lt.length;Ee++){const qt=new Uint8Array(lt[Ee]),Pn=new Uint32Array(qt.buffer);var at;let Tn=0,Yt=0,kt=dt,tn=We,Ot=pe?1:0;if(Ee!=0){const Zo=He||pe||Ee==1||Le[Ee-2].dispose!=0?1:2;let ds=0,Ua=1e9;for(let jn=0;jn<Zo;jn++){var _t=new Uint8Array(lt[Ee-1-jn]);const Js=new Uint32Array(lt[Ee-1-jn]);let vt=dt,mn=We,Sn=-1,An=-1;for(let Ir=0;Ir<We;Ir++)for(let _n=0;_n<dt;_n++)Pn[mt=Ir*dt+_n]!=Js[mt]&&(_n<vt&&(vt=_n),_n>Sn&&(Sn=_n),Ir<mn&&(mn=Ir),Ir>An&&(An=Ir));Sn==-1&&(vt=mn=Sn=An=0),Se&&((1&vt)==1&&vt--,(1&mn)==1&&mn--);const el=(Sn-vt+1)*(An-mn+1);el<Ua&&(Ua=el,ds=jn,Tn=vt,Yt=mn,kt=Sn-vt+1,tn=An-mn+1)}_t=new Uint8Array(lt[Ee-1-ds]),ds==1&&(Le[Ee-1].dispose=2),at=new Uint8Array(kt*tn*4),n(_t,dt,We,at,kt,tn,-Tn,-Yt,0),Ot=n(qt,dt,We,at,kt,tn,-Tn,-Yt,3)?1:0,Ot==1?v(qt,dt,We,at,{x:Tn,y:Yt,width:kt,height:tn}):n(qt,dt,We,at,kt,tn,-Tn,-Yt,0)}else at=qt.slice(0);Le.push({rect:{x:Tn,y:Yt,width:kt,height:tn},img:at,blend:Ot,dispose:0})}if(pe)for(Ee=0;Ee<Le.length;Ee++){if((Kn=Le[Ee]).blend==1)continue;const qt=Kn.rect,Pn=Le[Ee-1].rect,Tn=Math.min(qt.x,Pn.x),Yt=Math.min(qt.y,Pn.y),kt={x:Tn,y:Yt,width:Math.max(qt.x+qt.width,Pn.x+Pn.width)-Tn,height:Math.max(qt.y+qt.height,Pn.y+Pn.height)-Yt};Le[Ee-1].dispose=1,Ee-1!=0&&y(lt,dt,We,Le,Ee-1,kt,Se),y(lt,dt,We,Le,Ee,kt,Se)}let Gn=0;if(lt.length!=1)for(var mt=0;mt<Le.length;mt++){var Kn;Gn+=(Kn=Le[mt]).rect.width*Kn.rect.height}return Le})(E,T,k,D,G,Z),ke={},je=[],ve=[];if(C!=0){const ut=[];for(ne=0;ne<ye.length;ne++)ut.push(ye[ne].img.buffer);const lt=(function(Se){let He=0;for(var Le=0;Le<Se.length;Le++)He+=Se[Le].byteLength;const Ee=new Uint8Array(He);let at=0;for(Le=0;Le<Se.length;Le++){const _t=new Uint8Array(Se[Le]),Gn=_t.length;for(let mt=0;mt<Gn;mt+=4){let Kn=_t[mt],qt=_t[mt+1],Pn=_t[mt+2];const Tn=_t[mt+3];Tn==0&&(Kn=qt=Pn=0),Ee[at+mt]=Kn,Ee[at+mt+1]=qt,Ee[at+mt+2]=Pn,Ee[at+mt+3]=Tn}at+=Gn}return Ee.buffer})(ut),dt=N(lt,C);for(ne=0;ne<dt.plte.length;ne++)je.push(dt.plte[ne].est.rgba);let We=0;for(ne=0;ne<ye.length;ne++){const pe=($e=ye[ne]).img.length;var Te=new Uint8Array(dt.inds.buffer,We>>2,pe>>2);ve.push(Te);const Se=new Uint8Array(dt.abuf,We,pe);ee&&u($e.img,$e.rect.width,$e.rect.height,je,Se,Te),$e.img.set(Se),We+=pe}}else for(K=0;K<ye.length;K++){var $e=ye[K];const ut=new Uint32Array($e.img.buffer);var Ze=$e.rect.width;for(te=ut.length,Te=new Uint8Array(te),ve.push(Te),ne=0;ne<te;ne++){const lt=ut[ne];if(ne!=0&&lt==ut[ne-1])Te[ne]=Te[ne-1];else if(ne>Ze&&lt==ut[ne-Ze])Te[ne]=Te[ne-Ze];else{let dt=ke[lt];if(dt==null&&(ke[lt]=dt=je.length,je.push(lt),je.length>=300))break;Te[ne]=dt}}}const At=je.length;for(At<=256&&M==0&&(X=At<=2?1:At<=4?2:At<=16?4:8,X=Math.max(X,P)),K=0;K<ye.length;K++){($e=ye[K]).rect.x,$e.rect.y,Ze=$e.rect.width;const ut=$e.rect.height;let lt=$e.img;new Uint32Array(lt.buffer);let dt=4*Ze,We=4;if(At<=256&&M==0){dt=Math.ceil(X*Ze/8);var Ye=new Uint8Array(dt*ut);const pe=ve[K];for(let Se=0;Se<ut;Se++){ne=Se*dt;const He=Se*Ze;if(X==8)for(var Qe=0;Qe<Ze;Qe++)Ye[ne+Qe]=pe[He+Qe];else if(X==4)for(Qe=0;Qe<Ze;Qe++)Ye[ne+(Qe>>1)]|=pe[He+Qe]<<4-4*(1&Qe);else if(X==2)for(Qe=0;Qe<Ze;Qe++)Ye[ne+(Qe>>2)]|=pe[He+Qe]<<6-2*(3&Qe);else if(X==1)for(Qe=0;Qe<Ze;Qe++)Ye[ne+(Qe>>3)]|=pe[He+Qe]<<7-1*(7&Qe)}lt=Ye,Q=3,We=1}else if(re==0&&ye.length==1){Ye=new Uint8Array(Ze*ut*3);const pe=Ze*ut;for(ne=0;ne<pe;ne++){const Se=3*ne,He=4*ne;Ye[Se]=lt[He],Ye[Se+1]=lt[He+1],Ye[Se+2]=lt[He+2]}lt=Ye,Q=2,We=3,dt=3*Ze}$e.img=lt,$e.bpl=dt,$e.bpp=We}return{ctype:Q,depth:X,plte:je,frames:ye}}function y(E,T,k,C,j,D,G){const Z=Uint8Array,P=Uint32Array,M=new Z(E[j-1]),ee=new P(E[j-1]),Q=j+1<E.length?new Z(E[j+1]):null,X=new Z(E[j]),$=new P(X.buffer);let K=T,te=k,ne=-1,re=-1;for(let ke=0;ke<D.height;ke++)for(let je=0;je<D.width;je++){const ve=D.x+je,Te=D.y+ke,$e=Te*T+ve,Ze=$[$e];Ze==0||C[j-1].dispose==0&&ee[$e]==Ze&&(Q==null||Q[4*$e+3]!=0)||(ve<K&&(K=ve),ve>ne&&(ne=ve),Te<te&&(te=Te),Te>re&&(re=Te))}ne==-1&&(K=te=ne=re=0),G&&((1&K)==1&&K--,(1&te)==1&&te--),D={x:K,y:te,width:ne-K+1,height:re-te+1};const ye=C[j];ye.rect=D,ye.blend=1,ye.img=new Uint8Array(D.width*D.height*4),C[j-1].dispose==0?(n(M,T,k,ye.img,D.width,D.height,-D.x,-D.y,0),v(X,T,k,ye.img,D)):n(X,T,k,ye.img,D.width,D.height,-D.x,-D.y,0)}function v(E,T,k,C,j){n(E,T,k,C,j.width,j.height,-j.x,-j.y,2)}function w(E,T,k,C,j,D,G){const Z=[];let P,M=[0,1,2,3,4];D!=-1?M=[D]:(T*C>5e5||k==1)&&(M=[0]),G&&(P={level:0});const ee=kU;for(var Q=0;Q<M.length;Q++){for(let K=0;K<T;K++)x(j,E,K,C,k,M[Q]);Z.push(ee.deflate(j,P))}let X,$=1e9;for(Q=0;Q<Z.length;Q++)Z[Q].length<$&&(X=Q,$=Z[Q].length);return Z[X]}function x(E,T,k,C,j,D){const G=k*C;let Z=G+k;if(E[Z]=D,Z++,D==0)if(C<500)for(var P=0;P<C;P++)E[Z+P]=T[G+P];else E.set(new Uint8Array(T.buffer,G,C),Z);else if(D==1){for(P=0;P<j;P++)E[Z+P]=T[G+P];for(P=j;P<C;P++)E[Z+P]=T[G+P]-T[G+P-j]+256&255}else if(k==0){for(P=0;P<j;P++)E[Z+P]=T[G+P];if(D==2)for(P=j;P<C;P++)E[Z+P]=T[G+P];if(D==3)for(P=j;P<C;P++)E[Z+P]=T[G+P]-(T[G+P-j]>>1)+256&255;if(D==4)for(P=j;P<C;P++)E[Z+P]=T[G+P]-t(T[G+P-j],0,0)+256&255}else{if(D==2)for(P=0;P<C;P++)E[Z+P]=T[G+P]+256-T[G+P-C]&255;if(D==3){for(P=0;P<j;P++)E[Z+P]=T[G+P]+256-(T[G+P-C]>>1)&255;for(P=j;P<C;P++)E[Z+P]=T[G+P]+256-(T[G+P-C]+T[G+P-j]>>1)&255}if(D==4){for(P=0;P<j;P++)E[Z+P]=T[G+P]+256-t(0,T[G+P-C],0)&255;for(P=j;P<C;P++)E[Z+P]=T[G+P]+256-t(T[G+P-j],T[G+P-C],T[G+P-j-C])&255}}}function N(E,T){const k=new Uint8Array(E),C=k.slice(0),j=new Uint32Array(C.buffer),D=O(C,T),G=D[0],Z=D[1],P=k.length,M=new Uint8Array(P>>2);let ee;if(k.length<2e7)for(var Q=0;Q<P;Q+=4)ee=L(G,X=k[Q]*(1/255),$=k[Q+1]*(1/255),K=k[Q+2]*(1/255),te=k[Q+3]*(1/255)),M[Q>>2]=ee.ind,j[Q>>2]=ee.est.rgba;else for(Q=0;Q<P;Q+=4){var X=k[Q]*.00392156862745098,$=k[Q+1]*(1/255),K=k[Q+2]*(1/255),te=k[Q+3]*(1/255);for(ee=G;ee.left;)ee=H(ee.est,X,$,K,te)<=0?ee.left:ee.right;M[Q>>2]=ee.ind,j[Q>>2]=ee.est.rgba}return{abuf:C.buffer,inds:M,plte:Z}}function O(E,T,k){k==null&&(k=1e-4);const C=new Uint32Array(E.buffer),j={i0:0,i1:E.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=Y(E,j.i0,j.i1),j.est=V(j.bst);const D=[j];for(;D.length<T;){let Z=0,P=0;for(var G=0;G<D.length;G++)D[G].est.L>Z&&(Z=D[G].est.L,P=G);if(Z<k)break;const M=D[P],ee=B(E,C,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=ee||M.i1<=ee){M.est.L=0;continue}const Q={i0:M.i0,i1:ee,bst:null,est:null,tdst:0,left:null,right:null};Q.bst=Y(E,Q.i0,Q.i1),Q.est=V(Q.bst);const X={i0:ee,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:M.bst.N-Q.bst.N},G=0;G<16;G++)X.bst.R[G]=M.bst.R[G]-Q.bst.R[G];for(G=0;G<4;G++)X.bst.m[G]=M.bst.m[G]-Q.bst.m[G];X.est=V(X.bst),M.left=Q,M.right=X,D[P]=Q,D.push(X)}for(D.sort(((Z,P)=>P.bst.N-Z.bst.N)),G=0;G<D.length;G++)D[G].ind=G;return[j,D]}function L(E,T,k,C,j){if(E.left==null)return E.tdst=(function(Q,X,$,K,te){const ne=X-Q[0],re=$-Q[1],ye=K-Q[2],ke=te-Q[3];return ne*ne+re*re+ye*ye+ke*ke})(E.est.q,T,k,C,j),E;const D=H(E.est,T,k,C,j);let G=E.left,Z=E.right;D>0&&(G=E.right,Z=E.left);const P=L(G,T,k,C,j);if(P.tdst<=D*D)return P;const M=L(Z,T,k,C,j);return M.tdst<P.tdst?M:P}function H(E,T,k,C,j){const{e:D}=E;return D[0]*T+D[1]*k+D[2]*C+D[3]*j-E.eMq}function B(E,T,k,C,j,D){for(C-=4;k<C;){for(;q(E,k,j)<=D;)k+=4;for(;q(E,C,j)>D;)C-=4;if(k>=C)break;const G=T[k>>2];T[k>>2]=T[C>>2],T[C>>2]=G,k+=4,C-=4}for(;q(E,k,j)>D;)k-=4;return k+4}function q(E,T,k){return E[T]*k[0]+E[T+1]*k[1]+E[T+2]*k[2]+E[T+3]*k[3]}function Y(E,T,k){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],D=k-T>>2;for(let G=T;G<k;G+=4){const Z=E[G]*.00392156862745098,P=E[G+1]*(1/255),M=E[G+2]*(1/255),ee=E[G+3]*(1/255);j[0]+=Z,j[1]+=P,j[2]+=M,j[3]+=ee,C[0]+=Z*Z,C[1]+=Z*P,C[2]+=Z*M,C[3]+=Z*ee,C[5]+=P*P,C[6]+=P*M,C[7]+=P*ee,C[10]+=M*M,C[11]+=M*ee,C[15]+=ee*ee}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:j,N:D}}function V(E){const{R:T}=E,{m:k}=E,{N:C}=E,j=k[0],D=k[1],G=k[2],Z=k[3],P=C==0?0:1/C,M=[T[0]-j*j*P,T[1]-j*D*P,T[2]-j*G*P,T[3]-j*Z*P,T[4]-D*j*P,T[5]-D*D*P,T[6]-D*G*P,T[7]-D*Z*P,T[8]-G*j*P,T[9]-G*D*P,T[10]-G*G*P,T[11]-G*Z*P,T[12]-Z*j*P,T[13]-Z*D*P,T[14]-Z*G*P,T[15]-Z*Z*P],ee=M,Q=R;let X=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,K=0;if(C!=0)for(let ne=0;ne<16&&(X=Q.multVec(ee,X),K=Math.sqrt(Q.dot(X,X)),X=Q.sml(1/K,X),!(ne!=0&&Math.abs(K-$)<1e-9));ne++)$=K;const te=[j*P,D*P,G*P,Z*P];return{Cov:M,q:te,e:X,L:$,eMq255:Q.dot(Q.sml(255,te),X),eMq:Q.dot(X,te),rgba:(Math.round(255*te[3])<<24|Math.round(255*te[2])<<16|Math.round(255*te[1])<<8|Math.round(255*te[0])<<0)>>>0}}var R={multVec:(E,T)=>[E[0]*T[0]+E[1]*T[1]+E[2]*T[2]+E[3]*T[3],E[4]*T[0]+E[5]*T[1]+E[6]*T[2]+E[7]*T[3],E[8]*T[0]+E[9]*T[1]+E[10]*T[2]+E[11]*T[3],E[12]*T[0]+E[13]*T[1]+E[14]*T[2]+E[15]*T[3]],dot:(E,T)=>E[0]*T[0]+E[1]*T[1]+E[2]*T[2]+E[3]*T[3],sml:(E,T)=>[E*T[0],E*T[1],E*T[2],E*T[3]]};ss.encode=function(T,k,C,j,D,G,Z){j==null&&(j=0),Z==null&&(Z=!1);const P=g(T,k,C,j,[!1,!1,!1,0,Z,!1]);return f(P,-1),h(P,k,C,D,G)},ss.encodeLL=function(T,k,C,j,D,G,Z,P){const M={ctype:0+(j==1?0:2)+(D==0?0:4),depth:G,frames:[]},ee=(j+D)*G,Q=ee*k;for(let X=0;X<T.length;X++)M.frames.push({rect:{x:0,y:0,width:k,height:C},img:new Uint8Array(T[X]),blend:0,dispose:1,bpp:Math.ceil(ee/8),bpl:Math.ceil(Q/8)});return f(M,0,!0),h(M,k,C,Z,P)},ss.encode.compress=g,ss.encode.dither=u,ss.quantize=N,ss.quantize.getKDtree=O,ss.quantize.getNearest=L})();const VR={toArrayBuffer(n,e){const t=n.width,r=n.height,i=t<<2,o=n.getContext("2d").getImageData(0,0,t,r),l=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,h=u*r,f=122+h,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,x,N,O,L=v,H=0,B=0,q=0;function Y(E){y.setUint16(B,E,!0),B+=2}function V(E){y.setUint32(B,E,!0),B+=4}function R(E){B+=E}Y(19778),V(f),R(4),V(122),V(108),V(t),V(-r>>>0),Y(1),Y(32),V(3),V(h),V(2835),V(2835),R(8),V(16711680),V(65280),V(255),V(4278190080),V(1466527264),(function E(){for(;H<r&&L>0;){for(O=122+H*u,w=0;w<i;)L--,x=l[q++],N=x>>>24,y.setUint32(O+w,x<<8|N),w+=4;H++}q<l.length?(L=v,setTimeout(E,VR._dly)):e(g)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var cr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},RU={[cr.CHROME]:16384,[cr.FIREFOX]:11180,[cr.DESKTOP_SAFARI]:16384,[cr.IE]:8192,[cr.IOS]:4096,[cr.ETC]:8192};const pv=typeof window<"u",UR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Um=pv&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),IU=(pv||UR)&&(Um&&Um.getOriginalSymbol(window,"File")||typeof File<"u"&&File),zR=(pv||UR)&&(Um&&Um.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function yv(n,e,t=Date.now()){return new Promise((r=>{const i=n.split(","),o=i[0].match(/:(.*?);/)[1],l=globalThis.atob(i[1]);let u=l.length;const h=new Uint8Array(u);for(;u--;)h[u]=l.charCodeAt(u);const f=new Blob([h],{type:o});f.name=e,f.lastModified=t,r(f)}))}function FR(n){return new Promise(((e,t)=>{const r=new zR;r.onload=()=>e(r.result),r.onerror=i=>t(i),r.readAsDataURL(n)}))}function BR(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>t(i),r.src=n}))}function To(){if(To.cachedResult!==void 0)return To.cachedResult;let n=cr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=cr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=cr.IOS:/Safari/i.test(e)?n=cr.DESKTOP_SAFARI:/Firefox/i.test(e)?n=cr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=cr.IE),To.cachedResult=n,To.cachedResult}function qR(n,e){const t=To(),r=RU[t];let i=n,o=e,l=i*o;const u=i>o?o/i:i/o;for(;l>r*r;){const h=(r+i)/2,f=(r+o)/2;h<f?(o=f,i=f*u):(o=h*u,i=h),l=i*o}return{width:i,height:o}}function kg(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function $R(n,e){const{width:t,height:r}=qR(n.width,n.height),[i,o]=kg(t,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(n,0,0,i.width,i.height),i}function Zf(){return Zf.cachedResult!==void 0||(Zf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Zf.cachedResult}function zm(n,e={}){return new Promise((function(t,r){let i,o;var l=function(){try{return o=$R(i,e.fileType||n.type),t([i,o])}catch(h){return r(h)}},u=function(h){try{var f=function(g){try{throw g}catch(y){return r(y)}};try{let g;return FR(n).then((function(y){try{return g=y,BR(g).then((function(v){try{return i=v,(function(){try{return l()}catch(w){return r(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return r(g)}};try{if(Zf()||[cr.DESKTOP_SAFARI,cr.MOBILE_SAFARI].includes(To()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(h){try{return i=h,l()}catch{return u()}}),u)}catch{u()}}))}function Fm(n,e,t,r,i=1){return new Promise((function(o,l){let u;if(e==="image/png"){let y,v,w;return y=n.getContext("2d"),{data:v}=y.getImageData(0,0,n.width,n.height),w=ss.encode([v.buffer],n.width,n.height,4096*i),u=new Blob([w],{type:e}),u.name=t,u.lastModified=r,h.call(this)}{let y=function(){return h.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>VR.toBlob(n,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=r,y.call(this)}catch(w){return l(w)}}).bind(this),l);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:i}).then((function(w){try{return u=w,u.name=t,u.lastModified=r,v.call(this)}catch(x){return l(x)}}).bind(this),l);{let w;return w=n.toDataURL(e,i),yv(w,t,r).then((function(x){try{return u=x,v.call(this)}catch(N){return l(N)}}).bind(this),l)}}}function h(){return o(u)}}))}function Ns(n){n.width=0,n.height=0}function rc(){return new Promise((function(n,e){let t,r,i,o;return rc.cachedResult!==void 0?n(rc.cachedResult):yv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(l){try{return t=l,zm(t).then((function(u){try{return r=u[1],Fm(r,t.type,t.name,t.lastModified).then((function(h){try{return i=h,Ns(r),zm(i).then((function(f){try{return o=f[0],rc.cachedResult=o.width===1&&o.height===2,n(rc.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(h){return e(h)}}),e)}catch(u){return e(u)}}),e)}))}function HR(n){return new Promise(((e,t)=>{const r=new zR;r.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const l=o.byteLength;let u=2;for(;u<l;){if(o.getUint16(u+2,!1)<=8)return e(-1);const h=o.getUint16(u,!1);if(u+=2,h==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&h)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},r.onerror=i=>t(i),r.readAsArrayBuffer(n)}))}function GR(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:i}=e;let o,l=n;return isFinite(i)&&(t>i||r>i)&&([l,o]=kg(t,r),t>r?(l.width=i,l.height=r/t*i):(l.width=t/r*i,l.height=i),o.drawImage(n,0,0,l.width,l.height),Ns(n)),l}function KR(n,e){const{width:t}=n,{height:r}=n,[i,o]=kg(t,r);switch(e>4&&e<9?(i.width=r,i.height=t):(i.width=t,i.height=r),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,r),Ns(n),i}function ZT(n,e,t=0){return new Promise((function(r,i){let o,l,u,h,f,g,y,v,w,x,N,O,L,H,B,q,Y,V,R,E;function T(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=C,e.onProgress(Math.min(o,100))}function k(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(C,o),100),e.onProgress(o)}return o=t,l=e.maxIteration||10,u=1024*e.maxSizeMB*1024,T(),zm(n,e).then((function(C){try{return[,h]=C,T(),f=GR(h,e),T(),new Promise((function(j,D){var G;if(!(G=e.exifOrientation))return HR(n).then((function(P){try{return G=P,Z.call(this)}catch(M){return D(M)}}).bind(this),D);function Z(){return j(G)}return Z.call(this)})).then((function(j){try{return g=j,T(),rc().then((function(D){try{return y=D?f:KR(f,g),T(),v=e.initialQuality||1,w=e.fileType||n.type,Fm(y,w,n.name,n.lastModified,v).then((function(G){try{{let ee=function(){if(l--&&(B>u||B>L)){let X,$;return X=E?.95*R.width:R.width,$=E?.95*R.height:R.height,[Y,V]=kg(X,$),V.drawImage(R,0,0,X,$),v*=w==="image/png"?.85:.95,Fm(Y,w,n.name,n.lastModified,v).then((function(K){try{return q=K,Ns(R),R=Y,B=q.size,k(Math.min(99,Math.floor((H-B)/(H-u)*100))),ee}catch(te){return i(te)}}),i)}return[1]},Q=function(){return Ns(R),Ns(Y),Ns(f),Ns(y),Ns(h),k(100),r(q)};var P=ee,M=Q;if(x=G,T(),N=x.size>u,O=x.size>n.size,!N&&!O)return k(100),r(x);var Z;return L=n.size,H=x.size,B=H,R=y,E=!e.alwaysKeepResolution&&N,(Z=(function(X){for(;X;){if(X.then)return void X.then(Z,i);try{if(X.pop){if(X.length)return X.pop()?Q.call(this):X;X=ee}else X=X.call(this)}catch($){return i($)}}}).bind(this))(ee)}}catch(ee){return i(ee)}}).bind(this),i)}catch(G){return i(G)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(j){return i(j)}}).bind(this),i)}))}const NU=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Zy;function CU(n,e){return new Promise(((t,r)=>{Zy||(Zy=(function(l){const u=[];return u.push(l),URL.createObjectURL(new Blob(u))})(NU));const i=new Worker(Zy);i.addEventListener("message",(function(l){if(e.signal&&e.signal.aborted)i.terminate();else if(l.data.progress===void 0){if(l.data.error)return r(new Error(l.data.error)),void i.terminate();t(l.data.file),i.terminate()}else e.onProgress(l.data.progress)})),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),i.terminate()})),i.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function dn(n,e){return new Promise((function(t,r){let i,o,l,u,h,f;if(i={...e},l=0,{onProgress:u}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=w=>{l=w,typeof u=="function"&&u(l)},!(n instanceof Blob||n instanceof IU))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||f)return ZT(n,i).then((function(w){try{return o=w,v.call(this)}catch(x){return r(x)}}).bind(this),r);var g=(function(){try{return v.call(this)}catch(w){return r(w)}}).bind(this),y=function(w){try{return ZT(n,i).then((function(x){try{return o=x,g()}catch(N){return r(N)}}),r)}catch(x){return r(x)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",CU(n,i).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{i.preserveExif&&n.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===n.type)&&(o=LR(n,o))}catch{}return t(o)}}))}dn.getDataUrlFromFile=FR,dn.getFilefromDataUrl=yv,dn.loadImage=BR,dn.drawImageInCanvas=$R,dn.drawFileInCanvas=zm,dn.canvasToFile=Fm,dn.getExifOrientation=HR,dn.handleMaxWidthOrHeight=GR,dn.followExifOrientation=KR,dn.cleanupCanvasMemory=Ns,dn.isAutoOrientationInBrowser=rc,dn.approximateBelowMaximumCanvasSizeOfBrowser=qR,dn.copyExifWithoutOrientation=LR,dn.getBrowserName=To,dn.version="2.0.2";function DU(){const{t:n,i18n:e}=Ut(),{currentUser:t}=Rr(),r=kr(),i=er(),{addToast:o}=Va(),l=z.useRef(null),[u,h]=z.useState("landing"),[f,g]=z.useState(""),[y,v]=z.useState({main:null,macro:null}),[w,x]=z.useState(!1),[N,O]=z.useState(null),[L,H]=z.useState(!1),[B,q]=z.useState(!1),[Y,V]=z.useState(!1);z.useEffect(()=>{if(i.state?.refreshId){P(),h("landing");return}if(i.state?.restoredResult){O(i.state.restoredResult),h("result"),i.state?.restoredImages&&(v(i.state.restoredImages),g(i.state.restoredPlantType||""));return}if(t){const K=localStorage.getItem("pending_analysis_backup");if(K)try{const te=JSON.parse(K);O(te.result),v(te.images),g(te.plantType||""),h("result"),localStorage.removeItem("pending_analysis_backup"),o(n("analysis_restored")||"Analysis restored!","success")}catch(te){console.error("Failed to parse backup:",te),localStorage.removeItem("pending_analysis_backup")}}},[i.state,t]);const R=()=>{u==="input_type"&&h("capture_main")},E=()=>{g(""),h("capture_main")},T=()=>{l.current&&(l.current.value="",l.current.click())},k=K=>{K&&j(K),V(!1)},C=async K=>{const te=K.target.files?.[0];if(te){x(!0);try{const re=await dn(te,{maxSizeMB:.8,maxWidthOrHeight:1280,useWebWorker:!0}),ye=new FileReader;ye.onloadend=()=>{const ke=ye.result;j(ke),x(!1)},ye.readAsDataURL(re)}catch(ne){console.error("Image compression failed:",ne),o(n("error_image_process")||"Image processing failed","error"),x(!1)}}},j=async K=>{u==="capture_main"?(v(te=>({...te,main:K})),await D(K)):u==="capture_macro"&&(v(te=>({...te,macro:K})),await D([y.main,K]))},D=async(K,te)=>{x(!0),h("analyzing"),H(!1);try{const ne=await SR(K,e.language,f);if(ne.status==="needs_details")o(n("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),h("capture_macro");else{if(ne.status==="error")throw new Error(ne.error);O(ne),h("result")}}catch(ne){console.error(ne);let re=ne.message||n("error_diagnosis_failed")||"Diagnosis failed.";re.includes("NOT_PLANT")?re=n("error_not_plant"):(re.includes("503")||re.includes("overloaded"))&&(re=n("error_server_busy")),o(re,"error"),h("capture_main")}finally{x(!1)}},G=async()=>{if(t&&!(L||B)){q(!0);try{const K=f||N.plant_name||n("unknown_plant")||"Unknown Plant",te=await AR(t.uid,K,y,N);H(!0),o(n("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{q(!1),r("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:te}})},500)}catch(K){console.error("Manual save failed:",K),o((n("save_fail")||"Failed to save analysis:")+" "+K.message,"error"),q(!1)}}},Z=()=>{const K={result:N,images:y,plantType:f,timestamp:Date.now()};try{localStorage.setItem("pending_analysis_backup",JSON.stringify(K))}catch(te){console.error("Storage full?",te)}r("/login",{state:{pendingResult:N,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},P=()=>{v({main:null,macro:null}),g(""),O(null),H(!1),h("input_type"),l.current&&(l.current.value="")},M=()=>_.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[_.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[_.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),_.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),_.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[_.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[_.jsx(mV,{className:"w-4 h-4 text-amber-500"}),_.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:n("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),_.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[n("hero_title_1")||"Heal your plants with"," ",_.jsx("br",{}),_.jsx("span",{className:"text-gradient drop-shadow-sm",children:n("hero_title_highlight")||"AI Precision"})]}),_.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:n("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),_.jsxs("button",{onClick:()=>h("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[_.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),_.jsxs("span",{className:"relative flex items-center gap-3",children:[_.jsx(lc,{className:"w-6 h-6"}),n("start_diagnosis")]})]})]}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:n("feature_1_title")||"Instant Analysis",desc:n("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:CV,color:"from-yellow-400 to-orange-500"},{title:n("feature_2_title")||"Smart Interactions",desc:n("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:pL,color:"from-blue-400 to-indigo-500"},{title:n("feature_3_title")||"Verified Treatments",desc:n("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:hV,color:"from-green-400 to-emerald-500"}].map((K,te)=>{const ne=K.icon;return _.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[_.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${K.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:_.jsx(ne,{className:"w-7 h-7"})}),_.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:K.title}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:K.desc})]},te)})}),_.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:_.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("summary_title")||"Your Personal Pocket Botanist"}),_.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:n("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),_.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[_.jsx(dv,{className:"w-4 h-4 text-green-500"})," ",n("accuracy_badge")||"95% Accuracy"]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[_.jsx(NT,{className:"w-4 h-4 text-blue-500"})," ",n("macro_support")||"Macro Support"]})]})]}),_.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),_.jsx("img",{src:"/placeholder-plant.png",onError:K=>{K.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),_.jsx(dr,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),ee=()=>_.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:_.jsx(dr,{className:"w-12 h-12"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:n("scan_step_1")}),_.jsx("p",{className:"text-gray-500 mb-6 text-center",children:n("what_plant_question")}),_.jsx("input",{type:"text",value:f,onChange:K=>g(K.target.value),placeholder:n("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),_.jsxs("button",{onClick:R,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[n("next_step")," ",_.jsx(hv,{className:"w-4 h-4"})]}),_.jsx("button",{onClick:E,className:"mt-4 text-gray-500 text-sm hover:underline",children:n("skip")})]}),Q=K=>_.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[_.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:K?n("close_up_photo")||"Close-up Photo":n("scan_step_2")}),_.jsxs("div",{className:"w-full space-y-4",children:[_.jsxs("button",{onClick:()=>V(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[_.jsx(lc,{className:"w-8 h-8"}),_.jsx("span",{children:n("open_camera")||"Open Camera"})]}),_.jsxs("button",{onClick:T,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[_.jsx(aR,{className:"w-6 h-6"}),_.jsx("span",{children:n("upload_gallery")||"Select from Gallery"})]})]}),_.jsx("button",{onClick:()=>h("input_type"),className:"mt-6 text-gray-500 underline",children:n("back")})]}),X=()=>_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[_.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&_.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:_.jsx($r,{className:"w-16 h-16 text-white animate-spin"})})]}),_.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:n("analyzing")||"Analyzing..."}),_.jsx("p",{className:"text-gray-500 mt-2",children:n("ai_thinking")||"AI Botanist is thinking..."})]}),$=()=>_.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[_.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:_.jsxs("div",{className:"sticky top-4",children:[_.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&_.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&_.jsx("button",{onClick:G,disabled:L||B,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${L||B?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:L?_.jsxs(_.Fragment,{children:[_.jsx(Sg,{className:"w-6 h-6"}),_.jsx("span",{children:n("saved")||"Kaydedildi"})]}):B?_.jsxs(_.Fragment,{children:[_.jsx($r,{className:"w-5 h-5 animate-spin"}),_.jsx("span",{children:n("saving")||"Kaydediliyor..."})]}):_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:_.jsx(hR,{className:"w-5 h-5"})}),_.jsx("span",{className:"text-lg",children:N?.is_treatable===!1?n("save_info")||"Bilgiyi Kaydet":n("start_treatment")||"Tedaviye Bala"})]})}),_.jsxs("button",{onClick:P,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[n("take_photo")," (",n("reset"),")"]})]})}),_.jsxs("div",{className:"w-full md:w-2/3 relative",children:[_.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:_.jsx(xU,{result:N,onReset:P})}),!t&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:_.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:_.jsx(NT,{className:"w-8 h-8 text-green-600"})}),_.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n("login_to_view")}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:n("login_blur_text")}),_.jsx("button",{onClick:Z,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:n("login")})]})})]})]});return _.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[_.jsx("input",{type:"file",accept:"image/*",ref:l,onChange:C,className:"hidden"}),_.jsx(EU,{isOpen:Y,onClose:()=>V(!1),onCapture:k}),u==="landing"?M():_.jsxs(_.Fragment,{children:[u!=="result"&&_.jsxs("button",{onClick:()=>h("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",n("back")]}),u==="input_type"&&ee(),u==="capture_main"&&Q(!1),u==="capture_macro"&&Q(!0),u==="analyzing"&&X(),u==="result"&&$()]})]})}const Cf=43200,eS=1440,tS=Symbol.for("constructDateFrom");function _v(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&tS in n?n[tS](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ma(n,e){return _v(n,n)}let OU={};function MU(){return OU}function nS(n){const e=Ma(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function vv(n,...e){const t=_v.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function em(n,e){const t=+Ma(n)-+Ma(e);return t<0?-1:t>0?1:t}function PU(n){return _v(n,Date.now())}function jU(n,e,t){const[r,i]=vv(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),l=r.getMonth()-i.getMonth();return o*12+l}function LU(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function VU(n,e){return+Ma(n)-+Ma(e)}function UU(n,e){const t=Ma(n);return t.setHours(23,59,59,999),t}function zU(n,e){const t=Ma(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function FU(n,e){const t=Ma(n);return+UU(t)==+zU(t)}function BU(n,e,t){const[r,i,o]=vv(t?.in,n,n,e),l=em(i,o),u=Math.abs(jU(i,o));if(u<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*u);let h=em(i,o)===-l;FU(r)&&u===1&&em(r,o)===1&&(h=!1);const f=l*(u-+h);return f===0?0:f}function qU(n,e,t){const r=VU(n,e)/1e3;return LU(t?.roundingMethod)(r)}const $U={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HU=(n,e,t)=>{let r;const i=$U[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function cc(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const GU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QU={date:cc({formats:GU,defaultWidth:"full"}),time:cc({formats:KU,defaultWidth:"full"}),dateTime:cc({formats:YU,defaultWidth:"full"})},WU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XU=(n,e,t,r)=>WU[n];function Cs(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,u=t?.width?String(t.width):l;i=n.formattingValues[u]||n.formattingValues[l]}else{const l=n.defaultWidth,u=t?.width?String(t.width):n.defaultWidth;i=n.values[u]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const JU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},e9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},t9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},n9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},r9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},s9=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},i9={ordinalNumber:s9,era:Cs({values:JU,defaultWidth:"wide"}),quarter:Cs({values:ZU,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Cs({values:e9,defaultWidth:"wide"}),day:Cs({values:t9,defaultWidth:"wide"}),dayPeriod:Cs({values:n9,defaultWidth:"wide",formattingValues:r9,defaultFormattingWidth:"wide"})};function Ds(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const l=o[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?o9(u,y=>y.test(l)):a9(u,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(l.length);return{value:f,rest:g}}}function a9(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function o9(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function YR(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const u=e.slice(i.length);return{value:l,rest:u}}}const l9=/^(\d+)(th|st|nd|rd)?/i,c9=/\d+/i,u9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},d9={any:[/^b/i,/^(a|c)/i]},h9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},f9={any:[/1/i,/2/i,/3/i,/4/i]},m9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},g9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},y9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},v9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b9={ordinalNumber:YR({matchPattern:l9,parsePattern:c9,valueCallback:n=>parseInt(n,10)}),era:Ds({matchPatterns:u9,defaultMatchWidth:"wide",parsePatterns:d9,defaultParseWidth:"any"}),quarter:Ds({matchPatterns:h9,defaultMatchWidth:"wide",parsePatterns:f9,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ds({matchPatterns:m9,defaultMatchWidth:"wide",parsePatterns:g9,defaultParseWidth:"any"}),day:Ds({matchPatterns:p9,defaultMatchWidth:"wide",parsePatterns:y9,defaultParseWidth:"any"}),dayPeriod:Ds({matchPatterns:_9,defaultMatchWidth:"any",parsePatterns:v9,defaultParseWidth:"any"})},Qd={code:"en-US",formatDistance:HU,formatLong:QU,formatRelative:XU,localize:i9,match:b9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w9(n,e,t){const r=MU(),i=t?.locale??r.locale??Qd,o=2520,l=em(n,e);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:l}),[h,f]=vv(t?.in,...l>0?[e,n]:[n,e]),g=qU(f,h),y=(nS(f)-nS(h))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?i.formatDistance("lessThanXSeconds",5,u):g<10?i.formatDistance("lessThanXSeconds",10,u):g<20?i.formatDistance("lessThanXSeconds",20,u):g<40?i.formatDistance("halfAMinute",0,u):g<60?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",1,u):v===0?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",v,u);if(v<45)return i.formatDistance("xMinutes",v,u);if(v<90)return i.formatDistance("aboutXHours",1,u);if(v<eS){const x=Math.round(v/60);return i.formatDistance("aboutXHours",x,u)}else{if(v<o)return i.formatDistance("xDays",1,u);if(v<Cf){const x=Math.round(v/eS);return i.formatDistance("xDays",x,u)}else if(v<Cf*2)return w=Math.round(v/Cf),i.formatDistance("aboutXMonths",w,u)}if(w=BU(f,h),w<12){const x=Math.round(v/Cf);return i.formatDistance("xMonths",x,u)}else{const x=w%12,N=Math.trunc(w/12);return x<3?i.formatDistance("aboutXYears",N,u):x<9?i.formatDistance("overXYears",N,u):i.formatDistance("almostXYears",N+1,u)}}function Rg(n,e){return w9(n,PU(n),e)}const x9={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},E9=(n,e,t)=>{let r;const i=x9[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?r+" sonra":r+" nce":r},T9={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},S9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},A9={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},k9={date:cc({formats:T9,defaultWidth:"full"}),time:cc({formats:S9,defaultWidth:"full"}),dateTime:cc({formats:A9,defaultWidth:"full"})},R9={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},I9=(n,e,t,r)=>R9[n],N9={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},C9={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},D9={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},O9={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},M9={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},P9={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},j9=(n,e)=>Number(n)+".",L9={ordinalNumber:j9,era:Cs({values:N9,defaultWidth:"wide"}),quarter:Cs({values:C9,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Cs({values:D9,defaultWidth:"wide"}),day:Cs({values:O9,defaultWidth:"wide"}),dayPeriod:Cs({values:M9,defaultWidth:"wide",formattingValues:P9,defaultFormattingWidth:"wide"})},V9=/^(\d+)(\.)?/i,U9=/\d+/i,z9={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},F9={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},B9={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},q9={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},$9={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},H9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},G9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},K9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},Y9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},Q9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},W9={ordinalNumber:YR({matchPattern:V9,parsePattern:U9,valueCallback:function(n){return parseInt(n,10)}}),era:Ds({matchPatterns:z9,defaultMatchWidth:"wide",parsePatterns:F9,defaultParseWidth:"any"}),quarter:Ds({matchPatterns:B9,defaultMatchWidth:"wide",parsePatterns:q9,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ds({matchPatterns:$9,defaultMatchWidth:"wide",parsePatterns:H9,defaultParseWidth:"any"}),day:Ds({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:K9,defaultParseWidth:"any"}),dayPeriod:Ds({matchPatterns:Y9,defaultMatchWidth:"any",parsePatterns:Q9,defaultParseWidth:"any"})},Ig={code:"tr",formatDistance:E9,formatLong:k9,formatRelative:I9,localize:L9,match:W9,options:{weekStartsOn:1,firstWeekContainsDate:1}},QR=z.createContext();function bv(){return z.useContext(QR)}function X9({children:n}){const[e,t]=z.useState(!1),[r,i]=z.useState("login"),f={isOpen:e,view:r,openLogin:()=>{i("login"),t(!0)},openRegister:()=>{i("register"),t(!0)},closeModal:()=>{t(!1)},toggleView:()=>{i(g=>g==="login"?"register":"login")}};return _.jsx(QR.Provider,{value:f,children:n})}function wv({post:n,onUserClick:e,onViewAnalysis:t,isDetailView:r=!1,authorOverride:i=null}){const{openLogin:o}=bv(),l=kr(),{t:u,i18n:h}=Ut(),{currentUser:f}=Rr(),g=h.language==="tr"?Ig:Qd,[y,v]=z.useState(""),[w,x]=z.useState(r),[N,O]=z.useState(!1),[L,H]=z.useState(!1),[B,q]=z.useState(n?.content||""),[Y,V]=z.useState(null),R=f?.uid===n?.userId;z.useEffect(()=>{if(!n?.userId||R||i)return;(async()=>{try{const $=Ue(Ae,"users",n.userId),K=await Hn($);K.exists()&&V(K.data())}catch($){console.error("Failed to fetch author for post",n.id,$)}})()},[n?.userId,R,i,n.id]);const E=async()=>{try{await jR(n.id,{content:B}),H(!1)}catch{alert("Failed to update post")}};if(!n)return null;const T=n.likes&&f&&n.likes.includes(f.uid),k=n.likes?n.likes.length:0,C=n.comments?n.comments.length:0,[j,D]=z.useState("");z.useEffect(()=>{const X=()=>{if(!n.createdAt?.seconds){D(u("just_now")||"Just now");return}const K=new Date(n.createdAt.seconds*1e3);(new Date-K)/(1e3*60*60)>24?D(K.toLocaleDateString(h.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):D(Rg(K,{addSuffix:!0,locale:g,includeSeconds:!1}))};X();const $=setInterval(X,6e4);return()=>clearInterval($)},[n.createdAt,g,u,h.language]),n.createdAt?.seconds&&new Date(n.createdAt.seconds*1e3);const G=async()=>{if(!(!f||N)){O(!0);try{await MR(n.id,f.uid)}catch(X){console.error(X)}finally{O(!1)}}},Z=async()=>{if(window.confirm(u("confirm_delete_post")||"Delete this post?"))try{await OR(n.id)}catch{alert("Failed to delete post")}},P=async X=>{if(X.preventDefault(),!(!y.trim()||!f))try{await PR(n.id,f.uid,f.displayName||"User",y),v("")}catch($){console.error($),alert("Failed to post comment")}},M=async()=>{const X={title:`Plant AI - ${n.title||n.authorName}`,text:n.content,url:window.location.origin+"/#/community/post/"+n.id};if(navigator.share)try{await navigator.share(X)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(X.url),alert(u("link_copied")||"Link copied!")},ee=X=>{if(!X||X==="Unknown")return null;const $=`plant_${X.toLowerCase().replace(/\s+/g,"_")}`,K=u($);return!K||K===$?X.charAt(0).toUpperCase()+X.slice(1):K},Q=R&&(f?.photoURL||f?.avatar)?f.photoURL||f.avatar:i?.photoURL||i?.avatar?i.photoURL||i.avatar:Y?.photoURL||Y?.avatar?Y.photoURL||Y.avatar:n.userAvatar||`https://ui-avatars.com/api/?name=${n.authorName||"Gardener"}&background=random`;return _.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[R&&_.jsx("button",{onClick:Z,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity z-10",title:u("delete")||"Delete",children:_.jsx(Ed,{className:"w-4 h-4"})}),!n.hideAuthor&&_.jsx("div",{className:"p-4 flex items-center justify-between",children:_.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(n.userId),children:[_.jsx("img",{src:Q,alt:n.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:n.authorName||u("gardener")}),_.jsx("span",{className:"text-xs text-gray-500",children:j})]})]})}),_.jsxs("div",{className:`px-4 pb-2 ${n.hideAuthor?"pt-4":""}`,children:[n.title&&_.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:n.title}),_.jsx("p",{className:`text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap ${r?"":"cursor-pointer hover:opacity-80"}`,onClick:()=>!r&&l(`/community/post/${n.id}`),children:n.content}),n.plantType&&n.plantType!=="Unknown"&&_.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:ee(n.plantType)}),n.relatedAnalysisId&&_.jsx("div",{className:"mt-2",children:_.jsxs("button",{onClick:()=>t&&t(n.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[_.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),u("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),n.image&&_.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(n.image,"_blank"),children:[_.jsx("img",{src:n.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),_.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[_.jsx(wd,{className:"w-3 h-3"}),_.jsxs("span",{children:[20+(n.likes?.length||0)*5," ",u("views")||"Grntlenme"]})]})]}),_.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("button",{onClick:G,className:`flex items-center gap-1.5 transition-colors ${T?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[_.jsx(sR,{className:`w-5 h-5 ${T?"fill-current":""}`}),_.jsx("span",{className:"text-sm font-medium",children:k||u("like")})]}),_.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>x(!w),children:[_.jsx(wd,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:C||u("comment")})]}),R&&_.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>H(!0),children:[_.jsx(uR,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:u("edit")})]})]}),_.jsxs("button",{onClick:M,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[_.jsx(Lm,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm hidden sm:inline",children:(u("share")||"payla").toLowerCase()})]})]}),L&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[_.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:u("edit_post")}),_.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:B,onChange:X=>q(X.target.value),rows:4}),_.jsxs("div",{className:"flex justify-end gap-2",children:[_.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:u("cancel")}),_.jsx("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:u("save")})]})]})}),w&&_.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[_.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[n.comments&&n.comments.map((X,$)=>_.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[_.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[X.userName,":"]}),_.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:X.text})]},$)),(!n.comments||n.comments.length===0)&&_.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:u("no_comments_yet")})]}),f?_.jsxs("form",{onSubmit:P,className:"flex gap-2",children:[_.jsx("input",{type:"text",value:y,onChange:X=>v(X.target.value),placeholder:u("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),_.jsx("button",{type:"submit",disabled:!y.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:_.jsx(xd,{className:"w-4 h-4"})})]}):_.jsx("button",{onClick:o,className:"w-full py-3 text-center text-sm text-green-600 bg-green-50 dark:bg-green-900/10 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/20 transition-colors font-medium",children:u("login_to_comment")||"Yorum yapmak iin giri yapn"})]})]})}const tm=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}],J9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function Z9(n){if(!n)return!0;const e=n.toLowerCase();return!J9.some(t=>e.includes(t))}async function e8(n,e){try{const t=Ue(Ae,"users",n);return await Mn(t,{blockedUsers:cv(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function t8(n,e){try{const t=Ue(Ae,"users",n);return await Mn(t,{blockedUsers:Xk(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function n8(n,e){try{const t=Ue(Ae,"users",n),r=await Hn(t);return r.exists()?(r.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function r8({onClose:n,onPostCreated:e}){const{t}=Ut(),{currentUser:r}=Rr(),i=z.useRef(null),[o,l]=z.useState(""),[u,h]=z.useState(""),[f,g]=z.useState(""),[y,v]=z.useState(!1),[w,x]=z.useState("none"),[N,O]=z.useState(null),[L,H]=z.useState(null),[B,q]=z.useState(!1),[Y,V]=z.useState(!1),[R,E]=z.useState(""),[T,k]=z.useState(""),[C,j]=z.useState(0);z.useEffect(()=>{if(u){const M=tm.find(ee=>ee.value===u);M&&g(t(M.labelKey))}},[u,t]);const D=async M=>{const ee=M.target.files[0];if(ee){const Q=new FileReader;Q.onloadend=()=>H(Q.result),Q.readAsDataURL(ee),O(ee)}},G=async()=>{if(N){V(!0);try{let M=N;try{M=await dn(N,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(Q){console.warn("Compression failed for analysis, using original",Q)}const ee=new FileReader;ee.readAsDataURL(M),ee.onloadend=async()=>{const Q=ee.result,X=await SR(Q,"en"),$=(X.plant_name+" "+X.disease_name).toLowerCase();let K=null;for(const te of tm)if($.includes(te.value)){K=te;break}K?(h(K.value),g(t(K.labelKey)),k(`${t("auto_detect")}: ${t(K.labelKey)}`)):k("Plant detected but not in our list yet."),setTimeout(()=>k(""),3e3),V(!1)}}catch(M){console.error("Auto detect failed",M),E(t("error_diagnosis_failed")),V(!1)}}},Z=async M=>{if(M.preventDefault(),!!o.trim()){if(!Z9(o)){E(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}q(!0),E(""),j(0);try{let ee=null;if(N)try{console.log("Compressing for Base64 storage...");const X=await dn(N,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});ee=await new Promise(($,K)=>{const te=new FileReader;te.readAsDataURL(X),te.onload=()=>$(te.result),te.onerror=ne=>K(ne)}),console.log("Base64 string ready, length:",ee.length)}catch(Q){console.error("Compression failed:",Q),E("Image is too large and could not be compressed."),q(!1);return}await NR(r.uid,{authorName:r.displayName||"Gardener",userAvatar:r.photoURL||r.avatar||null,content:o,plantType:u||"other",image:ee}),e(),n()}catch(ee){console.error("FULL POST ERROR:",ee),E(ee.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{q(!1)}}},P=tm.filter(M=>t(M.labelKey).toLowerCase().includes(f.toLowerCase()));return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),_.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[R&&_.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:R}),T&&_.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:T}),_.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[_.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:M=>l(M.target.value),required:!0}),_.jsxs("div",{className:"relative",children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),_.jsxs("div",{className:"relative",children:[_.jsx(fR,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),_.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:M=>{g(M.target.value),v(!0),M.target.value===""&&h("")},onFocus:()=>v(!0)}),_.jsx(fv,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&_.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(M=>_.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{h(M.value),g(t(M.labelKey)),v(!1)},children:t(M.labelKey)},M.value)):_.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&_.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),L&&_.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[_.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}),_.jsx("button",{type:"button",onClick:()=>{O(null),H(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:B,children:_.jsx(Kr,{className:"w-4 h-4"})}),_.jsxs("button",{type:"button",onClick:G,disabled:Y,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[Y?_.jsx($r,{className:"w-3 h-3 animate-spin"}):_.jsx(RV,{className:"w-3 h-3"}),t(Y?"detecting":"auto_detect")]})]}),B&&C>0&&_.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[_.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${C}%`}}),_.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(C),"%"]})]}),_.jsxs("div",{className:"flex justify-between items-center pt-2",children:[_.jsxs("button",{type:"button",onClick:()=>i.current?.click(),disabled:B,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[_.jsx(aR,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),_.jsx("input",{type:"file",ref:i,onChange:D,accept:"image/*",className:"hidden"}),_.jsxs("button",{type:"submit",disabled:B||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[B?_.jsx($r,{className:"w-4 h-4 animate-spin"}):_.jsx(xd,{className:"w-4 h-4"}),B?"...":t("ask_question")]})]})]})]})]})})}function s8({user:n,onClose:e}){const{currentUser:t}=Rr(),r=kr(),[i,o]=z.useState(!1),{t:l,i18n:u}=Ut(),{addToast:h}=Va(),{openLogin:f}=bv(),[g,y]=z.useState(n),[v,w]=z.useState(!1);z.useEffect(()=>{if(!n)return;const E=n.uid||n.id;if(!E)return;const T=qs(Ue(Ae,"users",E),k=>{k.exists()&&y({uid:k.id,...k.data()})},k=>{console.error("User listener error",k)});return()=>T()},[n]);const x=n?{...n,...g,uid:g?.uid||n.uid||n.id}:null,[N,O]=z.useState(!1),[L,H]=z.useState(!1);z.useEffect(()=>{(async()=>{if(t&&x){const{isFollowing:T,isRequested:k}=await pR(t.uid,x.uid);O(T),H(k)}})()},[t,x]);const[B,q]=z.useState(!1);z.useEffect(()=>{t&&x&&n8(t.uid,x.uid).then(q)},[t,x]);const Y=async()=>{if(!(!t||!x))try{B?(await t8(t.uid,x.uid),q(!1),h(l("user_unblocked")||"User unblocked","success")):window.confirm(l("confirm_block")||"Block this user? They won't be able to message you.")&&(await e8(t.uid,x.uid),q(!0),h(l("user_blocked")||"User blocked","success"))}catch(E){console.error(E),h("Action failed","error")}},V=async()=>{if(!t){f();return}if(!v){console.log("Follow Toggle Initiated:",{currentUser:t.uid,targetUser:x.uid,status:{isFollowing:N,isRequested:L}}),w(!0);try{N?(console.log("Unfollowing..."),await Xf(t.uid,x.uid),O(!1),H(!1),h(l("unfollowed_user")||"Takipten kld","info")):L?(console.log("Cancelling Request..."),await _R(t.uid,x.uid),H(!1),h(l("request_cancelled")||"stek iptal edildi","info")):(console.log("Sending Request...",{uid:t.uid,name:t.displayName,photo:t.photoURL}),await yR(t.uid,{displayName:t.displayName||"Unknown User",photoURL:t.photoURL||null},x.uid),H(!0),h(l("request_sent")||"Takip istei gnderildi","success"))}catch(E){console.error("Follow Error:",E),h(l("error_occurred")||"Bir hata olutu: "+E.message,"error")}finally{w(!1)}}},R=E=>!E?.lastSeen||!E.lastSeen.seconds?!1:Date.now()-E.lastSeen.seconds*1e3<180*1e3;return!n||!x?null:_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:E=>E.stopPropagation(),children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:_.jsx(Kr,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),_.jsxs("div",{className:"flex flex-col items-center relative",children:[_.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name}`,alt:x.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),_.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${R(x)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${R(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),R(x)?"Online":"Offline"]}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:x.name||"User"}),_.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[_.jsx(Td,{className:"w-3 h-3"}),_.jsxs("span",{children:[l("joined")||"Katlma Tarihi",": ",x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString(u.language,{day:"numeric",month:"long",year:"numeric"}):l("unknown_date")]})]}),_.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[_.jsxs("button",{onClick:()=>{e(),r(`/profile/${x.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[_.jsx(Td,{className:"w-5 h-5"}),l("view_profile")||"Profili Gr"]}),_.jsxs("div",{className:"flex gap-3 w-full",children:[t&&t.uid!==x.uid&&_.jsx("button",{onClick:V,disabled:v,className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 ${N?"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-white":L?"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:N?_.jsxs(_.Fragment,{children:[_.jsx(xV,{className:"w-5 h-5"}),l("following")||"Following"]}):L?_.jsxs(_.Fragment,{children:[_.jsx(Ag,{className:"w-5 h-5"}),l("requested")||"Requested"]}):_.jsxs(_.Fragment,{children:[_.jsx(mv,{className:"w-5 h-5"}),l("follow")||"Follow"]})}),t&&t.uid!==x.uid&&_.jsxs("button",{onClick:async()=>{if(N){e();const E={uid:x.uid,name:x.name||x.displayName||"User",photoURL:x.photoURL||x.avatar||null};r("/messages/new",{state:{targetUser:E}})}else h(l("must_follow_to_message")||"Mesaj gndermek iin takip etmelisin","info")},className:`flex-1 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-sm transition-transform active:scale-95 ${N?"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-200":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[_.jsx(wd,{className:"w-5 h-5"}),l("send_message")||"Mesaj Gnder"]})]}),t&&t.uid!==x.uid&&_.jsx("button",{onClick:Y,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${B?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:B?l("unblock_user")||"Unblock User":l("block_user")||"Block User"})]})]})]})})}function Ng(){return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:_.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[_.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[_.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),_.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),_.jsx(dr,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),_.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}const i8=({fact:n})=>{const{t:e}=Ut(),[t,r]=z.useState(null);if(z.useEffect(()=>{if(!n)return;const u=Math.floor(Math.random()*1e3);r(`https://source.unsplash.com/featured/?${encodeURIComponent(n.imageKeyword)},nature,plant&sig=${u}`);const h=`https://image.pollinations.ai/prompt/${encodeURIComponent("realistic nature photography "+n.imageKeyword)}?nologo=true`;r(h)},[n]),!n)return null;const i=()=>{switch(n.type){case"pest":return _.jsx(_L,{className:"text-red-500 w-6 h-6"});case"disease":return _.jsx(lR,{className:"text-yellow-500 w-6 h-6"});case"tip":return _.jsx(LL,{className:"text-yellow-400 w-6 h-6"});default:return _.jsx(dr,{className:"text-green-500 w-6 h-6"})}},o=()=>{switch(n.type){case"pest":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"disease":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"tip":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},l=async()=>{const u={title:`Plant AI Daily Tip: ${n.title}`,text:n.content,url:window.location.origin};if(navigator.share)try{await navigator.share(u)}catch{}else navigator.clipboard.writeText(n.content),alert("Copied to clipboard!")};return _.jsxs("div",{className:`mb-6 rounded-xl border p-4 shadow-sm relative overflow-hidden ${o()} transition-all hover:shadow-md`,children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-full shadow-sm",children:_.jsx(dr,{className:"text-green-600 w-5 h-5"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e("daily_bot_title")||"Plant AI Gnlk Bilgi"}),_.jsx("div",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString()})]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[_.jsxs("div",{className:"w-full md:w-1/3 h-48 md:h-auto relative rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 shadow-inner group",children:[t&&_.jsx("img",{src:t,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"lazy"}),_.jsx("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"AI Generated"})]}),_.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i(),_.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 leading-tight",children:n.title})]}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-4",children:n.content}),_.jsx("div",{className:"mt-auto flex justify-end border-t border-gray-200 dark:border-gray-700/50 pt-3",children:_.jsxs("button",{onClick:l,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[_.jsx(Lm,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:e("share_generic")||"payla"})]})})]})]})]})},a8="daily_posts",o8=async()=>{const n=new Date().toISOString().split("T")[0],e=Ue(Ae,a8,n);try{const t=await Hn(e);if(t.exists())return t.data();{const i={...await vU("tr"),date:n,createdAt:En(),likes:0,views:0};return await Gs(e,i),i}}catch(t){return console.error("Error fetching/creating daily post:",t),null}};function l8({analysisId:n,onClose:e}){const[t,r]=z.useState(null),[i,o]=z.useState(!0);return z.useEffect(()=>{async function l(){try{const u=await Hn(Ue(Ae,"analyses",n));if(u.exists()){const h=u.data();let f=[];try{f=(await Ni(Zt(Ae,"analyses",n,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(g){console.warn("Could not fetch updates for modal",g)}r({...h,updates:f})}}catch(u){console.error(u)}finally{o(!1)}}l()},[n]),z.useEffect(()=>{const l=u=>{u.key==="Escape"&&e()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e]),i?_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:_.jsx($r,{className:"animate-spin text-white w-8 h-8"})}):t?_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:l=>l.stopPropagation(),children:[_.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:_.jsx(Kr,{className:"w-5 h-5 text-gray-500"})}),_.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:_.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[_.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&_.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[_.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),_.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),_.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:_.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[_.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&_.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),_.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((l,u)=>_.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[_.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:u+1}),_.jsx("span",{children:l})]},u))})]}),t.updates&&t.updates.length>0&&_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((l,u)=>_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[l.imageUrl&&_.jsx("img",{src:l.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:l.createdAt?.seconds?new Date(l.createdAt.seconds*1e3).toLocaleDateString():""}),_.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:l.note})]},u))})]})]})]})}):null}function c8(){const{t:n}=Ut(),{currentUser:e}=Rr(),t=er(),[r,i]=z.useState([]),[o,l]=z.useState(!0),[u,h]=z.useState(!1),[f,g]=z.useState(null),[y,v]=z.useState(null),[w,x]=z.useState(null),[N,O]=z.useState("All"),[L,H]=z.useState(!1),[B,q]=z.useState(""),Y=10,[V,R]=z.useState(!0),T=[{value:"All",labelKey:"community"},...tm].filter(k=>(k.value==="All"?n("community")+" (All)":n(k.labelKey)).toLowerCase().includes(B.toLowerCase()));return z.useEffect(()=>{t.state?.refreshId&&(O("All"),q(""),window.scrollTo(0,0))},[t.state]),z.useEffect(()=>{l(!0);let k;N==="All"?k=Ar(Zt(Ae,"posts"),Eg("createdAt","desc"),Dm(Y)):k=Ar(Zt(Ae,"posts"),La("plantType","==",N),Dm(50));const C=qs(k,j=>{const D=j.docs.map(G=>({id:G.id,...G.data()}));D.sort((G,Z)=>{const P=G.createdAt?.seconds||Date.now()/1e3;return(Z.createdAt?.seconds||Date.now()/1e3)-P}),i(D),l(!1),R(j.docs.length>=Y)},j=>{console.error("Error fetching posts:",j),l(!1)});return()=>C()},[N,t.state?.refreshId]),z.useEffect(()=>{async function k(){const C=await o8();C&&x(C)}k()},[]),_.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:n("community")}),_.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[_.jsxs("div",{className:"relative w-full sm:w-64",children:[_.jsxs("div",{className:"relative",children:[_.jsx(fR,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),_.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:n("select_plant"),value:B,onFocus:()=>H(!0),onChange:k=>{q(k.target.value),H(!0)}}),N!=="All"?_.jsx("button",{onClick:()=>{O("All"),q("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:_.jsx(Kr,{className:"w-4 h-4 text-gray-500"})}):_.jsx(fv,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),L&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>H(!1)}),_.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[T.map(k=>_.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{O(k.value),q(k.value==="All"?"":n(k.labelKey)),H(!1)},children:[_.jsx("span",{children:k.value==="All"?n("community"):n(k.labelKey)}),N===k.value&&_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},k.value)),T.length===0&&_.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:n("no_results")||"No results"})]})]})]}),_.jsxs("button",{onClick:()=>{if(!e){alert(n("login_to_post")||"Please login to post.");return}h(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[_.jsx(sV,{className:"w-5 h-5"}),_.jsx("span",{className:"hidden sm:inline",children:n("ask_question")}),_.jsx("span",{className:"sm:hidden",children:n("ask_question")})]})]})]}),o?_.jsx(Ng,{}):_.jsxs("div",{className:"space-y-6",children:[w&&_.jsx(i8,{fact:w}),r.length>0?r.map(k=>_.jsx(wv,{post:k,onViewAnalysis:C=>v(C),onUserClick:C=>{g({id:C,name:k.authorName||"Gardener",avatar:k.userAvatar})}},k.id)):_.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[_.jsx("p",{className:"text-lg mb-2",children:n("no_posts_yet")}),_.jsx("p",{className:"text-sm",children:n("be_the_first")})]})]}),u&&_.jsx(r8,{onClose:()=>h(!1),onPostCreated:()=>{}}),y&&_.jsx(l8,{analysisId:y,onClose:()=>v(null)}),f&&_.jsx(s8,{user:f,onClose:()=>g(null)})]})}function u8(){const{postId:n}=Q0(),e=kr(),{t}=Ut(),{currentUser:r}=Rr(),[i,o]=z.useState(null),[l,u]=z.useState(!0),[h,f]=z.useState(null),[g,y]=z.useState(null);z.useEffect(()=>{if(!n)return;u(!0);const w=Ue(Ae,"posts",n),x=qs(w,N=>{if(N.exists()){const O={id:N.id,...N.data()};if(o(O),f(null),O.userId){const L=Ue(Ae,"users",O.userId);Hn(L).then(H=>{H.exists()&&y(H.data())})}}else f(t("post_not_found")||"Post not found"),o(null);u(!1)},N=>{console.error("Error fetching post:",N),f(t("error_fetching_post")||"Error loading post"),u(!1)});return()=>x()},[n,t]);const v=()=>{e("/community")};return l?_.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:_.jsx($r,{className:"w-8 h-8 animate-spin text-green-600"})}):h?_.jsxs("div",{className:"max-w-2xl mx-auto p-4 text-center",children:[_.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 p-4 rounded-lg mb-4",children:h}),_.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-green-600 hover:text-green-700 font-medium mx-auto",children:[_.jsx(q0,{className:"w-4 h-4"}),t("back_to_community")||"Back to Community"]})]}):_.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 pb-20 flex flex-col gap-4",children:[_.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[_.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:_.jsx(q0,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),_.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("back_to_community")||"Toplulua Dn"})]}),i&&_.jsx("div",{className:"w-full",children:_.jsx(wv,{post:i,isDetailView:!0,onUserClick:w=>e(`/profile/${w}`),authorOverride:g})})]})}function d8({chat:n,currentUser:e}){const[t,r]=z.useState(null),{t:i}=Ut(),{addToast:o}=Va(),l=n.participants.find(v=>v!==e.uid);z.useEffect(()=>{(async()=>{if(l)try{const w=await Hn(Ue(Ae,"users",l));if(w.exists())r(w.data());else{const x=n.participantData?.[l];x&&r(x)}}catch(w){console.error("Error fetching user",w)}})()},[l,n.participantData]);const u=t||{name:"Unknown User",photoURL:null},h=async v=>{if(v.preventDefault(),!!window.confirm(i("confirm_delete_chat")||"Delete this chat permanently?"))try{await Ks(Ue(Ae,"chats",n.id)),o("Chat deleted","success")}catch(w){console.error("Delete Chat Error",w),o("Failed to delete chat","error")}},{i18n:f}=Ut(),g=f.language==="tr"?Ig:Qd,y=v=>v?v===" Photo"||v.includes(" Photo")?` ${i("photo")||"Photo"}`:v===" Voice Message"||v.includes(" Voice Message")?` ${i("voice_message")||"Voice Message"}`:v:i("new_conversation")||"Yeni Sohbet";return _.jsxs("div",{className:"relative group",children:[_.jsxs(Os,{to:`/messages/${n.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[_.jsx("img",{src:u.photoURL||u.avatar||`https://ui-avatars.com/api/?name=${u.name||"User"}`,alt:u.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[_.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:u.name||u.displayName||"Loading..."}),n.updatedAt&&_.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:Rg(new Date(n.updatedAt.seconds*1e3),{addSuffix:!0,locale:g})})]}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:y(n.lastMessage)})]})]}),_.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:_.jsx(Ed,{className:"w-5 h-5"})})]})}function h8(){const{currentUser:n}=Rr(),{t:e}=Ut(),[t,r]=z.useState([]),[i,o]=z.useState(!0);return z.useEffect(()=>{if(!n)return;const l=Ar(Zt(Ae,"chats"),La("participants","array-contains",n.uid)),u=qs(l,h=>{const f=h.docs.map(g=>({id:g.id,...g.data()})).sort((g,y)=>{const v=g.updatedAt?.seconds||0;return(y.updatedAt?.seconds||0)-v});r(f),o(!1)});return()=>u()},[n]),i?_.jsx(Ng,{}):_.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[_.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:e("messages")}),_.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:t.length===0?_.jsx("div",{className:"p-8 text-center text-gray-500",children:e("no_messages")||"No messages yet. Start a conversation!"}):t.map(l=>_.jsx(d8,{chat:l,currentUser:n},l.id))})]})}const f8="modulepreload",m8=function(n){return"/"+n},rS={},g8=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");i=f(t.map(g=>{if(g=m8(g),g in rS)return;rS[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":f8,y||(w.as="script"),w.crossOrigin="",w.href=g,h&&w.setAttribute("nonce",h),document.head.appendChild(w),y)return new Promise((x,N)=>{w.addEventListener("load",x),w.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return i.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};function Wn(n,e,t,r){return new(t||(t=Promise))((function(i,o){function l(f){try{h(r.next(f))}catch(g){o(g)}}function u(f){try{h(r.throw(f))}catch(g){o(g)}}function h(f){var g;f.done?i(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(l,u)}h((r=r.apply(n,e||[])).next())}))}class Wd{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),r?.once){const i=(...o)=>{this.un(e,i),t(...o)};return this.listeners[e].add(i),()=>this.un(e,i)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var r;(r=this.listeners[e])===null||r===void 0||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((r=>r(...t)))}}const Df={decode:function(n,e){return Wn(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(n)}finally{t.close()}}))},createBuffer:function(n,e){if(!n||n.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof n[0]=="number"&&(n=[n]),!n[0]||n[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(r){const i=r[0];if(i.some((o=>o>1||o<-1))){const o=i.length;let l=0;for(let u=0;u<o;u++){const h=Math.abs(i[u]);h>l&&(l=h)}for(const u of r)for(let h=0;h<o;h++)u[h]/=l}})(n);const t=n.map((r=>r instanceof Float32Array?r:Float32Array.from(r)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:r=>{const i=t[r];if(!i)throw new Error(`Channel ${r} not found`);return i},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function WR(n,e){const t=e.xmlns?document.createElementNS(e.xmlns,n):document.createElement(n);for(const[r,i]of Object.entries(e))if(r==="children"&&i)for(const[o,l]of Object.entries(i))l instanceof Node?t.appendChild(l):typeof l=="string"?t.appendChild(document.createTextNode(l)):t.appendChild(WR(o,l));else r==="style"?Object.assign(t.style,i):r==="textContent"?t.textContent=i:t.setAttribute(r,i.toString());return t}function sS(n,e,t){const r=WR(n,e||{});return t?.appendChild(r),r}var p8=Object.freeze({__proto__:null,createElement:sS,default:sS});const y8={fetchBlob:function(n,e,t){return Wn(this,void 0,void 0,(function*(){const r=yield fetch(n,t);if(r.status>=400)throw new Error(`Failed to fetch ${n}: ${r.status} (${r.statusText})`);return(function(i,o){Wn(this,void 0,void 0,(function*(){if(!i.body||!i.headers)return;const l=i.body.getReader(),u=Number(i.headers.get("Content-Length"))||0;let h=0;const f=g=>{h+=g?.length||0;const y=Math.round(h/u*100);o(y)};try{for(;;){const g=yield l.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(r.clone(),e),r.blob()}))}};function Jt(n){let e=n;const t=new Set;return{get value(){return e},set(r){Object.is(e,r)||(e=r,t.forEach((i=>i(e))))},update(r){this.set(r(e))},subscribe:r=>(t.add(r),()=>t.delete(r))}}function xo(n,e){const t=Jt(n());return e.forEach((r=>r.subscribe((()=>{const i=n();Object.is(t.value,i)||t.set(i)})))),{get value(){return t.value},subscribe:r=>t.subscribe(r)}}function ya(n,e){let t;const r=()=>{t&&(t(),t=void 0),t=n()},i=e.map((o=>o.subscribe(r)));return r(),()=>{t&&(t(),t=void 0),i.forEach((o=>o()))}}class _8 extends Wd{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Jt(!1),this._currentTime=Jt(0),this._duration=Jt(0),this._volume=Jt(this.media.volume),this._muted=Jt(this.media.muted),this._playbackRate=Jt(this.media.playbackRate||1),this._seeking=Jt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,r){return this.media.addEventListener(e,t,r),()=>this.media.removeEventListener(e,t,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const r=this.getSrc();if(e&&r===e)return;this.revokeSrc();const i=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(r&&this.media.removeAttribute("src"),i||e)try{this.media.src=i}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Wn(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function v8({maxTop:n,maxBottom:e,halfHeight:t,vScale:r,barMinHeight:i=0,barAlign:o}){let l=Math.round(n*t*r),u=l+Math.round(e*t*r)||1;return u<i&&(u=i,o||(l=u/2)),{topHeight:l,totalHeight:u}}function b8({barAlign:n,halfHeight:e,topHeight:t,totalHeight:r,canvasHeight:i}){return n==="top"?0:n==="bottom"?i-r:e-t}function iS(n,e,t){const r=e-n.left,i=t-n.top;return[r/n.width,i/n.height]}function XR(n){return!!(n.barWidth||n.barGap||n.barAlign)}function aS(n,e){if(!XR(e))return n;const t=e.barWidth||.5,r=t+(e.barGap||t/2);return r===0?n:Math.floor(n/r)*r}function oS({scrollLeft:n,totalWidth:e,numCanvases:t}){if(e===0)return[0];const r=n/e,i=Math.floor(r*t);return[i-1,i,i+1]}function JR(n){const e=n._cleanup;typeof e=="function"&&e()}function w8(n){const e=Jt({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth}),t=xo((()=>(function(o){const{scrollLeft:l,scrollWidth:u,clientWidth:h}=o;if(u===0)return{startX:0,endX:1};const f=l/u,g=(l+h)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),r=xo((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),i=()=>{e.set({scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,clientWidth:n.clientWidth})};return n.addEventListener("scroll",i,{passive:!0}),{scrollData:e,percentages:t,bounds:r,cleanup:()=>{n.removeEventListener("scroll",i),JR(e)}}}class x8 extends Wd{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const r=this.parentFromOptionsContainer(e.container);this.parent=r;const[i,o]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const r=this.wrapper.getBoundingClientRect(),[i,o]=iS(r,t.clientX,t.clientY);this.emit("click",i,o)})),this.wrapper.addEventListener("dblclick",(t=>{const r=this.wrapper.getBoundingClientRect(),[i,o]=iS(r,t.clientX,t.clientY);this.emit("dblclick",i,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=w8(this.scrollContainer);const e=ya((()=>{const{startX:t,endX:r}=this.scrollStream.percentages.value,{left:i,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,r,i,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,r={}){const{threshold:i=3,mouseButton:o=0,touchDelay:l=100}=r,u=Jt(null),h=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(h.set(v.pointerId,v),h.size>1))return;let w=v.clientX,x=v.clientY,N=!1;const O=Date.now(),L=t.getBoundingClientRect(),{left:H,top:B}=L,q=T=>{if(T.defaultPrevented||h.size>1||f&&Date.now()-O<l)return;const k=T.clientX,C=T.clientY,j=k-w,D=C-x;(N||Math.abs(j)>i||Math.abs(D)>i)&&(T.preventDefault(),T.stopPropagation(),N||(u.set({type:"start",x:w-H,y:x-B}),N=!0),u.set({type:"move",x:k-H,y:C-B,deltaX:j,deltaY:D}),w=k,x=C)},Y=T=>{if(h.delete(T.pointerId),N){const k=T.clientX,C=T.clientY;u.set({type:"end",x:k-H,y:C-B})}g()},V=T=>{h.delete(T.pointerId),T.relatedTarget&&T.relatedTarget!==document.documentElement||Y(T)},R=T=>{N&&(T.stopPropagation(),T.preventDefault())},E=T=>{T.defaultPrevented||h.size>1||N&&T.preventDefault()};document.addEventListener("pointermove",q),document.addEventListener("pointerup",Y),document.addEventListener("pointerout",V),document.addEventListener("pointercancel",V),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",R,{capture:!0}),g=()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",Y),document.removeEventListener("pointerout",V),document.removeEventListener("pointercancel",V),document.removeEventListener("touchmove",E),setTimeout((()=>{document.removeEventListener("click",R,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),h.clear(),JR(u)}}})(this.wrapper);const e=ya((()=>{const t=this.dragStream.signal.value;if(!t)return;const r=this.wrapper.getBoundingClientRect().width,i=(o=t.x/r)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",i)):t.type==="move"?this.emit("drag",i):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",i))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,r=t*e;this.setScroll(r)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,r;const i=()=>{t&&(clearTimeout(t),t=void 0),r&&(r(),r=void 0)};return this.timeouts.push(i),()=>new Promise(((o,l)=>{i(),r=l,t=setTimeout((()=>{t=void 0,r=void 0,o()}),e)}))}getHeight(e,t){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:l,parentHeight:u,numberOfChannels:h,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return l?.every((v=>!v.overlay))?y/h:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:i,defaultHeight:128})}convertColorValues(e,t){return(function(r,i,o){if(!Array.isArray(r))return r||"";if(r.length===0)return"#999";if(r.length<2)return r[0]||"";const l=document.createElement("canvas"),u=l.getContext("2d"),h=o??l.height*i,f=u.createLinearGradient(0,0,0,h||i),g=1/(r.length-1);return r.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,r,i){const{width:o,height:l}=r.canvas,{halfHeight:u,barWidth:h,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:x,height:N,length:O,options:L,pixelRatio:H}){const B=N/2,q=L.barWidth?L.barWidth*H:1,Y=L.barGap?L.barGap*H:L.barWidth?q/2:0,V=q+Y||1;return{halfHeight:B,barWidth:q,barGap:Y,barRadius:L.barRadius||0,barMinHeight:L.barMinHeight?L.barMinHeight*H:0,barIndexScale:O>0?x/V/O:0,barSpacing:V}})({width:o,height:l,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:x,barIndexScale:N,barSpacing:O,barWidth:L,halfHeight:H,vScale:B,canvasHeight:q,barAlign:Y,barMinHeight:V}){const R=x[0]||[],E=x[1]||R,T=R.length,k=[];let C=0,j=0,D=0;for(let G=0;G<=T;G++){const Z=Math.round(G*N);if(Z>C){const{topHeight:ee,totalHeight:Q}=v8({maxTop:j,maxBottom:D,halfHeight:H,vScale:B,barMinHeight:V,barAlign:Y}),X=b8({barAlign:Y,halfHeight:H,topHeight:ee,totalHeight:Q,canvasHeight:q});k.push({x:C*O,y:X,width:L,height:Q}),C=Z,j=0,D=0}const P=Math.abs(R[G]||0),M=Math.abs(E[G]||0);P>j&&(j=P),M>D&&(D=M)}return k})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:h,halfHeight:u,vScale:i,canvasHeight:l,barAlign:t.barAlign,barMinHeight:v});r.beginPath();for(const x of w)f&&"roundRect"in r?r.roundRect(x.x,x.y,x.width,x.height,f):r.rect(x.x,x.y,x.width,x.height);r.fill(),r.closePath()}renderLineWaveform(e,t,r,i){const{width:o,height:l}=r.canvas,u=(function({channelData:h,width:f,height:g,vScale:y}){const v=g/2,w=h[0]||[];return[w,h[1]||w].map(((x,N)=>{const O=x.length,L=O?f/O:0,H=v,B=N===0?-1:1,q=[{x:0,y:H}];let Y=0,V=0;for(let R=0;R<=O;R++){const E=Math.round(R*L);if(E>Y){const k=H+(Math.round(V*v*y)||1)*B;q.push({x:Y,y:k}),Y=E,V=0}const T=Math.abs(x[R]||0);T>V&&(V=T)}return q.push({x:Y,y:H}),q}))})({channelData:e,width:o,height:l,vScale:i});r.beginPath();for(const h of u)if(h.length){r.moveTo(h[0].x,h[0].y);for(let f=1;f<h.length;f++){const g=h[f];r.lineTo(g.x,g.y)}}r.fill(),r.closePath()}renderWaveform(e,t,r){if(r.fillStyle=this.convertColorValues(t.waveColor,r),t.renderFunction)return void t.renderFunction(e,r);const i=(function({channelData:o,barHeight:l,normalize:u,maxPeak:h}){var f;const g=l||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=h??0;if(!h)for(let w=0;w<y.length;w++){const x=(f=y[w])!==null&&f!==void 0?f:0,N=Math.abs(x);N>v&&(v=N)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});XR(t)?this.renderBarWaveform(e,t,r,i):this.renderLineWaveform(e,t,r,i)}renderSingleCanvas(e,t,r,i,o,l,u){const h=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(r*h),f.height=Math.round(i*h),f.style.width=`${r}px`,f.style.height=`${i}px`,f.style.left=`${Math.round(o)}px`,l.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,r,i,o,l){const u=this.getPixelRatio(),{clientWidth:h}=this.scrollContainer,f=r/u,g=(function({clientWidth:x,totalWidth:N,options:O}){return aS(Math.min(8e3,x,N),O)})({clientWidth:h,totalWidth:f,options:t});let y={};if(g===0)return;const v=x=>{if(x<0||x>=w||y[x])return;y[x]=!0;const N=x*g;let O=Math.min(f-N,g);if(O=aS(O,t),O<=0)return;const L=(function({channelData:H,offset:B,clampedWidth:q,totalWidth:Y}){return H.map((V=>{const R=Math.floor(B/Y*V.length),E=Math.floor((B+q)/Y*V.length);return V.slice(R,E)}))})({channelData:e,offset:N,clampedWidth:O,totalWidth:f});this.renderSingleCanvas(L,t,O,i,N,o,l)},w=Math.ceil(f/g);if(!this.isScrollable){for(let x=0;x<w;x++)v(x);return}if(oS({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((x=>v(x))),w>1){const x=this.on("scroll",(()=>{const{scrollLeft:N}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",l.innerHTML="",y={}),oS({scrollLeft:N,totalWidth:f,numCanvases:w}).forEach((O=>v(O)))}));this.unsubscribeOnScroll.push(x)}}renderChannel(e,t,r,i){var{overlay:o}=t,l=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(w=Object.getOwnPropertySymbols(g);x<w.length;x++)y.indexOf(w[x])<0&&Object.prototype.propertyIsEnumerable.call(g,w[x])&&(v[w[x]]=g[w[x]])}return v})(t,["overlay"]);const u=document.createElement("div"),h=this.getHeight(l.height,l.splitChannels);u.style.height=`${h}px`,o&&i>0&&(u.style.marginTop=`-${h}px`),this.canvasWrapper.style.minHeight=`${h}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,l,r,h,u,f)}render(e){return Wn(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:l,useParentWidth:u,width:h}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const x=Math.ceil(f*g),N=x>y,O=!!(v&&!N);return{scrollWidth:x,isScrollable:N,useParentWidth:O,width:(O?y:x)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:i,fillParent:this.options.fillParent,pixelRatio:r});if(this.isScrollable=l,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,h,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,h,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((r=>r())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect(),i=(function(o){const l=2*o;return(l<0?Math.floor(l):Math.ceil(l))/2})(r-t);this.scrollContainer.scrollLeft+=i}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:o}=this.scrollContainer,l=e*i,u=r,h=r+o,f=o/2;if(this.isDragging)l+30>h?this.scrollContainer.scrollLeft+=30:l-30<u&&(this.scrollContainer.scrollLeft-=30);else{(l<u||l>h)&&(this.scrollContainer.scrollLeft=l-(this.options.autoCenter?f:0));const g=l-r-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const r=100*e;this.canvasWrapper.style.clipPath=`polygon(${r}% 0%, 100% 0%, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,r){return Wn(this,void 0,void 0,(function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const o=Array.from(i).map((l=>l.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(i).map((o=>new Promise(((l,u)=>{o.toBlob((h=>{h?l(h):u(new Error("Could not export image"))}),e,t)})))))}))}}class E8 extends Wd{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class e0 extends Wd{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Wn(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Wn(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,r=this.bufferNode;r?.stop(this.audioContext.currentTime+t),r?.addEventListener("ended",(()=>{r===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Wn(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let r=0;r<t;r++)e.push(this.buffer.getChannelData(r));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const T8={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class kd extends _8{static create(e){return new kd(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new e0:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},T8,e);const{state:r,actions:i}=(function(u){var h,f,g,y,v,w;const x=(h=u?.currentTime)!==null&&h!==void 0?h:Jt(0),N=(f=u?.duration)!==null&&f!==void 0?f:Jt(0),O=(g=u?.isPlaying)!==null&&g!==void 0?g:Jt(!1),L=(y=u?.isSeeking)!==null&&y!==void 0?y:Jt(!1),H=(v=u?.volume)!==null&&v!==void 0?v:Jt(1),B=(w=u?.playbackRate)!==null&&w!==void 0?w:Jt(1),q=Jt(null),Y=Jt(null),V=Jt(""),R=Jt(0),E=Jt(0),T=xo((()=>!O.value),[O]),k=xo((()=>q.value!==null),[q]),C=xo((()=>k.value&&N.value>0),[k,N]),j=xo((()=>x.value),[x]),D=xo((()=>N.value>0?x.value/N.value:0),[x,N]);return{state:{currentTime:x,duration:N,isPlaying:O,isPaused:T,isSeeking:L,volume:H,playbackRate:B,audioBuffer:q,peaks:Y,url:V,zoom:R,scrollPosition:E,canPlay:k,isReady:C,progress:j,progressPercent:D},actions:{setCurrentTime:G=>{const Z=Math.max(0,Math.min(N.value||1/0,G));x.set(Z)},setDuration:G=>{N.set(Math.max(0,G))},setPlaying:G=>{O.set(G)},setSeeking:G=>{L.set(G)},setVolume:G=>{const Z=Math.max(0,Math.min(1,G));H.set(Z)},setPlaybackRate:G=>{const Z=Math.max(.1,Math.min(16,G));B.set(Z)},setAudioBuffer:G=>{q.set(G),G&&N.set(G.duration)},setPeaks:G=>{Y.set(G)},setUrl:G=>{V.set(G)},setZoom:G=>{R.set(Math.max(0,G))},setScrollPosition:G=>{E.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=r,this.wavesurferActions=i,this.timer=new E8;const o=t?void 0:this.getMediaElement();this.renderer=new x8(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const l=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:h}=this.options;(l||u&&h)&&this.load(l,u,h).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const r=[];r.push(ya((()=>{const l=e.isPlaying.value;t.emit(l?"play":"pause")}),[e.isPlaying])),r.push(ya((()=>{const l=e.currentTime.value;t.emit("timeupdate",l),e.isPlaying.value&&t.emit("audioprocess",l)}),[e.currentTime,e.isPlaying])),r.push(ya((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let i=!1;r.push(ya((()=>{e.isReady.value&&!i&&(i=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return r.push(ya((()=>{const l=e.isPlaying.value,u=e.currentTime.value,h=e.duration.value,f=h>0&&u>=h;o&&!l&&f&&t.emit("finish"),o=l&&f}),[e.isPlaying,e.currentTime,e.duration])),r.push(ya((()=>{const l=e.zoom.value;l>0&&t.emit("zoom",l)}),[e.zoom])),()=>{r.forEach((l=>l()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,r,i)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,r,i)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(r=>{var i;if(!this.options.interact)return;this.renderer.renderProgress(r),clearTimeout(e);let o=0;const l=this.options.dragToSeek;this.isPlaying()?o=0:l===!0?o=200:l&&typeof l=="object"&&(o=(i=l.debounceTime)!==null&&i!==void 0?i:200),e=setTimeout((()=>{this.seekTo(r)}),o),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Df.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Df.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((r=>r!==e)),this.subscriptions=this.subscriptions.filter((r=>r!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,r,i){return Wn(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!r){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const h=g=>this.emit("loading",g);t=yield y8.fetchBlob(e,h,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const l=yield new Promise((u=>{const h=i||this.getDuration();h?u(h):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof e0&&(u.duration=l)}if(r)this.decodedData=Df.createBuffer(r,l||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Df.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,r){return Wn(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,r)}catch(i){throw this.emit("error",i),i}}))}loadBlob(e,t,r){return Wn(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,r)}catch(i){throw this.emit("error",i),i}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let l=0;l<i;l++){const u=this.decodedData.getChannelData(l),h=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const x=y[w];Math.abs(x)>Math.abs(v)&&(v=x)}h.push(Math.round(v*r)/r)}o.push(h)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const r=Object.create(null,{play:{get:()=>super.play}});return Wn(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const i=yield r.play.call(this);return t!=null&&(this.media instanceof e0?this.media.stopAt(t):this.stopAtPosition=t),i}))}playPause(){return Wn(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Wn(this,arguments,void 0,(function*(e="image/png",t=1,r="dataURL"){return this.renderer.exportImage(e,t,r)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}kd.BasePlugin=class extends Wd{constructor(n){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=n}onInit(){}_init(n){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((n=>n())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},kd.dom=p8;const S8=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)}),A8=({src:n,isMine:e,messageId:t})=>{const r=z.useRef(null),i=z.useRef(null),[o,l]=z.useState(!1),[u,h]=z.useState(0),[f,g]=z.useState(0);z.useEffect(()=>{if(r.current)return i.current&&i.current.destroy(),i.current=kd.create({container:r.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:n}),i.current.on("play",()=>l(!0)),i.current.on("pause",()=>l(!1)),i.current.on("timeupdate",w=>g(w)),i.current.on("ready",w=>h(w)),i.current.on("finish",()=>l(!1)),()=>{i.current&&i.current.destroy()}},[n,e]);const y=()=>{i.current&&i.current.playPause()},v=w=>{if(!w)return"0:00";const x=Math.floor(w/60),N=Math.floor(w%60);return`${x}:${N<10?"0":""}${N}`};return _.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[_.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?_.jsx(ZL,{className:"w-5 h-5 fill-current"}):_.jsx(nV,{className:"w-5 h-5 fill-current ml-0.5"})}),_.jsx("div",{className:"flex-1 overflow-hidden relative",ref:r}),_.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function k8(){const{chatId:n}=Q0(),{currentUser:e}=Rr(),{t,i18n:r}=Ut(),i=kr(),o=z.useRef(null),l=z.useRef(null),{addToast:u}=Va();z.useEffect(()=>{e||i("/login")},[e,i]);const[h,f]=z.useState([]),[g,y]=z.useState(""),[v,w]=z.useState(!0),[x,N]=z.useState(null),[O,L]=z.useState(null),[H,B]=z.useState(null),[q,Y]=z.useState(!1),[V,R]=z.useState(null),[E,T]=z.useState(0),[k,C]=z.useState(null),[j,D]=z.useState(!1),[G,Z]=z.useState(null),P=er(),[M,ee]=z.useState(P.state?.targetUser||null),[Q,X]=z.useState(n==="new"?null:n);z.useEffect(()=>{n!=="new"&&X(n)},[n]),z.useEffect(()=>{n==="new"&&M&&e&&(async()=>{try{N(M);const Se=Ar(Zt(Ae,"chats"),La("participants","array-contains",e.uid)),Le=(await Ni(Se)).docs.find(Ee=>Ee.data().participants.includes(M.uid));Le?(X(Le.id),i(`/messages/${Le.id}`,{replace:!0})):w(!1)}catch(Se){console.warn("Error checking existing chats:",Se)}})()},[n,M,e]),z.useEffect(()=>{if(n==="new"){w(!1);return}if(!Q||!e)return;w(!0);const pe=qs(Ue(Ae,"chats",Q),He=>{if(He.exists()){const Le=He.data(),Ee=Le.participants.find(at=>at!==e.uid);if(Ee){if(Le.participantData?.[Ee]){const at=Le.participantData[Ee];N(_t=>_t?.id===Ee?_t:{...at,id:Ee})}L(Ee)}}else n!=="new"&&i("/messages")}),Se=qs(Zt(Ae,"chats",Q,"messages"),He=>{const Le=He.docs.map(Ee=>({id:Ee.id,...Ee.data()})).sort((Ee,at)=>(Ee.createdAt?.seconds||0)-(at.createdAt?.seconds||0));f(Le),w(!1),H||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Se(),pe()}},[Q,e,H,n,i]),z.useEffect(()=>{if(!O)return;const pe=qs(Ue(Ae,"users",O),Se=>{if(Se.exists()){const He=Se.data();N(Le=>({...Le,...He}))}});return()=>pe()},[O]);const $=async(pe,Se=null,He=null,Le="text")=>{D(!0);try{let Ee=Q;if(!Ee&&n==="new"){if(!M)throw new Error("Target user missing");const{startChat:mt}=await g8(async()=>{const{startChat:Kn}=await Promise.resolve().then(()=>wU);return{startChat:Kn}},[]);Ee=await mt(e.uid,M.uid,{name:M.name,avatar:M.photoURL},{name:e.displayName,avatar:e.photoURL}),X(Ee),window.history.replaceState(null,"",`/messages/${Ee}`)}let at=null,_t=Le,Gn=He;if(Se||k){let mt=Se||k.file;if(_t==="image"||k?.type==="image"){_t="image",Gn=Gn||k?.file.name;const Kn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{mt=await dn(mt,Kn)}catch(qt){console.warn("Compression failed, using original",qt)}}else k&&(_t=k.type,Gn=k.file.name);if(at=await S8(mt),at.length>95e4)throw new Error("File is too large for database storage even after compression.")}H?(await Mn(Ue(Ae,"chats",Ee,"messages",H),{text:pe,editedAt:En()}),B(null)):(await Kd(Zt(Ae,"chats",Ee,"messages"),{text:pe||"",type:_t,fileUrl:at,fileName:Gn,senderId:e.uid,createdAt:En()}),await Mn(Ue(Ae,"chats",Ee),{lastMessage:_t==="audio"?" Voice Message":_t==="image"?" Photo":pe||" File",updatedAt:En()})),y(""),C(null)}catch(Ee){console.error("Send failed",Ee),u(Ee.message||"Failed to send message","error")}finally{D(!1)}},K=async pe=>{pe.preventDefault(),!(!g.trim()&&!k)&&await $(g)},te=async pe=>{if(window.confirm("Delete this message?"))try{await Ks(Ue(Ae,"chats",n,"messages",pe)),u("Message deleted","success")}catch(Se){console.error("Delete failed",Se),u("Could not delete message","error")}},ne=r.language==="tr"?Ig:Qd,re=pe=>{if(!pe?.lastSeen)return"Offline";const Se=pe.lastSeen.seconds*1e3;return Date.now()-Se<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${Rg(new Date(Se),{addSuffix:!0,locale:ne})}`},ye=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,ke=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",je=pe=>{const Se=pe.target.files[0];if(!Se)return;if(Se.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const He=Se.type.startsWith("image/")?"image":"file",Le=He==="image"?URL.createObjectURL(Se):null;C({file:Se,type:He,previewUrl:Le})},ve=pe=>{y(pe.text||""),B(pe.id),C(null),l.current&&(l.current.value="")},Te=()=>{B(null),y(""),C(null)},$e=z.useRef("cancel"),Ze=z.useRef(null),At=z.useRef(null),Ye=z.useRef(null),[Qe,ut]=z.useState(0);z.useEffect(()=>{let pe;return q?(T(0),pe=setInterval(()=>T(Se=>Se+1),1e3)):(T(0),ut(0)),()=>{clearInterval(pe),Ye.current&&cancelAnimationFrame(Ye.current),Ze.current&&Ze.current.close()}},[q]);const lt=()=>{if(!At.current)return;const pe=new Uint8Array(At.current.fftSize);At.current.getByteTimeDomainData(pe);let Se=0;for(let Le=0;Le<pe.length;Le++)Se+=Math.abs(pe[Le]-128);const He=Se/pe.length;ut(He*10),Ye.current=requestAnimationFrame(lt)},dt=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Se=new(window.AudioContext||window.webkitAudioContext);await Se.resume();const He=Se.createAnalyser();Se.createMediaStreamSource(pe).connect(He),He.fftSize=256,Ze.current=Se,At.current=He,lt();const Ee=new MediaRecorder(pe),at=[];Ee.ondataavailable=_t=>at.push(_t.data),Ee.onstop=async()=>{if(pe.getTracks().forEach(_t=>_t.stop()),Ze.current&&Ze.current.close(),Ye.current&&cancelAnimationFrame(Ye.current),$e.current==="send"){const _t=new Blob(at,{type:"audio/webm"});await $(null,_t,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},Ee.start(),R(Ee),Y(!0),$e.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},We=pe=>{!V||V.state==="inactive"||($e.current=pe,V.stop(),Y(!1))};return _.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&_.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[_.jsx("button",{onClick:()=>i("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(q0,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),x?_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("img",{src:x.photoURL||x.avatar||`https://ui-avatars.com/api/?name=${x.name||"User"}`,alt:x.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),_.jsxs("div",{children:[_.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:x.name||x.displayName||"User"}),_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx("span",{className:`w-2 h-2 rounded-full ${ye(x)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:re(x)})]})]})]}):_.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[h.map(pe=>{const Se=pe.senderId===e.uid,He=pe.type==="audio",Le=pe.type==="image",Ee=pe.type==="file";return _.jsxs("div",{className:`flex flex-col ${Se?"items-end":"items-start"} group`,children:[_.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Se?"flex-row-reverse":"flex-row"}`,children:[_.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Se?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${He?"min-w-[150px]":""}`,children:[Le&&_.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:_.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),He&&_.jsx(A8,{src:pe.fileUrl,isMine:Se,messageId:pe.id}),Ee&&_.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[_.jsx(IT,{className:"w-4 h-4"}),_.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&_.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&_.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Se?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",ke(pe.editedAt),")"]})]}),Se&&_.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[_.jsx("button",{onClick:()=>ve(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:_.jsx(uR,{className:"w-3 h-3"})}),_.jsx("button",{onClick:()=>te(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:_.jsx(Ed,{className:"w-3 h-3"})})]})]}),_.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:ke(pe.createdAt)})]},pe.id)}),_.jsx("div",{ref:o})]}),H&&_.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[_.jsx("span",{children:t("editing_message")||"Editing message..."}),_.jsx("button",{onClick:Te,children:_.jsx(Kr,{className:"w-4 h-4"})})]}),k&&_.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[k.type==="image"?_.jsx("img",{src:k.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):_.jsx(IL,{className:"w-8 h-8 text-gray-500"}),_.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:k.file.name})]}),_.jsx("button",{onClick:()=>C(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:_.jsx(Kr,{className:"w-4 h-4 text-gray-500"})})]}),_.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:q?_.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[_.jsx("button",{onClick:()=>We("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:_.jsx(Ed,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[_.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(E*1e3).toISOString().substr(14,5)}),_.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Se)=>{const He=Math.max(0,Qe-5),Le=Math.min(1,He/40),Ee=Math.sin(Se*.5+Date.now()/100)*.2+.8;return _.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Le*36*Ee)}px`,opacity:.5+Le*.5}},Se)})})]}),_.jsx("button",{onClick:()=>We("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:_.jsx(xd,{className:"w-5 h-5"})})]}):_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"file",ref:l,onChange:je,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),_.jsx("button",{onClick:()=>l.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:H,children:_.jsx(IT,{className:"w-5 h-5"})}),_.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:_.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:H?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||k?_.jsx("button",{onClick:K,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?_.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):_.jsx(xd,{className:"w-5 h-5"})}):_.jsx("button",{onClick:dt,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:_.jsx(QL,{className:"w-5 h-5"})})]})})]})}const R8=({isOpen:n,onClose:e,title:t,users:r,loading:i,actionLabel:o,onAction:l})=>{const{t:u}=Ut(),h=kr();if(!n)return null;const f=g=>{e(),h(`/profile/${g}`)};return _.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl relative overflow-hidden flex flex-col max-h-[80vh] animate-scale-up",onClick:g=>g.stopPropagation(),children:[_.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 z-10",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t}),_.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:_.jsx(Kr,{className:"w-5 h-5 text-gray-500"})})]}),_.jsx("div",{className:"overflow-y-auto p-4 space-y-3 flex-1",children:i?_.jsx("div",{className:"flex justify-center p-8",children:_.jsx("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):r.length===0?_.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[_.jsx(Td,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),_.jsx("p",{children:u("no_results")})]}):r.map(g=>_.jsxs("div",{onClick:()=>f(g.id),className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl cursor-pointer transition-colors",children:[_.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.displayName||g.name||"User"}&background=random`,alt:g.displayName||g.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 dark:border-gray-700"}),_.jsx("div",{className:"flex-1 min-w-0",children:_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate",children:g.displayName||g.name||"Unknown User"})}),l&&o&&_.jsx("button",{onClick:y=>{y.stopPropagation(),l(g.id)},className:"text-xs font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors mr-2",children:o}),_.jsx("button",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:u("view_profile")})]},g.id))})]})})};function lS(){const{t:n,i18n:e}=Ut(),t=kr(),r=er(),{currentUser:i,refreshUser:o}=Rr(),{addToast:l}=Va(),{userId:u}=Q0(),[h,f]=z.useState(null),[g,y]=z.useState(""),[v,w]=z.useState(""),[x,N]=z.useState(!1),[O,L]=z.useState([]),[H,B]=z.useState(!0),[q,Y]=z.useState(!1),[V,R]=z.useState(!1),[E,T]=z.useState({followersCount:0,followingCount:0}),[k,C]=z.useState(!1),[j,D]=z.useState("followers"),[G,Z]=z.useState([]),[P,M]=z.useState(!1),ee=z.useRef(null),Q=!u||i&&u===i.uid,X=u||i?.uid;z.useEffect(()=>{(async()=>{if(X){B(!0);try{let Te=null;if(Q&&i)if(Te=i,f(Te),y(Te.name||Te.displayName||""),w(Te.avatar||Te.photoURL||""),Te.followersCount!==void 0)T({followersCount:Te.followersCount||0,followingCount:Te.followingCount||0});else{const Ye=await MT(X);T(Ye)}else{const Ye=Ue(Ae,"users",X),Qe=await Hn(Ye);Qe.exists()?Te={uid:Qe.id,...Qe.data()}:Te={uid:X,name:"Gardener"},f(Te);const ut=await MT(X);T(ut)}const $e=Ar(Zt(Ae,"posts"),La("userId","==",String(X)));let At=(await Ni($e)).docs.map(Ye=>({id:Ye.id,...Ye.data()}));if(At.sort((Ye,Qe)=>{const ut=Ye.createdAt?.seconds||0;return(Qe.createdAt?.seconds||0)-ut}),L(At),i&&!Q){const{isFollowing:Ye,isRequested:Qe}=await pR(i.uid,X);Y(Ye),R(Qe)}}catch(Te){console.error("Failed to load profile data",Te)}finally{B(!1)}}})()},[X,Q,i,r.state?.refreshId]);const $=async()=>{if(!i){l(n("login_required"),"info");return}if(!x){console.log("Follow Toggle Profile:",{currentUser:i.uid,targetUser:X,status:{isFollowing:q,isRequested:V}}),N(!0);try{q?(console.log("Unfollowing from Profile..."),await Xf(i.uid,X),T(ve=>({...ve,followersCount:Math.max(0,ve.followersCount-1)})),Y(!1),R(!1),l(n("unfollowed_user")||"Takipten kld","info")):V?(console.log("Cancelling Request from Profile..."),await _R(i.uid,X),R(!1),l(n("request_cancelled")||"stek iptal edildi","info")):(console.log("Sending Request from Profile...",{uid:i.uid,name:i.displayName,photo:i.photoURL}),await yR(i.uid,{displayName:i.displayName||"Unknown User",photoURL:i.photoURL||null},X),R(!0),l(n("request_sent")||"Takip istei gnderildi","success"))}catch(ve){console.error("Profile Follow Error:",ve),l(n("something_went_wrong")+`: ${ve.message}`,"error")}finally{N(!1)}}},K=async ve=>{D(ve),C(!0),M(!0);try{const Te=ve==="followers"?await jV(X):await LV(X);Z(Te)}catch(Te){console.error(Te)}finally{M(!1)}},te=async ve=>{if(!Q)return;const Te=ve.target.files[0];if(Te){N(!0);try{const Ze=await dn(Te,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),At=await new Promise(Ye=>{const Qe=new FileReader;Qe.readAsDataURL(Ze),Qe.onload=ut=>Ye(ut.target.result)});w(At),await Gs(Ue(Ae,"users",i.uid),{avatar:At,photoURL:At,email:i.email,name:g||i.displayName,displayName:g||i.displayName,updatedAt:new Date},{merge:!0});try{await dm(Fn.currentUser,{photoURL:At})}catch{}G0(i.uid,g,At),await o(),l(n("profile_updated")||"Profile updated!","success")}catch($e){console.error($e),l("Error updating avatar.","error")}finally{N(!1)}}},ne=async ve=>{if(ve.preventDefault(),!!Q&&g.trim()){N(!0);try{await dm(Fn.currentUser,{displayName:g}),await Gs(Ue(Ae,"users",i.uid),{name:g,displayName:g,updatedAt:new Date},{merge:!0}),G0(i.uid,g,v),await o(),l(n("profile_updated")||"Profile updated!","success")}catch{l("Failed to update profile.","error")}finally{N(!1)}}};if(!X)return _.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(H&&!h)return _.jsx(Ng,{});const re=ve=>!ve?.lastSeen||!ve.lastSeen.seconds?!1:Date.now()-ve.lastSeen.seconds*1e3<180*1e3,ye=ve=>ve?.lastSeen?Rg(new Date(ve.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?Ig:Qd}):"Offline",ke=async ve=>{if(confirm(n("confirm_unfollow")||"Takipten kmak istediinize emin misiniz?"))try{await Xf(i.uid,ve),Z(Te=>Te.filter($e=>$e.id!==ve)),T(Te=>({...Te,followingCount:Math.max(0,Te.followingCount-1)})),l(n("unfollowed_user")||"Takipten kld","success")}catch(Te){console.error(Te),l("Error","error")}},je=async ve=>{if(confirm(n("confirm_remove_follower")||"Bu takipiyi karmak istediinize emin misiniz?"))try{await Xf(ve,i.uid),Z(Te=>Te.filter($e=>$e.id!==ve)),T(Te=>({...Te,followersCount:Math.max(0,Te.followersCount-1)})),l(n("follower_removed")||"Takipi karld","success")}catch(Te){console.error(Te),l("Error","error")}};return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:_.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[_.jsx("div",{className:"w-full md:w-1/3",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[_.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[_.jsxs("div",{className:`relative ${Q?"group cursor-pointer":""} mt-2`,onClick:()=>Q&&ee.current?.click(),children:[_.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(Q?v:h?.avatar||h?.photoURL)?_.jsx("img",{src:Q?v:h?.avatar||h?.photoURL,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:_.jsx("img",{src:`https://ui-avatars.com/api/?name=${Q?g||"Gardener":h?.name||h?.displayName||O.length>0&&O[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!Q&&h&&_.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${re(h)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[_.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${re(h)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),re(h)?"Online":ye(h)]}),Q&&_.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:_.jsx(lc,{className:"w-8 h-8 text-white"})}),x&&_.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:_.jsx($r,{className:"animate-spin text-green-600"})})]}),Q&&_.jsx("input",{type:"file",ref:ee,onChange:te,className:"hidden",accept:"image/*"}),_.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:Q?g||n("gardener")||"Bahvan":h?.name||h?.displayName||O.length>0&&O[0].authorName||n("gardener")||"Bahvan"}),Q&&_.jsx("p",{className:"text-sm text-gray-500",children:i.email})]}),Q?_.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),_.jsx("input",{type:"text",value:g,onChange:ve=>y(ve.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),_.jsxs("button",{type:"submit",disabled:x,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[x?_.jsx($r,{className:"animate-spin w-4 h-4"}):_.jsx(hR,{className:"w-4 h-4"}),_.jsx("span",{children:n("save_changes")})]})]}):_.jsxs("div",{className:"text-center",children:[_.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",h?.createdAt?.seconds?new Date(h.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),q&&_.jsxs("button",{onClick:()=>{const ve={uid:h.uid||X,name:h.name||h.displayName||O.length>0&&O[0].authorName||"Gardener",photoURL:h.photoURL||h.avatar||null};t("/messages/new",{state:{targetUser:ve}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[_.jsx(wd,{className:"w-5 h-5"}),_.jsx("span",{children:n("send_message")})]})]}),_.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>K("followers"),children:[_.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:E.followersCount}),_.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("followers")})]}),_.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-3 text-center min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>K("following"),children:[_.jsx("span",{className:"block text-xl font-bold text-gray-900 dark:text-white",children:E.followingCount}),_.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n("following_count")})]})]}),!Q&&_.jsx("div",{className:"flex gap-2 w-full px-6 mb-6",children:_.jsxs("button",{onClick:$,disabled:x,className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${q?"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600":V?"bg-gray-100 text-gray-500 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400":"bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-500/20"}`,children:[x?_.jsx($r,{className:"w-4 h-4 animate-spin"}):q?_.jsx(TV,{className:"w-4 h-4"}):V?_.jsx(Ag,{className:"w-4 h-4"}):_.jsx(mv,{className:"w-4 h-4"}),q?n("unfollow"):V?n("requested")||"Requested":n("follow")]})})]})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:_.jsx("span",{children:Q?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:h?.name||"Kullanc"})||`${h?.name||"Kullanc"} Gnderileri`})}),H?_.jsx("div",{className:"flex justify-center py-20",children:_.jsx($r,{className:"w-8 h-8 animate-spin text-gray-300"})}):O.length>0?_.jsx("div",{className:"columns-1 gap-6 space-y-6",children:O.map(ve=>_.jsx("div",{className:"break-inside-avoid",children:_.jsx(wv,{post:{...ve,hideAuthor:Q},onViewAnalysis:()=>{},onDelete:Te=>L($e=>$e.filter(Ze=>Ze.id!==Te))})},ve.id))}):_.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[_.jsx(lR,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),_.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})}),_.jsx(R8,{isOpen:k,onClose:()=>C(!1),title:n(j==="followers"?"followers":"following"),users:G,loading:P,actionLabel:Q?j==="following"?n("unfollow")||"Takipten kar":n("remove")||"Takipten kar":null,onAction:Q?j==="following"?ke:je:null})]})}function I8(){const{t:n,i18n:e}=Ut(),t={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:dr},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:jm},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:OT}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:dr},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:jm},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:OT}]}},r=t[e.language]||t.en;return _.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:_.jsx(sR,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),_.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("about")}),_.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',r.intro,'"']})]}),_.jsx("div",{className:"space-y-6",children:r.sections.map((i,o)=>{const l=i.icon;return _.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[_.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:_.jsx(l,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:i.title}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:i.text})]})]},o)})})]})}function N8(){const{t:n}=Ut(),{currentUser:e}=Rr();kr();const t=er(),[r,i]=z.useState([]),[o,l]=z.useState(!0),[u,h]=z.useState(null),[f,g]=z.useState(!1),[y,v]=z.useState(null),[w,x]=z.useState(""),[N,O]=z.useState(!1),L=z.useRef(null),H=async(R,E)=>{if(R.stopPropagation(),!!window.confirm(n("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await RR(E),i(T=>T.filter(k=>k.id!==E))}catch(T){console.error("Delete failed",T),alert("Failed to delete analysis.")}};z.useEffect(()=>{e&&B()},[e,t.state?.refreshId]),z.useEffect(()=>{t.state?.showTreatmentGuide&&(g(!0),window.history.replaceState({},document.title))},[t]);const B=async()=>{l(!0);const R=await kR(e.uid);i(R),l(!1),t.state?.newAnalysisId?h(t.state.newAnalysisId):R.length>0&&t.state?.showTreatmentGuide&&h(R[0].id)},q=R=>{h(E=>E===R?null:R),v(null)},Y=async(R,E)=>{if(R.stopPropagation(),!E.isPublic&&window.confirm(n("confirm_share")||"Share this diagnosis with the community?"))try{await CR(E.id,E,E.plantType||"plant",e.displayName||n("gardener")||"Bahvan",e.photoURL),i(T=>T.map(k=>k.id===E.id?{...k,isPublic:!0}:k))}catch(T){console.error("Share failed",T),alert("Failed to share.")}},V=async R=>{if(w.trim()){O(!0);try{let E=null;if(L.current?.files?.[0]){const T=L.current.files[0];E=await new Promise(k=>{const C=new FileReader;C.onload=j=>k(j.target.result),C.readAsDataURL(T)})}await DR(R.id,E,w),v(null),x(""),B()}catch(E){console.error("Feedback failed",E),alert("Failed to save update.")}finally{O(!1)}}};return o?_.jsx(Ng,{}):r.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[_.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:_.jsx(dr,{className:"w-12 h-12 text-green-600"})}),_.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:n("no_analyses_title")||"Henz Bir Analiz Yok"}),_.jsx("p",{className:"mb-8 max-w-md",children:n("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),_.jsxs(Os,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[_.jsx(lc,{className:"w-5 h-5"}),n("start_diagnosis")||"Analiz Balat"]})]}):_.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[_.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[_.jsx(dv,{className:"w-7 h-7 text-green-600"}),n("treatment_updates")||"Tedavi & Takip"]}),_.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[r.length," ",n("records")||"Kayt"]})]}),_.jsx("div",{className:"grid gap-6",children:r.map(R=>_.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${u===R.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[_.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer items-center relative",onClick:()=>q(R.id),children:[_.jsx("img",{src:R.mainImage,alt:R.plantType,className:"w-20 h-20 md:w-28 md:h-28 rounded-2xl object-cover bg-gray-100 shadow-sm shrink-0"}),_.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[_.jsxs("div",{className:"min-w-0 flex-1",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight break-words",children:R.plantType||"Unknown Plant"}),(R.result.plant_latin_name||R.result.latin_name)&&_.jsxs("p",{className:"text-sm text-gray-500 italic font-medium mt-0.5",children:["(",R.result.plant_latin_name||R.result.latin_name,")"]})]}),_.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0 h-fit mt-1",children:[_.jsx(Ag,{className:"w-3 h-3"}),R.createdAt?.seconds?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),_.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-1 text-sm flex items-center gap-2",children:[_.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse shrink-0"}),_.jsx("span",{className:"break-words line-clamp-2",children:R.result.disease_name})]}),_.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-bold text-gray-400 mt-2",children:[_.jsx("span",{className:"text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-0.5 rounded",children:"7 Gnlk Program"}),R.isPublic&&_.jsxs("span",{className:"text-blue-500 flex items-center gap-1",children:[_.jsx(Lm,{className:"w-3 h-3"}),"Paylald"]})]})]})]}),_.jsx(fv,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${u===R.id?"rotate-180":""}`}),u===R.id&&_.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:n("description")}),_.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap text-sm",children:R.result.description})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[_.jsx(CT,{className:"w-5 h-5 text-green-600"}),R.result.is_treatable===!1?n("prevention_tips")||"Koruyucu nlemler":n("treatment_steps")||"Tedavi Admlar"]}),R.result.is_treatable===!1&&_.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:n("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),_.jsx("div",{className:"space-y-3",children:(R.result.is_treatable===!1?R.result.preventive_measures:R.result.treatment_steps)?.map((E,T)=>_.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[_.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold text-xs shrink-0 ${R.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:T+1}),_.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed",children:E})]},T))})]}),R.updates&&R.updates.length>0&&_.jsxs("div",{className:"mb-6",children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),_.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:R.updates.map((E,T)=>_.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm shrink-0",children:[E.imageUrl&&_.jsx("img",{src:E.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(E.createdAt?.seconds*1e3).toLocaleDateString()}),_.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:E.note})]},T))})]}),_.jsxs("div",{className:"flex flex-col gap-3",children:[_.jsxs("div",{className:"flex gap-3",children:[R.result.is_treatable&&_.jsxs("button",{onClick:()=>v(y===R.id?null:R.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[_.jsx(lc,{className:"w-5 h-5"}),n("add_update")||"Gelime Ekle"]}),_.jsxs("button",{onClick:E=>Y(E,R),disabled:R.isPublic,className:`flex-1 px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all ${R.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[_.jsx(Lm,{className:"w-5 h-5"}),R.isPublic?n("shared")||"Paylald":n("share")||"Payla"]})]}),_.jsxs("button",{onClick:E=>H(E,R.id),className:"w-full py-3 mt-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[_.jsx(Ed,{className:"w-4 h-4"}),n("delete_analysis")||"Analizi Sil"]})]}),y===R.id&&_.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[_.jsx("textarea",{value:w,onChange:E=>x(E.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("input",{type:"file",ref:L,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),_.jsx("button",{onClick:()=>V(R),disabled:N,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:N?_.jsx($r,{className:"w-5 h-5 animate-spin"}):_.jsx(xd,{className:"w-5 h-5"})})]})]})]})]},R.id))}),f&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),_.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),_.jsxs("div",{className:"text-center relative z-10",children:[_.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:_.jsx(AL,{className:"w-10 h-10 text-green-600"})}),_.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),_.jsxs("div",{className:"space-y-4 text-left mb-8",children:[_.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:_.jsx(CT,{className:"w-5 h-5 text-blue-500"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),_.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),_.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:_.jsx(lc,{className:"w-5 h-5 text-purple-500"})}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),_.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),_.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function C8(){const{isOpen:n,view:e,closeModal:t,toggleView:r}=bv(),{t:i}=Ut(),[o,l]=z.useState(""),[u,h]=z.useState(""),[f,g]=z.useState(""),[y,v]=z.useState(!1),[w,x]=z.useState("");if(!n)return null;const N=async O=>{O.preventDefault(),x(""),v(!0);try{if(e==="login")await p0(Fn,o,u);else{const L=await T2(Fn,o,u);await dm(L.user,{displayName:f}),await Gs(Ue(Ae,"users",L.user.uid),{uid:L.user.uid,displayName:f,email:o,createdAt:new Date,photoURL:`https://ui-avatars.com/api/?name=${f}&background=random`})}t(),l(""),h(""),g("")}catch(L){console.error(L),L.code==="auth/invalid-credential"?x(i("error_invalid_credential")||"Hatal e-posta veya ifre"):L.code==="auth/email-already-in-use"?x(i("error_email_in_use")||"Bu e-posta zaten kullanmda"):x(i("error_generic")||"Bir hata olutu")}finally{v(!1)}};return _.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative animate-slide-up",children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors z-10",children:_.jsx(Kr,{className:"w-5 h-5"})}),_.jsxs("div",{className:"p-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e==="login"?i("welcome_back")||"Tekrar Hogeldiniz":i("create_account")||"Hesap Olutur"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e==="login"?i("login_desc")||"Devam etmek iin giri yapn":i("register_desc")||"Toplulua katlmak iin kayt olun"})]}),_.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e==="register"&&_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("full_name")}),_.jsxs("div",{className:"relative",children:[_.jsx(Td,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"text",required:!0,value:f,onChange:O=>g(O.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Ad Soyad"})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("email")}),_.jsxs("div",{className:"relative",children:[_.jsx(cR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"email",required:!0,value:o,onChange:O=>l(O.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"ornek@email.com"})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 ml-1",children:i("password")}),_.jsxs("div",{className:"relative",children:[_.jsx(zL,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),_.jsx("input",{type:"password",required:!0,value:u,onChange:O=>h(O.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:""})]})]}),w&&_.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg text-center",children:w}),_.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20 flex items-center justify-center gap-2",children:y?_.jsx($r,{className:"w-5 h-5 animate-spin"}):_.jsxs(_.Fragment,{children:[_.jsx("span",{children:e==="login"?i("login")||"Giri Yap":i("register")||"Kayt Ol"}),_.jsx(hv,{className:"w-4 h-4"})]})})]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e==="login"?i("no_account")||"Hesabnz yok mu?":i("already_have_account")||"Zaten hesabnz var m?"," ",_.jsx("button",{onClick:r,className:"font-bold text-green-600 hover:text-green-700 transition-colors",children:e==="login"?i("register_now")||"Hemen Kaydol":i("login_now")||"Giri Yap"})]})})]})]})})}var cS={},D8="@vercel/analytics",O8="1.6.1",M8=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function ZR(){return typeof window<"u"}function eI(){try{const n="production"}catch{}return"production"}function P8(n="auto"){if(n==="auto"){window.vam=eI();return}window.vam=n}function j8(){return(ZR()?window.vam:eI())||"production"}function K0(){return j8()==="development"}function L8(n){return n.scriptSrc?n.scriptSrc:K0()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function V8(n={debug:!0}){var e;if(!ZR())return;P8(n.mode),M8(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=L8(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=D8+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=O8,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=K0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},K0()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function U8({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function z8(){if(!(typeof process>"u"||typeof cS>"u"))return cS.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function F8(n){return z.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),z.useEffect(()=>{V8({framework:n.framework||"react",basePath:n.basePath??z8(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),z.useEffect(()=>{n.route&&n.path&&U8({route:n.route,path:n.path})},[n.route,n.path]),null}function B8(){const{i18n:n}=Ut(),e=()=>{n.changeLanguage(n.language==="en"?"tr":"en")};return _.jsxs("button",{onClick:e,className:"fixed bottom-20 md:bottom-6 right-4 z-[9990] bg-white/90 dark:bg-gray-800/90 backdrop-blur-md text-gray-900 dark:text-white px-4 py-2.5 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 font-bold text-xs flex items-center gap-2 transition-all hover:scale-105 hover:bg-white dark:hover:bg-gray-800","aria-label":"Change Language",children:[_.jsx(jm,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),_.jsx("span",{children:n.language==="en"?"TR":"EN"})]})}function q8(){return _.jsx(DV,{children:_.jsxs(X9,{children:[_.jsxs(zC,{children:[_.jsxs(wr,{path:"/",element:_.jsx(UV,{}),children:[_.jsx(wr,{index:!0,element:_.jsx(DU,{})}),_.jsx(wr,{path:"community",element:_.jsx(c8,{})}),_.jsx(wr,{path:"community/post/:postId",element:_.jsx(u8,{})}),_.jsx(wr,{path:"messages",element:_.jsx(h8,{})}),_.jsx(wr,{path:"messages/:chatId",element:_.jsx(k8,{})}),_.jsx(wr,{path:"analyses",element:_.jsx(N8,{})}),_.jsx(wr,{path:"profile",element:_.jsx(lS,{})}),_.jsx(wr,{path:"profile/:userId",element:_.jsx(lS,{})}),_.jsx(wr,{path:"about",element:_.jsx(I8,{})})]}),_.jsx(wr,{path:"/login",element:_.jsx(zV,{})}),_.jsx(wr,{path:"/register",element:_.jsx(BV,{})})]}),_.jsx(C8,{}),_.jsx(B8,{}),_.jsx(F8,{})]})})}const $8="Plant AI",H8="Something went wrong",G8="An unexpected error occurred.",K8="Reload",Y8="Go Home",Q8="Welcome to Plant AI",W8="Plant Diagnosis",X8="Community",J8="Profile",Z8="Login",ez="Messages",tz="Language",nz="Logout",rz="Dark Mode",sz="Light Mode",iz="My Analyses",az="Register",oz="Upload Photo",lz="Take Photo",cz="Analyzing...",uz="Diagnosis Results",dz="Treatment",hz="Confidence",fz="Save Changes",mz="Saving...",gz="Display Name",pz="Email",yz="Password",_z="Tap to change avatar",vz="Profile updated successfully!",bz="About Project",wz="Do you know the name of this plant?",xz="e.g., Rose, Tomato, Unknown...",Ez="1. Plant Name",Tz="2. Capture Photo",Sz="Next",Az="I don't know",kz="I couldn't identify it clearly. Please take a close-up photo of a leaf.",Rz="Take Close-up Photo",Iz="Login to view detailed diagnosis and treatment plan.",Nz="Login to View Results",Cz="Detailed analysis is available for members only.",Dz="AI Powered Plant Doctor",Oz='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',Mz="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",Pz="Start Diagnosis",jz="Identify",Lz="Tell us the plant name or type.",Vz="Analyze",Uz="Upload photos of the affected area.",zz="Heal",Fz="Get instant treatment plan.",Bz="Welcome, ",qz="Diagnosis failed. Please try again.",$z="Back",Hz="Plant",Gz="Tomato",Kz="Pepper",Yz="Cucumber",Qz="Rose",Wz="Succulent",Xz="Orchid",Jz="Lemon",Zz="Strawberry",e7="Mint",t7="Other",n7="Healthy / No Issue",r7="Yellowing Leaves",s7="Leaf Spots",i7="Wilting",a7="Pests / Bugs",o7="Root/Stem Rot",l7="Mold / Fungus",c7="Unknown / Help Needed",u7="Auto-Detect from Image",d7="Detecting...",h7="Ask Question",f7="Please login to post.",m7="Login Required",g7="Are you sure you want to delete this post?",p7="Just now",y7="Failed to delete post",_7="Failed to post comment",v7="Failed to update post",b7="Add a comment...",w7="Please login to comment.",x7="No comments yet. Be the first!",E7="Edit Post",T7="Cancel",S7="Share to Community",A7="Gardener",k7="Community Member",R7="Send Message",I7="Starting...",N7="Please login to message users.",C7="You cannot message yourself.",D7="Failed to start chat.",O7=" No posts yet",M7="Be the first to share your garden!",P7="No results",j7="Like",L7="Comment",V7="Edit",U7="Joined",z7="Unknown Date",F7="View Profile",B7="Block User",q7="Unblock User",$7="Posts",H7="Likes",G7="My Posts",K7="{{name}}'s Posts",Y7="New Chat",Q7="View Analysis Report",W7="Type a message...",X7="POWERED BY GEMINI AI",J7="Heal your plants with",Z7="AI Precision",eF="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",tF="Instant Analysis",nF="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",rF="Smart Interactions",sF="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",iF="Verified Treatments",aF="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",oF="Your Personal Pocket Botanist",lF="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",cF="Open Camera",uF="Select from Gallery",dF="No plant detected. Please ensure the subject is a clear plant or leaf.",hF="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",fF="Retry",mF="Camera access denied. Please check your browser permissions.",gF="Last seen",pF="Prevention Tips",yF="This plant may not fully recover, but follow these steps to prevent spread.",_F="Description",vF="Urgency",bF="Spread Risk",wF="New Scan",xF="Back to Community",EF="Welcome Back",TF="Create Account",SF="Log in to continue",AF="Register to join the community",kF="Register Now",RF="Log In",IF="Don't have an account?",NF="Invalid email or password",CF="Email already in use",DF="An error occurred",OF="Plant AI Daily Log",MF="Delete Analysis",PF="Follow",jF="Following",LF="Followers",VF="Following",UF="Unfollow",zF="No followers yet",FF="Not following anyone yet",BF="Requested",qF="Follow request sent",$F="Request cancelled",HF="You must follow to send message",GF="Notifications",KF="Request accepted",YF="Request rejected",QF="Follow Requests",WF="Wants to follow you",XF="No new notifications",JF="An error occurred",ZF="Follow to Message",eB="Sign in to your account",tB="Creating Account...",nB="Create an account to join the community",rB="Share",sB={app_name:$8,something_went_wrong:H8,unexpected_error:G8,reload:K8,go_home:Y8,welcome:Q8,plant_diagnosis:W8,community:X8,profile:J8,login:Z8,messages:ez,language:tz,logout:nz,dark_mode:rz,light_mode:sz,analyses:iz,register:az,upload_photo:oz,take_photo:lz,analyzing:cz,results:uz,treatment:dz,confidence:hz,save_changes:fz,saving:mz,display_name:gz,email:pz,password:yz,change_avatar:_z,profile_updated:vz,about:bz,what_plant_question:wz,what_plant_placeholder:xz,scan_step_1:Ez,scan_step_2:Tz,next_step:Sz,skip:Az,need_macro_photo:kz,take_macro_photo:Rz,login_blur_text:Iz,login_to_view:Nz,guest_limited:Cz,hero_badge:Dz,hero_title:Oz,hero_desc:Mz,start_diagnosis:Pz,step_1_title:jz,step_1_desc:Lz,step_2_title:Vz,step_2_desc:Uz,step_3_title:zz,step_3_desc:Fz,welcome_user:Bz,error_diagnosis_failed:qz,back:$z,plant:Hz,plant_tomato:Gz,plant_pepper:Kz,plant_cucumber:Yz,plant_rose:Qz,plant_succulent:Wz,plant_orchid:Xz,plant_lemon:Jz,plant_strawberry:Zz,plant_mint:e7,plant_other:t7,disease_none:n7,disease_yellowing:r7,disease_spots:s7,disease_wilting:i7,disease_bugs:a7,disease_rot:o7,disease_mold:l7,disease_unknown:c7,auto_detect:u7,detecting:d7,ask_question:h7,login_to_post:f7,login_required:m7,confirm_delete_post:g7,just_now:p7,failed_delete_post:y7,failed_post_comment:_7,failed_update_post:v7,add_comment_placeholder:b7,login_to_comment:w7,no_comments_yet:x7,edit_post:E7,cancel:T7,share:S7,gardener:A7,community_member:k7,send_message:R7,starting_chat:I7,login_to_message:N7,cannot_message_self:C7,failed_start_chat:D7,no_posts_yet:O7,be_the_first:M7,no_results:P7,like:j7,comment:L7,edit:V7,delete:"Delete",joined:U7,unknown_date:z7,view_profile:F7,block_user:B7,unblock_user:q7,posts:$7,likes:H7,my_posts:G7,user_posts_title:K7,new_conversation:Y7,view_analysis_report:Q7,type_message:W7,ai_powered_v2:X7,hero_title_1:J7,hero_title_highlight:Z7,hero_desc_v2:eF,feature_1_title:tF,feature_1_desc:nF,feature_2_title:rF,feature_2_desc:sF,feature_3_title:iF,feature_3_desc:aF,summary_title:oF,summary_desc:lF,open_camera:cF,upload_gallery:uF,error_not_plant:dF,error_server_busy:hF,retry:fF,camera_permission_denied:mF,last_seen:gF,prevention_tips:pF,plant_not_recoverable:yF,description:_F,urgency:vF,spread_risk:bF,new_scan:wF,back_to_community:xF,welcome_back:EF,create_account:TF,login_desc:SF,register_desc:AF,register_now:kF,login_now:RF,no_account:IF,error_invalid_credential:NF,error_email_in_use:CF,error_generic:DF,daily_bot_title:OF,delete_analysis:MF,follow:PF,following:jF,followers:LF,following_count:VF,unfollow:UF,no_followers:zF,no_following:FF,requested:BF,request_sent:qF,request_cancelled:$F,must_follow_to_message:HF,notifications:GF,request_accepted:KF,request_rejected:YF,follow_requests:QF,wants_to_follow:WF,no_notifications:XF,error_occurred:JF,must_follow:ZF,login_prompt:eB,creating_account:tB,join_community:nB,share_generic:rB},iB="Bitki AI",aB="Bir eyler ters gitti",oB="Beklenmedik bir hata olutu.",lB="Yenile",cB="Ana Sayfa",uB="Bitki AI'ye Hogeldiniz",dB="Bitki Tehisi",hB="Topluluk",fB="Profil",mB="Giri Yap",gB="Mesajlar",pB="Dil",yB="k Yap",_B="Koyu Tema",vB="Aydnlk Tema",bB="Analizlerim",wB="Kayt Ol",xB="Fotoraf Ykle",EB="Fotoraf ek",TB="Analiz ediliyor...",SB="Bitki",AB="Domates",kB="Biber",RB="Salatalk",IB="Patlcan",NB="Patates",CB="Soan",DB="Sarmsak",OB="Marul",MB="Ispanak",PB="Havu",jB="Fasulye",LB="Msr",VB="Kabak",UB="ilek",zB="Limon",FB="Portakal",BB="Elma",qB="zm",$B="Karpuz",HB="Kavun",GB="Kiraz",KB="eftali",YB="Gl",QB="Orkide",WB="Sukulent",XB="Lale",JB="Ayiei",ZB="Papatya",eq="Lavanta",tq="Kakts",nq="Zeytin",rq="am",sq="Palmiye",iq="Nane",aq="Fesleen",oq="Biberiye",lq="Maydanoz",cq="Dier",uq="Salkl / Sorun Yok",dq="Yaprak Sararmas",hq="Yaprak Lekeleri",fq="Solma",mq="Bcek / Haere",gq="Kk/Gvde rmesi",pq="Kf / Mantar",yq="Mildiy",_q="Besin Eksiklii",vq="Bilinmiyor / Yardm Lazm",bq="Fotoraftan Bul",wq="Taranyor...",xq="Bitki Se...",Eq="Tehis Sonular",Tq="Tedavi",Sq="Gven Oran",Aq="Deiiklikleri Kaydet",kq="Analizi Kaydet",Rq="Kaydedildi",Iq="Analiz baaryla kaydedildi!",Nq="Bu analiz zaten toplulukla paylald.",Cq="Bu analizi toplulukla paylamak istiyor musunuz?",Dq="Baaryla paylald!",Oq="Analizlerim",Mq="Kaydediliyor...",Pq="Grnen sim",jq="E-posta",Lq="Fotoraf deitirmek iin dokunun",Vq="Profil baaryla gncellendi!",Uq="Proje Hakknda",zq="Bu bitkinin adn biliyor musunuz?",Fq="rn. Gl, Domates, Bilmiyorum...",Bq="1. Bitki Ad",qq="2. Fotoraf ek",$q="Devam Et",Hq="Bilmiyorum",Gq="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",Kq="Yakndan ek",Yq="Detayl tehis ve tedavi plann grmek iin giri yapn.",Qq="Sonucu Grmek in Giri Yap",Wq="Detayl analiz sadece yelere zeldir.",Xq="Yapay Zeka Destekli Bitki Doktoru",Jq='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',Zq="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",e$="Tehise Bala",t$="Tanmla",n$="Bitkinin adn veya trn belirtin.",r$="Analiz Et",s$="Etkilenen blgenin fotorafn ykleyin.",i$="yiletir",a$="Annda tedavi planna kavuun.",o$="Hogeldin, ",l$="Tehis baarsz oldu. Ltfen tekrar deneyin.",c$="Geri",u$="Az nce",d$="Bu gnderiyi silmek istediinize emin misiniz?",h$="Gnderi silinemedi",f$="Yorum gnderilemedi",m$="Gnderi gncellenemedi",g$="Yorum yaz...",p$="Yorum yapmak iin giri yapn.",y$="Henz yorum yok. lk yorumu sen yap!",_$="Gnderiyi Dzenle",v$="ptal",b$="Kaydet",w$="Bahvan",x$="Topluluk yesi",E$="Mesaj Gnder",T$="Balatlyor...",S$="Mesaj gndermek iin giri yapn.",A$="Kendinize mesaj atamazsnz.",k$="Sohbet balatlamad.",R$=" Henz gnderi yok",I$="Baheni paylaan ilk kii ol!",N$="Sonu yok",C$="Been",D$="Yorum",O$="Dzenle",M$="Ad Soyad",P$="ifre",j$="Toplulua katlmak iin hesap oluturun.",L$="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",V$="E-postanz Dorulayn",U$="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",z$="E-posta Uygulamasn A",F$="Doruladm, Giri Yap",B$="Zaten hesabnz var m?",q$="Katlma Tarihi",$$="Bilinmiyor",H$="Profili Gr",G$="Kullancy Engelle",K$="Engeli Kaldr",Y$="Gnderi",Q$="Beeni",W$="Gnderilerim",X$="{{name}} Gnderileri",J$="Yeni Sohbet",Z$="Analiz Raporunu Gr",eH="Mesaj yazn...",tH="GEMINI AI DESTEKL",nH="Bitkilerinizi yiletirin",rH="Yapay Zeka Hassasiyeti",sH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",iH="Annda Analiz",aH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",oH="Akll Etkileimler",lH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",cH="Dorulanm Tedaviler",uH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",dH="Kiisel Cep Botanikiniz",hH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",fH="Kameray A",mH="Galeriden Se",gH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",pH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",yH="Tekrar Dene",_H="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",vH="Yakn ekim Fotoraf",bH="Bitki AI Dnyor...",wH="Analiz kaydedilemedi:",xH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",EH="Bu cihazda mikrofon bulunamad.",TH="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",SH="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",AH="Kaydediliyor...",kH="Mesaj dzenleniyor...",RH="Mesajnz dzenleyin...",IH="Tedavi sreci balatld!",NH="Bilgiyi Kaydet",CH="Tedaviye Bala",DH="Henz Bir Analiz Yok",OH="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",MH="Tedavi & Takip",PH="Kayt",jH="Bu analizi silmek istediinizden emin misiniz?",LH="Gelime Ekle",VH="Paylald",UH="Toplulukta Payla",zH="Toplulukla paylaarak bakalarna yardmc ol!",FH="Soru Sor",BH="Fotoraf",qH="Sesli Mesaj",$H="Son grlme {{days}} gn nce",HH="Son grlme {{hours}} saat nce",GH="Son grlme {{minutes}} dakika nce",KH="Az nce grld",YH="Dzenlendi",QH="Payla",WH="Balanty Kopyala",XH="Balant kopyaland!",JH="Sosyal Medyada Payla",ZH="Son grlme",eG="Koruyucu nlemler",tG="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",nG="Aklama",rG="Aciliyet",sG="Yaylma Riski",iG="Yeni Tarama",aG="Toplulua Dn",oG="Tekrar Hogeldiniz",lG="Hesap Olutur",cG="Devam etmek iin giri yapn",uG="Toplulua katlmak iin kayt olun",dG="Hemen Kaydol",hG="Giri Yap",fG="Hesabnz yok mu?",mG="Hatal e-posta veya ifre",gG="Bu e-posta zaten kullanmda",pG="Bir hata olutu",yG="Plant AI Gnlk Bilgi",_G="Analizi Sil",vG="Takip Et",bG="Takip Ediliyor",wG="Takipi",xG="Takip Edilen",EG="Takibi Brak",TG="Henz takipi yok",SG="Henz kimseyi takip etmiyor",AG="stek Gnderildi",kG="Takip istei gnderildi",RG="stek iptal edildi",IG="Mesaj gndermek iin takip etmelisiniz",NG="Bildirimler",CG="stek kabul edildi",DG="stek reddedildi",OG="Takip stekleri",MG="Seni takip etmek istiyor",PG="Yeni bildirim yok",jG="Bir hata olutu",LG="Mesaj in Takip Et",VG="Takipten kar",UG="Bu takipiyi listenizden karmak istediinize emin misiniz?",zG="Takipten kmak istediinize emin misiniz?",FG="Takipi karld",BG="Takipten kld",qG="%95 Doruluk",$G="Makro Destei",HG="Sfrla",GG="Bilinmeyen Bitki",KG="Hesabnza giri yapn",YG="Hesap Oluturuluyor...",QG="Toplulua katlmak iin hesap oluturun",WG="Payla",XG={app_name:iB,something_went_wrong:aB,unexpected_error:oB,reload:lB,go_home:cB,welcome:uB,plant_diagnosis:dB,community:hB,profile:fB,login:mB,messages:gB,language:pB,logout:yB,dark_mode:_B,light_mode:vB,analyses:bB,register:wB,upload_photo:xB,take_photo:EB,analyzing:TB,plant:SB,plant_tomato:AB,plant_pepper:kB,plant_cucumber:RB,plant_eggplant:IB,plant_potato:NB,plant_onion:CB,plant_garlic:DB,plant_lettuce:OB,plant_spinach:MB,plant_carrot:PB,plant_bean:jB,plant_corn:LB,plant_zucchini:VB,plant_strawberry:UB,plant_lemon:zB,plant_orange:FB,plant_apple:BB,plant_grape:qB,plant_watermelon:$B,plant_melon:HB,plant_cherry:GB,plant_peach:KB,plant_rose:YB,plant_orchid:QB,plant_succulent:WB,plant_tulip:XB,plant_sunflower:JB,plant_daisy:ZB,plant_lavender:eq,plant_cactus:tq,plant_olive:nq,plant_pine:rq,plant_palm:sq,plant_mint:iq,plant_basil:aq,plant_rosemary:oq,plant_parsley:lq,plant_other:cq,disease_none:uq,disease_yellowing:dq,disease_spots:hq,disease_wilting:fq,disease_bugs:mq,disease_rot:gq,disease_mold:pq,disease_mildew:yq,disease_nutrient:_q,disease_unknown:vq,auto_detect:bq,detecting:wq,select_plant:xq,results:Eq,treatment:Tq,confidence:Sq,save_changes:Aq,save_analysis:kq,saved:Rq,save_success:Iq,already_shared:Nq,confirm_share:Cq,share_success:Dq,my_analyses:Oq,saving:Mq,display_name:Pq,email:jq,change_avatar:Lq,profile_updated:Vq,about:Uq,what_plant_question:zq,what_plant_placeholder:Fq,scan_step_1:Bq,scan_step_2:qq,next_step:$q,skip:Hq,need_macro_photo:Gq,take_macro_photo:Kq,login_blur_text:Yq,login_to_view:Qq,guest_limited:Wq,hero_badge:Xq,hero_title:Jq,hero_desc:Zq,start_diagnosis:e$,step_1_title:t$,step_1_desc:n$,step_2_title:r$,step_2_desc:s$,step_3_title:i$,step_3_desc:a$,welcome_user:o$,error_diagnosis_failed:l$,back:c$,just_now:u$,confirm_delete_post:d$,failed_delete_post:h$,failed_post_comment:f$,failed_update_post:m$,add_comment_placeholder:g$,login_to_comment:p$,no_comments_yet:y$,edit_post:_$,cancel:v$,save:b$,gardener:w$,community_member:x$,send_message:E$,starting_chat:T$,login_to_message:S$,cannot_message_self:A$,failed_start_chat:k$,no_posts_yet:R$,be_the_first:I$,no_results:N$,like:C$,comment:D$,edit:O$,delete:"Sil",full_name:M$,password:P$,create_account_desc:j$,verification_email_sent:L$,verify_email_title:V$,verify_email_desc:U$,open_email_app:z$,i_verified_it:F$,already_have_account:B$,joined:q$,unknown_date:$$,view_profile:H$,block_user:G$,unblock_user:K$,posts:Y$,likes:Q$,my_posts:W$,user_posts_title:X$,new_conversation:J$,view_analysis_report:Z$,type_message:eH,ai_powered_v2:tH,hero_title_1:nH,hero_title_highlight:rH,hero_desc_v2:sH,feature_1_title:iH,feature_1_desc:aH,feature_2_title:oH,feature_2_desc:lH,feature_3_title:cH,feature_3_desc:uH,summary_title:dH,summary_desc:hH,open_camera:fH,upload_gallery:mH,error_not_plant:gH,error_server_busy:pH,retry:yH,camera_permission_denied:_H,close_up_photo:vH,ai_thinking:bH,save_fail:wH,mic_access_denied:xH,mic_not_found:EH,mic_unavailable:TH,mic_generic_error:SH,recording:AH,editing_message:kH,edit_message_placeholder:RH,treatment_started:IH,save_info:NH,start_treatment:CH,no_analyses_title:DH,no_analyses_desc:OH,treatment_updates:MH,records:PH,confirm_delete:jH,add_update:LH,shared:VH,share:UH,share_help_others:zH,ask_question:FH,photo:BH,voice_message:qH,last_seen_day:$H,last_seen_hour:HH,last_seen_min:GH,last_seen_just_now:KH,edited:YH,share_title:QH,copy_link:WH,link_copied:XH,social_share:JH,last_seen:ZH,prevention_tips:eG,plant_not_recoverable:tG,description:nG,urgency:rG,spread_risk:sG,new_scan:iG,back_to_community:aG,welcome_back:oG,create_account:lG,login_desc:cG,register_desc:uG,register_now:dG,login_now:hG,no_account:fG,error_invalid_credential:mG,error_email_in_use:gG,error_generic:pG,daily_bot_title:yG,delete_analysis:_G,follow:vG,following:bG,followers:wG,following_count:xG,unfollow:EG,no_followers:TG,no_following:SG,requested:AG,request_sent:kG,request_cancelled:RG,must_follow_to_message:IG,notifications:NG,request_accepted:CG,request_rejected:DG,follow_requests:OG,wants_to_follow:MG,no_notifications:PG,request_occurred:jG,must_follow:LG,remove:VG,confirm_remove_follower:UG,confirm_unfollow:zG,follower_removed:FG,unfollowed_user:BG,accuracy_badge:qG,macro_support:$G,reset:HG,unknown_plant:GG,login_prompt:KG,creating_account:YG,join_community:QG,share_generic:WG},{slice:JG,forEach:ZG}=[];function eK(n){return ZG.call(JG.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function tK(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const uS=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,nK=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!uS.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!uS.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},dS={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=nK(n,e,i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var rK={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return dS.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;t&&typeof document<"u"&&dS.create(t,n,r,i,o)}},sK={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const o=r.substring(1).split("&");for(let l=0;l<o.length;l++){const u=o[l].indexOf("=");u>0&&o[l].substring(0,u)===e&&(t=o[l].substring(u+1))}}return t}},iK={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(e){const l=o.split("&");for(let u=0;u<l.length;u++){const h=l[u].indexOf("=");h>0&&l[u].substring(0,h)===e&&(r=l[u].substring(h+1))}}if(r)return r;if(!r&&t>-1){const l=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return r}};let Ql=null;const hS=()=>{if(Ql!==null)return Ql;try{if(Ql=typeof window<"u"&&window.localStorage!==null,!Ql)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ql=!1}return Ql};var aK={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&hS())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&hS()&&window.localStorage.setItem(t,n)}};let Wl=null;const fS=()=>{if(Wl!==null)return Wl;try{if(Wl=typeof window<"u"&&window.sessionStorage!==null,!Wl)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Wl=!1}return Wl};var oK={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&fS())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&fS()&&window.sessionStorage.setItem(t,n)}},lK={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},cK={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},uK={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},dK={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};let tI=!1;try{document.cookie,tI=!0}catch{}const nI=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];tI||nI.splice(1,1);const hK=()=>({order:nI,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class rI{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=eK(t,this.options||{},hK()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(rK),this.addDetector(sK),this.addDetector(aK),this.addDetector(oK),this.addDetector(lK),this.addDetector(cK),this.addDetector(uK),this.addDetector(dK),this.addDetector(iK)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.filter(r=>r!=null&&!tK(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}rI.type="languageDetector";tr.use(rI).use(W4).init({resources:{en:{translation:sB},tr:{translation:XG}},fallbackLng:"en",detection:{order:["localStorage","navigator"],caches:["localStorage"]},interpolation:{escapeValue:!1}});HN.createRoot(document.getElementById("root")).render(_.jsx(z.StrictMode,{children:_.jsx(gR,{children:_.jsx(c4,{children:_.jsx(iL,{children:_.jsx(q8,{})})})})}));
