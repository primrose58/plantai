(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function sN(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fy={exports:{}},Su={};var Ew;function aN(){if(Ew)return Su;Ew=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return Su.Fragment=e,Su.jsx=t,Su.jsxs=t,Su}var Tw;function oN(){return Tw||(Tw=1,fy.exports=aN()),fy.exports}var b=oN(),my={exports:{}},ze={};var Sw;function lN(){if(Sw)return ze;Sw=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=v&&H[v]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function V(H,Y,ie){this.props=H,this.context=Y,this.refs=O,this.updater=ie||T}V.prototype.isReactComponent={},V.prototype.setState=function(H,Y){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Y,"setState")},V.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function B(){}B.prototype=V.prototype;function F(H,Y,ie){this.props=H,this.context=Y,this.refs=O,this.updater=ie||T}var q=F.prototype=new B;q.constructor=F,k(q,V.prototype),q.isPureReactComponent=!0;var K=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function S(H,Y,ie){var J=ie.ref;return{$$typeof:r,type:H,key:Y,ref:J!==void 0?J:null,props:ie}}function I(H,Y){return S(H.type,Y,H.props)}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function j(H){var Y={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ie){return Y[ie]})}var C=/\/+/g;function G(H,Y){return typeof H=="object"&&H!==null&&H.key!=null?j(""+H.key):Y.toString(36)}function te(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(z,z):(H.status="pending",H.then(function(Y){H.status==="pending"&&(H.status="fulfilled",H.value=Y)},function(Y){H.status==="pending"&&(H.status="rejected",H.reason=Y)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function P(H,Y,ie,J,re){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Te=!1;if(H===null)Te=!0;else switch(ye){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(H.$$typeof){case r:case e:Te=!0;break;case g:return Te=H._init,P(Te(H._payload),Y,ie,J,re)}}if(Te)return re=re(H),Te=J===""?"."+G(H,0):J,K(re)?(ie="",Te!=null&&(ie=Te.replace(C,"$&/")+"/"),P(re,Y,ie,"",function(qe){return qe})):re!=null&&(N(re)&&(re=I(re,ie+(re.key==null||H&&H.key===re.key?"":(""+re.key).replace(C,"$&/")+"/")+Te)),Y.push(re)),1;Te=0;var Ne=J===""?".":J+":";if(K(H))for(var Ie=0;Ie<H.length;Ie++)J=H[Ie],ye=Ne+G(J,Ie),Te+=P(J,Y,ie,ye,re);else if(Ie=w(H),typeof Ie=="function")for(H=Ie.call(H),Ie=0;!(J=H.next()).done;)J=J.value,ye=Ne+G(J,Ie++),Te+=P(J,Y,ie,ye,re);else if(ye==="object"){if(typeof H.then=="function")return P(te(H),Y,ie,J,re);throw Y=String(H),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Te}function D(H,Y,ie){if(H==null)return H;var J=[],re=0;return P(H,J,"","",function(ye){return Y.call(ie,ye,re++)}),J}function Z(H){if(H._status===-1){var Y=H._result;Y=Y(),Y.then(function(ie){(H._status===0||H._status===-1)&&(H._status=1,H._result=ie)},function(ie){(H._status===0||H._status===-1)&&(H._status=2,H._result=ie)}),H._status===-1&&(H._status=0,H._result=Y)}if(H._status===1)return H._result.default;throw H._result}var W=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ee={map:D,forEach:function(H,Y,ie){D(H,function(){Y.apply(this,arguments)},ie)},count:function(H){var Y=0;return D(H,function(){Y++}),Y},toArray:function(H){return D(H,function(Y){return Y})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ze.Activity=y,ze.Children=ee,ze.Component=V,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=F,ze.StrictMode=n,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ze.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},ze.cache=function(H){return function(){return H.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(H,Y,ie){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var J=k({},H.props),re=H.key;if(Y!=null)for(ye in Y.key!==void 0&&(re=""+Y.key),Y)!x.call(Y,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Y.ref===void 0||(J[ye]=Y[ye]);var ye=arguments.length-2;if(ye===1)J.children=ie;else if(1<ye){for(var Te=Array(ye),Ne=0;Ne<ye;Ne++)Te[Ne]=arguments[Ne+2];J.children=Te}return S(H.type,re,J)},ze.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},ze.createElement=function(H,Y,ie){var J,re={},ye=null;if(Y!=null)for(J in Y.key!==void 0&&(ye=""+Y.key),Y)x.call(Y,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=Y[J]);var Te=arguments.length-2;if(Te===1)re.children=ie;else if(1<Te){for(var Ne=Array(Te),Ie=0;Ie<Te;Ie++)Ne[Ie]=arguments[Ie+2];re.children=Ne}if(H&&H.defaultProps)for(J in Te=H.defaultProps,Te)re[J]===void 0&&(re[J]=Te[J]);return S(H,ye,re)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(H){return{$$typeof:u,render:H}},ze.isValidElement=N,ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:Z}},ze.memo=function(H,Y){return{$$typeof:f,type:H,compare:Y===void 0?null:Y}},ze.startTransition=function(H){var Y=M.T,ie={};M.T=ie;try{var J=H(),re=M.S;re!==null&&re(ie,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(z,W)}catch(ye){W(ye)}finally{Y!==null&&ie.types!==null&&(Y.types=ie.types),M.T=Y}},ze.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ze.use=function(H){return M.H.use(H)},ze.useActionState=function(H,Y,ie){return M.H.useActionState(H,Y,ie)},ze.useCallback=function(H,Y){return M.H.useCallback(H,Y)},ze.useContext=function(H){return M.H.useContext(H)},ze.useDebugValue=function(){},ze.useDeferredValue=function(H,Y){return M.H.useDeferredValue(H,Y)},ze.useEffect=function(H,Y){return M.H.useEffect(H,Y)},ze.useEffectEvent=function(H){return M.H.useEffectEvent(H)},ze.useId=function(){return M.H.useId()},ze.useImperativeHandle=function(H,Y,ie){return M.H.useImperativeHandle(H,Y,ie)},ze.useInsertionEffect=function(H,Y){return M.H.useInsertionEffect(H,Y)},ze.useLayoutEffect=function(H,Y){return M.H.useLayoutEffect(H,Y)},ze.useMemo=function(H,Y){return M.H.useMemo(H,Y)},ze.useOptimistic=function(H,Y){return M.H.useOptimistic(H,Y)},ze.useReducer=function(H,Y,ie){return M.H.useReducer(H,Y,ie)},ze.useRef=function(H){return M.H.useRef(H)},ze.useState=function(H){return M.H.useState(H)},ze.useSyncExternalStore=function(H,Y,ie){return M.H.useSyncExternalStore(H,Y,ie)},ze.useTransition=function(){return M.H.useTransition()},ze.version="19.2.3",ze}var Aw;function km(){return Aw||(Aw=1,my.exports=lN()),my.exports}var $=km();const BT=sN($);var gy={exports:{}},Au={},py={exports:{}},yy={};var Iw;function cN(){return Iw||(Iw=1,(function(r){function e(P,D){var Z=P.length;P.push(D);e:for(;0<Z;){var W=Z-1>>>1,ee=P[W];if(0<s(ee,D))P[W]=D,P[Z]=ee,Z=W;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var D=P[0],Z=P.pop();if(Z!==D){P[0]=Z;e:for(var W=0,ee=P.length,H=ee>>>1;W<H;){var Y=2*(W+1)-1,ie=P[Y],J=Y+1,re=P[J];if(0>s(ie,Z))J<ee&&0>s(re,ie)?(P[W]=re,P[J]=Z,W=J):(P[W]=ie,P[Y]=Z,W=Y);else if(J<ee&&0>s(re,Z))P[W]=re,P[J]=Z,W=J;else break e}}return D}function s(P,D){var Z=P.sortIndex-D.sortIndex;return Z!==0?Z:P.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,T=!1,k=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(P){for(var D=t(f);D!==null;){if(D.callback===null)n(f);else if(D.startTime<=P)n(f),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(f)}}function K(P){if(k=!1,q(P),!T)if(t(d)!==null)T=!0,z||(z=!0,j());else{var D=t(f);D!==null&&te(K,D.startTime-P)}}var z=!1,M=-1,x=5,S=-1;function I(){return O?!0:!(r.unstable_now()-S<x)}function N(){if(O=!1,z){var P=r.unstable_now();S=P;var D=!0;try{e:{T=!1,k&&(k=!1,B(M),M=-1),w=!0;var Z=v;try{t:{for(q(P),y=t(d);y!==null&&!(y.expirationTime>P&&I());){var W=y.callback;if(typeof W=="function"){y.callback=null,v=y.priorityLevel;var ee=W(y.expirationTime<=P);if(P=r.unstable_now(),typeof ee=="function"){y.callback=ee,q(P),D=!0;break t}y===t(d)&&n(d),q(P)}else n(d);y=t(d)}if(y!==null)D=!0;else{var H=t(f);H!==null&&te(K,H.startTime-P),D=!1}}break e}finally{y=null,v=Z,w=!1}D=void 0}}finally{D?j():z=!1}}}var j;if(typeof F=="function")j=function(){F(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,G=C.port2;C.port1.onmessage=N,j=function(){G.postMessage(null)}}else j=function(){V(N,0)};function te(P,D){M=V(function(){P(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var Z=v;v=D;try{return P()}finally{v=Z}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=v;v=P;try{return D()}finally{v=Z}},r.unstable_scheduleCallback=function(P,D,Z){var W=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?W+Z:W):Z=W,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Z+ee,P={id:g++,callback:D,priorityLevel:P,startTime:Z,expirationTime:ee,sortIndex:-1},Z>W?(P.sortIndex=Z,e(f,P),t(d)===null&&P===t(f)&&(k?(B(M),M=-1):k=!0,te(K,Z-W))):(P.sortIndex=ee,e(d,P),T||w||(T=!0,z||(z=!0,j()))),P},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(P){var D=v;return function(){var Z=v;v=D;try{return P.apply(this,arguments)}finally{v=Z}}}})(yy)),yy}var Rw;function uN(){return Rw||(Rw=1,py.exports=cN()),py.exports}var _y={exports:{}},On={};var Cw;function hN(){if(Cw)return On;Cw=1;var r=km();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,On.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},On.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},On.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},On.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},On.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},On.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},On.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},On.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},On.requestFormReset=function(d){n.d.r(d)},On.unstable_batchedUpdates=function(d,f){return d(f)},On.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.3",On}var Nw;function dN(){if(Nw)return _y.exports;Nw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_y.exports=hN(),_y.exports}var kw;function fN(){if(kw)return Au;kw=1;var r=uN(),e=km(),t=dN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return d(p),i;if(_===h)return d(p),a;_=_.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=_;else{for(var A=!1,L=p.child;L;){if(L===l){A=!0,l=p,h=_;break}if(L===h){A=!0,h=p,l=_;break}L=L.sibling}if(!A){for(L=_.child;L;){if(L===l){A=!0,l=_,h=p;break}if(L===h){A=!0,h=_,l=p;break}L=L.sibling}if(!A)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function j(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case V:return"Profiler";case O:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case F:return i.displayName||"Context";case B:return(i._context.displayName||"Context")+".Consumer";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case x:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var te=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function H(i){return{current:i}}function Y(i){0>ee||(i.current=W[ee],W[ee]=null,ee--)}function ie(i,a){ee++,W[ee]=i.current,i.current=a}var J=H(null),re=H(null),ye=H(null),Te=H(null);function Ne(i,a){switch(ie(ye,a),ie(re,i),ie(J,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?G1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=G1(a),i=K1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(J),ie(J,i)}function Ie(){Y(J),Y(re),Y(ye)}function qe(i){i.memoizedState!==null&&ie(Te,i);var a=J.current,l=K1(a,i.type);a!==l&&(ie(re,i),ie(J,l))}function Qe(i){re.current===i&&(Y(J),Y(re)),Te.current===i&&(Y(Te),wu._currentValue=Z)}var nt,Bt;function lt(i){if(nt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);nt=a&&a[1]||"",Bt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+i+Bt}var ct=!1;function Ct(i,a){if(!i||ct)return"";ct=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),A=_[0],L=_[1];if(A&&L){var Q=A.split(`
`),le=L.split(`
`);for(p=h=0;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;for(;p<le.length&&!le[p].includes("DetermineComponentFrameRoot");)p++;if(h===Q.length||p===le.length)for(h=Q.length-1,p=le.length-1;1<=h&&0<=p&&Q[h]!==le[p];)p--;for(;1<=h&&0<=p;h--,p--)if(Q[h]!==le[p]){if(h!==1||p!==1)do if(h--,p--,0>p||Q[h]!==le[p]){var fe=`
`+Q[h].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=h&&0<=p);break}}}finally{ct=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?lt(l):""}function at(i,a){switch(i.tag){case 26:case 27:case 5:return lt(i.type);case 16:return lt("Lazy");case 13:return i.child!==a&&a!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return lt("Activity");default:return""}}function ot(i){try{var a="",l=null;do a+=at(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var $e=Object.prototype.hasOwnProperty,pe=r.unstable_scheduleCallback,Ee=r.unstable_cancelCallback,Be=r.unstable_shouldYield,Me=r.unstable_requestPaint,xe=r.unstable_now,rt=r.unstable_getCurrentPriorityLevel,pt=r.unstable_ImmediatePriority,Bn=r.unstable_UserBlockingPriority,dt=r.unstable_NormalPriority,Fn=r.unstable_LowPriority,Ft=r.unstable_IdlePriority,kn=r.log,wn=r.unstable_setDisableYieldValue,Kt=null,Tt=null;function Zt(i){if(typeof kn=="function"&&wn(i),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Kt,i)}catch{}}var kt=Math.clz32?Math.clz32:Na,Yo=Math.log,oi=Math.LN2;function Na(i){return i>>>=0,i===0?32:31-(Yo(i)/oi|0)|0}var Dn=256,qi=262144,yt=4194304;function hn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=h&134217727;return L!==0?(h=L&~_,h!==0?p=hn(h):(A&=L,A!==0?p=hn(A):l||(l=L&~i,l!==0&&(p=hn(l))))):(L=h&~_,L!==0?p=hn(L):A!==0?p=hn(A):l||(l=h&~i,l!==0&&(p=hn(l)))),p===0?0:a!==0&&a!==p&&(a&_)===0&&(_=p&-p,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:p}function En(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Qo(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(){var i=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),i}function pn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function ka(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _g(i,a,l,h,p,_){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var L=i.entanglements,Q=i.expirationTimes,le=i.hiddenUpdates;for(l=A&~l;0<l;){var fe=31-kt(l),ge=1<<fe;L[fe]=0,Q[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}h!==0&&Da(i,h,0),_!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~a))}function Da(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Ac(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-kt(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function Ic(i,a){var l=a&-a;return l=(l&42)!==0?1:Oa(l),(l&(i.suspendedLanes|a))!==0?0:l}function Oa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $i(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hh(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function Br(i,a){var l=D.p;try{return D.p=i,a()}finally{D.p=l}}var Fr=Math.random().toString(36).slice(2),en="__reactFiber$"+Fr,yn="__reactProps$"+Fr,li="__reactContainer$"+Fr,Wo="__reactEvents$"+Fr,vg="__reactListeners$"+Fr,qh="__reactHandles$"+Fr,$h="__reactResources$"+Fr,ci="__reactMarker$"+Fr;function Xo(i){delete i[en],delete i[yn],delete i[Wo],delete i[vg],delete i[qh]}function ui(i){var a=i[en];if(a)return a;for(var l=i.parentNode;l;){if(a=l[li]||l[en]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=ew(i);i!==null;){if(l=i[en])return l;i=ew(i)}return a}i=l,l=i.parentNode}return null}function Tr(i){if(i=i[en]||i[li]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function or(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function hi(i){var a=i[$h];return a||(a=i[$h]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(i){i[ci]=!0}var Rc=new Set,Cc={};function di(i,a){fi(i,a),fi(i+"Capture",a)}function fi(i,a){for(Cc[i]=a,i=0;i<a.length;i++)Rc.add(a[i])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kc={},Dc={};function Gh(i){return $e.call(Dc,i)?!0:$e.call(kc,i)?!1:Nc.test(i)?Dc[i]=!0:(kc[i]=!0,!1)}function Jo(i,a,l){if(Gh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function lr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function nn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function _n(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Is(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Oc(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,_=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function _t(i){if(!i._valueTracker){var a=Is(i)?"checked":"value";i._valueTracker=Oc(i,a,""+i[a])}}function Ma(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Is(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Pa=/[\n"\\]/g;function Wn(i){return i.replace(Pa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Zo(i,a,l,h,p,_,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),a!=null?A==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+_n(a)):i.value!==""+_n(a)&&(i.value=""+_n(a)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),a!=null?Mc(i,A,_n(a)):l!=null?Mc(i,A,_n(l)):h!=null&&i.removeAttribute("value"),p==null&&_!=null&&(i.defaultChecked=!!_),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+_n(L):i.removeAttribute("name")}function Kh(i,a,l,h,p,_,A,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){_t(i);return}l=l!=null?""+_n(l):"",a=a!=null?""+_n(a):l,L||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=L?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),_t(i)}function Mc(i,a,l){a==="number"&&mi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Rs(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+_n(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Yh(i,a,l){if(a!=null&&(a=""+_n(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+_n(l):""}function Cs(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(te(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=_n(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),_t(i)}function Xn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Qh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pc(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Qh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function jc(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Pc(i,p,h)}else for(var _ in a)a.hasOwnProperty(_)&&Pc(i,_,a[_])}function el(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(i){return Ns.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Hr(){}var Vc=null;function Sr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ks=null,gi=null;function ja(i){var a=Tr(i);if(a&&(i=a.stateNode)){var l=i[yn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Zo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[yn]||null;if(!p)throw Error(n(90));Zo(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Ma(h)}break e;case"textarea":Yh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Rs(i,!!l.multiple,a,!1)}}}var nl=!1;function Ds(i,a,l){if(nl)return i(a,l);nl=!0;try{var h=i(a);return h}finally{if(nl=!1,(ks!==null||gi!==null)&&(Hd(),ks&&(a=ks,i=gi,gi=ks=null,ja(a),i)))for(a=0;a<i.length;a++)ja(i[a])}}function qr(i,a){var l=i.stateNode;if(l===null)return null;var h=l[yn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(Ar)try{var St={};Object.defineProperty(St,"passive",{get:function(){Va=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{Va=!1}var pi=null,Lc=null,La=null;function Uc(){if(La)return La;var i,a=Lc,l=a.length,h,p="value"in pi?pi.value:pi.textContent,_=p.length;for(i=0;i<l&&a[i]===p[i];i++);var A=l-i;for(h=1;h<=A&&a[l-h]===p[_-h];h++);return La=p.slice(i,1<h?1-h:void 0)}function Ua(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function $r(){return!1}function Tn(i){function a(l,h,p,_,A){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(l=i[L],this[L]=l?l(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gi:$r,this.isPropagationStopped=$r,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=Tn(Ki),Os=y({},Ki,{view:0,detail:0}),zc=Tn(Os),Ms,rl,_i,il=y({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_i&&(_i&&i.type==="mousemove"?(Ms=i.screenX-_i.screenX,rl=i.screenY-_i.screenY):rl=Ms=0,_i=i),Ms)},movementY:function(i){return"movementY"in i?i.movementY:rl}}),Bc=Tn(il),za=y({},il,{dataTransfer:0}),Xh=Tn(za),Jh=y({},Os,{relatedTarget:0}),Ba=Tn(Jh),Fc=y({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Zh=Tn(Fc),sl=y({},Ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ed=Tn(sl),td=y({},Ki,{data:0}),vi=Tn(td),nd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=id[i])?!!a[i]:!1}function Ps(){return sd}var Hn=y({},Os,{key:function(i){if(i.key){var a=nd[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ua(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(i){return i.type==="keypress"?Ua(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ua(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ad=Tn(Hn),od=y({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Tn(od),m=y({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),E=Tn(m),R=y({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Tn(R),ae=y({},il,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=Tn(ae),be=y({},Ki,{newState:0,oldState:0}),Fe=Tn(be),Yt=[9,13,27,32],ft=Ar&&"CompositionEvent"in window,Pt=null;Ar&&"documentMode"in document&&(Pt=document.documentMode);var Ir=Ar&&"TextEvent"in window&&!Pt,bi=Ar&&(!ft||Pt&&8<Pt&&11>=Pt),Gr=" ",Kr=!1;function Fa(i,a){switch(i){case"keyup":return Yt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function al(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ol=!1;function CR(i,a){switch(i){case"compositionend":return al(a);case"keypress":return a.which!==32?null:(Kr=!0,Gr);case"textInput":return i=a.data,i===Gr&&Kr?null:i;default:return null}}function NR(i,a){if(ol)return i==="compositionend"||!ft&&Fa(i,a)?(i=Uc(),La=Lc=pi=null,ol=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bi&&a.locale!=="ko"?null:a.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!kR[i.type]:a==="textarea"}function iv(i,a,l,h){ks?gi?gi.push(h):gi=[h]:ks=h,a=Wd(a,"onChange"),0<a.length&&(l=new yi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Hc=null,qc=null;function DR(i){z1(i,0)}function ld(i){var a=or(i);if(Ma(a))return i}function sv(i,a){if(i==="change")return a}var av=!1;if(Ar){var bg;if(Ar){var wg="oninput"in document;if(!wg){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),wg=typeof ov.oninput=="function"}bg=wg}else bg=!1;av=bg&&(!document.documentMode||9<document.documentMode)}function lv(){Hc&&(Hc.detachEvent("onpropertychange",cv),qc=Hc=null)}function cv(i){if(i.propertyName==="value"&&ld(qc)){var a=[];iv(a,qc,i,Sr(i)),Ds(DR,a)}}function OR(i,a,l){i==="focusin"?(lv(),Hc=a,qc=l,Hc.attachEvent("onpropertychange",cv)):i==="focusout"&&lv()}function MR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ld(qc)}function PR(i,a){if(i==="click")return ld(a)}function jR(i,a){if(i==="input"||i==="change")return ld(a)}function VR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var cr=typeof Object.is=="function"?Object.is:VR;function $c(i,a){if(cr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!$e.call(a,p)||!cr(i[p],a[p]))return!1}return!0}function uv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hv(i,a){var l=uv(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=uv(l)}}function dv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function fv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=mi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=mi(i.document)}return a}function xg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var LR=Ar&&"documentMode"in document&&11>=document.documentMode,ll=null,Eg=null,Gc=null,Tg=!1;function mv(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Tg||ll==null||ll!==mi(h)||(h=ll,"selectionStart"in h&&xg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Gc&&$c(Gc,h)||(Gc=h,h=Wd(Eg,"onSelect"),0<h.length&&(a=new yi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=ll)))}function Ha(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var cl={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Sg={},gv={};Ar&&(gv=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function qa(i){if(Sg[i])return Sg[i];if(!cl[i])return i;var a=cl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in gv)return Sg[i]=a[l];return i}var pv=qa("animationend"),yv=qa("animationiteration"),_v=qa("animationstart"),UR=qa("transitionrun"),zR=qa("transitionstart"),BR=qa("transitioncancel"),vv=qa("transitionend"),bv=new Map,Ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ag.push("scrollEnd");function Yr(i,a){bv.set(i,a),di(a,[i])}var cd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Rr=[],ul=0,Ig=0;function ud(){for(var i=ul,a=Ig=ul=0;a<i;){var l=Rr[a];Rr[a++]=null;var h=Rr[a];Rr[a++]=null;var p=Rr[a];Rr[a++]=null;var _=Rr[a];if(Rr[a++]=null,h!==null&&p!==null){var A=h.pending;A===null?p.next=p:(p.next=A.next,A.next=p),h.pending=p}_!==0&&wv(l,p,_)}}function hd(i,a,l,h){Rr[ul++]=i,Rr[ul++]=a,Rr[ul++]=l,Rr[ul++]=h,Ig|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Rg(i,a,l,h){return hd(i,a,l,h),dd(i)}function $a(i,a){return hd(i,null,null,a),dd(i)}function wv(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,_=i.return;_!==null;)_.childLanes|=l,h=_.alternate,h!==null&&(h.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(p=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,p&&a!==null&&(p=31-kt(l),i=_.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),_):null}function dd(i){if(50<mu)throw mu=0,Vp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var hl={};function FR(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(i,a,l,h){return new FR(i,a,l,h)}function Cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=ur(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function xv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function fd(i,a,l,h,p,_){var A=0;if(h=i,typeof i=="function")Cg(i)&&(A=1);else if(typeof i=="string")A=KC(i,l,J.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case S:return i=ur(31,l,a,p),i.elementType=S,i.lanes=_,i;case k:return Ga(l.children,p,_,a);case O:A=8,p|=24;break;case V:return i=ur(12,l,a,p|2),i.elementType=V,i.lanes=_,i;case K:return i=ur(13,l,a,p),i.elementType=K,i.lanes=_,i;case z:return i=ur(19,l,a,p),i.elementType=z,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:A=10;break e;case B:A=9;break e;case q:A=11;break e;case M:A=14;break e;case x:A=16,h=null;break e}A=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=ur(A,l,a,p),a.elementType=i,a.type=h,a.lanes=_,a}function Ga(i,a,l,h){return i=ur(7,i,h,a),i.lanes=l,i}function Ng(i,a,l){return i=ur(6,i,null,a),i.lanes=l,i}function Ev(i){var a=ur(18,null,null,0);return a.stateNode=i,a}function kg(i,a,l){return a=ur(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Tv=new WeakMap;function Cr(i,a){if(typeof i=="object"&&i!==null){var l=Tv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:ot(a)},Tv.set(i,a),a)}return{value:i,source:a,stack:ot(a)}}var dl=[],fl=0,md=null,Kc=0,Nr=[],kr=0,js=null,wi=1,xi="";function Wi(i,a){dl[fl++]=Kc,dl[fl++]=md,md=i,Kc=a}function Sv(i,a,l){Nr[kr++]=wi,Nr[kr++]=xi,Nr[kr++]=js,js=i;var h=wi;i=xi;var p=32-kt(h)-1;h&=~(1<<p),l+=1;var _=32-kt(a)+p;if(30<_){var A=p-p%5;_=(h&(1<<A)-1).toString(32),h>>=A,p-=A,wi=1<<32-kt(a)+p|l<<p|h,xi=_+i}else wi=1<<_|l<<p|h,xi=i}function Dg(i){i.return!==null&&(Wi(i,1),Sv(i,1,0))}function Og(i){for(;i===md;)md=dl[--fl],dl[fl]=null,Kc=dl[--fl],dl[fl]=null;for(;i===js;)js=Nr[--kr],Nr[kr]=null,xi=Nr[--kr],Nr[kr]=null,wi=Nr[--kr],Nr[kr]=null}function Av(i,a){Nr[kr++]=wi,Nr[kr++]=xi,Nr[kr++]=js,wi=a.id,xi=a.overflow,js=i}var Sn=null,Dt=null,it=!1,Vs=null,Dr=!1,Mg=Error(n(519));function Ls(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yc(Cr(a,i)),Mg}function Iv(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[en]=i,a[yn]=h,l){case"dialog":Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":case"embed":Xe("load",a);break;case"video":case"audio":for(l=0;l<pu.length;l++)Xe(pu[l],a);break;case"source":Xe("error",a);break;case"img":case"image":case"link":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"input":Xe("invalid",a),Kh(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Xe("invalid",a);break;case"textarea":Xe("invalid",a),Cs(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||q1(a.textContent,l)?(h.popover!=null&&(Xe("beforetoggle",a),Xe("toggle",a)),h.onScroll!=null&&Xe("scroll",a),h.onScrollEnd!=null&&Xe("scrollend",a),h.onClick!=null&&(a.onclick=Hr),a=!0):a=!1,a||Ls(i,!0)}function Rv(i){for(Sn=i.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Sn=Sn.return}}function ml(i){if(i!==Sn)return!1;if(!it)return Rv(i),it=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Jp(i.type,i.memoizedProps)),l=!l),l&&Dt&&Ls(i),Rv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=Z1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Dt=Z1(i)}else a===27?(a=Dt,Js(i.type)?(i=ry,ry=null,Dt=i):Dt=a):Dt=Sn?Mr(i.stateNode.nextSibling):null;return!0}function Ka(){Dt=Sn=null,it=!1}function Pg(){var i=Vs;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),Vs=null),i}function Yc(i){Vs===null?Vs=[i]:Vs.push(i)}var jg=H(null),Ya=null,Xi=null;function Us(i,a,l){ie(jg,a._currentValue),a._currentValue=l}function Ji(i){i._currentValue=jg.current,Y(jg)}function Vg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Lg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var _=p.dependencies;if(_!==null){var A=p.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=p;for(var Q=0;Q<a.length;Q++)if(L.context===a[Q]){_.lanes|=l,L=_.alternate,L!==null&&(L.lanes|=l),Vg(_.return,l,i),h||(A=null);break e}_=L.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(n(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Vg(A,l,i),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===i){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function gl(i,a,l,h){i=null;for(var p=a,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var L=p.type;cr(p.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(p===Te.current){if(A=p.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(wu):i=[wu])}p=p.return}i!==null&&Lg(a,i,l,h),a.flags|=262144}function gd(i){for(i=i.firstContext;i!==null;){if(!cr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Qa(i){Ya=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return Cv(Ya,i)}function pd(i,a){return Ya===null&&Qa(i),Cv(i,a)}function Cv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(n(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var HR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},qR=r.unstable_scheduleCallback,$R=r.unstable_NormalPriority,rn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ug(){return{controller:new HR,data:new Map,refCount:0}}function Qc(i){i.refCount--,i.refCount===0&&qR($R,function(){i.controller.abort()})}var Wc=null,zg=0,pl=0,yl=null;function GR(i,a){if(Wc===null){var l=Wc=[];zg=0,pl=Hp(),yl={status:"pending",value:void 0,then:function(h){l.push(h)}}}return zg++,a.then(Nv,Nv),a}function Nv(){if(--zg===0&&Wc!==null){yl!==null&&(yl.status="fulfilled");var i=Wc;Wc=null,pl=0,yl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function KR(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var kv=P.S;P.S=function(i,a){m1=xe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&GR(i,a),kv!==null&&kv(i,a)};var Wa=H(null);function Bg(){var i=Wa.current;return i!==null?i:Nt.pooledCache}function yd(i,a){a===null?ie(Wa,Wa.current):ie(Wa,a.pool)}function Dv(){var i=Bg();return i===null?null:{parent:rn._currentValue,pool:i}}var _l=Error(n(460)),Fg=Error(n(474)),_d=Error(n(542)),vd={then:function(){}};function Ov(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Mv(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Hr,Hr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jv(i),i;default:if(typeof a.status=="string")a.then(Hr,Hr);else{if(i=Nt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jv(i),i}throw Ja=a,_l}}function Xa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ja=l,_l):l}}var Ja=null;function Pv(){if(Ja===null)throw Error(n(459));var i=Ja;return Ja=null,i}function jv(i){if(i===_l||i===_d)throw Error(n(483))}var vl=null,Xc=0;function bd(i){var a=Xc;return Xc+=1,vl===null&&(vl=[]),Mv(vl,i,a)}function Jc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function wd(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Vv(i){function a(ne,X){if(i){var oe=ne.deletions;oe===null?(ne.deletions=[X],ne.flags|=16):oe.push(X)}}function l(ne,X){if(!i)return null;for(;X!==null;)a(ne,X),X=X.sibling;return null}function h(ne){for(var X=new Map;ne!==null;)ne.key!==null?X.set(ne.key,ne):X.set(ne.index,ne),ne=ne.sibling;return X}function p(ne,X){return ne=Qi(ne,X),ne.index=0,ne.sibling=null,ne}function _(ne,X,oe){return ne.index=oe,i?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<X?(ne.flags|=67108866,X):oe):(ne.flags|=67108866,X)):(ne.flags|=1048576,X)}function A(ne){return i&&ne.alternate===null&&(ne.flags|=67108866),ne}function L(ne,X,oe,me){return X===null||X.tag!==6?(X=Ng(oe,ne.mode,me),X.return=ne,X):(X=p(X,oe),X.return=ne,X)}function Q(ne,X,oe,me){var ke=oe.type;return ke===k?fe(ne,X,oe.props.children,me,oe.key):X!==null&&(X.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Xa(ke)===X.type)?(X=p(X,oe.props),Jc(X,oe),X.return=ne,X):(X=fd(oe.type,oe.key,oe.props,null,ne.mode,me),Jc(X,oe),X.return=ne,X)}function le(ne,X,oe,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=kg(oe,ne.mode,me),X.return=ne,X):(X=p(X,oe.children||[]),X.return=ne,X)}function fe(ne,X,oe,me,ke){return X===null||X.tag!==7?(X=Ga(oe,ne.mode,me,ke),X.return=ne,X):(X=p(X,oe),X.return=ne,X)}function ge(ne,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Ng(""+X,ne.mode,oe),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return oe=fd(X.type,X.key,X.props,null,ne.mode,oe),Jc(oe,X),oe.return=ne,oe;case T:return X=kg(X,ne.mode,oe),X.return=ne,X;case x:return X=Xa(X),ge(ne,X,oe)}if(te(X)||j(X))return X=Ga(X,ne.mode,oe,null),X.return=ne,X;if(typeof X.then=="function")return ge(ne,bd(X),oe);if(X.$$typeof===F)return ge(ne,pd(ne,X),oe);wd(ne,X)}return null}function ce(ne,X,oe,me){var ke=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return ke!==null?null:L(ne,X,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===ke?Q(ne,X,oe,me):null;case T:return oe.key===ke?le(ne,X,oe,me):null;case x:return oe=Xa(oe),ce(ne,X,oe,me)}if(te(oe)||j(oe))return ke!==null?null:fe(ne,X,oe,me,null);if(typeof oe.then=="function")return ce(ne,X,bd(oe),me);if(oe.$$typeof===F)return ce(ne,X,pd(ne,oe),me);wd(ne,oe)}return null}function he(ne,X,oe,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ne=ne.get(oe)||null,L(X,ne,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return ne=ne.get(me.key===null?oe:me.key)||null,Q(X,ne,me,ke);case T:return ne=ne.get(me.key===null?oe:me.key)||null,le(X,ne,me,ke);case x:return me=Xa(me),he(ne,X,oe,me,ke)}if(te(me)||j(me))return ne=ne.get(oe)||null,fe(X,ne,me,ke,null);if(typeof me.then=="function")return he(ne,X,oe,bd(me),ke);if(me.$$typeof===F)return he(ne,X,oe,pd(X,me),ke);wd(X,me)}return null}function Se(ne,X,oe,me){for(var ke=null,ut=null,Re=X,Ge=X=0,Ze=null;Re!==null&&Ge<oe.length;Ge++){Re.index>Ge?(Ze=Re,Re=null):Ze=Re.sibling;var ht=ce(ne,Re,oe[Ge],me);if(ht===null){Re===null&&(Re=Ze);break}i&&Re&&ht.alternate===null&&a(ne,Re),X=_(ht,X,Ge),ut===null?ke=ht:ut.sibling=ht,ut=ht,Re=Ze}if(Ge===oe.length)return l(ne,Re),it&&Wi(ne,Ge),ke;if(Re===null){for(;Ge<oe.length;Ge++)Re=ge(ne,oe[Ge],me),Re!==null&&(X=_(Re,X,Ge),ut===null?ke=Re:ut.sibling=Re,ut=Re);return it&&Wi(ne,Ge),ke}for(Re=h(Re);Ge<oe.length;Ge++)Ze=he(Re,ne,Ge,oe[Ge],me),Ze!==null&&(i&&Ze.alternate!==null&&Re.delete(Ze.key===null?Ge:Ze.key),X=_(Ze,X,Ge),ut===null?ke=Ze:ut.sibling=Ze,ut=Ze);return i&&Re.forEach(function(ra){return a(ne,ra)}),it&&Wi(ne,Ge),ke}function Pe(ne,X,oe,me){if(oe==null)throw Error(n(151));for(var ke=null,ut=null,Re=X,Ge=X=0,Ze=null,ht=oe.next();Re!==null&&!ht.done;Ge++,ht=oe.next()){Re.index>Ge?(Ze=Re,Re=null):Ze=Re.sibling;var ra=ce(ne,Re,ht.value,me);if(ra===null){Re===null&&(Re=Ze);break}i&&Re&&ra.alternate===null&&a(ne,Re),X=_(ra,X,Ge),ut===null?ke=ra:ut.sibling=ra,ut=ra,Re=Ze}if(ht.done)return l(ne,Re),it&&Wi(ne,Ge),ke;if(Re===null){for(;!ht.done;Ge++,ht=oe.next())ht=ge(ne,ht.value,me),ht!==null&&(X=_(ht,X,Ge),ut===null?ke=ht:ut.sibling=ht,ut=ht);return it&&Wi(ne,Ge),ke}for(Re=h(Re);!ht.done;Ge++,ht=oe.next())ht=he(Re,ne,Ge,ht.value,me),ht!==null&&(i&&ht.alternate!==null&&Re.delete(ht.key===null?Ge:ht.key),X=_(ht,X,Ge),ut===null?ke=ht:ut.sibling=ht,ut=ht);return i&&Re.forEach(function(iN){return a(ne,iN)}),it&&Wi(ne,Ge),ke}function Rt(ne,X,oe,me){if(typeof oe=="object"&&oe!==null&&oe.type===k&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var ke=oe.key;X!==null;){if(X.key===ke){if(ke=oe.type,ke===k){if(X.tag===7){l(ne,X.sibling),me=p(X,oe.props.children),me.return=ne,ne=me;break e}}else if(X.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===x&&Xa(ke)===X.type){l(ne,X.sibling),me=p(X,oe.props),Jc(me,oe),me.return=ne,ne=me;break e}l(ne,X);break}else a(ne,X);X=X.sibling}oe.type===k?(me=Ga(oe.props.children,ne.mode,me,oe.key),me.return=ne,ne=me):(me=fd(oe.type,oe.key,oe.props,null,ne.mode,me),Jc(me,oe),me.return=ne,ne=me)}return A(ne);case T:e:{for(ke=oe.key;X!==null;){if(X.key===ke)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){l(ne,X.sibling),me=p(X,oe.children||[]),me.return=ne,ne=me;break e}else{l(ne,X);break}else a(ne,X);X=X.sibling}me=kg(oe,ne.mode,me),me.return=ne,ne=me}return A(ne);case x:return oe=Xa(oe),Rt(ne,X,oe,me)}if(te(oe))return Se(ne,X,oe,me);if(j(oe)){if(ke=j(oe),typeof ke!="function")throw Error(n(150));return oe=ke.call(oe),Pe(ne,X,oe,me)}if(typeof oe.then=="function")return Rt(ne,X,bd(oe),me);if(oe.$$typeof===F)return Rt(ne,X,pd(ne,oe),me);wd(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,X!==null&&X.tag===6?(l(ne,X.sibling),me=p(X,oe),me.return=ne,ne=me):(l(ne,X),me=Ng(oe,ne.mode,me),me.return=ne,ne=me),A(ne)):l(ne,X)}return function(ne,X,oe,me){try{Xc=0;var ke=Rt(ne,X,oe,me);return vl=null,ke}catch(Re){if(Re===_l||Re===_d)throw Re;var ut=ur(29,Re,null,ne.mode);return ut.lanes=me,ut.return=ne,ut}finally{}}}var Za=Vv(!0),Lv=Vv(!1),zs=!1;function Hg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Bs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Fs(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(mt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=dd(i),wv(i,null,l),a}return hd(i,h,a,l),dd(i)}function Zc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}function $g(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?p=_=a:_=_.next=a}else p=_=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Gg=!1;function eu(){if(Gg){var i=yl;if(i!==null)throw i}}function tu(i,a,l,h){Gg=!1;var p=i.updateQueue;zs=!1;var _=p.firstBaseUpdate,A=p.lastBaseUpdate,L=p.shared.pending;if(L!==null){p.shared.pending=null;var Q=L,le=Q.next;Q.next=null,A===null?_=le:A.next=le,A=Q;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,L=fe.lastBaseUpdate,L!==A&&(L===null?fe.firstBaseUpdate=le:L.next=le,fe.lastBaseUpdate=Q))}if(_!==null){var ge=p.baseState;A=0,fe=le=Q=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(Je&ce)===ce:(h&ce)===ce){ce!==0&&ce===pl&&(Gg=!0),fe!==null&&(fe=fe.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Se=i,Pe=L;ce=a;var Rt=l;switch(Pe.tag){case 1:if(Se=Pe.payload,typeof Se=="function"){ge=Se.call(Rt,ge,ce);break e}ge=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Pe.payload,ce=typeof Se=="function"?Se.call(Rt,ge,ce):Se,ce==null)break e;ge=y({},ge,ce);break e;case 2:zs=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=p.callbacks,he===null?p.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},fe===null?(le=fe=he,Q=ge):fe=fe.next=he,A|=ce;if(L=L.next,L===null){if(L=p.shared.pending,L===null)break;he=L,L=he.next,he.next=null,p.lastBaseUpdate=he,p.shared.pending=null}}while(!0);fe===null&&(Q=ge),p.baseState=Q,p.firstBaseUpdate=le,p.lastBaseUpdate=fe,_===null&&(p.shared.lanes=0),Ks|=A,i.lanes=A,i.memoizedState=ge}}function Uv(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function zv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Uv(l[i],a)}var bl=H(null),xd=H(0);function Bv(i,a){i=os,ie(xd,i),ie(bl,a),os=i|a.baseLanes}function Kg(){ie(xd,os),ie(bl,bl.current)}function Yg(){os=xd.current,Y(bl),Y(xd)}var hr=H(null),Or=null;function Hs(i){var a=i.alternate;ie(Qt,Qt.current&1),ie(hr,i),Or===null&&(a===null||bl.current!==null||a.memoizedState!==null)&&(Or=i)}function Qg(i){ie(Qt,Qt.current),ie(hr,i),Or===null&&(Or=i)}function Fv(i){i.tag===22?(ie(Qt,Qt.current),ie(hr,i),Or===null&&(Or=i)):qs()}function qs(){ie(Qt,Qt.current),ie(hr,hr.current)}function dr(i){Y(hr),Or===i&&(Or=null),Y(Qt)}var Qt=H(0);function Ed(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ty(l)||ny(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zi=0,He=null,At=null,sn=null,Td=!1,wl=!1,eo=!1,Sd=0,nu=0,xl=null,YR=0;function Ht(){throw Error(n(321))}function Wg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!cr(i[l],a[l]))return!1;return!0}function Xg(i,a,l,h,p,_){return Zi=_,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?Sb:dp,eo=!1,_=l(h,p),eo=!1,wl&&(_=qv(a,l,h,p)),Hv(i),_}function Hv(i){P.H=su;var a=At!==null&&At.next!==null;if(Zi=0,sn=At=He=null,Td=!1,nu=0,xl=null,a)throw Error(n(300));i===null||an||(i=i.dependencies,i!==null&&gd(i)&&(an=!0))}function qv(i,a,l,h){He=i;var p=0;do{if(wl&&(xl=null),nu=0,wl=!1,25<=p)throw Error(n(301));if(p+=1,sn=At=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=Ab,_=a(l,h)}while(wl);return _}function QR(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?ru(a):a,i=i.useState()[0],(At!==null?At.memoizedState:null)!==i&&(He.flags|=1024),a}function Jg(){var i=Sd!==0;return Sd=0,i}function Zg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function ep(i){if(Td){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Td=!1}Zi=0,sn=At=He=null,wl=!1,nu=Sd=0,xl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?He.memoizedState=sn=i:sn=sn.next=i,sn}function Wt(){if(At===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var a=sn===null?He.memoizedState:sn.next;if(a!==null)sn=a,At=i;else{if(i===null)throw He.alternate===null?Error(n(467)):Error(n(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},sn===null?He.memoizedState=sn=i:sn=sn.next=i}return sn}function Ad(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(i){var a=nu;return nu+=1,xl===null&&(xl=[]),i=Mv(xl,i,a),a=He,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Sb:dp),i}function Id(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ru(i);if(i.$$typeof===F)return An(i)}throw Error(n(438,String(i)))}function tp(i){var a=null,l=He.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ad(),He.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=I;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function Rd(i){var a=Wt();return np(a,At,i)}function np(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,_=h.pending;if(_!==null){if(p!==null){var A=p.next;p.next=_.next,_.next=A}a.baseQueue=p=_,h.pending=null}if(_=i.baseState,p===null)i.memoizedState=_;else{a=p.next;var L=A=null,Q=null,le=a,fe=!1;do{var ge=le.lane&-536870913;if(ge!==le.lane?(Je&ge)===ge:(Zi&ge)===ge){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ge===pl&&(fe=!0);else if((Zi&ce)===ce){le=le.next,ce===pl&&(fe=!0);continue}else ge={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ge,A=_):Q=Q.next=ge,He.lanes|=ce,Ks|=ce;ge=le.action,eo&&l(_,ge),_=le.hasEagerState?le.eagerState:l(_,ge)}else ce={lane:ge,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(L=Q=ce,A=_):Q=Q.next=ce,He.lanes|=ge,Ks|=ge;le=le.next}while(le!==null&&le!==a);if(Q===null?A=_:Q.next=L,!cr(_,i.memoizedState)&&(an=!0,fe&&(l=yl,l!==null)))throw l;i.memoizedState=_,i.baseState=A,i.baseQueue=Q,h.lastRenderedState=_}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function rp(i){var a=Wt(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,_=a.memoizedState;if(p!==null){l.pending=null;var A=p=p.next;do _=i(_,A.action),A=A.next;while(A!==p);cr(_,a.memoizedState)||(an=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,h]}function $v(i,a,l){var h=He,p=Wt(),_=it;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=a();var A=!cr((At||p).memoizedState,l);if(A&&(p.memoizedState=l,an=!0),p=p.queue,ap(Yv.bind(null,h,p,i),[i]),p.getSnapshot!==a||A||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,El(9,{destroy:void 0},Kv.bind(null,h,p,l,a),null),Nt===null)throw Error(n(349));_||(Zi&127)!==0||Gv(h,a,l)}return l}function Gv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=He.updateQueue,a===null?(a=Ad(),He.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Kv(i,a,l,h){a.value=l,a.getSnapshot=h,Qv(a)&&Wv(i)}function Yv(i,a,l){return l(function(){Qv(a)&&Wv(i)})}function Qv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!cr(i,l)}catch{return!0}}function Wv(i){var a=$a(i,2);a!==null&&nr(a,i,2)}function ip(i){var a=qn();if(typeof i=="function"){var l=i;if(i=l(),eo){Zt(!0);try{l()}finally{Zt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function Xv(i,a,l,h){return i.baseState=l,np(i,At,typeof h=="function"?h:es)}function WR(i,a,l,h,p){if(kd(i))throw Error(n(485));if(i=a.action,i!==null){var _={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};P.T!==null?l(!0):_.isTransition=!1,h(_),l=a.pending,l===null?(_.next=a.pending=_,Jv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function Jv(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var _=P.T,A={};P.T=A;try{var L=l(p,h),Q=P.S;Q!==null&&Q(A,L),Zv(i,a,L)}catch(le){sp(i,a,le)}finally{_!==null&&A.types!==null&&(_.types=A.types),P.T=_}}else try{_=l(p,h),Zv(i,a,_)}catch(le){sp(i,a,le)}}function Zv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){eb(i,a,h)},function(h){return sp(i,a,h)}):eb(i,a,l)}function eb(i,a,l){a.status="fulfilled",a.value=l,tb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Jv(i,l)))}function sp(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,tb(a),a=a.next;while(a!==h)}i.action=null}function tb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function nb(i,a){return a}function rb(i,a){if(it){var l=Nt.formState;if(l!==null){e:{var h=He;if(it){if(Dt){t:{for(var p=Dt,_=Dr;p.nodeType!==8;){if(!_){p=null;break t}if(p=Mr(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Dt=Mr(p.nextSibling),h=p.data==="F!";break e}}Ls(h)}h=!1}h&&(a=l[0])}}return l=qn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nb,lastRenderedState:a},l.queue=h,l=xb.bind(null,He,h),h.dispatch=l,h=ip(!1),_=hp.bind(null,He,!1,h.queue),h=qn(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=WR.bind(null,He,p,_,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function ib(i){var a=Wt();return sb(a,At,i)}function sb(i,a,l){if(a=np(i,a,nb)[0],i=Rd(es)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ru(a)}catch(A){throw A===_l?_d:A}else h=a;a=Wt();var p=a.queue,_=p.dispatch;return l!==a.memoizedState&&(He.flags|=2048,El(9,{destroy:void 0},XR.bind(null,p,l),null)),[h,_,i]}function XR(i,a){i.action=a}function ab(i){var a=Wt(),l=At;if(l!==null)return sb(a,l,i);Wt(),a=a.memoizedState,l=Wt();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function El(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=Ad(),He.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function ob(){return Wt().memoizedState}function Cd(i,a,l,h){var p=qn();He.flags|=i,p.memoizedState=El(1|a,{destroy:void 0},l,h===void 0?null:h)}function Nd(i,a,l,h){var p=Wt();h=h===void 0?null:h;var _=p.memoizedState.inst;At!==null&&h!==null&&Wg(h,At.memoizedState.deps)?p.memoizedState=El(a,_,l,h):(He.flags|=i,p.memoizedState=El(1|a,_,l,h))}function lb(i,a){Cd(8390656,8,i,a)}function ap(i,a){Nd(2048,8,i,a)}function JR(i){He.flags|=4;var a=He.updateQueue;if(a===null)a=Ad(),He.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function cb(i){var a=Wt().memoizedState;return JR({ref:a,nextImpl:i}),function(){if((mt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function ub(i,a){return Nd(4,2,i,a)}function hb(i,a){return Nd(4,4,i,a)}function db(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function fb(i,a,l){l=l!=null?l.concat([i]):null,Nd(4,4,db.bind(null,a,i),l)}function op(){}function mb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Wg(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function gb(i,a){var l=Wt();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Wg(a,h[1]))return h[0];if(h=i(),eo){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h}function lp(i,a,l){return l===void 0||(Zi&1073741824)!==0&&(Je&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=p1(),He.lanes|=i,Ks|=i,l)}function pb(i,a,l,h){return cr(l,a)?l:bl.current!==null?(i=lp(i,l,h),cr(i,a)||(an=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Je&261930)===0?(an=!0,i.memoizedState=l):(i=p1(),He.lanes|=i,Ks|=i,a)}function yb(i,a,l,h,p){var _=D.p;D.p=_!==0&&8>_?_:8;var A=P.T,L={};P.T=L,hp(i,!1,a,l);try{var Q=p(),le=P.S;if(le!==null&&le(L,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var fe=KR(Q,h);iu(i,a,fe,gr(i))}else iu(i,a,h,gr(i))}catch(ge){iu(i,a,{then:function(){},status:"rejected",reason:ge},gr())}finally{D.p=_,A!==null&&L.types!==null&&(A.types=L.types),P.T=A}}function ZR(){}function cp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=_b(i).queue;yb(i,p,a,Z,l===null?ZR:function(){return vb(i),l(h)})}function _b(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:Z},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function vb(i){var a=_b(i);a.next===null&&(a=i.alternate.memoizedState),iu(i,a.next.queue,{},gr())}function up(){return An(wu)}function bb(){return Wt().memoizedState}function wb(){return Wt().memoizedState}function eC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=gr();i=Bs(l);var h=Fs(a,i,l);h!==null&&(nr(h,a,l),Zc(h,a,l)),a={cache:Ug()},i.payload=a;return}a=a.return}}function tC(i,a,l){var h=gr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},kd(i)?Eb(a,l):(l=Rg(i,a,l,h),l!==null&&(nr(l,i,h),Tb(l,a,h)))}function xb(i,a,l){var h=gr();iu(i,a,l,h)}function iu(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(kd(i))Eb(a,p);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var A=a.lastRenderedState,L=_(A,l);if(p.hasEagerState=!0,p.eagerState=L,cr(L,A))return hd(i,a,p,0),Nt===null&&ud(),!1}catch{}finally{}if(l=Rg(i,a,p,h),l!==null)return nr(l,i,h),Tb(l,a,h),!0}return!1}function hp(i,a,l,h){if(h={lane:2,revertLane:Hp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},kd(i)){if(a)throw Error(n(479))}else a=Rg(i,l,h,2),a!==null&&nr(a,i,2)}function kd(i){var a=i.alternate;return i===He||a!==null&&a===He}function Eb(i,a){wl=Td=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Tb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Ac(i,l)}}var su={readContext:An,use:Id,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};su.useEffectEvent=Ht;var Sb={readContext:An,use:Id,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:lb,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Cd(4194308,4,db.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Cd(4194308,4,i,a)},useInsertionEffect:function(i,a){Cd(4,2,i,a)},useMemo:function(i,a){var l=qn();a=a===void 0?null:a;var h=i();if(eo){Zt(!0);try{i()}finally{Zt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=qn();if(l!==void 0){var p=l(a);if(eo){Zt(!0);try{l(a)}finally{Zt(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=tC.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=ip(i);var a=i.queue,l=xb.bind(null,He,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:op,useDeferredValue:function(i,a){var l=qn();return lp(l,i,a)},useTransition:function(){var i=ip(!1);return i=yb.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=He,p=qn();if(it){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Nt===null)throw Error(n(349));(Je&127)!==0||Gv(h,a,l)}p.memoizedState=l;var _={value:l,getSnapshot:a};return p.queue=_,lb(Yv.bind(null,h,_,i),[i]),h.flags|=2048,El(9,{destroy:void 0},Kv.bind(null,h,_,l,a),null),l},useId:function(){var i=qn(),a=Nt.identifierPrefix;if(it){var l=xi,h=wi;l=(h&~(1<<32-kt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Sd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=YR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:up,useFormState:rb,useActionState:rb,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=hp.bind(null,He,!0,l),l.dispatch=a,[i,a]},useMemoCache:tp,useCacheRefresh:function(){return qn().memoizedState=eC.bind(null,He)},useEffectEvent:function(i){var a=qn(),l={impl:i};return a.memoizedState=l,function(){if((mt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},dp={readContext:An,use:Id,useCallback:mb,useContext:An,useEffect:ap,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:Rd,useRef:ob,useState:function(){return Rd(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Wt();return pb(l,At.memoizedState,i,a)},useTransition:function(){var i=Rd(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:up,useFormState:ib,useActionState:ib,useOptimistic:function(i,a){var l=Wt();return Xv(l,At,i,a)},useMemoCache:tp,useCacheRefresh:wb};dp.useEffectEvent=cb;var Ab={readContext:An,use:Id,useCallback:mb,useContext:An,useEffect:ap,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:hb,useMemo:gb,useReducer:rp,useRef:ob,useState:function(){return rp(es)},useDebugValue:op,useDeferredValue:function(i,a){var l=Wt();return At===null?lp(l,i,a):pb(l,At.memoizedState,i,a)},useTransition:function(){var i=rp(es)[0],a=Wt().memoizedState;return[typeof i=="boolean"?i:ru(i),a]},useSyncExternalStore:$v,useId:bb,useHostTransitionStatus:up,useFormState:ab,useActionState:ab,useOptimistic:function(i,a){var l=Wt();return At!==null?Xv(l,At,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:tp,useCacheRefresh:wb};Ab.useEffectEvent=cb;function fp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var mp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Bs(h);p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(nr(a,i,h),Zc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=gr(),p=Bs(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=Fs(i,p,h),a!==null&&(nr(a,i,h),Zc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=gr(),h=Bs(l);h.tag=2,a!=null&&(h.callback=a),a=Fs(i,h,l),a!==null&&(nr(a,i,l),Zc(a,i,l))}};function Ib(i,a,l,h,p,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,_,A):a.prototype&&a.prototype.isPureReactComponent?!$c(l,h)||!$c(p,_):!0}function Rb(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&mp.enqueueReplaceState(a,a.state,null)}function to(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function Cb(i){cd(i)}function Nb(i){console.error(i)}function kb(i){cd(i)}function Dd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function Db(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gp(i,a,l){return l=Bs(l),l.tag=3,l.payload={element:null},l.callback=function(){Dd(i,a)},l}function Ob(i){return i=Bs(i),i.tag=3,i}function Mb(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=h.value;i.payload=function(){return p(_)},i.callback=function(){Db(a,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Db(a,l,h),typeof p!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function nC(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&gl(a,l,p,!0),l=hr.current,l!==null){switch(l.tag){case 31:case 13:return Or===null?qd():l.alternate===null&&qt===0&&(qt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===vd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),zp(i,h,p)),!1;case 22:return l.flags|=65536,h===vd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),zp(i,h,p)),!1}throw Error(n(435,l.tag))}return zp(i,h,p),qd(),!1}if(it)return a=hr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Mg&&(i=Error(n(422),{cause:h}),Yc(Cr(i,l)))):(h!==Mg&&(a=Error(n(423),{cause:h}),Yc(Cr(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=Cr(h,l),p=gp(i.stateNode,h,p),$g(i,p),qt!==4&&(qt=2)),!1;var _=Error(n(520),{cause:h});if(_=Cr(_,l),fu===null?fu=[_]:fu.push(_),qt!==4&&(qt=2),a===null)return!0;h=Cr(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=gp(l.stateNode,h,i),$g(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Ob(p),Mb(p,i,l,h),$g(l,p),!1}l=l.return}while(l!==null);return!1}var pp=Error(n(461)),an=!1;function In(i,a,l,h){a.child=i===null?Lv(a,null,l,h):Za(a,i.child,l,h)}function Pb(i,a,l,h,p){l=l.render;var _=a.ref;if("ref"in h){var A={};for(var L in h)L!=="ref"&&(A[L]=h[L])}else A=h;return Qa(a),h=Xg(i,a,l,A,_,p),L=Jg(),i!==null&&!an?(Zg(i,a,p),ts(i,a,p)):(it&&L&&Dg(a),a.flags|=1,In(i,a,h,p),a.child)}function jb(i,a,l,h,p){if(i===null){var _=l.type;return typeof _=="function"&&!Cg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Vb(i,a,_,h,p)):(i=fd(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!Tp(i,p)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:$c,l(A,h)&&i.ref===a.ref)return ts(i,a,p)}return a.flags|=1,i=Qi(_,h),i.ref=a.ref,i.return=a,a.child=i}function Vb(i,a,l,h,p){if(i!==null){var _=i.memoizedProps;if($c(_,h)&&i.ref===a.ref)if(an=!1,a.pendingProps=h=_,Tp(i,p))(i.flags&131072)!==0&&(an=!0);else return a.lanes=i.lanes,ts(i,a,p)}return yp(i,a,l,h,p)}function Lb(i,a,l,h){var p=h.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~_}else h=0,a.child=null;return Ub(i,a,_,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&yd(a,_!==null?_.cachePool:null),_!==null?Bv(a,_):Kg(),Fv(a);else return h=a.lanes=536870912,Ub(i,a,_!==null?_.baseLanes|l:l,l,h)}else _!==null?(yd(a,_.cachePool),Bv(a,_),qs(),a.memoizedState=null):(i!==null&&yd(a,null),Kg(),qs());return In(i,a,p,l),a.child}function au(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ub(i,a,l,h,p){var _=Bg();return _=_===null?null:{parent:rn._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&yd(a,null),Kg(),Fv(a),i!==null&&gl(i,a,h,!0),a.childLanes=p,null}function Od(i,a){return a=Pd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function zb(i,a,l){return Za(a,i.child,null,l),i=Od(a,a.pendingProps),i.flags|=2,dr(a),a.memoizedState=null,i}function rC(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(it){if(h.mode==="hidden")return i=Od(a,h),a.lanes=536870912,au(null,i);if(Qg(a),(i=Dt)?(i=J1(i,Dr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:js!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Ls(a);return a.lanes=536870912,null}return Od(a,h)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(Qg(a),p)if(a.flags&256)a.flags&=-257,a=zb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(an||gl(i,a,l,!1),p=(l&i.childLanes)!==0,an||p){if(h=Nt,h!==null&&(A=Ic(h,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,$a(i,A),nr(h,i,A),pp;qd(),a=zb(i,a,l)}else i=_.treeContext,Dt=Mr(A.nextSibling),Sn=a,it=!0,Vs=null,Dr=!1,i!==null&&Av(a,i),a=Od(a,h),a.flags|=4096;return a}return i=Qi(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Md(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function yp(i,a,l,h,p){return Qa(a),l=Xg(i,a,l,h,void 0,p),h=Jg(),i!==null&&!an?(Zg(i,a,p),ts(i,a,p)):(it&&h&&Dg(a),a.flags|=1,In(i,a,l,p),a.child)}function Bb(i,a,l,h,p,_){return Qa(a),a.updateQueue=null,l=qv(a,h,l,p),Hv(i),h=Jg(),i!==null&&!an?(Zg(i,a,_),ts(i,a,_)):(it&&h&&Dg(a),a.flags|=1,In(i,a,l,_),a.child)}function Fb(i,a,l,h,p){if(Qa(a),a.stateNode===null){var _=hl,A=l.contextType;typeof A=="object"&&A!==null&&(_=An(A)),_=new l(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=mp,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},Hg(a),A=l.contextType,_.context=typeof A=="object"&&A!==null?An(A):hl,_.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(fp(a,l,A,h),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&mp.enqueueReplaceState(_,_.state,null),tu(a,h,_,p),eu(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){_=a.stateNode;var L=a.memoizedProps,Q=to(l,L);_.props=Q;var le=_.context,fe=l.contextType;A=hl,typeof fe=="object"&&fe!==null&&(A=An(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=a.pendingProps!==L,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==A)&&Rb(a,_,h,A),zs=!1;var ce=a.memoizedState;_.state=ce,tu(a,h,_,p),eu(),le=a.memoizedState,L||ce!==le||zs?(typeof ge=="function"&&(fp(a,l,ge,h),le=a.memoizedState),(Q=zs||Ib(a,l,Q,h,ce,le,A))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=le),_.props=h,_.state=le,_.context=A,h=Q):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,qg(i,a),A=a.memoizedProps,fe=to(l,A),_.props=fe,ge=a.pendingProps,ce=_.context,le=l.contextType,Q=hl,typeof le=="object"&&le!==null&&(Q=An(le)),L=l.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ge||ce!==Q)&&Rb(a,_,h,Q),zs=!1,ce=a.memoizedState,_.state=ce,tu(a,h,_,p),eu();var he=a.memoizedState;A!==ge||ce!==he||zs||i!==null&&i.dependencies!==null&&gd(i.dependencies)?(typeof L=="function"&&(fp(a,l,L,h),he=a.memoizedState),(fe=zs||Ib(a,l,fe,h,ce,he,Q)||i!==null&&i.dependencies!==null&&gd(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,he,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,he,Q)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=he),_.props=h,_.state=he,_.context=Q,h=fe):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),h=!1)}return _=h,Md(i,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&h?(a.child=Za(a,i.child,null,p),a.child=Za(a,null,l,p)):In(i,a,l,p),a.memoizedState=_.state,i=a.child):i=ts(i,a,p),i}function Hb(i,a,l,h){return Ka(),a.flags|=256,In(i,a,l,h),a.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(i){return{baseLanes:i,cachePool:Dv()}}function bp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=mr),i}function qb(i,a,l){var h=a.pendingProps,p=!1,_=(a.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Qt.current&2)!==0),A&&(p=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,i===null){if(it){if(p?Hs(a):qs(),(i=Dt)?(i=J1(i,Dr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:js!==null?{id:wi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=Ev(i),l.return=a,a.child=l,Sn=a,Dt=null)):i=null,i===null)throw Ls(a);return ny(i)?a.lanes=32:a.lanes=536870912,null}var L=h.children;return h=h.fallback,p?(qs(),p=a.mode,L=Pd({mode:"hidden",children:L},p),h=Ga(h,p,l,null),L.return=a,h.return=a,L.sibling=h,a.child=L,h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,au(null,h)):(Hs(a),wp(a,L))}var Q=i.memoizedState;if(Q!==null&&(L=Q.dehydrated,L!==null)){if(_)a.flags&256?(Hs(a),a.flags&=-257,a=xp(i,a,l)):a.memoizedState!==null?(qs(),a.child=i.child,a.flags|=128,a=null):(qs(),L=h.fallback,p=a.mode,h=Pd({mode:"visible",children:h.children},p),L=Ga(L,p,l,null),L.flags|=2,h.return=a,L.return=a,h.sibling=L,a.child=h,Za(a,i.child,null,l),h=a.child,h.memoizedState=vp(l),h.childLanes=bp(i,A,l),a.memoizedState=_p,a=au(null,h));else if(Hs(a),ny(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,h=Error(n(419)),h.stack="",h.digest=A,Yc({value:h,source:null,stack:null}),a=xp(i,a,l)}else if(an||gl(i,a,l,!1),A=(l&i.childLanes)!==0,an||A){if(A=Nt,A!==null&&(h=Ic(A,l),h!==0&&h!==Q.retryLane))throw Q.retryLane=h,$a(i,h),nr(A,i,h),pp;ty(L)||qd(),a=xp(i,a,l)}else ty(L)?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Dt=Mr(L.nextSibling),Sn=a,it=!0,Vs=null,Dr=!1,i!==null&&Av(a,i),a=wp(a,h.children),a.flags|=4096);return a}return p?(qs(),L=h.fallback,p=a.mode,Q=i.child,le=Q.sibling,h=Qi(Q,{mode:"hidden",children:h.children}),h.subtreeFlags=Q.subtreeFlags&65011712,le!==null?L=Qi(le,L):(L=Ga(L,p,l,null),L.flags|=2),L.return=a,h.return=a,h.sibling=L,a.child=h,au(null,h),h=a.child,L=i.child.memoizedState,L===null?L=vp(l):(p=L.cachePool,p!==null?(Q=rn._currentValue,p=p.parent!==Q?{parent:Q,pool:Q}:p):p=Dv(),L={baseLanes:L.baseLanes|l,cachePool:p}),h.memoizedState=L,h.childLanes=bp(i,A,l),a.memoizedState=_p,au(i.child,h)):(Hs(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(A=a.deletions,A===null?(a.deletions=[i],a.flags|=16):A.push(i)),a.child=l,a.memoizedState=null,l)}function wp(i,a){return a=Pd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Pd(i,a){return i=ur(22,i,null,a),i.lanes=0,i}function xp(i,a,l){return Za(a,i.child,null,l),i=wp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function $b(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Vg(i.return,a,l)}function Ep(i,a,l,h,p,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:_}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=p,A.treeForkCount=_)}function Gb(i,a,l){var h=a.pendingProps,p=h.revealOrder,_=h.tail;h=h.children;var A=Qt.current,L=(A&2)!==0;if(L?(A=A&1|2,a.flags|=128):A&=1,ie(Qt,A),In(i,a,h,l),h=it?Kc:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$b(i,l,a);else if(i.tag===19)$b(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&Ed(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Ep(a,!1,p,l,_,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Ed(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Ep(a,!0,l,null,_,h);break;case"together":Ep(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ks|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(gl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Tp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&gd(i)))}function iC(i,a,l){switch(a.tag){case 3:Ne(a,a.stateNode.containerInfo),Us(a,rn,i.memoizedState.cache),Ka();break;case 27:case 5:qe(a);break;case 4:Ne(a,a.stateNode.containerInfo);break;case 10:Us(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Qg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Hs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?qb(i,a,l):(Hs(a),i=ts(i,a,l),i!==null?i.sibling:null);Hs(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(gl(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return Gb(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(Qt,Qt.current),h)break;return null;case 22:return a.lanes=0,Lb(i,a,l,a.pendingProps);case 24:Us(a,rn,i.memoizedState.cache)}return ts(i,a,l)}function Kb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)an=!0;else{if(!Tp(i,l)&&(a.flags&128)===0)return an=!1,iC(i,a,l);an=(i.flags&131072)!==0}else an=!1,it&&(a.flags&1048576)!==0&&Sv(a,Kc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Xa(a.elementType),a.type=i,typeof i=="function")Cg(i)?(h=to(i,h),a.tag=1,a=Fb(null,a,i,h,l)):(a.tag=0,a=yp(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===q){a.tag=11,a=Pb(null,a,i,h,l);break e}else if(p===M){a.tag=14,a=jb(null,a,i,h,l);break e}}throw a=G(i)||i,Error(n(306,a,""))}}return a;case 0:return yp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=to(h,a.pendingProps),Fb(i,a,h,p,l);case 3:e:{if(Ne(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var _=a.memoizedState;p=_.element,qg(i,a),tu(a,h,null,l);var A=a.memoizedState;if(h=A.cache,Us(a,rn,h),h!==_.cache&&Lg(a,[rn],l,!0),eu(),h=A.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Hb(i,a,h,l);break e}else if(h!==p){p=Cr(Error(n(424)),a),Yc(p),a=Hb(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Dt=Mr(i.firstChild),Sn=a,it=!0,Vs=null,Dr=!0,l=Lv(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ka(),h===p){a=ts(i,a,l);break e}In(i,a,h,l)}a=a.child}return a;case 26:return Md(i,a),i===null?(l=iw(a.type,null,a.pendingProps,null))?a.memoizedState=l:it||(l=a.type,i=a.pendingProps,h=Xd(ye.current).createElement(l),h[en]=a,h[yn]=i,Rn(h,l,i),tn(h),a.stateNode=h):a.memoizedState=iw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return qe(a),i===null&&it&&(h=a.stateNode=tw(a.type,a.pendingProps,ye.current),Sn=a,Dr=!0,p=Dt,Js(a.type)?(ry=p,Dt=Mr(h.firstChild)):Dt=p),In(i,a,a.pendingProps.children,l),Md(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&it&&((p=h=Dt)&&(h=MC(h,a.type,a.pendingProps,Dr),h!==null?(a.stateNode=h,Sn=a,Dt=Mr(h.firstChild),Dr=!1,p=!0):p=!1),p||Ls(a)),qe(a),p=a.type,_=a.pendingProps,A=i!==null?i.memoizedProps:null,h=_.children,Jp(p,_)?h=null:A!==null&&Jp(p,A)&&(a.flags|=32),a.memoizedState!==null&&(p=Xg(i,a,QR,null,null,l),wu._currentValue=p),Md(i,a),In(i,a,h,l),a.child;case 6:return i===null&&it&&((i=l=Dt)&&(l=PC(l,a.pendingProps,Dr),l!==null?(a.stateNode=l,Sn=a,Dt=null,i=!0):i=!1),i||Ls(a)),null;case 13:return qb(i,a,l);case 4:return Ne(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Za(a,null,h,l):In(i,a,h,l),a.child;case 11:return Pb(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Us(a,a.type,h.value),In(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Qa(a),p=An(p),h=h(p),a.flags|=1,In(i,a,h,l),a.child;case 14:return jb(i,a,a.type,a.pendingProps,l);case 15:return Vb(i,a,a.type,a.pendingProps,l);case 19:return Gb(i,a,l);case 31:return rC(i,a,l);case 22:return Lb(i,a,l,a.pendingProps);case 24:return Qa(a),h=An(rn),i===null?(p=Bg(),p===null&&(p=Nt,_=Ug(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),a.memoizedState={parent:h,cache:p},Hg(a),Us(a,rn,p)):((i.lanes&l)!==0&&(qg(i,a),tu(a,null,null,l),eu()),p=i.memoizedState,_=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Us(a,rn,h)):(h=_.cache,Us(a,rn,h),h!==p.cache&&Lg(a,[rn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ns(i){i.flags|=4}function Sp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(b1())i.flags|=8192;else throw Ja=vd,Fg}else i.flags&=-16777217}function Yb(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!cw(a))if(b1())i.flags|=8192;else throw Ja=vd,Fg}function jd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Er():536870912,i.lanes|=a,Il|=a)}function ou(i,a){if(!it)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function sC(i,a,l){var h=a.pendingProps;switch(Og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Ot(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(rn),Ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(ml(a)?ns(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Pg())),Ot(a),null;case 26:var p=a.type,_=a.memoizedState;return i===null?(ns(a),_!==null?(Ot(a),Yb(a,_)):(Ot(a),Sp(a,p,null,h,l))):_?_!==i.memoizedState?(ns(a),Ot(a),Yb(a,_)):(Ot(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&ns(a),Ot(a),Sp(a,p,i,h,l)),null;case 27:if(Qe(a),l=ye.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}i=J.current,ml(a)?Iv(a):(i=tw(p,h,l),a.stateNode=i,ns(a))}return Ot(a),null;case 5:if(Qe(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Ot(a),null}if(_=J.current,ml(a))Iv(a);else{var A=Xd(ye.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?A.createElement(p,{is:h.is}):A.createElement(p)}}_[en]=a,_[yn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=_;e:switch(Rn(_,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ns(a)}}return Ot(a),Sp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ns(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=ye.current,ml(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[en]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||q1(i.nodeValue,l)),i||Ls(a,!0)}else i=Xd(i).createTextNode(h),i[en]=a,a.stateNode=i}return Ot(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=ml(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[en]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),i=!1}else l=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(dr(a),a):(dr(a),null);if((a.flags&128)!==0)throw Error(n(558))}return Ot(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ml(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[en]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),p=!1}else p=Pg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(dr(a),a):(dr(a),null)}return dr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),jd(a,a.updateQueue),Ot(a),null);case 4:return Ie(),i===null&&Kp(a.stateNode.containerInfo),Ot(a),null;case 10:return Ji(a.type),Ot(a),null;case 19:if(Y(Qt),h=a.memoizedState,h===null)return Ot(a),null;if(p=(a.flags&128)!==0,_=h.rendering,_===null)if(p)ou(h,!1);else{if(qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=Ed(i),_!==null){for(a.flags|=128,ou(h,!1),i=_.updateQueue,a.updateQueue=i,jd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)xv(l,i),l=l.sibling;return ie(Qt,Qt.current&1|2),it&&Wi(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&xe()>Bd&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304)}else{if(!p)if(i=Ed(_),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,jd(a,i),ou(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!it)return Ot(a),null}else 2*xe()-h.renderingStartTime>Bd&&l!==536870912&&(a.flags|=128,p=!0,ou(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(i=h.last,i!==null?i.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=xe(),i.sibling=null,l=Qt.current,ie(Qt,p?l&1|2:l&1),it&&Wi(a,h.treeForkCount),i):(Ot(a),null);case 22:case 23:return dr(a),Yg(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),l=a.updateQueue,l!==null&&jd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Y(Wa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(rn),Ot(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function aC(i,a){switch(Og(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ji(rn),Ie(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Qe(a),null;case 31:if(a.memoizedState!==null){if(dr(a),a.alternate===null)throw Error(n(340));Ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(dr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Y(Qt),null;case 4:return Ie(),null;case 10:return Ji(a.type),null;case 22:case 23:return dr(a),Yg(),i!==null&&Y(Wa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ji(rn),null;case 25:return null;default:return null}}function Qb(i,a){switch(Og(a),a.tag){case 3:Ji(rn),Ie();break;case 26:case 27:case 5:Qe(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&dr(a);break;case 13:dr(a);break;case 19:Y(Qt);break;case 10:Ji(a.type);break;case 22:case 23:dr(a),Yg(),i!==null&&Y(Wa);break;case 24:Ji(rn)}}function lu(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var _=l.create,A=l.inst;h=_(),A.destroy=h}l=l.next}while(l!==p)}}catch(L){bt(a,a.return,L)}}function $s(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&i)===i){var A=h.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,p=a;var Q=l,le=L;try{le()}catch(fe){bt(p,Q,fe)}}}h=h.next}while(h!==_)}}catch(fe){bt(a,a.return,fe)}}function Wb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{zv(a,l)}catch(h){bt(i,i.return,h)}}}function Xb(i,a,l){l.props=to(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){bt(i,a,h)}}function cu(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){bt(i,a,p)}}function Ei(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){bt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){bt(i,a,p)}else l.current=null}function Jb(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){bt(i,i.return,p)}}function Ap(i,a,l){try{var h=i.stateNode;RC(h,i.type,l,a),h[yn]=a}catch(p){bt(i,i.return,p)}}function Zb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Js(i.type)||i.tag===4}function Ip(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Rp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Hr));else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Rp(i,a,l),i=i.sibling;i!==null;)Rp(i,a,l),i=i.sibling}function Vd(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Js(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Vd(i,a,l),i=i.sibling;i!==null;)Vd(i,a,l),i=i.sibling}function e1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Rn(a,h,l),a[en]=i,a[yn]=l}catch(_){bt(i,i.return,_)}}var rs=!1,on=!1,Cp=!1,t1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function oC(i,a){if(i=i.containerInfo,Wp=sf,i=fv(i),xg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,L=-1,Q=-1,le=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||p!==0&&ge.nodeType!==3||(L=A+p),ge!==_||h!==0&&ge.nodeType!==3||(Q=A+h),ge.nodeType===3&&(A+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++le===p&&(L=A),ce===_&&++fe===h&&(Q=A),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=L===-1||Q===-1?null:{start:L,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xp={focusedElem:i,selectionRange:l},sf=!1,vn=a;vn!==null;)if(a=vn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,vn=i;else for(;vn!==null;){switch(a=vn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,p=_.memoizedProps,_=_.memoizedState,h=l.stateNode;try{var Se=to(l.type,p);i=h.getSnapshotBeforeUpdate(Se,_),h.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){bt(l,l.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ey(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ey(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,vn=i;break}vn=a.return}}function n1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:ss(i,l),h&4&&lu(5,l);break;case 1:if(ss(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){bt(l,l.return,A)}else{var p=to(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){bt(l,l.return,A)}}h&64&&Wb(l),h&512&&cu(l,l.return);break;case 3:if(ss(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{zv(i,a)}catch(A){bt(l,l.return,A)}}break;case 27:a===null&&h&4&&e1(l);case 26:case 5:ss(i,l),a===null&&h&4&&Jb(l),h&512&&cu(l,l.return);break;case 12:ss(i,l);break;case 31:ss(i,l),h&4&&s1(i,l);break;case 13:ss(i,l),h&4&&a1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=pC.bind(null,l),jC(i,l))));break;case 22:if(h=l.memoizedState!==null||rs,!h){a=a!==null&&a.memoizedState!==null||on,p=rs;var _=on;rs=h,(on=a)&&!_?as(i,l,(l.subtreeFlags&8772)!==0):ss(i,l),rs=p,on=_}break;case 30:break;default:ss(i,l)}}function r1(i){var a=i.alternate;a!==null&&(i.alternate=null,r1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Xo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jt=null,Jn=!1;function is(i,a,l){for(l=l.child;l!==null;)i1(i,a,l),l=l.sibling}function i1(i,a,l){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Kt,l)}catch{}switch(l.tag){case 26:on||Ei(l,a),is(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||Ei(l,a);var h=jt,p=Jn;Js(l.type)&&(jt=l.stateNode,Jn=!1),is(i,a,l),_u(l.stateNode),jt=h,Jn=p;break;case 5:on||Ei(l,a);case 6:if(h=jt,p=Jn,jt=null,is(i,a,l),jt=h,Jn=p,jt!==null)if(Jn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(l.stateNode)}catch(_){bt(l,a,_)}else try{jt.removeChild(l.stateNode)}catch(_){bt(l,a,_)}break;case 18:jt!==null&&(Jn?(i=jt,W1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Pl(i)):W1(jt,l.stateNode));break;case 4:h=jt,p=Jn,jt=l.stateNode.containerInfo,Jn=!0,is(i,a,l),jt=h,Jn=p;break;case 0:case 11:case 14:case 15:$s(2,l,a),on||$s(4,l,a),is(i,a,l);break;case 1:on||(Ei(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Xb(l,a,h)),is(i,a,l);break;case 21:is(i,a,l);break;case 22:on=(h=on)||l.memoizedState!==null,is(i,a,l),on=h;break;default:is(i,a,l)}}function s1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pl(i)}catch(l){bt(a,a.return,l)}}}function a1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pl(i)}catch(l){bt(a,a.return,l)}}function lC(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new t1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new t1),a;default:throw Error(n(435,i.tag))}}function Ld(i,a){var l=lC(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=yC.bind(null,i,h);h.then(p,p)}})}function Zn(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],_=i,A=a,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Js(L.type)){jt=L.stateNode,Jn=!1;break e}break;case 5:jt=L.stateNode,Jn=!1;break e;case 3:case 4:jt=L.stateNode.containerInfo,Jn=!0;break e}L=L.return}if(jt===null)throw Error(n(160));i1(_,A,p),jt=null,Jn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)o1(a,i),a=a.sibling}var Qr=null;function o1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),er(i),h&4&&($s(3,i,i.return),lu(3,i),$s(5,i,i.return));break;case 1:Zn(a,i),er(i),h&512&&(on||l===null||Ei(l,l.return)),h&64&&rs&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=Qr;if(Zn(a,i),er(i),h&512&&(on||l===null||Ei(l,l.return)),h&4){var _=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":_=p.getElementsByTagName("title")[0],(!_||_[ci]||_[en]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(h),p.head.insertBefore(_,p.querySelector("head > title"))),Rn(_,h,l),_[en]=i,tn(_),h=_;break e;case"link":var A=ow("link","href",p).get(h+(l.href||""));if(A){for(var L=0;L<A.length;L++)if(_=A[L],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;case"meta":if(A=ow("meta","content",p).get(h+(l.content||""))){for(L=0;L<A.length;L++)if(_=A[L],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(L,1);break t}}_=p.createElement(h),Rn(_,h,l),p.head.appendChild(_);break;default:throw Error(n(468,h))}_[en]=i,tn(_),h=_}i.stateNode=h}else lw(p,i.type,i.stateNode);else i.stateNode=aw(p,h,i.memoizedProps);else _!==h?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,h===null?lw(p,i.type,i.stateNode):aw(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Ap(i,i.memoizedProps,l.memoizedProps)}break;case 27:Zn(a,i),er(i),h&512&&(on||l===null||Ei(l,l.return)),l!==null&&h&4&&Ap(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Zn(a,i),er(i),h&512&&(on||l===null||Ei(l,l.return)),i.flags&32){p=i.stateNode;try{Xn(p,"")}catch(Se){bt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,Ap(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Cp=!0);break;case 6:if(Zn(a,i),er(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Se){bt(i,i.return,Se)}}break;case 3:if(ef=null,p=Qr,Qr=Jd(a.containerInfo),Zn(a,i),Qr=p,er(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Pl(a.containerInfo)}catch(Se){bt(i,i.return,Se)}Cp&&(Cp=!1,l1(i));break;case 4:h=Qr,Qr=Jd(i.stateNode.containerInfo),Zn(a,i),er(i),Qr=h;break;case 12:Zn(a,i),er(i);break;case 31:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ld(i,h)));break;case 13:Zn(a,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zd=xe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ld(i,h)));break;case 22:p=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,le=rs,fe=on;if(rs=le||p,on=fe||Q,Zn(a,i),on=fe,rs=le,er(i),h&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||Q||rs||on||no(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Q=l=a;try{if(_=Q.stateNode,p)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=Q.stateNode;var ge=Q.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Se){bt(Q,Q.return,Se)}}}else if(a.tag===6){if(l===null){Q=a;try{Q.stateNode.nodeValue=p?"":Q.memoizedProps}catch(Se){bt(Q,Q.return,Se)}}}else if(a.tag===18){if(l===null){Q=a;try{var he=Q.stateNode;p?X1(he,!0):X1(Q.stateNode,!1)}catch(Se){bt(Q,Q.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Ld(i,l))));break;case 19:Zn(a,i),er(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ld(i,h)));break;case 30:break;case 21:break;default:Zn(a,i),er(i)}}function er(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Zb(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Ip(i);Vd(i,_,p);break;case 5:var A=l.stateNode;l.flags&32&&(Xn(A,""),l.flags&=-33);var L=Ip(i);Vd(i,L,A);break;case 3:case 4:var Q=l.stateNode.containerInfo,le=Ip(i);Rp(i,le,Q);break;default:throw Error(n(161))}}catch(fe){bt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function l1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;l1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ss(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)n1(i,a.alternate,a),a=a.sibling}function no(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:$s(4,a,a.return),no(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Xb(a,a.return,l),no(a);break;case 27:_u(a.stateNode);case 26:case 5:Ei(a,a.return),no(a);break;case 22:a.memoizedState===null&&no(a);break;case 30:no(a);break;default:no(a)}i=i.sibling}}function as(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,_=a,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(p,_,l),lu(4,_);break;case 1:if(as(p,_,l),h=_,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(le){bt(h,h.return,le)}if(h=_,p=h.updateQueue,p!==null){var L=h.stateNode;try{var Q=p.shared.hiddenCallbacks;if(Q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Q.length;p++)Uv(Q[p],L)}catch(le){bt(h,h.return,le)}}l&&A&64&&Wb(_),cu(_,_.return);break;case 27:e1(_);case 26:case 5:as(p,_,l),l&&h===null&&A&4&&Jb(_),cu(_,_.return);break;case 12:as(p,_,l);break;case 31:as(p,_,l),l&&A&4&&s1(p,_);break;case 13:as(p,_,l),l&&A&4&&a1(p,_);break;case 22:_.memoizedState===null&&as(p,_,l),cu(_,_.return);break;case 30:break;default:as(p,_,l)}a=a.sibling}}function Np(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Qc(l))}function kp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i))}function Wr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)c1(i,a,l,h),a=a.sibling}function c1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(i,a,l,h),p&2048&&lu(9,a);break;case 1:Wr(i,a,l,h);break;case 3:Wr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qc(i)));break;case 12:if(p&2048){Wr(i,a,l,h),i=a.stateNode;try{var _=a.memoizedProps,A=_.id,L=_.onPostCommit;typeof L=="function"&&L(A,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){bt(a,a.return,Q)}}else Wr(i,a,l,h);break;case 31:Wr(i,a,l,h);break;case 13:Wr(i,a,l,h);break;case 23:break;case 22:_=a.stateNode,A=a.alternate,a.memoizedState!==null?_._visibility&2?Wr(i,a,l,h):uu(i,a):_._visibility&2?Wr(i,a,l,h):(_._visibility|=2,Tl(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Np(A,a);break;case 24:Wr(i,a,l,h),p&2048&&kp(a.alternate,a);break;default:Wr(i,a,l,h)}}function Tl(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,A=a,L=l,Q=h,le=A.flags;switch(A.tag){case 0:case 11:case 15:Tl(_,A,L,Q,p),lu(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Tl(_,A,L,Q,p):uu(_,A):(fe._visibility|=2,Tl(_,A,L,Q,p)),p&&le&2048&&Np(A.alternate,A);break;case 24:Tl(_,A,L,Q,p),p&&le&2048&&kp(A.alternate,A);break;default:Tl(_,A,L,Q,p)}a=a.sibling}}function uu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:uu(l,h),p&2048&&Np(h.alternate,h);break;case 24:uu(l,h),p&2048&&kp(h.alternate,h);break;default:uu(l,h)}a=a.sibling}}var hu=8192;function Sl(i,a,l){if(i.subtreeFlags&hu)for(i=i.child;i!==null;)u1(i,a,l),i=i.sibling}function u1(i,a,l){switch(i.tag){case 26:Sl(i,a,l),i.flags&hu&&i.memoizedState!==null&&YC(l,Qr,i.memoizedState,i.memoizedProps);break;case 5:Sl(i,a,l);break;case 3:case 4:var h=Qr;Qr=Jd(i.stateNode.containerInfo),Sl(i,a,l),Qr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=hu,hu=16777216,Sl(i,a,l),hu=h):Sl(i,a,l));break;default:Sl(i,a,l)}}function h1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function du(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)d1(i),i=i.sibling}function d1(i){switch(i.tag){case 0:case 11:case 15:du(i),i.flags&2048&&$s(9,i,i.return);break;case 3:du(i);break;case 12:du(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Ud(i)):du(i);break;default:du(i)}}function Ud(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];vn=h,f1(h,i)}h1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:$s(8,a,a.return),Ud(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Ud(a));break;default:Ud(a)}i=i.sibling}}function f1(i,a){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:$s(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,vn=h;else e:for(l=i;vn!==null;){h=vn;var p=h.sibling,_=h.return;if(r1(h),h===l){vn=null;break e}if(p!==null){p.return=_,vn=p;break e}vn=_}}}var cC={getCacheForType:function(i){var a=An(rn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return An(rn).controller.signal}},uC=typeof WeakMap=="function"?WeakMap:Map,mt=0,Nt=null,We=null,Je=0,vt=0,fr=null,Gs=!1,Al=!1,Dp=!1,os=0,qt=0,Ks=0,ro=0,Op=0,mr=0,Il=0,fu=null,tr=null,Mp=!1,zd=0,m1=0,Bd=1/0,Fd=null,Ys=null,dn=0,Qs=null,Rl=null,ls=0,Pp=0,jp=null,g1=null,mu=0,Vp=null;function gr(){return(mt&2)!==0&&Je!==0?Je&-Je:P.T!==null?Hp():Hh()}function p1(){if(mr===0)if((Je&536870912)===0||it){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),mr=i}else mr=536870912;return i=hr.current,i!==null&&(i.flags|=32),mr}function nr(i,a,l){(i===Nt&&(vt===2||vt===9)||i.cancelPendingCommit!==null)&&(Cl(i,0),Ws(i,Je,mr,!1)),ka(i,l),((mt&2)===0||i!==Nt)&&(i===Nt&&((mt&2)===0&&(ro|=l),qt===4&&Ws(i,Je,mr,!1)),Ti(i))}function y1(i,a,l){if((mt&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||En(i,a),p=h?fC(i,a):Up(i,a,!0),_=h;do{if(p===0){Al&&!h&&Ws(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!hC(l)){p=Up(i,a,!1),_=!1;continue}if(p===2){if(_=a,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var L=i;p=fu;var Q=L.current.memoizedState.isDehydrated;if(Q&&(Cl(L,A).flags|=256),A=Up(L,A,!1),A!==2){if(Dp&&!Q){L.errorRecoveryDisabledLanes|=_,ro|=_,p=4;break e}_=tr,tr=p,_!==null&&(tr===null?tr=_:tr.push.apply(tr,_))}p=A}if(_=!1,p!==2)continue}}if(p===1){Cl(i,0),Ws(i,a,0,!0);break}e:{switch(h=i,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Ws(h,a,mr,!Gs);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=zd+300-xe(),10<p)){if(Ws(h,a,mr,!Gs),xn(h,0,!0)!==0)break e;ls=a,h.timeoutHandle=Y1(_1.bind(null,h,l,tr,Fd,Mp,a,mr,ro,Il,Gs,_,"Throttled",-0,0),p);break e}_1(h,l,tr,Fd,Mp,a,mr,ro,Il,Gs,_,null,-0,0)}}break}while(!0);Ti(i)}function _1(i,a,l,h,p,_,A,L,Q,le,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hr},u1(a,_,ge);var Se=(_&62914560)===_?zd-xe():(_&4194048)===_?m1-xe():0;if(Se=QC(ge,Se),Se!==null){ls=_,i.cancelPendingCommit=Se(A1.bind(null,i,a,_,l,h,p,A,L,Q,fe,ge,null,ce,he)),Ws(i,_,A,!le);return}}A1(i,a,_,l,h,p,A,L,Q)}function hC(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],_=p.getSnapshot;p=p.value;try{if(!cr(_(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ws(i,a,l,h){a&=~Op,a&=~ro,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var _=31-kt(p),A=1<<_;h[_]=-1,p&=~A}l!==0&&Da(i,l,a)}function Hd(){return(mt&6)===0?(gu(0),!1):!0}function Lp(){if(We!==null){if(vt===0)var i=We.return;else i=We,Xi=Ya=null,ep(i),vl=null,Xc=0,i=We;for(;i!==null;)Qb(i.alternate,i),i=i.return;We=null}}function Cl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,kC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ls=0,Lp(),Nt=i,We=l=Qi(i.current,null),Je=a,vt=0,fr=null,Gs=!1,Al=En(i,a),Dp=!1,Il=mr=Op=ro=Ks=qt=0,tr=fu=null,Mp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-kt(h),_=1<<p;a|=i[p],h&=~_}return os=a,ud(),l}function v1(i,a){He=null,P.H=su,a===_l||a===_d?(a=Pv(),vt=3):a===Fg?(a=Pv(),vt=4):vt=a===pp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,fr=a,We===null&&(qt=1,Dd(i,Cr(a,i.current)))}function b1(){var i=hr.current;return i===null?!0:(Je&4194048)===Je?Or===null:(Je&62914560)===Je||(Je&536870912)!==0?i===Or:!1}function w1(){var i=P.H;return P.H=su,i===null?su:i}function x1(){var i=P.A;return P.A=cC,i}function qd(){qt=4,Gs||(Je&4194048)!==Je&&hr.current!==null||(Al=!0),(Ks&134217727)===0&&(ro&134217727)===0||Nt===null||Ws(Nt,Je,mr,!1)}function Up(i,a,l){var h=mt;mt|=2;var p=w1(),_=x1();(Nt!==i||Je!==a)&&(Fd=null,Cl(i,a)),a=!1;var A=qt;e:do try{if(vt!==0&&We!==null){var L=We,Q=fr;switch(vt){case 8:Lp(),A=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(a=!0);var le=vt;if(vt=0,fr=null,Nl(i,L,Q,le),l&&Al){A=0;break e}break;default:le=vt,vt=0,fr=null,Nl(i,L,Q,le)}}dC(),A=qt;break}catch(fe){v1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Ya=null,mt=h,P.H=p,P.A=_,We===null&&(Nt=null,Je=0,ud()),A}function dC(){for(;We!==null;)E1(We)}function fC(i,a){var l=mt;mt|=2;var h=w1(),p=x1();Nt!==i||Je!==a?(Fd=null,Bd=xe()+500,Cl(i,a)):Al=En(i,a);e:do try{if(vt!==0&&We!==null){a=We;var _=fr;t:switch(vt){case 1:vt=0,fr=null,Nl(i,a,_,1);break;case 2:case 9:if(Ov(_)){vt=0,fr=null,T1(a);break}a=function(){vt!==2&&vt!==9||Nt!==i||(vt=7),Ti(i)},_.then(a,a);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Ov(_)?(vt=0,fr=null,T1(a)):(vt=0,fr=null,Nl(i,a,_,7));break;case 5:var A=null;switch(We.tag){case 26:A=We.memoizedState;case 5:case 27:var L=We;if(A?cw(A):L.stateNode.complete){vt=0,fr=null;var Q=L.sibling;if(Q!==null)We=Q;else{var le=L.return;le!==null?(We=le,$d(le)):We=null}break t}}vt=0,fr=null,Nl(i,a,_,5);break;case 6:vt=0,fr=null,Nl(i,a,_,6);break;case 8:Lp(),qt=6;break e;default:throw Error(n(462))}}mC();break}catch(fe){v1(i,fe)}while(!0);return Xi=Ya=null,P.H=h,P.A=p,mt=l,We!==null?0:(Nt=null,Je=0,ud(),qt)}function mC(){for(;We!==null&&!Be();)E1(We)}function E1(i){var a=Kb(i.alternate,i,os);i.memoizedProps=i.pendingProps,a===null?$d(i):We=a}function T1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Bb(l,a,a.pendingProps,a.type,void 0,Je);break;case 11:a=Bb(l,a,a.pendingProps,a.type.render,a.ref,Je);break;case 5:ep(a);default:Qb(l,a),a=We=xv(a,os),a=Kb(l,a,os)}i.memoizedProps=i.pendingProps,a===null?$d(i):We=a}function Nl(i,a,l,h){Xi=Ya=null,ep(a),vl=null,Xc=0;var p=a.return;try{if(nC(i,p,a,l,Je)){qt=1,Dd(i,Cr(l,i.current)),We=null;return}}catch(_){if(p!==null)throw We=p,_;qt=1,Dd(i,Cr(l,i.current)),We=null;return}a.flags&32768?(it||h===1?i=!0:Al||(Je&536870912)!==0?i=!1:(Gs=i=!0,(h===2||h===9||h===3||h===6)&&(h=hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),S1(a,i)):$d(a)}function $d(i){var a=i;do{if((a.flags&32768)!==0){S1(a,Gs);return}i=a.return;var l=sC(a.alternate,a,os);if(l!==null){We=l;return}if(a=a.sibling,a!==null){We=a;return}We=a=i}while(a!==null);qt===0&&(qt=5)}function S1(i,a){do{var l=aC(i.alternate,i);if(l!==null){l.flags&=32767,We=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){We=i;return}We=i=l}while(i!==null);qt=6,We=null}function A1(i,a,l,h,p,_,A,L,Q){i.cancelPendingCommit=null;do Gd();while(dn!==0);if((mt&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(_=a.lanes|a.childLanes,_|=Ig,_g(i,l,_,A,L,Q),i===Nt&&(We=Nt=null,Je=0),Rl=a,Qs=i,ls=l,Pp=_,jp=p,g1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_C(dt,function(){return k1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,p=D.p,D.p=2,A=mt,mt|=4;try{oC(i,a,l)}finally{mt=A,D.p=p,P.T=h}}dn=1,I1(),R1(),C1()}}function I1(){if(dn===1){dn=0;var i=Qs,a=Rl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=mt;mt|=4;try{o1(a,i);var _=Xp,A=fv(i.containerInfo),L=_.focusedElem,Q=_.selectionRange;if(A!==L&&L&&L.ownerDocument&&dv(L.ownerDocument.documentElement,L)){if(Q!==null&&xg(L)){var le=Q.start,fe=Q.end;if(fe===void 0&&(fe=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(fe,L.value.length);else{var ge=L.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Se=L.textContent.length,Pe=Math.min(Q.start,Se),Rt=Q.end===void 0?Pe:Math.min(Q.end,Se);!he.extend&&Pe>Rt&&(A=Rt,Rt=Pe,Pe=A);var ne=hv(L,Pe),X=hv(L,Rt);if(ne&&X&&(he.rangeCount!==1||he.anchorNode!==ne.node||he.anchorOffset!==ne.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var oe=ge.createRange();oe.setStart(ne.node,ne.offset),he.removeAllRanges(),Pe>Rt?(he.addRange(oe),he.extend(X.node,X.offset)):(oe.setEnd(X.node,X.offset),he.addRange(oe))}}}}for(ge=[],he=L;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ge.length;L++){var me=ge[L];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}sf=!!Wp,Xp=Wp=null}finally{mt=p,D.p=h,P.T=l}}i.current=a,dn=2}}function R1(){if(dn===2){dn=0;var i=Qs,a=Rl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var h=D.p;D.p=2;var p=mt;mt|=4;try{n1(i,a.alternate,a)}finally{mt=p,D.p=h,P.T=l}}dn=3}}function C1(){if(dn===4||dn===3){dn=0,Me();var i=Qs,a=Rl,l=ls,h=g1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,Rl=Qs=null,N1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Ys=null),$i(l),a=a.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Kt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=P.T,p=D.p,D.p=2,P.T=null;try{for(var _=i.onRecoverableError,A=0;A<h.length;A++){var L=h[A];_(L.value,{componentStack:L.stack})}}finally{P.T=a,D.p=p}}(ls&3)!==0&&Gd(),Ti(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===Vp?mu++:(mu=0,Vp=i):mu=0,gu(0)}}function N1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Qc(a)))}function Gd(){return I1(),R1(),C1(),k1()}function k1(){if(dn!==5)return!1;var i=Qs,a=Pp;Pp=0;var l=$i(ls),h=P.T,p=D.p;try{D.p=32>l?32:l,P.T=null,l=jp,jp=null;var _=Qs,A=ls;if(dn=0,Rl=Qs=null,ls=0,(mt&6)!==0)throw Error(n(331));var L=mt;if(mt|=4,d1(_.current),c1(_,_.current,A,l),mt=L,gu(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Kt,_)}catch{}return!0}finally{D.p=p,P.T=h,N1(i,a)}}function D1(i,a,l){a=Cr(l,a),a=gp(i.stateNode,a,2),i=Fs(i,a,2),i!==null&&(ka(i,2),Ti(i))}function bt(i,a,l){if(i.tag===3)D1(i,i,l);else for(;a!==null;){if(a.tag===3){D1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ys===null||!Ys.has(h))){i=Cr(l,i),l=Ob(2),h=Fs(a,l,2),h!==null&&(Mb(l,h,a,i),ka(h,2),Ti(h));break}}a=a.return}}function zp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new uC;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Dp=!0,p.add(l),i=gC.bind(null,i,a,l),a.then(i,i))}function gC(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Nt===i&&(Je&l)===l&&(qt===4||qt===3&&(Je&62914560)===Je&&300>xe()-zd?(mt&2)===0&&Cl(i,0):Op|=l,Il===Je&&(Il=0)),Ti(i)}function O1(i,a){a===0&&(a=Er()),i=$a(i,a),i!==null&&(ka(i,a),Ti(i))}function pC(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),O1(i,l)}function yC(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),O1(i,l)}function _C(i,a){return pe(i,a)}var Kd=null,kl=null,Bp=!1,Yd=!1,Fp=!1,Xs=0;function Ti(i){i!==kl&&i.next===null&&(kl===null?Kd=kl=i:kl=kl.next=i),Yd=!0,Bp||(Bp=!0,bC())}function gu(i,a){if(!Fp&&Yd){Fp=!0;do for(var l=!1,h=Kd;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var _=0;else{var A=h.suspendedLanes,L=h.pingedLanes;_=(1<<31-kt(42|i)+1)-1,_&=p&~(A&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,V1(h,_))}else _=Je,_=xn(h,h===Nt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||En(h,_)||(l=!0,V1(h,_));h=h.next}while(l);Fp=!1}}function vC(){M1()}function M1(){Yd=Bp=!1;var i=0;Xs!==0&&NC()&&(i=Xs);for(var a=xe(),l=null,h=Kd;h!==null;){var p=h.next,_=P1(h,a);_===0?(h.next=null,l===null?Kd=p:l.next=p,p===null&&(kl=l)):(l=h,(i!==0||(_&3)!==0)&&(Yd=!0)),h=p}dn!==0&&dn!==5||gu(i),Xs!==0&&(Xs=0)}function P1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-kt(_),L=1<<A,Q=p[A];Q===-1?((L&l)===0||(L&h)!==0)&&(p[A]=Qo(L,a)):Q<=a&&(i.expiredLanes|=L),_&=~L}if(a=Nt,l=Je,l=xn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(vt===2||vt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||En(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&Ee(h),$i(l)){case 2:case 8:l=Bn;break;case 32:l=dt;break;case 268435456:l=Ft;break;default:l=dt}return h=j1.bind(null,i),l=pe(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&Ee(h),i.callbackPriority=2,i.callbackNode=null,2}function j1(i,a){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Gd()&&i.callbackNode!==l)return null;var h=Je;return h=xn(i,i===Nt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(y1(i,h,a),P1(i,xe()),i.callbackNode!=null&&i.callbackNode===l?j1.bind(null,i):null)}function V1(i,a){if(Gd())return null;y1(i,a,!0)}function bC(){DC(function(){(mt&6)!==0?pe(pt,vC):M1()})}function Hp(){if(Xs===0){var i=pl;i===0&&(i=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Xs=i}return Xs}function L1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tl(""+i)}function U1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function wC(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var _=L1((p[yn]||null).action),A=h.submitter;A&&(a=(a=A[yn]||null)?L1(a.formAction):A.getAttribute("formAction"),a!==null&&(_=a,A=null));var L=new yi("action","action",null,h,p);i.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Xs!==0){var Q=A?U1(p,A):new FormData(p);cp(l,{pending:!0,data:Q,method:p.method,action:_},null,Q)}}else typeof _=="function"&&(L.preventDefault(),Q=A?U1(p,A):new FormData(p),cp(l,{pending:!0,data:Q,method:p.method,action:_},_,Q))},currentTarget:p}]})}}for(var qp=0;qp<Ag.length;qp++){var $p=Ag[qp],xC=$p.toLowerCase(),EC=$p[0].toUpperCase()+$p.slice(1);Yr(xC,"on"+EC)}Yr(pv,"onAnimationEnd"),Yr(yv,"onAnimationIteration"),Yr(_v,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(UR,"onTransitionRun"),Yr(zR,"onTransitionStart"),Yr(BR,"onTransitionCancel"),Yr(vv,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function z1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var A=h.length-1;0<=A;A--){var L=h[A],Q=L.instance,le=L.currentTarget;if(L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){cd(fe)}p.currentTarget=null,_=Q}else for(A=0;A<h.length;A++){if(L=h[A],Q=L.instance,le=L.currentTarget,L=L.listener,Q!==_&&p.isPropagationStopped())break e;_=L,p.currentTarget=le;try{_(p)}catch(fe){cd(fe)}p.currentTarget=null,_=Q}}}}function Xe(i,a){var l=a[Wo];l===void 0&&(l=a[Wo]=new Set);var h=i+"__bubble";l.has(h)||(B1(a,i,2,!1),l.add(h))}function Gp(i,a,l){var h=0;a&&(h|=4),B1(l,i,h,a)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function Kp(i){if(!i[Qd]){i[Qd]=!0,Rc.forEach(function(l){l!=="selectionchange"&&(TC.has(l)||Gp(l,!1,i),Gp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Qd]||(a[Qd]=!0,Gp("selectionchange",!1,a))}}function B1(i,a,l,h){switch(pw(a)){case 2:var p=JC;break;case 8:p=ZC;break;default:p=ly}l=p.bind(null,a,l,i),p=void 0,!Va||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function Yp(i,a,l,h,p){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var L=h.stateNode.containerInfo;if(L===p)break;if(A===4)for(A=h.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;L!==null;){if(A=ui(L),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){h=_=A;continue e}L=L.parentNode}}h=h.return}Ds(function(){var le=_,fe=Sr(l),ge=[];e:{var ce=bv.get(i);if(ce!==void 0){var he=yi,Se=i;switch(i){case"keypress":if(Ua(l)===0)break e;case"keydown":case"keyup":he=ad;break;case"focusin":Se="focus",he=Ba;break;case"focusout":Se="blur",he=Ba;break;case"beforeblur":case"afterblur":he=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=E;break;case pv:case yv:case _v:he=Zh;break;case vv:he=U;break;case"scroll":case"scrollend":he=zc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Yi;break;case"toggle":case"beforetoggle":he=Fe}var Pe=(a&4)!==0,Rt=!Pe&&(i==="scroll"||i==="scrollend"),ne=Pe?ce!==null?ce+"Capture":null:ce;Pe=[];for(var X=le,oe;X!==null;){var me=X;if(oe=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||oe===null||ne===null||(me=qr(X,ne),me!=null&&Pe.push(yu(X,me,oe))),Rt)break;X=X.return}0<Pe.length&&(ce=new he(ce,Se,null,l,fe),ge.push({event:ce,listeners:Pe}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Vc&&(Se=l.relatedTarget||l.fromElement)&&(ui(Se)||Se[li]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Se=l.relatedTarget||l.toElement,he=le,Se=Se?ui(Se):null,Se!==null&&(Rt=o(Se),Pe=Se.tag,Se!==Rt||Pe!==5&&Pe!==27&&Pe!==6)&&(Se=null)):(he=null,Se=le),he!==Se)){if(Pe=Bc,me="onMouseLeave",ne="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=Yi,me="onPointerLeave",ne="onPointerEnter",X="pointer"),Rt=he==null?ce:or(he),oe=Se==null?ce:or(Se),ce=new Pe(me,X+"leave",he,l,fe),ce.target=Rt,ce.relatedTarget=oe,me=null,ui(fe)===le&&(Pe=new Pe(ne,X+"enter",Se,l,fe),Pe.target=oe,Pe.relatedTarget=Rt,me=Pe),Rt=me,he&&Se)t:{for(Pe=SC,ne=he,X=Se,oe=0,me=ne;me;me=Pe(me))oe++;me=0;for(var ke=X;ke;ke=Pe(ke))me++;for(;0<oe-me;)ne=Pe(ne),oe--;for(;0<me-oe;)X=Pe(X),me--;for(;oe--;){if(ne===X||X!==null&&ne===X.alternate){Pe=ne;break t}ne=Pe(ne),X=Pe(X)}Pe=null}else Pe=null;he!==null&&F1(ge,ce,he,Pe,!1),Se!==null&&Rt!==null&&F1(ge,Rt,Se,Pe,!0)}}e:{if(ce=le?or(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var ut=sv;else if(rv(ce))if(av)ut=jR;else{ut=MR;var Re=OR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&el(le.elementType)&&(ut=sv):ut=PR;if(ut&&(ut=ut(i,le))){iv(ge,ut,l,fe);break e}Re&&Re(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Mc(ce,"number",ce.value)}switch(Re=le?or(le):window,i){case"focusin":(rv(Re)||Re.contentEditable==="true")&&(ll=Re,Eg=le,Gc=null);break;case"focusout":Gc=Eg=ll=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,mv(ge,l,fe);break;case"selectionchange":if(LR)break;case"keydown":case"keyup":mv(ge,l,fe)}var Ge;if(ft)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ol?Fa(i,l)&&(Ze="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(bi&&l.locale!=="ko"&&(ol||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ol&&(Ge=Uc()):(pi=fe,Lc="value"in pi?pi.value:pi.textContent,ol=!0)),Re=Wd(le,Ze),0<Re.length&&(Ze=new vi(Ze,i,null,l,fe),ge.push({event:Ze,listeners:Re}),Ge?Ze.data=Ge:(Ge=al(l),Ge!==null&&(Ze.data=Ge)))),(Ge=Ir?CR(i,l):NR(i,l))&&(Ze=Wd(le,"onBeforeInput"),0<Ze.length&&(Re=new vi("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Re,listeners:Ze}),Re.data=Ge)),wC(ge,i,le,l,fe)}z1(ge,a)})}function yu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Wd(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=qr(i,l),p!=null&&h.unshift(yu(i,p,_)),p=qr(i,a),p!=null&&h.push(yu(i,p,_))),i.tag===3)return h;i=i.return}return[]}function SC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function F1(i,a,l,h,p){for(var _=a._reactName,A=[];l!==null&&l!==h;){var L=l,Q=L.alternate,le=L.stateNode;if(L=L.tag,Q!==null&&Q===h)break;L!==5&&L!==26&&L!==27||le===null||(Q=le,p?(le=qr(l,_),le!=null&&A.unshift(yu(l,le,Q))):p||(le=qr(l,_),le!=null&&A.push(yu(l,le,Q)))),l=l.return}A.length!==0&&i.push({event:a,listeners:A})}var AC=/\r\n?/g,IC=/\u0000|\uFFFD/g;function H1(i){return(typeof i=="string"?i:""+i).replace(AC,`
`).replace(IC,"")}function q1(i,a){return a=H1(a),H1(i)===a}function It(i,a,l,h,p,_){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Xn(i,""+h);break;case"className":lr(i,"class",h);break;case"tabIndex":lr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(i,l,h);break;case"style":jc(i,h,_);break;case"data":if(a!=="object"){lr(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&It(i,a,"name",p.name,p,null),It(i,a,"formEncType",p.formEncType,p,null),It(i,a,"formMethod",p.formMethod,p,null),It(i,a,"formTarget",p.formTarget,p,null)):(It(i,a,"encType",p.encType,p,null),It(i,a,"method",p.method,p,null),It(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=tl(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Hr);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=tl(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Xe("beforetoggle",i),Xe("toggle",i),Jo(i,"popover",h);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Jo(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Wh.get(l)||l,Jo(i,l,h))}}function Qp(i,a,l,h,p,_){switch(l){case"style":jc(i,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Xn(i,h):(typeof h=="number"||typeof h=="bigint")&&Xn(i,""+h);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),_=i[yn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,p),typeof h=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Jo(i,l,h)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",i),Xe("load",i);var h=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:It(i,a,_,A,l,null)}}p&&It(i,a,"srcSet",l.srcSet,l,null),h&&It(i,a,"src",l.src,l,null);return;case"input":Xe("invalid",i);var L=_=A=p=null,Q=null,le=null;for(h in l)if(l.hasOwnProperty(h)){var fe=l[h];if(fe!=null)switch(h){case"name":p=fe;break;case"type":A=fe;break;case"checked":Q=fe;break;case"defaultChecked":le=fe;break;case"value":_=fe;break;case"defaultValue":L=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,a));break;default:It(i,a,h,fe,l,null)}}Kh(i,_,L,Q,le,A,p,!1);return;case"select":Xe("invalid",i),h=A=_=null;for(p in l)if(l.hasOwnProperty(p)&&(L=l[p],L!=null))switch(p){case"value":_=L;break;case"defaultValue":A=L;break;case"multiple":h=L;default:It(i,a,p,L,l,null)}a=_,l=A,i.multiple=!!h,a!=null?Rs(i,!!h,a,!1):l!=null&&Rs(i,!!h,l,!0);return;case"textarea":Xe("invalid",i),_=p=h=null;for(A in l)if(l.hasOwnProperty(A)&&(L=l[A],L!=null))switch(A){case"value":h=L;break;case"defaultValue":p=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:It(i,a,A,L,l,null)}Cs(i,h,p,_);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(h=l[Q],h!=null))switch(Q){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:It(i,a,Q,h,l,null)}return;case"dialog":Xe("beforetoggle",i),Xe("toggle",i),Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":Xe("load",i);break;case"video":case"audio":for(h=0;h<pu.length;h++)Xe(pu[h],i);break;case"image":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"embed":case"source":case"link":Xe("error",i),Xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(h=l[le],h!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:It(i,a,le,h,l,null)}return;default:if(el(a)){for(fe in l)l.hasOwnProperty(fe)&&(h=l[fe],h!==void 0&&Qp(i,a,fe,h,l,void 0));return}}for(L in l)l.hasOwnProperty(L)&&(h=l[L],h!=null&&It(i,a,L,h,l,null))}function RC(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,A=null,L=null,Q=null,le=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:h.hasOwnProperty(he)||It(i,a,he,null,h,ge)}}for(var ce in h){var he=h[ce];if(ge=l[ce],h.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":p=he;break;case"checked":le=he;break;case"defaultChecked":fe=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,a));break;default:he!==ge&&It(i,a,ce,he,h,ge)}}Zo(i,A,L,Q,le,fe,_,p);return;case"select":he=A=L=ce=null;for(_ in l)if(Q=l[_],l.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":he=Q;default:h.hasOwnProperty(_)||It(i,a,_,null,h,Q)}for(p in h)if(_=h[p],Q=l[p],h.hasOwnProperty(p)&&(_!=null||Q!=null))switch(p){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":A=_;default:_!==Q&&It(i,a,p,_,h,Q)}a=L,l=A,h=he,ce!=null?Rs(i,!!l,ce,!1):!!h!=!!l&&(a!=null?Rs(i,!!l,a,!0):Rs(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(L in l)if(p=l[L],l.hasOwnProperty(L)&&p!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:It(i,a,L,null,h,p)}for(A in h)if(p=h[A],_=l[A],h.hasOwnProperty(A)&&(p!=null||_!=null))switch(A){case"value":ce=p;break;case"defaultValue":he=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&It(i,a,A,p,h,_)}Yh(i,ce,he);return;case"option":for(var Se in l)if(ce=l[Se],l.hasOwnProperty(Se)&&ce!=null&&!h.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:It(i,a,Se,null,h,ce)}for(Q in h)if(ce=h[Q],he=l[Q],h.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:It(i,a,Q,ce,h,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)ce=l[Pe],l.hasOwnProperty(Pe)&&ce!=null&&!h.hasOwnProperty(Pe)&&It(i,a,Pe,null,h,ce);for(le in h)if(ce=h[le],he=l[le],h.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,a));break;default:It(i,a,le,ce,h,he)}return;default:if(el(a)){for(var Rt in l)ce=l[Rt],l.hasOwnProperty(Rt)&&ce!==void 0&&!h.hasOwnProperty(Rt)&&Qp(i,a,Rt,void 0,h,ce);for(fe in h)ce=h[fe],he=l[fe],!h.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Qp(i,a,fe,ce,h,he);return}}for(var ne in l)ce=l[ne],l.hasOwnProperty(ne)&&ce!=null&&!h.hasOwnProperty(ne)&&It(i,a,ne,null,h,ce);for(ge in h)ce=h[ge],he=l[ge],!h.hasOwnProperty(ge)||ce===he||ce==null&&he==null||It(i,a,ge,ce,h,he)}function $1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],_=p.transferSize,A=p.initiatorType,L=p.duration;if(_&&L&&$1(A)){for(A=0,L=p.responseEnd,h+=1;h<l.length;h++){var Q=l[h],le=Q.startTime;if(le>L)break;var fe=Q.transferSize,ge=Q.initiatorType;fe&&$1(ge)&&(Q=Q.responseEnd,A+=fe*(Q<L?1:(L-le)/(Q-le)))}if(--h,a+=8*(_+A)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Wp=null,Xp=null;function Xd(i){return i.nodeType===9?i:i.ownerDocument}function G1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Jp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zp=null;function NC(){var i=window.event;return i&&i.type==="popstate"?i===Zp?!1:(Zp=i,!0):(Zp=null,!1)}var Y1=typeof setTimeout=="function"?setTimeout:void 0,kC=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(i){return Q1.resolve(null).then(i).catch(OC)}:Y1;function OC(i){setTimeout(function(){throw i})}function Js(i){return i==="head"}function W1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Pl(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")_u(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,_u(l);for(var _=l.firstChild;_;){var A=_.nextSibling,L=_.nodeName;_[ci]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&_u(i.ownerDocument.body);l=p}while(l);Pl(a)}function X1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function ey(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ey(l),Xo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function MC(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[ci])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Mr(i.nextSibling),i===null)break}return null}function PC(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Mr(i.nextSibling),i===null))return null;return i}function J1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Mr(i.nextSibling),i===null))return null;return i}function ty(i){return i.data==="$?"||i.data==="$~"}function ny(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jC(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Mr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var ry=null;function Z1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Mr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function ew(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function tw(i,a,l){switch(a=Xd(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function _u(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Xo(i)}var Pr=new Map,nw=new Set;function Jd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=D.d;D.d={f:VC,r:LC,D:UC,C:zC,L:BC,m:FC,X:qC,S:HC,M:$C};function VC(){var i=cs.f(),a=Hd();return i||a}function LC(i){var a=Tr(i);a!==null&&a.tag===5&&a.type==="form"?vb(a):cs.r(i)}var Dl=typeof document>"u"?null:document;function rw(i,a,l){var h=Dl;if(h&&typeof a=="string"&&a){var p=Wn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),nw.has(p)||(nw.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function UC(i){cs.D(i),rw("dns-prefetch",i,null)}function zC(i,a){cs.C(i,a),rw("preconnect",i,a)}function BC(i,a,l){cs.L(i,a,l);var h=Dl;if(h&&i&&a){var p='link[rel="preload"][as="'+Wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Wn(l.imageSizes)+'"]')):p+='[href="'+Wn(i)+'"]';var _=p;switch(a){case"style":_=Ol(i);break;case"script":_=Ml(i)}Pr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Pr.set(_,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(vu(_))||a==="script"&&h.querySelector(bu(_))||(a=h.createElement("link"),Rn(a,"link",i),tn(a),h.head.appendChild(a)))}}function FC(i,a){cs.m(i,a);var l=Dl;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Wn(h)+'"][href="'+Wn(i)+'"]',_=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ml(i)}if(!Pr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Pr.set(_,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bu(_)))return}h=l.createElement("link"),Rn(h,"link",i),tn(h),l.head.appendChild(h)}}}function HC(i,a,l){cs.S(i,a,l);var h=Dl;if(h&&i){var p=hi(h).hoistableStyles,_=Ol(i);a=a||"default";var A=p.get(_);if(!A){var L={loading:0,preload:null};if(A=h.querySelector(vu(_)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Pr.get(_))&&iy(i,l);var Q=A=h.createElement("link");tn(Q),Rn(Q,"link",i),Q._p=new Promise(function(le,fe){Q.onload=le,Q.onerror=fe}),Q.addEventListener("load",function(){L.loading|=1}),Q.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Zd(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:L},p.set(_,A)}}}function qC(i,a){cs.X(i,a);var l=Dl;if(l&&i){var h=hi(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0},a),(a=Pr.get(p))&&sy(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function $C(i,a){cs.M(i,a);var l=Dl;if(l&&i){var h=hi(l).hoistableScripts,p=Ml(i),_=h.get(p);_||(_=l.querySelector(bu(p)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Pr.get(p))&&sy(i,a),_=l.createElement("script"),tn(_),Rn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(p,_))}}function iw(i,a,l,h){var p=(p=ye.current)?Jd(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ol(l.href),l=hi(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ol(l.href);var _=hi(p).hoistableStyles,A=_.get(i);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=p.querySelector(vu(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Pr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pr.set(i,l),_||GC(p,i,l,A.state))),a&&h===null)throw Error(n(528,""));return A}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ml(l),l=hi(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Ol(i){return'href="'+Wn(i)+'"'}function vu(i){return'link[rel="stylesheet"]['+i+"]"}function sw(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Rn(a,"link",l),tn(a),i.head.appendChild(a))}function Ml(i){return'[src="'+Wn(i)+'"]'}function bu(i){return"script[async]"+i}function aw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Wn(l.href)+'"]');if(h)return a.instance=h,tn(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),tn(h),Rn(h,"style",p),Zd(h,l.precedence,i),a.instance=h;case"stylesheet":p=Ol(l.href);var _=i.querySelector(vu(p));if(_)return a.state.loading|=4,a.instance=_,tn(_),_;h=sw(l),(p=Pr.get(p))&&iy(h,p),_=(i.ownerDocument||i).createElement("link"),tn(_);var A=_;return A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),a.state.loading|=4,Zd(_,l.precedence,i),a.instance=_;case"script":return _=Ml(l.src),(p=i.querySelector(bu(_)))?(a.instance=p,tn(p),p):(h=l,(p=Pr.get(_))&&(h=y({},l),sy(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),tn(p),Rn(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Zd(h,l.precedence,i));return a.instance}function Zd(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,_=p,A=0;A<h.length;A++){var L=h[A];if(L.dataset.precedence===a)_=L;else if(_!==p)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function iy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function sy(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var ef=null;function ow(i,a,l){if(ef===null){var h=new Map,p=ef=new Map;p.set(l,h)}else p=ef,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var _=l[p];if(!(_[ci]||_[en]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(a)||"";A=i+A;var L=h.get(A);L?L.push(_):h.set(A,[_])}}return h}function lw(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function KC(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function YC(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ol(h.href),_=a.querySelector(vu(p));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=tf.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,tn(_);return}_=a.ownerDocument||a,h=sw(h),(p=Pr.get(p))&&iy(h,p),_=_.createElement("link"),tn(_);var A=_;A._p=new Promise(function(L,Q){A.onload=L,A.onerror=Q}),Rn(_,"link",h),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=tf.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ay=0;function QC(i,a){return i.stylesheets&&i.count===0&&rf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&rf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&ay===0&&(ay=62500*CC());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&rf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>ay?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var nf=null;function rf(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,nf=new Map,a.forEach(WC,i),nf=null,tf.call(i))}function WC(i,a){if(!(a.state.loading&4)){var l=nf.get(i);if(l)var h=l.get(null);else{l=new Map,nf.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var A=p[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}p=a.instance,A=p.getAttribute("data-precedence"),_=l.get(A)||h,_===h&&l.set(null,p),l.set(A,p),this.count++,h=tf.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),_?_.parentNode.insertBefore(p,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var wu={$$typeof:F,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function XC(i,a,l,h,p,_,A,L,Q){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function uw(i,a,l,h,p,_,A,L,Q,le,fe,ge){return i=new XC(i,a,l,A,Q,le,fe,ge,L),a=1,_===!0&&(a|=24),_=ur(3,null,null,a),i.current=_,_.stateNode=i,a=Ug(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:l,cache:a},Hg(_),i}function hw(i){return i?(i=hl,i):hl}function dw(i,a,l,h,p,_){p=hw(p),h.context===null?h.context=p:h.pendingContext=p,h=Bs(a),h.payload={element:l},_=_===void 0?null:_,_!==null&&(h.callback=_),l=Fs(i,h,a),l!==null&&(nr(l,i,a),Zc(l,i,a))}function fw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function oy(i,a){fw(i,a),(i=i.alternate)&&fw(i,a)}function mw(i){if(i.tag===13||i.tag===31){var a=$a(i,67108864);a!==null&&nr(a,i,67108864),oy(i,67108864)}}function gw(i){if(i.tag===13||i.tag===31){var a=gr();a=Oa(a);var l=$a(i,a);l!==null&&nr(l,i,a),oy(i,a)}}var sf=!0;function JC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=2,ly(i,a,l,h)}finally{D.p=_,P.T=p}}function ZC(i,a,l,h){var p=P.T;P.T=null;var _=D.p;try{D.p=8,ly(i,a,l,h)}finally{D.p=_,P.T=p}}function ly(i,a,l,h){if(sf){var p=cy(h);if(p===null)Yp(i,a,h,af,l),yw(i,h);else if(tN(p,i,a,l,h))h.stopPropagation();else if(yw(i,h),a&4&&-1<eN.indexOf(i)){for(;p!==null;){var _=Tr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=hn(_.pendingLanes);if(A!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var Q=1<<31-kt(A);L.entanglements[1]|=Q,A&=~Q}Ti(_),(mt&6)===0&&(Bd=xe()+500,gu(0))}}break;case 31:case 13:L=$a(_,2),L!==null&&nr(L,_,2),Hd(),oy(_,2)}if(_=cy(h),_===null&&Yp(i,a,h,af,l),_===p)break;p=_}p!==null&&h.stopPropagation()}else Yp(i,a,h,null,l)}}function cy(i){return i=Sr(i),uy(i)}var af=null;function uy(i){if(af=null,i=ui(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return af=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case pt:return 2;case Bn:return 8;case dt:case Fn:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var hy=!1,Zs=null,ea=null,ta=null,xu=new Map,Eu=new Map,na=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(i,a){switch(i){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":xu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(a.pointerId)}}function Tu(i,a,l,h,p,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:_,targetContainers:[p]},a!==null&&(a=Tr(a),a!==null&&mw(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function tN(i,a,l,h,p){switch(a){case"focusin":return Zs=Tu(Zs,i,a,l,h,p),!0;case"dragenter":return ea=Tu(ea,i,a,l,h,p),!0;case"mouseover":return ta=Tu(ta,i,a,l,h,p),!0;case"pointerover":var _=p.pointerId;return xu.set(_,Tu(xu.get(_)||null,i,a,l,h,p)),!0;case"gotpointercapture":return _=p.pointerId,Eu.set(_,Tu(Eu.get(_)||null,i,a,l,h,p)),!0}return!1}function _w(i){var a=ui(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Br(i.priority,function(){gw(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,Br(i.priority,function(){gw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function of(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=cy(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Vc=h,l.target.dispatchEvent(h),Vc=null}else return a=Tr(l),a!==null&&mw(a),i.blockedOn=l,!1;a.shift()}return!0}function vw(i,a,l){of(i)&&l.delete(a)}function nN(){hy=!1,Zs!==null&&of(Zs)&&(Zs=null),ea!==null&&of(ea)&&(ea=null),ta!==null&&of(ta)&&(ta=null),xu.forEach(vw),Eu.forEach(vw)}function lf(i,a){i.blockedOn===a&&(i.blockedOn=null,hy||(hy=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,nN)))}var cf=null;function bw(i){cf!==i&&(cf=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cf===i&&(cf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(uy(h||l)===null)continue;break}var _=Tr(l);_!==null&&(i.splice(a,3),a-=3,cp(_,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Pl(i){function a(Q){return lf(Q,i)}Zs!==null&&lf(Zs,i),ea!==null&&lf(ea,i),ta!==null&&lf(ta,i),xu.forEach(a),Eu.forEach(a);for(var l=0;l<na.length;l++){var h=na[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<na.length&&(l=na[0],l.blockedOn===null);)_w(l),l.blockedOn===null&&na.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],_=l[h+1],A=p[yn]||null;if(typeof _=="function")A||bw(l);else if(A){var L=null;if(_&&_.hasAttribute("formAction")){if(p=_,A=_[yn]||null)L=A.formAction;else if(uy(p)!==null)continue}else L=A.action;typeof L=="function"?l[h+1]=L:(l.splice(h,3),h-=3),bw(l)}}}function ww(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function dy(i){this._internalRoot=i}uf.prototype.render=dy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=gr();dw(l,h,i,a,null,null)},uf.prototype.unmount=dy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;dw(i.current,2,null,i,null,null),Hd(),a[li]=null}};function uf(i){this._internalRoot=i}uf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Hh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<na.length&&a!==0&&a<na[l].priority;l++);na.splice(l,0,i),l===0&&_w(i)}};var xw=e.version;if(xw!=="19.2.3")throw Error(n(527,xw,"19.2.3"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var rN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{Kt=hf.inject(rN),Tt=hf}catch{}}return Au.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=Cb,_=Nb,A=kb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=uw(i,1,!1,null,null,l,h,null,p,_,A,ww),i[li]=a.current,Kp(i),new dy(a)},Au.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",_=Cb,A=Nb,L=kb,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError),l.formState!==void 0&&(Q=l.formState)),a=uw(i,1,!0,a,l??null,h,p,Q,_,A,L,ww),a.context=hw(null),l=a.current,h=gr(),h=Oa(h),p=Bs(h),p.callback=null,Fs(l,p,h),l=h,a.current.lanes=l,ka(a,l),Ti(a),i[li]=a.current,Kp(i),new uf(a)},Au.version="19.2.3",Au}var Dw;function mN(){if(Dw)return gy.exports;Dw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gy.exports=fN(),gy.exports}var gN=mN();var Ow="popstate";function pN(r={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Bo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),qy("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof o=="string"?o:eh(o))}function n(s,o){Ur(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return _N(e,t,n,r)}function zt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ur(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yN(){return Math.random().toString(36).substring(2,10)}function Mw(r,e){return{usr:r.state,key:r.key,idx:e}}function qy(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:t,key:e&&e.key||n||yN()}}function eh({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Bo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function _N(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let O=g(),V=O==null?null:O-f;f=O,d&&d({action:u,location:k.location,delta:V})}function v(O,V){u="PUSH";let B=qy(k.location,O,V);t&&t(B,O),f=g()+1;let F=Mw(B,f),q=k.createHref(B);try{c.pushState(F,"",q)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(q)}o&&d&&d({action:u,location:k.location,delta:1})}function w(O,V){u="REPLACE";let B=qy(k.location,O,V);t&&t(B,O),f=g();let F=Mw(B,f),q=k.createHref(B);c.replaceState(F,"",q),o&&d&&d({action:u,location:k.location,delta:0})}function T(O){return vN(O)}let k={get action(){return u},get location(){return r(s,c)},listen(O){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Ow,y),d=O,()=>{s.removeEventListener(Ow,y),d=null}},createHref(O){return e(s,O)},createURL:T,encodeLocation(O){let V=T(O);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:v,replace:w,go(O){return c.go(O)}};return k}function vN(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zt(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:eh(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function FT(r,e,t="/"){return bN(r,e,t,!1)}function bN(r,e,t,n){let s=typeof e=="string"?Bo(e):e,o=ps(s.pathname||"/",t);if(o==null)return null;let c=HT(r);wN(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=DN(o);u=NN(c[d],f,n)}return u}function HT(r,e=[],t=[],n="",s=!1){let o=(c,u,d=s,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;zt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ms([n,g.relativePath]),v=t.concat(g);c.children&&c.children.length>0&&(zt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),HT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:RN(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of qT(c.path))o(c,u,!0,d)}),e}function qT(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=qT(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function wN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:CN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var xN=/^:[\w-]+$/,EN=3,TN=2,SN=1,AN=10,IN=-2,Pw=r=>r==="*";function RN(r,e){let t=r.split("/"),n=t.length;return t.some(Pw)&&(n+=IN),e&&(n+=TN),t.filter(s=>!Pw(s)).reduce((s,o)=>s+(xN.test(o)?EN:o===""?SN:AN),n)}function CN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function NN(r,e,t=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=Gf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=Gf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ms([o,y.pathname]),pathnameBase:VN(ms([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ms([o,y.pathnameBase]))}return c}function Gf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=kN(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let T=u[v]||"";c=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function kN(r,e=!1,t=!0){Ur(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function DN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ur(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ps(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var ON=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MN=r=>ON.test(r);function PN(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Bo(r):r,o;if(t)if(MN(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=jw(t.substring(1),"/"):o=jw(t,e)}else o=e;return{pathname:o,search:LN(n),hash:UN(s)}}function jw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vy(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $T(r){let e=jN(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function GT(r,e,t,n=!1){let s;typeof r=="string"?s=Bo(r):(s={...r},zt(!s.pathname||!s.pathname.includes("?"),vy("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),vy("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),vy("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=PN(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ms=r=>r.join("/").replace(/\/\/+/g,"/"),VN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),LN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,UN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function zN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function BN(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KT=["POST","PUT","PATCH","DELETE"];new Set(KT);var FN=["GET",...KT];new Set(FN);var vc=$.createContext(null);vc.displayName="DataRouter";var Dm=$.createContext(null);Dm.displayName="DataRouterState";$.createContext(!1);var YT=$.createContext({isTransitioning:!1});YT.displayName="ViewTransition";var HN=$.createContext(new Map);HN.displayName="Fetchers";var qN=$.createContext(null);qN.displayName="Await";var ii=$.createContext(null);ii.displayName="Navigation";var xh=$.createContext(null);xh.displayName="Location";var si=$.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var M0=$.createContext(null);M0.displayName="RouteError";function $N(r,{relative:e}={}){zt(Eh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=$.useContext(ii),{hash:s,pathname:o,search:c}=Th(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:ms([t,o])),n.createHref({pathname:u,search:c,hash:s})}function Eh(){return $.useContext(xh)!=null}function xr(){return zt(Eh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(xh).location}var QT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WT(r){$.useContext(ii).static||$.useLayoutEffect(r)}function xs(){let{isDataRoute:r}=$.useContext(si);return r?ak():GN()}function GN(){zt(Eh(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(vc),{basename:e,navigator:t}=$.useContext(ii),{matches:n}=$.useContext(si),{pathname:s}=xr(),o=JSON.stringify($T(n)),c=$.useRef(!1);return WT(()=>{c.current=!0}),$.useCallback((d,f={})=>{if(Ur(c.current,QT),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=GT(d,JSON.parse(o),s,f.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ms([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,r])}var KN=$.createContext(null);function YN(r){let e=$.useContext(si).outlet;return $.useMemo(()=>e&&$.createElement(KN.Provider,{value:r},e),[e,r])}function XT(){let{matches:r}=$.useContext(si),e=r[r.length-1];return e?e.params:{}}function Th(r,{relative:e}={}){let{matches:t}=$.useContext(si),{pathname:n}=xr(),s=JSON.stringify($T(t));return $.useMemo(()=>GT(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function QN(r,e){return JT(r,e)}function JT(r,e,t,n,s){zt(Eh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ii),{matches:c}=$.useContext(si),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let B=y&&y.path||"";ZT(f,!y||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let v=xr(),w;if(e){let B=typeof e=="string"?Bo(e):e;zt(g==="/"||B.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),w=B}else w=v;let T=w.pathname||"/",k=T;if(g!=="/"){let B=g.replace(/^\//,"").split("/");k="/"+T.replace(/^\//,"").split("/").slice(B.length).join("/")}let O=FT(r,{pathname:k});Ur(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ur(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=ek(O&&O.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:ms([g,o.encodeLocation?o.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:ms([g,o.encodeLocation?o.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,n,s);return e&&V?$.createElement(xh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},V):V}function WN(){let r=sk(),e=zN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var XN=$.createElement(WN,null),JN=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?$.createElement(si.Provider,{value:this.props.routeContext},$.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZN({routeContext:r,match:e,children:t}){let n=$.useContext(vc);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(si.Provider,{value:r},t)}function ek(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);zt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:v,errors:w}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&n?(g,y)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:BN(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let w,T=!1,k=null,O=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||XN,u&&(d<0&&v===0?(ZT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,O=null):d===v&&(T=!0,O=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,v+1)),B=()=>{let F;return w?F=k:T?F=O:y.route.Component?F=$.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=g,$.createElement(ZN,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:F})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(JN,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:B(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):B()},null)}function P0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tk(r){let e=$.useContext(vc);return zt(e,P0(r)),e}function nk(r){let e=$.useContext(Dm);return zt(e,P0(r)),e}function rk(r){let e=$.useContext(si);return zt(e,P0(r)),e}function j0(r){let e=rk(r),t=e.matches[e.matches.length-1];return zt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function ik(){return j0("useRouteId")}function sk(){let r=$.useContext(M0),e=nk("useRouteError"),t=j0("useRouteError");return r!==void 0?r:e.errors?.[t]}function ak(){let{router:r}=tk("useNavigate"),e=j0("useNavigate"),t=$.useRef(!1);return WT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{Ur(t.current,QT),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var Vw={};function ZT(r,e,t){!e&&!Vw[r]&&(Vw[r]=!0,Ur(!1,t))}$.memo(ok);function ok({routes:r,future:e,state:t,unstable_onError:n}){return JT(r,void 0,t,n,e)}function lk(r){return YN(r.context)}function Xr(r){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ck({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){zt(!Eh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:u,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[u,s,o,c]);typeof t=="string"&&(t=Bo(t));let{pathname:f="/",search:g="",hash:y="",state:v=null,key:w="default"}=t,T=$.useMemo(()=>{let k=ps(f,u);return k==null?null:{location:{pathname:k,search:g,hash:y,state:v,key:w},navigationType:n}},[u,f,g,y,v,w,n]);return Ur(T!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:$.createElement(ii.Provider,{value:d},$.createElement(xh.Provider,{children:e,value:T}))}function uk({children:r,location:e}){return QN($y(r),e)}function $y(r,e=[]){let t=[];return $.Children.forEach(r,(n,s)=>{if(!$.isValidElement(n))return;let o=[...e,s];if(n.type===$.Fragment){t.push.apply(t,$y(n.props.children,o));return}zt(n.type===Xr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=$y(n.props.children,o)),t.push(c)}),t}var Sf="get",Af="application/x-www-form-urlencoded";function Om(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function hk(r){return Om(r)&&r.tagName.toLowerCase()==="button"}function dk(r){return Om(r)&&r.tagName.toLowerCase()==="form"}function fk(r){return Om(r)&&r.tagName.toLowerCase()==="input"}function mk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function gk(r,e){return r.button===0&&(!e||e==="_self")&&!mk(r)}var df=null;function pk(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var yk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function by(r){return r!=null&&!yk.has(r)?(Ur(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Af}"`),null):r}function _k(r,e){let t,n,s,o,c;if(dk(r)){let u=r.getAttribute("action");n=u?ps(u,e):null,t=r.getAttribute("method")||Sf,s=by(r.getAttribute("enctype"))||Af,o=new FormData(r)}else if(hk(r)||fk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(n=d?ps(d,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Sf,s=by(r.getAttribute("formenctype"))||by(u.getAttribute("enctype"))||Af,o=new FormData(u,r),!pk()){let{name:f,type:g,value:y}=r;if(g==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(Om(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Sf,n=null,s=Af,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function V0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function vk(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ps(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function bk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xk(r,e,t){let n=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await bk(o,t);return c.links?c.links():[]}return[]}));return Ak(n.flat(1).filter(wk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Lw(r,e,t,n,s,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Ek(r,e,{includeHydrateFallback:t}={}){return Tk(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Tk(r){return[...new Set(r)]}function Sk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Ak(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let o=JSON.stringify(Sk(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function eS(){let r=$.useContext(vc);return V0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ik(){let r=$.useContext(Dm);return V0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var L0=$.createContext(void 0);L0.displayName="FrameworkContext";function tS(){let r=$.useContext(L0);return V0(r,"You must render this element inside a <HydratedRouter> element"),r}function Rk(r,e){let t=$.useContext(L0),[n,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let k=V=>{V.forEach(B=>{c(B.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[r]),$.useEffect(()=>{if(n){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[n]);let w=()=>{s(!0)},T=()=>{s(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Iu(u,w),onBlur:Iu(d,T),onMouseEnter:Iu(f,w),onMouseLeave:Iu(g,T),onTouchStart:Iu(y,w)}]:[!1,v,{}]}function Iu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Ck({page:r,...e}){let{router:t}=eS(),n=$.useMemo(()=>FT(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?$.createElement(kk,{page:r,matches:n,...e}):null}function Nk(r){let{manifest:e,routeModules:t}=tS(),[n,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return xk(r,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[r,e,t]),n}function kk({page:r,matches:e,...t}){let n=xr(),{manifest:s,routeModules:o}=tS(),{basename:c}=eS(),{loaderData:u,matches:d}=Ik(),f=$.useMemo(()=>Lw(r,e,d,s,n,"data"),[r,e,d,s,n]),g=$.useMemo(()=>Lw(r,e,d,s,n,"assets"),[r,e,d,s,n]),y=$.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let T=new Set,k=!1;if(e.forEach(V=>{let B=s.routes[V.route.id];!B||!B.hasLoader||(!f.some(F=>F.route.id===V.route.id)&&V.route.id in u&&o[V.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:T.add(V.route.id))}),T.size===0)return[];let O=vk(r,c,"data");return k&&T.size>0&&O.searchParams.set("_routes",e.filter(V=>T.has(V.route.id)).map(V=>V.route.id).join(",")),[O.pathname+O.search]},[c,u,n,s,f,e,r,o]),v=$.useMemo(()=>Ek(g,s),[g,s]),w=Nk(g);return $.createElement($.Fragment,null,y.map(T=>$.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),v.map(T=>$.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),w.map(({key:T,link:k})=>$.createElement("link",{key:T,nonce:t.nonce,...k})))}function Dk(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nS&&(window.__reactRouterVersion="7.10.1")}catch{}function Ok({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=$.useRef();s.current==null&&(s.current=pN({window:n,v5Compat:!0}));let o=s.current,[c,u]=$.useState({action:o.action,location:o.location}),d=$.useCallback(f=>{t===!1?u(f):$.startTransition(()=>u(f))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(ck,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var rS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ei=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:T,unstable_useTransitions:k}=$.useContext(ii),O=typeof f=="string"&&rS.test(f),V,B=!1;if(typeof f=="string"&&O&&(V=f,nS))try{let I=new URL(window.location.href),N=f.startsWith("//")?new URL(I.protocol+f):new URL(f),j=ps(N.pathname,T);N.origin===I.origin&&j!=null?f=j+N.search+N.hash:B=!0}catch{Ur(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=$N(f,{relative:s}),[q,K,z]=Rk(n,v),M=Vk(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y,unstable_useTransitions:k});function x(I){e&&e(I),I.defaultPrevented||M(I)}let S=$.createElement("a",{...v,...z,href:V||F,onClick:B||o?e:x,ref:Dk(w,K),target:d,"data-discover":!O&&t==="render"?"true":void 0});return q&&!O?$.createElement($.Fragment,null,S,$.createElement(Ck,{page:F})):S});ei.displayName="Link";var Mk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=Th(c,{relative:f.relative}),v=xr(),w=$.useContext(Dm),{navigator:T,basename:k}=$.useContext(ii),O=w!=null&&Fk(y)&&u===!0,V=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,B=v.pathname,F=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(B=B.toLowerCase(),F=F?F.toLowerCase():null,V=V.toLowerCase()),F&&k&&(F=ps(F,k)||F);const q=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let K=B===V||!s&&B.startsWith(V)&&B.charAt(q)==="/",z=F!=null&&(F===V||!s&&F.startsWith(V)&&F.charAt(V.length)==="/"),M={isActive:K,isPending:z,isTransitioning:O},x=K?e:void 0,S;typeof n=="function"?S=n(M):S=[n,K?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(M):o;return $.createElement(ei,{...f,"aria-current":x,className:S,ref:g,style:I,to:c,viewTransition:u},typeof d=="function"?d(M):d)});Mk.displayName="NavLink";var Pk=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=Sf,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let{unstable_useTransitions:T}=$.useContext(ii),k=zk(),O=Bk(u,{relative:f}),V=c.toLowerCase()==="get"?"get":"post",B=typeof u=="string"&&rS.test(u),F=q=>{if(d&&d(q),q.defaultPrevented)return;q.preventDefault();let K=q.nativeEvent.submitter,z=K?.getAttribute("formmethod")||c,M=()=>k(K||q.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y});T&&t!==!1?$.startTransition(()=>M()):M()};return $.createElement("form",{ref:w,method:V,action:O,onSubmit:n?d:F,...v,"data-discover":!B&&r==="render"?"true":void 0})});Pk.displayName="Form";function jk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iS(r){let e=$.useContext(vc);return zt(e,jk(r)),e}function Vk(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=xs(),f=xr(),g=Th(r,{relative:o});return $.useCallback(y=>{if(gk(y,e)){y.preventDefault();let v=t!==void 0?t:eh(f)===eh(g),w=()=>d(r,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c});u?$.startTransition(()=>w()):w()}},[f,d,g,t,n,e,r,s,o,c,u])}var Lk=0,Uk=()=>`__${String(++Lk)}__`;function zk(){let{router:r}=iS("useSubmit"),{basename:e}=$.useContext(ii),t=ik(),n=r.fetch,s=r.navigate;return $.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=_k(o,e);if(c.navigate===!1){let v=c.fetcherKey||Uk();await n(v,t,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await s(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,s,e,t])}function Bk(r,{relative:e}={}){let{basename:t}=$.useContext(ii),n=$.useContext(si);zt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Th(r||".",{relative:e})},c=xr();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ms([t,o.pathname])),eh(o)}function Fk(r,{relative:e}={}){let t=$.useContext(YT);zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=iS("useViewTransitionState"),s=Th(r,{relative:e});if(!t.isTransitioning)return!1;let o=ps(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ps(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Gf(s.pathname,c)!=null||Gf(s.pathname,o)!=null}const Ve=r=>typeof r=="string",Ru=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Uw=r=>r==null?"":""+r,Hk=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},qk=/###/g,zw=r=>r&&r.indexOf("###")>-1?r.replace(qk,"."):r,Bw=r=>!r||Ve(r),Bu=(r,e,t)=>{const n=Ve(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Bw(r))return{};const o=zw(n[s]);!r[o]&&t&&(r[o]=new t),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={},++s}return Bw(r)?{}:{obj:r,k:zw(n[s])}},Fw=(r,e,t)=>{const{obj:n,k:s}=Bu(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),u=Bu(r,c,Object);for(;u.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),u=Bu(r,c,Object),u?.obj&&typeof u.obj[`${u.k}.${o}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${o}`]=t},$k=(r,e,t,n)=>{const{obj:s,k:o}=Bu(r,e,Object);s[o]=s[o]||[],s[o].push(t)},Kf=(r,e)=>{const{obj:t,k:n}=Bu(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},Gk=(r,e,t)=>{const n=Kf(r,t);return n!==void 0?n:Kf(e,t)},sS=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?Ve(r[n])||r[n]instanceof String||Ve(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):sS(r[n],e[n],t):r[n]=e[n]);return r},jl=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Kk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Yk=r=>Ve(r)?r.replace(/[&<>"'\/]/g,e=>Kk[e]):r;class Qk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Wk=[" ",",","?","!",";"],Xk=new Qk(20),Jk=(r,e,t)=>{e=e||"",t=t||"";const n=Wk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(n.length===0)return!0;const s=Xk.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(r);if(!o){const c=r.indexOf(t);c>0&&!s.test(r.substring(0,c))&&(o=!0)}return o},Gy=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const n=e.split(t);let s=r;for(let o=0;o<n.length;){if(!s||typeof s!="object")return;let c,u="";for(let d=o;d<n.length;++d)if(d!==o&&(u+=t),u+=n[d],c=s[u],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<n.length-1)continue;o+=d-o+1;break}s=c}return s},th=r=>r?.replace("_","-"),Zk={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let e4=class Ky{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Zk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(Ve(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Ky(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ky(this.logger,e)}};var Ci=new e4;class Mm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Hw extends Mm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],n&&(Array.isArray(n)?u.push(...n):Ve(n)&&o?u.push(...n.split(o)):u.push(n)));const d=Kf(this.data,u);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=u[0],t=u[1],n=u.slice(2).join(".")),d||!c||!Ve(n)?d:Gy(this.data?.[e]?.[t],n,o)}addResource(e,t,n,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let u=[e,t];n&&(u=u.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(u=e.split("."),s=t,t=u[1]),this.addNamespaces(t),Fw(this.data,u,s),o.silent||this.emit("added",e,t,n,s)}addResources(e,t,n,s={silent:!1}){for(const o in n)(Ve(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,o,c={silent:!1,skipCopy:!1}){let u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),s=n,n=t,t=u[1]),this.addNamespaces(t);let d=Kf(this.data,u)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?sS(d,n,o):d={...d,...n},Fw(this.data,u,d),c.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var aS={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(o=>{e=this.processors[o]?.process(e,t,n,s)??e}),e}};const oS=Symbol("i18next/PATH_KEY");function t4(){const r=[],e=Object.create(null);let t;return e.get=(n,s)=>(t?.revoke?.(),s===oS?r:(r.push(s),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Yy(r,e){const{[oS]:t}=r(t4());return t.join(e?.keySeparator??".")}const qw={},wy=r=>!Ve(r)&&typeof r!="boolean"&&typeof r!="number";class Yf extends Mm{constructor(e,t={}){super(),Hk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ci.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const s=this.resolve(e,n);if(s?.res===void 0)return!1;const o=wy(s.res);return!(n.returnObjects===!1&&o)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Jk(e,n,s);if(c&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ve(o)?[o]:o};const f=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),e=f.join(s)}return{key:e,namespaces:Ve(o)?[o]:o}}translate(e,t,n){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Yy(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${f}${g}${u}`,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${g}${u}`:o?{res:u,usedKey:u,exactUsedKey:u,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let T=w?.res;const k=w?.usedKey||u,O=w?.exactUsedKey||u,V=["[object Number]","[object Function]","[object RegExp]"],B=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,F=!this.i18nFormat||this.i18nFormat.handleAsObject,q=s.count!==void 0&&!Ve(s.count),K=Yf.hasDefaultValue(s),z=q?this.pluralResolver.getSuffix(y,s.count,s):"",M=s.ordinal&&q?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",x=q&&!s.ordinal&&s.count===0,S=x&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${M}`]||s.defaultValue;let I=T;F&&!T&&K&&(I=S);const N=wy(I),j=Object.prototype.toString.apply(I);if(F&&I&&N&&V.indexOf(j)<0&&!(Ve(B)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return o?(w.res=C,w.usedParams=this.getUsedParamsDetails(s),w):C}if(c){const C=Array.isArray(I),G=C?[]:{},te=C?O:k;for(const P in I)if(Object.prototype.hasOwnProperty.call(I,P)){const D=`${te}${c}${P}`;K&&!T?G[P]=this.translate(D,{...s,defaultValue:wy(S)?S[P]:void 0,joinArrays:!1,ns:d}):G[P]=this.translate(D,{...s,joinArrays:!1,ns:d}),G[P]===D&&(G[P]=I[P])}T=G}}else if(F&&Ve(B)&&Array.isArray(T))T=T.join(B),T&&(T=this.extendTranslation(T,e,s,n));else{let C=!1,G=!1;!this.isValidLookup(T)&&K&&(C=!0,T=S),this.isValidLookup(T)||(G=!0,T=u);const P=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:T,D=K&&S!==T&&this.options.updateMissing;if(G||C||D){if(this.logger.log(D?"updateKey":"missingKey",y,f,u,D?S:T),c){const H=this.resolve(u,{...s,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Z=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let H=0;H<W.length;H++)Z.push(W[H]);else this.options.saveMissingTo==="all"?Z=this.languageUtils.toResolveHierarchy(s.lng||this.language):Z.push(s.lng||this.language);const ee=(H,Y,ie)=>{const J=K&&ie!==T?ie:P;this.options.missingKeyHandler?this.options.missingKeyHandler(H,f,Y,J,D,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,f,Y,J,D,s),this.emit("missingKey",H,f,Y,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&q?Z.forEach(H=>{const Y=this.pluralResolver.getSuffixes(H,s);x&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(ie=>{ee([H],u+ie,s[`defaultValue${ie}`]||S)})}):ee(Z,u,S))}T=this.extendTranslation(T,e,s,w,n),G&&T===u&&this.options.appendNamespaceToMissingKey&&(T=`${f}${g}${u}`),(G||C)&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${g}${u}`:u,C?T:void 0,s))}return o?(w.res=T,w.usedParams=this.getUsedParamsDetails(s),w):T}extendTranslation(e,t,n,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ve(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const y=e.match(this.interpolator.nestingRegexp);f=y&&y.length}let g=n.replace&&!Ve(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,n.lng||this.language||s.usedLng,n),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;f<v&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=Ve(c)?[c]:c;return e!=null&&u?.length&&n.applyPostProcessor!==!1&&(e=aS.handle(u,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,s,o,c,u;return Ve(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const f=this.extractFromKey(d,t),g=f.key;s=g;let y=f.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ve(t.count),w=v&&!t.ordinal&&t.count===0,T=t.context!==void 0&&(Ve(t.context)||typeof t.context=="number")&&t.context!=="",k=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(O=>{this.isValidLookup(n)||(u=O,!qw[`${k[0]}-${O}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(qw[`${k[0]}-${O}`]=!0,this.logger.warn(`key "${s}" for languages "${k.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(V=>{if(this.isValidLookup(n))return;c=V;const B=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(B,g,V,O,t);else{let q;v&&(q=this.pluralResolver.getSuffix(V,t.count,t));const K=`${this.options.pluralSeparator}zero`,z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&q.indexOf(z)===0&&B.push(g+q.replace(z,this.options.pluralSeparator)),B.push(g+q),w&&B.push(g+K)),T){const M=`${g}${this.options.contextSeparator||"_"}${t.context}`;B.push(M),v&&(t.ordinal&&q.indexOf(z)===0&&B.push(M+q.replace(z,this.options.pluralSeparator)),B.push(M+q),w&&B.push(M+K))}}let F;for(;F=B.pop();)this.isValidLookup(n)||(o=F,n=this.getResource(V,O,F,t))}))})}),{res:n,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Ve(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class $w{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ci.create("languageUtils")}getScriptPartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ve(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ve(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return Ve(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):Ve(e)&&o(this.formatLanguageCode(e)),n.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const Gw={zero:0,one:1,two:2,few:3,many:4,other:5},Kw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class n4{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ci.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=th(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Kw;if(!e.match(/-|_/))return Kw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((s,o)=>Gw[s]-Gw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,n={}){const s=this.getRule(e,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const Yw=(r,e,t,n=".",s=!0)=>{let o=Gk(r,e,t);return!o&&s&&Ve(t)&&(o=Gy(r,t,n),o===void 0&&(o=Gy(e,t,n))),o},xy=r=>r.replace(/\$/g,"$$$$");class Qw{constructor(e={}){this.logger=Ci.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:g,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:T,nestingSuffixEscaped:k,nestingOptionsSeparator:O,maxReplaces:V,alwaysFormat:B}=e.interpolation;this.escape=t!==void 0?t:Yk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?jl(o):c||"{{",this.suffix=u?jl(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?jl(v):w||jl("$t("),this.nestingSuffix=T?jl(T):k||jl(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=V||1e3,this.alwaysFormat=B!==void 0?B:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let o,c,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const V=Yw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,n,{...s,...t,interpolationkey:w}):V}const T=w.split(this.formatSeparator),k=T.shift().trim(),O=T.join(this.formatSeparator).trim();return this.format(Yw(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure),O,n,{...s,...t,interpolationkey:k})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>xy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?xy(this.escape(w)):xy(w)}].forEach(w=>{for(u=0;o=w.regex.exec(e);){const T=o[1].trim();if(c=f(T),c===void 0)if(typeof g=="function"){const O=g(e,o,s);c=Ve(O)?O:""}else if(s&&Object.prototype.hasOwnProperty.call(s,T))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${T} for interpolating ${e}`),c="";else!Ve(c)&&!this.useRawValueToEscape&&(c=Uw(c));const k=w.safeValue(c);if(e=e.replace(o[0],k),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t,n={}){let s,o,c;const u=(d,f)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const y=d.split(new RegExp(`${g}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),T=v.match(/"/g);((w?.length??0)%2===0&&!T||T.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),f&&(c={...f,...c})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,k),`${d}${g}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...n},c=c.replace&&!Ve(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),o=t(u.call(this,s[1].trim(),c),c),o&&s[0]===e&&!Ve(o))return o;Ve(o)||(o=Uw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((g,y)=>this.format(g,y,n.lng,{...n,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const r4=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[u,...d]=c.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),g=u.trim();t[g]||(t[g]=f),f==="false"&&(t[g]=!1),f==="true"&&(t[g]=!0),isNaN(f)||(t[g]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Ww=r=>{const e={};return(t,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=n+JSON.stringify(o);let u=e[c];return u||(u=r(th(n),s),e[c]=u),u(t)}},i4=r=>(e,t,n)=>r(th(t),n)(e);class s4{constructor(e={}){this.logger=Ci.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?Ww:i4;this.formats={number:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return u=>c.format(u)}),currency:n((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return u=>c.format(u)}),datetime:n((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return u=>c.format(u)}),relativetime:n((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return u=>c.format(u,o.range||"day")}),list:n((s,o)=>{const c=new Intl.ListFormat(s,{...o});return u=>c.format(u)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Ww(t)}format(e,t,n,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(u=>u.indexOf(")")>-1)){const u=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,u)].join(this.formatSeparator)}return o.reduce((u,d)=>{const{formatName:f,formatOptions:g}=r4(d);if(this.formats[f]){let y=u;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||n;y=this.formats[f](u,w,{...g,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const a4=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class o4 extends Mm{constructor(e,t,n,s={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ci.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(e,t,n,s){const o={},c={},u={},d={};return e.forEach(f=>{let g=!0;t.forEach(y=>{const v=`${f}|${y}`;!n.reload&&this.store.hasResourceBundle(f,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,g=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),g||(u[f]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&n&&this.store.addResourceBundle(o,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const u={};this.queue.forEach(d=>{$k(d.loaded,[o],c),a4(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const g=d.loaded[f];g.length&&g.forEach(y=>{u[f][y]===void 0&&(u[f][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:o,callback:c});return}this.readingCalls++;const u=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(f&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,o*2,c)},o);return}c(f,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const f=d(e,t);f&&typeof f.then=="function"?f.then(g=>u(null,g)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,t,u)}prepareLoading(e,t,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ve(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ve(t)&&(t=[t]);const o=this.queueLoad(e,t,n,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),s=n[0],o=n[1];this.read(s,o,"read",void 0,void 0,(c,u)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&u&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,u),this.loaded(e,c,u)})}saveMissing(e,t,n,s,o,c={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...c,isUpdate:o},f=this.backend.create.bind(this.backend);if(f.length<6)try{let g;f.length===5?g=f(e,t,n,s,d):g=f(e,t,n,s),g&&typeof g.then=="function"?g.then(y=>u(null,y)).catch(u):u(null,g)}catch(g){u(g)}else f(e,t,n,s,u,d)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const Xw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ve(r[1])&&(e.defaultValue=r[1]),Ve(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Jw=r=>(Ve(r.ns)&&(r.ns=[r.ns]),Ve(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ve(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),ff=()=>{},l4=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class Fu extends Mm{constructor(e={},t){if(super(),this.options=Jw(e),this.services={},this.logger=Ci,this.modules={external:[]},l4(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ve(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Xw();this.options={...n,...this.options,...Jw(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?Ci.init(s(this.modules.logger),this.options):Ci.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=s4;const g=new $w(this.options);this.store=new Hw(this.options.resources,this.options);const y=this.services;y.logger=Ci,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new n4(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(y.formatter=s(f),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Qw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new o4(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Yf(this.services,this.options),this.translator.on("*",(w,...T)=>{this.emit(w,...T)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ff),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...g)=>this.store[f](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...g)=>(this.store[f](...g),this)});const u=Ru(),d=()=>{const f=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(y),t(g,y)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,t=ff){let n=t;const s=Ve(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(u=>c(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,t,n){const s=Ru();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=ff),this.services.backendConnector.reload(e,t,o=>{s.resolve(),n(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&aS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Ru();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},o=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...f)=>this.t(...f)),t&&t(u,(...f)=>this.t(...f))},c=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Ve(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ve(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,g=>{o(g,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),n}getFixedT(e,t,n){const s=(o,c,...u)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(u)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const f=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(o)?g=o.map(y=>(typeof y=="function"&&(y=Yy(y,{...this.options,...c})),`${d.keyPrefix}${f}${y}`)):(typeof o=="function"&&(o=Yy(o,{...this.options,...c})),g=d.keyPrefix?`${d.keyPrefix}${f}${o}`:o),this.t(g,d)};return Ve(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=n,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const n=Ru();return this.options.ns?(Ve(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Ru();Ve(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{n.resolve(),t&&t(c)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new $w(Xw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new Fu(e,t);return n.createInstance=Fu.createInstance,n}cloneInstance(e={},t=ff){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Fu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(u=>{o[u]=this[u]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((g,y)=>(g[y]={...d[f][y]},g),d[f]),d),{});o.store=new Hw(u,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new Qw(s)),o.translator=new Yf(o.services,s),o.translator.on("*",(u,...d)=>{o.emit(u,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=Fu.createInstance();Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const c4=(r,e,t,n)=>{const s=[t,{code:e,...n||{}}];if(r?.services?.logger?.forward)return r.services.logger.forward(s,"warn","react-i18next::",!0);Eo(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),r?.services?.logger?.warn?r.services.logger.warn(...s):console?.warn&&console.warn(...s)},Zw={},lS=(r,e,t,n)=>{Eo(t)&&Zw[t]||(Eo(t)&&(Zw[t]=new Date),c4(r,e,t,n))},cS=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}},Qy=(r,e,t)=>{r.loadNamespaces(e,cS(r,t))},ex=(r,e,t,n)=>{if(Eo(t)&&(t=[t]),r.options.preload&&r.options.preload.indexOf(e)>-1)return Qy(r,t,n);t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,cS(r,n))},u4=(r,e,t={})=>!e.languages||!e.languages.length?(lS(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(r,{lng:t.lng,precheck:(n,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,r))return!1}}),Eo=r=>typeof r=="string",h4=r=>typeof r=="object"&&r!==null,d4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,f4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},m4=r=>f4[r],g4=r=>r.replace(d4,m4);let Wy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:g4,transDefaultProps:void 0};const p4=(r={})=>{Wy={...Wy,...r}},y4=()=>Wy;let uS;const _4=r=>{uS=r},v4=()=>uS,b4={type:"3rdParty",init(r){p4(r.options.react),_4(r)}},w4=$.createContext();class x4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Ey={exports:{}},Ty={};var tx;function E4(){if(tx)return Ty;tx=1;var r=km();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(y,v){var w=v(),T=n({inst:{value:w,getSnapshot:v}}),k=T[0].inst,O=T[1];return o(function(){k.value=w,k.getSnapshot=v,d(k)&&O({inst:k})},[y,w,v]),s(function(){return d(k)&&O({inst:k}),y(function(){d(k)&&O({inst:k})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function f(y,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ty.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:g,Ty}var nx;function T4(){return nx||(nx=1,Ey.exports=E4()),Ey.exports}var S4=T4();const A4=(r,e)=>Eo(e)?e:h4(e)&&Eo(e.defaultValue)?e.defaultValue:Array.isArray(r)?r[r.length-1]:r,I4={t:A4,ready:!1},R4=()=>()=>{},zn=(r,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:s}=$.useContext(w4)||{},o=t||n||v4();o&&!o.reportNamespaces&&(o.reportNamespaces=new x4),o||lS(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...y4(),...o?.options?.react,...e}),[o,e]),{useSuspense:u,keyPrefix:d}=c,f=s||o?.options?.defaultNS,g=Eo(f)?[f]:f||["translation"],y=$.useMemo(()=>g,g);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(S=>{if(!o)return R4;const{bindI18n:I,bindI18nStore:N}=c,j=()=>{v.current+=1,S()};return I&&o.on(I,j),N&&o.store.on(N,j),()=>{I&&I.split(" ").forEach(C=>o.off(C,j)),N&&N.split(" ").forEach(C=>o.store.off(C,j))}},[o,c]),T=$.useRef(),k=$.useCallback(()=>{if(!o)return I4;const S=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(te=>u4(te,o,c)),I=e.lng||o.language,N=v.current,j=T.current;if(j&&j.ready===S&&j.lng===I&&j.keyPrefix===d&&j.revision===N)return j;const G={t:o.getFixedT(I,c.nsMode==="fallback"?y:y[0],d),ready:S,lng:I,keyPrefix:d,revision:N};return T.current=G,G},[o,y,d,c,e.lng]),[O,V]=$.useState(0),{t:B,ready:F}=S4.useSyncExternalStore(w,k,k);$.useEffect(()=>{if(o&&!F&&!u){const S=()=>V(I=>I+1);e.lng?ex(o,e.lng,y,S):Qy(o,y,S)}},[o,e.lng,y,F,u,O]);const q=o||{},K=$.useRef(null),z=$.useRef(),M=S=>{const I=Object.getOwnPropertyDescriptors(S);I.__original&&delete I.__original;const N=Object.create(Object.getPrototypeOf(S),I);if(!Object.prototype.hasOwnProperty.call(N,"__original"))try{Object.defineProperty(N,"__original",{value:S,writable:!1,enumerable:!1,configurable:!1})}catch{}return N},x=$.useMemo(()=>{const S=q,I=S?.language;let N=S;S&&(K.current&&K.current.__original===S?z.current!==I?(N=M(S),K.current=N,z.current=I):N=K.current:(N=M(S),K.current=N,z.current=I));const j=[B,N,F];return j.t=B,j.i18n=N,j.ready=F,j},[B,q,F,q.resolvedLanguage,q.language,q.languages]);if(o&&u&&!F)throw new Promise(S=>{const I=()=>S();e.lng?ex(o,e.lng,y,I):Qy(o,y,I)});return x},C4=()=>{};var rx={};const hS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},N4=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],u=r[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,u=c?r[s+1]:0,d=s+2<r.length,f=d?r[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),n.push(t[g],t[y],t[v],t[w])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(hS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):N4(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],u=s<r.length?t[r.charAt(s)]:0;++s;const f=s<r.length?t[r.charAt(s)]:64;++s;const y=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new k4;const v=o<<2|u>>4;if(n.push(v),f!==64){const w=u<<4&240|f>>2;if(n.push(w),y!==64){const T=f<<6&192|y;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class k4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D4=function(r){const e=hS(r);return dS.encodeByteArray(e,!0)},Qf=function(r){return D4(r).replace(/\./g,"")},fS=function(r){try{return dS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const O4=()=>mS().__FIREBASE_DEFAULTS__,M4=()=>{if(typeof process>"u"||typeof rx>"u")return;const r=rx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},P4=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&fS(r[1]);return e&&JSON.parse(e)},Pm=()=>{try{return C4()||O4()||M4()||P4()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gS=r=>Pm()?.emulatorHosts?.[r],pS=r=>{const e=gS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},yS=()=>Pm()?.config,_S=r=>Pm()?.[`_${r}`];class j4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function Fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U0(r){return(await fetch(r,{credentials:"include"})).ok}function vS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Qf(JSON.stringify(t)),Qf(JSON.stringify(c)),""].join(".")}const Hu={};function V4(){const r={prod:[],emulator:[]};for(const e of Object.keys(Hu))Hu[e]?r.emulator.push(e):r.prod.push(e);return r}function L4(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ix=!1;function z0(r,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||Hu[r]===e||Hu[r]||ix)return;Hu[r]=e;function t(v){return`__firebase__banner__${v}`}const n="__firebase__banner",o=V4().prod.length>0;function c(){const v=document.getElementById(n);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ix=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=L4(n),w=t("text"),T=document.getElementById(w)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),V=t("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const F=v.element;u(F),g(O,k);const q=f();d(B,V),F.append(B,T,O,q),document.body.appendChild(F)}o?(T.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function bS(){const r=Pm()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B4(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function F4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H4(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){return!bS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function q4(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const $4="FirebaseError";class Bi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=$4,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?G4(o,n):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,n)}}function G4(r,e){return r.replace(K4,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const K4=/\{\$([^}]+)}/g;function Y4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(sx(o)&&sx(c)){if(!ys(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function sx(r){return r!==null&&typeof r=="object"}function Ah(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Mu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Pu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Q4(r,e){const t=new W4(r,e);return t.subscribe.bind(t)}class W4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");X4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Sy),s.error===void 0&&(s.error=Sy),s.complete===void 0&&(s.complete=Sy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X4(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sy(){}function Jt(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const so="[DEFAULT]";class J4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new j4;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eD(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Z4(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z4(r){return r===so?void 0:r}function eD(r){return r.instantiationMode==="EAGER"}class tD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new J4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var et;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(et||(et={}));const nD={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},rD=et.INFO,iD={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},sD=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=iD[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class B0{constructor(e){this.name=e,this._logLevel=rD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const aD=(r,e)=>e.some(t=>r instanceof t);let ax,ox;function oD(){return ax||(ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lD(){return ox||(ox=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,Xy=new WeakMap,SS=new WeakMap,Ay=new WeakMap,F0=new WeakMap;function cD(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(ga(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&TS.set(t,r)}).catch(()=>{}),F0.set(e,r),e}function uD(r){if(Xy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Xy.set(r,e)}let Jy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Xy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||SS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ga(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function hD(r){Jy=r(Jy)}function dD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Iy(this),e,...t);return SS.set(n,e.sort?e.sort():[e]),ga(n)}:lD().includes(r)?function(...e){return r.apply(Iy(this),e),ga(TS.get(this))}:function(...e){return ga(r.apply(Iy(this),e))}}function fD(r){return typeof r=="function"?dD(r):(r instanceof IDBTransaction&&uD(r),aD(r,oD())?new Proxy(r,Jy):r)}function ga(r){if(r instanceof IDBRequest)return cD(r);if(Ay.has(r))return Ay.get(r);const e=fD(r);return e!==r&&(Ay.set(r,e),F0.set(e,r)),e}const Iy=r=>F0.get(r);function mD(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),u=ga(c);return n&&c.addEventListener("upgradeneeded",d=>{n(ga(c.result),d.oldVersion,d.newVersion,ga(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const gD=["get","getKey","getAll","getAllKeys","count"],pD=["put","add","delete","clear"],Ry=new Map;function lx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ry.get(e))return Ry.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=pD.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||gD.includes(t)))return;const o=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Ry.set(e,o),o}hD(r=>({...r,get:(e,t,n)=>lx(e,t)||r.get(e,t,n),has:(e,t)=>!!lx(e,t)||r.has(e,t)}));class yD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_D(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function _D(r){return r.getComponent()?.type==="VERSION"}const Zy="@firebase/app",cx="0.14.6";const _s=new B0("@firebase/app"),vD="@firebase/app-compat",bD="@firebase/analytics-compat",wD="@firebase/analytics",xD="@firebase/app-check-compat",ED="@firebase/app-check",TD="@firebase/auth",SD="@firebase/auth-compat",AD="@firebase/database",ID="@firebase/data-connect",RD="@firebase/database-compat",CD="@firebase/functions",ND="@firebase/functions-compat",kD="@firebase/installations",DD="@firebase/installations-compat",OD="@firebase/messaging",MD="@firebase/messaging-compat",PD="@firebase/performance",jD="@firebase/performance-compat",VD="@firebase/remote-config",LD="@firebase/remote-config-compat",UD="@firebase/storage",zD="@firebase/storage-compat",BD="@firebase/firestore",FD="@firebase/ai",HD="@firebase/firestore-compat",qD="firebase",$D="12.6.0";const e0="[DEFAULT]",GD={[Zy]:"fire-core",[vD]:"fire-core-compat",[wD]:"fire-analytics",[bD]:"fire-analytics-compat",[ED]:"fire-app-check",[xD]:"fire-app-check-compat",[TD]:"fire-auth",[SD]:"fire-auth-compat",[AD]:"fire-rtdb",[ID]:"fire-data-connect",[RD]:"fire-rtdb-compat",[CD]:"fire-fn",[ND]:"fire-fn-compat",[kD]:"fire-iid",[DD]:"fire-iid-compat",[OD]:"fire-fcm",[MD]:"fire-fcm-compat",[PD]:"fire-perf",[jD]:"fire-perf-compat",[VD]:"fire-rc",[LD]:"fire-rc-compat",[UD]:"fire-gcs",[zD]:"fire-gcs-compat",[BD]:"fire-fst",[HD]:"fire-fst-compat",[FD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};const Wf=new Map,KD=new Map,t0=new Map;function ux(r,e){try{r.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function To(r){const e=r.name;if(t0.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;t0.set(e,r);for(const t of Wf.values())ux(t,r);for(const t of KD.values())ux(t,r);return!0}function jm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function yr(r){return r==null?!1:r.settings!==void 0}const YD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pa=new Sh("app","Firebase",YD);class QD{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pa.create("app-deleted",{appName:this._name})}}const Ho=$D;function AS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:e0,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw pa.create("bad-app-name",{appName:String(s)});if(t||(t=yS()),!t)throw pa.create("no-options");const o=Wf.get(s);if(o){if(ys(t,o.options)&&ys(n,o.config))return o;throw pa.create("duplicate-app",{appName:s})}const c=new tD(s);for(const d of t0.values())c.addComponent(d);const u=new QD(t,n,c);return Wf.set(s,u),u}function H0(r=e0){const e=Wf.get(r);if(!e&&r===e0&&yS())return AS();if(!e)throw pa.create("no-app",{appName:r});return e}function Di(r,e,t){let n=GD[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}To(new wa(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const WD="firebase-heartbeat-database",XD=1,nh="firebase-heartbeat-store";let Cy=null;function IS(){return Cy||(Cy=mD(WD,XD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(nh)}catch(t){console.warn(t)}}}}).catch(r=>{throw pa.create("idb-open",{originalErrorMessage:r.message})})),Cy}async function JD(r){try{const t=(await IS()).transaction(nh),n=await t.objectStore(nh).get(RS(r));return await t.done,n}catch(e){if(e instanceof Bi)_s.warn(e.message);else{const t=pa.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function hx(r,e){try{const n=(await IS()).transaction(nh,"readwrite");await n.objectStore(nh).put(e,RS(r)),await n.done}catch(t){if(t instanceof Bi)_s.warn(t.message);else{const n=pa.create("idb-set",{originalErrorMessage:t?.message});_s.warn(n.message)}}}function RS(r){return`${r.name}!${r.options.appId}`}const ZD=1024,eO=30;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rO(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=dx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>eO){const s=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=dx(),{heartbeatsToSend:t,unsentEntries:n}=nO(this._heartbeatsCache.heartbeats),s=Qf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _s.warn(e),""}}}function dx(){return new Date().toISOString().substring(0,10)}function nO(r,e=ZD){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),fx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),fx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?q4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function fx(r){return Qf(JSON.stringify({version:2,heartbeats:r})).length}function iO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function sO(r){To(new wa("platform-logger",e=>new yD(e),"PRIVATE")),To(new wa("heartbeat",e=>new tO(e),"PRIVATE")),Di(Zy,cx,r),Di(Zy,cx,"esm2020"),Di("fire-js","")}sO("");var aO="firebase",oO="12.6.0";Di(aO,oO,"app");function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lO=CS,NS=new Sh("auth","Firebase",CS());const Xf=new B0("@firebase/auth");function cO(r,...e){Xf.logLevel<=et.WARN&&Xf.warn(`Auth (${Ho}): ${r}`,...e)}function If(r,...e){Xf.logLevel<=et.ERROR&&Xf.error(`Auth (${Ho}): ${r}`,...e)}function ri(r,...e){throw q0(r,...e)}function Oi(r,...e){return q0(r,...e)}function kS(r,e,t){const n={...lO(),[e]:t};return new Sh("auth","Firebase",n).create(e,{appName:r.name})}function gs(r){return kS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q0(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return NS.create(r,...e)}function je(r,e,...t){if(!r)throw q0(e,...t)}function hs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw If(e),new Error(e)}function vs(r,e){r||hs(e)}function n0(){return typeof self<"u"&&self.location?.href||""}function uO(){return mx()==="http:"||mx()==="https:"}function mx(){return typeof self<"u"&&self.location?.protocol||null}function hO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uO()||B4()||"connection"in navigator)?navigator.onLine:!0}function dO(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=U4()||F4()}get(){return hO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $0(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class DS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gO=new Ih(3e4,6e4);function Es(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,n,s={}){return OS(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const u=Ah({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:d,...o};return z4()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(f.credentials="include"),DS.fetch()(await MS(r,r.config.apiHost,t,u),f)})}async function OS(r,e,t){r._canInitEmulator=!1;const n={...fO,...e};try{const s=new yO(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw mf(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw mf(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw mf(r,"user-disabled",c);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw kS(r,g,f);ri(r,g)}}catch(s){if(s instanceof Bi)throw s;ri(r,"network-request-failed",{message:String(s)})}}async function Rh(r,e,t,n,s={}){const o=await Fi(r,e,t,n,s);return"mfaPendingCredential"in o&&ri(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function MS(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?$0(r.config,s):`${r.config.apiScheme}://${s}`;return mO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function pO(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Oi(this.auth,"network-request-failed")),gO.get())})}}function mf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Oi(r,e,n);return s.customData._tokenResponse=t,s}function gx(r){return r!==void 0&&r.enterprise!==void 0}class _O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vO(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Es(r,e))}async function bO(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function Jf(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function qu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wO(r,e=!1){const t=Jt(r),n=await t.getIdToken(e),s=G0(n);je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:qu(Ny(s.auth_time)),issuedAtTime:qu(Ny(s.iat)),expirationTime:qu(Ny(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ny(r){return Number(r)*1e3}function G0(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return If("JWT malformed, contained fewer than 3 sections"),null;try{const s=fS(t);return s?JSON.parse(s):(If("Failed to decode base64 JWT payload"),null)}catch(s){return If("Caught error parsing JWT payload as JSON",s?.toString()),null}}function px(r){const e=G0(r);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rc(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Bi&&xO(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function xO({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class EO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class r0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zf(r){const e=r.auth,t=await r.getIdToken(),n=await rc(r,Jf(e,{idToken:t}));je(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?PS(s.providerUserInfo):[],c=SO(r.providerData,o),u=r.isAnonymous,d=!(r.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new r0(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function TO(r){const e=Jt(r);await Zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SO(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function PS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function AO(r,e){const t=await OS(r,{},async()=>{const n=Ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await MS(r,s,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:n};return r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(d.credentials="include"),DS.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IO(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Es(r,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):px(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=px(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await AO(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Xl;return n&&(je(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return hs("not implemented")}}function ia(r,e){je(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new EO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new r0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rc(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wO(this,e)}reload(){return TO(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Zf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await rc(this,bO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:T,stsTokenManager:k}=t;je(y&&k,e,"internal-error");const O=Xl.fromJSON(this.name,k);je(typeof y=="string",e,"internal-error"),ia(n,e.name),ia(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof w=="boolean",e,"internal-error"),ia(o,e.name),ia(c,e.name),ia(u,e.name),ia(d,e.name),ia(f,e.name),ia(g,e.name);const V=new ti({uid:y,auth:e,email:s,emailVerified:v,displayName:n,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:O,createdAt:f,lastLoginAt:g});return T&&Array.isArray(T)&&(V.providerData=T.map(B=>({...B}))),d&&(V._redirectEventId=d),V}static async _fromIdTokenResponse(e,t,n=!1){const s=new Xl;s.updateFromServerResponse(t);const o=new ti({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Zf(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?PS(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Xl;u.updateFromIdToken(n);const d=new ti({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new r0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}const yx=new Map;function ds(r){vs(r instanceof Function,"Expected a class definition");let e=yx.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,yx.set(r,e),e)}class jS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jS.type="NONE";const _x=jS;function Rf(r,e,t){return`firebase:${r}:${e}:${t}`}class Jl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Rf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jf(this.auth,{idToken:e}).catch(()=>{});return t?ti._fromGetAccountInfoResponse(this.auth,t,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Jl(ds(_x),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ds(_x);const c=Rf(n,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Jf(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ti._fromGetAccountInfoResponse(e,v,g)}else y=ti._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Jl(o,e,n):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Jl(o,e,n))}}function vx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FS(e))return"Blackberry";if(HS(e))return"Webos";if(LS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function VS(r=mn()){return/firefox\//i.test(r)}function LS(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(r=mn()){return/crios\//i.test(r)}function zS(r=mn()){return/iemobile/i.test(r)}function BS(r=mn()){return/android/i.test(r)}function FS(r=mn()){return/blackberry/i.test(r)}function HS(r=mn()){return/webos/i.test(r)}function K0(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RO(r=mn()){return K0(r)&&!!window.navigator?.standalone}function CO(){return H4()&&document.documentMode===10}function qS(r=mn()){return K0(r)||BS(r)||HS(r)||FS(r)||/windows phone/i.test(r)||zS(r)}function $S(r,e=[]){let t;switch(r){case"Browser":t=vx(mn());break;case"Worker":t=`${vx(mn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ho}/${n}`}class NO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function kO(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Es(r,e))}const DO=6;class OO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class MO{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new NO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jf(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(gs(this));const t=e?Jt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kO(this),t=new OO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await IO(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qo(r){return Jt(r)}class bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q4(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(r){Vm=r}function GS(r){return Vm.loadJS(r)}function jO(){return Vm.recaptchaEnterpriseScript}function VO(){return Vm.gapiScript}function LO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class UO{constructor(){this.enterprise=new zO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BO="recaptcha-enterprise",KS="NO_RECAPTCHA";class FO{constructor(e){this.type=BO,this.auth=qo(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{vO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new _O(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,c,u){const d=window.grecaptcha;gx(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(KS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UO().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(u=>{if(!t&&gx(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=jO();d.length!==0&&(d+=u),GS(d).then(()=>{s(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function wx(r,e,t,n=!1,s=!1){const o=new FO(r);let c;if(s)c=KS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function i0(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await wx(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wx(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function HO(r,e){const t=jm(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ys(o,e??{}))return s;ri(s,"already-initialized")}return t.initialize({options:e})}function qO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ds);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function $O(r,e,t){const n=qo(r);je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=YS(e),{host:c,port:u}=GO(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){je(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),je(ys(f,n.config.emulator)&&ys(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,Fo(c)?(U0(`${o}//${c}${d}`),z0("Auth",!0)):KO()}function YS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GO(r){const e=YS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:xx(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:xx(c)}}}function xx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function KO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Y0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function YO(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function QO(r,e){return Rh(r,"POST","/v1/accounts:signInWithPassword",Es(r,e))}async function WO(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",Es(r,e))}async function XO(r,e){return WO(r,e)}async function JO(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",Es(r,e))}async function ZO(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",Es(r,e))}class rh extends Y0{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,t,"signInWithPassword",QO);case"emailLink":return JO(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(e,n,"signUpPassword",YO);case"emailLink":return ZO(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(r,e){return Rh(r,"POST","/v1/accounts:signInWithIdp",Es(r,e))}const e5="http://localhost";class So extends Y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new So(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:e5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ah(t)}return e}}function t5(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n5(r){const e=Mu(Pu(r)).link,t=e?Mu(Pu(e)).deep_link_id:null,n=Mu(Pu(r)).deep_link_id;return(n?Mu(Pu(n)).link:null)||n||t||e||r}class Q0{constructor(e){const t=Mu(Pu(e)),n=t.apiKey??null,s=t.oobCode??null,o=t5(t.mode??null);je(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=n5(e);try{return new Q0(t)}catch{return null}}}class bc{constructor(){this.providerId=bc.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Q0.parseLink(t);return je(n,"argument-error"),rh._fromEmailAndCode(e,n.code,n.tenantId)}}bc.PROVIDER_ID="password";bc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ch extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ua extends Ch{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";class us extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return So._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return us.credential(t,n)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";class ha extends Ch{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";class da extends Ch{constructor(){super("twitter.com")}static credential(e,t){return So._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return da.credential(t,n)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";async function r5(r,e){return Rh(r,"POST","/v1/accounts:signUp",Es(r,e))}class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await ti._fromIdTokenResponse(e,n,s),c=Ex(n);return new Ao({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Ex(n);return new Ao({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Ex(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class em extends Bi{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,em.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new em(e,t,n,s)}}function WS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?em._fromErrorAndOperation(r,o,e,n):o})}async function i5(r,e,t=!1){const n=await rc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ao._forOperation(r,"link",n)}async function s5(r,e,t=!1){const{auth:n}=r;if(yr(n.app))return Promise.reject(gs(n));const s="reauthenticate";try{const o=await rc(r,WS(n,s,e,r),t);je(o.idToken,n,"internal-error");const c=G0(o.idToken);je(c,n,"internal-error");const{sub:u}=c;return je(r.uid===u,n,"user-mismatch"),Ao._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(n,"user-mismatch"),o}}async function XS(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n="signIn",s=await WS(r,n,e),o=await Ao._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function a5(r,e){return XS(qo(r),e)}async function JS(r){const e=qo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function o5(r,e,t){if(yr(r.app))return Promise.reject(gs(r));const n=qo(r),c=await i0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r5).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&JS(r),d}),u=await Ao._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function Tx(r,e,t){return yr(r.app)?Promise.reject(gs(r)):a5(Jt(r),bc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JS(r),n})}async function ZS(r,e){const t=Jt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await XO(t.auth,s);o!==r.email&&await r.reload()}async function l5(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function e2(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Jt(r),o={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await rc(n,l5(n.auth,o));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const u=n.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=n.displayName,u.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function c5(r,e,t,n){return Jt(r).onIdTokenChanged(e,t,n)}function u5(r,e,t){return Jt(r).beforeAuthStateChanged(e,t)}function h5(r,e,t,n){return Jt(r).onAuthStateChanged(e,t,n)}const tm="__sak";class t2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tm,"1"),this.storage.removeItem(tm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const d5=1e3,f5=10;class n2 extends t2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);CO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,f5):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},d5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}n2.type="LOCAL";const m5=n2;class r2 extends t2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r2.type="SESSION";const i2=r2;function g5(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Lm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const u=Array.from(c).map(async f=>f(t.origin,o)),d=await g5(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];function W0(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class p5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=W0("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Mi(){return window}function y5(r){Mi().location.href=r}function s2(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function _5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v5(){return navigator?.serviceWorker?.controller||null}function b5(){return s2()?self:null}const a2="firebaseLocalStorageDb",w5=1,nm="firebaseLocalStorage",o2="fbase_key";class Nh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Um(r,e){return r.transaction([nm],e?"readwrite":"readonly").objectStore(nm)}function x5(){const r=indexedDB.deleteDatabase(a2);return new Nh(r).toPromise()}function s0(){const r=indexedDB.open(a2,w5);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(nm,{keyPath:o2})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(nm)?e(n):(n.close(),await x5(),e(await s0()))})})}async function Sx(r,e,t){const n=Um(r,!0).put({[o2]:e,value:t});return new Nh(n).toPromise()}async function E5(r,e){const t=Um(r,!1).get(e),n=await new Nh(t).toPromise();return n===void 0?null:n.value}function Ax(r,e){const t=Um(r,!0).delete(e);return new Nh(t).toPromise()}const T5=800,S5=3;class l2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>S5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(b5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _5(),!this.activeServiceWorker)return;this.sender=new p5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await Sx(e,tm,"1"),await Ax(e,tm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>E5(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ax(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Um(s,!1).getAll();return new Nh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),T5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l2.type="LOCAL";const A5=l2;new Ih(3e4,6e4);function I5(r,e){return e?ds(e):(je(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class X0 extends Y0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R5(r){return XS(r.auth,new X0(r),r.bypassAuthState)}function C5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),s5(t,new X0(r),r.bypassAuthState)}async function N5(r){const{auth:e,user:t}=r;return je(t,e,"internal-error"),i5(t,new X0(r),r.bypassAuthState)}class c2{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R5;case"linkViaPopup":case"linkViaRedirect":return N5;case"reauthViaPopup":case"reauthViaRedirect":return C5;default:ri(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const k5=new Ih(2e3,1e4);class Ql extends c2{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Ql.currentPopupAction&&Ql.currentPopupAction.cancel(),Ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=W0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k5.get())};e()}}Ql.currentPopupAction=null;const D5="pendingRedirect",Cf=new Map;class O5 extends c2{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Cf.get(this.auth._key());if(!e){try{const n=await M5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Cf.set(this.auth._key(),e)}return this.bypassAuthState||Cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M5(r,e){const t=V5(e),n=j5(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function P5(r,e){Cf.set(r._key(),e)}function j5(r){return ds(r._redirectPersistence)}function V5(r){return Rf(D5,r.config.apiKey,r.name)}async function L5(r,e,t=!1){if(yr(r.app))return Promise.reject(gs(r));const n=qo(r),s=I5(n,e),c=await new O5(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const U5=600*1e3;class z5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!u2(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Oi(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ix(e))}saveEventToCache(e){this.cachedEventUids.add(Ix(e)),this.lastProcessedEventTime=Date.now()}}function Ix(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function u2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function B5(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u2(r);default:return!1}}async function F5(r,e={}){return Fi(r,"GET","/v1/projects",e)}const H5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q5=/^https?/;async function $5(r){if(r.config.emulator)return;const{authorizedDomains:e}=await F5(r);for(const t of e)try{if(G5(t))return}catch{}ri(r,"unauthorized-domain")}function G5(r){const e=n0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!q5.test(t))return!1;if(H5.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const K5=new Ih(3e4,6e4);function Rx(){const r=Mi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Y5(r){return new Promise((e,t)=>{function n(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),t(Oi(r,"network-request-failed"))},timeout:K5.get()})}if(Mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mi().gapi?.load)n();else{const s=LO("iframefcb");return Mi()[s]=()=>{gapi.load?n():t(Oi(r,"network-request-failed"))},GS(`${VO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function Q5(r){return Nf=Nf||Y5(r),Nf}const W5=new Ih(5e3,15e3),X5="__/auth/iframe",J5="emulator/auth/iframe",Z5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tM(r){const e=r.config;je(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?$0(e,J5):`https://${r.config.authDomain}/${X5}`,n={apiKey:e.apiKey,appName:r.name,v:Ho},s=eM.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Ah(n).slice(1)}`}async function nM(r){const e=await Q5(r),t=Mi().gapi;return je(t,r,"internal-error"),e.open({where:document.body,url:tM(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z5,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=Oi(r,"network-request-failed"),u=Mi().setTimeout(()=>{o(c)},W5.get());function d(){Mi().clearTimeout(u),s(n)}n.ping(d).then(d,()=>{o(c)})}))}const rM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iM=500,sM=600,aM="_blank",oM="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lM(r,e,t,n=iM,s=sM){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const d={...rM,width:n.toString(),height:s.toString(),top:o,left:c},f=mn().toLowerCase();t&&(u=US(f)?aM:t),VS(f)&&(e=e||oM,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,T])=>`${v}${w}=${T},`,"");if(RO(f)&&u!=="_self")return cM(e||"",u),new Cx(null);const y=window.open(e||"",u,g);je(y,r,"popup-blocked");try{y.focus()}catch{}return new Cx(y)}function cM(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const uM="__/auth/handler",hM="emulator/auth/handler",dM=encodeURIComponent("fac");async function Nx(r,e,t,n,s,o){je(r.config.authDomain,r,"auth-domain-config-required"),je(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Ho,eventId:s};if(e instanceof QS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",Y4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Ch){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await r._getAppCheckToken(),f=d?`#${dM}=${encodeURIComponent(d)}`:"";return`${fM(r)}?${Ah(u).slice(1)}${f}`}function fM({config:r}){return r.emulator?$0(r,hM):`https://${r.authDomain}/${uM}`}const ky="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i2,this._completeRedirectFn=L5,this._overrideRedirectResult=P5}async _openPopup(e,t,n,s){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Nx(e,t,n,n0(),s);return lM(e,o,W0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Nx(e,t,n,n0(),s);return y5(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(vs(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await nM(e),n=new z5(e);return t.register("authEvent",s=>(je(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ky,{type:ky},s=>{const o=s?.[0]?.[ky];o!==void 0&&t(!!o),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qS()||LS()||K0()}}const gM=mM;var kx="@firebase/auth",Dx="1.11.1";class pM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yM(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _M(r){To(new wa("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(r)},f=new MO(n,s,o,d);return qO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),To(new wa("auth-internal",e=>{const t=qo(e.getProvider("auth").getImmediate());return(n=>new pM(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(kx,Dx,yM(r)),Di(kx,Dx,"esm2020")}const vM=300,bM=_S("authIdTokenMaxAge")||vM;let Ox=null;const wM=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>bM)return;const s=t?.token;Ox!==s&&(Ox=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xM(r=H0()){const e=jm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HO(r,{popupRedirectResolver:gM,persistence:[A5,m5,i2]}),n=_S("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=wM(o.toString());u5(t,c,()=>c(t.currentUser)),c5(t,u=>c(u))}}const s=gS("auth");return s&&$O(t,`http://${s}`),t}function EM(){return document.getElementsByTagName("head")?.[0]??document}PO({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=Oi("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",EM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_M("Browser");var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ya,h2;(function(){var r;function e(M,x){function S(){}S.prototype=x.prototype,M.F=x.prototype,M.prototype=new S,M.prototype.constructor=M,M.D=function(I,N,j){for(var C=Array(arguments.length-2),G=2;G<arguments.length;G++)C[G-2]=arguments[G];return x.prototype[N].apply(I,C)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,x,S){S||(S=0);const I=Array(16);if(typeof x=="string")for(var N=0;N<16;++N)I[N]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(N=0;N<16;++N)I[N]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=M.g[0],S=M.g[1],N=M.g[2];let j=M.g[3],C;C=x+(j^S&(N^j))+I[0]+3614090360&4294967295,x=S+(C<<7&4294967295|C>>>25),C=j+(N^x&(S^N))+I[1]+3905402710&4294967295,j=x+(C<<12&4294967295|C>>>20),C=N+(S^j&(x^S))+I[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=S+(x^N&(j^x))+I[3]+3250441966&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(j^S&(N^j))+I[4]+4118548399&4294967295,x=S+(C<<7&4294967295|C>>>25),C=j+(N^x&(S^N))+I[5]+1200080426&4294967295,j=x+(C<<12&4294967295|C>>>20),C=N+(S^j&(x^S))+I[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=S+(x^N&(j^x))+I[7]+4249261313&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(j^S&(N^j))+I[8]+1770035416&4294967295,x=S+(C<<7&4294967295|C>>>25),C=j+(N^x&(S^N))+I[9]+2336552879&4294967295,j=x+(C<<12&4294967295|C>>>20),C=N+(S^j&(x^S))+I[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=S+(x^N&(j^x))+I[11]+2304563134&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(j^S&(N^j))+I[12]+1804603682&4294967295,x=S+(C<<7&4294967295|C>>>25),C=j+(N^x&(S^N))+I[13]+4254626195&4294967295,j=x+(C<<12&4294967295|C>>>20),C=N+(S^j&(x^S))+I[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=S+(x^N&(j^x))+I[15]+1236535329&4294967295,S=N+(C<<22&4294967295|C>>>10),C=x+(N^j&(S^N))+I[1]+4129170786&4294967295,x=S+(C<<5&4294967295|C>>>27),C=j+(S^N&(x^S))+I[6]+3225465664&4294967295,j=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(j^x))+I[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=S+(j^x&(N^j))+I[0]+3921069994&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^j&(S^N))+I[5]+3593408605&4294967295,x=S+(C<<5&4294967295|C>>>27),C=j+(S^N&(x^S))+I[10]+38016083&4294967295,j=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(j^x))+I[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=S+(j^x&(N^j))+I[4]+3889429448&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^j&(S^N))+I[9]+568446438&4294967295,x=S+(C<<5&4294967295|C>>>27),C=j+(S^N&(x^S))+I[14]+3275163606&4294967295,j=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(j^x))+I[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=S+(j^x&(N^j))+I[8]+1163531501&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(N^j&(S^N))+I[13]+2850285829&4294967295,x=S+(C<<5&4294967295|C>>>27),C=j+(S^N&(x^S))+I[2]+4243563512&4294967295,j=x+(C<<9&4294967295|C>>>23),C=N+(x^S&(j^x))+I[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=S+(j^x&(N^j))+I[12]+2368359562&4294967295,S=N+(C<<20&4294967295|C>>>12),C=x+(S^N^j)+I[5]+4294588738&4294967295,x=S+(C<<4&4294967295|C>>>28),C=j+(x^S^N)+I[8]+2272392833&4294967295,j=x+(C<<11&4294967295|C>>>21),C=N+(j^x^S)+I[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=S+(N^j^x)+I[14]+4259657740&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^j)+I[1]+2763975236&4294967295,x=S+(C<<4&4294967295|C>>>28),C=j+(x^S^N)+I[4]+1272893353&4294967295,j=x+(C<<11&4294967295|C>>>21),C=N+(j^x^S)+I[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=S+(N^j^x)+I[10]+3200236656&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^j)+I[13]+681279174&4294967295,x=S+(C<<4&4294967295|C>>>28),C=j+(x^S^N)+I[0]+3936430074&4294967295,j=x+(C<<11&4294967295|C>>>21),C=N+(j^x^S)+I[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=S+(N^j^x)+I[6]+76029189&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(S^N^j)+I[9]+3654602809&4294967295,x=S+(C<<4&4294967295|C>>>28),C=j+(x^S^N)+I[12]+3873151461&4294967295,j=x+(C<<11&4294967295|C>>>21),C=N+(j^x^S)+I[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=S+(N^j^x)+I[2]+3299628645&4294967295,S=N+(C<<23&4294967295|C>>>9),C=x+(N^(S|~j))+I[0]+4096336452&4294967295,x=S+(C<<6&4294967295|C>>>26),C=j+(S^(x|~N))+I[7]+1126891415&4294967295,j=x+(C<<10&4294967295|C>>>22),C=N+(x^(j|~S))+I[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=S+(j^(N|~x))+I[5]+4237533241&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~j))+I[12]+1700485571&4294967295,x=S+(C<<6&4294967295|C>>>26),C=j+(S^(x|~N))+I[3]+2399980690&4294967295,j=x+(C<<10&4294967295|C>>>22),C=N+(x^(j|~S))+I[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=S+(j^(N|~x))+I[1]+2240044497&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~j))+I[8]+1873313359&4294967295,x=S+(C<<6&4294967295|C>>>26),C=j+(S^(x|~N))+I[15]+4264355552&4294967295,j=x+(C<<10&4294967295|C>>>22),C=N+(x^(j|~S))+I[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=S+(j^(N|~x))+I[13]+1309151649&4294967295,S=N+(C<<21&4294967295|C>>>11),C=x+(N^(S|~j))+I[4]+4149444226&4294967295,x=S+(C<<6&4294967295|C>>>26),C=j+(S^(x|~N))+I[11]+3174756917&4294967295,j=x+(C<<10&4294967295|C>>>22),C=N+(x^(j|~S))+I[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=S+(j^(N|~x))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+j&4294967295}n.prototype.v=function(M,x){x===void 0&&(x=M.length);const S=x-this.blockSize,I=this.C;let N=this.h,j=0;for(;j<x;){if(N==0)for(;j<=S;)s(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<x;)if(I[N++]=M.charCodeAt(j++),N==this.blockSize){s(this,I),N=0;break}}else for(;j<x;)if(I[N++]=M[j++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=x},n.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;x=this.o*8;for(var S=M.length-8;S<M.length;++S)M[S]=x&255,x/=256;for(this.v(M),M=Array(16),x=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)M[x++]=this.g[S]>>>I&255;return M};function o(M,x){var S=u;return Object.prototype.hasOwnProperty.call(S,M)?S[M]:S[M]=x(M)}function c(M,x){this.h=x;const S=[];let I=!0;for(let N=M.length-1;N>=0;N--){const j=M[N]|0;I&&j==x||(S[N]=j,I=!1)}this.g=S}var u={};function d(M){return-128<=M&&M<128?o(M,function(x){return new c([x|0],x<0?-1:0)}):new c([M|0],M<0?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(M<0)return O(f(-M));const x=[];let S=1;for(let I=0;M>=S;I++)x[I]=M/S|0,S*=4294967296;return new c(x,0)}function g(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return O(g(M.substring(1),x));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=f(Math.pow(x,8));let I=y;for(let j=0;j<M.length;j+=8){var N=Math.min(8,M.length-j);const C=parseInt(M.substring(j,j+N),x);N<8?(N=f(Math.pow(x,N)),I=I.j(N).add(f(C))):(I=I.j(S),I=I.add(f(C)))}return I}var y=d(0),v=d(1),w=d(16777216);r=c.prototype,r.m=function(){if(k(this))return-O(this).m();let M=0,x=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);M+=(I>=0?I:4294967296+I)*x,x*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(T(this))return"0";if(k(this))return"-"+O(this).toString(M);const x=f(Math.pow(M,6));var S=this;let I="";for(;;){const N=q(S,x).g;S=V(S,N.j(x));let j=((S.g.length>0?S.g[0]:S.h)>>>0).toString(M);if(S=N,T(S))return j+I;for(;j.length<6;)j="0"+j;I=j+I}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function T(M){if(M.h!=0)return!1;for(let x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function k(M){return M.h==-1}r.l=function(M){return M=V(this,M),k(M)?-1:T(M)?0:1};function O(M){const x=M.g.length,S=[];for(let I=0;I<x;I++)S[I]=~M.g[I];return new c(S,~M.h).add(v)}r.abs=function(){return k(this)?O(this):this},r.add=function(M){const x=Math.max(this.g.length,M.g.length),S=[];let I=0;for(let N=0;N<=x;N++){let j=I+(this.i(N)&65535)+(M.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);I=C>>>16,j&=65535,C&=65535,S[N]=C<<16|j}return new c(S,S[S.length-1]&-2147483648?-1:0)};function V(M,x){return M.add(O(x))}r.j=function(M){if(T(this)||T(M))return y;if(k(this))return k(M)?O(this).j(O(M)):O(O(this).j(M));if(k(M))return O(this.j(O(M)));if(this.l(w)<0&&M.l(w)<0)return f(this.m()*M.m());const x=this.g.length+M.g.length,S=[];for(var I=0;I<2*x;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<M.g.length;N++){const j=this.i(I)>>>16,C=this.i(I)&65535,G=M.i(N)>>>16,te=M.i(N)&65535;S[2*I+2*N]+=C*te,B(S,2*I+2*N),S[2*I+2*N+1]+=j*te,B(S,2*I+2*N+1),S[2*I+2*N+1]+=C*G,B(S,2*I+2*N+1),S[2*I+2*N+2]+=j*G,B(S,2*I+2*N+2)}for(M=0;M<x;M++)S[M]=S[2*M+1]<<16|S[2*M];for(M=x;M<2*x;M++)S[M]=0;return new c(S,0)};function B(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function F(M,x){this.g=M,this.h=x}function q(M,x){if(T(x))throw Error("division by zero");if(T(M))return new F(y,y);if(k(M))return x=q(O(M),x),new F(O(x.g),O(x.h));if(k(x))return x=q(M,O(x)),new F(O(x.g),x.h);if(M.g.length>30){if(k(M)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var S=v,I=x;I.l(M)<=0;)S=K(S),I=K(I);var N=z(S,1),j=z(I,1);for(I=z(I,2),S=z(S,2);!T(I);){var C=j.add(I);C.l(M)<=0&&(N=N.add(S),j=C),I=z(I,1),S=z(S,1)}return x=V(M,N.j(x)),new F(N,x)}for(N=y;M.l(x)>=0;){for(S=Math.max(1,Math.floor(M.m()/x.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),j=f(S),C=j.j(x);k(C)||C.l(M)>0;)S-=I,j=f(S),C=j.j(x);T(j)&&(j=v),N=N.add(j),M=V(M,C)}return new F(N,M)}r.B=function(M){return q(this,M).h},r.and=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)&M.i(I);return new c(S,this.h&M.h)},r.or=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)|M.i(I);return new c(S,this.h|M.h)},r.xor=function(M){const x=Math.max(this.g.length,M.g.length),S=[];for(let I=0;I<x;I++)S[I]=this.i(I)^M.i(I);return new c(S,this.h^M.h)};function K(M){const x=M.g.length+1,S=[];for(let I=0;I<x;I++)S[I]=M.i(I)<<1|M.i(I-1)>>>31;return new c(S,M.h)}function z(M,x){const S=x>>5;x%=32;const I=M.g.length-S,N=[];for(let j=0;j<I;j++)N[j]=x>0?M.i(j+S)>>>x|M.i(j+S+1)<<32-x:M.i(j+S);return new c(N,M.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,h2=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ya=c}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var d2,ju,f2,kf,a0,m2,g2,p2;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var E=0;E<m.length;++E){var R=m[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var n=t(this);function s(m,E){if(E)e:{var R=n;m=m.split(".");for(var U=0;U<m.length-1;U++){var ae=m[U];if(!(ae in R))break e;R=R[ae]}m=m[m.length-1],U=R[m],E=E(U),E!=U&&E!=null&&e(R,m,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(E){var R=[],U;for(U in E)Object.prototype.hasOwnProperty.call(E,U)&&R.push([U,E[U]]);return R}});var o=o||{},c=this||self;function u(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function d(m,E,R){return m.call.apply(m.bind,arguments)}function f(m,E,R){return f=d,f.apply(null,arguments)}function g(m,E){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function y(m,E){function R(){}R.prototype=E.prototype,m.Z=E.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(U,ae,ue){for(var be=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)be[Fe-2]=arguments[Fe];return E.prototype[ae].apply(U,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const R=Array(E);for(let U=0;U<E;U++)R[U]=m[U];return R}return[]}function T(m,E){for(let U=1;U<arguments.length;U++){const ae=arguments[U];var R=typeof ae;if(R=R!="object"?R:ae?Array.isArray(ae)?"array":R:"null",R=="array"||R=="object"&&typeof ae.length=="number"){R=m.length||0;const ue=ae.length||0;m.length=R+ue;for(let be=0;be<ue;be++)m[R+be]=ae[be]}else m.push(ae)}}class k{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(m){c.setTimeout(()=>{throw m},0)}function V(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,R){const U=F.get();U.set(E,R),this.h?this.h.next=U:this.g=U,this.h=U}}var F=new k(()=>new q,m=>m.reset());class q{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let K,z=!1,M=new B,x=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(S)}};function S(){for(var m;m=V();){try{m.h.call(m.g)}catch(R){O(R)}var E=F;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}z=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};c.addEventListener("test",R,E),c.removeEventListener("test",R,E)}catch{}return m})();function C(m){return/^[\s\xa0]*$/.test(m)}function G(m,E){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}y(G,N),G.prototype.init=function(m,E){const R=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(R=="mouseover"?E=m.fromElement:R=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),P=0;function D(m,E,R,U,ae){this.listener=m,this.proxy=null,this.src=E,this.type=R,this.capture=!!U,this.ha=ae,this.key=++P,this.da=this.fa=!1}function Z(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function W(m,E,R){for(const U in m)E.call(R,m[U],U,m)}function ee(m,E){for(const R in m)E.call(void 0,m[R],R,m)}function H(m){const E={};for(const R in m)E[R]=m[R];return E}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,E){let R,U;for(let ae=1;ae<arguments.length;ae++){U=arguments[ae];for(R in U)m[R]=U[R];for(let ue=0;ue<Y.length;ue++)R=Y[ue],Object.prototype.hasOwnProperty.call(U,R)&&(m[R]=U[R])}}function J(m){this.src=m,this.g={},this.h=0}J.prototype.add=function(m,E,R,U,ae){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const be=ye(m,E,U,ae);return be>-1?(E=m[be],R||(E.fa=!1)):(E=new D(E,this.src,ue,!!U,ae),E.fa=R,m.push(E)),E};function re(m,E){const R=E.type;if(R in m.g){var U=m.g[R],ae=Array.prototype.indexOf.call(U,E,void 0),ue;(ue=ae>=0)&&Array.prototype.splice.call(U,ae,1),ue&&(Z(E),m.g[R].length==0&&(delete m.g[R],m.h--))}}function ye(m,E,R,U){for(let ae=0;ae<m.length;++ae){const ue=m[ae];if(!ue.da&&ue.listener==E&&ue.capture==!!R&&ue.ha==U)return ae}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ne={};function Ie(m,E,R,U,ae){if(Array.isArray(E)){for(let ue=0;ue<E.length;ue++)Ie(m,E[ue],R,U,ae);return null}return R=ot(R),m&&m[te]?m.J(E,R,u(U)?!!U.capture:!1,ae):qe(m,E,R,!1,U,ae)}function qe(m,E,R,U,ae,ue){if(!E)throw Error("Invalid event type");const be=u(ae)?!!ae.capture:!!ae;let Fe=Ct(m);if(Fe||(m[Te]=Fe=new J(m)),R=Fe.add(E,R,U,be,ue),R.proxy)return R;if(U=Qe(),R.proxy=U,U.src=m,U.listener=R,m.addEventListener)j||(ae=be),ae===void 0&&(ae=!1),m.addEventListener(E.toString(),U,ae);else if(m.attachEvent)m.attachEvent(lt(E.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Qe(){function m(R){return E.call(m.src,m.listener,R)}const E=ct;return m}function nt(m,E,R,U,ae){if(Array.isArray(E))for(var ue=0;ue<E.length;ue++)nt(m,E[ue],R,U,ae);else U=u(U)?!!U.capture:!!U,R=ot(R),m&&m[te]?(m=m.i,ue=String(E).toString(),ue in m.g&&(E=m.g[ue],R=ye(E,R,U,ae),R>-1&&(Z(E[R]),Array.prototype.splice.call(E,R,1),E.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ct(m))&&(E=m.g[E.toString()],m=-1,E&&(m=ye(E,R,U,ae)),(R=m>-1?E[m]:null)&&Bt(R))}function Bt(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[te])re(E.i,m);else{var R=m.type,U=m.proxy;E.removeEventListener?E.removeEventListener(R,U,m.capture):E.detachEvent?E.detachEvent(lt(R),U):E.addListener&&E.removeListener&&E.removeListener(U),(R=Ct(E))?(re(R,m),R.h==0&&(R.src=null,E[Te]=null)):Z(m)}}}function lt(m){return m in Ne?Ne[m]:Ne[m]="on"+m}function ct(m,E){if(m.da)m=!0;else{E=new G(E,this);const R=m.listener,U=m.ha||m.src;m.fa&&Bt(m),m=R.call(U,E)}return m}function Ct(m){return m=m[Te],m instanceof J?m:null}var at="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(m){return typeof m=="function"?m:(m[at]||(m[at]=function(E){return m.handleEvent(E)}),m[at])}function $e(){I.call(this),this.i=new J(this),this.M=this,this.G=null}y($e,I),$e.prototype[te]=!0,$e.prototype.removeEventListener=function(m,E,R,U){nt(this,m,E,R,U)};function pe(m,E){var R,U=m.G;if(U)for(R=[];U;U=U.G)R.push(U);if(m=m.M,U=E.type||E,typeof E=="string")E=new N(E,m);else if(E instanceof N)E.target=E.target||m;else{var ae=E;E=new N(U,m),ie(E,ae)}ae=!0;let ue,be;if(R)for(be=R.length-1;be>=0;be--)ue=E.g=R[be],ae=Ee(ue,U,!0,E)&&ae;if(ue=E.g=m,ae=Ee(ue,U,!0,E)&&ae,ae=Ee(ue,U,!1,E)&&ae,R)for(be=0;be<R.length;be++)ue=E.g=R[be],ae=Ee(ue,U,!1,E)&&ae}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const R=m.g[E];for(let U=0;U<R.length;U++)Z(R[U]);delete m.g[E],m.h--}}this.G=null},$e.prototype.J=function(m,E,R,U){return this.i.add(String(m),E,!1,R,U)},$e.prototype.K=function(m,E,R,U){return this.i.add(String(m),E,!0,R,U)};function Ee(m,E,R,U){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let ae=!0;for(let ue=0;ue<E.length;++ue){const be=E[ue];if(be&&!be.da&&be.capture==R){const Fe=be.listener,Yt=be.ha||be.src;be.fa&&re(m.i,be),ae=Fe.call(Yt,U)!==!1&&ae}}return ae&&!U.defaultPrevented}function Be(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function Me(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Me(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class xe extends I{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(m){I.call(this),this.h=m,this.g={}}y(rt,I);var pt=[];function Bn(m){W(m.g,function(E,R){this.g.hasOwnProperty(R)&&Bt(E)},m),m.g={}}rt.prototype.N=function(){rt.Z.N.call(this),Bn(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=c.JSON.stringify,Fn=c.JSON.parse,Ft=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function kn(){}function wn(){}var Kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tt(){N.call(this,"d")}y(Tt,N);function Zt(){N.call(this,"c")}y(Zt,N);var kt={},Yo=null;function oi(){return Yo=Yo||new $e}kt.Ia="serverreachability";function Na(m){N.call(this,kt.Ia,m)}y(Na,N);function Dn(m){const E=oi();pe(E,new Na(E))}kt.STAT_EVENT="statevent";function qi(m,E){N.call(this,kt.STAT_EVENT,m),this.stat=E}y(qi,N);function yt(m){const E=oi();pe(E,new qi(E,m))}kt.Ja="timingevent";function hn(m,E){N.call(this,kt.Ja,m),this.size=E}y(hn,N);function xn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function En(){this.g=!0}En.prototype.ua=function(){this.g=!1};function Qo(m,E,R,U,ae,ue){m.info(function(){if(m.g)if(ue){var be="",Fe=ue.split("&");for(let ft=0;ft<Fe.length;ft++){var Yt=Fe[ft].split("=");if(Yt.length>1){const Pt=Yt[0];Yt=Yt[1];const Ir=Pt.split("_");be=Ir.length>=2&&Ir[1]=="type"?be+(Pt+"="+Yt+"&"):be+(Pt+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+U+") [attempt "+ae+"]: "+E+`
`+R+`
`+be})}function Er(m,E,R,U,ae,ue,be){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ae+"]: "+E+`
`+R+`
`+ue+" "+be})}function pn(m,E,R,U){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+_g(m,R)+(U?" "+U:"")})}function ka(m,E){m.info(function(){return"TIMEOUT: "+E})}En.prototype.info=function(){};function _g(m,E){if(!m.g)return E;if(!E)return null;try{const ue=JSON.parse(E);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var R=ue[m];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var ae=U[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let be=1;be<U.length;be++)U[be]=""}}}}return dt(ue)}catch{return E}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ic;function Oa(){}y(Oa,kn),Oa.prototype.g=function(){return new XMLHttpRequest},Ic=new Oa;function $i(m){return encodeURIComponent(String(m))}function Hh(m){var E=1;m=m.split(":");const R=[];for(;E>0&&m.length;)R.push(m.shift()),E--;return m.length&&R.push(m.join(":")),R}function Br(m,E,R,U){this.j=m,this.i=E,this.l=R,this.S=U||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fr}function Fr(){this.i=null,this.g="",this.h=!1}var en={},yn={};function li(m,E,R){m.M=1,m.A=Ma(nn(E)),m.u=R,m.R=!0,Wo(m,null)}function Wo(m,E){m.F=Date.now(),ci(m),m.B=nn(m.A);var R=m.B,U=m.S;Array.isArray(U)||(U=[String(U)]),el(R.i,"t",U),m.C=0,R=m.j.L,m.h=new Fr,m.g=id(m.j,R?E:null,!m.u),m.P>0&&(m.O=new xe(f(m.Y,m,m.g),m.P)),E=m.V,R=m.g,U=m.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(pt[0]=ae.toString()),ae=pt);for(let ue=0;ue<ae.length;ue++){const be=Ie(R,ae[ue],U||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Dn(),Qo(m.i,m.v,m.B,m.l,m.S,m.u)}Br.prototype.ba=function(m){m=m.target;const E=this.O;E&&$r(m)==3?E.j():this.Y(m)},Br.prototype.Y=function(m){try{if(m==this.g)e:{const Fe=$r(this.g),Yt=this.g.ya(),ft=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||ft<=0?Dn(3):Dn(2)),ui(this);var E=this.g.ca();this.X=E;var R=vg(this);if(this.o=E==200,Er(this.i,this.v,this.B,this.l,this.S,Fe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ae=this.g;if((U=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(U)){var ue=U;break t}}ue=null}if(m=ue)pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,m);else{this.o=!1,this.m=3,yt(12),or(this),Tr(this);break e}}if(this.R){m=!0;let Pt;for(;!this.K&&this.C<R.length;)if(Pt=$h(this,R),Pt==yn){Fe==4&&(this.m=4,yt(14),m=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,yt(15),pn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else pn(this.i,this.l,Pt,null),hi(this,Pt);if(qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||R.length!=0||this.h.h||(this.m=1,yt(16),m=!1),this.o=this.o&&m,!m)pn(this.i,this.l,R,"[Invalid Chunked Response]"),or(this),Tr(this);else if(R.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),Fc(be),be.P=!0,yt(11))}}else pn(this.i,this.l,R,null),hi(this,R);Fe==4&&or(this),this.o&&!this.K&&(Fe==4?ed(this.j,this):(this.o=!1,ci(this)))}else Ki(this.g),E==400&&R.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),or(this),Tr(this)}}}catch{}finally{}};function vg(m){if(!qh(m))return m.g.la();const E=Tn(m.g);if(E==="")return"";let R="";const U=E.length,ae=$r(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return or(m),Tr(m),"";m.h.i=new c.TextDecoder}for(let ue=0;ue<U;ue++)m.h.h=!0,R+=m.h.i.decode(E[ue],{stream:!(ae&&ue==U-1)});return E.length=0,m.h.g+=R,m.C=0,m.h.g}function qh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function $h(m,E){var R=m.C,U=E.indexOf(`
`,R);return U==-1?yn:(R=Number(E.substring(R,U)),isNaN(R)?en:(U+=1,U+R>E.length?yn:(E=E.slice(U,U+R),m.C=U+R,E)))}Br.prototype.cancel=function(){this.K=!0,or(this)};function ci(m){m.T=Date.now()+m.H,Xo(m,m.H)}function Xo(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=xn(f(m.aa,m),E)}function ui(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Br.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ka(this.i,this.B),this.M!=2&&(Dn(),yt(17)),or(this),this.m=2,Tr(this)):Xo(this,this.T-m)};function Tr(m){m.j.I==0||m.K||ed(m.j,m)}function or(m){ui(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Bn(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function hi(m,E){try{var R=m.j;if(R.I!=0&&(R.g==m||fi(R.h,m))){if(!m.L&&fi(R.h,m)&&R.I==3){try{var U=R.Ba.g.parse(E)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ae=U;if(ae[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)sl(R),Ms(R);else break e;Ba(R),yt(18)}}else R.xa=ae[1],0<R.xa-R.K&&ae[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=xn(f(R.Va,R),6e3));di(R.h)<=1&&R.ta&&(R.ta=void 0)}else vi(R,11)}else if((m.L||R.g==m)&&sl(R),!C(E))for(ae=R.Ba.g.parse(E),E=0;E<ae.length;E++){let ft=ae[E];const Pt=ft[0];if(!(Pt<=R.K))if(R.K=Pt,ft=ft[1],R.I==2)if(ft[0]=="c"){R.M=ft[1],R.ba=ft[2];const Ir=ft[3];Ir!=null&&(R.ka=Ir,R.j.info("VER="+R.ka));const bi=ft[4];bi!=null&&(R.za=bi,R.j.info("SVER="+R.za));const Gr=ft[5];Gr!=null&&typeof Gr=="number"&&Gr>0&&(U=1.5*Gr,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Kr=m.g;if(Kr){const Fa=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var ue=U.h;ue.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Nc(ue,ue.h),ue.h=null))}if(U.G){const al=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(U.wa=al,_t(U.J,U.G,al))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var be=m;if(U.na=rd(U,U.L?U.ba:null,U.W),be.L){kc(U.h,be);var Fe=be,Yt=U.O;Yt&&(Fe.H=Yt),Fe.D&&(ui(Fe),ci(Fe)),U.g=be}else Jh(U);R.i.length>0&&_i(R)}else ft[0]!="stop"&&ft[0]!="close"||vi(R,7);else R.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?vi(R,7):zc(R):ft[0]!="noop"&&R.l&&R.l.qa(ft),R.A=0)}}Dn(4)}catch{}}var tn=class{constructor(m,E){this.g=m,this.map=E}};function Rc(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function di(m){return m.h?1:m.g?m.g.size:0}function fi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Nc(m,E){m.g?m.g.add(E):m.h=E}function kc(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Rc.prototype.cancel=function(){if(this.i=Dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Dc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const R of m.g.values())E=E.concat(R.G);return E}return w(m.i)}var Gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jo(m,E){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const U=m[R].indexOf("=");let ae,ue=null;U>=0?(ae=m[R].substring(0,U),ue=m[R].substring(U+1)):ae=m[R],E(ae,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function lr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof lr?(this.l=m.l,_n(this,m.j),this.o=m.o,this.g=m.g,Is(this,m.u),this.h=m.h,Oc(this,Wh(m.i)),this.m=m.m):m&&(E=String(m).match(Gh))?(this.l=!1,_n(this,E[1]||"",!0),this.o=mi(E[2]||""),this.g=mi(E[3]||"",!0),Is(this,E[4]),this.h=mi(E[5]||"",!0),Oc(this,E[6]||"",!0),this.m=mi(E[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}lr.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Pa(E,Zo,!0),":");var R=this.g;return(R||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Pa(E,Zo,!0),"@"),m.push($i(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Pa(R,R.charAt(0)=="/"?Mc:Kh,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Pa(R,Yh)),m.join("")},lr.prototype.resolve=function(m){const E=nn(this);let R=!!m.j;R?_n(E,m.j):R=!!m.o,R?E.o=m.o:R=!!m.g,R?E.g=m.g:R=m.u!=null;var U=m.h;if(R)Is(E,m.u);else if(R=!!m.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ae=E.h.lastIndexOf("/");ae!=-1&&(U=E.h.slice(0,ae+1)+U)}if(ae=U,ae==".."||ae==".")U="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){U=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ue=[];for(let be=0;be<ae.length;){const Fe=ae[be++];Fe=="."?U&&be==ae.length&&ue.push(""):Fe==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),U&&be==ae.length&&ue.push("")):(ue.push(Fe),U=!0)}U=ue.join("/")}else U=ae}return R?E.h=U:R=m.i.toString()!=="",R?Oc(E,Wh(m.i)):R=!!m.m,R&&(E.m=m.m),E};function nn(m){return new lr(m)}function _n(m,E,R){m.j=R?mi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Is(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Oc(m,E,R){E instanceof Cs?(m.i=E,tl(m.i,m.l)):(R||(E=Pa(E,Rs)),m.i=new Cs(E,m.l))}function _t(m,E,R){m.i.set(E,R)}function Ma(m){return _t(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function mi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pa(m,E,R){return typeof m=="string"?(m=encodeURI(m).replace(E,Wn),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Wn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Zo=/[#\/\?@]/g,Kh=/[#\?:]/g,Mc=/[#\?]/g,Rs=/[#\?@]/g,Yh=/#/g;function Cs(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Jo(m.i,function(E,R){m.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}r=Cs.prototype,r.add=function(m,E){Xn(this),this.i=null,m=Ns(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(E),this.h+=1,this};function Qh(m,E){Xn(m),E=Ns(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Pc(m,E){return Xn(m),E=Ns(m,E),m.g.has(E)}r.forEach=function(m,E){Xn(this),this.g.forEach(function(R,U){R.forEach(function(ae){m.call(E,ae,U,this)},this)},this)};function jc(m,E){Xn(m);let R=[];if(typeof E=="string")Pc(m,E)&&(R=R.concat(m.g.get(Ns(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)R=R.concat(m[E]);return R}r.set=function(m,E){return Xn(this),this.i=null,m=Ns(this,m),Pc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},r.get=function(m,E){return m?(m=jc(this,m),m.length>0?String(m[0]):E):E};function el(m,E,R){Qh(m,E),R.length>0&&(m.i=null,m.g.set(Ns(m,E),w(R)),m.h+=R.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let U=0;U<E.length;U++){var R=E[U];const ae=$i(R);R=jc(this,R);for(let ue=0;ue<R.length;ue++){let be=ae;R[ue]!==""&&(be+="="+$i(R[ue])),m.push(be)}}return this.i=m.join("&")};function Wh(m){const E=new Cs;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Ns(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function tl(m,E){E&&!m.j&&(Xn(m),m.i=null,m.g.forEach(function(R,U){const ae=U.toLowerCase();U!=ae&&(Qh(this,U),el(this,ae,R))},m)),m.j=E}function Hr(m,E){const R=new En;if(c.Image){const U=new Image;U.onload=g(Sr,R,"TestLoadImage: loaded",!0,E,U),U.onerror=g(Sr,R,"TestLoadImage: error",!1,E,U),U.onabort=g(Sr,R,"TestLoadImage: abort",!1,E,U),U.ontimeout=g(Sr,R,"TestLoadImage: timeout",!1,E,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else E(!1)}function Vc(m,E){const R=new En,U=new AbortController,ae=setTimeout(()=>{U.abort(),Sr(R,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:U.signal}).then(ue=>{clearTimeout(ae),ue.ok?Sr(R,"TestPingServer: ok",!0,E):Sr(R,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ae),Sr(R,"TestPingServer: error",!1,E)})}function Sr(m,E,R,U,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),U(R)}catch{}}function ks(){this.g=new Ft}function gi(m){this.i=m.Sb||null,this.h=m.ab||!1}y(gi,kn),gi.prototype.g=function(){return new ja(this.i,this.h)};function ja(m,E){$e.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(ja,$e),r=ja.prototype,r.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,qr(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function nl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ds(this):qr(this),this.readyState==3&&nl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,Ds(this))},r.Na=function(m){this.g&&(this.response=m,Ds(this))},r.ga=function(){this.g&&Ds(this)};function Ds(m){m.readyState=4,m.l=null,m.j=null,m.B=null,qr(m)}r.setRequestHeader=function(m,E){this.A.append(m,E)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var R=E.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=E.next();return m.join(`\r
`)};function qr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ar(m){let E="";return W(m,function(R,U){E+=U,E+=":",E+=R,E+=`\r
`}),E}function Va(m,E,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=Ar(R),typeof m=="string"?R!=null&&$i(R):_t(m,E,R))}function St(m){$e.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(St,$e);var pi=/^https?$/i,Lc=["POST","PUT"];r=St.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,E,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ic.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(ue){La(this,ue);return}if(m=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ae in U)R.set(ae,U[ae]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ue of U.keys())R.set(ue,U.get(ue));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),ae=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Lc,E,void 0)>=0)||U||ae||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of R)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){La(this,ue)}};function La(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Uc(m),Gi(m)}function Uc(m){m.A||(m.A=!0,pe(m,"complete"),pe(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,pe(this,"complete"),pe(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),St.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},r.Xa=function(){Ua(this)};function Ua(m){if(m.h&&typeof o<"u"){if(m.v&&$r(m)==4)setTimeout(m.Ca.bind(m),0);else if(pe(m,"readystatechange"),$r(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var U;if(U=ue===0){let be=String(m.D).match(Gh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),U=!pi.test(be?be.toLowerCase():"")}R=U}if(R)pe(m,"complete"),pe(m,"success");else{m.o=6;try{var ae=$r(m)>2?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.ca()+"]",Uc(m)}}finally{Gi(m)}}}}function Gi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,E||pe(m,"ready");try{R.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $r(m){return m.g?m.g.readyState:0}r.ca=function(){try{return $r(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Fn(E)}};function Tn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(m){const E={};m=(m.g&&$r(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(C(m[U]))continue;var R=Hh(m[U]);const ae=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=E[ae]||[];E[ae]=ue,ue.push(R)}ee(E,function(U){return U.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(m,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||E}function Os(m){this.za=0,this.i=[],this.j=new En,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,m),this.Za=yi("retryDelaySeedMs",1e4,m),this.Ta=yi("forwardChannelMaxRetries",2,m),this.va=yi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Rc(m&&m.concurrentRequestLimit),this.Ba=new ks,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Os.prototype,r.ka=8,r.I=1,r.connect=function(m,E,R,U){yt(0),this.W=m,this.H=E||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=rd(this,null,this.W),_i(this)};function zc(m){if(rl(m),m.I==3){var E=m.V++,R=nn(m.J);if(_t(R,"SID",m.M),_t(R,"RID",E),_t(R,"TYPE","terminate"),za(m,R),E=new Br(m,m.j,E),E.M=2,E.A=Ma(nn(R)),R=!1,c.navigator&&c.navigator.sendBeacon)try{R=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!R&&c.Image&&(new Image().src=E.A,R=!0),R||(E.g=id(E.j,null),E.g.ea(E.A)),E.F=Date.now(),ci(E)}nd(m)}function Ms(m){m.g&&(Fc(m),m.g.cancel(),m.g=null)}function rl(m){Ms(m),m.v&&(c.clearTimeout(m.v),m.v=null),sl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function _i(m){if(!Cc(m.h)&&!m.m){m.m=!0;var E=m.Ea;K||x(),z||(K(),z=!0),M.add(E,m),m.D=0}}function il(m,E){return di(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=xn(f(m.Ea,m,E),td(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ae=new Br(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=H(ue),ie(ue,this.U)):ue=this.U),this.u!==null||this.R||(ae.J=ue,ue=null),this.S)e:{for(var E=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,E>4096){E=R;break e}if(E===4096||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=Xh(this,ae,E),R=nn(this.J),_t(R,"RID",m),_t(R,"CVER",22),this.G&&_t(R,"X-HTTP-Session-Id",this.G),za(this,R),ue&&(this.R?E="headers="+$i(Ar(ue))+"&"+E:this.u&&Va(R,this.u,ue)),Nc(this.h,ae),this.Ra&&_t(R,"TYPE","init"),this.S?(_t(R,"$req",E),_t(R,"SID","null"),ae.U=!0,li(ae,R,null)):li(ae,R,E),this.I=2}}else this.I==3&&(m?Bc(this,m):this.i.length==0||Cc(this.h)||Bc(this))};function Bc(m,E){var R;E?R=E.l:R=m.V++;const U=nn(m.J);_t(U,"SID",m.M),_t(U,"RID",R),_t(U,"AID",m.K),za(m,U),m.u&&m.o&&Va(U,m.u,m.o),R=new Br(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Xh(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Nc(m.h,R),li(R,U,E)}function za(m,E){m.H&&W(m.H,function(R,U){_t(E,U,R)}),m.l&&W({},function(R,U){_t(E,U,R)})}function Xh(m,E,R){R=Math.min(m.i.length,R);const U=m.l?f(m.l.Ka,m.l,m):null;e:{var ae=m.i;let Fe=-1;for(;;){const Yt=["count="+R];Fe==-1?R>0?(Fe=ae[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let ft=!0;for(let Pt=0;Pt<R;Pt++){var ue=ae[Pt].g;const Ir=ae[Pt].map;if(ue-=Fe,ue<0)Fe=Math.max(0,ae[Pt].g-100),ft=!1;else try{ue="req"+ue+"_"||"";try{var be=Ir instanceof Map?Ir:Object.entries(Ir);for(const[bi,Gr]of be){let Kr=Gr;u(Gr)&&(Kr=dt(Gr)),Yt.push(ue+bi+"="+encodeURIComponent(Kr))}}catch(bi){throw Yt.push(ue+"type="+encodeURIComponent("_badmap")),bi}}catch{U&&U(Ir)}}if(ft){be=Yt.join("&");break e}}be=void 0}return m=m.i.splice(0,R),E.G=m,be}function Jh(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;K||x(),z||(K(),z=!0),M.add(E,m),m.A=0}}function Ba(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=xn(f(m.Da,m),td(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,Zh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=xn(f(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Ms(this),Zh(this))};function Fc(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Zh(m){m.g=new Br(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=nn(m.na);_t(E,"RID","rpc"),_t(E,"SID",m.M),_t(E,"AID",m.K),_t(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&_t(E,"TO",m.ia),_t(E,"TYPE","xmlhttp"),za(m,E),m.u&&m.o&&Va(E,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=Ma(nn(E)),R.u=null,R.R=!0,Wo(R,m)}r.Va=function(){this.C!=null&&(this.C=null,Ms(this),Ba(this),yt(19))};function sl(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ed(m,E){var R=null;if(m.g==E){sl(m),Fc(m),m.g=null;var U=2}else if(fi(m.h,E))R=E.G,kc(m.h,E),U=1;else return;if(m.I!=0){if(E.o)if(U==1){R=E.u?E.u.length:0,E=Date.now()-E.F;var ae=m.D;U=oi(),pe(U,new hn(U,R)),_i(m)}else Jh(m);else if(ae=E.m,ae==3||ae==0&&E.X>0||!(U==1&&il(m,E)||U==2&&Ba(m)))switch(R&&R.length>0&&(E=m.h,E.i=E.i.concat(R)),ae){case 1:vi(m,5);break;case 4:vi(m,10);break;case 3:vi(m,6);break;default:vi(m,2)}}}function td(m,E){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*E}function vi(m,E){if(m.j.info("Error code "+E),E==2){var R=f(m.bb,m),U=m.Ua;const ae=!U;U=new lr(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||_n(U,"https"),Ma(U),ae?Hr(U.toString(),R):Vc(U.toString(),R)}else yt(2);m.I=0,m.l&&m.l.pa(E),nd(m),rl(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function nd(m){if(m.I=0,m.ja=[],m.l){const E=Dc(m.h);(E.length!=0||m.i.length!=0)&&(T(m.ja,E),T(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function rd(m,E,R){var U=R instanceof lr?nn(R):new lr(R);if(U.g!="")E&&(U.g=E+"."+U.g),Is(U,U.u);else{var ae=c.location;U=ae.protocol,E=E?E+"."+ae.hostname:ae.hostname,ae=+ae.port;const ue=new lr(null);U&&_n(ue,U),E&&(ue.g=E),ae&&Is(ue,ae),R&&(ue.h=R),U=ue}return R=m.G,E=m.wa,R&&E&&_t(U,R,E),_t(U,"VER",m.ka),za(m,U),U}function id(m,E,R){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new St(new gi({ab:R})):new St(m.ma),E.Fa(m.L),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sd(){}r=sd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ps(){}Ps.prototype.g=function(m,E){return new Hn(m,E)};function Hn(m,E){$e.call(this),this.g=new Os(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!C(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!C(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Yi(this)}y(Hn,$e),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){zc(this.g)},Hn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=dt(m),m=R);E.i.push(new tn(E.Ya++,m)),E.I==3&&_i(E)},Hn.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,Hn.Z.N.call(this)};function ad(m){Tt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const R in E){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}y(ad,Tt);function od(){Zt.call(this),this.status=1}y(od,Zt);function Yi(m){this.g=m}y(Yi,sd),Yi.prototype.ra=function(){pe(this.g,"a")},Yi.prototype.qa=function(m){pe(this.g,new ad(m))},Yi.prototype.pa=function(m){pe(this.g,new od)},Yi.prototype.oa=function(){pe(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,p2=function(){return new Ps},g2=function(){return oi()},m2=kt,a0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,kf=Da,Ac.COMPLETE="complete",f2=Ac,wn.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ju=wn,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,d2=St}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});const Px="@firebase/firestore",jx="4.9.2";let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let wc="12.3.0";const Io=new B0("@firebase/firestore");function ql(){return Io.logLevel}function _e(r,...e){if(Io.logLevel<=et.DEBUG){const t=e.map(J0);Io.debug(`Firestore (${wc}): ${r}`,...t)}}function Gn(r,...e){if(Io.logLevel<=et.ERROR){const t=e.map(J0);Io.error(`Firestore (${wc}): ${r}`,...t)}}function Ro(r,...e){if(Io.logLevel<=et.WARN){const t=e.map(J0);Io.warn(`Firestore (${wc}): ${r}`,...t)}}function J0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,y2(r,n,t)}function y2(r,e,t){let n=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Gn(n),new Error(n)}function Ce(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||y2(e,s,n)}function Ue(r,e){return r}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class SM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AM{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let n=this.i;const s=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let o=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Pi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Pi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new _2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class IM{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RM{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new IM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const n=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Vx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function NM(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=NM(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Le(r,e){return r<e?-1:r>e?1:0}function o0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return Dy(s)===Dy(o)?Le(s,o):Dy(s)?1:-1}return Le(r.length,e.length)}const kM=55296,DM=57343;function Dy(r){const e=r.charCodeAt(0);return e>=kM&&e<=DM}function ic(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}function v2(r){return r+"\0"}const Lx="__name__";class Si{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=Si.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const n=Si.isNumericId(e),s=Si.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?Si.extractNumericId(e).compare(Si.extractNumericId(t)):o0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ya.fromString(e.substring(4,e.length-2))}}class gt extends Si{construct(e,t,n){return new gt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const OM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Si{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return OM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lx}static keyField(){return new Ut([Lx])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(n+=u,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(gt.fromString(e))}static fromName(e){return new we(gt.fromString(e).popFirst(5))}static empty(){return new we(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new gt(e.slice()))}}function b2(r,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function MM(r,e,t,n){if(e===!0&&n===!0)throw new ve(de.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ux(r){if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zx(r){if(we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function w2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zm(r);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function cn(r,e){const t={typeString:r};return e&&(t.value=e),t}function kh(r,e){if(!w2(r))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Bx=-62135596800,Fx=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fx);return new wt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bx)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fx}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kh(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:cn("string",wt._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new wt(0,0))}static max(){return new De(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ih=-1;class rm{constructor(e,t,n,s){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=s}}function l0(r){return r.fields.find((e=>e.kind===2))}function ao(r){return r.fields.filter((e=>e.kind!==2))}rm.UNKNOWN_ID=-1;class Df{constructor(e,t){this.fieldPath=e,this.kind=t}}class sh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sh(0,br.min())}}function PM(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=De.fromTimestamp(n===1e9?new wt(t+1,0):new wt(t,n));return new br(s,we.empty(),e)}function x2(r){return new br(r.readTime,r.key,ih)}class br{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new br(De.min(),we.empty(),ih)}static max(){return new br(De.max(),we.empty(),ih)}}function e_(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}const E2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $o(r){if(r.code!==de.FAILED_PRECONDITION||r.message!==E2)throw r;_e("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,n)=>{t(e)}))}static reject(e){return new se(((t,n)=>{n(e)}))}static waitFor(e){return new se(((t,n)=>{let s=0,o=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++o,c&&o===s&&t()}),(d=>n(d)))})),c=!0,o===s&&t()}))}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next((s=>s?se.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new se(((n,s)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((g=>{c[f]=g,++u,u===o&&n(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new se(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}const pr="SimpleDb";class Bm{static open(e,t,n,s){try{return new Bm(t,e.transaction(s,n))}catch(o){throw new $u(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new $u(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const s=t_(n.target.error);this.S.reject(new $u(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(_e(pr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new VM(t)}}class _a{static delete(e){return _e(pr,"Removing database:",e),lo(mS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ES())return!1;if(_a.F())return!0;const e=mn(),t=_a.M(e),n=0<t&&t<10,s=S2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,_a.M(mn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(_e(pr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{n(new $u(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?n(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new $u(e,c))},s.onupgradeneeded=o=>{_e(pr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{_e(pr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Bm.open(this.db,e,o?"readonly":"readwrite",n),d=s(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),se.reject(f)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,f=d.name!=="FirebaseError"&&c<3;if(_e(pr,"Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function S2(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class jM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lo(this.U.delete())}}class $u extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ia(r){return r.name==="IndexedDbTransactionError"}class VM{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(_e(pr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(_e(pr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lo(n)}add(e){return _e(pr,"ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next((t=>(t===void 0&&(t=null),_e(pr,"GET",this.store.name,e,t),t)))}delete(e){return _e(pr,"DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return _e(pr,"COUNT",this.store.name),lo(this.store.count())}J(e,t){const n=this.options(e,t),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(n.range);return new se(((c,u)=>{o.onerror=d=>{u(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(n),c=[];return this.H(o,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new se(((s,o)=>{n.onerror=c=>{o(c.target.error)},n.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){_e(pr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const s=this.cursor(n);return this.H(s,((o,c,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const s=this.cursor(n);return this.H(s,t)}te(e){const t=this.cursor({});return new se(((n,s)=>{t.onerror=o=>{const c=t_(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():n()})):n()}}))}H(e,t){const n=[];return new se(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new jM(u),f=t(u.primaryKey,u.value,d);if(f instanceof se){const g=f.catch((y=>(d.done(),se.reject(y))));n.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>se.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(r){return new se(((e,t)=>{r.onsuccess=n=>{const s=n.target.result;e(s)},r.onerror=n=>{const s=t_(n.target.error);t(s)}}))}let Hx=!1;function t_(r){const e=_a.M(mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hx||(Hx=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Gu="IndexBackfiller";class LM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){_e(Gu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();_e(Gu,`Documents written: ${t}`)}catch(t){Ia(t)?_e(Gu,"Ignoring IndexedDB error during index backfill: ",t):await $o(t)}await this.re(6e4)}))}}class UM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let s=t,o=!0;return se.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!n.has(c))return _e(Gu,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,n.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,n).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((u=>(_e(Gu,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((s,o)=>{const c=x2(o);e_(c,n)>0&&(n=c)})),new br(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vr.ce=-1;const po=-1;function Fm(r){return r==null}function ah(r){return r===0&&1/r==-1/0}function zM(r){return typeof r=="number"&&Number.isInteger(r)&&!ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const im="";function Un(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=qx(e)),e=BM(r.get(t),e);return qx(e)}function BM(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case im:t+="";break;default:t+=o}}return t}function qx(r){return r+im+""}function Ni(r){const e=r.length;if(Ce(e>=2,64408,{path:r}),e===2)return Ce(r.charAt(0)===im&&r.charAt(1)==="",56145,{path:r}),gt.emptyPath();const t=e-2,n=[];let s="";for(let o=0;o<e;){const c=r.indexOf(im,o);switch((c<0||c>t)&&Ae(50515,{path:r}),r.charAt(c+1)){case"":const u=r.substring(o,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),n.push(d);break;case"":s+=r.substring(o,c),s+="\0";break;case"":s+=r.substring(o,c+1);break;default:Ae(61167,{path:r})}o=c+2}return new gt(n)}const oo="remoteDocuments",Dh="owner",Vl="owner",oh="mutationQueues",FM="userId",Zr="mutations",$x="batchId",mo="userMutationsIndex",Gx=["userId","batchId"];function Of(r,e){return[r,Un(e)]}function A2(r,e,t){return[r,Un(e),t]}const HM={},sc="documentMutations",sm="remoteDocumentsV14",qM=["prefixPath","collectionGroup","readTime","documentId"],Mf="documentKeyIndex",$M=["prefixPath","collectionGroup","documentId"],I2="collectionGroupIndex",GM=["collectionGroup","readTime","prefixPath","documentId"],lh="remoteDocumentGlobal",c0="remoteDocumentGlobalKey",ac="targets",R2="queryTargetsIndex",KM=["canonicalId","targetId"],oc="targetDocuments",YM=["targetId","path"],n_="documentTargetsIndex",QM=["path","targetId"],am="targetGlobalKey",yo="targetGlobal",ch="collectionParents",WM=["collectionId","parent"],lc="clientMetadata",XM="clientId",Hm="bundles",JM="bundleId",qm="namedQueries",ZM="name",r_="indexConfiguration",e3="indexId",u0="collectionGroupIndex",t3="collectionGroup",Ku="indexState",n3=["indexId","uid"],C2="sequenceNumberIndex",r3=["uid","sequenceNumber"],Yu="indexEntries",i3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N2="documentKeyIndex",s3=["indexId","uid","orderedDocumentKey"],$m="documentOverlays",a3=["userId","collectionPath","documentId"],h0="collectionPathOverlayIndex",o3=["userId","collectionPath","largestBatchId"],k2="collectionGroupOverlayIndex",l3=["userId","collectionGroup","largestBatchId"],i_="globals",c3="name",D2=[oh,Zr,sc,oo,ac,Dh,yo,oc,lc,lh,ch,Hm,qm],u3=[...D2,$m],O2=[oh,Zr,sc,sm,ac,Dh,yo,oc,lc,lh,ch,Hm,qm,$m],M2=O2,s_=[...M2,r_,Ku,Yu],h3=s_,P2=[...s_,i_],d3=P2;class d0 extends T2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ue(r);return _a.O(t.le,e)}function Kx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ra(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function j2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Lt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??Nn.RED,this.left=s??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new Nn(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Et{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ll(r){return r.hasNext()?r.getNext():void 0}class ir{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new ir([])}unionWith(e){let t=new Et(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class V2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new V2("Invalid base64 string: "+o):o}})(e);return new un(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const f3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=f3.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Vt(r.seconds),nanos:Vt(r.nanos)}}function Vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ws(r){return typeof r=="string"?un.fromBase64String(r):un.fromUint8Array(r)}const L2="server_timestamp",U2="__type__",z2="__previous_value__",B2="__local_write_time__";function a_(r){return(r?.mapValue?.fields||{})[U2]?.stringValue===L2}function Gm(r){const e=r.mapValue.fields[z2];return a_(e)?Gm(e):e}function uh(r){const e=bs(r.mapValue.fields[B2].timestampValue);return new wt(e.seconds,e.nanos)}class m3{constructor(e,t,n,s,o,c,u,d,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const om="(default)";class Co{constructor(e,t){this.projectId=e,this.database=t||om}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===om}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}const o_="__type__",F2="__max__",ma={mapValue:{fields:{__type__:{stringValue:F2}}}},l_="__vector__",cc="value",Pf={nullValue:"NULL_VALUE"};function xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?a_(r)?4:H2(r)?9007199254740991:Km(r)?10:11:Ae(28295,{value:r})}function Li(r,e){if(r===e)return!0;const t=xa(r);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return uh(r).isEqual(uh(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=bs(s.timestampValue),u=bs(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ws(s.bytesValue).isEqual(ws(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return Vt(s.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Vt(s.integerValue)===Vt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Vt(s.doubleValue),u=Vt(o.doubleValue);return c===u?ah(c)===ah(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return ic(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Kx(c)!==Kx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Li(c[d],u[d])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function hh(r,e){return(r.values||[]).find((t=>Li(t,e)))!==void 0}function Ea(r,e){if(r===e)return 0;const t=xa(r),n=xa(e);if(t!==n)return Le(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Vt(o.integerValue||o.doubleValue),d=Vt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(r,e);case 3:return Qx(r.timestampValue,e.timestampValue);case 4:return Qx(uh(r),uh(e));case 5:return o0(r.stringValue,e.stringValue);case 6:return(function(o,c){const u=ws(o),d=ws(c);return u.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=Le(Vt(o.latitude),Vt(c.latitude));return u!==0?u:Le(Vt(o.longitude),Vt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Wx(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},d=c.fields||{},f=u[cc]?.arrayValue,g=d[cc]?.arrayValue,y=Le(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Wx(f,g)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===ma.mapValue&&c===ma.mapValue)return 0;if(o===ma.mapValue)return 1;if(c===ma.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const v=o0(d[y],g[y]);if(v!==0)return v;const w=Ea(u[d[y]],f[g[y]]);if(w!==0)return w}return Le(d.length,g.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Qx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=bs(r),n=bs(e),s=Le(t.seconds,n.seconds);return s!==0?s:Le(t.nanos,n.nanos)}function Wx(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Ea(t[s],n[s]);if(o)return o}return Le(t.length,n.length)}function uc(r){return f0(r)}function f0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=bs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ws(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=f0(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${f0(t.fields[c])}`;return s+"}"})(r.mapValue):Ae(61005,{value:r})}function jf(r){switch(xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gm(r);return e?16+jf(e):16;case 5:return 2*r.stringValue.length;case 6:return ws(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+jf(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Ra(n.fields,((o,c)=>{s+=o.length+jf(c)})),s})(r.mapValue);default:throw Ae(13486,{value:r})}}function dh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function m0(r){return!!r&&"integerValue"in r}function fh(r){return!!r&&"arrayValue"in r}function Xx(r){return!!r&&"nullValue"in r}function Jx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vf(r){return!!r&&"mapValue"in r}function Km(r){return(r?.mapValue?.fields||{})[o_]?.stringValue===l_}function Qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ra(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Qu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(r.arrayValue.values[t]);return e}return{...r}}function H2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===F2}const q2={mapValue:{fields:{[o_]:{stringValue:l_},[cc]:{arrayValue:{}}}}};function g3(r){return"nullValue"in r?Pf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?dh(Co.empty(),we.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Km(r)?q2:{mapValue:{}}:Ae(35942,{value:r})}function p3(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?dh(Co.empty(),we.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?q2:"mapValue"in r?Km(r)?{mapValue:{}}:ma:Ae(61959,{value:r})}function Zx(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function eE(r,e){const t=Ea(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=Ut.emptyPath(),n={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,n,s),n={},s=[],t=u.popLast()}c?n[u.lastSegment()]=Qu(c):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Ra(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new jn(Qu(this.value))}}function $2(r){const e=[];return Ra(r.fields,((t,n)=>{const s=new Ut([t]);if(Vf(n)){const o=$2(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new ir(e)}class $t{constructor(e,t,n,s,o,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new $t(e,0,De.min(),De.min(),De.min(),jn.empty(),0)}static newFoundDocument(e,t,n,s){return new $t(e,1,t,De.min(),n,s,0)}static newNoDocument(e,t){return new $t(e,2,t,De.min(),De.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,De.min(),De.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hc{constructor(e,t){this.position=e,this.inclusive=t}}function tE(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=we.comparator(we.fromName(c.referenceValue),t.key):n=Ea(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function nE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function y3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class G2{}class tt extends G2{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _3(e,t,n):t==="array-contains"?new w3(e,n):t==="in"?new J2(e,n):t==="not-in"?new x3(e,n):t==="array-contains-any"?new E3(e,n):new tt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new v3(e,n):new b3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends G2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xt(e,t)}matches(e){return dc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dc(r){return r.op==="and"}function g0(r){return r.op==="or"}function c_(r){return K2(r)&&dc(r)}function K2(r){for(const e of r.filters)if(e instanceof xt)return!1;return!0}function p0(r){if(r instanceof tt)return r.field.canonicalString()+r.op.toString()+uc(r.value);if(c_(r))return r.filters.map((e=>p0(e))).join(",");{const e=r.filters.map((t=>p0(t))).join(",");return`${r.op}(${e})`}}function Y2(r,e){return r instanceof tt?(function(n,s){return s instanceof tt&&n.op===s.op&&n.field.isEqual(s.field)&&Li(n.value,s.value)})(r,e):r instanceof xt?(function(n,s){return s instanceof xt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,u)=>o&&Y2(c,s.filters[u])),!0):!1})(r,e):void Ae(19439)}function Q2(r,e){const t=r.filters.concat(e);return xt.create(t,r.op)}function W2(r){return r instanceof tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`})(r):r instanceof xt?(function(t){return t.op.toString()+" {"+t.getFilters().map(W2).join(" ,")+"}"})(r):"Filter"}class _3 extends tt{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class v3 extends tt{constructor(e,t){super(e,"in",t),this.keys=X2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class b3 extends tt{constructor(e,t){super(e,"not-in",t),this.keys=X2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X2(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class w3 extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fh(t)&&hh(t.arrayValue,this.value)}}class J2 extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hh(this.value.arrayValue,t)}}class x3 extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hh(this.value.arrayValue,t)}}class E3 extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>hh(this.value.arrayValue,n)))}}class T3{constructor(e,t=null,n=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function y0(r,e=null,t=[],n=[],s=null,o=null,c=null){return new T3(r,e,t,n,s,o,c)}function No(r){const e=Ue(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>p0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>uc(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>uc(n))).join(",")),e.Te=t}return e.Te}function Oh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!y3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Y2(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!nE(r.startAt,e.startAt)&&nE(r.endAt,e.endAt)}function lm(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function cm(r,e){return r.filters.filter((t=>t instanceof tt&&t.field.isEqual(e)))}function rE(r,e,t){let n=Pf,s=!0;for(const o of cm(r,e)){let c=Pf,u=!0;switch(o.op){case"<":case"<=":c=g3(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=Pf}Zx({value:n,inclusive:s},{value:c,inclusive:u})<0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];Zx({value:n,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}function iE(r,e,t){let n=ma,s=!0;for(const o of cm(r,e)){let c=ma,u=!0;switch(o.op){case">=":case">":c=p3(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=ma}eE({value:n,inclusive:s},{value:c,inclusive:u})>0&&(n=c,s=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const c=t.position[o];eE({value:n,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(n=c,s=t.inclusive);break}}return{value:n,inclusive:s}}class xc{constructor(e,t=null,n=[],s=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function S3(r,e,t,n,s,o,c,u){return new xc(r,e,t,n,s,o,c,u)}function Mh(r){return new xc(r)}function sE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Z2(r){return r.collectionGroup!==null}function Wu(r){const e=Ue(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Et(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new mh(o,n))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new mh(Ut.keyField(),n))}return e.Ie}function Lr(r){const e=Ue(r);return e.Ee||(e.Ee=A3(e,Wu(r))),e.Ee}function A3(r,e){if(r.limitType==="F")return y0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new mh(s.field,o)}));const t=r.endAt?new hc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new hc(r.startAt.position,r.startAt.inclusive):null;return y0(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function _0(r,e){const t=r.filters.concat([e]);return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function um(r,e,t){return new xc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ym(r,e){return Oh(Lr(r),Lr(e))&&r.limitType===e.limitType}function eA(r){return`${No(Lr(r))}|lt:${r.limitType}`}function $l(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>W2(s))).join(", ")}]`),Fm(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>uc(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>uc(s))).join(",")),`Target(${n})`})(Lr(r))}; limitType=${r.limitType})`}function Ph(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):we.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of Wu(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f<=0:f<0})(n.startAt,Wu(n),s)||n.endAt&&!(function(c,u,d){const f=tE(c,u,d);return c.inclusive?f>=0:f>0})(n.endAt,Wu(n),s))})(r,e)}function I3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tA(r){return(e,t)=>{let n=!1;for(const s of Wu(r)){const o=R3(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function R3(r,e,t){const n=r.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ea(d,f):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ae(19790,{direction:r.dir})}}class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return j2(this.inner)}size(){return this.innerSize}}const C3=new Lt(we.comparator);function vr(){return C3}const nA=new Lt(we.comparator);function Vu(...r){let e=nA;for(const t of r)e=e.insert(t.key,t);return e}function rA(r){let e=nA;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ki(){return Xu()}function iA(){return Xu()}function Xu(){return new Ts((r=>r.toString()),((r,e)=>r.isEqual(e)))}const N3=new Lt(we.comparator),k3=new Et(we.comparator);function Ye(...r){let e=k3;for(const t of r)e=e.add(t);return e}const D3=new Et(Le);function O3(){return D3}function u_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function sA(r){return{integerValue:""+r}}function M3(r,e){return zM(e)?sA(e):u_(r,e)}class Qm{constructor(){this._=void 0}}function P3(r,e,t){return r instanceof fc?(function(s,o){const c={fields:{[U2]:{stringValue:L2},[B2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&a_(o)&&(o=Gm(o)),o&&(c.fields[z2]=o),{mapValue:c}})(t,e):r instanceof ko?oA(r,e):r instanceof Do?lA(r,e):(function(s,o){const c=aA(s,o),u=aE(c)+aE(s.Ae);return m0(c)&&m0(s.Ae)?sA(u):u_(s.serializer,u)})(r,e)}function j3(r,e,t){return r instanceof ko?oA(r,e):r instanceof Do?lA(r,e):t}function aA(r,e){return r instanceof gh?(function(n){return m0(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class fc extends Qm{}class ko extends Qm{constructor(e){super(),this.elements=e}}function oA(r,e){const t=cA(e);for(const n of r.elements)t.some((s=>Li(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Do extends Qm{constructor(e){super(),this.elements=e}}function lA(r,e){let t=cA(e);for(const n of r.elements)t=t.filter((s=>!Li(s,n)));return{arrayValue:{values:t}}}class gh extends Qm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aE(r){return Vt(r.integerValue||r.doubleValue)}function cA(r){return fh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Wm{constructor(e,t){this.field=e,this.transform=t}}function V3(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof ko&&s instanceof ko||n instanceof Do&&s instanceof Do?ic(n.elements,s.elements,Li):n instanceof gh&&s instanceof gh?Li(n.Ae,s.Ae):n instanceof fc&&s instanceof fc})(r.transform,e.transform)}class L3{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xm{}function uA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Jm(r.key,Ln.none()):new Ec(r.key,r.data,Ln.none());{const t=r.data,n=jn.empty();let s=new Et(Ut.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new Ss(r.key,n,new ir(s.toArray()),Ln.none())}}function U3(r,e,t){r instanceof Ec?(function(s,o,c){const u=s.value.clone(),d=lE(s.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Ss?(function(s,o,c){if(!Lf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=lE(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(hA(s)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ju(r,e,t,n){return r instanceof Ec?(function(o,c,u,d){if(!Lf(o.precondition,c))return u;const f=o.value.clone(),g=cE(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof Ss?(function(o,c,u,d){if(!Lf(o.precondition,c))return u;const f=cE(o.fieldTransforms,d,c),g=c.data;return g.setAll(hA(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(o,c,u){return Lf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function z3(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=aA(n.transform,s||null);o!=null&&(t===null&&(t=jn.empty()),t.set(n.field,o))}return t||null}function oE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ic(n,s,((o,c)=>V3(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ec extends Xm{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends Xm{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function lE(r,e,t){const n=new Map;Ce(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,u=e.data.field(o.field);n.set(o.field,j3(c,u,t[s]))}return n}function cE(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,P3(o,c,e))}return n}class Jm extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dA extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h_{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&U3(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ju(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=iA();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const d=uA(c,u);d!==null&&n.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(De.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((t,n)=>oE(t,n)))&&ic(this.baseMutations,e.baseMutations,((t,n)=>oE(t,n)))}}class d_{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ce(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return N3})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new d_(e,t,n,s)}}class f_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class B3{constructor(e,t){this.count=e,this.unchangedNames=t}}var ln,st;function F3(r){switch(r){case de.OK:return Ae(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function fA(r){if(r===void 0)return Gn("GRPC error has no .code"),de.UNKNOWN;switch(r){case ln.OK:return de.OK;case ln.CANCELLED:return de.CANCELLED;case ln.UNKNOWN:return de.UNKNOWN;case ln.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ln.INTERNAL:return de.INTERNAL;case ln.UNAVAILABLE:return de.UNAVAILABLE;case ln.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ln.NOT_FOUND:return de.NOT_FOUND;case ln.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ln.ABORTED:return de.ABORTED;case ln.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ln.DATA_LOSS:return de.DATA_LOSS;default:return Ae(39323,{code:r})}}(st=ln||(ln={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function H3(){return new TextEncoder}const q3=new ya([4294967295,4294967295],0);function uE(r){const e=H3().encode(r),t=new h2;return t.update(e),new Uint8Array(t.digest())}function hE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ya([t,n],0),new ya([s,o],0)]}class m_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lu(`Invalid padding: ${t}`);if(n<0)throw new Lu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ya.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(ya.fromNumber(n)));return s.compare(q3)===1&&(s=new ya([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new m_(o,s,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=uE(e),[n,s]=hE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zm{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Zm(De.min(),s,new Lt(Le),vr(),Ye())}}class jh{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jh(n,t,Ye(),Ye(),Ye())}}class Uf{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class mA{constructor(e,t){this.targetId=e,this.Ce=t}}class gA{constructor(e,t,n=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class dE{constructor(){this.ve=0,this.Fe=fE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),n=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Ae(38017,{changeType:o})}})),new jh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=fE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $3{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=yf(),this.He=yf(),this.Ye=new Lt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(lm(o))if(n===0){const c=new we(o.path);this.et(t,c,$t.newNoDocument(c,De.min()))}else Ce(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=ws(n).toUint8Array()}catch(d){if(d instanceof V2)return Ro("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new m_(c,s,o)}catch(d){return Ro(d instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&lm(u.target)){const d=new we(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,$t.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=Ye();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Zm(e,t,this.Ye,this.je,n);return this.je=vr(),this.Je=yf(),this.He=yf(),this.Ye=new Lt(Le),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new dE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Et(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Et(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yf(){return new Lt(we.comparator)}function fE(){return new Lt(we.comparator)}const G3={asc:"ASCENDING",desc:"DESCENDING"},K3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y3={and:"AND",or:"OR"};class Q3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function v0(r,e){return r.useProto3Json||Fm(e)?e:{value:e}}function mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function W3(r,e){return mc(r,e.toTimestamp())}function Yn(r){return Ce(!!r,49232),De.fromTimestamp((function(t){const n=bs(t);return new wt(n.seconds,n.nanos)})(r))}function g_(r,e){return b0(r,e).canonicalString()}function b0(r,e){const t=(function(s){return new gt(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function yA(r){const e=gt.fromString(r);return Ce(AA(e),10190,{key:e.toString()}),e}function hm(r,e){return g_(r.databaseId,e.path)}function _o(r,e){const t=yA(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(bA(t))}function _A(r,e){return g_(r.databaseId,e)}function vA(r){const e=yA(r);return e.length===4?gt.emptyPath():bA(e)}function w0(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bA(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function mE(r,e,t){return{name:hm(r,e),fields:t.value.mapValue.fields}}function X3(r,e,t){const n=_o(r,e.name),s=Yn(e.updateTime),o=e.createTime?Yn(e.createTime):De.min(),c=new jn({mapValue:{fields:e.fields}}),u=$t.newFoundDocument(n,s,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function J3(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ce(g===void 0||typeof g=="string",58123),un.fromBase64String(g||"")):(Ce(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),un.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?de.UNKNOWN:fA(f.code);return new ve(g,f.message||"")})(c);t=new gA(n,s,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=_o(r,n.document.name),o=Yn(n.document.updateTime),c=n.document.createTime?Yn(n.document.createTime):De.min(),u=new jn({mapValue:{fields:n.document.fields}}),d=$t.newFoundDocument(s,o,c,u),f=n.targetIds||[],g=n.removedTargetIds||[];t=new Uf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=_o(r,n.document),o=n.readTime?Yn(n.readTime):De.min(),c=$t.newNoDocument(s,o),u=n.removedTargetIds||[];t=new Uf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=_o(r,n.document),o=n.removedTargetIds||[];t=new Uf([],o,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new B3(s,o),u=n.targetId;t=new mA(u,c)}}return t}function dm(r,e){let t;if(e instanceof Ec)t={update:mE(r,e.key,e.value)};else if(e instanceof Jm)t={delete:hm(r,e.key)};else if(e instanceof Ss)t={update:mE(r,e.key,e.data),updateMask:iP(e.fieldMask)};else{if(!(e instanceof dA))return Ae(16599,{Vt:e.type});t={verify:hm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const u=c.transform;if(u instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ko)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Do)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gh)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ae(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:W3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(r,e.precondition)),t}function x0(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ln.updateTime(Yn(o.updateTime)):o.exists!==void 0?Ln.exists(o.exists):Ln.none()})(e.currentDocument):Ln.none(),n=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Ce(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new fc;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new ko(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new Do(g)}else"increment"in u?d=new gh(c,u.increment):Ae(16584,{proto:u});const f=Ut.fromServerFormat(u.fieldPath);return new Wm(f,d)})(r,s))):[];if(e.update){e.update.name;const s=_o(r,e.update.name),o=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const f=d.fieldPaths||[];return new ir(f.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new Ss(s,o,c,t,n)}return new Ec(s,o,t,n)}if(e.delete){const s=_o(r,e.delete);return new Jm(s,t)}if(e.verify){const s=_o(r,e.verify);return new dA(s,t)}return Ae(1463,{proto:e})}function Z3(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Yn(s.updateTime):Yn(o);return c.isEqual(De.min())&&(c=Yn(o)),new L3(c,s.transformResults||[])})(t,e)))):[]}function wA(r,e){return{documents:[_A(r,e.path)]}}function xA(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=_A(r,s);const o=(function(f){if(f.length!==0)return SA(xt.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:Gl(v.field),direction:tP(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=v0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function EA(r){let e=vA(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ce(n===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const v=TA(y);return v instanceof xt&&c_(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(T){return new mh(Kl(T.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Fm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new hc(w,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,w=y.values||[];return new hc(w,v)})(t.endAt)),S3(e,s,c,o,u,"F",d,f)}function eP(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Kl(t.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Kl(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kl(t.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Kl(t.unaryFilter.field);return tt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return tt.create(Kl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return xt.create(t.compositeFilter.filters.map((n=>TA(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function tP(r){return G3[r]}function nP(r){return K3[r]}function rP(r){return Y3[r]}function Gl(r){return{fieldPath:r.canonicalString()}}function Kl(r){return Ut.fromServerFormat(r.fieldPath)}function SA(r){return r instanceof tt?(function(t){if(t.op==="=="){if(Jx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(Xx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(Xx(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:nP(t.op),value:t.value}}})(r):r instanceof xt?(function(t){const n=t.getFilters().map((s=>SA(s)));return n.length===1?n[0]:{compositeFilter:{op:rP(t.op),filters:n}}})(r):Ae(54877,{filter:r})}function iP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,n,s,o=De.min(),c=De.min(),u=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IA{constructor(e){this.yt=e}}function sP(r,e){let t;if(e.document)t=X3(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=we.fromSegments(e.noDocument.path),s=Mo(e.noDocument.readTime);t=$t.newNoDocument(n,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const n=we.fromSegments(e.unknownDocument.path),s=Mo(e.unknownDocument.version);t=$t.newUnknownDocument(n,s)}}return e.readTime&&t.setReadTime((function(s){const o=new wt(s[0],s[1]);return De.fromTimestamp(o)})(e.readTime)),t}function gE(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,c){return{name:hm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:mc(o,c.version.toTimestamp()),createTime:mc(o,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Oo(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Oo(e.version)}}return n}function fm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Oo(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(r){const e=new wt(r.seconds,r.nanoseconds);return De.fromTimestamp(e)}function co(r,e){const t=(e.baseMutations||[]).map((o=>x0(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>x0(r.yt,o))),s=wt.fromMillis(e.localWriteTimeMs);return new h_(e.batchId,s,t,n)}function Uu(r){const e=Mo(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Mo(r.lastLimboFreeSnapshotVersion):De.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const c=o.documents.length;return Ce(c===1,1966,{count:c}),Lr(Mh(vA(o.documents[0])))})(r.query):(function(o){return Lr(EA(o))})(r.query),new fs(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,un.fromBase64String(r.resumeToken))}function RA(r,e){const t=Oo(e.snapshotVersion),n=Oo(e.lastLimboFreeSnapshotVersion);let s;s=lm(e.target)?wA(r.yt,e.target):xA(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function CA(r){const e=EA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?um(e,e.limit,"L"):e}function Oy(r,e){return new f_(e.largestBatchId,x0(r.yt,e.overlayMutation))}function pE(r,e){const t=e.path.lastSegment();return[r,Un(e.path.popLast()),t]}function yE(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Oo(n.readTime),documentKey:Un(n.documentKey.path),largestBatchId:n.largestBatchId}}class aP{getBundleMetadata(e,t){return _E(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Mo(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return _E(e).put((function(s){return{bundleId:s.id,createTime:Oo(Yn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return vE(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:CA(o.bundledQuery),readTime:Mo(o.readTime)}})(n)}))}saveNamedQuery(e,t){return vE(e).put((function(s){return{name:s.name,readTime:Oo(Yn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function _E(r){return gn(r,Hm)}function vE(r){return gn(r,qm)}class eg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new eg(e,n)}getOverlay(e,t){return Cu(e).get(pE(this.userId,t)).next((n=>n?Oy(this.serializer,n):null))}getOverlays(e,t){const n=ki();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){const s=[];return n.forEach(((o,c)=>{const u=new f_(t,c);s.push(this.St(e,u))})),se.waitFor(s)}removeOverlaysForBatchId(e,t,n){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);o.push(Cu(e).Z(h0,u))})),se.waitFor(o)}getOverlaysForCollection(e,t,n){const s=ki(),o=Un(t),c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cu(e).J(h0,c).next((u=>{for(const d of u){const f=Oy(this.serializer,d);s.set(f.getKey(),f)}return s}))}getOverlaysForCollectionGroup(e,t,n,s){const o=ki();let c;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cu(e).ee({index:k2,range:u},((d,f,g)=>{const y=Oy(this.serializer,f);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Cu(e).put((function(s,o,c){const[u,d,f]=pE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:dm(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Cu(r){return gn(r,$m)}class oP{bt(e){return gn(e,i_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?un.fromUint8Array(n):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const n=Vt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ah(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=bs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ws(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?H2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Km(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const s of Object.keys(n))this.Ot(s,t),this.Ct(n[s],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const s=cc,o=n[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Vt(o)),this.Ot(s,t),this.Ct(n[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const s of n)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uo.Kt=new uo;const Ul=255;function lP(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function bE(r){const e=64-(function(n){let s=0;for(let o=0;o<8;++o){const c=lP(255&n[o]);if(s+=c,c!==8)break}return s})(r);return Math.ceil(e/8)}class cP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),n=bE(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let s=t.length-n;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Ul),this.sn(255)}_n(){this.an(Ul),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let s=1;s<t.length;++s)t[s]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ul?(this.sn(Ul),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ul?(this.an(Ul),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class uP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class hP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new cP,this.ln=new uP(this.cn),this.hn=new hP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ho{constructor(e,t,n,s){this.Tn=e,this.In=t,this.En=n,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new ho(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:zf(this.En),directionalValue:zf(this.dn),orderedDocumentKey:zf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const s=this.Rn(e,t,n);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function sa(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=wE(r.En,e.En),t!==0?t:(t=wE(r.dn,e.dn),t!==0?t:we.comparator(r.In,e.In)))}function wE(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function zf(r){return xS()?(function(t){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t[s]);return n})(r):r}function xE(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(r)}class EE{constructor(e){this.mn=new Et(((t,n)=>Ut.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=l0(e);if(t!==void 0&&!this.wn(t))return!1;const n=ao(e);let s=new Set,o=0,c=0;for(;o<n.length&&this.wn(n[o]);++o)s=s.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=n[o];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<n.length;++o){const u=n[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Et(Ut.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Df(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Df(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Df(n.field,n.dir==="asc"?0:1)));return new rm(rm.UNKNOWN_ID,this.collectionId,t,sh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function NA(r){if(Ce(r instanceof tt||r instanceof xt,20012),r instanceof tt){if(r instanceof J2){const t=r.value.arrayValue?.values?.map((n=>tt.create(r.field,"==",n)))||[];return xt.create(t,"or")}return r}const e=r.filters.map((t=>NA(t)));return xt.create(e,r.op)}function dP(r){if(r.getFilters().length===0)return[];const e=S0(NA(r));return Ce(kA(e),7391),E0(e)||T0(e)?[e]:e.getFilters()}function E0(r){return r instanceof tt}function T0(r){return r instanceof xt&&c_(r)}function kA(r){return E0(r)||T0(r)||(function(t){if(t instanceof xt&&g0(t)){for(const n of t.getFilters())if(!E0(n)&&!T0(n))return!1;return!0}return!1})(r)}function S0(r){if(Ce(r instanceof tt||r instanceof xt,34018),r instanceof tt)return r;if(r.filters.length===1)return S0(r.filters[0]);const e=r.filters.map((n=>S0(n)));let t=xt.create(e,r.op);return t=mm(t),kA(t)?t:(Ce(t instanceof xt,64498),Ce(dc(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((n,s)=>p_(n,s))))}function p_(r,e){let t;return Ce(r instanceof tt||r instanceof xt,38388),Ce(e instanceof tt||e instanceof xt,25473),t=r instanceof tt?e instanceof tt?(function(s,o){return xt.create([s,o],"and")})(r,e):TE(r,e):e instanceof tt?TE(e,r):(function(s,o){if(Ce(s.filters.length>0&&o.filters.length>0,48005),dc(s)&&dc(o))return Q2(s,o.getFilters());const c=g0(s)?s:o,u=g0(s)?o:s,d=c.filters.map((f=>p_(f,u)));return xt.create(d,"or")})(r,e),mm(t)}function TE(r,e){if(dc(e))return Q2(e,r.getFilters());{const t=e.filters.map((n=>p_(r,n)));return xt.create(t,"or")}}function mm(r){if(Ce(r instanceof tt||r instanceof xt,11850),r instanceof tt)return r;const e=r.getFilters();if(e.length===1)return mm(e[0]);if(K2(r))return r;const t=e.map((s=>mm(s))),n=[];return t.forEach((s=>{s instanceof tt?n.push(s):s instanceof xt&&(s.op===r.op?n.push(...s.filters):n.push(s))})),n.length===1?n[0]:xt.create(n,r.op)}class fP{constructor(){this.Cn=new y_}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(br.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(br.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Et(gt.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Et(gt.comparator)).toArray()}}const SE="IndexedDbIndexManager",_f=new Uint8Array(0);class mP{constructor(e,t){this.databaseId=t,this.vn=new y_,this.Fn=new Ts((n=>No(n)),((n,s)=>Oh(n,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:Un(s)};return AE(e).put(o)}return se.resolve()}getCollectionParents(e,t){const n=[],s=IDBKeyRange.bound([t,""],[v2(t),""],!1,!0);return AE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;n.push(Ni(c.parent))}return n}))}addFieldIndex(e,t){const n=ku(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=n.add(s);if(t.indexState){const c=Bl(e);return o.next((u=>{c.put(yE(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=ku(e),s=Bl(e),o=zl(e);return n.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ku(e),n=zl(e),s=Bl(e);return t.Z().next((()=>n.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return se.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((s=>{if(s===0||s===1){const o=new EE(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=zl(e);let s=!0;const o=new Map;return se.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),o.set(c,u)})))).next((()=>{if(s){let c=Ye();const u=[];return se.forEach(o,((d,f)=>{_e(SE,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(d)} to execute ${No(t)}`);const g=(function(F,q){const K=l0(q);if(K===void 0)return null;for(const z of cm(F,K.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,d),y=(function(F,q){const K=new Map;for(const z of ao(q))for(const M of cm(F,z.fieldPath))switch(M.op){case"==":case"in":K.set(z.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return K.set(z.fieldPath.canonicalString(),M.value),Array.from(K.values())}return null})(f,d),v=(function(F,q){const K=[];let z=!0;for(const M of ao(q)){const x=M.kind===0?rE(F,M.fieldPath,F.startAt):iE(F,M.fieldPath,F.startAt);K.push(x.value),z&&(z=x.inclusive)}return new hc(K,z)})(f,d),w=(function(F,q){const K=[];let z=!0;for(const M of ao(q)){const x=M.kind===0?iE(F,M.fieldPath,F.endAt):rE(F,M.fieldPath,F.endAt);K.push(x.value),z&&(z=x.inclusive)}return new hc(K,z)})(f,d),T=this.On(d,f,v),k=this.On(d,f,w),O=this.Nn(d,f,y),V=this.Bn(d.indexId,g,T,v.inclusive,k,w.inclusive,O);return se.forEach(V,(B=>n.Y(B,t.limit).next((F=>{F.forEach((q=>{const K=we.fromSegments(q.documentKey);c.has(K)||(c=c.add(K),u.push(K))}))}))))})).next((()=>u))}return se.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=dP(xt.create(e.filters,"and")).map((n=>y0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,s,o,c,u){const d=(t!=null?t.length:1)*Math.max(n.length,o.length),f=d/(t!=null?t.length:1),g=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/f]):_f,w=this.kn(e,v,n[y%f],s),T=this.qn(e,v,o[y%f],c),k=u.map((O=>this.kn(e,v,O,!0)));g.push(...this.createRange(w,T,k))}return g}kn(e,t,n,s){const o=new ho(e,we.empty(),t,n);return s?o:o.An()}qn(e,t,n,s){const o=new ho(e,we.empty(),t,n);return s?o.An():o}xn(e,t){const n=new EE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const u of o)n.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let n=2;const s=this.Mn(t);return se.forEach(s,(o=>this.xn(e,o).next((c=>{c?n!==0&&c.fields.length<(function(d){let f=new Et(Ut.comparator),g=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&n===2?1:n))}Qn(e,t){const n=new Nu;for(const s of ao(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=n.Pn(s.kind);uo.Kt.Dt(o,c)}return n.un()}Ln(e){const t=new Nu;return uo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Nu;return uo.Kt.Dt(dh(this.databaseId,t),n.Pn((function(o){const c=ao(o);return c.length===0?0:c[c.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let s=[];s.push(new Nu);let o=0;for(const c of ao(e)){const u=n[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&fh(u))s=this.Kn(s,c,u);else{const f=d.Pn(c.kind);uo.Kt.Dt(u,f)}}return this.Wn(s)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const s=[...e],o=[];for(const c of n.arrayValue.values||[])for(const u of s){const d=new Nu;d.seed(u.un()),uo.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof tt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=ku(e),s=Bl(e);return(t?n.J(u0,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const c=[];return se.forEach(o,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,y){const v=y?new sh(y.sequenceNumber,new br(Mo(y.readTime),new we(Ni(y.documentKey)),y.largestBatchId)):sh.empty(),w=g.fields.map((([T,k])=>new Df(Ut.fromServerFormat(T),k)));return new rm(g.indexId,g.collectionGroup,w,v)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,s)=>{const o=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(n.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const s=ku(e),o=Bl(e);return this.Gn(e).next((c=>s.J(u0,IDBKeyRange.bound(t,t)).next((u=>se.forEach(u,(d=>o.put(yE(d.indexId,this.uid,c,n))))))))}updateIndexEntries(e,t){const n=new Map;return se.forEach(t,((s,o)=>{const c=n.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(n.set(s.collectionGroup,u),se.forEach(u,(d=>this.zn(e,s,d).next((f=>{const g=this.jn(o,d);return f.isEqual(g)?se.resolve():this.Jn(e,o,d,f,g)})))))))}))}Hn(e,t,n,s){return zl(e).put(s.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,s){return zl(e).delete(s.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const s=zl(e);let o=new Et(sa);return s.ee({index:N2,range:IDBKeyRange.only([n.indexId,this.uid,zf(this.$n(n,t))])},((c,u)=>{o=o.add(new ho(n.indexId,t,xE(u.arrayValue),xE(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new Et(sa);const s=this.Qn(t,e);if(s==null)return n;const o=l0(t);if(o!=null){const c=e.data.field(o.fieldPath);if(fh(c))for(const u of c.arrayValue.values||[])n=n.add(new ho(t.indexId,e.key,this.Ln(u),s))}else n=n.add(new ho(t.indexId,e.key,_f,s));return n}Jn(e,t,n,s,o){_e(SE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,f,g,y,v){const w=d.getIterator(),T=f.getIterator();let k=Ll(w),O=Ll(T);for(;k||O;){let V=!1,B=!1;if(k&&O){const F=g(k,O);F<0?B=!0:F>0&&(V=!0)}else k!=null?B=!0:V=!0;V?(y(O),O=Ll(T)):B?(v(k),k=Ll(w)):(k=Ll(w),O=Ll(T))}})(s,o,sa,(u=>{c.push(this.Hn(e,t,n,u))}),(u=>{c.push(this.Yn(e,t,n,u))})),se.waitFor(c)}Gn(e){let t=1;return Bl(e).ee({index:C2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((c,u)=>sa(c,u))).filter(((c,u,d)=>!u||sa(c,d[u-1])!==0));const s=[];s.push(e);for(const c of n){const u=sa(c,e),d=sa(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,_f,we.empty()),d=s[c+1].Vn(this.uid,_f,we.empty());o.push(IDBKeyRange.bound(u,d))}return o}Zn(e,t){return sa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IE)}getMinOffset(e,t){return se.mapArray(this.Mn(t),(n=>this.xn(e,n).next((s=>s||Ae(44426))))).next(IE)}}function AE(r){return gn(r,ch)}function zl(r){return gn(r,Yu)}function ku(r){return gn(r,r_)}function Bl(r){return gn(r,Ku)}function IE(r){Ce(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const s=r[n].indexState.offset;e_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new br(e.readTime,e.documentKey,t)}const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DA=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function OA(r,e,t){const n=r.store(Zr),s=r.store(sc),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=n.ee({range:c},((g,y,v)=>(u++,v.delete())));o.push(d.next((()=>{Ce(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=A2(e,g.key.path,t.batchId);o.push(s.delete(y)),f.push(g.key)}return se.waitFor(o).next((()=>f))}function gm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ae(14731);e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(DA,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class tg{constructor(e,t,n,s){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=s,this.Xn={}}static wt(e,t,n,s){Ce(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new tg(o,t,n,s)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).ee({index:mo,range:n},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,n,s){const o=Yl(e),c=aa(e);return c.add({}).next((u=>{Ce(typeof u=="number",49019);const d=new h_(u,t,n,s),f=(function(w,T,k){const O=k.baseMutations.map((B=>dm(w.yt,B))),V=k.mutations.map((B=>dm(w.yt,B)));return{userId:T,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:O,mutations:V}})(this.serializer,this.userId,d),g=[];let y=new Et(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=A2(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(w,HM))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),se.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return aa(e).get(t).next((n=>n?(Ce(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),co(this.serializer,n)):null))}er(e,t){return this.Xn[t]?se.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const s=n.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return aa(e).ee({index:mo,range:s},((c,u,d)=>{u.userId===this.userId&&(Ce(u.batchId>=n,47524,{tr:n}),o=co(this.serializer,u)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=po;return aa(e).ee({index:mo,range:t,reverse:!0},((s,o,c)=>{n=o.batchId,c.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,po],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).J(mo,t).next((n=>n.map((s=>co(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Of(this.userId,t.path),s=IDBKeyRange.lowerBound(n),o=[];return Yl(e).ee({range:s},((c,u,d)=>{const[f,g,y]=c,v=Ni(g);if(f===this.userId&&t.path.isEqual(v))return aa(e).get(y).next((w=>{if(!w)throw Ae(61480,{nr:c,batchId:y});Ce(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(co(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Et(Le);const s=[];return t.forEach((o=>{const c=Of(this.userId,o.path),u=IDBKeyRange.lowerBound(c),d=Yl(e).ee({range:u},((f,g,y)=>{const[v,w,T]=f,k=Ni(w);v===this.userId&&o.path.isEqual(k)?n=n.add(T):y.done()}));s.push(d)})),se.waitFor(s).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1,o=Of(this.userId,n),c=IDBKeyRange.lowerBound(o);let u=new Et(Le);return Yl(e).ee({range:c},((d,f,g)=>{const[y,v,w]=d,T=Ni(v);y===this.userId&&n.isPrefixOf(T)?T.length===s&&(u=u.add(w)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],s=[];return t.forEach((o=>{s.push(aa(e).get(o).next((c=>{if(c===null)throw Ae(35274,{batchId:o});Ce(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),n.push(co(this.serializer,c))})))})),se.waitFor(s).next((()=>n))}removeMutationBatch(e,t){return OA(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),se.forEach(n,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return se.resolve();const n=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Yl(e).ee({range:n},((o,c,u)=>{if(o[0]===this.userId){const d=Ni(o[1]);s.push(d)}else u.done()})).next((()=>{Ce(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return MA(e,this.userId,t)}_r(e){return PA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:po,lastStreamToken:""}))}}function MA(r,e,t){const n=Of(e,t.path),s=n[1],o=IDBKeyRange.lowerBound(n);let c=!1;return Yl(r).ee({range:o,X:!0},((u,d,f)=>{const[g,y,v]=u;g===e&&y===s&&(c=!0),f.done()})).next((()=>c))}function aa(r){return gn(r,Zr)}function Yl(r){return gn(r,sc)}function PA(r){return gn(r,oh)}class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}class gP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Po(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>De.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fl(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Ce(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let s=0;const o=[];return Fl(e).ee(((c,u)=>{const d=Uu(u);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>se.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Fl(e).ee(((n,s)=>{const o=Uu(s);t(o)}))}lr(e){return CE(e).get(am).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return CE(e).put(am,t)}Pr(e,t){return Fl(e).put(RA(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=No(t),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Fl(e).ee({range:s,index:R2},((c,u,d)=>{const f=Uu(u);Oh(t,f.target)&&(o=f,d.done())})).next((()=>o))}addMatchingKeys(e,t,n){const s=[],o=fa(e);return t.forEach((c=>{const u=Un(c.path);s.push(o.put({targetId:n,path:u})),s.push(this.referenceDelegate.addReference(e,n,c))})),se.waitFor(s)}removeMatchingKeys(e,t,n){const s=fa(e);return se.forEach(t,(o=>{const c=Un(o.path);return se.waitFor([s.delete([n,c]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=fa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),s=fa(e);let o=Ye();return s.ee({range:n,X:!0},((c,u,d)=>{const f=Ni(c[1]),g=new we(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=Un(t.path),s=IDBKeyRange.bound([n],[v2(n)],!1,!0);let o=0;return fa(e).ee({index:n_,X:!0,range:s},(([c,u],d,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return Fl(e).get(t).next((n=>n?Uu(n):null))}}function Fl(r){return gn(r,ac)}function CE(r){return gn(r,yo)}function fa(r){return gn(r,oc)}const NE="LruGarbageCollector",pP=1048576;function kE([r,e],[t,n]){const s=Le(r,t);return s===0?Le(e,n):s}class yP{constructor(e){this.Ir=e,this.buffer=new Et(kE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();kE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jA{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(NE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?_e(NE,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Vr(3e5)}))}}class _P{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Vr.ce);const n=new yP(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(RE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(n=y,u=Date.now(),this.removeTargets(e,n,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(f=Date.now(),ql()<=et.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function VA(r,e){return new _P(r,e)}class vP{constructor(e,t){this.db=e,this.garbageCollector=VA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,s)=>t(s)))}addReference(e,t,n){return vf(e,n)}removeReference(e,t,n){return vf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return vf(e,t)}br(e,t){return(function(s,o){let c=!1;return PA(s).te((u=>MA(s,u,o).next((d=>(d&&(c=!0),se.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((f=>{if(!f)return o++,n.getEntry(e,c).next((()=>(n.removeEntry(c,De.min()),fa(e).delete((function(y){return[0,Un(y.path)]})(c)))))}));s.push(d)}})).next((()=>se.waitFor(s))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return vf(e,t)}Sr(e,t){const n=fa(e);let s,o=Vr.ce;return n.ee({index:n_},(([c,u],{path:d,sequenceNumber:f})=>{c===0?(o!==Vr.ce&&t(new we(Ni(s)),o),o=f,s=d):o=Vr.ce})).next((()=>{o!==Vr.ce&&t(new we(Ni(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(r,e){return fa(r).put((function(n,s){return{targetId:0,path:Un(n.path),sequenceNumber:s}})(e,r.currentSequenceNumber))}class LA{constructor(){this.changes=new Ts((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return io(e).put(n)}removeEntry(e,t,n){return io(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],fm(c),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=$t.newInvalidDocument(t);return io(e).ee({index:Mf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:$t.newInvalidDocument(t)};return io(e).ee({index:Mf,range:IDBKeyRange.only(Du(t))},((s,o)=>{n={document:this.Cr(t,o),size:gm(o)}})).next((()=>n))}getEntries(e,t){let n=vr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);n=n.insert(s,c)})).next((()=>n))}Mr(e,t){let n=vr(),s=new Lt(we.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);n=n.insert(o,u),s=s.insert(o,gm(c))})).next((()=>({documents:n,Or:s})))}Fr(e,t,n){if(t.isEmpty())return se.resolve();let s=new Et(ME);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Du(s.first()),Du(s.last())),c=s.getIterator();let u=c.getNext();return io(e).ee({index:Mf,range:o},((d,f,g)=>{const y=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&ME(u,y)<0;)n(u,null),u=c.getNext();u&&u.isEqual(y)&&(n(u,f),u=c.hasNext()?c.getNext():null),u?g.j(Du(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,n,s,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),fm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return io(e).J(IDBKeyRange.bound(u,d,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=vr();for(const y of f){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Ph(t,v)||s.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,n,s){let o=vr();const c=OE(t,n),u=OE(t,br.max());return io(e).ee({index:I2,range:IDBKeyRange.bound(c,u,!0)},((d,f,g)=>{const y=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===s&&g.done()})).next((()=>o))}newChangeBuffer(e){return new wP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return DE(e).get(c0).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return DE(e).put(c0,t)}Cr(e,t){if(t){const n=sP(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(De.min())))return n}return $t.newInvalidDocument(e)}}function UA(r){return new bP(r)}class wP extends LA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ts((n=>n.toString()),((n,s)=>n.isEqual(s)))}applyChanges(e){const t=[];let n=0,s=new Et(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const d=gE(this.Nr.serializer,c);s=s.add(o.path.popLast());const f=gm(d);n+=f-u.size,t.push(this.Nr.addEntry(e,o,d))}else if(n-=u.size,this.trackRemovals){const d=gE(this.Nr.serializer,c.convertToNoDocument(De.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),se.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:n.get(o).readTime})})),n)))}}function DE(r){return gn(r,lh)}function io(r){return gn(r,sm)}function Du(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OE(r,e){const t=e.documentKey.path.toArray();return[r,fm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ME(r,e){const t=r.path.toArray(),n=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(s=Le(t[o],n[o]),s)return s;return s=Le(t.length,n.length),s||(s=Le(t[t.length-2],n[n.length-2]),s||Le(t[t.length-1],n[n.length-1]))}class xP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zA{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Ju(n.mutation,s,ir.empty(),wt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ye()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ye()){const s=ki();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=Vu();return o.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=ki();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ye())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,s){let o=vr();const c=Xu(),u=(function(){return Xu()})();return t.forEach(((d,f)=>{const g=n.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Ss)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),Ju(g.mutation,f,g.mutation.getFieldMask(),wt.now())):c.set(f.key,ir.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new xP(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=Xu();let s=new Lt(((c,u)=>c-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let g=n.get(d)||ir.empty();g=u.applyToLocalView(f,g),n.set(d,g);const y=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=iA();g.forEach((v=>{if(!o.has(v)){const w=uA(t.get(v),n.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return se.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Z2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):se.resolve(ki());let u=ih,d=o;return c.next((f=>se.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ye()))).next((g=>({batchId:u,changes:rA(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((n=>{let s=Vu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=Vu();return this.indexManager.getCollectionParents(e,o).next((u=>se.forEach(u,(d=>{const f=(function(y,v){return new xc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,n,s).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,$t.newInvalidDocument(g)))}));let u=Vu();return c.forEach(((d,f)=>{const g=o.get(d);g!==void 0&&Ju(g.mutation,f,ir.empty(),wt.now()),Ph(t,f)&&(u=u.insert(d,f))})),u}))}}class EP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:CA(s.bundledQuery),readTime:Yn(s.readTime)}})(t)),se.resolve()}}class TP{constructor(){this.overlays=new Lt(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ki();return se.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=ki(),o=t.length+1,c=new we(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>n&&s.set(d.getKey(),d)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new Lt(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let g=o.get(f.largestBatchId);g===null&&(g=ki(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=ki(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=s)););return se.resolve(u)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new f_(t,n));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class SP{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}class __{constructor(){this.Qr=new Et(bn.$r),this.Ur=new Et(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new bn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new we(new gt([])),n=new bn(t,e),s=new bn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new gt([])),n=new bn(t,e),s=new bn(t,e+1);let o=Ye();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class AP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Et(bn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new h_(o,t,n,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new bn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?po:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bn(t,0),s=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const u=this.Xr(c.Yr);o.push(u)})),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Et(Le);return t.forEach((s=>{const o=new bn(s,0),c=new bn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{n=n.add(u.Yr)}))})),se.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;we.isDocumentKey(o)||(o=o.child(""));const c=new bn(new we(o),0);let u=new Et(Le);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),c),se.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return se.forEach(t.mutations,(s=>{const o=new bn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new bn(t,0),s=this.Zr.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IP{constructor(e){this.ri=e,this.docs=(function(){return new Lt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let n=vr();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():$t.newInvalidDocument(s))})),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=vr();const c=t.path,u=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||e_(x2(g),n)<=0||(s.has(g.key)||Ph(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,n,s){Ae(9500)}ii(e,t){return se.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new RP(this)}getSize(e){return se.resolve(this.size)}}class RP extends LA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class CP{constructor(e){this.persistence=e,this.si=new Ts((t=>No(t)),Oh),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new __,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),se.waitFor(o).next((()=>s))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),se.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}class v_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vr(0),this.li=!1,this.li=!0,this.hi=new SP,this.referenceDelegate=e(this),this.Pi=new CP(this),this.indexManager=new fP,this.remoteDocumentCache=(function(s){return new IP(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new IA(t),this.Ii=new EP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new AP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e("MemoryPersistence","Starting transaction:",e);const s=new NP(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return se.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class NP extends T2{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ri=new __,this.Vi=null}static mi(e){return new ng(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(n=>{const s=we.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pm{constructor(e,t){this.persistence=e,this.pi=new Ts((n=>Un(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=VA(this,t)}static mi(e,t){return new pm(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?se.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,o.removeEntry(c,De.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jf(e.data.value)),t}br(e,t,n){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return se.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class kP{constructor(e){this.serializer=e}k(e,t,n,s){const o=new Bm("createOrUpgrade",t);n<1&&s>=1&&((function(d){d.createObjectStore(Dh)})(e),(function(d){d.createObjectStore(oh,{keyPath:FM}),d.createObjectStore(Zr,{keyPath:$x,autoIncrement:!0}).createIndex(mo,Gx,{unique:!0}),d.createObjectStore(sc)})(e),PE(e),(function(d){d.createObjectStore(oo)})(e));let c=se.resolve();return n<3&&s>=3&&(n!==0&&((function(d){d.deleteObjectStore(oc),d.deleteObjectStore(ac),d.deleteObjectStore(yo)})(e),PE(e)),c=c.next((()=>(function(d){const f=d.store(yo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return f.put(am,g)})(o)))),n<4&&s>=4&&(n!==0&&(c=c.next((()=>(function(d,f){return f.store(Zr).J().next((y=>{d.deleteObjectStore(Zr),d.createObjectStore(Zr,{keyPath:$x,autoIncrement:!0}).createIndex(mo,Gx,{unique:!0});const v=f.store(Zr),w=y.map((T=>v.put(T)));return se.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(lc,{keyPath:XM})})(e)}))),n<5&&s>=5&&(c=c.next((()=>this.yi(o)))),n<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(lh)})(e),this.wi(o))))),n<7&&s>=7&&(c=c.next((()=>this.Si(o)))),n<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),n<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&s>=10&&(c=c.next((()=>this.Di(o)))),n<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Hm,{keyPath:JM})})(e),(function(d){d.createObjectStore(qm,{keyPath:ZM})})(e)}))),n<12&&s>=12&&(c=c.next((()=>{(function(d){const f=d.createObjectStore($m,{keyPath:a3});f.createIndex(h0,o3,{unique:!1}),f.createIndex(k2,l3,{unique:!1})})(e)}))),n<13&&s>=13&&(c=c.next((()=>(function(d){const f=d.createObjectStore(sm,{keyPath:qM});f.createIndex(Mf,$M),f.createIndex(I2,GM)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(oo)))),n<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),n<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(r_,{keyPath:e3,autoIncrement:!0}).createIndex(u0,t3,{unique:!1}),d.createObjectStore(Ku,{keyPath:n3}).createIndex(C2,r3,{unique:!1}),d.createObjectStore(Yu,{keyPath:i3}).createIndex(N2,s3,{unique:!1})})(e)))),n<16&&s>=16&&(c=c.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Yu).clear()}))),n<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(i_,{keyPath:c3})})(e)}))),n<18&&s>=18&&xS()&&(c=c.next((()=>{t.objectStore(Ku).clear()})).next((()=>{t.objectStore(Yu).clear()}))),c}wi(e){let t=0;return e.store(oo).ee(((n,s)=>{t+=gm(s)})).next((()=>{const n={byteSize:t};return e.store(lh).put(c0,n)}))}yi(e){const t=e.store(oh),n=e.store(Zr);return t.J().next((s=>se.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,po],[o.userId,o.lastAcknowledgedBatchId]);return n.J(mo,c).next((u=>se.forEach(u,(d=>{Ce(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const f=co(this.serializer,d);return OA(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(oc),n=e.store(oo);return e.store(yo).get(am).next((s=>{const o=[];return n.ee(((c,u)=>{const d=new gt(c),f=(function(y){return[0,Un(y)]})(d);o.push(t.get(f).next((g=>g?se.resolve():(y=>t.put({targetId:0,path:Un(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>se.waitFor(o)))}))}bi(e,t){e.createObjectStore(ch,{keyPath:WM});const n=t.store(ch),s=new y_,o=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return n.put({collectionId:u,parent:Un(d)})}};return t.store(oo).ee({X:!0},((c,u)=>{const d=new gt(c);return o(d.popLast())})).next((()=>t.store(sc).ee({X:!0},(([c,u,d],f)=>{const g=Ni(u);return o(g.popLast())}))))}Di(e){const t=e.store(ac);return t.ee(((n,s)=>{const o=Uu(s),c=RA(this.serializer,o);return t.put(c)}))}Ci(e,t){const n=t.store(oo),s=[];return n.ee(((o,c)=>{const u=t.store(sm),d=(function(y){return y.document?new we(gt.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ae(36783)})(c).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(f))})).next((()=>se.waitFor(s)))}Fi(e,t){const n=t.store(Zr),s=UA(this.serializer),o=new v_(ng.mi,this.serializer.yt);return n.J().next((c=>{const u=new Map;return c.forEach((d=>{let f=u.get(d.userId)??Ye();co(this.serializer,d).keys().forEach((g=>f=f.add(g))),u.set(d.userId,f)})),se.forEach(u,((d,f)=>{const g=new Cn(f),y=eg.wt(this.serializer,g),v=o.getIndexManager(g),w=tg.wt(g,this.serializer,v,o.referenceDelegate);return new zA(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new d0(t,Vr.ce),d).next()}))}))}}function PE(r){r.createObjectStore(oc,{keyPath:YM}).createIndex(n_,QM,{unique:!0}),r.createObjectStore(ac,{keyPath:"targetId"}).createIndex(R2,KM,{unique:!0}),r.createObjectStore(yo)}const oa="IndexedDbPersistence",My=18e5,Py=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DP="main";class b_{constructor(e,t,n,s,o,c,u,d,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!b_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vP(this,s),this.$i=t+DP,this.serializer=new IA(d),this.Ui=new _a(this.$i,this.Ni,new kP(this.serializer)),this.hi=new oP,this.Pi=new gP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UA(this.serializer),this.Ii=new aP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Gn(oa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Vr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ia(e))return _e(oa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e(oa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ou(e).get(Vl).next((t=>se.resolve(this.es(t))))}ts(e){return bf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,lc);return n.J().next((s=>{const o=this.ss(s,My),c=s.filter((u=>o.indexOf(u)===-1));return se.forEach(c,(u=>n.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?se.resolve(!0):Ou(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||bf(e).J().next((n=>this.ss(n,Py).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&_e(oa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Dh,lc],(e=>{const t=new d0(e,Vr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>bf(e).J().next((t=>this.ss(t,My).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return tg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return eg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){_e(oa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?d3:d===17?P2:d===16?h3:d===15?s_:d===14?M2:d===13?O2:d===12?u3:d===11?D2:void Ae(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(u=>(c=new d0(u,this.ci?this.ci.next():Vr.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,E2);return n(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>n(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Ou(e).get(Vl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Py)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,jy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(e).put(Vl,t)}static v(){return _a.v()}Zi(e){const t=Ou(e);return t.get(Vl).next((n=>this.es(n)?(_e(oa,"Releasing primary lease."),t.delete(Vl)):se.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;wS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return _e(oa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gn(oa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ou(r){return gn(r,Dh)}function bf(r){return gn(r,lc)}function OP(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class w_{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new w_(e,t.fromCache,n,s)}}class MP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wS()?8:S2(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new MP;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(ql()<=et.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ql()<=et.DEBUG&&_e("QueryEngine","Query:",$l(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(ql()<=et.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(t))):se.resolve())}ys(e,t){if(sE(t))return se.resolve(null);let n=Lr(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=um(t,null,"F"),n=Lr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,c,d.readTime)?this.ys(e,um(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,n,s){return sE(t)||s.isEqual(De.min())?se.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?se.resolve(null):(ql()<=et.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(t)),this.vs(e,c,t,PM(s,ih)).next((u=>u)))}))}Ds(e,t){let n=new Et(tA(e));return t.forEach(((s,o)=>{Ph(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return ql()<=et.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",$l(t)),this.ps.getDocumentsMatchingQuery(e,t,br.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const x_="LocalStore",PP=3e8;class jP{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Lt(Le),this.xs=new Ts((o=>No(o)),Oh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function FA(r,e,t,n){return new jP(r,e,t,n)}async function HA(r,e){const t=Ue(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],u=[];let d=Ye();for(const f of s){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(n,d).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function VP(r,e){const t=Ue(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,g){const y=f.batch,v=y.keys();let w=se.resolve();return v.forEach((T=>{w=w.next((()=>g.getEntry(d,T))).next((k=>{const O=f.docVersions.get(T);Ce(O!==null,48541),k.version.compareTo(O)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),g.addEntry(k)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let d=Ye();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function qA(r){const e=Ue(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function LP(r,e){const t=Ue(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,n)),s=s.insert(y,w),(function(k,O,V){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=PP?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(v,w,g)&&u.push(t.Pi.updateTargetData(o,w))}));let d=vr(),f=Ye();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(UP(o,c,e.documentUpdates).next((g=>{d=g.ks,f=g.qs}))),!n.isEqual(De.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return se.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function UP(r,e,t){let n=Ye(),s=Ye();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=vr();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):_e(x_,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function zP(r,e){const t=Ue(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=po),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function BP(r,e){const t=Ue(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,se.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new fs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function A0(r,e,t){const n=Ue(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ia(c))throw c;_e(x_,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function jE(r,e,t){const n=Ue(r);let s=De.min(),o=Ye();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,f,g){const y=Ue(d),v=y.xs.get(g);return v!==void 0?se.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,g)})(n,c,Lr(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{o=d}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:De.min(),t?o:Ye()))).next((u=>(FP(n,I3(e),u),{documents:u,Qs:o})))))}function FP(r,e,t){let n=r.Os.get(e)||De.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class VE{constructor(){this.activeTargetIds=O3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.Mo=new VE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new VE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HP{Oo(e){}shutdown(){}}const LE="ConnectivityMonitor";class UE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(LE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(LE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let wf=null;function I0(){return wf===null?wf=(function(){return 268435456+Math.round(2147483648*Math.random())})():wf++,"0x"+wf.toString(16)}const Vy="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $P{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===om?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=I0(),u=this.zo(e,t.toUriEncodedString());_e(Vy,`Sending RPC '${e}' ${c}:`,u,n);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),g=Fo(f);return this.Jo(e,u,d,n,g).then((y=>(_e(Vy,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Ro(Vy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",n),y}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=qP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class GP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class KP extends $P{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=I0();return new Promise(((u,d)=>{const f=new d2;f.setWithCredentials(!0),f.listenOnce(f2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case kf.NO_ERROR:const y=f.getResponseJson();_e(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case kf.TIMEOUT:_e(Mn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const v=f.getStatus();if(_e(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w?.error;if(T&&T.status&&T.message){const k=(function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(B)>=0?B:de.UNKNOWN})(T.status);d(new ve(k,T.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(Mn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);_e(Mn,`RPC '${e}' ${c} sending request:`,s),f.send(t,"POST",g,n,15)}))}T_(e,t,n){const s=I0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=p2(),u=g2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const g=o.join("");_e(Mn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const y=c.createWebChannel(g,d);this.I_(y);let v=!1,w=!1;const T=new GP({Yo:O=>{w?_e(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(_e(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),_e(Mn,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Zo:()=>y.close()}),k=(O,V,B)=>{O.listen(V,(F=>{try{B(F)}catch(q){setTimeout((()=>{throw q}),0)}}))};return k(y,ju.EventType.OPEN,(()=>{w||(_e(Mn,`RPC '${e}' stream ${s} transport opened.`),T.o_())})),k(y,ju.EventType.CLOSE,(()=>{w||(w=!0,_e(Mn,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(y))})),k(y,ju.EventType.ERROR,(O=>{w||(w=!0,Ro(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),T.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),k(y,ju.EventType.MESSAGE,(O=>{if(!w){const V=O.data[0];Ce(!!V,16349);const B=V,F=B?.error||B[0]?.error;if(F){_e(Mn,`RPC '${e}' stream ${s} received error:`,F);const q=F.status;let K=(function(x){const S=ln[x];if(S!==void 0)return fA(S)})(q),z=F.message;K===void 0&&(K=de.INTERNAL,z="Unknown error status: "+q+" with message "+F.message),w=!0,T.a_(new ve(K,z)),y.close()}else _e(Mn,`RPC '${e}' stream ${s} received:`,V),T.u_(V)}})),k(u,m2.STAT_EVENT,(O=>{O.stat===a0.PROXY?_e(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===a0.NOPROXY&&_e(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function YP(){return typeof window<"u"?window:null}function Bf(){return typeof document<"u"?document:null}function rg(r){return new Q3(r,!0)}class GA{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const zE="PersistentStream";class KA{constructor(e,t,n,s,o,c,u,d){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Gn(t.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(zE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(_e(zE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class QP extends KA{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=J3(this.serializer,e),n=(function(o){if(!("targetChange"in o))return De.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?De.min():c.readTime?Yn(c.readTime):De.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=w0(this.serializer),t.addTarget=(function(o,c){let u;const d=c.target;if(u=lm(d)?{documents:wA(o,d)}:{query:xA(o,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=pA(o,c.resumeToken);const f=v0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(De.min())>0){u.readTime=mc(o,c.snapshotVersion.toTimestamp());const f=v0(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const n=eP(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=w0(this.serializer),t.removeTarget=e,this.q_(t)}}class WP extends KA{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Z3(e.writeResults,e.commitTime),n=Yn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=w0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>dm(this.serializer,n)))};this.q_(t)}}class XP{}class JP extends XP{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,b0(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,b0(t,n),s,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const jo="RemoteStore";class e6{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Go(this)&&(_e(jo,"Restarting streams for network reachability change."),await(async function(d){const f=Ue(d);f.Ea.add(4),await Vh(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ig(f)})(this))}))})),this.Ra=new ZP(n,s)}}async function ig(r){if(Go(r))for(const e of r.da)await e(!0)}async function Vh(r){for(const e of r.da)await e(!1)}function YA(r,e){const t=Ue(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),A_(t)?S_(t):Tc(t).O_()&&T_(t,e))}function E_(r,e){const t=Ue(r),n=Tc(t);t.Ia.delete(e),n.O_()&&QA(t,e),t.Ia.size===0&&(n.O_()?n.L_():Go(t)&&t.Ra.set("Unknown"))}function T_(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tc(r).Y_(e)}function QA(r,e){r.Va.Ue(e),Tc(r).Z_(e)}function S_(r){r.Va=new $3({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Tc(r).start(),r.Ra.ua()}function A_(r){return Go(r)&&!Tc(r).x_()&&r.Ia.size>0}function Go(r){return Ue(r).Ea.size===0}function WA(r){r.Va=void 0}async function t6(r){r.Ra.set("Online")}async function n6(r){r.Ia.forEach(((e,t)=>{T_(r,e)}))}async function r6(r,e){WA(r),A_(r)?(r.Ra.ha(e),S_(r)):r.Ra.set("Unknown")}async function i6(r,e,t){if(r.Ra.set("Online"),e instanceof gA&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(r,e)}catch(n){_e(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ym(r,n)}else if(e instanceof Uf?r.Va.Ze(e):e instanceof mA?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const n=await qA(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,f)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(un.EMPTY_BYTE_STRING,g.snapshotVersion)),QA(o,d);const y=new fs(g.target,d,f,g.sequenceNumber);T_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){_e(jo,"Failed to raise snapshot:",n),await ym(r,n)}}async function ym(r,e,t){if(!Ia(e))throw e;r.Ea.add(1),await Vh(r),r.Ra.set("Offline"),t||(t=()=>qA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{_e(jo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ig(r)}))}function XA(r,e){return e().catch((t=>ym(r,t,e)))}async function Lh(r){const e=Ue(r),t=Ta(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:po;for(;s6(e);)try{const s=await zP(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,a6(e,s)}catch(s){await ym(e,s)}JA(e)&&ZA(e)}function s6(r){return Go(r)&&r.Ta.length<10}function a6(r,e){r.Ta.push(e);const t=Ta(r);t.O_()&&t.X_&&t.ea(e.mutations)}function JA(r){return Go(r)&&!Ta(r).x_()&&r.Ta.length>0}function ZA(r){Ta(r).start()}async function o6(r){Ta(r).ra()}async function l6(r){const e=Ta(r);for(const t of r.Ta)e.ea(t.mutations)}async function c6(r,e,t){const n=r.Ta.shift(),s=d_.from(n,e,t);await XA(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await Lh(r)}async function u6(r,e){e&&Ta(r).X_&&await(async function(n,s){if((function(c){return F3(c)&&c!==de.ABORTED})(s.code)){const o=n.Ta.shift();Ta(n).B_(),await XA(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Lh(n)}})(r,e),JA(r)&&ZA(r)}async function BE(r,e){const t=Ue(r);t.asyncQueue.verifyOperationInProgress(),_e(jo,"RemoteStore received new credentials");const n=Go(t);t.Ea.add(3),await Vh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ig(t)}async function h6(r,e){const t=Ue(r);e?(t.Ea.delete(2),await ig(t)):e||(t.Ea.add(2),await Vh(t),t.Ra.set("Unknown"))}function Tc(r){return r.ma||(r.ma=(function(t,n,s){const o=Ue(t);return o.sa(),new QP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:t6.bind(null,r),t_:n6.bind(null,r),r_:r6.bind(null,r),H_:i6.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),A_(r)?S_(r):r.Ra.set("Unknown")):(await r.ma.stop(),WA(r))}))),r.ma}function Ta(r){return r.fa||(r.fa=(function(t,n,s){const o=Ue(t);return o.sa(),new WP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:o6.bind(null,r),r_:u6.bind(null,r),ta:l6.bind(null,r),na:c6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Lh(r)):(await r.fa.stop(),r.Ta.length>0&&(_e(jo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class I_{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,u=new I_(e,t,c,s,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(r,e){if(Gn("AsyncQueue",`${e}: ${r}`),Ia(r))return new ve(de.UNAVAILABLE,`${e}: ${r}`);throw r}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=Vu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class FE{constructor(){this.ga=new Lt(we.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class gc{constructor(e,t,n,s,o,c,u,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new gc(e,t,ec.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class d6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f6{constructor(){this.queries=HE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ue(t),o=s.queries;s.queries=HE(),o.forEach(((c,u)=>{for(const d of u.Sa)d.onError(n)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function HE(){return new Ts((r=>eA(r)),Ym)}async function C_(r,e){const t=Ue(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new d6,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=R_(c,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&k_(t)}async function N_(r,e){const t=Ue(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function m6(r,e){const t=Ue(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(s)&&(n=!0);c.wa=s}}n&&k_(t)}function g6(r,e,t){const n=Ue(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function k_(r){r.Ca.forEach((e=>{e.next()}))}var R0,qE;(qE=R0||(R0={})).Ma="default",qE.Cache="cache";class D_{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new gc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==R0.Cache}}class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class p6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=tA(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new FE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const v=s.get(g),w=Ph(this.query,y)?y:null,T=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?T!==k&&(n.track({type:3,doc:w}),O=!0):this.su(v,w)||(n.track({type:2,doc:w}),O=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!v&&w?(n.track({type:0,doc:w}),O=!0):v&&!w&&(n.track({type:1,doc:v}),O=!0,(d||f)&&(u=!0)),O&&(w?(c=c.add(w),o=k?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(w,T){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:O})}};return k(w)-k(T)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,c.length!==0||f?{snapshot:new gc(this.query,e.tu,o,c,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new tI(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new eI(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const O_="SyncEngine";class y6{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _6{constructor(e){this.key=e,this.hu=!1}}class v6{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ts((u=>eA(u)),Ym),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(we.comparator),this.Au=new Map,this.Ru=new __,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b6(r,e,t=!0){const n=oI(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await nI(n,e,t,!0),s}async function w6(r,e){const t=oI(r);await nI(t,e,!0,!1)}async function nI(r,e,t,n){const s=await BP(r.localStore,Lr(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await x6(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&YA(r.remoteStore,s),u}async function x6(r,e,t,n,s){r.pu=(y,v,w)=>(async function(k,O,V,B){let F=O.view.ru(V);F.Cs&&(F=await jE(k.localStore,O.query,!1).then((({documents:M})=>O.view.ru(M,F))));const q=B&&B.targetChanges.get(O.targetId),K=B&&B.targetMismatches.get(O.targetId)!=null,z=O.view.applyChanges(F,k.isPrimaryClient,q,K);return GE(k,O.targetId,z.au),z.snapshot})(r,y,v,w);const o=await jE(r.localStore,e,!0),c=new p6(e,o.Qs),u=c.ru(o.documents),d=jh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),f=c.applyChanges(u,r.isPrimaryClient,d);GE(r,t,f.au);const g=new y6(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),f.snapshot}async function E6(r,e,t){const n=Ue(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!Ym(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await A0(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&E_(n.remoteStore,s.targetId),C0(n,s.targetId)})).catch($o)):(C0(n,s.targetId),await A0(n.localStore,s.targetId,!0))}async function T6(r,e){const t=Ue(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),E_(t.remoteStore,n.targetId))}async function S6(r,e,t){const n=lI(r);try{const s=await(function(c,u){const d=Ue(c),f=wt.now(),g=u.reduce(((w,T)=>w.add(T.key)),Ye());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let T=vr(),k=Ye();return d.Ns.getEntries(w,g).next((O=>{T=O,T.forEach(((V,B)=>{B.isValidDocument()||(k=k.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,T))).next((O=>{y=O;const V=[];for(const B of u){const F=z3(B,y.get(B.key).overlayedDocument);F!=null&&V.push(new Ss(B.key,F,$2(F.value.mapValue),Ln.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,V,u)})).next((O=>{v=O;const V=O.applyToLocalDocumentSet(y,k);return d.documentOverlayCache.saveOverlays(w,O.batchId,V)}))})).then((()=>({batchId:v.batchId,changes:rA(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let f=c.Vu[c.currentUser.toKey()];f||(f=new Lt(Le)),f=f.insert(u,d),c.Vu[c.currentUser.toKey()]=f})(n,s.batchId,t),await Uh(n,s.changes),await Lh(n.remoteStore)}catch(s){const o=R_(s,"Failed to persist write");t.reject(o)}}async function rI(r,e){const t=Ue(r);try{const n=await LP(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ce(c.hu,14607):s.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await Uh(t,n,e)}catch(n){await $o(n)}}function $E(r,e,t){const n=Ue(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ue(c);d.onlineState=u;let f=!1;d.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&k_(d)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function A6(r,e,t){const n=Ue(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new Lt(we.comparator);c=c.insert(o,$t.newNoDocument(o,De.min()));const u=Ye().add(o),d=new Zm(De.min(),new Map,new Lt(Le),c,u);await rI(n,d),n.du=n.du.remove(o),n.Au.delete(e),M_(n)}else await A0(n.localStore,e,!1).then((()=>C0(n,e,t))).catch($o)}async function I6(r,e){const t=Ue(r),n=e.batch.batchId;try{const s=await VP(t.localStore,e);sI(t,n,null),iI(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Uh(t,s)}catch(s){await $o(s)}}async function R6(r,e,t){const n=Ue(r);try{const s=await(function(c,u){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(Ce(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>d.localDocuments.getDocuments(f,g)))}))})(n.localStore,e);sI(n,e,t),iI(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Uh(n,s)}catch(s){await $o(s)}}function iI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function sI(r,e,t){const n=Ue(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function C0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||aI(r,n)}))}function aI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(E_(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),M_(r))}function GE(r,e,t){for(const n of t)n instanceof eI?(r.Ru.addReference(n.key,e),C6(r,n)):n instanceof tI?(_e(O_,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||aI(r,n.key)):Ae(19791,{wu:n})}function C6(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(_e(O_,"New document in limbo: "+t),r.Eu.add(n),M_(r))}function M_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(gt.fromString(e)),n=r.fu.next();r.Au.set(n,new _6(t)),r.du=r.du.insert(t,n),YA(r.remoteStore,new fs(Lr(Mh(t.path)),n,"TargetPurposeLimboResolution",Vr.ce))}}async function Uh(r,e,t){const n=Ue(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,d)=>{c.push(n.pu(d,e,t).then((f=>{if((f||t)&&n.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;n.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(f){s.push(f);const g=w_.As(d.targetId,f);o.push(g)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(d,f){const g=Ue(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>se.forEach(f,(v=>se.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>se.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Ia(y))throw y;_e(x_,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),T=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(T);g.Ms=g.Ms.insert(v,k)}}})(n.localStore,o))}async function N6(r,e){const t=Ue(r);if(!t.currentUser.isEqual(e)){_e(O_,"User change. New user:",e.toKey());const n=await HA(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Uh(t,n.Ls)}}function k6(r,e){const t=Ue(r),n=t.Au.get(e);if(n&&n.hu)return Ye().add(n.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function oI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.H_=m6.bind(null,e.eventManager),e.Pu.yu=g6.bind(null,e.eventManager),e}function lI(r){const e=Ue(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FA(this.persistence,new BA,e.initialUser,this.serializer)}Cu(e){return new v_(ng.mi,this.serializer)}Du(e){return new $A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class D6 extends ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof pm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new jA(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new v_((n=>pm.mi(n,t)),this.serializer)}}class O6 extends ph{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await lI(this.xu.syncEngine),await Lh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return FA(this.persistence,new BA,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new jA(n,e.asyncQueue,t)}Mu(e,t){const n=new UM(t,this.persistence);return new LM(e.asyncQueue,n)}Cu(e){const t=OP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new b_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,YP(),Bf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new $A}}class _m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>$E(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=N6.bind(null,this.syncEngine),await h6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f6})()}createDatastore(e){const t=rg(e.databaseInfo.databaseId),n=(function(o){return new KP(o)})(e.databaseInfo);return(function(o,c,u,d){return new JP(o,c,u,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,u){return new e6(n,s,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>$E(this.syncEngine,t,0)),(function(){return UE.v()?new UE:new HP})())}createSyncEngine(e,t){return(function(s,o,c,u,d,f,g){const y=new v6(s,o,c,u,d,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ue(t);_e(jo,"RemoteStore shutting down."),n.Ea.add(5),await Vh(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_m.provider={build:()=>new _m};class P_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Sa="FirestoreClient";class M6{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{_e(Sa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(_e(Sa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=R_(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ly(r,e){r.asyncQueue.verifyOperationInProgress(),_e(Sa,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await HA(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function KE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await P6(r);_e(Sa,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>BE(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>BE(e.remoteStore,s))),r._onlineComponents=e}async function P6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){_e(Sa,"Using user provided OfflineComponentProvider");try{await Ly(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await Ly(r,new ph)}}else _e(Sa,"Using default OfflineComponentProvider"),await Ly(r,new D6(void 0));return r._offlineComponents}async function cI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(_e(Sa,"Using user provided OnlineComponentProvider"),await KE(r,r._uninitializedComponentsProvider._online)):(_e(Sa,"Using default OnlineComponentProvider"),await KE(r,new _m))),r._onlineComponents}function j6(r){return cI(r).then((e=>e.syncEngine))}async function vm(r){const e=await cI(r),t=e.eventManager;return t.onListen=b6.bind(null,e.syncEngine),t.onUnlisten=E6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T6.bind(null,e.syncEngine),t}function V6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new P_({next:v=>{g.Nu(),c.enqueueAndForget((()=>N_(o,y)));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new D_(Mh(u.path),g,{includeMetadataChanges:!0,qa:!0});return C_(o,y)})(await vm(r),r.asyncQueue,e,t,n))),n.promise}function L6(r,e,t={}){const n=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,d,f){const g=new P_({next:v=>{g.Nu(),c.enqueueAndForget((()=>N_(o,y))),v.fromCache&&d.source==="server"?f.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new D_(u,g,{includeMetadataChanges:!0,qa:!0});return C_(o,y)})(await vm(r),r.asyncQueue,e,t,n))),n.promise}function uI(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const YE=new Map;const hI="firestore.googleapis.com",QE=!0;class WE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hI,this.ssl=QE}else this.host=e.host,this.ssl=e.ssl??QE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pP)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uI(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new TM;switch(n.type){case"firstParty":return new RM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=YE.get(t);n&&(_e("ComponentProvider","Removing Datastore"),YE.delete(t),n.terminate())})(this),Promise.resolve()}}function U6(r,e,t,n={}){r=Kn(r,sg);const s=Fo(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;s&&(U0(`https://${u}`),z0("Firestore",!0)),o.host!==hI&&o.host!==u&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:n};if(!ys(d,c)&&(r._setSettings(d),n.mockUserToken)){let f,g;if(typeof n.mockUserToken=="string")f=n.mockUserToken,g=Cn.MOCK_USER;else{f=vS(n.mockUserToken,r._app?.options.projectId);const y=n.mockUserToken.sub||n.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cn(y)}r._authCredentials=new SM(new _2(f,g))}}class As{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Gt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(kh(t,Gt._jsonSchema))return new Gt(e,n||null,new we(gt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:cn("string",Gt._jsonSchemaVersion),referencePath:cn("string")};class va extends As{constructor(e,t,n){super(e,t,Mh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new we(e))}withConverter(e){return new va(this.firestore,e,this._path)}}function sr(r,e,...t){if(r=Jt(r),b2("collection","path",e),r instanceof sg){const n=gt.fromString(e,...t);return zx(n),new va(r,null,n)}{if(!(r instanceof Gt||r instanceof va))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(gt.fromString(e,...t));return zx(n),new va(r.firestore,null,n)}}function Mt(r,e,...t){if(r=Jt(r),arguments.length===1&&(e=Z0.newId()),b2("doc","path",e),r instanceof sg){const n=gt.fromString(e,...t);return Ux(n),new Gt(r,null,new we(n))}{if(!(r instanceof Gt||r instanceof va))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(gt.fromString(e,...t));return Ux(n),new Gt(r.firestore,r instanceof va?r.converter:null,new we(n))}}const XE="AsyncQueue";class JE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GA(this,"async_queue_retry"),this._c=()=>{const n=Bf();n&&_e(XE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;_e(XE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",ZE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=I_.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function eT(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Ui extends sg{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new JE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JE(e),this._firestoreClient=void 0,await e}}}function z6(r,e){const t=typeof r=="object"?r:H0(),n=typeof r=="string"?r:om,s=jm(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=pS("firestore");o&&U6(s,...o)}return s}function ag(r){if(r._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||dI(r),r._firestoreClient}function dI(r){const e=r._freezeSettings(),t=(function(s,o,c,u){return new m3(s,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new M6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}function B6(r,e){Ro("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return F6(r,_m.provider,{build:n=>new O6(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function F6(r,e,t){if((r=Kn(r,Ui))._firestoreClient||r._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},dI(r)}class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(un.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kh(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:cn("string",jr._jsonSchemaVersion),bytes:cn("string")};class og{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._methodName=e}}class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(kh(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:cn("string",ji._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kh(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:cn("string",Vi._jsonSchemaVersion),vectorValues:cn("object")};const H6=/^__.*__$/;class q6{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class fI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class lg{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mI(this.Ac)&&H6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $6{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||rg(e)}Cc(e,t,n,s=!1){return new lg({Ac:e,methodName:t,Dc:n,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cg(r){const e=r._freezeSettings(),t=rg(r._databaseId);return new $6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function gI(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);U_("Data must be an object, but it was:",c,n);const u=yI(n,c);let d,f;if(o.merge)d=new ir(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=N0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);vI(g,v)||g.push(v)}d=new ir(g),f=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=c.fieldTransforms;return new q6(new jn(u),d,f)}class ug extends Sc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ug}}function pI(r,e,t){return new lg({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class j_ extends Sc{_toFieldTransform(e){return new Wm(e.path,new fc)}isEqual(e){return e instanceof j_}}class V_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pI(this,e,!0),n=this.vc.map((o=>Ko(o,t))),s=new ko(n);return new Wm(e.path,s)}isEqual(e){return e instanceof V_&&ys(this.vc,e.vc)}}class L_ extends Sc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pI(this,e,!0),n=this.vc.map((o=>Ko(o,t))),s=new Do(n);return new Wm(e.path,s)}isEqual(e){return e instanceof L_&&ys(this.vc,e.vc)}}function G6(r,e,t,n){const s=r.Cc(1,e,t);U_("Data must be an object, but it was:",s,n);const o=[],c=jn.empty();Ra(n,((d,f)=>{const g=z_(e,d,t);f=Jt(f);const y=s.yc(g);if(f instanceof ug)o.push(g);else{const v=Ko(f,y);v!=null&&(o.push(g),c.set(g,v))}}));const u=new ir(o);return new fI(c,u,s.fieldTransforms)}function K6(r,e,t,n,s,o){const c=r.Cc(1,e,t),u=[N0(e,n,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(N0(e,o[v])),d.push(o[v+1]);const f=[],g=jn.empty();for(let v=u.length-1;v>=0;--v)if(!vI(f,u[v])){const w=u[v];let T=d[v];T=Jt(T);const k=c.yc(w);if(T instanceof ug)f.push(w);else{const O=Ko(T,k);O!=null&&(f.push(w),g.set(w,O))}}const y=new ir(f);return new fI(g,y,c.fieldTransforms)}function Y6(r,e,t,n=!1){return Ko(t,r.Cc(n?4:3,e))}function Ko(r,e){if(_I(r=Jt(r)))return U_("Unsupported field value:",e,r),yI(r,e);if(r instanceof Sc)return(function(n,s){if(!mI(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const u of n){let d=Ko(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=Jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return M3(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=wt.fromDate(n);return{timestampValue:mc(s.serializer,o)}}if(n instanceof wt){const o=new wt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mc(s.serializer,o)}}if(n instanceof ji)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof jr)return{bytesValue:pA(s.serializer,n._byteString)};if(n instanceof Gt){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:g_(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Vi)return(function(c,u){return{mapValue:{fields:{[o_]:{stringValue:l_},[cc]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return u_(u.serializer,f)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${zm(n)}`)})(r,e)}function yI(r,e){const t={};return j2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(r,((n,s)=>{const o=Ko(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function _I(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof wt||r instanceof ji||r instanceof jr||r instanceof Gt||r instanceof Sc||r instanceof Vi)}function U_(r,e,t){if(!_I(t)||!w2(t)){const n=zm(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function N0(r,e,t){if((e=Jt(e))instanceof og)return e._internalPath;if(typeof e=="string")return z_(r,e);throw bm("Field path arguments must be of type string or ",r,!1,void 0,t)}const Q6=new RegExp("[~\\*/\\[\\]]");function z_(r,e,t){if(e.search(Q6)>=0)throw bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new og(...e.split("."))._internalPath}catch{throw bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bm(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${n}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,u+r+d)}function vI(r,e){return r.some((t=>t.isEqual(e)))}class bI{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W6 extends bI{data(){return super.data()}}function hg(r,e){return typeof e=="string"?z_(r,e):e instanceof og?e._internalPath:e._delegate._internalPath}function wI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B_{}class F_ extends B_{}function Vo(r,e,...t){let n=[];e instanceof B_&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((d=>d instanceof H_)).length,u=o.filter((d=>d instanceof dg)).length;if(c>1||c>0&&u>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class dg extends F_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dg(e,t,n)}_apply(e){const t=this._parse(e);return xI(e._query,t),new As(e.firestore,e.converter,_0(e._query,t))}_parse(e){const t=cg(e.firestore);return(function(o,c,u,d,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){nT(y,g);const T=[];for(const k of y)T.push(tT(d,o,k));v={arrayValue:{values:T}}}else v=tT(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||nT(y,g),v=Y6(u,c,y,g==="in"||g==="not-in");return tt.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pc(r,e,t){const n=e,s=hg("where",r);return dg._create(s,n,t)}class H_ extends B_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new H_(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:xt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const u=o.getFlattenedFilters();for(const d of u)xI(c,d),c=_0(c,d)})(e._query,t),new As(e.firestore,e.converter,_0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q_ extends F_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new q_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mh(o,c)})(e._query,this._field,this._direction);return new As(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new xc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function X6(r,e="asc"){const t=e,n=hg("orderBy",r);return q_._create(n,t)}class $_ extends F_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new $_(e,t,n)}_apply(e){return new As(e.firestore,e.converter,um(e._query,this._limit,this._limitType))}}function J6(r){return $_._create("limit",r,"F")}function tT(r,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z2(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(gt.fromString(t));if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return dh(r,new we(n))}if(t instanceof Gt)return dh(r,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zm(t)}.`)}function nT(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xI(r,e){const t=(function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z6{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ra(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[cc].arrayValue?.values?.map((n=>Vt(n.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ji(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Gm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gt.fromString(e);Ce(AA(n),9688,{name:e});const s=new Co(n.get(1),n.get(3)),o=new we(n.popFirst(5));return s.isEqual(t)||Gn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function EI(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends bI{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:cn("string",vo._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Ff extends vo{data(e={}){return super.data(e)}}class bo{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ff(this._firestore,this._userDataWriter,n.key,n,new zu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new Ff(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Ff(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:ej(u.type),doc:d,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Z0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ej(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}function Lo(r){r=Kn(r,Gt);const e=Kn(r.firestore,Ui);return V6(ag(e),r._key).then((t=>TI(e,r,t)))}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:cn("string",bo._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class G_ extends Z6{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function yc(r){r=Kn(r,As);const e=Kn(r.firestore,Ui),t=ag(e),n=new G_(e);return wI(r._query),L6(t,r._query).then((s=>new bo(e,n,r,s)))}function fg(r,e,t){r=Kn(r,Gt);const n=Kn(r.firestore,Ui),s=EI(r.converter,e,t);return mg(n,[gI(cg(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Ln.none())])}function wr(r,e,t,...n){r=Kn(r,Gt);const s=Kn(r.firestore,Ui),o=cg(s);let c;return c=typeof(e=Jt(e))=="string"||e instanceof og?K6(o,"updateDoc",r._key,e,t,n):G6(o,"updateDoc",r._key,e),mg(s,[c.toMutation(r._key,Ln.exists(!0))])}function wm(r){return mg(Kn(r.firestore,Ui),[new Jm(r._key,Ln.none())])}function zh(r,e){const t=Kn(r.firestore,Ui),n=Mt(r),s=EI(r.converter,e);return mg(t,[gI(cg(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Ln.exists(!1))]).then((()=>n))}function tc(r,...e){r=Jt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||eT(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(eT(e[n])){const d=e[n];e[n]=d.next?.bind(d),e[n+1]=d.error?.bind(d),e[n+2]=d.complete?.bind(d)}let o,c,u;if(r instanceof Gt)c=Kn(r.firestore,Ui),u=Mh(r._key.path),o={next:d=>{e[n]&&e[n](TI(c,r,d))},error:e[n+1],complete:e[n+2]};else{const d=Kn(r,As);c=Kn(d.firestore,Ui),u=d._query;const f=new G_(c);o={next:g=>{e[n]&&e[n](new bo(c,f,d,g))},error:e[n+1],complete:e[n+2]},wI(r._query)}return(function(f,g,y,v){const w=new P_(v),T=new D_(g,w,y);return f.asyncQueue.enqueueAndForget((async()=>C_(await vm(f),T))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>N_(await vm(f),T)))}})(ag(c),u,s,o)}function mg(r,e){return(function(n,s){const o=new Pi;return n.asyncQueue.enqueueAndForget((async()=>S6(await j6(n),s,o))),o.promise})(ag(r),e)}function TI(r,e,t){const n=t.docs.get(e._key),s=new G_(r);return new vo(r,s,e._key,n,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function ar(){return new j_("serverTimestamp")}function K_(...r){return new V_("arrayUnion",r)}function SI(...r){return new L_("arrayRemove",r)}(function(e,t=!0){(function(s){wc=s})(Ho),To(new wa("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),u=new Ui(new AM(n.getProvider("auth-internal")),new CM(c,n.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(f.options.projectId,g)})(c,s),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Di(Px,jx,e),Di(Px,jx,"esm2020")})();const AI="firebasestorage.googleapis.com",tj="storageBucket",nj=120*1e3,rj=600*1e3;class Hi extends Bi{constructor(e,t,n=0){super(Uy(e),`Firebase Storage: ${t} (${Uy(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function Uy(r){return"storage/"+r}function ij(){const r="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,r)}function sj(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aj(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function oj(r){return new Hi(zi.INVALID_URL,"Invalid URL '"+r+"'.")}function lj(r){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function rT(r){return new Hi(zi.INVALID_ARGUMENT,r)}function II(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function cj(r){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(n.path==="")return n;throw lj(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),T={bucket:1,path:3},k=t===AI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",V=new RegExp(`^https?://${k}/${s}/${O}`,"i"),F=[{regex:u,indices:d,postModify:o},{regex:w,indices:T,postModify:f},{regex:V,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<F.length;q++){const K=F[q],z=K.regex.exec(e);if(z){const M=z[K.indices.bucket];let x=z[K.indices.path];x||(x=""),n=new ni(M,x),K.postModify(n);break}}if(n==null)throw oj(e);return n}}class uj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hj(r,e,t){let n=1,s=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...O){f||(f=!0,e.apply(null,O))}function y(O){s=setTimeout(()=>{s=null,r(w,d())},O)}function v(){o&&clearTimeout(o)}function w(O,...V){if(f){v();return}if(O){v(),g.call(null,O,...V);return}if(d()||c){v(),g.call(null,O,...V);return}n<64&&(n*=2);let F;u===1?(u=2,F=0):F=(n+Math.random())*1e3,y(F)}let T=!1;function k(O){T||(T=!0,v(),!f&&(s!==null?(O||(u=2),clearTimeout(s),y(0)):O||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,k(!0)},t),k}function dj(r){r(!1)}function fj(r){return r!==void 0}function iT(r,e,t,n){if(n<e)throw rT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw rT(`Invalid value for '${r}'. Expected ${t} or less.`)}function mj(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var xm;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(xm||(xm={}));function gj(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class pj{constructor(e,t,n,s,o,c,u,d,f,g,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,k)=>{this.resolve_=T,this.reject_=k,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new xf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===xm.NO_ERROR,d=o.getStatus();if(!u||gj(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===xm.ABORT;n(!1,new xf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new xf(f,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());fj(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=ij();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(s.canceled){const d=this.appDelete_?II():aj();c(d)}else{const d=sj();c(d)}};this.canceled_?t(!1,new xf(!1,null,!0)):this.backoffId_=hj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function yj(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function _j(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vj(r,e){e&&(r["X-Firebase-GMPID"]=e)}function bj(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function wj(r,e,t,n,s,o,c=!0,u=!1){const d=mj(r.urlParams),f=r.url+d,g=Object.assign({},r.headers);return vj(g,e),yj(g,t),_j(g,o),bj(g,n),new pj(f,r.method,g,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,u)}function xj(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Ej(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Em{constructor(e,t){this._service=e,t instanceof ni?this._location=t:this._location=ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Em(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ej(this._location.path)}get storage(){return this._service}get parent(){const e=xj(this._location.path);if(e===null)return null;const t=new ni(this._location.bucket,e);return new Em(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw cj(e)}}function sT(r,e){const t=e?.[tj];return t==null?null:ni.makeFromBucketSpec(t,r)}function Tj(r,e,t,n={}){r.host=`${e}:${t}`;const s=Fo(e);s&&(U0(`https://${r.host}/b`),z0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:vS(o,r.app.options.projectId))}class Sj{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=AI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nj,this._maxUploadRetryTime=rj,this._requests=new Set,s!=null?this._bucket=ni.makeFromBucketSpec(s,this._host):this._bucket=sT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=sT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Em(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new uj(II());{const c=wj(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const aT="@firebase/storage",oT="0.14.0";const RI="storage";function Aj(r=H0(),e){r=Jt(r);const n=jm(r,RI).getImmediate({identifier:e}),s=pS("storage");return s&&Ij(n,...s),n}function Ij(r,e,t,n={}){Tj(r,e,t,n)}function Rj(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new Sj(t,n,s,e,Ho)}function Cj(){To(new wa(RI,Rj,"PUBLIC").setMultipleInstances(!0)),Di(aT,oT,""),Di(aT,oT,"esm2020")}Cj();const Nj={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},Y_=AS(Nj),_r=xM(Y_),Ke=z6(Y_);Aj(Y_);new us;try{B6(Ke).catch(r=>{r.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):r.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const CI=$.createContext();function ai(){return $.useContext(CI)}function kj({children:r}){const[e,t]=$.useState(null),[n,s]=$.useState(!0);$.useEffect(()=>h5(_r,async f=>{if(f){t(f);try{const g=Mt(Ke,"users",f.uid),y=await Lo(g);if(y.exists())t(v=>({...v,...y.data()}));else{console.warn("User document missing. Creating sync record...");const v={uid:f.uid,name:f.displayName||"User",displayName:f.displayName||"User",email:f.email,photoURL:f.photoURL,avatar:f.photoURL,createdAt:f.metadata.creationTime?new Date(f.metadata.creationTime):new Date,lastSeen:new Date,bio:""};try{await fg(g,v),t(w=>({...w,...v}))}catch(w){console.error("Failed to auto-create user doc:",w)}}}catch(g){console.error("Error fetching/syncing user profile:",g)}}else t(null);s(!1)}),[]);const u={currentUser:e,loading:n,logout:async()=>{await _r.signOut(),t(null)},refreshUser:async()=>{if(_r.currentUser){await _r.currentUser.reload();const d=_r.currentUser;let f={};try{const g=await Lo(Mt(Ke,"users",d.uid));g.exists()&&(f=g.data())}catch(g){console.error("Error refreshing profile:",g)}t({...d,...f})}}};return b.jsx(CI.Provider,{value:u,children:!n&&r})}const Dj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oj=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),lT=r=>{const e=Oj(r);return e.charAt(0).toUpperCase()+e.slice(1)},NI=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),Mj=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jj=$.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},d)=>$.createElement("svg",{ref:d,...Pj,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:NI("lucide",s),...!o&&!Mj(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>$.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Oe=(r,e)=>{const t=$.forwardRef(({className:n,...s},o)=>$.createElement(jj,{ref:o,iconNode:e,className:NI(`lucide-${Dj(lT(r))}`,`lucide-${r}`,n),...s}));return t.displayName=lT(r),t};const Vj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Tm=Oe("activity",Vj);const Lj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Uj=Oe("arrow-left",Lj);const zj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kI=Oe("arrow-right",zj);const Bj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Fj=Oe("award",Bj);const Hj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],qj=Oe("brain",Hj);const $j=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Gj=Oe("calendar-check",$j);const Kj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],wo=Oe("camera",Kj);const Yj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],DI=Oe("chevron-down",Yj);const Qj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wj=Oe("chevron-right",Qj);const Xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],OI=Oe("circle-alert",Xj);const Jj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gg=Oe("circle-check-big",Jj);const Zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eV=Oe("circle-check",Zj);const tV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MI=Oe("clock",tV);const nV=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],rV=Oe("crown",nV);const iV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sV=Oe("file-text",iV);const aV=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]],oV=Oe("flower",aV);const lV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cV=Oe("globe",lV);const uV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],hV=Oe("grid-3x3",uV);const dV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],fV=Oe("heart",dV);const mV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],PI=Oe("house",mV);const gV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jI=Oe("image",gV);const pV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VI=Oe("info",pV);const yV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],LI=Oe("leaf",yV);const _V=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xo=Oe("loader-circle",_V);const vV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cT=Oe("log-in",vV);const bV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UI=Oe("log-out",bV);const wV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xV=Oe("mail",wV);const EV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],yh=Oe("message-circle",EV);const TV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],SV=Oe("mic",TV);const AV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],zI=Oe("moon",AV);const IV=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],uT=Oe("paperclip",IV);const RV=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],CV=Oe("pause",RV);const NV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],BI=Oe("pen",NV);const kV=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],DV=Oe("play",kV);const OV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],MV=Oe("plus",OV);const PV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],FI=Oe("refresh-cw",PV);const jV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],HI=Oe("save",jV);const VV=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],hT=Oe("scan-line",VV);const LV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],UV=Oe("search",LV);const zV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_h=Oe("send",zV);const BV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],k0=Oe("share-2",BV);const FV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],HV=Oe("shield-check",FV);const qV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$V=Oe("sparkles",qV);const GV=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],zr=Oe("sprout",GV);const KV=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dT=Oe("stethoscope",KV);const YV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],qI=Oe("sun",YV);const QV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sm=Oe("trash-2",QV);const WV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D0=Oe("triangle-alert",WV);const XV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],JV=Oe("user-plus",XV);const ZV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Am=Oe("user",ZV);const eL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tL=Oe("users",eL);const nL=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],rL=Oe("wand-sparkles",nL);const iL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Uo=Oe("x",iL);const sL=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],aL=Oe("zap",sL),$I=$.createContext(null),Ca=()=>$.useContext($I),oL=({children:r})=>{const[e,t]=$.useState([]),n=$.useCallback((o,c="info",u=3e3)=>{const d=Date.now();t(f=>[...f,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},u)},[]),s=$.useCallback(o=>{t(c=>c.filter(u=>u.id!==o))},[]);return b.jsxs($I.Provider,{value:{addToast:n},children:[r,b.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm rounded-xl p-4 shadow-lg border animate-slide-in-right flex items-start gap-3 transform transition-all duration-300
                        ${o.type==="success"?"bg-white dark:bg-gray-800 border-green-500 text-gray-800 dark:text-white":o.type==="error"?"bg-white dark:bg-gray-800 border-red-500 text-gray-800 dark:text-white":"bg-white dark:bg-gray-800 border-blue-500 text-gray-800 dark:text-white"}`,children:[o.type==="success"&&b.jsx(gg,{className:"w-5 h-5 text-green-500 shrink-0"}),o.type==="error"&&b.jsx(OI,{className:"w-5 h-5 text-red-500 shrink-0"}),o.type==="info"&&b.jsx(VI,{className:"w-5 h-5 text-blue-500 shrink-0"}),b.jsx("p",{className:"text-sm font-medium flex-1",children:o.message}),b.jsx("button",{onClick:()=>s(o.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:b.jsx(Uo,{className:"w-4 h-4"})})]},o.id))})]})};class GI extends BT.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}handleGoHome=()=>{this.setState({hasError:!1,error:null}),window.location.href="/"};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center animate-fade-in text-gray-900 dark:text-white",children:[b.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-6 rounded-full mb-6",children:b.jsx(D0,{className:"w-12 h-12 text-red-600 dark:text-red-400"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something went wrong"}),b.jsx("p",{className:"mb-8 max-w-md text-gray-500 dark:text-gray-400",children:this.state.error?.message||"An unexpected error occurred."}),b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:this.handleReload,className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[b.jsx(FI,{className:"w-5 h-5"}),"Reload"]}),b.jsxs("button",{onClick:this.handleGoHome,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(PI,{className:"w-5 h-5"}),"Go Home"]})]})]}):this.props.children}}function lL(){const{currentUser:r,logout:e}=ai(),{t,i18n:n}=zn(),s=xr(),o=xs(),{addToast:c}=Ca(),u=()=>{n.changeLanguage(n.language==="en"?"tr":"en")},[d,f]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[g]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{f(T=>T==="dark"?"light":"dark")};$.useEffect(()=>{if(!r)return;const T=async()=>{try{await wr(Mt(Ke,"users",r.uid),{lastSeen:ar()})}catch(O){console.error("Presence update failed",O)}};T();const k=setInterval(T,60*1e3);return()=>clearInterval(k)},[r]),$.useEffect(()=>{if(!r)return;const T=Vo(sr(Ke,"chats"),pc("participants","array-contains",r.uid)),k=tc(T,O=>{O.docChanges().forEach(V=>{if(V.type==="modified"){const B=V.doc.data(),F=B.updatedAt?.seconds*1e3;if(Date.now()-F>5e3)return;const q=B.participants.find(z=>z!==r.uid);if(!(s.pathname===`/messages/${V.doc.id}`)&&q){const z=B.participantData?.[q]||{name:"Someone"};g.play().catch(M=>console.log("Audio play failed",M)),c(`New message from ${z.name}: ${B.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>k()},[r,s.pathname,c,g]);const w=[{path:"/",icon:PI,label:t("app_name"),public:!0},{path:"/community",icon:tL,label:t("community"),public:!0},{path:"/analyses",icon:MI,label:t("analyses"),public:!1},{path:"/messages",icon:yh,label:t("messages"),public:!1},{path:"/profile",icon:Am,label:t("profile"),public:!1},{path:"/about",icon:VI,label:t("about"),public:!0}].filter(T=>T.public||r);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(ei,{to:"/",onClick:()=>window.scrollTo(0,0),className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zr,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(T=>{const k=T.icon,O=s.pathname===T.path;return b.jsxs(ei,{to:T.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${O?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(k,{className:"w-5 h-5"}),b.jsx("span",{children:T.label})]},T.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:n.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(qI,{className:"w-5 h-5"}):b.jsx(zI,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),r?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("img",{src:r.photoURL||r.avatar||`https://ui-avatars.com/api/?name=${r.displayName||"User"}`,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-600"}),b.jsxs("div",{className:"flex-1 overflow-hidden",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",title:r.displayName||r.email,children:r.displayName||r.email})]})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(UI,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(ei,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(cT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(ei,{to:"/",onClick:()=>window.scrollTo(0,0),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(zr,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:u,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:n.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(GI,{children:b.jsx(lk,{})})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(T=>{const k=T.icon,O=s.pathname===T.path;return b.jsxs(ei,{to:T.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${O?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(k,{className:`w-6 h-6 ${O?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:T.label})]},T.path)}),!r&&b.jsxs(ei,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(cT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function cL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(!1),[d,f]=$.useState(!1),[g,y]=$.useState(!1),v=xs(),w=xr(),{t:T}=zn(),{currentUser:k}=ai(),{addToast:O}=Ca();if(k?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const V=async()=>{y(!0);try{const F=await Tx(_r,r,t);await ZS(F.user),await _r.signOut(),O(T("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(F){console.error("Resend error:",F),F.code==="auth/too-many-requests"?O(T("too_many_requests")||"Too many attempts. Please wait.","error"):O(T("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},B=async F=>{F.preventDefault(),o(""),f(!1),u(!0);try{if(!(await Tx(_r,r,t)).user.emailVerified){await _r.signOut(),f(!0);return}}catch(q){console.error(q);let K=T("login_failed")||"Failed to login.";q.code==="auth/user-not-found"||q.code==="auth/wrong-password"||q.code==="auth/invalid-credential"?K=T("invalid_credentials")||"Invalid email or password.":q.code==="auth/too-many-requests"?K=T("too_many_requests")||"Too many attempts. Try again later.":q.code==="auth/user-disabled"?K="Account disabled. Contact support.":q.code==="auth/network-request-failed"&&(K="Network error. Check your connection."),o(K)}finally{u(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:T("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:T("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(zr,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:T("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:T("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:V,disabled:g,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:g?"Sending...":T("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:B,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":T("login"),!c&&b.jsx(kI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(ei,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:T("register")})]})]})})})}function uL({user:r,onClose:e,onVerified:t}){const{t:n}=zn(),[s,o]=$.useState(!1);$.useEffect(()=>{const u=setInterval(async()=>{if(r)try{await r.reload(),r.emailVerified&&(clearInterval(u),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(u)},[r,t]);const c=async()=>{o(!0);try{await r.reload(),r.emailVerified&&t()}catch(u){console.error(u)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(xV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:n("verify_email_desc")||`We sent a confirmation link to ${r?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:n("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(FI,{className:"w-5 h-5 animate-spin"}):b.jsx(gg,{className:"w-5 h-5"}),n("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:n("cancel")||"Cancel"})]})]})})}function hL(){const[r,e]=$.useState(""),[t,n]=$.useState(""),[s,o]=$.useState(""),[c,u]=$.useState(""),[d,f]=$.useState(!1),[g,y]=$.useState(!1),[v,w]=$.useState(null),T=xs(),k=xr(),{t:O}=zn(),V=async F=>{F.preventDefault(),u(""),f(!0);try{const q=await o5(_r,r,t);await e2(q.user,{displayName:s}),await fg(Mt(Ke,"users",q.user.uid),{uid:q.user.uid,name:s,displayName:s,email:r,photoURL:null,avatar:null,createdAt:ar(),lastSeen:ar(),bio:""}),await ZS(q.user),w(q.user),y(!0),f(!1)}catch(q){u(q.message),console.error(q),f(!1)}},B=async()=>{_r.currentUser&&await _r.currentUser.reload(),y(!1),k.state?.returnUrl&&k.state?.pendingResult?T(k.state.returnUrl,{replace:!0,state:{restoredResult:k.state.pendingResult,restoredImages:k.state.pendingImages,restoredPlantType:k.state.pendingPlantType}}):T("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[g&&v&&b.jsx(uL,{user:v,onClose:()=>y(!1),onVerified:B}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(zr,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:O("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:O("create_account_desc")||O("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:V,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:F=>o(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:r,onChange:F=>e(F.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:O("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:F=>n(F.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?O("creating_account")||"Creating Account...":O("register"),!d&&b.jsx(JV,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[O("already_have_account")||"Already have an account?"," "," ",b.jsx(ei,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:O("login")})]})]})]})})}var fT;(function(r){r.STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object"})(fT||(fT={}));var mT;(function(r){r.LANGUAGE_UNSPECIFIED="language_unspecified",r.PYTHON="python"})(mT||(mT={}));var gT;(function(r){r.OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(gT||(gT={}));const pT=["user","model","function","system"];var yT;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yT||(yT={}));var _T;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(_T||(_T={}));var vT;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(vT||(vT={}));var bT;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER"})(bT||(bT={}));var Zu;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.OTHER="OTHER"})(Zu||(Zu={}));var wT;(function(r){r.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",r.RETRIEVAL_QUERY="RETRIEVAL_QUERY",r.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",r.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",r.CLASSIFICATION="CLASSIFICATION",r.CLUSTERING="CLUSTERING"})(wT||(wT={}));var xT;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE"})(xT||(xT={}));var ET;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(ET||(ET={}));class Vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Hl extends Vn{constructor(e,t){super(e),this.response=t}}class KI extends Vn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class ba extends Vn{}class YI extends Vn{}const dL="https://generativelanguage.googleapis.com",fL="v1beta",mL="0.24.1",gL="genai-js";var zo;(function(r){r.GENERATE_CONTENT="generateContent",r.STREAM_GENERATE_CONTENT="streamGenerateContent",r.COUNT_TOKENS="countTokens",r.EMBED_CONTENT="embedContent",r.BATCH_EMBED_CONTENTS="batchEmbedContents"})(zo||(zo={}));class pL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||fL;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||dL}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function yL(r){const e=[];return r?.apiClient&&e.push(r.apiClient),e.push(`${gL}/${mL}`),e.join(" ")}async function _L(r){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",yL(r.requestOptions)),t.append("x-goog-api-key",r.apiKey);let n=(e=r.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new ba(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new ba(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new ba(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function vL(r,e,t,n,s,o){const c=new pL(r,e,t,n,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},EL(o)),{method:"POST",headers:await _L(c),body:s})}}async function Bh(r,e,t,n,s,o={},c=fetch){const{url:u,fetchOptions:d}=await vL(r,e,t,n,s,o);return bL(u,d,c)}async function bL(r,e,t=fetch){let n;try{n=await t(r,e)}catch(s){wL(s,r)}return n.ok||await xL(n,r),n}function wL(r,e){let t=r;throw t.name==="AbortError"?(t=new YI(`Request aborted when fetching ${e.toString()}: ${r.message}`),t.stack=r.stack):r instanceof KI||r instanceof ba||(t=new Vn(`Error fetching from ${e.toString()}: ${r.message}`),t.stack=r.stack),t}async function xL(r,e){let t="",n;try{const s=await r.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new KI(`Error fetching from ${e.toString()}: [${r.status} ${r.statusText}] ${t}`,r.status,r.statusText,n)}function EL(r){const e={};if(r?.signal!==void 0||r?.timeout>=0){const t=new AbortController;r?.timeout>=0&&setTimeout(()=>t.abort(),r.timeout),r?.signal&&r.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Q_(r){return r.text=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return TL(r)}else if(r.promptFeedback)throw new Hl(`Text not available. ${la(r)}`,r);return""},r.functionCall=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),TT(r)[0]}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r.functionCalls=()=>{if(r.candidates&&r.candidates.length>0){if(r.candidates.length>1&&console.warn(`This response had ${r.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hf(r.candidates[0]))throw new Hl(`${la(r)}`,r);return TT(r)}else if(r.promptFeedback)throw new Hl(`Function call not available. ${la(r)}`,r)},r}function TL(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function TT(r){var e,t,n,s;const o=[];if(!((t=(e=r.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(n=r.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const SL=[Zu.RECITATION,Zu.SAFETY,Zu.LANGUAGE];function Hf(r){return!!r.finishReason&&SL.includes(r.finishReason)}function la(r){var e,t,n;let s="";if((!r.candidates||r.candidates.length===0)&&r.promptFeedback)s+="Response was blocked",!((e=r.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${r.promptFeedback.blockReason}`),!((t=r.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${r.promptFeedback.blockReasonMessage}`);else if(!((n=r.candidates)===null||n===void 0)&&n[0]){const o=r.candidates[0];Hf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function vh(r){return this instanceof vh?(this.v=r,this):new vh(r)}function AL(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){n[v]&&(s[v]=function(w){return new Promise(function(T,k){o.push([v,w,T,k])>1||u(v,w)})})}function u(v,w){try{d(n[v](w))}catch(T){y(o[0][3],T)}}function d(v){v.value instanceof vh?Promise.resolve(v.value.v).then(f,g):y(o[0][2],v)}function f(v){u("next",v)}function g(v){u("throw",v)}function y(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}const ST=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function IL(r){const e=r.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=NL(e),[n,s]=t.tee();return{stream:CL(n),response:RL(s)}}async function RL(r){const e=[],t=r.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return Q_(kL(e));e.push(s)}}function CL(r){return AL(this,arguments,function*(){const t=r.getReader();for(;;){const{value:n,done:s}=yield vh(t.read());if(s)break;yield yield vh(Q_(n))}})}function NL(r){const e=r.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:c,done:u})=>{if(u){if(s.trim()){n.error(new Vn("Failed to parse stream"));return}n.close();return}s+=c;let d=s.match(ST),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Vn(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),s=s.substring(d[0].length),d=s.match(ST)}return o()}).catch(c=>{let u=c;throw u.stack=c.stack,u.name==="AbortError"?u=new YI("Request aborted when reading from the stream"):u=new Vn("Error reading from the stream"),u})}}})}function kL(r){const e=r[r.length-1],t={promptFeedback:e?.promptFeedback};for(const n of r){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const u of o.content.parts)u.text&&(c.text=u.text),u.functionCall&&(c.functionCall=u.functionCall),u.executableCode&&(c.executableCode=u.executableCode),u.codeExecutionResult&&(c.codeExecutionResult=u.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}async function QI(r,e,t,n){const s=await Bh(e,zo.STREAM_GENERATE_CONTENT,r,!0,JSON.stringify(t),n);return IL(s)}async function WI(r,e,t,n){const o=await(await Bh(e,zo.GENERATE_CONTENT,r,!1,JSON.stringify(t),n)).json();return{response:Q_(o)}}function XI(r){if(r!=null){if(typeof r=="string")return{role:"system",parts:[{text:r}]};if(r.text)return{role:"system",parts:[r]};if(r.parts)return r.role?r:{role:"system",parts:r.parts}}}function bh(r){let e=[];if(typeof r=="string")e=[{text:r}];else for(const t of r)typeof t=="string"?e.push({text:t}):e.push(t);return DL(e)}function DL(r){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of r)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new Vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Vn("No content is provided for sending chat message.");return n?e:t}function OL(r,e){var t;let n={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=r.generateContentRequest!=null;if(r.contents){if(s)throw new ba("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=r.contents}else if(s)n=Object.assign(Object.assign({},n),r.generateContentRequest);else{const o=bh(r);n.contents=[o]}return{generateContentRequest:n}}function AT(r){let e;return r.contents?e=r:e={contents:[bh(r)]},r.systemInstruction&&(e.systemInstruction=XI(r.systemInstruction)),e}function ML(r){return typeof r=="string"||Array.isArray(r)?{content:bh(r)}:r}const IT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],PL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function jL(r){let e=!1;for(const t of r){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new Vn(`First content should be with role 'user', got ${n}`);if(!pT.includes(n))throw new Vn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(pT)}`);if(!Array.isArray(s))throw new Vn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Vn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of s)for(const d of IT)d in u&&(o[d]+=1);const c=PL[n];for(const u of IT)if(!c.includes(u)&&o[u]>0)throw new Vn(`Content with role '${n}' can't contain '${u}' part`);e=!0}}function RT(r){var e;if(r.candidates===void 0||r.candidates.length===0)return!1;const t=(e=r.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}const CT="SILENT_ERROR";class VL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n?.history&&(jL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=bh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>WI(this._apiKey,this.model,g,y)).then(w=>{var T;if(RT(w.response)){this._history.push(f);const k=Object.assign({parts:[],role:"model"},(T=w.response.candidates)===null||T===void 0?void 0:T[0].content);this._history.push(k)}else{const k=la(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var n,s,o,c,u,d;await this._sendPromise;const f=bh(e),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),t),v=QI(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(CT)}).then(w=>w.response).then(w=>{if(RT(w)){this._history.push(f);const T=Object.assign({},w.candidates[0].content);T.role||(T.role="model"),this._history.push(T)}else{const T=la(w);T&&console.warn(`sendMessageStream() was unsuccessful. ${T}. Inspect response object for details.`)}}).catch(w=>{w.message!==CT&&console.error(w)}),v}}async function LL(r,e,t,n){return(await Bh(e,zo.COUNT_TOKENS,r,!1,JSON.stringify(t),n)).json()}async function UL(r,e,t,n){return(await Bh(e,zo.EMBED_CONTENT,r,!1,JSON.stringify(t),n)).json()}async function zL(r,e,t,n){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Bh(e,zo.BATCH_EMBED_CONTENTS,r,!1,JSON.stringify({requests:s}),n)).json()}class NT{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=XI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=AT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return WI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=AT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return QI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new VL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=OL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return LL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=ML(e),s=Object.assign(Object.assign({},this._requestOptions),t);return UL(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return zL(this.apiKey,this.model,e,n)}}class BL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new NT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new ba("Cached content must contain a `name` field.");if(!e.model)throw new ba("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new ba(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new NT(this.apiKey,o,n)}}async function JI(r,e="tr",t=null){const n=Array.isArray(r)?r:[r],s=3,o=2e3;let c;for(let u=0;u<=s;u++)try{return u>0&&(console.log(`Attempt ${u+1} of ${s+1}...`),await new Promise(d=>setTimeout(d,o))),await FL(n,e,t)}catch(d){if(c=d,!(d.message.includes("503")||d.message.includes("429")||d.message.includes("overloaded")||d.message.includes("Server Error")))throw d;console.warn(`Analysis attempt ${u+1} failed:`,d.message)}throw c}async function FL(r,e,t){let n="";t&&t.trim().length>0&&(n=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const s=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${n}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,o=[{text:s}];r.forEach(u=>{if(!u)return;const d=u.includes(",")?u.split(",")[1]:u;o.push({inline_data:{mime_type:"image/jpeg",data:d}})});const c={contents:[{parts:o}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const u=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!u.ok){const f=await u.text();throw console.error("Backend Error Response:",f),f.trim().startsWith("<")||f.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${u.status} ${u.statusText}`)}const d=await u.json();if(d.error)throw new Error(d.error.message||"API Connection Error");if(d.plant_name||d.status)return d;if(d.candidates&&d.candidates[0].content){const g=d.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(g)}throw new Error("Invalid response structure from AI")}catch(u){console.warn("Backend analysis failed, attempting client-side fallback...",u);const d="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const g=new BL(d).getGenerativeModel({model:"gemini-2.5-flash"}),v=[s];r.forEach(V=>{if(!V)return;const B=V.includes(",")?V.split(",")[1]:V;v.push({inlineData:{data:B,mimeType:"image/jpeg"}})});const O=(await(await g.generateContent(v)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(O)}catch(f){throw console.error("Fallback also failed:",f),new Error(f.message||"AI Diagnosis completely failed.")}}}const _c="analyses";async function ZI(r,e,t,n,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await zh(sr(Ke,_c),{userId:r,plantType:e,mainImage:o,macroImage:c,result:n,isPublic:s,status:"active",treatmentDuration:n.treatment_duration||"1 Week",checkupFrequency:n.checkup_frequency||7,createdAt:ar(),nextCheckup:new Date(Date.now()+(n.checkup_frequency||7)*24*60*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function eR(r){try{const e=Vo(sr(Ke,_c),pc("userId","==",r)),n=(await yc(e)).docs.map(async o=>{const c=o.data();let u=[];try{u=(await yc(sr(Ke,_c,o.id,"updates"))).docs.map(f=>f.data()).sort((f,g)=>(g.createdAt?.seconds||0)-(f.createdAt?.seconds||0))}catch(d){console.log("No updates found or error",d)}return{id:o.id,...c,updates:u}});return(await Promise.all(n)).sort((o,c)=>{const u=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-u})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function tR(r){try{const e=Vo(sr(Ke,"posts"),pc("relatedAnalysisId","==",r)),t=await yc(e);if(!t.empty){const n=t.docs.map(s=>wm(s.ref));await Promise.all(n)}return await wm(Mt(Ke,_c,r)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function nR(r,e){try{const t=Mt(Ke,_c,r);await wr(t,{...e,updatedAt:ar()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function rR(r,e,t){try{let n=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?n=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=zh(sr(Ke,"posts"),{userId:r,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:n,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:ar()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(n){throw console.error("Error creating post:",n),n}}async function iR(r,e,t,n="Gardener",s=null){try{const o=`${t} - ${e.result.disease_name}`;let c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return e.result.is_treatable===!1?e.result.preventive_measures&&e.result.preventive_measures.length>0&&(c+=`

 Koruyucu nlemler:
`+e.result.preventive_measures.map(u=>` ${u}`).join(`
`)):e.result.treatment_steps&&e.result.treatment_steps.length>0&&(c+=`

 Tedavi Admlar:
`+e.result.treatment_steps.map(u=>` ${u}`).join(`
`)),await zh(sr(Ke,"posts"),{userId:e.userId,authorName:n,userAvatar:s,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:ar(),relatedAnalysisId:r}),await nR(r,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function sR(r,e,t,n=null){try{return await zh(sr(Ke,_c,r,"updates"),{imageUrl:e||null,note:t,aiAnalysis:n,createdAt:ar()}),!0}catch(s){throw console.error("Error adding feedback:",s),s}}async function aR(r){try{const e=Mt(Ke,"posts",r),t=await Lo(e);if(!t.exists())return!1;const n=t.data();if(n.relatedAnalysisId)try{const s=Mt(Ke,"analyses",n.relatedAnalysisId);await wr(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await wm(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function oR(r,e){try{const t=Mt(Ke,"posts",r),n=await Lo(t);if(!n.exists())return;(n.data().likes||[]).includes(e)?await wr(t,{likes:SI(e)}):await wr(t,{likes:K_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function lR(r,e,t,n){try{const s=Mt(Ke,"posts",r),o={userId:e,userName:t,text:n,createdAt:Date.now()};return await wr(s,{comments:K_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function cR(r,e){try{const t=Mt(Ke,"posts",r);return await wr(t,{...e,updatedAt:ar()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function HL(r,e,t,n){try{if(r===e)throw new Error("Cannot start chat with yourself.");const s=[r,e].sort(),o=`${s[0]}_${s[1]}`,c=Mt(Ke,"chats",o);return(await Lo(c)).exists()?await wr(c,{[`participantData.${r}`]:n}):await fg(c,{participants:[r,e],participantData:{[e]:t,[r]:n},createdAt:ar(),updatedAt:ar(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}async function uR(r,e,t){try{const n=await fetch("/api/analyze_progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldImage:r,newImage:e,diseaseName:t,language:"tr"})});if(!n.ok)throw new Error("Progress analysis failed");return await n.json()}catch(n){throw console.error("Error analyzing progress:",n),n}}const qL=Object.freeze(Object.defineProperty({__proto__:null,addComment:lR,addFeedbackUpdate:sR,analyzePlantProgress:uR,createPost:rR,deleteAnalysis:tR,deletePost:aR,getUserAnalyses:eR,saveAnalysis:ZI,shareAnalysisToCommunity:iR,startChat:HL,toggleLike:oR,updateAnalysisStatus:nR,updatePost:cR},Symbol.toStringTag,{value:"Module"}));function $L({result:r,onReset:e}){const{t}=zn();return r?r.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(D0,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:r.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:r.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[r.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(Tm,{className:"w-5 h-5"}),b.jsx("span",{children:t("urgency")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${r.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(zr,{className:"w-5 h-5"}),b.jsx("span",{children:t("spread_risk")})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${r.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("description")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:r.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),r.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(D0,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(r.is_treatable===!1?r.preventive_measures:r.treatment_steps)?.map((n,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(gg,{className:`w-6 h-6 flex-shrink-0 ${r.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:n})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:t("new_scan")})})]})]}):null}function GL({isOpen:r,onClose:e,onCapture:t}){const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(null),[u,d]=$.useState(""),{t:f}=zn();$.useEffect(()=>(r?g():y(),()=>y()),[r]);const g=async()=>{d("");try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});c(w),n.current&&(n.current.srcObject=w)}catch(w){console.error("Camera Error:",w),d(f("camera_permission_denied")||"Camera access denied or not available.")}},y=()=>{o&&(o.getTracks().forEach(w=>w.stop()),c(null))},v=()=>{if(n.current&&s.current){const w=n.current,T=s.current;T.width=w.videoWidth,T.height=w.videoHeight,T.getContext("2d").drawImage(w,0,0,T.width,T.height);const O=T.toDataURL("image/jpeg",.9);t(O),e()}};return r?b.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4 animate-fade-in",children:b.jsxs("div",{className:"relative w-full max-w-lg bg-black rounded-3xl overflow-hidden shadow-2xl border border-gray-800",children:[b.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-10 bg-gradient-to-b from-black/60 to-transparent",children:[b.jsx("span",{className:"text-white font-medium",children:f("take_photo")}),b.jsx("button",{onClick:e,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:b.jsx(Uo,{className:"w-6 h-6"})})]}),b.jsx("div",{className:"relative aspect-[3/4] bg-gray-900 flex items-center justify-center",children:u?b.jsxs("div",{className:"text-center p-6 text-red-400",children:[b.jsx(OI,{className:"w-12 h-12 mx-auto mb-3 opacity-80"}),b.jsx("p",{children:u}),b.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-gray-800 rounded-lg text-white text-sm hover:bg-gray-700",children:f("retry")||"Retry"})]}):b.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 flex justify-center items-center bg-gradient-to-t from-black/80 to-transparent",children:!u&&b.jsx("button",{onClick:v,className:"group relative",children:b.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-transform group-active:scale-95",children:b.jsx("div",{className:"w-16 h-16 bg-white rounded-full"})})})}),b.jsx("canvas",{ref:s,className:"hidden"})]})}):null}function KL(){const{t:r,i18n:e}=zn(),{currentUser:t}=ai(),n=xs(),s=xr(),{addToast:o}=Ca(),c=$.useRef(null),[u,d]=$.useState("landing"),[f,g]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,T]=$.useState(!1),[k,O]=$.useState(null),[V,B]=$.useState(!1),[F,q]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(O(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),g(s.state.restoredPlantType||"")))},[s.state]);const K=()=>{u==="input_type"&&d("capture_main")},z=()=>{g(""),d("capture_main")},M=()=>{c.current&&(c.current.value="",c.current.click())},x=ee=>{ee&&I(ee),q(!1)},S=async ee=>{const H=ee.target.files?.[0];if(!H)return;const Y=new FileReader;Y.onloadend=()=>{const ie=Y.result;I(ie)},Y.readAsDataURL(H)},I=async ee=>{u==="capture_main"?(v(H=>({...H,main:ee})),await N(ee)):u==="capture_macro"&&(v(H=>({...H,macro:ee})),await N([y.main,ee]))},N=async(ee,H)=>{T(!0),d("analyzing"),B(!1);try{const Y=await JI(ee,e.language,f);if(Y.status==="needs_details")o(r("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(Y.status==="error")throw new Error(Y.error);O(Y),d("result")}}catch(Y){console.error(Y);let ie=Y.message||r("error_diagnosis_failed")||"Diagnosis failed.";ie.includes("NOT_PLANT")?ie=r("error_not_plant"):(ie.includes("503")||ie.includes("overloaded"))&&(ie=r("error_server_busy")),o(ie,"error"),d("capture_main")}finally{T(!1)}},j=async()=>{if(t&&!V)try{const ee=await ZI(t.uid,f,y,k);B(!0),o(r("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{n("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:ee}})},500)}catch(ee){console.error("Manual save failed:",ee),o((r("save_fail")||"Failed to save analysis:")+" "+ee.message,"error")}},C=()=>{n("/login",{state:{pendingResult:k,pendingImages:y,pendingPlantType:f,returnUrl:"/"}})},G=()=>{v({main:null,macro:null}),g(""),O(null),B(!1),d("input_type"),c.current&&(c.current.value="")},te=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx($V,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:r("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[r("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:r("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:r("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(wo,{className:"w-6 h-6"}),r("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:r("feature_1_title")||"Instant Analysis",desc:r("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:aL,color:"from-yellow-400 to-orange-500"},{title:r("feature_2_title")||"Smart Interactions",desc:r("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:qj,color:"from-blue-400 to-indigo-500"},{title:r("feature_3_title")||"Verified Treatments",desc:r("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:HV,color:"from-green-400 to-emerald-500"}].map((ee,H)=>{const Y=ee.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${ee.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(Y,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:ee.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:ee.desc})]},H)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:r("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(Tm,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(hT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:ee=>{ee.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(zr,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),P=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(zr,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:r("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:r("what_plant_question")}),b.jsx("input",{type:"text",value:f,onChange:ee=>g(ee.target.value),placeholder:r("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:K,disabled:!f.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[r("next_step")," ",b.jsx(kI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:z,className:"mt-4 text-gray-500 text-sm hover:underline",children:r("skip")})]}),D=ee=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ee?r("close_up_photo")||"Close-up Photo":r("scan_step_2")}),b.jsxs("div",{className:"w-full space-y-4",children:[b.jsxs("button",{onClick:()=>q(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl transition-transform active:scale-95",children:[b.jsx(wo,{className:"w-8 h-8"}),b.jsx("span",{children:r("open_camera")||"Open Camera"})]}),b.jsxs("button",{onClick:M,className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-bold py-4 px-10 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-md flex items-center justify-center gap-4 text-lg transition-transform active:scale-95",children:[b.jsx(jI,{className:"w-6 h-6"}),b.jsx("span",{children:r("upload_gallery")||"Select from Gallery"})]})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:r("back")})]}),Z=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(xo,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:r("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:r("ai_thinking")||"AI Botanist is thinking..."})]}),W=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:j,disabled:V,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${V?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:V?b.jsxs(b.Fragment,{children:[b.jsx(gg,{className:"w-6 h-6"}),b.jsx("span",{children:r("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(HI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:k?.is_treatable===!1?r("save_info")||"Bilgiyi Kaydet":r("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:G,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[r("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx($L,{result:k,onReset:G})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(hT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:r("login_blur_text")}),b.jsx("button",{onClick:C,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:r("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${u==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",ref:c,onChange:S,className:"hidden"}),b.jsx(GL,{isOpen:F,onClose:()=>q(!1),onCapture:x}),u==="landing"?te():b.jsxs(b.Fragment,{children:[u!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",r("back")]}),u==="input_type"&&P(),u==="capture_main"&&D(!1),u==="capture_macro"&&D(!0),u==="analyzing"&&Z(),u==="result"&&W()]})]})}const Ef=43200,kT=1440,DT=Symbol.for("constructDateFrom");function W_(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&DT in r?r[DT](e):r instanceof Date?new r.constructor(e):new Date(e)}function Aa(r,e){return W_(r,r)}let YL={};function QL(){return YL}function OT(r){const e=Aa(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function X_(r,...e){const t=W_.bind(null,r||e.find(n=>typeof n=="object"));return e.map(t)}function qf(r,e){const t=+Aa(r)-+Aa(e);return t<0?-1:t>0?1:t}function WL(r){return W_(r,Date.now())}function XL(r,e,t){const[n,s]=X_(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function JL(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function ZL(r,e){return+Aa(r)-+Aa(e)}function eU(r,e){const t=Aa(r);return t.setHours(23,59,59,999),t}function tU(r,e){const t=Aa(r),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function nU(r,e){const t=Aa(r);return+eU(t)==+tU(t)}function rU(r,e,t){const[n,s,o]=X_(t?.in,r,r,e),c=qf(s,o),u=Math.abs(XL(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*u);let d=qf(s,o)===-c;nU(n)&&u===1&&qf(n,o)===1&&(d=!1);const f=c*(u-+d);return f===0?0:f}function iU(r,e,t){const n=ZL(r,e)/1e3;return JL(t?.roundingMethod)(n)}const sU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aU=(r,e,t)=>{let n;const s=sU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function nc(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const oU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uU={date:nc({formats:oU,defaultWidth:"full"}),time:nc({formats:lU,defaultWidth:"full"}),dateTime:nc({formats:cU,defaultWidth:"full"})},hU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dU=(r,e,t,n)=>hU[r];function Ii(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,u=t?.width?String(t.width):c;s=r.formattingValues[u]||r.formattingValues[c]}else{const c=r.defaultWidth,u=t?.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const fU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_U={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vU=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},bU={ordinalNumber:vU,era:Ii({values:fU,defaultWidth:"wide"}),quarter:Ii({values:mU,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ii({values:gU,defaultWidth:"wide"}),day:Ii({values:pU,defaultWidth:"wide"}),dayPeriod:Ii({values:yU,defaultWidth:"wide",formattingValues:_U,defaultFormattingWidth:"wide"})};function Ri(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(u)?xU(u,y=>y.test(c)):wU(u,y=>y.test(c));let f;f=r.valueCallback?r.valueCallback(d):d,f=t.valueCallback?t.valueCallback(f):f;const g=e.slice(c.length);return{value:f,rest:g}}}function wU(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function xU(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function hR(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}const EU=/^(\d+)(th|st|nd|rd)?/i,TU=/\d+/i,SU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},AU={any:[/^b/i,/^(a|c)/i]},IU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RU={any:[/1/i,/2/i,/3/i,/4/i]},CU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},OU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},PU={ordinalNumber:hR({matchPattern:EU,parsePattern:TU,valueCallback:r=>parseInt(r,10)}),era:Ri({matchPatterns:SU,defaultMatchWidth:"wide",parsePatterns:AU,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:IU,defaultMatchWidth:"wide",parsePatterns:RU,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:CU,defaultMatchWidth:"wide",parsePatterns:NU,defaultParseWidth:"any"}),day:Ri({matchPatterns:kU,defaultMatchWidth:"wide",parsePatterns:DU,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:OU,defaultMatchWidth:"any",parsePatterns:MU,defaultParseWidth:"any"})},pg={code:"en-US",formatDistance:aU,formatLong:uU,formatRelative:dU,localize:bU,match:PU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jU(r,e,t){const n=QL(),s=t?.locale??n.locale??pg,o=2520,c=qf(r,e);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,f]=X_(t?.in,...c>0?[e,r]:[r,e]),g=iU(f,d),y=(OT(f)-OT(d))/1e3,v=Math.round((g-y)/60);let w;if(v<2)return t?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):v===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",v,u);if(v<45)return s.formatDistance("xMinutes",v,u);if(v<90)return s.formatDistance("aboutXHours",1,u);if(v<kT){const T=Math.round(v/60);return s.formatDistance("aboutXHours",T,u)}else{if(v<o)return s.formatDistance("xDays",1,u);if(v<Ef){const T=Math.round(v/kT);return s.formatDistance("xDays",T,u)}else if(v<Ef*2)return w=Math.round(v/Ef),s.formatDistance("aboutXMonths",w,u)}if(w=rU(f,d),w<12){const T=Math.round(v/Ef);return s.formatDistance("xMonths",T,u)}else{const T=w%12,k=Math.trunc(w/12);return T<3?s.formatDistance("aboutXYears",k,u):T<9?s.formatDistance("overXYears",k,u):s.formatDistance("almostXYears",k+1,u)}}function J_(r,e){return jU(r,WL(r),e)}const VU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},LU=(r,e,t)=>{let n;const s=VU[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?n+" sonra":n+" nce":n},UU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},zU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},BU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FU={date:nc({formats:UU,defaultWidth:"full"}),time:nc({formats:zU,defaultWidth:"full"}),dateTime:nc({formats:BU,defaultWidth:"full"})},HU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},qU=(r,e,t,n)=>HU[r],$U={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},GU={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},KU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},YU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},QU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},WU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},XU=(r,e)=>Number(r)+".",JU={ordinalNumber:XU,era:Ii({values:$U,defaultWidth:"wide"}),quarter:Ii({values:GU,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:Ii({values:KU,defaultWidth:"wide"}),day:Ii({values:YU,defaultWidth:"wide"}),dayPeriod:Ii({values:QU,defaultWidth:"wide",formattingValues:WU,defaultFormattingWidth:"wide"})},ZU=/^(\d+)(\.)?/i,e9=/\d+/i,t9={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},n9={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},r9={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},i9={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},s9={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},a9={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},o9={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},l9={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},c9={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},u9={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},h9={ordinalNumber:hR({matchPattern:ZU,parsePattern:e9,valueCallback:function(r){return parseInt(r,10)}}),era:Ri({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:n9,defaultParseWidth:"any"}),quarter:Ri({matchPatterns:r9,defaultMatchWidth:"wide",parsePatterns:i9,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ri({matchPatterns:s9,defaultMatchWidth:"wide",parsePatterns:a9,defaultParseWidth:"any"}),day:Ri({matchPatterns:o9,defaultMatchWidth:"wide",parsePatterns:l9,defaultParseWidth:"any"}),dayPeriod:Ri({matchPatterns:c9,defaultMatchWidth:"any",parsePatterns:u9,defaultParseWidth:"any"})},Z_={code:"tr",formatDistance:LU,formatLong:FU,formatRelative:qU,localize:JU,match:h9,options:{weekStartsOn:1,firstWeekContainsDate:1}};function dR({post:r,onUserClick:e,onViewAnalysis:t}){const{t:n,i18n:s}=zn(),{currentUser:o}=ai(),c=s.language==="tr"?Z_:pg,[u,d]=$.useState(""),[f,g]=$.useState(!1),[y,v]=$.useState(!1),[w,T]=$.useState(!1),[k,O]=$.useState(r?.content||""),V=async()=>{try{await cR(r.id,{content:k}),T(!1)}catch{alert("Failed to update post")}};if(!r)return null;const B=o?.uid===r.userId,F=r.likes&&o&&r.likes.includes(o.uid),q=r.likes?r.likes.length:0,K=r.comments?r.comments.length:0,[z,M]=$.useState("");$.useEffect(()=>{const C=()=>{if(!r.createdAt?.seconds){M(n("just_now")||"Just now");return}const te=new Date(r.createdAt.seconds*1e3);(new Date-te)/(1e3*60*60)>24?M(te.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):M(J_(te,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const G=setInterval(C,6e4);return()=>clearInterval(G)},[r.createdAt,c,n,s.language]),r.createdAt?.seconds&&new Date(r.createdAt.seconds*1e3);const x=async()=>{if(!(!o||y)){v(!0);try{await oR(r.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},S=async()=>{if(window.confirm(n("confirm_delete_post")||"Delete this post?"))try{await aR(r.id)}catch{alert("Failed to delete post")}},I=async C=>{if(C.preventDefault(),!(!u.trim()||!o))try{await lR(r.id,o.uid,o.displayName||"User",u),d("")}catch(G){console.error(G),alert("Failed to post comment")}},N=async()=>{const C={title:`Plant AI - ${r.title||r.authorName}`,text:r.content,url:window.location.href};if(navigator.share)try{await navigator.share(C)}catch{console.log("Share canceled")}else navigator.clipboard.writeText(window.location.href),alert(n("link_copied")||"Link copied!")},j=C=>!C||C==="Unknown"?null:C.toLowerCase()==="plant"?n("plant")||"Bitki":n(`plant_${C.toLowerCase()}`)||n(C)||C;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[B&&b.jsx("button",{onClick:S,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:n("delete")||"Delete",children:b.jsx(Sm,{className:"w-4 h-4"})}),!r.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(r.userId),children:[b.jsx("img",{src:B&&(o?.photoURL||o?.avatar)?o.photoURL||o.avatar:r.userAvatar||`https://ui-avatars.com/api/?name=${r.authorName||"Gardener"}&background=random`,alt:r.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:r.authorName||n("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:z})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${r.hideAuthor?"pt-4":""}`,children:[r.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:r.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:r.content}),r.plantType&&r.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:j(r.plantType)}),r.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(r.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),n("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),r.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(r.image,"_blank"),children:[b.jsx("img",{src:r.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(yh,{className:"w-3 h-3"}),b.jsxs("span",{children:[20+(r.likes?.length||0)*5," ",n("views")||"Grntlenme"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:x,className:`flex items-center gap-1.5 transition-colors ${F?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(fV,{className:`w-5 h-5 ${F?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:q||n("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>g(!f),children:[b.jsx(yh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:K||n("comment")})]}),B&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>T(!0),children:[b.jsx(BI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:n("edit")})]})]}),b.jsxs("button",{onClick:N,className:"text-gray-500 hover:text-green-600 transition-colors flex items-center gap-1",children:[b.jsx(k0,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm hidden sm:inline",children:n("share")||"Payla"})]})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:n("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:k,onChange:C=>O(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:n("cancel")}),b.jsx("button",{onClick:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:n("save")})]})]})}),f&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[r.comments&&r.comments.map((C,G)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},G)),(!r.comments||r.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:n("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(_h,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:n("login_to_comment")})]})]})}const zy=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function d9(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function fR(r,e){return new Promise((function(t,n){let s;return f9(r).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return n(c)}}),n)}))}const f9=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const d=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const f=c+10;let g;switch(o.getUint16(f)){case 18761:g=!0;break;case 19789:g=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(f+2,g)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(f+4,g),v=f+y+2+12*o.getUint16(f+y,g);for(let w=f+y+2;w<v;w+=12)if(o.getUint16(w,g)==274){if(o.getUint16(w+2,g)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,g)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,g);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)}));var Im={},m9={get exports(){return Im},set exports(r){Im=r}};(function(r){var e,t,n={};m9.exports=n,n.parse=function(s,o){for(var c=n.bin.readUshort,u=n.bin.readUint,d=0,f={},g=new Uint8Array(s),y=g.length-4;u(g,y)!=101010256;)y--;d=y,d+=4;var v=c(g,d+=4);c(g,d+=2);var w=u(g,d+=2),T=u(g,d+=4);d+=4,d=T;for(var k=0;k<v;k++){u(g,d),d+=4,d+=4,d+=4,u(g,d+=4),w=u(g,d+=4);var O=u(g,d+=4),V=c(g,d+=4),B=c(g,d+2),F=c(g,d+4);d+=6;var q=u(g,d+=8);d+=4,d+=V+B+F,n._readLocal(g,q,f,w,O,o)}return f},n._readLocal=function(s,o,c,u,d,f){var g=n.bin.readUshort,y=n.bin.readUint;y(s,o),g(s,o+=4),g(s,o+=2);var v=g(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=g(s,o+=8),T=g(s,o+=2);o+=2;var k=n.bin.readUTF8(s,o,w);if(o+=w,o+=T,f)c[k]={size:d,csize:u};else{var O=new Uint8Array(s.buffer,o);if(v==0)c[k]=new Uint8Array(O.buffer.slice(o,o+u));else{if(v!=8)throw"unknown compression method: "+v;var V=new Uint8Array(d);n.inflateRaw(O,V),c[k]=V}}},n.inflateRaw=function(s,o){return n.F.inflate(s,o)},n.inflate=function(s,o){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},n.deflate=function(s,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[c]=120,u[c+1]=156,c+=2,c=n.F.deflateRaw(s,u,c,o.level);var d=n.adler(s,0,s.length);return u[c+0]=d>>>24&255,u[c+1]=d>>>16&255,u[c+2]=d>>>8&255,u[c+3]=d>>>0&255,new Uint8Array(u.buffer,0,c+4)},n.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),u=n.F.deflateRaw(s,c,u,o.level);return new Uint8Array(c.buffer,0,u)},n.encode=function(s,o){o==null&&(o=!1);var c=0,u=n.bin.writeUint,d=n.bin.writeUshort,f={};for(var g in s){var y=!n._noNeed(g)&&!o,v=s[g],w=n.crc.crc(v,0,v.length);f[g]={cpr:y,usize:v.length,crc:w,file:y?n.deflateRaw(v):v}}for(var g in f)c+=f[g].file.length+30+46+2*n.bin.sizeUTF8(g);c+=22;var T=new Uint8Array(c),k=0,O=[];for(var g in f){var V=f[g];O.push(k),k=n._writeHeader(T,k,g,V,0)}var B=0,F=k;for(var g in f)V=f[g],O.push(k),k=n._writeHeader(T,k,g,V,1,O[B++]);var q=k-F;return u(T,k,101010256),k+=4,d(T,k+=4,B),d(T,k+=2,B),u(T,k+=2,q),u(T,k+=4,F),k+=4,k+=2,T.buffer},n._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(s,o,c,u,d,f){var g=n.bin.writeUint,y=n.bin.writeUshort,v=u.file;return g(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,u.cpr?8:0),g(s,o+=2,0),g(s,o+=4,u.crc),g(s,o+=4,v.length),g(s,o+=4,u.usize),y(s,o+=4,n.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,g(s,o+=6,f),o+=4),o+=n.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},n.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,u){for(var d=0;d<u;d++)s=n.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^n.crc.update(4294967295,s,o,c)}},n.adler=function(s,o,c){for(var u=1,d=0,f=o,g=o+c;f<g;){for(var y=Math.min(f+5552,g);f<y;)d+=u+=s[f++];u%=65521,d%=65521}return d<<16|u},n.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var u="",d=0;d<c;d++)u+=String.fromCharCode(s[o+d]);return u},writeASCII:function(s,o,c){for(var u=0;u<c.length;u++)s[o+u]=c.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var u,d="",f=0;f<c;f++)d+="%"+n.bin.pad(s[o+f].toString(16));try{u=decodeURIComponent(d)}catch{return n.bin.readASCII(s,o,c)}return u},writeUTF8:function(s,o,c){for(var u=c.length,d=0,f=0;f<u;f++){var g=c.charCodeAt(f);if((4294967168&g)==0)s[o+d]=g,d++;else if((4294965248&g)==0)s[o+d]=192|g>>6,s[o+d+1]=128|g>>0&63,d+=2;else if((4294901760&g)==0)s[o+d]=224|g>>12,s[o+d+1]=128|g>>6&63,s[o+d+2]=128|g>>0&63,d+=3;else{if((4292870144&g)!=0)throw"e";s[o+d]=240|g>>18,s[o+d+1]=128|g>>12&63,s[o+d+2]=128|g>>6&63,s[o+d+3]=128|g>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,u=0;u<o;u++){var d=s.charCodeAt(u);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},n.F={},n.F.deflateRaw=function(s,o,c,u){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],f=n.F.U,g=n.F._goodIndex;n.F._hash;var y=n.F._putsE,v=0,w=c<<3,T=0,k=s.length;if(u==0){for(;v<k;)y(o,w,v+(N=Math.min(65535,k-v))==k?1:0),w=n.F._copyExact(s,v,N,o,w+8),v+=N;return w>>>3}var O=f.lits,V=f.strt,B=f.prev,F=0,q=0,K=0,z=0,M=0,x=0;for(k>2&&(V[x=n.F._hash(s,0)]=0),v=0;v<k;v++){if(M=x,v+1<k-2){x=n.F._hash(s,v+1);var S=v+1&32767;B[S]=V[x],V[x]=S}if(T<=v){(F>14e3||q>26697)&&k-v>100&&(T<v&&(O[F]=v-T,F+=2,T=v),w=n.F._writeBlock(v==k-1||T==k?1:0,O,F,z,s,K,v-K,o,w),F=q=z=0,K=v);var I=0;v<k-2&&(I=n.F._bestMatch(s,v,B,M,Math.min(d[2],k-v),d[3]));var N=I>>>16,j=65535&I;if(I!=0){j=65535&I;var C=g(N=I>>>16,f.of0);f.lhst[257+C]++;var G=g(j,f.df0);f.dhst[G]++,z+=f.exb[C]+f.dxb[G],O[F]=N<<23|v-T,O[F+1]=j<<16|C<<8|G,F+=2,T=v+N}else f.lhst[s[v]]++;q++}}for(K==v&&s.length!=0||(T<v&&(O[F]=v-T,F+=2,T=v),w=n.F._writeBlock(1,O,F,z,s,K,v-K,o,w),F=0,q=0,F=q=z=0,K=v);(7&w)!=0;)w++;return w>>>3},n.F._bestMatch=function(s,o,c,u,d,f){var g=32767&o,y=c[g],v=g-y+32768&32767;if(y==g||u!=n.F._hash(s,o-v))return 0;for(var w=0,T=0,k=Math.min(32767,o);v<=k&&--f!=0&&y!=g;){if(w==0||s[o+w]==s[o+w-v]){var O=n.F._howLong(s,o,v);if(O>w){if(T=v,(w=O)>=d)break;v+2<O&&(O=v+2);for(var V=0,B=0;B<O-2;B++){var F=o-v+B+32768&32767,q=F-c[F]+32768&32767;q>V&&(V=q,y=F)}}}v+=(g=y)-(y=c[g])+32768&32767}return w<<16|T},n.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var u=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-u},n.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,o,c,u,d,f,g,y,v){var w,T,k,O,V,B,F,q,K,z=n.F.U,M=n.F._putsF,x=n.F._putsE;z.lhst[256]++,T=(w=n.F.getTrees())[0],k=w[1],O=w[2],V=w[3],B=w[4],F=w[5],q=w[6],K=w[7];var S=32+((v+3&7)==0?0:8-(v+3&7))+(g<<3),I=u+n.F.contSize(z.fltree,z.lhst)+n.F.contSize(z.fdtree,z.dhst),N=u+n.F.contSize(z.ltree,z.lhst)+n.F.contSize(z.dtree,z.dhst);N+=14+3*F+n.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var j=0;j<286;j++)z.lhst[j]=0;for(j=0;j<30;j++)z.dhst[j]=0;for(j=0;j<19;j++)z.ihst[j]=0;var C=S<I&&S<N?0:I<N?1:2;if(M(y,v,s),M(y,v+1,C),v+=3,C==0){for(;(7&v)!=0;)v++;v=n.F._copyExact(d,f,g,y,v)}else{var G,te;if(C==1&&(G=z.fltree,te=z.fdtree),C==2){n.F.makeCodes(z.ltree,T),n.F.revCodes(z.ltree,T),n.F.makeCodes(z.dtree,k),n.F.revCodes(z.dtree,k),n.F.makeCodes(z.itree,O),n.F.revCodes(z.itree,O),G=z.ltree,te=z.dtree,x(y,v,V-257),x(y,v+=5,B-1),x(y,v+=5,F-4),v+=4;for(var P=0;P<F;P++)x(y,v+3*P,z.itree[1+(z.ordr[P]<<1)]);v+=3*F,v=n.F._codeTiny(q,z.itree,y,v),v=n.F._codeTiny(K,z.itree,y,v)}for(var D=f,Z=0;Z<c;Z+=2){for(var W=o[Z],ee=W>>>23,H=D+(8388607&W);D<H;)v=n.F._writeLit(d[D++],G,y,v);if(ee!=0){var Y=o[Z+1],ie=Y>>16,J=Y>>8&255,re=255&Y;x(y,v=n.F._writeLit(257+J,G,y,v),ee-z.of0[J]),v+=z.exb[J],M(y,v=n.F._writeLit(re,te,y,v),ie-z.df0[re]),v+=z.dxb[re],D+=ee}}v=n.F._writeLit(256,G,y,v)}return v},n.F._copyExact=function(s,o,c,u,d){var f=d>>>3;return u[f]=c,u[f+1]=c>>>8,u[f+2]=255-u[f],u[f+3]=255-u[f+1],f+=4,u.set(new Uint8Array(s.buffer,o,c),f),d+(c+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,o=n.F._hufTree(s.lhst,s.ltree,15),c=n.F._hufTree(s.dhst,s.dtree,15),u=[],d=n.F._lenCodes(s.ltree,u),f=[],g=n.F._lenCodes(s.dtree,f),y=0;y<u.length;y+=2)s.ihst[u[y]]++;for(y=0;y<f.length;y+=2)s.ihst[f[y]]++;for(var v=n.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,g,w,u,f]},n.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},n.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},n.F.contSize=function(s,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*s[1+(u<<1)];return c},n.F._codeTiny=function(s,o,c,u){for(var d=0;d<s.length;d+=2){var f=s[d],g=s[d+1];u=n.F._writeLit(f,o,c,u);var y=f==16?2:f==17?3:7;f>15&&(n.F._putsE(c,u,g,y),u+=y)}return u},n.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var d=s[u+1],f=u+3<c?s[u+3]:-1,g=u+5<c?s[u+5]:-1,y=u==0?-1:s[u-1];if(d==0&&f==d&&g==d){for(var v=u+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-u>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),u+=2*w-2}else if(d==y&&f==d&&g==d){for(v=u+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-u>>>1,6);o.push(16,w-3),u+=2*w-2}else o.push(d,0)}return c>>>1},n.F._hufTree=function(s,o,c){var u=[],d=s.length,f=o.length,g=0;for(g=0;g<f;g+=2)o[g]=0,o[g+1]=0;for(g=0;g<d;g++)s[g]!=0&&u.push({lit:g,f:s[g]});var y=u.length,v=u.slice(0);if(y==0)return 0;if(y==1){var w=u[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}u.sort((function(q,K){return q.f-K.f}));var T=u[0],k=u[1],O=0,V=1,B=2;for(u[0]={lit:-1,f:T.f+k.f,l:T,r:k,d:0};V!=y-1;)T=O!=V&&(B==y||u[O].f<u[B].f)?u[O++]:u[B++],k=O!=V&&(B==y||u[O].f<u[B].f)?u[O++]:u[B++],u[V++]={lit:-1,f:T.f+k.f,l:T,r:k};var F=n.F.setDepth(u[V-1],0);for(F>c&&(n.F.restrictDepth(v,c,F),F=c),g=0;g<y;g++)o[1+(v[g].lit<<1)]=v[g].d;return F},n.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(n.F.setDepth(s.l,o+1),n.F.setDepth(s.r,o+1))},n.F.restrictDepth=function(s,o,c){var u=0,d=1<<c-o,f=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),u=0;u<s.length&&s[u].d>o;u++){var g=s[u].d;s[u].d=o,f+=d-(1<<c-g)}for(f>>>=c-o;f>0;)(g=s[u].d)<o?(s[u].d++,f-=1<<o-g-1):u++;for(;u>=0;u--)s[u].d==o&&f<0&&(s[u].d--,f++);f!=0&&console.log("debt left")},n.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},n.F._writeLit=function(s,o,c,u){return n.F._putsF(c,u,o[s<<1]),u+o[1+(s<<1)]},n.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var u=n.F,d=u._bitsF,f=u._bitsE,g=u._decodeTiny,y=u.makeCodes,v=u.codes2map,w=u._get17,T=u.U,k=o==null;k&&(o=new c(s.length>>>2<<3));for(var O,V,B=0,F=0,q=0,K=0,z=0,M=0,x=0,S=0,I=0;B==0;)if(B=d(s,I,1),F=d(s,I+1,2),I+=3,F!=0){if(k&&(o=n.F._check(o,S+(1<<17))),F==1&&(O=T.flmap,V=T.fdmap,M=511,x=31),F==2){q=f(s,I,5)+257,K=f(s,I+5,5)+1,z=f(s,I+10,4)+4,I+=14;for(var N=0;N<38;N+=2)T.itree[N]=0,T.itree[N+1]=0;var j=1;for(N=0;N<z;N++){var C=f(s,I+3*N,3);T.itree[1+(T.ordr[N]<<1)]=C,C>j&&(j=C)}I+=3*z,y(T.itree,j),v(T.itree,j,T.imap),O=T.lmap,V=T.dmap,I=g(T.imap,(1<<j)-1,q+K,s,I,T.ttree);var G=u._copyOut(T.ttree,0,q,T.ltree);M=(1<<G)-1;var te=u._copyOut(T.ttree,q,K,T.dtree);x=(1<<te)-1,y(T.ltree,G),v(T.ltree,G,O),y(T.dtree,te),v(T.dtree,te,V)}for(;;){var P=O[w(s,I)&M];I+=15&P;var D=P>>>4;if(!(D>>>8))o[S++]=D;else{if(D==256)break;var Z=S+D-254;if(D>264){var W=T.ldef[D-257];Z=S+(W>>>3)+f(s,I,7&W),I+=7&W}var ee=V[w(s,I)&x];I+=15&ee;var H=ee>>>4,Y=T.ddef[H],ie=(Y>>>4)+d(s,I,15&Y);for(I+=15&Y,k&&(o=n.F._check(o,S+(1<<17)));S<Z;)o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie],o[S]=o[S++-ie];S=Z}}}else{(7&I)!=0&&(I+=8-(7&I));var J=4+(I>>>3),re=s[J-4]|s[J-3]<<8;k&&(o=n.F._check(o,S+re)),o.set(new c(s.buffer,s.byteOffset+J,re),S),I=J+re<<3,S+=re}return o.length==S?o:o.slice(0,S)},n.F._check=function(s,o){var c=s.length;if(o<=c)return s;var u=new Uint8Array(Math.max(c<<1,o));return u.set(s,0),u},n.F._decodeTiny=function(s,o,c,u,d,f){for(var g=n.F._bitsE,y=n.F._get17,v=0;v<c;){var w=s[y(u,d)&o];d+=15&w;var T=w>>>4;if(T<=15)f[v]=T,v++;else{var k=0,O=0;T==16?(O=3+g(u,d,2),d+=2,k=f[v-1]):T==17?(O=3+g(u,d,3),d+=3):T==18&&(O=11+g(u,d,7),d+=7);for(var V=v+O;v<V;)f[v]=k,v++}}return d},n.F._copyOut=function(s,o,c,u){for(var d=0,f=0,g=u.length>>>1;f<c;){var y=s[f+o];u[f<<1]=0,u[1+(f<<1)]=y,y>d&&(d=y),f++}for(;f<g;)u[f<<1]=0,u[1+(f<<1)]=0,f++;return d},n.F.makeCodes=function(s,o){for(var c,u,d,f,g=n.F.U,y=s.length,v=g.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var T=g.next_code;for(c=0,v[0]=0,u=1;u<=o;u++)c=c+v[u-1]<<1,T[u]=c;for(d=0;d<y;d+=2)(f=s[d+1])!=0&&(s[d]=T[f],T[f]++)},n.F.codes2map=function(s,o,c){for(var u=s.length,d=n.F.U.rev15,f=0;f<u;f+=2)if(s[f+1]!=0)for(var g=f>>1,y=s[f+1],v=g<<4|y,w=o-y,T=s[f]<<w,k=T+(1<<w);T!=k;)c[d[T]>>>15-o]=v,T++},n.F.revCodes=function(s,o){for(var c=n.F.U.rev15,u=15-o,d=0;d<s.length;d+=2){var f=s[d]<<o-s[d+1];s[d]=c[f]>>>u}},n.F._putsE=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8},n.F._putsF=function(s,o,c){c<<=7&o;var u=o>>>3;s[u]|=c,s[u+1]|=c>>>8,s[u+2]|=c>>>16},n.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},n.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},n.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function u(d,f,g){for(;f--!=0;)d.push(0,g)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),u(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var g9=d9({__proto__:null,default:Im},[Im]);const Jr=(function(){var r={nextZero(g,y){for(;g[y]!=0;)y++;return y},readUshort:(g,y)=>g[y]<<8|g[y+1],writeUshort(g,y,v){g[y]=v>>8&255,g[y+1]=255&v},readUint:(g,y)=>16777216*g[y]+(g[y+1]<<16|g[y+2]<<8|g[y+3]),writeUint(g,y,v){g[y]=v>>24&255,g[y+1]=v>>16&255,g[y+2]=v>>8&255,g[y+3]=255&v},readASCII(g,y,v){let w="";for(let T=0;T<v;T++)w+=String.fromCharCode(g[y+T]);return w},writeASCII(g,y,v){for(let w=0;w<v.length;w++)g[y+w]=v.charCodeAt(w)},readBytes(g,y,v){const w=[];for(let T=0;T<v;T++)w.push(g[y+T]);return w},pad:g=>g.length<2?`0${g}`:g,readUTF8(g,y,v){let w,T="";for(let k=0;k<v;k++)T+=`%${r.pad(g[y+k].toString(16))}`;try{w=decodeURIComponent(T)}catch{return r.readASCII(g,y,v)}return w}};function e(g,y,v,w){const T=y*v,k=o(w),O=Math.ceil(y*k/8),V=new Uint8Array(4*T),B=new Uint32Array(V.buffer),{ctype:F}=w,{depth:q}=w,K=r.readUshort;if(F==6){const W=T<<2;if(q==8)for(var z=0;z<W;z+=4)V[z]=g[z],V[z+1]=g[z+1],V[z+2]=g[z+2],V[z+3]=g[z+3];if(q==16)for(z=0;z<W;z++)V[z]=g[z<<1]}else if(F==2){const W=w.tabs.tRNS;if(W==null){if(q==8)for(z=0;z<T;z++){var M=3*z;B[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M]}if(q==16)for(z=0;z<T;z++)M=6*z,B[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M]}else{var x=W[0];const ee=W[1],H=W[2];if(q==8)for(z=0;z<T;z++){var S=z<<2;M=3*z,B[z]=255<<24|g[M+2]<<16|g[M+1]<<8|g[M],g[M]==x&&g[M+1]==ee&&g[M+2]==H&&(V[S+3]=0)}if(q==16)for(z=0;z<T;z++)S=z<<2,M=6*z,B[z]=255<<24|g[M+4]<<16|g[M+2]<<8|g[M],K(g,M)==x&&K(g,M+2)==ee&&K(g,M+4)==H&&(V[S+3]=0)}}else if(F==3){const W=w.tabs.PLTE,ee=w.tabs.tRNS,H=ee?ee.length:0;if(q==1)for(var I=0;I<v;I++){var N=I*O,j=I*y;for(z=0;z<y;z++){S=j+z<<2;var C=3*(G=g[N+(z>>3)]>>7-((7&z)<<0)&1);V[S]=W[C],V[S+1]=W[C+1],V[S+2]=W[C+2],V[S+3]=G<H?ee[G]:255}}if(q==2)for(I=0;I<v;I++)for(N=I*O,j=I*y,z=0;z<y;z++)S=j+z<<2,C=3*(G=g[N+(z>>2)]>>6-((3&z)<<1)&3),V[S]=W[C],V[S+1]=W[C+1],V[S+2]=W[C+2],V[S+3]=G<H?ee[G]:255;if(q==4)for(I=0;I<v;I++)for(N=I*O,j=I*y,z=0;z<y;z++)S=j+z<<2,C=3*(G=g[N+(z>>1)]>>4-((1&z)<<2)&15),V[S]=W[C],V[S+1]=W[C+1],V[S+2]=W[C+2],V[S+3]=G<H?ee[G]:255;if(q==8)for(z=0;z<T;z++){var G;S=z<<2,C=3*(G=g[z]),V[S]=W[C],V[S+1]=W[C+1],V[S+2]=W[C+2],V[S+3]=G<H?ee[G]:255}}else if(F==4){if(q==8)for(z=0;z<T;z++){S=z<<2;var te=g[P=z<<1];V[S]=te,V[S+1]=te,V[S+2]=te,V[S+3]=g[P+1]}if(q==16)for(z=0;z<T;z++){var P;S=z<<2,te=g[P=z<<2],V[S]=te,V[S+1]=te,V[S+2]=te,V[S+3]=g[P+2]}}else if(F==0)for(x=w.tabs.tRNS?w.tabs.tRNS:-1,I=0;I<v;I++){const W=I*O,ee=I*y;if(q==1)for(var D=0;D<y;D++){var Z=(te=255*(g[W+(D>>>3)]>>>7-(7&D)&1))==255*x?0:255;B[ee+D]=Z<<24|te<<16|te<<8|te}else if(q==2)for(D=0;D<y;D++)Z=(te=85*(g[W+(D>>>2)]>>>6-((3&D)<<1)&3))==85*x?0:255,B[ee+D]=Z<<24|te<<16|te<<8|te;else if(q==4)for(D=0;D<y;D++)Z=(te=17*(g[W+(D>>>1)]>>>4-((1&D)<<2)&15))==17*x?0:255,B[ee+D]=Z<<24|te<<16|te<<8|te;else if(q==8)for(D=0;D<y;D++)Z=(te=g[W+D])==x?0:255,B[ee+D]=Z<<24|te<<16|te<<8|te;else if(q==16)for(D=0;D<y;D++)te=g[W+(D<<1)],Z=K(g,W+(D<<1))==x?0:255,B[ee+D]=Z<<24|te<<16|te<<8|te}return V}function t(g,y,v,w){const T=o(g),k=Math.ceil(v*T/8),O=new Uint8Array((k+1+g.interlace)*w);return y=g.tabs.CgBI?s(y,O):n(y,O),g.interlace==0?y=c(y,g,0,v,w):g.interlace==1&&(y=(function(B,F){const q=F.width,K=F.height,z=o(F),M=z>>3,x=Math.ceil(q*z/8),S=new Uint8Array(K*x);let I=0;const N=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let te=0;for(;te<7;){const D=C[te],Z=G[te];let W=0,ee=0,H=N[te];for(;H<K;)H+=D,ee++;let Y=j[te];for(;Y<q;)Y+=Z,W++;const ie=Math.ceil(W*z/8);c(B,F,I,W,ee);let J=0,re=N[te];for(;re<K;){let ye=j[te],Te=I+J*ie<<3;for(;ye<q;){var P;if(z==1&&(P=(P=B[Te>>3])>>7-(7&Te)&1,S[re*x+(ye>>3)]|=P<<7-((7&ye)<<0)),z==2&&(P=(P=B[Te>>3])>>6-(7&Te)&3,S[re*x+(ye>>2)]|=P<<6-((3&ye)<<1)),z==4&&(P=(P=B[Te>>3])>>4-(7&Te)&15,S[re*x+(ye>>1)]|=P<<4-((1&ye)<<2)),z>=8){const Ne=re*x+ye*M;for(let Ie=0;Ie<M;Ie++)S[Ne+Ie]=B[(Te>>3)+Ie]}Te+=z,ye+=Z}J++,re+=D}W*ee!=0&&(I+=ee*(1+ie)),te+=1}return S})(y,g)),y}function n(g,y){return s(new Uint8Array(g.buffer,2,g.length-6),y)}var s=(function(){const g={H:{}};return g.H.N=function(y,v){const w=Uint8Array;let T,k,O=0,V=0,B=0,F=0,q=0,K=0,z=0,M=0,x=0;if(y[0]==3&&y[1]==0)return v||new w(0);const S=g.H,I=S.b,N=S.e,j=S.R,C=S.n,G=S.A,te=S.Z,P=S.m,D=v==null;for(D&&(v=new w(y.length>>>2<<5));O==0;)if(O=I(y,x,1),V=I(y,x+1,2),x+=3,V!=0){if(D&&(v=g.H.W(v,M+(1<<17))),V==1&&(T=P.J,k=P.h,K=511,z=31),V==2){B=N(y,x,5)+257,F=N(y,x+5,5)+1,q=N(y,x+10,4)+4,x+=14;let W=1;for(var Z=0;Z<38;Z+=2)P.Q[Z]=0,P.Q[Z+1]=0;for(Z=0;Z<q;Z++){const Y=N(y,x+3*Z,3);P.Q[1+(P.X[Z]<<1)]=Y,Y>W&&(W=Y)}x+=3*q,C(P.Q,W),G(P.Q,W,P.u),T=P.w,k=P.d,x=j(P.u,(1<<W)-1,B+F,y,x,P.v);const ee=S.V(P.v,0,B,P.C);K=(1<<ee)-1;const H=S.V(P.v,B,F,P.D);z=(1<<H)-1,C(P.C,ee),G(P.C,ee,T),C(P.D,H),G(P.D,H,k)}for(;;){const W=T[te(y,x)&K];x+=15&W;const ee=W>>>4;if(!(ee>>>8))v[M++]=ee;else{if(ee==256)break;{let H=M+ee-254;if(ee>264){const ye=P.q[ee-257];H=M+(ye>>>3)+N(y,x,7&ye),x+=7&ye}const Y=k[te(y,x)&z];x+=15&Y;const ie=Y>>>4,J=P.c[ie],re=(J>>>4)+I(y,x,15&J);for(x+=15&J;M<H;)v[M]=v[M++-re],v[M]=v[M++-re],v[M]=v[M++-re],v[M]=v[M++-re];M=H}}}}else{(7&x)!=0&&(x+=8-(7&x));const W=4+(x>>>3),ee=y[W-4]|y[W-3]<<8;D&&(v=g.H.W(v,M+ee)),v.set(new w(y.buffer,y.byteOffset+W,ee),M),x=W+ee<<3,M+=ee}return v.length==M?v:v.slice(0,M)},g.H.W=function(y,v){const w=y.length;if(v<=w)return y;const T=new Uint8Array(w<<1);return T.set(y,0),T},g.H.R=function(y,v,w,T,k,O){const V=g.H.e,B=g.H.Z;let F=0;for(;F<w;){const q=y[B(T,k)&v];k+=15&q;const K=q>>>4;if(K<=15)O[F]=K,F++;else{let z=0,M=0;K==16?(M=3+V(T,k,2),k+=2,z=O[F-1]):K==17?(M=3+V(T,k,3),k+=3):K==18&&(M=11+V(T,k,7),k+=7);const x=F+M;for(;F<x;)O[F]=z,F++}}return k},g.H.V=function(y,v,w,T){let k=0,O=0;const V=T.length>>>1;for(;O<w;){const B=y[O+v];T[O<<1]=0,T[1+(O<<1)]=B,B>k&&(k=B),O++}for(;O<V;)T[O<<1]=0,T[1+(O<<1)]=0,O++;return k},g.H.n=function(y,v){const w=g.H.m,T=y.length;let k,O,V,B;const F=w.j;for(var q=0;q<=v;q++)F[q]=0;for(q=1;q<T;q+=2)F[y[q]]++;const K=w.K;for(k=0,F[0]=0,O=1;O<=v;O++)k=k+F[O-1]<<1,K[O]=k;for(V=0;V<T;V+=2)B=y[V+1],B!=0&&(y[V]=K[B],K[B]++)},g.H.A=function(y,v,w){const T=y.length,k=g.H.m.r;for(let O=0;O<T;O+=2)if(y[O+1]!=0){const V=O>>1,B=y[O+1],F=V<<4|B,q=v-B;let K=y[O]<<q;const z=K+(1<<q);for(;K!=z;)w[k[K]>>>15-v]=F,K++}},g.H.l=function(y,v){const w=g.H.m.r,T=15-v;for(let k=0;k<y.length;k+=2){const O=y[k]<<v-y[k+1];y[k]=w[O]>>>T}},g.H.M=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8},g.H.I=function(y,v,w){w<<=7&v;const T=v>>>3;y[T]|=w,y[T+1]|=w>>>8,y[T+2]|=w>>>16},g.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},g.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},g.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},g.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},g.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=g.H.m;for(var v=0;v<32768;v++){let T=v;T=(2863311530&T)>>>1|(1431655765&T)<<1,T=(3435973836&T)>>>2|(858993459&T)<<2,T=(4042322160&T)>>>4|(252645135&T)<<4,T=(4278255360&T)>>>8|(16711935&T)<<8,y.r[v]=(T>>>16|T<<16)>>>17}function w(T,k,O){for(;k--!=0;)T.push(0,O)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),g.H.n(y._,9),g.H.A(y._,9,y.J),g.H.l(y._,9),w(y.$,32,5),g.H.n(y.$,5),g.H.A(y.$,5,y.h),g.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),g.H.N})();function o(g){return[1,null,3,1,2,null,4][g.ctype]*g.depth}function c(g,y,v,w,T){let k=o(y);const O=Math.ceil(w*k/8);let V,B;k=Math.ceil(k/8);let F=g[v],q=0;if(F>1&&(g[v]=[0,0,1][F-2]),F==3)for(q=k;q<O;q++)g[q+1]=g[q+1]+(g[q+1-k]>>>1)&255;for(let K=0;K<T;K++)if(V=v+K*O,B=V+K+1,F=g[B-1],q=0,F==0)for(;q<O;q++)g[V+q]=g[B+q];else if(F==1){for(;q<k;q++)g[V+q]=g[B+q];for(;q<O;q++)g[V+q]=g[B+q]+g[V+q-k]}else if(F==2)for(;q<O;q++)g[V+q]=g[B+q]+g[V+q-O];else if(F==3){for(;q<k;q++)g[V+q]=g[B+q]+(g[V+q-O]>>>1);for(;q<O;q++)g[V+q]=g[B+q]+(g[V+q-O]+g[V+q-k]>>>1)}else{for(;q<k;q++)g[V+q]=g[B+q]+u(0,g[V+q-O],0);for(;q<O;q++)g[V+q]=g[B+q]+u(g[V+q-k],g[V+q-O],g[V+q-k-O])}return g}function u(g,y,v){const w=g+y-v,T=w-g,k=w-y,O=w-v;return T*T<=k*k&&T*T<=O*O?g:k*k<=O*O?y:v}function d(g,y,v){v.width=r.readUint(g,y),y+=4,v.height=r.readUint(g,y),y+=4,v.depth=g[y],y++,v.ctype=g[y],y++,v.compress=g[y],y++,v.filter=g[y],y++,v.interlace=g[y],y++}function f(g,y,v,w,T,k,O,V,B){const F=Math.min(y,T),q=Math.min(v,k);let K=0,z=0;for(let te=0;te<q;te++)for(let P=0;P<F;P++)if(O>=0&&V>=0?(K=te*y+P<<2,z=(V+te)*T+O+P<<2):(K=(-V+te)*y-O+P<<2,z=te*T+P<<2),B==0)w[z]=g[K],w[z+1]=g[K+1],w[z+2]=g[K+2],w[z+3]=g[K+3];else if(B==1){var M=g[K+3]*.00392156862745098,x=g[K]*M,S=g[K+1]*M,I=g[K+2]*M,N=w[z+3]*(1/255),j=w[z]*N,C=w[z+1]*N,G=w[z+2]*N;const D=1-M,Z=M+N*D,W=Z==0?0:1/Z;w[z+3]=255*Z,w[z+0]=(x+j*D)*W,w[z+1]=(S+C*D)*W,w[z+2]=(I+G*D)*W}else if(B==2)M=g[K+3],x=g[K],S=g[K+1],I=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==N&&x==j&&S==C&&I==G?(w[z]=0,w[z+1]=0,w[z+2]=0,w[z+3]=0):(w[z]=x,w[z+1]=S,w[z+2]=I,w[z+3]=M);else if(B==3){if(M=g[K+3],x=g[K],S=g[K+1],I=g[K+2],N=w[z+3],j=w[z],C=w[z+1],G=w[z+2],M==N&&x==j&&S==C&&I==G)continue;if(M<220&&N>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const T=r,k=T.readUshort,O=T.readUint,V={tabs:{},frames:[]},B=new Uint8Array(v.length);let F,q=0,K=0;const z=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(v[M]!=z[M])throw"The input is not a PNG file!";for(;w<v.length;){const te=T.readUint(v,w);w+=4;const P=T.readASCII(v,w,4);if(w+=4,P=="IHDR")d(v,w,V);else if(P=="iCCP"){for(var x=w;v[x]!=0;)x++;T.readASCII(v,w,x-w),v[x+1];const D=v.slice(x+2,w+te);let Z=null;try{Z=n(D)}catch{Z=s(D)}V.tabs[P]=Z}else if(P=="CgBI")V.tabs[P]=v.slice(w,w+4);else if(P=="IDAT"){for(M=0;M<te;M++)B[q+M]=v[w+M];q+=te}else if(P=="acTL")V.tabs[P]={num_frames:O(v,w),num_plays:O(v,w+4)},F=new Uint8Array(v.length);else if(P=="fcTL"){K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,F.slice(0,K),G.rect.width,G.rect.height),K=0);const D={x:O(v,w+12),y:O(v,w+16),width:O(v,w+4),height:O(v,w+8)};let Z=k(v,w+22);Z=k(v,w+20)/(Z==0?100:Z);const W={rect:D,delay:Math.round(1e3*Z),dispose:v[w+24],blend:v[w+25]};V.frames.push(W)}else if(P=="fdAT"){for(M=0;M<te-4;M++)F[K+M]=v[w+M+4];K+=te-4}else if(P=="pHYs")V.tabs[P]=[T.readUint(v,w),T.readUint(v,w+4),v[w+8]];else if(P=="cHRM")for(V.tabs[P]=[],M=0;M<8;M++)V.tabs[P].push(T.readUint(v,w+4*M));else if(P=="tEXt"||P=="zTXt"){V.tabs[P]==null&&(V.tabs[P]={});var S=T.nextZero(v,w),I=T.readASCII(v,w,S-w),N=w+te-S-1;if(P=="tEXt")C=T.readASCII(v,S+1,N);else{var j=n(v.slice(S+2,S+2+N));C=T.readUTF8(j,0,j.length)}V.tabs[P][I]=C}else if(P=="iTXt"){V.tabs[P]==null&&(V.tabs[P]={}),S=0,x=w,S=T.nextZero(v,x),I=T.readASCII(v,x,S-x);const D=v[x=S+1];var C;v[x+1],x+=2,S=T.nextZero(v,x),T.readASCII(v,x,S-x),x=S+1,S=T.nextZero(v,x),T.readUTF8(v,x,S-x),N=te-((x=S+1)-w),D==0?C=T.readUTF8(v,x,N):(j=n(v.slice(x,x+N)),C=T.readUTF8(j,0,j.length)),V.tabs[P][I]=C}else if(P=="PLTE")V.tabs[P]=T.readBytes(v,w,te);else if(P=="hIST"){const D=V.tabs.PLTE.length/3;for(V.tabs[P]=[],M=0;M<D;M++)V.tabs[P].push(k(v,w+2*M))}else if(P=="tRNS")V.ctype==3?V.tabs[P]=T.readBytes(v,w,te):V.ctype==0?V.tabs[P]=k(v,w):V.ctype==2&&(V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]);else if(P=="gAMA")V.tabs[P]=T.readUint(v,w)/1e5;else if(P=="sRGB")V.tabs[P]=v[w];else if(P=="bKGD")V.ctype==0||V.ctype==4?V.tabs[P]=[k(v,w)]:V.ctype==2||V.ctype==6?V.tabs[P]=[k(v,w),k(v,w+2),k(v,w+4)]:V.ctype==3&&(V.tabs[P]=v[w]);else if(P=="IEND")break;w+=te,T.readUint(v,w),w+=4}var G;return K!=0&&((G=V.frames[V.frames.length-1]).data=t(V,F.slice(0,K),G.rect.width,G.rect.height)),V.data=t(V,B,V.width,V.height),delete V.compress,delete V.interlace,delete V.filter,V},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const T=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const k=v*w*4,O=new Uint8Array(k),V=new Uint8Array(k),B=new Uint8Array(k);for(let q=0;q<y.frames.length;q++){const K=y.frames[q],z=K.rect.x,M=K.rect.y,x=K.rect.width,S=K.rect.height,I=e(K.data,x,S,y);if(q!=0)for(var F=0;F<k;F++)B[F]=O[F];if(K.blend==0?f(I,x,S,O,v,w,z,M,0):K.blend==1&&f(I,x,S,O,v,w,z,M,1),T.push(O.buffer.slice(0)),K.dispose!=0){if(K.dispose==1)f(V,x,S,O,v,w,z,M,0);else if(K.dispose==2)for(F=0;F<k;F++)O[F]=B[F]}}return T},_paeth:u,_copyTile:f,_bin:r}})();(function(){const{_copyTile:r}=Jr,{_bin:e}=Jr,t=Jr._paeth;var n={table:(function(){const x=new Uint32Array(256);for(let S=0;S<256;S++){let I=S;for(let N=0;N<8;N++)1&I?I=3988292384^I>>>1:I>>>=1;x[S]=I}return x})(),update(x,S,I,N){for(let j=0;j<N;j++)x=n.table[255&(x^S[I+j])]^x>>>8;return x},crc:(x,S,I)=>4294967295^n.update(4294967295,x,S,I)};function s(x,S,I,N){S[I]+=x[0]*N>>4,S[I+1]+=x[1]*N>>4,S[I+2]+=x[2]*N>>4,S[I+3]+=x[3]*N>>4}function o(x){return Math.max(0,Math.min(255,x))}function c(x,S){const I=x[0]-S[0],N=x[1]-S[1],j=x[2]-S[2],C=x[3]-S[3];return I*I+N*N+j*j+C*C}function u(x,S,I,N,j,C,G){G==null&&(G=1);const te=N.length,P=[];for(var D=0;D<te;D++){const re=N[D];P.push([re>>>0&255,re>>>8&255,re>>>16&255,re>>>24&255])}for(D=0;D<te;D++){let re=4294967295;for(var Z=0,W=0;W<te;W++){var ee=c(P[D],P[W]);W!=D&&ee<re&&(re=ee,Z=W)}}const H=new Uint32Array(j.buffer),Y=new Int16Array(S*I*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(D=0;D<ie.length;D++)ie[D]=255*((ie[D]+.5)/16-.5);for(let re=0;re<I;re++)for(let ye=0;ye<S;ye++){var J;D=4*(re*S+ye),G!=2?J=[o(x[D]+Y[D]),o(x[D+1]+Y[D+1]),o(x[D+2]+Y[D+2]),o(x[D+3]+Y[D+3])]:(ee=ie[4*(3&re)+(3&ye)],J=[o(x[D]+ee),o(x[D+1]+ee),o(x[D+2]+ee),o(x[D+3]+ee)]),Z=0;let Te=16777215;for(W=0;W<te;W++){const qe=c(J,P[W]);qe<Te&&(Te=qe,Z=W)}const Ne=P[Z],Ie=[J[0]-Ne[0],J[1]-Ne[1],J[2]-Ne[2],J[3]-Ne[3]];G==1&&(ye!=S-1&&s(Ie,Y,D+4,7),re!=I-1&&(ye!=0&&s(Ie,Y,D+4*S-4,3),s(Ie,Y,D+4*S,5),ye!=S-1&&s(Ie,Y,D+4*S+4,1))),C[D>>2]=Z,H[D>>2]=N[Z]}}function d(x,S,I,N,j){j==null&&(j={});const{crc:C}=n,G=e.writeUint,te=e.writeUshort,P=e.writeASCII;let D=8;const Z=x.frames.length>1;let W,ee=!1,H=33+(Z?20:0);if(j.sRGB!=null&&(H+=13),j.pHYs!=null&&(H+=21),j.iCCP!=null&&(W=pako.deflate(j.iCCP),H+=21+W.length+4),x.ctype==3){for(var Y=x.plte.length,ie=0;ie<Y;ie++)x.plte[ie]>>>24!=255&&(ee=!0);H+=8+3*Y+4+(ee?8+1*Y+4:0)}for(var J=0;J<x.frames.length;J++)Z&&(H+=38),H+=(Ne=x.frames[J]).cimg.length+12,J!=0&&(H+=4);H+=12;const re=new Uint8Array(H),ye=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)re[ie]=ye[ie];if(G(re,D,13),D+=4,P(re,D,"IHDR"),D+=4,G(re,D,S),D+=4,G(re,D,I),D+=4,re[D]=x.depth,D++,re[D]=x.ctype,D++,re[D]=0,D++,re[D]=0,D++,re[D]=0,D++,G(re,D,C(re,D-17,17)),D+=4,j.sRGB!=null&&(G(re,D,1),D+=4,P(re,D,"sRGB"),D+=4,re[D]=j.sRGB,D++,G(re,D,C(re,D-5,5)),D+=4),j.iCCP!=null){const Ie=13+W.length;G(re,D,Ie),D+=4,P(re,D,"iCCP"),D+=4,P(re,D,"ICC profile"),D+=11,D+=2,re.set(W,D),D+=W.length,G(re,D,C(re,D-(Ie+4),Ie+4)),D+=4}if(j.pHYs!=null&&(G(re,D,9),D+=4,P(re,D,"pHYs"),D+=4,G(re,D,j.pHYs[0]),D+=4,G(re,D,j.pHYs[1]),D+=4,re[D]=j.pHYs[2],D++,G(re,D,C(re,D-13,13)),D+=4),Z&&(G(re,D,8),D+=4,P(re,D,"acTL"),D+=4,G(re,D,x.frames.length),D+=4,G(re,D,j.loop!=null?j.loop:0),D+=4,G(re,D,C(re,D-12,12)),D+=4),x.ctype==3){for(G(re,D,3*(Y=x.plte.length)),D+=4,P(re,D,"PLTE"),D+=4,ie=0;ie<Y;ie++){const Ie=3*ie,qe=x.plte[ie],Qe=255&qe,nt=qe>>>8&255,Bt=qe>>>16&255;re[D+Ie+0]=Qe,re[D+Ie+1]=nt,re[D+Ie+2]=Bt}if(D+=3*Y,G(re,D,C(re,D-3*Y-4,3*Y+4)),D+=4,ee){for(G(re,D,Y),D+=4,P(re,D,"tRNS"),D+=4,ie=0;ie<Y;ie++)re[D+ie]=x.plte[ie]>>>24&255;D+=Y,G(re,D,C(re,D-Y-4,Y+4)),D+=4}}let Te=0;for(J=0;J<x.frames.length;J++){var Ne=x.frames[J];Z&&(G(re,D,26),D+=4,P(re,D,"fcTL"),D+=4,G(re,D,Te++),D+=4,G(re,D,Ne.rect.width),D+=4,G(re,D,Ne.rect.height),D+=4,G(re,D,Ne.rect.x),D+=4,G(re,D,Ne.rect.y),D+=4,te(re,D,N[J]),D+=2,te(re,D,1e3),D+=2,re[D]=Ne.dispose,D++,re[D]=Ne.blend,D++,G(re,D,C(re,D-30,30)),D+=4);const Ie=Ne.cimg;G(re,D,(Y=Ie.length)+(J==0?0:4)),D+=4;const qe=D;P(re,D,J==0?"IDAT":"fdAT"),D+=4,J!=0&&(G(re,D,Te++),D+=4),re.set(Ie,D),D+=Y,G(re,D,C(re,qe,D-qe)),D+=4}return G(re,D,0),D+=4,P(re,D,"IEND"),D+=4,G(re,D,C(re,D-4,4)),D+=4,re.buffer}function f(x,S,I){for(let N=0;N<x.frames.length;N++){const j=x.frames[N];j.rect.width;const C=j.rect.height,G=new Uint8Array(C*j.bpl+C);j.cimg=w(j.img,C,j.bpp,j.bpl,G,S,I)}}function g(x,S,I,N,j){const C=j[0],G=j[1],te=j[2],P=j[3],D=j[4],Z=j[5];let W=6,ee=8,H=255;for(var Y=0;Y<x.length;Y++){const Ct=new Uint8Array(x[Y]);for(var ie=Ct.length,J=0;J<ie;J+=4)H&=Ct[J+3]}const re=H!=255,ye=(function(at,ot,$e,pe,Ee,Be){const Me=[];for(var xe=0;xe<at.length;xe++){const Ft=new Uint8Array(at[xe]),kn=new Uint32Array(Ft.buffer);var rt;let wn=0,Kt=0,Tt=ot,Zt=$e,kt=pe?1:0;if(xe!=0){const Yo=Be||pe||xe==1||Me[xe-2].dispose!=0?1:2;let oi=0,Na=1e9;for(let Dn=0;Dn<Yo;Dn++){var pt=new Uint8Array(at[xe-1-Dn]);const qi=new Uint32Array(at[xe-1-Dn]);let yt=ot,hn=$e,xn=-1,En=-1;for(let Er=0;Er<$e;Er++)for(let pn=0;pn<ot;pn++)kn[dt=Er*ot+pn]!=qi[dt]&&(pn<yt&&(yt=pn),pn>xn&&(xn=pn),Er<hn&&(hn=Er),Er>En&&(En=Er));xn==-1&&(yt=hn=xn=En=0),Ee&&((1&yt)==1&&yt--,(1&hn)==1&&hn--);const Qo=(xn-yt+1)*(En-hn+1);Qo<Na&&(Na=Qo,oi=Dn,wn=yt,Kt=hn,Tt=xn-yt+1,Zt=En-hn+1)}pt=new Uint8Array(at[xe-1-oi]),oi==1&&(Me[xe-1].dispose=2),rt=new Uint8Array(Tt*Zt*4),r(pt,ot,$e,rt,Tt,Zt,-wn,-Kt,0),kt=r(Ft,ot,$e,rt,Tt,Zt,-wn,-Kt,3)?1:0,kt==1?v(Ft,ot,$e,rt,{x:wn,y:Kt,width:Tt,height:Zt}):r(Ft,ot,$e,rt,Tt,Zt,-wn,-Kt,0)}else rt=Ft.slice(0);Me.push({rect:{x:wn,y:Kt,width:Tt,height:Zt},img:rt,blend:kt,dispose:0})}if(pe)for(xe=0;xe<Me.length;xe++){if((Fn=Me[xe]).blend==1)continue;const Ft=Fn.rect,kn=Me[xe-1].rect,wn=Math.min(Ft.x,kn.x),Kt=Math.min(Ft.y,kn.y),Tt={x:wn,y:Kt,width:Math.max(Ft.x+Ft.width,kn.x+kn.width)-wn,height:Math.max(Ft.y+Ft.height,kn.y+kn.height)-Kt};Me[xe-1].dispose=1,xe-1!=0&&y(at,ot,$e,Me,xe-1,Tt,Ee),y(at,ot,$e,Me,xe,Tt,Ee)}let Bn=0;if(at.length!=1)for(var dt=0;dt<Me.length;dt++){var Fn;Bn+=(Fn=Me[dt]).rect.width*Fn.rect.height}return Me})(x,S,I,C,G,te),Te={},Ne=[],Ie=[];if(N!=0){const Ct=[];for(J=0;J<ye.length;J++)Ct.push(ye[J].img.buffer);const at=(function(Ee){let Be=0;for(var Me=0;Me<Ee.length;Me++)Be+=Ee[Me].byteLength;const xe=new Uint8Array(Be);let rt=0;for(Me=0;Me<Ee.length;Me++){const pt=new Uint8Array(Ee[Me]),Bn=pt.length;for(let dt=0;dt<Bn;dt+=4){let Fn=pt[dt],Ft=pt[dt+1],kn=pt[dt+2];const wn=pt[dt+3];wn==0&&(Fn=Ft=kn=0),xe[rt+dt]=Fn,xe[rt+dt+1]=Ft,xe[rt+dt+2]=kn,xe[rt+dt+3]=wn}rt+=Bn}return xe.buffer})(Ct),ot=k(at,N);for(J=0;J<ot.plte.length;J++)Ne.push(ot.plte[J].est.rgba);let $e=0;for(J=0;J<ye.length;J++){const pe=(Qe=ye[J]).img.length;var qe=new Uint8Array(ot.inds.buffer,$e>>2,pe>>2);Ie.push(qe);const Ee=new Uint8Array(ot.abuf,$e,pe);Z&&u(Qe.img,Qe.rect.width,Qe.rect.height,Ne,Ee,qe),Qe.img.set(Ee),$e+=pe}}else for(Y=0;Y<ye.length;Y++){var Qe=ye[Y];const Ct=new Uint32Array(Qe.img.buffer);var nt=Qe.rect.width;for(ie=Ct.length,qe=new Uint8Array(ie),Ie.push(qe),J=0;J<ie;J++){const at=Ct[J];if(J!=0&&at==Ct[J-1])qe[J]=qe[J-1];else if(J>nt&&at==Ct[J-nt])qe[J]=qe[J-nt];else{let ot=Te[at];if(ot==null&&(Te[at]=ot=Ne.length,Ne.push(at),Ne.length>=300))break;qe[J]=ot}}}const Bt=Ne.length;for(Bt<=256&&D==0&&(ee=Bt<=2?1:Bt<=4?2:Bt<=16?4:8,ee=Math.max(ee,P)),Y=0;Y<ye.length;Y++){(Qe=ye[Y]).rect.x,Qe.rect.y,nt=Qe.rect.width;const Ct=Qe.rect.height;let at=Qe.img;new Uint32Array(at.buffer);let ot=4*nt,$e=4;if(Bt<=256&&D==0){ot=Math.ceil(ee*nt/8);var lt=new Uint8Array(ot*Ct);const pe=Ie[Y];for(let Ee=0;Ee<Ct;Ee++){J=Ee*ot;const Be=Ee*nt;if(ee==8)for(var ct=0;ct<nt;ct++)lt[J+ct]=pe[Be+ct];else if(ee==4)for(ct=0;ct<nt;ct++)lt[J+(ct>>1)]|=pe[Be+ct]<<4-4*(1&ct);else if(ee==2)for(ct=0;ct<nt;ct++)lt[J+(ct>>2)]|=pe[Be+ct]<<6-2*(3&ct);else if(ee==1)for(ct=0;ct<nt;ct++)lt[J+(ct>>3)]|=pe[Be+ct]<<7-1*(7&ct)}at=lt,W=3,$e=1}else if(re==0&&ye.length==1){lt=new Uint8Array(nt*Ct*3);const pe=nt*Ct;for(J=0;J<pe;J++){const Ee=3*J,Be=4*J;lt[Ee]=at[Be],lt[Ee+1]=at[Be+1],lt[Ee+2]=at[Be+2]}at=lt,W=2,$e=3,ot=3*nt}Qe.img=at,Qe.bpl=ot,Qe.bpp=$e}return{ctype:W,depth:ee,plte:Ne,frames:ye}}function y(x,S,I,N,j,C,G){const te=Uint8Array,P=Uint32Array,D=new te(x[j-1]),Z=new P(x[j-1]),W=j+1<x.length?new te(x[j+1]):null,ee=new te(x[j]),H=new P(ee.buffer);let Y=S,ie=I,J=-1,re=-1;for(let Te=0;Te<C.height;Te++)for(let Ne=0;Ne<C.width;Ne++){const Ie=C.x+Ne,qe=C.y+Te,Qe=qe*S+Ie,nt=H[Qe];nt==0||N[j-1].dispose==0&&Z[Qe]==nt&&(W==null||W[4*Qe+3]!=0)||(Ie<Y&&(Y=Ie),Ie>J&&(J=Ie),qe<ie&&(ie=qe),qe>re&&(re=qe))}J==-1&&(Y=ie=J=re=0),G&&((1&Y)==1&&Y--,(1&ie)==1&&ie--),C={x:Y,y:ie,width:J-Y+1,height:re-ie+1};const ye=N[j];ye.rect=C,ye.blend=1,ye.img=new Uint8Array(C.width*C.height*4),N[j-1].dispose==0?(r(D,S,I,ye.img,C.width,C.height,-C.x,-C.y,0),v(ee,S,I,ye.img,C)):r(ee,S,I,ye.img,C.width,C.height,-C.x,-C.y,0)}function v(x,S,I,N,j){r(x,S,I,N,j.width,j.height,-j.x,-j.y,2)}function w(x,S,I,N,j,C,G){const te=[];let P,D=[0,1,2,3,4];C!=-1?D=[C]:(S*N>5e5||I==1)&&(D=[0]),G&&(P={level:0});const Z=g9;for(var W=0;W<D.length;W++){for(let Y=0;Y<S;Y++)T(j,x,Y,N,I,D[W]);te.push(Z.deflate(j,P))}let ee,H=1e9;for(W=0;W<te.length;W++)te[W].length<H&&(ee=W,H=te[W].length);return te[ee]}function T(x,S,I,N,j,C){const G=I*N;let te=G+I;if(x[te]=C,te++,C==0)if(N<500)for(var P=0;P<N;P++)x[te+P]=S[G+P];else x.set(new Uint8Array(S.buffer,G,N),te);else if(C==1){for(P=0;P<j;P++)x[te+P]=S[G+P];for(P=j;P<N;P++)x[te+P]=S[G+P]-S[G+P-j]+256&255}else if(I==0){for(P=0;P<j;P++)x[te+P]=S[G+P];if(C==2)for(P=j;P<N;P++)x[te+P]=S[G+P];if(C==3)for(P=j;P<N;P++)x[te+P]=S[G+P]-(S[G+P-j]>>1)+256&255;if(C==4)for(P=j;P<N;P++)x[te+P]=S[G+P]-t(S[G+P-j],0,0)+256&255}else{if(C==2)for(P=0;P<N;P++)x[te+P]=S[G+P]+256-S[G+P-N]&255;if(C==3){for(P=0;P<j;P++)x[te+P]=S[G+P]+256-(S[G+P-N]>>1)&255;for(P=j;P<N;P++)x[te+P]=S[G+P]+256-(S[G+P-N]+S[G+P-j]>>1)&255}if(C==4){for(P=0;P<j;P++)x[te+P]=S[G+P]+256-t(0,S[G+P-N],0)&255;for(P=j;P<N;P++)x[te+P]=S[G+P]+256-t(S[G+P-j],S[G+P-N],S[G+P-j-N])&255}}}function k(x,S){const I=new Uint8Array(x),N=I.slice(0),j=new Uint32Array(N.buffer),C=O(N,S),G=C[0],te=C[1],P=I.length,D=new Uint8Array(P>>2);let Z;if(I.length<2e7)for(var W=0;W<P;W+=4)Z=V(G,ee=I[W]*(1/255),H=I[W+1]*(1/255),Y=I[W+2]*(1/255),ie=I[W+3]*(1/255)),D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba;else for(W=0;W<P;W+=4){var ee=I[W]*.00392156862745098,H=I[W+1]*(1/255),Y=I[W+2]*(1/255),ie=I[W+3]*(1/255);for(Z=G;Z.left;)Z=B(Z.est,ee,H,Y,ie)<=0?Z.left:Z.right;D[W>>2]=Z.ind,j[W>>2]=Z.est.rgba}return{abuf:N.buffer,inds:D,plte:te}}function O(x,S,I){I==null&&(I=1e-4);const N=new Uint32Array(x.buffer),j={i0:0,i1:x.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=K(x,j.i0,j.i1),j.est=z(j.bst);const C=[j];for(;C.length<S;){let te=0,P=0;for(var G=0;G<C.length;G++)C[G].est.L>te&&(te=C[G].est.L,P=G);if(te<I)break;const D=C[P],Z=F(x,N,D.i0,D.i1,D.est.e,D.est.eMq255);if(D.i0>=Z||D.i1<=Z){D.est.L=0;continue}const W={i0:D.i0,i1:Z,bst:null,est:null,tdst:0,left:null,right:null};W.bst=K(x,W.i0,W.i1),W.est=z(W.bst);const ee={i0:Z,i1:D.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:D.bst.N-W.bst.N},G=0;G<16;G++)ee.bst.R[G]=D.bst.R[G]-W.bst.R[G];for(G=0;G<4;G++)ee.bst.m[G]=D.bst.m[G]-W.bst.m[G];ee.est=z(ee.bst),D.left=W,D.right=ee,C[P]=W,C.push(ee)}for(C.sort(((te,P)=>P.bst.N-te.bst.N)),G=0;G<C.length;G++)C[G].ind=G;return[j,C]}function V(x,S,I,N,j){if(x.left==null)return x.tdst=(function(W,ee,H,Y,ie){const J=ee-W[0],re=H-W[1],ye=Y-W[2],Te=ie-W[3];return J*J+re*re+ye*ye+Te*Te})(x.est.q,S,I,N,j),x;const C=B(x.est,S,I,N,j);let G=x.left,te=x.right;C>0&&(G=x.right,te=x.left);const P=V(G,S,I,N,j);if(P.tdst<=C*C)return P;const D=V(te,S,I,N,j);return D.tdst<P.tdst?D:P}function B(x,S,I,N,j){const{e:C}=x;return C[0]*S+C[1]*I+C[2]*N+C[3]*j-x.eMq}function F(x,S,I,N,j,C){for(N-=4;I<N;){for(;q(x,I,j)<=C;)I+=4;for(;q(x,N,j)>C;)N-=4;if(I>=N)break;const G=S[I>>2];S[I>>2]=S[N>>2],S[N>>2]=G,I+=4,N-=4}for(;q(x,I,j)>C;)I-=4;return I+4}function q(x,S,I){return x[S]*I[0]+x[S+1]*I[1]+x[S+2]*I[2]+x[S+3]*I[3]}function K(x,S,I){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],C=I-S>>2;for(let G=S;G<I;G+=4){const te=x[G]*.00392156862745098,P=x[G+1]*(1/255),D=x[G+2]*(1/255),Z=x[G+3]*(1/255);j[0]+=te,j[1]+=P,j[2]+=D,j[3]+=Z,N[0]+=te*te,N[1]+=te*P,N[2]+=te*D,N[3]+=te*Z,N[5]+=P*P,N[6]+=P*D,N[7]+=P*Z,N[10]+=D*D,N[11]+=D*Z,N[15]+=Z*Z}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:j,N:C}}function z(x){const{R:S}=x,{m:I}=x,{N}=x,j=I[0],C=I[1],G=I[2],te=I[3],P=N==0?0:1/N,D=[S[0]-j*j*P,S[1]-j*C*P,S[2]-j*G*P,S[3]-j*te*P,S[4]-C*j*P,S[5]-C*C*P,S[6]-C*G*P,S[7]-C*te*P,S[8]-G*j*P,S[9]-G*C*P,S[10]-G*G*P,S[11]-G*te*P,S[12]-te*j*P,S[13]-te*C*P,S[14]-te*G*P,S[15]-te*te*P],Z=D,W=M;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,Y=0;if(N!=0)for(let J=0;J<16&&(ee=W.multVec(Z,ee),Y=Math.sqrt(W.dot(ee,ee)),ee=W.sml(1/Y,ee),!(J!=0&&Math.abs(Y-H)<1e-9));J++)H=Y;const ie=[j*P,C*P,G*P,te*P];return{Cov:D,q:ie,e:ee,L:H,eMq255:W.dot(W.sml(255,ie),ee),eMq:W.dot(ee,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var M={multVec:(x,S)=>[x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],x[4]*S[0]+x[5]*S[1]+x[6]*S[2]+x[7]*S[3],x[8]*S[0]+x[9]*S[1]+x[10]*S[2]+x[11]*S[3],x[12]*S[0]+x[13]*S[1]+x[14]*S[2]+x[15]*S[3]],dot:(x,S)=>x[0]*S[0]+x[1]*S[1]+x[2]*S[2]+x[3]*S[3],sml:(x,S)=>[x*S[0],x*S[1],x*S[2],x*S[3]]};Jr.encode=function(S,I,N,j,C,G,te){j==null&&(j=0),te==null&&(te=!1);const P=g(S,I,N,j,[!1,!1,!1,0,te,!1]);return f(P,-1),d(P,I,N,C,G)},Jr.encodeLL=function(S,I,N,j,C,G,te,P){const D={ctype:0+(j==1?0:2)+(C==0?0:4),depth:G,frames:[]},Z=(j+C)*G,W=Z*I;for(let ee=0;ee<S.length;ee++)D.frames.push({rect:{x:0,y:0,width:I,height:N},img:new Uint8Array(S[ee]),blend:0,dispose:1,bpp:Math.ceil(Z/8),bpl:Math.ceil(W/8)});return f(D,0,!0),d(D,I,N,te,P)},Jr.encode.compress=g,Jr.encode.dither=u,Jr.quantize=k,Jr.quantize.getKDtree=O,Jr.quantize.getNearest=V})();const mR={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,o=r.getContext("2d").getImageData(0,0,t,n),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,d=u*n,f=122+d,g=new ArrayBuffer(f),y=new DataView(g),v=1<<20;let w,T,k,O,V=v,B=0,F=0,q=0;function K(x){y.setUint16(F,x,!0),F+=2}function z(x){y.setUint32(F,x,!0),F+=4}function M(x){F+=x}K(19778),z(f),M(4),z(122),z(108),z(t),z(-n>>>0),K(1),K(32),z(3),z(d),z(2835),z(2835),M(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),(function x(){for(;B<n&&V>0;){for(O=122+B*u,w=0;w<s;)V--,T=c[q++],k=T>>>24,y.setUint32(O+w,T<<8|k),w+=4;B++}q<c.length?(V=v,setTimeout(x,mR._dly)):e(g)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var rr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},p9={[rr.CHROME]:16384,[rr.FIREFOX]:11180,[rr.DESKTOP_SAFARI]:16384,[rr.IE]:8192,[rr.IOS]:4096,[rr.ETC]:8192};const ev=typeof window<"u",gR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Rm=ev&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),y9=(ev||gR)&&(Rm&&Rm.getOriginalSymbol(window,"File")||typeof File<"u"&&File),pR=(ev||gR)&&(Rm&&Rm.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function tv(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let u=c.length;const d=new Uint8Array(u);for(;u--;)d[u]=c.charCodeAt(u);const f=new Blob([d],{type:o});f.name=e,f.lastModified=t,n(f)}))}function yR(r){return new Promise(((e,t)=>{const n=new pR;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function _R(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function go(){if(go.cachedResult!==void 0)return go.cachedResult;let r=rr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=rr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=rr.IOS:/Safari/i.test(e)?r=rr.DESKTOP_SAFARI:/Firefox/i.test(e)?r=rr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=rr.IE),go.cachedResult=r,go.cachedResult}function vR(r,e){const t=go(),n=p9[t];let s=r,o=e,c=s*o;const u=s>o?o/s:s/o;for(;c>n*n;){const d=(n+s)/2,f=(n+o)/2;d<f?(o=f,s=f*u):(o=d*u,s=d),c=s*o}return{width:s,height:o}}function yg(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function bR(r,e){const{width:t,height:n}=vR(r.width,r.height),[s,o]=yg(t,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(r,0,0,s.width,s.height),s}function $f(){return $f.cachedResult!==void 0||($f.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),$f.cachedResult}function Cm(r,e={}){return new Promise((function(t,n){let s,o;var c=function(){try{return o=bR(s,e.fileType||r.type),t([s,o])}catch(d){return n(d)}},u=function(d){try{var f=function(g){try{throw g}catch(y){return n(y)}};try{let g;return yR(r).then((function(y){try{return g=y,_R(g).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return n(w)}})()}catch(w){return f(w)}}),f)}catch(v){return f(v)}}),f)}catch(g){f(g)}}catch(g){return n(g)}};try{if($f()||[rr.DESKTOP_SAFARI,rr.MOBILE_SAFARI].includes(go()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,c()}catch{return u()}}),u)}catch{u()}}))}function Nm(r,e,t,n,s=1){return new Promise((function(o,c){let u;if(e==="image/png"){let y,v,w;return y=r.getContext("2d"),{data:v}=y.getImageData(0,0,r.width,r.height),w=Jr.encode([v.buffer],r.width,r.height,4096*s),u=new Blob([w],{type:e}),u.name=t,u.lastModified=n,d.call(this)}{let y=function(){return d.call(this)};var f=y;if(e==="image/bmp")return new Promise((v=>mR.toBlob(r,v))).then((function(v){try{return u=v,u.name=t,u.lastModified=n,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var g=v;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(w){try{return u=w,u.name=t,u.lastModified=n,v.call(this)}catch(T){return c(T)}}).bind(this),c);{let w;return w=r.toDataURL(e,s),tv(w,t,n).then((function(T){try{return u=T,v.call(this)}catch(k){return c(k)}}).bind(this),c)}}}function d(){return o(u)}}))}function Ai(r){r.width=0,r.height=0}function Wl(){return new Promise((function(r,e){let t,n,s,o;return Wl.cachedResult!==void 0?r(Wl.cachedResult):tv("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,Cm(t).then((function(u){try{return n=u[1],Nm(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Ai(n),Cm(s).then((function(f){try{return o=f[0],Wl.cachedResult=o.width===1&&o.height===2,r(Wl.cachedResult)}catch(g){return e(g)}}),e)}catch(f){return e(f)}}),e)}catch(d){return e(d)}}),e)}catch(u){return e(u)}}),e)}))}function wR(r){return new Promise(((e,t)=>{const n=new pR;n.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const d=o.getUint16(u,!1);if(u+=2,d==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const f=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,f);const g=o.getUint16(u,f);u+=2;for(let y=0;y<g;y++)if(o.getUint16(u+12*y,f)==274)return e(o.getUint16(u+12*y+8,f))}else{if((65280&d)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function xR(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let o,c=r;return isFinite(s)&&(t>s||n>s)&&([c,o]=yg(t,n),t>n?(c.width=s,c.height=n/t*s):(c.width=t/n*s,c.height=s),o.drawImage(r,0,0,c.width,c.height),Ai(r)),c}function ER(r,e){const{width:t}=r,{height:n}=r,[s,o]=yg(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,n),Ai(r),s}function MT(r,e,t=0){return new Promise((function(n,s){let o,c,u,d,f,g,y,v,w,T,k,O,V,B,F,q,K,z,M,x;function S(N=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=N,e.onProgress(Math.min(o,100))}function I(N){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(N,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,S(),Cm(r,e).then((function(N){try{return[,d]=N,S(),f=xR(d,e),S(),new Promise((function(j,C){var G;if(!(G=e.exifOrientation))return wR(r).then((function(P){try{return G=P,te.call(this)}catch(D){return C(D)}}).bind(this),C);function te(){return j(G)}return te.call(this)})).then((function(j){try{return g=j,S(),Wl().then((function(C){try{return y=C?f:ER(f,g),S(),v=e.initialQuality||1,w=e.fileType||r.type,Nm(y,w,r.name,r.lastModified,v).then((function(G){try{{let Z=function(){if(c--&&(F>u||F>V)){let ee,H;return ee=x?.95*M.width:M.width,H=x?.95*M.height:M.height,[K,z]=yg(ee,H),z.drawImage(M,0,0,ee,H),v*=w==="image/png"?.85:.95,Nm(K,w,r.name,r.lastModified,v).then((function(Y){try{return q=Y,Ai(M),M=K,F=q.size,I(Math.min(99,Math.floor((B-F)/(B-u)*100))),Z}catch(ie){return s(ie)}}),s)}return[1]},W=function(){return Ai(M),Ai(K),Ai(f),Ai(y),Ai(d),I(100),n(q)};var P=Z,D=W;if(T=G,S(),k=T.size>u,O=T.size>r.size,!k&&!O)return I(100),n(T);var te;return V=r.size,B=T.size,F=B,M=y,x=!e.alwaysKeepResolution&&k,(te=(function(ee){for(;ee;){if(ee.then)return void ee.then(te,s);try{if(ee.pop){if(ee.length)return ee.pop()?W.call(this):ee;ee=Z}else ee=ee.call(this)}catch(H){return s(H)}}}).bind(this))(Z)}}catch(Z){return s(Z)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(C){return s(C)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const _9=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let By;function v9(r,e){return new Promise(((t,n)=>{By||(By=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(_9));const s=new Worker(By);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return n(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function fn(r,e){return new Promise((function(t,n){let s,o,c,u,d,f;if(s={...e},c=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof y9))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||f)return MT(r,s).then((function(w){try{return o=w,v.call(this)}catch(T){return n(T)}}).bind(this),n);var g=(function(){try{return v.call(this)}catch(w){return n(w)}}).bind(this),y=function(w){try{return MT(r,s).then((function(T){try{return o=T,g()}catch(k){return n(k)}}),n)}catch(T){return n(T)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",v9(r,s).then((function(w){try{return o=w,g()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(o=fR(r,o))}catch{}return t(o)}}))}fn.getDataUrlFromFile=yR,fn.getFilefromDataUrl=tv,fn.loadImage=_R,fn.drawImageInCanvas=bR,fn.drawFileInCanvas=Cm,fn.canvasToFile=Nm,fn.getExifOrientation=wR,fn.handleMaxWidthOrHeight=xR,fn.followExifOrientation=ER,fn.cleanupCanvasMemory=Ai,fn.isAutoOrientationInBrowser=Wl,fn.approximateBelowMaximumCanvasSizeOfBrowser=vR,fn.copyExifWithoutOrientation=fR,fn.getBrowserName=go,fn.version="2.0.2";const b9=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function w9(r){if(!r)return!0;const e=r.toLowerCase();return!b9.some(t=>e.includes(t))}async function x9(r,e){try{const t=Mt(Ke,"users",r);return await wr(t,{blockedUsers:K_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function E9(r,e){try{const t=Mt(Ke,"users",r);return await wr(t,{blockedUsers:SI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function T9(r,e){try{const t=Mt(Ke,"users",r),n=await Lo(t);return n.exists()?(n.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function S9({onClose:r,onPostCreated:e}){const{t}=zn(),{currentUser:n}=ai(),s=$.useRef(null),[o,c]=$.useState(""),[u,d]=$.useState(""),[f,g]=$.useState(""),[y,v]=$.useState(!1),[w,T]=$.useState("none"),[k,O]=$.useState(null),[V,B]=$.useState(null),[F,q]=$.useState(!1),[K,z]=$.useState(!1),[M,x]=$.useState(""),[S,I]=$.useState(""),[N,j]=$.useState(0);$.useEffect(()=>{if(u){const D=zy.find(Z=>Z.value===u);D&&g(t(D.labelKey))}},[u,t]);const C=async D=>{const Z=D.target.files[0];if(Z){const W=new FileReader;W.onloadend=()=>B(W.result),W.readAsDataURL(Z),O(Z)}},G=async()=>{if(k){z(!0);try{let D=k;try{D=await fn(k,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(W){console.warn("Compression failed for analysis, using original",W)}const Z=new FileReader;Z.readAsDataURL(D),Z.onloadend=async()=>{const W=Z.result,ee=await JI(W,"en"),H=(ee.plant_name+" "+ee.disease_name).toLowerCase();let Y=null;for(const ie of zy)if(H.includes(ie.value)){Y=ie;break}Y?(d(Y.value),g(t(Y.labelKey)),I(`${t("auto_detect")}: ${t(Y.labelKey)}`)):I("Plant detected but not in our list yet."),setTimeout(()=>I(""),3e3),z(!1)}}catch(D){console.error("Auto detect failed",D),x(t("error_diagnosis_failed")),z(!1)}}},te=async D=>{if(D.preventDefault(),!!o.trim()){if(!w9(o)){x(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}q(!0),x(""),j(0);try{let Z=null;if(k)try{console.log("Compressing for Base64 storage...");const ee=await fn(k,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});Z=await new Promise((H,Y)=>{const ie=new FileReader;ie.readAsDataURL(ee),ie.onload=()=>H(ie.result),ie.onerror=J=>Y(J)}),console.log("Base64 string ready, length:",Z.length)}catch(W){console.error("Compression failed:",W),x("Image is too large and could not be compressed."),q(!1);return}await rR(n.uid,{authorName:n.displayName||"Gardener",content:o,plantType:u||"other",image:Z}),e(),r()}catch(Z){console.error("FULL POST ERROR:",Z),x(Z.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{q(!1)}}},P=zy.filter(D=>t(D.labelKey).toLowerCase().includes(f.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Uo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[M&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:M}),S&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:S}),b.jsxs("form",{onSubmit:te,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:D=>c(D.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(UV,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:f,onChange:D=>{g(D.target.value),v(!0),D.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(DI,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:P.length>0?P.map(D=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(D.value),g(t(D.labelKey)),v(!1)},children:t(D.labelKey)},D.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),V&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:V,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{O(null),B(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:F,children:b.jsx(Uo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:K,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[K?b.jsx(xo,{className:"w-3 h-3 animate-spin"}):b.jsx(rL,{className:"w-3 h-3"}),t(K?"detecting":"auto_detect")]})]}),F&&N>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${N}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(N),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:F,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(jI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:C,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:F||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[F?b.jsx(xo,{className:"w-4 h-4 animate-spin"}):b.jsx(_h,{className:"w-4 h-4"}),F?"...":t("ask_question")]})]})]})]})]})})}function A9({user:r,onClose:e}){const{currentUser:t}=ai(),n=xs(),[s,o]=$.useState(!1),{t:c}=zn(),{addToast:u}=Ca(),[d,f]=$.useState(r);$.useEffect(()=>{if(!r)return;const O=r.uid||r.id;if(!O)return;const V=tc(Mt(Ke,"users",O),B=>{B.exists()&&f({uid:B.id,...B.data()})},B=>{console.error("User listener error",B)});return()=>V()},[r]);const g=r?{...r,...d,uid:d?.uid||r.uid||r.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&g&&T9(t.uid,g.uid).then(v)},[t,g]);const w=async()=>{if(!(!t||!g))try{y?(await E9(t.uid,g.uid),v(!1),u(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await x9(t.uid,g.uid),v(!0),u(c("user_blocked")||"User blocked","success"))}catch(O){console.error(O),u("Action failed","error")}},T=O=>!O?.lastSeen||!O.lastSeen.seconds?!1:Date.now()-O.lastSeen.seconds*1e3<180*1e3;if(!r||!g)return null;const k=async()=>{if(!t){u(c("login_to_message"),"info"),n("/login");return}if(t.uid===g.uid){u(c("cannot_message_self"),"warning");return}o(!0);try{e();const O={uid:g.uid,name:g.name||g.displayName||"User",photoURL:g.photoURL||g.avatar||null};n("/messages/new",{state:{targetUser:O}})}catch(O){console.error(O),u("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:O=>O.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Uo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:g.photoURL||g.avatar||`https://ui-avatars.com/api/?name=${g.name}`,alt:g.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${T(g)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${T(g)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),T(g)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:g.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(Am,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",g.createdAt?.seconds?new Date(g.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),n(`/profile/${g.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(Am,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:k,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(yh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t&&t.uid!==g.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function nv(){return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-300",children:b.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[b.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900 rounded-full"}),b.jsx("div",{className:"absolute inset-0 border-4 border-green-500 rounded-full border-t-transparent animate-spin"}),b.jsx(zr,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-pulse"})]}),b.jsx("h3",{className:"mt-6 text-lg font-bold text-gray-800 dark:text-gray-200 animate-pulse tracking-wide",children:"Plant AI"})]})})}function I9(){const{t:r}=zn(),{currentUser:e}=ai(),{addToast:t}=Ca(),[n,s]=$.useState([]),[o,c]=$.useState(!0),[u,d]=$.useState(!1),[f,g]=$.useState(null),[y,v]=$.useState(null);return $.useEffect(()=>{const w=Vo(sr(Ke,"posts"),X6("createdAt","desc"),J6(50)),T=tc(w,k=>{const O=k.docs.map(V=>({id:V.id,...V.data()}));s(O),c(!1)},k=>{console.error("Error fetching posts:",k),c(!1),t("Failed to load community posts","error")});return()=>T()},[]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:r("community")}),b.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:b.jsxs("button",{onClick:()=>{if(!e){t(r("login_to_post")||"Please login to post.","error");return}d(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(MV,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:r("ask_question")}),b.jsx("span",{className:"sm:hidden",children:r("ask_question")})]})})]}),o?b.jsx(nv,{}):n.length>0?b.jsx("div",{className:"space-y-6",children:n.map(w=>b.jsx(dR,{post:w,onViewAnalysis:T=>g(T),onUserClick:T=>{v({id:T,name:w.authorName||"Gardener",avatar:w.userAvatar})}},w.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:r("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:r("be_the_first")})]}),u&&b.jsx(S9,{onClose:()=>d(!1),onPostCreated:()=>{}}),f&&b.jsx(AnalysisDetailModal,{analysisId:f,onClose:()=>g(null)}),y&&b.jsx(A9,{user:y,onClose:()=>v(null)})]})}const R9="modulepreload",C9=function(r){return"/"+r},PT={},N9=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let f=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=f;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=f(t.map(g=>{if(g=C9(g),g in PT)return;PT[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":R9,y||(w.as="script"),w.crossOrigin="",w.href=g,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((T,k)=>{w.addEventListener("load",T),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function $n(r,e,t,n){return new(t||(t=Promise))((function(s,o){function c(f){try{d(n.next(f))}catch(g){o(g)}}function u(f){try{d(n.throw(f))}catch(g){o(g)}}function d(f){var g;f.done?s(f.value):(g=f.value,g instanceof t?g:new t((function(y){y(g)}))).then(c,u)}d((n=n.apply(r,e||[])).next())}))}class Fh{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n?.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const Tf={decode:function(r,e){return $n(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(r)}finally{t.close()}}))},createBuffer:function(r,e){if(!r||r.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof r[0]=="number"&&(r=[r]),!r[0]||r[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some((o=>o>1||o<-1))){const o=s.length;let c=0;for(let u=0;u<o;u++){const d=Math.abs(s[u]);d>c&&(c=d)}for(const u of n)for(let d=0;d<o;d++)u[d]/=c}})(r);const t=r.map((n=>n instanceof Float32Array?n:Float32Array.from(n)));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function TR(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,c]of Object.entries(s))c instanceof Node?t.appendChild(c):typeof c=="string"?t.appendChild(document.createTextNode(c)):t.appendChild(TR(o,c));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function jT(r,e,t){const n=TR(r,e||{});return t?.appendChild(n),n}var k9=Object.freeze({__proto__:null,createElement:jT,default:jT});const D9={fetchBlob:function(r,e,t){return $n(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(s,o){$n(this,void 0,void 0,(function*(){if(!s.body||!s.headers)return;const c=s.body.getReader(),u=Number(s.headers.get("Content-Length"))||0;let d=0;const f=g=>{d+=g?.length||0;const y=Math.round(d/u*100);o(y)};try{for(;;){const g=yield c.read();if(g.done)break;f(g.value)}}catch(g){console.warn("Progress tracking error:",g)}}))})(n.clone(),e),n.blob()}))}};function Xt(r){let e=r;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach((s=>s(e))))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function fo(r,e){const t=Xt(r());return e.forEach((n=>n.subscribe((()=>{const s=r();Object.is(t.value,s)||t.set(s)})))),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function ca(r,e){let t;const n=()=>{t&&(t(),t=void 0),t=r()},s=e.map((o=>o.subscribe(n)));return n(),()=>{t&&(t(),t=void 0),s.forEach((o=>o()))}}class O9 extends Fh{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=Xt(!1),this._currentTime=Xt(0),this._duration=Xt(0),this._volume=Xt(this.media.volume),this._muted=Xt(this.media.muted),this._playbackRate=Xt(this.media.playbackRate||1),this._seeking=Xt(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return $n(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function M9({maxTop:r,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let c=Math.round(r*t*n),u=c+Math.round(e*t*n)||1;return u<s&&(u=s,o||(c=u/2)),{topHeight:c,totalHeight:u}}function P9({barAlign:r,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return r==="top"?0:r==="bottom"?s-n:e-t}function VT(r,e,t){const n=e-r.left,s=t-r.top;return[n/r.width,s/r.height]}function SR(r){return!!(r.barWidth||r.barGap||r.barAlign)}function LT(r,e){if(!SR(e))return r;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?r:Math.floor(r/n)*n}function UT({scrollLeft:r,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=r/e,s=Math.floor(n*t);return[s-1,s,s+1]}function AR(r){const e=r._cleanup;typeof e=="function"&&e()}function j9(r){const e=Xt({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth}),t=fo((()=>(function(o){const{scrollLeft:c,scrollWidth:u,clientWidth:d}=o;if(u===0)return{startX:0,endX:1};const f=c/u,g=(c+d)/u;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,g))}})(e.value)),[e]),n=fo((()=>(function(o){return{left:o.scrollLeft,right:o.scrollLeft+o.clientWidth}})(e.value)),[e]),s=()=>{e.set({scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,clientWidth:r.clientWidth})};return r.addEventListener("scroll",s,{passive:!0}),{scrollData:e,percentages:t,bounds:n,cleanup:()=>{r.removeEventListener("scroll",s),AR(e)}}}class V9 extends Fh{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=VT(n,t.clientX,t.clientY);this.emit("click",s,o)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=VT(n,t.clientX,t.clientY);this.emit("dblclick",s,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=j9(this.scrollContainer);const e=ca((()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:c=100}=n,u=Xt(null),d=new Map,f=matchMedia("(pointer: coarse)").matches;let g=()=>{};const y=v=>{if(v.button!==o||(d.set(v.pointerId,v),d.size>1))return;let w=v.clientX,T=v.clientY,k=!1;const O=Date.now(),V=t.getBoundingClientRect(),{left:B,top:F}=V,q=S=>{if(S.defaultPrevented||d.size>1||f&&Date.now()-O<c)return;const I=S.clientX,N=S.clientY,j=I-w,C=N-T;(k||Math.abs(j)>s||Math.abs(C)>s)&&(S.preventDefault(),S.stopPropagation(),k||(u.set({type:"start",x:w-B,y:T-F}),k=!0),u.set({type:"move",x:I-B,y:N-F,deltaX:j,deltaY:C}),w=I,T=N)},K=S=>{if(d.delete(S.pointerId),k){const I=S.clientX,N=S.clientY;u.set({type:"end",x:I-B,y:N-F})}g()},z=S=>{d.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||K(S)},M=S=>{k&&(S.stopPropagation(),S.preventDefault())},x=S=>{S.defaultPrevented||d.size>1||k&&S.preventDefault()};document.addEventListener("pointermove",q),document.addEventListener("pointerup",K),document.addEventListener("pointerout",z),document.addEventListener("pointercancel",z),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",M,{capture:!0}),g=()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",K),document.removeEventListener("pointerout",z),document.removeEventListener("pointercancel",z),document.removeEventListener("touchmove",x),setTimeout((()=>{document.removeEventListener("click",M,{capture:!0})}),10)}};return t.addEventListener("pointerdown",y),{signal:u,cleanup:()=>{g(),t.removeEventListener("pointerdown",y),d.clear(),AR(u)}}})(this.wrapper);const e=ca((()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise(((o,c)=>{s(),n=c,t=setTimeout((()=>{t=void 0,n=void 0,o()}),e)}))}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return(function({optionsHeight:o,optionsSplitChannels:c,parentHeight:u,numberOfChannels:d,defaultHeight:f=128}){if(o==null)return f;const g=Number(o);if(!isNaN(g))return g;if(o==="auto"){const y=u||f;return c?.every((v=>!v.overlay))?y/d:y}return f})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const c=document.createElement("canvas"),u=c.getContext("2d"),d=o??c.height*s,f=u.createLinearGradient(0,0,0,d||s),g=1/(n.length-1);return n.forEach(((y,v)=>{f.addColorStop(v*g,y)})),f})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,{halfHeight:u,barWidth:d,barRadius:f,barIndexScale:g,barSpacing:y,barMinHeight:v}=(function({width:T,height:k,length:O,options:V,pixelRatio:B}){const F=k/2,q=V.barWidth?V.barWidth*B:1,K=V.barGap?V.barGap*B:V.barWidth?q/2:0,z=q+K||1;return{halfHeight:F,barWidth:q,barGap:K,barRadius:V.barRadius||0,barMinHeight:V.barMinHeight?V.barMinHeight*B:0,barIndexScale:O>0?T/z/O:0,barSpacing:z}})({width:o,height:c,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),w=(function({channelData:T,barIndexScale:k,barSpacing:O,barWidth:V,halfHeight:B,vScale:F,canvasHeight:q,barAlign:K,barMinHeight:z}){const M=T[0]||[],x=T[1]||M,S=M.length,I=[];let N=0,j=0,C=0;for(let G=0;G<=S;G++){const te=Math.round(G*k);if(te>N){const{topHeight:Z,totalHeight:W}=M9({maxTop:j,maxBottom:C,halfHeight:B,vScale:F,barMinHeight:z,barAlign:K}),ee=P9({barAlign:K,halfHeight:B,topHeight:Z,totalHeight:W,canvasHeight:q});I.push({x:N*O,y:ee,width:V,height:W}),N=te,j=0,C=0}const P=Math.abs(M[G]||0),D=Math.abs(x[G]||0);P>j&&(j=P),D>C&&(C=D)}return I})({channelData:e,barIndexScale:g,barSpacing:y,barWidth:d,halfHeight:u,vScale:s,canvasHeight:c,barAlign:t.barAlign,barMinHeight:v});n.beginPath();for(const T of w)f&&"roundRect"in n?n.roundRect(T.x,T.y,T.width,T.height,f):n.rect(T.x,T.y,T.width,T.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:c}=n.canvas,u=(function({channelData:d,width:f,height:g,vScale:y}){const v=g/2,w=d[0]||[];return[w,d[1]||w].map(((T,k)=>{const O=T.length,V=O?f/O:0,B=v,F=k===0?-1:1,q=[{x:0,y:B}];let K=0,z=0;for(let M=0;M<=O;M++){const x=Math.round(M*V);if(x>K){const I=B+(Math.round(z*v*y)||1)*F;q.push({x:K,y:I}),K=x,z=0}const S=Math.abs(T[M]||0);S>z&&(z=S)}return q.push({x:K,y:B}),q}))})({channelData:e,width:o,height:c,vScale:s});n.beginPath();for(const d of u)if(d.length){n.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++){const g=d[f];n.lineTo(g.x,g.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=(function({channelData:o,barHeight:c,normalize:u,maxPeak:d}){var f;const g=c||1;if(!u)return g;const y=o[0];if(!y||y.length===0)return g;let v=d??0;if(!d)for(let w=0;w<y.length;w++){const T=(f=y[w])!==null&&f!==void 0?f:0,k=Math.abs(T);k>v&&(v=k)}return v?g/v:g})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});SR(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,c,u){const d=this.getPixelRatio(),f=document.createElement("canvas");f.width=Math.round(n*d),f.height=Math.round(s*d),f.style.width=`${n}px`,f.style.height=`${s}px`,f.style.left=`${Math.round(o)}px`,c.appendChild(f);const g=f.getContext("2d");if(t.renderFunction?(g.fillStyle=this.convertColorValues(t.waveColor,g),t.renderFunction(e,g)):this.renderWaveform(e,t,g),f.width>0&&f.height>0){const y=f.cloneNode(),v=y.getContext("2d");v.drawImage(f,0,0),v.globalCompositeOperation="source-in",v.fillStyle=this.convertColorValues(t.progressColor,v),v.fillRect(0,0,f.width,f.height),u.appendChild(y)}}renderMultiCanvas(e,t,n,s,o,c){const u=this.getPixelRatio(),{clientWidth:d}=this.scrollContainer,f=n/u,g=(function({clientWidth:T,totalWidth:k,options:O}){return LT(Math.min(8e3,T,k),O)})({clientWidth:d,totalWidth:f,options:t});let y={};if(g===0)return;const v=T=>{if(T<0||T>=w||y[T])return;y[T]=!0;const k=T*g;let O=Math.min(f-k,g);if(O=LT(O,t),O<=0)return;const V=(function({channelData:B,offset:F,clampedWidth:q,totalWidth:K}){return B.map((z=>{const M=Math.floor(F/K*z.length),x=Math.floor((F+q)/K*z.length);return z.slice(M,x)}))})({channelData:e,offset:k,clampedWidth:O,totalWidth:f});this.renderSingleCanvas(V,t,O,s,k,o,c)},w=Math.ceil(f/g);if(!this.isScrollable){for(let T=0;T<w;T++)v(T);return}if(UT({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:f,numCanvases:w}).forEach((T=>v(T))),w>1){const T=this.on("scroll",(()=>{const{scrollLeft:k}=this.scrollContainer;Object.keys(y).length>10&&(o.innerHTML="",c.innerHTML="",y={}),UT({scrollLeft:k,totalWidth:f,numCanvases:w}).forEach((O=>v(O)))}));this.unsubscribeOnScroll.push(T)}}renderChannel(e,t,n,s){var{overlay:o}=t,c=(function(g,y){var v={};for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&y.indexOf(w)<0&&(v[w]=g[w]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(w=Object.getOwnPropertySymbols(g);T<w.length;T++)y.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(g,w[T])&&(v[w[T]]=g[w[T]])}return v})(t,["overlay"]);const u=document.createElement("div"),d=this.getHeight(c.height,c.splitChannels);u.style.height=`${d}px`,o&&s>0&&(u.style.marginTop=`-${d}px`),this.canvasWrapper.style.minHeight=`${d}px`,this.canvasWrapper.appendChild(u);const f=u.cloneNode();this.progressWrapper.appendChild(f),this.renderMultiCanvas(e,c,n,d,u,f)}render(e){return $n(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((f=>f())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:c,useParentWidth:u,width:d}=(function({duration:f,minPxPerSec:g=0,parentWidth:y,fillParent:v,pixelRatio:w}){const T=Math.ceil(f*g),k=T>y,O=!!(v&&!k);return{scrollWidth:T,isScrollable:k,useParentWidth:O,width:(O?y:T)*w}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=c,this.wrapper.style.width=u?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let f=0;f<e.numberOfChannels;f++){const g=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[f]);this.renderChannel([e.getChannelData(f)],g,d,f)}else{const f=[e.getChannelData(0)];e.numberOfChannels>1&&f.push(e.getChannelData(1)),this.renderChannel(f,this.options,d,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=(function(o){const c=2*o;return(c<0?Math.floor(c):Math.ceil(c))/2})(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,c=e*s,u=n,d=n+o,f=o/2;if(this.isDragging)c+30>d?this.scrollContainer.scrollLeft+=30:c-30<u&&(this.scrollContainer.scrollLeft-=30);else{(c<u||c>d)&&(this.scrollContainer.scrollLeft=c-(this.options.autoCenter?f:0));const g=c-n-f;t&&this.options.autoCenter&&g>0&&(this.scrollContainer.scrollLeft+=g)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return $n(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map((c=>c.toDataURL(e,t)));return Promise.resolve(o)}return Promise.all(Array.from(s).map((o=>new Promise(((c,u)=>{o.toBlob((d=>{d?c(d):u(new Error("Could not export image"))}),e,t)})))))}))}}class L9 extends Fh{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Fy extends Fh{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return $n(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return $n(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return $n(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const U9={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class wh extends O9{static create(e){return new wh(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Fy:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},U9,e);const{state:n,actions:s}=(function(u){var d,f,g,y,v,w;const T=(d=u?.currentTime)!==null&&d!==void 0?d:Xt(0),k=(f=u?.duration)!==null&&f!==void 0?f:Xt(0),O=(g=u?.isPlaying)!==null&&g!==void 0?g:Xt(!1),V=(y=u?.isSeeking)!==null&&y!==void 0?y:Xt(!1),B=(v=u?.volume)!==null&&v!==void 0?v:Xt(1),F=(w=u?.playbackRate)!==null&&w!==void 0?w:Xt(1),q=Xt(null),K=Xt(null),z=Xt(""),M=Xt(0),x=Xt(0),S=fo((()=>!O.value),[O]),I=fo((()=>q.value!==null),[q]),N=fo((()=>I.value&&k.value>0),[I,k]),j=fo((()=>T.value),[T]),C=fo((()=>k.value>0?T.value/k.value:0),[T,k]);return{state:{currentTime:T,duration:k,isPlaying:O,isPaused:S,isSeeking:V,volume:B,playbackRate:F,audioBuffer:q,peaks:K,url:z,zoom:M,scrollPosition:x,canPlay:I,isReady:N,progress:j,progressPercent:C},actions:{setCurrentTime:G=>{const te=Math.max(0,Math.min(k.value||1/0,G));T.set(te)},setDuration:G=>{k.set(Math.max(0,G))},setPlaying:G=>{O.set(G)},setSeeking:G=>{V.set(G)},setVolume:G=>{const te=Math.max(0,Math.min(1,G));B.set(te)},setPlaybackRate:G=>{const te=Math.max(.1,Math.min(16,G));F.set(te)},setAudioBuffer:G=>{q.set(G),G&&k.set(G.duration)},setPeaks:G=>{K.set(G)},setUrl:G=>{z.set(G)},setZoom:G=>{M.set(Math.max(0,G))},setScrollPosition:G=>{x.set(Math.max(0,G))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new L9;const o=t?void 0:this.getMediaElement();this.renderer=new V9(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const c=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:u,duration:d}=this.options;(c||u&&d)&&this.load(c,u,d).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(e,t){const n=[];n.push(ca((()=>{const c=e.isPlaying.value;t.emit(c?"play":"pause")}),[e.isPlaying])),n.push(ca((()=>{const c=e.currentTime.value;t.emit("timeupdate",c),e.isPlaying.value&&t.emit("audioprocess",c)}),[e.currentTime,e.isPlaying])),n.push(ca((()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)}),[e.isSeeking,e.currentTime]));let s=!1;n.push(ca((()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))}),[e.isReady,e.duration]));let o=!1;return n.push(ca((()=>{const c=e.isPlaying.value,u=e.currentTime.value,d=e.duration.value,f=d>0&&u>=d;o&&!c&&f&&t.emit("finish"),o=c&&f}),[e.isPlaying,e.currentTime,e.duration])),n.push(ca((()=>{const c=e.zoom.value;c>0&&t.emit("zoom",c)}),[e.zoom])),()=>{n.forEach((c=>c()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let e;const t=this.renderer.on("drag",(n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const c=this.options.dragToSeek;this.isPlaying()?o=0:c===!0?o=200:c&&typeof c=="object"&&(o=(s=c.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout((()=>{this.seekTo(n)}),o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}));this.subscriptions.push((()=>{clearTimeout(e),t()}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Tf.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Tf.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return $n(this,void 0,void 0,(function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const u=this.options.fetchParams||{};window.AbortController&&!u.signal&&(this.abortController=new AbortController,u.signal=this.abortController.signal);const d=g=>this.emit("loading",g);t=yield D9.fetchBlob(e,d,u);const f=this.options.blobMimeType;f&&(t=new Blob([t],{type:f}))}this.setSrc(e,t);const c=yield new Promise((u=>{const d=s||this.getDuration();d?u(d):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>u(this.getDuration())),{once:!0}))}));if(!e&&!t){const u=this.getMediaElement();u instanceof Fy&&(u.duration=c)}if(n)this.decodedData=Tf.createBuffer(n,c||0);else if(t){const u=yield t.arrayBuffer();this.decodedData=yield Tf.decode(u,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}}))}loadBlob(e,t,n){return $n(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let c=0;c<s;c++){const u=this.decodedData.getChannelData(c),d=[],f=u.length/t;for(let g=0;g<t;g++){const y=u.slice(Math.floor(g*f),Math.ceil((g+1)*f));let v=0;for(let w=0;w<y.length;w++){const T=y[w];Math.abs(T)>Math.abs(v)&&(v=T)}d.push(Math.round(v*n)/n)}o.push(d)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return $n(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof Fy?this.media.stopAt(t):this.stopAtPosition=t),s}))}playPause(){return $n(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return $n(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((t=>t())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}wh.BasePlugin=class extends Fh{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},wh.dom=k9;const z9=r=>new Promise((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),B9=({src:r,isMine:e,messageId:t})=>{const n=$.useRef(null),s=$.useRef(null),[o,c]=$.useState(!1),[u,d]=$.useState(0),[f,g]=$.useState(0);$.useEffect(()=>{if(n.current)return s.current&&s.current.destroy(),s.current=wh.create({container:n.current,waveColor:e?"rgba(0, 0, 0, 0.2)":"#9ca3af",progressColor:e?"#ffffff":"#16a34a",cursorColor:"transparent",barWidth:3,barRadius:2,cursorWidth:0,height:48,barGap:3,normalize:!0,url:r}),s.current.on("play",()=>c(!0)),s.current.on("pause",()=>c(!1)),s.current.on("timeupdate",w=>g(w)),s.current.on("ready",w=>d(w)),s.current.on("finish",()=>c(!1)),()=>{s.current&&s.current.destroy()}},[r,e]);const y=()=>{s.current&&s.current.playPause()},v=w=>{if(!w)return"0:00";const T=Math.floor(w/60),k=Math.floor(w%60);return`${T}:${k<10?"0":""}${k}`};return b.jsxs("div",{className:"flex items-center gap-3 min-w-[200px] sm:min-w-[240px] pr-2",children:[b.jsx("button",{onClick:y,className:`p-2 rounded-full transition-colors flex-shrink-0 cursor-pointer z-10 ${e?"bg-green-500 text-white hover:bg-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:o?b.jsx(CV,{className:"w-5 h-5 fill-current"}):b.jsx(DV,{className:"w-5 h-5 fill-current ml-0.5"})}),b.jsx("div",{className:"flex-1 overflow-hidden relative",ref:n}),b.jsx("span",{className:`text-[11px] font-medium w-9 text-right tabular-nums ${e?"text-green-100":"text-gray-500"}`,children:v(o?f:u)})]})};function F9(){const{chatId:r}=XT(),{currentUser:e}=ai(),{t,i18n:n}=zn(),s=xs(),o=$.useRef(null),c=$.useRef(null),{addToast:u}=Ca();$.useEffect(()=>{e||s("/login")},[e,s]);const[d,f]=$.useState([]),[g,y]=$.useState(""),[v,w]=$.useState(!0),[T,k]=$.useState(null),[O,V]=$.useState(null),[B,F]=$.useState(null),[q,K]=$.useState(!1),[z,M]=$.useState(null),[x,S]=$.useState(0),[I,N]=$.useState(null),[j,C]=$.useState(!1),[G,te]=$.useState(null),P=xr(),[D,Z]=$.useState(P.state?.targetUser||null),[W,ee]=$.useState(r==="new"?null:r);$.useEffect(()=>{r!=="new"&&ee(r)},[r]),$.useEffect(()=>{r==="new"&&D&&e&&(async()=>{try{k(D);const Ee=Vo(sr(Ke,"chats"),pc("participants","array-contains",e.uid)),Me=(await yc(Ee)).docs.find(xe=>xe.data().participants.includes(D.uid));Me?(ee(Me.id),s(`/messages/${Me.id}`,{replace:!0})):w(!1)}catch(Ee){console.warn("Error checking existing chats:",Ee)}})()},[r,D,e]),$.useEffect(()=>{if(r==="new"){w(!1);return}if(!W||!e)return;w(!0);const pe=tc(Mt(Ke,"chats",W),Be=>{if(Be.exists()){const Me=Be.data(),xe=Me.participants.find(rt=>rt!==e.uid);if(xe){if(Me.participantData?.[xe]){const rt=Me.participantData[xe];k(pt=>pt?.id===xe?pt:{...rt,id:xe})}V(xe)}}else r!=="new"&&s("/messages")}),Ee=tc(sr(Ke,"chats",W,"messages"),Be=>{const Me=Be.docs.map(xe=>({id:xe.id,...xe.data()})).sort((xe,rt)=>(xe.createdAt?.seconds||0)-(rt.createdAt?.seconds||0));f(Me),w(!1),B||setTimeout(()=>o.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Ee(),pe()}},[W,e,B,r,s]),$.useEffect(()=>{if(!O)return;const pe=tc(Mt(Ke,"users",O),Ee=>{if(Ee.exists()){const Be=Ee.data();k(Me=>({...Me,...Be}))}});return()=>pe()},[O]);const H=async(pe,Ee=null,Be=null,Me="text")=>{C(!0);try{let xe=W;if(!xe&&r==="new"){if(!D)throw new Error("Target user missing");const{startChat:dt}=await N9(async()=>{const{startChat:Fn}=await Promise.resolve().then(()=>qL);return{startChat:Fn}},[]);xe=await dt(e.uid,D.uid,{name:D.name,avatar:D.photoURL},{name:e.displayName,avatar:e.photoURL}),ee(xe),window.history.replaceState(null,"",`/messages/${xe}`)}let rt=null,pt=Me,Bn=Be;if(Ee||I){let dt=Ee||I.file;if(pt==="image"||I?.type==="image"){pt="image",Bn=Bn||I?.file.name;const Fn={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{dt=await fn(dt,Fn)}catch(Ft){console.warn("Compression failed, using original",Ft)}}else I&&(pt=I.type,Bn=I.file.name);if(rt=await z9(dt),rt.length>95e4)throw new Error("File is too large for database storage even after compression.")}B?(await wr(Mt(Ke,"chats",xe,"messages",B),{text:pe,editedAt:ar()}),F(null)):(await zh(sr(Ke,"chats",xe,"messages"),{text:pe||"",type:pt,fileUrl:rt,fileName:Bn,senderId:e.uid,createdAt:ar()}),await wr(Mt(Ke,"chats",xe),{lastMessage:pt==="audio"?" Voice Message":pt==="image"?" Photo":pe||" File",updatedAt:ar()})),y(""),N(null)}catch(xe){console.error("Send failed",xe),u(xe.message||"Failed to send message","error")}finally{C(!1)}},Y=async pe=>{pe.preventDefault(),!(!g.trim()&&!I)&&await H(g)},ie=async pe=>{if(window.confirm("Delete this message?"))try{await wm(Mt(Ke,"chats",r,"messages",pe)),u("Message deleted","success")}catch(Ee){console.error("Delete failed",Ee),u("Could not delete message","error")}},J=n.language==="tr"?Z_:pg,re=pe=>{if(!pe?.lastSeen)return"Offline";const Ee=pe.lastSeen.seconds*1e3;return Date.now()-Ee<180*1e3?"Online":`${t("last_seen")||"Last seen"} ${J_(new Date(Ee),{addSuffix:!0,locale:J})}`},ye=pe=>pe?.lastSeen?Date.now()-pe.lastSeen.seconds*1e3<180*1e3:!1,Te=pe=>pe?new Date(pe.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",Ne=pe=>{const Ee=pe.target.files[0];if(!Ee)return;if(Ee.size>10*1024*1024){u("File too large (Max 10MB)","error");return}const Be=Ee.type.startsWith("image/")?"image":"file",Me=Be==="image"?URL.createObjectURL(Ee):null;N({file:Ee,type:Be,previewUrl:Me})},Ie=pe=>{y(pe.text||""),F(pe.id),N(null),c.current&&(c.current.value="")},qe=()=>{F(null),y(""),N(null)},Qe=$.useRef("cancel"),nt=$.useRef(null),Bt=$.useRef(null),lt=$.useRef(null),[ct,Ct]=$.useState(0);$.useEffect(()=>{let pe;return q?(S(0),pe=setInterval(()=>S(Ee=>Ee+1),1e3)):(S(0),Ct(0)),()=>{clearInterval(pe),lt.current&&cancelAnimationFrame(lt.current),nt.current&&nt.current.close()}},[q]);const at=()=>{if(!Bt.current)return;const pe=new Uint8Array(Bt.current.fftSize);Bt.current.getByteTimeDomainData(pe);let Ee=0;for(let Me=0;Me<pe.length;Me++)Ee+=Math.abs(pe[Me]-128);const Be=Ee/pe.length;Ct(Be*10),lt.current=requestAnimationFrame(at)},ot=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new(window.AudioContext||window.webkitAudioContext);await Ee.resume();const Be=Ee.createAnalyser();Ee.createMediaStreamSource(pe).connect(Be),Be.fftSize=256,nt.current=Ee,Bt.current=Be,at();const xe=new MediaRecorder(pe),rt=[];xe.ondataavailable=pt=>rt.push(pt.data),xe.onstop=async()=>{if(pe.getTracks().forEach(pt=>pt.stop()),nt.current&&nt.current.close(),lt.current&&cancelAnimationFrame(lt.current),Qe.current==="send"){const pt=new Blob(rt,{type:"audio/webm"});await H(null,pt,`voice_${Date.now()}.webm`,"audio")}else console.log("Recording cancelled")},xe.start(),M(xe),K(!0),Qe.current="cancel"}catch(pe){console.error("Mic error:",pe),u(t("mic_error")||"Microphone error","error")}},$e=pe=>{!z||z.state==="inactive"||(Qe.current=pe,z.stop(),K(!1))};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[v&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>s("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Uj,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),T?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:T.photoURL||T.avatar||`https://ui-avatars.com/api/?name=${T.name||"User"}`,alt:T.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:T.name||T.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${ye(T)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:re(T)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[d.map(pe=>{const Ee=pe.senderId===e.uid,Be=pe.type==="audio",Me=pe.type==="image",xe=pe.type==="file";return b.jsxs("div",{className:`flex flex-col ${Ee?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Ee?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Ee?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Be?"min-w-[150px]":""}`,children:[Me&&b.jsx("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:pe.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Be&&b.jsx(B9,{src:pe.fileUrl,isMine:Ee,messageId:pe.id}),xe&&b.jsxs("a",{href:pe.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(uT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:pe.fileName||"File"})]}),pe.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:pe.text}),pe.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Ee?"text-green-100":"text-gray-400"}`,children:["(",t("edited")||"Edited"," ",Te(pe.editedAt),")"]})]}),Ee&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ie(pe),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(BI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>ie(pe.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(Sm,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:Te(pe.createdAt)})]},pe.id)}),b.jsx("div",{ref:o})]}),B&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:t("editing_message")||"Editing message..."}),b.jsx("button",{onClick:qe,children:b.jsx(Uo,{className:"w-4 h-4"})})]}),I&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[I.type==="image"?b.jsx("img",{src:I.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(sV,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:I.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Uo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:q?b.jsxs("div",{className:"flex-1 flex items-center gap-4 bg-gray-50 dark:bg-gray-700 rounded-xl px-2 py-2 animate-fade-in text-red-500",children:[b.jsx("button",{onClick:()=>$e("cancel"),className:"p-3 text-gray-500 hover:text-red-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors",children:b.jsx(Sm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4",children:[b.jsx("span",{className:"font-mono font-medium text-red-600 dark:text-red-400",children:new Date(x*1e3).toISOString().substr(14,5)}),b.jsx("div",{className:"flex items-center gap-0.5 h-10 items-end",children:[...Array(24)].map((pe,Ee)=>{const Be=Math.max(0,ct-5),Me=Math.min(1,Be/40),xe=Math.sin(Ee*.5+Date.now()/100)*.2+.8;return b.jsx("div",{className:"w-1 bg-red-500 rounded-full transition-all duration-75",style:{height:`${Math.max(4,Me*36*xe)}px`,opacity:.5+Me*.5}},Ee)})})]}),b.jsx("button",{onClick:()=>$e("send"),className:"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg transition-transform transform active:scale-95",children:b.jsx(_h,{className:"w-5 h-5"})})]}):b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"file",ref:c,onChange:Ne,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>c.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:B,children:b.jsx(uT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:b.jsx("textarea",{value:g,onChange:pe=>y(pe.target.value),placeholder:B?t("edit_message_placeholder")||"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),g.trim()||I?b.jsx("button",{onClick:Y,disabled:j,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:j?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(_h,{className:"w-5 h-5"})}):b.jsx("button",{onClick:ot,className:"p-3 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl transition-all transform active:scale-95 shadow-lg",children:b.jsx(SV,{className:"w-5 h-5"})})]})})]})}const H9=[{id:1,name:"Seedling Scout",trName:"rak Filiz",icon:zr,color:"text-green-400 bg-green-400/10 border-green-200"},{id:2,name:"Green Guardian",trName:"Yeil Koruyucu",icon:LI,color:"text-emerald-500 bg-emerald-500/10 border-emerald-200"},{id:3,name:"Bloom Master",trName:"iek Ustas",icon:oV,color:"text-pink-500 bg-pink-500/10 border-pink-200"},{id:4,name:"Forest Sage",trName:"Orman Bilgesi",icon:Fj,color:"text-purple-600 bg-purple-600/10 border-purple-200"},{id:5,name:"Legend of Leaves",trName:"Efsanevi Bahvan",icon:rV,color:"text-amber-500 bg-amber-500/10 border-amber-200"}],q9=100,$9=50,G9=100,K9=20;function Hy(r){if(r<=1)return 0;const e=r-1;return e/2*(2*G9+(e-1)*K9)}function Y9(r=0,e=0){const t=r*q9+e*$9;let n=1,s=50;for(;n<s&&t>=Hy(n+1);)n++;const o=Hy(n),c=n<s?Hy(n+1):1/0,u=t-o,d=c-o,f=n<s?Math.round(u/d*100):100,g=Math.min(Math.floor((n-1)/10),4),y=H9[g];return{level:n,tier:y,currentLevelXp:u,nextLevelReq:d,totalXP:t,progress:f,isMaxLevel:n>=s}}function Q9(){const{currentUser:r,logout:e,refreshUser:t}=ai(),{t:n,i18n:s}=zn(),o=xs(),{userId:c}=XT(),{addToast:u}=Ca(),d=BT.useRef(null),[f,g]=$.useState(!1),[y,v]=$.useState(!0),[w,T]=$.useState(null),[k,O]=$.useState([]),[V,B]=$.useState(!0),[F,q]=$.useState({analysisCount:0,postCount:0}),[K,z]=$.useState(null),[M,x]=$.useState(""),[S,I]=$.useState(""),[N,j]=$.useState(""),[C,G]=$.useState(null),[te,P]=$.useState(!1),D=!c||r&&r.uid===c,Z=c||r?.uid;$.useEffect(()=>{Z&&W()},[Z,r]);const W=async()=>{v(!0),B(!0);try{const J=Mt(Ke,"users",Z),re=await Lo(J);if(re.exists()){const ye=re.data();T(ye),x(ye.displayName||""),I(ye.bio||""),j(ye.location||""),G(ye.photoURL||null);const Te=Vo(sr(Ke,"analyses"),pc("userId","==",Z)),Ne=Vo(sr(Ke,"posts"),pc("userId","==",Z)),[Ie,qe]=await Promise.all([yc(Te),yc(Ne)]),Qe=Ie.size,nt=qe.size;q({analysisCount:Qe,postCount:nt}),z(Y9(Qe,nt));const Bt=qe.docs.map(lt=>({id:lt.id,...lt.data()}));Bt.sort((lt,ct)=>(ct.createdAt?.seconds||0)-(lt.createdAt?.seconds||0)),O(Bt)}else console.log("No such profile!")}catch(J){console.error("Error fetching profile:",J)}finally{v(!1),B(!1)}},ee=async()=>{P(!0);try{const J={displayName:M,bio:S,location:N,photoURL:C},re=Mt(Ke,"users",r.uid);await wr(re,J),await t(),setUserProfile(ye=>({...ye,...J})),g(!1)}catch(J){console.error("Error updating profile:",J),alert(n("error_updating_profile")||"Error updating profile")}finally{P(!1)}},H=async J=>{if(!D)return;const re=J.target.files[0];try{const Te=await fn(re,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),Ne=await new Promise(Ie=>{const qe=new FileReader;qe.readAsDataURL(Te),qe.onload=Qe=>Ie(Qe.target.result)});G(Ne),await fg(Mt(Ke,"users",r.uid),{avatar:Ne,email:r.email,name:M||r.displayName,updatedAt:new Date},{merge:!0});try{await e2(_r.currentUser,{photoURL:Ne})}catch{}updateUserPostsName(r.uid,M,Ne),await t(),u(n("profile_updated")||"Profile updated!","success")}catch(ye){console.error(ye),u("Error updating avatar.","error")}finally{v(!1)}};if(!Z)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(V&&!w)return b.jsx(nv,{});const Y=J=>!J?.lastSeen||!J.lastSeen.seconds?!1:Date.now()-J.lastSeen.seconds*1e3<180*1e3,ie=J=>J?.lastSeen?J_(new Date(J.lastSeen.seconds*1e3),{addSuffix:!0,locale:s.language==="tr"?Z_:pg}):"Offline";return b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:[K&&K.tier&&b.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-3xl bg-gradient-to-br from-green-900 via-green-800 to-emerald-900 shadow-2xl text-white p-6 animate-fade-in-down border border-green-700/50",children:[b.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),b.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-6",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center bg-white/20 backdrop-blur-md shadow-inner border border-white/10 ${K.tier.color.replace("text-","text-white ")}`,children:(()=>{const J=K.tier.icon||zr;return b.jsx(J,{className:"w-8 h-8 text-white drop-shadow-md"})})()}),b.jsxs("div",{children:[b.jsx("p",{className:"text-green-200 text-xs font-bold uppercase tracking-widest mb-1",children:n("current_level")||"SEVYE"}),b.jsx("h2",{className:"text-2xl font-bold tracking-tight text-white leading-none",children:s.language==="tr"?K.tier.trName:K.tier.name}),b.jsxs("p",{className:"text-sm font-medium text-green-300 mt-1 opacity-90",children:["Level ",K.level]})]})]}),b.jsx("div",{className:"text-right",children:b.jsx("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-green-200 drop-shadow-sm",children:K.level})})]}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"flex justify-between text-xs font-medium text-green-100 mb-2",children:[b.jsxs("span",{children:[K.currentLevelXp," XP"]}),b.jsx("span",{children:K.isMaxLevel?"MAX":`Next: ${K.nextLevelReq} XP`})]}),b.jsx("div",{className:"h-3 bg-black/20 rounded-full overflow-hidden backdrop-blur-sm border border-white/5",children:b.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-300 shadow-[0_0_10px_rgba(74,222,128,0.5)] transition-all duration-1000 ease-out",style:{width:`${K.progress}%`}})}),b.jsxs("p",{className:"mt-3 text-xs text-green-200/80 text-center",children:[n("total_xp")||"Toplam Puan",": ",b.jsx("span",{className:"text-white font-bold",children:K.totalXP})]})]})]}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${D?"group cursor-pointer":""} mt-2`,onClick:()=>D&&d.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(D?C:w?.avatar||w?.photoURL)?b.jsx("img",{src:D?C:w?.avatar||w?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(D?M||r.displayName||"Gardener":w?.name||w?.displayName||k.length>0&&k[0].authorName||"Gardener")}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!D&&w&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${Y(w)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Y(w)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),Y(w)?"Online":ie(w)]}),D&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(wo,{className:"w-8 h-8 text-white"})}),y&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(xo,{className:"animate-spin text-green-600"})})]}),D&&b.jsx("input",{type:"file",ref:d,onChange:H,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:D?M||n("gardener")||"Bahvan":w?.name||w?.displayName||k.length>0&&k[0].authorName||n("gardener")||"Bahvan"}),D&&b.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),D?b.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:M,onChange:J=>x(J.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:y,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[y?b.jsx(xo,{className:"animate-spin w-4 h-4"}):b.jsx(HI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",w?.createdAt?.seconds?new Date(w.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{if(!r){u(n("login_to_message")||"Please login to send messages","info"),o("/login");return}const J={uid:w.uid||Z,name:w.name||w.displayName||k.length>0&&k[0].authorName||"Gardener",photoURL:w.photoURL||w.avatar||null};o("/messages/new",{state:{targetUser:J}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(yh,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.reduce((J,re)=>J+(re.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(hV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:D?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:w?.name||"Kullanc"})||`${w?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(xo,{className:"w-8 h-8 animate-spin text-gray-300"})}):k.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:k.map(J=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(dR,{post:{...J,hideAuthor:D},onViewAnalysis:()=>{}})},J.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(LI,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})]})}function W9(){const{t:r}=zn(),{currentUser:e}=ai(),{addToast:t}=Ca();xs();const n=xr(),[s,o]=$.useState([]),[c,u]=$.useState(!0),[d,f]=$.useState(null),[g,y]=$.useState(!1),[v,w]=$.useState(null),[T,k]=$.useState(""),[O,V]=$.useState(!1),B=$.useRef(null),F=async()=>{try{u(!0);const x=await eR(e.uid);o(x||[]),n.state?.newAnalysisId&&(f(n.state.newAnalysisId),y(!0),window.history.replaceState({},document.title))}catch(x){console.error("Failed to load analyses",x),t(r("error_loading_analyses")||"Analizler yklenemedi","error")}finally{u(!1)}};$.useEffect(()=>{e&&F()},[e,n.state]);const q=async(x,S)=>{if(x.stopPropagation(),!!window.confirm(r("confirm_delete")||"Bu analizi silmek istediinize emin misiniz?"))try{await tR(S),o(I=>I.filter(N=>N.id!==S)),t(r("analysis_deleted")||"Analiz silindi","success")}catch(I){console.error("Delete failed",I),t("Silinemedi","error")}},K=x=>{f(d===x?null:x)},z=async(x,S)=>{if(x.stopPropagation(),!S.isPublic)try{await iR(S.id),o(I=>I.map(N=>N.id===S.id?{...N,isPublic:!0}:N)),t(r("shared_success")||"Analiz toplulukta paylald!","success")}catch(I){console.error("Share failed",I),t("Paylalamad","error")}},M=async x=>{if(!T.trim()&&!B.current?.files?.[0]){t("Ltfen bir not yazn veya fotoraf ykleyin.","error");return}V(!0);try{let S=null,I=null;if(B.current?.files?.[0]){const N=B.current.files[0];S=await new Promise(j=>{const C=new FileReader;C.onload=G=>j(G.target.result),C.readAsDataURL(N)});try{I=await uR(x.mainImage,S,x.result.disease_name)}catch(j){console.error("AI Progress Check Failed:",j)}}await sR(x.id,S,T,I),w(null),k(""),B.current&&(B.current.value=""),t("Durum gncellemesi kaydedildi!","success"),F()}catch(S){console.error("Feedback failed",S),t("Gncelleme kaydedilemedi.","error")}finally{V(!1)}};return c?b.jsx(nv,{}):s.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(zr,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:r("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(ei,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(wo,{className:"w-5 h-5"}),r("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(Tm,{className:"w-7 h-7 text-green-600"}),r("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[s.length," ",r("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:s.map(x=>{const S=x.nextCheckup?.seconds?new Date>new Date(x.nextCheckup.seconds*1e3):!1;return b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${d===x.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":S?"border-orange-300 ring-2 ring-orange-100":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:I=>q(I,x.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:r("delete"),children:b.jsx(Sm,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>K(x.id),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:x.mainImage,alt:x.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),S&&b.jsx("div",{className:"absolute -top-2 -left-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-md animate-bounce",children:"KONTROL ZAMANI"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:x.result.latin_name?b.jsxs("span",{className:"flex flex-col",children:[b.jsx("span",{children:x.plantType||x.result.plant_name}),b.jsx("span",{className:"text-xs font-normal italic text-gray-400",children:x.result.latin_name})]}):x.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(MI,{className:"w-3 h-3"}),x.createdAt?.seconds?new Date(x.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),x.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:x.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(Gj,{className:"w-4 h-4"}),b.jsxs("span",{children:[x.treatmentDuration||"1 Hafta"," Plan"]})]}),x.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(k0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(DI,{className:`w-6 h-6 text-gray-300 transition-transform ${d===x.id?"rotate-180":""}`})})]}),d===x.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:r("description")}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:x.result.description})]}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(dT,{className:"w-5 h-5 text-green-600"}),x.result.is_treatable===!1?r("prevention_tips")||"Koruyucu nlemler":r("treatment_steps")||"Tedavi Admlar"]}),x.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:r("plant_not_recoverable")||"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(x.result.is_treatable===!1?x.result.preventive_measures:x.result.treatment_steps)?.map((I,N)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${x.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:N+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:I})]},N))})]}),x.updates&&x.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler & lerleme"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:x.updates.map((I,N)=>b.jsxs("div",{className:`min-w-[240px] p-3 rounded-xl border shadow-sm ${I.aiAnalysis?.status==="better"?"bg-green-50 border-green-100 dark:bg-green-900/20":I.aiAnalysis?.status==="worse"?"bg-red-50 border-red-100 dark:bg-red-900/20":"bg-white border-gray-100 dark:bg-gray-700"}`,children:[I.imageUrl&&b.jsx("img",{src:I.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("span",{className:"text-xs text-gray-500",children:new Date(I.createdAt?.seconds*1e3).toLocaleDateString()}),I.aiAnalysis&&b.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${I.aiAnalysis.status==="better"?"bg-green-200 text-green-800":I.aiAnalysis.status==="worse"?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"}`,children:I.aiAnalysis.status==="better"?"YLEYOR":I.aiAnalysis.status==="worse"?"KTLEYOR":"DEM YOK"})]}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium mb-1",children:I.note}),I.aiAnalysis&&b.jsxs("div",{className:"mt-2 text-xs border-t pt-2 border-gray-200/50 dark:border-gray-600/50",children:[b.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:" AI zeti:"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-snug",children:I.aiAnalysis.summary}),b.jsx("p",{className:"mt-1 text-blue-600 dark:text-blue-400 font-medium",children:I.aiAnalysis.advice})]})]},N))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.result.is_treatable&&b.jsxs("button",{onClick:()=>w(v===x.id?null:x.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(wo,{className:"w-5 h-5"}),r("add_update")||"Durum Kontrol Yap"]}),b.jsx("div",{className:"flex flex-col items-center",children:b.jsxs("button",{onClick:I=>z(I,x),disabled:x.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${x.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(k0,{className:"w-5 h-5"}),x.isPublic?r("shared")||"Paylald":r("share")||"Payla"]})})]}),v===x.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in relative overflow-hidden",children:[O&&b.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-20 flex flex-col items-center justify-center text-center",children:[b.jsx(xo,{className:"w-8 h-8 text-green-600 animate-spin mb-2"}),b.jsx("p",{className:"text-sm font-medium text-green-700",children:"AI lerleme Analizi Yapyor..."}),b.jsx("p",{className:"text-xs text-green-600 opacity-75",children:"nceki fotorafla karlatrlyor"})]}),b.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-2 rounded-lg",children:[b.jsx(Tm,{className:"w-4 h-4"}),b.jsx("p",{children:"Yeni bir fotoraf ykle. AI bunu eskisiyle karlatrp iyileme olup olmadn syleyecek."})]}),b.jsx("textarea",{value:T,onChange:I=>k(I.target.value),placeholder:"Bitkide ne gibi deiiklikler grdn?",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:2}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:B,accept:"image/*",className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100 cursor-pointer"}),b.jsxs("button",{onClick:()=>M(x),disabled:O,className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-2 font-bold text-xs",children:[b.jsx("span",{children:"Analiz Et & Kaydet"}),b.jsx(_h,{className:"w-3 h-3"})]})]})]})]})]},x.id)})}),g&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(eV,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(dT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(wo,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>y(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}function X9(){const{t:r}=zn();return b.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6 relative",children:b.jsx(wo,{className:"w-12 h-12 text-green-600 animate-pulse"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:r("scan_plant")||"Bitki Tara"}),b.jsx("p",{className:"text-gray-500 mb-6 max-w-xs",children:r("scan_desc")||"Kamera henz bu sayfada aktif deil. Ana sayfay kullann."})]})}function J9(){const{t:r,i18n:e}=zn(),{logout:t,currentUser:n}=ai(),[s,o]=$.useState(localStorage.getItem("theme")==="dark"),c=()=>{const d=s?"light":"dark";o(!s),localStorage.setItem("theme",d),d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=()=>{const d=e.language==="tr"?"en":"tr";e.changeLanguage(d)};return b.jsxs("div",{className:"max-w-xl mx-auto p-4 pb-24",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:r("settings")||"Ayarlar"}),b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[b.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:s?b.jsx(zI,{className:"w-5 h-5"}):b.jsx(qI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("dark_mode")||"Karanlk Mod"})]}),b.jsx("div",{className:`w-11 h-6 rounded-full transition-colors flex items-center px-0.5 ${s?"bg-purple-600":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${s?"translate-x-5":"translate-x-0"}`})})]}),b.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:b.jsx(cV,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("language")||"Dil"})]}),b.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[b.jsx("span",{className:"text-sm font-bold uppercase",children:e.language}),b.jsx(Wj,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl",children:b.jsx(Am,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r("account")||"Hesap"})]}),b.jsx("p",{className:"text-sm text-gray-500 pl-11",children:n?.email})]}),b.jsx("button",{onClick:t,className:"w-full flex items-center justify-between p-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-xl",children:b.jsx(UI,{className:"w-5 h-5"})}),b.jsx("span",{className:"font-medium",children:r("logout")||"k Yap"})]})})]})]})}const Z9=$.createContext(),e8=({children:r})=>{const[e,t]=$.useState(!1),n=()=>t(c=>!c),s=()=>t(!1),o=()=>t(!0);return b.jsx(Z9.Provider,{value:{isOpen:e,toggle:n,close:s,open:o},children:r})};var zT={},t8="@vercel/analytics",n8="1.6.1",r8=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function IR(){return typeof window<"u"}function RR(){try{const r="production"}catch{}return"production"}function i8(r="auto"){if(r==="auto"){window.vam=RR();return}window.vam=r}function s8(){return(IR()?window.vam:RR())||"production"}function O0(){return s8()==="development"}function a8(r){return r.scriptSrc?r.scriptSrc:O0()?"https://va.vercel-scripts.com/v1/script.debug.js":r.basePath?`${r.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function o8(r={debug:!0}){var e;if(!IR())return;i8(r.mode),r8(),r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend));const t=a8(r);if(document.head.querySelector(`script[src*="${t}"]`))return;const n=document.createElement("script");n.src=t,n.defer=!0,n.dataset.sdkn=t8+(r.framework?`/${r.framework}`:""),n.dataset.sdkv=n8,r.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),r.endpoint?n.dataset.endpoint=r.endpoint:r.basePath&&(n.dataset.endpoint=`${r.basePath}/insights`),r.dsn&&(n.dataset.dsn=r.dsn),n.onerror=()=>{const s=O0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},O0()&&r.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function l8({route:r,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:r,path:e})}function c8(){if(!(typeof process>"u"||typeof zT>"u"))return zT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function u8(r){return $.useEffect(()=>{var e;r.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",r.beforeSend))},[r.beforeSend]),$.useEffect(()=>{o8({framework:r.framework||"react",basePath:r.basePath??c8(),...r.route!==void 0&&{disableAutoTrack:!0},...r})},[]),$.useEffect(()=>{r.route&&r.path&&l8({route:r.route,path:r.path})},[r.route,r.path]),null}function h8(){return b.jsx(e8,{children:b.jsxs(oL,{children:[b.jsxs(uk,{children:[b.jsx(Xr,{path:"/login",element:b.jsx(cL,{})}),b.jsx(Xr,{path:"/register",element:b.jsx(hL,{})}),b.jsxs(Xr,{path:"/",element:b.jsx(lL,{}),children:[b.jsx(Xr,{index:!0,element:b.jsx(KL,{})}),b.jsx(Xr,{path:"scan",element:b.jsx(X9,{})}),b.jsx(Xr,{path:"analyses",element:b.jsx(W9,{})}),b.jsx(Xr,{path:"community",element:b.jsx(I9,{})}),b.jsx(Xr,{path:"chat",element:b.jsx(F9,{})}),b.jsx(Xr,{path:"profile",element:b.jsx(Q9,{})}),b.jsx(Xr,{path:"settings",element:b.jsx(J9,{})})]})]}),b.jsx(u8,{})," "]})})}const d8="Plant AI",f8="Welcome to Plant AI",m8="Plant Diagnosis",g8="Community",p8="Profile",y8="Login",_8="Messages",v8="Language",b8="Logout",w8="Dark Mode",x8="Light Mode",E8="My Analyses",T8="Register",S8="Upload Photo",A8="Take Photo",I8="Analyzing...",R8="Diagnosis Results",C8="Treatment",N8="Confidence",k8="Save Changes",D8="Saving...",O8="Display Name",M8="Email",P8="Tap to change avatar",j8="Profile updated successfully!",V8="About Project",L8="Do you know the name of this plant?",U8="e.g., Rose, Tomato, Unknown...",z8="1. Plant Name",B8="2. Capture Photo",F8="Next",H8="I don't know",q8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",$8="Take Close-up Photo",G8="Login to view detailed diagnosis and treatment plan.",K8="Login to View Results",Y8="Detailed analysis is available for members only.",Q8="AI Powered Plant Doctor",W8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',X8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",J8="Start Diagnosis",Z8="Identify",ez="Tell us the plant name or type.",tz="Analyze",nz="Upload photos of the affected area.",rz="Heal",iz="Get instant treatment plan.",sz="Welcome, ",az="Diagnosis failed. Please try again.",oz="Back",lz="Plant",cz="Tomato",uz="Pepper",hz="Cucumber",dz="Rose",fz="Succulent",mz="Orchid",gz="Lemon",pz="Strawberry",yz="Mint",_z="Other",vz="Healthy / No Issue",bz="Yellowing Leaves",wz="Leaf Spots",xz="Wilting",Ez="Pests / Bugs",Tz="Root/Stem Rot",Sz="Mold / Fungus",Az="Unknown / Help Needed",Iz="Auto-Detect from Image",Rz="Detecting...",Cz="Ask Question",Nz="Please login to post.",kz="Login Required",Dz="Are you sure you want to delete this post?",Oz="Just now",Mz="Failed to delete post",Pz="Failed to post comment",jz="Failed to update post",Vz="Add a comment...",Lz="Please login to comment.",Uz="No comments yet. Be the first!",zz="Edit Post",Bz="Cancel",Fz="Save",Hz="Gardener",qz="Community Member",$z="Send Message",Gz="Starting...",Kz="Please login to message users.",Yz="You cannot message yourself.",Qz="Failed to start chat.",Wz=" No posts yet",Xz="Be the first to share your garden!",Jz="No results",Zz="Like",e7="Comment",t7="Edit",n7="Joined",r7="Unknown Date",i7="View Profile",s7="Block User",a7="Unblock User",o7="Posts",l7="Likes",c7="My Posts",u7="{{name}}'s Posts",h7="New Chat",d7="View Analysis Report",f7="Type a message...",m7="POWERED BY GEMINI AI",g7="Heal your plants with",p7="AI Precision",y7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",_7="Instant Analysis",v7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",b7="Smart Interactions",w7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",x7="Verified Treatments",E7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",T7="Your Personal Pocket Botanist",S7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",A7="Open Camera",I7="Select from Gallery",R7="No plant detected. Please ensure the subject is a clear plant or leaf.",C7="Our AI botanist is currently overwhelmed. Please try again in a few seconds.",N7="Retry",k7="Camera access denied. Please check your browser permissions.",D7="Last seen",O7="Prevention Tips",M7="This plant may not fully recover, but follow these steps to prevent spread.",P7="Description",j7="Urgency",V7="Spread Risk",L7="New Scan",U7={app_name:d8,welcome:f8,plant_diagnosis:m8,community:g8,profile:p8,login:y8,messages:_8,language:v8,logout:b8,dark_mode:w8,light_mode:x8,analyses:E8,register:T8,upload_photo:S8,take_photo:A8,analyzing:I8,results:R8,treatment:C8,confidence:N8,save_changes:k8,saving:D8,display_name:O8,email:M8,change_avatar:P8,profile_updated:j8,about:V8,what_plant_question:L8,what_plant_placeholder:U8,scan_step_1:z8,scan_step_2:B8,next_step:F8,skip:H8,need_macro_photo:q8,take_macro_photo:$8,login_blur_text:G8,login_to_view:K8,guest_limited:Y8,hero_badge:Q8,hero_title:W8,hero_desc:X8,start_diagnosis:J8,step_1_title:Z8,step_1_desc:ez,step_2_title:tz,step_2_desc:nz,step_3_title:rz,step_3_desc:iz,welcome_user:sz,error_diagnosis_failed:az,back:oz,plant:lz,plant_tomato:cz,plant_pepper:uz,plant_cucumber:hz,plant_rose:dz,plant_succulent:fz,plant_orchid:mz,plant_lemon:gz,plant_strawberry:pz,plant_mint:yz,plant_other:_z,disease_none:vz,disease_yellowing:bz,disease_spots:wz,disease_wilting:xz,disease_bugs:Ez,disease_rot:Tz,disease_mold:Sz,disease_unknown:Az,auto_detect:Iz,detecting:Rz,ask_question:Cz,login_to_post:Nz,login_required:kz,confirm_delete_post:Dz,just_now:Oz,failed_delete_post:Mz,failed_post_comment:Pz,failed_update_post:jz,add_comment_placeholder:Vz,login_to_comment:Lz,no_comments_yet:Uz,edit_post:zz,cancel:Bz,save:Fz,gardener:Hz,community_member:qz,send_message:$z,starting_chat:Gz,login_to_message:Kz,cannot_message_self:Yz,failed_start_chat:Qz,no_posts_yet:Wz,be_the_first:Xz,no_results:Jz,like:Zz,comment:e7,edit:t7,delete:"Delete",joined:n7,unknown_date:r7,view_profile:i7,block_user:s7,unblock_user:a7,posts:o7,likes:l7,my_posts:c7,user_posts_title:u7,new_conversation:h7,view_analysis_report:d7,type_message:f7,ai_powered_v2:m7,hero_title_1:g7,hero_title_highlight:p7,hero_desc_v2:y7,feature_1_title:_7,feature_1_desc:v7,feature_2_title:b7,feature_2_desc:w7,feature_3_title:x7,feature_3_desc:E7,summary_title:T7,summary_desc:S7,open_camera:A7,upload_gallery:I7,error_not_plant:R7,error_server_busy:C7,retry:N7,camera_permission_denied:k7,last_seen:D7,prevention_tips:O7,plant_not_recoverable:M7,description:P7,urgency:j7,spread_risk:V7,new_scan:L7},z7="Bitki AI",B7="Bitki AI'ye Hogeldiniz",F7="Bitki Tehisi",H7="Topluluk",q7="Profil",$7="Giri Yap",G7="Mesajlar",K7="Dil",Y7="k Yap",Q7="Koyu Tema",W7="Aydnlk Tema",X7="Analizlerim",J7="Kayt Ol",Z7="Fotoraf Ykle",eB="Fotoraf ek",tB="Analiz ediliyor...",nB="Bitki",rB="Domates",iB="Biber",sB="Salatalk",aB="Patlcan",oB="Patates",lB="Soan",cB="Sarmsak",uB="Marul",hB="Ispanak",dB="Havu",fB="Fasulye",mB="Msr",gB="Kabak",pB="ilek",yB="Limon",_B="Portakal",vB="Elma",bB="zm",wB="Karpuz",xB="Kavun",EB="Kiraz",TB="eftali",SB="Gl",AB="Orkide",IB="Sukulent",RB="Lale",CB="Ayiei",NB="Papatya",kB="Lavanta",DB="Kakts",OB="Zeytin",MB="am",PB="Palmiye",jB="Nane",VB="Fesleen",LB="Biberiye",UB="Maydanoz",zB="Dier",BB="Salkl / Sorun Yok",FB="Yaprak Sararmas",HB="Yaprak Lekeleri",qB="Solma",$B="Bcek / Haere",GB="Kk/Gvde rmesi",KB="Kf / Mantar",YB="Mildiy",QB="Besin Eksiklii",WB="Bilinmiyor / Yardm Lazm",XB="Fotoraftan Bul",JB="Taranyor...",ZB="Bitki Se...",eF="Tehis Sonular",tF="Tedavi",nF="Gven Oran",rF="Deiiklikleri Kaydet",iF="Analizi Kaydet",sF="Kaydedildi",aF="Analiz baaryla kaydedildi!",oF="Bu analiz zaten toplulukla paylald.",lF="Bu analizi toplulukla paylamak istiyor musunuz?",cF="Baaryla paylald!",uF="Analizlerim",hF="Kaydediliyor...",dF="Grnen sim",fF="E-posta",mF="Fotoraf deitirmek iin dokunun",gF="Profil baaryla gncellendi!",pF="Proje Hakknda",yF="Bu bitkinin adn biliyor musunuz?",_F="rn. Gl, Domates, Bilmiyorum...",vF="1. Bitki Ad",bF="2. Fotoraf ek",wF="Devam Et",xF="Bilmiyorum",EF="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",TF="Yakndan ek",SF="Detayl tehis ve tedavi plann grmek iin giri yapn.",AF="Sonucu Grmek in Giri Yap",IF="Detayl analiz sadece yelere zeldir.",RF="Yapay Zeka Destekli Bitki Doktoru",CF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',NF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",kF="Tehise Bala",DF="Tanmla",OF="Bitkinin adn veya trn belirtin.",MF="Analiz Et",PF="Etkilenen blgenin fotorafn ykleyin.",jF="yiletir",VF="Annda tedavi planna kavuun.",LF="Hogeldin, ",UF="Tehis baarsz oldu. Ltfen tekrar deneyin.",zF="Geri",BF="Az nce",FF="Bu gnderiyi silmek istediinize emin misiniz?",HF="Gnderi silinemedi",qF="Yorum gnderilemedi",$F="Gnderi gncellenemedi",GF="Yorum yaz...",KF="Yorum yapmak iin giri yapn.",YF="Henz yorum yok. lk yorumu sen yap!",QF="Gnderiyi Dzenle",WF="ptal",XF="Kaydet",JF="Bahvan",ZF="Topluluk yesi",eH="Mesaj Gnder",tH="Balatlyor...",nH="Mesaj gndermek iin giri yapn.",rH="Kendinize mesaj atamazsnz.",iH="Sohbet balatlamad.",sH=" Henz gnderi yok",aH="Baheni paylaan ilk kii ol!",oH="Sonu yok",lH="Been",cH="Yorum",uH="Dzenle",hH="Ad Soyad",dH="ifre",fH="Toplulua katlmak iin hesap oluturun.",mH="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",gH="E-postanz Dorulayn",pH="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",yH="E-posta Uygulamasn A",_H="Doruladm, Giri Yap",vH="Zaten hesabnz var m?",bH="Katlma Tarihi",wH="Bilinmiyor",xH="Profili Gr",EH="Kullancy Engelle",TH="Engeli Kaldr",SH="Gnderi",AH="Beeni",IH="Gnderilerim",RH="{{name}} Gnderileri",CH="Yeni Sohbet",NH="Analiz Raporunu Gr",kH="Mesaj yazn...",DH="GEMINI AI DESTEKL",OH="Bitkilerinizi yiletirin",MH="Yapay Zeka Hassasiyeti",PH="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",jH="Annda Analiz",VH="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",LH="Akll Etkileimler",UH="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",zH="Dorulanm Tedaviler",BH="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",FH="Kiisel Cep Botanikiniz",HH="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",qH="Kameray A",$H="Galeriden Se",GH="Bitki tespit edilemedi. Ltfen net bir bitki veya yaprak fotoraf ektiinizden emin olun.",KH="Yapay zeka asistanmz u anda ok youn. Ltfen birka saniye sonra tekrar deneyin.",YH="Tekrar Dene",QH="Kamera eriimi reddedildi. Ltfen tarayc izinlerini kontrol edin.",WH="Yakn ekim Fotoraf",XH="Bitki AI Dnyor...",JH="Analiz kaydedilemedi:",ZH="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.",eq="Bu cihazda mikrofon bulunamad.",tq="Mikrofon kullanlamyor veya baka bir uygulama tarafndan kullanlyor.",nq="Mikrofona eriilemedi. HTTPS balantsn ve mikrofonunuzu kontrol edin.",rq="Kaydediliyor...",iq="Mesaj dzenleniyor...",sq="Mesajnz dzenleyin...",aq="Tedavi sreci balatld!",oq="Bilgiyi Kaydet",lq="Tedaviye Bala",cq="Henz Bir Analiz Yok",uq="Bitkilerinizin saln takip etmek iin ilk analizinizi yapn.",hq="Tedavi & Takip",dq="Kayt",fq="Bu analizi silmek istediinizden emin misiniz?",mq="Gelime Ekle",gq="Paylald",pq="Payla",yq="Toplulukla paylaarak bakalarna yardmc ol!",_q="Soru Sor",vq="Fotoraf",bq="Sesli Mesaj",wq="Son grlme {{days}} gn nce",xq="Son grlme {{hours}} saat nce",Eq="Son grlme {{minutes}} dakika nce",Tq="Az nce grld",Sq="Dzenlendi",Aq="Payla",Iq="Balanty Kopyala",Rq="Balant kopyaland!",Cq="Sosyal Medyada Payla",Nq="Son grlme",kq="Koruyucu nlemler",Dq="Bu bitki tamamen iyilemeyebilir, ancak yaylmay nlemek iin aadaki admlar izleyin.",Oq="Aklama",Mq="Aciliyet",Pq="Yaylma Riski",jq="Yeni Tarama",Vq={app_name:z7,welcome:B7,plant_diagnosis:F7,community:H7,profile:q7,login:$7,messages:G7,language:K7,logout:Y7,dark_mode:Q7,light_mode:W7,analyses:X7,register:J7,upload_photo:Z7,take_photo:eB,analyzing:tB,plant:nB,plant_tomato:rB,plant_pepper:iB,plant_cucumber:sB,plant_eggplant:aB,plant_potato:oB,plant_onion:lB,plant_garlic:cB,plant_lettuce:uB,plant_spinach:hB,plant_carrot:dB,plant_bean:fB,plant_corn:mB,plant_zucchini:gB,plant_strawberry:pB,plant_lemon:yB,plant_orange:_B,plant_apple:vB,plant_grape:bB,plant_watermelon:wB,plant_melon:xB,plant_cherry:EB,plant_peach:TB,plant_rose:SB,plant_orchid:AB,plant_succulent:IB,plant_tulip:RB,plant_sunflower:CB,plant_daisy:NB,plant_lavender:kB,plant_cactus:DB,plant_olive:OB,plant_pine:MB,plant_palm:PB,plant_mint:jB,plant_basil:VB,plant_rosemary:LB,plant_parsley:UB,plant_other:zB,disease_none:BB,disease_yellowing:FB,disease_spots:HB,disease_wilting:qB,disease_bugs:$B,disease_rot:GB,disease_mold:KB,disease_mildew:YB,disease_nutrient:QB,disease_unknown:WB,auto_detect:XB,detecting:JB,select_plant:ZB,results:eF,treatment:tF,confidence:nF,save_changes:rF,save_analysis:iF,saved:sF,save_success:aF,already_shared:oF,confirm_share:lF,share_success:cF,my_analyses:uF,saving:hF,display_name:dF,email:fF,change_avatar:mF,profile_updated:gF,about:pF,what_plant_question:yF,what_plant_placeholder:_F,scan_step_1:vF,scan_step_2:bF,next_step:wF,skip:xF,need_macro_photo:EF,take_macro_photo:TF,login_blur_text:SF,login_to_view:AF,guest_limited:IF,hero_badge:RF,hero_title:CF,hero_desc:NF,start_diagnosis:kF,step_1_title:DF,step_1_desc:OF,step_2_title:MF,step_2_desc:PF,step_3_title:jF,step_3_desc:VF,welcome_user:LF,error_diagnosis_failed:UF,back:zF,just_now:BF,confirm_delete_post:FF,failed_delete_post:HF,failed_post_comment:qF,failed_update_post:$F,add_comment_placeholder:GF,login_to_comment:KF,no_comments_yet:YF,edit_post:QF,cancel:WF,save:XF,gardener:JF,community_member:ZF,send_message:eH,starting_chat:tH,login_to_message:nH,cannot_message_self:rH,failed_start_chat:iH,no_posts_yet:sH,be_the_first:aH,no_results:oH,like:lH,comment:cH,edit:uH,delete:"Sil",full_name:hH,password:dH,create_account_desc:fH,verification_email_sent:mH,verify_email_title:gH,verify_email_desc:pH,open_email_app:yH,i_verified_it:_H,already_have_account:vH,joined:bH,unknown_date:wH,view_profile:xH,block_user:EH,unblock_user:TH,posts:SH,likes:AH,my_posts:IH,user_posts_title:RH,new_conversation:CH,view_analysis_report:NH,type_message:kH,ai_powered_v2:DH,hero_title_1:OH,hero_title_highlight:MH,hero_desc_v2:PH,feature_1_title:jH,feature_1_desc:VH,feature_2_title:LH,feature_2_desc:UH,feature_3_title:zH,feature_3_desc:BH,summary_title:FH,summary_desc:HH,open_camera:qH,upload_gallery:$H,error_not_plant:GH,error_server_busy:KH,retry:YH,camera_permission_denied:QH,close_up_photo:WH,ai_thinking:XH,save_fail:JH,mic_access_denied:ZH,mic_not_found:eq,mic_unavailable:tq,mic_generic_error:nq,recording:rq,editing_message:iq,edit_message_placeholder:sq,treatment_started:aq,save_info:oq,start_treatment:lq,no_analyses_title:cq,no_analyses_desc:uq,treatment_updates:hq,records:dq,confirm_delete:fq,add_update:mq,shared:gq,share:pq,share_help_others:yq,ask_question:_q,photo:vq,voice_message:bq,last_seen_day:wq,last_seen_hour:xq,last_seen_min:Eq,last_seen_just_now:Tq,edited:Sq,share_title:Aq,copy_link:Iq,link_copied:Rq,social_share:Cq,last_seen:Nq,prevention_tips:kq,plant_not_recoverable:Dq,description:Oq,urgency:Mq,spread_risk:Pq,new_scan:jq};Qn.use(b4).init({resources:{en:{translation:U7},tr:{translation:Vq}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});gN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(GI,{children:b.jsx(Ok,{children:b.jsx(kj,{children:b.jsx(h8,{})})})})}));
