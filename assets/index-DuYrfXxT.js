(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function jN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ry={exports:{}},wu={};var mw;function LN(){if(mw)return wu;mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:c,ref:s!==void 0?s:null,props:o}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var gw;function UN(){return gw||(gw=1,ry.exports=LN()),ry.exports}var b=UN(),iy={exports:{}},ze={};var pw;function zN(){if(pw)return ze;pw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,V={};function L(B,Y,le){this.props=B,this.context=Y,this.refs=V,this.updater=le||A}L.prototype.isReactComponent={},L.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},L.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function q(){}q.prototype=L.prototype;function z(B,Y,le){this.props=B,this.context=Y,this.refs=V,this.updater=le||A}var H=z.prototype=new q;H.constructor=z,P(H,L.prototype),H.isPureReactComponent=!0;var W=Array.isArray;function F(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(B,Y,le){var re=le.ref;return{$$typeof:n,type:B,key:Y,ref:re!==void 0?re:null,props:le}}function N(B,Y){return E(B.type,Y,B.props)}function C(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function O(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(le){return Y[le]})}var D=/\/+/g;function G(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):Y.toString(36)}function Z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(F,F):(B.status="pending",B.then(function(Y){B.status==="pending"&&(B.status="fulfilled",B.value=Y)},function(Y){B.status==="pending"&&(B.status="rejected",B.reason=Y)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function k(B,Y,le,re,te){var ye=typeof B;(ye==="undefined"||ye==="boolean")&&(B=null);var Ae=!1;if(B===null)Ae=!0;else switch(ye){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(B.$$typeof){case n:case e:Ae=!0;break;case p:return Ae=B._init,k(Ae(B._payload),Y,le,re,te)}}if(Ae)return te=te(B),Ae=re===""?"."+G(B,0):re,W(te)?(le="",Ae!=null&&(le=Ae.replace(D,"$&/")+"/"),k(te,Y,le,"",function(_e){return _e})):te!=null&&(C(te)&&(te=N(te,le+(te.key==null||B&&B.key===te.key?"":(""+te.key).replace(D,"$&/")+"/")+Ae)),Y.push(te)),1;Ae=0;var Oe=re===""?".":re+":";if(W(B))for(var Re=0;Re<B.length;Re++)re=B[Re],ye=Oe+G(re,Re),Ae+=k(re,Y,le,ye,te);else if(Re=w(B),typeof Re=="function")for(B=Re.call(B),Re=0;!(re=B.next()).done;)re=re.value,ye=Oe+G(re,Re++),Ae+=k(re,Y,le,ye,te);else if(ye==="object"){if(typeof B.then=="function")return k(Z(B),Y,le,re,te);throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function M(B,Y,le){if(B==null)return B;var re=[],te=0;return k(B,re,"","",function(ye){return Y.call(le,ye,te++)}),re}function J(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(le){(B._status===0||B._status===-1)&&(B._status=1,B._result=le)},function(le){(B._status===0||B._status===-1)&&(B._status=2,B._result=le)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var Q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},se={map:M,forEach:function(B,Y,le){M(B,function(){Y.apply(this,arguments)},le)},count:function(B){var Y=0;return M(B,function(){Y++}),Y},toArray:function(B){return M(B,function(Y){return Y})||[]},only:function(B){if(!C(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ze.Activity=y,ze.Children=se,ze.Component=L,ze.Fragment=t,ze.Profiler=s,ze.PureComponent=z,ze.StrictMode=r,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},ze.cache=function(B){return function(){return B.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(B,Y,le){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var re=P({},B.props),te=B.key;if(Y!=null)for(ye in Y.key!==void 0&&(te=""+Y.key),Y)!T.call(Y,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Y.ref===void 0||(re[ye]=Y[ye]);var ye=arguments.length-2;if(ye===1)re.children=le;else if(1<ye){for(var Ae=Array(ye),Oe=0;Oe<ye;Oe++)Ae[Oe]=arguments[Oe+2];re.children=Ae}return E(B.type,te,re)},ze.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},ze.createElement=function(B,Y,le){var re,te={},ye=null;if(Y!=null)for(re in Y.key!==void 0&&(ye=""+Y.key),Y)T.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(te[re]=Y[re]);var Ae=arguments.length-2;if(Ae===1)te.children=le;else if(1<Ae){for(var Oe=Array(Ae),Re=0;Re<Ae;Re++)Oe[Re]=arguments[Re+2];te.children=Oe}if(B&&B.defaultProps)for(re in Ae=B.defaultProps,Ae)te[re]===void 0&&(te[re]=Ae[re]);return E(B,ye,te)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(B){return{$$typeof:h,render:B}},ze.isValidElement=C,ze.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:J}},ze.memo=function(B,Y){return{$$typeof:m,type:B,compare:Y===void 0?null:Y}},ze.startTransition=function(B){var Y=R.T,le={};R.T=le;try{var re=B(),te=R.S;te!==null&&te(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(F,Q)}catch(ye){Q(ye)}finally{Y!==null&&le.types!==null&&(Y.types=le.types),R.T=Y}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function(B){return R.H.use(B)},ze.useActionState=function(B,Y,le){return R.H.useActionState(B,Y,le)},ze.useCallback=function(B,Y){return R.H.useCallback(B,Y)},ze.useContext=function(B){return R.H.useContext(B)},ze.useDebugValue=function(){},ze.useDeferredValue=function(B,Y){return R.H.useDeferredValue(B,Y)},ze.useEffect=function(B,Y){return R.H.useEffect(B,Y)},ze.useEffectEvent=function(B){return R.H.useEffectEvent(B)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function(B,Y,le){return R.H.useImperativeHandle(B,Y,le)},ze.useInsertionEffect=function(B,Y){return R.H.useInsertionEffect(B,Y)},ze.useLayoutEffect=function(B,Y){return R.H.useLayoutEffect(B,Y)},ze.useMemo=function(B,Y){return R.H.useMemo(B,Y)},ze.useOptimistic=function(B,Y){return R.H.useOptimistic(B,Y)},ze.useReducer=function(B,Y,le){return R.H.useReducer(B,Y,le)},ze.useRef=function(B){return R.H.useRef(B)},ze.useState=function(B){return R.H.useState(B)},ze.useSyncExternalStore=function(B,Y,le){return R.H.useSyncExternalStore(B,Y,le)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.3",ze}var yw;function wm(){return yw||(yw=1,iy.exports=zN()),iy.exports}var $=wm();const FN=jN($);var sy={exports:{}},xu={},ay={exports:{}},oy={};var _w;function BN(){return _w||(_w=1,(function(n){function e(k,M){var J=k.length;k.push(M);e:for(;0<J;){var Q=J-1>>>1,se=k[Q];if(0<s(se,M))k[Q]=M,k[J]=se,J=Q;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],J=k.pop();if(J!==M){k[0]=J;e:for(var Q=0,se=k.length,B=se>>>1;Q<B;){var Y=2*(Q+1)-1,le=k[Y],re=Y+1,te=k[re];if(0>s(le,J))re<se&&0>s(te,le)?(k[Q]=te,k[re]=J,Q=re):(k[Q]=le,k[Y]=J,Q=Y);else if(re<se&&0>s(te,J))k[Q]=te,k[re]=J,Q=re;else break e}}return M}function s(k,M){var J=k.sortIndex-M.sortIndex;return J!==0?J:k.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],p=1,y=null,v=3,w=!1,A=!1,P=!1,V=!1,L=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function H(k){for(var M=t(m);M!==null;){if(M.callback===null)r(m);else if(M.startTime<=k)r(m),M.sortIndex=M.expirationTime,e(d,M);else break;M=t(m)}}function W(k){if(P=!1,H(k),!A)if(t(d)!==null)A=!0,F||(F=!0,O());else{var M=t(m);M!==null&&Z(W,M.startTime-k)}}var F=!1,R=-1,T=5,E=-1;function N(){return V?!0:!(n.unstable_now()-E<T)}function C(){if(V=!1,F){var k=n.unstable_now();E=k;var M=!0;try{e:{A=!1,P&&(P=!1,q(R),R=-1),w=!0;var J=v;try{t:{for(H(k),y=t(d);y!==null&&!(y.expirationTime>k&&N());){var Q=y.callback;if(typeof Q=="function"){y.callback=null,v=y.priorityLevel;var se=Q(y.expirationTime<=k);if(k=n.unstable_now(),typeof se=="function"){y.callback=se,H(k),M=!0;break t}y===t(d)&&r(d),H(k)}else r(d);y=t(d)}if(y!==null)M=!0;else{var B=t(m);B!==null&&Z(W,B.startTime-k),M=!1}}break e}finally{y=null,v=J,w=!1}M=void 0}}finally{M?O():F=!1}}}var O;if(typeof z=="function")O=function(){z(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,G=D.port2;D.port1.onmessage=C,O=function(){G.postMessage(null)}}else O=function(){L(C,0)};function Z(k,M){R=L(function(){k(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(k){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var J=v;v=M;try{return k()}finally{v=J}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var J=v;v=k;try{return M()}finally{v=J}},n.unstable_scheduleCallback=function(k,M,J){var Q=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Q+J:Q):J=Q,k){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,k={id:p++,callback:M,priorityLevel:k,startTime:J,expirationTime:se,sortIndex:-1},J>Q?(k.sortIndex=J,e(m,k),t(d)===null&&k===t(m)&&(P?(q(R),R=-1):P=!0,Z(W,J-Q))):(k.sortIndex=se,e(d,k),A||w||(A=!0,F||(F=!0,O()))),k},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(k){var M=v;return function(){var J=v;v=M;try{return k.apply(this,arguments)}finally{v=J}}}})(oy)),oy}var vw;function qN(){return vw||(vw=1,ay.exports=BN()),ay.exports}var ly={exports:{}},kn={};var bw;function HN(){if(bw)return kn;bw=1;var n=wm();function e(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:m,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(d,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(d,m,null,p)},kn.flushSync=function(d){var m=c.T,p=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=m,r.p=p,r.d.f()}},kn.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(d,m))},kn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},kn.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var p=m.as,y=h(p,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?r.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):p==="script"&&r.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},kn.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=h(m.as,m.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(d)},kn.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=h(p,m.crossOrigin);r.d.L(d,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},kn.preloadModule=function(d,m){if(typeof d=="string")if(m){var p=h(m.as,m.crossOrigin);r.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(d)},kn.requestFormReset=function(d){r.d.r(d)},kn.unstable_batchedUpdates=function(d,m){return d(m)},kn.useFormState=function(d,m,p){return c.H.useFormState(d,m,p)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var ww;function $N(){if(ww)return ly.exports;ww=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ly.exports=HN(),ly.exports}var xw;function GN(){if(xw)return xu;xw=1;var n=qN(),e=wm(),t=$N();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function m(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,u=a;;){var g=l.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===l)return d(g),i;if(_===u)return d(g),a;_=_.sibling}throw Error(r(188))}if(l.return!==u.return)l=g,u=_;else{for(var S=!1,j=g.child;j;){if(j===l){S=!0,l=g,u=_;break}if(j===u){S=!0,u=g,l=_;break}j=j.sibling}if(!S){for(j=_.child;j;){if(j===l){S=!0,l=_,u=g;break}if(j===u){S=!0,u=_,l=g;break}j=j.sibling}if(!S)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=C&&i[C]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function G(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case L:return"Profiler";case V:return"StrictMode";case W:return"Suspense";case F:return"SuspenseList";case E:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case z:return i.displayName||"Context";case q:return(i._context.displayName||"Context")+".Consumer";case H:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:G(i.type)||"Memo";case T:a=i._payload,i=i._init;try{return G(i(a))}catch{}}return null}var Z=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Q=[],se=-1;function B(i){return{current:i}}function Y(i){0>se||(i.current=Q[se],Q[se]=null,se--)}function le(i,a){se++,Q[se]=i.current,i.current=a}var re=B(null),te=B(null),ye=B(null),Ae=B(null);function Oe(i,a){switch(le(ye,a),le(te,i),le(re,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?j1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=j1(a),i=L1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(re),le(re,i)}function Re(){Y(re),Y(te),Y(ye)}function _e(i){i.memoizedState!==null&&le(Ae,i);var a=re.current,l=L1(a,i.type);a!==l&&(le(te,i),le(re,l))}function Te(i){te.current===i&&(Y(re),Y(te)),Ae.current===i&&(Y(Ae),yu._currentValue=J)}var Ve,Ze;function De(i){if(Ve===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ve=a&&a[1]||"",Ze=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+i+Ze}var Ke=!1;function at(i,a){if(!i||Ke)return"";Ke=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(he){var ce=he}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(he){ce=he}i.call(ge.prototype)}}else{try{throw Error()}catch(he){ce=he}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],j=_[1];if(S&&j){var K=S.split(`
`),oe=j.split(`
`);for(g=u=0;u<K.length&&!K[u].includes("DetermineComponentFrameRoot");)u++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(u===K.length||g===oe.length)for(u=K.length-1,g=oe.length-1;1<=u&&0<=g&&K[u]!==oe[g];)g--;for(;1<=u&&0<=g;u--,g--)if(K[u]!==oe[g]){if(u!==1||g!==1)do if(u--,g--,0>g||K[u]!==oe[g]){var fe=`
`+K[u].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=u&&0<=g);break}}}finally{Ke=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?De(l):""}function it(i,a){switch(i.tag){case 26:case 27:case 5:return De(i.type);case 16:return De("Lazy");case 13:return i.child!==a&&a!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return at(i.type,!1);case 11:return at(i.type.render,!1);case 1:return at(i.type,!0);case 31:return De("Activity");default:return""}}function Qe(i){try{var a="",l=null;do a+=it(i,l),l=i,i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Fe=Object.prototype.hasOwnProperty,Xe=n.unstable_scheduleCallback,ft=n.unstable_cancelCallback,_n=n.unstable_shouldYield,Rt=n.unstable_requestPaint,$e=n.unstable_now,qt=n.unstable_getCurrentPriorityLevel,Gn=n.unstable_ImmediatePriority,si=n.unstable_UserBlockingPriority,Nt=n.unstable_NormalPriority,Lr=n.unstable_LowPriority,Qt=n.unstable_IdlePriority,Nn=n.log,vn=n.unstable_setDisableYieldValue,Ht=null,wt=null;function Xt(i){if(typeof Nn=="function"&&vn(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ht,i)}catch{}}var Ct=Math.clz32?Math.clz32:Na,$o=Math.log,ai=Math.LN2;function Na(i){return i>>>=0,i===0?32:31-($o(i)/ai|0)|0}var Cn=256,qi=262144,mt=4194304;function ln(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function bn(i,a,l){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var j=u&134217727;return j!==0?(u=j&~_,u!==0?g=ln(u):(S&=j,S!==0?g=ln(S):l||(l=j&~i,l!==0&&(g=ln(l))))):(j=u&~_,j!==0?g=ln(j):S!==0?g=ln(S):l||(l=u&~i,l!==0&&(g=ln(l)))),g===0?0:a!==0&&a!==g&&(a&_)===0&&(_=g&-g,l=a&-a,_>=l||_===32&&(l&4194048)!==0)?a:g}function wn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Go(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var i=mt;return mt<<=1,(mt&62914560)===0&&(mt=4194304),i}function fn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Ca(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function lg(i,a,l,u,g,_){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var j=i.entanglements,K=i.expirationTimes,oe=i.hiddenUpdates;for(l=S&~l;0<l;){var fe=31-Ct(l),ge=1<<fe;j[fe]=0,K[fe]=-1;var ce=oe[fe];if(ce!==null)for(oe[fe]=null,fe=0;fe<ce.length;fe++){var he=ce[fe];he!==null&&(he.lane&=-536870913)}l&=~ge}u!==0&&ka(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~a))}function ka(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var u=31-Ct(a);i.entangledLanes|=a,i.entanglements[u]=i.entanglements[u]|1073741824|l&261930}function xc(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var u=31-Ct(l),g=1<<u;g&a|i[u]&a&&(i[u]|=a),l&=~g}}function Ec(i,a){var l=a&-a;return l=(l&42)!==0?1:Da(l),(l&(i.suspendedLanes|a))!==0?0:l}function Da(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function jh(){var i=M.p;return i!==0?i:(i=window.event,i===void 0?32:ow(i.type))}function Ur(i,a){var l=M.p;try{return M.p=i,a()}finally{M.p=l}}var zr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+zr,mn="__reactProps$"+zr,oi="__reactContainer$"+zr,Ko="__reactEvents$"+zr,cg="__reactListeners$"+zr,Lh="__reactHandles$"+zr,Uh="__reactResources$"+zr,li="__reactMarker$"+zr;function Yo(i){delete i[Wt],delete i[mn],delete i[Ko],delete i[cg],delete i[Lh]}function ci(i){var a=i[Wt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[oi]||l[Wt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=$1(i);i!==null;){if(l=i[Wt])return l;i=$1(i)}return a}i=l,l=i.parentNode}return null}function _r(i){if(i=i[Wt]||i[oi]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function nr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ui(i){var a=i[Uh];return a||(a=i[Uh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(i){i[li]=!0}var Tc=new Set,Ac={};function hi(i,a){di(i,a),di(i+"Capture",a)}function di(i,a){for(Ac[i]=a,i=0;i<a.length;i++)Tc.add(a[i])}var Sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ic={},Rc={};function zh(i){return Fe.call(Rc,i)?!0:Fe.call(Ic,i)?!1:Sc.test(i)?Rc[i]=!0:(Ic[i]=!0,!1)}function Qo(i,a,l){if(zh(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function rr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Zt(i,a,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+u)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ss(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nc(i,a,l){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){l=""+S,_.call(this,S)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function gt(i){if(!i._valueTracker){var a=Ss(i)?"checked":"value";i._valueTracker=Nc(i,a,""+i[a])}}function Oa(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return i&&(u=Ss(i)?i.checked?"true":"false":i.value),i=u,i!==l?(a.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ma=/[\n"\\]/g;function Kn(i){return i.replace(Ma,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xo(i,a,l,u,g,_,S,j){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+gn(a)):i.value!==""+gn(a)&&(i.value=""+gn(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Cc(i,S,gn(a)):l!=null?Cc(i,S,gn(l)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+gn(j):i.removeAttribute("name")}function Fh(i,a,l,u,g,_,S,j){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){gt(i);return}l=l!=null?""+gn(l):"",a=a!=null?""+gn(a):l,j||a===i.value||(i.value=a),i.defaultValue=a}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=j?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),gt(i)}function Cc(i,a,l){a==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Is(i,a,l,u){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&u&&(i[l].defaultSelected=!0)}else{for(l=""+gn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Bh(i,a,l){if(a!=null&&(a=""+gn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+gn(l):""}function Rs(i,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(r(92));if(Z(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=gn(a),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u),gt(i)}function Yn(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var qh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kc(i,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":u?i.setProperty(a,l):typeof l!="number"||l===0||qh.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Dc(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in a)u=a[g],a.hasOwnProperty(g)&&l[g]!==u&&kc(i,g,u)}else for(var _ in a)a.hasOwnProperty(_)&&kc(i,_,a[_])}function Wo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(i){return Ns.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Fr(){}var Oc=null;function vr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cs=null,mi=null;function Pa(i){var a=_r(i);if(a&&(i=a.stateNode)){var l=i[mn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Xo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==i&&u.form===i.form){var g=u[mn]||null;if(!g)throw Error(r(90));Xo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===i.form&&Oa(u)}break e;case"textarea":Bh(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Is(i,!!l.multiple,a,!1)}}}var Zo=!1;function ks(i,a,l){if(Zo)return i(a,l);Zo=!0;try{var u=i(a);return u}finally{if(Zo=!1,(Cs!==null||mi!==null)&&(jd(),Cs&&(a=Cs,i=mi,mi=Cs=null,Pa(a),i)))for(a=0;a<i.length;a++)Pa(i[a])}}function Br(i,a){var l=i.stateNode;if(l===null)return null;var u=l[mn]||null;if(u===null)return null;l=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(br)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Va=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Va=!1}var gi=null,Mc=null,ja=null;function Pc(){if(ja)return ja;var i,a=Mc,l=a.length,u,g="value"in gi?gi.value:gi.textContent,_=g.length;for(i=0;i<l&&a[i]===g[i];i++);var S=l-i;for(u=1;u<=S&&a[l-u]===g[_-u];u++);return ja=g.slice(i,1<u?1-u:void 0)}function La(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function qr(){return!1}function xn(i){function a(l,u,g,_,S){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(l=i[j],this[j]=l?l(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$i:qr,this.isPropagationStopped=qr,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),a}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=xn(Gi),Ds=y({},Gi,{view:0,detail:0}),Vc=xn(Ds),Os,el,yi,tl=y({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Os=i.screenX-yi.screenX,el=i.screenY-yi.screenY):el=Os=0,yi=i),Os)},movementY:function(i){return"movementY"in i?i.movementY:el}}),jc=xn(tl),Ua=y({},tl,{dataTransfer:0}),$h=xn(Ua),Gh=y({},Ds,{relatedTarget:0}),za=xn(Gh),Lc=y({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kh=xn(Lc),nl=y({},Gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Yh=xn(nl),Qh=y({},Gi,{data:0}),_i=xn(Qh),Xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Jh[i])?!!a[i]:!1}function Ms(){return Zh}var zn=y({},Ds,{key:function(i){if(i.key){var a=Xh[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=La(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?La(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?La(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ed=xn(zn),td=y({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=xn(td),f=y({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),x=xn(f),I=y({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=xn(I),ie=y({},tl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=xn(ie),be=y({},Gi,{newState:0,oldState:0}),Be=xn(be),$t=[9,13,27,32],ut=br&&"CompositionEvent"in window,Ot=null;br&&"documentMode"in document&&(Ot=document.documentMode);var wr=br&&"TextEvent"in window&&!Ot,vi=br&&(!ut||Ot&&8<Ot&&11>=Ot),Hr=" ",$r=!1;function Fa(i,a){switch(i){case"keyup":return $t.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var il=!1;function oR(i,a){switch(i){case"compositionend":return rl(a);case"keypress":return a.which!==32?null:($r=!0,Hr);case"textInput":return i=a.data,i===Hr&&$r?null:i;default:return null}}function lR(i,a){if(il)return i==="compositionend"||!ut&&Fa(i,a)?(i=Pc(),ja=Mc=gi=null,il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vi&&a.locale!=="ko"?null:a.data;default:return null}}var cR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!cR[i.type]:a==="textarea"}function Q_(i,a,l,u){Cs?mi?mi.push(u):mi=[u]:Cs=u,a=Hd(a,"onChange"),0<a.length&&(l=new pi("onChange","change",null,l,u),i.push({event:l,listeners:a}))}var Uc=null,zc=null;function uR(i){k1(i,0)}function nd(i){var a=nr(i);if(Oa(a))return i}function X_(i,a){if(i==="change")return a}var W_=!1;if(br){var ug;if(br){var hg="oninput"in document;if(!hg){var J_=document.createElement("div");J_.setAttribute("oninput","return;"),hg=typeof J_.oninput=="function"}ug=hg}else ug=!1;W_=ug&&(!document.documentMode||9<document.documentMode)}function Z_(){Uc&&(Uc.detachEvent("onpropertychange",ev),zc=Uc=null)}function ev(i){if(i.propertyName==="value"&&nd(zc)){var a=[];Q_(a,zc,i,vr(i)),ks(uR,a)}}function hR(i,a,l){i==="focusin"?(Z_(),Uc=a,zc=l,Uc.attachEvent("onpropertychange",ev)):i==="focusout"&&Z_()}function dR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nd(zc)}function fR(i,a){if(i==="click")return nd(a)}function mR(i,a){if(i==="input"||i==="change")return nd(a)}function gR(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ir=typeof Object.is=="function"?Object.is:gR;function Fc(i,a){if(ir(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Fe.call(a,g)||!ir(i[g],a[g]))return!1}return!0}function tv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function nv(i,a){var l=tv(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=a&&u>=a)return{node:l,offset:a-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=tv(l)}}function rv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?rv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function iv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=fi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=fi(i.document)}return a}function dg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var pR=br&&"documentMode"in document&&11>=document.documentMode,sl=null,fg=null,Bc=null,mg=!1;function sv(i,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mg||sl==null||sl!==fi(u)||(u=sl,"selectionStart"in u&&dg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bc&&Fc(Bc,u)||(Bc=u,u=Hd(fg,"onSelect"),0<u.length&&(a=new pi("onSelect","select",null,a,l),i.push({event:a,listeners:u}),a.target=sl)))}function Ba(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var al={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},gg={},av={};br&&(av=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function qa(i){if(gg[i])return gg[i];if(!al[i])return i;var a=al[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in av)return gg[i]=a[l];return i}var ov=qa("animationend"),lv=qa("animationiteration"),cv=qa("animationstart"),yR=qa("transitionrun"),_R=qa("transitionstart"),vR=qa("transitioncancel"),uv=qa("transitionend"),hv=new Map,pg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pg.push("scrollEnd");function Gr(i,a){hv.set(i,a),hi(a,[i])}var rd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},xr=[],ol=0,yg=0;function id(){for(var i=ol,a=yg=ol=0;a<i;){var l=xr[a];xr[a++]=null;var u=xr[a];xr[a++]=null;var g=xr[a];xr[a++]=null;var _=xr[a];if(xr[a++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&dv(l,g,_)}}function sd(i,a,l,u){xr[ol++]=i,xr[ol++]=a,xr[ol++]=l,xr[ol++]=u,yg|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function _g(i,a,l,u){return sd(i,a,l,u),ad(i)}function Ha(i,a){return sd(i,null,null,a),ad(i)}function dv(i,a,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var g=!1,_=i.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&a!==null&&(g=31-Ct(l),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[a]:u.push(a),a.lane=l|536870912),_):null}function ad(i){if(50<uu)throw uu=0,Ip=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ll={};function bR(i,a,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,a,l,u){return new bR(i,a,l,u)}function vg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yi(i,a){var l=i.alternate;return l===null?(l=sr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function fv(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function od(i,a,l,u,g,_){var S=0;if(u=i,typeof i=="function")vg(i)&&(S=1);else if(typeof i=="string")S=AN(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case E:return i=sr(31,l,a,g),i.elementType=E,i.lanes=_,i;case P:return $a(l.children,g,_,a);case V:S=8,g|=24;break;case L:return i=sr(12,l,a,g|2),i.elementType=L,i.lanes=_,i;case W:return i=sr(13,l,a,g),i.elementType=W,i.lanes=_,i;case F:return i=sr(19,l,a,g),i.elementType=F,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:S=10;break e;case q:S=9;break e;case H:S=11;break e;case R:S=14;break e;case T:S=16,u=null;break e}S=29,l=Error(r(130,i===null?"null":typeof i,"")),u=null}return a=sr(S,l,a,g),a.elementType=i,a.type=u,a.lanes=_,a}function $a(i,a,l,u){return i=sr(7,i,u,a),i.lanes=l,i}function bg(i,a,l){return i=sr(6,i,null,a),i.lanes=l,i}function mv(i){var a=sr(18,null,null,0);return a.stateNode=i,a}function wg(i,a,l){return a=sr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var gv=new WeakMap;function Er(i,a){if(typeof i=="object"&&i!==null){var l=gv.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Qe(a)},gv.set(i,a),a)}return{value:i,source:a,stack:Qe(a)}}var cl=[],ul=0,ld=null,qc=0,Tr=[],Ar=0,Ps=null,bi=1,wi="";function Qi(i,a){cl[ul++]=qc,cl[ul++]=ld,ld=i,qc=a}function pv(i,a,l){Tr[Ar++]=bi,Tr[Ar++]=wi,Tr[Ar++]=Ps,Ps=i;var u=bi;i=wi;var g=32-Ct(u)-1;u&=~(1<<g),l+=1;var _=32-Ct(a)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,bi=1<<32-Ct(a)+g|l<<g|u,wi=_+i}else bi=1<<_|l<<g|u,wi=i}function xg(i){i.return!==null&&(Qi(i,1),pv(i,1,0))}function Eg(i){for(;i===ld;)ld=cl[--ul],cl[ul]=null,qc=cl[--ul],cl[ul]=null;for(;i===Ps;)Ps=Tr[--Ar],Tr[Ar]=null,wi=Tr[--Ar],Tr[Ar]=null,bi=Tr[--Ar],Tr[Ar]=null}function yv(i,a){Tr[Ar++]=bi,Tr[Ar++]=wi,Tr[Ar++]=Ps,bi=a.id,wi=a.overflow,Ps=i}var En=null,kt=null,st=!1,Vs=null,Sr=!1,Tg=Error(r(519));function js(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hc(Er(a,i)),Tg}function _v(i){var a=i.stateNode,l=i.type,u=i.memoizedProps;switch(a[Wt]=i,a[mn]=u,l){case"dialog":Je("cancel",a),Je("close",a);break;case"iframe":case"object":case"embed":Je("load",a);break;case"video":case"audio":for(l=0;l<du.length;l++)Je(du[l],a);break;case"source":Je("error",a);break;case"img":case"image":case"link":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"input":Je("invalid",a),Fh(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",a);break;case"textarea":Je("invalid",a),Rs(a,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||P1(a.textContent,l)?(u.popover!=null&&(Je("beforetoggle",a),Je("toggle",a)),u.onScroll!=null&&Je("scroll",a),u.onScrollEnd!=null&&Je("scrollend",a),u.onClick!=null&&(a.onclick=Fr),a=!0):a=!1,a||js(i,!0)}function vv(i){for(En=i.return;En;)switch(En.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:En=En.return}}function hl(i){if(i!==En)return!1;if(!st)return vv(i),st=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Bp(i.type,i.memoizedProps)),l=!l),l&&kt&&js(i),vv(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=H1(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=H1(i)}else a===27?(a=kt,Ws(i.type)?(i=Kp,Kp=null,kt=i):kt=a):kt=En?Rr(i.stateNode.nextSibling):null;return!0}function Ga(){kt=En=null,st=!1}function Ag(){var i=Vs;return i!==null&&(Jn===null?Jn=i:Jn.push.apply(Jn,i),Vs=null),i}function Hc(i){Vs===null?Vs=[i]:Vs.push(i)}var Sg=B(null),Ka=null,Xi=null;function Ls(i,a,l){le(Sg,a._currentValue),a._currentValue=l}function Wi(i){i._currentValue=Sg.current,Y(Sg)}function Ig(i,a,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),i===l)break;i=i.return}}function Rg(i,a,l,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;e:for(;_!==null;){var j=_;_=g;for(var K=0;K<a.length;K++)if(j.context===a[K]){_.lanes|=l,j=_.alternate,j!==null&&(j.lanes|=l),Ig(_.return,l,i),u||(S=null);break e}_=j.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(r(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),Ig(S,l,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function dl(i,a,l,u){i=null;for(var g=a,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var j=g.type;ir(g.pendingProps.value,S.value)||(i!==null?i.push(j):i=[j])}}else if(g===Ae.current){if(S=g.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(yu):i=[yu])}g=g.return}i!==null&&Rg(a,i,l,u),a.flags|=262144}function cd(i){for(i=i.firstContext;i!==null;){if(!ir(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ya(i){Ka=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tn(i){return bv(Ka,i)}function ud(i,a){return Ka===null&&Ya(i),bv(i,a)}function bv(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(r(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var wR=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},xR=n.unstable_scheduleCallback,ER=n.unstable_NormalPriority,en={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ng(){return{controller:new wR,data:new Map,refCount:0}}function $c(i){i.refCount--,i.refCount===0&&xR(ER,function(){i.controller.abort()})}var Gc=null,Cg=0,fl=0,ml=null;function TR(i,a){if(Gc===null){var l=Gc=[];Cg=0,fl=Op(),ml={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Cg++,a.then(wv,wv),a}function wv(){if(--Cg===0&&Gc!==null){ml!==null&&(ml.status="fulfilled");var i=Gc;Gc=null,fl=0,ml=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function AR(i,a){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){u.status="fulfilled",u.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var xv=k.S;k.S=function(i,a){s1=$e(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&TR(i,a),xv!==null&&xv(i,a)};var Qa=B(null);function kg(){var i=Qa.current;return i!==null?i:St.pooledCache}function hd(i,a){a===null?le(Qa,Qa.current):le(Qa,a.pool)}function Ev(){var i=kg();return i===null?null:{parent:en._currentValue,pool:i}}var gl=Error(r(460)),Dg=Error(r(474)),dd=Error(r(542)),fd={then:function(){}};function Tv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Av(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Fr,Fr),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Iv(i),i;default:if(typeof a.status=="string")a.then(Fr,Fr);else{if(i=St,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(u){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=u}},function(u){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Iv(i),i}throw Wa=a,gl}}function Xa(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Wa=l,gl):l}}var Wa=null;function Sv(){if(Wa===null)throw Error(r(459));var i=Wa;return Wa=null,i}function Iv(i){if(i===gl||i===dd)throw Error(r(483))}var pl=null,Kc=0;function md(i){var a=Kc;return Kc+=1,pl===null&&(pl=[]),Av(pl,i,a)}function Yc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function gd(i,a){throw a.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Rv(i){function a(ee,X){if(i){var ae=ee.deletions;ae===null?(ee.deletions=[X],ee.flags|=16):ae.push(X)}}function l(ee,X){if(!i)return null;for(;X!==null;)a(ee,X),X=X.sibling;return null}function u(ee){for(var X=new Map;ee!==null;)ee.key!==null?X.set(ee.key,ee):X.set(ee.index,ee),ee=ee.sibling;return X}function g(ee,X){return ee=Yi(ee,X),ee.index=0,ee.sibling=null,ee}function _(ee,X,ae){return ee.index=ae,i?(ae=ee.alternate,ae!==null?(ae=ae.index,ae<X?(ee.flags|=67108866,X):ae):(ee.flags|=67108866,X)):(ee.flags|=1048576,X)}function S(ee){return i&&ee.alternate===null&&(ee.flags|=67108866),ee}function j(ee,X,ae,me){return X===null||X.tag!==6?(X=bg(ae,ee.mode,me),X.return=ee,X):(X=g(X,ae),X.return=ee,X)}function K(ee,X,ae,me){var Ne=ae.type;return Ne===P?fe(ee,X,ae.props.children,me,ae.key):X!==null&&(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&Xa(Ne)===X.type)?(X=g(X,ae.props),Yc(X,ae),X.return=ee,X):(X=od(ae.type,ae.key,ae.props,null,ee.mode,me),Yc(X,ae),X.return=ee,X)}function oe(ee,X,ae,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==ae.containerInfo||X.stateNode.implementation!==ae.implementation?(X=wg(ae,ee.mode,me),X.return=ee,X):(X=g(X,ae.children||[]),X.return=ee,X)}function fe(ee,X,ae,me,Ne){return X===null||X.tag!==7?(X=$a(ae,ee.mode,me,Ne),X.return=ee,X):(X=g(X,ae),X.return=ee,X)}function ge(ee,X,ae){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=bg(""+X,ee.mode,ae),X.return=ee,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return ae=od(X.type,X.key,X.props,null,ee.mode,ae),Yc(ae,X),ae.return=ee,ae;case A:return X=wg(X,ee.mode,ae),X.return=ee,X;case T:return X=Xa(X),ge(ee,X,ae)}if(Z(X)||O(X))return X=$a(X,ee.mode,ae,null),X.return=ee,X;if(typeof X.then=="function")return ge(ee,md(X),ae);if(X.$$typeof===z)return ge(ee,ud(ee,X),ae);gd(ee,X)}return null}function ce(ee,X,ae,me){var Ne=X!==null?X.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ne!==null?null:j(ee,X,""+ae,me);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return ae.key===Ne?K(ee,X,ae,me):null;case A:return ae.key===Ne?oe(ee,X,ae,me):null;case T:return ae=Xa(ae),ce(ee,X,ae,me)}if(Z(ae)||O(ae))return Ne!==null?null:fe(ee,X,ae,me,null);if(typeof ae.then=="function")return ce(ee,X,md(ae),me);if(ae.$$typeof===z)return ce(ee,X,ud(ee,ae),me);gd(ee,ae)}return null}function he(ee,X,ae,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(ae)||null,j(X,ee,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case w:return ee=ee.get(me.key===null?ae:me.key)||null,K(X,ee,me,Ne);case A:return ee=ee.get(me.key===null?ae:me.key)||null,oe(X,ee,me,Ne);case T:return me=Xa(me),he(ee,X,ae,me,Ne)}if(Z(me)||O(me))return ee=ee.get(ae)||null,fe(X,ee,me,Ne,null);if(typeof me.then=="function")return he(ee,X,ae,md(me),Ne);if(me.$$typeof===z)return he(ee,X,ae,ud(X,me),Ne);gd(X,me)}return null}function xe(ee,X,ae,me){for(var Ne=null,lt=null,Se=X,Ge=X=0,tt=null;Se!==null&&Ge<ae.length;Ge++){Se.index>Ge?(tt=Se,Se=null):tt=Se.sibling;var ct=ce(ee,Se,ae[Ge],me);if(ct===null){Se===null&&(Se=tt);break}i&&Se&&ct.alternate===null&&a(ee,Se),X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct,Se=tt}if(Ge===ae.length)return l(ee,Se),st&&Qi(ee,Ge),Ne;if(Se===null){for(;Ge<ae.length;Ge++)Se=ge(ee,ae[Ge],me),Se!==null&&(X=_(Se,X,Ge),lt===null?Ne=Se:lt.sibling=Se,lt=Se);return st&&Qi(ee,Ge),Ne}for(Se=u(Se);Ge<ae.length;Ge++)tt=he(Se,ee,Ge,ae[Ge],me),tt!==null&&(i&&tt.alternate!==null&&Se.delete(tt.key===null?Ge:tt.key),X=_(tt,X,Ge),lt===null?Ne=tt:lt.sibling=tt,lt=tt);return i&&Se.forEach(function(na){return a(ee,na)}),st&&Qi(ee,Ge),Ne}function ke(ee,X,ae,me){if(ae==null)throw Error(r(151));for(var Ne=null,lt=null,Se=X,Ge=X=0,tt=null,ct=ae.next();Se!==null&&!ct.done;Ge++,ct=ae.next()){Se.index>Ge?(tt=Se,Se=null):tt=Se.sibling;var na=ce(ee,Se,ct.value,me);if(na===null){Se===null&&(Se=tt);break}i&&Se&&na.alternate===null&&a(ee,Se),X=_(na,X,Ge),lt===null?Ne=na:lt.sibling=na,lt=na,Se=tt}if(ct.done)return l(ee,Se),st&&Qi(ee,Ge),Ne;if(Se===null){for(;!ct.done;Ge++,ct=ae.next())ct=ge(ee,ct.value,me),ct!==null&&(X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return st&&Qi(ee,Ge),Ne}for(Se=u(Se);!ct.done;Ge++,ct=ae.next())ct=he(Se,ee,Ge,ct.value,me),ct!==null&&(i&&ct.alternate!==null&&Se.delete(ct.key===null?Ge:ct.key),X=_(ct,X,Ge),lt===null?Ne=ct:lt.sibling=ct,lt=ct);return i&&Se.forEach(function(VN){return a(ee,VN)}),st&&Qi(ee,Ge),Ne}function At(ee,X,ae,me){if(typeof ae=="object"&&ae!==null&&ae.type===P&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:e:{for(var Ne=ae.key;X!==null;){if(X.key===Ne){if(Ne=ae.type,Ne===P){if(X.tag===7){l(ee,X.sibling),me=g(X,ae.props.children),me.return=ee,ee=me;break e}}else if(X.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===T&&Xa(Ne)===X.type){l(ee,X.sibling),me=g(X,ae.props),Yc(me,ae),me.return=ee,ee=me;break e}l(ee,X);break}else a(ee,X);X=X.sibling}ae.type===P?(me=$a(ae.props.children,ee.mode,me,ae.key),me.return=ee,ee=me):(me=od(ae.type,ae.key,ae.props,null,ee.mode,me),Yc(me,ae),me.return=ee,ee=me)}return S(ee);case A:e:{for(Ne=ae.key;X!==null;){if(X.key===Ne)if(X.tag===4&&X.stateNode.containerInfo===ae.containerInfo&&X.stateNode.implementation===ae.implementation){l(ee,X.sibling),me=g(X,ae.children||[]),me.return=ee,ee=me;break e}else{l(ee,X);break}else a(ee,X);X=X.sibling}me=wg(ae,ee.mode,me),me.return=ee,ee=me}return S(ee);case T:return ae=Xa(ae),At(ee,X,ae,me)}if(Z(ae))return xe(ee,X,ae,me);if(O(ae)){if(Ne=O(ae),typeof Ne!="function")throw Error(r(150));return ae=Ne.call(ae),ke(ee,X,ae,me)}if(typeof ae.then=="function")return At(ee,X,md(ae),me);if(ae.$$typeof===z)return At(ee,X,ud(ee,ae),me);gd(ee,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,X!==null&&X.tag===6?(l(ee,X.sibling),me=g(X,ae),me.return=ee,ee=me):(l(ee,X),me=bg(ae,ee.mode,me),me.return=ee,ee=me),S(ee)):l(ee,X)}return function(ee,X,ae,me){try{Kc=0;var Ne=At(ee,X,ae,me);return pl=null,Ne}catch(Se){if(Se===gl||Se===dd)throw Se;var lt=sr(29,Se,null,ee.mode);return lt.lanes=me,lt.return=ee,lt}finally{}}}var Ja=Rv(!0),Nv=Rv(!1),Us=!1;function Og(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function zs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Fs(i,a,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ht&2)!==0){var g=u.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),u.pending=a,a=ad(i),dv(i,null,l),a}return sd(i,u,a,l),ad(i)}function Qc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,xc(i,l)}}function Pg(i,a){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?g=_=a:_=_.next=a}else g=_=a;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Vg=!1;function Xc(){if(Vg){var i=ml;if(i!==null)throw i}}function Wc(i,a,l,u){Vg=!1;var g=i.updateQueue;Us=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var K=j,oe=K.next;K.next=null,S===null?_=oe:S.next=oe,S=K;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,j=fe.lastBaseUpdate,j!==S&&(j===null?fe.firstBaseUpdate=oe:j.next=oe,fe.lastBaseUpdate=K))}if(_!==null){var ge=g.baseState;S=0,fe=oe=K=null,j=_;do{var ce=j.lane&-536870913,he=ce!==j.lane;if(he?(et&ce)===ce:(u&ce)===ce){ce!==0&&ce===fl&&(Vg=!0),fe!==null&&(fe=fe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var xe=i,ke=j;ce=a;var At=l;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){ge=xe.call(At,ge,ce);break e}ge=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,ce=typeof xe=="function"?xe.call(At,ge,ce):xe,ce==null)break e;ge=y({},ge,ce);break e;case 2:Us=!0}}ce=j.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=g.callbacks,he===null?g.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},fe===null?(oe=fe=he,K=ge):fe=fe.next=he,S|=ce;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;he=j,j=he.next,he.next=null,g.lastBaseUpdate=he,g.shared.pending=null}}while(!0);fe===null&&(K=ge),g.baseState=K,g.firstBaseUpdate=oe,g.lastBaseUpdate=fe,_===null&&(g.shared.lanes=0),Gs|=S,i.lanes=S,i.memoizedState=ge}}function Cv(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function kv(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Cv(l[i],a)}var yl=B(null),pd=B(0);function Dv(i,a){i=as,le(pd,i),le(yl,a),as=i|a.baseLanes}function jg(){le(pd,as),le(yl,yl.current)}function Lg(){as=pd.current,Y(yl),Y(pd)}var ar=B(null),Ir=null;function Bs(i){var a=i.alternate;le(Gt,Gt.current&1),le(ar,i),Ir===null&&(a===null||yl.current!==null||a.memoizedState!==null)&&(Ir=i)}function Ug(i){le(Gt,Gt.current),le(ar,i),Ir===null&&(Ir=i)}function Ov(i){i.tag===22?(le(Gt,Gt.current),le(ar,i),Ir===null&&(Ir=i)):qs()}function qs(){le(Gt,Gt.current),le(ar,ar.current)}function or(i){Y(ar),Ir===i&&(Ir=null),Y(Gt)}var Gt=B(0);function yd(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||$p(l)||Gp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ji=0,qe=null,Et=null,tn=null,_d=!1,_l=!1,Za=!1,vd=0,Jc=0,vl=null,SR=0;function Ut(){throw Error(r(321))}function zg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ir(i[l],a[l]))return!1;return!0}function Fg(i,a,l,u,g,_){return Ji=_,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=i===null||i.memoizedState===null?pb:np,Za=!1,_=l(u,g),Za=!1,_l&&(_=Pv(a,l,u,g)),Mv(i),_}function Mv(i){k.H=tu;var a=Et!==null&&Et.next!==null;if(Ji=0,tn=Et=qe=null,_d=!1,Jc=0,vl=null,a)throw Error(r(300));i===null||nn||(i=i.dependencies,i!==null&&cd(i)&&(nn=!0))}function Pv(i,a,l,u){qe=i;var g=0;do{if(_l&&(vl=null),Jc=0,_l=!1,25<=g)throw Error(r(301));if(g+=1,tn=Et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}k.H=yb,_=a(l,u)}while(_l);return _}function IR(){var i=k.H,a=i.useState()[0];return a=typeof a.then=="function"?Zc(a):a,i=i.useState()[0],(Et!==null?Et.memoizedState:null)!==i&&(qe.flags|=1024),a}function Bg(){var i=vd!==0;return vd=0,i}function qg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Hg(i){if(_d){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}_d=!1}Ji=0,tn=Et=qe=null,_l=!1,Jc=vd=0,vl=null}function Fn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?qe.memoizedState=tn=i:tn=tn.next=i,tn}function Kt(){if(Et===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=Et.next;var a=tn===null?qe.memoizedState:tn.next;if(a!==null)tn=a,Et=i;else{if(i===null)throw qe.alternate===null?Error(r(467)):Error(r(310));Et=i,i={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},tn===null?qe.memoizedState=tn=i:tn=tn.next=i}return tn}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(i){var a=Jc;return Jc+=1,vl===null&&(vl=[]),i=Av(vl,i,a),a=qe,(tn===null?a.memoizedState:tn.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?pb:np),i}function wd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Zc(i);if(i.$$typeof===z)return Tn(i)}throw Error(r(438,String(i)))}function $g(i){var a=null,l=qe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bd(),qe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),u=0;u<i;u++)l[u]=N;return a.index++,l}function Zi(i,a){return typeof a=="function"?a(i):a}function xd(i){var a=Kt();return Gg(a,Et,i)}function Gg(i,a,l){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}a.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{a=g.next;var j=S=null,K=null,oe=a,fe=!1;do{var ge=oe.lane&-536870913;if(ge!==oe.lane?(et&ge)===ge:(Ji&ge)===ge){var ce=oe.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ge===fl&&(fe=!0);else if((Ji&ce)===ce){oe=oe.next,ce===fl&&(fe=!0);continue}else ge={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(j=K=ge,S=_):K=K.next=ge,qe.lanes|=ce,Gs|=ce;ge=oe.action,Za&&l(_,ge),_=oe.hasEagerState?oe.eagerState:l(_,ge)}else ce={lane:ge,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},K===null?(j=K=ce,S=_):K=K.next=ce,qe.lanes|=ge,Gs|=ge;oe=oe.next}while(oe!==null&&oe!==a);if(K===null?S=_:K.next=j,!ir(_,i.memoizedState)&&(nn=!0,fe&&(l=ml,l!==null)))throw l;i.memoizedState=_,i.baseState=S,i.baseQueue=K,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Kg(i){var a=Kt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=l.dispatch,g=l.pending,_=a.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);ir(_,a.memoizedState)||(nn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,u]}function Vv(i,a,l){var u=qe,g=Kt(),_=st;if(_){if(l===void 0)throw Error(r(407));l=l()}else l=a();var S=!ir((Et||g).memoizedState,l);if(S&&(g.memoizedState=l,nn=!0),g=g.queue,Xg(Uv.bind(null,u,g,i),[i]),g.getSnapshot!==a||S||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,bl(9,{destroy:void 0},Lv.bind(null,u,g,l,a),null),St===null)throw Error(r(349));_||(Ji&127)!==0||jv(u,a,l)}return l}function jv(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=qe.updateQueue,a===null?(a=bd(),qe.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Lv(i,a,l,u){a.value=l,a.getSnapshot=u,zv(a)&&Fv(i)}function Uv(i,a,l){return l(function(){zv(a)&&Fv(i)})}function zv(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ir(i,l)}catch{return!0}}function Fv(i){var a=Ha(i,2);a!==null&&Zn(a,i,2)}function Yg(i){var a=Fn();if(typeof i=="function"){var l=i;if(i=l(),Za){Xt(!0);try{l()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:i},a}function Bv(i,a,l,u){return i.baseState=l,Gg(i,Et,typeof u=="function"?u:Zi)}function RR(i,a,l,u,g){if(Ad(i))throw Error(r(485));if(i=a.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};k.T!==null?l(!0):_.isTransition=!1,u(_),l=a.pending,l===null?(_.next=a.pending=_,qv(a,_)):(_.next=l.next,a.pending=l.next=_)}}function qv(i,a){var l=a.action,u=a.payload,g=i.state;if(a.isTransition){var _=k.T,S={};k.T=S;try{var j=l(g,u),K=k.S;K!==null&&K(S,j),Hv(i,a,j)}catch(oe){Qg(i,a,oe)}finally{_!==null&&S.types!==null&&(_.types=S.types),k.T=_}}else try{_=l(g,u),Hv(i,a,_)}catch(oe){Qg(i,a,oe)}}function Hv(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){$v(i,a,u)},function(u){return Qg(i,a,u)}):$v(i,a,l)}function $v(i,a,l){a.status="fulfilled",a.value=l,Gv(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,qv(i,l)))}function Qg(i,a,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,Gv(a),a=a.next;while(a!==u)}i.action=null}function Gv(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Kv(i,a){return a}function Yv(i,a){if(st){var l=St.formState;if(l!==null){e:{var u=qe;if(st){if(kt){t:{for(var g=kt,_=Sr;g.nodeType!==8;){if(!_){g=null;break t}if(g=Rr(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){kt=Rr(g.nextSibling),u=g.data==="F!";break e}}js(u)}u=!1}u&&(a=l[0])}}return l=Fn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kv,lastRenderedState:a},l.queue=u,l=fb.bind(null,qe,u),u.dispatch=l,u=Yg(!1),_=tp.bind(null,qe,!1,u.queue),u=Fn(),g={state:a,dispatch:null,action:i,pending:null},u.queue=g,l=RR.bind(null,qe,g,_,l),g.dispatch=l,u.memoizedState=i,[a,l,!1]}function Qv(i){var a=Kt();return Xv(a,Et,i)}function Xv(i,a,l){if(a=Gg(i,a,Kv)[0],i=xd(Zi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Zc(a)}catch(S){throw S===gl?dd:S}else u=a;a=Kt();var g=a.queue,_=g.dispatch;return l!==a.memoizedState&&(qe.flags|=2048,bl(9,{destroy:void 0},NR.bind(null,g,l),null)),[u,_,i]}function NR(i,a){i.action=a}function Wv(i){var a=Kt(),l=Et;if(l!==null)return Xv(a,l,i);Kt(),a=a.memoizedState,l=Kt();var u=l.queue.dispatch;return l.memoizedState=i,[a,u,!1]}function bl(i,a,l,u){return i={tag:i,create:l,deps:u,inst:a,next:null},a=qe.updateQueue,a===null&&(a=bd(),qe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,a.lastEffect=i),i}function Jv(){return Kt().memoizedState}function Ed(i,a,l,u){var g=Fn();qe.flags|=i,g.memoizedState=bl(1|a,{destroy:void 0},l,u===void 0?null:u)}function Td(i,a,l,u){var g=Kt();u=u===void 0?null:u;var _=g.memoizedState.inst;Et!==null&&u!==null&&zg(u,Et.memoizedState.deps)?g.memoizedState=bl(a,_,l,u):(qe.flags|=i,g.memoizedState=bl(1|a,_,l,u))}function Zv(i,a){Ed(8390656,8,i,a)}function Xg(i,a){Td(2048,8,i,a)}function CR(i){qe.flags|=4;var a=qe.updateQueue;if(a===null)a=bd(),qe.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function eb(i){var a=Kt().memoizedState;return CR({ref:a,nextImpl:i}),function(){if((ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function tb(i,a){return Td(4,2,i,a)}function nb(i,a){return Td(4,4,i,a)}function rb(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ib(i,a,l){l=l!=null?l.concat([i]):null,Td(4,4,rb.bind(null,a,i),l)}function Wg(){}function sb(i,a){var l=Kt();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&zg(a,u[1])?u[0]:(l.memoizedState=[i,a],i)}function ab(i,a){var l=Kt();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&zg(a,u[1]))return u[0];if(u=i(),Za){Xt(!0);try{i()}finally{Xt(!1)}}return l.memoizedState=[u,a],u}function Jg(i,a,l){return l===void 0||(Ji&1073741824)!==0&&(et&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=o1(),qe.lanes|=i,Gs|=i,l)}function ob(i,a,l,u){return ir(l,a)?l:yl.current!==null?(i=Jg(i,l,u),ir(i,a)||(nn=!0),i):(Ji&42)===0||(Ji&1073741824)!==0&&(et&261930)===0?(nn=!0,i.memoizedState=l):(i=o1(),qe.lanes|=i,Gs|=i,a)}function lb(i,a,l,u,g){var _=M.p;M.p=_!==0&&8>_?_:8;var S=k.T,j={};k.T=j,tp(i,!1,a,l);try{var K=g(),oe=k.S;if(oe!==null&&oe(j,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=AR(K,u);eu(i,a,fe,ur(i))}else eu(i,a,u,ur(i))}catch(ge){eu(i,a,{then:function(){},status:"rejected",reason:ge},ur())}finally{M.p=_,S!==null&&j.types!==null&&(S.types=j.types),k.T=S}}function kR(){}function Zg(i,a,l,u){if(i.tag!==5)throw Error(r(476));var g=cb(i).queue;lb(i,g,a,J,l===null?kR:function(){return ub(i),l(u)})}function cb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:J},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function ub(i){var a=cb(i);a.next===null&&(a=i.alternate.memoizedState),eu(i,a.next.queue,{},ur())}function ep(){return Tn(yu)}function hb(){return Kt().memoizedState}function db(){return Kt().memoizedState}function DR(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=ur();i=zs(l);var u=Fs(a,i,l);u!==null&&(Zn(u,a,l),Qc(u,a,l)),a={cache:Ng()},i.payload=a;return}a=a.return}}function OR(i,a,l){var u=ur();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ad(i)?mb(a,l):(l=_g(i,a,l,u),l!==null&&(Zn(l,i,u),gb(l,a,u)))}function fb(i,a,l){var u=ur();eu(i,a,l,u)}function eu(i,a,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ad(i))mb(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var S=a.lastRenderedState,j=_(S,l);if(g.hasEagerState=!0,g.eagerState=j,ir(j,S))return sd(i,a,g,0),St===null&&id(),!1}catch{}finally{}if(l=_g(i,a,g,u),l!==null)return Zn(l,i,u),gb(l,a,u),!0}return!1}function tp(i,a,l,u){if(u={lane:2,revertLane:Op(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ad(i)){if(a)throw Error(r(479))}else a=_g(i,l,u,2),a!==null&&Zn(a,i,2)}function Ad(i){var a=i.alternate;return i===qe||a!==null&&a===qe}function mb(i,a){_l=_d=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function gb(i,a,l){if((l&4194048)!==0){var u=a.lanes;u&=i.pendingLanes,l|=u,a.lanes=l,xc(i,l)}}var tu={readContext:Tn,use:wd,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};tu.useEffectEvent=Ut;var pb={readContext:Tn,use:wd,useCallback:function(i,a){return Fn().memoizedState=[i,a===void 0?null:a],i},useContext:Tn,useEffect:Zv,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Ed(4194308,4,rb.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Ed(4194308,4,i,a)},useInsertionEffect:function(i,a){Ed(4,2,i,a)},useMemo:function(i,a){var l=Fn();a=a===void 0?null:a;var u=i();if(Za){Xt(!0);try{i()}finally{Xt(!1)}}return l.memoizedState=[u,a],u},useReducer:function(i,a,l){var u=Fn();if(l!==void 0){var g=l(a);if(Za){Xt(!0);try{l(a)}finally{Xt(!1)}}}else g=a;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=OR.bind(null,qe,i),[u.memoizedState,i]},useRef:function(i){var a=Fn();return i={current:i},a.memoizedState=i},useState:function(i){i=Yg(i);var a=i.queue,l=fb.bind(null,qe,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Wg,useDeferredValue:function(i,a){var l=Fn();return Jg(l,i,a)},useTransition:function(){var i=Yg(!1);return i=lb.bind(null,qe,i.queue,!0,!1),Fn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var u=qe,g=Fn();if(st){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),St===null)throw Error(r(349));(et&127)!==0||jv(u,a,l)}g.memoizedState=l;var _={value:l,getSnapshot:a};return g.queue=_,Zv(Uv.bind(null,u,_,i),[i]),u.flags|=2048,bl(9,{destroy:void 0},Lv.bind(null,u,_,l,a),null),l},useId:function(){var i=Fn(),a=St.identifierPrefix;if(st){var l=wi,u=bi;l=(u&~(1<<32-Ct(u)-1)).toString(32)+l,a="_"+a+"R_"+l,l=vd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=SR++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:ep,useFormState:Yv,useActionState:Yv,useOptimistic:function(i){var a=Fn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=tp.bind(null,qe,!0,l),l.dispatch=a,[i,a]},useMemoCache:$g,useCacheRefresh:function(){return Fn().memoizedState=DR.bind(null,qe)},useEffectEvent:function(i){var a=Fn(),l={impl:i};return a.memoizedState=l,function(){if((ht&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},np={readContext:Tn,use:wd,useCallback:sb,useContext:Tn,useEffect:Xg,useImperativeHandle:ib,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:xd,useRef:Jv,useState:function(){return xd(Zi)},useDebugValue:Wg,useDeferredValue:function(i,a){var l=Kt();return ob(l,Et.memoizedState,i,a)},useTransition:function(){var i=xd(Zi)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:Zc(i),a]},useSyncExternalStore:Vv,useId:hb,useHostTransitionStatus:ep,useFormState:Qv,useActionState:Qv,useOptimistic:function(i,a){var l=Kt();return Bv(l,Et,i,a)},useMemoCache:$g,useCacheRefresh:db};np.useEffectEvent=eb;var yb={readContext:Tn,use:wd,useCallback:sb,useContext:Tn,useEffect:Xg,useImperativeHandle:ib,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:Kg,useRef:Jv,useState:function(){return Kg(Zi)},useDebugValue:Wg,useDeferredValue:function(i,a){var l=Kt();return Et===null?Jg(l,i,a):ob(l,Et.memoizedState,i,a)},useTransition:function(){var i=Kg(Zi)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:Zc(i),a]},useSyncExternalStore:Vv,useId:hb,useHostTransitionStatus:ep,useFormState:Wv,useActionState:Wv,useOptimistic:function(i,a){var l=Kt();return Et!==null?Bv(l,Et,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:$g,useCacheRefresh:db};yb.useEffectEvent=eb;function rp(i,a,l,u){a=i.memoizedState,l=l(u,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var ip={enqueueSetState:function(i,a,l){i=i._reactInternals;var u=ur(),g=zs(u);g.payload=a,l!=null&&(g.callback=l),a=Fs(i,g,u),a!==null&&(Zn(a,i,u),Qc(a,i,u))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var u=ur(),g=zs(u);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Fs(i,g,u),a!==null&&(Zn(a,i,u),Qc(a,i,u))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=ur(),u=zs(l);u.tag=2,a!=null&&(u.callback=a),a=Fs(i,u,l),a!==null&&(Zn(a,i,l),Qc(a,i,l))}};function _b(i,a,l,u,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):a.prototype&&a.prototype.isPureReactComponent?!Fc(l,u)||!Fc(g,_):!0}function vb(i,a,l,u){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==i&&ip.enqueueReplaceState(a,a.state,null)}function eo(i,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function bb(i){rd(i)}function wb(i){console.error(i)}function xb(i){rd(i)}function Sd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Eb(i,a,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function sp(i,a,l){return l=zs(l),l.tag=3,l.payload={element:null},l.callback=function(){Sd(i,a)},l}function Tb(i){return i=zs(i),i.tag=3,i}function Ab(i,a,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Eb(a,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Eb(a,l,u),typeof g!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function MR(i,a,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&dl(a,l,g,!0),l=ar.current,l!==null){switch(l.tag){case 31:case 13:return Ir===null?Ld():l.alternate===null&&zt===0&&(zt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===fd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),Cp(i,u,g)),!1;case 22:return l.flags|=65536,u===fd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),Cp(i,u,g)),!1}throw Error(r(435,l.tag))}return Cp(i,u,g),Ld(),!1}if(st)return a=ar.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,u!==Tg&&(i=Error(r(422),{cause:u}),Hc(Er(i,l)))):(u!==Tg&&(a=Error(r(423),{cause:u}),Hc(Er(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Er(u,l),g=sp(i.stateNode,u,g),Pg(i,g),zt!==4&&(zt=2)),!1;var _=Error(r(520),{cause:u});if(_=Er(_,l),cu===null?cu=[_]:cu.push(_),zt!==4&&(zt=2),a===null)return!0;u=Er(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=sp(l.stateNode,u,i),Pg(l,i),!1;case 1:if(a=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ks===null||!Ks.has(_))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Tb(g),Ab(g,i,l,u),Pg(l,g),!1}l=l.return}while(l!==null);return!1}var ap=Error(r(461)),nn=!1;function An(i,a,l,u){a.child=i===null?Nv(a,null,l,u):Ja(a,i.child,l,u)}function Sb(i,a,l,u,g){l=l.render;var _=a.ref;if("ref"in u){var S={};for(var j in u)j!=="ref"&&(S[j]=u[j])}else S=u;return Ya(a),u=Fg(i,a,l,S,_,g),j=Bg(),i!==null&&!nn?(qg(i,a,g),es(i,a,g)):(st&&j&&xg(a),a.flags|=1,An(i,a,u,g),a.child)}function Ib(i,a,l,u,g){if(i===null){var _=l.type;return typeof _=="function"&&!vg(_)&&_.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=_,Rb(i,a,_,u,g)):(i=od(l.type,null,u,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!mp(i,g)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:Fc,l(S,u)&&i.ref===a.ref)return es(i,a,g)}return a.flags|=1,i=Yi(_,u),i.ref=a.ref,i.return=a,a.child=i}function Rb(i,a,l,u,g){if(i!==null){var _=i.memoizedProps;if(Fc(_,u)&&i.ref===a.ref)if(nn=!1,a.pendingProps=u=_,mp(i,g))(i.flags&131072)!==0&&(nn=!0);else return a.lanes=i.lanes,es(i,a,g)}return op(i,a,l,u,g)}function Nb(i,a,l,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(u=a.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,a.child=null;return Cb(i,a,_,l,u)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&hd(a,_!==null?_.cachePool:null),_!==null?Dv(a,_):jg(),Ov(a);else return u=a.lanes=536870912,Cb(i,a,_!==null?_.baseLanes|l:l,l,u)}else _!==null?(hd(a,_.cachePool),Dv(a,_),qs(),a.memoizedState=null):(i!==null&&hd(a,null),jg(),qs());return An(i,a,g,l),a.child}function nu(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Cb(i,a,l,u,g){var _=kg();return _=_===null?null:{parent:en._currentValue,pool:_},a.memoizedState={baseLanes:l,cachePool:_},i!==null&&hd(a,null),jg(),Ov(a),i!==null&&dl(i,a,u,!0),a.childLanes=g,null}function Id(i,a){return a=Nd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function kb(i,a,l){return Ja(a,i.child,null,l),i=Id(a,a.pendingProps),i.flags|=2,or(a),a.memoizedState=null,i}function PR(i,a,l){var u=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(st){if(u.mode==="hidden")return i=Id(a,u),a.lanes=536870912,nu(null,i);if(Ug(a),(i=kt)?(i=q1(i,Sr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ps!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=mv(i),l.return=a,a.child=l,En=a,kt=null)):i=null,i===null)throw js(a);return a.lanes=536870912,null}return Id(a,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(Ug(a),g)if(a.flags&256)a.flags&=-257,a=kb(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(nn||dl(i,a,l,!1),g=(l&i.childLanes)!==0,nn||g){if(u=St,u!==null&&(S=Ec(u,l),S!==0&&S!==_.retryLane))throw _.retryLane=S,Ha(i,S),Zn(u,i,S),ap;Ld(),a=kb(i,a,l)}else i=_.treeContext,kt=Rr(S.nextSibling),En=a,st=!0,Vs=null,Sr=!1,i!==null&&yv(a,i),a=Id(a,u),a.flags|=4096;return a}return i=Yi(i.child,{mode:u.mode,children:u.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Rd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function op(i,a,l,u,g){return Ya(a),l=Fg(i,a,l,u,void 0,g),u=Bg(),i!==null&&!nn?(qg(i,a,g),es(i,a,g)):(st&&u&&xg(a),a.flags|=1,An(i,a,l,g),a.child)}function Db(i,a,l,u,g,_){return Ya(a),a.updateQueue=null,l=Pv(a,u,l,g),Mv(i),u=Bg(),i!==null&&!nn?(qg(i,a,_),es(i,a,_)):(st&&u&&xg(a),a.flags|=1,An(i,a,l,_),a.child)}function Ob(i,a,l,u,g){if(Ya(a),a.stateNode===null){var _=ll,S=l.contextType;typeof S=="object"&&S!==null&&(_=Tn(S)),_=new l(u,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ip,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=u,_.state=a.memoizedState,_.refs={},Og(a),S=l.contextType,_.context=typeof S=="object"&&S!==null?Tn(S):ll,_.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(rp(a,l,S,u),_.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&ip.enqueueReplaceState(_,_.state,null),Wc(a,u,_,g),Xc(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(i===null){_=a.stateNode;var j=a.memoizedProps,K=eo(l,j);_.props=K;var oe=_.context,fe=l.contextType;S=ll,typeof fe=="object"&&fe!==null&&(S=Tn(fe));var ge=l.getDerivedStateFromProps;fe=typeof ge=="function"||typeof _.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(j||oe!==S)&&vb(a,_,u,S),Us=!1;var ce=a.memoizedState;_.state=ce,Wc(a,u,_,g),Xc(),oe=a.memoizedState,j||ce!==oe||Us?(typeof ge=="function"&&(rp(a,l,ge,u),oe=a.memoizedState),(K=Us||_b(a,l,K,u,ce,oe,S))?(fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=oe),_.props=u,_.state=oe,_.context=S,u=K):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{_=a.stateNode,Mg(i,a),S=a.memoizedProps,fe=eo(l,S),_.props=fe,ge=a.pendingProps,ce=_.context,oe=l.contextType,K=ll,typeof oe=="object"&&oe!==null&&(K=Tn(oe)),j=l.getDerivedStateFromProps,(oe=typeof j=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ge||ce!==K)&&vb(a,_,u,K),Us=!1,ce=a.memoizedState,_.state=ce,Wc(a,u,_,g),Xc();var he=a.memoizedState;S!==ge||ce!==he||Us||i!==null&&i.dependencies!==null&&cd(i.dependencies)?(typeof j=="function"&&(rp(a,l,j,u),he=a.memoizedState),(fe=Us||_b(a,l,fe,u,ce,he,K)||i!==null&&i.dependencies!==null&&cd(i.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,he,K),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,he,K)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=he),_.props=u,_.state=he,_.context=K,u=fe):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&ce===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ce===i.memoizedState||(a.flags|=1024),u=!1)}return _=u,Rd(i,a),u=(a.flags&128)!==0,_||u?(_=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&u?(a.child=Ja(a,i.child,null,g),a.child=Ja(a,null,l,g)):An(i,a,l,g),a.memoizedState=_.state,i=a.child):i=es(i,a,g),i}function Mb(i,a,l,u){return Ga(),a.flags|=256,An(i,a,l,u),a.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cp(i){return{baseLanes:i,cachePool:Ev()}}function up(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=cr),i}function Pb(i,a,l){var u=a.pendingProps,g=!1,_=(a.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(Gt.current&2)!==0),S&&(g=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(st){if(g?Bs(a):qs(),(i=kt)?(i=q1(i,Sr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ps!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},l=mv(i),l.return=a,a.child=l,En=a,kt=null)):i=null,i===null)throw js(a);return Gp(i)?a.lanes=32:a.lanes=536870912,null}var j=u.children;return u=u.fallback,g?(qs(),g=a.mode,j=Nd({mode:"hidden",children:j},g),u=$a(u,g,l,null),j.return=a,u.return=a,j.sibling=u,a.child=j,u=a.child,u.memoizedState=cp(l),u.childLanes=up(i,S,l),a.memoizedState=lp,nu(null,u)):(Bs(a),hp(a,j))}var K=i.memoizedState;if(K!==null&&(j=K.dehydrated,j!==null)){if(_)a.flags&256?(Bs(a),a.flags&=-257,a=dp(i,a,l)):a.memoizedState!==null?(qs(),a.child=i.child,a.flags|=128,a=null):(qs(),j=u.fallback,g=a.mode,u=Nd({mode:"visible",children:u.children},g),j=$a(j,g,l,null),j.flags|=2,u.return=a,j.return=a,u.sibling=j,a.child=u,Ja(a,i.child,null,l),u=a.child,u.memoizedState=cp(l),u.childLanes=up(i,S,l),a.memoizedState=lp,a=nu(null,u));else if(Bs(a),Gp(j)){if(S=j.nextSibling&&j.nextSibling.dataset,S)var oe=S.dgst;S=oe,u=Error(r(419)),u.stack="",u.digest=S,Hc({value:u,source:null,stack:null}),a=dp(i,a,l)}else if(nn||dl(i,a,l,!1),S=(l&i.childLanes)!==0,nn||S){if(S=St,S!==null&&(u=Ec(S,l),u!==0&&u!==K.retryLane))throw K.retryLane=u,Ha(i,u),Zn(S,i,u),ap;$p(j)||Ld(),a=dp(i,a,l)}else $p(j)?(a.flags|=192,a.child=i.child,a=null):(i=K.treeContext,kt=Rr(j.nextSibling),En=a,st=!0,Vs=null,Sr=!1,i!==null&&yv(a,i),a=hp(a,u.children),a.flags|=4096);return a}return g?(qs(),j=u.fallback,g=a.mode,K=i.child,oe=K.sibling,u=Yi(K,{mode:"hidden",children:u.children}),u.subtreeFlags=K.subtreeFlags&65011712,oe!==null?j=Yi(oe,j):(j=$a(j,g,l,null),j.flags|=2),j.return=a,u.return=a,u.sibling=j,a.child=u,nu(null,u),u=a.child,j=i.child.memoizedState,j===null?j=cp(l):(g=j.cachePool,g!==null?(K=en._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=Ev(),j={baseLanes:j.baseLanes|l,cachePool:g}),u.memoizedState=j,u.childLanes=up(i,S,l),a.memoizedState=lp,nu(i.child,u)):(Bs(a),l=i.child,i=l.sibling,l=Yi(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=l,a.memoizedState=null,l)}function hp(i,a){return a=Nd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Nd(i,a){return i=sr(22,i,null,a),i.lanes=0,i}function dp(i,a,l){return Ja(a,i.child,null,l),i=hp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Vb(i,a,l){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a),Ig(i.return,a,l)}function fp(i,a,l,u,g,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:_}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=g,S.treeForkCount=_)}function jb(i,a,l){var u=a.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=Gt.current,j=(S&2)!==0;if(j?(S=S&1|2,a.flags|=128):S&=1,le(Gt,S),An(i,a,u,l),u=st?qc:0,!j&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vb(i,l,a);else if(i.tag===19)Vb(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&yd(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),fp(a,!1,g,l,_,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&yd(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}fp(a,!0,l,null,_,u);break;case"together":fp(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function es(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Gs|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(dl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Yi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Yi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function mp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&cd(i)))}function VR(i,a,l){switch(a.tag){case 3:Oe(a,a.stateNode.containerInfo),Ls(a,en,i.memoizedState.cache),Ga();break;case 27:case 5:_e(a);break;case 4:Oe(a,a.stateNode.containerInfo);break;case 10:Ls(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ug(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Bs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Pb(i,a,l):(Bs(a),i=es(i,a,l),i!==null?i.sibling:null);Bs(a);break;case 19:var g=(i.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(dl(i,a,l,!1),u=(l&a.childLanes)!==0),g){if(u)return jb(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(Gt,Gt.current),u)break;return null;case 22:return a.lanes=0,Nb(i,a,l,a.pendingProps);case 24:Ls(a,en,i.memoizedState.cache)}return es(i,a,l)}function Lb(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)nn=!0;else{if(!mp(i,l)&&(a.flags&128)===0)return nn=!1,VR(i,a,l);nn=(i.flags&131072)!==0}else nn=!1,st&&(a.flags&1048576)!==0&&pv(a,qc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(i=Xa(a.elementType),a.type=i,typeof i=="function")vg(i)?(u=eo(i,u),a.tag=1,a=Ob(null,a,i,u,l)):(a.tag=0,a=op(null,a,i,u,l));else{if(i!=null){var g=i.$$typeof;if(g===H){a.tag=11,a=Sb(null,a,i,u,l);break e}else if(g===R){a.tag=14,a=Ib(null,a,i,u,l);break e}}throw a=G(i)||i,Error(r(306,a,""))}}return a;case 0:return op(i,a,a.type,a.pendingProps,l);case 1:return u=a.type,g=eo(u,a.pendingProps),Ob(i,a,u,g,l);case 3:e:{if(Oe(a,a.stateNode.containerInfo),i===null)throw Error(r(387));u=a.pendingProps;var _=a.memoizedState;g=_.element,Mg(i,a),Wc(a,u,null,l);var S=a.memoizedState;if(u=S.cache,Ls(a,en,u),u!==_.cache&&Rg(a,[en],l,!0),Xc(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Mb(i,a,u,l);break e}else if(u!==g){g=Er(Error(r(424)),a),Hc(g),a=Mb(i,a,u,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(kt=Rr(i.firstChild),En=a,st=!0,Vs=null,Sr=!0,l=Nv(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ga(),u===g){a=es(i,a,l);break e}An(i,a,u,l)}a=a.child}return a;case 26:return Rd(i,a),i===null?(l=Q1(a.type,null,a.pendingProps,null))?a.memoizedState=l:st||(l=a.type,i=a.pendingProps,u=$d(ye.current).createElement(l),u[Wt]=a,u[mn]=i,Sn(u,l,i),Jt(u),a.stateNode=u):a.memoizedState=Q1(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return _e(a),i===null&&st&&(u=a.stateNode=G1(a.type,a.pendingProps,ye.current),En=a,Sr=!0,g=kt,Ws(a.type)?(Kp=g,kt=Rr(u.firstChild)):kt=g),An(i,a,a.pendingProps.children,l),Rd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&st&&((g=u=kt)&&(u=dN(u,a.type,a.pendingProps,Sr),u!==null?(a.stateNode=u,En=a,kt=Rr(u.firstChild),Sr=!1,g=!0):g=!1),g||js(a)),_e(a),g=a.type,_=a.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,Bp(g,_)?u=null:S!==null&&Bp(g,S)&&(a.flags|=32),a.memoizedState!==null&&(g=Fg(i,a,IR,null,null,l),yu._currentValue=g),Rd(i,a),An(i,a,u,l),a.child;case 6:return i===null&&st&&((i=l=kt)&&(l=fN(l,a.pendingProps,Sr),l!==null?(a.stateNode=l,En=a,kt=null,i=!0):i=!1),i||js(a)),null;case 13:return Pb(i,a,l);case 4:return Oe(a,a.stateNode.containerInfo),u=a.pendingProps,i===null?a.child=Ja(a,null,u,l):An(i,a,u,l),a.child;case 11:return Sb(i,a,a.type,a.pendingProps,l);case 7:return An(i,a,a.pendingProps,l),a.child;case 8:return An(i,a,a.pendingProps.children,l),a.child;case 12:return An(i,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Ls(a,a.type,u.value),An(i,a,u.children,l),a.child;case 9:return g=a.type._context,u=a.pendingProps.children,Ya(a),g=Tn(g),u=u(g),a.flags|=1,An(i,a,u,l),a.child;case 14:return Ib(i,a,a.type,a.pendingProps,l);case 15:return Rb(i,a,a.type,a.pendingProps,l);case 19:return jb(i,a,l);case 31:return PR(i,a,l);case 22:return Nb(i,a,l,a.pendingProps);case 24:return Ya(a),u=Tn(en),i===null?(g=kg(),g===null&&(g=St,_=Ng(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=l),g=_),a.memoizedState={parent:u,cache:g},Og(a),Ls(a,en,g)):((i.lanes&l)!==0&&(Mg(i,a),Wc(a,null,null,l),Xc()),g=i.memoizedState,_=a.memoizedState,g.parent!==u?(g={parent:u,cache:u},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Ls(a,en,u)):(u=_.cache,Ls(a,en,u),u!==g.cache&&Rg(a,[en],l,!0))),An(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ts(i){i.flags|=4}function gp(i,a,l,u,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(h1())i.flags|=8192;else throw Wa=fd,Dg}else i.flags&=-16777217}function Ub(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ew(a))if(h1())i.flags|=8192;else throw Wa=fd,Dg}function Cd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?yr():536870912,i.lanes|=a,Tl|=a)}function ru(i,a){if(!st)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Dt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=l,a}function jR(i,a,l){var u=a.pendingProps;switch(Eg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return l=a.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Wi(en),Re(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(hl(a)?ts(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ag())),Dt(a),null;case 26:var g=a.type,_=a.memoizedState;return i===null?(ts(a),_!==null?(Dt(a),Ub(a,_)):(Dt(a),gp(a,g,null,u,l))):_?_!==i.memoizedState?(ts(a),Dt(a),Ub(a,_)):(Dt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==u&&ts(a),Dt(a),gp(a,g,i,u,l)),null;case 27:if(Te(a),l=ye.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==u&&ts(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}i=re.current,hl(a)?_v(a):(i=G1(g,u,l),a.stateNode=i,ts(a))}return Dt(a),null;case 5:if(Te(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==u&&ts(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}if(_=re.current,hl(a))_v(a);else{var S=$d(ye.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[Wt]=a,_[mn]=u;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=_;e:switch(Sn(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ts(a)}}return Dt(a),gp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==u&&ts(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(i=ye.current,hl(a)){if(i=a.stateNode,l=a.memoizedProps,u=null,g=En,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[Wt]=a,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||P1(i.nodeValue,l)),i||js(a,!0)}else i=$d(i).createTextNode(u),i[Wt]=a,a.stateNode=i}return Dt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(u=hl(a),l!==null){if(i===null){if(!u)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Wt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),i=!1}else l=Ag(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(or(a),a):(or(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Dt(a),null;case 13:if(u=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=hl(a),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Wt]=a}else Ga(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),g=!1}else g=Ag(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(or(a),a):(or(a),null)}return or(a),(a.flags&128)!==0?(a.lanes=l,a):(l=u!==null,i=i!==null&&i.memoizedState!==null,l&&(u=a.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Cd(a,a.updateQueue),Dt(a),null);case 4:return Re(),i===null&&jp(a.stateNode.containerInfo),Dt(a),null;case 10:return Wi(a.type),Dt(a),null;case 19:if(Y(Gt),u=a.memoizedState,u===null)return Dt(a),null;if(g=(a.flags&128)!==0,_=u.rendering,_===null)if(g)ru(u,!1);else{if(zt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=yd(i),_!==null){for(a.flags|=128,ru(u,!1),i=_.updateQueue,a.updateQueue=i,Cd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)fv(l,i),l=l.sibling;return le(Gt,Gt.current&1|2),st&&Qi(a,u.treeForkCount),a.child}i=i.sibling}u.tail!==null&&$e()>Pd&&(a.flags|=128,g=!0,ru(u,!1),a.lanes=4194304)}else{if(!g)if(i=yd(_),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,Cd(a,i),ru(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!st)return Dt(a),null}else 2*$e()-u.renderingStartTime>Pd&&l!==536870912&&(a.flags|=128,g=!0,ru(u,!1),a.lanes=4194304);u.isBackwards?(_.sibling=a.child,a.child=_):(i=u.last,i!==null?i.sibling=_:a.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=$e(),i.sibling=null,l=Gt.current,le(Gt,g?l&1|2:l&1),st&&Qi(a,u.treeForkCount),i):(Dt(a),null);case 22:case 23:return or(a),Lg(),u=a.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),l=a.updateQueue,l!==null&&Cd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),i!==null&&Y(Qa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Wi(en),Dt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function LR(i,a){switch(Eg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Wi(en),Re(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Te(a),null;case 31:if(a.memoizedState!==null){if(or(a),a.alternate===null)throw Error(r(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(or(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ga()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Y(Gt),null;case 4:return Re(),null;case 10:return Wi(a.type),null;case 22:case 23:return or(a),Lg(),i!==null&&Y(Qa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Wi(en),null;case 25:return null;default:return null}}function zb(i,a){switch(Eg(a),a.tag){case 3:Wi(en),Re();break;case 26:case 27:case 5:Te(a);break;case 4:Re();break;case 31:a.memoizedState!==null&&or(a);break;case 13:or(a);break;case 19:Y(Gt);break;case 10:Wi(a.type);break;case 22:case 23:or(a),Lg(),i!==null&&Y(Qa);break;case 24:Wi(en)}}function iu(i,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&i)===i){u=void 0;var _=l.create,S=l.inst;u=_(),S.destroy=u}l=l.next}while(l!==g)}}catch(j){yt(a,a.return,j)}}function Hs(i,a,l){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var S=u.inst,j=S.destroy;if(j!==void 0){S.destroy=void 0,g=a;var K=l,oe=j;try{oe()}catch(fe){yt(g,K,fe)}}}u=u.next}while(u!==_)}}catch(fe){yt(a,a.return,fe)}}function Fb(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{kv(a,l)}catch(u){yt(i,i.return,u)}}}function Bb(i,a,l){l.props=eo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){yt(i,a,u)}}function su(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(g){yt(i,a,g)}}function xi(i,a){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){yt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){yt(i,a,g)}else l.current=null}function qb(i){var a=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){yt(i,i.return,g)}}function pp(i,a,l){try{var u=i.stateNode;aN(u,i.type,l,a),u[mn]=a}catch(g){yt(i,i.return,g)}}function Hb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ws(i.type)||i.tag===4}function yp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Hb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ws(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _p(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Fr));else if(u!==4&&(u===27&&Ws(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(_p(i,a,l),i=i.sibling;i!==null;)_p(i,a,l),i=i.sibling}function kd(i,a,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(u!==4&&(u===27&&Ws(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(kd(i,a,l),i=i.sibling;i!==null;)kd(i,a,l),i=i.sibling}function $b(i){var a=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Sn(a,u,l),a[Wt]=i,a[mn]=l}catch(_){yt(i,i.return,_)}}var ns=!1,rn=!1,vp=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,pn=null;function UR(i,a){if(i=i.containerInfo,zp=Jd,i=iv(i),dg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,j=-1,K=-1,oe=0,fe=0,ge=i,ce=null;t:for(;;){for(var he;ge!==l||g!==0&&ge.nodeType!==3||(j=S+g),ge!==_||u!==0&&ge.nodeType!==3||(K=S+u),ge.nodeType===3&&(S+=ge.nodeValue.length),(he=ge.firstChild)!==null;)ce=ge,ge=he;for(;;){if(ge===i)break t;if(ce===l&&++oe===g&&(j=S),ce===_&&++fe===u&&(K=S),(he=ge.nextSibling)!==null)break;ge=ce,ce=ge.parentNode}ge=he}l=j===-1||K===-1?null:{start:j,end:K}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fp={focusedElem:i,selectionRange:l},Jd=!1,pn=a;pn!==null;)if(a=pn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,pn=i;else for(;pn!==null;){switch(a=pn,_=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=a,g=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var xe=eo(l.type,g);i=u.getSnapshotBeforeUpdate(xe,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(ke){yt(l,l.return,ke)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Hp(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Hp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,pn=i;break}pn=a.return}}function Kb(i,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:is(i,l),u&4&&iu(5,l);break;case 1:if(is(i,l),u&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){yt(l,l.return,S)}else{var g=eo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){yt(l,l.return,S)}}u&64&&Fb(l),u&512&&su(l,l.return);break;case 3:if(is(i,l),u&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{kv(i,a)}catch(S){yt(l,l.return,S)}}break;case 27:a===null&&u&4&&$b(l);case 26:case 5:is(i,l),a===null&&u&4&&qb(l),u&512&&su(l,l.return);break;case 12:is(i,l);break;case 31:is(i,l),u&4&&Xb(i,l);break;case 13:is(i,l),u&4&&Wb(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=YR.bind(null,l),mN(i,l))));break;case 22:if(u=l.memoizedState!==null||ns,!u){a=a!==null&&a.memoizedState!==null||rn,g=ns;var _=rn;ns=u,(rn=a)&&!_?ss(i,l,(l.subtreeFlags&8772)!==0):is(i,l),ns=g,rn=_}break;case 30:break;default:is(i,l)}}function Yb(i){var a=i.alternate;a!==null&&(i.alternate=null,Yb(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Yo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Mt=null,Qn=!1;function rs(i,a,l){for(l=l.child;l!==null;)Qb(i,a,l),l=l.sibling}function Qb(i,a,l){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ht,l)}catch{}switch(l.tag){case 26:rn||xi(l,a),rs(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rn||xi(l,a);var u=Mt,g=Qn;Ws(l.type)&&(Mt=l.stateNode,Qn=!1),rs(i,a,l),mu(l.stateNode),Mt=u,Qn=g;break;case 5:rn||xi(l,a);case 6:if(u=Mt,g=Qn,Mt=null,rs(i,a,l),Mt=u,Qn=g,Mt!==null)if(Qn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(l.stateNode)}catch(_){yt(l,a,_)}else try{Mt.removeChild(l.stateNode)}catch(_){yt(l,a,_)}break;case 18:Mt!==null&&(Qn?(i=Mt,F1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Dl(i)):F1(Mt,l.stateNode));break;case 4:u=Mt,g=Qn,Mt=l.stateNode.containerInfo,Qn=!0,rs(i,a,l),Mt=u,Qn=g;break;case 0:case 11:case 14:case 15:Hs(2,l,a),rn||Hs(4,l,a),rs(i,a,l);break;case 1:rn||(xi(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Bb(l,a,u)),rs(i,a,l);break;case 21:rs(i,a,l);break;case 22:rn=(u=rn)||l.memoizedState!==null,rs(i,a,l),rn=u;break;default:rs(i,a,l)}}function Xb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Dl(i)}catch(l){yt(a,a.return,l)}}}function Wb(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Dl(i)}catch(l){yt(a,a.return,l)}}function zR(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Gb),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Gb),a;default:throw Error(r(435,i.tag))}}function Dd(i,a){var l=zR(i);a.forEach(function(u){if(!l.has(u)){l.add(u);var g=QR.bind(null,i,u);u.then(g,g)}})}function Xn(i,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],_=i,S=a,j=S;e:for(;j!==null;){switch(j.tag){case 27:if(Ws(j.type)){Mt=j.stateNode,Qn=!1;break e}break;case 5:Mt=j.stateNode,Qn=!1;break e;case 3:case 4:Mt=j.stateNode.containerInfo,Qn=!0;break e}j=j.return}if(Mt===null)throw Error(r(160));Qb(_,S,g),Mt=null,Qn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Jb(a,i),a=a.sibling}var Kr=null;function Jb(i,a){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xn(a,i),Wn(i),u&4&&(Hs(3,i,i.return),iu(3,i),Hs(5,i,i.return));break;case 1:Xn(a,i),Wn(i),u&512&&(rn||l===null||xi(l,l.return)),u&64&&ns&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=Kr;if(Xn(a,i),Wn(i),u&512&&(rn||l===null||xi(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[li]||_[Wt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Sn(_,u,l),_[Wt]=i,Jt(_),u=_;break e;case"link":var S=J1("link","href",g).get(u+(l.href||""));if(S){for(var j=0;j<S.length;j++)if(_=S[j],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(j,1);break t}}_=g.createElement(u),Sn(_,u,l),g.head.appendChild(_);break;case"meta":if(S=J1("meta","content",g).get(u+(l.content||""))){for(j=0;j<S.length;j++)if(_=S[j],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(j,1);break t}}_=g.createElement(u),Sn(_,u,l),g.head.appendChild(_);break;default:throw Error(r(468,u))}_[Wt]=i,Jt(_),u=_}i.stateNode=u}else Z1(g,i.type,i.stateNode);else i.stateNode=W1(g,u,i.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?Z1(g,i.type,i.stateNode):W1(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&pp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Xn(a,i),Wn(i),u&512&&(rn||l===null||xi(l,l.return)),l!==null&&u&4&&pp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Xn(a,i),Wn(i),u&512&&(rn||l===null||xi(l,l.return)),i.flags&32){g=i.stateNode;try{Yn(g,"")}catch(xe){yt(i,i.return,xe)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,pp(i,g,l!==null?l.memoizedProps:g)),u&1024&&(vp=!0);break;case 6:if(Xn(a,i),Wn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(xe){yt(i,i.return,xe)}}break;case 3:if(Yd=null,g=Kr,Kr=Gd(a.containerInfo),Xn(a,i),Kr=g,Wn(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Dl(a.containerInfo)}catch(xe){yt(i,i.return,xe)}vp&&(vp=!1,Zb(i));break;case 4:u=Kr,Kr=Gd(i.stateNode.containerInfo),Xn(a,i),Wn(i),Kr=u;break;case 12:Xn(a,i),Wn(i);break;case 31:Xn(a,i),Wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dd(i,u)));break;case 13:Xn(a,i),Wn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Md=$e()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dd(i,u)));break;case 22:g=i.memoizedState!==null;var K=l!==null&&l.memoizedState!==null,oe=ns,fe=rn;if(ns=oe||g,rn=fe||K,Xn(a,i),rn=fe,ns=oe,Wn(i),u&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||K||ns||rn||to(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){K=l=a;try{if(_=K.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{j=K.stateNode;var ge=K.memoizedProps.style,ce=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(xe){yt(K,K.return,xe)}}}else if(a.tag===6){if(l===null){K=a;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(xe){yt(K,K.return,xe)}}}else if(a.tag===18){if(l===null){K=a;try{var he=K.stateNode;g?B1(he,!0):B1(K.stateNode,!1)}catch(xe){yt(K,K.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Dd(i,l))));break;case 19:Xn(a,i),Wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Dd(i,u)));break;case 30:break;case 21:break;default:Xn(a,i),Wn(i)}}function Wn(i){var a=i.flags;if(a&2){try{for(var l,u=i.return;u!==null;){if(Hb(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,_=yp(i);kd(i,_,g);break;case 5:var S=l.stateNode;l.flags&32&&(Yn(S,""),l.flags&=-33);var j=yp(i);kd(i,j,S);break;case 3:case 4:var K=l.stateNode.containerInfo,oe=yp(i);_p(i,oe,K);break;default:throw Error(r(161))}}catch(fe){yt(i,i.return,fe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Zb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Zb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function is(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Kb(i,a.alternate,a),a=a.sibling}function to(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Hs(4,a,a.return),to(a);break;case 1:xi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Bb(a,a.return,l),to(a);break;case 27:mu(a.stateNode);case 26:case 5:xi(a,a.return),to(a);break;case 22:a.memoizedState===null&&to(a);break;case 30:to(a);break;default:to(a)}i=i.sibling}}function ss(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,g=i,_=a,S=_.flags;switch(_.tag){case 0:case 11:case 15:ss(g,_,l),iu(4,_);break;case 1:if(ss(g,_,l),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){yt(u,u.return,oe)}if(u=_,g=u.updateQueue,g!==null){var j=u.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)Cv(K[g],j)}catch(oe){yt(u,u.return,oe)}}l&&S&64&&Fb(_),su(_,_.return);break;case 27:$b(_);case 26:case 5:ss(g,_,l),l&&u===null&&S&4&&qb(_),su(_,_.return);break;case 12:ss(g,_,l);break;case 31:ss(g,_,l),l&&S&4&&Xb(g,_);break;case 13:ss(g,_,l),l&&S&4&&Wb(g,_);break;case 22:_.memoizedState===null&&ss(g,_,l),su(_,_.return);break;case 30:break;default:ss(g,_,l)}a=a.sibling}}function bp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&$c(l))}function wp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&$c(i))}function Yr(i,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)e1(i,a,l,u),a=a.sibling}function e1(i,a,l,u){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(i,a,l,u),g&2048&&iu(9,a);break;case 1:Yr(i,a,l,u);break;case 3:Yr(i,a,l,u),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&$c(i)));break;case 12:if(g&2048){Yr(i,a,l,u),i=a.stateNode;try{var _=a.memoizedProps,S=_.id,j=_.onPostCommit;typeof j=="function"&&j(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){yt(a,a.return,K)}}else Yr(i,a,l,u);break;case 31:Yr(i,a,l,u);break;case 13:Yr(i,a,l,u);break;case 23:break;case 22:_=a.stateNode,S=a.alternate,a.memoizedState!==null?_._visibility&2?Yr(i,a,l,u):au(i,a):_._visibility&2?Yr(i,a,l,u):(_._visibility|=2,wl(i,a,l,u,(a.subtreeFlags&10256)!==0||!1)),g&2048&&bp(S,a);break;case 24:Yr(i,a,l,u),g&2048&&wp(a.alternate,a);break;default:Yr(i,a,l,u)}}function wl(i,a,l,u,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=i,S=a,j=l,K=u,oe=S.flags;switch(S.tag){case 0:case 11:case 15:wl(_,S,j,K,g),iu(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&2?wl(_,S,j,K,g):au(_,S):(fe._visibility|=2,wl(_,S,j,K,g)),g&&oe&2048&&bp(S.alternate,S);break;case 24:wl(_,S,j,K,g),g&&oe&2048&&wp(S.alternate,S);break;default:wl(_,S,j,K,g)}a=a.sibling}}function au(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,u=a,g=u.flags;switch(u.tag){case 22:au(l,u),g&2048&&bp(u.alternate,u);break;case 24:au(l,u),g&2048&&wp(u.alternate,u);break;default:au(l,u)}a=a.sibling}}var ou=8192;function xl(i,a,l){if(i.subtreeFlags&ou)for(i=i.child;i!==null;)t1(i,a,l),i=i.sibling}function t1(i,a,l){switch(i.tag){case 26:xl(i,a,l),i.flags&ou&&i.memoizedState!==null&&SN(l,Kr,i.memoizedState,i.memoizedProps);break;case 5:xl(i,a,l);break;case 3:case 4:var u=Kr;Kr=Gd(i.stateNode.containerInfo),xl(i,a,l),Kr=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=ou,ou=16777216,xl(i,a,l),ou=u):xl(i,a,l));break;default:xl(i,a,l)}}function n1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function lu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,i1(u,i)}n1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)r1(i),i=i.sibling}function r1(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&Hs(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Od(i)):lu(i);break;default:lu(i)}}function Od(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];pn=u,i1(u,i)}n1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Hs(8,a,a.return),Od(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Od(a));break;default:Od(a)}i=i.sibling}}function i1(i,a){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:Hs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$c(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,pn=u;else e:for(l=i;pn!==null;){u=pn;var g=u.sibling,_=u.return;if(Yb(u),u===l){pn=null;break e}if(g!==null){g.return=_,pn=g;break e}pn=_}}}var FR={getCacheForType:function(i){var a=Tn(en),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Tn(en).controller.signal}},BR=typeof WeakMap=="function"?WeakMap:Map,ht=0,St=null,We=null,et=0,pt=0,lr=null,$s=!1,El=!1,xp=!1,as=0,zt=0,Gs=0,no=0,Ep=0,cr=0,Tl=0,cu=null,Jn=null,Tp=!1,Md=0,s1=0,Pd=1/0,Vd=null,Ks=null,cn=0,Ys=null,Al=null,os=0,Ap=0,Sp=null,a1=null,uu=0,Ip=null;function ur(){return(ht&2)!==0&&et!==0?et&-et:k.T!==null?Op():jh()}function o1(){if(cr===0)if((et&536870912)===0||st){var i=qi;qi<<=1,(qi&3932160)===0&&(qi=262144),cr=i}else cr=536870912;return i=ar.current,i!==null&&(i.flags|=32),cr}function Zn(i,a,l){(i===St&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Sl(i,0),Qs(i,et,cr,!1)),Ca(i,l),((ht&2)===0||i!==St)&&(i===St&&((ht&2)===0&&(no|=l),zt===4&&Qs(i,et,cr,!1)),Ei(i))}function l1(i,a,l){if((ht&6)!==0)throw Error(r(327));var u=!l&&(a&127)===0&&(a&i.expiredLanes)===0||wn(i,a),g=u?$R(i,a):Np(i,a,!0),_=u;do{if(g===0){El&&!u&&Qs(i,a,0,!1);break}else{if(l=i.current.alternate,_&&!qR(l)){g=Np(i,a,!1),_=!1;continue}if(g===2){if(_=a,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var j=i;g=cu;var K=j.current.memoizedState.isDehydrated;if(K&&(Sl(j,S).flags|=256),S=Np(j,S,!1),S!==2){if(xp&&!K){j.errorRecoveryDisabledLanes|=_,no|=_,g=4;break e}_=Jn,Jn=g,_!==null&&(Jn===null?Jn=_:Jn.push.apply(Jn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){Sl(i,0),Qs(i,a,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Qs(u,a,cr,!$s);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Md+300-$e(),10<g)){if(Qs(u,a,cr,!$s),bn(u,0,!0)!==0)break e;os=a,u.timeoutHandle=U1(c1.bind(null,u,l,Jn,Vd,Tp,a,cr,no,Tl,$s,_,"Throttled",-0,0),g);break e}c1(u,l,Jn,Vd,Tp,a,cr,no,Tl,$s,_,null,-0,0)}}break}while(!0);Ei(i)}function c1(i,a,l,u,g,_,S,j,K,oe,fe,ge,ce,he){if(i.timeoutHandle=-1,ge=a.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},t1(a,_,ge);var xe=(_&62914560)===_?Md-$e():(_&4194048)===_?s1-$e():0;if(xe=IN(ge,xe),xe!==null){os=_,i.cancelPendingCommit=xe(y1.bind(null,i,a,_,l,u,g,S,j,K,fe,ge,null,ce,he)),Qs(i,_,S,!oe);return}}y1(i,a,_,l,u,g,S,j,K)}function qR(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],_=g.getSnapshot;g=g.value;try{if(!ir(_(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(i,a,l,u){a&=~Ep,a&=~no,i.suspendedLanes|=a,i.pingedLanes&=~a,u&&(i.warmLanes|=a),u=i.expirationTimes;for(var g=a;0<g;){var _=31-Ct(g),S=1<<_;u[_]=-1,g&=~S}l!==0&&ka(i,l,a)}function jd(){return(ht&6)===0?(hu(0),!1):!0}function Rp(){if(We!==null){if(pt===0)var i=We.return;else i=We,Xi=Ka=null,Hg(i),pl=null,Kc=0,i=We;for(;i!==null;)zb(i.alternate,i),i=i.return;We=null}}function Sl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,cN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),os=0,Rp(),St=i,We=l=Yi(i.current,null),et=a,pt=0,lr=null,$s=!1,El=wn(i,a),xp=!1,Tl=cr=Ep=no=Gs=zt=0,Jn=cu=null,Tp=!1,(a&8)!==0&&(a|=a&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=a;0<u;){var g=31-Ct(u),_=1<<g;a|=i[g],u&=~_}return as=a,id(),l}function u1(i,a){qe=null,k.H=tu,a===gl||a===dd?(a=Sv(),pt=3):a===Dg?(a=Sv(),pt=4):pt=a===ap?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,lr=a,We===null&&(zt=1,Sd(i,Er(a,i.current)))}function h1(){var i=ar.current;return i===null?!0:(et&4194048)===et?Ir===null:(et&62914560)===et||(et&536870912)!==0?i===Ir:!1}function d1(){var i=k.H;return k.H=tu,i===null?tu:i}function f1(){var i=k.A;return k.A=FR,i}function Ld(){zt=4,$s||(et&4194048)!==et&&ar.current!==null||(El=!0),(Gs&134217727)===0&&(no&134217727)===0||St===null||Qs(St,et,cr,!1)}function Np(i,a,l){var u=ht;ht|=2;var g=d1(),_=f1();(St!==i||et!==a)&&(Vd=null,Sl(i,a)),a=!1;var S=zt;e:do try{if(pt!==0&&We!==null){var j=We,K=lr;switch(pt){case 8:Rp(),S=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(a=!0);var oe=pt;if(pt=0,lr=null,Il(i,j,K,oe),l&&El){S=0;break e}break;default:oe=pt,pt=0,lr=null,Il(i,j,K,oe)}}HR(),S=zt;break}catch(fe){u1(i,fe)}while(!0);return a&&i.shellSuspendCounter++,Xi=Ka=null,ht=u,k.H=g,k.A=_,We===null&&(St=null,et=0,id()),S}function HR(){for(;We!==null;)m1(We)}function $R(i,a){var l=ht;ht|=2;var u=d1(),g=f1();St!==i||et!==a?(Vd=null,Pd=$e()+500,Sl(i,a)):El=wn(i,a);e:do try{if(pt!==0&&We!==null){a=We;var _=lr;t:switch(pt){case 1:pt=0,lr=null,Il(i,a,_,1);break;case 2:case 9:if(Tv(_)){pt=0,lr=null,g1(a);break}a=function(){pt!==2&&pt!==9||St!==i||(pt=7),Ei(i)},_.then(a,a);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Tv(_)?(pt=0,lr=null,g1(a)):(pt=0,lr=null,Il(i,a,_,7));break;case 5:var S=null;switch(We.tag){case 26:S=We.memoizedState;case 5:case 27:var j=We;if(S?ew(S):j.stateNode.complete){pt=0,lr=null;var K=j.sibling;if(K!==null)We=K;else{var oe=j.return;oe!==null?(We=oe,Ud(oe)):We=null}break t}}pt=0,lr=null,Il(i,a,_,5);break;case 6:pt=0,lr=null,Il(i,a,_,6);break;case 8:Rp(),zt=6;break e;default:throw Error(r(462))}}GR();break}catch(fe){u1(i,fe)}while(!0);return Xi=Ka=null,k.H=u,k.A=g,ht=l,We!==null?0:(St=null,et=0,id(),zt)}function GR(){for(;We!==null&&!_n();)m1(We)}function m1(i){var a=Lb(i.alternate,i,as);i.memoizedProps=i.pendingProps,a===null?Ud(i):We=a}function g1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Db(l,a,a.pendingProps,a.type,void 0,et);break;case 11:a=Db(l,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:Hg(a);default:zb(l,a),a=We=fv(a,as),a=Lb(l,a,as)}i.memoizedProps=i.pendingProps,a===null?Ud(i):We=a}function Il(i,a,l,u){Xi=Ka=null,Hg(a),pl=null,Kc=0;var g=a.return;try{if(MR(i,g,a,l,et)){zt=1,Sd(i,Er(l,i.current)),We=null;return}}catch(_){if(g!==null)throw We=g,_;zt=1,Sd(i,Er(l,i.current)),We=null;return}a.flags&32768?(st||u===1?i=!0:El||(et&536870912)!==0?i=!1:($s=i=!0,(u===2||u===9||u===3||u===6)&&(u=ar.current,u!==null&&u.tag===13&&(u.flags|=16384))),p1(a,i)):Ud(a)}function Ud(i){var a=i;do{if((a.flags&32768)!==0){p1(a,$s);return}i=a.return;var l=jR(a.alternate,a,as);if(l!==null){We=l;return}if(a=a.sibling,a!==null){We=a;return}We=a=i}while(a!==null);zt===0&&(zt=5)}function p1(i,a){do{var l=LR(i.alternate,i);if(l!==null){l.flags&=32767,We=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){We=i;return}We=i=l}while(i!==null);zt=6,We=null}function y1(i,a,l,u,g,_,S,j,K){i.cancelPendingCommit=null;do zd();while(cn!==0);if((ht&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(_=a.lanes|a.childLanes,_|=yg,lg(i,l,_,S,j,K),i===St&&(We=St=null,et=0),Al=a,Ys=i,os=l,Ap=_,Sp=g,a1=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,XR(Nt,function(){return x1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,g=M.p,M.p=2,S=ht,ht|=4;try{UR(i,a,l)}finally{ht=S,M.p=g,k.T=u}}cn=1,_1(),v1(),b1()}}function _1(){if(cn===1){cn=0;var i=Ys,a=Al,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=k.T,k.T=null;var u=M.p;M.p=2;var g=ht;ht|=4;try{Jb(a,i);var _=Fp,S=iv(i.containerInfo),j=_.focusedElem,K=_.selectionRange;if(S!==j&&j&&j.ownerDocument&&rv(j.ownerDocument.documentElement,j)){if(K!==null&&dg(j)){var oe=K.start,fe=K.end;if(fe===void 0&&(fe=oe),"selectionStart"in j)j.selectionStart=oe,j.selectionEnd=Math.min(fe,j.value.length);else{var ge=j.ownerDocument||document,ce=ge&&ge.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),xe=j.textContent.length,ke=Math.min(K.start,xe),At=K.end===void 0?ke:Math.min(K.end,xe);!he.extend&&ke>At&&(S=At,At=ke,ke=S);var ee=nv(j,ke),X=nv(j,At);if(ee&&X&&(he.rangeCount!==1||he.anchorNode!==ee.node||he.anchorOffset!==ee.offset||he.focusNode!==X.node||he.focusOffset!==X.offset)){var ae=ge.createRange();ae.setStart(ee.node,ee.offset),he.removeAllRanges(),ke>At?(he.addRange(ae),he.extend(X.node,X.offset)):(ae.setEnd(X.node,X.offset),he.addRange(ae))}}}}for(ge=[],he=j;he=he.parentNode;)he.nodeType===1&&ge.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ge.length;j++){var me=ge[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Jd=!!zp,Fp=zp=null}finally{ht=g,M.p=u,k.T=l}}i.current=a,cn=2}}function v1(){if(cn===2){cn=0;var i=Ys,a=Al,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=k.T,k.T=null;var u=M.p;M.p=2;var g=ht;ht|=4;try{Kb(i,a.alternate,a)}finally{ht=g,M.p=u,k.T=l}}cn=3}}function b1(){if(cn===4||cn===3){cn=0,Rt();var i=Ys,a=Al,l=os,u=a1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?cn=5:(cn=0,Al=Ys=null,w1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ks=null),Hi(l),a=a.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ht,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=k.T,g=M.p,M.p=2,k.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var j=u[S];_(j.value,{componentStack:j.stack})}}finally{k.T=a,M.p=g}}(os&3)!==0&&zd(),Ei(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===Ip?uu++:(uu=0,Ip=i):uu=0,hu(0)}}function w1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,$c(a)))}function zd(){return _1(),v1(),b1(),x1()}function x1(){if(cn!==5)return!1;var i=Ys,a=Ap;Ap=0;var l=Hi(os),u=k.T,g=M.p;try{M.p=32>l?32:l,k.T=null,l=Sp,Sp=null;var _=Ys,S=os;if(cn=0,Al=Ys=null,os=0,(ht&6)!==0)throw Error(r(331));var j=ht;if(ht|=4,r1(_.current),e1(_,_.current,S,l),ht=j,hu(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ht,_)}catch{}return!0}finally{M.p=g,k.T=u,w1(i,a)}}function E1(i,a,l){a=Er(l,a),a=sp(i.stateNode,a,2),i=Fs(i,a,2),i!==null&&(Ca(i,2),Ei(i))}function yt(i,a,l){if(i.tag===3)E1(i,i,l);else for(;a!==null;){if(a.tag===3){E1(a,i,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ks===null||!Ks.has(u))){i=Er(l,i),l=Tb(2),u=Fs(a,l,2),u!==null&&(Ab(l,u,a,i),Ca(u,2),Ei(u));break}}a=a.return}}function Cp(i,a,l){var u=i.pingCache;if(u===null){u=i.pingCache=new BR;var g=new Set;u.set(a,g)}else g=u.get(a),g===void 0&&(g=new Set,u.set(a,g));g.has(l)||(xp=!0,g.add(l),i=KR.bind(null,i,a,l),a.then(i,i))}function KR(i,a,l){var u=i.pingCache;u!==null&&u.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,St===i&&(et&l)===l&&(zt===4||zt===3&&(et&62914560)===et&&300>$e()-Md?(ht&2)===0&&Sl(i,0):Ep|=l,Tl===et&&(Tl=0)),Ei(i)}function T1(i,a){a===0&&(a=yr()),i=Ha(i,a),i!==null&&(Ca(i,a),Ei(i))}function YR(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),T1(i,l)}function QR(i,a){var l=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),T1(i,l)}function XR(i,a){return Xe(i,a)}var Fd=null,Rl=null,kp=!1,Bd=!1,Dp=!1,Xs=0;function Ei(i){i!==Rl&&i.next===null&&(Rl===null?Fd=Rl=i:Rl=Rl.next=i),Bd=!0,kp||(kp=!0,JR())}function hu(i,a){if(!Dp&&Bd){Dp=!0;do for(var l=!1,u=Fd;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,j=u.pingedLanes;_=(1<<31-Ct(42|i)+1)-1,_&=g&~(S&~j),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,R1(u,_))}else _=et,_=bn(u,u===St?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||wn(u,_)||(l=!0,R1(u,_));u=u.next}while(l);Dp=!1}}function WR(){A1()}function A1(){Bd=kp=!1;var i=0;Xs!==0&&lN()&&(i=Xs);for(var a=$e(),l=null,u=Fd;u!==null;){var g=u.next,_=S1(u,a);_===0?(u.next=null,l===null?Fd=g:l.next=g,g===null&&(Rl=l)):(l=u,(i!==0||(_&3)!==0)&&(Bd=!0)),u=g}cn!==0&&cn!==5||hu(i),Xs!==0&&(Xs=0)}function S1(i,a){for(var l=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-Ct(_),j=1<<S,K=g[S];K===-1?((j&l)===0||(j&u)!==0)&&(g[S]=Go(j,a)):K<=a&&(i.expiredLanes|=j),_&=~j}if(a=St,l=et,l=bn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===a&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ft(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||wn(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(u!==null&&ft(u),Hi(l)){case 2:case 8:l=si;break;case 32:l=Nt;break;case 268435456:l=Qt;break;default:l=Nt}return u=I1.bind(null,i),l=Xe(l,u),i.callbackPriority=a,i.callbackNode=l,a}return u!==null&&u!==null&&ft(u),i.callbackPriority=2,i.callbackNode=null,2}function I1(i,a){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(zd()&&i.callbackNode!==l)return null;var u=et;return u=bn(i,i===St?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(l1(i,u,a),S1(i,$e()),i.callbackNode!=null&&i.callbackNode===l?I1.bind(null,i):null)}function R1(i,a){if(zd())return null;l1(i,a,!0)}function JR(){uN(function(){(ht&6)!==0?Xe(Gn,WR):A1()})}function Op(){if(Xs===0){var i=fl;i===0&&(i=Cn,Cn<<=1,(Cn&261888)===0&&(Cn=256)),Xs=i}return Xs}function N1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jo(""+i)}function C1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function ZR(i,a,l,u,g){if(a==="submit"&&l&&l.stateNode===g){var _=N1((g[mn]||null).action),S=u.submitter;S&&(a=(a=S[mn]||null)?N1(a.formAction):S.getAttribute("formAction"),a!==null&&(_=a,S=null));var j=new pi("action","action",null,u,g);i.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Xs!==0){var K=S?C1(g,S):new FormData(g);Zg(l,{pending:!0,data:K,method:g.method,action:_},null,K)}}else typeof _=="function"&&(j.preventDefault(),K=S?C1(g,S):new FormData(g),Zg(l,{pending:!0,data:K,method:g.method,action:_},_,K))},currentTarget:g}]})}}for(var Mp=0;Mp<pg.length;Mp++){var Pp=pg[Mp],eN=Pp.toLowerCase(),tN=Pp[0].toUpperCase()+Pp.slice(1);Gr(eN,"on"+tN)}Gr(ov,"onAnimationEnd"),Gr(lv,"onAnimationIteration"),Gr(cv,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(yR,"onTransitionRun"),Gr(_R,"onTransitionStart"),Gr(vR,"onTransitionCancel"),Gr(uv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function k1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],g=u.event;u=u.listeners;e:{var _=void 0;if(a)for(var S=u.length-1;0<=S;S--){var j=u[S],K=j.instance,oe=j.currentTarget;if(j=j.listener,K!==_&&g.isPropagationStopped())break e;_=j,g.currentTarget=oe;try{_(g)}catch(fe){rd(fe)}g.currentTarget=null,_=K}else for(S=0;S<u.length;S++){if(j=u[S],K=j.instance,oe=j.currentTarget,j=j.listener,K!==_&&g.isPropagationStopped())break e;_=j,g.currentTarget=oe;try{_(g)}catch(fe){rd(fe)}g.currentTarget=null,_=K}}}}function Je(i,a){var l=a[Ko];l===void 0&&(l=a[Ko]=new Set);var u=i+"__bubble";l.has(u)||(D1(a,i,2,!1),l.add(u))}function Vp(i,a,l){var u=0;a&&(u|=4),D1(l,i,u,a)}var qd="_reactListening"+Math.random().toString(36).slice(2);function jp(i){if(!i[qd]){i[qd]=!0,Tc.forEach(function(l){l!=="selectionchange"&&(nN.has(l)||Vp(l,!1,i),Vp(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[qd]||(a[qd]=!0,Vp("selectionchange",!1,a))}}function D1(i,a,l,u){switch(ow(a)){case 2:var g=CN;break;case 8:g=kN;break;default:g=Jp}l=g.bind(null,a,l,i),g=void 0,!Va||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function Lp(i,a,l,u,g){var _=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var j=u.stateNode.containerInfo;if(j===g)break;if(S===4)for(S=u.return;S!==null;){var K=S.tag;if((K===3||K===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;j!==null;){if(S=ci(j),S===null)return;if(K=S.tag,K===5||K===6||K===26||K===27){u=_=S;continue e}j=j.parentNode}}u=u.return}ks(function(){var oe=_,fe=vr(l),ge=[];e:{var ce=hv.get(i);if(ce!==void 0){var he=pi,xe=i;switch(i){case"keypress":if(La(l)===0)break e;case"keydown":case"keyup":he=ed;break;case"focusin":xe="focus",he=za;break;case"focusout":xe="blur",he=za;break;case"beforeblur":case"afterblur":he=za;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=x;break;case ov:case lv:case cv:he=Kh;break;case uv:he=U;break;case"scroll":case"scrollend":he=Vc;break;case"wheel":he=ue;break;case"copy":case"cut":case"paste":he=Yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Ki;break;case"toggle":case"beforetoggle":he=Be}var ke=(a&4)!==0,At=!ke&&(i==="scroll"||i==="scrollend"),ee=ke?ce!==null?ce+"Capture":null:ce;ke=[];for(var X=oe,ae;X!==null;){var me=X;if(ae=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ae===null||ee===null||(me=Br(X,ee),me!=null&&ke.push(fu(X,me,ae))),At)break;X=X.return}0<ke.length&&(ce=new he(ce,xe,null,l,fe),ge.push({event:ce,listeners:ke}))}}if((a&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&l!==Oc&&(xe=l.relatedTarget||l.fromElement)&&(ci(xe)||xe[oi]))break e;if((he||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(xe=l.relatedTarget||l.toElement,he=oe,xe=xe?ci(xe):null,xe!==null&&(At=o(xe),ke=xe.tag,xe!==At||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(he=null,xe=oe),he!==xe)){if(ke=jc,me="onMouseLeave",ee="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(ke=Ki,me="onPointerLeave",ee="onPointerEnter",X="pointer"),At=he==null?ce:nr(he),ae=xe==null?ce:nr(xe),ce=new ke(me,X+"leave",he,l,fe),ce.target=At,ce.relatedTarget=ae,me=null,ci(fe)===oe&&(ke=new ke(ee,X+"enter",xe,l,fe),ke.target=ae,ke.relatedTarget=At,me=ke),At=me,he&&xe)t:{for(ke=rN,ee=he,X=xe,ae=0,me=ee;me;me=ke(me))ae++;me=0;for(var Ne=X;Ne;Ne=ke(Ne))me++;for(;0<ae-me;)ee=ke(ee),ae--;for(;0<me-ae;)X=ke(X),me--;for(;ae--;){if(ee===X||X!==null&&ee===X.alternate){ke=ee;break t}ee=ke(ee),X=ke(X)}ke=null}else ke=null;he!==null&&O1(ge,ce,he,ke,!1),xe!==null&&At!==null&&O1(ge,At,xe,ke,!0)}}e:{if(ce=oe?nr(oe):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var lt=X_;else if(Y_(ce))if(W_)lt=mR;else{lt=dR;var Se=hR}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&Wo(oe.elementType)&&(lt=X_):lt=fR;if(lt&&(lt=lt(i,oe))){Q_(ge,lt,l,fe);break e}Se&&Se(i,ce,oe),i==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&Cc(ce,"number",ce.value)}switch(Se=oe?nr(oe):window,i){case"focusin":(Y_(Se)||Se.contentEditable==="true")&&(sl=Se,fg=oe,Bc=null);break;case"focusout":Bc=fg=sl=null;break;case"mousedown":mg=!0;break;case"contextmenu":case"mouseup":case"dragend":mg=!1,sv(ge,l,fe);break;case"selectionchange":if(pR)break;case"keydown":case"keyup":sv(ge,l,fe)}var Ge;if(ut)e:{switch(i){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else il?Fa(i,l)&&(tt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(tt="onCompositionStart");tt&&(vi&&l.locale!=="ko"&&(il||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&il&&(Ge=Pc()):(gi=fe,Mc="value"in gi?gi.value:gi.textContent,il=!0)),Se=Hd(oe,tt),0<Se.length&&(tt=new _i(tt,i,null,l,fe),ge.push({event:tt,listeners:Se}),Ge?tt.data=Ge:(Ge=rl(l),Ge!==null&&(tt.data=Ge)))),(Ge=wr?oR(i,l):lR(i,l))&&(tt=Hd(oe,"onBeforeInput"),0<tt.length&&(Se=new _i("onBeforeInput","beforeinput",null,l,fe),ge.push({event:Se,listeners:tt}),Se.data=Ge)),ZR(ge,i,oe,l,fe)}k1(ge,a)})}function fu(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Hd(i,a){for(var l=a+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Br(i,l),g!=null&&u.unshift(fu(i,g,_)),g=Br(i,a),g!=null&&u.push(fu(i,g,_))),i.tag===3)return u;i=i.return}return[]}function rN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function O1(i,a,l,u,g){for(var _=a._reactName,S=[];l!==null&&l!==u;){var j=l,K=j.alternate,oe=j.stateNode;if(j=j.tag,K!==null&&K===u)break;j!==5&&j!==26&&j!==27||oe===null||(K=oe,g?(oe=Br(l,_),oe!=null&&S.unshift(fu(l,oe,K))):g||(oe=Br(l,_),oe!=null&&S.push(fu(l,oe,K)))),l=l.return}S.length!==0&&i.push({event:a,listeners:S})}var iN=/\r\n?/g,sN=/\u0000|\uFFFD/g;function M1(i){return(typeof i=="string"?i:""+i).replace(iN,`
`).replace(sN,"")}function P1(i,a){return a=M1(a),M1(i)===a}function Tt(i,a,l,u,g,_){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Yn(i,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Yn(i,""+u);break;case"className":rr(i,"class",u);break;case"tabIndex":rr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(i,l,u);break;case"style":Dc(i,u,_);break;case"data":if(a!=="object"){rr(i,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Jo(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(a!=="input"&&Tt(i,a,"name",g.name,g,null),Tt(i,a,"formEncType",g.formEncType,g,null),Tt(i,a,"formMethod",g.formMethod,g,null),Tt(i,a,"formTarget",g.formTarget,g,null)):(Tt(i,a,"encType",g.encType,g,null),Tt(i,a,"method",g.method,g,null),Tt(i,a,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Jo(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=Fr);break;case"onScroll":u!=null&&Je("scroll",i);break;case"onScrollEnd":u!=null&&Je("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=Jo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Je("beforetoggle",i),Je("toggle",i),Qo(i,"popover",u);break;case"xlinkActuate":Zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Hh.get(l)||l,Qo(i,l,u))}}function Up(i,a,l,u,g,_){switch(l){case"style":Dc(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof u=="string"?Yn(i,u):(typeof u=="number"||typeof u=="bigint")&&Yn(i,""+u);break;case"onScroll":u!=null&&Je("scroll",i);break;case"onScrollEnd":u!=null&&Je("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ac.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),_=i[mn]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(a,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,u,g);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):Qo(i,l,u)}}}function Sn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",i),Je("load",i);var u=!1,g=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,_,S,l,null)}}g&&Tt(i,a,"srcSet",l.srcSet,l,null),u&&Tt(i,a,"src",l.src,l,null);return;case"input":Je("invalid",i);var j=_=S=g=null,K=null,oe=null;for(u in l)if(l.hasOwnProperty(u)){var fe=l[u];if(fe!=null)switch(u){case"name":g=fe;break;case"type":S=fe;break;case"checked":K=fe;break;case"defaultChecked":oe=fe;break;case"value":_=fe;break;case"defaultValue":j=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Tt(i,a,u,fe,l,null)}}Fh(i,_,j,K,oe,S,g,!1);return;case"select":Je("invalid",i),u=S=_=null;for(g in l)if(l.hasOwnProperty(g)&&(j=l[g],j!=null))switch(g){case"value":_=j;break;case"defaultValue":S=j;break;case"multiple":u=j;default:Tt(i,a,g,j,l,null)}a=_,l=S,i.multiple=!!u,a!=null?Is(i,!!u,a,!1):l!=null&&Is(i,!!u,l,!0);return;case"textarea":Je("invalid",i),_=g=u=null;for(S in l)if(l.hasOwnProperty(S)&&(j=l[S],j!=null))switch(S){case"value":u=j;break;case"defaultValue":g=j;break;case"children":_=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Tt(i,a,S,j,l,null)}Rs(i,u,g,_);return;case"option":for(K in l)if(l.hasOwnProperty(K)&&(u=l[K],u!=null))switch(K){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Tt(i,a,K,u,l,null)}return;case"dialog":Je("beforetoggle",i),Je("toggle",i),Je("cancel",i),Je("close",i);break;case"iframe":case"object":Je("load",i);break;case"video":case"audio":for(u=0;u<du.length;u++)Je(du[u],i);break;case"image":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"embed":case"source":case"link":Je("error",i),Je("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(u=l[oe],u!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,oe,u,l,null)}return;default:if(Wo(a)){for(fe in l)l.hasOwnProperty(fe)&&(u=l[fe],u!==void 0&&Up(i,a,fe,u,l,void 0));return}}for(j in l)l.hasOwnProperty(j)&&(u=l[j],u!=null&&Tt(i,a,j,u,l,null))}function aN(i,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,j=null,K=null,oe=null,fe=null;for(he in l){var ge=l[he];if(l.hasOwnProperty(he)&&ge!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":K=ge;default:u.hasOwnProperty(he)||Tt(i,a,he,null,u,ge)}}for(var ce in u){var he=u[ce];if(ge=l[ce],u.hasOwnProperty(ce)&&(he!=null||ge!=null))switch(ce){case"type":_=he;break;case"name":g=he;break;case"checked":oe=he;break;case"defaultChecked":fe=he;break;case"value":S=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:he!==ge&&Tt(i,a,ce,he,u,ge)}}Xo(i,S,j,K,oe,fe,_,g);return;case"select":he=S=j=ce=null;for(_ in l)if(K=l[_],l.hasOwnProperty(_)&&K!=null)switch(_){case"value":break;case"multiple":he=K;default:u.hasOwnProperty(_)||Tt(i,a,_,null,u,K)}for(g in u)if(_=u[g],K=l[g],u.hasOwnProperty(g)&&(_!=null||K!=null))switch(g){case"value":ce=_;break;case"defaultValue":j=_;break;case"multiple":S=_;default:_!==K&&Tt(i,a,g,_,u,K)}a=j,l=S,u=he,ce!=null?Is(i,!!l,ce,!1):!!u!=!!l&&(a!=null?Is(i,!!l,a,!0):Is(i,!!l,l?[]:"",!1));return;case"textarea":he=ce=null;for(j in l)if(g=l[j],l.hasOwnProperty(j)&&g!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Tt(i,a,j,null,u,g)}for(S in u)if(g=u[S],_=l[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":ce=g;break;case"defaultValue":he=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==_&&Tt(i,a,S,g,u,_)}Bh(i,ce,he);return;case"option":for(var xe in l)if(ce=l[xe],l.hasOwnProperty(xe)&&ce!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":i.selected=!1;break;default:Tt(i,a,xe,null,u,ce)}for(K in u)if(ce=u[K],he=l[K],u.hasOwnProperty(K)&&ce!==he&&(ce!=null||he!=null))switch(K){case"selected":i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Tt(i,a,K,ce,u,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in l)ce=l[ke],l.hasOwnProperty(ke)&&ce!=null&&!u.hasOwnProperty(ke)&&Tt(i,a,ke,null,u,ce);for(oe in u)if(ce=u[oe],he=l[oe],u.hasOwnProperty(oe)&&ce!==he&&(ce!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,a));break;default:Tt(i,a,oe,ce,u,he)}return;default:if(Wo(a)){for(var At in l)ce=l[At],l.hasOwnProperty(At)&&ce!==void 0&&!u.hasOwnProperty(At)&&Up(i,a,At,void 0,u,ce);for(fe in u)ce=u[fe],he=l[fe],!u.hasOwnProperty(fe)||ce===he||ce===void 0&&he===void 0||Up(i,a,fe,ce,u,he);return}}for(var ee in l)ce=l[ee],l.hasOwnProperty(ee)&&ce!=null&&!u.hasOwnProperty(ee)&&Tt(i,a,ee,null,u,ce);for(ge in u)ce=u[ge],he=l[ge],!u.hasOwnProperty(ge)||ce===he||ce==null&&he==null||Tt(i,a,ge,ce,u,he)}function V1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],_=g.transferSize,S=g.initiatorType,j=g.duration;if(_&&j&&V1(S)){for(S=0,j=g.responseEnd,u+=1;u<l.length;u++){var K=l[u],oe=K.startTime;if(oe>j)break;var fe=K.transferSize,ge=K.initiatorType;fe&&V1(ge)&&(K=K.responseEnd,S+=fe*(K<j?1:(j-oe)/(K-oe)))}if(--u,a+=8*(_+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var zp=null,Fp=null;function $d(i){return i.nodeType===9?i:i.ownerDocument}function j1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Bp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qp=null;function lN(){var i=window.event;return i&&i.type==="popstate"?i===qp?!1:(qp=i,!0):(qp=null,!1)}var U1=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,z1=typeof Promise=="function"?Promise:void 0,uN=typeof queueMicrotask=="function"?queueMicrotask:typeof z1<"u"?function(i){return z1.resolve(null).then(i).catch(hN)}:U1;function hN(i){setTimeout(function(){throw i})}function Ws(i){return i==="head"}function F1(i,a){var l=a,u=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){i.removeChild(g),Dl(a);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")mu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,mu(l);for(var _=l.firstChild;_;){var S=_.nextSibling,j=_.nodeName;_[li]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=S}}else l==="body"&&mu(i.ownerDocument.body);l=g}while(l);Dl(a)}function B1(i,a){var l=i;i=0;do{var u=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=u}while(l)}function Hp(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Hp(l),Yo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function dN(i,a,l,u){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[li])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Rr(i.nextSibling),i===null)break}return null}function fN(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Rr(i.nextSibling),i===null))return null;return i}function q1(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Rr(i.nextSibling),i===null))return null;return i}function $p(i){return i.data==="$?"||i.data==="$~"}function Gp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function mN(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Rr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Kp=null;function H1(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Rr(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function $1(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function G1(i,a,l){switch(a=$d(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function mu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Yo(i)}var Nr=new Map,K1=new Set;function Gd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ls=M.d;M.d={f:gN,r:pN,D:yN,C:_N,L:vN,m:bN,X:xN,S:wN,M:EN};function gN(){var i=ls.f(),a=jd();return i||a}function pN(i){var a=_r(i);a!==null&&a.tag===5&&a.type==="form"?ub(a):ls.r(i)}var Nl=typeof document>"u"?null:document;function Y1(i,a,l){var u=Nl;if(u&&typeof a=="string"&&a){var g=Kn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),K1.has(g)||(K1.add(g),i={rel:i,crossOrigin:l,href:a},u.querySelector(g)===null&&(a=u.createElement("link"),Sn(a,"link",i),Jt(a),u.head.appendChild(a)))}}function yN(i){ls.D(i),Y1("dns-prefetch",i,null)}function _N(i,a){ls.C(i,a),Y1("preconnect",i,a)}function vN(i,a,l){ls.L(i,a,l);var u=Nl;if(u&&i&&a){var g='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Kn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Kn(l.imageSizes)+'"]')):g+='[href="'+Kn(i)+'"]';var _=g;switch(a){case"style":_=Cl(i);break;case"script":_=kl(i)}Nr.has(_)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Nr.set(_,i),u.querySelector(g)!==null||a==="style"&&u.querySelector(gu(_))||a==="script"&&u.querySelector(pu(_))||(a=u.createElement("link"),Sn(a,"link",i),Jt(a),u.head.appendChild(a)))}}function bN(i,a){ls.m(i,a);var l=Nl;if(l&&i){var u=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Kn(u)+'"][href="'+Kn(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=kl(i)}if(!Nr.has(_)&&(i=y({rel:"modulepreload",href:i},a),Nr.set(_,i),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(pu(_)))return}u=l.createElement("link"),Sn(u,"link",i),Jt(u),l.head.appendChild(u)}}}function wN(i,a,l){ls.S(i,a,l);var u=Nl;if(u&&i){var g=ui(u).hoistableStyles,_=Cl(i);a=a||"default";var S=g.get(_);if(!S){var j={loading:0,preload:null};if(S=u.querySelector(gu(_)))j.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Nr.get(_))&&Yp(i,l);var K=S=u.createElement("link");Jt(K),Sn(K,"link",i),K._p=new Promise(function(oe,fe){K.onload=oe,K.onerror=fe}),K.addEventListener("load",function(){j.loading|=1}),K.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Kd(S,a,u)}S={type:"stylesheet",instance:S,count:1,state:j},g.set(_,S)}}}function xN(i,a){ls.X(i,a);var l=Nl;if(l&&i){var u=ui(l).hoistableScripts,g=kl(i),_=u.get(g);_||(_=l.querySelector(pu(g)),_||(i=y({src:i,async:!0},a),(a=Nr.get(g))&&Qp(i,a),_=l.createElement("script"),Jt(_),Sn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function EN(i,a){ls.M(i,a);var l=Nl;if(l&&i){var u=ui(l).hoistableScripts,g=kl(i),_=u.get(g);_||(_=l.querySelector(pu(g)),_||(i=y({src:i,async:!0,type:"module"},a),(a=Nr.get(g))&&Qp(i,a),_=l.createElement("script"),Jt(_),Sn(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function Q1(i,a,l,u){var g=(g=ye.current)?Gd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Cl(l.href),l=ui(g).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Cl(l.href);var _=ui(g).hoistableStyles,S=_.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=g.querySelector(gu(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Nr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Nr.set(i,l),_||TN(g,i,l,S.state))),a&&u===null)throw Error(r(528,""));return S}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=kl(l),l=ui(g).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Cl(i){return'href="'+Kn(i)+'"'}function gu(i){return'link[rel="stylesheet"]['+i+"]"}function X1(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function TN(i,a,l,u){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=i.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Sn(a,"link",l),Jt(a),i.head.appendChild(a))}function kl(i){return'[src="'+Kn(i)+'"]'}function pu(i){return"script[async]"+i}function W1(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=i.querySelector('style[data-href~="'+Kn(l.href)+'"]');if(u)return a.instance=u,Jt(u),u;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Jt(u),Sn(u,"style",g),Kd(u,l.precedence,i),a.instance=u;case"stylesheet":g=Cl(l.href);var _=i.querySelector(gu(g));if(_)return a.state.loading|=4,a.instance=_,Jt(_),_;u=X1(l),(g=Nr.get(g))&&Yp(u,g),_=(i.ownerDocument||i).createElement("link"),Jt(_);var S=_;return S._p=new Promise(function(j,K){S.onload=j,S.onerror=K}),Sn(_,"link",u),a.state.loading|=4,Kd(_,l.precedence,i),a.instance=_;case"script":return _=kl(l.src),(g=i.querySelector(pu(_)))?(a.instance=g,Jt(g),g):(u=l,(g=Nr.get(_))&&(u=y({},l),Qp(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Jt(g),Sn(g,"link",u),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Kd(u,l.precedence,i));return a.instance}function Kd(i,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var j=u[S];if(j.dataset.precedence===a)_=j;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Yp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Qp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Yd=null;function J1(i,a,l){if(Yd===null){var u=new Map,g=Yd=new Map;g.set(l,u)}else g=Yd,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var _=l[g];if(!(_[li]||_[Wt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(a)||"";S=i+S;var j=u.get(S);j?j.push(_):u.set(S,[_])}}return u}function Z1(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function AN(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ew(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function SN(i,a,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Cl(u.href),_=a.querySelector(gu(g));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Qd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=_,Jt(_);return}_=a.ownerDocument||a,u=X1(u),(g=Nr.get(g))&&Yp(u,g),_=_.createElement("link"),Jt(_);var S=_;S._p=new Promise(function(j,K){S.onload=j,S.onerror=K}),Sn(_,"link",u),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Qd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var Xp=0;function IN(i,a){return i.stylesheets&&i.count===0&&Wd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var u=setTimeout(function(){if(i.stylesheets&&Wd(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+a);0<i.imgBytes&&Xp===0&&(Xp=62500*oN());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Wd(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Xp?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xd=null;function Wd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xd=new Map,a.forEach(RN,i),Xd=null,Qd.call(i))}function RN(i,a){if(!(a.state.loading&4)){var l=Xd.get(i);if(l)var u=l.get(null);else{l=new Map,Xd.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}g=a.instance,S=g.getAttribute("data-precedence"),_=l.get(S)||u,_===u&&l.set(null,g),l.set(S,g),this.count++,u=Qd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var yu={$$typeof:z,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function NN(i,a,l,u,g,_,S,j,K){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.hiddenUpdates=fn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function tw(i,a,l,u,g,_,S,j,K,oe,fe,ge){return i=new NN(i,a,l,S,K,oe,fe,ge,j),a=1,_===!0&&(a|=24),_=sr(3,null,null,a),i.current=_,_.stateNode=i,a=Ng(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:a},Og(_),i}function nw(i){return i?(i=ll,i):ll}function rw(i,a,l,u,g,_){g=nw(g),u.context===null?u.context=g:u.pendingContext=g,u=zs(a),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=Fs(i,u,a),l!==null&&(Zn(l,i,a),Qc(l,i,a))}function iw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Wp(i,a){iw(i,a),(i=i.alternate)&&iw(i,a)}function sw(i){if(i.tag===13||i.tag===31){var a=Ha(i,67108864);a!==null&&Zn(a,i,67108864),Wp(i,67108864)}}function aw(i){if(i.tag===13||i.tag===31){var a=ur();a=Da(a);var l=Ha(i,a);l!==null&&Zn(l,i,a),Wp(i,a)}}var Jd=!0;function CN(i,a,l,u){var g=k.T;k.T=null;var _=M.p;try{M.p=2,Jp(i,a,l,u)}finally{M.p=_,k.T=g}}function kN(i,a,l,u){var g=k.T;k.T=null;var _=M.p;try{M.p=8,Jp(i,a,l,u)}finally{M.p=_,k.T=g}}function Jp(i,a,l,u){if(Jd){var g=Zp(u);if(g===null)Lp(i,a,u,Zd,l),lw(i,u);else if(ON(g,i,a,l,u))u.stopPropagation();else if(lw(i,u),a&4&&-1<DN.indexOf(i)){for(;g!==null;){var _=_r(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=ln(_.pendingLanes);if(S!==0){var j=_;for(j.pendingLanes|=2,j.entangledLanes|=2;S;){var K=1<<31-Ct(S);j.entanglements[1]|=K,S&=~K}Ei(_),(ht&6)===0&&(Pd=$e()+500,hu(0))}}break;case 31:case 13:j=Ha(_,2),j!==null&&Zn(j,_,2),jd(),Wp(_,2)}if(_=Zp(u),_===null&&Lp(i,a,u,Zd,l),_===g)break;g=_}g!==null&&u.stopPropagation()}else Lp(i,a,u,null,l)}}function Zp(i){return i=vr(i),ey(i)}var Zd=null;function ey(i){if(Zd=null,i=ci(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=h(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Zd=i,null}function ow(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qt()){case Gn:return 2;case si:return 8;case Nt:case Lr:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var ty=!1,Js=null,Zs=null,ea=null,_u=new Map,vu=new Map,ta=[],DN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lw(i,a){switch(i){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":_u.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(a.pointerId)}}function bu(i,a,l,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},a!==null&&(a=_r(a),a!==null&&sw(a)),i):(i.eventSystemFlags|=u,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function ON(i,a,l,u,g){switch(a){case"focusin":return Js=bu(Js,i,a,l,u,g),!0;case"dragenter":return Zs=bu(Zs,i,a,l,u,g),!0;case"mouseover":return ea=bu(ea,i,a,l,u,g),!0;case"pointerover":var _=g.pointerId;return _u.set(_,bu(_u.get(_)||null,i,a,l,u,g)),!0;case"gotpointercapture":return _=g.pointerId,vu.set(_,bu(vu.get(_)||null,i,a,l,u,g)),!0}return!1}function cw(i){var a=ci(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Ur(i.priority,function(){aw(l)});return}}else if(a===31){if(a=h(l),a!==null){i.blockedOn=a,Ur(i.priority,function(){aw(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ef(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Zp(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Oc=u,l.target.dispatchEvent(u),Oc=null}else return a=_r(l),a!==null&&sw(a),i.blockedOn=l,!1;a.shift()}return!0}function uw(i,a,l){ef(i)&&l.delete(a)}function MN(){ty=!1,Js!==null&&ef(Js)&&(Js=null),Zs!==null&&ef(Zs)&&(Zs=null),ea!==null&&ef(ea)&&(ea=null),_u.forEach(uw),vu.forEach(uw)}function tf(i,a){i.blockedOn===a&&(i.blockedOn=null,ty||(ty=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,MN)))}var nf=null;function hw(i){nf!==i&&(nf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nf===i&&(nf=null);for(var a=0;a<i.length;a+=3){var l=i[a],u=i[a+1],g=i[a+2];if(typeof u!="function"){if(ey(u||l)===null)continue;break}var _=_r(l);_!==null&&(i.splice(a,3),a-=3,Zg(_,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function Dl(i){function a(K){return tf(K,i)}Js!==null&&tf(Js,i),Zs!==null&&tf(Zs,i),ea!==null&&tf(ea,i),_u.forEach(a),vu.forEach(a);for(var l=0;l<ta.length;l++){var u=ta[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ta.length&&(l=ta[0],l.blockedOn===null);)cw(l),l.blockedOn===null&&ta.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],_=l[u+1],S=g[mn]||null;if(typeof _=="function")S||hw(l);else if(S){var j=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[mn]||null)j=S.formAction;else if(ey(g)!==null)continue}else j=S.action;typeof j=="function"?l[u+1]=j:(l.splice(u,3),u-=3),hw(l)}}}function dw(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function ny(i){this._internalRoot=i}rf.prototype.render=ny.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,u=ur();rw(l,u,i,a,null,null)},rf.prototype.unmount=ny.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;rw(i.current,2,null,i,null,null),jd(),a[oi]=null}};function rf(i){this._internalRoot=i}rf.prototype.unstable_scheduleHydration=function(i){if(i){var a=jh();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ta.length&&a!==0&&a<ta[l].priority;l++);ta.splice(l,0,i),l===0&&cw(i)}};var fw=e.version;if(fw!=="19.2.3")throw Error(r(527,fw,"19.2.3"));M.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=m(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var PN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{Ht=sf.inject(PN),wt=sf}catch{}}return xu.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,u="",g=bb,_=wb,S=xb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=tw(i,1,!1,null,null,l,u,null,g,_,S,dw),i[oi]=a.current,jp(i),new ny(a)},xu.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var u=!1,g="",_=bb,S=wb,j=xb,K=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError),l.formState!==void 0&&(K=l.formState)),a=tw(i,1,!0,a,l??null,u,g,K,_,S,j,dw),a.context=nw(null),l=a.current,u=ur(),u=Da(u),g=zs(u),g.callback=null,Fs(l,g,u),l=u,a.current.lanes=l,Ca(a,l),Ei(a),i[oi]=a.current,jp(i),new rf(a)},xu.version="19.2.3",xu}var Ew;function KN(){if(Ew)return sy.exports;Ew=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sy.exports=GN(),sy.exports}var YN=KN();var Tw="popstate";function QN(n={}){function e(s,o){let{pathname:c="/",search:h="",hash:d=""}=Vo(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ky("",{pathname:c,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),h="";if(c&&c.getAttribute("href")){let d=s.location.href,m=d.indexOf("#");h=m===-1?d:d.slice(0,m)}return h+"#"+(typeof o=="string"?o:Xu(o))}function r(s,o){jr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return WN(e,t,r,n)}function Lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XN(){return Math.random().toString(36).substring(2,10)}function Aw(n,e){return{usr:n.state,key:n.key,idx:e}}function ky(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||r||XN()}}function Xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function WN(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,h="POP",d=null,m=p();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function p(){return(c.state||{idx:null}).idx}function y(){h="POP";let V=p(),L=V==null?null:V-m;m=V,d&&d({action:h,location:P.location,delta:L})}function v(V,L){h="PUSH";let q=ky(P.location,V,L);t&&t(q,V),m=p()+1;let z=Aw(q,m),H=P.createHref(q);try{c.pushState(z,"",H)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(H)}o&&d&&d({action:h,location:P.location,delta:1})}function w(V,L){h="REPLACE";let q=ky(P.location,V,L);t&&t(q,V),m=p();let z=Aw(q,m),H=P.createHref(q);c.replaceState(z,"",H),o&&d&&d({action:h,location:P.location,delta:0})}function A(V){return JN(V)}let P={get action(){return h},get location(){return n(s,c)},listen(V){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Tw,y),d=V,()=>{s.removeEventListener(Tw,y),d=null}},createHref(V){return e(s,V)},createURL:A,encodeLocation(V){let L=A(V);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:w,go(V){return c.go(V)}};return P}function JN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Xu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function OT(n,e,t="/"){return ZN(n,e,t,!1)}function ZN(n,e,t,r){let s=typeof e=="string"?Vo(e):e,o=gs(s.pathname||"/",t);if(o==null)return null;let c=MT(n);eC(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let m=hC(o);h=cC(c[d],m,r)}return h}function MT(n,e=[],t=[],r="",s=!1){let o=(c,h,d=s,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Lt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let y=fs([r,p.relativePath]),v=t.concat(p);c.children&&c.children.length>0&&(Lt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),MT(c.children,e,v,y,d)),!(c.path==null&&!c.index)&&e.push({path:y,score:oC(y,c.index),routesMeta:v})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))o(c,h);else for(let d of PT(c.path))o(c,h,!0,d)}),e}function PT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=PT(r.join("/")),h=[];return h.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...c),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function eC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var tC=/^:[\w-]+$/,nC=3,rC=2,iC=1,sC=10,aC=-2,Sw=n=>n==="*";function oC(n,e){let t=n.split("/"),r=t.length;return t.some(Sw)&&(r+=aC),e&&(r+=rC),t.filter(s=>!Sw(s)).reduce((s,o)=>s+(tC.test(o)?nC:o===""?iC:sC),r)}function lC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function cC(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",c=[];for(let h=0;h<r.length;++h){let d=r[h],m=h===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},p),v=d.route;if(!y&&m&&t&&!r[r.length-1].route.index&&(y=zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:fs([o,y.pathname]),pathnameBase:pC(fs([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=fs([o,y.pathnameBase]))}return c}function zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=uC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((m,{paramName:p,isOptional:y},v)=>{if(p==="*"){let A=h[v]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=h[v];return y&&!w?m[p]=void 0:m[p]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:n}}function uC(n,e=!1,t=!0){jr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var dC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fC=n=>dC.test(n);function mC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Vo(n):n,o;if(t)if(fC(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),jr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=Iw(t.substring(1),"/"):o=Iw(t,e)}else o=e;return{pathname:o,search:yC(r),hash:_C(s)}}function Iw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function cy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VT(n){let e=gC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function jT(n,e,t,r=!1){let s;typeof n=="string"?s=Vo(n):(s={...n},Lt(!s.pathname||!s.pathname.includes("?"),cy("?","pathname","search",s)),Lt(!s.pathname||!s.pathname.includes("#"),cy("#","pathname","hash",s)),Lt(!s.search||!s.search.includes("#"),cy("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,h;if(c==null)h=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}h=y>=0?e[y]:"/"}let d=mC(s,h),m=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(m||p)&&(d.pathname+="/"),d}var fs=n=>n.join("/").replace(/\/\/+/g,"/"),pC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_C=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function bC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LT=["POST","PUT","PATCH","DELETE"];new Set(LT);var wC=["GET",...LT];new Set(wC);var gc=$.createContext(null);gc.displayName="DataRouter";var xm=$.createContext(null);xm.displayName="DataRouterState";$.createContext(!1);var UT=$.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var xC=$.createContext(new Map);xC.displayName="Fetchers";var EC=$.createContext(null);EC.displayName="Await";var ni=$.createContext(null);ni.displayName="Navigation";var yh=$.createContext(null);yh.displayName="Location";var ri=$.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var T0=$.createContext(null);T0.displayName="RouteError";function TC(n,{relative:e}={}){Lt(_h(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=$.useContext(ni),{hash:s,pathname:o,search:c}=vh(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:fs([t,o])),r.createHref({pathname:h,search:c,hash:s})}function _h(){return $.useContext(yh)!=null}function pr(){return Lt(_h(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(yh).location}var zT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FT(n){$.useContext(ni).static||$.useLayoutEffect(n)}function ws(){let{isDataRoute:n}=$.useContext(ri);return n?UC():AC()}function AC(){Lt(_h(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(gc),{basename:e,navigator:t}=$.useContext(ni),{matches:r}=$.useContext(ri),{pathname:s}=pr(),o=JSON.stringify(VT(r)),c=$.useRef(!1);return FT(()=>{c.current=!0}),$.useCallback((d,m={})=>{if(jr(c.current,zT),!c.current)return;if(typeof d=="number"){t.go(d);return}let p=jT(d,JSON.parse(o),s,m.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:fs([e,p.pathname])),(m.replace?t.replace:t.push)(p,m.state,m)},[e,t,o,s,n])}var SC=$.createContext(null);function IC(n){let e=$.useContext(ri).outlet;return $.useMemo(()=>e&&$.createElement(SC.Provider,{value:n},e),[e,n])}function BT(){let{matches:n}=$.useContext(ri),e=n[n.length-1];return e?e.params:{}}function vh(n,{relative:e}={}){let{matches:t}=$.useContext(ri),{pathname:r}=pr(),s=JSON.stringify(VT(t));return $.useMemo(()=>jT(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function RC(n,e){return qT(n,e)}function qT(n,e,t,r,s){Lt(_h(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(ni),{matches:c}=$.useContext(ri),h=c[c.length-1],d=h?h.params:{},m=h?h.pathname:"/",p=h?h.pathnameBase:"/",y=h&&h.route;{let q=y&&y.path||"";HT(m,!y||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let v=pr(),w;if(e){let q=typeof e=="string"?Vo(e):e;Lt(p==="/"||q.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${q.pathname}" was given in the \`location\` prop.`),w=q}else w=v;let A=w.pathname||"/",P=A;if(p!=="/"){let q=p.replace(/^\//,"").split("/");P="/"+A.replace(/^\//,"").split("/").slice(q.length).join("/")}let V=OT(n,{pathname:P});jr(y||V!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),jr(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=OC(V&&V.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:fs([p,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?p:fs([p,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),c,t,r,s);return e&&L?$.createElement(yh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},L):L}function NC(){let n=LC(),e=vC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:s},t):null,c)}var CC=$.createElement(NC,null),kC=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?$.createElement(ri.Provider,{value:this.props.routeContext},$.createElement(T0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DC({routeContext:n,match:e,children:t}){let r=$.useContext(gc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(ri.Provider,{value:n},t)}function OC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let p=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Lt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:v,errors:w}=t,A=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let m=t&&r?(p,y)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:bC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((p,y,v)=>{let w,A=!1,P=null,V=null;t&&(w=c&&y.route.id?c[y.route.id]:void 0,P=y.route.errorElement||CC,h&&(d<0&&v===0?(HT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,V=null):d===v&&(A=!0,V=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),q=()=>{let z;return w?z=P:A?z=V:y.route.Component?z=$.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=p,$.createElement(DC,{match:y,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:z})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?$.createElement(kC,{location:t.location,revalidation:t.revalidation,component:P,error:w,children:q(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:m}):q()},null)}function A0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MC(n){let e=$.useContext(gc);return Lt(e,A0(n)),e}function PC(n){let e=$.useContext(xm);return Lt(e,A0(n)),e}function VC(n){let e=$.useContext(ri);return Lt(e,A0(n)),e}function S0(n){let e=VC(n),t=e.matches[e.matches.length-1];return Lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function jC(){return S0("useRouteId")}function LC(){let n=$.useContext(T0),e=PC("useRouteError"),t=S0("useRouteError");return n!==void 0?n:e.errors?.[t]}function UC(){let{router:n}=MC("useNavigate"),e=S0("useNavigate"),t=$.useRef(!1);return FT(()=>{t.current=!0}),$.useCallback(async(s,o={})=>{jr(t.current,zT),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Rw={};function HT(n,e,t){!e&&!Rw[n]&&(Rw[n]=!0,jr(!1,t))}$.memo(zC);function zC({routes:n,future:e,state:t,unstable_onError:r}){return qT(n,void 0,t,r,e)}function FC(n){return IC(n.context)}function Cr(n){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:c}){Lt(!_h(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=n.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:h,navigator:s,static:o,unstable_useTransitions:c,future:{}}),[h,s,o,c]);typeof t=="string"&&(t=Vo(t));let{pathname:m="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,A=$.useMemo(()=>{let P=gs(m,h);return P==null?null:{location:{pathname:P,search:p,hash:y,state:v,key:w},navigationType:r}},[h,m,p,y,v,w,r]);return jr(A!=null,`<Router basename="${h}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:$.createElement(ni.Provider,{value:d},$.createElement(yh.Provider,{children:e,value:A}))}function qC({children:n,location:e}){return RC(Dy(n),e)}function Dy(n,e=[]){let t=[];return $.Children.forEach(n,(r,s)=>{if(!$.isValidElement(r))return;let o=[...e,s];if(r.type===$.Fragment){t.push.apply(t,Dy(r.props.children,o));return}Lt(r.type===Cr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Dy(r.props.children,o)),t.push(c)}),t}var _f="get",vf="application/x-www-form-urlencoded";function Em(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function HC(n){return Em(n)&&n.tagName.toLowerCase()==="button"}function $C(n){return Em(n)&&n.tagName.toLowerCase()==="form"}function GC(n){return Em(n)&&n.tagName.toLowerCase()==="input"}function KC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function YC(n,e){return n.button===0&&(!e||e==="_self")&&!KC(n)}var af=null;function QC(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var XC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uy(n){return n!=null&&!XC.has(n)?(jr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vf}"`),null):n}function WC(n,e){let t,r,s,o,c;if($C(n)){let h=n.getAttribute("action");r=h?gs(h,e):null,t=n.getAttribute("method")||_f,s=uy(n.getAttribute("enctype"))||vf,o=new FormData(n)}else if(HC(n)||GC(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?gs(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||_f,s=uy(n.getAttribute("formenctype"))||uy(h.getAttribute("enctype"))||vf,o=new FormData(h,n),!QC()){let{name:m,type:p,value:y}=n;if(p==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,y)}}else{if(Em(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_f,r=null,s=vf,c=n}return o&&s==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function I0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JC(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&gs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function ZC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ek(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function tk(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await ZC(o,t);return c.links?c.links():[]}return[]}));return sk(r.flat(1).filter(ek).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Nw(n,e,t,r,s,o){let c=(d,m)=>t[m]?d.route.id!==t[m].route.id:!0,h=(d,m)=>t[m].pathname!==d.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,m)=>c(d,m)||h(d,m)):o==="data"?e.filter((d,m)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(c(d,m)||h(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function nk(n,e,{includeHydrateFallback:t}={}){return rk(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function rk(n){return[...new Set(n)]}function ik(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function sk(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(ik(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function $T(){let n=$.useContext(gc);return I0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ak(){let n=$.useContext(xm);return I0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var R0=$.createContext(void 0);R0.displayName="FrameworkContext";function GT(){let n=$.useContext(R0);return I0(n,"You must render this element inside a <HydratedRouter> element"),n}function ok(n,e){let t=$.useContext(R0),[r,s]=$.useState(!1),[o,c]=$.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:m,onMouseLeave:p,onTouchStart:y}=e,v=$.useRef(null);$.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let P=L=>{L.forEach(q=>{c(q.isIntersecting)})},V=new IntersectionObserver(P,{threshold:.5});return v.current&&V.observe(v.current),()=>{V.disconnect()}}},[n]),$.useEffect(()=>{if(r){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[r]);let w=()=>{s(!0)},A=()=>{s(!1),c(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Eu(h,w),onBlur:Eu(d,A),onMouseEnter:Eu(m,w),onMouseLeave:Eu(p,A),onTouchStart:Eu(y,w)}]:[!1,v,{}]}function Eu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function lk({page:n,...e}){let{router:t}=$T(),r=$.useMemo(()=>OT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?$.createElement(uk,{page:n,matches:r,...e}):null}function ck(n){let{manifest:e,routeModules:t}=GT(),[r,s]=$.useState([]);return $.useEffect(()=>{let o=!1;return tk(n,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[n,e,t]),r}function uk({page:n,matches:e,...t}){let r=pr(),{manifest:s,routeModules:o}=GT(),{basename:c}=$T(),{loaderData:h,matches:d}=ak(),m=$.useMemo(()=>Nw(n,e,d,s,r,"data"),[n,e,d,s,r]),p=$.useMemo(()=>Nw(n,e,d,s,r,"assets"),[n,e,d,s,r]),y=$.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,P=!1;if(e.forEach(L=>{let q=s.routes[L.route.id];!q||!q.hasLoader||(!m.some(z=>z.route.id===L.route.id)&&L.route.id in h&&o[L.route.id]?.shouldRevalidate||q.hasClientLoader?P=!0:A.add(L.route.id))}),A.size===0)return[];let V=JC(n,c,"data");return P&&A.size>0&&V.searchParams.set("_routes",e.filter(L=>A.has(L.route.id)).map(L=>L.route.id).join(",")),[V.pathname+V.search]},[c,h,r,s,m,e,n,o]),v=$.useMemo(()=>nk(p,s),[p,s]),w=ck(p);return $.createElement($.Fragment,null,y.map(A=>$.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>$.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:P})=>$.createElement("link",{key:A,nonce:t.nonce,...P})))}function hk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var KT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KT&&(window.__reactRouterVersion="7.10.1")}catch{}function dk({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=$.useRef();s.current==null&&(s.current=QN({window:r,v5Compat:!0}));let o=s.current,[c,h]=$.useState({action:o.action,location:o.location}),d=$.useCallback(m=>{t===!1?h(m):$.startTransition(()=>h(m))},[t]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.createElement(BC,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t===!0})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kr=$.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:c,state:h,target:d,to:m,preventScrollReset:p,viewTransition:y,...v},w){let{basename:A,unstable_useTransitions:P}=$.useContext(ni),V=typeof m=="string"&&YT.test(m),L,q=!1;if(typeof m=="string"&&V&&(L=m,KT))try{let N=new URL(window.location.href),C=m.startsWith("//")?new URL(N.protocol+m):new URL(m),O=gs(C.pathname,A);C.origin===N.origin&&O!=null?m=O+C.search+C.hash:q=!0}catch{jr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=TC(m,{relative:s}),[H,W,F]=ok(r,v),R=pk(m,{replace:c,state:h,target:d,preventScrollReset:p,relative:s,viewTransition:y,unstable_useTransitions:P});function T(N){e&&e(N),N.defaultPrevented||R(N)}let E=$.createElement("a",{...v,...F,href:L||z,onClick:q||o?e:T,ref:hk(w,W),target:d,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?$.createElement($.Fragment,null,E,$.createElement(lk,{page:z})):E});kr.displayName="Link";var fk=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:c,viewTransition:h,children:d,...m},p){let y=vh(c,{relative:m.relative}),v=pr(),w=$.useContext(xm),{navigator:A,basename:P}=$.useContext(ni),V=w!=null&&wk(y)&&h===!0,L=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,q=v.pathname,z=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(q=q.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&P&&(z=gs(z,P)||z);const H=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let W=q===L||!s&&q.startsWith(L)&&q.charAt(H)==="/",F=z!=null&&(z===L||!s&&z.startsWith(L)&&z.charAt(L.length)==="/"),R={isActive:W,isPending:F,isTransitioning:V},T=W?e:void 0,E;typeof r=="function"?E=r(R):E=[r,W?"active":null,F?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(R):o;return $.createElement(kr,{...m,"aria-current":T,className:E,ref:p,style:N,to:c,viewTransition:h},typeof d=="function"?d(R):d)});fk.displayName="NavLink";var mk=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:c=_f,action:h,onSubmit:d,relative:m,preventScrollReset:p,viewTransition:y,...v},w)=>{let{unstable_useTransitions:A}=$.useContext(ni),P=vk(),V=bk(h,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",q=typeof h=="string"&&YT.test(h),z=H=>{if(d&&d(H),H.defaultPrevented)return;H.preventDefault();let W=H.nativeEvent.submitter,F=W?.getAttribute("formmethod")||c,R=()=>P(W||H.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:s,state:o,relative:m,preventScrollReset:p,viewTransition:y});A&&t!==!1?$.startTransition(()=>R()):R()};return $.createElement("form",{ref:w,method:L,action:V,onSubmit:r?d:z,...v,"data-discover":!q&&n==="render"?"true":void 0})});mk.displayName="Form";function gk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QT(n){let e=$.useContext(gc);return Lt(e,gk(n)),e}function pk(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:c,unstable_useTransitions:h}={}){let d=ws(),m=pr(),p=vh(n,{relative:o});return $.useCallback(y=>{if(YC(y,e)){y.preventDefault();let v=t!==void 0?t:Xu(m)===Xu(p),w=()=>d(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:c});h?$.startTransition(()=>w()):w()}},[m,d,p,t,r,e,n,s,o,c,h])}var yk=0,_k=()=>`__${String(++yk)}__`;function vk(){let{router:n}=QT("useSubmit"),{basename:e}=$.useContext(ni),t=jC(),r=n.fetch,s=n.navigate;return $.useCallback(async(o,c={})=>{let{action:h,method:d,encType:m,formData:p,body:y}=WC(o,e);if(c.navigate===!1){let v=c.fetcherKey||_k();await r(v,t,c.action||h,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||d,formEncType:c.encType||m,flushSync:c.flushSync})}else await s(c.action||h,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||d,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,s,e,t])}function bk(n,{relative:e}={}){let{basename:t}=$.useContext(ni),r=$.useContext(ri);Lt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...vh(n||".",{relative:e})},c=pr();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(p=>p==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let p=h.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:fs([t,o.pathname])),Xu(o)}function wk(n,{relative:e}={}){let t=$.useContext(UT);Lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=QT("useViewTransitionState"),s=vh(n,{relative:e});if(!t.isTransitioning)return!1;let o=gs(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=gs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zf(s.pathname,c)!=null||zf(s.pathname,o)!=null}const je=n=>typeof n=="string",Tu=()=>{let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t},Cw=n=>n==null?"":""+n,xk=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},Ek=/###/g,kw=n=>n&&n.indexOf("###")>-1?n.replace(Ek,"."):n,Dw=n=>!n||je(n),ju=(n,e,t)=>{const r=je(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Dw(n))return{};const o=kw(r[s]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++s}return Dw(n)?{}:{obj:n,k:kw(r[s])}},Ow=(n,e,t)=>{const{obj:r,k:s}=ju(n,e,Object);if(r!==void 0||e.length===1){r[s]=t;return}let o=e[e.length-1],c=e.slice(0,e.length-1),h=ju(n,c,Object);for(;h.obj===void 0&&c.length;)o=`${c[c.length-1]}.${o}`,c=c.slice(0,c.length-1),h=ju(n,c,Object),h?.obj&&typeof h.obj[`${h.k}.${o}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${o}`]=t},Tk=(n,e,t,r)=>{const{obj:s,k:o}=ju(n,e,Object);s[o]=s[o]||[],s[o].push(t)},Ff=(n,e)=>{const{obj:t,k:r}=ju(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},Ak=(n,e,t)=>{const r=Ff(n,t);return r!==void 0?r:Ff(e,t)},XT=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?je(n[r])||n[r]instanceof String||je(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):XT(n[r],e[r],t):n[r]=e[r]);return n},Ol=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Sk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ik=n=>je(n)?n.replace(/[&<>"'\/]/g,e=>Sk[e]):n;class Rk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Nk=[" ",",","?","!",";"],Ck=new Rk(20),kk=(n,e,t)=>{e=e||"",t=t||"";const r=Nk.filter(c=>e.indexOf(c)<0&&t.indexOf(c)<0);if(r.length===0)return!0;const s=Ck.getRegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let o=!s.test(n);if(!o){const c=n.indexOf(t);c>0&&!s.test(n.substring(0,c))&&(o=!0)}return o},Oy=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let s=n;for(let o=0;o<r.length;){if(!s||typeof s!="object")return;let c,h="";for(let d=o;d<r.length;++d)if(d!==o&&(h+=t),h+=r[d],c=s[h],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&d<r.length-1)continue;o+=d-o+1;break}s=c}return s},Wu=n=>n?.replace("_","-"),Dk={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};let Ok=class My{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Dk,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,s){return s&&!this.debug?null:(je(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new My(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new My(this.logger,e)}};var Ri=new Ok;class Tm{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(t)||0;this.observers[r].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,o])=>{for(let c=0;c<o;c++)s.apply(s,[e,...t])})}}class Mw extends Tm{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,s={}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;e.indexOf(".")>-1?h=e.split("."):(h=[e,t],r&&(Array.isArray(r)?h.push(...r):je(r)&&o?h.push(...r.split(o)):h.push(r)));const d=Ff(this.data,h);return!d&&!t&&!r&&e.indexOf(".")>-1&&(e=h[0],t=h[1],r=h.slice(2).join(".")),d||!c||!je(r)?d:Oy(this.data?.[e]?.[t],r,o)}addResource(e,t,r,s,o={silent:!1}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let h=[e,t];r&&(h=h.concat(c?r.split(c):r)),e.indexOf(".")>-1&&(h=e.split("."),s=t,t=h[1]),this.addNamespaces(t),Ow(this.data,h,s),o.silent||this.emit("added",e,t,r,s)}addResources(e,t,r,s={silent:!1}){for(const o in r)(je(r[o])||Array.isArray(r[o]))&&this.addResource(e,t,o,r[o],{silent:!0});s.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,s,o,c={silent:!1,skipCopy:!1}){let h=[e,t];e.indexOf(".")>-1&&(h=e.split("."),s=r,r=t,t=h[1]),this.addNamespaces(t);let d=Ff(this.data,h)||{};c.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?XT(d,r,o):d={...d,...r},Ow(this.data,h,d),c.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var WT={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,s){return n.forEach(o=>{e=this.processors[o]?.process(e,t,r,s)??e}),e}};const JT=Symbol("i18next/PATH_KEY");function Mk(){const n=[],e=Object.create(null);let t;return e.get=(r,s)=>(t?.revoke?.(),s===JT?n:(n.push(s),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Py(n,e){const{[JT]:t}=n(Mk());return t.join(e?.keySeparator??".")}const Pw={},hy=n=>!je(n)&&typeof n!="boolean"&&typeof n!="number";class Bf extends Tm{constructor(e,t={}){super(),xk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(e==null)return!1;const s=this.resolve(e,r);if(s?.res===void 0)return!1;const o=hy(s.res);return!(r.returnObjects===!1&&o)}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const c=r&&e.indexOf(r)>-1,h=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!kk(e,r,s);if(c&&!h){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:je(o)?[o]:o};const m=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(m[0])>-1)&&(o=m.shift()),e=m.join(s)}return{key:e,namespaces:je(o)?[o]:o}}translate(e,t,r){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Py(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const o=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:h,namespaces:d}=this.extractFromKey(e[e.length-1],s),m=d[d.length-1];let p=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const y=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y?.toLowerCase()==="cimode")return v?o?{res:`${m}${p}${h}`,usedKey:h,exactUsedKey:h,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(s)}:`${m}${p}${h}`:o?{res:h,usedKey:h,exactUsedKey:h,usedLng:y,usedNS:m,usedParams:this.getUsedParamsDetails(s)}:h;const w=this.resolve(e,s);let A=w?.res;const P=w?.usedKey||h,V=w?.exactUsedKey||h,L=["[object Number]","[object Function]","[object RegExp]"],q=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,z=!this.i18nFormat||this.i18nFormat.handleAsObject,H=s.count!==void 0&&!je(s.count),W=Bf.hasDefaultValue(s),F=H?this.pluralResolver.getSuffix(y,s.count,s):"",R=s.ordinal&&H?this.pluralResolver.getSuffix(y,s.count,{ordinal:!1}):"",T=H&&!s.ordinal&&s.count===0,E=T&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${F}`]||s[`defaultValue${R}`]||s.defaultValue;let N=A;z&&!A&&W&&(N=E);const C=hy(N),O=Object.prototype.toString.apply(N);if(z&&N&&C&&L.indexOf(O)<0&&!(je(q)&&Array.isArray(N))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,N,{...s,ns:d}):`key '${h} (${this.language})' returned an object instead of string.`;return o?(w.res=D,w.usedParams=this.getUsedParamsDetails(s),w):D}if(c){const D=Array.isArray(N),G=D?[]:{},Z=D?V:P;for(const k in N)if(Object.prototype.hasOwnProperty.call(N,k)){const M=`${Z}${c}${k}`;W&&!A?G[k]=this.translate(M,{...s,defaultValue:hy(E)?E[k]:void 0,joinArrays:!1,ns:d}):G[k]=this.translate(M,{...s,joinArrays:!1,ns:d}),G[k]===M&&(G[k]=N[k])}A=G}}else if(z&&je(q)&&Array.isArray(A))A=A.join(q),A&&(A=this.extendTranslation(A,e,s,r));else{let D=!1,G=!1;!this.isValidLookup(A)&&W&&(D=!0,A=E),this.isValidLookup(A)||(G=!0,A=h);const k=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:A,M=W&&E!==A&&this.options.updateMissing;if(G||D||M){if(this.logger.log(M?"updateKey":"missingKey",y,m,h,M?E:A),c){const B=this.resolve(h,{...s,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let J=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let B=0;B<Q.length;B++)J.push(Q[B]);else this.options.saveMissingTo==="all"?J=this.languageUtils.toResolveHierarchy(s.lng||this.language):J.push(s.lng||this.language);const se=(B,Y,le)=>{const re=W&&le!==A?le:k;this.options.missingKeyHandler?this.options.missingKeyHandler(B,m,Y,re,M,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(B,m,Y,re,M,s),this.emit("missingKey",B,m,Y,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?J.forEach(B=>{const Y=this.pluralResolver.getSuffixes(B,s);T&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(le=>{se([B],h+le,s[`defaultValue${le}`]||E)})}):se(J,h,E))}A=this.extendTranslation(A,e,s,w,r),G&&A===h&&this.options.appendNamespaceToMissingKey&&(A=`${m}${p}${h}`),(G||D)&&this.options.parseMissingKeyHandler&&(A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${m}${p}${h}`:h,D?A:void 0,s))}return o?(w.res=A,w.usedParams=this.getUsedParamsDetails(s),w):A}extendTranslation(e,t,r,s,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=je(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(d){const y=e.match(this.interpolator.nestingRegexp);m=y&&y.length}let p=r.replace&&!je(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||s.usedLng,r),d){const y=e.match(this.interpolator.nestingRegexp),v=y&&y.length;m<v&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...y)=>o?.[0]===y[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${y[0]} in key: ${t[0]}`),null):this.translate(...y,t),r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,h=je(c)?[c]:c;return e!=null&&h?.length&&r.applyPostProcessor!==!1&&(e=WT.handle(h,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,s,o,c,h;return je(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const m=this.extractFromKey(d,t),p=m.key;s=p;let y=m.namespaces;this.options.fallbackNS&&(y=y.concat(this.options.fallbackNS));const v=t.count!==void 0&&!je(t.count),w=v&&!t.ordinal&&t.count===0,A=t.context!==void 0&&(je(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);y.forEach(V=>{this.isValidLookup(r)||(h=V,!Pw[`${P[0]}-${V}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(Pw[`${P[0]}-${V}`]=!0,this.logger.warn(`key "${s}" for languages "${P.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(L=>{if(this.isValidLookup(r))return;c=L;const q=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(q,p,L,V,t);else{let H;v&&(H=this.pluralResolver.getSuffix(L,t.count,t));const W=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(t.ordinal&&H.indexOf(F)===0&&q.push(p+H.replace(F,this.options.pluralSeparator)),q.push(p+H),w&&q.push(p+W)),A){const R=`${p}${this.options.contextSeparator||"_"}${t.context}`;q.push(R),v&&(t.ordinal&&H.indexOf(F)===0&&q.push(R+H.replace(F,this.options.pluralSeparator)),q.push(R+H),w&&q.push(R+W))}}let z;for(;z=q.pop();)this.isValidLookup(r)||(o=z,r=this.getResource(L,V,z,t))}))})}),{res:r,usedKey:s,exactUsedKey:o,usedLng:c,usedNS:h}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,s):this.resourceStore.getResource(e,t,r,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!je(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const o of t)delete s[o]}return s}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class Vw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Wu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(je(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return t=s;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(c=>{if(c===o)return c;if(!(c.indexOf("-")<0&&o.indexOf("-")<0)&&(c.indexOf("-")>0&&o.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===o||c.indexOf(o)===0&&o.length>1))return c})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),je(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],o=c=>{c&&(this.isSupportedCode(c)?s.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return je(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):je(e)&&o(this.formatLanguageCode(e)),r.forEach(c=>{s.indexOf(c)<0&&o(this.formatLanguageCode(c))}),s}}const jw={zero:0,one:1,two:2,few:3,many:4,other:5},Lw={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Pk{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=Wu(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let c;try{c=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Lw;if(!e.match(/-|_/))return Lw;const d=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(d,t)}return this.pluralRulesCache[o]=c,c}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((s,o)=>jw[s]-jw[o]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const Uw=(n,e,t,r=".",s=!0)=>{let o=Ak(n,e,t);return!o&&s&&je(t)&&(o=Oy(n,t,r),o===void 0&&(o=Oy(e,t,r))),o},dy=n=>n.replace(/\$/g,"$$$$");class zw{constructor(e={}){this.logger=Ri.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:s,prefix:o,prefixEscaped:c,suffix:h,suffixEscaped:d,formatSeparator:m,unescapeSuffix:p,unescapePrefix:y,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:A,nestingSuffixEscaped:P,nestingOptionsSeparator:V,maxReplaces:L,alwaysFormat:q}=e.interpolation;this.escape=t!==void 0?t:Ik,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Ol(o):c||"{{",this.suffix=h?Ol(h):d||"}}",this.formatSeparator=m||",",this.unescapePrefix=p?"":y||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=v?Ol(v):w||Ol("$t("),this.nestingSuffix=A?Ol(A):P||Ol(")"),this.nestingOptionsSeparator=V||",",this.maxReplaces=L||1e3,this.alwaysFormat=q!==void 0?q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,s){let o,c,h;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},m=w=>{if(w.indexOf(this.formatSeparator)<0){const L=Uw(t,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...s,...t,interpolationkey:w}):L}const A=w.split(this.formatSeparator),P=A.shift().trim(),V=A.join(this.formatSeparator).trim();return this.format(Uw(t,d,P,this.options.keySeparator,this.options.ignoreJSONStructure),V,r,{...s,...t,interpolationkey:P})};this.resetRegExp();const p=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>dy(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?dy(this.escape(w)):dy(w)}].forEach(w=>{for(h=0;o=w.regex.exec(e);){const A=o[1].trim();if(c=m(A),c===void 0)if(typeof p=="function"){const V=p(e,o,s);c=je(V)?V:""}else if(s&&Object.prototype.hasOwnProperty.call(s,A))c="";else if(y){c=o[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),c="";else!je(c)&&!this.useRawValueToEscape&&(c=Cw(c));const P=w.safeValue(c);if(e=e.replace(o[0],P),y?(w.regex.lastIndex+=c.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),e}nest(e,t,r={}){let s,o,c;const h=(d,m)=>{const p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;const y=d.split(new RegExp(`${p}[ ]*{`));let v=`{${y[1]}`;d=y[0],v=this.interpolate(v,c);const w=v.match(/'/g),A=v.match(/"/g);((w?.length??0)%2===0&&!A||A.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),m&&(c={...m,...c})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,P),`${d}${p}${v}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];c={...r},c=c.replace&&!je(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;const m=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(m!==-1&&(d=s[1].slice(m).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),s[1]=s[1].slice(0,m)),o=t(h.call(this,s[1].trim(),c),c),o&&s[0]===e&&!je(o))return o;je(o)||(o=Cw(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),d.length&&(o=d.reduce((p,y)=>this.format(p,y,r.lng,{...r,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const Vk=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(c=>{if(c){const[h,...d]=c.split(":"),m=d.join(":").trim().replace(/^'+|'+$/g,""),p=h.trim();t[p]||(t[p]=m),m==="false"&&(t[p]=!1),m==="true"&&(t[p]=!0),isNaN(m)||(t[p]=parseInt(m,10))}})}return{formatName:e,formatOptions:t}},Fw=n=>{const e={};return(t,r,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const c=r+JSON.stringify(o);let h=e[c];return h||(h=n(Wu(r),s),e[c]=h),h(t)}},jk=n=>(e,t,r)=>n(Wu(t),r)(e);class Lk{constructor(e={}){this.logger=Ri.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?Fw:jk;this.formats={number:r((s,o)=>{const c=new Intl.NumberFormat(s,{...o});return h=>c.format(h)}),currency:r((s,o)=>{const c=new Intl.NumberFormat(s,{...o,style:"currency"});return h=>c.format(h)}),datetime:r((s,o)=>{const c=new Intl.DateTimeFormat(s,{...o});return h=>c.format(h)}),relativetime:r((s,o)=>{const c=new Intl.RelativeTimeFormat(s,{...o});return h=>c.format(h,o.range||"day")}),list:r((s,o)=>{const c=new Intl.ListFormat(s,{...o});return h=>c.format(h)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Fw(t)}format(e,t,r,s={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(h=>h.indexOf(")")>-1)){const h=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,h)].join(this.formatSeparator)}return o.reduce((h,d)=>{const{formatName:m,formatOptions:p}=Vk(d);if(this.formats[m]){let y=h;try{const v=s?.formatParams?.[s.interpolationkey]||{},w=v.locale||v.lng||s.locale||s.lng||r;y=this.formats[m](h,w,{...p,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${m}`);return h},e)}}const Uk=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class zk extends Tm{constructor(e,t,r,s={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,s.backend,s)}queueLoad(e,t,r,s){const o={},c={},h={},d={};return e.forEach(m=>{let p=!0;t.forEach(y=>{const v=`${m}|${y}`;!r.reload&&this.store.hasResourceBundle(m,y)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?c[v]===void 0&&(c[v]=!0):(this.state[v]=1,p=!1,c[v]===void 0&&(c[v]=!0),o[v]===void 0&&(o[v]=!0),d[y]===void 0&&(d[y]=!0)))}),p||(h[m]=!0)}),(Object.keys(o).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(c),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(d)}}loaded(e,t,r){const s=e.split("|"),o=s[0],c=s[1];t&&this.emit("failedLoading",o,c,t),!t&&r&&this.store.addResourceBundle(o,c,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const h={};this.queue.forEach(d=>{Tk(d.loaded,[o],c),Uk(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(m=>{h[m]||(h[m]={});const p=d.loaded[m];p.length&&p.forEach(y=>{h[m][y]===void 0&&(h[m][y]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(d=>!d.done)}read(e,t,r,s=0,o=this.retryTimeout,c){if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:s,wait:o,callback:c});return}this.readingCalls++;const h=(m,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const y=this.waitingReads.shift();this.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(m&&p&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,s+1,o*2,c)},o);return}c(m,p)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const m=d(e,t);m&&typeof m.then=="function"?m.then(p=>h(null,p)).catch(h):h(null,m)}catch(m){h(m)}return}return d(e,t,h)}prepareLoading(e,t,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();je(e)&&(e=this.languageUtils.toResolveHierarchy(e)),je(t)&&(t=[t]);const o=this.queueLoad(e,t,r,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(c=>{this.loadOne(c)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(c,h)=>{c&&this.logger.warn(`${t}loading namespace ${o} for language ${s} failed`,c),!c&&h&&this.logger.log(`${t}loaded namespace ${o} for language ${s}`,h),this.loaded(e,c,h)})}saveMissing(e,t,r,s,o,c={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const d={...c,isUpdate:o},m=this.backend.create.bind(this.backend);if(m.length<6)try{let p;m.length===5?p=m(e,t,r,s,d):p=m(e,t,r,s),p&&typeof p.then=="function"?p.then(y=>h(null,y)).catch(h):h(null,p)}catch(p){h(p)}else m(e,t,r,s,h,d)}!e||!e[0]||this.store.addResource(e[0],t,r,s)}}}const Bw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),je(n[1])&&(e.defaultValue=n[1]),je(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),qw=n=>(je(n.ns)&&(n.ns=[n.ns]),je(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),je(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),of=()=>{},Fk=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Lu extends Tm{constructor(e={},t){if(super(),this.options=qw(e),this.services={},this.logger=Ri,this.modules={external:[]},Fk(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(je(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Bw();this.options={...r,...this.options,...qw(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const s=m=>m?typeof m=="function"?new m:m:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let m;this.modules.formatter?m=this.modules.formatter:m=Lk;const p=new Vw(this.options);this.store=new Mw(this.options.resources,this.options);const y=this.services;y.logger=Ri,y.resourceStore=this.store,y.languageUtils=p,y.pluralResolver=new Pk(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),m&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(y.formatter=s(m),y.formatter.init&&y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new zw(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new zk(s(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",(w,...A)=>{this.emit(w,...A)}),this.modules.languageDetector&&(y.languageDetector=s(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=s(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Bf(this.services,this.options),this.translator.on("*",(w,...A)=>{this.emit(w,...A)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,t||(t=of),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(m=>{this[m]=(...p)=>this.store[m](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(m=>{this[m]=(...p)=>(this.store[m](...p),this)});const h=Tu(),d=()=>{const m=(p,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(y),t(p,y)};if(this.languages&&!this.isInitialized)return m(null,this.t.bind(this));this.changeLanguage(this.options.lng,m)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),h}loadResources(e,t=of){let r=t;const s=je(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(m=>{m!=="cimode"&&o.indexOf(m)<0&&o.push(m)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),this.options.preload?.forEach?.(h=>c(h)),this.services.backendConnector.load(o,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,t,r){const s=Tu();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=of),this.services.backendConnector.reload(e,t,o=>{s.resolve(),r(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&WT.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Tu();this.emit("languageChanging",e);const s=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},o=(h,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve((...m)=>this.t(...m)),t&&t(h,(...m)=>this.t(...m))},c=h=>{!e&&!h&&this.services.languageDetector&&(h=[]);const d=je(h)?h:h&&h[0],m=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(je(h)?[h]:h);m&&(this.language||s(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector?.cacheUserLanguage?.(m)),this.loadResources(m,p=>{o(p,m)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,t,r){const s=(o,c,...h)=>{let d;typeof c!="object"?d=this.options.overloadTranslationOptionHandler([o,c].concat(h)):d={...c},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const m=this.options.keySeparator||".";let p;return d.keyPrefix&&Array.isArray(o)?p=o.map(y=>(typeof y=="function"&&(y=Py(y,{...this.options,...c})),`${d.keyPrefix}${m}${y}`)):(typeof o=="function"&&(o=Py(o,{...this.options,...c})),p=d.keyPrefix?`${d.keyPrefix}${m}${o}`:o),this.t(p,d)};return je(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(h,d)=>{const m=this.services.backendConnector.state[`${h}|${d}`];return m===-1||m===0||m===2};if(t.precheck){const h=t.precheck(this,c);if(h!==void 0)return h}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,e)&&(!s||c(o,e)))}loadNamespaces(e,t){const r=Tu();return this.options.ns?(je(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),t&&t(s)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Tu();je(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(c=>s.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return o.length?(this.options.preload=s.concat(o),this.loadResources(c=>{r.resolve(),t&&t(c)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const o=s.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Vw(Bw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const r=new Lu(e,t);return r.createInstance=Lu.createInstance,r}cloneInstance(e={},t=of){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Lu(s);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(h=>{o[h]=this[h]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const h=Object.keys(this.store.data).reduce((d,m)=>(d[m]={...this.store.data[m]},d[m]=Object.keys(d[m]).reduce((p,y)=>(p[y]={...d[m][y]},p),d[m]),d),{});o.store=new Mw(h,s),o.services.resourceStore=o.store}return e.interpolation&&(o.services.interpolator=new zw(s)),o.translator=new Bf(o.services,s),o.translator.on("*",(h,...d)=>{o.emit(h,...d)}),o.init(s,t),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const $n=Lu.createInstance();$n.createInstance;$n.dir;$n.init;$n.loadResources;$n.reloadResources;$n.use;$n.changeLanguage;$n.getFixedT;$n.t;$n.exists;$n.setDefaultNamespace;$n.hasLoadedNamespace;$n.loadNamespaces;$n.loadLanguages;const Bk=(n,e,t,r)=>{const s=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(s,"warn","react-i18next::",!0);bo(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...s):console?.warn&&console.warn(...s)},Hw={},ZT=(n,e,t,r)=>{bo(t)&&Hw[t]||(bo(t)&&(Hw[t]=new Date),Bk(n,e,t,r))},eA=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Vy=(n,e,t)=>{n.loadNamespaces(e,eA(n,t))},$w=(n,e,t,r)=>{if(bo(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Vy(n,t,r);t.forEach(s=>{n.options.ns.indexOf(s)<0&&n.options.ns.push(s)}),n.loadLanguages(e,eA(n,r))},qk=(n,e,t={})=>!e.languages||!e.languages.length?(ZT(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,n))return!1}}),bo=n=>typeof n=="string",Hk=n=>typeof n=="object"&&n!==null,$k=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Gk={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Kk=n=>Gk[n],Yk=n=>n.replace($k,Kk);let jy={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Yk,transDefaultProps:void 0};const Qk=(n={})=>{jy={...jy,...n}},Xk=()=>jy;let tA;const Wk=n=>{tA=n},Jk=()=>tA,Zk={type:"3rdParty",init(n){Qk(n.options.react),Wk(n)}},e4=$.createContext();class t4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var fy={exports:{}},my={};var Gw;function n4(){if(Gw)return my;Gw=1;var n=wm();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function h(y,v){var w=v(),A=r({inst:{value:w,getSnapshot:v}}),P=A[0].inst,V=A[1];return o(function(){P.value=w,P.getSnapshot=v,d(P)&&V({inst:P})},[y,w,v]),s(function(){return d(P)&&V({inst:P}),y(function(){d(P)&&V({inst:P})})},[y]),c(w),w}function d(y){var v=y.getSnapshot;y=y.value;try{var w=v();return!t(y,w)}catch{return!0}}function m(y,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return my.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,my}var Kw;function r4(){return Kw||(Kw=1,fy.exports=n4()),fy.exports}var i4=r4();const s4=(n,e)=>bo(e)?e:Hk(e)&&bo(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,a4={t:s4,ready:!1},o4=()=>()=>{},Un=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:s}=$.useContext(e4)||{},o=t||r||Jk();o&&!o.reportNamespaces&&(o.reportNamespaces=new t4),o||ZT(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const c=$.useMemo(()=>({...Xk(),...o?.options?.react,...e}),[o,e]),{useSuspense:h,keyPrefix:d}=c,m=s||o?.options?.defaultNS,p=bo(m)?[m]:m||["translation"],y=$.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(y);const v=$.useRef(0),w=$.useCallback(E=>{if(!o)return o4;const{bindI18n:N,bindI18nStore:C}=c,O=()=>{v.current+=1,E()};return N&&o.on(N,O),C&&o.store.on(C,O),()=>{N&&N.split(" ").forEach(D=>o.off(D,O)),C&&C.split(" ").forEach(D=>o.store.off(D,O))}},[o,c]),A=$.useRef(),P=$.useCallback(()=>{if(!o)return a4;const E=!!(o.isInitialized||o.initializedStoreOnce)&&y.every(Z=>qk(Z,o,c)),N=e.lng||o.language,C=v.current,O=A.current;if(O&&O.ready===E&&O.lng===N&&O.keyPrefix===d&&O.revision===C)return O;const G={t:o.getFixedT(N,c.nsMode==="fallback"?y:y[0],d),ready:E,lng:N,keyPrefix:d,revision:C};return A.current=G,G},[o,y,d,c,e.lng]),[V,L]=$.useState(0),{t:q,ready:z}=i4.useSyncExternalStore(w,P,P);$.useEffect(()=>{if(o&&!z&&!h){const E=()=>L(N=>N+1);e.lng?$w(o,e.lng,y,E):Vy(o,y,E)}},[o,e.lng,y,z,h,V]);const H=o||{},W=$.useRef(null),F=$.useRef(),R=E=>{const N=Object.getOwnPropertyDescriptors(E);N.__original&&delete N.__original;const C=Object.create(Object.getPrototypeOf(E),N);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:E,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},T=$.useMemo(()=>{const E=H,N=E?.language;let C=E;E&&(W.current&&W.current.__original===E?F.current!==N?(C=R(E),W.current=C,F.current=N):C=W.current:(C=R(E),W.current=C,F.current=N));const O=[q,C,z];return O.t=q,O.i18n=C,O.ready=z,O},[q,H,z,H.resolvedLanguage,H.language,H.languages]);if(o&&h&&!z)throw new Promise(E=>{const N=()=>E();e.lng?$w(o,e.lng,y,N):Vy(o,y,N)});return T},l4=()=>{};var Yw={};const nA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},c4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},rA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,h=c?n[s+1]:0,d=s+2<n.length,m=d?n[s+2]:0,p=o>>2,y=(o&3)<<4|h>>4;let v=(h&15)<<2|m>>6,w=m&63;d||(w=64,c||(v=64)),r.push(t[p],t[y],t[v],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||m==null||y==null)throw new u4;const v=o<<2|h>>4;if(r.push(v),m!==64){const w=h<<4&240|m>>2;if(r.push(w),y!==64){const A=m<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class u4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h4=function(n){const e=nA(n);return rA.encodeByteArray(e,!0)},qf=function(n){return h4(n).replace(/\./g,"")},iA=function(n){try{return rA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const d4=()=>sA().__FIREBASE_DEFAULTS__,f4=()=>{if(typeof process>"u"||typeof Yw>"u")return;const n=Yw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iA(n[1]);return e&&JSON.parse(e)},Am=()=>{try{return l4()||d4()||f4()||m4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aA=n=>Am()?.emulatorHosts?.[n],oA=n=>{const e=aA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lA=()=>Am()?.config,cA=n=>Am()?.[`_${n}`];class g4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function jo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N0(n){return(await fetch(n,{credentials:"include"})).ok}function uA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qf(JSON.stringify(t)),qf(JSON.stringify(c)),""].join(".")}const Uu={};function p4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?n.emulator.push(e):n.prod.push(e);return n}function y4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Qw=!1;function C0(n,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||Uu[n]===e||Uu[n]||Qw)return;Uu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=p4().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Qw=!0,c()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=y4(r),w=t("text"),A=document.getElementById(w)||document.createElement("span"),P=t("learnmore"),V=document.getElementById(P)||document.createElement("a"),L=t("preprendIcon"),q=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;h(z),p(V,P);const H=m();d(q,L),z.append(q,A,V,H),document.body.appendChild(z)}o?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function hA(){const n=Am()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function w4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x4(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dA(){return!hA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fA(){return!hA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mA(){try{return typeof indexedDB=="object"}catch{return!1}}function E4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const T4="FirebaseError";class zi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=T4,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?A4(o,r):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new zi(s,h,r)}}function A4(n,e){return n.replace(S4,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const S4=/\{\$([^}]+)}/g;function I4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ps(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],c=e[s];if(Xw(o)&&Xw(c)){if(!ps(o,c))return!1}else if(o!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Xw(n){return n!==null&&typeof n=="object"}function wh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ku(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function R4(n,e){const t=new N4(n,e);return t.subscribe.bind(t)}class N4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");C4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=gy),s.error===void 0&&(s.error=gy),s.complete===void 0&&(s.complete=gy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gy(){}function Yt(n){return n&&n._delegate?n._delegate:n}class va{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class k4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new g4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O4(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D4(n){return n===io?void 0:n}function O4(n){return n.instantiationMode==="EAGER"}class M4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const P4={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},V4=nt.INFO,j4={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},L4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=j4[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k0{constructor(e){this.name=e,this._logLevel=V4,this._logHandler=L4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const U4=(n,e)=>e.some(t=>n instanceof t);let Ww,Jw;function z4(){return Ww||(Ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F4(){return Jw||(Jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gA=new WeakMap,Ly=new WeakMap,pA=new WeakMap,py=new WeakMap,D0=new WeakMap;function B4(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(fa(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&gA.set(t,n)}).catch(()=>{}),D0.set(e,n),e}function q4(n){if(Ly.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Ly.set(n,e)}let Uy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ly.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function H4(n){Uy=n(Uy)}function $4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(yy(this),e,...t);return pA.set(r,e.sort?e.sort():[e]),fa(r)}:F4().includes(n)?function(...e){return n.apply(yy(this),e),fa(gA.get(this))}:function(...e){return fa(n.apply(yy(this),e))}}function G4(n){return typeof n=="function"?$4(n):(n instanceof IDBTransaction&&q4(n),U4(n,z4())?new Proxy(n,Uy):n)}function fa(n){if(n instanceof IDBRequest)return B4(n);if(py.has(n))return py.get(n);const e=G4(n);return e!==n&&(py.set(n,e),D0.set(e,n)),e}const yy=n=>D0.get(n);function K4(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),h=fa(c);return r&&c.addEventListener("upgradeneeded",d=>{r(fa(c.result),d.oldVersion,d.newVersion,fa(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Y4=["get","getKey","getAll","getAllKeys","count"],Q4=["put","add","delete","clear"],_y=new Map;function Zw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Q4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Y4.includes(t)))return;const o=async function(c,...h){const d=this.transaction(c,s?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),s&&d.done]))[0]};return _y.set(e,o),o}H4(n=>({...n,get:(e,t,r)=>Zw(e,t)||n.get(e,t,r),has:(e,t)=>!!Zw(e,t)||n.has(e,t)}));class X4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function W4(n){return n.getComponent()?.type==="VERSION"}const zy="@firebase/app",ex="0.14.6";const ys=new k0("@firebase/app"),J4="@firebase/app-compat",Z4="@firebase/analytics-compat",eD="@firebase/analytics",tD="@firebase/app-check-compat",nD="@firebase/app-check",rD="@firebase/auth",iD="@firebase/auth-compat",sD="@firebase/database",aD="@firebase/data-connect",oD="@firebase/database-compat",lD="@firebase/functions",cD="@firebase/functions-compat",uD="@firebase/installations",hD="@firebase/installations-compat",dD="@firebase/messaging",fD="@firebase/messaging-compat",mD="@firebase/performance",gD="@firebase/performance-compat",pD="@firebase/remote-config",yD="@firebase/remote-config-compat",_D="@firebase/storage",vD="@firebase/storage-compat",bD="@firebase/firestore",wD="@firebase/ai",xD="@firebase/firestore-compat",ED="firebase",TD="12.6.0";const Fy="[DEFAULT]",AD={[zy]:"fire-core",[J4]:"fire-core-compat",[eD]:"fire-analytics",[Z4]:"fire-analytics-compat",[nD]:"fire-app-check",[tD]:"fire-app-check-compat",[rD]:"fire-auth",[iD]:"fire-auth-compat",[sD]:"fire-rtdb",[aD]:"fire-data-connect",[oD]:"fire-rtdb-compat",[lD]:"fire-fn",[cD]:"fire-fn-compat",[uD]:"fire-iid",[hD]:"fire-iid-compat",[dD]:"fire-fcm",[fD]:"fire-fcm-compat",[mD]:"fire-perf",[gD]:"fire-perf-compat",[pD]:"fire-rc",[yD]:"fire-rc-compat",[_D]:"fire-gcs",[vD]:"fire-gcs-compat",[bD]:"fire-fst",[xD]:"fire-fst-compat",[wD]:"fire-vertex","fire-js":"fire-js",[ED]:"fire-js-all"};const Hf=new Map,SD=new Map,By=new Map;function tx(n,e){try{n.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wo(n){const e=n.name;if(By.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;By.set(e,n);for(const t of Hf.values())tx(t,n);for(const t of SD.values())tx(t,n);return!0}function Sm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}const ID={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ma=new bh("app","Firebase",ID);class RD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ma.create("app-deleted",{appName:this._name})}}const Lo=TD;function yA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Fy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ma.create("bad-app-name",{appName:String(s)});if(t||(t=lA()),!t)throw ma.create("no-options");const o=Hf.get(s);if(o){if(ps(t,o.options)&&ps(r,o.config))return o;throw ma.create("duplicate-app",{appName:s})}const c=new M4(s);for(const d of By.values())c.addComponent(d);const h=new RD(t,r,c);return Hf.set(s,h),h}function O0(n=Fy){const e=Hf.get(n);if(!e&&n===Fy&&lA())return yA();if(!e)throw ma.create("no-app",{appName:n});return e}function ki(n,e,t){let r=AD[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(c.join(" "));return}wo(new va(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const ND="firebase-heartbeat-database",CD=1,Ju="firebase-heartbeat-store";let vy=null;function _A(){return vy||(vy=K4(ND,CD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw ma.create("idb-open",{originalErrorMessage:n.message})})),vy}async function kD(n){try{const t=(await _A()).transaction(Ju),r=await t.objectStore(Ju).get(vA(n));return await t.done,r}catch(e){if(e instanceof zi)ys.warn(e.message);else{const t=ma.create("idb-get",{originalErrorMessage:e?.message});ys.warn(t.message)}}}async function nx(n,e){try{const r=(await _A()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,vA(n)),await r.done}catch(t){if(t instanceof zi)ys.warn(t.message);else{const r=ma.create("idb-set",{originalErrorMessage:t?.message});ys.warn(r.message)}}}function vA(n){return`${n.name}!${n.options.appId}`}const DD=1024,OD=30;class MD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>OD){const s=jD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ys.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rx(),{heartbeatsToSend:t,unsentEntries:r}=PD(this._heartbeatsCache.heartbeats),s=qf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ys.warn(e),""}}}function rx(){return new Date().toISOString().substring(0,10)}function PD(n,e=DD){const t=[];let r=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),ix(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ix(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class VD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mA()?E4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ix(n){return qf(JSON.stringify({version:2,heartbeats:n})).length}function jD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function LD(n){wo(new va("platform-logger",e=>new X4(e),"PRIVATE")),wo(new va("heartbeat",e=>new MD(e),"PRIVATE")),ki(zy,ex,n),ki(zy,ex,"esm2020"),ki("fire-js","")}LD("");var UD="firebase",zD="12.6.0";ki(UD,zD,"app");function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FD=bA,wA=new bh("auth","Firebase",bA());const $f=new k0("@firebase/auth");function BD(n,...e){$f.logLevel<=nt.WARN&&$f.warn(`Auth (${Lo}): ${n}`,...e)}function bf(n,...e){$f.logLevel<=nt.ERROR&&$f.error(`Auth (${Lo}): ${n}`,...e)}function ei(n,...e){throw M0(n,...e)}function Di(n,...e){return M0(n,...e)}function xA(n,e,t){const r={...FD(),[e]:t};return new bh("auth","Firebase",r).create(e,{appName:n.name})}function ms(n){return xA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wA.create(n,...e)}function Me(n,e,...t){if(!n)throw M0(e,...t)}function us(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bf(e),new Error(e)}function _s(n,e){n||us(e)}function qy(){return typeof self<"u"&&self.location?.href||""}function qD(){return sx()==="http:"||sx()==="https:"}function sx(){return typeof self<"u"&&self.location?.protocol||null}function HD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qD()||b4()||"connection"in navigator)?navigator.onLine:!0}function $D(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=_4()||w4()}get(){return HD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function P0(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class EA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const GD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const KD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YD=new xh(3e4,6e4);function xs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Fi(n,e,t,r,s={}){return TA(n,s,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const h=wh({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:d,...o};return v4()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&jo(n.emulatorConfig.host)&&(m.credentials="include"),EA.fetch()(await AA(n,n.config.apiHost,t,h),m)})}async function TA(n,e,t){n._canInitEmulator=!1;const r={...GD,...e};try{const s=new XD(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw lf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw lf(n,"user-disabled",c);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xA(n,p,m);ei(n,p)}}catch(s){if(s instanceof zi)throw s;ei(n,"network-request-failed",{message:String(s)})}}async function Eh(n,e,t,r,s={}){const o=await Fi(n,e,t,r,s);return"mfaPendingCredential"in o&&ei(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function AA(n,e,t,r){const s=`${e}${t}?${r}`,o=n,c=o.config.emulator?P0(n.config,s):`${n.config.apiScheme}://${s}`;return KD.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function QD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),YD.get())})}}function lf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Di(n,e,r);return s.customData._tokenResponse=t,s}function ax(n){return n!==void 0&&n.enterprise!==void 0}class WD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return QD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JD(n,e){return Fi(n,"GET","/v2/recaptchaConfig",xs(n,e))}async function ZD(n,e){return Fi(n,"POST","/v1/accounts:delete",e)}async function Gf(n,e){return Fi(n,"POST","/v1/accounts:lookup",e)}function zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eO(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),s=V0(r);Me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:r,authTime:zu(by(s.auth_time)),issuedAtTime:zu(by(s.iat)),expirationTime:zu(by(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function by(n){return Number(n)*1e3}function V0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=iA(t);return s?JSON.parse(s):(bf("Failed to decode base64 JWT payload"),null)}catch(s){return bf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ox(n){const e=V0(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ec(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zi&&tO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function tO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class nO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(n){const e=n.auth,t=await n.getIdToken(),r=await ec(n,Gf(e,{idToken:t}));Me(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?SA(s.providerUserInfo):[],c=iO(n.providerData,o),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,m=h?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,p)}async function rO(n){const e=Yt(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iO(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function sO(n,e){const t=await TA(n,{},async()=>{const r=wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await AA(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:r};return n.emulatorConfig&&jo(n.emulatorConfig.host)&&(d.credentials="include"),EA.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aO(n,e){return Fi(n,"POST","/v2/accounts:revokeToken",xs(n,e))}class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ox(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=ox(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await sO(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,c=new Yl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return us("not implemented")}}function ra(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new nO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ec(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eO(this,e)}reload(){return rO(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await ec(this,ZD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,d=t._redirectEventId??void 0,m=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:A,stsTokenManager:P}=t;Me(y&&P,e,"internal-error");const V=Yl.fromJSON(this.name,P);Me(typeof y=="string",e,"internal-error"),ra(r,e.name),ra(s,e.name),Me(typeof v=="boolean",e,"internal-error"),Me(typeof w=="boolean",e,"internal-error"),ra(o,e.name),ra(c,e.name),ra(h,e.name),ra(d,e.name),ra(m,e.name),ra(p,e.name);const L=new Wr({uid:y,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:V,createdAt:m,lastLoginAt:p});return A&&Array.isArray(A)&&(L.providerData=A.map(q=>({...q}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,t,r=!1){const s=new Yl;s.updateFromServerResponse(t);const o=new Wr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Kf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?SA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,h=new Yl;h.updateFromIdToken(r);const d=new Wr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,m),d}}const lx=new Map;function hs(n){_s(n instanceof Function,"Expected a class definition");let e=lx.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lx.set(n,e),e)}class IA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IA.type="NONE";const cx=IA;function wf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=wf(this.userKey,s.apiKey,o),this.fullPersistenceKey=wf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gf(this.auth,{idToken:e}).catch(()=>{});return t?Wr._fromGetAccountInfoResponse(this.auth,t,e):null}return Wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ql(hs(cx),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||hs(cx);const c=wf(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const p=await m._get(c);if(p){let y;if(typeof p=="string"){const v=await Gf(e,{idToken:p}).catch(()=>{});if(!v)break;y=await Wr._fromGetAccountInfoResponse(e,v,p)}else y=Wr._fromJSON(e,p);m!==o&&(h=y),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ql(o,e,r):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Ql(o,e,r))}}function ux(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OA(e))return"Blackberry";if(MA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||CA(e))&&!e.includes("edge/"))return"Chrome";if(DA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function RA(n=hn()){return/firefox\//i.test(n)}function NA(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CA(n=hn()){return/crios\//i.test(n)}function kA(n=hn()){return/iemobile/i.test(n)}function DA(n=hn()){return/android/i.test(n)}function OA(n=hn()){return/blackberry/i.test(n)}function MA(n=hn()){return/webos/i.test(n)}function j0(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oO(n=hn()){return j0(n)&&!!window.navigator?.standalone}function lO(){return x4()&&document.documentMode===10}function PA(n=hn()){return j0(n)||DA(n)||MA(n)||OA(n)||/windows phone/i.test(n)||kA(n)}function VA(n,e=[]){let t;switch(n){case"Browser":t=ux(hn());break;case"Worker":t=`${ux(hn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${r}`}class cO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{const d=e(o);c(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function uO(n,e={}){return Fi(n,"GET","/v2/passwordPolicy",xs(n,e))}const hO=6;class dO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class fO{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hx(this),this.idTokenSubscription=new hx(this),this.beforeStateQueue=new cO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gf(this,{idToken:e}),r=await Wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&h?.user&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$D()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(ms(this));const t=e?Yt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uO(this),t=new dO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aO(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&BD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Uo(n){return Yt(n)}class hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=R4(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mO(n){Im=n}function jA(n){return Im.loadJS(n)}function gO(){return Im.recaptchaEnterpriseScript}function pO(){return Im.gapiScript}function yO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class _O{constructor(){this.enterprise=new vO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const bO="recaptcha-enterprise",LA="NO_RECAPTCHA";class wO{constructor(e){this.type=bO,this.auth=Uo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{JD(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new WD(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,c(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,c,h){const d=window.grecaptcha;ax(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{c(m)}).catch(()=>{c(LA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _O().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(h=>{if(!t&&ax(window.grecaptcha))s(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gO();d.length!==0&&(d+=h),jA(d).then(()=>{s(h,o,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function dx(n,e,t,r=!1,s=!1){const o=new wO(n);let c;if(s)c=LA;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function $y(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dx(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function xO(n,e){const t=Sm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ps(o,e??{}))return s;ei(s,"already-initialized")}return t.initialize({options:e})}function EO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TO(n,e,t){const r=Uo(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=UA(e),{host:c,port:h}=AO(e),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},p=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(ps(m,r.config.emulator)&&ps(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,jo(c)?(N0(`${o}//${c}${d}`),C0("Auth",!0)):SO()}function UA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AO(n){const e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:fx(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:fx(c)}}}function fx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function SO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class L0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,t){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function IO(n,e){return Fi(n,"POST","/v1/accounts:signUp",e)}async function RO(n,e){return Eh(n,"POST","/v1/accounts:signInWithPassword",xs(n,e))}async function NO(n,e){return Fi(n,"POST","/v1/accounts:sendOobCode",xs(n,e))}async function CO(n,e){return NO(n,e)}async function kO(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}async function DO(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}class Zu extends L0{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $y(e,t,"signInWithPassword",RO);case"emailLink":return kO(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $y(e,r,"signUpPassword",IO);case"emailLink":return DO(e,{idToken:t,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xl(n,e){return Eh(n,"POST","/v1/accounts:signInWithIdp",xs(n,e))}const OO="http://localhost";class xo extends L0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ei("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const c=new xo(r,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xl(e,t)}buildRequest(){const e={requestUri:OO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wh(t)}return e}}function MO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PO(n){const e=Cu(ku(n)).link,t=e?Cu(ku(e)).deep_link_id:null,r=Cu(ku(n)).deep_link_id;return(r?Cu(ku(r)).link:null)||r||t||e||n}class U0{constructor(e){const t=Cu(ku(e)),r=t.apiKey??null,s=t.oobCode??null,o=MO(t.mode??null);Me(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=PO(e);try{return new U0(t)}catch{return null}}}class pc{constructor(){this.providerId=pc.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=U0.parseLink(t);return Me(r,"argument-error"),Zu._fromEmailAndCode(e,r.code,r.tenantId)}}pc.PROVIDER_ID="password";pc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Th extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Th{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";class cs extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";class ca extends Th{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";class ua extends Th{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ua.credential(t,r)}catch{return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com";ua.PROVIDER_ID="twitter.com";async function VO(n,e){return Eh(n,"POST","/v1/accounts:signUp",xs(n,e))}class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Wr._fromIdTokenResponse(e,r,s),c=mx(r);return new Eo({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=mx(r);return new Eo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function mx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Yf extends zi{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Yf(e,t,r,s)}}function FA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(n,o,e,r):o})}async function jO(n,e,t=!1){const r=await ec(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Eo._forOperation(n,"link",r)}async function LO(n,e,t=!1){const{auth:r}=n;if(dr(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const o=await ec(n,FA(r,s,e,n),t);Me(o.idToken,r,"internal-error");const c=V0(o.idToken);Me(c,r,"internal-error");const{sub:h}=c;return Me(n.uid===h,r,"user-mismatch"),Eo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ei(r,"user-mismatch"),o}}async function BA(n,e,t=!1){if(dr(n.app))return Promise.reject(ms(n));const r="signIn",s=await FA(n,r,e),o=await Eo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function UO(n,e){return BA(Uo(n),e)}async function qA(n){const e=Uo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zO(n,e,t){if(dr(n.app))return Promise.reject(ms(n));const r=Uo(n),c=await $y(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VO).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&qA(n),d}),h=await Eo._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function gx(n,e,t){return dr(n.app)?Promise.reject(ms(n)):UO(Yt(n),pc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qA(n),r})}async function HA(n,e){const t=Yt(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await CO(t.auth,s);o!==n.email&&await n.reload()}async function FO(n,e){return Fi(n,"POST","/v1/accounts:update",e)}async function Gy(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Yt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ec(r,FO(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function BO(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function qO(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function HO(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}const Qf="__sak";class $A{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $O=1e3,GO=10;class GA extends $A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);lO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GO):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},$O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GA.type="LOCAL";const KO=GA;class KA extends $A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KA.type="SESSION";const YA=KA;function YO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Rm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(c).map(async m=>m(t.origin,o)),d=await YO(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];function z0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class QO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=z0("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(v.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Oi(){return window}function XO(n){Oi().location.href=n}function QA(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function WO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JO(){return navigator?.serviceWorker?.controller||null}function ZO(){return QA()?self:null}const XA="firebaseLocalStorageDb",e5=1,Xf="firebaseLocalStorage",WA="fbase_key";class Ah{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nm(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function t5(){const n=indexedDB.deleteDatabase(XA);return new Ah(n).toPromise()}function Ky(){const n=indexedDB.open(XA,e5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Xf,{keyPath:WA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Xf)?e(r):(r.close(),await t5(),e(await Ky()))})})}async function px(n,e,t){const r=Nm(n,!0).put({[WA]:e,value:t});return new Ah(r).toPromise()}async function n5(n,e){const t=Nm(n,!1).get(e),r=await new Ah(t).toPromise();return r===void 0?null:r.value}function yx(n,e){const t=Nm(n,!0).delete(e);return new Ah(t).toPromise()}const r5=800,i5=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ky(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>i5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(ZO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WO(),!this.activeServiceWorker)return;this.sender=new QO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ky();return await px(e,Qf,"1"),await yx(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>px(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>n5(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Nm(s,!1).getAll();return new Ah(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const s5=JA;new xh(3e4,6e4);function a5(n,e){return e?hs(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class F0 extends L0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function o5(n){return BA(n.auth,new F0(n),n.bypassAuthState)}function l5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),LO(t,new F0(n),n.bypassAuthState)}async function c5(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),jO(t,new F0(n),n.bypassAuthState)}class ZA{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o5;case"linkViaPopup":case"linkViaRedirect":return c5;case"reauthViaPopup":case"reauthViaRedirect":return l5;default:ei(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const u5=new xh(2e3,1e4);class Gl extends ZA{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Gl.currentPopupAction&&Gl.currentPopupAction.cancel(),Gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=z0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u5.get())};e()}}Gl.currentPopupAction=null;const h5="pendingRedirect",xf=new Map;class d5 extends ZA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xf.get(this.auth._key());if(!e){try{const r=await f5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f5(n,e){const t=p5(e),r=g5(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function m5(n,e){xf.set(n._key(),e)}function g5(n){return hs(n._redirectPersistence)}function p5(n){return wf(h5,n.config.apiKey,n.name)}async function y5(n,e,t=!1){if(dr(n.app))return Promise.reject(ms(n));const r=Uo(n),s=a5(r,e),c=await new d5(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const _5=600*1e3;class v5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!e2(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_x(e))}saveEventToCache(e){this.cachedEventUids.add(_x(e)),this.lastProcessedEventTime=Date.now()}}function _x(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function e2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e2(n);default:return!1}}async function w5(n,e={}){return Fi(n,"GET","/v1/projects",e)}const x5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E5=/^https?/;async function T5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await w5(n);for(const t of e)try{if(A5(t))return}catch{}ei(n,"unauthorized-domain")}function A5(n){const e=qy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!E5.test(t))return!1;if(x5.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const S5=new xh(3e4,6e4);function vx(){const n=Oi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function I5(n){return new Promise((e,t)=>{function r(){vx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vx(),t(Di(n,"network-request-failed"))},timeout:S5.get()})}if(Oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oi().gapi?.load)r();else{const s=yO("iframefcb");return Oi()[s]=()=>{gapi.load?r():t(Di(n,"network-request-failed"))},jA(`${pO()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Ef=null,e})}let Ef=null;function R5(n){return Ef=Ef||I5(n),Ef}const N5=new xh(5e3,15e3),C5="__/auth/iframe",k5="emulator/auth/iframe",D5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M5(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?P0(e,k5):`https://${n.config.authDomain}/${C5}`,r={apiKey:e.apiKey,appName:n.name,v:Lo},s=O5.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wh(r).slice(1)}`}async function P5(n){const e=await R5(n),t=Oi().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:M5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D5,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const c=Di(n,"network-request-failed"),h=Oi().setTimeout(()=>{o(c)},N5.get());function d(){Oi().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(c)})}))}const V5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j5=500,L5=600,U5="_blank",z5="http://localhost";class bx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F5(n,e,t,r=j5,s=L5){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d={...V5,width:r.toString(),height:s.toString(),top:o,left:c},m=hn().toLowerCase();t&&(h=CA(m)?U5:t),RA(m)&&(e=e||z5,d.scrollbars="yes");const p=Object.entries(d).reduce((v,[w,A])=>`${v}${w}=${A},`,"");if(oO(m)&&h!=="_self")return B5(e||"",h),new bx(null);const y=window.open(e||"",h,p);Me(y,n,"popup-blocked");try{y.focus()}catch{}return new bx(y)}function B5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const q5="__/auth/handler",H5="emulator/auth/handler",$5=encodeURIComponent("fac");async function wx(n,e,t,r,s,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lo,eventId:s};if(e instanceof zA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",I4(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))c[p]=y}if(e instanceof Th){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const p of Object.keys(h))h[p]===void 0&&delete h[p];const d=await n._getAppCheckToken(),m=d?`#${$5}=${encodeURIComponent(d)}`:"";return`${G5(n)}?${wh(h).slice(1)}${m}`}function G5({config:n}){return n.emulator?P0(n,H5):`https://${n.authDomain}/${q5}`}const wy="webStorageSupport";class K5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YA,this._completeRedirectFn=y5,this._overrideRedirectResult=m5}async _openPopup(e,t,r,s){_s(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await wx(e,t,r,qy(),s);return F5(e,o,z0())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await wx(e,t,r,qy(),s);return XO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(_s(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await P5(e),r=new v5(e);return t.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},s=>{const o=s?.[0]?.[wy];o!==void 0&&t(!!o),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return PA()||NA()||j0()}}const Y5=K5;var xx="@firebase/auth",Ex="1.11.1";class Q5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function X5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W5(n){wo(new va("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VA(n)},m=new fO(r,s,o,d);return EO(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wo(new va("auth-internal",e=>{const t=Uo(e.getProvider("auth").getImmediate());return(r=>new Q5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(xx,Ex,X5(n)),ki(xx,Ex,"esm2020")}const J5=300,Z5=cA("authIdTokenMaxAge")||J5;let Tx=null;const e3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Z5)return;const s=t?.token;Tx!==s&&(Tx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function t3(n=O0()){const e=Sm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xO(n,{popupRedirectResolver:Y5,persistence:[s5,KO,YA]}),r=cA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=e3(o.toString());qO(t,c,()=>c(t.currentUser)),BO(t,h=>c(h))}}const s=aA("auth");return s&&TO(t,`http://${s}`),t}function n3(){return document.getElementsByTagName("head")?.[0]??document}mO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Di("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",n3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W5("Browser");var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ga,t2;(function(){var n;function e(R,T){function E(){}E.prototype=T.prototype,R.F=T.prototype,R.prototype=new E,R.prototype.constructor=R,R.D=function(N,C,O){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return T.prototype[C].apply(N,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,E){E||(E=0);const N=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)N[C]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(C=0;C<16;++C)N[C]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=R.g[0],E=R.g[1],C=R.g[2];let O=R.g[3],D;D=T+(O^E&(C^O))+N[0]+3614090360&4294967295,T=E+(D<<7&4294967295|D>>>25),D=O+(C^T&(E^C))+N[1]+3905402710&4294967295,O=T+(D<<12&4294967295|D>>>20),D=C+(E^O&(T^E))+N[2]+606105819&4294967295,C=O+(D<<17&4294967295|D>>>15),D=E+(T^C&(O^T))+N[3]+3250441966&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(O^E&(C^O))+N[4]+4118548399&4294967295,T=E+(D<<7&4294967295|D>>>25),D=O+(C^T&(E^C))+N[5]+1200080426&4294967295,O=T+(D<<12&4294967295|D>>>20),D=C+(E^O&(T^E))+N[6]+2821735955&4294967295,C=O+(D<<17&4294967295|D>>>15),D=E+(T^C&(O^T))+N[7]+4249261313&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(O^E&(C^O))+N[8]+1770035416&4294967295,T=E+(D<<7&4294967295|D>>>25),D=O+(C^T&(E^C))+N[9]+2336552879&4294967295,O=T+(D<<12&4294967295|D>>>20),D=C+(E^O&(T^E))+N[10]+4294925233&4294967295,C=O+(D<<17&4294967295|D>>>15),D=E+(T^C&(O^T))+N[11]+2304563134&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(O^E&(C^O))+N[12]+1804603682&4294967295,T=E+(D<<7&4294967295|D>>>25),D=O+(C^T&(E^C))+N[13]+4254626195&4294967295,O=T+(D<<12&4294967295|D>>>20),D=C+(E^O&(T^E))+N[14]+2792965006&4294967295,C=O+(D<<17&4294967295|D>>>15),D=E+(T^C&(O^T))+N[15]+1236535329&4294967295,E=C+(D<<22&4294967295|D>>>10),D=T+(C^O&(E^C))+N[1]+4129170786&4294967295,T=E+(D<<5&4294967295|D>>>27),D=O+(E^C&(T^E))+N[6]+3225465664&4294967295,O=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(O^T))+N[11]+643717713&4294967295,C=O+(D<<14&4294967295|D>>>18),D=E+(O^T&(C^O))+N[0]+3921069994&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^O&(E^C))+N[5]+3593408605&4294967295,T=E+(D<<5&4294967295|D>>>27),D=O+(E^C&(T^E))+N[10]+38016083&4294967295,O=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(O^T))+N[15]+3634488961&4294967295,C=O+(D<<14&4294967295|D>>>18),D=E+(O^T&(C^O))+N[4]+3889429448&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^O&(E^C))+N[9]+568446438&4294967295,T=E+(D<<5&4294967295|D>>>27),D=O+(E^C&(T^E))+N[14]+3275163606&4294967295,O=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(O^T))+N[3]+4107603335&4294967295,C=O+(D<<14&4294967295|D>>>18),D=E+(O^T&(C^O))+N[8]+1163531501&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(C^O&(E^C))+N[13]+2850285829&4294967295,T=E+(D<<5&4294967295|D>>>27),D=O+(E^C&(T^E))+N[2]+4243563512&4294967295,O=T+(D<<9&4294967295|D>>>23),D=C+(T^E&(O^T))+N[7]+1735328473&4294967295,C=O+(D<<14&4294967295|D>>>18),D=E+(O^T&(C^O))+N[12]+2368359562&4294967295,E=C+(D<<20&4294967295|D>>>12),D=T+(E^C^O)+N[5]+4294588738&4294967295,T=E+(D<<4&4294967295|D>>>28),D=O+(T^E^C)+N[8]+2272392833&4294967295,O=T+(D<<11&4294967295|D>>>21),D=C+(O^T^E)+N[11]+1839030562&4294967295,C=O+(D<<16&4294967295|D>>>16),D=E+(C^O^T)+N[14]+4259657740&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^O)+N[1]+2763975236&4294967295,T=E+(D<<4&4294967295|D>>>28),D=O+(T^E^C)+N[4]+1272893353&4294967295,O=T+(D<<11&4294967295|D>>>21),D=C+(O^T^E)+N[7]+4139469664&4294967295,C=O+(D<<16&4294967295|D>>>16),D=E+(C^O^T)+N[10]+3200236656&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^O)+N[13]+681279174&4294967295,T=E+(D<<4&4294967295|D>>>28),D=O+(T^E^C)+N[0]+3936430074&4294967295,O=T+(D<<11&4294967295|D>>>21),D=C+(O^T^E)+N[3]+3572445317&4294967295,C=O+(D<<16&4294967295|D>>>16),D=E+(C^O^T)+N[6]+76029189&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(E^C^O)+N[9]+3654602809&4294967295,T=E+(D<<4&4294967295|D>>>28),D=O+(T^E^C)+N[12]+3873151461&4294967295,O=T+(D<<11&4294967295|D>>>21),D=C+(O^T^E)+N[15]+530742520&4294967295,C=O+(D<<16&4294967295|D>>>16),D=E+(C^O^T)+N[2]+3299628645&4294967295,E=C+(D<<23&4294967295|D>>>9),D=T+(C^(E|~O))+N[0]+4096336452&4294967295,T=E+(D<<6&4294967295|D>>>26),D=O+(E^(T|~C))+N[7]+1126891415&4294967295,O=T+(D<<10&4294967295|D>>>22),D=C+(T^(O|~E))+N[14]+2878612391&4294967295,C=O+(D<<15&4294967295|D>>>17),D=E+(O^(C|~T))+N[5]+4237533241&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~O))+N[12]+1700485571&4294967295,T=E+(D<<6&4294967295|D>>>26),D=O+(E^(T|~C))+N[3]+2399980690&4294967295,O=T+(D<<10&4294967295|D>>>22),D=C+(T^(O|~E))+N[10]+4293915773&4294967295,C=O+(D<<15&4294967295|D>>>17),D=E+(O^(C|~T))+N[1]+2240044497&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~O))+N[8]+1873313359&4294967295,T=E+(D<<6&4294967295|D>>>26),D=O+(E^(T|~C))+N[15]+4264355552&4294967295,O=T+(D<<10&4294967295|D>>>22),D=C+(T^(O|~E))+N[6]+2734768916&4294967295,C=O+(D<<15&4294967295|D>>>17),D=E+(O^(C|~T))+N[13]+1309151649&4294967295,E=C+(D<<21&4294967295|D>>>11),D=T+(C^(E|~O))+N[4]+4149444226&4294967295,T=E+(D<<6&4294967295|D>>>26),D=O+(E^(T|~C))+N[11]+3174756917&4294967295,O=T+(D<<10&4294967295|D>>>22),D=C+(T^(O|~E))+N[2]+718787259&4294967295,C=O+(D<<15&4294967295|D>>>17),D=E+(O^(C|~T))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const E=T-this.blockSize,N=this.C;let C=this.h,O=0;for(;O<T;){if(C==0)for(;O<=E;)s(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<T;)if(N[C++]=R.charCodeAt(O++),C==this.blockSize){s(this,N),C=0;break}}else for(;O<T;)if(N[C++]=R[O++],C==this.blockSize){s(this,N),C=0;break}}this.h=C,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var E=R.length-8;E<R.length;++E)R[E]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,E=0;E<4;++E)for(let N=0;N<32;N+=8)R[T++]=this.g[E]>>>N&255;return R};function o(R,T){var E=h;return Object.prototype.hasOwnProperty.call(E,R)?E[R]:E[R]=T(R)}function c(R,T){this.h=T;const E=[];let N=!0;for(let C=R.length-1;C>=0;C--){const O=R[C]|0;N&&O==T||(E[C]=O,N=!1)}this.g=E}var h={};function d(R){return-128<=R&&R<128?o(R,function(T){return new c([T|0],T<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return V(m(-R));const T=[];let E=1;for(let N=0;R>=E;N++)T[N]=R/E|0,E*=4294967296;return new c(T,0)}function p(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return V(p(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=m(Math.pow(T,8));let N=y;for(let O=0;O<R.length;O+=8){var C=Math.min(8,R.length-O);const D=parseInt(R.substring(O,O+C),T);C<8?(C=m(Math.pow(T,C)),N=N.j(C).add(m(D))):(N=N.j(E),N=N.add(m(D)))}return N}var y=d(0),v=d(1),w=d(16777216);n=c.prototype,n.m=function(){if(P(this))return-V(this).m();let R=0,T=1;for(let E=0;E<this.g.length;E++){const N=this.i(E);R+=(N>=0?N:4294967296+N)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(P(this))return"-"+V(this).toString(R);const T=m(Math.pow(R,6));var E=this;let N="";for(;;){const C=H(E,T).g;E=L(E,C.j(T));let O=((E.g.length>0?E.g[0]:E.h)>>>0).toString(R);if(E=C,A(E))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function P(R){return R.h==-1}n.l=function(R){return R=L(this,R),P(R)?-1:A(R)?0:1};function V(R){const T=R.g.length,E=[];for(let N=0;N<T;N++)E[N]=~R.g[N];return new c(E,~R.h).add(v)}n.abs=function(){return P(this)?V(this):this},n.add=function(R){const T=Math.max(this.g.length,R.g.length),E=[];let N=0;for(let C=0;C<=T;C++){let O=N+(this.i(C)&65535)+(R.i(C)&65535),D=(O>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);N=D>>>16,O&=65535,D&=65535,E[C]=D<<16|O}return new c(E,E[E.length-1]&-2147483648?-1:0)};function L(R,T){return R.add(V(T))}n.j=function(R){if(A(this)||A(R))return y;if(P(this))return P(R)?V(this).j(V(R)):V(V(this).j(R));if(P(R))return V(this.j(V(R)));if(this.l(w)<0&&R.l(w)<0)return m(this.m()*R.m());const T=this.g.length+R.g.length,E=[];for(var N=0;N<2*T;N++)E[N]=0;for(N=0;N<this.g.length;N++)for(let C=0;C<R.g.length;C++){const O=this.i(N)>>>16,D=this.i(N)&65535,G=R.i(C)>>>16,Z=R.i(C)&65535;E[2*N+2*C]+=D*Z,q(E,2*N+2*C),E[2*N+2*C+1]+=O*Z,q(E,2*N+2*C+1),E[2*N+2*C+1]+=D*G,q(E,2*N+2*C+1),E[2*N+2*C+2]+=O*G,q(E,2*N+2*C+2)}for(R=0;R<T;R++)E[R]=E[2*R+1]<<16|E[2*R];for(R=T;R<2*T;R++)E[R]=0;return new c(E,0)};function q(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function z(R,T){this.g=R,this.h=T}function H(R,T){if(A(T))throw Error("division by zero");if(A(R))return new z(y,y);if(P(R))return T=H(V(R),T),new z(V(T.g),V(T.h));if(P(T))return T=H(R,V(T)),new z(V(T.g),T.h);if(R.g.length>30){if(P(R)||P(T))throw Error("slowDivide_ only works with positive integers.");for(var E=v,N=T;N.l(R)<=0;)E=W(E),N=W(N);var C=F(E,1),O=F(N,1);for(N=F(N,2),E=F(E,2);!A(N);){var D=O.add(N);D.l(R)<=0&&(C=C.add(E),O=D),N=F(N,1),E=F(E,1)}return T=L(R,C.j(T)),new z(C,T)}for(C=y;R.l(T)>=0;){for(E=Math.max(1,Math.floor(R.m()/T.m())),N=Math.ceil(Math.log(E)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=m(E),D=O.j(T);P(D)||D.l(R)>0;)E-=N,O=m(E),D=O.j(T);A(O)&&(O=v),C=C.add(O),R=L(R,D)}return new z(C,R)}n.B=function(R){return H(this,R).h},n.and=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)&R.i(N);return new c(E,this.h&R.h)},n.or=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)|R.i(N);return new c(E,this.h|R.h)},n.xor=function(R){const T=Math.max(this.g.length,R.g.length),E=[];for(let N=0;N<T;N++)E[N]=this.i(N)^R.i(N);return new c(E,this.h^R.h)};function W(R){const T=R.g.length+1,E=[];for(let N=0;N<T;N++)E[N]=R.i(N)<<1|R.i(N-1)>>>31;return new c(E,R.h)}function F(R,T){const E=T>>5;T%=32;const N=R.g.length-E,C=[];for(let O=0;O<N;O++)C[O]=T>0?R.i(O+E)>>>T|R.i(O+E+1)<<32-T:R.i(O+E);return new c(C,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,t2=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=p,ga=c}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var n2,Du,r2,Tf,Yy,i2,s2,a2;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var x=0;x<f.length;++x){var I=f[x];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=t(this);function s(f,x){if(x)e:{var I=r;f=f.split(".");for(var U=0;U<f.length-1;U++){var ie=f[U];if(!(ie in I))break e;I=I[ie]}f=f[f.length-1],U=I[f],x=x(U),x!=U&&x!=null&&e(I,f,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(x){var I=[],U;for(U in x)Object.prototype.hasOwnProperty.call(x,U)&&I.push([U,x[U]]);return I}});var o=o||{},c=this||self;function h(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function d(f,x,I){return f.call.apply(f.bind,arguments)}function m(f,x,I){return m=d,m.apply(null,arguments)}function p(f,x){var I=Array.prototype.slice.call(arguments,1);return function(){var U=I.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function y(f,x){function I(){}I.prototype=x.prototype,f.Z=x.prototype,f.prototype=new I,f.prototype.constructor=f,f.Ob=function(U,ie,ue){for(var be=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)be[Be-2]=arguments[Be];return x.prototype[ie].apply(U,be)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function w(f){const x=f.length;if(x>0){const I=Array(x);for(let U=0;U<x;U++)I[U]=f[U];return I}return[]}function A(f,x){for(let U=1;U<arguments.length;U++){const ie=arguments[U];var I=typeof ie;if(I=I!="object"?I:ie?Array.isArray(ie)?"array":I:"null",I=="array"||I=="object"&&typeof ie.length=="number"){I=f.length||0;const ue=ie.length||0;f.length=I+ue;for(let be=0;be<ue;be++)f[I+be]=ie[be]}else f.push(ie)}}class P{constructor(x,I){this.i=x,this.j=I,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function V(f){c.setTimeout(()=>{throw f},0)}function L(){var f=R;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class q{constructor(){this.h=this.g=null}add(x,I){const U=z.get();U.set(x,I),this.h?this.h.next=U:this.g=U,this.h=U}}var z=new P(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,I){this.h=x,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let W,F=!1,R=new q,T=()=>{const f=Promise.resolve(void 0);W=()=>{f.then(E)}};function E(){for(var f;f=L();){try{f.h.call(f.g)}catch(I){V(I)}var x=z;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}F=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};c.addEventListener("test",I,x),c.removeEventListener("test",I,x)}catch{}return f})();function D(f){return/^[\s\xa0]*$/.test(f)}function G(f,x){C.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}y(G,C),G.prototype.init=function(f,x){const I=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(I=="mouseover"?x=f.fromElement:I=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),k=0;function M(f,x,I,U,ie){this.listener=f,this.proxy=null,this.src=x,this.type=I,this.capture=!!U,this.ha=ie,this.key=++k,this.da=this.fa=!1}function J(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Q(f,x,I){for(const U in f)x.call(I,f[U],U,f)}function se(f,x){for(const I in f)x.call(void 0,f[I],I,f)}function B(f){const x={};for(const I in f)x[I]=f[I];return x}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(f,x){let I,U;for(let ie=1;ie<arguments.length;ie++){U=arguments[ie];for(I in U)f[I]=U[I];for(let ue=0;ue<Y.length;ue++)I=Y[ue],Object.prototype.hasOwnProperty.call(U,I)&&(f[I]=U[I])}}function re(f){this.src=f,this.g={},this.h=0}re.prototype.add=function(f,x,I,U,ie){const ue=f.toString();f=this.g[ue],f||(f=this.g[ue]=[],this.h++);const be=ye(f,x,U,ie);return be>-1?(x=f[be],I||(x.fa=!1)):(x=new M(x,this.src,ue,!!U,ie),x.fa=I,f.push(x)),x};function te(f,x){const I=x.type;if(I in f.g){var U=f.g[I],ie=Array.prototype.indexOf.call(U,x,void 0),ue;(ue=ie>=0)&&Array.prototype.splice.call(U,ie,1),ue&&(J(x),f.g[I].length==0&&(delete f.g[I],f.h--))}}function ye(f,x,I,U){for(let ie=0;ie<f.length;++ie){const ue=f[ie];if(!ue.da&&ue.listener==x&&ue.capture==!!I&&ue.ha==U)return ie}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Oe={};function Re(f,x,I,U,ie){if(Array.isArray(x)){for(let ue=0;ue<x.length;ue++)Re(f,x[ue],I,U,ie);return null}return I=Qe(I),f&&f[Z]?f.J(x,I,h(U)?!!U.capture:!1,ie):_e(f,x,I,!1,U,ie)}function _e(f,x,I,U,ie,ue){if(!x)throw Error("Invalid event type");const be=h(ie)?!!ie.capture:!!ie;let Be=at(f);if(Be||(f[Ae]=Be=new re(f)),I=Be.add(x,I,U,be,ue),I.proxy)return I;if(U=Te(),I.proxy=U,U.src=f,U.listener=I,f.addEventListener)O||(ie=be),ie===void 0&&(ie=!1),f.addEventListener(x.toString(),U,ie);else if(f.attachEvent)f.attachEvent(De(x.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Te(){function f(I){return x.call(f.src,f.listener,I)}const x=Ke;return f}function Ve(f,x,I,U,ie){if(Array.isArray(x))for(var ue=0;ue<x.length;ue++)Ve(f,x[ue],I,U,ie);else U=h(U)?!!U.capture:!!U,I=Qe(I),f&&f[Z]?(f=f.i,ue=String(x).toString(),ue in f.g&&(x=f.g[ue],I=ye(x,I,U,ie),I>-1&&(J(x[I]),Array.prototype.splice.call(x,I,1),x.length==0&&(delete f.g[ue],f.h--)))):f&&(f=at(f))&&(x=f.g[x.toString()],f=-1,x&&(f=ye(x,I,U,ie)),(I=f>-1?x[f]:null)&&Ze(I))}function Ze(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[Z])te(x.i,f);else{var I=f.type,U=f.proxy;x.removeEventListener?x.removeEventListener(I,U,f.capture):x.detachEvent?x.detachEvent(De(I),U):x.addListener&&x.removeListener&&x.removeListener(U),(I=at(x))?(te(I,f),I.h==0&&(I.src=null,x[Ae]=null)):J(f)}}}function De(f){return f in Oe?Oe[f]:Oe[f]="on"+f}function Ke(f,x){if(f.da)f=!0;else{x=new G(x,this);const I=f.listener,U=f.ha||f.src;f.fa&&Ze(f),f=I.call(U,x)}return f}function at(f){return f=f[Ae],f instanceof re?f:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qe(f){return typeof f=="function"?f:(f[it]||(f[it]=function(x){return f.handleEvent(x)}),f[it])}function Fe(){N.call(this),this.i=new re(this),this.M=this,this.G=null}y(Fe,N),Fe.prototype[Z]=!0,Fe.prototype.removeEventListener=function(f,x,I,U){Ve(this,f,x,I,U)};function Xe(f,x){var I,U=f.G;if(U)for(I=[];U;U=U.G)I.push(U);if(f=f.M,U=x.type||x,typeof x=="string")x=new C(x,f);else if(x instanceof C)x.target=x.target||f;else{var ie=x;x=new C(U,f),le(x,ie)}ie=!0;let ue,be;if(I)for(be=I.length-1;be>=0;be--)ue=x.g=I[be],ie=ft(ue,U,!0,x)&&ie;if(ue=x.g=f,ie=ft(ue,U,!0,x)&&ie,ie=ft(ue,U,!1,x)&&ie,I)for(be=0;be<I.length;be++)ue=x.g=I[be],ie=ft(ue,U,!1,x)&&ie}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const I=f.g[x];for(let U=0;U<I.length;U++)J(I[U]);delete f.g[x],f.h--}}this.G=null},Fe.prototype.J=function(f,x,I,U){return this.i.add(String(f),x,!1,I,U)},Fe.prototype.K=function(f,x,I,U){return this.i.add(String(f),x,!0,I,U)};function ft(f,x,I,U){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ie=!0;for(let ue=0;ue<x.length;++ue){const be=x[ue];if(be&&!be.da&&be.capture==I){const Be=be.listener,$t=be.ha||be.src;be.fa&&te(f.i,be),ie=Be.call($t,U)!==!1&&ie}}return ie&&!U.defaultPrevented}function _n(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:c.setTimeout(f,x||0)}function Rt(f){f.g=_n(()=>{f.g=null,f.i&&(f.i=!1,Rt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class $e extends N{constructor(x,I){super(),this.m=x,this.l=I,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qt(f){N.call(this),this.h=f,this.g={}}y(qt,N);var Gn=[];function si(f){Q(f.g,function(x,I){this.g.hasOwnProperty(I)&&Ze(x)},f),f.g={}}qt.prototype.N=function(){qt.Z.N.call(this),si(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=c.JSON.stringify,Lr=c.JSON.parse,Qt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Nn(){}function vn(){}var Ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){C.call(this,"d")}y(wt,C);function Xt(){C.call(this,"c")}y(Xt,C);var Ct={},$o=null;function ai(){return $o=$o||new Fe}Ct.Ia="serverreachability";function Na(f){C.call(this,Ct.Ia,f)}y(Na,C);function Cn(f){const x=ai();Xe(x,new Na(x))}Ct.STAT_EVENT="statevent";function qi(f,x){C.call(this,Ct.STAT_EVENT,f),this.stat=x}y(qi,C);function mt(f){const x=ai();Xe(x,new qi(x,f))}Ct.Ja="timingevent";function ln(f,x){C.call(this,Ct.Ja,f),this.size=x}y(ln,C);function bn(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},x)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Go(f,x,I,U,ie,ue){f.info(function(){if(f.g)if(ue){var be="",Be=ue.split("&");for(let ut=0;ut<Be.length;ut++){var $t=Be[ut].split("=");if($t.length>1){const Ot=$t[0];$t=$t[1];const wr=Ot.split("_");be=wr.length>=2&&wr[1]=="type"?be+(Ot+"="+$t+"&"):be+(Ot+"=redacted&")}}}else be=null;else be=ue;return"XMLHTTP REQ ("+U+") [attempt "+ie+"]: "+x+`
`+I+`
`+be})}function yr(f,x,I,U,ie,ue,be){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ie+"]: "+x+`
`+I+`
`+ue+" "+be})}function fn(f,x,I,U){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+lg(f,I)+(U?" "+U:"")})}function Ca(f,x){f.info(function(){return"TIMEOUT: "+x})}wn.prototype.info=function(){};function lg(f,x){if(!f.g)return x;if(!x)return null;try{const ue=JSON.parse(x);if(ue){for(f=0;f<ue.length;f++)if(Array.isArray(ue[f])){var I=ue[f];if(!(I.length<2)){var U=I[1];if(Array.isArray(U)&&!(U.length<1)){var ie=U[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let be=1;be<U.length;be++)U[be]=""}}}}return Nt(ue)}catch{return x}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ec;function Da(){}y(Da,Nn),Da.prototype.g=function(){return new XMLHttpRequest},Ec=new Da;function Hi(f){return encodeURIComponent(String(f))}function jh(f){var x=1;f=f.split(":");const I=[];for(;x>0&&f.length;)I.push(f.shift()),x--;return f.length&&I.push(f.join(":")),I}function Ur(f,x,I,U){this.j=f,this.i=x,this.l=I,this.S=U||1,this.V=new qt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var Wt={},mn={};function oi(f,x,I){f.M=1,f.A=Oa(Zt(x)),f.u=I,f.R=!0,Ko(f,null)}function Ko(f,x){f.F=Date.now(),li(f),f.B=Zt(f.A);var I=f.B,U=f.S;Array.isArray(U)||(U=[String(U)]),Wo(I.i,"t",U),f.C=0,I=f.j.L,f.h=new zr,f.g=Jh(f.j,I?x:null,!f.u),f.P>0&&(f.O=new $e(m(f.Y,f,f.g),f.P)),x=f.V,I=f.g,U=f.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Gn[0]=ie.toString()),ie=Gn);for(let ue=0;ue<ie.length;ue++){const be=Re(I,ie[ue],U||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=f.J?B(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),Cn(),Go(f.i,f.v,f.B,f.l,f.S,f.u)}Ur.prototype.ba=function(f){f=f.target;const x=this.O;x&&qr(f)==3?x.j():this.Y(f)},Ur.prototype.Y=function(f){try{if(f==this.g)e:{const Be=qr(this.g),$t=this.g.ya(),ut=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Be!=4||$t==7||($t==8||ut<=0?Cn(3):Cn(2)),ci(this);var x=this.g.ca();this.X=x;var I=cg(this);if(this.o=x==200,yr(this.i,this.v,this.B,this.l,this.S,Be,x),this.o){if(this.U&&!this.L){t:{if(this.g){var U,ie=this.g;if((U=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(U)){var ue=U;break t}}ue=null}if(f=ue)fn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,f);else{this.o=!1,this.m=3,mt(12),nr(this),_r(this);break e}}if(this.R){f=!0;let Ot;for(;!this.K&&this.C<I.length;)if(Ot=Uh(this,I),Ot==mn){Be==4&&(this.m=4,mt(14),f=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Wt){this.m=4,mt(15),fn(this.i,this.l,I,"[Invalid Chunk]"),f=!1;break}else fn(this.i,this.l,Ot,null),ui(this,Ot);if(Lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||I.length!=0||this.h.h||(this.m=1,mt(16),f=!1),this.o=this.o&&f,!f)fn(this.i,this.l,I,"[Invalid Chunked Response]"),nr(this),_r(this);else if(I.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Lc(be),be.P=!0,mt(11))}}else fn(this.i,this.l,I,null),ui(this,I);Be==4&&nr(this),this.o&&!this.K&&(Be==4?Yh(this.j,this):(this.o=!1,li(this)))}else Gi(this.g),x==400&&I.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),nr(this),_r(this)}}}catch{}finally{}};function cg(f){if(!Lh(f))return f.g.la();const x=xn(f.g);if(x==="")return"";let I="";const U=x.length,ie=qr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return nr(f),_r(f),"";f.h.i=new c.TextDecoder}for(let ue=0;ue<U;ue++)f.h.h=!0,I+=f.h.i.decode(x[ue],{stream:!(ie&&ue==U-1)});return x.length=0,f.h.g+=I,f.C=0,f.h.g}function Lh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Uh(f,x){var I=f.C,U=x.indexOf(`
`,I);return U==-1?mn:(I=Number(x.substring(I,U)),isNaN(I)?Wt:(U+=1,U+I>x.length?mn:(x=x.slice(U,U+I),f.C=U+I,x)))}Ur.prototype.cancel=function(){this.K=!0,nr(this)};function li(f){f.T=Date.now()+f.H,Yo(f,f.H)}function Yo(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=bn(m(f.aa,f),x)}function ci(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Ur.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ca(this.i,this.B),this.M!=2&&(Cn(),mt(17)),nr(this),this.m=2,_r(this)):Yo(this,this.T-f)};function _r(f){f.j.I==0||f.K||Yh(f.j,f)}function nr(f){ci(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,si(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function ui(f,x){try{var I=f.j;if(I.I!=0&&(I.g==f||di(I.h,f))){if(!f.L&&di(I.h,f)&&I.I==3){try{var U=I.Ba.g.parse(x)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ie=U;if(ie[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<f.F)nl(I),Os(I);else break e;za(I),mt(18)}}else I.xa=ie[1],0<I.xa-I.K&&ie[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=bn(m(I.Va,I),6e3));hi(I.h)<=1&&I.ta&&(I.ta=void 0)}else _i(I,11)}else if((f.L||I.g==f)&&nl(I),!D(x))for(ie=I.Ba.g.parse(x),x=0;x<ie.length;x++){let ut=ie[x];const Ot=ut[0];if(!(Ot<=I.K))if(I.K=Ot,ut=ut[1],I.I==2)if(ut[0]=="c"){I.M=ut[1],I.ba=ut[2];const wr=ut[3];wr!=null&&(I.ka=wr,I.j.info("VER="+I.ka));const vi=ut[4];vi!=null&&(I.za=vi,I.j.info("SVER="+I.za));const Hr=ut[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(U=1.5*Hr,I.O=U,I.j.info("backChannelRequestTimeoutMs_="+U)),U=I;const $r=f.g;if($r){const Fa=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var ue=U.h;ue.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Sc(ue,ue.h),ue.h=null))}if(U.G){const rl=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(U.wa=rl,gt(U.J,U.G,rl))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-f.F,I.j.info("Handshake RTT: "+I.T+"ms")),U=I;var be=f;if(U.na=Wh(U,U.L?U.ba:null,U.W),be.L){Ic(U.h,be);var Be=be,$t=U.O;$t&&(Be.H=$t),Be.D&&(ci(Be),li(Be)),U.g=be}else Gh(U);I.i.length>0&&yi(I)}else ut[0]!="stop"&&ut[0]!="close"||_i(I,7);else I.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?_i(I,7):Vc(I):ut[0]!="noop"&&I.l&&I.l.qa(ut),I.A=0)}}Cn(4)}catch{}}var Jt=class{constructor(f,x){this.g=f,this.map=x}};function Tc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ac(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function hi(f){return f.h?1:f.g?f.g.size:0}function di(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Sc(f,x){f.g?f.g.add(x):f.h=x}function Ic(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Tc.prototype.cancel=function(){if(this.i=Rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Rc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const I of f.g.values())x=x.concat(I.G);return x}return w(f.i)}var zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(f,x){if(f){f=f.split("&");for(let I=0;I<f.length;I++){const U=f[I].indexOf("=");let ie,ue=null;U>=0?(ie=f[I].substring(0,U),ue=f[I].substring(U+1)):ie=f[I],x(ie,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function rr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof rr?(this.l=f.l,gn(this,f.j),this.o=f.o,this.g=f.g,Ss(this,f.u),this.h=f.h,Nc(this,Hh(f.i)),this.m=f.m):f&&(x=String(f).match(zh))?(this.l=!1,gn(this,x[1]||"",!0),this.o=fi(x[2]||""),this.g=fi(x[3]||"",!0),Ss(this,x[4]),this.h=fi(x[5]||"",!0),Nc(this,x[6]||"",!0),this.m=fi(x[7]||"")):(this.l=!1,this.i=new Rs(null,this.l))}rr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Ma(x,Xo,!0),":");var I=this.g;return(I||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ma(x,Xo,!0),"@"),f.push(Hi(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&f.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Ma(I,I.charAt(0)=="/"?Cc:Fh,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Ma(I,Bh)),f.join("")},rr.prototype.resolve=function(f){const x=Zt(this);let I=!!f.j;I?gn(x,f.j):I=!!f.o,I?x.o=f.o:I=!!f.g,I?x.g=f.g:I=f.u!=null;var U=f.h;if(I)Ss(x,f.u);else if(I=!!f.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var ie=x.h.lastIndexOf("/");ie!=-1&&(U=x.h.slice(0,ie+1)+U)}if(ie=U,ie==".."||ie==".")U="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){U=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const ue=[];for(let be=0;be<ie.length;){const Be=ie[be++];Be=="."?U&&be==ie.length&&ue.push(""):Be==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),U&&be==ie.length&&ue.push("")):(ue.push(Be),U=!0)}U=ue.join("/")}else U=ie}return I?x.h=U:I=f.i.toString()!=="",I?Nc(x,Hh(f.i)):I=!!f.m,I&&(x.m=f.m),x};function Zt(f){return new rr(f)}function gn(f,x,I){f.j=I?fi(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Ss(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Nc(f,x,I){x instanceof Rs?(f.i=x,Jo(f.i,f.l)):(I||(x=Ma(x,Is)),f.i=new Rs(x,f.l))}function gt(f,x,I){f.i.set(x,I)}function Oa(f){return gt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function fi(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ma(f,x,I){return typeof f=="string"?(f=encodeURI(f).replace(x,Kn),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Kn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xo=/[#\/\?@]/g,Fh=/[#\?:]/g,Cc=/[#\?]/g,Is=/[#\?@]/g,Bh=/#/g;function Rs(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Yn(f){f.g||(f.g=new Map,f.h=0,f.i&&Qo(f.i,function(x,I){f.add(decodeURIComponent(x.replace(/\+/g," ")),I)}))}n=Rs.prototype,n.add=function(f,x){Yn(this),this.i=null,f=Ns(this,f);let I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(x),this.h+=1,this};function qh(f,x){Yn(f),x=Ns(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function kc(f,x){return Yn(f),x=Ns(f,x),f.g.has(x)}n.forEach=function(f,x){Yn(this),this.g.forEach(function(I,U){I.forEach(function(ie){f.call(x,ie,U,this)},this)},this)};function Dc(f,x){Yn(f);let I=[];if(typeof x=="string")kc(f,x)&&(I=I.concat(f.g.get(Ns(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)I=I.concat(f[x]);return I}n.set=function(f,x){return Yn(this),this.i=null,f=Ns(this,f),kc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Dc(this,f),f.length>0?String(f[0]):x):x};function Wo(f,x,I){qh(f,x),I.length>0&&(f.i=null,f.g.set(Ns(f,x),w(I)),f.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let U=0;U<x.length;U++){var I=x[U];const ie=Hi(I);I=Dc(this,I);for(let ue=0;ue<I.length;ue++){let be=ie;I[ue]!==""&&(be+="="+Hi(I[ue])),f.push(be)}}return this.i=f.join("&")};function Hh(f){const x=new Rs;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Ns(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Jo(f,x){x&&!f.j&&(Yn(f),f.i=null,f.g.forEach(function(I,U){const ie=U.toLowerCase();U!=ie&&(qh(this,U),Wo(this,ie,I))},f)),f.j=x}function Fr(f,x){const I=new wn;if(c.Image){const U=new Image;U.onload=p(vr,I,"TestLoadImage: loaded",!0,x,U),U.onerror=p(vr,I,"TestLoadImage: error",!1,x,U),U.onabort=p(vr,I,"TestLoadImage: abort",!1,x,U),U.ontimeout=p(vr,I,"TestLoadImage: timeout",!1,x,U),c.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else x(!1)}function Oc(f,x){const I=new wn,U=new AbortController,ie=setTimeout(()=>{U.abort(),vr(I,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:U.signal}).then(ue=>{clearTimeout(ie),ue.ok?vr(I,"TestPingServer: ok",!0,x):vr(I,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ie),vr(I,"TestPingServer: error",!1,x)})}function vr(f,x,I,U,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),U(I)}catch{}}function Cs(){this.g=new Qt}function mi(f){this.i=f.Sb||null,this.h=f.ab||!1}y(mi,Nn),mi.prototype.g=function(){return new Pa(this.i,this.h)};function Pa(f,x){Fe.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Pa,Fe),n=Pa.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Br(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||c).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?ks(this):Br(this),this.readyState==3&&Zo(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ks(this))},n.Na=function(f){this.g&&(this.response=f,ks(this))},n.ga=function(){this.g&&ks(this)};function ks(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Br(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var I=x.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=x.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function br(f){let x="";return Q(f,function(I,U){x+=U,x+=":",x+=I,x+=`\r
`}),x}function Va(f,x,I){e:{for(U in I){var U=!1;break e}U=!0}U||(I=br(I),typeof f=="string"?I!=null&&Hi(I):gt(f,x,I))}function xt(f){Fe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(xt,Fe);var gi=/^https?$/i,Mc=["POST","PUT"];n=xt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,I,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ec.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ue){ja(this,ue);return}if(f=I||"",I=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ie in U)I.set(ie,U[ie]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ue of U.keys())I.set(ue,U.get(ue));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(I.keys()).find(ue=>ue.toLowerCase()=="content-type"),ie=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Mc,x,void 0)>=0)||U||ie||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,be]of I)this.g.setRequestHeader(ue,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ue){ja(this,ue)}};function ja(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Pc(f),$i(f)}function Pc(f){f.A||(f.A=!0,Xe(f,"complete"),Xe(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Xe(this,"complete"),Xe(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?La(this):this.Xa())},n.Xa=function(){La(this)};function La(f){if(f.h&&typeof o<"u"){if(f.v&&qr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Xe(f,"readystatechange"),qr(f)==4){f.h=!1;try{const ue=f.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var I;if(!(I=x)){var U;if(U=ue===0){let be=String(f.D).match(zh)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),U=!gi.test(be?be.toLowerCase():"")}I=U}if(I)Xe(f,"complete"),Xe(f,"success");else{f.o=6;try{var ie=qr(f)>2?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.ca()+"]",Pc(f)}}finally{$i(f)}}}}function $i(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const I=f.g;f.g=null,x||Xe(f,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Lr(x)}};function xn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(f){const x={};f=(f.g&&qr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(D(f[U]))continue;var I=jh(f[U]);const ie=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ue=x[ie]||[];x[ie]=ue,ue.push(I)}se(x,function(U){return U.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(f,x,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||x}function Ds(f){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,f),this.Za=pi("retryDelaySeedMs",1e4,f),this.Ta=pi("forwardChannelMaxRetries",2,f),this.va=pi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Tc(f&&f.concurrentRequestLimit),this.Ba=new Cs,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ds.prototype,n.ka=8,n.I=1,n.connect=function(f,x,I,U){mt(0),this.W=f,this.H=x||{},I&&U!==void 0&&(this.H.OSID=I,this.H.OAID=U),this.F=this.X,this.J=Wh(this,null,this.W),yi(this)};function Vc(f){if(el(f),f.I==3){var x=f.V++,I=Zt(f.J);if(gt(I,"SID",f.M),gt(I,"RID",x),gt(I,"TYPE","terminate"),Ua(f,I),x=new Ur(f,f.j,x),x.M=2,x.A=Oa(Zt(I)),I=!1,c.navigator&&c.navigator.sendBeacon)try{I=c.navigator.sendBeacon(x.A.toString(),"")}catch{}!I&&c.Image&&(new Image().src=x.A,I=!0),I||(x.g=Jh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),li(x)}Xh(f)}function Os(f){f.g&&(Lc(f),f.g.cancel(),f.g=null)}function el(f){Os(f),f.v&&(c.clearTimeout(f.v),f.v=null),nl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function yi(f){if(!Ac(f.h)&&!f.m){f.m=!0;var x=f.Ea;W||T(),F||(W(),F=!0),R.add(x,f),f.D=0}}function tl(f,x){return hi(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=bn(m(f.Ea,f,x),Qh(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ie=new Ur(this,this.j,f);let ue=this.o;if(this.U&&(ue?(ue=B(ue),le(ue,this.U)):ue=this.U),this.u!==null||this.R||(ie.J=ue,ue=null),this.S)e:{for(var x=0,I=0;I<this.i.length;I++){t:{var U=this.i[I];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(x+=U,x>4096){x=I;break e}if(x===4096||I===this.i.length-1){x=I+1;break e}}x=1e3}else x=1e3;x=$h(this,ie,x),I=Zt(this.J),gt(I,"RID",f),gt(I,"CVER",22),this.G&&gt(I,"X-HTTP-Session-Id",this.G),Ua(this,I),ue&&(this.R?x="headers="+Hi(br(ue))+"&"+x:this.u&&Va(I,this.u,ue)),Sc(this.h,ie),this.Ra&&gt(I,"TYPE","init"),this.S?(gt(I,"$req",x),gt(I,"SID","null"),ie.U=!0,oi(ie,I,null)):oi(ie,I,x),this.I=2}}else this.I==3&&(f?jc(this,f):this.i.length==0||Ac(this.h)||jc(this))};function jc(f,x){var I;x?I=x.l:I=f.V++;const U=Zt(f.J);gt(U,"SID",f.M),gt(U,"RID",I),gt(U,"AID",f.K),Ua(f,U),f.u&&f.o&&Va(U,f.u,f.o),I=new Ur(f,f.j,I,f.D+1),f.u===null&&(I.J=f.o),x&&(f.i=x.G.concat(f.i)),x=$h(f,I,1e3),I.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Sc(f.h,I),oi(I,U,x)}function Ua(f,x){f.H&&Q(f.H,function(I,U){gt(x,U,I)}),f.l&&Q({},function(I,U){gt(x,U,I)})}function $h(f,x,I){I=Math.min(f.i.length,I);const U=f.l?m(f.l.Ka,f.l,f):null;e:{var ie=f.i;let Be=-1;for(;;){const $t=["count="+I];Be==-1?I>0?(Be=ie[0].g,$t.push("ofs="+Be)):Be=0:$t.push("ofs="+Be);let ut=!0;for(let Ot=0;Ot<I;Ot++){var ue=ie[Ot].g;const wr=ie[Ot].map;if(ue-=Be,ue<0)Be=Math.max(0,ie[Ot].g-100),ut=!1;else try{ue="req"+ue+"_"||"";try{var be=wr instanceof Map?wr:Object.entries(wr);for(const[vi,Hr]of be){let $r=Hr;h(Hr)&&($r=Nt(Hr)),$t.push(ue+vi+"="+encodeURIComponent($r))}}catch(vi){throw $t.push(ue+"type="+encodeURIComponent("_badmap")),vi}}catch{U&&U(wr)}}if(ut){be=$t.join("&");break e}}be=void 0}return f=f.i.splice(0,I),x.G=f,be}function Gh(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;W||T(),F||(W(),F=!0),R.add(x,f),f.A=0}}function za(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=bn(m(f.Da,f),Qh(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Kh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=bn(m(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),Os(this),Kh(this))};function Lc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Kh(f){f.g=new Ur(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=Zt(f.na);gt(x,"RID","rpc"),gt(x,"SID",f.M),gt(x,"AID",f.K),gt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&gt(x,"TO",f.ia),gt(x,"TYPE","xmlhttp"),Ua(f,x),f.u&&f.o&&Va(x,f.u,f.o),f.O&&(f.g.H=f.O);var I=f.g;f=f.ba,I.M=1,I.A=Oa(Zt(x)),I.u=null,I.R=!0,Ko(I,f)}n.Va=function(){this.C!=null&&(this.C=null,Os(this),za(this),mt(19))};function nl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Yh(f,x){var I=null;if(f.g==x){nl(f),Lc(f),f.g=null;var U=2}else if(di(f.h,x))I=x.G,Ic(f.h,x),U=1;else return;if(f.I!=0){if(x.o)if(U==1){I=x.u?x.u.length:0,x=Date.now()-x.F;var ie=f.D;U=ai(),Xe(U,new ln(U,I)),yi(f)}else Gh(f);else if(ie=x.m,ie==3||ie==0&&x.X>0||!(U==1&&tl(f,x)||U==2&&za(f)))switch(I&&I.length>0&&(x=f.h,x.i=x.i.concat(I)),ie){case 1:_i(f,5);break;case 4:_i(f,10);break;case 3:_i(f,6);break;default:_i(f,2)}}}function Qh(f,x){let I=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(I*=2),I*x}function _i(f,x){if(f.j.info("Error code "+x),x==2){var I=m(f.bb,f),U=f.Ua;const ie=!U;U=new rr(U||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(U,"https"),Oa(U),ie?Fr(U.toString(),I):Oc(U.toString(),I)}else mt(2);f.I=0,f.l&&f.l.pa(x),Xh(f),el(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Xh(f){if(f.I=0,f.ja=[],f.l){const x=Rc(f.h);(x.length!=0||f.i.length!=0)&&(A(f.ja,x),A(f.ja,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.oa()}}function Wh(f,x,I){var U=I instanceof rr?Zt(I):new rr(I);if(U.g!="")x&&(U.g=x+"."+U.g),Ss(U,U.u);else{var ie=c.location;U=ie.protocol,x=x?x+"."+ie.hostname:ie.hostname,ie=+ie.port;const ue=new rr(null);U&&gn(ue,U),x&&(ue.g=x),ie&&Ss(ue,ie),I&&(ue.h=I),U=ue}return I=f.G,x=f.wa,I&&x&&gt(U,I,x),gt(U,"VER",f.ka),Ua(f,U),U}function Jh(f,x,I){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new xt(new mi({ab:I})):new xt(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}n=Zh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ms(){}Ms.prototype.g=function(f,x){return new zn(f,x)};function zn(f,x){Fe.call(this),this.g=new Ds(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!D(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!D(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Ki(this)}y(zn,Fe),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Vc(this.g)},zn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.v&&(I={},I.__data__=Nt(f),f=I);x.i.push(new Jt(x.Ya++,f)),x.I==3&&yi(x)},zn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,zn.Z.N.call(this)};function ed(f){wt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const I in x){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}y(ed,wt);function td(){Xt.call(this),this.status=1}y(td,Xt);function Ki(f){this.g=f}y(Ki,Zh),Ki.prototype.ra=function(){Xe(this.g,"a")},Ki.prototype.qa=function(f){Xe(this.g,new ed(f))},Ki.prototype.pa=function(f){Xe(this.g,new td)},Ki.prototype.oa=function(){Xe(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,a2=function(){return new Ms},s2=function(){return ai()},i2=Ct,Yy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Tf=ka,xc.COMPLETE="complete",r2=xc,vn.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,Du=vn,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,n2=xt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const Sx="@firebase/firestore",Ix="4.9.2";let In=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");let yc="12.3.0";const To=new k0("@firebase/firestore");function Fl(){return To.logLevel}function pe(n,...e){if(To.logLevel<=nt.DEBUG){const t=e.map(B0);To.debug(`Firestore (${yc}): ${n}`,...t)}}function Bn(n,...e){if(To.logLevel<=nt.ERROR){const t=e.map(B0);To.error(`Firestore (${yc}): ${n}`,...t)}}function Ao(n,...e){if(To.logLevel<=nt.WARN){const t=e.map(B0);To.warn(`Firestore (${yc}): ${n}`,...t)}}function B0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,o2(n,r,t)}function o2(n,e,t){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bn(r),new Error(r)}function Ie(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||o2(e,s,r)}function Ue(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class l2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class i3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class s3{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},h=d=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>h(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new l2(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class a3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new a3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);const r=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function c3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class q0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=c3(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Qy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return xy(s)===xy(o)?Le(s,o):xy(s)?1:-1}return Le(n.length,e.length)}const u3=55296,h3=57343;function xy(n){const e=n.charCodeAt(0);return e>=u3&&e<=h3}function tc(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function c2(n){return n+"\0"}const Nx="__name__";class Ti{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const r=Ti.isNumericId(e),s=Ti.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):Qy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ga.fromString(e.substring(4,e.length-2))}}class dt extends Ti{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const d3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Ti{construct(e,t,r){return new jt(e,t,r)}static isValidIdentifier(e){return d3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nx}static keyField(){return new jt([Nx])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ve(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ve(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(r+=h,s++):(o(),s++)}if(o(),c)throw new ve(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(dt.fromString(e))}static fromName(e){return new we(dt.fromString(e).popFirst(5))}static empty(){return new we(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new dt(e.slice()))}}function u2(n,e,t){if(!t)throw new ve(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f3(n,e,t,r){if(e===!0&&r===!0)throw new ve(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cx(n){if(!we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kx(n){if(we.isDocumentKey(n))throw new ve(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function h2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cm(n);throw new ve(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function m3(n,e){if(e<=0)throw new ve(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function an(n,e){const t={typeString:n};return e&&(t.value=e),t}function Sh(n,e){if(!h2(n))throw new ve(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ve(de.INVALID_ARGUMENT,t);return!0}const Dx=-62135596800,Ox=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ox);return new _t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Dx)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ox}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sh(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:an("string",_t._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new _t(0,0))}static max(){return new Ce(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const eh=-1;class Wf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Xy(n){return n.fields.find((e=>e.kind===2))}function so(n){return n.fields.filter((e=>e.kind!==2))}Wf.UNKNOWN_ID=-1;class Af{constructor(e,t){this.fieldPath=e,this.kind=t}}class th{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new th(0,mr.min())}}function g3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new _t(t+1,0):new _t(t,r));return new mr(s,we.empty(),e)}function d2(n){return new mr(n.readTime,n.key,eh)}class mr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mr(Ce.min(),we.empty(),eh)}static max(){return new mr(Ce.max(),we.empty(),eh)}}function H0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}const f2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zo(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==f2)throw n;pe("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,o=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++o,c&&o===s&&t()}),(d=>r(d)))})),c=!0,o===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const o=e.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;t(e[m]).next((p=>{c[m]=p,++h,h===o&&r(c)}),(p=>s(p)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}const hr="SimpleDb";class km{static open(e,t,r,s){try{return new km(t,e.transaction(s,r))}catch(o){throw new Fu(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Fu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=$0(r.target.error);this.S.reject(new Fu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(pe(hr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y3(t)}}class pa{static delete(e){return pe(hr,"Removing database:",e),oo(sA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!mA())return!1;if(pa.F())return!0;const e=hn(),t=pa.M(e),r=0<t&&t<10,s=g2(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,pa.M(hn())===12.2&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(pe(hr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const c=o.target.result;t(c)},s.onblocked=()=>{r(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new ve(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ve(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Fu(e,c))},s.onupgradeneeded=o=>{pe(hr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,s.transaction,o.oldVersion,this.version).next((()=>{pe(hr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const h=km.open(this.db,e,o?"readonly":"readwrite",r),d=s(h).next((m=>(h.C(),m))).catch((m=>(h.abort(m),ne.reject(m)))).toPromise();return d.catch((()=>{})),await h.D,d}catch(h){const d=h,m=d.name!=="FirebaseError"&&c<3;if(pe(hr,"Transaction failed with error:",d.message,"Retrying:",m),this.close(),!m)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class p3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return oo(this.U.delete())}}class Fu extends ve{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sa(n){return n.name==="IndexedDbTransactionError"}class y3{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(pe(hr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(pe(hr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oo(r)}add(e){return pe(hr,"ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next((t=>(t===void 0&&(t=null),pe(hr,"GET",this.store.name,e,t),t)))}delete(e){return pe(hr,"DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return pe(hr,"COUNT",this.store.name),oo(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new ne(((c,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{c(d.target.result)}}))}{const o=this.cursor(r),c=[];return this.H(o,((h,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ne(((s,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){pe(hr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((o,c,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new ne(((r,s)=>{t.onerror=o=>{const c=$0(o.target.error);s(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((h=>{h?c.continue():r()})):r()}}))}H(e,t){const r=[];return new ne(((s,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void s();const d=new p3(h),m=t(h.primaryKey,h.value,d);if(m instanceof ne){const p=m.catch((y=>(d.done(),ne.reject(y))));r.push(p)}d.isDone?s():d.G===null?h.continue():h.continue(d.G)}})).next((()=>ne.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oo(n){return new ne(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=$0(r.target.error);t(s)}}))}let Mx=!1;function $0(n){const e=pa.M(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mx||(Mx=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Bu="IndexBackfiller";class _3{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){pe(Bu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();pe(Bu,`Documents written: ${t}`)}catch(t){Sa(t)?pe(Bu,"Ignoring IndexedDB error during index backfill: ",t):await zo(t)}await this.re(6e4)}))}}class v3{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,o=!0;return ne.doWhile((()=>o===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return pe(Bu,`Processing collection: ${c}`),this.oe(e,c,s).next((h=>{s-=h,r.add(c)}));o=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,o))).next((h=>(pe(Bu,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,o)=>{const c=d2(o);H0(c,r)>0&&(r=c)})),new mr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Or.ce=-1;const mo=-1;function Dm(n){return n==null}function nh(n){return n===0&&1/n==-1/0}function b3(n){return typeof n=="number"&&Number.isInteger(n)&&!nh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Jf="";function jn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Px(e)),e=w3(n.get(t),e);return Px(e)}function w3(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Jf:t+="";break;default:t+=o}}return t}function Px(n){return n+Jf+""}function Ni(n){const e=n.length;if(Ie(e>=2,64408,{path:n}),e===2)return Ie(n.charAt(0)===Jf&&n.charAt(1)==="",56145,{path:n}),dt.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const c=n.indexOf(Jf,o);switch((c<0||c>t)&&Ee(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(o,c);let d;s.length===0?d=h:(s+=h,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,c),s+="\0";break;case"":s+=n.substring(o,c+1);break;default:Ee(61167,{path:n})}o=c+2}return new dt(r)}const ao="remoteDocuments",Ih="owner",Ml="owner",rh="mutationQueues",x3="userId",Xr="mutations",Vx="batchId",ho="userMutationsIndex",jx=["userId","batchId"];function Sf(n,e){return[n,jn(e)]}function p2(n,e,t){return[n,jn(e),t]}const E3={},nc="documentMutations",Zf="remoteDocumentsV14",T3=["prefixPath","collectionGroup","readTime","documentId"],If="documentKeyIndex",A3=["prefixPath","collectionGroup","documentId"],y2="collectionGroupIndex",S3=["collectionGroup","readTime","prefixPath","documentId"],ih="remoteDocumentGlobal",Wy="remoteDocumentGlobalKey",rc="targets",_2="queryTargetsIndex",I3=["canonicalId","targetId"],ic="targetDocuments",R3=["targetId","path"],G0="documentTargetsIndex",N3=["path","targetId"],em="targetGlobalKey",go="targetGlobal",sh="collectionParents",C3=["collectionId","parent"],sc="clientMetadata",k3="clientId",Om="bundles",D3="bundleId",Mm="namedQueries",O3="name",K0="indexConfiguration",M3="indexId",Jy="collectionGroupIndex",P3="collectionGroup",qu="indexState",V3=["indexId","uid"],v2="sequenceNumberIndex",j3=["uid","sequenceNumber"],Hu="indexEntries",L3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],b2="documentKeyIndex",U3=["indexId","uid","orderedDocumentKey"],Pm="documentOverlays",z3=["userId","collectionPath","documentId"],Zy="collectionPathOverlayIndex",F3=["userId","collectionPath","largestBatchId"],w2="collectionGroupOverlayIndex",B3=["userId","collectionGroup","largestBatchId"],Y0="globals",q3="name",x2=[rh,Xr,nc,ao,rc,Ih,go,ic,sc,ih,sh,Om,Mm],H3=[...x2,Pm],E2=[rh,Xr,nc,Zf,rc,Ih,go,ic,sc,ih,sh,Om,Mm,Pm],T2=E2,Q0=[...T2,K0,qu,Hu],$3=Q0,A2=[...Q0,Y0],G3=A2;class e0 extends m2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function dn(n,e){const t=Ue(n);return pa.O(t.le,e)}function Lx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function S2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vt{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Rn.RED,this.left=s??Rn.EMPTY,this.right=o??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Rn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ux(this.data.getIterator())}getIteratorFrom(e){return new Ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class Ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class tr{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new tr([])}unionWith(e){let t=new bt(jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class I2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new I2("Invalid base64 string: "+o):o}})(e);return new on(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const K3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(n){if(Ie(!!n,39018),typeof n=="string"){let e=0;const t=K3.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}const R2="server_timestamp",N2="__type__",C2="__previous_value__",k2="__local_write_time__";function X0(n){return(n?.mapValue?.fields||{})[N2]?.stringValue===R2}function Vm(n){const e=n.mapValue.fields[C2];return X0(e)?Vm(e):e}function ah(n){const e=vs(n.mapValue.fields[k2].timestampValue);return new _t(e.seconds,e.nanos)}class Y3{constructor(e,t,r,s,o,c,h,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=p}}const tm="(default)";class So{constructor(e,t){this.projectId=e,this.database=t||tm}static empty(){return new So("","")}get isDefaultDatabase(){return this.database===tm}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}const W0="__type__",D2="__max__",da={mapValue:{fields:{__type__:{stringValue:D2}}}},J0="__vector__",ac="value",Rf={nullValue:"NULL_VALUE"};function ba(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?X0(n)?4:O2(n)?9007199254740991:jm(n)?10:11:Ee(28295,{value:n})}function ji(n,e){if(n===e)return!0;const t=ba(n);if(t!==ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ah(n).isEqual(ah(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=vs(s.timestampValue),h=vs(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return bs(s.bytesValue).isEqual(bs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Pt(s.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Pt(s.integerValue)===Pt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=Pt(s.doubleValue),h=Pt(o.doubleValue);return c===h?nh(c)===nh(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return tc(n.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Lx(c)!==Lx(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!ji(c[d],h[d])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function oh(n,e){return(n.values||[]).find((t=>ji(t,e)))!==void 0}function wa(n,e){if(n===e)return 0;const t=ba(n),r=ba(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=Pt(o.integerValue||o.doubleValue),d=Pt(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1})(n,e);case 3:return zx(n.timestampValue,e.timestampValue);case 4:return zx(ah(n),ah(e));case 5:return Qy(n.stringValue,e.stringValue);case 6:return(function(o,c){const h=bs(o),d=bs(c);return h.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const p=Le(h[m],d[m]);if(p!==0)return p}return Le(h.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=Le(Pt(o.latitude),Pt(c.latitude));return h!==0?h:Le(Pt(o.longitude),Pt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Fx(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const h=o.fields||{},d=c.fields||{},m=h[ac]?.arrayValue,p=d[ac]?.arrayValue,y=Le(m?.values?.length||0,p?.values?.length||0);return y!==0?y:Fx(m,p)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===da.mapValue&&c===da.mapValue)return 0;if(o===da.mapValue)return 1;if(c===da.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},p=Object.keys(m);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const v=Qy(d[y],p[y]);if(v!==0)return v;const w=wa(h[d[y]],m[p[y]]);if(w!==0)return w}return Le(d.length,p.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function zx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=vs(n),r=vs(e),s=Le(t.seconds,r.seconds);return s!==0?s:Le(t.nanos,r.nanos)}function Fx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=wa(t[s],r[s]);if(o)return o}return Le(t.length,r.length)}function oc(n){return t0(n)}function t0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=vs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return bs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=t0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of r)o?o=!1:s+=",",s+=`${c}:${t0(t.fields[c])}`;return s+"}"})(n.mapValue):Ee(61005,{value:n})}function Nf(n){switch(ba(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vm(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Nf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ia(r.fields,((o,c)=>{s+=o.length+Nf(c)})),s})(n.mapValue);default:throw Ee(13486,{value:n})}}function lh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n0(n){return!!n&&"integerValue"in n}function ch(n){return!!n&&"arrayValue"in n}function Bx(n){return!!n&&"nullValue"in n}function qx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cf(n){return!!n&&"mapValue"in n}function jm(n){return(n?.mapValue?.fields||{})[W0]?.stringValue===J0}function $u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ia(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=$u(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$u(n.arrayValue.values[t]);return e}return{...n}}function O2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===D2}const M2={mapValue:{fields:{[W0]:{stringValue:J0},[ac]:{arrayValue:{}}}}};function Q3(n){return"nullValue"in n?Rf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lh(So.empty(),we.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jm(n)?M2:{mapValue:{}}:Ee(35942,{value:n})}function X3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lh(So.empty(),we.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?M2:"mapValue"in n?jm(n)?{mapValue:{}}:da:Ee(61959,{value:n})}function Hx(n,e){const t=wa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $x(n,e){const t=wa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)}setAll(e){let t=jt.emptyPath(),r={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}c?r[h.lastSegment()]=$u(c):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Cf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ia(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Mn($u(this.value))}}function P2(n){const e=[];return Ia(n.fields,((t,r)=>{const s=new jt([t]);if(Cf(r)){const o=P2(r.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new tr(e)}class Ft{constructor(e,t,r,s,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Ft(e,0,Ce.min(),Ce.min(),Ce.min(),Mn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ft(e,1,t,Ce.min(),r,s,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ce.min(),Ce.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ce.min(),Ce.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lc{constructor(e,t){this.position=e,this.inclusive=t}}function Gx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?r=we.comparator(we.fromName(c.referenceValue),t.key):r=wa(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ji(n.position[t],e.position[t]))return!1;return!0}class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function W3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class V2{}class rt extends V2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new J3(e,t,r):t==="array-contains"?new tM(e,r):t==="in"?new B2(e,r):t==="not-in"?new nM(e,r):t==="array-contains-any"?new rM(e,r):new rt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Z3(e,r):new eM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&ba(this.value)===ba(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends V2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return cc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cc(n){return n.op==="and"}function r0(n){return n.op==="or"}function Z0(n){return j2(n)&&cc(n)}function j2(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function i0(n){if(n instanceof rt)return n.field.canonicalString()+n.op.toString()+oc(n.value);if(Z0(n))return n.filters.map((e=>i0(e))).join(",");{const e=n.filters.map((t=>i0(t))).join(",");return`${n.op}(${e})`}}function L2(n,e){return n instanceof rt?(function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&ji(r.value,s.value)})(n,e):n instanceof vt?(function(r,s){return s instanceof vt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,c,h)=>o&&L2(c,s.filters[h])),!0):!1})(n,e):void Ee(19439)}function U2(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function z2(n){return n instanceof rt?(function(t){return`${t.field.canonicalString()} ${t.op} ${oc(t.value)}`})(n):n instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(z2).join(" ,")+"}"})(n):"Filter"}class J3 extends rt{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z3 extends rt{constructor(e,t){super(e,"in",t),this.keys=F2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eM extends rt{constructor(e,t){super(e,"not-in",t),this.keys=F2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function F2(n,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class tM extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&oh(t.arrayValue,this.value)}}class B2 extends rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oh(this.value.arrayValue,t)}}class nM extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oh(this.value.arrayValue,t)}}class rM extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>oh(this.value.arrayValue,r)))}}class iM{constructor(e,t=null,r=[],s=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function s0(n,e=null,t=[],r=[],s=null,o=null,c=null){return new iM(n,e,t,r,s,o,c)}function Io(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>i0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>oc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>oc(r))).join(",")),e.Te=t}return e.Te}function Rh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!L2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kx(n.startAt,e.startAt)&&Kx(n.endAt,e.endAt)}function nm(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rm(n,e){return n.filters.filter((t=>t instanceof rt&&t.field.isEqual(e)))}function Yx(n,e,t){let r=Rf,s=!0;for(const o of rm(n,e)){let c=Rf,h=!0;switch(o.op){case"<":case"<=":c=Q3(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=Rf}Hx({value:r,inclusive:s},{value:c,inclusive:h})<0&&(r=c,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];Hx({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}function Qx(n,e,t){let r=da,s=!0;for(const o of rm(n,e)){let c=da,h=!0;switch(o.op){case">=":case">":c=X3(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=da}$x({value:r,inclusive:s},{value:c,inclusive:h})>0&&(r=c,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];$x({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}class _c{constructor(e,t=null,r=[],s=[],o=null,c="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sM(n,e,t,r,s,o,c,h){return new _c(n,e,t,r,s,o,c,h)}function Nh(n){return new _c(n)}function Xx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function q2(n){return n.collectionGroup!==null}function Gu(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new bt(jt.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new uh(o,r))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new uh(jt.keyField(),r))}return e.Ie}function Pr(n){const e=Ue(n);return e.Ee||(e.Ee=aM(e,Gu(n))),e.Ee}function aM(n,e){if(n.limitType==="F")return s0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new uh(s.field,o)}));const t=n.endAt?new lc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lc(n.startAt.position,n.startAt.inclusive):null;return s0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function a0(n,e){const t=n.filters.concat([e]);return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function im(n,e,t){return new _c(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lm(n,e){return Rh(Pr(n),Pr(e))&&n.limitType===e.limitType}function H2(n){return`${Io(Pr(n))}|lt:${n.limitType}`}function Bl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>z2(s))).join(", ")}]`),Dm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>oc(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>oc(s))).join(",")),`Target(${r})`})(Pr(n))}; limitType=${n.limitType})`}function Ch(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):we.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Gu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,h,d){const m=Gx(c,h,d);return c.inclusive?m<=0:m<0})(r.startAt,Gu(r),s)||r.endAt&&!(function(c,h,d){const m=Gx(c,h,d);return c.inclusive?m>=0:m>0})(r.endAt,Gu(r),s))})(n,e)}function oM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $2(n){return(e,t)=>{let r=!1;for(const s of Gu(n)){const o=lM(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function lM(n,e,t){const r=n.field.isKeyField()?we.comparator(e.key,t.key):(function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?wa(d,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return S2(this.inner)}size(){return this.innerSize}}const cM=new Vt(we.comparator);function fr(){return cM}const G2=new Vt(we.comparator);function Ou(...n){let e=G2;for(const t of n)e=e.insert(t.key,t);return e}function K2(n){let e=G2;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ci(){return Ku()}function Y2(){return Ku()}function Ku(){return new Es((n=>n.toString()),((n,e)=>n.isEqual(e)))}const uM=new Vt(we.comparator),hM=new bt(we.comparator);function Ye(...n){let e=hM;for(const t of n)e=e.add(t);return e}const dM=new bt(Le);function fM(){return dM}function e_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function Q2(n){return{integerValue:""+n}}function mM(n,e){return b3(e)?Q2(e):e_(n,e)}class Um{constructor(){this._=void 0}}function gM(n,e,t){return n instanceof uc?(function(s,o){const c={fields:{[N2]:{stringValue:R2},[k2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&X0(o)&&(o=Vm(o)),o&&(c.fields[C2]=o),{mapValue:c}})(t,e):n instanceof Ro?W2(n,e):n instanceof No?J2(n,e):(function(s,o){const c=X2(s,o),h=Wx(c)+Wx(s.Ae);return n0(c)&&n0(s.Ae)?Q2(h):e_(s.serializer,h)})(n,e)}function pM(n,e,t){return n instanceof Ro?W2(n,e):n instanceof No?J2(n,e):t}function X2(n,e){return n instanceof hh?(function(r){return n0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class uc extends Um{}class Ro extends Um{constructor(e){super(),this.elements=e}}function W2(n,e){const t=Z2(e);for(const r of n.elements)t.some((s=>ji(s,r)))||t.push(r);return{arrayValue:{values:t}}}class No extends Um{constructor(e){super(),this.elements=e}}function J2(n,e){let t=Z2(e);for(const r of n.elements)t=t.filter((s=>!ji(s,r)));return{arrayValue:{values:t}}}class hh extends Um{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wx(n){return Pt(n.integerValue||n.doubleValue)}function Z2(n){return ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zm{constructor(e,t){this.field=e,this.transform=t}}function yM(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ro&&s instanceof Ro||r instanceof No&&s instanceof No?tc(r.elements,s.elements,ji):r instanceof hh&&s instanceof hh?ji(r.Ae,s.Ae):r instanceof uc&&s instanceof uc})(n.transform,e.transform)}class _M{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fm{}function eS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bm(n.key,Vn.none()):new vc(n.key,n.data,Vn.none());{const t=n.data,r=Mn.empty();let s=new bt(jt.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),s=s.add(o)}return new Ts(n.key,r,new tr(s.toArray()),Vn.none())}}function vM(n,e,t){n instanceof vc?(function(s,o,c){const h=s.value.clone(),d=Zx(s.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,o,c){if(!kf(s.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Zx(s.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(tS(s)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Yu(n,e,t,r){return n instanceof vc?(function(o,c,h,d){if(!kf(o.precondition,c))return h;const m=o.value.clone(),p=eE(o.fieldTransforms,d,c);return m.setAll(p),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ts?(function(o,c,h,d){if(!kf(o.precondition,c))return h;const m=eE(o.fieldTransforms,d,c),p=c.data;return p.setAll(tS(o)),p.setAll(m),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,c,h){return kf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function bM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=X2(r.transform,s||null);o!=null&&(t===null&&(t=Mn.empty()),t.set(r.field,o))}return t||null}function Jx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&tc(r,s,((o,c)=>yM(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends Fm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Fm{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Zx(n,e,t){const r=new Map;Ie(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,h=e.data.field(o.field);r.set(o.field,pM(c,h,t[s]))}return r}function eE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);r.set(s.field,gM(o,c,e))}return r}class Bm extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nS extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class t_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&vM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Y2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(s.key)?null:h;const d=eS(c,h);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,((t,r)=>Jx(t,r)))&&tc(this.baseMutations,e.baseMutations,((t,r)=>Jx(t,r)))}}class n_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return uM})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,r[c].version);return new n_(e,t,r,s)}}class r_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wM{constructor(e,t){this.count=e,this.unchangedNames=t}}var sn,ot;function xM(n){switch(n){case de.OK:return Ee(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function rS(n){if(n===void 0)return Bn("GRPC error has no .code"),de.UNKNOWN;switch(n){case sn.OK:return de.OK;case sn.CANCELLED:return de.CANCELLED;case sn.UNKNOWN:return de.UNKNOWN;case sn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case sn.INTERNAL:return de.INTERNAL;case sn.UNAVAILABLE:return de.UNAVAILABLE;case sn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case sn.NOT_FOUND:return de.NOT_FOUND;case sn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case sn.ABORTED:return de.ABORTED;case sn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case sn.DATA_LOSS:return de.DATA_LOSS;default:return Ee(39323,{code:n})}}(ot=sn||(sn={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";function EM(){return new TextEncoder}const TM=new ga([4294967295,4294967295],0);function tE(n){const e=EM().encode(n),t=new t2;return t.update(e),new Uint8Array(t.digest())}function nE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ga([t,r],0),new ga([s,o],0)]}class i_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ga.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ga.fromNumber(r)));return s.compare(TM)===1&&(s=new ga([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=tE(e),[r,s]=nE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,s,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new i_(o,s,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=tE(e),[r,s]=nE(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qm{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qm(Ce.min(),s,new Vt(Le),fr(),Ye())}}class kh{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kh(r,t,Ye(),Ye(),Ye())}}class Df{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class iS{constructor(e,t){this.targetId=e,this.Ce=t}}class sS{constructor(e,t,r=on.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class rE{constructor(){this.ve=0,this.Fe=iE(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ee(38017,{changeType:o})}})),new kh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=iE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AM{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=hf(),this.He=hf(),this.Ye=new Vt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(nm(o))if(r===0){const c=new we(o.path);this.et(t,c,Ft.newNoDocument(c,Ce.min()))}else Ie(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),d=h?this.ct(h,e,c):1;if(d!==0){this.it(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let c,h;try{c=bs(r).toUint8Array()}catch(d){if(d instanceof I2)return Ao("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new i_(c,s,o)}catch(d){return Ao(d instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&nm(h.target)){const d=new we(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,Ft.newNoDocument(d,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new qm(e,t,this.Ye,this.je,r);return this.je=fr(),this.Je=hf(),this.He=hf(),this.Ye=new Vt(Le),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new Vt(we.comparator)}function iE(){return new Vt(we.comparator)}const SM={asc:"ASCENDING",desc:"DESCENDING"},IM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RM={and:"AND",or:"OR"};class NM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function o0(n,e){return n.useProto3Json||Dm(e)?e:{value:e}}function hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CM(n,e){return hc(n,e.toTimestamp())}function Hn(n){return Ie(!!n,49232),Ce.fromTimestamp((function(t){const r=vs(t);return new _t(r.seconds,r.nanos)})(n))}function s_(n,e){return l0(n,e).canonicalString()}function l0(n,e){const t=(function(s){return new dt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oS(n){const e=dt.fromString(n);return Ie(pS(e),10190,{key:e.toString()}),e}function sm(n,e){return s_(n.databaseId,e.path)}function po(n,e){const t=oS(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(uS(t))}function lS(n,e){return s_(n.databaseId,e)}function cS(n){const e=oS(n);return e.length===4?dt.emptyPath():uS(e)}function c0(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uS(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sE(n,e,t){return{name:sm(n,e),fields:t.value.mapValue.fields}}function kM(n,e,t){const r=po(n,e.name),s=Hn(e.updateTime),o=e.createTime?Hn(e.createTime):Ce.min(),c=new Mn({mapValue:{fields:e.fields}}),h=Ft.newFoundDocument(r,s,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function DM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(m,p){return m.useProto3Json?(Ie(p===void 0||typeof p=="string",58123),on.fromBase64String(p||"")):(Ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),on.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const p=m.code===void 0?de.UNKNOWN:rS(m.code);return new ve(p,m.message||"")})(c);t=new sS(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=po(n,r.document.name),o=Hn(r.document.updateTime),c=r.document.createTime?Hn(r.document.createTime):Ce.min(),h=new Mn({mapValue:{fields:r.document.fields}}),d=Ft.newFoundDocument(s,o,c,h),m=r.targetIds||[],p=r.removedTargetIds||[];t=new Df(m,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=po(n,r.document),o=r.readTime?Hn(r.readTime):Ce.min(),c=Ft.newNoDocument(s,o),h=r.removedTargetIds||[];t=new Df([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=po(n,r.document),o=r.removedTargetIds||[];t=new Df([],o,s,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,c=new wM(s,o),h=r.targetId;t=new iS(h,c)}}return t}function am(n,e){let t;if(e instanceof vc)t={update:sE(n,e.key,e.value)};else if(e instanceof Bm)t={delete:sm(n,e.key)};else if(e instanceof Ts)t={update:sE(n,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof nS))return Ee(16599,{Vt:e.type});t={verify:sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const h=c.transform;if(h instanceof uc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ro)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof No)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof hh)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ee(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:CM(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee(27497)})(n,e.precondition)),t}function u0(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Vn.updateTime(Hn(o.updateTime)):o.exists!==void 0?Vn.exists(o.exists):Vn.none()})(e.currentDocument):Vn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(c,h){let d=null;if("setToServerValue"in h)Ie(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),d=new uc;else if("appendMissingElements"in h){const p=h.appendMissingElements.values||[];d=new Ro(p)}else if("removeAllFromArray"in h){const p=h.removeAllFromArray.values||[];d=new No(p)}else"increment"in h?d=new hh(c,h.increment):Ee(16584,{proto:h});const m=jt.fromServerFormat(h.fieldPath);return new zm(m,d)})(n,s))):[];if(e.update){e.update.name;const s=po(n,e.update.name),o=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const m=d.fieldPaths||[];return new tr(m.map((p=>jt.fromServerFormat(p))))})(e.updateMask);return new Ts(s,o,c,t,r)}return new vc(s,o,t,r)}if(e.delete){const s=po(n,e.delete);return new Bm(s,t)}if(e.verify){const s=po(n,e.verify);return new nS(s,t)}return Ee(1463,{proto:e})}function OM(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map((t=>(function(s,o){let c=s.updateTime?Hn(s.updateTime):Hn(o);return c.isEqual(Ce.min())&&(c=Hn(o)),new _M(c,s.transformResults||[])})(t,e)))):[]}function hS(n,e){return{documents:[lS(n,e.path)]}}function dS(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lS(n,s);const o=(function(m){if(m.length!==0)return gS(vt.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((p=>(function(v){return{field:ql(v.field),direction:PM(v.dir)}})(p)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=o0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:s}}function fS(n){let e=cS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ie(r===1,65062);const p=t.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=(function(y){const v=mS(y);return v instanceof vt&&Z0(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(A){return new uh(Hl(A.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let v;return v=typeof y=="object"?y.value:y,Dm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,w=y.values||[];return new lc(w,v)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const v=!y.before,w=y.values||[];return new lc(w,v)})(t.endAt)),sM(e,s,c,o,h,"F",d,m)}function MM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hl(t.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hl(t.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hl(t.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hl(t.unaryFilter.field);return rt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return rt.create(Hl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((r=>mS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function PM(n){return SM[n]}function VM(n){return IM[n]}function jM(n){return RM[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Hl(n){return jt.fromServerFormat(n.fieldPath)}function gS(n){return n instanceof rt?(function(t){if(t.op==="=="){if(qx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(Bx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(Bx(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:VM(t.op),value:t.value}}})(n):n instanceof vt?(function(t){const r=t.getFilters().map((s=>gS(s)));return r.length===1?r[0]:{compositeFilter:{op:jM(t.op),filters:r}}})(n):Ee(54877,{filter:n})}function LM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ds{constructor(e,t,r,s,o=Ce.min(),c=Ce.min(),h=on.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yS{constructor(e){this.yt=e}}function UM(n,e){let t;if(e.document)t=kM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=we.fromSegments(e.noDocument.path),s=ko(e.noDocument.readTime);t=Ft.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee(56709);{const r=we.fromSegments(e.unknownDocument.path),s=ko(e.unknownDocument.version);t=Ft.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const o=new _t(s[0],s[1]);return Ce.fromTimestamp(o)})(e.readTime)),t}function aE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,c){return{name:sm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:hc(o,c.version.toTimestamp()),createTime:hc(o,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Co(e.version)};else{if(!e.isUnknownDocument())return Ee(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Co(e.version)}}return r}function om(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Co(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ko(n){const e=new _t(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function lo(n,e){const t=(e.baseMutations||[]).map((o=>u0(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>u0(n.yt,o))),s=_t.fromMillis(e.localWriteTimeMs);return new t_(e.batchId,s,t,r)}function Pu(n){const e=ko(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ko(n.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Ie(c===1,1966,{count:c}),Pr(Nh(cS(o.documents[0])))})(n.query):(function(o){return Pr(fS(o))})(n.query),new ds(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,on.fromBase64String(n.resumeToken))}function _S(n,e){const t=Co(e.snapshotVersion),r=Co(e.lastLimboFreeSnapshotVersion);let s;s=nm(e.target)?hS(n.yt,e.target):dS(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Io(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function vS(n){const e=fS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?im(e,e.limit,"L"):e}function Ey(n,e){return new r_(e.largestBatchId,u0(n.yt,e.overlayMutation))}function oE(n,e){const t=e.path.lastSegment();return[n,jn(e.path.popLast()),t]}function lE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Co(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}class zM{getBundleMetadata(e,t){return cE(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:ko(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return cE(e).put((function(s){return{bundleId:s.id,createTime:Co(Hn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return uE(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:vS(o.bundledQuery),readTime:ko(o.readTime)}})(r)}))}saveNamedQuery(e,t){return uE(e).put((function(s){return{name:s.name,readTime:Co(Hn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function cE(n){return dn(n,Om)}function uE(n){return dn(n,Mm)}class Hm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Hm(e,r)}getOverlay(e,t){return Au(e).get(oE(this.userId,t)).next((r=>r?Ey(this.serializer,r):null))}getOverlays(e,t){const r=Ci();return ne.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((o,c)=>{const h=new r_(t,c);s.push(this.St(e,h))})),ne.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((c=>s.add(jn(c.getCollectionPath()))));const o=[];return s.forEach((c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Au(e).Z(Zy,h))})),ne.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Ci(),o=jn(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Au(e).J(Zy,c).next((h=>{for(const d of h){const m=Ey(this.serializer,d);s.set(m.getKey(),m)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const o=Ci();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:w2,range:h},((d,m,p)=>{const y=Ey(this.serializer,m);o.size()<s||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):p.done()})).next((()=>o))}St(e,t){return Au(e).put((function(s,o,c){const[h,d,m]=oE(o,c.mutation.key);return{userId:o,collectionPath:d,documentId:m,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:am(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(n){return dn(n,Pm)}class FM{bt(e){return dn(e,Y0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?on.fromUint8Array(r):on.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),nh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=vs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(bs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?O2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):jm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=ac,o=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Pt(o)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),we.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}co.Kt=new co;const Vl=255;function BM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function hE(n){const e=64-(function(r){let s=0;for(let o=0;o<8;++o){const c=BM(255&r[o]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(e/8)}class qM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=hE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=hE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Vl),this.sn(255)}_n(){this.an(Vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vl?(this.sn(Vl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vl?(this.an(Vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class HM{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class $M{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Su{constructor(){this.cn=new qM,this.ln=new HM(this.cn),this.hn=new $M(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class uo{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new uo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Of(this.En),directionalValue:Of(this.dn),orderedDocumentKey:Of(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function ia(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=dE(n.En,e.En),t!==0?t:(t=dE(n.dn,e.dn),t!==0?t:we.comparator(n.In,e.In)))}function dE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Of(n){return fA()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function fE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class mE{constructor(e){this.mn=new bt(((t,r)=>jt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ie(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Xy(e);if(t!==void 0&&!this.wn(t))return!1;const r=so(e);let s=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=r[o];if(!this.Sn(h,d)||!this.bn(this.fn[c++],d))return!1}++o}for(;o<r.length;++o){const h=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new bt(jt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Af(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Af(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Af(r.field,r.dir==="asc"?0:1)));return new Wf(Wf.UNKNOWN_ID,this.collectionId,t,th.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function bS(n){if(Ie(n instanceof rt||n instanceof vt,20012),n instanceof rt){if(n instanceof B2){const t=n.value.arrayValue?.values?.map((r=>rt.create(n.field,"==",r)))||[];return vt.create(t,"or")}return n}const e=n.filters.map((t=>bS(t)));return vt.create(e,n.op)}function GM(n){if(n.getFilters().length===0)return[];const e=f0(bS(n));return Ie(wS(e),7391),h0(e)||d0(e)?[e]:e.getFilters()}function h0(n){return n instanceof rt}function d0(n){return n instanceof vt&&Z0(n)}function wS(n){return h0(n)||d0(n)||(function(t){if(t instanceof vt&&r0(t)){for(const r of t.getFilters())if(!h0(r)&&!d0(r))return!1;return!0}return!1})(n)}function f0(n){if(Ie(n instanceof rt||n instanceof vt,34018),n instanceof rt)return n;if(n.filters.length===1)return f0(n.filters[0]);const e=n.filters.map((r=>f0(r)));let t=vt.create(e,n.op);return t=lm(t),wS(t)?t:(Ie(t instanceof vt,64498),Ie(cc(t),40251),Ie(t.filters.length>1,57927),t.filters.reduce(((r,s)=>a_(r,s))))}function a_(n,e){let t;return Ie(n instanceof rt||n instanceof vt,38388),Ie(e instanceof rt||e instanceof vt,25473),t=n instanceof rt?e instanceof rt?(function(s,o){return vt.create([s,o],"and")})(n,e):gE(n,e):e instanceof rt?gE(e,n):(function(s,o){if(Ie(s.filters.length>0&&o.filters.length>0,48005),cc(s)&&cc(o))return U2(s,o.getFilters());const c=r0(s)?s:o,h=r0(s)?o:s,d=c.filters.map((m=>a_(m,h)));return vt.create(d,"or")})(n,e),lm(t)}function gE(n,e){if(cc(e))return U2(e,n.getFilters());{const t=e.filters.map((r=>a_(n,r)));return vt.create(t,"or")}}function lm(n){if(Ie(n instanceof rt||n instanceof vt,11850),n instanceof rt)return n;const e=n.getFilters();if(e.length===1)return lm(e[0]);if(j2(n))return n;const t=e.map((s=>lm(s))),r=[];return t.forEach((s=>{s instanceof rt?r.push(s):s instanceof vt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:vt.create(r,n.op)}class KM{constructor(){this.Cn=new o_}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(mr.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class o_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new bt(dt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new bt(dt.comparator)).toArray()}}const pE="IndexedDbIndexManager",df=new Uint8Array(0);class YM{constructor(e,t){this.databaseId=t,this.vn=new o_,this.Fn=new Es((r=>Io(r)),((r,s)=>Rh(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:jn(s)};return yE(e).put(o)}return ne.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[c2(t),""],!1,!0);return yE(e).J(s).next((o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Ni(c.parent))}return r}))}addFieldIndex(e,t){const r=Iu(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const o=r.add(s);if(t.indexState){const c=Ll(e);return o.next((h=>{c.put(lE(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Iu(e),s=Ll(e),o=jl(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),r=jl(e),s=Ll(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return ne.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const o=new mE(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=jl(e);let s=!0;const o=new Map;return ne.forEach(this.Mn(t),(c=>this.xn(e,c).next((h=>{s&&(s=!!h),o.set(c,h)})))).next((()=>{if(s){let c=Ye();const h=[];return ne.forEach(o,((d,m)=>{pe(pE,`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(d)} to execute ${Io(t)}`);const p=(function(z,H){const W=Xy(H);if(W===void 0)return null;for(const F of rm(z,W.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null})(m,d),y=(function(z,H){const W=new Map;for(const F of so(H))for(const R of rm(z,F.fieldPath))switch(R.op){case"==":case"in":W.set(F.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return W.set(F.fieldPath.canonicalString(),R.value),Array.from(W.values())}return null})(m,d),v=(function(z,H){const W=[];let F=!0;for(const R of so(H)){const T=R.kind===0?Yx(z,R.fieldPath,z.startAt):Qx(z,R.fieldPath,z.startAt);W.push(T.value),F&&(F=T.inclusive)}return new lc(W,F)})(m,d),w=(function(z,H){const W=[];let F=!0;for(const R of so(H)){const T=R.kind===0?Qx(z,R.fieldPath,z.endAt):Yx(z,R.fieldPath,z.endAt);W.push(T.value),F&&(F=T.inclusive)}return new lc(W,F)})(m,d),A=this.On(d,m,v),P=this.On(d,m,w),V=this.Nn(d,m,y),L=this.Bn(d.indexId,p,A,v.inclusive,P,w.inclusive,V);return ne.forEach(L,(q=>r.Y(q,t.limit).next((z=>{z.forEach((H=>{const W=we.fromSegments(H.documentKey);c.has(W)||(c=c.add(W),h.push(W))}))}))))})).next((()=>h))}return ne.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=GM(vt.create(e.filters,"and")).map((r=>s0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,o,c,h){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),m=d/(t!=null?t.length:1),p=[];for(let y=0;y<d;++y){const v=t?this.Ln(t[y/m]):df,w=this.kn(e,v,r[y%m],s),A=this.qn(e,v,o[y%m],c),P=h.map((V=>this.kn(e,v,V,!0)));p.push(...this.createRange(w,A,P))}return p}kn(e,t,r,s){const o=new uo(e,we.empty(),t,r);return s?o:o.An()}qn(e,t,r,s){const o=new uo(e,we.empty(),t,r);return s?o.An():o}xn(e,t){const r=new mE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((o=>{let c=null;for(const h of o)r.yn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return ne.forEach(s,(o=>this.xn(e,o).next((c=>{c?r!==0&&c.fields.length<(function(d){let m=new bt(jt.comparator),p=!1;for(const y of d.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:m=m.add(v.field));for(const y of d.orderBy)y.field.isKeyField()||(m=m.add(y.field));return m.size+(p?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new Su;for(const s of so(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const c=r.Pn(s.kind);co.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Su;return co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Su;return co.Kt.Dt(lh(this.databaseId,t),r.Pn((function(o){const c=so(o);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new Su);let o=0;for(const c of so(e)){const h=r[o++];for(const d of s)if(this.Un(t,c.fieldPath)&&ch(h))s=this.Kn(s,c,h);else{const m=d.Pn(c.kind);co.Kt.Dt(h,m)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of s){const d=new Su;d.seed(h.un()),co.Kt.Dt(c,d.Pn(t.kind)),o.push(d)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof rt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Iu(e),s=Ll(e);return(t?r.J(Jy,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const c=[];return ne.forEach(o,(h=>s.get([h.indexId,this.uid]).next((d=>{c.push((function(p,y){const v=y?new th(y.sequenceNumber,new mr(ko(y.readTime),new we(Ni(y.documentKey)),y.largestBatchId)):th.empty(),w=p.fields.map((([A,P])=>new Af(jt.fromServerFormat(A),P)));return new Wf(p.indexId,p.collectionGroup,w,v)})(h,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:Le(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Iu(e),o=Ll(e);return this.Gn(e).next((c=>s.J(Jy,IDBKeyRange.bound(t,t)).next((h=>ne.forEach(h,(d=>o.put(lE(d.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,((s,o)=>{const c=r.get(s.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),ne.forEach(h,(d=>this.zn(e,s,d).next((m=>{const p=this.jn(o,d);return m.isEqual(p)?ne.resolve():this.Jn(e,o,d,m,p)})))))))}))}Hn(e,t,r,s){return jl(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return jl(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=jl(e);let o=new bt(ia);return s.ee({index:b2,range:IDBKeyRange.only([r.indexId,this.uid,Of(this.$n(r,t))])},((c,h)=>{o=o.add(new uo(r.indexId,t,fE(h.arrayValue),fE(h.directionalValue)))})).next((()=>o))}jn(e,t){let r=new bt(ia);const s=this.Qn(t,e);if(s==null)return r;const o=Xy(t);if(o!=null){const c=e.data.field(o.fieldPath);if(ch(c))for(const h of c.arrayValue.values||[])r=r.add(new uo(t.indexId,e.key,this.Ln(h),s))}else r=r.add(new uo(t.indexId,e.key,df,s));return r}Jn(e,t,r,s,o){pe(pE,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,m,p,y,v){const w=d.getIterator(),A=m.getIterator();let P=Pl(w),V=Pl(A);for(;P||V;){let L=!1,q=!1;if(P&&V){const z=p(P,V);z<0?q=!0:z>0&&(L=!0)}else P!=null?q=!0:L=!0;L?(y(V),V=Pl(A)):q?(v(P),P=Pl(w)):(P=Pl(w),V=Pl(A))}})(s,o,ia,(h=>{c.push(this.Hn(e,t,r,h))}),(h=>{c.push(this.Yn(e,t,r,h))})),ne.waitFor(c)}Gn(e){let t=1;return Ll(e).ee({index:v2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,o)=>{o.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,h)=>ia(c,h))).filter(((c,h,d)=>!h||ia(c,d[h-1])!==0));const s=[];s.push(e);for(const c of r){const h=ia(c,e),d=ia(c,t);if(h===0)s[0]=e.An();else if(h>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const o=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const h=s[c].Vn(this.uid,df,we.empty()),d=s[c+1].Vn(this.uid,df,we.empty());o.push(IDBKeyRange.bound(h,d))}return o}Zn(e,t){return ia(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_E)}getMinOffset(e,t){return ne.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||Ee(44426))))).next(_E)}}function yE(n){return dn(n,sh)}function jl(n){return dn(n,Hu)}function Iu(n){return dn(n,K0)}function Ll(n){return dn(n,qu)}function _E(n){Ie(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;H0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new mr(e.readTime,e.documentKey,t)}const vE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xS=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function ES(n,e,t){const r=n.store(Xr),s=n.store(nc),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const d=r.ee({range:c},((p,y,v)=>(h++,v.delete())));o.push(d.next((()=>{Ie(h===1,47070,{batchId:t.batchId})})));const m=[];for(const p of t.mutations){const y=p2(e,p.key.path,t.batchId);o.push(s.delete(y)),m.push(p.key)}return ne.waitFor(o).next((()=>m))}function cm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee(14731);e=n.noDocument}return JSON.stringify(e).length}On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(xS,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class $m{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){Ie(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new $m(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).ee({index:ho,range:r},((s,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const o=$l(e),c=sa(e);return c.add({}).next((h=>{Ie(typeof h=="number",49019);const d=new t_(h,t,r,s),m=(function(w,A,P){const V=P.baseMutations.map((q=>am(w.yt,q))),L=P.mutations.map((q=>am(w.yt,q)));return{userId:A,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:V,mutations:L}})(this.serializer,this.userId,d),p=[];let y=new bt(((v,w)=>Le(v.canonicalString(),w.canonicalString())));for(const v of s){const w=p2(this.userId,v.key.path,h);y=y.add(v.key.path.popLast()),p.push(c.put(m)),p.push(o.put(w,E3))}return y.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[h]=d.keys()})),ne.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,t){return sa(e).get(t).next((r=>r?(Ie(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),lo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ne.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return sa(e).ee({index:ho,range:s},((c,h,d)=>{h.userId===this.userId&&(Ie(h.batchId>=r,47524,{tr:r}),o=lo(this.serializer,h)),d.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=mo;return sa(e).ee({index:ho,range:t,reverse:!0},((s,o,c)=>{r=o.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,mo],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).J(ho,t).next((r=>r.map((s=>lo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return $l(e).ee({range:s},((c,h,d)=>{const[m,p,y]=c,v=Ni(p);if(m===this.userId&&t.path.isEqual(v))return sa(e).get(y).next((w=>{if(!w)throw Ee(61480,{nr:c,batchId:y});Ie(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(lo(this.serializer,w))}));d.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Le);const s=[];return t.forEach((o=>{const c=Sf(this.userId,o.path),h=IDBKeyRange.lowerBound(c),d=$l(e).ee({range:h},((m,p,y)=>{const[v,w,A]=m,P=Ni(w);v===this.userId&&o.path.isEqual(P)?r=r.add(A):y.done()}));s.push(d)})),ne.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=Sf(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new bt(Le);return $l(e).ee({range:c},((d,m,p)=>{const[y,v,w]=d,A=Ni(v);y===this.userId&&r.isPrefixOf(A)?A.length===s&&(h=h.add(w)):p.done()})).next((()=>this.rr(e,h)))}rr(e,t){const r=[],s=[];return t.forEach((o=>{s.push(sa(e).get(o).next((c=>{if(c===null)throw Ee(35274,{batchId:o});Ie(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(lo(this.serializer,c))})))})),ne.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return ES(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ne.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return $l(e).ee({range:r},((o,c,h)=>{if(o[0]===this.userId){const d=Ni(o[1]);s.push(d)}else h.done()})).next((()=>{Ie(s.length===0,56720,{sr:s.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return TS(e,this.userId,t)}_r(e){return AS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:mo,lastStreamToken:""}))}}function TS(n,e,t){const r=Sf(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return $l(n).ee({range:o,X:!0},((h,d,m)=>{const[p,y,v]=h;p===e&&y===s&&(c=!0),m.done()})).next((()=>c))}function sa(n){return dn(n,Xr)}function $l(n){return dn(n,nc)}function AS(n){return dn(n,rh)}class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}class QM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Do(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ce.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ul(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ie(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const o=[];return Ul(e).ee(((c,h)=>{const d=Pu(h);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))})).next((()=>ne.waitFor(o))).next((()=>s))}forEachTarget(e,t){return Ul(e).ee(((r,s)=>{const o=Pu(s);t(o)}))}lr(e){return bE(e).get(em).next((t=>(Ie(t!==null,2888),t)))}hr(e,t){return bE(e).put(em,t)}Pr(e,t){return Ul(e).put(_S(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Io(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ul(e).ee({range:s,index:_2},((c,h,d)=>{const m=Pu(h);Rh(t,m.target)&&(o=m,d.done())})).next((()=>o))}addMatchingKeys(e,t,r){const s=[],o=ha(e);return t.forEach((c=>{const h=jn(c.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,c))})),ne.waitFor(s)}removeMatchingKeys(e,t,r){const s=ha(e);return ne.forEach(t,(o=>{const c=jn(o.path);return ne.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=ha(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ha(e);let o=Ye();return s.ee({range:r,X:!0},((c,h,d)=>{const m=Ni(c[1]),p=new we(m);o=o.add(p)})).next((()=>o))}containsKey(e,t){const r=jn(t.path),s=IDBKeyRange.bound([r],[c2(r)],!1,!0);let o=0;return ha(e).ee({index:G0,X:!0,range:s},(([c,h],d,m)=>{c!==0&&(o++,m.done())})).next((()=>o>0))}At(e,t){return Ul(e).get(t).next((r=>r?Pu(r):null))}}function Ul(n){return dn(n,rc)}function bE(n){return dn(n,go)}function ha(n){return dn(n,ic)}const wE="LruGarbageCollector",XM=1048576;function xE([n,e],[t,r]){const s=Le(n,t);return s===0?Le(e,r):s}class WM{constructor(e){this.Ir=e,this.buffer=new bt(xE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(wE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sa(t)?pe(wE,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class JM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Or.ce);const r=new WM(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(vE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,c,h,d,m;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,h=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(m=Date.now(),Fl()<=nt.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-p}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function IS(n,e){return new JM(n,e)}class ZM{constructor(e,t){this.db=e,this.garbageCollector=IS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return ff(e,r)}removeReference(e,t,r){return ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ff(e,t)}br(e,t){return(function(s,o){let c=!1;return AS(s).te((h=>TS(s,h,o).next((d=>(d&&(c=!0),ne.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this.Sr(e,((c,h)=>{if(h<=t){const d=this.br(e,c).next((m=>{if(!m)return o++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ce.min()),ha(e).delete((function(y){return[0,jn(y.path)]})(c)))))}));s.push(d)}})).next((()=>ne.waitFor(s))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ff(e,t)}Sr(e,t){const r=ha(e);let s,o=Or.ce;return r.ee({index:G0},(([c,h],{path:d,sequenceNumber:m})=>{c===0?(o!==Or.ce&&t(new we(Ni(s)),o),o=m,s=d):o=Or.ce})).next((()=>{o!==Or.ce&&t(new we(Ni(s)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(n,e){return ha(n).put((function(r,s){return{targetId:0,path:jn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class RS{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ro(e).put(r)}removeEntry(e,t,r){return ro(e).delete((function(o,c){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],om(c),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ft.newInvalidDocument(t);return ro(e).ee({index:If,range:IDBKeyRange.only(Ru(t))},((s,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:Ft.newInvalidDocument(t)};return ro(e).ee({index:If,range:IDBKeyRange.only(Ru(t))},((s,o)=>{r={document:this.Cr(t,o),size:cm(o)}})).next((()=>r))}getEntries(e,t){let r=fr();return this.Fr(e,t,((s,o)=>{const c=this.Cr(s,o);r=r.insert(s,c)})).next((()=>r))}Mr(e,t){let r=fr(),s=new Vt(we.comparator);return this.Fr(e,t,((o,c)=>{const h=this.Cr(o,c);r=r.insert(o,h),s=s.insert(o,cm(c))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return ne.resolve();let s=new bt(AE);t.forEach((d=>s=s.add(d)));const o=IDBKeyRange.bound(Ru(s.first()),Ru(s.last())),c=s.getIterator();let h=c.getNext();return ro(e).ee({index:If,range:o},((d,m,p)=>{const y=we.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&AE(h,y)<0;)r(h,null),h=c.getNext();h&&h.isEqual(y)&&(r(h,m),h=c.hasNext()?c.getNext():null),h?p.j(Ru(h)):p.done()})).next((()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,o){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),om(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).J(IDBKeyRange.bound(h,d,!0)).next((m=>{o?.incrementDocumentReadCount(m.length);let p=fr();for(const y of m){const v=this.Cr(we.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Ch(t,v)||s.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(e,t,r,s){let o=fr();const c=TE(t,r),h=TE(t,mr.max());return ro(e).ee({index:y2,range:IDBKeyRange.bound(c,h,!0)},((d,m,p)=>{const y=this.Cr(we.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(y.key,y),o.size===s&&p.done()})).next((()=>o))}newChangeBuffer(e){return new tP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return EE(e).get(Wy).next((t=>(Ie(!!t,20021),t)))}Dr(e,t){return EE(e).put(Wy,t)}Cr(e,t){if(t){const r=UM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Ft.newInvalidDocument(e)}}function NS(n){return new eP(n)}class tP extends RS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Es((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new bt(((o,c)=>Le(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),c.isValidDocument()){const d=aE(this.Nr.serializer,c);s=s.add(o.path.popLast());const m=cm(d);r+=m-h.size,t.push(this.Nr.addEntry(e,o,d))}else if(r-=h.size,this.trackRemovals){const d=aE(this.Nr.serializer,c.convertToNoDocument(Ce.min()));t.push(this.Nr.addEntry(e,o,d))}})),s.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})})),r)))}}function EE(n){return dn(n,ih)}function ro(n){return dn(n,Zf)}function Ru(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TE(n,e){const t=e.documentKey.path.toArray();return[n,om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AE(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=Le(t[o],r[o]),s)return s;return s=Le(t.length,r.length),s||(s=Le(t[t.length-2],r[r.length-2]),s||Le(t[t.length-1],r[r.length-1]))}class nP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CS{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Yu(r.mutation,s,tr.empty(),_t.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=Ci();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let c=Ou();return o.forEach(((h,d)=>{c=c.insert(h,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ci();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,s){let o=fr();const c=Ku(),h=(function(){return Ku()})();return t.forEach(((d,m)=>{const p=r.get(m.key);s.has(m.key)&&(p===void 0||p.mutation instanceof Ts)?o=o.insert(m.key,m):p!==void 0?(c.set(m.key,p.mutation.getFieldMask()),Yu(p.mutation,m,p.mutation.getFieldMask(),_t.now())):c.set(m.key,tr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((m,p)=>c.set(m,p))),t.forEach(((m,p)=>h.set(m,new nP(p,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Ku();let s=new Vt(((c,h)=>c-h)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((d=>{const m=t.get(d);if(m===null)return;let p=r.get(d)||tr.empty();p=h.applyToLocalView(m,p),r.set(d,p);const y=(s.get(h.batchId)||Ye()).add(d);s=s.insert(h.batchId,y)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,p=d.value,y=Y2();p.forEach((v=>{if(!o.has(v)){const w=eS(t.get(v),r.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ne.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):q2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ne.resolve(Ci());let h=eh,d=o;return c.next((m=>ne.forEach(m,((p,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(p)?ne.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{d=d.insert(p,v)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,d,m,Ye()))).next((p=>({batchId:h,changes:K2(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((r=>{let s=Ou();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,o).next((h=>ne.forEach(h,(d=>{const m=(function(y,v){return new _c(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((p=>{p.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((c=>{o.forEach(((d,m)=>{const p=m.getKey();c.get(p)===null&&(c=c.insert(p,Ft.newInvalidDocument(p)))}));let h=Ou();return c.forEach(((d,m)=>{const p=o.get(d);p!==void 0&&Yu(p.mutation,m,tr.empty(),_t.now()),Ch(t,m)&&(h=h.insert(d,m))})),h}))}}class rP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Hn(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:vS(s.bundledQuery),readTime:Hn(s.readTime)}})(t)),ne.resolve()}}class iP{constructor(){this.overlays=new Vt(we.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ci();return ne.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=Ci(),o=t.length+1,c=new we(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Vt(((m,p)=>m-p));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let p=o.get(m.largestBatchId);p===null&&(p=Ci(),o=o.insert(m.largestBatchId,p)),p.set(m.getKey(),m)}}const h=Ci(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((m,p)=>h.set(m,p))),!(h.size()>=s)););return ne.resolve(h)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new r_(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class sP{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}class l_{constructor(){this.Qr=new bt(yn.$r),this.Ur=new bt(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new we(new dt([])),r=new yn(t,e),s=new yn(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new dt([])),r=new yn(t,e),s=new yn(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new yn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}class aP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(yn.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new t_(o,t,r,s);this.mutationQueue.push(c);for(const h of s)this.Zr=this.Zr.add(new yn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?mo:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),s=new yn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(c=>{const h=this.Xr(c.Yr);o.push(h)})),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Le);return t.forEach((s=>{const o=new yn(s,0),c=new yn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{r=r.add(h.Yr)}))})),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;we.isDocumentKey(o)||(o=o.child(""));const c=new yn(new we(o),0);let h=new bt(Le);return this.Zr.forEachWhile((d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Yr)),!0)}),c),ne.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ie(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(t.mutations,(s=>{const o=new yn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new yn(t,0),s=this.Zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oP{constructor(e){this.ri=e,this.docs=(function(){return new Vt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let r=fr();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ft.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=fr();const c=t.path,h=new we(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:p}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||H0(d2(p),r)<=0||(s.has(p.key)||Ch(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ee(9500)}ii(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new lP(this)}getSize(e){return ne.resolve(this.size)}}class lP extends RS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class cP{constructor(e){this.persistence=e,this.si=new Es((t=>Io(t)),Rh),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new l_,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ne.waitFor(o).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}class c_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Or(0),this.li=!1,this.li=!0,this.hi=new sP,this.referenceDelegate=e(this),this.Pi=new cP(this),this.indexManager=new KM,this.remoteDocumentCache=(function(s){return new oP(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yS(t),this.Ii=new rP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const s=new uP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ne.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class uP extends m2{constructor(e){super(),this.currentSequenceNumber=e}}class Gm{constructor(e){this.persistence=e,this.Ri=new l_,this.Vi=null}static mi(e){return new Gm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(r=>{const s=we.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class um{constructor(e,t){this.persistence=e,this.pi=new Es((r=>jn(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=IS(this,t)}static mi(e,t){return new um(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,o.removeEntry(c,Ce.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,r){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hP{constructor(e){this.serializer=e}k(e,t,r,s){const o=new km("createOrUpgrade",t);r<1&&s>=1&&((function(d){d.createObjectStore(Ih)})(e),(function(d){d.createObjectStore(rh,{keyPath:x3}),d.createObjectStore(Xr,{keyPath:Vx,autoIncrement:!0}).createIndex(ho,jx,{unique:!0}),d.createObjectStore(nc)})(e),SE(e),(function(d){d.createObjectStore(ao)})(e));let c=ne.resolve();return r<3&&s>=3&&(r!==0&&((function(d){d.deleteObjectStore(ic),d.deleteObjectStore(rc),d.deleteObjectStore(go)})(e),SE(e)),c=c.next((()=>(function(d){const m=d.store(go),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return m.put(em,p)})(o)))),r<4&&s>=4&&(r!==0&&(c=c.next((()=>(function(d,m){return m.store(Xr).J().next((y=>{d.deleteObjectStore(Xr),d.createObjectStore(Xr,{keyPath:Vx,autoIncrement:!0}).createIndex(ho,jx,{unique:!0});const v=m.store(Xr),w=y.map((A=>v.put(A)));return ne.waitFor(w)}))})(e,o)))),c=c.next((()=>{(function(d){d.createObjectStore(sc,{keyPath:k3})})(e)}))),r<5&&s>=5&&(c=c.next((()=>this.yi(o)))),r<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(ih)})(e),this.wi(o))))),r<7&&s>=7&&(c=c.next((()=>this.Si(o)))),r<8&&s>=8&&(c=c.next((()=>this.bi(e,o)))),r<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(c=c.next((()=>this.Di(o)))),r<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(Om,{keyPath:D3})})(e),(function(d){d.createObjectStore(Mm,{keyPath:O3})})(e)}))),r<12&&s>=12&&(c=c.next((()=>{(function(d){const m=d.createObjectStore(Pm,{keyPath:z3});m.createIndex(Zy,F3,{unique:!1}),m.createIndex(w2,B3,{unique:!1})})(e)}))),r<13&&s>=13&&(c=c.next((()=>(function(d){const m=d.createObjectStore(Zf,{keyPath:T3});m.createIndex(If,A3),m.createIndex(y2,S3)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(ao)))),r<14&&s>=14&&(c=c.next((()=>this.Fi(e,o)))),r<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(K0,{keyPath:M3,autoIncrement:!0}).createIndex(Jy,P3,{unique:!1}),d.createObjectStore(qu,{keyPath:V3}).createIndex(v2,j3,{unique:!1}),d.createObjectStore(Hu,{keyPath:L3}).createIndex(b2,U3,{unique:!1})})(e)))),r<16&&s>=16&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),r<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(Y0,{keyPath:q3})})(e)}))),r<18&&s>=18&&fA()&&(c=c.next((()=>{t.objectStore(qu).clear()})).next((()=>{t.objectStore(Hu).clear()}))),c}wi(e){let t=0;return e.store(ao).ee(((r,s)=>{t+=cm(s)})).next((()=>{const r={byteSize:t};return e.store(ih).put(Wy,r)}))}yi(e){const t=e.store(rh),r=e.store(Xr);return t.J().next((s=>ne.forEach(s,(o=>{const c=IDBKeyRange.bound([o.userId,mo],[o.userId,o.lastAcknowledgedBatchId]);return r.J(ho,c).next((h=>ne.forEach(h,(d=>{Ie(d.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const m=lo(this.serializer,d);return ES(e,o.userId,m).next((()=>{}))}))))}))))}Si(e){const t=e.store(ic),r=e.store(ao);return e.store(go).get(em).next((s=>{const o=[];return r.ee(((c,h)=>{const d=new dt(c),m=(function(y){return[0,jn(y)]})(d);o.push(t.get(m).next((p=>p?ne.resolve():(y=>t.put({targetId:0,path:jn(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>ne.waitFor(o)))}))}bi(e,t){e.createObjectStore(sh,{keyPath:C3});const r=t.store(sh),s=new o_,o=c=>{if(s.add(c)){const h=c.lastSegment(),d=c.popLast();return r.put({collectionId:h,parent:jn(d)})}};return t.store(ao).ee({X:!0},((c,h)=>{const d=new dt(c);return o(d.popLast())})).next((()=>t.store(nc).ee({X:!0},(([c,h,d],m)=>{const p=Ni(h);return o(p.popLast())}))))}Di(e){const t=e.store(rc);return t.ee(((r,s)=>{const o=Pu(s),c=_S(this.serializer,o);return t.put(c)}))}Ci(e,t){const r=t.store(ao),s=[];return r.ee(((o,c)=>{const h=t.store(Zf),d=(function(y){return y.document?new we(dt.fromString(y.document.name).popFirst(5)):y.noDocument?we.fromSegments(y.noDocument.path):y.unknownDocument?we.fromSegments(y.unknownDocument.path):Ee(36783)})(c).path.toArray(),m={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(h.put(m))})).next((()=>ne.waitFor(s)))}Fi(e,t){const r=t.store(Xr),s=NS(this.serializer),o=new c_(Gm.mi,this.serializer.yt);return r.J().next((c=>{const h=new Map;return c.forEach((d=>{let m=h.get(d.userId)??Ye();lo(this.serializer,d).keys().forEach((p=>m=m.add(p))),h.set(d.userId,m)})),ne.forEach(h,((d,m)=>{const p=new In(m),y=Hm.wt(this.serializer,p),v=o.getIndexManager(p),w=$m.wt(p,this.serializer,v,o.referenceDelegate);return new CS(s,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new e0(t,Or.ce),d).next()}))}))}}function SE(n){n.createObjectStore(ic,{keyPath:R3}).createIndex(G0,N3,{unique:!0}),n.createObjectStore(rc,{keyPath:"targetId"}).createIndex(_2,I3,{unique:!0}),n.createObjectStore(go)}const aa="IndexedDbPersistence",Ty=18e5,Ay=5e3,Sy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dP="main";class u_{constructor(e,t,r,s,o,c,h,d,m,p,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=h,this.xi=m,this.Oi=p,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!u_.v())throw new ve(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZM(this,s),this.$i=t+dP,this.serializer=new yS(d),this.Ui=new pa(this.$i,this.Ni,new hP(this.serializer)),this.hi=new FM,this.Pi=new QM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NS(this.serializer),this.Ii=new zM,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Bn(aa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Sy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Or(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Sa(e))return pe(aa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe(aa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Nu(e).get(Ml).next((t=>ne.resolve(this.es(t))))}ts(e){return mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ty)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=dn(t,sc);return r.J().next((s=>{const o=this.ss(s,Ty),c=s.filter((h=>o.indexOf(h)===-1));return ne.forEach(c,(h=>r.delete(h.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ne.resolve(!0):Nu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ay)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(de.FAILED_PRECONDITION,Sy);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).J().next((r=>this.ss(r,Ay).find((s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||c&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&pe(aa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ih,sc],(e=>{const t=new e0(e,Or.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>mf(e).J().next((t=>this.ss(t,Ty).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return $m.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Hm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){pe(aa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=(function(d){return d===18?G3:d===17?A2:d===16?$3:d===15?Q0:d===14?T2:d===13?E2:d===12?H3:d===11?x2:void Ee(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,o,(h=>(c=new e0(h,this.ci?this.ci.next():Or.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(de.FAILED_PRECONDITION,f2);return r(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>r(c)))))).then((h=>(c.raiseOnCommittedEvent(),h)))}Is(e){return Nu(e).get(Ml).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ay)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(de.FAILED_PRECONDITION,Sy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(Ml,t)}static v(){return pa.v()}Zi(e){const t=Nu(e);return t.get(Ml).next((r=>this.es(r)?(pe(aa,"Releasing primary lease."),t.delete(Ml)):ne.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;dA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return pe(aa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Bn(aa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(n){return dn(n,Ih)}function mf(n){return dn(n,sc)}function fP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class h_{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new h_(e,t.fromCache,r,s)}}class mP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dA()?8:g2(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new mP;return this.Ss(e,t,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Fl()<=nt.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Fl()<=nt.DEBUG&&pe("QueryEngine","Query:",Bl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Fl()<=nt.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):ne.resolve())}ys(e,t){if(Xx(t))return ne.resolve(null);let r=Pr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=im(t,null,"F"),r=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=Ye(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((d=>{const m=this.Ds(t,h);return this.Cs(t,m,c,d.readTime)?this.ys(e,im(t,null,"F")):this.vs(e,m,t,d)}))))})))))}ws(e,t,r,s){return Xx(t)||s.isEqual(Ce.min())?ne.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,s)?ne.resolve(null):(Fl()<=nt.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bl(t)),this.vs(e,c,t,g3(s,eh)).next((h=>h)))}))}Ds(e,t){let r=new bt($2(e));return t.forEach(((s,o)=>{Ch(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return Fl()<=nt.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.ps.getDocumentsMatchingQuery(e,t,mr.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const d_="LocalStore",gP=3e8;class pP{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Vt(Le),this.xs=new Es((o=>Io(o)),Rh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function DS(n,e,t,r){return new pP(n,e,t,r)}async function OS(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],h=[];let d=Ye();for(const m of s){c.push(m.batchId);for(const p of m.mutations)d=d.add(p.key)}for(const m of o){h.push(m.batchId);for(const p of m.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(r,d).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function yP(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,d,m,p){const y=m.batch,v=y.keys();let w=ne.resolve();return v.forEach((A=>{w=w.next((()=>p.getEntry(d,A))).next((P=>{const V=m.docVersions.get(A);Ie(V!==null,48541),P.version.compareTo(V)<0&&(y.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),p.addEntry(P)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let d=Ye();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function MS(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _P(n,e){const t=Ue(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((p,y)=>{const v=s.get(y);if(!v)return;h.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,p.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(on.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),s=s.insert(y,w),(function(P,V,L){return P.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=gP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,w,p)&&h.push(t.Pi.updateTargetData(o,w))}));let d=fr(),m=Ye();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))})),h.push(vP(o,c,e.documentUpdates).next((p=>{d=p.ks,m=p.qs}))),!r.isEqual(Ce.min())){const p=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));h.push(p)}return ne.waitFor(h).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,m))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function vP(n,e,t){let r=Ye(),s=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=fr();return t.forEach(((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),c=c.insert(h,d)):pe(d_,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function bP(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=mo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function wP(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ne.resolve(s)):t.Pi.allocateTargetId(r).next((c=>(s=new ds(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function m0(n,e,t){const r=Ue(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Sa(c))throw c;pe(d_,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function IE(n,e,t){const r=Ue(n);let s=Ce.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,m,p){const y=Ue(d),v=y.xs.get(p);return v!==void 0?ne.resolve(y.Ms.get(v)):y.Pi.getTargetData(m,p)})(r,c,Pr(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?s:Ce.min(),t?o:Ye()))).next((h=>(xP(r,oM(e),h),{documents:h,Qs:o})))))}function xP(n,e,t){let r=n.Os.get(e)||Ce.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class RE{constructor(){this.activeTargetIds=fM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PS{constructor(){this.Mo=new RE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EP{Oo(e){}shutdown(){}}const NE="ConnectivityMonitor";class CE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(NE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(NE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function g0(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const Iy="RestConnection",TP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===tm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const c=g0(),h=this.zo(e,t.toUriEncodedString());pe(Iy,`Sending RPC '${e}' ${c}:`,h,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:m}=new URL(h),p=jo(m);return this.Jo(e,h,d,r,p).then((y=>(pe(Iy,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Ao(Iy,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",r),y}))}Ho(e,t,r,s,o,c){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=TP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class SP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Dn="WebChannelConnection";class IP extends AP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const c=g0();return new Promise(((h,d)=>{const m=new n2;m.setWithCredentials(!0),m.listenOnce(r2.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Tf.NO_ERROR:const y=m.getResponseJson();pe(Dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),h(y);break;case Tf.TIMEOUT:pe(Dn,`RPC '${e}' ${c} timed out`),d(new ve(de.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const v=m.getStatus();if(pe(Dn,`RPC '${e}' ${c} failed with status:`,v,"response text:",m.getResponseText()),v>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const P=(function(L){const q=L.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(q)>=0?q:de.UNKNOWN})(A.status);d(new ve(P,A.message))}else d(new ve(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ve(de.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(Dn,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(s);pe(Dn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",p,r,15)}))}T_(e,t,r){const s=g0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=a2(),h=s2(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=o.join("");pe(Dn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const y=c.createWebChannel(p,d);this.I_(y);let v=!1,w=!1;const A=new SP({Yo:V=>{w?pe(Dn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(v||(pe(Dn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),pe(Dn,`RPC '${e}' stream ${s} sending:`,V),y.send(V))},Zo:()=>y.close()}),P=(V,L,q)=>{V.listen(L,(z=>{try{q(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return P(y,Du.EventType.OPEN,(()=>{w||(pe(Dn,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),P(y,Du.EventType.CLOSE,(()=>{w||(w=!0,pe(Dn,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(y))})),P(y,Du.EventType.ERROR,(V=>{w||(w=!0,Ao(Dn,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),A.a_(new ve(de.UNAVAILABLE,"The operation could not be completed")))})),P(y,Du.EventType.MESSAGE,(V=>{if(!w){const L=V.data[0];Ie(!!L,16349);const q=L,z=q?.error||q[0]?.error;if(z){pe(Dn,`RPC '${e}' stream ${s} received error:`,z);const H=z.status;let W=(function(T){const E=sn[T];if(E!==void 0)return rS(E)})(H),F=z.message;W===void 0&&(W=de.INTERNAL,F="Unknown error status: "+H+" with message "+z.message),w=!0,A.a_(new ve(W,F)),y.close()}else pe(Dn,`RPC '${e}' stream ${s} received:`,L),A.u_(L)}})),P(h,i2.STAT_EVENT,(V=>{V.stat===Yy.PROXY?pe(Dn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Yy.NOPROXY&&pe(Dn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function RP(){return typeof window<"u"?window:null}function Mf(){return typeof document<"u"?document:null}function Km(n){return new NM(n,!0)}class VS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const kE="PersistentStream";class jS{constructor(e,t,r,s,o,c,h,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new VS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ve(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(kE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(kE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NP extends jS{constructor(e,t,r,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Hn(c.readTime):Ce.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=c0(this.serializer),t.addTarget=(function(o,c){let h;const d=c.target;if(h=nm(d)?{documents:hS(o,d)}:{query:dS(o,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=aS(o,c.resumeToken);const m=o0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ce.min())>0){h.readTime=hc(o,c.snapshotVersion.toTimestamp());const m=o0(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=MM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=c0(this.serializer),t.removeTarget=e,this.q_(t)}}class CP extends jS{constructor(e,t,r,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OM(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=c0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>am(this.serializer,r)))};this.q_(t)}}class kP{}class DP extends kP{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,l0(t,r),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(de.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,l0(t,r),s,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class OP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Oo="RemoteStore";class MP{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Fo(this)&&(pe(Oo,"Restarting streams for network reachability change."),await(async function(d){const m=Ue(d);m.Ea.add(4),await Dh(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Ym(m)})(this))}))})),this.Ra=new OP(r,s)}}async function Ym(n){if(Fo(n))for(const e of n.da)await e(!0)}async function Dh(n){for(const e of n.da)await e(!1)}function LS(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),p_(t)?g_(t):bc(t).O_()&&m_(t,e))}function f_(n,e){const t=Ue(n),r=bc(t);t.Ia.delete(e),r.O_()&&US(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fo(t)&&t.Ra.set("Unknown"))}function m_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bc(n).Y_(e)}function US(n,e){n.Va.Ue(e),bc(n).Z_(e)}function g_(n){n.Va=new AM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),bc(n).start(),n.Ra.ua()}function p_(n){return Fo(n)&&!bc(n).x_()&&n.Ia.size>0}function Fo(n){return Ue(n).Ea.size===0}function zS(n){n.Va=void 0}async function PP(n){n.Ra.set("Online")}async function VP(n){n.Ia.forEach(((e,t)=>{m_(n,e)}))}async function jP(n,e){zS(n),p_(n)?(n.Ra.ha(e),g_(n)):n.Ra.set("Unknown")}async function LP(n,e,t){if(n.Ra.set("Online"),e instanceof sS&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(r){pe(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hm(n,r)}else if(e instanceof Df?n.Va.Ze(e):e instanceof iS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const r=await MS(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ia.get(m);p&&o.Ia.set(m,p.withResumeToken(d.resumeToken,c))}})),h.targetMismatches.forEach(((d,m)=>{const p=o.Ia.get(d);if(!p)return;o.Ia.set(d,p.withResumeToken(on.EMPTY_BYTE_STRING,p.snapshotVersion)),US(o,d);const y=new ds(p.target,d,m,p.sequenceNumber);m_(o,y)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){pe(Oo,"Failed to raise snapshot:",r),await hm(n,r)}}async function hm(n,e,t){if(!Sa(e))throw e;n.Ea.add(1),await Dh(n),n.Ra.set("Offline"),t||(t=()=>MS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Oo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ym(n)}))}function FS(n,e){return e().catch((t=>hm(n,t,e)))}async function Oh(n){const e=Ue(n),t=xa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mo;for(;UP(e);)try{const s=await bP(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,zP(e,s)}catch(s){await hm(e,s)}BS(e)&&qS(e)}function UP(n){return Fo(n)&&n.Ta.length<10}function zP(n,e){n.Ta.push(e);const t=xa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function BS(n){return Fo(n)&&!xa(n).x_()&&n.Ta.length>0}function qS(n){xa(n).start()}async function FP(n){xa(n).ra()}async function BP(n){const e=xa(n);for(const t of n.Ta)e.ea(t.mutations)}async function qP(n,e,t){const r=n.Ta.shift(),s=n_.from(r,e,t);await FS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Oh(n)}async function HP(n,e){e&&xa(n).X_&&await(async function(r,s){if((function(c){return xM(c)&&c!==de.ABORTED})(s.code)){const o=r.Ta.shift();xa(r).B_(),await FS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Oh(r)}})(n,e),BS(n)&&qS(n)}async function DE(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),pe(Oo,"RemoteStore received new credentials");const r=Fo(t);t.Ea.add(3),await Dh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ym(t)}async function $P(n,e){const t=Ue(n);e?(t.Ea.delete(2),await Ym(t)):e||(t.Ea.add(2),await Dh(t),t.Ra.set("Unknown"))}function bc(n){return n.ma||(n.ma=(function(t,r,s){const o=Ue(t);return o.sa(),new NP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:PP.bind(null,n),t_:VP.bind(null,n),r_:jP.bind(null,n),H_:LP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),p_(n)?g_(n):n.Ra.set("Unknown")):(await n.ma.stop(),zS(n))}))),n.ma}function xa(n){return n.fa||(n.fa=(function(t,r,s){const o=Ue(t);return o.sa(),new CP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:FP.bind(null,n),r_:HP.bind(null,n),ta:BP.bind(null,n),na:qP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Oh(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Oo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class y_{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const c=Date.now()+r,h=new y_(e,t,c,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),Sa(n))return new ve(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Wl{static emptySet(e){return new Wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Ou(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class OE{constructor(){this.ga=new Vt(we.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class dc{constructor(e,t,r,s,o,c,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,o){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new dc(e,t,Wl.emptySet(t),c,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class GP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class KP{constructor(){this.queries=ME(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Ue(t),o=s.queries;s.queries=ME(),o.forEach(((c,h)=>{for(const d of h.Sa)d.onError(r)}))})(this,new ve(de.ABORTED,"Firestore shutting down"))}}function ME(){return new Es((n=>H2(n)),Lm)}async function v_(n,e){const t=Ue(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new GP,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=__(c,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&w_(t)}async function b_(n,e){const t=Ue(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YP(n,e){const t=Ue(n);let r=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(s)&&(r=!0);c.wa=s}}r&&w_(t)}function QP(n,e,t){const r=Ue(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function w_(n){n.Ca.forEach((e=>{e.next()}))}var p0,PE;(PE=p0||(p0={})).Ma="default",PE.Cache="cache";class x_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==p0.Cache}}class HS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class XP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=$2(e),this.tu=new Wl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new OE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,y)=>{const v=s.get(p),w=Ch(this.query,y)?y:null,A=!!v&&this.mutatedKeys.has(v.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;v&&w?v.data.isEqual(w.data)?A!==P&&(r.track({type:3,doc:w}),V=!0):this.su(v,w)||(r.track({type:2,doc:w}),V=!0,(d&&this.eu(w,d)>0||m&&this.eu(w,m)<0)&&(h=!0)):!v&&w?(r.track({type:0,doc:w}),V=!0):v&&!w&&(r.track({type:1,doc:v}),V=!0,(d||m)&&(h=!0)),V&&(w?(c=c.add(w),o=P?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,y)=>(function(w,A){const P=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:V})}};return P(w)-P(A)})(p.type,y.type)||this.eu(p.doc,y.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,m=d!==this.Za;return this.Za=d,c.length!==0||m?{snapshot:new dc(this.query,e.tu,o,c,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new $S(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new HS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const E_="SyncEngine";class WP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JP{constructor(e){this.key=e,this.hu=!1}}class ZP{constructor(e,t,r,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Es((h=>H2(h)),Lm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(we.comparator),this.Au=new Map,this.Ru=new l_,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e6(n,e,t=!0){const r=WS(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await GS(r,e,t,!0),s}async function t6(n,e){const t=WS(n);await GS(t,e,!0,!1)}async function GS(n,e,t,r){const s=await wP(n.localStore,Pr(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await n6(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&LS(n.remoteStore,s),h}async function n6(n,e,t,r,s){n.pu=(y,v,w)=>(async function(P,V,L,q){let z=V.view.ru(L);z.Cs&&(z=await IE(P.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,z))));const H=q&&q.targetChanges.get(V.targetId),W=q&&q.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(z,P.isPrimaryClient,H,W);return jE(P,V.targetId,F.au),F.snapshot})(n,y,v,w);const o=await IE(n.localStore,e,!0),c=new XP(e,o.Qs),h=c.ru(o.documents),d=kh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(h,n.isPrimaryClient,d);jE(n,t,m.au);const p=new WP(e,t,c);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function r6(n,e,t){const r=Ue(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((c=>!Lm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await m0(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&f_(r.remoteStore,s.targetId),y0(r,s.targetId)})).catch(zo)):(y0(r,s.targetId),await m0(r.localStore,s.targetId,!0))}async function i6(n,e){const t=Ue(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),f_(t.remoteStore,r.targetId))}async function s6(n,e,t){const r=JS(n);try{const s=await(function(c,h){const d=Ue(c),m=_t.now(),p=h.reduce(((w,A)=>w.add(A.key)),Ye());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=fr(),P=Ye();return d.Ns.getEntries(w,p).next((V=>{A=V,A.forEach(((L,q)=>{q.isValidDocument()||(P=P.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,A))).next((V=>{y=V;const L=[];for(const q of h){const z=bM(q,y.get(q.key).overlayedDocument);z!=null&&L.push(new Ts(q.key,z,P2(z.value.mapValue),Vn.exists(!0)))}return d.mutationQueue.addMutationBatch(w,m,L,h)})).next((V=>{v=V;const L=V.applyToLocalDocumentSet(y,P);return d.documentOverlayCache.saveOverlays(w,V.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:K2(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,h,d){let m=c.Vu[c.currentUser.toKey()];m||(m=new Vt(Le)),m=m.insert(h,d),c.Vu[c.currentUser.toKey()]=m})(r,s.batchId,t),await Mh(r,s.changes),await Oh(r.remoteStore)}catch(s){const o=__(s,"Failed to persist write");t.reject(o)}}async function KS(n,e){const t=Ue(n);try{const r=await _P(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ie(c.hu,14607):s.removedDocuments.size>0&&(Ie(c.hu,42227),c.hu=!1))})),await Mh(t,r,e)}catch(r){await zo(r)}}function VE(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const d=Ue(c);d.onlineState=h;let m=!1;d.queries.forEach(((p,y)=>{for(const v of y.Sa)v.va(h)&&(m=!0)})),m&&w_(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a6(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let c=new Vt(we.comparator);c=c.insert(o,Ft.newNoDocument(o,Ce.min()));const h=Ye().add(o),d=new qm(Ce.min(),new Map,new Vt(Le),c,h);await KS(r,d),r.du=r.du.remove(o),r.Au.delete(e),T_(r)}else await m0(r.localStore,e,!1).then((()=>y0(r,e,t))).catch(zo)}async function o6(n,e){const t=Ue(n),r=e.batch.batchId;try{const s=await yP(t.localStore,e);QS(t,r,null),YS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(t,s)}catch(s){await zo(s)}}async function l6(n,e,t){const r=Ue(n);try{const s=await(function(c,h){const d=Ue(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let p;return d.mutationQueue.lookupMutationBatch(m,h).next((y=>(Ie(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(m,y)))).next((()=>d.mutationQueue.performConsistencyCheck(m))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(m,p,h))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,p))).next((()=>d.localDocuments.getDocuments(m,p)))}))})(r.localStore,e);QS(r,e,t),YS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Mh(r,s)}catch(s){await zo(s)}}function YS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function QS(n,e,t){const r=Ue(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function y0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||XS(n,r)}))}function XS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(f_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),T_(n))}function jE(n,e,t){for(const r of t)r instanceof HS?(n.Ru.addReference(r.key,e),c6(n,r)):r instanceof $S?(pe(E_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||XS(n,r.key)):Ee(19791,{wu:r})}function c6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(pe(E_,"New document in limbo: "+t),n.Eu.add(r),T_(n))}function T_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(dt.fromString(e)),r=n.fu.next();n.Au.set(r,new JP(t)),n.du=n.du.insert(t,r),LS(n.remoteStore,new ds(Pr(Nh(t.path)),r,"TargetPurposeLimboResolution",Or.ce))}}async function Mh(n,e,t){const r=Ue(n),s=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,d)=>{c.push(r.pu(d,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const p=m?!m.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(m){s.push(m);const p=h_.As(d.targetId,m);o.push(p)}})))})),await Promise.all(c),r.Pu.H_(s),await(async function(d,m){const p=Ue(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ne.forEach(m,(v=>ne.forEach(v.Es,(w=>p.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>ne.forEach(v.ds,(w=>p.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Sa(y))throw y;pe(d_,"Failed to update sequence numbers: "+y)}for(const y of m){const v=y.targetId;if(!y.fromCache){const w=p.Ms.get(v),A=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(v,P)}}})(r.localStore,o))}async function u6(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){pe(E_,"User change. New user:",e.toKey());const r=await OS(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((d=>{d.reject(new ve(de.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mh(t,r.Ls)}}function h6(n,e){const t=Ue(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function WS(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a6.bind(null,e),e.Pu.H_=YP.bind(null,e.eventManager),e.Pu.yu=QP.bind(null,e.eventManager),e}function JS(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l6.bind(null,e),e}class dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return DS(this.persistence,new kS,e.initialUser,this.serializer)}Cu(e){return new c_(Gm.mi,this.serializer)}Du(e){return new PS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dh.provider={build:()=>new dh};class d6 extends dh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ie(this.persistence.referenceDelegate instanceof um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SS(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new c_((r=>um.mi(r,t)),this.serializer)}}class f6 extends dh{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await JS(this.xu.syncEngine),await Oh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return DS(this.persistence,new kS,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new SS(r,e.asyncQueue,t)}Mu(e,t){const r=new v3(t,this.persistence);return new _3(e.asyncQueue,r)}Cu(e){const t=fP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new u_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RP(),Mf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new PS}}class dm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u6.bind(null,this.syncEngine),await $P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KP})()}createDatastore(e){const t=Km(e.databaseInfo.databaseId),r=(function(o){return new IP(o)})(e.databaseInfo);return(function(o,c,h,d){return new DP(o,c,h,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,c,h){return new MP(r,s,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>VE(this.syncEngine,t,0)),(function(){return CE.v()?new CE:new EP})())}createSyncEngine(e,t){return(function(s,o,c,h,d,m,p){const y=new ZP(s,o,c,h,d,m);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ue(t);pe(Oo,"RemoteStore shutting down."),r.Ea.add(5),await Dh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dm.provider={build:()=>new dm};class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ea="FirestoreClient";class m6{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=q0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{pe(Ea,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(pe(Ea,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=__(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ry(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Ea,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await OS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function LE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await g6(n);pe(Ea,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>DE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>DE(e.remoteStore,s))),n._onlineComponents=e}async function g6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Ea,"Using user provided OfflineComponentProvider");try{await Ry(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ao("Error using user provided cache. Falling back to memory cache: "+t),await Ry(n,new dh)}}else pe(Ea,"Using default OfflineComponentProvider"),await Ry(n,new d6(void 0));return n._offlineComponents}async function ZS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Ea,"Using user provided OnlineComponentProvider"),await LE(n,n._uninitializedComponentsProvider._online)):(pe(Ea,"Using default OnlineComponentProvider"),await LE(n,new dm))),n._onlineComponents}function p6(n){return ZS(n).then((e=>e.syncEngine))}async function fm(n){const e=await ZS(n),t=e.eventManager;return t.onListen=e6.bind(null,e.syncEngine),t.onUnlisten=r6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=t6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=i6.bind(null,e.syncEngine),t}function y6(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,d,m){const p=new A_({next:v=>{p.Nu(),c.enqueueAndForget((()=>b_(o,y)));const w=v.docs.has(h);!w&&v.fromCache?m.reject(new ve(de.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?m.reject(new ve(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new x_(Nh(h.path),p,{includeMetadataChanges:!0,qa:!0});return v_(o,y)})(await fm(n),n.asyncQueue,e,t,r))),r.promise}function _6(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,d,m){const p=new A_({next:v=>{p.Nu(),c.enqueueAndForget((()=>b_(o,y))),v.fromCache&&d.source==="server"?m.reject(new ve(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new x_(h,p,{includeMetadataChanges:!0,qa:!0});return v_(o,y)})(await fm(n),n.asyncQueue,e,t,r))),r.promise}function eI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const UE=new Map;const tI="firestore.googleapis.com",zE=!0;class FE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tI,this.ssl=zE}else this.host=e.host,this.ssl=e.ssl??zE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new ve(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(de.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new r3;switch(r.type){case"firstParty":return new o3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=UE.get(t);r&&(pe("ComponentProvider","Removing Datastore"),UE.delete(t),r.terminate())})(this),Promise.resolve()}}function v6(n,e,t,r={}){n=qn(n,Qm);const s=jo(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(N0(`https://${h}`),C0("Firestore",!0)),o.host!==tI&&o.host!==h&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:r};if(!ps(d,c)&&(n._setSettings(d),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=In.MOCK_USER;else{m=uA(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ve(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new In(y)}n._authCredentials=new i3(new l2(m,p))}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Sh(t,Bt._jsonSchema))return new Bt(e,r||null,new we(dt.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:an("string",Bt._jsonSchemaVersion),referencePath:an("string")};class ya extends As{constructor(e,t,r){super(e,t,Nh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new we(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function Ln(n,e,...t){if(n=Yt(n),u2("collection","path",e),n instanceof Qm){const r=dt.fromString(e,...t);return kx(r),new ya(n,null,r)}{if(!(n instanceof Bt||n instanceof ya))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return kx(r),new ya(n.firestore,null,r)}}function It(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=q0.newId()),u2("doc","path",e),n instanceof Qm){const r=dt.fromString(e,...t);return Cx(r),new Bt(n,null,new we(r))}{if(!(n instanceof Bt||n instanceof ya))throw new ve(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return Cx(r),new Bt(n.firestore,n instanceof ya?n.converter:null,new we(r))}}const BE="AsyncQueue";class qE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new VS(this,"async_queue_retry"),this._c=()=>{const r=Mf();r&&pe(BE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sa(e))throw e;pe(BE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",HE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=y_.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ee(47125,{Pc:HE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function HE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $E(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Li extends Qm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new qE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qE(e),this._firestoreClient=void 0,await e}}}function b6(n,e){const t=typeof n=="object"?n:O0(),r=typeof n=="string"?n:tm,s=Sm(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=oA("firestore");o&&v6(s,...o)}return s}function Xm(n){if(n._terminated)throw new ve(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nI(n),n._firestoreClient}function nI(n){const e=n._freezeSettings(),t=(function(s,o,c,h){return new Y3(s,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new m6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}function w6(n,e){Ao("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return x6(n,dm.provider,{build:r=>new f6(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function x6(n,e,t){if((n=qn(n,Li))._firestoreClient||n._terminated)throw new ve(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ve(de.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},nI(n)}class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(on.fromBase64String(e))}catch(t){throw new ve(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sh(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:an("string",Dr._jsonSchemaVersion),bytes:an("string")};class Wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wc{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Sh(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:an("string",Pi._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sh(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ve(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:an("string",Vi._jsonSchemaVersion),vectorValues:an("object")};const E6=/^__.*__$/;class T6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class rI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class Jm{constructor(e,t,r,s,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iI(this.Ac)&&E6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Km(e)}Cc(e,t,r,s=!1){return new Jm({Ac:e,methodName:t,Dc:r,path:jt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(n){const e=n._freezeSettings(),t=Km(n._databaseId);return new A6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sI(n,e,t,r,s,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);N_("Data must be an object, but it was:",c,r);const h=oI(r,c);let d,m;if(o.merge)d=new tr(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const v=_0(e,y,t);if(!c.contains(v))throw new ve(de.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);cI(p,v)||p.push(v)}d=new tr(p),m=c.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,m=c.fieldTransforms;return new T6(new Mn(h),d,m)}class eg extends wc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function aI(n,e,t){return new Jm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S_ extends wc{_toFieldTransform(e){return new zm(e.path,new uc)}isEqual(e){return e instanceof S_}}class I_ extends wc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=aI(this,e,!0),r=this.vc.map((o=>Bo(o,t))),s=new Ro(r);return new zm(e.path,s)}isEqual(e){return e instanceof I_&&ps(this.vc,e.vc)}}class R_ extends wc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=aI(this,e,!0),r=this.vc.map((o=>Bo(o,t))),s=new No(r);return new zm(e.path,s)}isEqual(e){return e instanceof R_&&ps(this.vc,e.vc)}}function S6(n,e,t,r){const s=n.Cc(1,e,t);N_("Data must be an object, but it was:",s,r);const o=[],c=Mn.empty();Ia(r,((d,m)=>{const p=C_(e,d,t);m=Yt(m);const y=s.yc(p);if(m instanceof eg)o.push(p);else{const v=Bo(m,y);v!=null&&(o.push(p),c.set(p,v))}}));const h=new tr(o);return new rI(c,h,s.fieldTransforms)}function I6(n,e,t,r,s,o){const c=n.Cc(1,e,t),h=[_0(e,r,t)],d=[s];if(o.length%2!=0)throw new ve(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)h.push(_0(e,o[v])),d.push(o[v+1]);const m=[],p=Mn.empty();for(let v=h.length-1;v>=0;--v)if(!cI(m,h[v])){const w=h[v];let A=d[v];A=Yt(A);const P=c.yc(w);if(A instanceof eg)m.push(w);else{const V=Bo(A,P);V!=null&&(m.push(w),p.set(w,V))}}const y=new tr(m);return new rI(p,y,c.fieldTransforms)}function R6(n,e,t,r=!1){return Bo(t,n.Cc(r?4:3,e))}function Bo(n,e){if(lI(n=Yt(n)))return N_("Unsupported field value:",e,n),oI(n,e);if(n instanceof wc)return(function(r,s){if(!iI(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let c=0;for(const h of r){let d=Bo(h,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=_t.fromDate(r);return{timestampValue:hc(s.serializer,o)}}if(r instanceof _t){const o=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hc(s.serializer,o)}}if(r instanceof Pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:aS(s.serializer,r._byteString)};if(r instanceof Bt){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:s_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vi)return(function(c,h){return{mapValue:{fields:{[W0]:{stringValue:J0},[ac]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return e_(h.serializer,m)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Cm(r)}`)})(n,e)}function oI(n,e){const t={};return S2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(n,((r,s)=>{const o=Bo(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function lI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof Pi||n instanceof Dr||n instanceof Bt||n instanceof wc||n instanceof Vi)}function N_(n,e,t){if(!lI(t)||!h2(t)){const r=Cm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function _0(n,e,t){if((e=Yt(e))instanceof Wm)return e._internalPath;if(typeof e=="string")return C_(n,e);throw mm("Field path arguments must be of type string or ",n,!1,void 0,t)}const N6=new RegExp("[~\\*/\\[\\]]");function C_(n,e,t){if(e.search(N6)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wm(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mm(n,e,t,r,s){const o=r&&!r.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new ve(de.INVALID_ARGUMENT,h+n+d)}function cI(n,e){return n.some((t=>t.isEqual(e)))}class uI{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class C6 extends uI{data(){return super.data()}}function tg(n,e){return typeof e=="string"?C_(n,e):e instanceof Wm?e._internalPath:e._delegate._internalPath}function hI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k_{}class D_ extends k_{}function Ta(n,e,...t){let r=[];e instanceof k_&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((d=>d instanceof O_)).length,h=o.filter((d=>d instanceof ng)).length;if(c>1||c>0&&h>0)throw new ve(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class ng extends D_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ng(e,t,r)}_apply(e){const t=this._parse(e);return dI(e._query,t),new As(e.firestore,e.converter,a0(e._query,t))}_parse(e){const t=Zm(e.firestore);return(function(o,c,h,d,m,p,y){let v;if(m.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ve(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){YE(y,p);const A=[];for(const P of y)A.push(KE(d,o,P));v={arrayValue:{values:A}}}else v=KE(d,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||YE(y,p),v=R6(h,c,y,p==="in"||p==="not-in");return rt.create(m,p,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qo(n,e,t){const r=e,s=tg("where",n);return ng._create(s,r,t)}class O_ extends k_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new O_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const h=o.getFlattenedFilters();for(const d of h)dI(c,d),c=a0(c,d)})(e._query,t),new As(e.firestore,e.converter,a0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class M_ extends D_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new M_(e,t)}_apply(e){const t=(function(s,o,c){if(s.startAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ve(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uh(o,c)})(e._query,this._field,this._direction);return new As(e.firestore,e.converter,(function(s,o){const c=s.explicitOrderBy.concat([o]);return new _c(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function k6(n,e="asc"){const t=e,r=tg("orderBy",n);return M_._create(r,t)}class P_ extends D_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new P_(e,t,r)}_apply(e){return new As(e.firestore,e.converter,im(e._query,this._limit,this._limitType))}}function GE(n){return m3("limit",n),P_._create("limit",n,"F")}function KE(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new ve(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q2(e)&&t.indexOf("/")!==-1)throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!we.isDocumentKey(r))throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lh(n,new we(r))}if(t instanceof Bt)return lh(n,t._key);throw new ve(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(t)}.`)}function YE(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dI(n,e){const t=(function(s,o){for(const c of s)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class D6{convertValue(e,t="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ia(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[ac].arrayValue?.values?.map((r=>Pt(r.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new Pi(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ah(e));default:return null}}convertTimestamp(e){const t=vs(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Ie(pS(r),9688,{name:e});const s=new So(r.get(1),r.get(3)),o=new we(r.popFirst(5));return s.isEqual(t)||Bn(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function fI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends uI{constructor(e,t,r,s,o,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:an("string",yo._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Pf extends yo{data(e={}){return super.data(e)}}class _o{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Pf(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const d=new Pf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const d=new Pf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,p=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),p=c.indexOf(h.doc.key)),{type:O6(h.type),doc:d,oldIndex:m,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=q0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}function Ra(n){n=qn(n,Bt);const e=qn(n.firestore,Li);return y6(Xm(e),n._key).then((t=>mI(e,n,t)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:an("string",_o._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class V_ extends D6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function fc(n){n=qn(n,As);const e=qn(n.firestore,Li),t=Xm(e),r=new V_(e);return hI(n._query),_6(t,n._query).then((s=>new _o(e,r,n,s)))}function v0(n,e,t){n=qn(n,Bt);const r=qn(n.firestore,Li),s=fI(n.converter,e,t);return ig(r,[sI(Zm(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Vn.none())])}function gr(n,e,t,...r){n=qn(n,Bt);const s=qn(n.firestore,Li),o=Zm(s);let c;return c=typeof(e=Yt(e))=="string"||e instanceof Wm?I6(o,"updateDoc",n._key,e,t,r):S6(o,"updateDoc",n._key,e),ig(s,[c.toMutation(n._key,Vn.exists(!0))])}function rg(n){return ig(qn(n.firestore,Li),[new Bm(n._key,Vn.none())])}function Ph(n,e){const t=qn(n.firestore,Li),r=It(n),s=fI(n.converter,e);return ig(t,[sI(Zm(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then((()=>r))}function vo(n,...e){n=Yt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$E(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($E(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,c,h;if(n instanceof Bt)c=qn(n.firestore,Li),h=Nh(n._key.path),o={next:d=>{e[r]&&e[r](mI(c,n,d))},error:e[r+1],complete:e[r+2]};else{const d=qn(n,As);c=qn(d.firestore,Li),h=d._query;const m=new V_(c);o={next:p=>{e[r]&&e[r](new _o(c,m,d,p))},error:e[r+1],complete:e[r+2]},hI(n._query)}return(function(m,p,y,v){const w=new A_(v),A=new x_(p,w,y);return m.asyncQueue.enqueueAndForget((async()=>v_(await fm(m),A))),()=>{w.Nu(),m.asyncQueue.enqueueAndForget((async()=>b_(await fm(m),A)))}})(Xm(c),h,s,o)}function ig(n,e){return(function(r,s){const o=new Mi;return r.asyncQueue.enqueueAndForget((async()=>s6(await p6(r),s,o))),o.promise})(Xm(n),e)}function mI(n,e,t){const r=t.docs.get(e._key),s=new V_(n);return new yo(n,s,e._key,r,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}function Vr(){return new S_("serverTimestamp")}function j_(...n){return new I_("arrayUnion",n)}function gI(...n){return new R_("arrayRemove",n)}(function(e,t=!0){(function(s){yc=s})(Lo),wo(new va("firestore",((r,{instanceIdentifier:s,options:o})=>{const c=r.getProvider("app").getImmediate(),h=new Li(new s3(r.getProvider("auth-internal")),new l3(c,r.getProvider("app-check-internal")),(function(m,p){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(m.options.projectId,p)})(c,s),c);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),ki(Sx,Ix,e),ki(Sx,Ix,"esm2020")})();const pI="firebasestorage.googleapis.com",M6="storageBucket",P6=120*1e3,V6=600*1e3;class Bi extends zi{constructor(e,t,r=0){super(Ny(e),`Firebase Storage: ${t} (${Ny(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function Ny(n){return"storage/"+n}function j6(){const n="An unknown error occurred, please check the error payload for server response.";return new Bi(Ui.UNKNOWN,n)}function L6(){return new Bi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U6(){return new Bi(Ui.CANCELED,"User canceled the upload/download.")}function z6(n){return new Bi(Ui.INVALID_URL,"Invalid URL '"+n+"'.")}function F6(n){return new Bi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function QE(n){return new Bi(Ui.INVALID_ARGUMENT,n)}function yI(){return new Bi(Ui.APP_DELETED,"The Firebase app was deleted.")}function B6(n){return new Bi(Ui.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Jr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Jr.makeFromUrl(e,t)}catch{return new Jr(e,"")}if(r.path==="")return r;throw F6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+s+c,"i"),d={bucket:1,path:3};function m(H){H.path_=decodeURIComponent(H.path)}const p="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${p}/b/${s}/o${v}`,"i"),A={bucket:1,path:3},P=t===pI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",L=new RegExp(`^https?://${P}/${s}/${V}`,"i"),z=[{regex:h,indices:d,postModify:o},{regex:w,indices:A,postModify:m},{regex:L,indices:{bucket:1,path:2},postModify:m}];for(let H=0;H<z.length;H++){const W=z[H],F=W.regex.exec(e);if(F){const R=F[W.indices.bucket];let T=F[W.indices.path];T||(T=""),r=new Jr(R,T),W.postModify(r);break}}if(r==null)throw z6(e);return r}}class q6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function H6(n,e,t){let r=1,s=null,o=null,c=!1,h=0;function d(){return h===2}let m=!1;function p(...V){m||(m=!0,e.apply(null,V))}function y(V){s=setTimeout(()=>{s=null,n(w,d())},V)}function v(){o&&clearTimeout(o)}function w(V,...L){if(m){v();return}if(V){v(),p.call(null,V,...L);return}if(d()||c){v(),p.call(null,V,...L);return}r<64&&(r*=2);let z;h===1?(h=2,z=0):z=(r+Math.random())*1e3,y(z)}let A=!1;function P(V){A||(A=!0,v(),!m&&(s!==null?(V||(h=2),clearTimeout(s),y(0)):V||(h=1)))}return y(0),o=setTimeout(()=>{c=!0,P(!0)},t),P}function $6(n){n(!1)}function G6(n){return n!==void 0}function XE(n,e,t,r){if(r<e)throw QE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw QE(`Invalid value for '${n}'. Expected ${t} or less.`)}function K6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var gm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(gm||(gm={}));function Y6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}class Q6{constructor(e,t,r,s,o,c,h,d,m,p,y,v=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=p,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,P)=>{this.resolve_=A,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===gm.NO_ERROR,d=o.getStatus();if(!h||Y6(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===gm.ABORT;r(!1,new pf(!1,null,p));return}const m=this.successCodes_.indexOf(d)!==-1;r(!0,new pf(m,o))})},t=(r,s)=>{const o=this.resolve_,c=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());G6(d)?o(d):o()}catch(d){c(d)}else if(h!==null){const d=j6();d.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,d)):c(d)}else if(s.canceled){const d=this.appDelete_?yI():U6();c(d)}else{const d=L6();c(d)}};this.canceled_?t(!1,new pf(!1,null,!0)):this.backoffId_=H6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function X6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function W6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Z6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function eV(n,e,t,r,s,o,c=!0,h=!1){const d=K6(n.urlParams),m=n.url+d,p=Object.assign({},n.headers);return J6(p,e),X6(p,t),W6(p,o),Z6(p,r),new Q6(m,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,h)}function tV(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function nV(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class pm{constructor(e,t){this._service=e,t instanceof Jr?this._location=t:this._location=Jr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pm(e,t)}get root(){const e=new Jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nV(this._location.path)}get storage(){return this._service}get parent(){const e=tV(this._location.path);if(e===null)return null;const t=new Jr(this._location.bucket,e);return new pm(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw B6(e)}}function WE(n,e){const t=e?.[M6];return t==null?null:Jr.makeFromBucketSpec(t,n)}function rV(n,e,t,r={}){n.host=`${e}:${t}`;const s=jo(e);s&&(N0(`https://${n.host}/b`),C0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:uA(o,n.app.options.projectId))}class iV{constructor(e,t,r,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=pI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P6,this._maxUploadRetryTime=V6,this._requests=new Set,s!=null?this._bucket=Jr.makeFromBucketSpec(s,this._host):this._bucket=WE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jr.makeFromBucketSpec(this._url,e):this._bucket=WE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pm(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new q6(yI());{const c=eV(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const JE="@firebase/storage",ZE="0.14.0";const _I="storage";function sV(n=O0(),e){n=Yt(n);const r=Sm(n,_I).getImmediate({identifier:e}),s=oA("storage");return s&&aV(r,...s),r}function aV(n,e,t,r={}){rV(n,e,t,r)}function oV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new iV(t,r,s,e,Lo)}function lV(){wo(new va(_I,oV,"PUBLIC").setMultipleInstances(!0)),ki(JE,ZE,""),ki(JE,ZE,"esm2020")}lV();const cV={apiKey:"AIzaSyAukVlaxbs_YneslsBqTydefDhepXbookU",authDomain:"plantai0.firebaseapp.com",projectId:"plantai0",storageBucket:"plantai0.firebasestorage.app",messagingSenderId:"265722530392",appId:"1:265722530392:web:5e2b3aed63d2597b07d82d",measurementId:"G-LSJ7Q09VS0"},L_=yA(cV),Zr=t3(L_),He=b6(L_);sV(L_);new cs;try{w6(He).catch(n=>{n.code=="failed-precondition"?console.warn("Firebase persistence failed: multiple tabs"):n.code=="unimplemented"&&console.warn("Firebase persistence not supported")})}catch{}const vI=$.createContext();function ii(){return $.useContext(vI)}function uV({children:n}){const[e,t]=$.useState(null),[r,s]=$.useState(!0);$.useEffect(()=>HO(Zr,async d=>{if(d){t(d);try{const m=await Ra(It(He,"users",d.uid));m.exists()&&t(p=>({...p,...m.data()}))}catch(m){console.error("Error fetching user profile:",m)}}else t(null);s(!1)}),[]);const c={currentUser:e,loading:r,logout:async()=>{await Zr.signOut(),t(null)}};return b.jsx(vI.Provider,{value:c,children:!r&&n})}const hV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),eT=n=>{const e=dV(n);return e.charAt(0).toUpperCase()+e.slice(1)},bI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),fV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var mV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gV=$.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...h},d)=>$.createElement("svg",{ref:d,...mV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:bI("lucide",s),...!o&&!fV(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,p])=>$.createElement(m,p)),...Array.isArray(o)?o:[o]]));const Pe=(n,e)=>{const t=$.forwardRef(({className:r,...s},o)=>$.createElement(gV,{ref:o,iconNode:e,className:bI(`lucide-${hV(eT(n))}`,`lucide-${n}`,r),...s}));return t.displayName=eT(n),t};const pV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],U_=Pe("activity",pV);const yV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_V=Pe("arrow-left",yV);const vV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wI=Pe("arrow-right",vV);const bV=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],wV=Pe("brain",bV);const xV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],EV=Pe("calendar-check",xV);const TV=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Jl=Pe("camera",TV);const AV=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z_=Pe("chevron-down",AV);const SV=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],F_=Pe("circle-check-big",SV);const IV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RV=Pe("circle-check",IV);const NV=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xI=Pe("clock",NV);const CV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kV=Pe("file-text",CV);const DV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],tT=Pe("globe",DV);const OV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],MV=Pe("grid-3x3",OV);const PV=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],EI=Pe("heart",PV);const VV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],jV=Pe("house",VV);const LV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],UV=Pe("image",LV);const zV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],FV=Pe("info",zV);const BV=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],qV=Pe("leaf",BV);const HV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mr=Pe("loader-circle",HV);const $V=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],nT=Pe("log-in",$V);const GV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KV=Pe("log-out",GV);const YV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QV=Pe("mail",YV);const XV=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],fh=Pe("message-circle",XV);const WV=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],JV=Pe("mic",WV);const ZV=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ej=Pe("moon",ZV);const tj=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],rT=Pe("paperclip",tj);const nj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],TI=Pe("pen",nj);const rj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ij=Pe("play",rj);const sj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aj=Pe("plus",sj);const oj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lj=Pe("refresh-cw",oj);const cj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AI=Pe("save",cj);const uj=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],iT=Pe("scan-line",uj);const hj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],SI=Pe("search",hj);const dj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mh=Pe("send",dj);const fj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],b0=Pe("share-2",fj);const mj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gj=Pe("shield-check",mj);const pj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],yj=Pe("sparkles",pj);const _j=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],ti=Pe("sprout",_j);const vj=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],sT=Pe("stethoscope",vj);const bj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],wj=Pe("sun",bj);const xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],aT=Pe("target",xj);const Ej=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sg=Pe("trash-2",Ej);const Tj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oT=Pe("triangle-alert",Tj);const Aj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Sj=Pe("user-plus",Aj);const Ij=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],w0=Pe("user",Ij);const Rj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Nj=Pe("users",Rj);const Cj=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],kj=Pe("wand-sparkles",Cj);const Dj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mo=Pe("x",Dj);const Oj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Mj=Pe("zap",Oj),II=$.createContext();function Ho(){return $.useContext(II)}function Pj({children:n}){const[e,t]=$.useState([]),r=$.useCallback((o,c="info",h=4e3)=>{const d=Date.now();t(m=>[...m,{id:d,message:o,type:c}]),setTimeout(()=>{s(d)},h)},[]),s=$.useCallback(o=>{t(c=>c.filter(h=>h.id!==o))},[]);return b.jsxs(II.Provider,{value:{addToast:r,removeToast:s},children:[n,b.jsx("div",{className:"fixed top-6 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(o=>b.jsxs("div",{className:`
                            pointer-events-auto
                            flex items-center gap-3 px-5 py-3 rounded-2xl shadow-lg backdrop-blur-md border
                            transform transition-all duration-500 animate-slide-in hover:scale-102
                            ${o.type==="success"?"bg-emerald-50/90 border-emerald-200 text-emerald-800 dark:bg-emerald-900/40 dark:border-emerald-700/50 dark:text-emerald-100":""}
                            ${o.type==="error"?"bg-rose-50/90 border-rose-200 text-rose-800 dark:bg-rose-900/40 dark:border-rose-700/50 dark:text-rose-100":""}
                            ${o.type==="info"?"bg-indigo-50/90 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:border-indigo-700/50 dark:text-indigo-100":""}
                            ${o.type==="warning"?"bg-amber-50/90 border-amber-200 text-amber-800 dark:bg-amber-900/40 dark:border-amber-700/50 dark:text-amber-100":""}
                            min-w-[300px] max-w-sm
                        `,children:[o.type==="success"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 shrink-0"}),o.type==="error"&&b.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 shrink-0"}),o.type==="info"&&b.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center shrink-0 text-xs font-bold text-green-600",children:"AI"}),b.jsx("p",{className:"text-sm font-medium leading-tight flex-1 tracking-tight font-sans",children:o.message})]},o.id))})]})}function Vj(){const{currentUser:n,logout:e}=ii(),{t,i18n:r}=Un(),s=pr(),o=ws(),{addToast:c}=Ho(),h=()=>{r.changeLanguage(r.language==="en"?"tr":"en")},[d,m]=$.useState(localStorage.getItem("theme")||"light");$.useEffect(()=>{d==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d)},[d]);const[p]=$.useState(()=>new Audio("https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3")),y=()=>{m(A=>A==="dark"?"light":"dark")};$.useEffect(()=>{if(!n)return;const A=async()=>{try{await gr(It(He,"users",n.uid),{lastSeen:Vr()})}catch(V){console.error("Presence update failed",V)}};A();const P=setInterval(A,60*1e3);return()=>clearInterval(P)},[n]),$.useEffect(()=>{if(!n)return;const A=Ta(Ln(He,"chats"),qo("participants","array-contains",n.uid)),P=vo(A,V=>{V.docChanges().forEach(L=>{if(L.type==="modified"){const q=L.doc.data(),z=q.updatedAt?.seconds*1e3;if(Date.now()-z>5e3)return;const H=q.participants.find(F=>F!==n.uid);if(!(s.pathname===`/messages/${L.doc.id}`)&&H){const F=q.participantData?.[H]||{name:"Someone"};p.play().catch(R=>console.log("Audio play failed",R)),c(`New message from ${F.name}: ${q.lastMessage?.substring(0,30)}...`,"info",5e3)}}})});return()=>P()},[n,s.pathname,c,p]);const w=[{path:"/",icon:jV,label:t("app_name"),public:!0},{path:"/community",icon:Nj,label:t("community"),public:!0},{path:"/analyses",icon:xI,label:t("analyses"),public:!1},{path:"/messages",icon:fh,label:t("messages"),public:!1},{path:"/profile",icon:w0,label:t("profile"),public:!1},{path:"/about",icon:FV,label:t("about"),public:!0}].filter(A=>A.public||n);return b.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans overflow-hidden",children:[b.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300",children:[b.jsxs(kr,{to:"/",className:"p-6 flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(ti,{className:"w-8 h-8 text-green-600"}),b.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("nav",{className:"flex-1 px-4 space-y-2",children:w.map(A=>{const P=A.icon,V=s.pathname===A.path;return b.jsxs(kr,{to:A.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${V?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 font-semibold shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[b.jsx(P,{className:"w-5 h-5"}),b.jsx("span",{children:A.label})]},A.path)})}),b.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[b.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[b.jsx("span",{className:"font-bold border border-gray-300 dark:border-gray-600 rounded px-1 text-xs",children:r.language.toUpperCase()}),b.jsx("span",{children:t("language")||"Language"})]}),b.jsxs("button",{onClick:y,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[d==="dark"?b.jsx(wj,{className:"w-5 h-5"}):b.jsx(ej,{className:"w-5 h-5"}),b.jsx("span",{children:t(d==="dark"?"light_mode":"dark_mode")})]}),n?b.jsxs("div",{className:"flex flex-col gap-2",children:[b.jsxs("div",{className:"px-2 py-1",children:[b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-bold",children:t("welcome_user")}),b.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:n.displayName||n.email})]}),b.jsxs("button",{onClick:async()=>{await e(),o("/")},className:"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-sm",children:[b.jsx(KV,{className:"w-5 h-5"}),b.jsx("span",{children:t("logout")})]})]}):b.jsxs(kr,{to:"/login",className:"flex items-center gap-3 w-full px-4 py-3 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors font-semibold",children:[b.jsx(nT,{className:"w-5 h-5"}),b.jsx("span",{children:t("login")})]})]})]}),b.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[b.jsxs("header",{className:"md:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between sticky top-0 z-10",children:[b.jsxs(kr,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[b.jsx(ti,{className:"w-6 h-6 text-green-600"}),b.jsxs("span",{className:"font-bold text-lg",children:[b.jsx("span",{className:"text-green-700 dark:text-green-500",children:"Plant"}),b.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"AI"})]})]}),b.jsx("button",{onClick:h,className:"text-sm font-bold bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg",children:r.language.toUpperCase()})]}),b.jsx("div",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-24 md:pb-8 scroll-smooth relative",id:"main-scroll",children:b.jsx("div",{className:"w-full h-full flex flex-col",children:b.jsx(FC,{})})}),b.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex justify-around p-2 z-50 safe-area-bottom shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:[w.map(A=>{const P=A.icon,V=s.pathname===A.path;return b.jsxs(kr,{to:A.path,className:`flex flex-col items-center justify-center p-2 rounded-lg ${V?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:[b.jsx(P,{className:`w-6 h-6 ${V?"fill-current":""}`}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:A.label})]},A.path)}),!n&&b.jsxs(kr,{to:"/login",className:"flex flex-col items-center justify-center p-2 text-gray-500",children:[b.jsx(nT,{className:"w-6 h-6"}),b.jsx("span",{className:"text-xs mt-1 font-medium",children:t("login")})]})]})]})]})}function jj(){const[n,e]=$.useState(""),[t,r]=$.useState(""),[s,o]=$.useState(""),[c,h]=$.useState(!1),[d,m]=$.useState(!1),[p,y]=$.useState(!1),v=ws(),w=pr(),{t:A}=Un(),{currentUser:P}=ii(),{addToast:V}=Ho();if(P?.emailVerified)return w.state?.returnUrl&&w.state?.pendingResult?v(w.state.returnUrl,{replace:!0,state:{restoredResult:w.state.pendingResult,restoredImages:w.state.pendingImages,restoredPlantType:w.state.pendingPlantType}}):v(w.state?.returnUrl||"/"),null;const L=async()=>{y(!0);try{const z=await gx(Zr,n,t);await HA(z.user),await Zr.signOut(),V(A("verification_sent")||"Verification email sent! Check your inbox.","success")}catch(z){console.error("Resend error:",z),z.code==="auth/too-many-requests"?V(A("too_many_requests")||"Too many attempts. Please wait.","error"):V(A("resend_failed")||"Failed to resend email.","error")}finally{y(!1)}},q=async z=>{z.preventDefault(),o(""),m(!1),h(!0);try{if(!(await gx(Zr,n,t)).user.emailVerified){await Zr.signOut(),m(!0);return}}catch(H){console.error(H);let W=A("login_failed")||"Failed to login.";H.code==="auth/user-not-found"||H.code==="auth/wrong-password"||H.code==="auth/invalid-credential"?W=A("invalid_credentials")||"Invalid email or password.":H.code==="auth/too-many-requests"?W=A("too_many_requests")||"Too many attempts. Try again later.":H.code==="auth/user-disabled"?W="Account disabled. Contact support.":H.code==="auth/network-request-failed"&&(W="Network error. Check your connection."),o(W)}finally{h(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:b.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(ti,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:A("welcome")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:A("login_prompt")}),s&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:s}),d?b.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-xl animate-fade-in",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-400",children:b.jsx(ti,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:A("verify_email_title")||"Verify your email"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:A("verify_email_desc")||"We've sent a confirmation link to your inbox. Please check your spam folder too."}),b.jsx("button",{onClick:L,disabled:p,className:"w-full py-2 px-4 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg text-sm font-semibold transition-colors disabled:opacity-50",children:p?"Sending...":A("resend_verification")||"Resend Verification Email"})]}):b.jsxs("form",{onSubmit:q,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:z=>e(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:z=>r(z.target.value)})]}),b.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[c?"Logging in...":A("login"),!c&&b.jsx(wI,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",b.jsx(kr,{to:"/register",state:w.state,className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:A("register")})]})]})})})}function Lj({user:n,onClose:e,onVerified:t}){const{t:r}=Un(),[s,o]=$.useState(!1);$.useEffect(()=>{const h=setInterval(async()=>{if(n)try{await n.reload(),n.emailVerified&&(clearInterval(h),t())}catch(d){console.error("Verification check failed",d)}},3e3);return()=>clearInterval(h)},[n,t]);const c=async()=>{o(!0);try{await n.reload(),n.emailVerified&&t()}catch(h){console.error(h)}finally{setTimeout(()=>o(!1),500)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md shadow-2xl p-8 flex flex-col items-center text-center relative overflow-hidden",children:[b.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-blue-400 rounded-full blur-3xl opacity-20"}),b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6 text-green-600 dark:text-green-400 animate-pulse",children:b.jsx(QV,{className:"w-10 h-10"})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r("verify_email_title")||"Verify Your Email"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:r("verify_email_desc")||`We sent a confirmation link to ${n?.email}. Please check your inbox and click the link to continue.`}),b.jsxs("div",{className:"space-y-4 w-full",children:[b.jsx("button",{onClick:()=>window.open("https://mail.google.com","_blank"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:r("open_email_app")||"Open Email App"}),b.jsxs("button",{onClick:c,disabled:s,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2",children:[s?b.jsx(lj,{className:"w-5 h-5 animate-spin"}):b.jsx(F_,{className:"w-5 h-5"}),r("i_verified_it")||"I Verified the Email"]}),b.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:r("cancel")||"Cancel"})]})]})})}function Uj(){const[n,e]=$.useState(""),[t,r]=$.useState(""),[s,o]=$.useState(""),[c,h]=$.useState(""),[d,m]=$.useState(!1),[p,y]=$.useState(!1),[v,w]=$.useState(null),A=ws(),P=pr(),{t:V}=Un(),L=async z=>{z.preventDefault(),h(""),m(!0);try{const H=await zO(Zr,n,t);await Gy(H.user,{displayName:s}),await HA(H.user),w(H.user),y(!0),m(!1)}catch(H){h(H.message),console.error(H),m(!1)}},q=async()=>{Zr.currentUser&&await Zr.currentUser.reload(),y(!1),P.state?.returnUrl&&P.state?.pendingResult?A(P.state.returnUrl,{replace:!0,state:{restoredResult:P.state.pendingResult,restoredImages:P.state.pendingImages,restoredPlantType:P.state.pendingPlantType}}):A("/")};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden relative",children:[p&&v&&b.jsx(Lj,{user:v,onClose:()=>y(!1),onVerified:q}),b.jsxs("div",{className:"p-8",children:[b.jsx("div",{className:"flex justify-center mb-6",children:b.jsx("div",{className:"bg-green-600 w-full mb-8 p-6 rounded-2xl flex items-center justify-center shadow-lg",children:b.jsx(ti,{className:"w-16 h-16 text-white"})})}),b.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:V("register")}),b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-8",children:V("create_account_desc")||V("join_community")||"Create an account to join the community"}),c&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),b.jsxs("form",{onSubmit:L,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("full_name")||"Full Name"}),b.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:s,onChange:z=>o(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("email")}),b.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:n,onChange:z=>e(z.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:V("password")}),b.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all",value:t,onChange:z=>r(z.target.value)})]}),b.jsxs("button",{type:"submit",disabled:d||p,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?V("creating_account")||"Creating Account...":V("register"),!d&&b.jsx(Sj,{className:"w-4 h-4"})]})]}),b.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400",children:[V("already_have_account")||"Already have an account?"," "," ",b.jsx(kr,{to:"/login",className:"text-green-600 hover:text-green-700 font-semibold hover:underline",children:V("login")})]})]})]})})}var lT;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(lT||(lT={}));var cT;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(cT||(cT={}));var uT;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(uT||(uT={}));const hT=["user","model","function","system"];var dT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(dT||(dT={}));var fT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(fT||(fT={}));var mT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(mT||(mT={}));var gT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(gT||(gT={}));var Qu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Qu||(Qu={}));var pT;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(pT||(pT={}));var yT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(yT||(yT={}));var _T;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(_T||(_T={}));class Pn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class zl extends Pn{constructor(e,t){super(e),this.response=t}}class RI extends Pn{constructor(e,t,r,s){super(e),this.status=t,this.statusText=r,this.errorDetails=s}}class _a extends Pn{}class NI extends Pn{}const zj="https://generativelanguage.googleapis.com",Fj="v1beta",Bj="0.24.1",qj="genai-js";var Po;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Po||(Po={}));class Hj{constructor(e,t,r,s,o){this.model=e,this.task=t,this.apiKey=r,this.stream=s,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Fj;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||zj}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function $j(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${qj}/${Bj}`),e.join(" ")}async function Gj(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",$j(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new _a(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,o]of r.entries()){if(s==="x-goog-api-key")throw new _a(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new _a(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function Kj(n,e,t,r,s,o){const c=new Hj(n,e,t,r,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Wj(o)),{method:"POST",headers:await Gj(c),body:s})}}async function Vh(n,e,t,r,s,o={},c=fetch){const{url:h,fetchOptions:d}=await Kj(n,e,t,r,s,o);return Yj(h,d,c)}async function Yj(n,e,t=fetch){let r;try{r=await t(n,e)}catch(s){Qj(s,n)}return r.ok||await Xj(r,n),r}function Qj(n,e){let t=n;throw t.name==="AbortError"?(t=new NI(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof RI||n instanceof _a||(t=new Pn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function Xj(n,e){let t="",r;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new RI(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function Wj(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function B_(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${oa(n)}`,n);return Jj(n)}else if(n.promptFeedback)throw new zl(`Text not available. ${oa(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${oa(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vT(n)[0]}else if(n.promptFeedback)throw new zl(`Function call not available. ${oa(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vf(n.candidates[0]))throw new zl(`${oa(n)}`,n);return vT(n)}else if(n.promptFeedback)throw new zl(`Function call not available. ${oa(n)}`,n)},n}function Jj(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function vT(n){var e,t,r,s;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const Zj=[Qu.RECITATION,Qu.SAFETY,Qu.LANGUAGE];function Vf(n){return!!n.finishReason&&Zj.includes(n.finishReason)}function oa(n){var e,t,r;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];Vf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function gh(n){return this instanceof gh?(this.v=n,this):new gh(n)}function eL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(v){r[v]&&(s[v]=function(w){return new Promise(function(A,P){o.push([v,w,A,P])>1||h(v,w)})})}function h(v,w){try{d(r[v](w))}catch(A){y(o[0][3],A)}}function d(v){v.value instanceof gh?Promise.resolve(v.value.v).then(m,p):y(o[0][2],v)}function m(v){h("next",v)}function p(v){h("throw",v)}function y(v,w){v(w),o.shift(),o.length&&h(o[0][0],o[0][1])}}const bT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function tL(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=iL(e),[r,s]=t.tee();return{stream:rL(r),response:nL(s)}}async function nL(n){const e=[],t=n.getReader();for(;;){const{done:r,value:s}=await t.read();if(r)return B_(sL(e));e.push(s)}}function rL(n){return eL(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:s}=yield gh(t.read());if(s)break;yield yield gh(B_(r))}})}function iL(n){const e=n.getReader();return new ReadableStream({start(r){let s="";return o();function o(){return e.read().then(({value:c,done:h})=>{if(h){if(s.trim()){r.error(new Pn("Failed to parse stream"));return}r.close();return}s+=c;let d=s.match(bT),m;for(;d;){try{m=JSON.parse(d[1])}catch{r.error(new Pn(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(m),s=s.substring(d[0].length),d=s.match(bT)}return o()}).catch(c=>{let h=c;throw h.stack=c.stack,h.name==="AbortError"?h=new NI("Request aborted when reading from the stream"):h=new Pn("Error reading from the stream"),h})}}})}function sL(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let s=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const c={};for(const h of o.content.parts)h.text&&(c.text=h.text),h.functionCall&&(c.functionCall=h.functionCall),h.executableCode&&(c.executableCode=h.executableCode),h.codeExecutionResult&&(c.codeExecutionResult=h.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function CI(n,e,t,r){const s=await Vh(e,Po.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return tL(s)}async function kI(n,e,t,r){const o=await(await Vh(e,Po.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:B_(o)}}function DI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function ph(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return aL(e)}function aL(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,s=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),r=!0);if(r&&s)throw new Pn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new Pn("No content is provided for sending chat message.");return r?e:t}function oL(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new _a("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(s)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=ph(n);r.contents=[o]}return{generateContentRequest:r}}function wT(n){let e;return n.contents?e=n:e={contents:[ph(n)]},n.systemInstruction&&(e.systemInstruction=DI(n.systemInstruction)),e}function lL(n){return typeof n=="string"||Array.isArray(n)?{content:ph(n)}:n}const xT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],cL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function uL(n){let e=!1;for(const t of n){const{role:r,parts:s}=t;if(!e&&r!=="user")throw new Pn(`First content should be with role 'user', got ${r}`);if(!hT.includes(r))throw new Pn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(hT)}`);if(!Array.isArray(s))throw new Pn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Pn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of s)for(const d of xT)d in h&&(o[d]+=1);const c=cL[r];for(const h of xT)if(!c.includes(h)&&o[h]>0)throw new Pn(`Content with role '${r}' can't contain '${h}' part`);e=!0}}function ET(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const TT="SILENT_ERROR";class hL{constructor(e,t,r,s={}){this.model=t,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(uL(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,s,o,c,h,d;await this._sendPromise;const m=ph(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>kI(this._apiKey,this.model,p,y)).then(w=>{var A;if(ET(w.response)){this._history.push(m);const P=Object.assign({parts:[],role:"model"},(A=w.response.candidates)===null||A===void 0?void 0:A[0].content);this._history.push(P)}else{const P=oa(w.response);P&&console.warn(`sendMessage() was unsuccessful. ${P}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,t={}){var r,s,o,c,h,d;await this._sendPromise;const m=ph(e),p={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t),v=CI(this._apiKey,this.model,p,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(TT)}).then(w=>w.response).then(w=>{if(ET(w)){this._history.push(m);const A=Object.assign({},w.candidates[0].content);A.role||(A.role="model"),this._history.push(A)}else{const A=oa(w);A&&console.warn(`sendMessageStream() was unsuccessful. ${A}. Inspect response object for details.`)}}).catch(w=>{w.message!==TT&&console.error(w)}),v}}async function dL(n,e,t,r){return(await Vh(e,Po.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function fL(n,e,t,r){return(await Vh(e,Po.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function mL(n,e,t,r){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Vh(e,Po.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),r)).json()}class AT{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=DI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const s=wT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return kI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}async generateContentStream(e,t={}){var r;const s=wT(e),o=Object.assign(Object.assign({},this._requestOptions),t);return CI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),o)}startChat(e){var t;return new hL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=oL(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return dL(this.apiKey,this.model,r,s)}async embedContent(e,t={}){const r=lL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return fL(this.apiKey,this.model,r,s)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return mL(this.apiKey,this.model,e,r)}}class gL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Pn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new AT(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new _a("Cached content must contain a `name` field.");if(!e.model)throw new _a("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t?.[c]&&e[c]&&t?.[c]!==e[c]){if(c==="model"){const h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(h===d)continue}throw new _a(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new AT(this.apiKey,o,r)}}async function OI(n,e="tr",t=null){const r=Array.isArray(n)?n:[n];let s="";t&&t.trim().length>0&&(s=`The user identifies this plant as "${t}". Use this as context but verify visually.`);const o=`
    You are an expert Phytopathologist. Analyze the provided plant image(s).
    ${s}
    OUTPUT MUST BE IN ${e==="en"?"ENGLISH":"TURKISH"}.

    PROTOCOL:
    1. If the image is not a plant, return {"status": "error", "error": "NOT_PLANT"}
    2. If the ailment is unclear, the image is blurry, or you need a closer look (macro shot) to be at least 70% confident, return:
       {"status": "needs_details", "message": "Please take a closer photo of the affected leaf or area."}
    3. If confident, return a valid JSON object:
    {
        "status": "success",
        "disease_name": "Disease Name",
        "latin_name": "Latin Name",
        "confidence": 90,
        "urgency": 50,
        "spread_risk": 40,
        "is_treatable": true, // false if plant is dead, rotten beyond saving, or abiotic stress that cannot be reversed
        "description": "Short description (max 2 sentences).",
        "treatment_steps": ["Step 1", "Step 2", "Step 3"], // Only if is_treatable is true
        "preventive_measures": ["Tip 1", "Tip 2"] // If not treatable or general advice
    }
    
    Return ONLY valid raw JSON (no markdown, no backticks).
  `,c=[{text:o}];r.forEach(d=>{if(!d)return;const m=d.includes(",")?d.split(",")[1]:d;c.push({inline_data:{mime_type:"image/jpeg",data:m}})});const h={contents:[{parts:c}],safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_LOW_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]};try{const d=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!d.ok){const p=await d.text();throw console.error("Backend Error Response:",p),p.trim().startsWith("<")||p.includes("A server error")?new Error("Backend function not available. Please verify server status."):new Error(`Server Error: ${d.status} ${d.statusText}`)}const m=await d.json();if(m.error)throw new Error(m.error.message||"API Connection Error");if(m.plant_name||m.status)return m;if(m.candidates&&m.candidates[0].content){const y=m.candidates[0].content.parts[0].text.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(y)}throw new Error("Invalid response structure from AI")}catch(d){console.warn("Backend analysis failed, attempting client-side fallback...",d);const m="AIzaSyC2aYSoTNOkcmHd-SwQlUI1TNPnZAcAqqE";try{const y=new gL(m).getGenerativeModel({model:"gemini-2.5-flash"}),w=[o];r.forEach(q=>{if(!q)return;const z=q.includes(",")?q.split(",")[1]:q;w.push({inlineData:{data:z,mimeType:"image/jpeg"}})});const L=(await(await y.generateContent(w)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(L)}catch(p){throw console.error("Fallback also failed:",p),new Error(p.message||"AI Diagnosis completely failed.")}}}const mc="analyses";async function MI(n,e,t,r,s=!1){try{const o=t.main||null,c=t.macro||null;return o&&o.length>9e5&&console.warn("Main image is very large for Firestore!"),(await Ph(Ln(He,mc),{userId:n,plantType:e,mainImage:o,macroImage:c,result:r,isPublic:s,status:"active",createdAt:Vr(),nextCheckup:new Date(Date.now()+10080*60*1e3)})).id}catch(o){throw console.error("Error saving analysis:",o),o}}async function PI(n){try{const e=Ta(Ln(He,mc),qo("userId","==",n)),r=(await fc(e)).docs.map(async o=>{const c=o.data();let h=[];try{h=(await fc(Ln(He,mc,o.id,"updates"))).docs.map(m=>m.data()).sort((m,p)=>(p.createdAt?.seconds||0)-(m.createdAt?.seconds||0))}catch(d){console.log("No updates found or error",d)}return{id:o.id,...c,updates:h}});return(await Promise.all(r)).sort((o,c)=>{const h=o.createdAt?.seconds||0;return(c.createdAt?.seconds||0)-h})}catch(e){return console.error("Error fetching analyses:",e),[]}}async function VI(n){try{return await rg(It(He,mc,n)),!0}catch(e){throw console.error("Error deleting analysis:",e),e}}async function jI(n,e){try{const t=It(He,mc,n);await gr(t,{...e,updatedAt:Vr()})}catch(t){throw console.error("Error updating analysis:",t),t}}async function LI(n,e,t){try{let r=null;e.image&&(typeof e.image=="string"&&e.image.startsWith("data:")?r=e.image:console.warn("Received File object but Storage is disabled. Skipping image."));const s=Ph(Ln(He,"posts"),{userId:n,authorName:e.authorName||"Gardener",title:e.title||"",content:e.content,image:r,plantType:e.plantType||"Unknown",likes:[],comments:[],createdAt:Vr()}),o=new Promise(c=>setTimeout(()=>c("timeout"),5e3));return await Promise.race([s,o]),!0}catch(r){throw console.error("Error creating post:",r),r}}async function UI(n,e,t,r="Gardener",s=null){try{const o=`${t} - ${e.result.disease_name}`,c=`Analiz Sonucu: ${e.result.disease_name}

${e.result.description}`;return await Ph(Ln(He,"posts"),{userId:e.userId,authorName:r,userAvatar:s,title:o,content:c,image:e.mainImage,plantType:t,likes:[],comments:[],createdAt:Vr(),relatedAnalysisId:n}),await jI(n,{isPublic:!0}),!0}catch(o){throw console.error("Error sharing to community:",o),o}}async function zI(n,e,t){try{return await Ph(Ln(He,mc,n,"updates"),{imageUrl:e||null,note:t,createdAt:Vr()}),!0}catch(r){throw console.error("Error adding feedback:",r),r}}async function FI(n){try{const e=It(He,"posts",n),t=await Ra(e);if(!t.exists())return!1;const r=t.data();if(r.relatedAnalysisId)try{const s=It(He,"analyses",r.relatedAnalysisId);await gr(s,{isPublic:!1})}catch(s){console.warn("Could not sync analysis status (might be deleted)",s)}return await rg(e),!0}catch(e){throw console.error("Error deleting post:",e),e}}async function BI(n,e){try{const t=It(He,"posts",n),r=await Ra(t);if(!r.exists())return;(r.data().likes||[]).includes(e)?await gr(t,{likes:gI(e)}):await gr(t,{likes:j_(e)})}catch(t){throw console.error("Error toggling like:",t),t}}async function qI(n,e,t,r){try{const s=It(He,"posts",n),o={userId:e,userName:t,text:r,createdAt:Date.now()};return await gr(s,{comments:j_(o)}),!0}catch(s){throw console.error("Error adding comment:",s),s}}async function HI(n,e){try{const t=It(He,"posts",n);return await gr(t,{...e,updatedAt:Vr()}),!0}catch(t){throw console.error("Error updating post:",t),t}}async function x0(n,e,t){try{const r=Ta(Ln(He,"posts"),qo("userId","==",n)),o=(await fc(r)).docs.map(c=>gr(c.ref,{authorName:e,userAvatar:t}));return await Promise.all(o),!0}catch(r){return console.error("Error syncing user profile to posts:",r),!1}}async function pL(n,e,t,r){try{if(n===e)throw new Error("Cannot start chat with yourself.");const s=[n,e].sort(),o=`${s[0]}_${s[1]}`,c=It(He,"chats",o);return(await Ra(c)).exists()?await gr(c,{[`participantData.${n}`]:r}):await v0(c,{participants:[n,e],participantData:{[e]:t,[n]:r},createdAt:Vr(),updatedAt:Vr(),lastMessage:""}),o}catch(s){throw console.error("Error starting chat:",s),s}}const yL=Object.freeze(Object.defineProperty({__proto__:null,addComment:qI,addFeedbackUpdate:zI,createPost:LI,deleteAnalysis:VI,deletePost:FI,getUserAnalyses:PI,saveAnalysis:MI,shareAnalysisToCommunity:UI,startChat:pL,toggleLike:BI,updateAnalysisStatus:jI,updatePost:HI,updateUserPostsName:x0},Symbol.toStringTag,{value:"Module"}));function _L({result:n,onReset:e}){const{t}=Un();return n?n.error==="NOT_PLANT"?b.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden p-8 text-center",children:[b.jsx("div",{className:"mx-auto bg-red-100 dark:bg-red-900/30 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:b.jsx(oT,{className:"w-8 h-8 text-red-600 dark:text-red-500"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Could not identify plant"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please ensure the photo contains a clear view of a plant leaf or stem."}),b.jsx("button",{onClick:e,className:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-xl font-medium transition-colors",children:"Try Again"})]}):b.jsxs("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fade-in",children:[b.jsx("div",{className:"bg-green-600 text-white p-6",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold",children:n.disease_name}),b.jsx("p",{className:"opacity-90 italic text-lg",children:n.latin_name})]}),b.jsxs("div",{className:"flex flex-col items-end",children:[b.jsxs("div",{className:"text-2xl font-bold",children:[n.confidence,"%"]}),b.jsx("div",{className:"text-xs uppercase opacity-75",children:t("confidence")})]})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-orange-700 dark:text-orange-500 font-semibold",children:[b.jsx(U_,{className:"w-5 h-5"}),b.jsx("span",{children:"Urgency"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-orange-600 h-2.5 rounded-full",style:{width:`${n.urgency}%`}})})]}),b.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-900/20",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1 text-blue-700 dark:text-blue-500 font-semibold",children:[b.jsx(ti,{className:"w-5 h-5"}),b.jsx("span",{children:"Spread Risk"})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:b.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${n.spread_risk}%`}})})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:n.description})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n.is_treatable===!1?t("prevention_tips")||"Koruyucu nlemler & Tavsiyeler":t("treatment")}),n.is_treatable===!1&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-xl text-sm border border-red-100 dark:border-red-900/30 flex gap-3",children:[b.jsx(oT,{className:"w-5 h-5 flex-shrink-0"}),b.jsx("p",{children:t("plant_not_recoverable")||"Bu bitki iin tedavi uygulanamayabilir veya kurtarlmas zor olabilir. Aadaki nlemler ile dier bitkilerinizi koruyabilirsiniz."})]}),b.jsx("ul",{className:"space-y-3",children:(n.is_treatable===!1?n.preventive_measures:n.treatment_steps)?.map((r,s)=>b.jsxs("li",{className:"flex gap-3",children:[b.jsx(F_,{className:`w-6 h-6 flex-shrink-0 ${n.is_treatable===!1?"text-orange-500":"text-green-600"}`}),b.jsx("span",{className:"text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg flex-1",children:r})]},s))})]}),b.jsx("div",{className:"pt-4 flex gap-4",children:b.jsx("button",{onClick:e,className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white py-3 rounded-xl font-medium transition-colors",children:"New Scan"})})]})]}):null}function vL(){const{t:n,i18n:e}=Un(),{currentUser:t}=ii(),r=ws(),s=pr(),{addToast:o}=Ho(),c=$.useRef(null),[h,d]=$.useState("landing"),[m,p]=$.useState(""),[y,v]=$.useState({main:null,macro:null}),[w,A]=$.useState(!1),[P,V]=$.useState(null),[L,q]=$.useState(!1);$.useEffect(()=>{s.state?.restoredResult&&(V(s.state.restoredResult),d("result"),s.state?.restoredImages&&(v(s.state.restoredImages),p(s.state.restoredPlantType||"")))},[s.state]);const z=()=>{h==="input_type"&&d("capture_main")},H=()=>{p(""),d("capture_main")},W=()=>{c.current&&(c.current.value="",c.current.click())},F=async k=>{const M=k.target.files?.[0];if(!M)return;const J=new FileReader;J.onloadend=async()=>{const Q=J.result;h==="capture_main"?(v(se=>({...se,main:Q})),await R(Q)):h==="capture_macro"&&(v(se=>({...se,macro:Q})),await R([y.main,Q]))},J.readAsDataURL(M)},R=async(k,M)=>{A(!0),d("analyzing"),q(!1);try{const J=await OI(k,e.language,m);if(J.status==="needs_details")o(n("need_macro_photo")||"I need a closer look. Please take a macro photo.","info"),d("capture_macro");else{if(J.status==="error")throw new Error(J.error);V(J),d("result")}}catch(J){console.error(J);const Q=J.message||n("error_diagnosis_failed")||"Diagnosis failed.";o(Q,"error"),d("capture_main")}finally{A(!1)}},T=async()=>{if(t&&!L)try{const k=await MI(t.uid,m,y,P);q(!0),o(n("treatment_started")||"Tedavi sreci balatld!","success"),setTimeout(()=>{r("/analyses",{state:{showTreatmentGuide:!0,newAnalysisId:k}})},500)}catch(k){console.error("Manual save failed:",k),o("Failed to save analysis: "+k.message,"error")}},E=()=>{r("/login",{state:{pendingResult:P,pendingImages:y,pendingPlantType:m,returnUrl:"/"}})},N=()=>{v({main:null,macro:null}),p(""),V(null),q(!1),d("input_type"),c.current&&(c.current.value="")},C=()=>b.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in relative overflow-hidden",children:[b.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30 dark:opacity-10",children:[b.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-400 rounded-full mix-blend-multiply filter blur-[100px] animate-float opacity-70"}),b.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-emerald-300 rounded-full mix-blend-multiply filter blur-[120px] animate-float delay-100 opacity-70"})]}),b.jsxs("div",{className:"text-center max-w-4xl py-20 px-4 z-10",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-2 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-sm mb-8 animate-fade-in",children:[b.jsx(yj,{className:"w-4 h-4 text-amber-500"}),b.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent font-bold text-sm tracking-wide",children:n("ai_powered_v2")||"POWERED BY GEMINI AI"})]}),b.jsxs("h1",{className:"text-5xl md:text-7xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight tracking-tight animate-slide-up",children:[n("hero_title_1")||"Heal your plants with"," ",b.jsx("br",{}),b.jsx("span",{className:"text-gradient drop-shadow-sm",children:n("hero_title_highlight")||"AI Precision"})]}),b.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed animate-slide-up delay-100",children:n("hero_desc_v2")||"Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo."}),b.jsxs("button",{onClick:()=>d("input_type"),className:"group relative bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-5 px-12 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all text-xl flex items-center justify-center gap-3 mx-auto animate-slide-up delay-200",children:[b.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 group-hover:scale-110 transition-transform opacity-0 group-hover:opacity-100 duration-500 blur-lg"}),b.jsxs("span",{className:"relative flex items-center gap-3",children:[b.jsx(Jl,{className:"w-6 h-6"}),n("start_diagnosis")]})]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-6xl px-4 z-10 mb-20 animate-slide-up delay-300",children:[{title:n("feature_1_title")||"Instant Analysis",desc:n("feature_1_desc")||"Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",icon:Mj,color:"from-yellow-400 to-orange-500"},{title:n("feature_2_title")||"Smart Interactions",desc:n("feature_2_desc")||"The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",icon:wV,color:"from-blue-400 to-indigo-500"},{title:n("feature_3_title")||"Verified Treatments",desc:n("feature_3_desc")||"Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",icon:gj,color:"from-green-400 to-emerald-500"}].map((k,M)=>{const J=k.icon;return b.jsxs("div",{className:"glass-card p-8 hover:scale-[1.02] transition-transform duration-300 group",children:[b.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 bg-gradient-to-br ${k.color} shadow-lg text-white transform group-hover:rotate-6 transition-transform`,children:b.jsx(J,{className:"w-7 h-7"})}),b.jsx("h3",{className:"font-bold text-2xl mb-3 text-gray-900 dark:text-white",children:k.title}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:k.desc})]},M)})}),b.jsx("div",{className:"w-full max-w-6xl px-4 z-10 mb-20",children:b.jsxs("div",{className:"glass p-10 rounded-3xl text-center md:text-left flex flex-col md:flex-row items-center gap-10",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("summary_title")||"Your Personal Pocket Botanist"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-lg leading-relaxed",children:n("summary_desc")||"Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs."}),b.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(U_,{className:"w-4 h-4 text-green-500"})," 95% Accuracy"]}),b.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-lg",children:[b.jsx(iT,{className:"w-4 h-4 text-blue-500"})," Macro Support"]})]})]}),b.jsx("div",{className:"w-full md:w-1/3 flex justify-center",children:b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full blur-2xl opacity-20 animate-pulse"}),b.jsx("img",{src:"/placeholder-plant.png",onError:k=>{k.target.style.display="none"},className:"relative w-48 h-48 object-contain drop-shadow-2xl",alt:""}),b.jsx(ti,{className:"w-48 h-48 text-green-600 dark:text-green-400 drop-shadow-2xl relative z-10"})]})})]})})]}),O=()=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-full mb-6 text-green-600 dark:text-green-400",children:b.jsx(ti,{className:"w-12 h-12"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-center",children:n("scan_step_1")}),b.jsx("p",{className:"text-gray-500 mb-6 text-center",children:n("what_plant_question")}),b.jsx("input",{type:"text",value:m,onChange:k=>p(k.target.value),placeholder:n("what_plant_placeholder"),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 mb-4 focus:ring-2 focus:ring-green-500 outline-none"}),b.jsxs("button",{onClick:z,disabled:!m.trim(),className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[n("next_step")," ",b.jsx(wI,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:H,className:"mt-4 text-gray-500 text-sm hover:underline",children:n("skip")})]}),D=k=>b.jsxs("div",{className:"flex flex-col items-center w-full max-w-md animate-fade-in",children:[b.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:k?"Close-up Photo":"Take Photo"}),b.jsxs("button",{onClick:W,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 px-10 rounded-2xl shadow-xl flex items-center justify-center gap-4 text-xl w-full",children:[b.jsx(Jl,{className:"w-8 h-8"}),b.jsx("span",{children:k?"Take Macro":"Open Camera"})]}),b.jsx("button",{onClick:()=>d("input_type"),className:"mt-6 text-gray-500 underline",children:"Back"})]}),G=()=>b.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[b.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-green-500",children:[y.main&&b.jsx("img",{src:y.main,alt:"Analyzing",className:"w-full h-full object-cover opacity-50"}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:b.jsx(Mr,{className:"w-16 h-16 text-white animate-spin"})})]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white animate-bounce",children:n("analyzing")||"Analyzing..."}),b.jsx("p",{className:"text-gray-500 mt-2",children:"AI Botanist is thinking..."})]}),Z=()=>b.jsxs("div",{className:"w-full flex gap-8 flex-col md:flex-row items-start animate-fade-in relative justify-center",children:[b.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0 z-0",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("img",{src:y.main,alt:"Analyzed Plant",className:"w-full rounded-2xl shadow-lg border-2 border-green-100 dark:border-green-900"}),y.macro&&b.jsx("img",{src:y.macro,alt:"Macro Detail",className:"w-24 h-24 rounded-lg shadow border border-white absolute bottom-4 right-4"}),t&&b.jsx("button",{onClick:T,disabled:L,className:`mt-4 w-full font-bold py-4 px-6 rounded-xl border shadow-lg transition-transform hover:-translate-y-0.5 flex items-center justify-center gap-3 ${L?"bg-gray-100 text-gray-500 border-gray-200 cursor-default":"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white border-transparent"}`,children:L?b.jsxs(b.Fragment,{children:[b.jsx(F_,{className:"w-6 h-6"}),b.jsx("span",{children:n("saved")||"Kaydedildi"})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:b.jsx(AI,{className:"w-5 h-5"})}),b.jsx("span",{className:"text-lg",children:P?.is_treatable===!1?n("save_info")||"Bilgiyi Kaydet":n("start_treatment")||"Tedaviye Bala"})]})}),b.jsxs("button",{onClick:N,className:"mt-4 w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-white font-semibold py-3 px-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm transition-all",children:[n("take_photo")," (Reset)"]})]})}),b.jsxs("div",{className:"w-full md:w-2/3 relative",children:[b.jsx("div",{className:`transition-all duration-500 ${t?"":"filter blur-md select-none pointer-events-none opacity-50"}`,children:b.jsx(_L,{result:P,onReset:N})}),!t&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 backdrop-blur-[2px] rounded-2xl",children:b.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 p-8 rounded-3xl shadow-2xl text-center max-w-sm border border-white/20 mx-4 transform transition-all hover:scale-105",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:b.jsx(iT,{className:"w-8 h-8 text-green-600"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:n("login_to_view")}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:n("login_blur_text")}),b.jsx("button",{onClick:E,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg hover:shadow-green-500/25 active:scale-95",children:n("login")})]})})]})]});return b.jsxs("div",{className:`flex flex-col w-full max-w-7xl mx-auto p-4 lg:p-8 ${h==="result"?"items-start":"items-center justify-center min-h-full"}`,children:[b.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:c,onChange:F,className:"hidden"}),h==="landing"?C():b.jsxs(b.Fragment,{children:[h!=="result"&&b.jsxs("button",{onClick:()=>d("landing"),className:"self-start mb-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 flex items-center gap-2",children:[" ",n("back")]}),h==="input_type"&&O(),h==="capture_main"&&D(!1),h==="capture_macro"&&D(!0),h==="analyzing"&&G(),h==="result"&&Z()]})]})}const yf=43200,ST=1440,IT=Symbol.for("constructDateFrom");function q_(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&IT in n?n[IT](e):n instanceof Date?new n.constructor(e):new Date(e)}function Aa(n,e){return q_(n,n)}let bL={};function wL(){return bL}function RT(n){const e=Aa(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function H_(n,...e){const t=q_.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function jf(n,e){const t=+Aa(n)-+Aa(e);return t<0?-1:t>0?1:t}function xL(n){return q_(n,Date.now())}function EL(n,e,t){const[r,s]=H_(t?.in,n,e),o=r.getFullYear()-s.getFullYear(),c=r.getMonth()-s.getMonth();return o*12+c}function TL(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function AL(n,e){return+Aa(n)-+Aa(e)}function SL(n,e){const t=Aa(n);return t.setHours(23,59,59,999),t}function IL(n,e){const t=Aa(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function RL(n,e){const t=Aa(n);return+SL(t)==+IL(t)}function NL(n,e,t){const[r,s,o]=H_(t?.in,n,n,e),c=jf(s,o),h=Math.abs(EL(s,o));if(h<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*h);let d=jf(s,o)===-c;RL(r)&&h===1&&jf(r,o)===1&&(d=!1);const m=c*(h-+d);return m===0?0:m}function CL(n,e,t){const r=AL(n,e)/1e3;return TL(t?.roundingMethod)(r)}const kL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DL=(n,e,t)=>{let r;const s=kL[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Zl(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const OL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ML={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VL={date:Zl({formats:OL,defaultWidth:"full"}),time:Zl({formats:ML,defaultWidth:"full"}),dateTime:Zl({formats:PL,defaultWidth:"full"})},jL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},LL=(n,e,t,r)=>jL[n];function Si(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t?.width?String(t.width):c;s=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t?.width?String(t.width):n.defaultWidth;s=n.values[h]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return s[o]}}const UL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$L=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},GL={ordinalNumber:$L,era:Si({values:UL,defaultWidth:"wide"}),quarter:Si({values:zL,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Si({values:FL,defaultWidth:"wide"}),day:Si({values:BL,defaultWidth:"wide"}),dayPeriod:Si({values:qL,defaultWidth:"wide",formattingValues:HL,defaultFormattingWidth:"wide"})};function Ii(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(h)?YL(h,y=>y.test(c)):KL(h,y=>y.test(c));let m;m=n.valueCallback?n.valueCallback(d):d,m=t.valueCallback?t.valueCallback(m):m;const p=e.slice(c.length);return{value:m,rest:p}}}function KL(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function YL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function $I(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(s.length);return{value:c,rest:h}}}const QL=/^(\d+)(th|st|nd|rd)?/i,XL=/\d+/i,WL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},JL={any:[/^b/i,/^(a|c)/i]},ZL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eU={any:[/1/i,/2/i,/3/i,/4/i]},tU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oU={ordinalNumber:$I({matchPattern:QL,parsePattern:XL,valueCallback:n=>parseInt(n,10)}),era:Ii({matchPatterns:WL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:ZL,defaultMatchWidth:"wide",parsePatterns:eU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ii({matchPatterns:tU,defaultMatchWidth:"wide",parsePatterns:nU,defaultParseWidth:"any"}),day:Ii({matchPatterns:rU,defaultMatchWidth:"wide",parsePatterns:iU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:sU,defaultMatchWidth:"any",parsePatterns:aU,defaultParseWidth:"any"})},$_={code:"en-US",formatDistance:DL,formatLong:VL,formatRelative:LL,localize:GL,match:oU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lU(n,e,t){const r=wL(),s=t?.locale??r.locale??$_,o=2520,c=jf(n,e);if(isNaN(c))throw new RangeError("Invalid time value");const h=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:c}),[d,m]=H_(t?.in,...c>0?[e,n]:[n,e]),p=CL(m,d),y=(RT(m)-RT(d))/1e3,v=Math.round((p-y)/60);let w;if(v<2)return t?.includeSeconds?p<5?s.formatDistance("lessThanXSeconds",5,h):p<10?s.formatDistance("lessThanXSeconds",10,h):p<20?s.formatDistance("lessThanXSeconds",20,h):p<40?s.formatDistance("halfAMinute",0,h):p<60?s.formatDistance("lessThanXMinutes",1,h):s.formatDistance("xMinutes",1,h):v===0?s.formatDistance("lessThanXMinutes",1,h):s.formatDistance("xMinutes",v,h);if(v<45)return s.formatDistance("xMinutes",v,h);if(v<90)return s.formatDistance("aboutXHours",1,h);if(v<ST){const A=Math.round(v/60);return s.formatDistance("aboutXHours",A,h)}else{if(v<o)return s.formatDistance("xDays",1,h);if(v<yf){const A=Math.round(v/ST);return s.formatDistance("xDays",A,h)}else if(v<yf*2)return w=Math.round(v/yf),s.formatDistance("aboutXMonths",w,h)}if(w=NL(m,d),w<12){const A=Math.round(v/yf);return s.formatDistance("xMonths",A,h)}else{const A=w%12,P=Math.trunc(w/12);return A<3?s.formatDistance("aboutXYears",P,h):A<9?s.formatDistance("overXYears",P,h):s.formatDistance("almostXYears",P+1,h)}}function ag(n,e){return lU(n,xL(n),e)}const cU={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},uU=(n,e,t)=>{let r;const s=cU[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?r+" sonra":r+" nce":r},hU={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},dU={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},fU={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mU={date:Zl({formats:hU,defaultWidth:"full"}),time:Zl({formats:dU,defaultWidth:"full"}),dateTime:Zl({formats:fU,defaultWidth:"full"})},gU={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},pU=(n,e,t,r)=>gU[n],yU={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},_U={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},vU={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},bU={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},wU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},xU={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},EU=(n,e)=>Number(n)+".",TU={ordinalNumber:EU,era:Si({values:yU,defaultWidth:"wide"}),quarter:Si({values:_U,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Si({values:vU,defaultWidth:"wide"}),day:Si({values:bU,defaultWidth:"wide"}),dayPeriod:Si({values:wU,defaultWidth:"wide",formattingValues:xU,defaultFormattingWidth:"wide"})},AU=/^(\d+)(\.)?/i,SU=/\d+/i,IU={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},RU={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},NU={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},CU={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},kU={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},DU={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},OU={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},MU={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},PU={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},VU={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},jU={ordinalNumber:$I({matchPattern:AU,parsePattern:SU,valueCallback:function(n){return parseInt(n,10)}}),era:Ii({matchPatterns:IU,defaultMatchWidth:"wide",parsePatterns:RU,defaultParseWidth:"any"}),quarter:Ii({matchPatterns:NU,defaultMatchWidth:"wide",parsePatterns:CU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ii({matchPatterns:kU,defaultMatchWidth:"wide",parsePatterns:DU,defaultParseWidth:"any"}),day:Ii({matchPatterns:OU,defaultMatchWidth:"wide",parsePatterns:MU,defaultParseWidth:"any"}),dayPeriod:Ii({matchPatterns:PU,defaultMatchWidth:"any",parsePatterns:VU,defaultParseWidth:"any"})},GI={code:"tr",formatDistance:uU,formatLong:mU,formatRelative:pU,localize:TU,match:jU,options:{weekStartsOn:1,firstWeekContainsDate:1}};function KI({post:n,onUserClick:e,onViewAnalysis:t}){const{t:r,i18n:s}=Un(),{currentUser:o}=ii(),c=s.language==="tr"?GI:$_,[h,d]=$.useState(""),[m,p]=$.useState(!1),[y,v]=$.useState(!1),[w,A]=$.useState(!1),[P,V]=$.useState(n?.content||""),L=async()=>{try{await HI(n.id,{content:P}),A(!1)}catch{alert("Failed to update post")}};if(!n)return null;const q=o?.uid===n.userId,z=n.likes&&o&&n.likes.includes(o.uid),H=n.likes?n.likes.length:0,W=n.comments?n.comments.length:0,[F,R]=$.useState("");$.useEffect(()=>{const C=()=>{if(!n.createdAt?.seconds){R(r("just_now")||"Just now");return}const D=new Date(n.createdAt.seconds*1e3);(new Date-D)/(1e3*60*60)>24?R(D.toLocaleDateString(s.language==="tr"?"tr-TR":"en-US",{day:"numeric",month:"long",year:"numeric"})):R(ag(D,{addSuffix:!0,locale:c,includeSeconds:!1}))};C();const O=setInterval(C,6e4);return()=>clearInterval(O)},[n.createdAt,c,r,s.language]),n.createdAt?.seconds&&new Date(n.createdAt.seconds*1e3);const T=async()=>{if(!(!o||y)){v(!0);try{await BI(n.id,o.uid)}catch(C){console.error(C)}finally{v(!1)}}},E=async()=>{if(window.confirm(r("confirm_delete_post")||"Delete this post?"))try{await FI(n.id)}catch{alert("Failed to delete post")}},N=async C=>{if(C.preventDefault(),!(!h.trim()||!o))try{await qI(n.id,o.uid,o.displayName||"User",h),d("")}catch(O){console.error(O),alert("Failed to post comment")}};return b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden mb-4 animate-fade-in relative group",children:[q&&b.jsx("button",{onClick:E,className:"absolute top-4 right-4 p-2 bg-gray-100 dark:bg-gray-700 text-gray-500 hover:text-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:r("delete")||"Delete",children:b.jsx(sg,{className:"w-4 h-4"})}),!n.hideAuthor&&b.jsx("div",{className:"p-4 flex items-center justify-between",children:b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e&&e(n.userId),children:[b.jsx("img",{src:n.userAvatar||`https://ui-avatars.com/api/?name=${n.authorName||"Gardener"}&background=random`,alt:n.authorName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 leading-tight hover:underline",children:n.authorName||r("gardener")}),b.jsx("span",{className:"text-xs text-gray-500",children:F})]})]})}),b.jsxs("div",{className:`px-4 pb-2 ${n.hideAuthor?"pt-4":""}`,children:[n.title&&b.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-1",children:n.title}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:n.content}),n.plantType&&n.plantType!=="Unknown"&&b.jsx("span",{className:"inline-block bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-md mb-2",children:r(n.plantType)||n.plantType}),n.relatedAnalysisId&&b.jsx("div",{className:"mt-2",children:b.jsxs("button",{onClick:()=>t&&t(n.relatedAnalysisId),className:"w-full py-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-green-100 dark:hover:bg-green-900/40 transition-colors",children:[b.jsx("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"AI"}),r("view_analysis_report")||"Analiz Raporunu Gr"]})})]}),n.image&&b.jsxs("div",{className:"w-full h-64 sm:h-80 bg-gray-100 dark:bg-gray-900 overflow-hidden cursor-pointer relative group/image",onClick:()=>window.open(n.image,"_blank"),children:[b.jsx("img",{src:n.image,alt:"Post",className:"w-full h-full object-cover",loading:"lazy"}),b.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 backdrop-blur-sm",children:[b.jsx(fh,{className:"w-3 h-3"})," ",b.jsxs("span",{children:[20+(n.likes?.length||0)*5," Seen"]})]})]}),b.jsxs("div",{className:"p-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsxs("button",{onClick:T,className:`flex items-center gap-1.5 transition-colors ${z?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[b.jsx(EI,{className:`w-5 h-5 ${z?"fill-current":""}`}),b.jsx("span",{className:"text-sm font-medium",children:H||r("like")})]}),b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-blue-500 transition-colors",onClick:()=>p(!m),children:[b.jsx(fh,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:W||r("comment")})]}),q&&b.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-green-500 transition-colors",onClick:()=>A(!0),children:[b.jsx(TI,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:r("edit")})]})]}),b.jsx("button",{className:"text-gray-500 hover:text-green-600 transition-colors",children:b.jsx(b0,{className:"w-5 h-5"})})]}),w&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-lg shadow-2xl",children:[b.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:r("edit_post")}),b.jsx("textarea",{className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white mb-4",value:P,onChange:C=>V(C.target.value),rows:4}),b.jsxs("div",{className:"flex justify-end gap-2",children:[b.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:r("cancel")}),b.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:r("save")})]})]})}),m&&b.jsxs("div",{className:"px-4 pb-4 border-t border-gray-50 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-800/50",children:[b.jsxs("div",{className:"space-y-3 mt-4 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[n.comments&&n.comments.map((C,O)=>b.jsxs("div",{className:"flex gap-2 items-start text-sm",children:[b.jsxs("span",{className:"font-bold text-gray-900 dark:text-white shrink-0",children:[C.userName,":"]}),b.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-words",children:C.text})]},O)),(!n.comments||n.comments.length===0)&&b.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:r("no_comments_yet")})]}),o?b.jsxs("form",{onSubmit:N,className:"flex gap-2",children:[b.jsx("input",{type:"text",value:h,onChange:C=>d(C.target.value),placeholder:r("add_comment_placeholder"),className:"flex-1 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-600 dark:bg-gray-700 text-sm outline-none focus:border-green-500"}),b.jsx("button",{type:"submit",disabled:!h.trim(),className:"p-2 bg-green-600 text-white rounded-lg disabled:opacity-50 hover:bg-green-700",children:b.jsx(mh,{className:"w-4 h-4"})})]}):b.jsx("p",{className:"text-center text-sm text-gray-500",children:r("login_to_comment")})]})]})}const Lf=[{value:"tomato",labelKey:"plant_tomato"},{value:"pepper",labelKey:"plant_pepper"},{value:"cucumber",labelKey:"plant_cucumber"},{value:"eggplant",labelKey:"plant_eggplant"},{value:"potato",labelKey:"plant_potato"},{value:"onion",labelKey:"plant_onion"},{value:"garlic",labelKey:"plant_garlic"},{value:"lettuce",labelKey:"plant_lettuce"},{value:"spinach",labelKey:"plant_spinach"},{value:"carrot",labelKey:"plant_carrot"},{value:"bean",labelKey:"plant_bean"},{value:"corn",labelKey:"plant_corn"},{value:"zucchini",labelKey:"plant_zucchini"},{value:"strawberry",labelKey:"plant_strawberry"},{value:"lemon",labelKey:"plant_lemon"},{value:"orange",labelKey:"plant_orange"},{value:"apple",labelKey:"plant_apple"},{value:"grape",labelKey:"plant_grape"},{value:"watermelon",labelKey:"plant_watermelon"},{value:"melon",labelKey:"plant_melon"},{value:"cherry",labelKey:"plant_cherry"},{value:"peach",labelKey:"plant_peach"},{value:"rose",labelKey:"plant_rose"},{value:"orchid",labelKey:"plant_orchid"},{value:"succulent",labelKey:"plant_succulent"},{value:"tulip",labelKey:"plant_tulip"},{value:"sunflower",labelKey:"plant_sunflower"},{value:"daisy",labelKey:"plant_daisy"},{value:"lavender",labelKey:"plant_lavender"},{value:"cactus",labelKey:"plant_cactus"},{value:"olive",labelKey:"plant_olive"},{value:"pine",labelKey:"plant_pine"},{value:"palm",labelKey:"plant_palm"},{value:"mint",labelKey:"plant_mint"},{value:"basil",labelKey:"plant_basil"},{value:"rosemary",labelKey:"plant_rosemary"},{value:"parsley",labelKey:"plant_parsley"},{value:"other",labelKey:"plant_other"}];function LU(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function YI(n,e){return new Promise((function(t,r){let s;return UU(n).then((function(o){try{return s=o,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}}),r)}))}const UU=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:s}})=>{const o=new DataView(s);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const h=o.getUint16(c);if(h===65498)break;const d=o.getUint16(c+2);if(h===65505&&o.getUint32(c+4)===1165519206){const m=c+10;let p;switch(o.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(m+2,p)!==42)return t("TIFF header contains invalid version");const y=o.getUint32(m+4,p),v=m+y+2+12*o.getUint16(m+y,p);for(let w=m+y+2;w<v;w+=12)if(o.getUint16(w,p)==274){if(o.getUint16(w+2,p)!==3)return t("Orientation data type is invalid");if(o.getUint32(w+4,p)!==1)return t("Orientation data count is invalid");o.setUint16(w+8,1,p);break}return e(s.slice(c,c+2+d))}c+=2+d}return e(new Blob)})),r.readAsArrayBuffer(n)}));var ym={},zU={get exports(){return ym},set exports(n){ym=n}};(function(n){var e,t,r={};zU.exports=r,r.parse=function(s,o){for(var c=r.bin.readUshort,h=r.bin.readUint,d=0,m={},p=new Uint8Array(s),y=p.length-4;h(p,y)!=101010256;)y--;d=y,d+=4;var v=c(p,d+=4);c(p,d+=2);var w=h(p,d+=2),A=h(p,d+=4);d+=4,d=A;for(var P=0;P<v;P++){h(p,d),d+=4,d+=4,d+=4,h(p,d+=4),w=h(p,d+=4);var V=h(p,d+=4),L=c(p,d+=4),q=c(p,d+2),z=c(p,d+4);d+=6;var H=h(p,d+=8);d+=4,d+=L+q+z,r._readLocal(p,H,m,w,V,o)}return m},r._readLocal=function(s,o,c,h,d,m){var p=r.bin.readUshort,y=r.bin.readUint;y(s,o),p(s,o+=4),p(s,o+=2);var v=p(s,o+=2);y(s,o+=2),y(s,o+=4),o+=4;var w=p(s,o+=8),A=p(s,o+=2);o+=2;var P=r.bin.readUTF8(s,o,w);if(o+=w,o+=A,m)c[P]={size:d,csize:h};else{var V=new Uint8Array(s.buffer,o);if(v==0)c[P]=new Uint8Array(V.buffer.slice(o,o+h));else{if(v!=8)throw"unknown compression method: "+v;var L=new Uint8Array(d);r.inflateRaw(V,L),c[P]=L}}},r.inflateRaw=function(s,o){return r.F.inflate(s,o)},r.inflate=function(s,o){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),o)},r.deflate=function(s,o){o==null&&(o={level:6});var c=0,h=new Uint8Array(50+Math.floor(1.1*s.length));h[c]=120,h[c+1]=156,c+=2,c=r.F.deflateRaw(s,h,c,o.level);var d=r.adler(s,0,s.length);return h[c+0]=d>>>24&255,h[c+1]=d>>>16&255,h[c+2]=d>>>8&255,h[c+3]=d>>>0&255,new Uint8Array(h.buffer,0,c+4)},r.deflateRaw=function(s,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),h=r.F.deflateRaw(s,c,h,o.level);return new Uint8Array(c.buffer,0,h)},r.encode=function(s,o){o==null&&(o=!1);var c=0,h=r.bin.writeUint,d=r.bin.writeUshort,m={};for(var p in s){var y=!r._noNeed(p)&&!o,v=s[p],w=r.crc.crc(v,0,v.length);m[p]={cpr:y,usize:v.length,crc:w,file:y?r.deflateRaw(v):v}}for(var p in m)c+=m[p].file.length+30+46+2*r.bin.sizeUTF8(p);c+=22;var A=new Uint8Array(c),P=0,V=[];for(var p in m){var L=m[p];V.push(P),P=r._writeHeader(A,P,p,L,0)}var q=0,z=P;for(var p in m)L=m[p],V.push(P),P=r._writeHeader(A,P,p,L,1,V[q++]);var H=P-z;return h(A,P,101010256),P+=4,d(A,P+=4,q),d(A,P+=2,q),h(A,P+=2,H),h(A,P+=4,z),P+=4,P+=2,A.buffer},r._noNeed=function(s){var o=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(s,o,c,h,d,m){var p=r.bin.writeUint,y=r.bin.writeUshort,v=h.file;return p(s,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),y(s,o,20),y(s,o+=2,0),y(s,o+=2,h.cpr?8:0),p(s,o+=2,0),p(s,o+=4,h.crc),p(s,o+=4,v.length),p(s,o+=4,h.usize),y(s,o+=4,r.bin.sizeUTF8(c)),y(s,o+=2,0),o+=2,d==1&&(o+=2,o+=2,p(s,o+=6,m),o+=4),o+=r.bin.writeUTF8(s,o,c),d==0&&(s.set(v,o),o+=v.length),o},r.crc={table:(function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var c=o,h=0;h<8;h++)1&c?c=3988292384^c>>>1:c>>>=1;s[o]=c}return s})(),update:function(s,o,c,h){for(var d=0;d<h;d++)s=r.crc.table[255&(s^o[c+d])]^s>>>8;return s},crc:function(s,o,c){return 4294967295^r.crc.update(4294967295,s,o,c)}},r.adler=function(s,o,c){for(var h=1,d=0,m=o,p=o+c;m<p;){for(var y=Math.min(m+5552,p);m<y;)d+=h+=s[m++];h%=65521,d%=65521}return d<<16|h},r.bin={readUshort:function(s,o){return s[o]|s[o+1]<<8},writeUshort:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255},readUint:function(s,o){return 16777216*s[o+3]+(s[o+2]<<16|s[o+1]<<8|s[o])},writeUint:function(s,o,c){s[o]=255&c,s[o+1]=c>>8&255,s[o+2]=c>>16&255,s[o+3]=c>>24&255},readASCII:function(s,o,c){for(var h="",d=0;d<c;d++)h+=String.fromCharCode(s[o+d]);return h},writeASCII:function(s,o,c){for(var h=0;h<c.length;h++)s[o+h]=c.charCodeAt(h)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,c){for(var h,d="",m=0;m<c;m++)d+="%"+r.bin.pad(s[o+m].toString(16));try{h=decodeURIComponent(d)}catch{return r.bin.readASCII(s,o,c)}return h},writeUTF8:function(s,o,c){for(var h=c.length,d=0,m=0;m<h;m++){var p=c.charCodeAt(m);if((4294967168&p)==0)s[o+d]=p,d++;else if((4294965248&p)==0)s[o+d]=192|p>>6,s[o+d+1]=128|p>>0&63,d+=2;else if((4294901760&p)==0)s[o+d]=224|p>>12,s[o+d+1]=128|p>>6&63,s[o+d+2]=128|p>>0&63,d+=3;else{if((4292870144&p)!=0)throw"e";s[o+d]=240|p>>18,s[o+d+1]=128|p>>12&63,s[o+d+2]=128|p>>6&63,s[o+d+3]=128|p>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var o=s.length,c=0,h=0;h<o;h++){var d=s.charCodeAt(h);if((4294967168&d)==0)c++;else if((4294965248&d)==0)c+=2;else if((4294901760&d)==0)c+=3;else{if((4292870144&d)!=0)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(s,o,c,h){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][h],m=r.F.U,p=r.F._goodIndex;r.F._hash;var y=r.F._putsE,v=0,w=c<<3,A=0,P=s.length;if(h==0){for(;v<P;)y(o,w,v+(C=Math.min(65535,P-v))==P?1:0),w=r.F._copyExact(s,v,C,o,w+8),v+=C;return w>>>3}var V=m.lits,L=m.strt,q=m.prev,z=0,H=0,W=0,F=0,R=0,T=0;for(P>2&&(L[T=r.F._hash(s,0)]=0),v=0;v<P;v++){if(R=T,v+1<P-2){T=r.F._hash(s,v+1);var E=v+1&32767;q[E]=L[T],L[T]=E}if(A<=v){(z>14e3||H>26697)&&P-v>100&&(A<v&&(V[z]=v-A,z+=2,A=v),w=r.F._writeBlock(v==P-1||A==P?1:0,V,z,F,s,W,v-W,o,w),z=H=F=0,W=v);var N=0;v<P-2&&(N=r.F._bestMatch(s,v,q,R,Math.min(d[2],P-v),d[3]));var C=N>>>16,O=65535&N;if(N!=0){O=65535&N;var D=p(C=N>>>16,m.of0);m.lhst[257+D]++;var G=p(O,m.df0);m.dhst[G]++,F+=m.exb[D]+m.dxb[G],V[z]=C<<23|v-A,V[z+1]=O<<16|D<<8|G,z+=2,A=v+C}else m.lhst[s[v]]++;H++}}for(W==v&&s.length!=0||(A<v&&(V[z]=v-A,z+=2,A=v),w=r.F._writeBlock(1,V,z,F,s,W,v-W,o,w),z=0,H=0,z=H=F=0,W=v);(7&w)!=0;)w++;return w>>>3},r.F._bestMatch=function(s,o,c,h,d,m){var p=32767&o,y=c[p],v=p-y+32768&32767;if(y==p||h!=r.F._hash(s,o-v))return 0;for(var w=0,A=0,P=Math.min(32767,o);v<=P&&--m!=0&&y!=p;){if(w==0||s[o+w]==s[o+w-v]){var V=r.F._howLong(s,o,v);if(V>w){if(A=v,(w=V)>=d)break;v+2<V&&(V=v+2);for(var L=0,q=0;q<V-2;q++){var z=o-v+q+32768&32767,H=z-c[z]+32768&32767;H>L&&(L=H,y=z)}}}v+=(p=y)-(y=c[p])+32768&32767}return w<<16|A},r.F._howLong=function(s,o,c){if(s[o]!=s[o-c]||s[o+1]!=s[o+1-c]||s[o+2]!=s[o+2-c])return 0;var h=o,d=Math.min(s.length,o+258);for(o+=3;o<d&&s[o]==s[o-c];)o++;return o-h},r.F._hash=function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,o,c,h,d,m,p,y,v){var w,A,P,V,L,q,z,H,W,F=r.F.U,R=r.F._putsF,T=r.F._putsE;F.lhst[256]++,A=(w=r.F.getTrees())[0],P=w[1],V=w[2],L=w[3],q=w[4],z=w[5],H=w[6],W=w[7];var E=32+((v+3&7)==0?0:8-(v+3&7))+(p<<3),N=h+r.F.contSize(F.fltree,F.lhst)+r.F.contSize(F.fdtree,F.dhst),C=h+r.F.contSize(F.ltree,F.lhst)+r.F.contSize(F.dtree,F.dhst);C+=14+3*z+r.F.contSize(F.itree,F.ihst)+(2*F.ihst[16]+3*F.ihst[17]+7*F.ihst[18]);for(var O=0;O<286;O++)F.lhst[O]=0;for(O=0;O<30;O++)F.dhst[O]=0;for(O=0;O<19;O++)F.ihst[O]=0;var D=E<N&&E<C?0:N<C?1:2;if(R(y,v,s),R(y,v+1,D),v+=3,D==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(d,m,p,y,v)}else{var G,Z;if(D==1&&(G=F.fltree,Z=F.fdtree),D==2){r.F.makeCodes(F.ltree,A),r.F.revCodes(F.ltree,A),r.F.makeCodes(F.dtree,P),r.F.revCodes(F.dtree,P),r.F.makeCodes(F.itree,V),r.F.revCodes(F.itree,V),G=F.ltree,Z=F.dtree,T(y,v,L-257),T(y,v+=5,q-1),T(y,v+=5,z-4),v+=4;for(var k=0;k<z;k++)T(y,v+3*k,F.itree[1+(F.ordr[k]<<1)]);v+=3*z,v=r.F._codeTiny(H,F.itree,y,v),v=r.F._codeTiny(W,F.itree,y,v)}for(var M=m,J=0;J<c;J+=2){for(var Q=o[J],se=Q>>>23,B=M+(8388607&Q);M<B;)v=r.F._writeLit(d[M++],G,y,v);if(se!=0){var Y=o[J+1],le=Y>>16,re=Y>>8&255,te=255&Y;T(y,v=r.F._writeLit(257+re,G,y,v),se-F.of0[re]),v+=F.exb[re],R(y,v=r.F._writeLit(te,Z,y,v),le-F.df0[te]),v+=F.dxb[te],M+=se}}v=r.F._writeLit(256,G,y,v)}return v},r.F._copyExact=function(s,o,c,h,d){var m=d>>>3;return h[m]=c,h[m+1]=c>>>8,h[m+2]=255-h[m],h[m+3]=255-h[m+1],m+=4,h.set(new Uint8Array(s.buffer,o,c),m),d+(c+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,o=r.F._hufTree(s.lhst,s.ltree,15),c=r.F._hufTree(s.dhst,s.dtree,15),h=[],d=r.F._lenCodes(s.ltree,h),m=[],p=r.F._lenCodes(s.dtree,m),y=0;y<h.length;y+=2)s.ihst[h[y]]++;for(y=0;y<m.length;y+=2)s.ihst[m[y]]++;for(var v=r.F._hufTree(s.ihst,s.itree,7),w=19;w>4&&s.itree[1+(s.ordr[w-1]<<1)]==0;)w--;return[o,c,v,d,p,w,h,m]},r.F.getSecond=function(s){for(var o=[],c=0;c<s.length;c+=2)o.push(s[c+1]);return o},r.F.nonZero=function(s){for(var o="",c=0;c<s.length;c+=2)s[c+1]!=0&&(o+=(c>>1)+",");return o},r.F.contSize=function(s,o){for(var c=0,h=0;h<o.length;h++)c+=o[h]*s[1+(h<<1)];return c},r.F._codeTiny=function(s,o,c,h){for(var d=0;d<s.length;d+=2){var m=s[d],p=s[d+1];h=r.F._writeLit(m,o,c,h);var y=m==16?2:m==17?3:7;m>15&&(r.F._putsE(c,h,p,y),h+=y)}return h},r.F._lenCodes=function(s,o){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var h=0;h<c;h+=2){var d=s[h+1],m=h+3<c?s[h+3]:-1,p=h+5<c?s[h+5]:-1,y=h==0?-1:s[h-1];if(d==0&&m==d&&p==d){for(var v=h+5;v+2<c&&s[v+2]==d;)v+=2;(w=Math.min(v+1-h>>>1,138))<11?o.push(17,w-3):o.push(18,w-11),h+=2*w-2}else if(d==y&&m==d&&p==d){for(v=h+5;v+2<c&&s[v+2]==d;)v+=2;var w=Math.min(v+1-h>>>1,6);o.push(16,w-3),h+=2*w-2}else o.push(d,0)}return c>>>1},r.F._hufTree=function(s,o,c){var h=[],d=s.length,m=o.length,p=0;for(p=0;p<m;p+=2)o[p]=0,o[p+1]=0;for(p=0;p<d;p++)s[p]!=0&&h.push({lit:p,f:s[p]});var y=h.length,v=h.slice(0);if(y==0)return 0;if(y==1){var w=h[0].lit;return v=w==0?1:0,o[1+(w<<1)]=1,o[1+(v<<1)]=1,1}h.sort((function(H,W){return H.f-W.f}));var A=h[0],P=h[1],V=0,L=1,q=2;for(h[0]={lit:-1,f:A.f+P.f,l:A,r:P,d:0};L!=y-1;)A=V!=L&&(q==y||h[V].f<h[q].f)?h[V++]:h[q++],P=V!=L&&(q==y||h[V].f<h[q].f)?h[V++]:h[q++],h[L++]={lit:-1,f:A.f+P.f,l:A,r:P};var z=r.F.setDepth(h[L-1],0);for(z>c&&(r.F.restrictDepth(v,c,z),z=c),p=0;p<y;p++)o[1+(v[p].lit<<1)]=v[p].d;return z},r.F.setDepth=function(s,o){return s.lit!=-1?(s.d=o,o):Math.max(r.F.setDepth(s.l,o+1),r.F.setDepth(s.r,o+1))},r.F.restrictDepth=function(s,o,c){var h=0,d=1<<c-o,m=0;for(s.sort((function(y,v){return v.d==y.d?y.f-v.f:v.d-y.d})),h=0;h<s.length&&s[h].d>o;h++){var p=s[h].d;s[h].d=o,m+=d-(1<<c-p)}for(m>>>=c-o;m>0;)(p=s[h].d)<o?(s[h].d++,m-=1<<o-p-1):h++;for(;h>=0;h--)s[h].d==o&&m<0&&(s[h].d--,m++);m!=0&&console.log("debt left")},r.F._goodIndex=function(s,o){var c=0;return o[16|c]<=s&&(c|=16),o[8|c]<=s&&(c|=8),o[4|c]<=s&&(c|=4),o[2|c]<=s&&(c|=2),o[1|c]<=s&&(c|=1),c},r.F._writeLit=function(s,o,c,h){return r.F._putsF(c,h,o[s<<1]),h+o[1+(s<<1)]},r.F.inflate=function(s,o){var c=Uint8Array;if(s[0]==3&&s[1]==0)return o||new c(0);var h=r.F,d=h._bitsF,m=h._bitsE,p=h._decodeTiny,y=h.makeCodes,v=h.codes2map,w=h._get17,A=h.U,P=o==null;P&&(o=new c(s.length>>>2<<3));for(var V,L,q=0,z=0,H=0,W=0,F=0,R=0,T=0,E=0,N=0;q==0;)if(q=d(s,N,1),z=d(s,N+1,2),N+=3,z!=0){if(P&&(o=r.F._check(o,E+(1<<17))),z==1&&(V=A.flmap,L=A.fdmap,R=511,T=31),z==2){H=m(s,N,5)+257,W=m(s,N+5,5)+1,F=m(s,N+10,4)+4,N+=14;for(var C=0;C<38;C+=2)A.itree[C]=0,A.itree[C+1]=0;var O=1;for(C=0;C<F;C++){var D=m(s,N+3*C,3);A.itree[1+(A.ordr[C]<<1)]=D,D>O&&(O=D)}N+=3*F,y(A.itree,O),v(A.itree,O,A.imap),V=A.lmap,L=A.dmap,N=p(A.imap,(1<<O)-1,H+W,s,N,A.ttree);var G=h._copyOut(A.ttree,0,H,A.ltree);R=(1<<G)-1;var Z=h._copyOut(A.ttree,H,W,A.dtree);T=(1<<Z)-1,y(A.ltree,G),v(A.ltree,G,V),y(A.dtree,Z),v(A.dtree,Z,L)}for(;;){var k=V[w(s,N)&R];N+=15&k;var M=k>>>4;if(!(M>>>8))o[E++]=M;else{if(M==256)break;var J=E+M-254;if(M>264){var Q=A.ldef[M-257];J=E+(Q>>>3)+m(s,N,7&Q),N+=7&Q}var se=L[w(s,N)&T];N+=15&se;var B=se>>>4,Y=A.ddef[B],le=(Y>>>4)+d(s,N,15&Y);for(N+=15&Y,P&&(o=r.F._check(o,E+(1<<17)));E<J;)o[E]=o[E++-le],o[E]=o[E++-le],o[E]=o[E++-le],o[E]=o[E++-le];E=J}}}else{(7&N)!=0&&(N+=8-(7&N));var re=4+(N>>>3),te=s[re-4]|s[re-3]<<8;P&&(o=r.F._check(o,E+te)),o.set(new c(s.buffer,s.byteOffset+re,te),E),N=re+te<<3,E+=te}return o.length==E?o:o.slice(0,E)},r.F._check=function(s,o){var c=s.length;if(o<=c)return s;var h=new Uint8Array(Math.max(c<<1,o));return h.set(s,0),h},r.F._decodeTiny=function(s,o,c,h,d,m){for(var p=r.F._bitsE,y=r.F._get17,v=0;v<c;){var w=s[y(h,d)&o];d+=15&w;var A=w>>>4;if(A<=15)m[v]=A,v++;else{var P=0,V=0;A==16?(V=3+p(h,d,2),d+=2,P=m[v-1]):A==17?(V=3+p(h,d,3),d+=3):A==18&&(V=11+p(h,d,7),d+=7);for(var L=v+V;v<L;)m[v]=P,v++}}return d},r.F._copyOut=function(s,o,c,h){for(var d=0,m=0,p=h.length>>>1;m<c;){var y=s[m+o];h[m<<1]=0,h[1+(m<<1)]=y,y>d&&(d=y),m++}for(;m<p;)h[m<<1]=0,h[1+(m<<1)]=0,m++;return d},r.F.makeCodes=function(s,o){for(var c,h,d,m,p=r.F.U,y=s.length,v=p.bl_count,w=0;w<=o;w++)v[w]=0;for(w=1;w<y;w+=2)v[s[w]]++;var A=p.next_code;for(c=0,v[0]=0,h=1;h<=o;h++)c=c+v[h-1]<<1,A[h]=c;for(d=0;d<y;d+=2)(m=s[d+1])!=0&&(s[d]=A[m],A[m]++)},r.F.codes2map=function(s,o,c){for(var h=s.length,d=r.F.U.rev15,m=0;m<h;m+=2)if(s[m+1]!=0)for(var p=m>>1,y=s[m+1],v=p<<4|y,w=o-y,A=s[m]<<w,P=A+(1<<w);A!=P;)c[d[A]>>>15-o]=v,A++},r.F.revCodes=function(s,o){for(var c=r.F.U.rev15,h=15-o,d=0;d<s.length;d+=2){var m=s[d]<<o-s[d+1];s[d]=c[m]>>>h}},r.F._putsE=function(s,o,c){c<<=7&o;var h=o>>>3;s[h]|=c,s[h+1]|=c>>>8},r.F._putsF=function(s,o,c){c<<=7&o;var h=o>>>3;s[h]|=c,s[h+1]|=c>>>8,s[h+2]|=c>>>16},r.F._bitsE=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},r.F._bitsF=function(s,o,c){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},r.F._get17=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(s,o){return(s[o>>>3]|s[1+(o>>>3)]<<8|s[2+(o>>>3)]<<16|s[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=r.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[o]=(c>>>16|c<<16)>>>17}function h(d,m,p){for(;m--!=0;)d.push(0,p)}for(o=0;o<32;o++)s.ldef[o]=s.of0[o]<<3|s.exb[o],s.ddef[o]=s.df0[o]<<4|s.dxb[o];h(s.fltree,144,8),h(s.fltree,112,9),h(s.fltree,24,7),h(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),h(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),h(s.itree,19,0),h(s.ltree,286,0),h(s.dtree,30,0),h(s.ttree,320,0)})()})();var FU=LU({__proto__:null,default:ym},[ym]);const Qr=(function(){var n={nextZero(p,y){for(;p[y]!=0;)y++;return y},readUshort:(p,y)=>p[y]<<8|p[y+1],writeUshort(p,y,v){p[y]=v>>8&255,p[y+1]=255&v},readUint:(p,y)=>16777216*p[y]+(p[y+1]<<16|p[y+2]<<8|p[y+3]),writeUint(p,y,v){p[y]=v>>24&255,p[y+1]=v>>16&255,p[y+2]=v>>8&255,p[y+3]=255&v},readASCII(p,y,v){let w="";for(let A=0;A<v;A++)w+=String.fromCharCode(p[y+A]);return w},writeASCII(p,y,v){for(let w=0;w<v.length;w++)p[y+w]=v.charCodeAt(w)},readBytes(p,y,v){const w=[];for(let A=0;A<v;A++)w.push(p[y+A]);return w},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,y,v){let w,A="";for(let P=0;P<v;P++)A+=`%${n.pad(p[y+P].toString(16))}`;try{w=decodeURIComponent(A)}catch{return n.readASCII(p,y,v)}return w}};function e(p,y,v,w){const A=y*v,P=o(w),V=Math.ceil(y*P/8),L=new Uint8Array(4*A),q=new Uint32Array(L.buffer),{ctype:z}=w,{depth:H}=w,W=n.readUshort;if(z==6){const Q=A<<2;if(H==8)for(var F=0;F<Q;F+=4)L[F]=p[F],L[F+1]=p[F+1],L[F+2]=p[F+2],L[F+3]=p[F+3];if(H==16)for(F=0;F<Q;F++)L[F]=p[F<<1]}else if(z==2){const Q=w.tabs.tRNS;if(Q==null){if(H==8)for(F=0;F<A;F++){var R=3*F;q[F]=255<<24|p[R+2]<<16|p[R+1]<<8|p[R]}if(H==16)for(F=0;F<A;F++)R=6*F,q[F]=255<<24|p[R+4]<<16|p[R+2]<<8|p[R]}else{var T=Q[0];const se=Q[1],B=Q[2];if(H==8)for(F=0;F<A;F++){var E=F<<2;R=3*F,q[F]=255<<24|p[R+2]<<16|p[R+1]<<8|p[R],p[R]==T&&p[R+1]==se&&p[R+2]==B&&(L[E+3]=0)}if(H==16)for(F=0;F<A;F++)E=F<<2,R=6*F,q[F]=255<<24|p[R+4]<<16|p[R+2]<<8|p[R],W(p,R)==T&&W(p,R+2)==se&&W(p,R+4)==B&&(L[E+3]=0)}}else if(z==3){const Q=w.tabs.PLTE,se=w.tabs.tRNS,B=se?se.length:0;if(H==1)for(var N=0;N<v;N++){var C=N*V,O=N*y;for(F=0;F<y;F++){E=O+F<<2;var D=3*(G=p[C+(F>>3)]>>7-((7&F)<<0)&1);L[E]=Q[D],L[E+1]=Q[D+1],L[E+2]=Q[D+2],L[E+3]=G<B?se[G]:255}}if(H==2)for(N=0;N<v;N++)for(C=N*V,O=N*y,F=0;F<y;F++)E=O+F<<2,D=3*(G=p[C+(F>>2)]>>6-((3&F)<<1)&3),L[E]=Q[D],L[E+1]=Q[D+1],L[E+2]=Q[D+2],L[E+3]=G<B?se[G]:255;if(H==4)for(N=0;N<v;N++)for(C=N*V,O=N*y,F=0;F<y;F++)E=O+F<<2,D=3*(G=p[C+(F>>1)]>>4-((1&F)<<2)&15),L[E]=Q[D],L[E+1]=Q[D+1],L[E+2]=Q[D+2],L[E+3]=G<B?se[G]:255;if(H==8)for(F=0;F<A;F++){var G;E=F<<2,D=3*(G=p[F]),L[E]=Q[D],L[E+1]=Q[D+1],L[E+2]=Q[D+2],L[E+3]=G<B?se[G]:255}}else if(z==4){if(H==8)for(F=0;F<A;F++){E=F<<2;var Z=p[k=F<<1];L[E]=Z,L[E+1]=Z,L[E+2]=Z,L[E+3]=p[k+1]}if(H==16)for(F=0;F<A;F++){var k;E=F<<2,Z=p[k=F<<2],L[E]=Z,L[E+1]=Z,L[E+2]=Z,L[E+3]=p[k+2]}}else if(z==0)for(T=w.tabs.tRNS?w.tabs.tRNS:-1,N=0;N<v;N++){const Q=N*V,se=N*y;if(H==1)for(var M=0;M<y;M++){var J=(Z=255*(p[Q+(M>>>3)]>>>7-(7&M)&1))==255*T?0:255;q[se+M]=J<<24|Z<<16|Z<<8|Z}else if(H==2)for(M=0;M<y;M++)J=(Z=85*(p[Q+(M>>>2)]>>>6-((3&M)<<1)&3))==85*T?0:255,q[se+M]=J<<24|Z<<16|Z<<8|Z;else if(H==4)for(M=0;M<y;M++)J=(Z=17*(p[Q+(M>>>1)]>>>4-((1&M)<<2)&15))==17*T?0:255,q[se+M]=J<<24|Z<<16|Z<<8|Z;else if(H==8)for(M=0;M<y;M++)J=(Z=p[Q+M])==T?0:255,q[se+M]=J<<24|Z<<16|Z<<8|Z;else if(H==16)for(M=0;M<y;M++)Z=p[Q+(M<<1)],J=W(p,Q+(M<<1))==T?0:255,q[se+M]=J<<24|Z<<16|Z<<8|Z}return L}function t(p,y,v,w){const A=o(p),P=Math.ceil(v*A/8),V=new Uint8Array((P+1+p.interlace)*w);return y=p.tabs.CgBI?s(y,V):r(y,V),p.interlace==0?y=c(y,p,0,v,w):p.interlace==1&&(y=(function(q,z){const H=z.width,W=z.height,F=o(z),R=F>>3,T=Math.ceil(H*F/8),E=new Uint8Array(W*T);let N=0;const C=[0,0,4,0,2,0,1],O=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],G=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const M=D[Z],J=G[Z];let Q=0,se=0,B=C[Z];for(;B<W;)B+=M,se++;let Y=O[Z];for(;Y<H;)Y+=J,Q++;const le=Math.ceil(Q*F/8);c(q,z,N,Q,se);let re=0,te=C[Z];for(;te<W;){let ye=O[Z],Ae=N+re*le<<3;for(;ye<H;){var k;if(F==1&&(k=(k=q[Ae>>3])>>7-(7&Ae)&1,E[te*T+(ye>>3)]|=k<<7-((7&ye)<<0)),F==2&&(k=(k=q[Ae>>3])>>6-(7&Ae)&3,E[te*T+(ye>>2)]|=k<<6-((3&ye)<<1)),F==4&&(k=(k=q[Ae>>3])>>4-(7&Ae)&15,E[te*T+(ye>>1)]|=k<<4-((1&ye)<<2)),F>=8){const Oe=te*T+ye*R;for(let Re=0;Re<R;Re++)E[Oe+Re]=q[(Ae>>3)+Re]}Ae+=F,ye+=J}re++,te+=M}Q*se!=0&&(N+=se*(1+le)),Z+=1}return E})(y,p)),y}function r(p,y){return s(new Uint8Array(p.buffer,2,p.length-6),y)}var s=(function(){const p={H:{}};return p.H.N=function(y,v){const w=Uint8Array;let A,P,V=0,L=0,q=0,z=0,H=0,W=0,F=0,R=0,T=0;if(y[0]==3&&y[1]==0)return v||new w(0);const E=p.H,N=E.b,C=E.e,O=E.R,D=E.n,G=E.A,Z=E.Z,k=E.m,M=v==null;for(M&&(v=new w(y.length>>>2<<5));V==0;)if(V=N(y,T,1),L=N(y,T+1,2),T+=3,L!=0){if(M&&(v=p.H.W(v,R+(1<<17))),L==1&&(A=k.J,P=k.h,W=511,F=31),L==2){q=C(y,T,5)+257,z=C(y,T+5,5)+1,H=C(y,T+10,4)+4,T+=14;let Q=1;for(var J=0;J<38;J+=2)k.Q[J]=0,k.Q[J+1]=0;for(J=0;J<H;J++){const Y=C(y,T+3*J,3);k.Q[1+(k.X[J]<<1)]=Y,Y>Q&&(Q=Y)}T+=3*H,D(k.Q,Q),G(k.Q,Q,k.u),A=k.w,P=k.d,T=O(k.u,(1<<Q)-1,q+z,y,T,k.v);const se=E.V(k.v,0,q,k.C);W=(1<<se)-1;const B=E.V(k.v,q,z,k.D);F=(1<<B)-1,D(k.C,se),G(k.C,se,A),D(k.D,B),G(k.D,B,P)}for(;;){const Q=A[Z(y,T)&W];T+=15&Q;const se=Q>>>4;if(!(se>>>8))v[R++]=se;else{if(se==256)break;{let B=R+se-254;if(se>264){const ye=k.q[se-257];B=R+(ye>>>3)+C(y,T,7&ye),T+=7&ye}const Y=P[Z(y,T)&F];T+=15&Y;const le=Y>>>4,re=k.c[le],te=(re>>>4)+N(y,T,15&re);for(T+=15&re;R<B;)v[R]=v[R++-te],v[R]=v[R++-te],v[R]=v[R++-te],v[R]=v[R++-te];R=B}}}}else{(7&T)!=0&&(T+=8-(7&T));const Q=4+(T>>>3),se=y[Q-4]|y[Q-3]<<8;M&&(v=p.H.W(v,R+se)),v.set(new w(y.buffer,y.byteOffset+Q,se),R),T=Q+se<<3,R+=se}return v.length==R?v:v.slice(0,R)},p.H.W=function(y,v){const w=y.length;if(v<=w)return y;const A=new Uint8Array(w<<1);return A.set(y,0),A},p.H.R=function(y,v,w,A,P,V){const L=p.H.e,q=p.H.Z;let z=0;for(;z<w;){const H=y[q(A,P)&v];P+=15&H;const W=H>>>4;if(W<=15)V[z]=W,z++;else{let F=0,R=0;W==16?(R=3+L(A,P,2),P+=2,F=V[z-1]):W==17?(R=3+L(A,P,3),P+=3):W==18&&(R=11+L(A,P,7),P+=7);const T=z+R;for(;z<T;)V[z]=F,z++}}return P},p.H.V=function(y,v,w,A){let P=0,V=0;const L=A.length>>>1;for(;V<w;){const q=y[V+v];A[V<<1]=0,A[1+(V<<1)]=q,q>P&&(P=q),V++}for(;V<L;)A[V<<1]=0,A[1+(V<<1)]=0,V++;return P},p.H.n=function(y,v){const w=p.H.m,A=y.length;let P,V,L,q;const z=w.j;for(var H=0;H<=v;H++)z[H]=0;for(H=1;H<A;H+=2)z[y[H]]++;const W=w.K;for(P=0,z[0]=0,V=1;V<=v;V++)P=P+z[V-1]<<1,W[V]=P;for(L=0;L<A;L+=2)q=y[L+1],q!=0&&(y[L]=W[q],W[q]++)},p.H.A=function(y,v,w){const A=y.length,P=p.H.m.r;for(let V=0;V<A;V+=2)if(y[V+1]!=0){const L=V>>1,q=y[V+1],z=L<<4|q,H=v-q;let W=y[V]<<H;const F=W+(1<<H);for(;W!=F;)w[P[W]>>>15-v]=z,W++}},p.H.l=function(y,v){const w=p.H.m.r,A=15-v;for(let P=0;P<y.length;P+=2){const V=y[P]<<v-y[P+1];y[P]=w[V]>>>A}},p.H.M=function(y,v,w){w<<=7&v;const A=v>>>3;y[A]|=w,y[A+1]|=w>>>8},p.H.I=function(y,v,w){w<<=7&v;const A=v>>>3;y[A]|=w,y[A+1]|=w>>>8,y[A+2]|=w>>>16},p.H.e=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8)>>>(7&v)&(1<<w)-1},p.H.b=function(y,v,w){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)&(1<<w)-1},p.H.Z=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16)>>>(7&v)},p.H.i=function(y,v){return(y[v>>>3]|y[1+(v>>>3)]<<8|y[2+(v>>>3)]<<16|y[3+(v>>>3)]<<24)>>>(7&v)},p.H.m=(function(){const y=Uint16Array,v=Uint32Array;return{K:new y(16),j:new y(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new y(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new y(512),_:[],h:new y(32),$:[],w:new y(32768),C:[],v:[],d:new y(32768),D:[],u:new y(512),Q:[],r:new y(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new y(65536),g:new y(32768)}})(),(function(){const y=p.H.m;for(var v=0;v<32768;v++){let A=v;A=(2863311530&A)>>>1|(1431655765&A)<<1,A=(3435973836&A)>>>2|(858993459&A)<<2,A=(4042322160&A)>>>4|(252645135&A)<<4,A=(4278255360&A)>>>8|(16711935&A)<<8,y.r[v]=(A>>>16|A<<16)>>>17}function w(A,P,V){for(;P--!=0;)A.push(0,V)}for(v=0;v<32;v++)y.q[v]=y.S[v]<<3|y.T[v],y.c[v]=y.p[v]<<4|y.z[v];w(y._,144,8),w(y._,112,9),w(y._,24,7),w(y._,8,8),p.H.n(y._,9),p.H.A(y._,9,y.J),p.H.l(y._,9),w(y.$,32,5),p.H.n(y.$,5),p.H.A(y.$,5,y.h),p.H.l(y.$,5),w(y.Q,19,0),w(y.C,286,0),w(y.D,30,0),w(y.v,320,0)})(),p.H.N})();function o(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function c(p,y,v,w,A){let P=o(y);const V=Math.ceil(w*P/8);let L,q;P=Math.ceil(P/8);let z=p[v],H=0;if(z>1&&(p[v]=[0,0,1][z-2]),z==3)for(H=P;H<V;H++)p[H+1]=p[H+1]+(p[H+1-P]>>>1)&255;for(let W=0;W<A;W++)if(L=v+W*V,q=L+W+1,z=p[q-1],H=0,z==0)for(;H<V;H++)p[L+H]=p[q+H];else if(z==1){for(;H<P;H++)p[L+H]=p[q+H];for(;H<V;H++)p[L+H]=p[q+H]+p[L+H-P]}else if(z==2)for(;H<V;H++)p[L+H]=p[q+H]+p[L+H-V];else if(z==3){for(;H<P;H++)p[L+H]=p[q+H]+(p[L+H-V]>>>1);for(;H<V;H++)p[L+H]=p[q+H]+(p[L+H-V]+p[L+H-P]>>>1)}else{for(;H<P;H++)p[L+H]=p[q+H]+h(0,p[L+H-V],0);for(;H<V;H++)p[L+H]=p[q+H]+h(p[L+H-P],p[L+H-V],p[L+H-P-V])}return p}function h(p,y,v){const w=p+y-v,A=w-p,P=w-y,V=w-v;return A*A<=P*P&&A*A<=V*V?p:P*P<=V*V?y:v}function d(p,y,v){v.width=n.readUint(p,y),y+=4,v.height=n.readUint(p,y),y+=4,v.depth=p[y],y++,v.ctype=p[y],y++,v.compress=p[y],y++,v.filter=p[y],y++,v.interlace=p[y],y++}function m(p,y,v,w,A,P,V,L,q){const z=Math.min(y,A),H=Math.min(v,P);let W=0,F=0;for(let Z=0;Z<H;Z++)for(let k=0;k<z;k++)if(V>=0&&L>=0?(W=Z*y+k<<2,F=(L+Z)*A+V+k<<2):(W=(-L+Z)*y-V+k<<2,F=Z*A+k<<2),q==0)w[F]=p[W],w[F+1]=p[W+1],w[F+2]=p[W+2],w[F+3]=p[W+3];else if(q==1){var R=p[W+3]*.00392156862745098,T=p[W]*R,E=p[W+1]*R,N=p[W+2]*R,C=w[F+3]*(1/255),O=w[F]*C,D=w[F+1]*C,G=w[F+2]*C;const M=1-R,J=R+C*M,Q=J==0?0:1/J;w[F+3]=255*J,w[F+0]=(T+O*M)*Q,w[F+1]=(E+D*M)*Q,w[F+2]=(N+G*M)*Q}else if(q==2)R=p[W+3],T=p[W],E=p[W+1],N=p[W+2],C=w[F+3],O=w[F],D=w[F+1],G=w[F+2],R==C&&T==O&&E==D&&N==G?(w[F]=0,w[F+1]=0,w[F+2]=0,w[F+3]=0):(w[F]=T,w[F+1]=E,w[F+2]=N,w[F+3]=R);else if(q==3){if(R=p[W+3],T=p[W],E=p[W+1],N=p[W+2],C=w[F+3],O=w[F],D=w[F+1],G=w[F+2],R==C&&T==O&&E==D&&N==G)continue;if(R<220&&C>20)return!1}return!0}return{decode:function(y){const v=new Uint8Array(y);let w=8;const A=n,P=A.readUshort,V=A.readUint,L={tabs:{},frames:[]},q=new Uint8Array(v.length);let z,H=0,W=0;const F=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(v[R]!=F[R])throw"The input is not a PNG file!";for(;w<v.length;){const Z=A.readUint(v,w);w+=4;const k=A.readASCII(v,w,4);if(w+=4,k=="IHDR")d(v,w,L);else if(k=="iCCP"){for(var T=w;v[T]!=0;)T++;A.readASCII(v,w,T-w),v[T+1];const M=v.slice(T+2,w+Z);let J=null;try{J=r(M)}catch{J=s(M)}L.tabs[k]=J}else if(k=="CgBI")L.tabs[k]=v.slice(w,w+4);else if(k=="IDAT"){for(R=0;R<Z;R++)q[H+R]=v[w+R];H+=Z}else if(k=="acTL")L.tabs[k]={num_frames:V(v,w),num_plays:V(v,w+4)},z=new Uint8Array(v.length);else if(k=="fcTL"){W!=0&&((G=L.frames[L.frames.length-1]).data=t(L,z.slice(0,W),G.rect.width,G.rect.height),W=0);const M={x:V(v,w+12),y:V(v,w+16),width:V(v,w+4),height:V(v,w+8)};let J=P(v,w+22);J=P(v,w+20)/(J==0?100:J);const Q={rect:M,delay:Math.round(1e3*J),dispose:v[w+24],blend:v[w+25]};L.frames.push(Q)}else if(k=="fdAT"){for(R=0;R<Z-4;R++)z[W+R]=v[w+R+4];W+=Z-4}else if(k=="pHYs")L.tabs[k]=[A.readUint(v,w),A.readUint(v,w+4),v[w+8]];else if(k=="cHRM")for(L.tabs[k]=[],R=0;R<8;R++)L.tabs[k].push(A.readUint(v,w+4*R));else if(k=="tEXt"||k=="zTXt"){L.tabs[k]==null&&(L.tabs[k]={});var E=A.nextZero(v,w),N=A.readASCII(v,w,E-w),C=w+Z-E-1;if(k=="tEXt")D=A.readASCII(v,E+1,C);else{var O=r(v.slice(E+2,E+2+C));D=A.readUTF8(O,0,O.length)}L.tabs[k][N]=D}else if(k=="iTXt"){L.tabs[k]==null&&(L.tabs[k]={}),E=0,T=w,E=A.nextZero(v,T),N=A.readASCII(v,T,E-T);const M=v[T=E+1];var D;v[T+1],T+=2,E=A.nextZero(v,T),A.readASCII(v,T,E-T),T=E+1,E=A.nextZero(v,T),A.readUTF8(v,T,E-T),C=Z-((T=E+1)-w),M==0?D=A.readUTF8(v,T,C):(O=r(v.slice(T,T+C)),D=A.readUTF8(O,0,O.length)),L.tabs[k][N]=D}else if(k=="PLTE")L.tabs[k]=A.readBytes(v,w,Z);else if(k=="hIST"){const M=L.tabs.PLTE.length/3;for(L.tabs[k]=[],R=0;R<M;R++)L.tabs[k].push(P(v,w+2*R))}else if(k=="tRNS")L.ctype==3?L.tabs[k]=A.readBytes(v,w,Z):L.ctype==0?L.tabs[k]=P(v,w):L.ctype==2&&(L.tabs[k]=[P(v,w),P(v,w+2),P(v,w+4)]);else if(k=="gAMA")L.tabs[k]=A.readUint(v,w)/1e5;else if(k=="sRGB")L.tabs[k]=v[w];else if(k=="bKGD")L.ctype==0||L.ctype==4?L.tabs[k]=[P(v,w)]:L.ctype==2||L.ctype==6?L.tabs[k]=[P(v,w),P(v,w+2),P(v,w+4)]:L.ctype==3&&(L.tabs[k]=v[w]);else if(k=="IEND")break;w+=Z,A.readUint(v,w),w+=4}var G;return W!=0&&((G=L.frames[L.frames.length-1]).data=t(L,z.slice(0,W),G.rect.width,G.rect.height)),L.data=t(L,q,L.width,L.height),delete L.compress,delete L.interlace,delete L.filter,L},toRGBA8:function(y){const v=y.width,w=y.height;if(y.tabs.acTL==null)return[e(y.data,v,w,y).buffer];const A=[];y.frames[0].data==null&&(y.frames[0].data=y.data);const P=v*w*4,V=new Uint8Array(P),L=new Uint8Array(P),q=new Uint8Array(P);for(let H=0;H<y.frames.length;H++){const W=y.frames[H],F=W.rect.x,R=W.rect.y,T=W.rect.width,E=W.rect.height,N=e(W.data,T,E,y);if(H!=0)for(var z=0;z<P;z++)q[z]=V[z];if(W.blend==0?m(N,T,E,V,v,w,F,R,0):W.blend==1&&m(N,T,E,V,v,w,F,R,1),A.push(V.buffer.slice(0)),W.dispose!=0){if(W.dispose==1)m(L,T,E,V,v,w,F,R,0);else if(W.dispose==2)for(z=0;z<P;z++)V[z]=q[z]}}return A},_paeth:h,_copyTile:m,_bin:n}})();(function(){const{_copyTile:n}=Qr,{_bin:e}=Qr,t=Qr._paeth;var r={table:(function(){const T=new Uint32Array(256);for(let E=0;E<256;E++){let N=E;for(let C=0;C<8;C++)1&N?N=3988292384^N>>>1:N>>>=1;T[E]=N}return T})(),update(T,E,N,C){for(let O=0;O<C;O++)T=r.table[255&(T^E[N+O])]^T>>>8;return T},crc:(T,E,N)=>4294967295^r.update(4294967295,T,E,N)};function s(T,E,N,C){E[N]+=T[0]*C>>4,E[N+1]+=T[1]*C>>4,E[N+2]+=T[2]*C>>4,E[N+3]+=T[3]*C>>4}function o(T){return Math.max(0,Math.min(255,T))}function c(T,E){const N=T[0]-E[0],C=T[1]-E[1],O=T[2]-E[2],D=T[3]-E[3];return N*N+C*C+O*O+D*D}function h(T,E,N,C,O,D,G){G==null&&(G=1);const Z=C.length,k=[];for(var M=0;M<Z;M++){const te=C[M];k.push([te>>>0&255,te>>>8&255,te>>>16&255,te>>>24&255])}for(M=0;M<Z;M++){let te=4294967295;for(var J=0,Q=0;Q<Z;Q++){var se=c(k[M],k[Q]);Q!=M&&se<te&&(te=se,J=Q)}}const B=new Uint32Array(O.buffer),Y=new Int16Array(E*N*4),le=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(M=0;M<le.length;M++)le[M]=255*((le[M]+.5)/16-.5);for(let te=0;te<N;te++)for(let ye=0;ye<E;ye++){var re;M=4*(te*E+ye),G!=2?re=[o(T[M]+Y[M]),o(T[M+1]+Y[M+1]),o(T[M+2]+Y[M+2]),o(T[M+3]+Y[M+3])]:(se=le[4*(3&te)+(3&ye)],re=[o(T[M]+se),o(T[M+1]+se),o(T[M+2]+se),o(T[M+3]+se)]),J=0;let Ae=16777215;for(Q=0;Q<Z;Q++){const _e=c(re,k[Q]);_e<Ae&&(Ae=_e,J=Q)}const Oe=k[J],Re=[re[0]-Oe[0],re[1]-Oe[1],re[2]-Oe[2],re[3]-Oe[3]];G==1&&(ye!=E-1&&s(Re,Y,M+4,7),te!=N-1&&(ye!=0&&s(Re,Y,M+4*E-4,3),s(Re,Y,M+4*E,5),ye!=E-1&&s(Re,Y,M+4*E+4,1))),D[M>>2]=J,B[M>>2]=C[J]}}function d(T,E,N,C,O){O==null&&(O={});const{crc:D}=r,G=e.writeUint,Z=e.writeUshort,k=e.writeASCII;let M=8;const J=T.frames.length>1;let Q,se=!1,B=33+(J?20:0);if(O.sRGB!=null&&(B+=13),O.pHYs!=null&&(B+=21),O.iCCP!=null&&(Q=pako.deflate(O.iCCP),B+=21+Q.length+4),T.ctype==3){for(var Y=T.plte.length,le=0;le<Y;le++)T.plte[le]>>>24!=255&&(se=!0);B+=8+3*Y+4+(se?8+1*Y+4:0)}for(var re=0;re<T.frames.length;re++)J&&(B+=38),B+=(Oe=T.frames[re]).cimg.length+12,re!=0&&(B+=4);B+=12;const te=new Uint8Array(B),ye=[137,80,78,71,13,10,26,10];for(le=0;le<8;le++)te[le]=ye[le];if(G(te,M,13),M+=4,k(te,M,"IHDR"),M+=4,G(te,M,E),M+=4,G(te,M,N),M+=4,te[M]=T.depth,M++,te[M]=T.ctype,M++,te[M]=0,M++,te[M]=0,M++,te[M]=0,M++,G(te,M,D(te,M-17,17)),M+=4,O.sRGB!=null&&(G(te,M,1),M+=4,k(te,M,"sRGB"),M+=4,te[M]=O.sRGB,M++,G(te,M,D(te,M-5,5)),M+=4),O.iCCP!=null){const Re=13+Q.length;G(te,M,Re),M+=4,k(te,M,"iCCP"),M+=4,k(te,M,"ICC profile"),M+=11,M+=2,te.set(Q,M),M+=Q.length,G(te,M,D(te,M-(Re+4),Re+4)),M+=4}if(O.pHYs!=null&&(G(te,M,9),M+=4,k(te,M,"pHYs"),M+=4,G(te,M,O.pHYs[0]),M+=4,G(te,M,O.pHYs[1]),M+=4,te[M]=O.pHYs[2],M++,G(te,M,D(te,M-13,13)),M+=4),J&&(G(te,M,8),M+=4,k(te,M,"acTL"),M+=4,G(te,M,T.frames.length),M+=4,G(te,M,O.loop!=null?O.loop:0),M+=4,G(te,M,D(te,M-12,12)),M+=4),T.ctype==3){for(G(te,M,3*(Y=T.plte.length)),M+=4,k(te,M,"PLTE"),M+=4,le=0;le<Y;le++){const Re=3*le,_e=T.plte[le],Te=255&_e,Ve=_e>>>8&255,Ze=_e>>>16&255;te[M+Re+0]=Te,te[M+Re+1]=Ve,te[M+Re+2]=Ze}if(M+=3*Y,G(te,M,D(te,M-3*Y-4,3*Y+4)),M+=4,se){for(G(te,M,Y),M+=4,k(te,M,"tRNS"),M+=4,le=0;le<Y;le++)te[M+le]=T.plte[le]>>>24&255;M+=Y,G(te,M,D(te,M-Y-4,Y+4)),M+=4}}let Ae=0;for(re=0;re<T.frames.length;re++){var Oe=T.frames[re];J&&(G(te,M,26),M+=4,k(te,M,"fcTL"),M+=4,G(te,M,Ae++),M+=4,G(te,M,Oe.rect.width),M+=4,G(te,M,Oe.rect.height),M+=4,G(te,M,Oe.rect.x),M+=4,G(te,M,Oe.rect.y),M+=4,Z(te,M,C[re]),M+=2,Z(te,M,1e3),M+=2,te[M]=Oe.dispose,M++,te[M]=Oe.blend,M++,G(te,M,D(te,M-30,30)),M+=4);const Re=Oe.cimg;G(te,M,(Y=Re.length)+(re==0?0:4)),M+=4;const _e=M;k(te,M,re==0?"IDAT":"fdAT"),M+=4,re!=0&&(G(te,M,Ae++),M+=4),te.set(Re,M),M+=Y,G(te,M,D(te,_e,M-_e)),M+=4}return G(te,M,0),M+=4,k(te,M,"IEND"),M+=4,G(te,M,D(te,M-4,4)),M+=4,te.buffer}function m(T,E,N){for(let C=0;C<T.frames.length;C++){const O=T.frames[C];O.rect.width;const D=O.rect.height,G=new Uint8Array(D*O.bpl+D);O.cimg=w(O.img,D,O.bpp,O.bpl,G,E,N)}}function p(T,E,N,C,O){const D=O[0],G=O[1],Z=O[2],k=O[3],M=O[4],J=O[5];let Q=6,se=8,B=255;for(var Y=0;Y<T.length;Y++){const at=new Uint8Array(T[Y]);for(var le=at.length,re=0;re<le;re+=4)B&=at[re+3]}const te=B!=255,ye=(function(it,Qe,Fe,Xe,ft,_n){const Rt=[];for(var $e=0;$e<it.length;$e++){const Qt=new Uint8Array(it[$e]),Nn=new Uint32Array(Qt.buffer);var qt;let vn=0,Ht=0,wt=Qe,Xt=Fe,Ct=Xe?1:0;if($e!=0){const $o=_n||Xe||$e==1||Rt[$e-2].dispose!=0?1:2;let ai=0,Na=1e9;for(let Cn=0;Cn<$o;Cn++){var Gn=new Uint8Array(it[$e-1-Cn]);const qi=new Uint32Array(it[$e-1-Cn]);let mt=Qe,ln=Fe,bn=-1,wn=-1;for(let yr=0;yr<Fe;yr++)for(let fn=0;fn<Qe;fn++)Nn[Nt=yr*Qe+fn]!=qi[Nt]&&(fn<mt&&(mt=fn),fn>bn&&(bn=fn),yr<ln&&(ln=yr),yr>wn&&(wn=yr));bn==-1&&(mt=ln=bn=wn=0),ft&&((1&mt)==1&&mt--,(1&ln)==1&&ln--);const Go=(bn-mt+1)*(wn-ln+1);Go<Na&&(Na=Go,ai=Cn,vn=mt,Ht=ln,wt=bn-mt+1,Xt=wn-ln+1)}Gn=new Uint8Array(it[$e-1-ai]),ai==1&&(Rt[$e-1].dispose=2),qt=new Uint8Array(wt*Xt*4),n(Gn,Qe,Fe,qt,wt,Xt,-vn,-Ht,0),Ct=n(Qt,Qe,Fe,qt,wt,Xt,-vn,-Ht,3)?1:0,Ct==1?v(Qt,Qe,Fe,qt,{x:vn,y:Ht,width:wt,height:Xt}):n(Qt,Qe,Fe,qt,wt,Xt,-vn,-Ht,0)}else qt=Qt.slice(0);Rt.push({rect:{x:vn,y:Ht,width:wt,height:Xt},img:qt,blend:Ct,dispose:0})}if(Xe)for($e=0;$e<Rt.length;$e++){if((Lr=Rt[$e]).blend==1)continue;const Qt=Lr.rect,Nn=Rt[$e-1].rect,vn=Math.min(Qt.x,Nn.x),Ht=Math.min(Qt.y,Nn.y),wt={x:vn,y:Ht,width:Math.max(Qt.x+Qt.width,Nn.x+Nn.width)-vn,height:Math.max(Qt.y+Qt.height,Nn.y+Nn.height)-Ht};Rt[$e-1].dispose=1,$e-1!=0&&y(it,Qe,Fe,Rt,$e-1,wt,ft),y(it,Qe,Fe,Rt,$e,wt,ft)}let si=0;if(it.length!=1)for(var Nt=0;Nt<Rt.length;Nt++){var Lr;si+=(Lr=Rt[Nt]).rect.width*Lr.rect.height}return Rt})(T,E,N,D,G,Z),Ae={},Oe=[],Re=[];if(C!=0){const at=[];for(re=0;re<ye.length;re++)at.push(ye[re].img.buffer);const it=(function(ft){let _n=0;for(var Rt=0;Rt<ft.length;Rt++)_n+=ft[Rt].byteLength;const $e=new Uint8Array(_n);let qt=0;for(Rt=0;Rt<ft.length;Rt++){const Gn=new Uint8Array(ft[Rt]),si=Gn.length;for(let Nt=0;Nt<si;Nt+=4){let Lr=Gn[Nt],Qt=Gn[Nt+1],Nn=Gn[Nt+2];const vn=Gn[Nt+3];vn==0&&(Lr=Qt=Nn=0),$e[qt+Nt]=Lr,$e[qt+Nt+1]=Qt,$e[qt+Nt+2]=Nn,$e[qt+Nt+3]=vn}qt+=si}return $e.buffer})(at),Qe=P(it,C);for(re=0;re<Qe.plte.length;re++)Oe.push(Qe.plte[re].est.rgba);let Fe=0;for(re=0;re<ye.length;re++){const Xe=(Te=ye[re]).img.length;var _e=new Uint8Array(Qe.inds.buffer,Fe>>2,Xe>>2);Re.push(_e);const ft=new Uint8Array(Qe.abuf,Fe,Xe);J&&h(Te.img,Te.rect.width,Te.rect.height,Oe,ft,_e),Te.img.set(ft),Fe+=Xe}}else for(Y=0;Y<ye.length;Y++){var Te=ye[Y];const at=new Uint32Array(Te.img.buffer);var Ve=Te.rect.width;for(le=at.length,_e=new Uint8Array(le),Re.push(_e),re=0;re<le;re++){const it=at[re];if(re!=0&&it==at[re-1])_e[re]=_e[re-1];else if(re>Ve&&it==at[re-Ve])_e[re]=_e[re-Ve];else{let Qe=Ae[it];if(Qe==null&&(Ae[it]=Qe=Oe.length,Oe.push(it),Oe.length>=300))break;_e[re]=Qe}}}const Ze=Oe.length;for(Ze<=256&&M==0&&(se=Ze<=2?1:Ze<=4?2:Ze<=16?4:8,se=Math.max(se,k)),Y=0;Y<ye.length;Y++){(Te=ye[Y]).rect.x,Te.rect.y,Ve=Te.rect.width;const at=Te.rect.height;let it=Te.img;new Uint32Array(it.buffer);let Qe=4*Ve,Fe=4;if(Ze<=256&&M==0){Qe=Math.ceil(se*Ve/8);var De=new Uint8Array(Qe*at);const Xe=Re[Y];for(let ft=0;ft<at;ft++){re=ft*Qe;const _n=ft*Ve;if(se==8)for(var Ke=0;Ke<Ve;Ke++)De[re+Ke]=Xe[_n+Ke];else if(se==4)for(Ke=0;Ke<Ve;Ke++)De[re+(Ke>>1)]|=Xe[_n+Ke]<<4-4*(1&Ke);else if(se==2)for(Ke=0;Ke<Ve;Ke++)De[re+(Ke>>2)]|=Xe[_n+Ke]<<6-2*(3&Ke);else if(se==1)for(Ke=0;Ke<Ve;Ke++)De[re+(Ke>>3)]|=Xe[_n+Ke]<<7-1*(7&Ke)}it=De,Q=3,Fe=1}else if(te==0&&ye.length==1){De=new Uint8Array(Ve*at*3);const Xe=Ve*at;for(re=0;re<Xe;re++){const ft=3*re,_n=4*re;De[ft]=it[_n],De[ft+1]=it[_n+1],De[ft+2]=it[_n+2]}it=De,Q=2,Fe=3,Qe=3*Ve}Te.img=it,Te.bpl=Qe,Te.bpp=Fe}return{ctype:Q,depth:se,plte:Oe,frames:ye}}function y(T,E,N,C,O,D,G){const Z=Uint8Array,k=Uint32Array,M=new Z(T[O-1]),J=new k(T[O-1]),Q=O+1<T.length?new Z(T[O+1]):null,se=new Z(T[O]),B=new k(se.buffer);let Y=E,le=N,re=-1,te=-1;for(let Ae=0;Ae<D.height;Ae++)for(let Oe=0;Oe<D.width;Oe++){const Re=D.x+Oe,_e=D.y+Ae,Te=_e*E+Re,Ve=B[Te];Ve==0||C[O-1].dispose==0&&J[Te]==Ve&&(Q==null||Q[4*Te+3]!=0)||(Re<Y&&(Y=Re),Re>re&&(re=Re),_e<le&&(le=_e),_e>te&&(te=_e))}re==-1&&(Y=le=re=te=0),G&&((1&Y)==1&&Y--,(1&le)==1&&le--),D={x:Y,y:le,width:re-Y+1,height:te-le+1};const ye=C[O];ye.rect=D,ye.blend=1,ye.img=new Uint8Array(D.width*D.height*4),C[O-1].dispose==0?(n(M,E,N,ye.img,D.width,D.height,-D.x,-D.y,0),v(se,E,N,ye.img,D)):n(se,E,N,ye.img,D.width,D.height,-D.x,-D.y,0)}function v(T,E,N,C,O){n(T,E,N,C,O.width,O.height,-O.x,-O.y,2)}function w(T,E,N,C,O,D,G){const Z=[];let k,M=[0,1,2,3,4];D!=-1?M=[D]:(E*C>5e5||N==1)&&(M=[0]),G&&(k={level:0});const J=FU;for(var Q=0;Q<M.length;Q++){for(let Y=0;Y<E;Y++)A(O,T,Y,C,N,M[Q]);Z.push(J.deflate(O,k))}let se,B=1e9;for(Q=0;Q<Z.length;Q++)Z[Q].length<B&&(se=Q,B=Z[Q].length);return Z[se]}function A(T,E,N,C,O,D){const G=N*C;let Z=G+N;if(T[Z]=D,Z++,D==0)if(C<500)for(var k=0;k<C;k++)T[Z+k]=E[G+k];else T.set(new Uint8Array(E.buffer,G,C),Z);else if(D==1){for(k=0;k<O;k++)T[Z+k]=E[G+k];for(k=O;k<C;k++)T[Z+k]=E[G+k]-E[G+k-O]+256&255}else if(N==0){for(k=0;k<O;k++)T[Z+k]=E[G+k];if(D==2)for(k=O;k<C;k++)T[Z+k]=E[G+k];if(D==3)for(k=O;k<C;k++)T[Z+k]=E[G+k]-(E[G+k-O]>>1)+256&255;if(D==4)for(k=O;k<C;k++)T[Z+k]=E[G+k]-t(E[G+k-O],0,0)+256&255}else{if(D==2)for(k=0;k<C;k++)T[Z+k]=E[G+k]+256-E[G+k-C]&255;if(D==3){for(k=0;k<O;k++)T[Z+k]=E[G+k]+256-(E[G+k-C]>>1)&255;for(k=O;k<C;k++)T[Z+k]=E[G+k]+256-(E[G+k-C]+E[G+k-O]>>1)&255}if(D==4){for(k=0;k<O;k++)T[Z+k]=E[G+k]+256-t(0,E[G+k-C],0)&255;for(k=O;k<C;k++)T[Z+k]=E[G+k]+256-t(E[G+k-O],E[G+k-C],E[G+k-O-C])&255}}}function P(T,E){const N=new Uint8Array(T),C=N.slice(0),O=new Uint32Array(C.buffer),D=V(C,E),G=D[0],Z=D[1],k=N.length,M=new Uint8Array(k>>2);let J;if(N.length<2e7)for(var Q=0;Q<k;Q+=4)J=L(G,se=N[Q]*(1/255),B=N[Q+1]*(1/255),Y=N[Q+2]*(1/255),le=N[Q+3]*(1/255)),M[Q>>2]=J.ind,O[Q>>2]=J.est.rgba;else for(Q=0;Q<k;Q+=4){var se=N[Q]*.00392156862745098,B=N[Q+1]*(1/255),Y=N[Q+2]*(1/255),le=N[Q+3]*(1/255);for(J=G;J.left;)J=q(J.est,se,B,Y,le)<=0?J.left:J.right;M[Q>>2]=J.ind,O[Q>>2]=J.est.rgba}return{abuf:C.buffer,inds:M,plte:Z}}function V(T,E,N){N==null&&(N=1e-4);const C=new Uint32Array(T.buffer),O={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=W(T,O.i0,O.i1),O.est=F(O.bst);const D=[O];for(;D.length<E;){let Z=0,k=0;for(var G=0;G<D.length;G++)D[G].est.L>Z&&(Z=D[G].est.L,k=G);if(Z<N)break;const M=D[k],J=z(T,C,M.i0,M.i1,M.est.e,M.est.eMq255);if(M.i0>=J||M.i1<=J){M.est.L=0;continue}const Q={i0:M.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};Q.bst=W(T,Q.i0,Q.i1),Q.est=F(Q.bst);const se={i0:J,i1:M.i1,bst:null,est:null,tdst:0,left:null,right:null};for(se.bst={R:[],m:[],N:M.bst.N-Q.bst.N},G=0;G<16;G++)se.bst.R[G]=M.bst.R[G]-Q.bst.R[G];for(G=0;G<4;G++)se.bst.m[G]=M.bst.m[G]-Q.bst.m[G];se.est=F(se.bst),M.left=Q,M.right=se,D[k]=Q,D.push(se)}for(D.sort(((Z,k)=>k.bst.N-Z.bst.N)),G=0;G<D.length;G++)D[G].ind=G;return[O,D]}function L(T,E,N,C,O){if(T.left==null)return T.tdst=(function(Q,se,B,Y,le){const re=se-Q[0],te=B-Q[1],ye=Y-Q[2],Ae=le-Q[3];return re*re+te*te+ye*ye+Ae*Ae})(T.est.q,E,N,C,O),T;const D=q(T.est,E,N,C,O);let G=T.left,Z=T.right;D>0&&(G=T.right,Z=T.left);const k=L(G,E,N,C,O);if(k.tdst<=D*D)return k;const M=L(Z,E,N,C,O);return M.tdst<k.tdst?M:k}function q(T,E,N,C,O){const{e:D}=T;return D[0]*E+D[1]*N+D[2]*C+D[3]*O-T.eMq}function z(T,E,N,C,O,D){for(C-=4;N<C;){for(;H(T,N,O)<=D;)N+=4;for(;H(T,C,O)>D;)C-=4;if(N>=C)break;const G=E[N>>2];E[N>>2]=E[C>>2],E[C>>2]=G,N+=4,C-=4}for(;H(T,N,O)>D;)N-=4;return N+4}function H(T,E,N){return T[E]*N[0]+T[E+1]*N[1]+T[E+2]*N[2]+T[E+3]*N[3]}function W(T,E,N){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0],D=N-E>>2;for(let G=E;G<N;G+=4){const Z=T[G]*.00392156862745098,k=T[G+1]*(1/255),M=T[G+2]*(1/255),J=T[G+3]*(1/255);O[0]+=Z,O[1]+=k,O[2]+=M,O[3]+=J,C[0]+=Z*Z,C[1]+=Z*k,C[2]+=Z*M,C[3]+=Z*J,C[5]+=k*k,C[6]+=k*M,C[7]+=k*J,C[10]+=M*M,C[11]+=M*J,C[15]+=J*J}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:O,N:D}}function F(T){const{R:E}=T,{m:N}=T,{N:C}=T,O=N[0],D=N[1],G=N[2],Z=N[3],k=C==0?0:1/C,M=[E[0]-O*O*k,E[1]-O*D*k,E[2]-O*G*k,E[3]-O*Z*k,E[4]-D*O*k,E[5]-D*D*k,E[6]-D*G*k,E[7]-D*Z*k,E[8]-G*O*k,E[9]-G*D*k,E[10]-G*G*k,E[11]-G*Z*k,E[12]-Z*O*k,E[13]-Z*D*k,E[14]-Z*G*k,E[15]-Z*Z*k],J=M,Q=R;let se=[Math.random(),Math.random(),Math.random(),Math.random()],B=0,Y=0;if(C!=0)for(let re=0;re<16&&(se=Q.multVec(J,se),Y=Math.sqrt(Q.dot(se,se)),se=Q.sml(1/Y,se),!(re!=0&&Math.abs(Y-B)<1e-9));re++)B=Y;const le=[O*k,D*k,G*k,Z*k];return{Cov:M,q:le,e:se,L:B,eMq255:Q.dot(Q.sml(255,le),se),eMq:Q.dot(se,le),rgba:(Math.round(255*le[3])<<24|Math.round(255*le[2])<<16|Math.round(255*le[1])<<8|Math.round(255*le[0])<<0)>>>0}}var R={multVec:(T,E)=>[T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],T[4]*E[0]+T[5]*E[1]+T[6]*E[2]+T[7]*E[3],T[8]*E[0]+T[9]*E[1]+T[10]*E[2]+T[11]*E[3],T[12]*E[0]+T[13]*E[1]+T[14]*E[2]+T[15]*E[3]],dot:(T,E)=>T[0]*E[0]+T[1]*E[1]+T[2]*E[2]+T[3]*E[3],sml:(T,E)=>[T*E[0],T*E[1],T*E[2],T*E[3]]};Qr.encode=function(E,N,C,O,D,G,Z){O==null&&(O=0),Z==null&&(Z=!1);const k=p(E,N,C,O,[!1,!1,!1,0,Z,!1]);return m(k,-1),d(k,N,C,D,G)},Qr.encodeLL=function(E,N,C,O,D,G,Z,k){const M={ctype:0+(O==1?0:2)+(D==0?0:4),depth:G,frames:[]},J=(O+D)*G,Q=J*N;for(let se=0;se<E.length;se++)M.frames.push({rect:{x:0,y:0,width:N,height:C},img:new Uint8Array(E[se]),blend:0,dispose:1,bpp:Math.ceil(J/8),bpl:Math.ceil(Q/8)});return m(M,0,!0),d(M,N,C,Z,k)},Qr.encode.compress=p,Qr.encode.dither=h,Qr.quantize=P,Qr.quantize.getKDtree=V,Qr.quantize.getNearest=L})();const QI={toArrayBuffer(n,e){const t=n.width,r=n.height,s=t<<2,o=n.getContext("2d").getImageData(0,0,t,r),c=new Uint32Array(o.data.buffer),h=(32*t+31)/32<<2,d=h*r,m=122+d,p=new ArrayBuffer(m),y=new DataView(p),v=1<<20;let w,A,P,V,L=v,q=0,z=0,H=0;function W(T){y.setUint16(z,T,!0),z+=2}function F(T){y.setUint32(z,T,!0),z+=4}function R(T){z+=T}W(19778),F(m),R(4),F(122),F(108),F(t),F(-r>>>0),W(1),W(32),F(3),F(d),F(2835),F(2835),R(8),F(16711680),F(65280),F(255),F(4278190080),F(1466527264),(function T(){for(;q<r&&L>0;){for(V=122+q*h,w=0;w<s;)L--,A=c[H++],P=A>>>24,y.setUint32(V+w,A<<8|P),w+=4;q++}H<c.length?(L=v,setTimeout(T,QI._dly)):e(p)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var er={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},BU={[er.CHROME]:16384,[er.FIREFOX]:11180,[er.DESKTOP_SAFARI]:16384,[er.IE]:8192,[er.IOS]:4096,[er.ETC]:8192};const G_=typeof window<"u",XI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,_m=G_&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),qU=(G_||XI)&&(_m&&_m.getOriginalSymbol(window,"File")||typeof File<"u"&&File),WI=(G_||XI)&&(_m&&_m.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function K_(n,e,t=Date.now()){return new Promise((r=>{const s=n.split(","),o=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let h=c.length;const d=new Uint8Array(h);for(;h--;)d[h]=c.charCodeAt(h);const m=new Blob([d],{type:o});m.name=e,m.lastModified=t,r(m)}))}function JI(n){return new Promise(((e,t)=>{const r=new WI;r.onload=()=>e(r.result),r.onerror=s=>t(s),r.readAsDataURL(n)}))}function ZI(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=s=>t(s),r.src=n}))}function fo(){if(fo.cachedResult!==void 0)return fo.cachedResult;let n=er.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=er.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=er.IOS:/Safari/i.test(e)?n=er.DESKTOP_SAFARI:/Firefox/i.test(e)?n=er.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=er.IE),fo.cachedResult=n,fo.cachedResult}function eR(n,e){const t=fo(),r=BU[t];let s=n,o=e,c=s*o;const h=s>o?o/s:s/o;for(;c>r*r;){const d=(r+s)/2,m=(r+o)/2;d<m?(o=m,s=m*h):(o=d*h,s=d),c=s*o}return{width:s,height:o}}function og(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function tR(n,e){const{width:t,height:r}=eR(n.width,n.height),[s,o]=og(t,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,s.width,s.height)),o.drawImage(n,0,0,s.width,s.height),s}function Uf(){return Uf.cachedResult!==void 0||(Uf.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Uf.cachedResult}function vm(n,e={}){return new Promise((function(t,r){let s,o;var c=function(){try{return o=tR(s,e.fileType||n.type),t([s,o])}catch(d){return r(d)}},h=function(d){try{var m=function(p){try{throw p}catch(y){return r(y)}};try{let p;return JI(n).then((function(y){try{return p=y,ZI(p).then((function(v){try{return s=v,(function(){try{return c()}catch(w){return r(w)}})()}catch(w){return m(w)}}),m)}catch(v){return m(v)}}),m)}catch(p){m(p)}}catch(p){return r(p)}};try{if(Uf()||[er.DESKTOP_SAFARI,er.MOBILE_SAFARI].includes(fo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(d){try{return s=d,c()}catch{return h()}}),h)}catch{h()}}))}function bm(n,e,t,r,s=1){return new Promise((function(o,c){let h;if(e==="image/png"){let y,v,w;return y=n.getContext("2d"),{data:v}=y.getImageData(0,0,n.width,n.height),w=Qr.encode([v.buffer],n.width,n.height,4096*s),h=new Blob([w],{type:e}),h.name=t,h.lastModified=r,d.call(this)}{let y=function(){return d.call(this)};var m=y;if(e==="image/bmp")return new Promise((v=>QI.toBlob(n,v))).then((function(v){try{return h=v,h.name=t,h.lastModified=r,y.call(this)}catch(w){return c(w)}}).bind(this),c);{let v=function(){return y.call(this)};var p=v;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:s}).then((function(w){try{return h=w,h.name=t,h.lastModified=r,v.call(this)}catch(A){return c(A)}}).bind(this),c);{let w;return w=n.toDataURL(e,s),K_(w,t,r).then((function(A){try{return h=A,v.call(this)}catch(P){return c(P)}}).bind(this),c)}}}function d(){return o(h)}}))}function Ai(n){n.width=0,n.height=0}function Kl(){return new Promise((function(n,e){let t,r,s,o;return Kl.cachedResult!==void 0?n(Kl.cachedResult):K_("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,vm(t).then((function(h){try{return r=h[1],bm(r,t.type,t.name,t.lastModified).then((function(d){try{return s=d,Ai(r),vm(s).then((function(m){try{return o=m[0],Kl.cachedResult=o.width===1&&o.height===2,n(Kl.cachedResult)}catch(p){return e(p)}}),e)}catch(m){return e(m)}}),e)}catch(d){return e(d)}}),e)}catch(h){return e(h)}}),e)}))}function nR(n){return new Promise(((e,t)=>{const r=new WI;r.onload=s=>{const o=new DataView(s.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let h=2;for(;h<c;){if(o.getUint16(h+2,!1)<=8)return e(-1);const d=o.getUint16(h,!1);if(h+=2,d==65505){if(o.getUint32(h+=2,!1)!=1165519206)return e(-1);const m=o.getUint16(h+=6,!1)==18761;h+=o.getUint32(h+4,m);const p=o.getUint16(h,m);h+=2;for(let y=0;y<p;y++)if(o.getUint16(h+12*y,m)==274)return e(o.getUint16(h+12*y+8,m))}else{if((65280&d)!=65280)break;h+=o.getUint16(h,!1)}}return e(-1)},r.onerror=s=>t(s),r.readAsArrayBuffer(n)}))}function rR(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:s}=e;let o,c=n;return isFinite(s)&&(t>s||r>s)&&([c,o]=og(t,r),t>r?(c.width=s,c.height=r/t*s):(c.width=t/r*s,c.height=s),o.drawImage(n,0,0,c.width,c.height),Ai(n)),c}function iR(n,e){const{width:t}=n,{height:r}=n,[s,o]=og(t,r);switch(e>4&&e<9?(s.width=r,s.height=t):(s.width=t,s.height=r),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,r),Ai(n),s}function NT(n,e,t=0){return new Promise((function(r,s){let o,c,h,d,m,p,y,v,w,A,P,V,L,q,z,H,W,F,R,T;function E(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=C,e.onProgress(Math.min(o,100))}function N(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(C,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,h=1024*e.maxSizeMB*1024,E(),vm(n,e).then((function(C){try{return[,d]=C,E(),m=rR(d,e),E(),new Promise((function(O,D){var G;if(!(G=e.exifOrientation))return nR(n).then((function(k){try{return G=k,Z.call(this)}catch(M){return D(M)}}).bind(this),D);function Z(){return O(G)}return Z.call(this)})).then((function(O){try{return p=O,E(),Kl().then((function(D){try{return y=D?m:iR(m,p),E(),v=e.initialQuality||1,w=e.fileType||n.type,bm(y,w,n.name,n.lastModified,v).then((function(G){try{{let J=function(){if(c--&&(z>h||z>L)){let se,B;return se=T?.95*R.width:R.width,B=T?.95*R.height:R.height,[W,F]=og(se,B),F.drawImage(R,0,0,se,B),v*=w==="image/png"?.85:.95,bm(W,w,n.name,n.lastModified,v).then((function(Y){try{return H=Y,Ai(R),R=W,z=H.size,N(Math.min(99,Math.floor((q-z)/(q-h)*100))),J}catch(le){return s(le)}}),s)}return[1]},Q=function(){return Ai(R),Ai(W),Ai(m),Ai(y),Ai(d),N(100),r(H)};var k=J,M=Q;if(A=G,E(),P=A.size>h,V=A.size>n.size,!P&&!V)return N(100),r(A);var Z;return L=n.size,q=A.size,z=q,R=y,T=!e.alwaysKeepResolution&&P,(Z=(function(se){for(;se;){if(se.then)return void se.then(Z,s);try{if(se.pop){if(se.length)return se.pop()?Q.call(this):se;se=J}else se=se.call(this)}catch(B){return s(B)}}}).bind(this))(J)}}catch(J){return s(J)}}).bind(this),s)}catch(G){return s(G)}}).bind(this),s)}catch(D){return s(D)}}).bind(this),s)}catch(O){return s(O)}}).bind(this),s)}))}const HU=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Cy;function $U(n,e){return new Promise(((t,r)=>{Cy||(Cy=(function(c){const h=[];return h.push(c),URL.createObjectURL(new Blob(h))})(HU));const s=new Worker(Cy);s.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)})),s.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),s.terminate()})),s.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function un(n,e){return new Promise((function(t,r){let s,o,c,h,d,m;if(s={...e},c=0,{onProgress:h}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=w=>{c=w,typeof h=="function"&&h(c)},!(n instanceof Blob||n instanceof qU))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||m)return NT(n,s).then((function(w){try{return o=w,v.call(this)}catch(A){return r(A)}}).bind(this),r);var p=(function(){try{return v.call(this)}catch(w){return r(w)}}).bind(this),y=function(w){try{return NT(n,s).then((function(A){try{return o=A,p()}catch(P){return r(P)}}),r)}catch(A){return r(A)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",$U(n,s).then((function(w){try{return o=w,p()}catch{return y()}}),y)}catch{y()}function v(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{s.preserveExif&&n.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===n.type)&&(o=YI(n,o))}catch{}return t(o)}}))}un.getDataUrlFromFile=JI,un.getFilefromDataUrl=K_,un.loadImage=ZI,un.drawImageInCanvas=tR,un.drawFileInCanvas=vm,un.canvasToFile=bm,un.getExifOrientation=nR,un.handleMaxWidthOrHeight=rR,un.followExifOrientation=iR,un.cleanupCanvasMemory=Ai,un.isAutoOrientationInBrowser=Kl,un.approximateBelowMaximumCanvasSizeOfBrowser=eR,un.copyExifWithoutOrientation=YI,un.getBrowserName=fo,un.version="2.0.2";const GU=["badword","ktgz","kfr","hakaret","aptal","salak","idiot","stupid","xxx","porn"];function KU(n){if(!n)return!0;const e=n.toLowerCase();return!GU.some(t=>e.includes(t))}async function YU(n,e){try{const t=It(He,"users",n);return await gr(t,{blockedUsers:j_(e)}),!0}catch(t){throw console.error("Error blocking user:",t),t}}async function QU(n,e){try{const t=It(He,"users",n);return await gr(t,{blockedUsers:gI(e)}),!0}catch(t){throw console.error("Error unblocking user:",t),t}}async function XU(n,e){try{const t=It(He,"users",n),r=await Ra(t);return r.exists()?(r.data().blockedUsers||[]).includes(e):!1}catch{return!1}}function WU({onClose:n,onPostCreated:e}){const{t}=Un(),{currentUser:r}=ii(),s=$.useRef(null),[o,c]=$.useState(""),[h,d]=$.useState(""),[m,p]=$.useState(""),[y,v]=$.useState(!1),[w,A]=$.useState("none"),[P,V]=$.useState(null),[L,q]=$.useState(null),[z,H]=$.useState(!1),[W,F]=$.useState(!1),[R,T]=$.useState(""),[E,N]=$.useState(""),[C,O]=$.useState(0);$.useEffect(()=>{if(h){const M=Lf.find(J=>J.value===h);M&&p(t(M.labelKey))}},[h,t]);const D=async M=>{const J=M.target.files[0];if(J){const Q=new FileReader;Q.onloadend=()=>q(Q.result),Q.readAsDataURL(J),V(J)}},G=async()=>{if(P){F(!0);try{let M=P;try{M=await un(P,{maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0})}catch(Q){console.warn("Compression failed for analysis, using original",Q)}const J=new FileReader;J.readAsDataURL(M),J.onloadend=async()=>{const Q=J.result,se=await OI(Q,"en"),B=(se.plant_name+" "+se.disease_name).toLowerCase();let Y=null;for(const le of Lf)if(B.includes(le.value)){Y=le;break}Y?(d(Y.value),p(t(Y.labelKey)),N(`${t("auto_detect")}: ${t(Y.labelKey)}`)):N("Plant detected but not in our list yet."),setTimeout(()=>N(""),3e3),F(!1)}}catch(M){console.error("Auto detect failed",M),T(t("error_diagnosis_failed")),F(!1)}}},Z=async M=>{if(M.preventDefault(),!!o.trim()){if(!KU(o)){T(t("unsafe_content_warning")||"Your post contains inappropriate language.");return}H(!0),T(""),O(0);try{let J=null;if(P)try{console.log("Compressing for Base64 storage...");const se=await un(P,{maxSizeMB:.15,maxWidthOrHeight:800,useWebWorker:!0,initialQuality:.7});J=await new Promise((B,Y)=>{const le=new FileReader;le.readAsDataURL(se),le.onload=()=>B(le.result),le.onerror=re=>Y(re)}),console.log("Base64 string ready, length:",J.length)}catch(Q){console.error("Compression failed:",Q),T("Image is too large and could not be compressed."),H(!1);return}await LI(r.uid,{authorName:r.displayName||"Gardener",content:o,plantType:h||"other",image:J}),e(),n()}catch(J){console.error("FULL POST ERROR:",J),T(J.message||t("error_diagnosis_failed")||"Failed to share post.")}finally{H(!1)}}},k=Lf.filter(M=>t(M.labelKey).toLowerCase().includes(m.toLowerCase()));return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center shrink-0",children:[b.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t("ask_question")}),b.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(Mo,{className:"w-5 h-5 text-gray-500"})})]}),b.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[R&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:R}),E&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm",children:E}),b.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[b.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 outline-none resize-none min-h-[120px]",placeholder:t("what_plant_placeholder"),value:o,onChange:M=>c(M.target.value),required:!0}),b.jsxs("div",{className:"relative",children:[b.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 ml-1 uppercase",children:t("plant_diagnosis")}),b.jsxs("div",{className:"relative",children:[b.jsx(SI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:t("select_plant"),value:m,onChange:M=>{p(M.target.value),v(!0),M.target.value===""&&d("")},onFocus:()=>v(!0)}),b.jsx(z_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),y&&b.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto custom-scrollbar",children:k.length>0?k.map(M=>b.jsx("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200",onClick:()=>{d(M.value),p(t(M.labelKey)),v(!1)},children:t(M.labelKey)},M.value)):b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:"No Match"})}),y&&b.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>v(!1)})]}),L&&b.jsxs("div",{className:"relative rounded-xl overflow-hidden max-h-48 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[b.jsx("img",{src:L,alt:"Preview",className:"w-full h-full object-cover"}),b.jsx("button",{type:"button",onClick:()=>{V(null),q(null)},className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70",disabled:z,children:b.jsx(Mo,{className:"w-4 h-4"})}),b.jsxs("button",{type:"button",onClick:G,disabled:W,className:"absolute bottom-2 right-2 px-3 py-1.5 bg-blue-600/90 text-white rounded-lg text-xs font-bold flex items-center gap-1.5 hover:bg-blue-700 backdrop-blur-sm shadow-lg transition-transform hover:scale-105",children:[W?b.jsx(Mr,{className:"w-3 h-3 animate-spin"}):b.jsx(kj,{className:"w-3 h-3"}),t(W?"detecting":"auto_detect")]})]}),z&&C>0&&b.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:[b.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${C}%`}}),b.jsxs("p",{className:"text-xs text-center mt-1 text-gray-500",children:[Math.round(C),"%"]})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2",children:[b.jsxs("button",{type:"button",onClick:()=>s.current?.click(),disabled:z,className:"flex items-center gap-2 text-gray-500 hover:text-green-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:[b.jsx(UV,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-medium",children:t("upload_photo")})]}),b.jsx("input",{type:"file",ref:s,onChange:D,accept:"image/*",className:"hidden"}),b.jsxs("button",{type:"submit",disabled:z||!o.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl active:scale-95",children:[z?b.jsx(Mr,{className:"w-4 h-4 animate-spin"}):b.jsx(mh,{className:"w-4 h-4"}),z?"...":t("ask_question")]})]})]})]})]})})}function JU({user:n,onClose:e}){const{currentUser:t}=ii(),r=ws(),[s,o]=$.useState(!1),{t:c}=Un(),{addToast:h}=Ho(),[d,m]=$.useState(n);$.useEffect(()=>{if(!n)return;const V=n.uid||n.id;if(!V)return;const L=vo(It(He,"users",V),q=>{q.exists()&&m({uid:q.id,...q.data()})},q=>{console.error("User listener error",q)});return()=>L()},[n]);const p=n?{...n,...d,uid:d?.uid||n.uid||n.id}:null,[y,v]=$.useState(!1);$.useEffect(()=>{t&&p&&XU(t.uid,p.uid).then(v)},[t,p]);const w=async()=>{if(!(!t||!p))try{y?(await QU(t.uid,p.uid),v(!1),h(c("user_unblocked")||"User unblocked","success")):window.confirm(c("confirm_block")||"Block this user? They won't be able to message you.")&&(await YU(t.uid,p.uid),v(!0),h(c("user_blocked")||"User blocked","success"))}catch(V){console.error(V),h("Action failed","error")}},A=V=>!V?.lastSeen||!V.lastSeen.seconds?!1:Date.now()-V.lastSeen.seconds*1e3<180*1e3;if(!n||!p)return null;const P=async()=>{if(!t){h(c("login_to_message"),"info"),r("/login");return}if(t.uid===p.uid){h(c("cannot_message_self"),"warning");return}o(!0);try{e();const V={uid:p.uid,name:p.name||p.displayName||"User",photoURL:p.photoURL||p.avatar||null};r("/messages/new",{state:{targetUser:V}})}catch(V){console.error(V),h("Error","error")}finally{o(!1)}};return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-6 w-full max-w-sm shadow-2xl transform transition-all scale-100",onClick:V=>V.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/10 hover:bg-black/20 rounded-full transition-colors z-10",children:b.jsx(Mo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),b.jsxs("div",{className:"flex flex-col items-center relative",children:[b.jsx("img",{src:p.photoURL||p.avatar||`https://ui-avatars.com/api/?name=${p.name}`,alt:p.name,className:"w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-green-50 dark:border-green-900"}),b.jsxs("div",{className:`absolute top-2 right-2 px-3 py-1 rounded-full text-xs font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 ${A(p)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-2 h-2 rounded-full ${A(p)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),A(p)?"Online":"Offline"]}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:p.name||"User"}),b.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6 flex items-center gap-1",children:[b.jsx(w0,{className:"w-3 h-3"}),b.jsxs("span",{children:[c("joined")||"Katlma Tarihi",": ",p.createdAt?.seconds?new Date(p.createdAt.seconds*1e3).toLocaleDateString(i18n.language,{day:"numeric",month:"long",year:"numeric"}):c("unknown_date")]})]}),b.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[b.jsxs("button",{onClick:()=>{e(),r(`/profile/${p.uid}`)},className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 transition-transform active:scale-95",children:[b.jsx(w0,{className:"w-5 h-5"}),c("view_profile")||"Profili Gr"]}),b.jsx("button",{onClick:P,disabled:s||y,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-70",children:s?c("starting_chat")||"Balatlyor...":b.jsxs(b.Fragment,{children:[" ",b.jsx(fh,{className:"w-5 h-5"})," ",c("send_message")||"Mesaj Gnder"," "]})}),t.uid!==p.uid&&b.jsx("button",{onClick:w,className:`w-full py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors ${y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"text-red-500 hover:bg-red-50 border border-red-100"}`,children:y?c("unblock_user")||"Engeli Kaldr":c("block_user")||"Kullancy Engelle"})]})]})]})})}function ZU({analysisId:n,onClose:e}){const[t,r]=$.useState(null),[s,o]=$.useState(!0);return $.useEffect(()=>{async function c(){try{const h=await Ra(It(He,"analyses",n));if(h.exists()){const d=h.data();let m=[];try{m=(await fc(Ln(He,"analyses",n,"updates"))).docs.map(y=>y.data()).sort((y,v)=>(v.createdAt?.seconds||0)-(y.createdAt?.seconds||0))}catch(p){console.warn("Could not fetch updates for modal",p)}r({...d,updates:m})}}catch(h){console.error(h)}finally{o(!1)}}c()},[n]),$.useEffect(()=>{const c=h=>{h.key==="Escape"&&e()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e]),s?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:b.jsx(Mr,{className:"animate-spin text-white w-8 h-8"})}):t?b.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scrollbar shadow-2xl p-6 relative",onClick:c=>c.stopPropagation(),children:[b.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full dark:hover:bg-gray-700 transition-colors z-10",children:b.jsx(Mo,{className:"w-5 h-5 text-gray-500"})}),b.jsx("div",{className:"flex justify-between items-start mb-6 pr-8",children:b.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize flex items-center gap-2",children:[b.jsx("span",{className:"text-green-600",children:t.plantType})," Diagnosis"]})}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("img",{src:t.mainImage,alt:"Main",className:"rounded-xl object-cover w-full h-48 bg-gray-100 border border-gray-200 dark:border-gray-700"}),t.macroImage&&b.jsx("img",{src:t.macroImage,alt:"Macro",className:"rounded-xl object-cover w-20 h-20 bg-gray-100 border border-gray-200 dark:border-gray-700"})]}),b.jsxs("div",{children:[b.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30",children:[b.jsx("span",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Detected Issue"}),b.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-400",children:t.result.disease_name})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"Confidence"}),b.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:b.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Math.min((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80,100)}%`}})}),b.jsxs("span",{className:"text-xs text-gray-500 mt-1 block text-right",children:[Math.round((t.result.confidence>1?t.result.confidence:t.result.confidence*100)||80),"% Match"]})]})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-5 rounded-xl border border-green-100 dark:border-green-900/30",children:[b.jsx("h3",{className:"font-bold text-green-800 dark:text-green-400 mb-2 text-lg",children:"Analysis"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.result.description})]}),t.result.treatment_steps&&b.jsxs("div",{className:"border border-gray-100 dark:border-gray-700 p-5 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[b.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 text-lg",children:"Treatment Plan"}),b.jsx("ul",{className:"space-y-3",children:t.result.treatment_steps.map((c,h)=>b.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full flex items-center justify-center font-bold text-xs mt-0.5",children:h+1}),b.jsx("span",{children:c})]},h))})]}),t.updates&&t.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Progress Updates"}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.updates.map((c,h)=>b.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-xl border border-gray-100 dark:border-gray-700",children:[c.imageUrl&&b.jsx("img",{src:c.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:c.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString():""}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:c.note})]},h))})]})]})]})}):null}function e9(){const{t:n}=Un(),{currentUser:e}=ii(),[t,r]=$.useState([]),[s,o]=$.useState(!0),[c,h]=$.useState(!1),[d,m]=$.useState(null),[p,y]=$.useState(null),[v,w]=$.useState("All"),[A,P]=$.useState(!1),[V,L]=$.useState(""),q=10,[z,H]=$.useState(!0),F=[{value:"All",labelKey:"community"},...Lf].filter(R=>(R.value==="All"?n("community")+" (All)":n(R.labelKey)).toLowerCase().includes(V.toLowerCase()));return $.useEffect(()=>{o(!0);let R;v==="All"?R=Ta(Ln(He,"posts"),k6("createdAt","desc"),GE(q)):R=Ta(Ln(He,"posts"),qo("plantType","==",v),GE(50));const T=vo(R,E=>{const N=E.docs.map(C=>({id:C.id,...C.data()}));N.sort((C,O)=>{const D=C.createdAt?.seconds||0;return(O.createdAt?.seconds||0)-D}),r(N),o(!1),H(E.docs.length>=q)},E=>{console.error("Error fetching posts:",E),o(!1)});return()=>T()},[v]),b.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 pb-20 p-4",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 sticky top-0 z-20 gap-4",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white shrink-0",children:n("community")}),b.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[b.jsxs("div",{className:"relative w-full sm:w-64",children:[b.jsxs("div",{className:"relative",children:[b.jsx(SI,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"}),b.jsx("input",{type:"text",className:"w-full pl-9 pr-8 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:n("select_plant"),value:V,onFocus:()=>P(!0),onChange:R=>{L(R.target.value),P(!0)}}),v!=="All"?b.jsx("button",{onClick:()=>{w("All"),L("")},className:"absolute right-2 top-2 p-0.5 hover:bg-gray-200 rounded-full",children:b.jsx(Mo,{className:"w-4 h-4 text-gray-500"})}):b.jsx(z_,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]}),A&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>P(!1)}),b.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar",children:[F.map(R=>b.jsxs("div",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-gray-700 dark:text-gray-200 flex justify-between items-center",onClick:()=>{w(R.value),L(R.value==="All"?"":n(R.labelKey)),P(!1)},children:[b.jsx("span",{children:R.value==="All"?n("community"):n(R.labelKey)}),v===R.value&&b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]},R.value)),F.length===0&&b.jsx("div",{className:"px-4 py-2 text-sm text-gray-400",children:n("no_results")||"No results"})]})]})]}),b.jsxs("button",{onClick:()=>{if(!e){alert(n("login_to_post")||"Please login to post.");return}h(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md transition-all active:scale-95 shrink-0 whitespace-nowrap",children:[b.jsx(aj,{className:"w-5 h-5"}),b.jsx("span",{className:"hidden sm:inline",children:n("ask_question")}),b.jsx("span",{className:"sm:hidden",children:n("ask_question")})]})]})]}),s?b.jsx("div",{className:"flex justify-center py-10",children:b.jsx(Mr,{className:"w-8 h-8 animate-spin text-green-600"})}):t.length>0?b.jsx("div",{className:"space-y-6",children:t.map(R=>b.jsx(KI,{post:R,onViewAnalysis:T=>y(T),onUserClick:T=>{m({id:T,name:R.authorName||"Gardener",avatar:R.userAvatar})}},R.id))}):b.jsxs("div",{className:"text-center py-20 text-gray-500 bg-white dark:bg-gray-800 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[b.jsx("p",{className:"text-lg mb-2",children:n("no_posts_yet")}),b.jsx("p",{className:"text-sm",children:n("be_the_first")})]}),c&&b.jsx(WU,{onClose:()=>h(!1),onPostCreated:()=>{}}),p&&b.jsx(ZU,{analysisId:p,onClose:()=>y(null)}),d&&b.jsx(JU,{user:d,onClose:()=>m(null)})]})}function t9({chat:n,currentUser:e}){const[t,r]=$.useState(null),{t:s}=Un(),{addToast:o}=Ho(),c=n.participants.find(m=>m!==e.uid);$.useEffect(()=>{(async()=>{if(c)try{const p=await Ra(It(He,"users",c));if(p.exists())r(p.data());else{const y=n.participantData?.[c];y&&r(y)}}catch(p){console.error("Error fetching user",p)}})()},[c,n.participantData]);const h=t||{name:"Unknown User",photoURL:null},d=async m=>{if(m.preventDefault(),!!window.confirm(s("confirm_delete_chat")||"Delete this chat permanently?"))try{await rg(It(He,"chats",n.id)),o("Chat deleted","success")}catch(p){console.error("Delete Chat Error",p),o("Failed to delete chat","error")}};return b.jsxs("div",{className:"relative group",children:[b.jsxs(kr,{to:`/messages/${n.id}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors pr-12",children:[b.jsx("img",{src:h.photoURL||h.avatar||`https://ui-avatars.com/api/?name=${h.name||"User"}`,alt:h.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 bg-white"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[b.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:h.name||h.displayName||"Loading..."}),n.updatedAt&&b.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:ag(new Date(n.updatedAt.seconds*1e3),{addSuffix:!0})})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:n.lastMessage||s("new_conversation")||"Yeni Sohbet"})]})]}),b.jsx("button",{onClick:d,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all z-10",title:"Delete Chat",children:b.jsx(sg,{className:"w-5 h-5"})})]})}function n9(){const{currentUser:n}=ii(),{t:e}=Un(),[t,r]=$.useState([]),[s,o]=$.useState(!0);return $.useEffect(()=>{if(!n)return;const c=Ta(Ln(He,"chats"),qo("participants","array-contains",n.uid)),h=vo(c,d=>{const m=d.docs.map(p=>({id:p.id,...p.data()})).sort((p,y)=>{const v=p.updatedAt?.seconds||0;return(y.updatedAt?.seconds||0)-v});r(m),o(!1)});return()=>h()},[n]),s?b.jsx("div",{className:"flex justify-center p-8",children:b.jsx(Mr,{className:"w-8 h-8 animate-spin text-green-600"})}):b.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6 px-4",children:e("messages")}),b.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 divide-y divide-gray-100 dark:divide-gray-700",children:t.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500",children:e("no_messages")||"No messages yet. Start a conversation!"}):t.map(c=>b.jsx(t9,{chat:c,currentUser:n},c.id))})]})}const r9="modulepreload",i9=function(n){return"/"+n},CT={},s9=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=h?.nonce||h?.getAttribute("nonce");s=m(t.map(p=>{if(p=i9(p),p in CT)return;CT[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":r9,y||(w.as="script"),w.crossOrigin="",w.href=p,d&&w.setAttribute("nonce",d),document.head.appendChild(w),y)return new Promise((A,P)=>{w.addEventListener("load",A),w.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return s.then(h=>{for(const d of h||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},a9=n=>new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)});function o9(){const{chatId:n}=BT(),{currentUser:e}=ii(),{t}=Un(),r=ws(),s=$.useRef(null),o=$.useRef(null),{addToast:c}=Ho(),[h,d]=$.useState([]),[m,p]=$.useState(""),[y,v]=$.useState(!0),[w,A]=$.useState(null),[P,V]=$.useState(null),[L,q]=$.useState(null),[z,H]=$.useState(!1),[W,F]=$.useState(null),[R,T]=$.useState(0),[E,N]=$.useState(null),[C,O]=$.useState(!1),[D,G]=$.useState(null),Z=pr(),[k,M]=$.useState(Z.state?.targetUser||null),[J,Q]=$.useState(n==="new"?null:n);$.useEffect(()=>{n!=="new"&&Q(n)},[n]),$.useEffect(()=>{n==="new"&&k&&e&&(async()=>{try{A(k);const Te=Ta(Ln(He,"chats"),qo("participants","array-contains",e.uid)),Ze=(await fc(Te)).docs.find(De=>De.data().participants.includes(k.uid));Ze?(Q(Ze.id),r(`/messages/${Ze.id}`,{replace:!0})):v(!1)}catch(Te){console.warn("Error checking existing chats:",Te)}})()},[n,k,e]),$.useEffect(()=>{if(n==="new"){v(!1);return}if(!J||!e)return;v(!0);const _e=vo(It(He,"chats",J),Ve=>{if(Ve.exists()){const Ze=Ve.data(),De=Ze.participants.find(Ke=>Ke!==e.uid);if(De){if(Ze.participantData?.[De]){const Ke=Ze.participantData[De];A(at=>at?.id===De?at:{...Ke,id:De})}V(De)}}else n!=="new"&&r("/messages")}),Te=vo(Ln(He,"chats",J,"messages"),Ve=>{const Ze=Ve.docs.map(De=>({id:De.id,...De.data()})).sort((De,Ke)=>(De.createdAt?.seconds||0)-(Ke.createdAt?.seconds||0));d(Ze),v(!1),L||setTimeout(()=>s.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>{Te(),_e()}},[J,e,L,n,r]),$.useEffect(()=>{if(!P)return;const _e=vo(It(He,"users",P),Te=>{if(Te.exists()){const Ve=Te.data();A(Ze=>({...Ze,...Ve}))}});return()=>_e()},[P]);const se=async(_e,Te=null,Ve=null,Ze="text")=>{O(!0);try{let De=J;if(!De&&n==="new"){if(!k)throw new Error("Target user missing");const{startChat:Qe}=await s9(async()=>{const{startChat:Fe}=await Promise.resolve().then(()=>yL);return{startChat:Fe}},[]);De=await Qe(e.uid,k.uid,{name:k.name,avatar:k.photoURL},{name:e.displayName,avatar:e.photoURL}),Q(De),window.history.replaceState(null,"",`/messages/${De}`)}let Ke=null,at=Ze,it=Ve;if(Te||E){let Qe=Te||E.file;if(at==="image"||E?.type==="image"){at="image",it=it||E?.file.name;const Fe={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0};try{Qe=await un(Qe,Fe)}catch(Xe){console.warn("Compression failed, using original",Xe)}}else E&&(at=E.type,it=E.file.name);if(Ke=await a9(Qe),Ke.length>95e4)throw new Error("File is too large for database storage even after compression.")}L?(await gr(It(He,"chats",De,"messages",L),{text:_e,editedAt:Vr()}),q(null)):(await Ph(Ln(He,"chats",De,"messages"),{text:_e||"",type:at,fileUrl:Ke,fileName:it,senderId:e.uid,createdAt:Vr()}),await gr(It(He,"chats",De),{lastMessage:at==="audio"?" Voice Message":at==="image"?" Photo":_e||" File",updatedAt:Vr()})),p(""),N(null)}catch(De){console.error("Send failed",De),c(De.message||"Failed to send message","error")}finally{O(!1)}},B=async _e=>{_e.preventDefault(),!(!m.trim()&&!E)&&await se(m)},Y=async _e=>{if(window.confirm("Delete this message?"))try{await rg(It(He,"chats",n,"messages",_e)),c("Message deleted","success")}catch(Te){console.error("Delete failed",Te),c("Could not delete message","error")}},le=_e=>{if(!_e?.lastSeen)return"Offline";const Te=_e.lastSeen.seconds*1e3;return Date.now()-Te<180*1e3?"Online":`Last seen ${ag(new Date(Te),{addSuffix:!0})}`},re=_e=>_e?.lastSeen?Date.now()-_e.lastSeen.seconds*1e3<180*1e3:!1,te=_e=>_e?new Date(_e.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"...",ye=_e=>{const Te=_e.target.files[0];if(!Te)return;if(Te.size>10*1024*1024){c("File too large (Max 10MB)","error");return}const Ve=Te.type.startsWith("image/")?"image":"file",Ze=Ve==="image"?URL.createObjectURL(Te):null;N({file:Te,type:Ve,previewUrl:Ze})},Ae=_e=>{p(_e.text||""),q(_e.id),N(null),o.current&&(o.current.value="")},Oe=()=>{q(null),p(""),N(null)},Re=async()=>{if(z)W&&W.state!=="inactive"&&W.stop(),H(!1);else try{const _e=await navigator.mediaDevices.getUserMedia({audio:!0}),Te=new MediaRecorder(_e),Ve=[];Te.ondataavailable=Ze=>Ve.push(Ze.data),Te.onstop=async()=>{const Ze=new Blob(Ve,{type:"audio/webm"});await se(null,Ze,"voice_message.webm","audio"),_e.getTracks().forEach(De=>De.stop())},Te.start(),F(Te),H(!0)}catch(_e){console.error("Mic error:",_e),c("Could not access microphone","error")}};return b.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.32))] md:h-[calc(100vh-theme(spacing.16))] max-w-2xl mx-auto w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden relative",children:[y&&b.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 z-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),b.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white dark:bg-gray-800 z-10 shadow-sm",children:[b.jsx("button",{onClick:()=>r("/messages"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:b.jsx(_V,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),w?b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:w.photoURL||w.avatar||`https://ui-avatars.com/api/?name=${w.name||"User"}`,alt:w.name,className:"w-10 h-10 rounded-full object-cover border border-gray-100"}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:w.name||w.displayName||"User"}),b.jsxs("div",{className:"flex items-center gap-1.5",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${re(w)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:le(w)})]})]})]}):b.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Chat"})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900/50",children:[h.map(_e=>{const Te=_e.senderId===e.uid,Ve=_e.type==="audio",Ze=_e.type==="image",De=_e.type==="file";return b.jsxs("div",{className:`flex flex-col ${Te?"items-end":"items-start"} group`,children:[b.jsxs("div",{className:`flex items-end gap-2 max-w-[85%] ${Te?"flex-row-reverse":"flex-row"}`,children:[b.jsxs("div",{className:`px-4 py-2.5 shadow-sm text-sm md:text-base relative group-hover:shadow-md transition-all ${Te?"bg-green-600 text-white rounded-2xl rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none border border-gray-100 dark:border-gray-700"} ${Ve?"min-w-[150px]":""}`,children:[Ze&&b.jsx("a",{href:_e.fileUrl,target:"_blank",rel:"noopener noreferrer",children:b.jsx("img",{src:_e.fileUrl,alt:"attachment",className:"max-w-full h-48 object-cover rounded-lg mb-2"})}),Ve&&b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>{new Audio(_e.fileUrl).play()},className:`p-2 rounded-full ${Te?"bg-green-500 text-white":"bg-gray-100 text-gray-800"}`,children:b.jsx(ij,{className:"w-4 h-4"})}),b.jsx("div",{className:"h-1 flex-1 bg-current opacity-20 rounded-full w-24"}),b.jsx("span",{className:"text-xs opacity-70",children:"Voice"})]}),De&&b.jsxs("a",{href:_e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 underline decoration-current",children:[b.jsx(rT,{className:"w-4 h-4"}),b.jsx("span",{className:"truncate max-w-[150px]",children:_e.fileName||"File"})]}),_e.text&&b.jsx("p",{className:"whitespace-pre-wrap",children:_e.text}),_e.editedAt&&b.jsxs("span",{className:`text-[10px] block text-right mt-1 opacity-60 ${Te?"text-green-100":"text-gray-400"}`,children:["(Edited ",te(_e.editedAt),")"]})]}),Te&&b.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:()=>Ae(_e),className:"p-1 text-gray-400 hover:text-blue-500",title:"Edit",children:b.jsx(TI,{className:"w-3 h-3"})}),b.jsx("button",{onClick:()=>Y(_e.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:b.jsx(sg,{className:"w-3 h-3"})})]})]}),b.jsx("span",{className:"text-[10px] text-gray-400 mt-1 px-1 font-medium",children:te(_e.createdAt)})]},_e.id)}),b.jsx("div",{ref:s})]}),L&&b.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-gray-700 flex items-center justify-between text-xs text-yellow-700 dark:text-yellow-300",children:[b.jsx("span",{children:"Editing message..."}),b.jsx("button",{onClick:Oe,children:b.jsx(Mo,{className:"w-4 h-4"})})]}),E&&b.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-100 dark:border-gray-600 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[E.type==="image"?b.jsx("img",{src:E.previewUrl,alt:"preview",className:"w-10 h-10 rounded object-cover"}):b.jsx(kV,{className:"w-8 h-8 text-gray-500"}),b.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 truncate max-w-[200px]",children:E.file.name})]}),b.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full",children:b.jsx(Mo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex gap-2 items-end",children:[b.jsx("input",{type:"file",ref:o,onChange:ye,className:"hidden",accept:"image/*,.pdf,.doc,.docx,.txt"}),b.jsx("button",{onClick:()=>o.current?.click(),className:"p-3 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-all",disabled:z||L,children:b.jsx(rT,{className:"w-5 h-5"})}),b.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-gray-700 rounded-2xl flex items-center min-h-[48px]",children:z?b.jsxs("div",{className:"flex-1 px-4 flex items-center text-red-500 animate-pulse font-medium",children:[b.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3 animate-pulse"}),"Recording... ",new Date(R*1e3).toISOString().substr(14,5)]}):b.jsx("textarea",{value:m,onChange:_e=>p(_e.target.value),placeholder:L?"Edit your message...":t("type_message")||"Mesaj yazn...",className:"w-full bg-transparent px-4 py-3 max-h-32 focus:outline-none text-gray-800 dark:text-white resize-none",rows:1,style:{height:"auto",minHeight:"48px"}})}),m.trim()||E?b.jsx("button",{onClick:B,disabled:C,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-xl shadow-lg shadow-green-200 dark:shadow-none transition-all disabled:opacity-50 transform active:scale-95",children:C?b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b.jsx(mh,{className:"w-5 h-5"})}):b.jsx("button",{onClick:Re,className:`p-3 rounded-xl transition-all transform active:scale-95 shadow-lg ${z?"bg-red-500 hover:bg-red-600 text-white shadow-red-200":"bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:z?b.jsx(mh,{className:"w-5 h-5"}):b.jsx(JV,{className:"w-5 h-5"})})]})]})}function kT(){const{t:n,i18n:e}=Un(),t=ws(),{currentUser:r}=ii(),{addToast:s}=Ho(),{userId:o}=BT(),[c,h]=$.useState(null),[d,m]=$.useState(""),[p,y]=$.useState(""),[v,w]=$.useState(!1),[A,P]=$.useState([]),[V,L]=$.useState(!0),q=$.useRef(null),z=!o||r&&o===r.uid,H=o||r?.uid;$.useEffect(()=>{(async()=>{if(H){L(!0);try{const N=It(He,"users",H),C=await Ra(N);let O=null;C.exists()?O={uid:C.id,...C.data()}:(O={uid:H},z&&r&&(O={...O,...r})),O&&(h(O),z?(m(O.name||O.displayName||r.displayName||""),y(O.avatar||O.photoURL||r.photoURL||"")):(m(O.name||O.displayName||"Gardener"),y(O.avatar||O.photoURL||"")));const D=Ta(Ln(He,"posts"),qo("userId","==",String(H)));let Z=(await fc(D)).docs.map(k=>({id:k.id,...k.data()}));Z.sort((k,M)=>{const J=k.createdAt?.seconds||0;return(M.createdAt?.seconds||0)-J}),P(Z)}catch(N){console.error("Failed to load profile data",N)}finally{L(!1)}}})()},[H,z,r]);const W=async E=>{if(!z)return;const N=E.target.files[0];if(N){w(!0);try{const O=await un(N,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}),D=await new Promise(G=>{const Z=new FileReader;Z.readAsDataURL(O),Z.onload=k=>G(k.target.result)});y(D),await v0(It(He,"users",r.uid),{avatar:D,email:r.email,name:d||r.displayName,updatedAt:new Date},{merge:!0});try{await Gy(Zr.currentUser,{photoURL:D})}catch{}x0(r.uid,d,D),s(n("profile_updated")||"Profile updated!","success")}catch(C){console.error(C),s("Error updating avatar.","error")}finally{w(!1)}}},F=async E=>{if(E.preventDefault(),!!z&&d.trim()){w(!0);try{await Gy(Zr.currentUser,{displayName:d}),await v0(It(He,"users",r.uid),{name:d,updatedAt:new Date},{merge:!0}),x0(r.uid,d,p),s(n("profile_updated")||"Profile updated!","success")}catch{s("Failed to update profile.","error")}finally{w(!1)}}};if(!H)return b.jsx("div",{className:"p-10 text-center",children:n("login_required")});if(V&&!c)return b.jsx("div",{className:"flex h-screen items-center justify-center",children:b.jsx(Mr,{className:"h-8 w-8 animate-spin text-green-600"})});const R=E=>!E?.lastSeen||!E.lastSeen.seconds?!1:Date.now()-E.lastSeen.seconds*1e3<180*1e3,T=E=>E?.lastSeen?ag(new Date(E.lastSeen.seconds*1e3),{addSuffix:!0,locale:e.language==="tr"?GI:$_}):"Offline";return b.jsx("div",{className:"max-w-4xl mx-auto w-full pb-20 animate-fade-in p-4",children:b.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[b.jsx("div",{className:"w-full md:w-1/3",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg p-6 sticky top-24 border border-gray-100 dark:border-gray-700",children:[b.jsxs("div",{className:"flex flex-col items-center mb-6 relative",children:[b.jsxs("div",{className:`relative ${z?"group cursor-pointer":""} mt-2`,onClick:()=>z&&q.current?.click(),children:[b.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-green-50 dark:border-green-900/30 shadow-xl bg-gray-100 relative z-10",children:(z?p:c?.avatar||c?.photoURL)?b.jsx("img",{src:z?p:c?.avatar||c?.photoURL,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:b.jsx("img",{src:`https://ui-avatars.com/api/?name=${z?d||"Gardener":c?.name||c?.displayName||A.length>0&&A[0].authorName||"Gardener"}&background=random&size=128`,alt:"Avatar",className:"w-full h-full object-cover"})})}),!z&&c&&b.jsxs("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap px-3 py-1 rounded-full text-[10px] font-bold border-2 border-white dark:border-gray-800 flex items-center gap-1 shadow-sm z-20 ${R(c)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R(c)?"bg-green-500 animate-pulse":"bg-gray-400"}`}),R(c)?"Online":T(c)]}),z&&b.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:b.jsx(Jl,{className:"w-8 h-8 text-white"})}),v&&b.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center rounded-full",children:b.jsx(Mr,{className:"animate-spin text-green-600"})})]}),z&&b.jsx("input",{type:"file",ref:q,onChange:W,className:"hidden",accept:"image/*"}),b.jsx("h2",{className:"text-xl font-bold mt-4 text-gray-900 dark:text-white capitalize text-center",children:z?d||n("gardener")||"Bahvan":c?.name||c?.displayName||A.length>0&&A[0].authorName||n("gardener")||"Bahvan"}),z&&b.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),z?b.jsxs("form",{onSubmit:F,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:n("display_name")}),b.jsx("input",{type:"text",value:d,onChange:E=>m(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-500 outline-none"})]}),b.jsxs("button",{type:"submit",disabled:v,className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-3 rounded-xl shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[v?b.jsx(Mr,{className:"animate-spin w-4 h-4"}):b.jsx(AI,{className:"w-4 h-4"}),b.jsx("span",{children:n("save_changes")})]})]}):b.jsxs("div",{className:"text-center",children:[b.jsxs("p",{className:"text-sm text-gray-500 italic mb-4",children:[n("joined")||"Katlma Tarihi",": ",c?.createdAt?.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):n("unknown_date")]}),b.jsxs("button",{onClick:()=>{const E={uid:c.uid||H,name:c.name||c.displayName||A.length>0&&A[0].authorName||"Gardener",photoURL:c.photoURL||c.avatar||null};t("/messages/new",{state:{targetUser:E}})},className:"w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-green-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[b.jsx(fh,{className:"w-5 h-5"}),b.jsx("span",{children:n("send_message")})]})]}),b.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700",children:b.jsxs("div",{className:"flex justify-between text-center",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.length}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("posts")||"Gnderi"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.reduce((E,N)=>E+(N.likes?.length||0),0)}),b.jsx("div",{className:"text-xs text-gray-400 font-medium",children:n("likes")||"Beeni"})]})]})})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[b.jsx(MV,{className:"w-5 h-5 text-gray-400"}),b.jsx("span",{children:z?n("my_posts")||"Gnderilerim":n("user_posts_title",{name:c?.name||"Kullanc"})||`${c?.name||"Kullanc"} Gnderileri`})]}),V?b.jsx("div",{className:"flex justify-center py-20",children:b.jsx(Mr,{className:"w-8 h-8 animate-spin text-gray-300"})}):A.length>0?b.jsx("div",{className:"columns-1 gap-6 space-y-6",children:A.map(E=>b.jsx("div",{className:"break-inside-avoid",children:b.jsx(KI,{post:{...E,hideAuthor:z},onViewAnalysis:()=>{}})},E.id))}):b.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl border border-dashed border-gray-200 dark:border-gray-700",children:[b.jsx(qV,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("p",{className:"text-gray-500",children:n("no_posts_yet")})]})]})]})})}function l9(){const{t:n,i18n:e}=Un(),t={en:{intro:"This project aims to facilitate the detection and control of agricultural pests using an AI-based system.",sections:[{title:"Global Agriculture Network",text:"PlantAI is an advanced AI assistant developed to increase agricultural productivity and minimize crop losses.",icon:ti},{title:"Collective Intelligence",text:"Not just a diagnostic tool, but a massive community of farmers.",icon:tT},{title:"Our Mission",text:"We are putting technology in everyone's pocket for sustainable agriculture.",icon:aT}]},tr:{intro:"Bu proje, tarm zararllarnn tespitini ve onlarla mcadeleyi kolaylatrmak amacyla yapay zeka tabanl bir sistem gelitirilmesini kapsamaktadr.",sections:[{title:"Kresel Tarm A",text:"PlantAI, tarmsal verimlilii artrmak ve rn kayplarn en aza indirmek iin gelitirilmi gelimi bir yapay zeka asistandr.",icon:ti},{title:"Kolektif Bilgi Gc",text:"Sadece bir tehis arac deil, ayn zamanda dev bir ifti topluluudur.",icon:tT},{title:"Misyonumuz",text:"Srdrlebilir tarm iin teknolojiyi herkesin cebine sokuyoruz.",icon:aT}]}},r=t[e.language]||t.en;return b.jsxs("div",{className:"max-w-2xl mx-auto w-full pb-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full mb-4",children:b.jsx(EI,{className:"w-8 h-8 text-green-600 dark:text-green-500"})}),b.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:n("about")}),b.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 italic",children:['"',r.intro,'"']})]}),b.jsx("div",{className:"space-y-6",children:r.sections.map((s,o)=>{const c=s.icon;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex gap-4 items-start hover:shadow-md transition-shadow",children:[b.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-xl",children:b.jsx(c,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-2",children:s.title}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:s.text})]})]},o)})})]})}function c9(){const{t:n}=Un(),{currentUser:e}=ii();ws();const t=pr(),[r,s]=$.useState([]),[o,c]=$.useState(!0),[h,d]=$.useState(null),[m,p]=$.useState(!1),[y,v]=$.useState(null),[w,A]=$.useState(""),[P,V]=$.useState(!1),L=$.useRef(null),q=async(R,T)=>{if(R.stopPropagation(),!!window.confirm(n("confirm_delete")||"Are you sure you want to delete this analysis?"))try{await VI(T),s(E=>E.filter(N=>N.id!==T))}catch(E){console.error("Delete failed",E),alert("Failed to delete analysis.")}};$.useEffect(()=>{e&&z()},[e]),$.useEffect(()=>{t.state?.showTreatmentGuide&&(p(!0),window.history.replaceState({},document.title))},[t]);const z=async()=>{c(!0);const R=await PI(e.uid);s(R),c(!1),t.state?.newAnalysisId?d(t.state.newAnalysisId):R.length>0&&t.state?.showTreatmentGuide&&d(R[0].id)},H=R=>{d(T=>T===R?null:R),v(null)},W=async(R,T)=>{if(R.stopPropagation(),!T.isPublic&&window.confirm(n("confirm_share")||"Share this diagnosis with the community?"))try{await UI(T.id,T,T.plantType||"plant",e.displayName||n("gardener")||"Bahvan",e.photoURL),s(E=>E.map(N=>N.id===T.id?{...N,isPublic:!0}:N))}catch(E){console.error("Share failed",E),alert("Failed to share.")}},F=async R=>{if(w.trim()){V(!0);try{let T=null;if(L.current?.files?.[0]){const E=L.current.files[0];T=await new Promise(N=>{const C=new FileReader;C.onload=O=>N(O.target.result),C.readAsDataURL(E)})}await zI(R.id,T,w),v(null),A(""),z()}catch(T){console.error("Feedback failed",T),alert("Failed to save update.")}finally{V(!1)}}};return o?b.jsx("div",{className:"p-8 text-center flex justify-center",children:b.jsx(Mr,{className:"animate-spin w-8 h-8 text-green-600"})}):r.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-8 text-center text-gray-500 animate-fade-in",children:[b.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-6 rounded-full mb-6",children:b.jsx(ti,{className:"w-12 h-12 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:n("no_analyses_title")||"Henz Bir Analiz Yok"}),b.jsx("p",{className:"mb-8 max-w-md",children:n("no_analyses_desc")||"Bitkilerinizin saln takip etmek iin ilk analizinizi yapn."}),b.jsxs(kr,{to:"/",className:"bg-green-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-green-700 transition-colors shadow-lg hover:shadow-green-500/30 flex items-center gap-2",children:[b.jsx(Jl,{className:"w-5 h-5"}),n("start_diagnosis")||"Analiz Balat"]})]}):b.jsxs("div",{className:"max-w-4xl mx-auto w-full pb-24 px-4 animate-fade-in relative",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8 mt-6",children:[b.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white",children:[b.jsx(U_,{className:"w-7 h-7 text-green-600"}),n("treatment_updates")||"Tedavi & Takip"]}),b.jsxs("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[r.length," ",n("records")||"Kayt"]})]}),b.jsx("div",{className:"grid gap-6",children:r.map(R=>b.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-3xl shadow-sm border transition-all duration-300 overflow-hidden ${h===R.id?"border-green-500 ring-4 ring-green-500/10 shadow-lg":"border-gray-100 dark:border-gray-700 hover:shadow-md"} relative group`,children:[b.jsx("button",{onClick:T=>q(T,R.id),className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all opacity-0 group-hover:opacity-100 shadow-sm border border-gray-100 dark:border-gray-700",title:n("delete"),children:b.jsx(sg,{className:"w-5 h-5"})}),b.jsxs("div",{className:"p-5 flex gap-5 cursor-pointer md:items-center relative",onClick:()=>H(R.id),children:[b.jsx("img",{src:R.mainImage,alt:R.plantType,className:"w-24 h-24 md:w-32 md:h-32 rounded-2xl object-cover bg-gray-100 shadow-inner shrink-0"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex justify-between items-start mb-1",children:[b.jsx("h3",{className:"font-bold text-lg md:text-xl text-gray-900 dark:text-white capitalize truncate",children:R.plantType||"Unknown Plant"}),b.jsxs("span",{className:"text-xs font-medium text-gray-400 flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-lg shrink-0",children:[b.jsx(xI,{className:"w-3 h-3"}),R.createdAt?.seconds?new Date(R.createdAt.seconds*1e3).toLocaleDateString():"Today"]})]}),b.jsxs("p",{className:"text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[b.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),R.result.disease_name]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 md:line-clamp-1",children:R.result.description}),b.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs font-bold text-gray-400",children:[b.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[b.jsx(EV,{className:"w-4 h-4"}),b.jsx("span",{children:"7 Gnlk Program"})]}),R.isPublic&&b.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[b.jsx(b0,{className:"w-4 h-4"}),b.jsx("span",{children:"Paylald"})]})]})]}),b.jsx("div",{className:"absolute right-5 bottom-5 md:static md:block hidden",children:b.jsx(z_,{className:`w-6 h-6 text-gray-300 transition-transform ${h===R.id?"rotate-180":""}`})})]}),h===R.id&&b.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 p-6 animate-fade-in-down",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[b.jsx(sT,{className:"w-5 h-5 text-green-600"}),R.result.is_treatable===!1?n("preventive_measures")||"Koruyucu nlemler":n("treatment_steps")||"Tedavi Admlar"]}),R.result.is_treatable===!1&&b.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100 dark:bg-red-900/20 dark:text-red-300 dark:border-red-900/30",children:"Bu bitki ne yazk ki kurtarlamayabilir."}),b.jsx("div",{className:"space-y-3",children:(R.result.is_treatable===!1?R.result.preventive_measures:R.result.treatment_steps)?.map((T,E)=>b.jsxs("div",{className:"flex gap-4 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-100 dark:border-gray-600 shadow-sm",children:[b.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shrink-0 ${R.result.is_treatable===!1?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:E+1}),b.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-sm leading-relaxed pt-1",children:T})]},E))})]}),R.updates&&R.updates.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3 text-sm uppercase tracking-wider opacity-70",children:"Gelimeler"}),b.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:R.updates.map((T,E)=>b.jsxs("div",{className:"min-w-[200px] bg-white dark:bg-gray-700 p-3 rounded-xl border border-gray-100 shadow-sm",children:[T.imageUrl&&b.jsx("img",{src:T.imageUrl,className:"w-full h-32 object-cover rounded-lg mb-2"}),b.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(T.createdAt?.seconds*1e3).toLocaleDateString()}),b.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:T.note})]},E))})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.result.is_treatable&&b.jsxs("button",{onClick:()=>v(y===R.id?null:R.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-green-500/20 transition-all active:scale-95",children:[b.jsx(Jl,{className:"w-5 h-5"}),n("add_update")||"Gelime Ekle"]}),b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsxs("button",{onClick:T=>W(T,R),disabled:R.isPublic,className:`px-6 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all w-full ${R.isPublic?"bg-blue-50 text-blue-400 cursor-default":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[b.jsx(b0,{className:"w-5 h-5"}),R.isPublic?n("shared")||"Paylald":n("share")||"Payla"]}),!R.isPublic&&b.jsx("span",{className:"text-[10px] text-gray-400 mt-1",children:n("share_help_others")||"Toplulukla paylaarak bakalarna yardmc ol!"})]})]}),y===R.id&&b.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl border border-green-200 dark:border-green-800 shadow-inner animate-fade-in",children:[b.jsx("textarea",{value:w,onChange:T=>A(T.target.value),placeholder:"Bitkinin durumu nasl? rnein: 'Yapraklar tekrar yeerdi...'",className:"w-full p-3 rounded-xl border border-gray-200 dark:border-gray-700 dark:bg-gray-900 mb-3 text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none",rows:3}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("input",{type:"file",ref:L,className:"text-xs text-gray-500 file:mr-2 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),b.jsx("button",{onClick:()=>F(R),disabled:P,className:"bg-green-600 text-white p-2.5 rounded-full hover:bg-green-700 disabled:opacity-50 transition-colors",children:P?b.jsx(Mr,{className:"w-5 h-5 animate-spin"}):b.jsx(mh,{className:"w-5 h-5"})})]})]})]})]},R.id))}),m&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl max-w-lg w-full p-8 shadow-2xl relative overflow-hidden",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),b.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -ml-10 -mb-10"}),b.jsxs("div",{className:"text-center relative z-10",children:[b.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm",children:b.jsx(RV,{className:"w-10 h-10 text-green-600"})}),b.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2",children:"Tedavi Sreci Balad!"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:"Bitki analizi baaryla kaydedildi. yileme srecini buradan adm adm takip edebilirsin."}),b.jsxs("div",{className:"space-y-4 text-left mb-8",children:[b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(sT,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Uygula"}),b.jsx("p",{className:"text-xs text-gray-500",children:"nerilen tedavi admlarn dzenli olarak uygula."})]})]}),b.jsxs("div",{className:"flex gap-4 items-start p-4 bg-gray-50 dark:bg-gray-700/50 rounded-2xl",children:[b.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:b.jsx(Jl,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Raporla"}),b.jsx("p",{className:"text-xs text-gray-500",children:"Haftalk yeni fotoraflar ykleyerek geliimi kaydet."})]})]})]}),b.jsx("button",{onClick:()=>p(!1),className:"w-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold py-4 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Anladm, Bala"})]})]})})]})}var DT={},u9="@vercel/analytics",h9="1.6.1",d9=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function sR(){return typeof window<"u"}function aR(){try{const n="production"}catch{}return"production"}function f9(n="auto"){if(n==="auto"){window.vam=aR();return}window.vam=n}function m9(){return(sR()?window.vam:aR())||"production"}function E0(){return m9()==="development"}function g9(n){return n.scriptSrc?n.scriptSrc:E0()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function p9(n={debug:!0}){var e;if(!sR())return;f9(n.mode),d9(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=g9(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=u9+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=h9,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const s=E0()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${s}`)},E0()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function y9({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function _9(){if(!(typeof process>"u"||typeof DT>"u"))return DT.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function v9(n){return $.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),$.useEffect(()=>{p9({framework:n.framework||"react",basePath:n.basePath??_9(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),$.useEffect(()=>{n.route&&n.path&&y9({route:n.route,path:n.path})},[n.route,n.path]),null}function b9(){return b.jsxs(Pj,{children:[b.jsxs(qC,{children:[b.jsxs(Cr,{path:"/",element:b.jsx(Vj,{}),children:[b.jsx(Cr,{index:!0,element:b.jsx(vL,{})}),b.jsx(Cr,{path:"community",element:b.jsx(e9,{})}),b.jsx(Cr,{path:"messages",element:b.jsx(n9,{})}),b.jsx(Cr,{path:"messages/:chatId",element:b.jsx(o9,{})}),b.jsx(Cr,{path:"analyses",element:b.jsx(c9,{})}),b.jsx(Cr,{path:"profile",element:b.jsx(kT,{})}),b.jsx(Cr,{path:"profile/:userId",element:b.jsx(kT,{})}),b.jsx(Cr,{path:"about",element:b.jsx(l9,{})})]}),b.jsx(Cr,{path:"/login",element:b.jsx(jj,{})}),b.jsx(Cr,{path:"/register",element:b.jsx(Uj,{})})]}),b.jsx(v9,{})]})}class w9 extends FN.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?b.jsxs("div",{className:"p-8 bg-red-50 text-red-900 min-h-screen flex flex-col items-center justify-center",children:[b.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong."}),b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg max-w-2xl w-full overflow-auto border border-red-200",children:[b.jsxs("h2",{className:"text-xl font-bold mb-2 text-red-600",children:["Error: ",this.state.error?.toString()]}),b.jsx("details",{className:"whitespace-pre-wrap font-mono text-sm text-gray-700 bg-gray-100 p-4 rounded",children:this.state.errorInfo?.componentStack})]}),b.jsx("button",{onClick:()=>window.location.reload(),className:"mt-8 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold",children:"Reload Page"})]}):this.props.children}}const x9="Plant AI",E9="Welcome to Plant AI",T9="Plant Diagnosis",A9="Community",S9="Profile",I9="Login",R9="Messages",N9="Language",C9="Logout",k9="Dark Mode",D9="Light Mode",O9="My Analyses",M9="Register",P9="Upload Photo",V9="Take Photo",j9="Analyzing...",L9="Diagnosis Results",U9="Treatment",z9="Confidence",F9="Save Changes",B9="Saving...",q9="Display Name",H9="Email",$9="Tap to change avatar",G9="Profile updated successfully!",K9="About Project",Y9="Do you know the name of this plant?",Q9="e.g., Rose, Tomato, Unknown...",X9="1. Plant Name",W9="2. Capture Photo",J9="Next",Z9="I don't know",e8="I couldn't identify it clearly. Please take a close-up photo of a leaf.",t8="Take Close-up Photo",n8="Login to view detailed diagnosis and treatment plan.",r8="Login to View Results",i8="Detailed analysis is available for members only.",s8="AI Powered Plant Doctor",a8='Heal Your Plants with <span class="text-green-600">Artificial Intelligence</span>',o8="Take a photo, diagnose diseases instantly, and get expert treatment advice. Join thousands of happy farmers.",l8="Start Diagnosis",c8="Identify",u8="Tell us the plant name or type.",h8="Analyze",d8="Upload photos of the affected area.",f8="Heal",m8="Get instant treatment plan.",g8="Welcome, ",p8="Diagnosis failed. Please try again.",y8="Back",_8="Tomato",v8="Pepper",b8="Cucumber",w8="Rose",x8="Succulent",E8="Orchid",T8="Lemon",A8="Strawberry",S8="Mint",I8="Other",R8="Healthy / No Issue",N8="Yellowing Leaves",C8="Leaf Spots",k8="Wilting",D8="Pests / Bugs",O8="Root/Stem Rot",M8="Mold / Fungus",P8="Unknown / Help Needed",V8="Auto-Detect from Image",j8="Detecting...",L8="Ask Question",U8="Please login to post.",z8="Login Required",F8="Are you sure you want to delete this post?",B8="Just now",q8="Failed to delete post",H8="Failed to post comment",$8="Failed to update post",G8="Add a comment...",K8="Please login to comment.",Y8="No comments yet. Be the first!",Q8="Edit Post",X8="Cancel",W8="Save",J8="Gardener",Z8="Community Member",e7="Send Message",t7="Starting...",n7="Please login to message users.",r7="You cannot message yourself.",i7="Failed to start chat.",s7=" No posts yet",a7="Be the first to share your garden!",o7="No results",l7="Like",c7="Comment",u7="Edit",h7="Joined",d7="Unknown Date",f7="View Profile",m7="Block User",g7="Unblock User",p7="Posts",y7="Likes",_7="My Posts",v7="{{name}}'s Posts",b7="New Chat",w7="View Analysis Report",x7="Type a message...",E7="POWERED BY GEMINI AI",T7="Heal your plants with",A7="AI Precision",S7="Instantly identify diseases, get treatment plans, and monitor plant health with our advanced AI botanist. Just snap a photo.",I7="Instant Analysis",R7="Get results in seconds. Our AI analyzes leaf patterns to detect subtle signs of disease.",N7="Smart Interactions",C7="The AI knows when it needs a better look. It will ask for macro shots if the problem is unclear.",k7="Verified Treatments",D7="Get actionable advice. From organic remedies to chemical treatments, we guide you to recovery.",O7="Your Personal Pocket Botanist",M7="Plant AI combines the power of Google's Gemini models with expert botanical knowledge. We don't just guess; we analyze texture, color, and spot patterns to categorize health issues with high precision. Whether you're a home gardener or a professional farmer, our tool adapts to your needs.",P7={app_name:x9,welcome:E9,plant_diagnosis:T9,community:A9,profile:S9,login:I9,messages:R9,language:N9,logout:C9,dark_mode:k9,light_mode:D9,analyses:O9,register:M9,upload_photo:P9,take_photo:V9,analyzing:j9,results:L9,treatment:U9,confidence:z9,save_changes:F9,saving:B9,display_name:q9,email:H9,change_avatar:$9,profile_updated:G9,about:K9,what_plant_question:Y9,what_plant_placeholder:Q9,scan_step_1:X9,scan_step_2:W9,next_step:J9,skip:Z9,need_macro_photo:e8,take_macro_photo:t8,login_blur_text:n8,login_to_view:r8,guest_limited:i8,hero_badge:s8,hero_title:a8,hero_desc:o8,start_diagnosis:l8,step_1_title:c8,step_1_desc:u8,step_2_title:h8,step_2_desc:d8,step_3_title:f8,step_3_desc:m8,welcome_user:g8,error_diagnosis_failed:p8,back:y8,plant_tomato:_8,plant_pepper:v8,plant_cucumber:b8,plant_rose:w8,plant_succulent:x8,plant_orchid:E8,plant_lemon:T8,plant_strawberry:A8,plant_mint:S8,plant_other:I8,disease_none:R8,disease_yellowing:N8,disease_spots:C8,disease_wilting:k8,disease_bugs:D8,disease_rot:O8,disease_mold:M8,disease_unknown:P8,auto_detect:V8,detecting:j8,ask_question:L8,login_to_post:U8,login_required:z8,confirm_delete_post:F8,just_now:B8,failed_delete_post:q8,failed_post_comment:H8,failed_update_post:$8,add_comment_placeholder:G8,login_to_comment:K8,no_comments_yet:Y8,edit_post:Q8,cancel:X8,save:W8,gardener:J8,community_member:Z8,send_message:e7,starting_chat:t7,login_to_message:n7,cannot_message_self:r7,failed_start_chat:i7,no_posts_yet:s7,be_the_first:a7,no_results:o7,like:l7,comment:c7,edit:u7,delete:"Delete",joined:h7,unknown_date:d7,view_profile:f7,block_user:m7,unblock_user:g7,posts:p7,likes:y7,my_posts:_7,user_posts_title:v7,new_conversation:b7,view_analysis_report:w7,type_message:x7,ai_powered_v2:E7,hero_title_1:T7,hero_title_highlight:A7,hero_desc_v2:S7,feature_1_title:I7,feature_1_desc:R7,feature_2_title:N7,feature_2_desc:C7,feature_3_title:k7,feature_3_desc:D7,summary_title:O7,summary_desc:M7},V7="Bitki AI",j7="Bitki AI'ye Hogeldiniz",L7="Bitki Tehisi",U7="Topluluk",z7="Profil",F7="Giri Yap",B7="Mesajlar",q7="Dil",H7="k Yap",$7="Koyu Tema",G7="Aydnlk Tema",K7="Analizlerim",Y7="Kayt Ol",Q7="Fotoraf Ykle",X7="Fotoraf ek",W7="Analiz ediliyor...",J7="Domates",Z7="Biber",ez="Salatalk",tz="Patlcan",nz="Patates",rz="Soan",iz="Sarmsak",sz="Marul",az="Ispanak",oz="Havu",lz="Fasulye",cz="Msr",uz="Kabak",hz="ilek",dz="Limon",fz="Portakal",mz="Elma",gz="zm",pz="Karpuz",yz="Kavun",_z="Kiraz",vz="eftali",bz="Gl",wz="Orkide",xz="Sukulent",Ez="Lale",Tz="Ayiei",Az="Papatya",Sz="Lavanta",Iz="Kakts",Rz="Zeytin",Nz="am",Cz="Palmiye",kz="Nane",Dz="Fesleen",Oz="Biberiye",Mz="Maydanoz",Pz="Dier",Vz="Salkl / Sorun Yok",jz="Yaprak Sararmas",Lz="Yaprak Lekeleri",Uz="Solma",zz="Bcek / Haere",Fz="Kk/Gvde rmesi",Bz="Kf / Mantar",qz="Mildiy",Hz="Besin Eksiklii",$z="Bilinmiyor / Yardm Lazm",Gz="Fotoraftan Bul",Kz="Taranyor...",Yz="Bitki Se...",Qz="Tehis Sonular",Xz="Tedavi",Wz="Gven Oran",Jz="Deiiklikleri Kaydet",Zz="Analizi Kaydet",eF="Kaydedildi",tF="Analiz baaryla kaydedildi!",nF="Bu analiz zaten toplulukla paylald.",rF="Bu analizi toplulukla paylamak istiyor musunuz?",iF="Baaryla paylald!",sF="Analizlerim",aF="Kaydediliyor...",oF="Grnen sim",lF="E-posta",cF="Fotoraf deitirmek iin dokunun",uF="Profil baaryla gncellendi!",hF="Proje Hakknda",dF="Bu bitkinin adn biliyor musunuz?",fF="rn. Gl, Domates, Bilmiyorum...",mF="1. Bitki Ad",gF="2. Fotoraf ek",pF="Devam Et",yF="Bilmiyorum",_F="Tam olarak tehis edemedim. Ltfen bir yapran yakndan fotorafn ekin.",vF="Yakndan ek",bF="Detayl tehis ve tedavi plann grmek iin giri yapn.",wF="Sonucu Grmek in Giri Yap",xF="Detayl analiz sadece yelere zeldir.",EF="Yapay Zeka Destekli Bitki Doktoru",TF='Bitkilerinizi <span class="text-green-600">Yapay Zeka</span> ile yiletirin',AF="Fotoraf ekin, hastalklar annda tehis edin ve uzman tedavi nerileri aln. Binlerce mutlu iftiye katln.",SF="Tehise Bala",IF="Tanmla",RF="Bitkinin adn veya trn belirtin.",NF="Analiz Et",CF="Etkilenen blgenin fotorafn ykleyin.",kF="yiletir",DF="Annda tedavi planna kavuun.",OF="Hogeldin, ",MF="Tehis baarsz oldu. Ltfen tekrar deneyin.",PF="Geri",VF="Az nce",jF="Bu gnderiyi silmek istediinize emin misiniz?",LF="Gnderi silinemedi",UF="Yorum gnderilemedi",zF="Gnderi gncellenemedi",FF="Yorum yaz...",BF="Yorum yapmak iin giri yapn.",qF="Henz yorum yok. lk yorumu sen yap!",HF="Gnderiyi Dzenle",$F="ptal",GF="Kaydet",KF="Bahvan",YF="Topluluk yesi",QF="Mesaj Gnder",XF="Balatlyor...",WF="Mesaj gndermek iin giri yapn.",JF="Kendinize mesaj atamazsnz.",ZF="Sohbet balatlamad.",eB=" Henz gnderi yok",tB="Baheni paylaan ilk kii ol!",nB="Sonu yok",rB="Been",iB="Yorum",sB="Dzenle",aB="Ad Soyad",oB="ifre",lB="Toplulua katlmak iin hesap oluturun.",cB="Dorulama E-postas Gnderildi! Ltfen gelen kutunuzu (ve SPAM klasrn) kontrol edin.",uB="E-postanz Dorulayn",hB="Dorulama balantsn gnderdik. Devam etmek iin ltfen e-postanz kontrol edin.",dB="E-posta Uygulamasn A",fB="Doruladm, Giri Yap",mB="Zaten hesabnz var m?",gB="Katlma Tarihi",pB="Bilinmiyor",yB="Profili Gr",_B="Kullancy Engelle",vB="Engeli Kaldr",bB="Gnderi",wB="Beeni",xB="Gnderilerim",EB="{{name}} Gnderileri",TB="Yeni Sohbet",AB="Analiz Raporunu Gr",SB="Mesaj yazn...",IB="GEMINI AI DESTEKL",RB="Bitkilerinizi yiletirin",NB="Yapay Zeka Hassasiyeti",CB="Gelimi AI botanikimiz ile hastalklar annda tehis edin, tedavi planlar aln ve bitki saln izleyin. Sadece bir fotoraf ekin.",kB="Annda Analiz",DB="Saniyeler iinde sonu aln. Yapay zekamz hastalk belirtilerini tespit etmek iin yaprak desenlerini analiz eder.",OB="Akll Etkileimler",MB="Yapay zeka ne zaman daha iyi bir baka ihtiyac olduunu bilir. Sorun net deilse makro ekimler ister.",PB="Dorulanm Tedaviler",VB="Uygulanabilir tavsiyeler aln. Organik zmlerden kimyasal tedavilere kadar sizi iyilemeye ynlendiriyoruz.",jB="Kiisel Cep Botanikiniz",LB="Plant AI, Google'n Gemini modellerinin gcn uzman botanik bilgisiyle birletirir. Sadece tahmin etmiyoruz; salk sorunlarn yksek hassasiyetle kategorize etmek iin doku, renk ve leke desenlerini analiz ediyoruz. ster ev bahvan olun ister profesyonel bir ifti, aracmz ihtiyalarnza uyum salar.",UB={app_name:V7,welcome:j7,plant_diagnosis:L7,community:U7,profile:z7,login:F7,messages:B7,language:q7,logout:H7,dark_mode:$7,light_mode:G7,analyses:K7,register:Y7,upload_photo:Q7,take_photo:X7,analyzing:W7,plant_tomato:J7,plant_pepper:Z7,plant_cucumber:ez,plant_eggplant:tz,plant_potato:nz,plant_onion:rz,plant_garlic:iz,plant_lettuce:sz,plant_spinach:az,plant_carrot:oz,plant_bean:lz,plant_corn:cz,plant_zucchini:uz,plant_strawberry:hz,plant_lemon:dz,plant_orange:fz,plant_apple:mz,plant_grape:gz,plant_watermelon:pz,plant_melon:yz,plant_cherry:_z,plant_peach:vz,plant_rose:bz,plant_orchid:wz,plant_succulent:xz,plant_tulip:Ez,plant_sunflower:Tz,plant_daisy:Az,plant_lavender:Sz,plant_cactus:Iz,plant_olive:Rz,plant_pine:Nz,plant_palm:Cz,plant_mint:kz,plant_basil:Dz,plant_rosemary:Oz,plant_parsley:Mz,plant_other:Pz,disease_none:Vz,disease_yellowing:jz,disease_spots:Lz,disease_wilting:Uz,disease_bugs:zz,disease_rot:Fz,disease_mold:Bz,disease_mildew:qz,disease_nutrient:Hz,disease_unknown:$z,auto_detect:Gz,detecting:Kz,select_plant:Yz,results:Qz,treatment:Xz,confidence:Wz,save_changes:Jz,save_analysis:Zz,saved:eF,save_success:tF,already_shared:nF,confirm_share:rF,share_success:iF,my_analyses:sF,saving:aF,display_name:oF,email:lF,change_avatar:cF,profile_updated:uF,about:hF,what_plant_question:dF,what_plant_placeholder:fF,scan_step_1:mF,scan_step_2:gF,next_step:pF,skip:yF,need_macro_photo:_F,take_macro_photo:vF,login_blur_text:bF,login_to_view:wF,guest_limited:xF,hero_badge:EF,hero_title:TF,hero_desc:AF,start_diagnosis:SF,step_1_title:IF,step_1_desc:RF,step_2_title:NF,step_2_desc:CF,step_3_title:kF,step_3_desc:DF,welcome_user:OF,error_diagnosis_failed:MF,back:PF,just_now:VF,confirm_delete_post:jF,failed_delete_post:LF,failed_post_comment:UF,failed_update_post:zF,add_comment_placeholder:FF,login_to_comment:BF,no_comments_yet:qF,edit_post:HF,cancel:$F,save:GF,gardener:KF,community_member:YF,send_message:QF,starting_chat:XF,login_to_message:WF,cannot_message_self:JF,failed_start_chat:ZF,no_posts_yet:eB,be_the_first:tB,no_results:nB,like:rB,comment:iB,edit:sB,delete:"Sil",full_name:aB,password:oB,create_account_desc:lB,verification_email_sent:cB,verify_email_title:uB,verify_email_desc:hB,open_email_app:dB,i_verified_it:fB,already_have_account:mB,joined:gB,unknown_date:pB,view_profile:yB,block_user:_B,unblock_user:vB,posts:bB,likes:wB,my_posts:xB,user_posts_title:EB,new_conversation:TB,view_analysis_report:AB,type_message:SB,ai_powered_v2:IB,hero_title_1:RB,hero_title_highlight:NB,hero_desc_v2:CB,feature_1_title:kB,feature_1_desc:DB,feature_2_title:OB,feature_2_desc:MB,feature_3_title:PB,feature_3_desc:VB,summary_title:jB,summary_desc:LB};$n.use(Zk).init({resources:{en:{translation:P7},tr:{translation:UB}},lng:"tr",fallbackLng:"en",interpolation:{escapeValue:!1}});YN.createRoot(document.getElementById("root")).render(b.jsx($.StrictMode,{children:b.jsx(w9,{children:b.jsx(dk,{children:b.jsx(uV,{children:b.jsx(b9,{})})})})}));
